// AegisWallet API - Bundled for Vercel Node.js Runtime
// Generated at: 2025-12-02T18:50:44.442Z
// Entry: src/server/vercel.ts

var p6=Object.create;var Rd=Object.defineProperty;var m6=Object.getOwnPropertyDescriptor;var f6=Object.getOwnPropertyNames;var h6=Object.getPrototypeOf,g6=Object.prototype.hasOwnProperty;var s=(t,e)=>Rd(t,"name",{value:e,configurable:!0}),y6=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ht=(t,e)=>()=>(t&&(e=t(t=0)),e);var Me=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),vn=(t,e)=>{for(var r in e)Rd(t,r,{get:e[r],enumerable:!0})},v6=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of f6(e))!g6.call(t,o)&&o!==r&&Rd(t,o,{get:()=>e[o],enumerable:!(n=m6(e,o))||n.enumerable});return t};var Tc=(t,e,r)=>(r=t!=null?p6(h6(t)):{},v6(e||!t||!t.__esModule?Rd(r,"default",{value:t,enumerable:!0}):r,t));var Nt,Qk,Xk,zd,Ud,ii=Ht(()=>{Nt="ALL",Qk="all",Xk=["get","post","put","delete","options","patch"],zd="Can not add a route since the matcher is already built.",Ud=class extends Error{static{s(this,"UnsupportedPathError")}}});var kc,sg=Ht(()=>{kc="__COMPOSED_HANDLER"});var Hv,ou,Dp=Ht(()=>{"use strict";Hv={staticAssets:"public, max-age=31536000, immutable",htmlFiles:"no-cache, no-store, must-revalidate",apiResponses:"private, max-age=60",dynamicContent:"private, no-cache"},ou={NODE_ENV:"production",PORT:Number(process.env.PORT)||3e3,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,DATABASE_URL:process.env.DATABASE_URL||"",DATABASE_URL_UNPOOLED:process.env.DATABASE_URL_UNPOOLED||"",CLERK_PUBLISHABLE_KEY:process.env.VITE_CLERK_PUBLISHABLE_KEY||process.env.CLERK_PUBLISHABLE_KEY||"",CLERK_SECRET_KEY:process.env.CLERK_SECRET_KEY||"",API_URL:process.env.VITE_API_URL||process.env.API_URL||"http://localhost:3000",CORS_ORIGINS:(process.env.CORS_ORIGINS||"http://localhost:5173,http://localhost:3000").split(",")}});var wC,SC=Ht(()=>{wC=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i});var Jv,xC,u5,Zv,Gv=Ht(()=>{Jv=s((t,e=Zv)=>{let r=/\.([a-zA-Z0-9]+?)$/,n=t.match(r);if(!n)return;let o=e[n[1]];return o&&o.startsWith("text")&&(o+="; charset=utf-8"),o},"getMimeType"),xC=s(t=>{for(let e in Zv)if(Zv[e]===t)return e},"getExtension"),u5={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Zv=u5});var TC,EC=Ht(()=>{TC=s((...t)=>{let e=t.filter(o=>o!=="").join("/");e=e.replace(/(?<=\/)\/+/g,"");let r=e.split("/"),n=[];for(let o of r)o===".."&&n.length>0&&n.at(-1)!==".."?n.pop():o!=="."&&n.push(o);return n.join("/")||"."},"defaultJoin")});var kC,l5,d5,IC,PC=Ht(()=>{SC();Gv();EC();kC={br:".br",zstd:".zst",gzip:".gz"},l5=Object.keys(kC),d5="index.html",IC=s(t=>{let e=t.root??"./",r=t.path,n=t.join??TC;return async(o,i)=>{if(o.finalized)return i();let a;if(t.path)a=t.path;else try{if(a=decodeURIComponent(o.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(a))throw new Error}catch{return await t.onNotFound?.(o.req.path,o),i()}let c=n(e,!r&&t.rewriteRequestPath?t.rewriteRequestPath(a):a);t.isDir&&await t.isDir(c)&&(c=n(c,d5));let l=t.getContent,d=await l(c,o);if(d instanceof Response)return o.newResponse(d.body,d);if(d){let p=t.mimes&&Jv(c,t.mimes)||Jv(c);if(o.header("Content-Type",p||"application/octet-stream"),t.precompressed&&(!p||wC.test(p))){let m=new Set(o.req.header("Accept-Encoding")?.split(",").map(h=>h.trim()));for(let h of l5){if(!m.has(h))continue;let y=await l(c+kC[h],o);if(y){d=y,o.header("Content-Encoding",h),o.header("Vary","Accept-Encoding",{append:!0});break}}}return await t.onFound?.(c,o),o.body(d)}await t.onNotFound?.(c,o),await i()}},"serveStatic")});import{stat as p5}from"node:fs/promises";import{join as m5}from"node:path";var AC,CC=Ht(()=>{PC();AC=s(t=>s(async function(r,n){return IC({...t,getContent:s(async a=>{let c=Bun.file(a);return await c.exists()?c:null},"getContent"),join:m5,isDir:s(async a=>{let c;try{c=(await p5(a)).isDirectory()}catch{}return c},"isDir")})(r,n)},"serveStatic2"),"serveStatic")});var OC=Ht(()=>{});var $C,RC=Ht(()=>{OC();$C=s((t,e)=>{for(let[r,n]of Object.entries(e)){let o=new RegExp("/:"+r+"(?:{[^/]+})?\\??");t=t.replace(o,n?`/${n}`:"")}return t},"replaceUrlParam")});var f5,NC,DC=Ht(()=>{f5=1024,NC=s(({concurrency:t,interval:e}={})=>{if(t||=f5,t===1/0)return{run:s(async o=>o(),"run")};let r=new Set,n=s(async(o,i,a)=>{if(r.size>=t)return i||=new Promise(d=>a=d),setTimeout(()=>n(o,i,a)),i;let c={};r.add(c);let l=await o();return e?setTimeout(()=>r.delete(c),e):r.delete(c),a?(a(l),i):l},"run");return{run:n}},"createPool")});var jC,Kv,MC=Ht(()=>{sg();jC=s(t=>t.length>1,"isMiddleware"),Kv=s(t=>t[kc]?Kv(t[kc]):t,"findTargetHandler")});var zC,h5,g5,y5,v5,iu,UC,Wv,Qv=Ht(()=>{ii();MC();zC=s(t=>t.split(/[\/\\]/).slice(0,-1).join("/"),"dirname"),h5=s(t=>t.replace(/(\\)/g,"/").replace(/\/$/g,""),"normalizePath"),g5=s((t,e)=>{t.length===0||e?t.push(".."):t.pop()},"handleParent"),y5=s((t,e)=>{t=t.replace(/^\.(?!.)/,""),t!==""&&e.push(t)},"handleNonDot"),v5=s((t,e)=>{let r=!1;for(let n of t)n===".."?(g5(e,r),r=!0):(y5(n,e),r=!1)},"handleSegments"),iu=s((...t)=>{t=t.map(h5);let e=[];return v5(t.join("/").split("/"),e),(t[0][0]==="/"?"/":"")+e.join("/")},"joinPaths"),UC=s(t=>t.routes.reduce((e,{method:r,handler:n,path:o})=>{let i=Kv(n);return["GET",Nt].includes(r)&&!jC(i)&&e.push({path:o}),e},[]),"filterStaticGenerateRoutes"),Wv=s(t=>t.split("/").some(e=>e.startsWith(":")||e.includes("*")),"isDynamicRoute")});var LC,jp,sxe,Xv=Ht(()=>{Qv();LC="HONO_SSG_CONTEXT",jp="x-hono-disable-ssg",sxe=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[jp]:"true"}})}catch{return null}})()});var _5,b5,w5,S5,x5,T5,E5,k5,I5,P5,A5,qC,C5,O5,FC,BC=Ht(()=>{RC();DC();Gv();Xv();Qv();_5=2,b5="text/plain",w5="./static",S5=s((t,e,r,n)=>{let o=E5(r,n);return t.endsWith(`.${o}`)?iu(e,t):t==="/"?iu(e,`index.${o}`):t.endsWith("/")?iu(e,t,`index.${o}`):iu(e,`${t}.${o}`)},"generateFilePath"),x5=s(async t=>{let e=t.headers.get("Content-Type");try{return e?.includes("text")||e?.includes("json")?await t.text():await t.arrayBuffer()}catch(r){throw new Error(`Error processing response: ${r instanceof Error?r.message:"Unknown error"}`)}},"parseResponseContent"),T5={"text/html":"html","text/xml":"xml","application/xml":"xml","application/yaml":"yaml"},E5=s((t,e)=>{let r=e||T5;return t in r?r[t]:xC(t)||"html"},"determineExtension"),k5=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Request&&(r=o)}return r}:t,"combineBeforeRequestHooks"),I5=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Response&&(r=o)}return r}:t,"combineAfterResponseHooks"),P5=s((t,e,r)=>Array.isArray(t)?async n=>{for(let o of t)await o(n,e,r)}:t,"combineAfterGenerateHooks"),A5=s(function*(t,e,r,n){let o="http://localhost",i=NC({concurrency:n});for(let a of UC(t)){let c=new URL(a.path,o).toString(),l=new Request(c);yield new Promise(async(d,p)=>{try{if(e){let h=await e(l);if(!h){d(void 0);return}l=h}if(await i.run(()=>t.fetch(l)),!l.ssgParams){if(Wv(a.path)){d(void 0);return}l.ssgParams=[{}]}let m={method:l.method,headers:l.headers};d((function*(){for(let h of l.ssgParams)yield new Promise(async(y,g)=>{try{let f=$C(a.path,h),_=await i.run(()=>t.request(f,m,{[LC]:!0}));if(_.headers.get(jp)){y(void 0);return}if(r){let S=await r(_);if(!S){y(void 0);return}_=S}let w=_.headers.get("Content-Type")?.split(";")[0]||b5,b=await x5(_);y({routePath:f,mimeType:w,content:b})}catch(f){g(f)}})})())}catch(m){p(m)}})}},"fetchRoutesContent"),qC=new Set,C5=s(async(t,e,r,n)=>{let o=await t;if(!o)return;let{routePath:i,content:a,mimeType:c}=o,l=S5(i,r,c,n),d=zC(l);return qC.has(d)||(await e.mkdir(d,{recursive:!0}),qC.add(d)),typeof a=="string"?await e.writeFile(l,a):a instanceof ArrayBuffer&&await e.writeFile(l,new Uint8Array(a)),l},"saveContentToFile"),O5={afterResponseHook:s(t=>t.status!==200?!1:t,"afterResponseHook")},FC=s(async(t,e,r)=>{let n,o=[],i=[],a=r?.plugins||[O5],c=[],l=[],d=[];r?.beforeRequestHook&&c.push(...Array.isArray(r.beforeRequestHook)?r.beforeRequestHook:[r.beforeRequestHook]),r?.afterResponseHook&&l.push(...Array.isArray(r.afterResponseHook)?r.afterResponseHook:[r.afterResponseHook]),r?.afterGenerateHook&&d.push(...Array.isArray(r.afterGenerateHook)?r.afterGenerateHook:[r.afterGenerateHook]);for(let p of a)p.beforeRequestHook&&c.push(...Array.isArray(p.beforeRequestHook)?p.beforeRequestHook:[p.beforeRequestHook]),p.afterResponseHook&&l.push(...Array.isArray(p.afterResponseHook)?p.afterResponseHook:[p.afterResponseHook]),p.afterGenerateHook&&d.push(...Array.isArray(p.afterGenerateHook)?p.afterGenerateHook:[p.afterGenerateHook]);try{let p=r?.dir??w5,m=r?.concurrency??_5,h=k5(c.length>0?c:[_=>_]),y=I5(l.length>0?l:[_=>_]),g=A5(t,h,y,m);for(let _ of g)o.push(_.then(w=>{if(w)for(let b of w)i.push(C5(b,e,p,r?.extensionMap).catch(S=>S))}));await Promise.all(o);let f=[];for(let _ of i){let w=await _;if(typeof w=="string")f.push(w);else if(w)throw w}n={success:!0,files:f}}catch(p){let m=p instanceof Error?p:new Error(String(p));n={success:!1,files:[],error:m}}return d.length>0&&await P5(d,e,r)(n,e,r),n},"toSSG")});var VC=Ht(()=>{BC();Xv()});var $5,Yv,HC,ZC=Ht(()=>{VC();({write:$5}=Bun),Yv={writeFile:s(async(t,e)=>{await $5(t,e)},"writeFile"),mkdir:s(async()=>{},"mkdir")},HC=s(async(t,e)=>FC(t,Yv,e),"toSSG")});var JC,GC,KC,WC=Ht(()=>{JC=class{static{s(this,"WSContext")}#e;constructor(t){this.#e=t,this.raw=t.raw,this.url=t.url?new URL(t.url):null,this.protocol=t.protocol??null}send(t,e){this.#e.send(t,e??{})}raw;binaryType="arraybuffer";get readyState(){return this.#e.readyState}url;protocol;close(t,e){this.#e.close(t,e)}},GC=s(t=>new MessageEvent("message",{data:t}),"createWSMessageEvent"),KC=s(t=>(...e)=>{if(typeof e[0]=="function"){let[r,n]=e;return s(async function(i,a){let c=await r(i),l=await t(i,c,n);if(l)return l;await a()},"upgradeWebSocket")}else{let[r,n,o]=e;return(async()=>{let i=await t(r,n,o);if(!i)throw new Error("Failed to upgrade WebSocket");return i})()}},"defineWebSocketHelper")});var Mp,e_=Ht(()=>{Mp=s(t=>"server"in t.env?t.env.server:t.env,"getBunServer")});var t_,r_,n_,QC,XC=Ht(()=>{WC();e_();t_=s(t=>new JC({send:s((e,r)=>{t.send(e,r?.compress)},"send"),raw:t,readyState:t.readyState,url:t.data.url,protocol:t.data.protocol,close(e,r){t.close(e,r)}}),"createWSContext"),r_=KC((t,e)=>{let r=Mp(t);if(!r)throw new TypeError("env has to include the 2nd argument of fetch.");if(r.upgrade(t.req.raw,{data:{events:e,url:new URL(t.req.url),protocol:t.req.url}}))return new Response(null)}),n_={open(t){let e=t.data.events;e.onOpen&&e.onOpen(new Event("open"),t_(t))},close(t,e,r){let n=t.data.events;n.onClose&&n.onClose(new CloseEvent("close",{code:e,reason:r}),t_(t))},message(t,e){let r=t.data.events;if(r.onMessage){let n=typeof e=="string"?e:e.buffer;r.onMessage(GC(n),t_(t))}}},QC=s(()=>({upgradeWebSocket:r_,websocket:n_}),"createBunWebSocket")});var YC,e1=Ht(()=>{e_();YC=s(t=>{let e=Mp(t);if(!e)throw new TypeError("env has to include the 2nd argument of fetch.");if(typeof e.requestIP!="function")throw new TypeError("server.requestIP is not a function.");let r=e.requestIP(t.req.raw);return r?{remote:{address:r.address,addressType:r.family==="IPv6"||r.family==="IPv4"?r.family:void 0,port:r.port}}:{remote:{}}},"getConnInfo")});var t1={};vn(t1,{bunFileSystemModule:()=>Yv,createBunWebSocket:()=>QC,getConnInfo:()=>YC,serveStatic:()=>AC,toSSG:()=>HC,upgradeWebSocket:()=>r_,websocket:()=>n_});var r1=Ht(()=>{CC();ZC();XC();e1()});var n1={};vn(n1,{htmlCache:()=>N5,staticAssetsCache:()=>R5});var R5,N5,o1=Ht(()=>{"use strict";Dp();R5=s(()=>async(t,e)=>{t.header("Cache-Control",Hv.staticAssets),await e()},"staticAssetsCache"),N5=s(()=>async(t,e)=>{t.header("Cache-Control",Hv.htmlFiles),t.header("Pragma","no-cache"),t.header("Expires","0"),await e()},"htmlCache")});var M1=Me(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.parse=T9;Kp.serialize=E9;var v9=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,_9=/^[\u0021-\u003A\u003C-\u007E]*$/,b9=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,w9=/^[\u0020-\u003A\u003D-\u007E]*$/,S9=Object.prototype.toString,x9=(()=>{let t=s(function(){},"C");return t.prototype=Object.create(null),t})();function T9(t,e){let r=new x9,n=t.length;if(n<2)return r;let o=e?.decode||k9,i=0;do{let a=t.indexOf("=",i);if(a===-1)break;let c=t.indexOf(";",i),l=c===-1?n:c;if(a>l){i=t.lastIndexOf(";",a-1)+1;continue}let d=D1(t,i,a),p=j1(t,a,d),m=t.slice(d,p);if(r[m]===void 0){let h=D1(t,a+1,l),y=j1(t,l,h),g=o(t.slice(h,y));r[m]=g}i=l+1}while(i<n);return r}s(T9,"parse");function D1(t,e,r){do{let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}s(D1,"startIndex");function j1(t,e,r){for(;e>r;){let n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}s(j1,"endIndex");function E9(t,e,r){let n=r?.encode||encodeURIComponent;if(!v9.test(t))throw new TypeError(`argument name is invalid: ${t}`);let o=n(e);if(!_9.test(o))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+o;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!b9.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!w9.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!I9(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}s(E9,"serialize");function k9(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}s(k9,"decode");function I9(t){return S9.call(t)==="[object Date]"}s(I9,"isDate")});var hf=Me((K1e,Aa)=>{"use strict";var TK=typeof Buffer<"u",gN=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,yN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function vN(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),TK&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let o=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(o==="ignore"&&i==="ignore")return n;if(o!=="ignore"&&i!=="ignore"){if(gN.test(t)===!1&&yN.test(t)===!1)return n}else if(o!=="ignore"&&i==="ignore"){if(gN.test(t)===!1)return n}else if(yN.test(t)===!1)return n;return _N(n,{protoAction:o,constructorAction:i,safe:r&&r.safe})}s(vN,"_parse");function _N(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let o=[t];for(;o.length;){let i=o;o=[];for(let a of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let c in a){let l=a[c];l&&typeof l=="object"&&o.push(l)}}}return t}s(_N,"filter");function G0(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vN(t,e,r)}finally{Error.stackTraceLimit=n}}s(G0,"parse");function EK(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vN(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}s(EK,"safeParse");Aa.exports=G0;Aa.exports.default=G0;Aa.exports.parse=G0;Aa.exports.safeParse=EK;Aa.exports.scan=_N});var _s=Me((vFe,sz)=>{"use strict";sz.exports=TypeError});var cz=Me((_Fe,az)=>{az.exports=y6("util").inspect});var Jl=Me((bFe,Pz)=>{var NE=typeof Map=="function"&&Map.prototype,EE=Object.getOwnPropertyDescriptor&&NE?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xf=NE&&EE&&typeof EE.get=="function"?EE.get:null,uz=NE&&Map.prototype.forEach,DE=typeof Set=="function"&&Set.prototype,kE=Object.getOwnPropertyDescriptor&&DE?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Yf=DE&&kE&&typeof kE.get=="function"?kE.get:null,lz=DE&&Set.prototype.forEach,Voe=typeof WeakMap=="function"&&WeakMap.prototype,Vl=Voe?WeakMap.prototype.has:null,Hoe=typeof WeakSet=="function"&&WeakSet.prototype,Hl=Hoe?WeakSet.prototype.has:null,Zoe=typeof WeakRef=="function"&&WeakRef.prototype,dz=Zoe?WeakRef.prototype.deref:null,Joe=Boolean.prototype.valueOf,Goe=Object.prototype.toString,Koe=Function.prototype.toString,Woe=String.prototype.match,jE=String.prototype.slice,Bi=String.prototype.replace,Qoe=String.prototype.toUpperCase,pz=String.prototype.toLowerCase,wz=RegExp.prototype.test,mz=Array.prototype.concat,yo=Array.prototype.join,Xoe=Array.prototype.slice,fz=Math.floor,AE=typeof BigInt=="function"?BigInt.prototype.valueOf:null,IE=Object.getOwnPropertySymbols,CE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ec=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Zl=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ec||!0)?Symbol.toStringTag:null,Sz=Object.prototype.propertyIsEnumerable,hz=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function gz(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||wz.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-fz(-t):fz(t);if(n!==t){var o=String(n),i=jE.call(e,o.length+1);return Bi.call(o,r,"$&_")+"."+Bi.call(Bi.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Bi.call(e,r,"$&_")}s(gz,"addNumericSeparator");var OE=cz(),yz=OE.custom,vz=Ez(yz)?yz:null,xz={__proto__:null,double:'"',single:"'"},Yoe={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Pz.exports=s(function t(e,r,n,o){var i=r||{};if(Xo(i,"quoteStyle")&&!Xo(xz,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Xo(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Xo(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xo(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xo(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Iz(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return c?gz(e,l):l}if(typeof e=="bigint"){var d=String(e)+"n";return c?gz(e,d):d}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return $E(e)?"[Array]":"[Object]";var m=yie(i,n);if(typeof o>"u")o=[];else if(kz(o,e)>=0)return"[Circular]";function h(H,q,X){if(q&&(o=Xoe.call(o),o.push(q)),X){var te={depth:i.depth};return Xo(i,"quoteStyle")&&(te.quoteStyle=i.quoteStyle),t(H,te,n+1,o)}return t(H,i,n+1,o)}if(s(h,"inspect"),typeof e=="function"&&!_z(e)){var y=cie(e),g=Qf(e,h);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(g.length>0?" { "+yo.call(g,", ")+" }":"")}if(Ez(e)){var f=ec?Bi.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):CE.call(e);return typeof e=="object"&&!ec?Bl(f):f}if(fie(e)){for(var _="<"+pz.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)_+=" "+w[b].name+"="+Tz(eie(w[b].value),"double",i);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+pz.call(String(e.nodeName))+">",_}if($E(e)){if(e.length===0)return"[]";var S=Qf(e,h);return m&&!gie(S)?"["+RE(S,m)+"]":"[ "+yo.call(S,", ")+" ]"}if(rie(e)){var k=Qf(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!Sz.call(e,"cause")?"{ ["+String(e)+"] "+yo.call(mz.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+yo.call(k,", ")+" }"}if(typeof e=="object"&&a){if(vz&&typeof e[vz]=="function"&&OE)return OE(e,{depth:p-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(uie(e)){var R=[];return uz&&uz.call(e,function(H,q){R.push(h(q,e,!0)+" => "+h(H,e))}),bz("Map",Xf.call(e),R,m)}if(pie(e)){var O=[];return lz&&lz.call(e,function(H){O.push(h(H,e))}),bz("Set",Yf.call(e),O,m)}if(lie(e))return PE("WeakMap");if(mie(e))return PE("WeakSet");if(die(e))return PE("WeakRef");if(oie(e))return Bl(h(Number(e)));if(sie(e))return Bl(h(AE.call(e)));if(iie(e))return Bl(Joe.call(e));if(nie(e))return Bl(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!tie(e)&&!_z(e)){var C=Qf(e,h),$=hz?hz(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",N=!$&&Zl&&Object(e)===e&&Zl in e?jE.call(Vi(e),8,-1):P?"Object":"",D=$||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",W=D+(N||P?"["+yo.call(mz.call([],N||[],P||[]),": ")+"] ":"");return C.length===0?W+"{}":m?W+"{"+RE(C,m)+"}":W+"{ "+yo.call(C,", ")+" }"}return String(e)},"inspect_");function Tz(t,e,r){var n=r.quoteStyle||e,o=xz[n];return o+t+o}s(Tz,"wrapQuotes");function eie(t){return Bi.call(String(t),/"/g,"&quot;")}s(eie,"quote");function bs(t){return!Zl||!(typeof t=="object"&&(Zl in t||typeof t[Zl]<"u"))}s(bs,"canTrustToString");function $E(t){return Vi(t)==="[object Array]"&&bs(t)}s($E,"isArray");function tie(t){return Vi(t)==="[object Date]"&&bs(t)}s(tie,"isDate");function _z(t){return Vi(t)==="[object RegExp]"&&bs(t)}s(_z,"isRegExp");function rie(t){return Vi(t)==="[object Error]"&&bs(t)}s(rie,"isError");function nie(t){return Vi(t)==="[object String]"&&bs(t)}s(nie,"isString");function oie(t){return Vi(t)==="[object Number]"&&bs(t)}s(oie,"isNumber");function iie(t){return Vi(t)==="[object Boolean]"&&bs(t)}s(iie,"isBoolean");function Ez(t){if(ec)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!CE)return!1;try{return CE.call(t),!0}catch{}return!1}s(Ez,"isSymbol");function sie(t){if(!t||typeof t!="object"||!AE)return!1;try{return AE.call(t),!0}catch{}return!1}s(sie,"isBigInt");var aie=Object.prototype.hasOwnProperty||function(t){return t in this};function Xo(t,e){return aie.call(t,e)}s(Xo,"has");function Vi(t){return Goe.call(t)}s(Vi,"toStr");function cie(t){if(t.name)return t.name;var e=Woe.call(Koe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}s(cie,"nameOf");function kz(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}s(kz,"indexOf");function uie(t){if(!Xf||!t||typeof t!="object")return!1;try{Xf.call(t);try{Yf.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}s(uie,"isMap");function lie(t){if(!Vl||!t||typeof t!="object")return!1;try{Vl.call(t,Vl);try{Hl.call(t,Hl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}s(lie,"isWeakMap");function die(t){if(!dz||!t||typeof t!="object")return!1;try{return dz.call(t),!0}catch{}return!1}s(die,"isWeakRef");function pie(t){if(!Yf||!t||typeof t!="object")return!1;try{Yf.call(t);try{Xf.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}s(pie,"isSet");function mie(t){if(!Hl||!t||typeof t!="object")return!1;try{Hl.call(t,Hl);try{Vl.call(t,Vl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}s(mie,"isWeakSet");function fie(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}s(fie,"isElement");function Iz(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Iz(jE.call(t,0,e.maxStringLength),e)+n}var o=Yoe[e.quoteStyle||"single"];o.lastIndex=0;var i=Bi.call(Bi.call(t,o,"\\$1"),/[\x00-\x1f]/g,hie);return Tz(i,"single",e)}s(Iz,"inspectString");function hie(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Qoe.call(e.toString(16))}s(hie,"lowbyte");function Bl(t){return"Object("+t+")"}s(Bl,"markBoxed");function PE(t){return t+" { ? }"}s(PE,"weakCollectionOf");function bz(t,e,r,n){var o=n?RE(r,n):yo.call(r,", ");return t+" ("+e+") {"+o+"}"}s(bz,"collectionOf");function gie(t){for(var e=0;e<t.length;e++)if(kz(t[e],`
`)>=0)return!1;return!0}s(gie,"singleLineValues");function yie(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=yo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:yo.call(Array(e+1),r)}}s(yie,"getIndent");function RE(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+yo.call(t,","+r)+`
`+e.prev}s(RE,"indentedJoin");function Qf(t,e){var r=$E(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Xo(t,o)?e(t[o],t):""}var i=typeof IE=="function"?IE(t):[],a;if(ec){a={};for(var c=0;c<i.length;c++)a["$"+i[c]]=i[c]}for(var l in t)Xo(t,l)&&(r&&String(Number(l))===l&&l<t.length||ec&&a["$"+l]instanceof Symbol||(wz.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof IE=="function")for(var d=0;d<i.length;d++)Sz.call(t,i[d])&&n.push("["+e(i[d])+"]: "+e(t[i[d]],t));return n}s(Qf,"arrObjKeys")});var Cz=Me((SFe,Az)=>{"use strict";var vie=Jl(),_ie=_s(),eh=s(function(t,e,r){for(var n=t,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,r||(o.next=t.next,t.next=o),o},"listGetNode"),bie=s(function(t,e){if(t){var r=eh(t,e);return r&&r.value}},"listGet"),wie=s(function(t,e,r){var n=eh(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},"listSet"),Sie=s(function(t,e){return t?!!eh(t,e):!1},"listHas"),xie=s(function(t,e){if(t)return eh(t,e,!0)},"listDelete");Az.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new _ie("Side channel does not contain "+vie(n))},"assert"),delete:s(function(n){var o=e&&e.next,i=xie(e,n);return i&&o&&o===i&&(e=void 0),!!i},"delete"),get:s(function(n){return bie(e,n)},"get"),has:s(function(n){return Sie(e,n)},"has"),set:s(function(n,o){e||(e={next:void 0}),wie(e,n,o)},"set")};return r},"getSideChannelList")});var ME=Me((TFe,Oz)=>{"use strict";Oz.exports=Object});var Rz=Me((EFe,$z)=>{"use strict";$z.exports=Error});var Dz=Me((kFe,Nz)=>{"use strict";Nz.exports=EvalError});var Mz=Me((IFe,jz)=>{"use strict";jz.exports=RangeError});var Uz=Me((PFe,zz)=>{"use strict";zz.exports=ReferenceError});var qz=Me((AFe,Lz)=>{"use strict";Lz.exports=SyntaxError});var Bz=Me((CFe,Fz)=>{"use strict";Fz.exports=URIError});var Hz=Me((OFe,Vz)=>{"use strict";Vz.exports=Math.abs});var Jz=Me(($Fe,Zz)=>{"use strict";Zz.exports=Math.floor});var Kz=Me((RFe,Gz)=>{"use strict";Gz.exports=Math.max});var Qz=Me((NFe,Wz)=>{"use strict";Wz.exports=Math.min});var Yz=Me((DFe,Xz)=>{"use strict";Xz.exports=Math.pow});var tU=Me((jFe,eU)=>{"use strict";eU.exports=Math.round});var nU=Me((MFe,rU)=>{"use strict";rU.exports=Number.isNaN||s(function(e){return e!==e},"isNaN")});var iU=Me((UFe,oU)=>{"use strict";var Tie=nU();oU.exports=s(function(e){return Tie(e)||e===0?e:e<0?-1:1},"sign")});var aU=Me((qFe,sU)=>{"use strict";sU.exports=Object.getOwnPropertyDescriptor});var zE=Me((FFe,cU)=>{"use strict";var th=aU();if(th)try{th([],"length")}catch{th=null}cU.exports=th});var lU=Me((BFe,uU)=>{"use strict";var rh=Object.defineProperty||!1;if(rh)try{rh({},"a",{value:1})}catch{rh=!1}uU.exports=rh});var pU=Me((VFe,dU)=>{"use strict";dU.exports=s(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==o||c.enumerable!==!0)return!1}return!0},"hasSymbols")});var hU=Me((ZFe,fU)=>{"use strict";var mU=typeof Symbol<"u"&&Symbol,Eie=pU();fU.exports=s(function(){return typeof mU!="function"||typeof Symbol!="function"||typeof mU("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Eie()},"hasNativeSymbols")});var UE=Me((GFe,gU)=>{"use strict";gU.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var LE=Me((KFe,yU)=>{"use strict";var kie=ME();yU.exports=kie.getPrototypeOf||null});var bU=Me((WFe,_U)=>{"use strict";var Iie="Function.prototype.bind called on incompatible ",Pie=Object.prototype.toString,Aie=Math.max,Cie="[object Function]",vU=s(function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},"concatty"),Oie=s(function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},"slicy"),$ie=s(function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},"joiny");_U.exports=s(function(e){var r=this;if(typeof r!="function"||Pie.apply(r)!==Cie)throw new TypeError(Iie+r);for(var n=Oie(arguments,1),o,i=s(function(){if(this instanceof o){var p=r.apply(this,vU(n,arguments));return Object(p)===p?p:this}return r.apply(e,vU(n,arguments))},"binder"),a=Aie(0,r.length-n.length),c=[],l=0;l<a;l++)c[l]="$"+l;if(o=Function("binder","return function ("+$ie(c,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var d=s(function(){},"Empty");d.prototype=r.prototype,o.prototype=new d,d.prototype=null}return o},"bind")});var Gl=Me((XFe,wU)=>{"use strict";var Rie=bU();wU.exports=Function.prototype.bind||Rie});var nh=Me((YFe,SU)=>{"use strict";SU.exports=Function.prototype.call});var qE=Me((e6e,xU)=>{"use strict";xU.exports=Function.prototype.apply});var EU=Me((t6e,TU)=>{"use strict";TU.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var IU=Me((r6e,kU)=>{"use strict";var Nie=Gl(),Die=qE(),jie=nh(),Mie=EU();kU.exports=Mie||Nie.call(jie,Die)});var FE=Me((n6e,PU)=>{"use strict";var zie=Gl(),Uie=_s(),Lie=nh(),qie=IU();PU.exports=s(function(e){if(e.length<1||typeof e[0]!="function")throw new Uie("a function is required");return qie(zie,Lie,e)},"callBindBasic")});var NU=Me((i6e,RU)=>{"use strict";var Fie=FE(),AU=zE(),OU;try{OU=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var BE=!!OU&&AU&&AU(Object.prototype,"__proto__"),$U=Object,CU=$U.getPrototypeOf;RU.exports=BE&&typeof BE.get=="function"?Fie([BE.get]):typeof CU=="function"?s(function(e){return CU(e==null?e:$U(e))},"getDunder"):!1});var UU=Me((a6e,zU)=>{"use strict";var DU=UE(),jU=LE(),MU=NU();zU.exports=DU?s(function(e){return DU(e)},"getProto"):jU?s(function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return jU(e)},"getProto"):MU?s(function(e){return MU(e)},"getProto"):null});var qU=Me((u6e,LU)=>{"use strict";var Bie=Function.prototype.call,Vie=Object.prototype.hasOwnProperty,Hie=Gl();LU.exports=Hie.call(Bie,Vie)});var sh=Me((l6e,JU)=>{"use strict";var ut,Zie=ME(),Jie=Rz(),Gie=Dz(),Kie=Mz(),Wie=Uz(),oc=qz(),nc=_s(),Qie=Bz(),Xie=Hz(),Yie=Jz(),ese=Kz(),tse=Qz(),rse=Yz(),nse=tU(),ose=iU(),HU=Function,VE=s(function(t){try{return HU('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),Kl=zE(),ise=lU(),HE=s(function(){throw new nc},"throwTypeError"),sse=Kl?(function(){try{return arguments.callee,HE}catch{try{return Kl(arguments,"callee").get}catch{return HE}}})():HE,tc=hU()(),br=UU(),ase=LE(),cse=UE(),ZU=qE(),Wl=nh(),rc={},use=typeof Uint8Array>"u"||!br?ut:br(Uint8Array),ws={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ut:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ut:ArrayBuffer,"%ArrayIteratorPrototype%":tc&&br?br([][Symbol.iterator]()):ut,"%AsyncFromSyncIteratorPrototype%":ut,"%AsyncFunction%":rc,"%AsyncGenerator%":rc,"%AsyncGeneratorFunction%":rc,"%AsyncIteratorPrototype%":rc,"%Atomics%":typeof Atomics>"u"?ut:Atomics,"%BigInt%":typeof BigInt>"u"?ut:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ut:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ut:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ut:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Jie,"%eval%":eval,"%EvalError%":Gie,"%Float16Array%":typeof Float16Array>"u"?ut:Float16Array,"%Float32Array%":typeof Float32Array>"u"?ut:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ut:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ut:FinalizationRegistry,"%Function%":HU,"%GeneratorFunction%":rc,"%Int8Array%":typeof Int8Array>"u"?ut:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ut:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ut:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tc&&br?br(br([][Symbol.iterator]())):ut,"%JSON%":typeof JSON=="object"?JSON:ut,"%Map%":typeof Map>"u"?ut:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tc||!br?ut:br(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Zie,"%Object.getOwnPropertyDescriptor%":Kl,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ut:Promise,"%Proxy%":typeof Proxy>"u"?ut:Proxy,"%RangeError%":Kie,"%ReferenceError%":Wie,"%Reflect%":typeof Reflect>"u"?ut:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ut:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tc||!br?ut:br(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ut:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tc&&br?br(""[Symbol.iterator]()):ut,"%Symbol%":tc?Symbol:ut,"%SyntaxError%":oc,"%ThrowTypeError%":sse,"%TypedArray%":use,"%TypeError%":nc,"%Uint8Array%":typeof Uint8Array>"u"?ut:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ut:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ut:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ut:Uint32Array,"%URIError%":Qie,"%WeakMap%":typeof WeakMap>"u"?ut:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ut:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ut:WeakSet,"%Function.prototype.call%":Wl,"%Function.prototype.apply%":ZU,"%Object.defineProperty%":ise,"%Object.getPrototypeOf%":ase,"%Math.abs%":Xie,"%Math.floor%":Yie,"%Math.max%":ese,"%Math.min%":tse,"%Math.pow%":rse,"%Math.round%":nse,"%Math.sign%":ose,"%Reflect.getPrototypeOf%":cse};if(br)try{null.error}catch(t){FU=br(br(t)),ws["%Error.prototype%"]=FU}var FU,lse=s(function t(e){var r;if(e==="%AsyncFunction%")r=VE("async function () {}");else if(e==="%GeneratorFunction%")r=VE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=VE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&br&&(r=br(o.prototype))}return ws[e]=r,r},"doEval"),BU={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ql=Gl(),oh=qU(),dse=Ql.call(Wl,Array.prototype.concat),pse=Ql.call(ZU,Array.prototype.splice),VU=Ql.call(Wl,String.prototype.replace),ih=Ql.call(Wl,String.prototype.slice),mse=Ql.call(Wl,RegExp.prototype.exec),fse=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hse=/\\(\\)?/g,gse=s(function(e){var r=ih(e,0,1),n=ih(e,-1);if(r==="%"&&n!=="%")throw new oc("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new oc("invalid intrinsic syntax, expected opening `%`");var o=[];return VU(e,fse,function(i,a,c,l){o[o.length]=c?VU(l,hse,"$1"):a||i}),o},"stringToPath"),yse=s(function(e,r){var n=e,o;if(oh(BU,n)&&(o=BU[n],n="%"+o[0]+"%"),oh(ws,n)){var i=ws[n];if(i===rc&&(i=lse(n)),typeof i>"u"&&!r)throw new nc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new oc("intrinsic "+e+" does not exist!")},"getBaseIntrinsic");JU.exports=s(function(e,r){if(typeof e!="string"||e.length===0)throw new nc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new nc('"allowMissing" argument must be a boolean');if(mse(/^%?[^%]*%?$/,e)===null)throw new oc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=gse(e),o=n.length>0?n[0]:"",i=yse("%"+o+"%",r),a=i.name,c=i.value,l=!1,d=i.alias;d&&(o=d[0],pse(n,dse([0,1],d)));for(var p=1,m=!0;p<n.length;p+=1){var h=n[p],y=ih(h,0,1),g=ih(h,-1);if((y==='"'||y==="'"||y==="`"||g==='"'||g==="'"||g==="`")&&y!==g)throw new oc("property names with quotes must have matching quotes");if((h==="constructor"||!m)&&(l=!0),o+="."+h,a="%"+o+"%",oh(ws,a))c=ws[a];else if(c!=null){if(!(h in c)){if(!r)throw new nc("base intrinsic for "+e+" exists, but the property is not available.");return}if(Kl&&p+1>=n.length){var f=Kl(c,h);m=!!f,m&&"get"in f&&!("originalValue"in f.get)?c=f.get:c=c[h]}else m=oh(c,h),c=c[h];m&&!l&&(ws[a]=c)}}return c},"GetIntrinsic")});var ZE=Me((p6e,WU)=>{"use strict";var GU=sh(),KU=FE(),vse=KU([GU("%String.prototype.indexOf%")]);WU.exports=s(function(e,r){var n=GU(e,!!r);return typeof n=="function"&&vse(e,".prototype.")>-1?KU([n]):n},"callBoundIntrinsic")});var JE=Me((f6e,XU)=>{"use strict";var _se=sh(),Xl=ZE(),bse=Jl(),wse=_s(),QU=_se("%Map%",!0),Sse=Xl("Map.prototype.get",!0),xse=Xl("Map.prototype.set",!0),Tse=Xl("Map.prototype.has",!0),Ese=Xl("Map.prototype.delete",!0),kse=Xl("Map.prototype.size",!0);XU.exports=!!QU&&s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new wse("Side channel does not contain "+bse(n))},"assert"),delete:s(function(n){if(e){var o=Ese(e,n);return kse(e)===0&&(e=void 0),o}return!1},"delete"),get:s(function(n){if(e)return Sse(e,n)},"get"),has:s(function(n){return e?Tse(e,n):!1},"has"),set:s(function(n,o){e||(e=new QU),xse(e,n,o)},"set")};return r},"getSideChannelMap")});var eL=Me((g6e,YU)=>{"use strict";var Ise=sh(),ch=ZE(),Pse=Jl(),ah=JE(),Ase=_s(),ic=Ise("%WeakMap%",!0),Cse=ch("WeakMap.prototype.get",!0),Ose=ch("WeakMap.prototype.set",!0),$se=ch("WeakMap.prototype.has",!0),Rse=ch("WeakMap.prototype.delete",!0);YU.exports=ic?s(function(){var e,r,n={assert:s(function(o){if(!n.has(o))throw new Ase("Side channel does not contain "+Pse(o))},"assert"),delete:s(function(o){if(ic&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Rse(e,o)}else if(ah&&r)return r.delete(o);return!1},"delete"),get:s(function(o){return ic&&o&&(typeof o=="object"||typeof o=="function")&&e?Cse(e,o):r&&r.get(o)},"get"),has:s(function(o){return ic&&o&&(typeof o=="object"||typeof o=="function")&&e?$se(e,o):!!r&&r.has(o)},"has"),set:s(function(o,i){ic&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new ic),Ose(e,o,i)):ah&&(r||(r=ah()),r.set(o,i))},"set")};return n},"getSideChannelWeakMap"):ah});var rL=Me((v6e,tL)=>{"use strict";var Nse=_s(),Dse=Jl(),jse=Cz(),Mse=JE(),zse=eL(),Use=zse||Mse||jse;tL.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Nse("Side channel does not contain "+Dse(n))},"assert"),delete:s(function(n){return!!e&&e.delete(n)},"delete"),get:s(function(n){return e&&e.get(n)},"get"),has:s(function(n){return!!e&&e.has(n)},"has"),set:s(function(n,o){e||(e=Use()),e.set(n,o)},"set")};return r},"getSideChannel")});var uh=Me((b6e,nL)=>{"use strict";var Lse=String.prototype.replace,qse=/%20/g,GE={RFC1738:"RFC1738",RFC3986:"RFC3986"};nL.exports={default:GE.RFC3986,formatters:{RFC1738:s(function(t){return Lse.call(t,qse,"+")},"RFC1738"),RFC3986:s(function(t){return String(t)},"RFC3986")},RFC1738:GE.RFC1738,RFC3986:GE.RFC3986}});var QE=Me((S6e,iL)=>{"use strict";var Fse=uh(),KE=Object.prototype.hasOwnProperty,Ss=Array.isArray,vo=(function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Bse=s(function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Ss(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);r.obj[r.prop]=o}}},"compactQueue"),oL=s(function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},"arrayToObject"),Vse=s(function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Ss(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!KE.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return Ss(e)&&!Ss(r)&&(o=oL(e,n)),Ss(e)&&Ss(r)?(r.forEach(function(i,a){if(KE.call(e,a)){var c=e[a];c&&typeof c=="object"&&i&&typeof i=="object"?e[a]=t(c,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var c=r[a];return KE.call(i,a)?i[a]=t(i[a],c,n):i[a]=c,i},o)},"merge"),Hse=s(function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},"assignSingleSource"),Zse=s(function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},"decode"),WE=1024,Jse=s(function(e,r,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var c="",l=0;l<a.length;l+=WE){for(var d=a.length>=WE?a.slice(l,l+WE):a,p=[],m=0;m<d.length;++m){var h=d.charCodeAt(m);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===Fse.RFC1738&&(h===40||h===41)){p[p.length]=d.charAt(m);continue}if(h<128){p[p.length]=vo[h];continue}if(h<2048){p[p.length]=vo[192|h>>6]+vo[128|h&63];continue}if(h<55296||h>=57344){p[p.length]=vo[224|h>>12]+vo[128|h>>6&63]+vo[128|h&63];continue}m+=1,h=65536+((h&1023)<<10|d.charCodeAt(m)&1023),p[p.length]=vo[240|h>>18]+vo[128|h>>12&63]+vo[128|h>>6&63]+vo[128|h&63]}c+=p.join("")}return c},"encode"),Gse=s(function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var i=r[o],a=i.obj[i.prop],c=Object.keys(a),l=0;l<c.length;++l){var d=c[l],p=a[d];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:a,prop:d}),n.push(p))}return Bse(r),e},"compact"),Kse=s(function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},"isRegExp"),Wse=s(function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},"isBuffer"),Qse=s(function(e,r){return[].concat(e,r)},"combine"),Xse=s(function(e,r){if(Ss(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)},"maybeMap");iL.exports={arrayToObject:oL,assign:Hse,combine:Qse,compact:Gse,decode:Zse,encode:Jse,isBuffer:Wse,isRegExp:Kse,maybeMap:Xse,merge:Vse}});var dL=Me((T6e,lL)=>{"use strict";var aL=rL(),lh=QE(),Yl=uh(),Yse=Object.prototype.hasOwnProperty,cL={brackets:s(function(e){return e+"[]"},"brackets"),comma:"comma",indices:s(function(e,r){return e+"["+r+"]"},"indices"),repeat:s(function(e){return e},"repeat")},_o=Array.isArray,eae=Array.prototype.push,uL=s(function(t,e){eae.apply(t,_o(e)?e:[e])},"pushToArray"),tae=Date.prototype.toISOString,sL=Yl.default,hr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:lh.encode,encodeValuesOnly:!1,filter:void 0,format:sL,formatter:Yl.formatters[sL],indices:!1,serializeDate:s(function(e){return tae.call(e)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},rae=s(function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},"isNonNullishPrimitive"),XE={},nae=s(function t(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b){for(var S=e,k=b,R=0,O=!1;(k=k.get(XE))!==void 0&&!O;){var C=k.get(e);if(R+=1,typeof C<"u"){if(C===R)throw new RangeError("Cyclic object value");O=!0}typeof k.get(XE)>"u"&&(R=0)}if(typeof p=="function"?S=p(r,S):S instanceof Date?S=y(S):n==="comma"&&_o(S)&&(S=lh.maybeMap(S,function(We){return We instanceof Date?y(We):We})),S===null){if(a)return d&&!_?d(r,hr.encoder,w,"key",g):r;S=""}if(rae(S)||lh.isBuffer(S)){if(d){var $=_?r:d(r,hr.encoder,w,"key",g);return[f($)+"="+f(d(S,hr.encoder,w,"value",g))]}return[f(r)+"="+f(String(S))]}var P=[];if(typeof S>"u")return P;var N;if(n==="comma"&&_o(S))_&&d&&(S=lh.maybeMap(S,d)),N=[{value:S.length>0?S.join(",")||null:void 0}];else if(_o(p))N=p;else{var D=Object.keys(S);N=m?D.sort(m):D}var W=l?String(r).replace(/\./g,"%2E"):String(r),H=o&&_o(S)&&S.length===1?W+"[]":W;if(i&&_o(S)&&S.length===0)return H+"[]";for(var q=0;q<N.length;++q){var X=N[q],te=typeof X=="object"&&X&&typeof X.value<"u"?X.value:S[X];if(!(c&&te===null)){var oe=h&&l?String(X).replace(/\./g,"%2E"):String(X),ye=_o(S)?typeof n=="function"?n(H,oe):H:H+(h?"."+oe:"["+oe+"]");b.set(e,R);var Se=aL();Se.set(XE,b),uL(P,t(te,ye,n,o,i,a,c,l,n==="comma"&&_&&_o(S)?null:d,p,m,h,y,g,f,_,w,Se))}}return P},"stringify"),oae=s(function(e){if(!e)return hr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||hr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Yl.default;if(typeof e.format<"u"){if(!Yse.call(Yl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Yl.formatters[n],i=hr.filter;(typeof e.filter=="function"||_o(e.filter))&&(i=e.filter);var a;if(e.arrayFormat in cL?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=hr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:hr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:hr.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:hr.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:hr.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?hr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:hr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:hr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:hr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:hr.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:hr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:hr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:hr.strictNullHandling}},"normalizeStringifyOptions");lL.exports=function(t,e){var r=t,n=oae(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):_o(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof r!="object"||r===null)return"";var c=cL[n.arrayFormat],l=c==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var d=aL(),p=0;p<o.length;++p){var m=o[p],h=r[m];n.skipNulls&&h===null||uL(a,nae(h,m,c,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var y=a.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}});var hL=Me((k6e,fL)=>{"use strict";var xs=QE(),YE=Object.prototype.hasOwnProperty,pL=Array.isArray,Yt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:xs.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},iae=s(function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),mL=s(function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},"parseArrayValue"),sae="utf8=%26%2310003%3B",aae="utf8=%E2%9C%93",cae=s(function(e,r){var n={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=o.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&a.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var c=-1,l,d=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===aae?d="utf-8":a[l]===sae&&(d="iso-8859-1"),c=l,l=a.length);for(l=0;l<a.length;++l)if(l!==c){var p=a[l],m=p.indexOf("]="),h=m===-1?p.indexOf("="):m+1,y,g;h===-1?(y=r.decoder(p,Yt.decoder,d,"key"),g=r.strictNullHandling?null:""):(y=r.decoder(p.slice(0,h),Yt.decoder,d,"key"),g=xs.maybeMap(mL(p.slice(h+1),r,pL(n[y])?n[y].length:0),function(_){return r.decoder(_,Yt.decoder,d,"value")})),g&&r.interpretNumericEntities&&d==="iso-8859-1"&&(g=iae(String(g))),p.indexOf("[]=")>-1&&(g=pL(g)?[g]:g);var f=YE.call(n,y);f&&r.duplicates==="combine"?n[y]=xs.combine(n[y],g):(!f||r.duplicates==="last")&&(n[y]=g)}return n},"parseQueryStringValues"),uae=s(function(t,e,r,n){var o=0;if(t.length>0&&t[t.length-1]==="[]"){var i=t.slice(0,-1).join("");o=Array.isArray(e)&&e[i]?e[i].length:0}for(var a=n?e:mL(e,r,o),c=t.length-1;c>=0;--c){var l,d=t[c];if(d==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:xs.combine([],a);else{l=r.plainObjects?{__proto__:null}:{};var p=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,m=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,h=parseInt(m,10);!r.parseArrays&&m===""?l={0:a}:!isNaN(h)&&d!==m&&String(h)===m&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[],l[h]=a):m!=="__proto__"&&(l[m]=a)}a=l}return a},"parseObject"),lae=s(function(e,r,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(i),d=l?i.slice(0,l.index):i,p=[];if(d){if(!n.plainObjects&&YE.call(Object.prototype,d)&&!n.allowPrototypes)return;p.push(d)}for(var m=0;n.depth>0&&(l=c.exec(i))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&YE.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");p.push("["+i.slice(l.index)+"]")}return uae(p,r,n,o)}},"parseQueryStringKeys"),dae=s(function(e){if(!e)return Yt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?Yt.charset:e.charset,n=typeof e.duplicates>"u"?Yt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Yt.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Yt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Yt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Yt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Yt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Yt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Yt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Yt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Yt.decoder,delimiter:typeof e.delimiter=="string"||xs.isRegExp(e.delimiter)?e.delimiter:Yt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Yt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Yt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Yt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Yt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Yt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Yt.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},"normalizeParseOptions");fL.exports=function(t,e){var r=dae(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?cae(t,r):t,o=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),a=0;a<i.length;++a){var c=i[a],l=lae(c,n[c],r,typeof t=="string");o=xs.merge(o,l,r)}return r.allowSparse===!0?o:xs.compact(o)}});var yL=Me((P6e,gL)=>{"use strict";var pae=dL(),mae=hL(),fae=uh();gL.exports={formats:fae,parse:mae,stringify:pae}});var eg=s((t,e,r)=>(n,o)=>{let i=-1;return a(0);async function a(c){if(c<=i)throw new Error("next() called multiple times");i=c;let l,d=!1,p;if(t[c]?(p=t[c][0][0],n.req.routeIndex=c):p=c===t.length&&o||void 0,p)try{l=await p(n,()=>a(c+1))}catch(m){if(m instanceof Error&&e)n.error=m,l=await e(m,n),d=!0;else throw m}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||d)&&(n.res=l),n}},"compose");var Nd=class extends Error{static{s(this,"HTTPException")}res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var Lk=Symbol();var qk=s(async(t,e=Object.create(null))=>{let{all:r=!1,dot:n=!1}=e,i=(t instanceof Dd?t.raw.headers:t.headers).get("Content-Type");return i?.startsWith("multipart/form-data")||i?.startsWith("application/x-www-form-urlencoded")?_6(t,{all:r,dot:n}):{}},"parseBody");async function _6(t,e){let r=await t.formData();return r?b6(r,e):{}}s(_6,"parseFormData");function b6(t,e){let r=Object.create(null);return t.forEach((n,o)=>{e.all||o.endsWith("[]")?w6(r,o,n):r[o]=n}),e.dot&&Object.entries(r).forEach(([n,o])=>{n.includes(".")&&(S6(r,n,o),delete r[n])}),r}s(b6,"convertFormDataToBodyData");var w6=s((t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},"handleParsingAllValues"),S6=s((t,e,r)=>{let n=t,o=e.split(".");o.forEach((i,a)=>{a===o.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},"handleParsingNestedValues");var rg=s(t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},"splitPath"),Fk=s(t=>{let{groups:e,path:r}=x6(t),n=rg(r);return T6(n,e)},"splitRoutingPath"),x6=s(t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,n)=>{let o=`@${n}`;return e.push([o,r]),o}),{groups:e,path:t}},"extractGroupsFromPath"),T6=s((t,e)=>{for(let r=e.length-1;r>=0;r--){let[n]=e[r];for(let o=t.length-1;o>=0;o--)if(t[o].includes(n)){t[o]=t[o].replace(n,e[r][1]);break}}return t},"replaceGroupMarks"),jd={},Bk=s((t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${t}#${e}`;return jd[n]||(r[2]?jd[n]=e&&e[0]!==":"&&e[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:jd[n]=[t,r[1],!0]),jd[n]}return null},"getPattern"),Ns=s((t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},"tryDecode"),E6=s(t=>Ns(t,decodeURI),"tryDecodeURI"),ng=s(t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),n=r;for(;n<e.length;n++){let o=e.charCodeAt(n);if(o===37){let i=e.indexOf("?",n),a=e.slice(r,i===-1?void 0:i);return E6(a.includes("%25")?a.replace(/%25/g,"%2525"):a)}else if(o===63)break}return e.slice(r,n)},"getPath");var Vk=s(t=>{let e=ng(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},"getPathNoStrict"),Wi=s((t,e,...r)=>(r.length&&(e=Wi(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),"mergePath"),Md=s(t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],n="";return e.forEach(o=>{if(o!==""&&!/\:/.test(o))n+="/"+o;else if(/\:/.test(o))if(/\?/.test(o)){r.length===0&&n===""?r.push("/"):r.push(n);let i=o.replace("?","");n+="/"+i,r.push(n)}else n+="/"+o}),r.filter((o,i,a)=>a.indexOf(o)===i)},"checkOptionalParameter"),tg=s(t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?Ns(t,Ec):t):t,"_decodeURI"),Hk=s((t,e,r)=>{let n;if(!r&&e&&!/[%+]/.test(e)){let a=t.indexOf("?",8);if(a===-1)return;for(t.startsWith(e,a+1)||(a=t.indexOf(`&${e}`,a+1));a!==-1;){let c=t.charCodeAt(a+e.length+1);if(c===61){let l=a+e.length+2,d=t.indexOf("&",l);return tg(t.slice(l,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";a=t.indexOf(`&${e}`,a+1)}if(n=/[%+]/.test(t),!n)return}let o={};n??=/[%+]/.test(t);let i=t.indexOf("?",8);for(;i!==-1;){let a=t.indexOf("&",i+1),c=t.indexOf("=",i);c>a&&a!==-1&&(c=-1);let l=t.slice(i+1,c===-1?a===-1?void 0:a:c);if(n&&(l=tg(l)),i=a,l==="")continue;let d;c===-1?d="":(d=t.slice(c+1,a===-1?void 0:a),n&&(d=tg(d))),r?(o[l]&&Array.isArray(o[l])||(o[l]=[]),o[l].push(d)):o[l]??=d}return e?o[e]:o},"_getQueryParam"),Zk=Hk,Jk=s((t,e)=>Hk(t,e,!0),"getQueryParams"),Ec=decodeURIComponent;var Gk=s(t=>Ns(t,Ec),"tryDecodeURIComponent"),Dd=class{static{s(this,"HonoRequest")}raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#i()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#n(e);return r&&/\%/.test(r)?Gk(r):r}#i(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let n=this.#n(this.#t[0][this.routeIndex][1][r]);n!==void 0&&(t[r]=/\%/.test(n)?Gk(n):n)}return t}#n(t){return this.#t[1]?this.#t[1][t]:t}query(t){return Zk(this.url,t)}queries(t){return Jk(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,n)=>{e[n]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await qk(this,t)}#o=s(t=>{let{bodyCache:e,raw:r}=this,n=e[t];if(n)return n;let o=Object.keys(e)[0];return o?e[o].then(i=>(o==="json"&&(i=JSON.stringify(i)),new Response(i)[t]())):e[t]=r[t]()},"#cachedBody");json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[Lk](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}};var Kk={Stringify:1,BeforeStream:2,Stream:3},k6=s((t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r},"raw");var og=s(async(t,e,r,n,o)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let i=t.callbacks;if(!i?.length)return Promise.resolve(t);o?o[0]+=t:o=[t];let a=Promise.all(i.map(c=>c({phase:e,buffer:o,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(l=>og(l,e,!1,n,o))).then(()=>o[0]));return r?k6(await a,i):a},"resolveCallback");var I6="text/plain; charset=UTF-8",ig=s((t,e)=>({"Content-Type":t,...e}),"setDefaultContentType"),Wk=class{static{s(this,"Context")}#e;#t;env={};#r;finalized=!1;error;#i;#n;#o;#d;#u;#c;#s;#p;#l;constructor(t,e){this.#e=t,e&&(this.#n=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#l=e.path,this.#p=e.matchResult)}get req(){return this.#t??=new Dd(this.#e,this.#l,this.#p),this.#t}get event(){if(this.#n&&"respondWith"in this.#n)return this.#n;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#n)return this.#n;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#s??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let n=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let o of n)t.headers.append("set-cookie",o)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=s((...t)=>(this.#u??=e=>this.html(e),this.#u(...t)),"render");setLayout=s(t=>this.#d=t,"setLayout");getLayout=s(()=>this.#d,"getLayout");setRenderer=s(t=>{this.#u=t},"setRenderer");header=s((t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let n=this.#o?this.#o.headers:this.#s??=new Headers;e===void 0?n.delete(t):r?.append?n.append(t,e):n.set(t,e)},"header");status=s(t=>{this.#i=t},"status");set=s((t,e)=>{this.#r??=new Map,this.#r.set(t,e)},"set");get=s(t=>this.#r?this.#r.get(t):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(t,e,r){let n=this.#o?new Headers(this.#o.headers):this.#s??new Headers;if(typeof e=="object"&&"headers"in e){let i=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[a,c]of i)a.toLowerCase()==="set-cookie"?n.append(a,c):n.set(a,c)}if(r)for(let[i,a]of Object.entries(r))if(typeof a=="string")n.set(i,a);else{n.delete(i);for(let c of a)n.append(i,c)}let o=typeof e=="number"?e:e?.status??this.#i;return new Response(t,{status:o,headers:n})}newResponse=s((...t)=>this.#a(...t),"newResponse");body=s((t,e,r)=>this.#a(t,e,r),"body");text=s((t,e,r)=>!this.#s&&!this.#i&&!e&&!r&&!this.finalized?new Response(t):this.#a(t,e,ig(I6,r)),"text");json=s((t,e,r)=>this.#a(JSON.stringify(t),e,ig("application/json",r)),"json");html=s((t,e,r)=>{let n=s(o=>this.#a(o,e,ig("text/html; charset=UTF-8",r)),"res");return typeof t=="object"?og(t,Kk.Stringify,!1,{}).then(n):n(t)},"html");redirect=s((t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)},"redirect");notFound=s(()=>(this.#c??=()=>new Response,this.#c(this)),"notFound")};ii();sg();var P6=s(t=>t.text("404 Not Found",404),"notFoundHandler"),Yk=s((t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},"errorHandler"),ag=class{static{s(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(t={}){[...Xk,Qk].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?this.#e=i:this.#i(o,this.#e,i),a.forEach(c=>{this.#i(o,this.#e,c)}),this)}),this.on=(o,i,...a)=>{for(let c of[i].flat()){this.#e=c;for(let l of[o].flat())a.map(d=>{this.#i(l.toUpperCase(),this.#e,d)})}return this},this.use=(o,...i)=>(typeof o=="string"?this.#e=o:(this.#e="*",i.unshift(o)),i.forEach(a=>{this.#i(Nt,this.#e,a)}),this);let{strict:r,...n}=t;Object.assign(this,n),this.getPath=r??!0?t.getPath??ng:Vk}#t(){let t=new ag({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,t.#r=this.#r,t.routes=this.routes,t}#r=P6;errorHandler=Yk;route(t,e){let r=this.basePath(t);return e.routes.map(n=>{let o;e.errorHandler===Yk?o=n.handler:(o=s(async(i,a)=>(await eg([],e.errorHandler)(i,()=>n.handler(i,a))).res,"handler"),o[kc]=n.handler),r.#i(n.method,n.path,o)}),this}basePath(t){let e=this.#t();return e._basePath=Wi(this._basePath,t),e}onError=s(t=>(this.errorHandler=t,this),"onError");notFound=s(t=>(this.#r=t,this),"notFound");mount(t,e,r){let n,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?n=s(c=>c,"replaceRequest"):n=r.replaceRequest));let i=o?c=>{let l=o(c);return Array.isArray(l)?l:[l]}:c=>{let l;try{l=c.executionCtx}catch{}return[c.env,l]};n||=(()=>{let c=Wi(this._basePath,t),l=c==="/"?0:c.length;return d=>{let p=new URL(d.url);return p.pathname=p.pathname.slice(l)||"/",new Request(p,d)}})();let a=s(async(c,l)=>{let d=await e(n(c.req.raw),...i(c));if(d)return d;await l()},"handler");return this.#i(Nt,Wi(t,"*"),a),this}#i(t,e,r){t=t.toUpperCase(),e=Wi(this._basePath,e);let n={basePath:this._basePath,path:e,method:t,handler:r};this.router.add(t,e,[r,n]),this.routes.push(n)}#n(t,e){if(t instanceof Error)return this.errorHandler(t,e);throw t}#o(t,e,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(t,e,r,"GET")))();let o=this.getPath(t,{env:r}),i=this.router.match(n,o),a=new Wk(t,{path:o,matchResult:i,env:r,executionCtx:e,notFoundHandler:this.#r});if(i[0].length===1){let l;try{l=i[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(d){return this.#n(d,a)}return l instanceof Promise?l.then(d=>d||(a.finalized?a.res:this.#r(a))).catch(d=>this.#n(d,a)):l??this.#r(a)}let c=eg(i[0],this.errorHandler,this.#r);return(async()=>{try{let l=await c(a);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#n(l,a)}})()}fetch=s((t,...e)=>this.#o(t,e[1],e[0],t.method),"fetch");request=s((t,e,r,n)=>t instanceof Request?this.fetch(e?new Request(t,e):t,r,n):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Wi("/",t)}`,e),r,n)),"request");fire=s(()=>{addEventListener("fetch",t=>{t.respondWith(this.#o(t.request,t,void 0,t.request.method))})},"fire")};ii();ii();var Ld=[];function cg(t,e){let r=this.buildAllMatchers(),n=s((o,i)=>{let a=r[o]||r[Nt],c=a[2][i];if(c)return c;let l=i.match(a[0]);if(!l)return[[],Ld];let d=l.indexOf("",1);return[a[1][d],l]},"match2");return this.match=n,n(t,e)}s(cg,"match");var qd="[^/]+",Ic=".*",Pc="(?:|/.*)",Qi=Symbol(),A6=new Set(".\\+*[^]$()");function C6(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===Ic||t===Pc?1:e===Ic||e===Pc?-1:t===qd?1:e===qd?-1:t.length===e.length?t<e?-1:1:e.length-t.length}s(C6,"compareKey");var Fd=class{static{s(this,"Node")}#e;#t;#r=Object.create(null);insert(t,e,r,n,o){if(t.length===0){if(this.#e!==void 0)throw Qi;if(o)return;this.#e=e;return}let[i,...a]=t,c=i==="*"?a.length===0?["","",Ic]:["","",qd]:i==="/*"?["","",Pc]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(c){let d=c[1],p=c[2]||qd;if(d&&c[2]&&(p===".*"||(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p))))throw Qi;if(l=this.#r[p],!l){if(Object.keys(this.#r).some(m=>m!==Ic&&m!==Pc))throw Qi;if(o)return;l=this.#r[p]=new Fd,d!==""&&(l.#t=n.varIndex++)}!o&&d!==""&&r.push([d,l.#t])}else if(l=this.#r[i],!l){if(Object.keys(this.#r).some(d=>d.length>1&&d!==Ic&&d!==Pc))throw Qi;if(o)return;l=this.#r[i]=new Fd}l.insert(a,e,r,n,o)}buildRegExpStr(){let e=Object.keys(this.#r).sort(C6).map(r=>{let n=this.#r[r];return(typeof n.#t=="number"?`(${r})@${n.#t}`:A6.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#e=="number"&&e.unshift(`#${this.#e}`),e.length===0?"":e.length===1?e[0]:"(?:"+e.join("|")+")"}};var eI=class{static{s(this,"Trie")}#e={varIndex:0};#t=new Fd;insert(t,e,r){let n=[],o=[];for(let a=0;;){let c=!1;if(t=t.replace(/\{[^}]+\}/g,l=>{let d=`@\\${a}`;return o[a]=[d,l],a++,c=!0,d}),!c)break}let i=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=o.length-1;a>=0;a--){let[c]=o[a];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(c)!==-1){i[l]=i[l].replace(c,o[a][1]);break}}return this.#t.insert(i,e,n,this.#e,r),n}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],n=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(o,i,a)=>i!==void 0?(r[++e]=Number(i),"$()"):(a!==void 0&&(n[Number(a)]=++e),"")),[new RegExp(`^${t}`),r,n]}};var O6=[/^$/,[],Object.create(null)],tI=Object.create(null);function rI(t){return tI[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}s(rI,"buildWildcardRegExp");function $6(){tI=Object.create(null)}s($6,"clearWildcardRegExpCache");function R6(t){let e=new eI,r=[];if(t.length===0)return O6;let n=t.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,p],[m,h])=>d?1:m?-1:p.length-h.length),o=Object.create(null);for(let d=0,p=-1,m=n.length;d<m;d++){let[h,y,g]=n[d];h?o[y]=[g.map(([_])=>[_,Object.create(null)]),Ld]:p++;let f;try{f=e.insert(y,p,h)}catch(_){throw _===Qi?new Ud(y):_}h||(r[p]=g.map(([_,w])=>{let b=Object.create(null);for(w-=1;w>=0;w--){let[S,k]=f[w];b[S]=k}return[_,b]}))}let[i,a,c]=e.buildRegExp();for(let d=0,p=r.length;d<p;d++)for(let m=0,h=r[d].length;m<h;m++){let y=r[d][m]?.[1];if(!y)continue;let g=Object.keys(y);for(let f=0,_=g.length;f<_;f++)y[g[f]]=c[y[g[f]]]}let l=[];for(let d in a)l[d]=r[a[d]];return[i,l,o]}s(R6,"buildMatcherFromPreprocessedRoutes");function Ds(t,e){if(t){for(let r of Object.keys(t).sort((n,o)=>o.length-n.length))if(rI(r).test(e))return[...t[r]]}}s(Ds,"findMiddleware");var Bd=class{static{s(this,"RegExpRouter")}name="RegExpRouter";#e;#t;constructor(){this.#e={[Nt]:Object.create(null)},this.#t={[Nt]:Object.create(null)}}add(t,e,r){let n=this.#e,o=this.#t;if(!n||!o)throw new Error(zd);n[t]||[n,o].forEach(c=>{c[t]=Object.create(null),Object.keys(c[Nt]).forEach(l=>{c[t][l]=[...c[Nt][l]]})}),e==="/*"&&(e="*");let i=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let c=rI(e);t===Nt?Object.keys(n).forEach(l=>{n[l][e]||=Ds(n[l],e)||Ds(n[Nt],e)||[]}):n[t][e]||=Ds(n[t],e)||Ds(n[Nt],e)||[],Object.keys(n).forEach(l=>{(t===Nt||t===l)&&Object.keys(n[l]).forEach(d=>{c.test(d)&&n[l][d].push([r,i])})}),Object.keys(o).forEach(l=>{(t===Nt||t===l)&&Object.keys(o[l]).forEach(d=>c.test(d)&&o[l][d].push([r,i]))});return}let a=Md(e)||[e];for(let c=0,l=a.length;c<l;c++){let d=a[c];Object.keys(o).forEach(p=>{(t===Nt||t===p)&&(o[p][d]||=[...Ds(n[p],d)||Ds(n[Nt],d)||[]],o[p][d].push([r,i-l+c+1]))})}}match=cg;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,$6(),t}#r(t){let e=[],r=t===Nt;return[this.#e,this.#t].forEach(n=>{let o=n[t]?Object.keys(n[t]).map(i=>[i,n[t][i]]):[];o.length!==0?(r||=!0,e.push(...o)):t!==Nt&&e.push(...Object.keys(n[Nt]).map(i=>[i,n[Nt][i]]))}),r?R6(e):null}};ii();ii();var ug=class{static{s(this,"SmartRouter")}name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(zd);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,n=this.#t,o=r.length,i=0,a;for(;i<o;i++){let c=r[i];try{for(let l=0,d=n.length;l<d;l++)c.add(...n[l]);a=c.match(t,e)}catch(l){if(l instanceof Ud)continue;throw l}this.match=c.match.bind(c),this.#e=[c],this.#t=void 0;break}if(i===o)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};ii();var Ac=Object.create(null),lg=class{static{s(this,"Node")}#e;#t;#r;#i=0;#n=Ac;constructor(t,e,r){if(this.#t=r||Object.create(null),this.#e=[],t&&e){let n=Object.create(null);n[t]={handler:e,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(t,e,r){this.#i=++this.#i;let n=this,o=Fk(e),i=[];for(let a=0,c=o.length;a<c;a++){let l=o[a],d=o[a+1],p=Bk(l,d),m=Array.isArray(p)?p[0]:l;if(m in n.#t){n=n.#t[m],p&&i.push(p[1]);continue}n.#t[m]=new lg,p&&(n.#r.push(p),i.push(p[1])),n=n.#t[m]}return n.#e.push({[t]:{handler:r,possibleKeys:i.filter((a,c,l)=>l.indexOf(a)===c),score:this.#i}}),n}#o(t,e,r,n){let o=[];for(let i=0,a=t.#e.length;i<a;i++){let c=t.#e[i],l=c[e]||c[Nt],d={};if(l!==void 0&&(l.params=Object.create(null),o.push(l),r!==Ac||n&&n!==Ac))for(let p=0,m=l.possibleKeys.length;p<m;p++){let h=l.possibleKeys[p],y=d[l.score];l.params[h]=n?.[h]&&!y?n[h]:r[h]??n?.[h],d[l.score]=!0}}return o}search(t,e){let r=[];this.#n=Ac;let o=[this],i=rg(e),a=[];for(let c=0,l=i.length;c<l;c++){let d=i[c],p=c===l-1,m=[];for(let h=0,y=o.length;h<y;h++){let g=o[h],f=g.#t[d];f&&(f.#n=g.#n,p?(f.#t["*"]&&r.push(...this.#o(f.#t["*"],t,g.#n)),r.push(...this.#o(f,t,g.#n))):m.push(f));for(let _=0,w=g.#r.length;_<w;_++){let b=g.#r[_],S=g.#n===Ac?{}:{...g.#n};if(b==="*"){let P=g.#t["*"];P&&(r.push(...this.#o(P,t,g.#n)),P.#n=S,m.push(P));continue}let[k,R,O]=b;if(!d&&!(O instanceof RegExp))continue;let C=g.#t[k],$=i.slice(c).join("/");if(O instanceof RegExp){let P=O.exec($);if(P){if(S[R]=P[0],r.push(...this.#o(C,t,g.#n,S)),Object.keys(C.#t).length){C.#n=S;let N=P[0].match(/\//)?.length??0;(a[N]||=[]).push(C)}continue}}(O===!0||O.test(d))&&(S[R]=d,p?(r.push(...this.#o(C,t,S,g.#n)),C.#t["*"]&&r.push(...this.#o(C.#t["*"],t,S,g.#n))):(C.#n=S,m.push(C)))}}o=m.concat(a.shift()??[])}return r.length>1&&r.sort((c,l)=>c.score-l.score),[r.map(({handler:c,params:l})=>[c,l])]}};var dg=class{static{s(this,"TrieRouter")}name="TrieRouter";#e;constructor(){this.#e=new lg}add(t,e,r){let n=Md(e);if(n){for(let o=0,i=n.length;o<i;o++)this.#e.insert(t,n[o],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}};var Pe=class extends ag{static{s(this,"Hono")}constructor(t={}){super(t),this.router=t.router??new ug({routers:[new Bd,new dg]})}};function N6(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}s(N6,"getColorEnabled");async function nI(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!N6())}s(nI,"getColorEnabledAsync");var D6=s(t=>{let[e,r]=[",","."];return t.map(o=>o.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},"humanize"),j6=s(t=>{let e=Date.now()-t;return D6([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},"time"),M6=s(async t=>{if(await nI())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`},"colorStatus");async function oI(t,e,r,n,o=0,i){let a=e==="<--"?`${e} ${r} ${n}`:`${e} ${r} ${n} ${await M6(o)} ${i}`;t(a)}s(oI,"log");var iI=s((t=console.log)=>s(async function(r,n){let{method:o,url:i}=r.req,a=i.slice(i.indexOf("/",8));await oI(t,"<--",o,a);let c=Date.now();await n(),await oI(t,"-->",o,a,r.res.status,j6(c))},"logger2"),"logger");var pg=class{static{s(this,"SecureLogger")}isDevelopment;isProduction;currentUserId;sensitivePatterns;logBuffer=[];maxBufferSize=1e3;flushInterval=5e3;constructor(){this.isDevelopment=!!(typeof process<"u"&&!1||typeof import.meta<"u"&&import.meta.env?.DEV),this.isProduction=typeof process<"u"||typeof import.meta<"u"&&import.meta.env?.MODE==="production",this.sensitivePatterns=[/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/g,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,/\b(?:\+55\s?)?\(?[1-9]{2}\)?\s?[9]?\d{4}-?\d{4}\b/g,/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,/(?:sk_|eyJ)[a-zA-Z0-9_-]{20,}/g,/password["\s:]+["']?[^"'\s,}]+["']?/gi,/token["\s:]+["']?[^"'\s,}]+["']?/gi,/account["\s:]+["']?\d{6,}["']?/gi],this.isProduction&&setInterval(()=>this.flushBuffer(),this.flushInterval)}setUserId(e){this.currentUserId=e}clearUserId(){this.currentUserId=void 0}sanitizeData(e,r){let n=e;this.sensitivePatterns.forEach(i=>{n=n.replace(i,"[REDACTED]")});let o;return r&&(o=this.sanitizeContextObject(r)),{sanitizedContext:o,sanitizedMessage:n}}sanitizeContextObject(e){let r={};for(let[n,o]of Object.entries(e))if(this.isSensitiveKey(n)&&o)r[n]="[REDACTED]";else if(typeof o=="string"){let a=o;this.sensitivePatterns.forEach(c=>{a=a.replace(c,"[REDACTED]")}),r[n]=a}else typeof o=="object"&&o!==null?r[n]=this.sanitizeContextObject(o):r[n]=o;return this.currentUserId&&!r.userId&&(r.userId=`${this.currentUserId.substring(0,8)}...`),r}isSensitiveKey(e){return["password","token","secret","key","auth","session","email","phone","cpf","cnpj","account","balance","creditcard","card","bank","transaction","amount"].some(n=>e.toLowerCase().includes(n.toLowerCase()))}createLogEntry(e,r,n){let{sanitizedMessage:o,sanitizedContext:i}=this.sanitizeData(r,n);return{context:i,level:e,message:o,sanitized:!0,timestamp:new Date().toISOString()}}writeLog(e){if(this.isDevelopment)switch(e.level){case 0:break;case 1:break;case 2:break;case 3:case 4:break;case 5:break}else this.isProduction&&this.addToBuffer(e)}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>=this.maxBufferSize&&this.flushBuffer()}flushBuffer(){if(this.logBuffer.length===0)return;let e=[...this.logBuffer];this.logBuffer=[];let r=e.filter(n=>n.level>=3);r.length>0&&r.forEach(n=>{})}log(e,r,n){if(!this.isDevelopment&&e===0)return;let o=this.createLogEntry(e,r,n);this.writeLog(o)}debug(e,r){this.log(0,e,r)}info(e,r){this.log(1,e,r)}warn(e,r){this.log(2,e,r)}error(e,r){this.log(3,e,r)}security(e,r){this.log(4,e,r)}audit(e,r){this.log(5,e,r)}voiceCommand(e,r,n){this.info("Voice command processed",{...n,command:e.substring(0,50),confidence:r})}authEvent(e,r,n){this.audit("Authentication event",{...n,event:e,userId:r?`${r.substring(0,8)}...`:void 0})}userAction(e,r,n){this.info("User action",{action:e,component:r,...n})}performance(e,r,n){this.info("Performance metric",{...n,operation:e,duration:r})}getBufferStats(){return{lastFlush:new Date,maxSize:this.maxBufferSize,size:this.logBuffer.length}}forceFlush(){this.flushBuffer()}clear(){this.logBuffer=[],this.currentUserId=void 0}},L=new pg;var sI=new Pe;sI.get("/",async t=>{try{return L.info("Starting calendar channel renewal check"),t.json({success:!0,message:"Calendar channel renewal completed",timestamp:new Date().toISOString(),channelsRenewed:0})}catch(e){return L.error("Calendar channel renewal failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Calendar channel renewal failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var aI=sI;var cI=new Pe;cI.get("/",async t=>{try{return L.info("Starting sync queue cleanup"),t.json({success:!0,message:"Sync queue cleanup completed",timestamp:new Date().toISOString(),itemsDeleted:0})}catch(e){return L.error("Sync queue cleanup failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue cleanup failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var uI=cI;var lI=new Pe;lI.get("/",async t=>{try{return L.info("Starting sync queue processing"),t.json({success:!0,message:"Sync queue processing completed",timestamp:new Date().toISOString(),itemsProcessed:0})}catch(e){return L.error("Sync queue processing failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue processing failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var dI=lI;var Cc=new Pe;Cc.route("/calendar-channel-renewal",aI);Cc.route("/sync-queue-processor",dI);Cc.route("/cleanup-sync-queue",uI);Cc.get("/health",t=>t.json({status:"healthy",service:"cron-jobs",timestamp:new Date().toISOString(),jobs:[{name:"calendar-channel-renewal",schedule:"0 0 * * *",description:"Renew expiring Google Calendar webhook channels"},{name:"sync-queue-processor",schedule:"*/5 * * * *",description:"Process pending Google Calendar sync queue items"},{name:"cleanup-sync-queue",schedule:"0 2 * * *",description:"Clean up old completed/failed sync queue items"}]}));var pI=Cc;var mI=["https://aegiswallet.com","https://www.aegiswallet.com","https://app.aegiswallet.com","http://localhost:3000","http://localhost:5173","http://localhost:8080","http://localhost:8081","http://localhost:8082","https://localhost:3000","https://localhost:5173","https://localhost:8080","https://localhost:8081","https://localhost:8082"],fI=s(async(t,e)=>{let r=t.req.header("Origin");if(mI.includes(r||"")||r?.startsWith("http://localhost:")&&!1||r?.startsWith("https://localhost:")&&!1?t.header("Access-Control-Allow-Origin",r||"*"):t.header("Access-Control-Allow-Origin",mI[0]),t.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.header("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, X-Client-ID"),t.header("Access-Control-Allow-Credentials","true"),t.header("Access-Control-Max-Age","86400"),t.header("Vary","Origin"),t.req.method==="OPTIONS")return t.newResponse(null,204);await e()},"corsMiddleware");var j=Symbol.for("drizzle:entityKind"),cde=Symbol.for("drizzle:hasOwnEntityKind");function Y(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,j))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(j in r&&r[j]===e[j])return!0;r=Object.getPrototypeOf(r)}return!1}s(Y,"is");var kt=class{static{s(this,"Column")}constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[j]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Vd=class{static{s(this,"ColumnBuilder")}static[j]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var On=Symbol.for("drizzle:Name");var Hd=class{static{s(this,"ForeignKeyBuilder")}static[j]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:n,columns:o,foreignColumns:i}=e();return{name:n,columns:o,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new mg(e,this)}},mg=class{static{s(this,"ForeignKey")}constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[j]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(c=>c.name),i=n.map(c=>c.name),a=[this.table[On],...o,n[0].table[On],...i];return e??`${a.join("_")}_fk`}};function Zd(t,...e){return t(...e)}s(Zd,"iife");function gg(t,e){return`${t[On]}_${e.join("_")}_unique`}s(gg,"uniqueKeyName");var fg=class{static{s(this,"UniqueConstraintBuilder")}constructor(e,r){this.name=r,this.columns=e}static[j]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new hg(e,this.columns,this.nullsNotDistinctConfig,this.name)}},hI=class{static{s(this,"UniqueOnConstraintBuilder")}static[j]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new fg(e,this.name)}},hg=class{static{s(this,"UniqueConstraint")}constructor(e,r,n,o){this.table=e,this.columns=r,this.name=o??gg(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}static[j]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function gI(t,e,r){for(let n=e;n<t.length;n++){let o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}s(gI,"parsePgArrayValue");function yI(t,e=0){let r=[],n=e,o=!1;for(;n<t.length;){let i=t[n];if(i===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,i==="\\"){n+=2;continue}if(i==='"'){let[l,d]=gI(t,n+1,!0);r.push(l),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){let[l,d]=yI(t,n+1);r.push(l),n=d;continue}let[a,c]=gI(t,n,!1);r.push(a),n=c}return[r,n]}s(yI,"parsePgNestedArray");function vI(t){let[e]=yI(t,1);return e}s(vI,"parsePgArray");function yg(t){return`{${t.map(e=>Array.isArray(e)?yg(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}s(yg,"makePgArray");var we=class extends Vd{static{s(this,"PgColumnBuilder")}foreignKeyConfigs=[];static[j]="PgColumnBuilder";array(e){return new _g(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>Zd((i,a)=>{let c=new Hd(()=>{let l=i();return{columns:[e],foreignColumns:[l]}});return a.onUpdate&&c.onUpdate(a.onUpdate),a.onDelete&&c.onDelete(a.onDelete),c.build(r)},n,o))}buildExtraConfigColumn(e){return new vg(e,this.config)}},pe=class extends kt{static{s(this,"PgColumn")}constructor(e,r){r.uniqueName||(r.uniqueName=gg(e,[r.name])),super(e,r),this.table=e}static[j]="PgColumn"},vg=class extends pe{static{s(this,"ExtraConfigColumn")}static[j]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},js=class{static{s(this,"IndexedColumn")}static[j]="IndexedColumn";constructor(e,r,n,o){this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=o}name;keyAsName;type;indexConfig},_g=class extends we{static{s(this,"PgArrayBuilder")}static[j]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){let r=this.config.baseBuilder.build(e);return new bg(e,this.config,r)}},bg=class t extends pe{static{s(this,"PgArray")}constructor(e,r,n,o){super(e,r),this.baseColumn=n,this.range=o,this.size=r.size}size;static[j]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=vI(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let n=e.map(o=>o===null?null:Y(this.baseColumn,t)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?n:yg(n)}};var wg=class extends we{static{s(this,"PgEnumObjectColumnBuilder")}static[j]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new Sg(e,this.config)}},Sg=class extends pe{static{s(this,"PgEnumObjectColumn")}static[j]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},Jd=Symbol.for("drizzle:isPgEnum");function _I(t){return!!t&&typeof t=="function"&&Jd in t&&t[Jd]===!0}s(_I,"isPgEnum");var xg=class extends we{static{s(this,"PgEnumColumnBuilder")}static[j]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new Tg(e,this.config)}},Tg=class extends pe{static{s(this,"PgEnumColumn")}static[j]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};function rr(t,e){return Array.isArray(e)?z6(t,[...e],void 0):U6(t,e,void 0)}s(rr,"pgEnum");function z6(t,e,r){let n=Object.assign(o=>new xg(o??"",n),{enumName:t,enumValues:e,schema:r,[Jd]:!0});return n}s(z6,"pgEnumWithSchema");function U6(t,e,r){let n=Object.assign(o=>new wg(o??"",n),{enumName:t,enumValues:Object.values(e),schema:r,[Jd]:!0});return n}s(U6,"pgEnumObjectWithSchema");var Jt=class{static{s(this,"Subquery")}static[j]="Subquery";constructor(e,r,n,o=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o,usedTables:i}}},Ms=class extends Jt{static{s(this,"WithSubquery")}static[j]="WithSubquery"};var bI="0.44.7";var Eg,kg,cr={startActiveSpan(t,e){return Eg?(kg||(kg=Eg.trace.getTracer("drizzle-orm",bI)),Zd((r,n)=>n.startActiveSpan(t,o=>{try{return e(o)}catch(i){throw o.setStatus({code:r.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{o.end()}}),Eg,kg)):e()}};var Dt=Symbol.for("drizzle:ViewBaseConfig");var Xi=Symbol.for("drizzle:Schema"),Gd=Symbol.for("drizzle:Columns"),wI=Symbol.for("drizzle:ExtraConfigColumns"),Ig=Symbol.for("drizzle:OriginalName"),Pg=Symbol.for("drizzle:BaseName"),Oc=Symbol.for("drizzle:IsAlias"),SI=Symbol.for("drizzle:ExtraConfigBuilder"),L6=Symbol.for("drizzle:IsDrizzleTable"),me=class{static{s(this,"Table")}static[j]="Table";static Symbol={Name:On,Schema:Xi,OriginalName:Ig,Columns:Gd,ExtraConfigColumns:wI,BaseName:Pg,IsAlias:Oc,ExtraConfigBuilder:SI};[On];[Ig];[Xi];[Gd];[wI];[Pg];[Oc]=!1;[L6]=!0;[SI]=void 0;constructor(e,r,n){this[On]=this[Ig]=e,this[Xi]=r,this[Pg]=n}};function Gr(t){return t[On]}s(Gr,"getTableName");function Yi(t){return`${t[Xi]??"public"}.${t[On]}`}s(Yi,"getTableUniqueName");var xI=class{static{s(this,"FakePrimitiveParam")}static[j]="FakePrimitiveParam"};function Ag(t){return t!=null&&typeof t.getSQL=="function"}s(Ag,"isSQLWrapper");function q6(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}s(q6,"mergeQueries");var ur=class{static{s(this,"StringChunk")}static[j]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new _e([this])}},_e=class t{static{s(this,"SQL")}constructor(e){this.queryChunks=e;for(let r of e)if(Y(r,me)){let n=r[me.Symbol.Schema];this.usedTables.push(n===void 0?r[me.Symbol.Name]:n+"."+r[me.Symbol.Name])}}static[j]="SQL";decoder=EI;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return cr.startActiveSpan("drizzle.buildSQL",r=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){let n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:i,escapeParam:a,prepareTyping:c,inlineParams:l,paramStartIndex:d}=n;return q6(e.map(p=>{if(Y(p,ur))return{sql:p.value.join(""),params:[]};if(Y(p,$c))return{sql:i(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){let m=[new ur("(")];for(let[h,y]of p.entries())m.push(y),h<p.length-1&&m.push(new ur(", "));return m.push(new ur(")")),this.buildQueryFromSourceParams(m,n)}if(Y(p,t))return this.buildQueryFromSourceParams(p.queryChunks,{...n,inlineParams:l||p.shouldInlineParams});if(Y(p,me)){let m=p[me.Symbol.Schema],h=p[me.Symbol.Name];return{sql:m===void 0||p[Oc]?i(h):i(m)+"."+i(h),params:[]}}if(Y(p,kt)){let m=o.getColumnCasing(p);if(r.invokeSource==="indexes")return{sql:i(m),params:[]};let h=p.table[me.Symbol.Schema];return{sql:p.table[Oc]||h===void 0?i(p.table[me.Symbol.Name])+"."+i(m):i(h)+"."+i(p.table[me.Symbol.Name])+"."+i(m),params:[]}}if(Y(p,Or)){let m=p[Dt].schema,h=p[Dt].name;return{sql:m===void 0||p[Dt].isAlias?i(h):i(m)+"."+i(h),params:[]}}if(Y(p,Kr)){if(Y(p.value,Ao))return{sql:a(d.value++,p),params:[p],typings:["none"]};let m=p.value===null?null:p.encoder.mapToDriverValue(p.value);if(Y(m,t))return this.buildQueryFromSourceParams([m],n);if(l)return{sql:this.mapInlineParam(m,n),params:[]};let h=["none"];return c&&(h=[c(p.encoder)]),{sql:a(d.value++,m),params:[m],typings:h}}return Y(p,Ao)?{sql:a(d.value++,p),params:[p],typings:["none"]}:Y(p,t.Aliased)&&p.fieldAlias!==void 0?{sql:i(p.fieldAlias),params:[]}:Y(p,Jt)?p._.isWith?{sql:i(p._.alias),params:[]}:this.buildQueryFromSourceParams([new ur("("),p._.sql,new ur(") "),new $c(p._.alias)],n):_I(p)?p.schema?{sql:i(p.schema)+"."+i(p.enumName),params:[]}:{sql:i(p.enumName),params:[]}:Ag(p)?p.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([p.getSQL()],n):this.buildQueryFromSourceParams([new ur("("),p.getSQL(),new ur(")")],n):l?{sql:this.mapInlineParam(p,n),params:[]}:{sql:a(d.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},$c=class{static{s(this,"Name")}constructor(e){this.value=e}static[j]="Name";brand;getSQL(){return new _e([this])}};function TI(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}s(TI,"isDriverValueEncoder");var EI={mapFromDriverValue:s(t=>t,"mapFromDriverValue")},kI={mapToDriverValue:s(t=>t,"mapToDriverValue")},cpe={...EI,...kI},Kr=class{static{s(this,"Param")}constructor(e,r=kI){this.value=e,this.encoder=r}static[j]="Param";brand;getSQL(){return new _e([this])}};function M(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new ur(t[0]));for(let[n,o]of e.entries())r.push(o,new ur(t[n+1]));return new _e(r)}s(M,"sql");(t=>{function e(){return new _e([])}s(e,"empty"),t.empty=e;function r(l){return new _e(l)}s(r,"fromList"),t.fromList=r;function n(l){return new _e([new ur(l)])}s(n,"raw"),t.raw=n;function o(l,d){let p=[];for(let[m,h]of l.entries())m>0&&d!==void 0&&p.push(d),p.push(h);return new _e(p)}s(o,"join"),t.join=o;function i(l){return new $c(l)}s(i,"identifier"),t.identifier=i;function a(l){return new Ao(l)}s(a,"placeholder2"),t.placeholder=a;function c(l,d){return new Kr(l,d)}s(c,"param2"),t.param=c})(M||(M={}));(t=>{class e{static{s(this,"Aliased")}constructor(n,o){this.sql=n,this.fieldAlias=o}static[j]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(_e||(_e={}));var Ao=class{static{s(this,"Placeholder")}constructor(e){this.name=e}static[j]="Placeholder";getSQL(){return new _e([this])}};function si(t,e){return t.map(r=>{if(Y(r,Ao)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(Y(r,Kr)&&Y(r.value,Ao)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}s(si,"fillPlaceholders");var F6=Symbol.for("drizzle:IsDrizzleView"),Or=class{static{s(this,"View")}static[j]="View";[Dt];[F6]=!0;constructor({name:e,schema:r,selectedFields:n,query:o}){this[Dt]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new _e([this])}};kt.prototype.getSQL=function(){return new _e([this])};me.prototype.getSQL=function(){return new _e([this])};Jt.prototype.getSQL=function(){return new _e([this])};var es=class{static{s(this,"ColumnAliasProxyHandler")}constructor(e){this.table=e}static[j]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},zs=class{static{s(this,"TableAliasProxyHandler")}constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[j]="TableAliasProxyHandler";get(e,r){if(r===me.Symbol.IsAlias)return!0;if(r===me.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===me.Symbol.OriginalName)return this.alias;if(r===Dt)return{...e[Dt],name:this.alias,isAlias:!0};if(r===me.Symbol.Columns){let o=e[me.Symbol.Columns];if(!o)return o;let i={};return Object.keys(o).map(a=>{i[a]=new Proxy(o[a],new es(new Proxy(e,this)))}),i}let n=e[r];return Y(n,kt)?new Proxy(n,new es(new Proxy(e,this))):n}},II=class{static{s(this,"RelationTableAliasProxyHandler")}constructor(e){this.alias=e}static[j]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?Rc(e.sourceTable,this.alias):e[r]}};function Rc(t,e){return new Proxy(t,new zs(e,!1))}s(Rc,"aliasedTable");function eo(t,e){return new Proxy(t,new es(new Proxy(t.table,new zs(e,!1))))}s(eo,"aliasedTableColumn");function Cg(t,e){return new _e.Aliased(Nc(t.sql,e),t.fieldAlias)}s(Cg,"mapColumnsInAliasedSQLToAlias");function Nc(t,e){return M.join(t.queryChunks.map(r=>Y(r,kt)?eo(r,e):Y(r,_e)?Nc(r,e):Y(r,_e.Aliased)?Cg(r,e):r))}s(Nc,"mapColumnsInSQLToAlias");var Dc=class extends Error{static{s(this,"DrizzleError")}static[j]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},Co=class t extends Error{static{s(this,"DrizzleQueryError")}constructor(e,r,n){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=n,Error.captureStackTrace(this,t),n&&(this.cause=n)}},Kd=class extends Dc{static{s(this,"TransactionRollbackError")}static[j]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var Og=class{static{s(this,"ConsoleLogWriter")}static[j]="ConsoleLogWriter";write(e){console.log(e)}},Us=class{static{s(this,"DefaultLogger")}static[j]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new Og}logQuery(e,r){let n=r.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),o=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${o}`)}},Ls=class{static{s(this,"NoopLogger")}static[j]="NoopLogger";logQuery(){}};var kr=class{static{s(this,"QueryPromise")}static[j]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};function Wd(t,e,r){let n={},o=t.reduce((i,{path:a,field:c},l)=>{let d;Y(c,kt)?d=c:Y(c,_e)?d=c.decoder:d=c.sql.decoder;let p=i;for(let[m,h]of a.entries())if(m<a.length-1)h in p||(p[h]={}),p=p[h];else{let y=e[l],g=p[h]=y===null?null:d.mapFromDriverValue(y);if(r&&Y(c,kt)&&a.length===2){let f=a[0];f in n?typeof n[f]=="string"&&n[f]!==Gr(c.table)&&(n[f]=!1):n[f]=g===null?Gr(c.table):!1}}return i},{});if(r&&Object.keys(n).length>0)for(let[i,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(o[i]=null);return o}s(Wd,"mapResultRow");function _n(t,e){return Object.entries(t).reduce((r,[n,o])=>{if(typeof n!="string")return r;let i=e?[...e,n]:[n];return Y(o,kt)||Y(o,_e)||Y(o,_e.Aliased)?r.push({path:i,field:o}):Y(o,me)?r.push(..._n(o[me.Symbol.Columns],i)):r.push(..._n(o,i)),r},[])}s(_n,"orderSelectedFields");function jc(t,e){let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let[o,i]of r.entries())if(i!==n[o])return!1;return!0}s(jc,"haveSameKeys");function Qd(t,e){let r=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,o])=>Y(o,_e)||Y(o,kt)?[n,o]:[n,new Kr(o,t[me.Symbol.Columns][n])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}s(Qd,"mapUpdateSet");function PI(t,e){for(let r of e)for(let n of Object.getOwnPropertyNames(r.prototype))n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))}s(PI,"applyMixins");function AI(t){return t[me.Symbol.Columns]}s(AI,"getTableColumns");function Oo(t){return Y(t,Jt)?t._.alias:Y(t,Or)?t[Dt].name:Y(t,_e)?void 0:t[me.Symbol.IsAlias]?t[me.Symbol.Name]:t[me.Symbol.BaseName]}s(Oo,"getTableLikeName");function lt(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}s(lt,"getColumnNameAndConfig");function Xd(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}s(Xd,"isConfig");var Rpe=typeof TextDecoder>"u"?null:new TextDecoder;var $o=class extends we{static{s(this,"PgIntColumnBaseBuilder")}static[j]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var $g=class extends $o{static{s(this,"PgBigInt53Builder")}static[j]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Rg(e,this.config)}},Rg=class extends pe{static{s(this,"PgBigInt53")}static[j]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Ng=class extends $o{static{s(this,"PgBigInt64Builder")}static[j]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Dg(e,this.config)}},Dg=class extends pe{static{s(this,"PgBigInt64")}static[j]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function CI(t,e){let{name:r,config:n}=lt(t,e);return n.mode==="number"?new $g(r):new Ng(r)}s(CI,"bigint");var jg=class extends we{static{s(this,"PgBigSerial53Builder")}static[j]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Mg(e,this.config)}},Mg=class extends pe{static{s(this,"PgBigSerial53")}static[j]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},zg=class extends we{static{s(this,"PgBigSerial64Builder")}static[j]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Ug(e,this.config)}},Ug=class extends pe{static{s(this,"PgBigSerial64")}static[j]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function OI(t,e){let{name:r,config:n}=lt(t,e);return n.mode==="number"?new jg(r):new zg(r)}s(OI,"bigserial");var Lg=class extends we{static{s(this,"PgBooleanBuilder")}static[j]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new qg(e,this.config)}},qg=class extends pe{static{s(this,"PgBoolean")}static[j]="PgBoolean";getSQLType(){return"boolean"}};function ge(t){return new Lg(t??"")}s(ge,"boolean");var Fg=class extends we{static{s(this,"PgCharBuilder")}static[j]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Bg(e,this.config)}},Bg=class extends pe{static{s(this,"PgChar")}static[j]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function $I(t,e={}){let{name:r,config:n}=lt(t,e);return new Fg(r,n)}s($I,"char");var Vg=class extends we{static{s(this,"PgCidrBuilder")}static[j]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Hg(e,this.config)}},Hg=class extends pe{static{s(this,"PgCidr")}static[j]="PgCidr";getSQLType(){return"cidr"}};function RI(t){return new Vg(t??"")}s(RI,"cidr");var Zg=class extends we{static{s(this,"PgCustomColumnBuilder")}static[j]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Jg(e,this.config)}},Jg=class extends pe{static{s(this,"PgCustomColumn")}static[j]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function NI(t){return(e,r)=>{let{name:n,config:o}=lt(e,r);return new Zg(n,o,t)}}s(NI,"customType");var to=class extends we{static{s(this,"PgDateColumnBaseBuilder")}static[j]="PgDateColumnBaseBuilder";defaultNow(){return this.default(M`now()`)}};var Gg=class extends to{static{s(this,"PgDateBuilder")}static[j]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Mc(e,this.config)}},Mc=class extends pe{static{s(this,"PgDate")}static[j]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Kg=class extends to{static{s(this,"PgDateStringBuilder")}static[j]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new zc(e,this.config)}},zc=class extends pe{static{s(this,"PgDateString")}static[j]="PgDateString";getSQLType(){return"date"}};function Ir(t,e){let{name:r,config:n}=lt(t,e);return n?.mode==="date"?new Gg(r):new Kg(r)}s(Ir,"date");var Wg=class extends we{static{s(this,"PgDoublePrecisionBuilder")}static[j]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Qg(e,this.config)}},Qg=class extends pe{static{s(this,"PgDoublePrecision")}static[j]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function DI(t){return new Wg(t??"")}s(DI,"doublePrecision");var Xg=class extends we{static{s(this,"PgInetBuilder")}static[j]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Yg(e,this.config)}},Yg=class extends pe{static{s(this,"PgInet")}static[j]="PgInet";getSQLType(){return"inet"}};function an(t){return new Xg(t??"")}s(an,"inet");var ey=class extends $o{static{s(this,"PgIntegerBuilder")}static[j]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new ty(e,this.config)}},ty=class extends pe{static{s(this,"PgInteger")}static[j]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function wt(t){return new ey(t??"")}s(wt,"integer");var ry=class extends we{static{s(this,"PgIntervalBuilder")}static[j]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new ny(e,this.config)}},ny=class extends pe{static{s(this,"PgInterval")}static[j]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};function jI(t,e={}){let{name:r,config:n}=lt(t,e);return new ry(r,n)}s(jI,"interval");var oy=class extends we{static{s(this,"PgJsonBuilder")}static[j]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Uc(e,this.config)}},Uc=class extends pe{static{s(this,"PgJson")}static[j]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function MI(t){return new oy(t??"")}s(MI,"json");var iy=class extends we{static{s(this,"PgJsonbBuilder")}static[j]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Lc(e,this.config)}},Lc=class extends pe{static{s(this,"PgJsonb")}static[j]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function it(t){return new iy(t??"")}s(it,"jsonb");var sy=class extends we{static{s(this,"PgLineBuilder")}static[j]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new ay(e,this.config)}},ay=class extends pe{static{s(this,"PgLineTuple")}static[j]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},cy=class extends we{static{s(this,"PgLineABCBuilder")}static[j]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new uy(e,this.config)}},uy=class extends pe{static{s(this,"PgLineABC")}static[j]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function zI(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new sy(r):new cy(r)}s(zI,"line");var ly=class extends we{static{s(this,"PgMacaddrBuilder")}static[j]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new dy(e,this.config)}},dy=class extends pe{static{s(this,"PgMacaddr")}static[j]="PgMacaddr";getSQLType(){return"macaddr"}};function UI(t){return new ly(t??"")}s(UI,"macaddr");var py=class extends we{static{s(this,"PgMacaddr8Builder")}static[j]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new my(e,this.config)}},my=class extends pe{static{s(this,"PgMacaddr8")}static[j]="PgMacaddr8";getSQLType(){return"macaddr8"}};function LI(t){return new py(t??"")}s(LI,"macaddr8");var fy=class extends we{static{s(this,"PgNumericBuilder")}static[j]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new qc(e,this.config)}},qc=class extends pe{static{s(this,"PgNumeric")}static[j]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},hy=class extends we{static{s(this,"PgNumericNumberBuilder")}static[j]="PgNumericNumberBuilder";constructor(e,r,n){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=n}build(e){return new gy(e,this.config)}},gy=class extends pe{static{s(this,"PgNumericNumber")}static[j]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},yy=class extends we{static{s(this,"PgNumericBigIntBuilder")}static[j]="PgNumericBigIntBuilder";constructor(e,r,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=n}build(e){return new vy(e,this.config)}},vy=class extends pe{static{s(this,"PgNumericBigInt")}static[j]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function _y(t,e){let{name:r,config:n}=lt(t,e),o=n?.mode;return o==="number"?new hy(r,n?.precision,n?.scale):o==="bigint"?new yy(r,n?.precision,n?.scale):new fy(r,n?.precision,n?.scale)}s(_y,"numeric");var st=_y;var by=class extends we{static{s(this,"PgPointTupleBuilder")}static[j]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new wy(e,this.config)}},wy=class extends pe{static{s(this,"PgPointTuple")}static[j]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},Sy=class extends we{static{s(this,"PgPointObjectBuilder")}static[j]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new xy(e,this.config)}},xy=class extends pe{static{s(this,"PgPointObject")}static[j]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function qI(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new by(r):new Sy(r)}s(qI,"point");function B6(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}s(B6,"hexToBytes");function FI(t,e){let r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}s(FI,"bytesToFloat64");function Ty(t){let e=B6(t),r=0,n=e[r];r+=1;let o=new DataView(e.buffer),i=o.getUint32(r,n===1);r+=4;let a;if(i&536870912&&(a=o.getUint32(r,n===1),r+=4),(i&65535)===1){let c=FI(e,r);r+=8;let l=FI(e,r);return r+=8,[c,l]}throw new Error("Unsupported geometry type")}s(Ty,"parseEWKB");var Ey=class extends we{static{s(this,"PgGeometryBuilder")}static[j]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new ky(e,this.config)}},ky=class extends pe{static{s(this,"PgGeometry")}static[j]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Ty(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Iy=class extends we{static{s(this,"PgGeometryObjectBuilder")}static[j]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Py(e,this.config)}},Py=class extends pe{static{s(this,"PgGeometryObject")}static[j]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=Ty(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function BI(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new Ey(r):new Iy(r)}s(BI,"geometry");var Ay=class extends we{static{s(this,"PgRealBuilder")}static[j]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Cy(e,this.config)}},Cy=class extends pe{static{s(this,"PgReal")}static[j]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=s(e=>typeof e=="string"?Number.parseFloat(e):e,"mapFromDriverValue")};function VI(t){return new Ay(t??"")}s(VI,"real");var Oy=class extends we{static{s(this,"PgSerialBuilder")}static[j]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new $y(e,this.config)}},$y=class extends pe{static{s(this,"PgSerial")}static[j]="PgSerial";getSQLType(){return"serial"}};function HI(t){return new Oy(t??"")}s(HI,"serial");var Ry=class extends $o{static{s(this,"PgSmallIntBuilder")}static[j]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ny(e,this.config)}},Ny=class extends pe{static{s(this,"PgSmallInt")}static[j]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=s(e=>typeof e=="string"?Number(e):e,"mapFromDriverValue")};function ZI(t){return new Ry(t??"")}s(ZI,"smallint");var Dy=class extends we{static{s(this,"PgSmallSerialBuilder")}static[j]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new jy(e,this.config)}},jy=class extends pe{static{s(this,"PgSmallSerial")}static[j]="PgSmallSerial";getSQLType(){return"smallserial"}};function JI(t){return new Dy(t??"")}s(JI,"smallserial");var My=class extends we{static{s(this,"PgTextBuilder")}static[j]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new zy(e,this.config)}},zy=class extends pe{static{s(this,"PgText")}static[j]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function A(t,e={}){let{name:r,config:n}=lt(t,e);return new My(r,n)}s(A,"text");var Uy=class extends to{static{s(this,"PgTimeBuilder")}constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[j]="PgTimeBuilder";build(e){return new Fc(e,this.config)}},Fc=class extends pe{static{s(this,"PgTime")}static[j]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function GI(t,e={}){let{name:r,config:n}=lt(t,e);return new Uy(r,n.withTimezone??!1,n.precision)}s(GI,"time");var Ly=class extends to{static{s(this,"PgTimestampBuilder")}static[j]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Bc(e,this.config)}},Bc=class extends pe{static{s(this,"PgTimestamp")}static[j]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=s(e=>new Date(this.withTimezone?e:e+"+0000"),"mapFromDriverValue");mapToDriverValue=s(e=>e.toISOString(),"mapToDriverValue")},qy=class extends to{static{s(this,"PgTimestampStringBuilder")}static[j]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Vc(e,this.config)}},Vc=class extends pe{static{s(this,"PgTimestampString")}static[j]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function G(t,e={}){let{name:r,config:n}=lt(t,e);return n?.mode==="string"?new qy(r,n.withTimezone??!1,n.precision):new Ly(r,n?.withTimezone??!1,n?.precision)}s(G,"timestamp");var Fy=class extends we{static{s(this,"PgUUIDBuilder")}static[j]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(M`gen_random_uuid()`)}build(e){return new Hc(e,this.config)}},Hc=class extends pe{static{s(this,"PgUUID")}static[j]="PgUUID";getSQLType(){return"uuid"}};function qs(t){return new Fy(t??"")}s(qs,"uuid");var By=class extends we{static{s(this,"PgVarcharBuilder")}static[j]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Vy(e,this.config)}},Vy=class extends pe{static{s(this,"PgVarchar")}static[j]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function KI(t,e={}){let{name:r,config:n}=lt(t,e);return new By(r,n)}s(KI,"varchar");var Hy=class extends we{static{s(this,"PgBinaryVectorBuilder")}static[j]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Zy(e,this.config)}},Zy=class extends pe{static{s(this,"PgBinaryVector")}static[j]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function WI(t,e){let{name:r,config:n}=lt(t,e);return new Hy(r,n)}s(WI,"bit");var Jy=class extends we{static{s(this,"PgHalfVectorBuilder")}static[j]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Gy(e,this.config)}},Gy=class extends pe{static{s(this,"PgHalfVector")}static[j]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function QI(t,e){let{name:r,config:n}=lt(t,e);return new Jy(r,n)}s(QI,"halfvec");var Ky=class extends we{static{s(this,"PgSparseVectorBuilder")}static[j]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Wy(e,this.config)}},Wy=class extends pe{static{s(this,"PgSparseVector")}static[j]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function XI(t,e){let{name:r,config:n}=lt(t,e);return new Ky(r,n)}s(XI,"sparsevec");var Qy=class extends we{static{s(this,"PgVectorBuilder")}static[j]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Xy(e,this.config)}},Xy=class extends pe{static{s(this,"PgVector")}static[j]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function YI(t,e){let{name:r,config:n}=lt(t,e);return new Qy(r,n)}s(YI,"vector");function eP(){return{bigint:CI,bigserial:OI,boolean:ge,char:$I,cidr:RI,customType:NI,date:Ir,doublePrecision:DI,inet:an,integer:wt,interval:jI,json:MI,jsonb:it,line:zI,macaddr:UI,macaddr8:LI,numeric:_y,point:qI,geometry:BI,real:VI,serial:HI,smallint:ZI,smallserial:JI,text:A,time:GI,timestamp:G,uuid:qs,varchar:KI,bit:WI,halfvec:QI,sparsevec:XI,vector:YI}}s(eP,"getPgColumnBuilders");var Yy=Symbol.for("drizzle:PgInlineForeignKeys"),tP=Symbol.for("drizzle:EnableRLS"),lr=class extends me{static{s(this,"PgTable")}static[j]="PgTable";static Symbol=Object.assign({},me.Symbol,{InlineForeignKeys:Yy,EnableRLS:tP});[Yy]=[];[tP]=!1;[me.Symbol.ExtraConfigBuilder]=void 0;[me.Symbol.ExtraConfigColumns]={}};function V6(t,e,r,n,o=t){let i=new lr(t,n,o),a=typeof e=="function"?e(eP()):e,c=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.build(i);return i[Yy].push(...h.buildForeignKeys(y,i)),[p,y]})),l=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.buildExtraConfigColumn(i);return[p,y]})),d=Object.assign(i,c);return d[me.Symbol.Columns]=c,d[me.Symbol.ExtraConfigColumns]=l,r&&(d[lr.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:s(()=>(d[lr.Symbol.EnableRLS]=!0,d),"enableRLS")})}s(V6,"pgTableWithSchema");var ke=s((t,e,r)=>V6(t,e,r,void 0),"pgTable");var Yd=class{static{s(this,"PrimaryKeyBuilder")}static[j]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new ev(e,this.columns,this.name)}},ev=class{static{s(this,"PrimaryKey")}constructor(e,r,n){this.table=e,this.columns=r,this.name=n}static[j]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[lr.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function Wr(t,e){return TI(e)&&!Ag(t)&&!Y(t,Kr)&&!Y(t,Ao)&&!Y(t,kt)&&!Y(t,me)&&!Y(t,Or)?new Kr(t,e):t}s(Wr,"bindIfParam");var Z=s((t,e)=>M`${t} = ${Wr(e,t)}`,"eq"),rP=s((t,e)=>M`${t} <> ${Wr(e,t)}`,"ne");function xe(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new _e(e):new _e([new ur("("),M.join(e,new ur(" and ")),new ur(")")])}s(xe,"and");function ts(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new _e(e):new _e([new ur("("),M.join(e,new ur(" or ")),new ur(")")])}s(ts,"or");function nP(t){return M`not ${t}`}s(nP,"not");var oP=s((t,e)=>M`${t} > ${Wr(e,t)}`,"gt"),dr=s((t,e)=>M`${t} >= ${Wr(e,t)}`,"gte"),iP=s((t,e)=>M`${t} < ${Wr(e,t)}`,"lt"),nr=s((t,e)=>M`${t} <= ${Wr(e,t)}`,"lte");function Fs(t,e){return Array.isArray(e)?e.length===0?M`false`:M`${t} in ${e.map(r=>Wr(r,t))}`:M`${t} in ${Wr(e,t)}`}s(Fs,"inArray");function sP(t,e){return Array.isArray(e)?e.length===0?M`true`:M`${t} not in ${e.map(r=>Wr(r,t))}`:M`${t} not in ${Wr(e,t)}`}s(sP,"notInArray");function ep(t){return M`${t} is null`}s(ep,"isNull");function aP(t){return M`${t} is not null`}s(aP,"isNotNull");function cP(t){return M`exists ${t}`}s(cP,"exists");function uP(t){return M`not exists ${t}`}s(uP,"notExists");function lP(t,e,r){return M`${t} between ${Wr(e,t)} and ${Wr(r,t)}`}s(lP,"between");function dP(t,e,r){return M`${t} not between ${Wr(e,t)} and ${Wr(r,t)}`}s(dP,"notBetween");function pP(t,e){return M`${t} like ${e}`}s(pP,"like");function mP(t,e){return M`${t} not like ${e}`}s(mP,"notLike");function Pr(t,e){return M`${t} ilike ${e}`}s(Pr,"ilike");function fP(t,e){return M`${t} not ilike ${e}`}s(fP,"notIlike");function ai(t){return M`${t} asc`}s(ai,"asc");function jt(t){return M`${t} desc`}s(jt,"desc");var tp=class{static{s(this,"Relation")}constructor(e,r,n){this.sourceTable=e,this.referencedTable=r,this.relationName=n,this.referencedTableName=r[me.Symbol.Name]}static[j]="Relation";referencedTableName;fieldName},rp=class{static{s(this,"Relations")}constructor(e,r){this.table=e,this.config=r}static[j]="Relations"},ci=class t extends tp{static{s(this,"One")}constructor(e,r,n,o){super(e,r,n?.relationName),this.config=n,this.isNullable=o}static[j]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},Zc=class t extends tp{static{s(this,"Many")}constructor(e,r,n){super(e,r,n?.relationName),this.config=n}static[j]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function hP(){return{and:xe,between:lP,eq:Z,exists:cP,gt:oP,gte:dr,ilike:Pr,inArray:Fs,isNull:ep,isNotNull:aP,like:pP,lt:iP,lte:nr,ne:rP,not:nP,notBetween:dP,notExists:uP,notLike:mP,notIlike:fP,notInArray:sP,or:ts,sql:M}}s(hP,"getOperators");function gP(){return{sql:M,asc:ai,desc:jt}}s(gP,"getOrderByOperators");function op(t,e){Object.keys(t).length===1&&"default"in t&&!Y(t.default,me)&&(t=t.default);let r={},n={},o={};for(let[i,a]of Object.entries(t))if(Y(a,me)){let c=Yi(a),l=n[c];r[c]=i,o[i]={tsName:i,dbName:a[me.Symbol.Name],schema:a[me.Symbol.Schema],columns:a[me.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let p of Object.values(a[me.Symbol.Columns]))p.primary&&o[i].primaryKey.push(p);let d=a[me.Symbol.ExtraConfigBuilder]?.(a[me.Symbol.ExtraConfigColumns]);if(d)for(let p of Object.values(d))Y(p,Yd)&&o[i].primaryKey.push(...p.columns)}else if(Y(a,rp)){let c=Yi(a.table),l=r[c],d=a.config(e(a.table)),p;for(let[m,h]of Object.entries(d))if(l){let y=o[l];y.relations[m]=h,p&&y.primaryKey.push(...p)}else c in n||(n[c]={relations:{},primaryKey:p}),n[c].relations[m]=h}return{tables:o,tableNamesMap:r}}s(op,"extractTablesRelationalConfig");function qe(t,e){return new rp(t,r=>Object.fromEntries(Object.entries(e(r)).map(([n,o])=>[n,o.withFieldName(n)])))}s(qe,"relations");function H6(t){return s(function(r,n){return new ci(t,r,n,n?.fields.reduce((o,i)=>o&&i.notNull,!0)??!1)},"one")}s(H6,"createOne");function Z6(t){return s(function(r,n){return new Zc(t,r,n)},"many")}s(Z6,"createMany");function yP(t,e,r){if(Y(r,ci)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=e[Yi(r.referencedTable)];if(!n)throw new Error(`Table "${r.referencedTable[me.Symbol.Name]}" not found in schema`);let o=t[n];if(!o)throw new Error(`Table "${n}" not found in schema`);let i=r.sourceTable,a=e[Yi(i)];if(!a)throw new Error(`Table "${i[me.Symbol.Name]}" not found in schema`);let c=[];for(let l of Object.values(o.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&c.push(l);if(c.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[me.Symbol.Name]}". Please specify relation name`);if(c[0]&&Y(c[0],ci)&&c[0].config)return{fields:c[0].config.references,references:c[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}s(yP,"normalizeRelation");function ip(t){return{one:H6(t),many:Z6(t)}}s(ip,"createTableRelationsHelpers");function np(t,e,r,n,o=i=>i){let i={};for(let[a,c]of n.entries())if(c.isJson){let l=e.relations[c.tsKey],d=r[a],p=typeof d=="string"?JSON.parse(d):d;i[c.tsKey]=Y(l,ci)?p&&np(t,t[c.relationTableTsKey],p,c.selection,o):p.map(m=>np(t,t[c.relationTableTsKey],m,c.selection,o))}else{let l=o(r[a]),d=c.field,p;Y(d,kt)?p=d:Y(d,_e)?p=d.decoder:p=d.sql.decoder,i[c.tsKey]=l===null?null:p.mapFromDriverValue(l)}return i}s(np,"mapRelationalRow");function vP(t){return M`count(${t||M.raw("*")})`.mapWith(Number)}s(vP,"count");function sp(t){return M`sum(${t})`.mapWith(String)}s(sp,"sum");var J6=Object.create,Vs=Object.defineProperty,G6=Object.getOwnPropertyDescriptor,K6=Object.getOwnPropertyNames,W6=Object.getPrototypeOf,Q6=Object.prototype.hasOwnProperty,X6=s((t,e,r)=>e in t?Vs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"Io"),I=s((t,e)=>Vs(t,"name",{value:e,configurable:!0}),"a"),Qr=s((t,e)=>()=>(t&&(e=t(t=0)),e),"G"),Xe=s((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),"T"),$n=s((t,e)=>{for(var r in e)Vs(t,r,{get:e[r],enumerable:!0})},"ie"),EP=s((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of K6(e))!Q6.call(t,o)&&o!==r&&Vs(t,o,{get:s(()=>e[o],"get"),enumerable:!(n=G6(e,o))||n.enumerable});return t},"Dn"),ns=s((t,e,r)=>(r=t!=null?J6(W6(t)):{},EP(e||!t||!t.__esModule?Vs(r,"default",{value:t,enumerable:!0}):r,t)),"Se"),yr=s(t=>EP(Vs({},"__esModule",{value:!0}),t),"O"),Le=s((t,e,r)=>X6(t,typeof e!="symbol"?e+"":e,r),"E"),Y6=Xe(t=>{"use strict";Ie(),t.byteLength=l,t.toByteArray=p,t.fromByteArray=y;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,a=o.length;i<a;++i)e[i]=o[i],r[o.charCodeAt(i)]=i;var i,a;r[45]=62,r[95]=63;function c(g){var f=g.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=g.indexOf("=");_===-1&&(_=f);var w=_===f?0:4-_%4;return[_,w]}s(c,"qn"),I(c,"getLens");function l(g){var f=c(g),_=f[0],w=f[1];return(_+w)*3/4-w}s(l,"Po"),I(l,"byteLength");function d(g,f,_){return(f+_)*3/4-_}s(d,"Bo"),I(d,"_byteLength");function p(g){var f,_=c(g),w=_[0],b=_[1],S=new n(d(g,w,b)),k=0,R=b>0?w-4:w,O;for(O=0;O<R;O+=4)f=r[g.charCodeAt(O)]<<18|r[g.charCodeAt(O+1)]<<12|r[g.charCodeAt(O+2)]<<6|r[g.charCodeAt(O+3)],S[k++]=f>>16&255,S[k++]=f>>8&255,S[k++]=f&255;return b===2&&(f=r[g.charCodeAt(O)]<<2|r[g.charCodeAt(O+1)]>>4,S[k++]=f&255),b===1&&(f=r[g.charCodeAt(O)]<<10|r[g.charCodeAt(O+1)]<<4|r[g.charCodeAt(O+2)]>>2,S[k++]=f>>8&255,S[k++]=f&255),S}s(p,"Ro"),I(p,"toByteArray");function m(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}s(m,"Lo"),I(m,"tripletToBase64");function h(g,f,_){for(var w,b=[],S=f;S<_;S+=3)w=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(g[S+2]&255),b.push(m(w));return b.join("")}s(h,"Fo"),I(h,"encodeChunk");function y(g){for(var f,_=g.length,w=_%3,b=[],S=16383,k=0,R=_-w;k<R;k+=S)b.push(h(g,k,k+S>R?R:k+S));return w===1?(f=g[_-1],b.push(e[f>>2]+e[f<<4&63]+"==")):w===2&&(f=(g[_-2]<<8)+g[_-1],b.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),b.join("")}s(y,"ko"),I(y,"fromByteArray")}),eB=Xe(t=>{Ie(),t.read=function(e,r,n,o,i){var a,c,l=i*8-o-1,d=(1<<l)-1,p=d>>1,m=-7,h=n?i-1:0,y=n?-1:1,g=e[r+h];for(h+=y,a=g&(1<<-m)-1,g>>=-m,m+=l;m>0;a=a*256+e[r+h],h+=y,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=o;m>0;c=c*256+e[r+h],h+=y,m-=8);if(a===0)a=1-p;else{if(a===d)return c?NaN:(g?-1:1)*(1/0);c=c+Math.pow(2,o),a=a-p}return(g?-1:1)*c*Math.pow(2,a-o)},t.write=function(e,r,n,o,i,a){var c,l,d,p=a*8-i-1,m=(1<<p)-1,h=m>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:a-1,f=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,c=m):(c=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+h>=1?r+=y/d:r+=y*Math.pow(2,1-h),r*d>=2&&(c++,d/=2),c+h>=m?(l=0,c=m):c+h>=1?(l=(r*d-1)*Math.pow(2,i),c=c+h):(l=r*Math.pow(2,h-1)*Math.pow(2,i),c=0));i>=8;e[n+g]=l&255,g+=f,l/=256,i-=8);for(c=c<<i|l,p+=i;p>0;e[n+g]=c&255,g+=f,c/=256,p-=8);e[n+g-f]|=_*128}}),tB=Xe(t=>{"use strict";Ie();var e=Y6(),r=eB(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let v=new Uint8Array(1),x={foo:I(function(){return 42},"foo")};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(v,x),v.foo()===42}catch{return!1}}s(i,"Mo"),I(i,"typedArraySupport"),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:I(function(){if(c.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:I(function(){if(c.isBuffer(this))return this.byteOffset},"get")});function a(v){if(v>o)throw new RangeError('The value "'+v+'" is invalid for option "size"');let x=new Uint8Array(v);return Object.setPrototypeOf(x,c.prototype),x}s(a,"he"),I(a,"createBuffer");function c(v,x,E){if(typeof v=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return l(v,x,E)}s(c,"h"),I(c,"Buffer"),c.poolSize=8192;function l(v,x,E){if(typeof v=="string")return h(v,x);if(ArrayBuffer.isView(v))return g(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Vt(v,ArrayBuffer)||v&&Vt(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vt(v,SharedArrayBuffer)||v&&Vt(v.buffer,SharedArrayBuffer)))return f(v,x,E);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let z=v.valueOf&&v.valueOf();if(z!=null&&z!==v)return c.from(z,x,E);let V=_(v);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return c.from(v[Symbol.toPrimitive]("string"),x,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s(l,"Gn"),I(l,"from"),c.from=function(v,x,E){return l(v,x,E)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function d(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}s(d,"Vn"),I(d,"assertSize");function p(v,x,E){return d(v),v<=0?a(v):x!==void 0?typeof E=="string"?a(v).fill(x,E):a(v).fill(x):a(v)}s(p,"Uo"),I(p,"alloc"),c.alloc=function(v,x,E){return p(v,x,E)};function m(v){return d(v),a(v<0?0:w(v)|0)}s(m,"$t"),I(m,"allocUnsafe"),c.allocUnsafe=function(v){return m(v)},c.allocUnsafeSlow=function(v){return m(v)};function h(v,x){if((typeof x!="string"||x==="")&&(x="utf8"),!c.isEncoding(x))throw new TypeError("Unknown encoding: "+x);let E=S(v,x)|0,z=a(E),V=z.write(v,x);return V!==E&&(z=z.slice(0,V)),z}s(h,"Do"),I(h,"fromString");function y(v){let x=v.length<0?0:w(v.length)|0,E=a(x);for(let z=0;z<x;z+=1)E[z]=v[z]&255;return E}s(y,"Wt"),I(y,"fromArrayLike");function g(v){if(Vt(v,Uint8Array)){let x=new Uint8Array(v);return f(x.buffer,x.byteOffset,x.byteLength)}return y(v)}s(g,"Oo"),I(g,"fromArrayView");function f(v,x,E){if(x<0||v.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<x+(E||0))throw new RangeError('"length" is outside of buffer bounds');let z;return x===void 0&&E===void 0?z=new Uint8Array(v):E===void 0?z=new Uint8Array(v,x):z=new Uint8Array(v,x,E),Object.setPrototypeOf(z,c.prototype),z}s(f,"jt"),I(f,"fromArrayBuffer");function _(v){if(c.isBuffer(v)){let x=w(v.length)|0,E=a(x);return E.length===0||v.copy(E,0,0,x),E}if(v.length!==void 0)return typeof v.length!="number"||Cn(v.length)?a(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}s(_,"qo"),I(_,"fromObject");function w(v){if(v>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return v|0}s(w,"Gt"),I(w,"checked");function b(v){return+v!=v&&(v=0),c.alloc(+v)}s(b,"Qo"),I(b,"SlowBuffer"),c.isBuffer=I(function(v){return v!=null&&v._isBuffer===!0&&v!==c.prototype},"isBuffer"),c.compare=I(function(v,x){if(Vt(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),Vt(x,Uint8Array)&&(x=c.from(x,x.offset,x.byteLength)),!c.isBuffer(v)||!c.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===x)return 0;let E=v.length,z=x.length;for(let V=0,ee=Math.min(E,z);V<ee;++V)if(v[V]!==x[V]){E=v[V],z=x[V];break}return E<z?-1:z<E?1:0},"compare"),c.isEncoding=I(function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),c.concat=I(function(v,x){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return c.alloc(0);let E;if(x===void 0)for(x=0,E=0;E<v.length;++E)x+=v[E].length;let z=c.allocUnsafe(x),V=0;for(E=0;E<v.length;++E){let ee=v[E];if(Vt(ee,Uint8Array))V+ee.length>z.length?(c.isBuffer(ee)||(ee=c.from(ee)),ee.copy(z,V)):Uint8Array.prototype.set.call(z,ee,V);else if(c.isBuffer(ee))ee.copy(z,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=ee.length}return z},"concat");function S(v,x){if(c.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Vt(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let E=v.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&E===0)return 0;let V=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return oi(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Yn(v).length;default:if(V)return z?-1:oi(v).length;x=(""+x).toLowerCase(),V=!0}}s(S,"zn"),I(S,"byteLength"),c.byteLength=S;function k(v,x,E){let z=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,x>>>=0,E<=x))return"";for(v||(v="utf8");;)switch(v){case"hex":return Se(this,x,E);case"utf8":case"utf-8":return q(this,x,E);case"ascii":return oe(this,x,E);case"latin1":case"binary":return ye(this,x,E);case"base64":return H(this,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,x,E);default:if(z)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),z=!0}}s(k,"No"),I(k,"slowToString"),c.prototype._isBuffer=!0;function R(v,x,E){let z=v[x];v[x]=v[E],v[E]=z}s(R,"Ae"),I(R,"swap"),c.prototype.swap16=I(function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<v;x+=2)R(this,x,x+1);return this},"swap16"),c.prototype.swap32=I(function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<v;x+=4)R(this,x,x+3),R(this,x+1,x+2);return this},"swap32"),c.prototype.swap64=I(function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<v;x+=8)R(this,x,x+7),R(this,x+1,x+6),R(this,x+2,x+5),R(this,x+3,x+4);return this},"swap64"),c.prototype.toString=I(function(){let v=this.length;return v===0?"":arguments.length===0?q(this,0,v):k.apply(this,arguments)},"toString"),c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=I(function(v){if(!c.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:c.compare(this,v)===0},"equals"),c.prototype.inspect=I(function(){let v="",x=t.INSPECT_MAX_BYTES;return v=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(v+=" ... "),"<Buffer "+v+">"},"inspect"),n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=I(function(v,x,E,z,V){if(Vt(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),!c.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(x===void 0&&(x=0),E===void 0&&(E=v?v.length:0),z===void 0&&(z=0),V===void 0&&(V=this.length),x<0||E>v.length||z<0||V>this.length)throw new RangeError("out of range index");if(z>=V&&x>=E)return 0;if(z>=V)return-1;if(x>=E)return 1;if(x>>>=0,E>>>=0,z>>>=0,V>>>=0,this===v)return 0;let ee=V-z,le=E-x,Oe=Math.min(ee,le),mt=this.slice(z,V),gt=v.slice(x,E);for(let at=0;at<Oe;++at)if(mt[at]!==gt[at]){ee=mt[at],le=gt[at];break}return ee<le?-1:le<ee?1:0},"compare");function O(v,x,E,z,V){if(v.length===0)return-1;if(typeof E=="string"?(z=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,Cn(E)&&(E=V?0:v.length-1),E<0&&(E=v.length+E),E>=v.length){if(V)return-1;E=v.length-1}else if(E<0)if(V)E=0;else return-1;if(typeof x=="string"&&(x=c.from(x,z)),c.isBuffer(x))return x.length===0?-1:C(v,x,E,z,V);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(v,x,E):Uint8Array.prototype.lastIndexOf.call(v,x,E):C(v,[x],E,z,V);throw new TypeError("val must be string, number or Buffer")}s(O,"Kn"),I(O,"bidirectionalIndexOf");function C(v,x,E,z,V){let ee=1,le=v.length,Oe=x.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(v.length<2||x.length<2)return-1;ee=2,le/=2,Oe/=2,E/=2}function mt(at,Rt){return ee===1?at[Rt]:at.readUInt16BE(Rt*ee)}s(mt,"c"),I(mt,"read");let gt;if(V){let at=-1;for(gt=E;gt<le;gt++)if(mt(v,gt)===mt(x,at===-1?0:gt-at)){if(at===-1&&(at=gt),gt-at+1===Oe)return at*ee}else at!==-1&&(gt-=gt-at),at=-1}else for(E+Oe>le&&(E=le-Oe),gt=E;gt>=0;gt--){let at=!0;for(let Rt=0;Rt<Oe;Rt++)if(mt(v,gt+Rt)!==mt(x,Rt)){at=!1;break}if(at)return gt}return-1}s(C,"jn"),I(C,"arrayIndexOf"),c.prototype.includes=I(function(v,x,E){return this.indexOf(v,x,E)!==-1},"includes"),c.prototype.indexOf=I(function(v,x,E){return O(this,v,x,E,!0)},"indexOf"),c.prototype.lastIndexOf=I(function(v,x,E){return O(this,v,x,E,!1)},"lastIndexOf");function $(v,x,E,z){E=Number(E)||0;let V=v.length-E;z?(z=Number(z),z>V&&(z=V)):z=V;let ee=x.length;z>ee/2&&(z=ee/2);let le;for(le=0;le<z;++le){let Oe=parseInt(x.substr(le*2,2),16);if(Cn(Oe))return le;v[E+le]=Oe}return le}s($,"Wo"),I($,"hexWrite");function P(v,x,E,z){return mr(oi(x,v.length-E),v,E,z)}s(P,"jo"),I(P,"utf8Write");function N(v,x,E,z){return mr(Od(x),v,E,z)}s(N,"Ho"),I(N,"asciiWrite");function D(v,x,E,z){return mr(Yn(x),v,E,z)}s(D,"$o"),I(D,"base64Write");function W(v,x,E,z){return mr(sn(x,v.length-E),v,E,z)}s(W,"Go"),I(W,"ucs2Write"),c.prototype.write=I(function(v,x,E,z){if(x===void 0)z="utf8",E=this.length,x=0;else if(E===void 0&&typeof x=="string")z=x,E=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(E)?(E=E>>>0,z===void 0&&(z="utf8")):(z=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let V=this.length-x;if((E===void 0||E>V)&&(E=V),v.length>0&&(E<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let ee=!1;for(;;)switch(z){case"hex":return $(this,v,x,E);case"utf8":case"utf-8":return P(this,v,x,E);case"ascii":case"latin1":case"binary":return N(this,v,x,E);case"base64":return D(this,v,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,v,x,E);default:if(ee)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),ee=!0}},"write"),c.prototype.toJSON=I(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function H(v,x,E){return x===0&&E===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(x,E))}s(H,"Vo"),I(H,"base64Slice");function q(v,x,E){E=Math.min(v.length,E);let z=[],V=x;for(;V<E;){let ee=v[V],le=null,Oe=ee>239?4:ee>223?3:ee>191?2:1;if(V+Oe<=E){let mt,gt,at,Rt;switch(Oe){case 1:ee<128&&(le=ee);break;case 2:mt=v[V+1],(mt&192)===128&&(Rt=(ee&31)<<6|mt&63,Rt>127&&(le=Rt));break;case 3:mt=v[V+1],gt=v[V+2],(mt&192)===128&&(gt&192)===128&&(Rt=(ee&15)<<12|(mt&63)<<6|gt&63,Rt>2047&&(Rt<55296||Rt>57343)&&(le=Rt));break;case 4:mt=v[V+1],gt=v[V+2],at=v[V+3],(mt&192)===128&&(gt&192)===128&&(at&192)===128&&(Rt=(ee&15)<<18|(mt&63)<<12|(gt&63)<<6|at&63,Rt>65535&&Rt<1114112&&(le=Rt))}}le===null?(le=65533,Oe=1):le>65535&&(le-=65536,z.push(le>>>10&1023|55296),le=56320|le&1023),z.push(le),V+=Oe}return te(z)}s(q,"Yn"),I(q,"utf8Slice");var X=4096;function te(v){let x=v.length;if(x<=X)return String.fromCharCode.apply(String,v);let E="",z=0;for(;z<x;)E+=String.fromCharCode.apply(String,v.slice(z,z+=X));return E}s(te,"zo"),I(te,"decodeCodePointsArray");function oe(v,x,E){let z="";E=Math.min(v.length,E);for(let V=x;V<E;++V)z+=String.fromCharCode(v[V]&127);return z}s(oe,"Ko"),I(oe,"asciiSlice");function ye(v,x,E){let z="";E=Math.min(v.length,E);for(let V=x;V<E;++V)z+=String.fromCharCode(v[V]);return z}s(ye,"Yo"),I(ye,"latin1Slice");function Se(v,x,E){let z=v.length;(!x||x<0)&&(x=0),(!E||E<0||E>z)&&(E=z);let V="";for(let ee=x;ee<E;++ee)V+=$d[v[ee]];return V}s(Se,"Zo"),I(Se,"hexSlice");function We(v,x,E){let z=v.slice(x,E),V="";for(let ee=0;ee<z.length-1;ee+=2)V+=String.fromCharCode(z[ee]+z[ee+1]*256);return V}s(We,"Jo"),I(We,"utf16leSlice"),c.prototype.slice=I(function(v,x){let E=this.length;v=~~v,x=x===void 0?E:~~x,v<0?(v+=E,v<0&&(v=0)):v>E&&(v=E),x<0?(x+=E,x<0&&(x=0)):x>E&&(x=E),x<v&&(x=v);let z=this.subarray(v,x);return Object.setPrototypeOf(z,c.prototype),z},"slice");function Ve(v,x,E){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+x>E)throw new RangeError("Trying to access beyond buffer length")}s(Ve,"q"),I(Ve,"checkOffset"),c.prototype.readUintLE=c.prototype.readUIntLE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ve(v,x,this.length);let z=this[v],V=1,ee=0;for(;++ee<x&&(V*=256);)z+=this[v+ee]*V;return z},"readUIntLE"),c.prototype.readUintBE=c.prototype.readUIntBE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ve(v,x,this.length);let z=this[v+--x],V=1;for(;x>0&&(V*=256);)z+=this[v+--x]*V;return z},"readUIntBE"),c.prototype.readUint8=c.prototype.readUInt8=I(function(v,x){return v=v>>>0,x||Ve(v,1,this.length),this[v]},"readUInt8"),c.prototype.readUint16LE=c.prototype.readUInt16LE=I(function(v,x){return v=v>>>0,x||Ve(v,2,this.length),this[v]|this[v+1]<<8},"readUInt16LE"),c.prototype.readUint16BE=c.prototype.readUInt16BE=I(function(v,x){return v=v>>>0,x||Ve(v,2,this.length),this[v]<<8|this[v+1]},"readUInt16BE"),c.prototype.readUint32LE=c.prototype.readUInt32LE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},"readUInt32LE"),c.prototype.readUint32BE=c.prototype.readUInt32BE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},"readUInt32BE"),c.prototype.readBigUInt64LE=Sr(I(function(v){v=v>>>0,gr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&Xn(v,this.length-8);let z=x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,V=this[++v]+this[++v]*2**8+this[++v]*2**16+E*2**24;return BigInt(z)+(BigInt(V)<<BigInt(32))},"readBigUInt64LE")),c.prototype.readBigUInt64BE=Sr(I(function(v){v=v>>>0,gr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&Xn(v,this.length-8);let z=x*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],V=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E;return(BigInt(z)<<BigInt(32))+BigInt(V)},"readBigUInt64BE")),c.prototype.readIntLE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ve(v,x,this.length);let z=this[v],V=1,ee=0;for(;++ee<x&&(V*=256);)z+=this[v+ee]*V;return V*=128,z>=V&&(z-=Math.pow(2,8*x)),z},"readIntLE"),c.prototype.readIntBE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ve(v,x,this.length);let z=x,V=1,ee=this[v+--z];for(;z>0&&(V*=256);)ee+=this[v+--z]*V;return V*=128,ee>=V&&(ee-=Math.pow(2,8*x)),ee},"readIntBE"),c.prototype.readInt8=I(function(v,x){return v=v>>>0,x||Ve(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},"readInt8"),c.prototype.readInt16LE=I(function(v,x){v=v>>>0,x||Ve(v,2,this.length);let E=this[v]|this[v+1]<<8;return E&32768?E|4294901760:E},"readInt16LE"),c.prototype.readInt16BE=I(function(v,x){v=v>>>0,x||Ve(v,2,this.length);let E=this[v+1]|this[v]<<8;return E&32768?E|4294901760:E},"readInt16BE"),c.prototype.readInt32LE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},"readInt32LE"),c.prototype.readInt32BE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},"readInt32BE"),c.prototype.readBigInt64LE=Sr(I(function(v){v=v>>>0,gr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&Xn(v,this.length-8);let z=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(E<<24);return(BigInt(z)<<BigInt(32))+BigInt(x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)},"readBigInt64LE")),c.prototype.readBigInt64BE=Sr(I(function(v){v=v>>>0,gr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&Xn(v,this.length-8);let z=(x<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(z)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E)},"readBigInt64BE")),c.prototype.readFloatLE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),r.read(this,v,!0,23,4)},"readFloatLE"),c.prototype.readFloatBE=I(function(v,x){return v=v>>>0,x||Ve(v,4,this.length),r.read(this,v,!1,23,4)},"readFloatBE"),c.prototype.readDoubleLE=I(function(v,x){return v=v>>>0,x||Ve(v,8,this.length),r.read(this,v,!0,52,8)},"readDoubleLE"),c.prototype.readDoubleBE=I(function(v,x){return v=v>>>0,x||Ve(v,8,this.length),r.read(this,v,!1,52,8)},"readDoubleBE");function J(v,x,E,z,V,ee){if(!c.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>V||x<ee)throw new RangeError('"value" argument is out of bounds');if(E+z>v.length)throw new RangeError("Index out of range")}s(J,"V"),I(J,"checkInt"),c.prototype.writeUintLE=c.prototype.writeUIntLE=I(function(v,x,E,z){if(v=+v,x=x>>>0,E=E>>>0,!z){let le=Math.pow(2,8*E)-1;J(this,v,x,E,le,0)}let V=1,ee=0;for(this[x]=v&255;++ee<E&&(V*=256);)this[x+ee]=v/V&255;return x+E},"writeUIntLE"),c.prototype.writeUintBE=c.prototype.writeUIntBE=I(function(v,x,E,z){if(v=+v,x=x>>>0,E=E>>>0,!z){let le=Math.pow(2,8*E)-1;J(this,v,x,E,le,0)}let V=E-1,ee=1;for(this[x+V]=v&255;--V>=0&&(ee*=256);)this[x+V]=v/ee&255;return x+E},"writeUIntBE"),c.prototype.writeUint8=c.prototype.writeUInt8=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,1,255,0),this[x]=v&255,x+1},"writeUInt8"),c.prototype.writeUint16LE=c.prototype.writeUInt16LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,65535,0),this[x]=v&255,this[x+1]=v>>>8,x+2},"writeUInt16LE"),c.prototype.writeUint16BE=c.prototype.writeUInt16BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,65535,0),this[x]=v>>>8,this[x+1]=v&255,x+2},"writeUInt16BE"),c.prototype.writeUint32LE=c.prototype.writeUInt32LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,4294967295,0),this[x+3]=v>>>24,this[x+2]=v>>>16,this[x+1]=v>>>8,this[x]=v&255,x+4},"writeUInt32LE"),c.prototype.writeUint32BE=c.prototype.writeUInt32BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,4294967295,0),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},"writeUInt32BE");function Ae(v,x,E,z,V){Os(x,z,V,v,E,7);let ee=Number(x&BigInt(4294967295));v[E++]=ee,ee=ee>>8,v[E++]=ee,ee=ee>>8,v[E++]=ee,ee=ee>>8,v[E++]=ee;let le=Number(x>>BigInt(32)&BigInt(4294967295));return v[E++]=le,le=le>>8,v[E++]=le,le=le>>8,v[E++]=le,le=le>>8,v[E++]=le,E}s(Ae,"Zn"),I(Ae,"wrtBigUInt64LE");function fe(v,x,E,z,V){Os(x,z,V,v,E,7);let ee=Number(x&BigInt(4294967295));v[E+7]=ee,ee=ee>>8,v[E+6]=ee,ee=ee>>8,v[E+5]=ee,ee=ee>>8,v[E+4]=ee;let le=Number(x>>BigInt(32)&BigInt(4294967295));return v[E+3]=le,le=le>>8,v[E+2]=le,le=le>>8,v[E+1]=le,le=le>>8,v[E]=le,E+8}s(fe,"Jn"),I(fe,"wrtBigUInt64BE"),c.prototype.writeBigUInt64LE=Sr(I(function(v,x=0){return Ae(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),c.prototype.writeBigUInt64BE=Sr(I(function(v,x=0){return fe(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),c.prototype.writeIntLE=I(function(v,x,E,z){if(v=+v,x=x>>>0,!z){let Oe=Math.pow(2,8*E-1);J(this,v,x,E,Oe-1,-Oe)}let V=0,ee=1,le=0;for(this[x]=v&255;++V<E&&(ee*=256);)v<0&&le===0&&this[x+V-1]!==0&&(le=1),this[x+V]=(v/ee>>0)-le&255;return x+E},"writeIntLE"),c.prototype.writeIntBE=I(function(v,x,E,z){if(v=+v,x=x>>>0,!z){let Oe=Math.pow(2,8*E-1);J(this,v,x,E,Oe-1,-Oe)}let V=E-1,ee=1,le=0;for(this[x+V]=v&255;--V>=0&&(ee*=256);)v<0&&le===0&&this[x+V+1]!==0&&(le=1),this[x+V]=(v/ee>>0)-le&255;return x+E},"writeIntBE"),c.prototype.writeInt8=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,1,127,-128),v<0&&(v=255+v+1),this[x]=v&255,x+1},"writeInt8"),c.prototype.writeInt16LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,32767,-32768),this[x]=v&255,this[x+1]=v>>>8,x+2},"writeInt16LE"),c.prototype.writeInt16BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,32767,-32768),this[x]=v>>>8,this[x+1]=v&255,x+2},"writeInt16BE"),c.prototype.writeInt32LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,2147483647,-2147483648),this[x]=v&255,this[x+1]=v>>>8,this[x+2]=v>>>16,this[x+3]=v>>>24,x+4},"writeInt32LE"),c.prototype.writeInt32BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},"writeInt32BE"),c.prototype.writeBigInt64LE=Sr(I(function(v,x=0){return Ae(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),c.prototype.writeBigInt64BE=Sr(I(function(v,x=0){return fe(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function U(v,x,E,z,V,ee){if(E+z>v.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}s(U,"Xn"),I(U,"checkIEEE754");function Ze(v,x,E,z,V){return x=+x,E=E>>>0,V||U(v,x,E,4,34028234663852886e22,-34028234663852886e22),r.write(v,x,E,z,23,4),E+4}s(Ze,"ei"),I(Ze,"writeFloat"),c.prototype.writeFloatLE=I(function(v,x,E){return Ze(this,v,x,!0,E)},"writeFloatLE"),c.prototype.writeFloatBE=I(function(v,x,E){return Ze(this,v,x,!1,E)},"writeFloatBE");function bt(v,x,E,z,V){return x=+x,E=E>>>0,V||U(v,x,E,8,17976931348623157e292,-17976931348623157e292),r.write(v,x,E,z,52,8),E+8}s(bt,"ti"),I(bt,"writeDouble"),c.prototype.writeDoubleLE=I(function(v,x,E){return bt(this,v,x,!0,E)},"writeDoubleLE"),c.prototype.writeDoubleBE=I(function(v,x,E){return bt(this,v,x,!1,E)},"writeDoubleBE"),c.prototype.copy=I(function(v,x,E,z){if(!c.isBuffer(v))throw new TypeError("argument should be a Buffer");if(E||(E=0),!z&&z!==0&&(z=this.length),x>=v.length&&(x=v.length),x||(x=0),z>0&&z<E&&(z=E),z===E||v.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),v.length-x<z-E&&(z=v.length-x+E);let V=z-E;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,E,z):Uint8Array.prototype.set.call(v,this.subarray(E,z),x),V},"copy"),c.prototype.fill=I(function(v,x,E,z){if(typeof v=="string"){if(typeof x=="string"?(z=x,x=0,E=this.length):typeof E=="string"&&(z=E,E=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!c.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(v.length===1){let ee=v.charCodeAt(0);(z==="utf8"&&ee<128||z==="latin1")&&(v=ee)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(x<0||this.length<x||this.length<E)throw new RangeError("Out of range index");if(E<=x)return this;x=x>>>0,E=E===void 0?this.length:E>>>0,v||(v=0);let V;if(typeof v=="number")for(V=x;V<E;++V)this[V]=v;else{let ee=c.isBuffer(v)?v:c.from(v,z),le=ee.length;if(le===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(V=0;V<E-x;++V)this[V+x]=ee[V%le]}return this},"fill");var Et={};function Jr(v,x,E){var z;Et[v]=(z=class extends E{static{s(this,"n")}constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}},I(z,"NodeError"),z)}s(Jr,"Vt"),I(Jr,"E"),Jr("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Jr("ERR_INVALID_ARG_TYPE",function(v,x){return`The "${v}" argument must be of type number. Received type ${typeof x}`},TypeError),Jr("ERR_OUT_OF_RANGE",function(v,x,E){let z=`The value of "${v}" is out of range.`,V=E;return Number.isInteger(E)&&Math.abs(E)>2**32?V=ni(String(E)):typeof E=="bigint"&&(V=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(V=ni(V)),V+="n"),z+=` It must be ${x}. Received ${V}`,z},RangeError);function ni(v){let x="",E=v.length,z=v[0]==="-"?1:0;for(;E>=z+4;E-=3)x=`_${v.slice(E-3,E)}${x}`;return`${v.slice(0,E)}${x}`}s(ni,"$n"),I(ni,"addNumericalSeparator");function ko(v,x,E){gr(x,"offset"),(v[x]===void 0||v[x+E]===void 0)&&Xn(x,v.length-(E+1))}s(ko,"Xo"),I(ko,"checkBounds");function Os(v,x,E,z,V,ee){if(v>E||v<x){let le=typeof x=="bigint"?"n":"",Oe;throw ee>3?x===0||x===BigInt(0)?Oe=`>= 0${le} and < 2${le} ** ${(ee+1)*8}${le}`:Oe=`>= -(2${le} ** ${(ee+1)*8-1}${le}) and < 2 ** ${(ee+1)*8-1}${le}`:Oe=`>= ${x}${le} and <= ${E}${le}`,new Et.ERR_OUT_OF_RANGE("value",Oe,v)}ko(z,V,ee)}s(Os,"ri"),I(Os,"checkIntBI");function gr(v,x){if(typeof v!="number")throw new Et.ERR_INVALID_ARG_TYPE(x,"number",v)}s(gr,"Be"),I(gr,"validateNumber");function Xn(v,x,E){throw Math.floor(v)!==v?(gr(v,E),new Et.ERR_OUT_OF_RANGE(E||"offset","an integer",v)):x<0?new Et.ERR_BUFFER_OUT_OF_BOUNDS:new Et.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${x}`,v)}s(Xn,"je"),I(Xn,"boundsError");var $s=/[^+/0-9A-Za-z-_]/g;function Cd(v){if(v=v.split("=")[0],v=v.trim().replace($s,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}s(Cd,"ta"),I(Cd,"base64clean");function oi(v,x){x=x||1/0;let E,z=v.length,V=null,ee=[];for(let le=0;le<z;++le){if(E=v.charCodeAt(le),E>55295&&E<57344){if(!V){if(E>56319){(x-=3)>-1&&ee.push(239,191,189);continue}else if(le+1===z){(x-=3)>-1&&ee.push(239,191,189);continue}V=E;continue}if(E<56320){(x-=3)>-1&&ee.push(239,191,189),V=E;continue}E=(V-55296<<10|E-56320)+65536}else V&&(x-=3)>-1&&ee.push(239,191,189);if(V=null,E<128){if((x-=1)<0)break;ee.push(E)}else if(E<2048){if((x-=2)<0)break;ee.push(E>>6|192,E&63|128)}else if(E<65536){if((x-=3)<0)break;ee.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((x-=4)<0)break;ee.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return ee}s(oi,"Ht"),I(oi,"utf8ToBytes");function Od(v){let x=[];for(let E=0;E<v.length;++E)x.push(v.charCodeAt(E)&255);return x}s(Od,"ra"),I(Od,"asciiToBytes");function sn(v,x){let E,z,V,ee=[];for(let le=0;le<v.length&&!((x-=2)<0);++le)E=v.charCodeAt(le),z=E>>8,V=E%256,ee.push(V),ee.push(z);return ee}s(sn,"na"),I(sn,"utf16leToBytes");function Yn(v){return e.toByteArray(Cd(v))}s(Yn,"ni"),I(Yn,"base64ToBytes");function mr(v,x,E,z){let V;for(V=0;V<z&&!(V+E>=x.length||V>=v.length);++V)x[V+E]=v[V];return V}s(mr,"ht"),I(mr,"blitBuffer");function Vt(v,x){return v instanceof x||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===x.name}s(Vt,"ue"),I(Vt,"isInstance");function Cn(v){return v!==v}s(Cn,"zt"),I(Cn,"numberIsNaN");var $d=(function(){let v="0123456789abcdef",x=new Array(256);for(let E=0;E<16;++E){let z=E*16;for(let V=0;V<16;++V)x[z+V]=v[E]+v[V]}return x})();function Sr(v){return typeof BigInt>"u"?Io:v}s(Sr,"we"),I(Sr,"defineBigIntMethod");function Io(){throw new Error("BigInt not supported")}s(Io,"sa"),I(Io,"BufferBigIntNotDefined")}),dp,sv,rB,ze,Qe,Ie=Qr(()=>{"use strict";dp=globalThis,sv=globalThis.setImmediate??(t=>setTimeout(t,0)),rB=globalThis.clearImmediate??(t=>clearTimeout(t)),ze=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:tB().Buffer,Qe=globalThis.process??{},Qe.env??(Qe.env={});try{Qe.nextTick(()=>{})}catch{let t=Promise.resolve();Qe.nextTick=t.then.bind(t)}}),os=Xe((t,e)=>{"use strict";Ie();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:I(function(O,C,$){return Function.prototype.apply.call(O,C,$)},"ReflectApply"),o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=I(function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))},"ReflectOwnKeys"):o=I(function(O){return Object.getOwnPropertyNames(O)},"ReflectOwnKeys");function i(O){console&&console.warn&&console.warn(O)}s(i,"oa"),I(i,"ProcessEmitWarning");var a=Number.isNaN||I(function(O){return O!==O},"NumberIsNaN");function c(){c.init.call(this)}s(c,"B"),I(c,"EventEmitter"),e.exports=c,e.exports.once=S,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}s(d,"dt"),I(d,"checkListener"),Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:I(function(){return l},"get"),set:I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");l=O},"set")}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},"setMaxListeners");function p(O){return O._maxListeners===void 0?c.defaultMaxListeners:O._maxListeners}s(p,"ui"),I(p,"_getMaxListeners"),c.prototype.getMaxListeners=I(function(){return p(this)},"getMaxListeners"),c.prototype.emit=I(function(O){for(var C=[],$=1;$<arguments.length;$++)C.push(arguments[$]);var P=O==="error",N=this._events;if(N!==void 0)P=P&&N.error===void 0;else if(!P)return!1;if(P){var D;if(C.length>0&&(D=C[0]),D instanceof Error)throw D;var W=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw W.context=D,W}var H=N[O];if(H===void 0)return!1;if(typeof H=="function")n(H,this,C);else for(var q=H.length,X=_(H,q),$=0;$<q;++$)n(X[$],this,C);return!0},"emit");function m(O,C,$,P){var N,D,W;if(d($),D=O._events,D===void 0?(D=O._events=Object.create(null),O._eventsCount=0):(D.newListener!==void 0&&(O.emit("newListener",C,$.listener?$.listener:$),D=O._events),W=D[C]),W===void 0)W=D[C]=$,++O._eventsCount;else if(typeof W=="function"?W=D[C]=P?[$,W]:[W,$]:P?W.unshift($):W.push($),N=p(O),N>0&&W.length>N&&!W.warned){W.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=O,H.type=C,H.count=W.length,i(H)}return O}s(m,"ci"),I(m,"_addListener"),c.prototype.addListener=I(function(O,C){return m(this,O,C,!1)},"addListener"),c.prototype.on=c.prototype.addListener,c.prototype.prependListener=I(function(O,C){return m(this,O,C,!0)},"prependListener");function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}s(h,"aa"),I(h,"onceWrapper");function y(O,C,$){var P={fired:!1,wrapFn:void 0,target:O,type:C,listener:$},N=h.bind(P);return N.listener=$,P.wrapFn=N,N}s(y,"li"),I(y,"_onceWrap"),c.prototype.once=I(function(O,C){return d(C),this.on(O,y(this,O,C)),this},"once"),c.prototype.prependOnceListener=I(function(O,C){return d(C),this.prependListener(O,y(this,O,C)),this},"prependOnceListener"),c.prototype.removeListener=I(function(O,C){var $,P,N,D,W;if(d(C),P=this._events,P===void 0)return this;if($=P[O],$===void 0)return this;if($===C||$.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete P[O],P.removeListener&&this.emit("removeListener",O,$.listener||C));else if(typeof $!="function"){for(N=-1,D=$.length-1;D>=0;D--)if($[D]===C||$[D].listener===C){W=$[D].listener,N=D;break}if(N<0)return this;N===0?$.shift():w($,N),$.length===1&&(P[O]=$[0]),P.removeListener!==void 0&&this.emit("removeListener",O,W||C)}return this},"removeListener"),c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=I(function(O){var C,$,P;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[O]),this;if(arguments.length===0){var N=Object.keys($),D;for(P=0;P<N.length;++P)D=N[P],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=$[O],typeof C=="function")this.removeListener(O,C);else if(C!==void 0)for(P=C.length-1;P>=0;P--)this.removeListener(O,C[P]);return this},"removeAllListeners");function g(O,C,$){var P=O._events;if(P===void 0)return[];var N=P[C];return N===void 0?[]:typeof N=="function"?$?[N.listener||N]:[N]:$?b(N):_(N,N.length)}s(g,"fi"),I(g,"_listeners"),c.prototype.listeners=I(function(O){return g(this,O,!0)},"listeners"),c.prototype.rawListeners=I(function(O){return g(this,O,!1)},"rawListeners"),c.listenerCount=function(O,C){return typeof O.listenerCount=="function"?O.listenerCount(C):f.call(O,C)},c.prototype.listenerCount=f;function f(O){var C=this._events;if(C!==void 0){var $=C[O];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}s(f,"hi"),I(f,"listenerCount"),c.prototype.eventNames=I(function(){return this._eventsCount>0?o(this._events):[]},"eventNames");function _(O,C){for(var $=new Array(C),P=0;P<C;++P)$[P]=O[P];return $}s(_,"pi"),I(_,"arrayClone");function w(O,C){for(;C+1<O.length;C++)O[C]=O[C+1];O.pop()}s(w,"ua"),I(w,"spliceOne");function b(O){for(var C=new Array(O.length),$=0;$<C.length;++$)C[$]=O[$].listener||O[$];return C}s(b,"ca"),I(b,"unwrapListeners");function S(O,C){return new Promise(function($,P){function N(W){O.removeListener(C,D),P(W)}s(N,"i"),I(N,"errorListener");function D(){typeof O.removeListener=="function"&&O.removeListener("error",N),$([].slice.call(arguments))}s(D,"s"),I(D,"resolver"),R(O,C,D,{once:!0}),C!=="error"&&k(O,N,{once:!0})})}s(S,"la"),I(S,"once");function k(O,C,$){typeof O.on=="function"&&R(O,"error",C,$)}s(k,"fa"),I(k,"addErrorHandlerIfEventEmitter");function R(O,C,$,P){if(typeof O.on=="function")P.once?O.once(C,$):O.on(C,$);else if(typeof O.addEventListener=="function")O.addEventListener(C,I(s(function N(D){P.once&&O.removeEventListener(C,N),$(D)},"i"),"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}s(R,"di"),I(R,"eventTargetAgnosticAddListener")}),kP={};$n(kP,{Socket:s(()=>rs,"Socket"),isIP:s(()=>IP,"isIP")});function IP(t){return 0}s(IP,"ha");var _P,tv,Jc,rs,Wc=Qr(()=>{"use strict";Ie(),_P=ns(os(),1),I(IP,"isIP"),tv=/^[^.]+\./,Jc=class $e extends _P.EventEmitter{static{s(this,"S")}constructor(){super(...arguments),Le(this,"opts",{}),Le(this,"connecting",!1),Le(this,"pending",!0),Le(this,"writable",!0),Le(this,"encrypted",!1),Le(this,"authorized",!1),Le(this,"destroyed",!1),Le(this,"ws",null),Le(this,"writeBuffer"),Le(this,"tlsState",0),Le(this,"tlsRead"),Le(this,"tlsWrite")}static get poolQueryViaFetch(){return $e.opts.poolQueryViaFetch??$e.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){$e.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return $e.opts.fetchEndpoint??$e.defaults.fetchEndpoint}static set fetchEndpoint(e){$e.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return $e.opts.fetchFunction??$e.defaults.fetchFunction}static set fetchFunction(e){$e.opts.fetchFunction=e}static get webSocketConstructor(){return $e.opts.webSocketConstructor??$e.defaults.webSocketConstructor}static set webSocketConstructor(e){$e.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??$e.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return $e.opts.wsProxy??$e.defaults.wsProxy}static set wsProxy(e){$e.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??$e.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return $e.opts.coalesceWrites??$e.defaults.coalesceWrites}static set coalesceWrites(e){$e.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??$e.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return $e.opts.useSecureWebSocket??$e.defaults.useSecureWebSocket}static set useSecureWebSocket(e){$e.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??$e.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return $e.opts.forceDisablePgSSL??$e.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){$e.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??$e.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return $e.opts.disableSNI??$e.defaults.disableSNI}static set disableSNI(e){$e.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??$e.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return $e.opts.disableWarningInBrowsers??$e.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){$e.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??$e.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return $e.opts.pipelineConnect??$e.defaults.pipelineConnect}static set pipelineConnect(e){$e.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??$e.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return $e.opts.subtls??$e.defaults.subtls}static set subtls(e){$e.opts.subtls=e}get subtls(){return this.opts.subtls??$e.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return $e.opts.pipelineTLS??$e.defaults.pipelineTLS}static set pipelineTLS(e){$e.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??$e.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return $e.opts.rootCerts??$e.defaults.rootCerts}static set rootCerts(e){$e.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??$e.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,n){this.connecting=!0,n&&this.once("connect",n);let o=I(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=I((c,l=!1)=>{c.binaryType="arraybuffer",c.addEventListener("error",d=>{this.emit("error",d),this.emit("close")}),c.addEventListener("message",d=>{if(this.tlsState===0){let p=ze.from(d.data);this.emit("data",p)}}),c.addEventListener("close",()=>{this.emit("close")}),l?o():c.addEventListener("open",o)},"configureWebSocket"),a;try{a=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(c){this.emit("error",c),this.emit("close");return}try{let c=(this.useSecureWebSocket?"wss:":"ws:")+"//"+a;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(c),i(this.ws);else try{this.ws=new WebSocket(c),i(this.ws)}catch{this.ws=new __unstable_WebSocket(c),i(this.ws)}}catch(c){let l=(this.useSecureWebSocket?"https:":"http:")+"//"+a;fetch(l,{headers:{Upgrade:"websocket"}}).then(d=>{if(this.ws=d.webSocket,this.ws==null)throw c;this.ws.accept(),i(this.ws,!0)}).catch(d=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${d}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),i=this.rawWrite.bind(this),{read:a,write:c}=await this.subtls.startTls(e,r,o,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=a,this.tlsWrite=c,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=ze.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=o=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=ze.from(e,r)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,n)}):(this.tlsWrite(e),n()),!0)}end(e=ze.alloc(0),r="utf8",n=()=>{}){return this.write(e,r,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},I(Jc,"Socket"),Le(Jc,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:I((t,e,r)=>{let n;return r?.jwtAuth?n=t.replace(tv,"apiauth."):n=t.replace(tv,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:I(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),Le(Jc,"opts",{}),rs=Jc}),PP={};$n(PP,{parse:s(()=>av,"parse")});function av(t,e=!1){let{protocol:r}=new URL(t),n="http:"+t.substring(r.length),{username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,searchParams:m,hash:h}=new URL(n);i=decodeURIComponent(i),o=decodeURIComponent(o),d=decodeURIComponent(d);let y=o+":"+i,g=e?Object.fromEntries(m.entries()):p;return{href:t,protocol:r,auth:y,username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,query:g,hash:h}}s(av,"Yt");var AP=Qr(()=>{"use strict";Ie(),I(av,"parse")}),CP=Xe(t=>{"use strict";Ie(),t.parse=function(o,i){return new r(o,i).parse()};var e=class OP{static{s(this,"vt")}constructor(i,a){this.source=i,this.transform=a||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var a;(this.recorded.length>0||i)&&(a=this.recorded.join(""),a==="NULL"&&!i&&(a=null),a!==null&&(a=this.transform(a)),this.entries.push(a),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var a,c,l;for(this.consumeDimensions();!this.isEof();)if(a=this.nextCharacter(),a.value==="{"&&!l)this.dimension++,this.dimension>1&&(c=new OP(this.source.substr(this.position-1),this.transform),this.entries.push(c.parse(!0)),this.position+=c.position-2);else if(a.value==="}"&&!l){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else a.value==='"'&&!a.escaped?(l&&this.newEntry(!0),l=!l):a.value===","&&!l?this.newEntry():this.record(a.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};I(e,"ArrayParser");var r=e;function n(o){return o}s(n,"Ca"),I(n,"identity")}),$P=Xe((t,e)=>{Ie();var r=CP();e.exports={create:I(function(n,o){return{parse:I(function(){return r.parse(n,o)},"parse")}},"create")}}),nB=Xe((t,e)=>{"use strict";Ie();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,o=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=I(function(p){if(i.test(p))return Number(p.replace("i","I"));var m=r.exec(p);if(!m)return a(p)||null;var h=!!m[8],y=parseInt(m[1],10);h&&(y=l(y));var g=parseInt(m[2],10)-1,f=m[3],_=parseInt(m[4],10),w=parseInt(m[5],10),b=parseInt(m[6],10),S=m[7];S=S?1e3*parseFloat(S):0;var k,R=c(p);return R!=null?(k=new Date(Date.UTC(y,g,f,_,w,b,S)),d(y)&&k.setUTCFullYear(y),R!==0&&k.setTime(k.getTime()-R)):(k=new Date(y,g,f,_,w,b,S),d(y)&&k.setFullYear(y)),k},"parseDate");function a(p){var m=n.exec(p);if(m){var h=parseInt(m[1],10),y=!!m[4];y&&(h=l(h));var g=parseInt(m[2],10)-1,f=m[3],_=new Date(h,g,f);return d(h)&&_.setFullYear(h),_}}s(a,"Ra"),I(a,"getDate");function c(p){if(p.endsWith("+00"))return 0;var m=o.exec(p.split(" ")[1]);if(m){var h=m[1];if(h==="Z")return 0;var y=h==="-"?-1:1,g=parseInt(m[2],10)*3600+parseInt(m[3]||0,10)*60+parseInt(m[4]||0,10);return g*y*1e3}}s(c,"La"),I(c,"timeZoneOffset");function l(p){return-(p-1)}s(l,"_i"),I(l,"bcYearToNegativeYear");function d(p){return p>=0&&p<100}s(d,"nr"),I(d,"is0To99")}),oB=Xe((t,e)=>{Ie(),e.exports=n;var r=Object.prototype.hasOwnProperty;function n(o){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var c in a)r.call(a,c)&&(o[c]=a[c])}return o}s(n,"ka"),I(n,"extend")}),iB=Xe((t,e)=>{"use strict";Ie();var r=oB();e.exports=n;function n(b){if(!(this instanceof n))return new n(b);r(this,w(b))}s(n,"ke"),I(n,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var b=o.filter(this.hasOwnProperty,this);return this.milliseconds&&b.indexOf("seconds")<0&&b.push("seconds"),b.length===0?"0":b.map(function(S){var k=this[S]||0;return S==="seconds"&&this.milliseconds&&(k=(k+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),k+" "+S},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],c=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var b=a.map(k,this).join(""),S=c.map(k,this).join("");return"P"+b+"T"+S;function k(R){var O=this[R]||0;return R==="seconds"&&this.milliseconds&&(O=(O+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),O+i[R]}};var l="([+-]?\\d+)",d=l+"\\s+years?",p=l+"\\s+mons?",m=l+"\\s+days?",h="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",y=new RegExp([d,p,m,h].map(function(b){return"("+b+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},f=["hours","minutes","seconds","milliseconds"];function _(b){var S=b+"000000".slice(b.length);return parseInt(S,10)/1e3}s(_,"Ga"),I(_,"parseMilliseconds");function w(b){if(!b)return{};var S=y.exec(b),k=S[8]==="-";return Object.keys(g).reduce(function(R,O){var C=g[O],$=S[C];return!$||($=O==="milliseconds"?_($):parseInt($,10),!$)||(k&&~f.indexOf(O)&&($*=-1),R[O]=$),R},{})}s(w,"Va"),I(w,"parse")}),sB=Xe((t,e)=>{"use strict";Ie(),e.exports=I(function(r){if(/^\\x/.test(r))return new ze(r.substr(2),"hex");for(var n="",o=0;o<r.length;)if(r[o]!=="\\")n+=r[o],++o;else if(/[0-7]{3}/.test(r.substr(o+1,3)))n+=String.fromCharCode(parseInt(r.substr(o+1,3),8)),o+=4;else{for(var i=1;o+i<r.length&&r[o+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";o+=Math.floor(i/2)*2}return new ze(n,"binary")},"parseBytea")}),aB=Xe((t,e)=>{Ie();var r=CP(),n=$P(),o=nB(),i=iB(),a=sB();function c(P){return I(function(N){return N===null?N:P(N)},"nullAllowed")}s(c,"St"),I(c,"allowNull");function l(P){return P===null?P:P==="TRUE"||P==="t"||P==="true"||P==="y"||P==="yes"||P==="on"||P==="1"}s(l,"qi"),I(l,"parseBool");function d(P){return P?r.parse(P,l):null}s(d,"za"),I(d,"parseBoolArray");function p(P){return parseInt(P,10)}s(p,"Ka"),I(p,"parseBaseTenInt");function m(P){return P?r.parse(P,c(p)):null}s(m,"sr"),I(m,"parseIntegerArray");function h(P){return P?r.parse(P,c(function(N){return k(N).trim()})):null}s(h,"Ya"),I(h,"parseBigIntegerArray");var y=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=O(D)),D});return N.parse()},"parsePointArray"),g=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=parseFloat(D)),D});return N.parse()},"parseFloatArray"),f=I(function(P){if(!P)return null;var N=n.create(P);return N.parse()},"parseStringArray"),_=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=o(D)),D});return N.parse()},"parseDateArray"),w=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=i(D)),D});return N.parse()},"parseIntervalArray"),b=I(function(P){return P?r.parse(P,c(a)):null},"parseByteAArray"),S=I(function(P){return parseInt(P,10)},"parseInteger"),k=I(function(P){var N=String(P);return/^\d+$/.test(N)?N:P},"parseBigInteger"),R=I(function(P){return P?r.parse(P,c(JSON.parse)):null},"parseJsonArray"),O=I(function(P){return P[0]!=="("?null:(P=P.substring(1,P.length-1).split(","),{x:parseFloat(P[0]),y:parseFloat(P[1])})},"parsePoint"),C=I(function(P){if(P[0]!=="<"&&P[1]!=="(")return null;for(var N="(",D="",W=!1,H=2;H<P.length-1;H++){if(W||(N+=P[H]),P[H]===")"){W=!0;continue}else if(!W)continue;P[H]!==","&&(D+=P[H])}var q=O(N);return q.radius=parseFloat(D),q},"parseCircle"),$=I(function(P){P(20,k),P(21,S),P(23,S),P(26,S),P(700,parseFloat),P(701,parseFloat),P(16,l),P(1082,o),P(1114,o),P(1184,o),P(600,O),P(651,f),P(718,C),P(1e3,d),P(1001,b),P(1005,m),P(1007,m),P(1028,m),P(1016,h),P(1017,y),P(1021,g),P(1022,g),P(1231,g),P(1014,f),P(1015,f),P(1008,f),P(1009,f),P(1040,f),P(1041,f),P(1115,_),P(1182,_),P(1185,_),P(1186,i),P(1187,w),P(17,a),P(114,JSON.parse.bind(JSON)),P(3802,JSON.parse.bind(JSON)),P(199,R),P(3807,R),P(3907,f),P(2951,f),P(791,f),P(1183,f),P(1270,f)},"init");e.exports={init:$}}),cB=Xe((t,e)=>{"use strict";Ie();var r=1e6;function n(o){var i=o.readInt32BE(0),a=o.readUInt32BE(4),c="";i<0&&(i=~i+(a===0),a=~a+1>>>0,c="-");var l="",d,p,m,h,y,g;{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}return d=i%r,p=4294967296*d+a,m=""+p%r,c+m+l}s(n,"ru"),I(n,"readInt8"),e.exports=n}),uB=Xe((t,e)=>{Ie();var r=cB(),n=I(function(f,_,w,b,S){w=w||0,b=b||!1,S=S||function(W,H,q){return W*Math.pow(2,q)+H};var k=w>>3,R=I(function(W){return b?~W&255:W},"inv"),O=255,C=8-w%8;_<C&&(O=255<<8-_&255,C=_),w&&(O=O>>w%8);var $=0;w%8+_>=8&&($=S(0,R(f[k])&O,C));for(var P=_+w>>3,N=k+1;N<P;N++)$=S($,R(f[N]),8);var D=(_+w)%8;return D>0&&($=S($,R(f[P])>>8-D,D)),$},"parseBits"),o=I(function(f,_,w){var b=Math.pow(2,w-1)-1,S=n(f,1),k=n(f,w,1);if(k===0)return 0;var R=1,O=I(function($,P,N){$===0&&($=1);for(var D=1;D<=N;D++)R/=2,(P&1<<N-D)>0&&($+=R);return $},"parsePrecisionBits"),C=n(f,_,w+1,!1,O);return k==Math.pow(2,w+1)-1?C===0?S===0?1/0:-1/0:NaN:(S===0?1:-1)*Math.pow(2,k-b)*C},"parseFloatFromBits"),i=I(function(f){return n(f,1)==1?-1*(n(f,15,1,!0)+1):n(f,15,1)},"parseInt16"),a=I(function(f){return n(f,1)==1?-1*(n(f,31,1,!0)+1):n(f,31,1)},"parseInt32"),c=I(function(f){return o(f,23,8)},"parseFloat32"),l=I(function(f){return o(f,52,11)},"parseFloat64"),d=I(function(f){var _=n(f,16,32);if(_==49152)return NaN;for(var w=Math.pow(1e4,n(f,16,16)),b=0,S=[],k=n(f,16),R=0;R<k;R++)b+=n(f,16,64+16*R)*w,w/=1e4;var O=Math.pow(10,n(f,16,48));return(_===0?1:-1)*Math.round(b*O)/O},"parseNumeric"),p=I(function(f,_){var w=n(_,1),b=n(_,63,1),S=new Date((w===0?1:-1)*b/1e3+9466848e5);return f||S.setTime(S.getTime()+S.getTimezoneOffset()*6e4),S.usec=b%1e3,S.getMicroSeconds=function(){return this.usec},S.setMicroSeconds=function(k){this.usec=k},S.getUTCMicroSeconds=function(){return this.usec},S},"parseDate"),m=I(function(f){for(var _=n(f,32),w=n(f,32,32),b=n(f,32,64),S=96,k=[],R=0;R<_;R++)k[R]=n(f,32,S),S+=32,S+=32;var O=I(function($){var P=n(f,32,S);if(S+=32,P==4294967295)return null;var N;if($==23||$==20)return N=n(f,P*8,S),S+=P*8,N;if($==25)return N=f.toString(this.encoding,S>>3,(S+=P<<3)>>3),N;console.log("ERROR: ElementType not implemented: "+$)},"parseElement"),C=I(function($,P){var N=[],D;if($.length>1){var W=$.shift();for(D=0;D<W;D++)N[D]=C($,P);$.unshift(W)}else for(D=0;D<$[0];D++)N[D]=O(P);return N},"parse");return C(k,b)},"parseArray"),h=I(function(f){return f.toString("utf8")},"parseText"),y=I(function(f){return f===null?null:n(f,8)>0},"parseBool"),g=I(function(f){f(20,r),f(21,i),f(23,a),f(26,a),f(1700,d),f(700,c),f(701,l),f(16,y),f(1114,p.bind(null,!1)),f(1184,p.bind(null,!0)),f(1e3,m),f(1007,m),f(1016,m),f(1008,m),f(1009,m),f(25,h)},"init");e.exports={init:g}}),lB=Xe((t,e)=>{Ie(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),pp=Xe(t=>{Ie();var e=aB(),r=uB(),n=$P(),o=lB();t.getTypeParser=c,t.setTypeParser=l,t.arrayParser=n,t.builtins=o;var i={text:{},binary:{}};function a(d){return String(d)}s(a,"Ji"),I(a,"noParse");function c(d,p){return p=p||"text",i[p]&&i[p][d]||a}s(c,"yu"),I(c,"getTypeParser");function l(d,p,m){typeof p=="function"&&(m=p,p="text"),i[p][d]=m}s(l,"mu"),I(l,"setTypeParser"),e.init(function(d,p){i.text[d]=p}),r.init(function(d,p){i.binary[d]=p})}),cv=Xe((t,e)=>{"use strict";Ie();var r=pp();function n(o){this._types=o||r,this.text={},this.binary={}}s(n,"Et"),I(n,"TypeOverrides"),n.prototype.getOverrides=function(o){switch(o){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(o,i,a){typeof i=="function"&&(a=i,i="text"),this.getOverrides(i)[o]=a},n.prototype.getTypeParser=function(o,i){return i=i||"text",this.getOverrides(i)[o]||this._types.getTypeParser(o,i)},e.exports=n});function Kc(t){let e=1779033703,r=3144134277,n=1013904242,o=2773480762,i=1359893119,a=2600822924,c=528734635,l=1541459225,d=0,p=0,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=I((b,S)=>b>>>S|b<<32-S,"rrot"),y=new Uint32Array(64),g=new Uint8Array(64),f=I(()=>{for(let N=0,D=0;N<16;N++,D+=4)y[N]=g[D]<<24|g[D+1]<<16|g[D+2]<<8|g[D+3];for(let N=16;N<64;N++){let D=h(y[N-15],7)^h(y[N-15],18)^y[N-15]>>>3,W=h(y[N-2],17)^h(y[N-2],19)^y[N-2]>>>10;y[N]=y[N-16]+D+y[N-7]+W|0}let b=e,S=r,k=n,R=o,O=i,C=a,$=c,P=l;for(let N=0;N<64;N++){let D=h(O,6)^h(O,11)^h(O,25),W=O&C^~O&$,H=P+D+W+m[N]+y[N]|0,q=h(b,2)^h(b,13)^h(b,22),X=b&S^b&k^S&k,te=q+X|0;P=$,$=C,C=O,O=R+H|0,R=k,k=S,S=b,b=H+te|0}e=e+b|0,r=r+S|0,n=n+k|0,o=o+R|0,i=i+O|0,a=a+C|0,c=c+$|0,l=l+P|0,p=0},"process"),_=I(b=>{typeof b=="string"&&(b=new TextEncoder().encode(b));for(let S=0;S<b.length;S++)g[p++]=b[S],p===64&&f();d+=b.length},"add"),w=I(()=>{if(g[p++]=128,p==64&&f(),p+8>64){for(;p<64;)g[p++]=0;f()}for(;p<58;)g[p++]=0;let b=d*8;g[p++]=b/1099511627776&255,g[p++]=b/4294967296&255,g[p++]=b>>>24,g[p++]=b>>>16&255,g[p++]=b>>>8&255,g[p++]=b&255,f();let S=new Uint8Array(32);return S[0]=e>>>24,S[1]=e>>>16&255,S[2]=e>>>8&255,S[3]=e&255,S[4]=r>>>24,S[5]=r>>>16&255,S[6]=r>>>8&255,S[7]=r&255,S[8]=n>>>24,S[9]=n>>>16&255,S[10]=n>>>8&255,S[11]=n&255,S[12]=o>>>24,S[13]=o>>>16&255,S[14]=o>>>8&255,S[15]=o&255,S[16]=i>>>24,S[17]=i>>>16&255,S[18]=i>>>8&255,S[19]=i&255,S[20]=a>>>24,S[21]=a>>>16&255,S[22]=a>>>8&255,S[23]=a&255,S[24]=c>>>24,S[25]=c>>>16&255,S[26]=c>>>8&255,S[27]=c&255,S[28]=l>>>24,S[29]=l>>>16&255,S[30]=l>>>8&255,S[31]=l&255,S},"digest");return t===void 0?{add:_,digest:w}:(_(t),w())}s(Kc,"Xe");var dB=Qr(()=>{"use strict";Ie(),I(Kc,"sha256")}),Ro,nv,pB=Qr(()=>{"use strict";Ie(),Ro=class bn{static{s(this,"U")}constructor(){Le(this,"_dataLength",0),Le(this,"_bufferLength",0),Le(this,"_state",new Int32Array(4)),Le(this,"_buffer",new ArrayBuffer(68)),Le(this,"_buffer8"),Le(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=bn.hexChars,n=bn.hexOut,o,i,a,c;for(c=0;c<4;c+=1)for(i=c*8,o=e[c],a=0;a<8;a+=2)n[i+1+a]=r.charAt(o&15),o>>>=4,n[i+0+a]=r.charAt(o&15),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],i=e[2],a=e[3];n+=(o&i|~o&a)+r[0]-680876936|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[2]+606105819|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[3]-1044525330|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[4]-176418897|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[7]-45705983|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[8]+1770035416|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[10]-42063|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[11]-1990404162|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[12]+1804603682|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[15]+1236535329|0,o=(o<<22|o>>>10)+i|0,n+=(o&a|i&~a)+r[1]-165796510|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[11]+643717713|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[0]-373897302|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[5]-701558691|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[15]-660478335|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[4]-405537848|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[9]+568446438|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[3]-187363961|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[8]+1163531501|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[13]-1444681467|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[12]-1926607734|0,o=(o<<20|o>>>12)+i|0,n+=(o^i^a)+r[5]-378558|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[14]-35309556|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[1]-1530992060|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[7]-155497632|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[10]-1094730640|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[13]+681279174|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[3]-722521979|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[6]+76029189|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[9]-640364487|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[15]+530742520|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+i|0,n+=(i^(o|~a))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[10]-1051523|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[2]+718787259|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(bn.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a;for(a=0;a<e.length;a+=1){if(i=e.charCodeAt(a),i<128)r[o++]=i;else if(i<2048)r[o++]=(i>>>6)+192,r[o++]=i&63|128;else if(i<55296||i>56319)r[o++]=(i>>>12)+224,r[o++]=i>>>6&63|128,r[o++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++a)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(i>>>18)+240,r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=i&63|128}o>=64&&(this._dataLength+=64,bn._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e.charCodeAt(a++);if(o<64)break;this._dataLength+=64,bn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e[a++];if(o<64)break;this._dataLength+=64,bn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i=0;i<r.length;i+=1)this._buffer8[i]=r.charCodeAt(i)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,i=(r>>2)+1;this._dataLength+=r;let a=this._dataLength*8;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(bn.buffer32Identity.subarray(i),i),r>55&&(bn._md5cycle(this._state,o),o.set(bn.buffer32Identity)),a<=4294967295)o[14]=a;else{let c=a.toString(16).match(/(.*?)(.{0,8})$/);if(c===null)return;let l=parseInt(c[2],16),d=parseInt(c[1],16)||0;o[14]=l,o[15]=d}return bn._md5cycle(this._state,o),e?this._state:bn._hex(this._state)}},I(Ro,"Md5"),Le(Ro,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),Le(Ro,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Le(Ro,"hexChars","0123456789abcdef"),Le(Ro,"hexOut",[]),Le(Ro,"onePassHasher",new Ro),nv=Ro}),uv={};$n(uv,{createHash:s(()=>NP,"createHash"),createHmac:s(()=>DP,"createHmac"),randomBytes:s(()=>RP,"randomBytes")});function RP(t){return crypto.getRandomValues(ze.alloc(t))}s(RP,"gu");function NP(t){if(t==="sha256")return{update:I(function(e){return{digest:I(function(){return ze.from(Kc(e))},"digest")}},"update")};if(t==="md5")return{update:I(function(e){return{digest:I(function(){return typeof e=="string"?nv.hashStr(e):nv.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}s(NP,"bu");function DP(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:I(function(r){return{digest:I(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let n=e.length;if(n>64)e=Kc(e);else if(n<64){let l=new Uint8Array(64);l.set(e),e=l}let o=new Uint8Array(64),i=new Uint8Array(64);for(let l=0;l<64;l++)o[l]=54^e[l],i[l]=92^e[l];let a=new Uint8Array(r.length+64);a.set(o,0),a.set(r,64);let c=new Uint8Array(96);return c.set(i,0),c.set(Kc(a),64),ze.from(Kc(c))},"digest")}},"update")}}s(DP,"vu");var jP=Qr(()=>{"use strict";Ie(),dB(),pB(),I(RP,"randomBytes"),I(NP,"createHash"),I(DP,"createHmac")}),mp=Xe((t,e)=>{"use strict";Ie(),e.exports={host:"localhost",user:Qe.platform==="win32"?Qe.env.USERNAME:Qe.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=pp(),n=r.getTypeParser(20,"text"),o=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){r.setTypeParser(20,"text",i?r.getTypeParser(23,"text"):n),r.setTypeParser(1016,"text",i?r.getTypeParser(1007,"text"):o)})}),fp=Xe((t,e)=>{"use strict";Ie();var r=(jP(),yr(uv)),n=mp();function o(g){var f=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+f+'"'}s(o,"Cu"),I(o,"escapeElement");function i(g){for(var f="{",_=0;_<g.length;_++)_>0&&(f=f+","),g[_]===null||typeof g[_]>"u"?f=f+"NULL":Array.isArray(g[_])?f=f+i(g[_]):g[_]instanceof ze?f+="\\\\x"+g[_].toString("hex"):f+=o(a(g[_]));return f=f+"}",f}s(i,"rs"),I(i,"arrayString");var a=I(function(g,f){if(g==null)return null;if(g instanceof ze)return g;if(ArrayBuffer.isView(g)){var _=ze.from(g.buffer,g.byteOffset,g.byteLength);return _.length===g.byteLength?_:_.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?p(g):d(g):Array.isArray(g)?i(g):typeof g=="object"?c(g,f):g.toString()},"prepareValue");function c(g,f){if(g&&typeof g.toPostgres=="function"){if(f=f||[],f.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return f.push(g),a(g.toPostgres(a),f)}return JSON.stringify(g)}s(c,"_u"),I(c,"prepareObject");function l(g,f){for(g=""+g;g.length<f;)g="0"+g;return g}s(l,"N"),I(l,"pad");function d(g){var f=-g.getTimezoneOffset(),_=g.getFullYear(),w=_<1;w&&(_=Math.abs(_)+1);var b=l(_,4)+"-"+l(g.getMonth()+1,2)+"-"+l(g.getDate(),2)+"T"+l(g.getHours(),2)+":"+l(g.getMinutes(),2)+":"+l(g.getSeconds(),2)+"."+l(g.getMilliseconds(),3);return f<0?(b+="-",f*=-1):b+="+",b+=l(Math.floor(f/60),2)+":"+l(f%60,2),w&&(b+=" BC"),b}s(d,"Iu"),I(d,"dateToString");function p(g){var f=g.getUTCFullYear(),_=f<1;_&&(f=Math.abs(f)+1);var w=l(f,4)+"-"+l(g.getUTCMonth()+1,2)+"-"+l(g.getUTCDate(),2)+"T"+l(g.getUTCHours(),2)+":"+l(g.getUTCMinutes(),2)+":"+l(g.getUTCSeconds(),2)+"."+l(g.getUTCMilliseconds(),3);return w+="+00:00",_&&(w+=" BC"),w}s(p,"Tu"),I(p,"dateToStringUTC");function m(g,f,_){return g=typeof g=="string"?{text:g}:g,f&&(typeof f=="function"?g.callback=f:g.values=f),_&&(g.callback=_),g}s(m,"Pu"),I(m,"normalizeQueryConfig");var h=I(function(g){return r.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),y=I(function(g,f,_){var w=h(f+g),b=h(ze.concat([ze.from(w),_]));return"md5"+b},"postgresMd5PasswordHash");e.exports={prepareValue:I(function(g){return a(g)},"prepareValueWrapper"),normalizeQueryConfig:m,postgresMd5PasswordHash:y,md5:h}}),Qc={};$n(Qc,{default:s(()=>MP,"default")});var MP,hp=Qr(()=>{"use strict";Ie(),MP={}}),mB=Xe((t,e)=>{"use strict";Ie();var r=(jP(),yr(uv));function n(f){if(f.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let _=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:_,response:"n,,n=*,r="+_,message:"SASLInitialResponse"}}s(n,"Mu"),I(n,"startSession");function o(f,_,w){if(f.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let b=d(w);if(b.nonce.startsWith(f.clientNonce)){if(b.nonce.length===f.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var S=ze.from(b.salt,"base64"),k=g(_,S,b.iteration),R=y(k,"Client Key"),O=h(R),C="n=*,r="+f.clientNonce,$="r="+b.nonce+",s="+b.salt+",i="+b.iteration,P="c=biws,r="+b.nonce,N=C+","+$+","+P,D=y(O,N),W=m(R,D),H=W.toString("base64"),q=y(k,"Server Key"),X=y(q,N);f.message="SASLResponse",f.serverSignature=X.toString("base64"),f.response=P+",p="+H}s(o,"Uu"),I(o,"continueSession");function i(f,_){if(f.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:w}=p(_);if(w!==f.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}s(i,"Du"),I(i,"finalizeSession");function a(f){if(typeof f!="string")throw new TypeError("SASL: text must be a string");return f.split("").map((_,w)=>f.charCodeAt(w)).every(_=>_>=33&&_<=43||_>=45&&_<=126)}s(a,"Ou"),I(a,"isPrintableChars");function c(f){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f)}s(c,"ls"),I(c,"isBase64");function l(f){if(typeof f!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(f.split(",").map(_=>{if(!/^.=/.test(_))throw new Error("SASL: Invalid attribute pair entry");let w=_[0],b=_.substring(2);return[w,b]}))}s(l,"fs"),I(l,"parseAttributePairs");function d(f){let _=l(f),w=_.get("r");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let b=_.get("s");if(b){if(!c(b))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let S=_.get("i");if(S){if(!/^[1-9][0-9]*$/.test(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let k=parseInt(S,10);return{nonce:w,salt:b,iteration:k}}s(d,"qu"),I(d,"parseServerFirstMessage");function p(f){let _=l(f).get("v");if(_){if(!c(_))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:_}}s(p,"Qu"),I(p,"parseServerFinalMessage");function m(f,_){if(!ze.isBuffer(f))throw new TypeError("first argument must be a Buffer");if(!ze.isBuffer(_))throw new TypeError("second argument must be a Buffer");if(f.length!==_.length)throw new Error("Buffer lengths must match");if(f.length===0)throw new Error("Buffers cannot be empty");return ze.from(f.map((w,b)=>f[b]^_[b]))}s(m,"hs"),I(m,"xorBuffers");function h(f){return r.createHash("sha256").update(f).digest()}s(h,"Nu"),I(h,"sha256");function y(f,_){return r.createHmac("sha256",f).update(_).digest()}s(y,"Ue"),I(y,"hmacSha256");function g(f,_,w){for(var b=y(f,ze.concat([_,ze.from([0,0,0,1])])),S=b,k=0;k<w-1;k++)b=y(f,b),S=m(S,b);return S}s(g,"Wu"),I(g,"Hi"),e.exports={startSession:n,continueSession:o,finalizeSession:i}}),lv={};$n(lv,{join:s(()=>zP,"join")});function zP(...t){return t.join("/")}s(zP,"ju");var UP=Qr(()=>{"use strict";Ie(),I(zP,"join")}),dv={};$n(dv,{stat:s(()=>LP,"stat")});function LP(t,e){e(new Error("No filesystem"))}s(LP,"Hu");var qP=Qr(()=>{"use strict";Ie(),I(LP,"stat")}),pv={};$n(pv,{default:s(()=>FP,"default")});var FP,BP=Qr(()=>{"use strict";Ie(),FP={}}),VP={};$n(VP,{StringDecoder:s(()=>HP,"StringDecoder")});var rv,HP,fB=Qr(()=>{"use strict";Ie(),rv=class{static{s(this,"Er")}constructor(e){Le(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},I(rv,"StringDecoder"),HP=rv}),hB=Xe((t,e)=>{"use strict";Ie();var{Transform:r}=(BP(),yr(pv)),{StringDecoder:n}=(fB(),yr(VP)),o=Symbol("last"),i=Symbol("decoder");function a(m,h,y){let g;if(this.overflow){if(g=this[i].write(m).split(this.matcher),g.length===1)return y();g.shift(),this.overflow=!1}else this[o]+=this[i].write(m),g=this[o].split(this.matcher);this[o]=g.pop();for(let f=0;f<g.length;f++)try{l(this,this.mapper(g[f]))}catch(_){return y(_)}if(this.overflow=this[o].length>this.maxLength,this.overflow&&!this.skipOverflow){y(new Error("maximum buffer reached"));return}y()}s(a,"zu"),I(a,"transform");function c(m){if(this[o]+=this[i].end(),this[o])try{l(this,this.mapper(this[o]))}catch(h){return m(h)}m()}s(c,"Ku"),I(c,"flush");function l(m,h){h!==void 0&&m.push(h)}s(l,"gs"),I(l,"push");function d(m){return m}s(d,"ws"),I(d,"noop");function p(m,h,y){switch(m=m||/\r?\n/,h=h||d,y=y||{},arguments.length){case 1:typeof m=="function"?(h=m,m=/\r?\n/):typeof m=="object"&&!(m instanceof RegExp)&&!m[Symbol.split]&&(y=m,m=/\r?\n/);break;case 2:typeof m=="function"?(y=h,h=m,m=/\r?\n/):typeof h=="object"&&(y=h,h=d)}y=Object.assign({},y),y.autoDestroy=!0,y.transform=a,y.flush=c,y.readableObjectMode=!0;let g=new r(y);return g[o]="",g[i]=new n("utf8"),g.matcher=m,g.mapper=h,g.maxLength=y.maxLength,g.skipOverflow=y.skipOverflow||!1,g.overflow=!1,g._destroy=function(f,_){this._writableState.errorEmitted=!1,_(f)},g}s(p,"Yu"),I(p,"split"),e.exports=p}),gB=Xe((t,e)=>{"use strict";Ie();var r=(UP(),yr(lv)),n=(BP(),yr(pv)).Stream,o=hB(),i=(hp(),yr(Qc)),a=5432,c=Qe.platform==="win32",l=Qe.stderr,d=56,p=7,m=61440,h=32768;function y(R){return(R&m)==h}s(y,"ic"),I(y,"isRegFile");var g=["host","port","database","user","password"],f=g.length,_=g[f-1];function w(){var R=l instanceof n&&l.writable===!0;if(R){var O=Array.prototype.slice.call(arguments).concat(`
`);l.write(i.format.apply(i,O))}}s(w,"Cr"),I(w,"warn"),Object.defineProperty(e.exports,"isWin",{get:I(function(){return c},"get"),set:I(function(R){c=R},"set")}),e.exports.warnTo=function(R){var O=l;return l=R,O},e.exports.getFileName=function(R){var O=R||Qe.env,C=O.PGPASSFILE||(c?r.join(O.APPDATA||"./","postgresql","pgpass.conf"):r.join(O.HOME||"./",".pgpass"));return C},e.exports.usePgPass=function(R,O){return Object.prototype.hasOwnProperty.call(Qe.env,"PGPASSWORD")?!1:c?!0:(O=O||"<unkn>",y(R.mode)?R.mode&(d|p)?(w('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',O),!1):!0:(w('WARNING: password file "%s" is not a plain file',O),!1))};var b=e.exports.match=function(R,O){return g.slice(0,-1).reduce(function(C,$,P){return P==1&&Number(R[$]||a)===Number(O[$])?C&&!0:C&&(O[$]==="*"||O[$]===R[$])},!0)};e.exports.getPassword=function(R,O,C){var $,P=O.pipe(o());function N(H){var q=S(H);q&&k(q)&&b(R,q)&&($=q[_],P.end())}s(N,"s"),I(N,"onLine");var D=I(function(){O.destroy(),C($)},"onEnd"),W=I(function(H){O.destroy(),w("WARNING: error on reading file: %s",H),C(void 0)},"onErr");O.on("error",W),P.on("data",N).on("end",D).on("error",W)};var S=e.exports.parseLine=function(R){if(R.length<11||R.match(/^\s+#/))return null;for(var O="",C="",$=0,P=0,N=0,D={},W=!1,H=I(function(X,te,oe){var ye=R.substring(te,oe);Object.hasOwnProperty.call(Qe.env,"PGPASS_NO_DEESCAPE")||(ye=ye.replace(/\\([:\\])/g,"$1")),D[g[X]]=ye},"addToObj"),q=0;q<R.length-1;q+=1){if(O=R.charAt(q+1),C=R.charAt(q),W=$==f-1,W){H($,P);break}q>=0&&O==":"&&C!=="\\"&&(H($,P,q+1),P=q+2,$+=1)}return D=Object.keys(D).length===f?D:null,D},k=e.exports.isValidEntry=function(R){for(var O={0:function(D){return D.length>0},1:function(D){return D==="*"?!0:(D=Number(D),isFinite(D)&&D>0&&D<9007199254740992&&Math.floor(D)===D)},2:function(D){return D.length>0},3:function(D){return D.length>0},4:function(D){return D.length>0}},C=0;C<g.length;C+=1){var $=O[C],P=R[g[C]]||"",N=$(P);if(!N)return!1}return!0}}),yB=Xe((t,e)=>{"use strict";Ie();var r=(UP(),yr(lv)),n=(qP(),yr(dv)),o=gB();e.exports=function(i,a){var c=o.getFileName();n.stat(c,function(l,d){if(l||!o.usePgPass(d,c))return a(void 0);var p=n.createReadStream(c);o.getPassword(i,p,a)})},e.exports.warnTo=o.warnTo}),ZP={};$n(ZP,{default:s(()=>JP,"default")});var JP,vB=Qr(()=>{"use strict";Ie(),JP={}}),_B=Xe((t,e)=>{"use strict";Ie();var r=(AP(),yr(PP)),n=(qP(),yr(dv));function o(i){if(i.charAt(0)==="/"){var c=i.split(" ");return{host:c[0],database:c[1]}}var a=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),c=a.query;for(var l in c)Array.isArray(c[l])&&(c[l]=c[l][c[l].length-1]);var d=(a.auth||":").split(":");if(c.user=d[0],c.password=d.splice(1).join(":"),c.port=a.port,a.protocol=="socket:")return c.host=decodeURI(a.pathname),c.database=a.query.db,c.client_encoding=a.query.encoding,c;c.host||(c.host=a.hostname);var p=a.pathname;if(!c.host&&p&&/^%2f/i.test(p)){var m=p.split("/");c.host=decodeURIComponent(m[0]),p=m.splice(1).join("/")}switch(p&&p.charAt(0)==="/"&&(p=p.slice(1)||null),c.database=p&&decodeURI(p),(c.ssl==="true"||c.ssl==="1")&&(c.ssl=!0),c.ssl==="0"&&(c.ssl=!1),(c.sslcert||c.sslkey||c.sslrootcert||c.sslmode)&&(c.ssl={}),c.sslcert&&(c.ssl.cert=n.readFileSync(c.sslcert).toString()),c.sslkey&&(c.ssl.key=n.readFileSync(c.sslkey).toString()),c.sslrootcert&&(c.ssl.ca=n.readFileSync(c.sslrootcert).toString()),c.sslmode){case"disable":{c.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{c.ssl.rejectUnauthorized=!1;break}}return c}s(o,"Tr"),I(o,"parse"),e.exports=o,o.parse=o}),mv=Xe((t,e)=>{"use strict";Ie();var r=(vB(),yr(ZP)),n=mp(),o=_B().parse,i=I(function(m,h,y){return y===void 0?y=Qe.env["PG"+m.toUpperCase()]:y===!1||(y=Qe.env[y]),h[m]||y||n[m]},"val"),a=I(function(){switch(Qe.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),c=I(function(m){return"'"+(""+m).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),l=I(function(m,h,y){var g=h[y];g!=null&&m.push(y+"="+c(g))},"add"),d=class{static{s(this,"Br")}constructor(h){h=typeof h=="string"?o(h):h||{},h.connectionString&&(h=Object.assign({},h,o(h.connectionString))),this.user=i("user",h),this.database=i("database",h),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",h),10),this.host=i("host",h),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",h)}),this.binary=i("binary",h),this.options=i("options",h),this.ssl=typeof h.ssl>"u"?a():h.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",h),this.replication=i("replication",h),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",h,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",h,!1),this.statement_timeout=i("statement_timeout",h,!1),this.lock_timeout=i("lock_timeout",h,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",h,!1),this.query_timeout=i("query_timeout",h,!1),h.connectionTimeoutMillis===void 0?this.connect_timeout=Qe.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(h.connectionTimeoutMillis/1e3),h.keepAlive===!1?this.keepalives=0:h.keepAlive===!0&&(this.keepalives=1),typeof h.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(h.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(h){var y=[];l(y,this,"user"),l(y,this,"password"),l(y,this,"port"),l(y,this,"application_name"),l(y,this,"fallback_application_name"),l(y,this,"connect_timeout"),l(y,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(y,g,"sslmode"),l(y,g,"sslca"),l(y,g,"sslkey"),l(y,g,"sslcert"),l(y,g,"sslrootcert"),this.database&&y.push("dbname="+c(this.database)),this.replication&&y.push("replication="+c(this.replication)),this.host&&y.push("host="+c(this.host)),this.isDomainSocket)return h(null,y.join(" "));this.client_encoding&&y.push("client_encoding="+c(this.client_encoding)),r.lookup(this.host,function(f,_){return f?h(f,null):(y.push("hostaddr="+c(_)),h(null,y.join(" ")))})}};I(d,"ConnectionParameters");var p=d;e.exports=p}),bB=Xe((t,e)=>{"use strict";Ie();var r=pp(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,o=class{static{s(this,"Lr")}constructor(c,l){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=l,this.RowCtor=null,this.rowAsArray=c==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(c){var l;c.text?l=n.exec(c.text):l=n.exec(c.command),l&&(this.command=l[1],l[3]?(this.oid=parseInt(l[2],10),this.rowCount=parseInt(l[3],10)):l[2]&&(this.rowCount=parseInt(l[2],10)))}_parseRowAsArray(c){for(var l=new Array(c.length),d=0,p=c.length;d<p;d++){var m=c[d];m!==null?l[d]=this._parsers[d](m):l[d]=null}return l}parseRow(c){for(var l={},d=0,p=c.length;d<p;d++){var m=c[d],h=this.fields[d].name;m!==null?l[h]=this._parsers[d](m):l[h]=null}return l}addRow(c){this.rows.push(c)}addFields(c){this.fields=c,this.fields.length&&(this._parsers=new Array(c.length));for(var l=0;l<c.length;l++){var d=c[l];this._types?this._parsers[l]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[l]=r.getTypeParser(d.dataTypeID,d.format||"text")}}};I(o,"Result");var i=o;e.exports=i}),wB=Xe((t,e)=>{"use strict";Ie();var{EventEmitter:r}=os(),n=bB(),o=fp(),i=class extends r{static{s(this,"kr")}constructor(l,d,p){super(),l=o.normalizeQueryConfig(l,d,p),this.text=l.text,this.values=l.values,this.rows=l.rows,this.types=l.types,this.name=l.name,this.binary=l.binary,this.portal=l.portal||"",this.callback=l.callback,this._rowMode=l.rowMode,Qe.domain&&l.callback&&(this.callback=Qe.domain.bind(l.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(l){this._checkForMultirow(),this._result.addFields(l.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(l){let d;if(!this._canceledDueToError){try{d=this._result.parseRow(l.fields)}catch(p){this._canceledDueToError=p;return}this.emit("row",d,this._result),this._accumulateRows&&this._result.addRow(d)}}handleCommandComplete(l,d){this._checkForMultirow(),this._result.addCommandComplete(l),this.rows&&d.sync()}handleEmptyQuery(l){this.rows&&l.sync()}handleError(l,d){if(this._canceledDueToError&&(l=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(l);this.emit("error",l)}handleReadyForQuery(l){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,l);if(this.callback)try{this.callback(null,this._results)}catch(d){Qe.nextTick(()=>{throw d})}this.emit("end",this._results)}submit(l){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let d=l.parsedStatements[this.name];return this.text&&d&&this.text!==d?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(l):l.query(this.text),null)}hasBeenParsed(l){return this.name&&l.parsedStatements[this.name]}handlePortalSuspended(l){this._getRows(l,this.rows)}_getRows(l,d){l.execute({portal:this.portal,rows:d}),d?l.flush():l.sync()}prepare(l){this.isPreparedStatement=!0,this.hasBeenParsed(l)||l.parse({text:this.text,name:this.name,types:this.types});try{l.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:o.prepareValue})}catch(d){this.handleError(d,l);return}l.describe({type:"P",name:this.portal||""}),this._getRows(l,this.rows)}handleCopyInResponse(l){l.sendCopyFail("No source stream defined")}handleCopyData(l,d){}};I(i,"Query");var a=i;e.exports=a}),GP=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{static{s(this,"Kr")}constructor(q,X,te){super(q),this.length=X,this.name=te}};I(e,"DatabaseError");var r=e;t.DatabaseError=r;var n=class{static{s(this,"Yr")}constructor(q,X){this.length=q,this.chunk=X,this.name="copyData"}};I(n,"CopyDataMessage");var o=n;t.CopyDataMessage=o;var i=class{static{s(this,"Zr")}constructor(q,X,te,oe){this.length=q,this.name=X,this.binary=te,this.columnTypes=new Array(oe)}};I(i,"CopyResponse");var a=i;t.CopyResponse=a;var c=class{static{s(this,"Jr")}constructor(q,X,te,oe,ye,Se,We){this.name=q,this.tableID=X,this.columnID=te,this.dataTypeID=oe,this.dataTypeSize=ye,this.dataTypeModifier=Se,this.format=We}};I(c,"Field");var l=c;t.Field=l;var d=class{static{s(this,"Xr")}constructor(q,X){this.length=q,this.fieldCount=X,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};I(d,"RowDescriptionMessage");var p=d;t.RowDescriptionMessage=p;var m=class{static{s(this,"en")}constructor(q,X){this.length=q,this.parameterCount=X,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};I(m,"ParameterDescriptionMessage");var h=m;t.ParameterDescriptionMessage=h;var y=class{static{s(this,"tn")}constructor(q,X,te){this.length=q,this.parameterName=X,this.parameterValue=te,this.name="parameterStatus"}};I(y,"ParameterStatusMessage");var g=y;t.ParameterStatusMessage=g;var f=class{static{s(this,"rn")}constructor(q,X){this.length=q,this.salt=X,this.name="authenticationMD5Password"}};I(f,"AuthenticationMD5Password");var _=f;t.AuthenticationMD5Password=_;var w=class{static{s(this,"nn")}constructor(q,X,te){this.length=q,this.processID=X,this.secretKey=te,this.name="backendKeyData"}};I(w,"BackendKeyDataMessage");var b=w;t.BackendKeyDataMessage=b;var S=class{static{s(this,"sn")}constructor(q,X,te,oe){this.length=q,this.processId=X,this.channel=te,this.payload=oe,this.name="notification"}};I(S,"NotificationResponseMessage");var k=S;t.NotificationResponseMessage=k;var R=class{static{s(this,"on")}constructor(q,X){this.length=q,this.status=X,this.name="readyForQuery"}};I(R,"ReadyForQueryMessage");var O=R;t.ReadyForQueryMessage=O;var C=class{static{s(this,"an")}constructor(q,X){this.length=q,this.text=X,this.name="commandComplete"}};I(C,"CommandCompleteMessage");var $=C;t.CommandCompleteMessage=$;var P=class{static{s(this,"un")}constructor(q,X){this.length=q,this.fields=X,this.name="dataRow",this.fieldCount=X.length}};I(P,"DataRowMessage");var N=P;t.DataRowMessage=N;var D=class{static{s(this,"cn")}constructor(q,X){this.length=q,this.message=X,this.name="notice"}};I(D,"NoticeMessage");var W=D;t.NoticeMessage=W}),SB=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{static{s(this,"hn")}constructor(o=256){this.size=o,this.offset=5,this.headerPosition=0,this.buffer=ze.allocUnsafe(o)}ensure(o){if(this.buffer.length-this.offset<o){let i=this.buffer,a=i.length+(i.length>>1)+o;this.buffer=ze.allocUnsafe(a),i.copy(this.buffer)}}addInt32(o){return this.ensure(4),this.buffer[this.offset++]=o>>>24&255,this.buffer[this.offset++]=o>>>16&255,this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addInt16(o){return this.ensure(2),this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addCString(o){if(!o)this.ensure(1);else{let i=ze.byteLength(o);this.ensure(i+1),this.buffer.write(o,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(o=""){let i=ze.byteLength(o);return this.ensure(i),this.buffer.write(o,this.offset),this.offset+=i,this}add(o){return this.ensure(o.length),o.copy(this.buffer,this.offset),this.offset+=o.length,this}join(o){if(o){this.buffer[this.headerPosition]=o;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(o?0:5,this.offset)}flush(o){let i=this.join(o);return this.offset=5,this.headerPosition=0,this.buffer=ze.allocUnsafe(this.size),i}};I(e,"Writer");var r=e;t.Writer=r}),xB=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=SB(),r=new e.Writer,n=I(q=>{r.addInt16(3).addInt16(0);for(let oe of Object.keys(q))r.addCString(oe).addCString(q[oe]);r.addCString("client_encoding").addCString("UTF8");let X=r.addCString("").flush(),te=X.length+4;return new e.Writer().addInt32(te).add(X).flush()},"startup"),o=I(()=>{let q=ze.allocUnsafe(8);return q.writeInt32BE(8,0),q.writeInt32BE(80877103,4),q},"requestSsl"),i=I(q=>r.addCString(q).flush(112),"password"),a=I(function(q,X){return r.addCString(q).addInt32(ze.byteLength(X)).addString(X),r.flush(112)},"sendSASLInitialResponseMessage"),c=I(function(q){return r.addString(q).flush(112)},"sendSCRAMClientFinalMessage"),l=I(q=>r.addCString(q).flush(81),"query"),d=[],p=I(q=>{let X=q.name||"";X.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",X,X.length),console.error("This can cause conflicts and silent errors executing queries"));let te=q.types||d,oe=te.length,ye=r.addCString(X).addCString(q.text).addInt16(oe);for(let Se=0;Se<oe;Se++)ye.addInt32(te[Se]);return r.flush(80)},"parse"),m=new e.Writer,h=I(function(q,X){for(let te=0;te<q.length;te++){let oe=X?X(q[te],te):q[te];oe==null?(r.addInt16(0),m.addInt32(-1)):oe instanceof ze?(r.addInt16(1),m.addInt32(oe.length),m.add(oe)):(r.addInt16(0),m.addInt32(ze.byteLength(oe)),m.addString(oe))}},"writeValues"),y=I((q={})=>{let X=q.portal||"",te=q.statement||"",oe=q.binary||!1,ye=q.values||d,Se=ye.length;return r.addCString(X).addCString(te),r.addInt16(Se),h(ye,q.valueMapper),r.addInt16(Se),r.add(m.flush()),r.addInt16(oe?1:0),r.flush(66)},"bind"),g=ze.from([69,0,0,0,9,0,0,0,0,0]),f=I(q=>{if(!q||!q.portal&&!q.rows)return g;let X=q.portal||"",te=q.rows||0,oe=ze.byteLength(X),ye=4+oe+1+4,Se=ze.allocUnsafe(1+ye);return Se[0]=69,Se.writeInt32BE(ye,1),Se.write(X,5,"utf-8"),Se[oe+5]=0,Se.writeUInt32BE(te,Se.length-4),Se},"execute"),_=I((q,X)=>{let te=ze.allocUnsafe(16);return te.writeInt32BE(16,0),te.writeInt16BE(1234,4),te.writeInt16BE(5678,6),te.writeInt32BE(q,8),te.writeInt32BE(X,12),te},"cancel"),w=I((q,X)=>{let te=4+ze.byteLength(X)+1,oe=ze.allocUnsafe(1+te);return oe[0]=q,oe.writeInt32BE(te,1),oe.write(X,5,"utf-8"),oe[te]=0,oe},"cstringMessage"),b=r.addCString("P").flush(68),S=r.addCString("S").flush(68),k=I(q=>q.name?w(68,`${q.type}${q.name||""}`):q.type==="P"?b:S,"describe"),R=I(q=>{let X=`${q.type}${q.name||""}`;return w(67,X)},"close"),O=I(q=>r.add(q).flush(100),"copyData"),C=I(q=>w(102,q),"copyFail"),$=I(q=>ze.from([q,0,0,0,4]),"codeOnlyBuffer"),P=$(72),N=$(83),D=$(88),W=$(99),H={startup:n,password:i,requestSsl:o,sendSASLInitialResponseMessage:a,sendSCRAMClientFinalMessage:c,query:l,parse:p,bind:y,execute:f,describe:k,close:R,flush:I(()=>P,"flush"),sync:I(()=>N,"sync"),end:I(()=>D,"end"),copyData:O,copyDone:I(()=>W,"copyDone"),copyFail:C,cancel:_};t.serialize=H}),TB=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=ze.allocUnsafe(0),r=class{static{s(this,"mn")}constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,a){this.offset=i,this.buffer=a}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let a=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,a}cstring(){let i=this.offset,a=i;for(;this.buffer[a++]!==0;);return this.offset=a,this.buffer.toString(this.encoding,i,a-1)}bytes(i){let a=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,a}};I(r,"BufferReader");var n=r;t.BufferReader=n}),EB=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=GP(),r=TB(),n=1,o=4,i=n+o,a=ze.allocUnsafe(0),c=class{static{s(this,"bn")}constructor(p){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,p?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=p?.mode||"text"}parse(p,m){this.mergeBuffer(p);let h=this.bufferOffset+this.bufferLength,y=this.bufferOffset;for(;y+i<=h;){let g=this.buffer[y],f=this.buffer.readUInt32BE(y+n),_=n+f;if(_+y<=h){let w=this.handlePacket(y+i,g,f,this.buffer);m(w),y+=_}else break}y===h?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=h-y,this.bufferOffset=y)}mergeBuffer(p){if(this.bufferLength>0){let m=this.bufferLength+p.byteLength;if(m+this.bufferOffset>this.buffer.byteLength){let h;if(m<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)h=this.buffer;else{let y=this.buffer.byteLength*2;for(;m>=y;)y*=2;h=ze.allocUnsafe(y)}this.buffer.copy(h,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=h,this.bufferOffset=0}p.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=m}else this.buffer=p,this.bufferOffset=0,this.bufferLength=p.byteLength}handlePacket(p,m,h,y){switch(m){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(p,h,y);case 67:return this.parseCommandCompleteMessage(p,h,y);case 90:return this.parseReadyForQueryMessage(p,h,y);case 65:return this.parseNotificationMessage(p,h,y);case 82:return this.parseAuthenticationResponse(p,h,y);case 83:return this.parseParameterStatusMessage(p,h,y);case 75:return this.parseBackendKeyData(p,h,y);case 69:return this.parseErrorMessage(p,h,y,"error");case 78:return this.parseErrorMessage(p,h,y,"notice");case 84:return this.parseRowDescriptionMessage(p,h,y);case 116:return this.parseParameterDescriptionMessage(p,h,y);case 71:return this.parseCopyInMessage(p,h,y);case 72:return this.parseCopyOutMessage(p,h,y);case 100:return this.parseCopyData(p,h,y);default:return new e.DatabaseError("received invalid response: "+m.toString(16),h,"error")}}parseReadyForQueryMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.string(1);return new e.ReadyForQueryMessage(m,y)}parseCommandCompleteMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring();return new e.CommandCompleteMessage(m,y)}parseCopyData(p,m,h){let y=h.slice(p,p+(m-4));return new e.CopyDataMessage(m,y)}parseCopyInMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyInResponse")}parseCopyOutMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyOutResponse")}parseCopyMessage(p,m,h,y){this.reader.setBuffer(p,h);let g=this.reader.byte()!==0,f=this.reader.int16(),_=new e.CopyResponse(m,y,g,f);for(let w=0;w<f;w++)_.columnTypes[w]=this.reader.int16();return _}parseNotificationMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.cstring(),f=this.reader.cstring();return new e.NotificationResponseMessage(m,y,g,f)}parseRowDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.RowDescriptionMessage(m,y);for(let f=0;f<y;f++)g.fields[f]=this.parseField();return g}parseField(){let p=this.reader.cstring(),m=this.reader.uint32(),h=this.reader.int16(),y=this.reader.uint32(),g=this.reader.int16(),f=this.reader.int32(),_=this.reader.int16()===0?"text":"binary";return new e.Field(p,m,h,y,g,f,_)}parseParameterDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.ParameterDescriptionMessage(m,y);for(let f=0;f<y;f++)g.dataTypeIDs[f]=this.reader.int32();return g}parseDataRowMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new Array(y);for(let f=0;f<y;f++){let _=this.reader.int32();g[f]=_===-1?null:this.reader.string(_)}return new e.DataRowMessage(m,g)}parseParameterStatusMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(m,y,g)}parseBackendKeyData(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(m,y,g)}parseAuthenticationResponse(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g={name:"authenticationOk",length:m};switch(y){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let f=this.reader.bytes(4);return new e.AuthenticationMD5Password(m,f)}break;case 10:{g.name="authenticationSASL",g.mechanisms=[];let f;do f=this.reader.cstring(),f&&g.mechanisms.push(f);while(f)}break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(m-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(m-8);break;default:throw new Error("Unknown authenticationOk message type "+y)}return g}parseErrorMessage(p,m,h,y){this.reader.setBuffer(p,h);let g={},f=this.reader.string(1);for(;f!=="\0";)g[f]=this.reader.cstring(),f=this.reader.string(1);let _=g.M,w=y==="notice"?new e.NoticeMessage(m,_):new e.DatabaseError(_,m,y);return w.severity=g.S,w.code=g.C,w.detail=g.D,w.hint=g.H,w.position=g.P,w.internalPosition=g.p,w.internalQuery=g.q,w.where=g.W,w.schema=g.s,w.table=g.t,w.column=g.c,w.dataType=g.d,w.constraint=g.n,w.file=g.F,w.line=g.L,w.routine=g.R,w}};I(c,"Parser");var l=c;t.Parser=l}),KP=Xe(t=>{"use strict";Ie(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=GP();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:I(function(){return e.DatabaseError},"get")});var r=xB();Object.defineProperty(t,"serialize",{enumerable:!0,get:I(function(){return r.serialize},"get")});var n=EB();function o(i,a){let c=new n.Parser;return i.on("data",l=>c.parse(l,a)),new Promise(l=>i.on("end",()=>l()))}s(o,"Hc"),I(o,"parse"),t.parse=o}),WP={};$n(WP,{connect:s(()=>QP,"connect")});function QP({socket:t,servername:e}){return t.startTls(e),t}s(QP,"$c");var kB=Qr(()=>{"use strict";Ie(),I(QP,"connect")}),XP=Xe((t,e)=>{"use strict";Ie();var r=(Wc(),yr(kP)),n=os().EventEmitter,{parse:o,serialize:i}=KP(),a=i.flush(),c=i.sync(),l=i.end(),d=class extends n{static{s(this,"Sn")}constructor(h){super(),h=h||{},this.stream=h.stream||new r.Socket,this._keepAlive=h.keepAlive,this._keepAliveInitialDelayMillis=h.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=h.ssl||!1,this._ending=!1,this._emitMessage=!1;var y=this;this.on("newListener",function(g){g==="message"&&(y._emitMessage=!0)})}connect(h,y){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(h,y),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let f=I(function(_){g._ending&&(_.code==="ECONNRESET"||_.code==="EPIPE")||g.emit("error",_)},"reportStreamError");if(this.stream.on("error",f),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(_){var w=_.toString("utf8");switch(w){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var b=(kB(),yr(WP));let S={socket:g.stream};g.ssl!==!0&&(Object.assign(S,g.ssl),"key"in g.ssl&&(S.key=g.ssl.key)),r.isIP(y)===0&&(S.servername=y);try{g.stream=b.connect(S)}catch(k){return g.emit("error",k)}g.attachListeners(g.stream),g.stream.on("error",f),g.emit("sslconnect")})}attachListeners(h){h.on("end",()=>{this.emit("end")}),o(h,y=>{var g=y.name==="error"?"errorMessage":y.name;this._emitMessage&&this.emit("message",y),this.emit(g,y)})}requestSsl(){this.stream.write(i.requestSsl())}startup(h){this.stream.write(i.startup(h))}cancel(h,y){this._send(i.cancel(h,y))}password(h){this._send(i.password(h))}sendSASLInitialResponseMessage(h,y){this._send(i.sendSASLInitialResponseMessage(h,y))}sendSCRAMClientFinalMessage(h){this._send(i.sendSCRAMClientFinalMessage(h))}_send(h){return this.stream.writable?this.stream.write(h):!1}query(h){this._send(i.query(h))}parse(h){this._send(i.parse(h))}bind(h){this._send(i.bind(h))}execute(h){this._send(i.execute(h))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(c)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(h){this._send(i.close(h))}describe(h){this._send(i.describe(h))}sendCopyFromChunk(h){this._send(i.copyData(h))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(h){this._send(i.copyFail(h))}};I(d,"Connection");var p=d;e.exports=p}),IB=Xe((t,e)=>{"use strict";Ie();var r=os().EventEmitter,n=(hp(),yr(Qc)),o=fp(),i=mB(),a=yB(),c=cv(),l=mv(),d=wB(),p=mp(),m=XP(),h=class extends r{static{s(this,"Cn")}constructor(f){super(),this.connectionParameters=new l(f),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var _=f||{};this._Promise=_.Promise||dp.Promise,this._types=new c(_.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=_.connection||new m({stream:_.stream,ssl:this.connectionParameters.ssl,keepAlive:_.keepAlive||!1,keepAliveInitialDelayMillis:_.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=_.binary||p.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=_.connectionTimeoutMillis||0}_errorAllQueries(f){let _=I(w=>{Qe.nextTick(()=>{w.handleError(f,this.connection)})},"enqueueError");this.activeQuery&&(_(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(_),this.queryQueue.length=0}_connect(f){var _=this,w=this.connection;if(this._connectionCallback=f,this._connecting||this._connected){let b=new Error("Client has already been connected. You cannot reuse a client.");Qe.nextTick(()=>{f(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{w._ending=!0,w.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){_.ssl?w.requestSsl():w.startup(_.getStartupConf())}),w.on("sslconnect",function(){w.startup(_.getStartupConf())}),this._attachListeners(w),w.once("end",()=>{let b=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(b),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(b):this._handleErrorEvent(b):this._connectionError||this._handleErrorEvent(b)),Qe.nextTick(()=>{this.emit("end")})})}connect(f){if(f){this._connect(f);return}return new this._Promise((_,w)=>{this._connect(b=>{b?w(b):_()})})}_attachListeners(f){f.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),f.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),f.on("authenticationSASL",this._handleAuthSASL.bind(this)),f.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),f.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),f.on("backendKeyData",this._handleBackendKeyData.bind(this)),f.on("error",this._handleErrorEvent.bind(this)),f.on("errorMessage",this._handleErrorMessage.bind(this)),f.on("readyForQuery",this._handleReadyForQuery.bind(this)),f.on("notice",this._handleNotice.bind(this)),f.on("rowDescription",this._handleRowDescription.bind(this)),f.on("dataRow",this._handleDataRow.bind(this)),f.on("portalSuspended",this._handlePortalSuspended.bind(this)),f.on("emptyQuery",this._handleEmptyQuery.bind(this)),f.on("commandComplete",this._handleCommandComplete.bind(this)),f.on("parseComplete",this._handleParseComplete.bind(this)),f.on("copyInResponse",this._handleCopyInResponse.bind(this)),f.on("copyData",this._handleCopyData.bind(this)),f.on("notification",this._handleNotification.bind(this))}_checkPgPass(f){let _=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(w=>{if(w!==void 0){if(typeof w!="string"){_.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=w}else this.connectionParameters.password=this.password=null;f()}).catch(w=>{_.emit("error",w)}):this.password!==null?f():a(this.connectionParameters,w=>{w!==void 0&&(this.connectionParameters.password=this.password=w),f()})}_handleAuthCleartextPassword(f){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(f){this._checkPgPass(()=>{let _=o.postgresMd5PasswordHash(this.user,this.password,f.salt);this.connection.password(_)})}_handleAuthSASL(f){this._checkPgPass(()=>{this.saslSession=i.startSession(f.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(f){i.continueSession(this.saslSession,this.password,f.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(f){i.finalizeSession(this.saslSession,f.data),this.saslSession=null}_handleBackendKeyData(f){this.processID=f.processID,this.secretKey=f.secretKey}_handleReadyForQuery(f){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:_}=this;this.activeQuery=null,this.readyForQuery=!0,_&&_.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(f){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(f);this.emit("error",f)}}_handleErrorEvent(f){if(this._connecting)return this._handleErrorWhileConnecting(f);this._queryable=!1,this._errorAllQueries(f),this.emit("error",f)}_handleErrorMessage(f){if(this._connecting)return this._handleErrorWhileConnecting(f);let _=this.activeQuery;if(!_){this._handleErrorEvent(f);return}this.activeQuery=null,_.handleError(f,this.connection)}_handleRowDescription(f){this.activeQuery.handleRowDescription(f)}_handleDataRow(f){this.activeQuery.handleDataRow(f)}_handlePortalSuspended(f){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(f){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(f){this.activeQuery.handleCommandComplete(f,this.connection)}_handleParseComplete(f){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(f){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(f){this.activeQuery.handleCopyData(f,this.connection)}_handleNotification(f){this.emit("notification",f)}_handleNotice(f){this.emit("notice",f)}getStartupConf(){var f=this.connectionParameters,_={user:f.user,database:f.database},w=f.application_name||f.fallback_application_name;return w&&(_.application_name=w),f.replication&&(_.replication=""+f.replication),f.statement_timeout&&(_.statement_timeout=String(parseInt(f.statement_timeout,10))),f.lock_timeout&&(_.lock_timeout=String(parseInt(f.lock_timeout,10))),f.idle_in_transaction_session_timeout&&(_.idle_in_transaction_session_timeout=String(parseInt(f.idle_in_transaction_session_timeout,10))),f.options&&(_.options=f.options),_}cancel(f,_){if(f.activeQuery===_){var w=this.connection;this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){w.cancel(f.processID,f.secretKey)})}else f.queryQueue.indexOf(_)!==-1&&f.queryQueue.splice(f.queryQueue.indexOf(_),1)}setTypeParser(f,_,w){return this._types.setTypeParser(f,_,w)}getTypeParser(f,_){return this._types.getTypeParser(f,_)}escapeIdentifier(f){return'"'+f.replace(/"/g,'""')+'"'}escapeLiteral(f){for(var _=!1,w="'",b=0;b<f.length;b++){var S=f[b];S==="'"?w+=S+S:S==="\\"?(w+=S+S,_=!0):w+=S}return w+="'",_===!0&&(w=" E"+w),w}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let f=this.activeQuery.submit(this.connection);f&&Qe.nextTick(()=>{this.activeQuery.handleError(f,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(f,_,w){var b,S,k,R,O;if(f==null)throw new TypeError("Client was passed a null or undefined query");return typeof f.submit=="function"?(k=f.query_timeout||this.connectionParameters.query_timeout,S=b=f,typeof _=="function"&&(b.callback=b.callback||_)):(k=this.connectionParameters.query_timeout,b=new d(f,_,w),b.callback||(S=new this._Promise((C,$)=>{b.callback=(P,N)=>P?$(P):C(N)}))),k&&(O=b.callback,R=setTimeout(()=>{var C=new Error("Query read timeout");Qe.nextTick(()=>{b.handleError(C,this.connection)}),O(C),b.callback=()=>{};var $=this.queryQueue.indexOf(b);$>-1&&this.queryQueue.splice($,1),this._pulseQueryQueue()},k),b.callback=(C,$)=>{clearTimeout(R),O(C,$)}),this.binary&&!b.binary&&(b.binary=!0),b._result&&!b._result._types&&(b._result._types=this._types),this._queryable?this._ending?(Qe.nextTick(()=>{b.handleError(new Error("Client was closed and is not queryable"),this.connection)}),S):(this.queryQueue.push(b),this._pulseQueryQueue(),S):(Qe.nextTick(()=>{b.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),S)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(f){if(this._ending=!0,!this.connection._connecting)if(f)f();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),f)this.connection.once("end",f);else return new this._Promise(_=>{this.connection.once("end",_)})}};I(h,"Client");var y=h;y.Query=d,e.exports=y}),PB=Xe((t,e)=>{"use strict";Ie();var r=os().EventEmitter,n=I(function(){},"NOOP"),o=I((g,f)=>{let _=g.findIndex(f);return _===-1?void 0:g.splice(_,1)[0]},"removeWhere"),i=class{static{s(this,"Tn")}constructor(f,_,w){this.client=f,this.idleListener=_,this.timeoutId=w}};I(i,"IdleItem");var a=i,c=class{static{s(this,"Pn")}constructor(f){this.callback=f}};I(c,"PendingItem");var l=c;function d(){throw new Error("Release called on client which has already been released to the pool.")}s(d,"il"),I(d,"throwOnDoubleRelease");function p(g,f){if(f)return{callback:f,result:void 0};let _,w,b=I(function(k,R){k?_(k):w(R)},"cb"),S=new g(function(k,R){w=k,_=R}).catch(k=>{throw Error.captureStackTrace(k),k});return{callback:b,result:S}}s(p,"Dt"),I(p,"promisify");function m(g,f){return I(s(function _(w){w.client=f,f.removeListener("error",_),f.on("error",()=>{g.log("additional client error after disconnection due to error",w)}),g._remove(f),g.emit("error",w,f)},"t"),"idleListener")}s(m,"sl"),I(m,"makeIdleListener");var h=class extends r{static{s(this,"Bn")}constructor(f,_){super(),this.options=Object.assign({},f),f!=null&&"password"in f&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),f!=null&&f.ssl&&f.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||_||gp().Client,this.Promise=this.options.Promise||dp.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(_=>{this._remove(_.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let f=this._pendingQueue.shift();if(this._idle.length){let _=this._idle.pop();clearTimeout(_.timeoutId);let w=_.client;w.ref&&w.ref();let b=_.idleListener;return this._acquireClient(w,f,b,!1)}if(!this._isFull())return this.newClient(f);throw new Error("unexpected condition")}_remove(f){let _=o(this._idle,w=>w.client===f);_!==void 0&&clearTimeout(_.timeoutId),this._clients=this._clients.filter(w=>w!==f),f.end(),this.emit("remove",f)}connect(f){if(this.ending){let b=new Error("Cannot use a pool after calling end on the pool");return f?f(b):this.Promise.reject(b)}let _=p(this.Promise,f),w=_.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Qe.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(_.callback)),w;let b=I((R,O,C)=>{clearTimeout(k),_.callback(R,O,C)},"queueCallback"),S=new l(b),k=setTimeout(()=>{o(this._pendingQueue,R=>R.callback===b),S.timedOut=!0,_.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return k.unref&&k.unref(),this._pendingQueue.push(S),w}return this.newClient(new l(_.callback)),w}newClient(f){let _=new this.Client(this.options);this._clients.push(_);let w=m(this,_);this.log("checking client timeout");let b,S=!1;this.options.connectionTimeoutMillis&&(b=setTimeout(()=>{this.log("ending client due to timeout"),S=!0,_.connection?_.connection.stream.destroy():_.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),_.connect(k=>{if(b&&clearTimeout(b),_.on("error",w),k)this.log("client failed to connect",k),this._clients=this._clients.filter(R=>R!==_),S&&(k=new Error("Connection terminated due to connection timeout",{cause:k})),this._pulseQueue(),f.timedOut||f.callback(k,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let R=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(_),this._idle.findIndex(O=>O.client===_)!==-1&&this._acquireClient(_,new l((O,C,$)=>$()),w,!1)},this.options.maxLifetimeSeconds*1e3);R.unref(),_.once("end",()=>clearTimeout(R))}return this._acquireClient(_,f,w,!0)}})}_acquireClient(f,_,w,b){b&&this.emit("connect",f),this.emit("acquire",f),f.release=this._releaseOnce(f,w),f.removeListener("error",w),_.timedOut?b&&this.options.verify?this.options.verify(f,f.release):f.release():b&&this.options.verify?this.options.verify(f,S=>{if(S)return f.release(S),_.callback(S,void 0,n);_.callback(void 0,f,f.release)}):_.callback(void 0,f,f.release)}_releaseOnce(f,_){let w=!1;return b=>{w&&d(),w=!0,this._release(f,_,b)}}_release(f,_,w){if(f.on("error",_),f._poolUseCount=(f._poolUseCount||0)+1,this.emit("release",w,f),w||this.ending||!f._queryable||f._ending||f._poolUseCount>=this.options.maxUses){f._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(f),this._pulseQueue();return}if(this._expired.has(f)){this.log("remove expired client"),this._expired.delete(f),this._remove(f),this._pulseQueue();return}let b;this.options.idleTimeoutMillis&&this._isAboveMin()&&(b=setTimeout(()=>{this.log("remove idle client"),this._remove(f)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&b.unref()),this.options.allowExitOnIdle&&f.unref(),this._idle.push(new a(f,_,b)),this._pulseQueue()}query(f,_,w){if(typeof f=="function"){let S=p(this.Promise,f);return sv(function(){return S.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),S.result}typeof _=="function"&&(w=_,_=void 0);let b=p(this.Promise,w);return w=b.callback,this.connect((S,k)=>{if(S)return w(S);let R=!1,O=I(C=>{R||(R=!0,k.release(C),w(C))},"onError");k.once("error",O),this.log("dispatching query");try{k.query(f,_,(C,$)=>{if(this.log("query dispatched"),k.removeListener("error",O),!R)return R=!0,k.release(C),C?w(C):w(void 0,$)})}catch(C){return k.release(C),w(C)}}),b.result}end(f){if(this.log("ending"),this.ending){let w=new Error("Called end on pool more than once");return f?f(w):this.Promise.reject(w)}this.ending=!0;let _=p(this.Promise,f);return this._endCallback=_.callback,this._pulseQueue(),_.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((f,_)=>f+(this._expired.has(_)?1:0),0)}get totalCount(){return this._clients.length}};I(h,"Pool");var y=h;e.exports=y}),YP={};$n(YP,{default:s(()=>eA,"default")});var eA,AB=Qr(()=>{"use strict";Ie(),eA={}}),CB=Xe((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),OB=Xe((t,e)=>{"use strict";Ie();var r=os().EventEmitter,n=(hp(),yr(Qc)),o=fp(),i=e.exports=function(c,l,d){r.call(this),c=o.normalizeQueryConfig(c,l,d),this.text=c.text,this.values=c.values,this.name=c.name,this.callback=c.callback,this.state="new",this._arrayMode=c.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(p){p==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,r);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(c){var l=this.native.pq.resultErrorFields();if(l)for(var d in l){var p=a[d]||d;c[p]=l[d]}this.callback?this.callback(c):this.emit("error",c),this.state="error"},i.prototype.then=function(c,l){return this._getPromise().then(c,l)},i.prototype.catch=function(c){return this._getPromise().catch(c)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(c,l){this._once("end",c),this._once("error",l)}.bind(this)),this._promise)},i.prototype.submit=function(c){this.state="running";var l=this;this.native=c.native,c.native.arrayMode=this._arrayMode;var d=I(function(h,y,g){if(c.native.arrayMode=!1,sv(function(){l.emit("_done")}),h)return l.handleError(h);l._emitRowEvents&&(g.length>1?y.forEach((f,_)=>{f.forEach(w=>{l.emit("row",w,g[_])})}):y.forEach(function(f){l.emit("row",f,g)})),l.state="end",l.emit("end",g),l.callback&&l.callback(null,g)},"after");if(Qe.domain&&(d=Qe.domain.bind(d)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var p=(this.values||[]).map(o.prepareValue);if(c.namedQueries[this.name]){if(this.text&&c.namedQueries[this.name]!==this.text){let h=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return d(h)}return c.native.execute(this.name,p,d)}return c.native.prepare(this.name,this.text,p.length,function(h){return h?d(h):(c.namedQueries[l.name]=l.text,l.native.execute(l.name,p,d))})}else if(this.values){if(!Array.isArray(this.values)){let h=new Error("Query values must be an array");return d(h)}var m=this.values.map(o.prepareValue);c.native.query(this.text,m,d)}else c.native.query(this.text,d)}}),$B=Xe((t,e)=>{"use strict";Ie();var r=(AB(),yr(YP)),n=cv(),o=CB(),i=os().EventEmitter,a=(hp(),yr(Qc)),c=mv(),l=OB(),d=e.exports=function(p){i.call(this),p=p||{},this._Promise=p.Promise||dp.Promise,this._types=new n(p.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var m=this.connectionParameters=new c(p);this.user=m.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:m.password}),this.database=m.database,this.host=m.host,this.port=m.port,this.namedQueries={}};d.Query=l,a.inherits(d,i),d.prototype._errorAllQueries=function(p){let m=I(h=>{Qe.nextTick(()=>{h.native=this.native,h.handleError(p)})},"enqueueError");this._hasActiveQuery()&&(m(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(m),this._queryQueue.length=0},d.prototype._connect=function(p){var m=this;if(this._connecting){Qe.nextTick(()=>p(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(h,y){if(h)return p(h);m.native.connect(y,function(g){if(g)return m.native.end(),p(g);m._connected=!0,m.native.on("error",function(f){m._queryable=!1,m._errorAllQueries(f),m.emit("error",f)}),m.native.on("notification",function(f){m.emit("notification",{channel:f.relname,payload:f.extra})}),m.emit("connect"),m._pulseQueryQueue(!0),p()})})},d.prototype.connect=function(p){if(p){this._connect(p);return}return new this._Promise((m,h)=>{this._connect(y=>{y?h(y):m()})})},d.prototype.query=function(p,m,h){var y,g,f,_,w;if(p==null)throw new TypeError("Client was passed a null or undefined query");if(typeof p.submit=="function")f=p.query_timeout||this.connectionParameters.query_timeout,g=y=p,typeof m=="function"&&(p.callback=m);else if(f=this.connectionParameters.query_timeout,y=new l(p,m,h),!y.callback){let b,S;g=new this._Promise((k,R)=>{b=k,S=R}),y.callback=(k,R)=>k?S(k):b(R)}return f&&(w=y.callback,_=setTimeout(()=>{var b=new Error("Query read timeout");Qe.nextTick(()=>{y.handleError(b,this.connection)}),w(b),y.callback=()=>{};var S=this._queryQueue.indexOf(y);S>-1&&this._queryQueue.splice(S,1),this._pulseQueryQueue()},f),y.callback=(b,S)=>{clearTimeout(_),w(b,S)}),this._queryable?this._ending?(y.native=this.native,Qe.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(y),this._pulseQueryQueue(),g):(y.native=this.native,Qe.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},d.prototype.end=function(p){var m=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,p));var h;return p||(h=new this._Promise(function(y,g){p=I(f=>f?g(f):y(),"cb")})),this.native.end(function(){m._errorAllQueries(new Error("Connection terminated")),Qe.nextTick(()=>{m.emit("end"),p&&p()})}),h},d.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},d.prototype._pulseQueryQueue=function(p){if(this._connected&&!this._hasActiveQuery()){var m=this._queryQueue.shift();if(!m){p||this.emit("drain");return}this._activeQuery=m,m.submit(this);var h=this;m.once("_done",function(){h._pulseQueryQueue()})}},d.prototype.cancel=function(p){this._activeQuery===p?this.native.cancel(function(){}):this._queryQueue.indexOf(p)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(p),1)},d.prototype.ref=function(){},d.prototype.unref=function(){},d.prototype.setTypeParser=function(p,m,h){return this._types.setTypeParser(p,m,h)},d.prototype.getTypeParser=function(p,m){return this._types.getTypeParser(p,m)}}),bP=Xe((t,e)=>{"use strict";Ie(),e.exports=$B()}),gp=Xe((t,e)=>{"use strict";Ie();var r=IB(),n=mp(),o=XP(),i=PB(),{DatabaseError:a}=KP(),c=I(d=>{var p;return p=class extends i{static{s(this,"e")}constructor(m){super(m,d)}},I(p,"BoundPool"),p},"poolFactory"),l=I(function(d){this.defaults=n,this.Client=d,this.Query=this.Client.Query,this.Pool=c(this.Client),this._pools=[],this.Connection=o,this.types=pp(),this.DatabaseError=a},"PG");typeof Qe.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new l(bP()):(e.exports=new l(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var d=null;try{d=new l(bP())}catch(p){if(p.code!=="MODULE_NOT_FOUND")throw p}return Object.defineProperty(e.exports,"native",{value:d}),d}}))});Ie();Ie();Wc();AP();Ie();var RB=Object.defineProperty,NB=Object.defineProperties,DB=Object.getOwnPropertyDescriptors,wP=Object.getOwnPropertySymbols,jB=Object.prototype.hasOwnProperty,MB=Object.prototype.propertyIsEnumerable,SP=I((t,e,r)=>e in t?RB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),zB=I((t,e)=>{for(var r in e||(e={}))jB.call(e,r)&&SP(t,r,e[r]);if(wP)for(var r of wP(e))MB.call(e,r)&&SP(t,r,e[r]);return t},"__spreadValues"),UB=I((t,e)=>NB(t,DB(e)),"__spreadProps"),LB=1008e3,xP=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,qB=new TextDecoder,fv=new TextEncoder,ap=fv.encode("0123456789abcdef"),cp=fv.encode("0123456789ABCDEF"),FB=fv.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),tA=FB.slice();tA[62]=45;tA[63]=95;var Gc,up;function rA(t,{alphabet:e,scratchArr:r}={}){if(!Gc)if(Gc=new Uint16Array(256),up=new Uint16Array(256),xP)for(let y=0;y<256;y++)Gc[y]=ap[y&15]<<8|ap[y>>>4],up[y]=cp[y&15]<<8|cp[y>>>4];else for(let y=0;y<256;y++)Gc[y]=ap[y&15]|ap[y>>>4]<<8,up[y]=cp[y&15]|cp[y>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let n=t.length,o=n>>>1,i=n>>>2,a=r||new Uint16Array(n),c=new Uint32Array(t.buffer,t.byteOffset,i),l=new Uint32Array(a.buffer,a.byteOffset,o),d=e==="upper"?up:Gc,p=0,m=0,h;if(xP)for(;p<i;)h=c[p++],l[m++]=d[h>>>8&255]<<16|d[h&255],l[m++]=d[h>>>24]<<16|d[h>>>16&255];else for(;p<i;)h=c[p++],l[m++]=d[h>>>24]<<16|d[h>>>16&255],l[m++]=d[h>>>8&255]<<16|d[h&255];for(p<<=2;p<n;)a[p]=d[t[p++]];return qB.decode(a.subarray(0,n))}s(rA,"Ea");I(rA,"_toHex");function nA(t,e={}){let r="",n=t.length,o=LB>>>1,i=Math.ceil(n/o),a=new Uint16Array(i>1?o:n);for(let c=0;c<i;c++){let l=c*o,d=l+o;r+=rA(t.subarray(l,d),UB(zB({},e),{scratchArr:a}))}return r}s(nA,"Aa");I(nA,"_toHexChunked");function oA(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():nA(t,e)}s(oA,"Ei");I(oA,"toHex");Ie();var iA=class sA{static{s(this,"gt")}constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:n}=this;for(let o=0,i=r.length;o<i;o++)if(e.query+=r[o],o<n.length){let a=n[o];if(a instanceof uA)e.query+=a.sql;else if(a instanceof lp)if(a.queryData instanceof sA)a.queryData.toParameterizedQuery(e);else{if(a.queryData.params?.length)throw new Error("This query is not composable");e.query+=a.queryData.query}else{let{params:c}=e;c.push(a),e.query+="$"+c.length,(a instanceof ze||ArrayBuffer.isView(a))&&(e.query+="::bytea")}}return e}};I(iA,"SqlTemplate");var aA=iA,cA=class{static{s(this,"Xt")}constructor(e){this.sql=e}};I(cA,"UnsafeRawSql");var uA=cA;Ie();function hv(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}s(hv,"bt");I(hv,"warnIfBrowser");Wc();var BB=ns(cv()),VB=ns(fp()),lA=class dA extends Error{static{s(this,"_t")}constructor(e){super(e),Le(this,"name","NeonDbError"),Le(this,"severity"),Le(this,"code"),Le(this,"detail"),Le(this,"hint"),Le(this,"position"),Le(this,"internalPosition"),Le(this,"internalQuery"),Le(this,"where"),Le(this,"schema"),Le(this,"table"),Le(this,"column"),Le(this,"dataType"),Le(this,"constraint"),Le(this,"file"),Le(this,"line"),Le(this,"routine"),Le(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,dA)}};I(lA,"NeonDbError");var Bs=lA,TP="transaction() expects an array of queries, or a function returning an array of queries",HB=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function pA(t){return t instanceof ze?"\\x"+oA(t):t}s(pA,"Lu");I(pA,"encodeBuffersAsBytea");function ov(t){let{query:e,params:r}=t instanceof aA?t.toParameterizedQuery():t;return{query:e,params:r.map(n=>pA((0,VB.prepareValue)(n)))}}s(ov,"ss");I(ov,"prepareQuery");function ui(t,{arrayMode:e,fullResults:r,fetchOptions:n,isolationLevel:o,readOnly:i,deferrable:a,authToken:c,disableWarningInBrowsers:l}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=av(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:p,username:m,hostname:h,port:y,pathname:g}=d;if(p!=="postgres:"&&p!=="postgresql:"||!m||!h||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function f(w,...b){if(!(Array.isArray(w)&&Array.isArray(w.raw)&&Array.isArray(b)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new lp(_,new aA(w,b))}s(f,"D"),I(f,"templateFn"),f.query=(w,b,S)=>new lp(_,{query:w,params:b??[]},S),f.unsafe=w=>new uA(w),f.transaction=async(w,b)=>{if(typeof w=="function"&&(w=w(f)),!Array.isArray(w))throw new Error(TP);w.forEach(R=>{if(!(R instanceof lp))throw new Error(TP)});let S=w.map(R=>R.queryData),k=w.map(R=>R.opts??{});return _(S,k,b)};async function _(w,b,S){let{fetchEndpoint:k,fetchFunction:R}=rs,O=Array.isArray(w)?{queries:w.map(ye=>ov(ye))}:ov(w),C=n??{},$=e??!1,P=r??!1,N=o,D=i,W=a;S!==void 0&&(S.fetchOptions!==void 0&&(C={...C,...S.fetchOptions}),S.arrayMode!==void 0&&($=S.arrayMode),S.fullResults!==void 0&&(P=S.fullResults),S.isolationLevel!==void 0&&(N=S.isolationLevel),S.readOnly!==void 0&&(D=S.readOnly),S.deferrable!==void 0&&(W=S.deferrable)),b!==void 0&&!Array.isArray(b)&&b.fetchOptions!==void 0&&(C={...C,...b.fetchOptions});let H=c;!Array.isArray(b)&&b?.authToken!==void 0&&(H=b.authToken);let q=typeof k=="function"?k(h,y,{jwtAuth:H!==void 0}):k,X={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},te=await fA(H);te&&(X.Authorization=`Bearer ${te}`),Array.isArray(w)&&(N!==void 0&&(X["Neon-Batch-Isolation-Level"]=N),D!==void 0&&(X["Neon-Batch-Read-Only"]=String(D)),W!==void 0&&(X["Neon-Batch-Deferrable"]=String(W))),l||rs.disableWarningInBrowsers||hv();let oe;try{oe=await(R??fetch)(q,{method:"POST",body:JSON.stringify(O),headers:X,...C})}catch(ye){let Se=new Bs(`Error connecting to database: ${ye}`);throw Se.sourceError=ye,Se}if(oe.ok){let ye=await oe.json();if(Array.isArray(w)){let Se=ye.results;if(!Array.isArray(Se))throw new Bs("Neon internal error: unexpected result format");return Se.map((We,Ve)=>{let J=b[Ve]??{},Ae=J.arrayMode??$,fe=J.fullResults??P;return iv(We,{arrayMode:Ae,fullResults:fe,types:J.types})})}else{let Se=b??{},We=Se.arrayMode??$,Ve=Se.fullResults??P;return iv(ye,{arrayMode:We,fullResults:Ve,types:Se.types})}}else{let{status:ye}=oe;if(ye===400){let Se=await oe.json(),We=new Bs(Se.message);for(let Ve of HB)We[Ve]=Se[Ve]??void 0;throw We}else{let Se=await oe.text();throw new Bs(`Server error (HTTP status ${ye}): ${Se}`)}}}return s(_,"Y"),I(_,"execute"),f}s(ui,"cs");I(ui,"neon");var mA=class{static{s(this,"dr")}constructor(e,r,n){this.execute=e,this.queryData=r,this.opts=n}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};I(mA,"NeonQueryPromise");var lp=mA;function iv(t,{arrayMode:e,fullResults:r,types:n}){let o=new BB.default(n),i=t.fields.map(l=>l.name),a=t.fields.map(l=>o.getTypeParser(l.dataTypeID)),c=e===!0?t.rows.map(l=>l.map((d,p)=>d===null?null:a[p](d))):t.rows.map(l=>Object.fromEntries(l.map((d,p)=>[i[p],d===null?null:a[p](d)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=c,t._parsers=a,t._types=o,t):c}s(iv,"os");I(iv,"processQueryResult");async function fA(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new Bs("Error getting auth token.");throw e instanceof Error&&(r=new Bs(`Error getting auth token: ${e.message}`)),r}}s(fA,"Fu");I(fA,"getAuthToken");Ie();var ZB=ns(gp());Ie();var JB=ns(gp()),hA=class extends JB.Client{static{s(this,"kn")}constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||Qe.env.PGHOST!==void 0,o=Qe.env.USER??Qe.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===o&&this.database===o&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${o}, db: ${o}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),a=r.pipelineTLS&&this.ssl,c=r.pipelineConnect==="password";if(!a&&!r.pipelineConnect)return i;let l=this.connection;if(a&&l.on("connect",()=>l.stream.emit("data","S")),c){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let d=this.ssl?"sslconnect":"connect";l.on(d,()=>{this.neonConfig.disableWarningInBrowsers||hv(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,n=this.saslSession,o=this.password,i=e.data;if(n.message!=="SASLInitialResponse"||typeof o!="string"||typeof i!="string")throw new Error("SASL: protocol error");let a=Object.fromEntries(i.split(",").map(ye=>{if(!/^.=/.test(ye))throw new Error("SASL: Invalid attribute pair entry");let Se=ye[0],We=ye.substring(2);return[Se,We]})),c=a.r,l=a.s,d=a.i;if(!c||!/^[!-+--~]+$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!d||!/^[1-9][0-9]*$/.test(d))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!c.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(c.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let p=parseInt(d,10),m=ze.from(l,"base64"),h=new TextEncoder,y=h.encode(o),g=await r.importKey("raw",y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),f=new Uint8Array(await r.sign("HMAC",g,ze.concat([m,ze.from([0,0,0,1])]))),_=f;for(var w=0;w<p-1;w++)f=new Uint8Array(await r.sign("HMAC",g,f)),_=ze.from(_.map((ye,Se)=>_[Se]^f[Se]));let b=_,S=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),k=new Uint8Array(await r.sign("HMAC",S,h.encode("Client Key"))),R=await r.digest("SHA-256",k),O="n=*,r="+n.clientNonce,C="r="+c+",s="+l+",i="+p,$="c=biws,r="+c,P=O+","+C+","+$,N=await r.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var D=new Uint8Array(await r.sign("HMAC",N,h.encode(P))),W=ze.from(k.map((ye,Se)=>k[Se]^D[Se])),H=W.toString("base64");let q=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),X=await r.sign("HMAC",q,h.encode("Server Key")),te=await r.importKey("raw",X,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var oe=ze.from(await r.sign("HMAC",te,h.encode(P)));n.message="SASLResponse",n.serverSignature=oe.toString("base64"),n.response=$+",p="+H,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};I(hA,"NeonClient");var GB=hA;Wc();var KB=ns(mv());function gA(t,e){if(e)return{callback:e,result:void 0};let r,n,o=I(function(a,c){a?r(a):n(c)},"cb"),i=new t(function(a,c){n=a,r=c});return{callback:o,result:i}}s(gA,"vl");I(gA,"promisify");var yA=class extends ZB.Pool{static{s(this,"Un")}constructor(){super(...arguments),Le(this,"Client",GB),Le(this,"hasFetchUnsupportedListeners",!1),Le(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!rs.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,n);typeof r=="function"&&(n=r,r=void 0);let o=gA(this.Promise,n);n=o.callback;try{let i=new KB.default(this.options),a=encodeURIComponent,c=encodeURI,l=`postgresql://${a(i.user)}:${a(i.password)}@${a(i.host)}/${c(i.database)}`,d=typeof e=="string"?e:e.text,p=r??e.values??[];ui(l,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(d,p,{types:e.types??this.options?.types}).then(m=>n(void 0,m)).catch(m=>n(m))}catch(i){n(i)}return o.result}};I(yA,"NeonPool");var No=yA;Wc();var Xc=ns(gp());var Tye=Xc.DatabaseError,Eye=Xc.defaults,kye=Xc.escapeIdentifier,Iye=Xc.escapeLiteral,Mt=Xc.types;var Gt=class t{static{s(this,"SelectionProxyHandler")}static[j]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===Dt)return{...e[Dt],selectedFields:new Proxy(e[Dt].selectedFields,this)};if(typeof r=="symbol")return e[r];let o=(Y(e,Jt)?e._.selectedFields:Y(e,Or)?e[Dt].selectedFields:e)[r];if(Y(o,_e.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;let i=o.clone();return i.isSelectionField=!0,i}if(Y(o,_e)){if(this.config.sqlBehavior==="sql")return o;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return Y(o,kt)?this.config.alias?new Proxy(o,new es(new Proxy(o.table,new zs(this.config.alias,this.config.replaceOriginalName??!1)))):o:typeof o!="object"||o===null?o:new Proxy(o,new t(this.config))}};var gv=class{static{s(this,"IndexBuilderOn")}constructor(e,r){this.unique=e,this.name=r}static[j]="PgIndexBuilderOn";on(...e){return new Yc(e.map(r=>{if(Y(r,_e))return r;r=r;let n=new js(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Yc(e.map(r=>{if(Y(r,_e))return r;r=r;let n=new js(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new Yc(r.map(n=>{if(Y(n,_e))return n;n=n;let o=new js(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),o}),this.unique,!0,this.name,e)}},Yc=class{static{s(this,"IndexBuilder")}static[j]="PgIndexBuilder";config;constructor(e,r,n,o,i="btree"){this.config={name:o,columns:e,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new yv(this.config,e)}},yv=class{static{s(this,"Index")}static[j]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};function vv(t){return new gv(!0,t)}s(vv,"uniqueIndex");function WB(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}s(WB,"toSnakeCase");function QB(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,n,o)=>{let i=o===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return r+i},"")}s(QB,"toCamelCase");function XB(t){return t}s(XB,"noopCase");var yp=class{static{s(this,"CasingCache")}static[j]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?WB:e==="camelCase"?QB:XB}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[me.Symbol.Schema]??"public",n=e.table[me.Symbol.OriginalName],o=`${r}.${n}.${e.name}`;return this.cache[o]||this.cacheTable(e.table),this.cache[o]}cacheTable(e){let r=e[me.Symbol.Schema]??"public",n=e[me.Symbol.OriginalName],o=`${r}.${n}`;if(!this.cachedTables[o]){for(let i of Object.values(e[me.Symbol.Columns])){let a=`${o}.${i.name}`;this.cache[a]=this.convert(i.name)}this.cachedTables[o]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Hs=class extends Or{static{s(this,"PgViewBase")}static[j]="PgViewBase"};var ro=class{static{s(this,"PgDialect")}static[j]="PgDialect";casing;constructor(e){this.casing=new yp(e?.casing)}async migrate(e,r,n){let o=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",a=M`
			CREATE TABLE IF NOT EXISTS ${M.identifier(i)}.${M.identifier(o)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(M`CREATE SCHEMA IF NOT EXISTS ${M.identifier(i)}`),await r.execute(a);let l=(await r.all(M`select id, hash, created_at from ${M.identifier(i)}.${M.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async d=>{for await(let p of e)if(!l||Number(l.created_at)<p.folderMillis){for(let m of p.sql)await d.execute(M.raw(m));await d.execute(M`insert into ${M.identifier(i)}.${M.identifier(o)} ("hash", "created_at") values(${p.hash}, ${p.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[M`with `];for(let[n,o]of e.entries())r.push(M`${M.identifier(o._.alias)} as (${o._.sql})`),n<e.length-1&&r.push(M`, `);return r.push(M` `),M.join(r)}buildDeleteQuery({table:e,where:r,returning:n,withList:o}){let i=this.buildWithCTE(o),a=n?M` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,c=r?M` where ${r}`:void 0;return M`${i}delete from ${e}${c}${a}`}buildUpdateSet(e,r){let n=e[me.Symbol.Columns],o=Object.keys(n).filter(a=>r[a]!==void 0||n[a]?.onUpdateFn!==void 0),i=o.length;return M.join(o.flatMap((a,c)=>{let l=n[a],d=r[a]??M.param(l.onUpdateFn(),l),p=M`${M.identifier(this.casing.getColumnCasing(l))} = ${d}`;return c<i-1?[p,M.raw(", ")]:[p]}))}buildUpdateQuery({table:e,set:r,where:n,returning:o,withList:i,from:a,joins:c}){let l=this.buildWithCTE(i),d=e[lr.Symbol.Name],p=e[lr.Symbol.Schema],m=e[lr.Symbol.OriginalName],h=d===m?void 0:d,y=M`${p?M`${M.identifier(p)}.`:void 0}${M.identifier(m)}${h&&M` ${M.identifier(h)}`}`,g=this.buildUpdateSet(e,r),f=a&&M.join([M.raw(" from "),this.buildFromTable(a)]),_=this.buildJoins(c),w=o?M` returning ${this.buildSelection(o,{isSingleTable:!a})}`:void 0,b=n?M` where ${n}`:void 0;return M`${l}update ${y} set ${g}${f}${_}${b}${w}`}buildSelection(e,{isSingleTable:r=!1}={}){let n=e.length,o=e.flatMap(({field:i},a)=>{let c=[];if(Y(i,_e.Aliased)&&i.isSelectionField)c.push(M.identifier(i.fieldAlias));else if(Y(i,_e.Aliased)||Y(i,_e)){let l=Y(i,_e.Aliased)?i.sql:i;r?c.push(new _e(l.queryChunks.map(d=>Y(d,pe)?M.identifier(this.casing.getColumnCasing(d)):d))):c.push(l),Y(i,_e.Aliased)&&c.push(M` as ${M.identifier(i.fieldAlias)}`)}else Y(i,kt)&&(r?c.push(M.identifier(this.casing.getColumnCasing(i))):c.push(i));return a<n-1&&c.push(M`, `),c});return M.join(o)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[n,o]of e.entries()){n===0&&r.push(M` `);let i=o.table,a=o.lateral?M` lateral`:void 0,c=o.on?M` on ${o.on}`:void 0;if(Y(i,lr)){let l=i[lr.Symbol.Name],d=i[lr.Symbol.Schema],p=i[lr.Symbol.OriginalName],m=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${m&&M` ${M.identifier(m)}`}${c}`)}else if(Y(i,Or)){let l=i[Dt].name,d=i[Dt].schema,p=i[Dt].originalName,m=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${m&&M` ${M.identifier(m)}`}${c}`)}else r.push(M`${M.raw(o.joinType)} join${a} ${i}${c}`);n<e.length-1&&r.push(M` `)}return M.join(r)}buildFromTable(e){if(Y(e,me)&&e[me.Symbol.IsAlias]){let r=M`${M.identifier(e[me.Symbol.OriginalName])}`;return e[me.Symbol.Schema]&&(r=M`${M.identifier(e[me.Symbol.Schema])}.${r}`),M`${r} ${M.identifier(e[me.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:n,where:o,having:i,table:a,joins:c,orderBy:l,groupBy:d,limit:p,offset:m,lockingClause:h,distinct:y,setOperators:g}){let f=n??_n(r);for(let q of f)if(Y(q.field,kt)&&Gr(q.field.table)!==(Y(a,Jt)?a._.alias:Y(a,Hs)?a[Dt].name:Y(a,_e)?void 0:Gr(a))&&!(X=>c?.some(({alias:te})=>te===(X[me.Symbol.IsAlias]?Gr(X):X[me.Symbol.BaseName])))(q.field.table)){let X=Gr(q.field.table);throw new Error(`Your "${q.path.join("->")}" field references a column "${X}"."${q.field.name}", but the table "${X}" is not part of the query! Did you forget to join it?`)}let _=!c||c.length===0,w=this.buildWithCTE(e),b;y&&(b=y===!0?M` distinct`:M` distinct on (${M.join(y.on,M`, `)})`);let S=this.buildSelection(f,{isSingleTable:_}),k=this.buildFromTable(a),R=this.buildJoins(c),O=o?M` where ${o}`:void 0,C=i?M` having ${i}`:void 0,$;l&&l.length>0&&($=M` order by ${M.join(l,M`, `)}`);let P;d&&d.length>0&&(P=M` group by ${M.join(d,M`, `)}`);let N=typeof p=="object"||typeof p=="number"&&p>=0?M` limit ${p}`:void 0,D=m?M` offset ${m}`:void 0,W=M.empty();if(h){let q=M` for ${M.raw(h.strength)}`;h.config.of&&q.append(M` of ${M.join(Array.isArray(h.config.of)?h.config.of:[h.config.of],M`, `)}`),h.config.noWait?q.append(M` nowait`):h.config.skipLocked&&q.append(M` skip locked`),W.append(q)}let H=M`${w}select${b} ${S} from ${k}${R}${O}${P}${C}${$}${N}${D}${W}`;return g.length>0?this.buildSetOperations(H,g):H}buildSetOperations(e,r){let[n,...o]=r;if(!n)throw new Error("Cannot pass undefined values to any set operator");return o.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),o)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:n,rightSelect:o,limit:i,orderBy:a,offset:c}}){let l=M`(${e.getSQL()}) `,d=M`(${o.getSQL()})`,p;if(a&&a.length>0){let g=[];for(let f of a)if(Y(f,pe))g.push(M.identifier(f.name));else if(Y(f,_e)){for(let _=0;_<f.queryChunks.length;_++){let w=f.queryChunks[_];Y(w,pe)&&(f.queryChunks[_]=M.identifier(w.name))}g.push(M`${f}`)}else g.push(M`${f}`);p=M` order by ${M.join(g,M`, `)} `}let m=typeof i=="object"||typeof i=="number"&&i>=0?M` limit ${i}`:void 0,h=M.raw(`${r} ${n?"all ":""}`),y=c?M` offset ${c}`:void 0;return M`${l}${h}${d}${p}${m}${y}`}buildInsertQuery({table:e,values:r,onConflict:n,returning:o,withList:i,select:a,overridingSystemValue_:c}){let l=[],d=e[me.Symbol.Columns],p=Object.entries(d).filter(([w,b])=>!b.shouldDisableInsert()),m=p.map(([,w])=>M.identifier(this.casing.getColumnCasing(w)));if(a){let w=r;Y(w,_e)?l.push(w):l.push(w.getSQL())}else{let w=r;l.push(M.raw("values "));for(let[b,S]of w.entries()){let k=[];for(let[R,O]of p){let C=S[R];if(C===void 0||Y(C,Kr)&&C.value===void 0)if(O.defaultFn!==void 0){let $=O.defaultFn(),P=Y($,_e)?$:M.param($,O);k.push(P)}else if(!O.default&&O.onUpdateFn!==void 0){let $=O.onUpdateFn(),P=Y($,_e)?$:M.param($,O);k.push(P)}else k.push(M`default`);else k.push(C)}l.push(k),b<w.length-1&&l.push(M`, `)}}let h=this.buildWithCTE(i),y=M.join(l),g=o?M` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,f=n?M` on conflict ${n}`:void 0,_=c===!0?M`overriding system value `:void 0;return M`${h}insert into ${e} ${m} ${_}${y}${f}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:n}){let o=r?M` concurrently`:void 0,i=n?M` with no data`:void 0;return M`refresh materialized view${o} ${e}${i}`}prepareTyping(e){return Y(e,Lc)||Y(e,Uc)?"json":Y(e,qc)?"decimal":Y(e,Fc)?"time":Y(e,Bc)||Y(e,Vc)?"timestamp":Y(e,Mc)||Y(e,zc)?"date":Y(e,Hc)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:o,tableConfig:i,queryConfig:a,tableAlias:c,nestedQueryRelation:l,joinOn:d}){let p=[],m,h,y=[],g,f=[];if(a===!0)p=Object.entries(i.columns).map(([b,S])=>({dbKey:S.name,tsKey:b,field:eo(S,c),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let w=Object.fromEntries(Object.entries(i.columns).map(([C,$])=>[C,eo($,c)]));if(a.where){let C=typeof a.where=="function"?a.where(w,hP()):a.where;g=C&&Nc(C,c)}let b=[],S=[];if(a.columns){let C=!1;for(let[$,P]of Object.entries(a.columns))P!==void 0&&$ in i.columns&&(!C&&P===!0&&(C=!0),S.push($));S.length>0&&(S=C?S.filter($=>a.columns?.[$]===!0):Object.keys(i.columns).filter($=>!S.includes($)))}else S=Object.keys(i.columns);for(let C of S){let $=i.columns[C];b.push({tsKey:C,value:$})}let k=[];a.with&&(k=Object.entries(a.with).filter(C=>!!C[1]).map(([C,$])=>({tsKey:C,queryConfig:$,relation:i.relations[C]})));let R;if(a.extras){R=typeof a.extras=="function"?a.extras(w,{sql:M}):a.extras;for(let[C,$]of Object.entries(R))b.push({tsKey:C,value:Cg($,c)})}for(let{tsKey:C,value:$}of b)p.push({dbKey:Y($,_e.Aliased)?$.fieldAlias:i.columns[C].name,tsKey:C,field:Y($,kt)?eo($,c):$,relationTableTsKey:void 0,isJson:!1,selection:[]});let O=typeof a.orderBy=="function"?a.orderBy(w,gP()):a.orderBy??[];Array.isArray(O)||(O=[O]),y=O.map(C=>Y(C,kt)?eo(C,c):Nc(C,c)),m=a.limit,h=a.offset;for(let{tsKey:C,queryConfig:$,relation:P}of k){let N=yP(r,n,P),D=Yi(P.referencedTable),W=n[D],H=`${c}_${C}`,q=xe(...N.fields.map((oe,ye)=>Z(eo(N.references[ye],H),eo(oe,c)))),X=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:e[W],tableConfig:r[W],queryConfig:Y(P,ci)?$===!0?{limit:1}:{...$,limit:1}:$,tableAlias:H,joinOn:q,nestedQueryRelation:P}),te=M`${M.identifier(H)}.${M.identifier("data")}`.as(C);f.push({on:M`true`,table:new Jt(X.sql,{},H),alias:H,joinType:"left",lateral:!0}),p.push({dbKey:C,tsKey:C,field:te,relationTableTsKey:W,isJson:!0,selection:X.selection})}}if(p.length===0)throw new Dc({message:`No fields selected for table "${i.tsName}" ("${c}")`});let _;if(g=xe(d,g),l){let w=M`json_build_array(${M.join(p.map(({field:k,tsKey:R,isJson:O})=>O?M`${M.identifier(`${c}_${R}`)}.${M.identifier("data")}`:Y(k,_e.Aliased)?k.sql:k),M`, `)})`;Y(l,Zc)&&(w=M`coalesce(json_agg(${w}${y.length>0?M` order by ${M.join(y,M`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:w.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];m!==void 0||h!==void 0||y.length>0?(_=this.buildSelectQuery({table:Rc(o,c),fields:{},fieldsFlat:[{path:[],field:M.raw("*")}],where:g,limit:m,offset:h,orderBy:y,setOperators:[]}),g=void 0,m=void 0,h=void 0,y=[]):_=Rc(o,c),_=this.buildSelectQuery({table:Y(_,lr)?_:new Jt(_,{},c),fields:{},fieldsFlat:b.map(({field:k})=>({path:[],field:Y(k,kt)?eo(k,c):k})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]})}else _=this.buildSelectQuery({table:Rc(o,c),fields:{},fieldsFlat:p.map(({field:w})=>({path:[],field:Y(w,kt)?eo(w,c):w})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]});return{tableTsKey:i.tsName,sql:_,selection:p}}};var vp=class{static{s(this,"TypedQueryBuilder")}static[j]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Ar=class{static{s(this,"PgSelectBuilder")}static[j]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,n=e,o;return this.fields?o=this.fields:Y(n,Jt)?o=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):Y(n,Hs)?o=n[Dt].selectedFields:Y(n,_e)?o={}:o=AI(n),new _p({table:n,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},_v=class extends vp{static{s(this,"PgSelectQueryBuilderBase")}static[j]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:n,session:o,dialect:i,withList:a,distinct:c}){super(),this.config={withList:a,table:e,fields:{...r},distinct:c,setOperators:[]},this.isPartialSelect=n,this.session=o,this.dialect=i,this._={selectedFields:r,config:this.config},this.tableName=Oo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let l of Rn(e))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(n,o)=>{let i=this.tableName,a=Oo(n);for(let c of Rn(n))this.usedTables.add(c);if(typeof a=="string"&&this.config.joins?.some(c=>c.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof a=="string"&&!Y(n,_e))){let c=Y(n,Jt)?n._.selectedFields:Y(n,Or)?n[Dt].selectedFields:n[me.Symbol.Columns];this.config.fields[a]=c}if(typeof o=="function"&&(o=o(new Proxy(this.config.fields,new Gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:n,joinType:e,alias:a,lateral:r}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return n=>{let o=typeof n=="function"?n(YB()):n;if(!jc(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...Rn(this.config.table)),this.config.joins)for(let n of this.config.joins)r.push(...Rn(n.table));return new Proxy(new Jt(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new Gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Gt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},_p=class extends _v{static{s(this,"PgSelectBase")}static[j]="PgSelect";_prepare(e){let{session:r,config:n,dialect:o,joinsNotNullableMap:i,authToken:a,cacheConfig:c,usedTables:l}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=n;return cr.startActiveSpan("drizzle.prepareQuery",()=>{let p=_n(d),m=r.prepareQuery(o.sqlToQuery(this.getSQL()),p,e,!0,void 0,{type:"select",tables:[...l]},c);return m.joinsNotNullableMap=i,m.setToken(a)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>cr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};PI(_p,[kr]);function Zs(t,e){return(r,n,...o)=>{let i=[n,...o].map(a=>({type:t,isAll:e,rightSelect:a}));for(let a of i)if(!jc(r.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}s(Zs,"createSetOperator");var YB=s(()=>({union:e5,unionAll:t5,intersect:r5,intersectAll:n5,except:o5,exceptAll:i5}),"getPgSetOperators"),e5=Zs("union",!1),t5=Zs("union",!0),r5=Zs("intersect",!1),n5=Zs("intersect",!0),o5=Zs("except",!1),i5=Zs("except",!0);var Js=class{static{s(this,"QueryBuilder")}static[j]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=Y(e,ro)?e:void 0,this.dialectConfig=Y(e,ro)?void 0:e}$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(n)),new Proxy(new Ms(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");with(...e){let r=this;function n(a){return new Ar({fields:a??void 0,session:void 0,dialect:r.getDialect(),withList:e})}s(n,"select");function o(a){return new Ar({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}s(o,"selectDistinct");function i(a,c){return new Ar({fields:c??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:a}})}return s(i,"selectDistinctOn"),{select:n,selectDistinct:o,selectDistinctOn:i}}select(e){return new Ar({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Ar({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Ar({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new ro(this.dialectConfig)),this.dialect}};function Rn(t){return Y(t,lr)?[t[Xi]?`${t[Xi]}.${t[me.Symbol.BaseName]}`:t[me.Symbol.BaseName]]:Y(t,Jt)?t._.usedTables??[]:Y(t,_e)?t.usedTables??[]:[]}s(Rn,"extractUsedTable");var eu=class extends kr{static{s(this,"PgDeleteBase")}constructor(e,r,n,o){super(),this.session=r,this.dialect=n,this.config={table:e,withList:o}}static[j]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[me.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=_n(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return cr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:Rn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>cr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Gt({alias:Gr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var tu=class{static{s(this,"PgInsertBuilder")}constructor(e,r,n,o,i){this.table=e,this.session=r,this.dialect=n,this.withList=o,this.overridingSystemValue_=i}static[j]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(n=>{let o={},i=this.table[me.Symbol.Columns];for(let a of Object.keys(n)){let c=n[a];o[a]=Y(c,_e)?c:new Kr(c,i[a])}return o});return new bp(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new Js):e;if(!Y(r,_e)&&!jc(this.table[Gd],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new bp(this.table,r,this.session,this.dialect,this.withList,!0)}},bp=class extends kr{static{s(this,"PgInsertBase")}constructor(e,r,n,o,i,a,c){super(),this.session=n,this.dialect=o,this.config={table:e,values:r,withList:i,select:a,overridingSystemValue_:c}}static[j]="PgInsert";config;cacheConfig;returning(e=this.config.table[me.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=_n(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=M`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?M` where ${e.where}`:void 0;this.config.onConflict=M`(${M.raw(r)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?M` where ${e.where}`:void 0,n=e.targetWhere?M` where ${e.targetWhere}`:void 0,o=e.setWhere?M` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,Qd(this.config.table,e.set)),a="";return a=Array.isArray(e.target)?e.target.map(c=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(c))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=M`(${M.raw(a)})${n} do update set ${i}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return cr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:Rn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>cr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Gt({alias:Gr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var wp=class extends kr{static{s(this,"PgRefreshMaterializedView")}constructor(e,r,n){super(),this.session=r,this.dialect=n,this.config={view:e}}static[j]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return cr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>cr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};var ru=class{static{s(this,"PgUpdateBuilder")}constructor(e,r,n,o){this.table=e,this.session=r,this.dialect=n,this.withList=o}static[j]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new bv(this.table,Qd(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},bv=class extends kr{static{s(this,"PgUpdateBase")}constructor(e,r,n,o,i){super(),this.session=n,this.dialect=o,this.config={set:r,table:e,withList:i,joins:[]},this.tableName=Oo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[j]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,n=Oo(r);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=r,this}getTableLikeFields(e){return Y(e,lr)?e[me.Symbol.Columns]:Y(e,Jt)?e._.selectedFields:e[Dt].selectedFields}createJoin(e){return(r,n)=>{let o=Oo(r);if(typeof o=="string"&&this.config.joins.some(i=>i.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!Y(this.config.from,_e)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[me.Symbol.Columns],new Gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new Gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:r,joinType:e,alias:o}),typeof o=="string")switch(e){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[me.Symbol.Columns]),this.config.from)){let r=Oo(this.config.from);if(typeof r=="string"&&this.config.from&&!Y(this.config.from,_e)){let n=this.getTableLikeFields(this.config.from);e[r]=n}for(let n of this.config.joins){let o=Oo(n.table);if(typeof o=="string"&&!Y(n.table,_e)){let i=this.getTableLikeFields(n.table);e[o]=i}}}return this.config.returningFields=e,this.config.returning=_n(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:Rn(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>this._prepare().execute(e,this.authToken),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Gt({alias:Gr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Sp=class t extends _e{static{s(this,"PgCountBuilder")}constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[j]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return M`(select count(*) from ${e}${M.raw(" where ").if(r)}${r})`}static buildCount(e,r){return M`select count(*) as count from ${e}${M.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}};var xp=class{static{s(this,"RelationalQueryBuilder")}constructor(e,r,n,o,i,a,c){this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c}static[j]="PgRelationalQueryBuilder";findMany(e){return new Tp(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Tp(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Tp=class extends kr{static{s(this,"PgRelationalQuery")}constructor(e,r,n,o,i,a,c,l,d){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c,this.config=l,this.mode=d}static[j]="PgRelationalQuery";_prepare(e){return cr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(o,i)=>{let a=o.map(c=>np(this.schema,this.tableConfig,c,r.selection,i));return this.mode==="first"?a[0]:a})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return cr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Ep=class extends kr{static{s(this,"PgRaw")}constructor(e,r,n,o){super(),this.execute=e,this.sql=r,this.query=n,this.mapBatchResult=o}static[j]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var li=class{static{s(this,"PgDatabase")}constructor(e,r,n){if(this.dialect=e,this.session=r,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,i]of Object.entries(this._.schema))this.query[o]=new xp(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[o],i,e,r);this.$cache={invalidate:s(async o=>{},"invalidate")}}static[j]="PgDatabase";query;$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(new Js(n.dialect))),new Proxy(new Ms(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");$count(e,r){return new Sp({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function n(d){return new Ar({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e})}s(n,"select");function o(d){return new Ar({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}s(o,"selectDistinct");function i(d,p){return new Ar({fields:p??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:d}})}s(i,"selectDistinctOn");function a(d){return new ru(d,r.session,r.dialect,e)}s(a,"update");function c(d){return new tu(d,r.session,r.dialect,e)}s(c,"insert");function l(d){return new eu(d,r.session,r.dialect,e)}return s(l,"delete_"),{select:n,selectDistinct:o,selectDistinctOn:i,update:a,insert:c,delete:l}}select(e){return new Ar({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Ar({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Ar({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new ru(e,this.session,this.dialect)}insert(e){return new tu(e,this.session,this.dialect)}delete(e){return new eu(e,this.session,this.dialect)}refreshMaterializedView(e){return new wp(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?M.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(n,void 0,void 0,!1);return new Ep(()=>o.execute(void 0,this.authToken),r,n,i=>o.mapResult(i,!0))}transaction(e,r){return this.session.transaction(e,r)}};var wv=class{static{s(this,"Cache")}static[j]="Cache"},di=class extends wv{static{s(this,"NoopCache")}strategy(){return"all"}static[j]="NoopCache";async get(e){}async put(e,r,n,o){}async onMutate(e){}};async function Sv(t,e){let r=`${t}-${JSON.stringify(e)}`,o=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",o);return[...new Uint8Array(i)].map(l=>l.toString(16).padStart(2,"0")).join("")}s(Sv,"hashQuery");var Gs=class{static{s(this,"PgPreparedQuery")}constructor(e,r,n,o){this.query=e,this.cache=r,this.queryMetadata=n,this.cacheConfig=o,r&&r.strategy()==="all"&&o===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[j]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,n){if(this.cache===void 0||Y(this.cache,di)||this.queryMetadata===void 0)try{return await n()}catch(o){throw new Co(e,r,o)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(o){throw new Co(e,r,o)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[o]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return o}catch(o){throw new Co(e,r,o)}if(!this.cacheConfig)try{return await n()}catch(o){throw new Co(e,r,o)}if(this.queryMetadata.type==="select"){let o=await this.cache.get(this.cacheConfig.tag??await Sv(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(o===void 0){let i;try{i=await n()}catch(a){throw new Co(e,r,a)}return await this.cache.put(this.cacheConfig.tag??await Sv(e,r),i,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),i}return o}try{return await n()}catch(o){throw new Co(e,r,o)}}},Ks=class{static{s(this,"PgSession")}constructor(e){this.dialect=e}static[j]="PgSession";execute(e,r){return cr.startActiveSpan("drizzle.operation",()=>cr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let n=await this.execute(e,r);return Number(n[0].count)}},Ws=class extends li{static{s(this,"PgTransaction")}constructor(e,r,n,o=0){super(e,r,n),this.schema=n,this.nestedIndex=o}static[j]="PgTransaction";rollback(){throw new Kd}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),M.raw(r.join(" "))}setTransaction(e){return this.session.execute(M`set transaction ${this.getTransactionConfigSQL(e)}`)}};var kp={arrayMode:!1,fullResults:!0},xv={arrayMode:!0,fullResults:!0},Tv=class extends Gs{static{s(this,"NeonHttpPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d){super(r,o,i,a),this.client=e,this.logger=n,this.fields=c,this._isResponseInArrayMode=l,this.customResultMapper=d,this.clientQuery=e.query??e}static[j]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let n=si(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:o,clientQuery:i,query:a,customResultMapper:c}=this;if(!o&&!c)return this.queryWithCache(a.sql,n,async()=>i(a.sql,n,r===void 0?kp:{...kp,authToken:r}));let l=await this.queryWithCache(a.sql,n,async()=>await i(a.sql,n,r===void 0?xv:{...xv,authToken:r}));return this.mapResult(l)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(n=>Wd(this.fields,n,this.joinsNotNullableMap))}all(e={}){let r=si(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?kp:{...kp,authToken:this.authToken}).then(n=>n.rows)}values(e={},r){let n=si(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:r}).then(o=>o.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Ip=class extends Ks{static{s(this,"NeonHttpSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.clientQuery=e.query??e,this.logger=o.logger??new Ls,this.cache=o.cache??new di}static[j]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,n,o,i,a,c){return new Tv(this.client,e,this.logger,this.cache,a,c,r,o,i)}async batch(e){let r=[],n=[];for(let i of e){let a=i._prepare(),c=a.getQuery();r.push(a),n.push(this.clientQuery(c.sql,c.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(n,xv)).map((i,a)=>r[a].mapResult(i,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let n=await this.execute(e,r);return Number(n.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},vA=class extends Ws{static{s(this,"NeonTransaction")}static[j]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}};var Ev=class{static{s(this,"NeonHttpDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n,this.initMappers()}static[j]="NeonHttpDriver";createSession(e){return new Ip(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){Mt.setTypeParser(Mt.builtins.TIMESTAMPTZ,e=>e),Mt.setTypeParser(Mt.builtins.TIMESTAMP,e=>e),Mt.setTypeParser(Mt.builtins.DATE,e=>e),Mt.setTypeParser(Mt.builtins.INTERVAL,e=>e),Mt.setTypeParser(1231,e=>e),Mt.setTypeParser(1115,e=>e),Mt.setTypeParser(1185,e=>e),Mt.setTypeParser(1187,e=>e),Mt.setTypeParser(1182,e=>e)}};function Pp(t,e,r,n){return new Proxy(t,{get(o,i){let a=o[i];return typeof a!="function"&&(typeof a!="object"||a===null)?a:n?Pp(a,e,r):i==="query"?Pp(a,e,r,!0):new Proxy(a,{apply(c,l,d){let p=c.call(l,...d);return typeof p=="object"&&p!==null&&"setToken"in p&&typeof p.setToken=="function"&&p.setToken(e),r(c,i,p)}})}})}s(Pp,"wrap");var kv=class extends li{static{s(this,"NeonHttpDatabase")}static[j]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,Pp(this,e,(r,n,o)=>n==="with"?Pp(o,e,(i,a,c)=>c):o)}async batch(e){return this.session.batch(e)}};function Qs(t,e={}){let r=new ro({casing:e.casing}),n;e.logger===!0?n=new Us:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=op(e.schema,ip);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new Ev(t,r,{logger:n,cache:e.cache}).createSession(o),c=new kv(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}s(Qs,"construct");function Ap(...t){if(typeof t[0]=="string"){let e=ui(t[0]);return Qs(e,t[1])}if(Xd(t[0])){let{connection:e,client:r,...n}=t[0];if(r)return Qs(r,n);if(typeof e=="object"){let{connectionString:i,...a}=e,c=ui(i,a);return Qs(c,n)}let o=ui(e);return Qs(o,n)}return Qs(t[0],t[1])}s(Ap,"drizzle");(t=>{function e(r){return Qs({},r)}s(e,"mock"),t.mock=e})(Ap||(Ap={}));var Iv=class extends Gs{static{s(this,"NeonPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d,p,m){super({sql:r,params:n},i,a,c),this.client=e,this.params=n,this.logger=o,this.fields=l,this._isResponseInArrayMode=p,this.customResultMapper=m,this.rawQueryConfig={name:d,text:r,types:{getTypeParser:s((h,y)=>h===Mt.builtins.TIMESTAMPTZ?g=>g:h===Mt.builtins.TIMESTAMP?g=>g:h===Mt.builtins.DATE?g=>g:h===Mt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Mt.getTypeParser(h,y),"getTypeParser")}},this.queryConfig={name:d,text:r,rowMode:"array",types:{getTypeParser:s((h,y)=>h===Mt.builtins.TIMESTAMPTZ?g=>g:h===Mt.builtins.TIMESTAMP?g=>g:h===Mt.builtins.DATE?g=>g:h===Mt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Mt.getTypeParser(h,y),"getTypeParser")}}}static[j]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let r=si(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:n,client:o,rawQueryConfig:i,queryConfig:a,joinsNotNullableMap:c,customResultMapper:l}=this;if(!n&&!l)return await this.queryWithCache(i.text,r,async()=>await o.query(i,r));let d=await this.queryWithCache(a.text,r,async()=>await o.query(a,r));return l?l(d.rows):d.rows.map(p=>Wd(n,p,c))}all(e={}){let r=si(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.rawQueryConfig.text,r,async()=>await this.client.query(this.rawQueryConfig,r)).then(n=>n.rows)}values(e={}){let r=si(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.queryConfig.text,r,async()=>await this.client.query(this.queryConfig,r)).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Cp=class t extends Ks{static{s(this,"NeonSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.logger=o.logger??new Ls,this.cache=o.cache??new di}static[j]="NeonSession";logger;cache;prepareQuery(e,r,n,o,i,a,c){return new Iv(this.client,e.sql,e.params,this.logger,this.cache,a,c,r,n,o,i)}async query(e,r){return this.logger.logQuery(e,r),await this.client.query({rowMode:"array",text:e,values:r})}async queryObjects(e,r){return this.client.query(e,r)}async count(e){let r=await this.execute(e);return Number(r.rows[0].count)}async transaction(e,r={}){let n=this.client instanceof No?new t(await this.client.connect(),this.dialect,this.schema,this.options):this,o=new Pv(this.dialect,n,this.schema);await o.execute(M`begin ${o.getTransactionConfigSQL(r)}`);try{let i=await e(o);return await o.execute(M`commit`),i}catch(i){throw await o.execute(M`rollback`),i}finally{this.client instanceof No&&n.client.release()}}},Pv=class t extends Ws{static{s(this,"NeonTransaction")}static[j]="NeonTransaction";async transaction(e){let r=`sp${this.nestedIndex+1}`,n=new t(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(M.raw(`savepoint ${r}`));try{let o=await e(n);return await n.execute(M.raw(`release savepoint ${r}`)),o}catch(o){throw await n.execute(M.raw(`rollback to savepoint ${r}`)),o}}};var Av=class{static{s(this,"NeonDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n}static[j]="NeonDriver";createSession(e){return new Cp(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}},Cv=class extends li{static{s(this,"NeonDatabase")}static[j]="NeonServerlessDatabase"};function nu(t,e={}){let r=new ro({casing:e.casing}),n;e.logger===!0?n=new Us:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=op(e.schema,ip);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new Av(t,r,{logger:n,cache:e.cache}).createSession(o),c=new Cv(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}s(nu,"construct");function Op(...t){if(typeof t[0]=="string"){let e=new No({connectionString:t[0]});return nu(e,t[1])}if(Xd(t[0])){let{connection:e,client:r,ws:n,...o}=t[0];if(n&&(rs.webSocketConstructor=n),r)return nu(r,o);let i=typeof e=="string"?new No({connectionString:e}):new No(e);return nu(i,o)}return nu(t[0],t[1])}s(Op,"drizzle");(t=>{function e(r){return nu({},r)}s(e,"mock"),t.mock=e})(Op||(Op={}));var Np={};vn(Np,{accountBalanceHistory:()=>ta,accountBalanceHistoryRelations:()=>AA,aiInsights:()=>vr,aiInsightsRelations:()=>ZA,alertRules:()=>oa,alertRulesRelations:()=>XA,auditLogs:()=>pi,auditLogsRelations:()=>eC,bankAccounts:()=>se,bankAccountsRelations:()=>PA,bankSyncLogs:()=>mi,bankSyncLogsRelations:()=>CA,boletoPayments:()=>fi,boletoPaymentsRelations:()=>BA,boletoStatusEnum:()=>_A,boletos:()=>no,boletosRelations:()=>FA,budgetCategories:()=>yi,budgetCategoriesRelations:()=>GA,chatMessages:()=>ca,chatMessagesRelations:()=>WA,chatSessions:()=>io,chatSessionsRelations:()=>KA,collectionMethodEnum:()=>Rv,commandIntents:()=>TA,complianceAuditLogs:()=>en,complianceAuditLogsRelations:()=>dC,complianceEventTypeEnum:()=>Lv,consentTemplates:()=>Yr,consentTemplatesRelations:()=>iC,consentTypeEnum:()=>$p,contactPaymentMethods:()=>ra,contactPaymentMethodsRelations:()=>qA,contacts:()=>Ce,contactsRelations:()=>LA,dataDeletionRequests:()=>Rr,dataDeletionRequestsRelations:()=>cC,dataExportRequests:()=>ea,dataExportRequestsRelations:()=>oC,dataRetentionPolicies:()=>Rp,dataRetentionPoliciesRelations:()=>aC,deletionRequestStatusEnum:()=>Dv,deletionRequestTypeEnum:()=>Nv,errorLogs:()=>ss,errorLogsRelations:()=>tC,eventReminders:()=>hi,eventRemindersRelations:()=>jA,eventTypes:()=>as,eventTypesRelations:()=>NA,exportFormatEnum:()=>Mv,exportRequestTypeEnum:()=>jv,exportStatusEnum:()=>zv,financialEvents:()=>dt,financialEventsRelations:()=>DA,legalHolds:()=>na,legalHoldsRelations:()=>pC,lgpdConsentLogs:()=>Ys,lgpdConsentLogsRelations:()=>nC,lgpdConsents:()=>At,lgpdConsentsRelations:()=>sC,lgpdExportRequests:()=>Nn,lgpdExportRequestsRelations:()=>uC,limitTypeEnum:()=>Uv,notificationLogs:()=>ia,notificationLogsRelations:()=>YA,notifications:()=>Do,notificationsRelations:()=>QA,paymentHistory:()=>or,paymentHistoryRelations:()=>hC,paymentMethodTypeEnum:()=>bA,paymentStatusEnum:()=>$v,pixKeyTypeEnum:()=>wA,pixKeys:()=>sa,pixKeysRelations:()=>MA,pixQrCodes:()=>jo,pixQrCodesRelations:()=>zA,pixTransactionStatusEnum:()=>SA,pixTransactionTypeEnum:()=>xA,pixTransactions:()=>oo,pixTransactionsRelations:()=>UA,spendingPatterns:()=>gi,spendingPatternsRelations:()=>JA,subscriptionPlans:()=>$r,subscriptionPlansRelations:()=>mC,subscriptionStatusEnum:()=>Ov,subscriptions:()=>tt,subscriptionsRelations:()=>fC,transactionCategories:()=>Re,transactionCategoriesRelations:()=>OA,transactionLimits:()=>xr,transactionLimitsRelations:()=>lC,transactionSchedules:()=>Ut,transactionSchedulesRelations:()=>RA,transactions:()=>re,transactionsRelations:()=>$A,userPreferences:()=>Xr,userPreferencesRelations:()=>kA,userSecurity:()=>is,userSecurityRelations:()=>IA,userSessions:()=>Xs,userSessionsRelations:()=>rC,users:()=>K,usersRelations:()=>EA,voiceCommands:()=>aa,voiceCommandsRelations:()=>VA,voiceTranscriptions:()=>ua,voiceTranscriptionsRelations:()=>HA});var K=ke("users",{id:A("id").primaryKey(),email:A("email").unique().notNull(),fullName:A("full_name"),phone:A("phone"),cpf:A("cpf").unique(),birthDate:Ir("birth_date"),autonomyLevel:wt("autonomy_level").default(50),voiceCommandEnabled:ge("voice_command_enabled").default(!0),language:A("language").default("pt-BR"),timezone:A("timezone").default("America/Sao_Paulo"),currency:A("currency").default("BRL"),profileImageUrl:A("profile_image_url"),isActive:ge("is_active").default(!0),lastLogin:G("last_login",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),Xr=ke("user_preferences",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),theme:A("theme").default("system"),notificationsEmail:ge("notifications_email").default(!0),notificationsPush:ge("notifications_push").default(!0),notificationsSms:ge("notifications_sms").default(!1),autoCategorize:ge("auto_categorize").default(!0),budgetAlerts:ge("budget_alerts").default(!0),voiceFeedback:ge("voice_feedback").default(!0),accessibilityHighContrast:ge("accessibility_high_contrast").default(!1),accessibilityLargeText:ge("accessibility_large_text").default(!1),accessibilityScreenReader:ge("accessibility_screen_reader").default(!1),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),is=ke("user_security",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),biometricEnabled:ge("biometric_enabled").default(!1),twoFactorEnabled:ge("two_factor_enabled").default(!1),twoFactorSecret:A("two_factor_secret"),voiceBiometricEnabled:ge("voice_biometric_enabled").default(!1),voiceSampleEncrypted:A("voice_sample_encrypted"),sessionTimeoutMinutes:wt("session_timeout_minutes").default(30),maxFailedAttempts:wt("max_failed_attempts").default(5),lockedUntil:G("locked_until",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var pi=ke("audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),action:A("action").notNull(),resourceType:A("resource_type"),resourceId:A("resource_id"),oldValues:it("old_values"),newValues:it("new_values"),ipAddress:an("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),success:ge("success").default(!0),errorMessage:A("error_message"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),ss=ke("error_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),errorType:A("error_type").notNull(),errorCode:A("error_code"),errorMessage:A("error_message").notNull(),stackTrace:A("stack_trace"),context:it("context"),userAgent:A("user_agent"),ipAddress:an("ip_address"),sessionId:A("session_id"),isResolved:ge("is_resolved").default(!1),resolvedAt:G("resolved_at",{withTimezone:!0}),resolvedBy:A("resolved_by").references(()=>K.id),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),Xs=ke("user_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),sessionToken:A("session_token").unique().notNull(),deviceType:A("device_type"),deviceId:A("device_id"),ipAddress:an("ip_address"),userAgent:A("user_agent"),isActive:ge("is_active").default(!0),lastActivity:G("last_activity",{withTimezone:!0}).defaultNow(),expiresAt:G("expires_at",{withTimezone:!0}).notNull(),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),Ys=ke("lgpd_consent_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),consentType:A("consent_type").notNull(),consentGiven:ge("consent_given").notNull(),consentVersion:A("consent_version").notNull(),ipAddress:an("ip_address"),userAgent:A("user_agent"),consentedAt:G("consented_at",{withTimezone:!0}).defaultNow(),revokedAt:G("revoked_at",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),ea=ke("data_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),requestType:A("request_type").notNull(),status:A("status").default("pending"),processedAt:G("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),expiresAt:G("expires_at",{withTimezone:!0}),ipAddress:an("ip_address"),userAgent:A("user_agent"),requestedAt:G("requested_at",{withTimezone:!0}).defaultNow(),createdAt:G("created_at",{withTimezone:!0}).defaultNow()});var se=ke("bank_accounts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),belvoAccountId:A("belvo_account_id").unique().notNull(),institutionId:A("institution_id").notNull(),institutionName:A("institution_name").notNull(),accountType:A("account_type").notNull(),accountNumber:A("account_number"),accountMask:A("account_mask").notNull(),accountHolderName:A("account_holder_name"),balance:st("balance",{precision:15,scale:2}).default("0"),availableBalance:st("available_balance",{precision:15,scale:2}).default("0"),currency:A("currency").default("BRL"),isActive:ge("is_active").default(!0),isPrimary:ge("is_primary").default(!1),lastSync:G("last_sync",{withTimezone:!0}),syncStatus:A("sync_status").default("pending"),syncErrorMessage:A("sync_error_message"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),ta=ke("account_balance_history",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),accountId:A("account_id").references(()=>se.id,{onDelete:"cascade"}),balance:st("balance",{precision:15,scale:2}).notNull(),availableBalance:st("available_balance",{precision:15,scale:2}),recordedAt:G("recorded_at",{withTimezone:!0}).defaultNow(),source:A("source").default("sync")}),mi=ke("bank_sync_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"cascade"}),syncType:A("sync_type").notNull(),status:A("status").notNull(),recordsSynced:wt("records_synced").default(0),errorMessage:A("error_message"),startedAt:G("started_at",{withTimezone:!0}).defaultNow(),completedAt:G("completed_at",{withTimezone:!0}),durationMs:wt("duration_ms")});var Ov=rr("subscription_status",["free","trialing","active","past_due","canceled","unpaid"]),$v=rr("payment_status",["succeeded","failed","pending"]),$r=ke("subscription_plans",{id:A("id").primaryKey(),name:A("name").notNull(),description:A("description"),priceCents:wt("price_cents").notNull().default(0),currency:A("currency").notNull().default("BRL"),interval:A("interval"),stripeProductId:A("stripe_product_id"),stripePriceId:A("stripe_price_id"),features:it("features").$type().default([]),aiModels:it("ai_models").$type().default([]),maxBankAccounts:wt("max_bank_accounts").default(1),maxTransactionsPerMonth:wt("max_transactions_per_month"),isActive:ge("is_active").default(!0),displayOrder:wt("display_order").default(0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),tt=ke("subscriptions",{id:qs("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().unique().references(()=>K.id,{onDelete:"cascade"}),stripeCustomerId:A("stripe_customer_id"),stripeSubscriptionId:A("stripe_subscription_id").unique(),planId:A("plan_id").notNull().default("free").references(()=>$r.id),status:Ov("status").notNull().default("free"),currentPeriodStart:G("current_period_start",{withTimezone:!0}),currentPeriodEnd:G("current_period_end",{withTimezone:!0}),cancelAtPeriodEnd:ge("cancel_at_period_end").default(!1),canceledAt:G("canceled_at",{withTimezone:!0}),trialStart:G("trial_start",{withTimezone:!0}),trialEnd:G("trial_end",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),or=ke("payment_history",{id:qs("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().references(()=>K.id,{onDelete:"cascade"}),subscriptionId:qs("subscription_id").references(()=>tt.id,{onDelete:"set null"}),stripePaymentIntentId:A("stripe_payment_intent_id"),stripeInvoiceId:A("stripe_invoice_id"),stripeChargeId:A("stripe_charge_id"),amountCents:wt("amount_cents").notNull(),currency:A("currency").notNull().default("BRL"),status:$v("status").notNull(),description:A("description"),receiptUrl:A("receipt_url"),invoicePdf:A("invoice_pdf"),failureCode:A("failure_code"),failureMessage:A("failure_message"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()});var Re=ke("transaction_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),name:A("name").notNull(),color:A("color").default("#6B7280"),icon:A("icon").default("circle"),isSystem:ge("is_system").default(!1),parentId:A("parent_id"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),re=ke("transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>Re.id,{onDelete:"set null"}),amount:st("amount",{precision:15,scale:2}).notNull(),originalAmount:st("original_amount",{precision:15,scale:2}),currency:A("currency").default("BRL"),description:A("description").notNull(),merchantName:A("merchant_name"),transactionDate:G("transaction_date",{withTimezone:!0}).notNull(),postedDate:G("posted_date",{withTimezone:!0}),transactionType:A("transaction_type").notNull(),paymentMethod:A("payment_method"),status:A("status").default("posted"),isRecurring:ge("is_recurring").default(!1),recurringRule:it("recurring_rule"),tags:A("tags").array(),notes:A("notes"),attachments:A("attachments").array(),confidenceScore:st("confidence_score",{precision:3,scale:2}),isCategorized:ge("is_categorized").default(!1),isManualEntry:ge("is_manual_entry").default(!1),externalId:A("external_id"),externalSource:A("external_source"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),Ut=ke("transaction_schedules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>Re.id,{onDelete:"set null"}),amount:st("amount",{precision:15,scale:2}).notNull(),description:A("description").notNull(),recipientName:A("recipient_name"),recipientAccount:A("recipient_account"),recipientPixKey:A("recipient_pix_key"),scheduledDate:Ir("scheduled_date").notNull(),recurrenceRule:A("recurrence_rule"),isActive:ge("is_active").default(!0),autoExecute:ge("auto_execute").default(!1),notificationSent:ge("notification_sent").default(!1),executed:ge("executed").default(!1),executedTransactionId:A("executed_transaction_id").references(()=>re.id),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var _A=rr("boleto_status",["pending","paid","overdue","cancelled","scheduled"]),no=ke("boletos",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),barcode:A("barcode").unique().notNull(),lineIdDigitable:A("line_id_digitable").unique().notNull(),amount:st("amount",{precision:15,scale:2}).notNull(),dueDate:Ir("due_date").notNull(),beneficiaryName:A("beneficiary_name").notNull(),beneficiaryCnpj:A("beneficiary_cnpj"),description:A("description"),status:A("status").default("pending"),paymentDate:G("payment_date",{withTimezone:!0}),paidAmount:st("paid_amount",{precision:15,scale:2}),paidWith:A("paid_with"),transactionId:A("transaction_id").references(()=>re.id),fineAmount:st("fine_amount",{precision:15,scale:2}).default("0"),interestAmount:st("interest_amount",{precision:15,scale:2}).default("0"),discountAmount:st("discount_amount",{precision:15,scale:2}).default("0"),pdfUrl:A("pdf_url"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),fi=ke("boleto_payments",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),boletoId:A("boleto_id").references(()=>no.id,{onDelete:"cascade"}),amount:st("amount",{precision:15,scale:2}).notNull(),paymentDate:G("payment_date",{withTimezone:!0}).defaultNow(),paymentMethod:A("payment_method").notNull(),transactionId:A("transaction_id").references(()=>re.id),status:A("status").default("processing"),externalId:A("external_id"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()});var as=ke("event_types",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:A("name").unique().notNull(),description:A("description"),color:A("color").default("#3B82F6"),icon:A("icon").default("calendar"),isSystem:ge("is_system").default(!0),defaultReminderHours:wt("default_reminder_hours").default(24),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),dt=ke("financial_events",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>Re.id,{onDelete:"set null"}),eventTypeId:A("event_type_id").references(()=>as.id,{onDelete:"set null"}),title:A("title").notNull(),description:A("description"),amount:st("amount",{precision:15,scale:2}).notNull(),status:A("status").notNull().default("pending"),startDate:G("start_date",{withTimezone:!0}).notNull(),endDate:G("end_date",{withTimezone:!0}).notNull(),allDay:ge("all_day").default(!1),color:A("color").notNull().default("blue"),icon:A("icon"),isIncome:ge("is_income").default(!1),isCompleted:ge("is_completed").default(!1),isRecurring:ge("is_recurring").default(!1),recurrenceRule:A("recurrence_rule"),parentEventId:A("parent_event_id"),location:A("location"),notes:A("notes"),dueDate:Ir("due_date"),completedAt:G("completed_at",{withTimezone:!0}),priority:A("priority").default("normal"),tags:A("tags").array(),attachments:A("attachments").array(),brazilianEventType:A("brazilian_event_type"),installmentInfo:it("installment_info"),merchantCategory:A("merchant_category"),metadata:it("metadata"),transactionId:A("transaction_id").references(()=>re.id,{onDelete:"set null"}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),hi=ke("event_reminders",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),eventId:A("event_id").references(()=>dt.id,{onDelete:"cascade"}),remindAt:G("remind_at",{withTimezone:!0}).notNull(),reminderType:A("reminder_type").default("notification"),message:A("message"),isSent:ge("is_sent").default(!1),sentAt:G("sent_at",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var bA=rr("payment_method_type",["PIX","BANK_ACCOUNT","BOLETO"]),Ce=ke("contacts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),name:A("name").notNull(),email:A("email"),phone:A("phone"),cpf:A("cpf"),cnpj:A("cnpj"),notes:A("notes"),isFavorite:ge("is_favorite").default(!1),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),ra=ke("contact_payment_methods",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),contactId:A("contact_id").references(()=>Ce.id,{onDelete:"cascade"}),methodType:A("method_type").notNull(),methodDetails:it("method_details").notNull(),isDefault:ge("is_default").default(!1),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var $p=rr("consent_type",["data_processing","marketing","analytics","third_party","third_party_sharing","voice_data","voice_recording","biometric","financial_data","location","open_banking"]),Rv=rr("collection_method",["signup","settings","settings_toggle","prompt","api","import","explicit_form","terms_acceptance","voice_command"]),Nv=rr("deletion_request_type",["full_account","full_deletion","specific_data","anonymization","partial_deletion","consent_withdrawal"]),Dv=rr("deletion_request_status",["pending","verified","approved","processing","completed","rejected","cancelled"]),jv=rr("export_request_type",["full_data","full_export","transactions","profile","consents","audit_logs","financial_only","voice_commands","specific_period"]),Mv=rr("export_format",["json","csv","pdf"]),zv=rr("export_status",["pending","processing","completed","failed","expired"]),Uv=rr("limit_type",["pix_daily","pix_daytime","pix_nighttime","pix_transaction","pix_total_daily","boleto_daily","ted_daily","transfer_daily","withdrawal_daily","total_daily","total_monthly"]),Lv=rr("compliance_event_type",["consent_granted","consent_revoked","data_export_requested","data_export_completed","data_deletion_requested","data_deletion_completed","data_accessed","data_modified","limit_updated","policy_acknowledged"]),Yr=ke("consent_templates",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),consentType:$p("consent_type").notNull(),version:A("version").notNull().default("1.0"),titlePt:A("title_pt").notNull(),descriptionPt:A("description_pt").notNull(),fullTextPt:A("full_text_pt").notNull(),titleEn:A("title_en"),descriptionEn:A("description_en"),fullTextEn:A("full_text_en"),isMandatory:ge("is_mandatory").default(!1),isActive:ge("is_active").default(!0),legalBasis:A("legal_basis"),effectiveFrom:G("effective_from",{withTimezone:!0}).defaultNow(),effectiveUntil:G("effective_until",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),At=ke("lgpd_consents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),consentType:$p("consent_type").notNull(),purpose:A("purpose").notNull(),legalBasis:A("legal_basis").notNull(),granted:ge("granted").notNull().default(!1),grantedAt:G("granted_at",{withTimezone:!0}),revokedAt:G("revoked_at",{withTimezone:!0}),consentVersion:A("consent_version").notNull(),consentTextHash:A("consent_text_hash"),collectionMethod:Rv("collection_method").notNull(),ipAddress:an("ip_address"),userAgent:A("user_agent"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()},t=>[vv("lgpd_consents_user_type_version_idx").on(t.userId,t.consentType,t.consentVersion)]),Rp=ke("data_retention_policies",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),dataType:A("data_type").notNull().unique(),description:A("description"),descriptionPt:A("description_pt"),retentionMonths:wt("retention_months").notNull(),retentionPeriodLabel:A("retention_period_label"),autoDelete:ge("auto_delete").default(!1),deletionMethod:A("deletion_method").default("hard_delete"),legalHold:ge("legal_hold").default(!1),legalBasis:A("legal_basis"),legalRequirement:ge("legal_requirement").default(!1),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),Rr=ke("data_deletion_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),requestType:Nv("request_type").notNull(),scope:it("scope").default({}),reason:A("reason"),status:Dv("status").default("pending"),verificationCode:A("verification_code"),verifiedAt:G("verified_at",{withTimezone:!0}),reviewDeadline:G("review_deadline",{withTimezone:!0}),processedAt:G("processed_at",{withTimezone:!0}),processedBy:A("processed_by"),processingNotes:A("processing_notes"),legalHold:ge("legal_hold").default(!1),legalHoldReason:A("legal_hold_reason"),ipAddress:an("ip_address"),userAgent:A("user_agent"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),Nn=ke("lgpd_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),requestType:jv("request_type").notNull(),format:Mv("format").default("json"),dateFrom:Ir("date_from"),dateTo:Ir("date_to"),status:zv("status").default("pending"),processedAt:G("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),downloadExpiresAt:G("download_expires_at",{withTimezone:!0}),fileSizeBytes:wt("file_size_bytes"),errorMessage:A("error_message"),retryCount:wt("retry_count").default(0),requestedVia:A("requested_via").default("app"),ipAddress:an("ip_address"),userAgent:A("user_agent"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),xr=ke("transaction_limits",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),limitType:Uv("limit_type").notNull(),dailyLimit:st("daily_limit",{precision:15,scale:2}).notNull(),transactionLimit:st("transaction_limit",{precision:15,scale:2}),monthlyLimit:st("monthly_limit",{precision:15,scale:2}),currentDailyUsed:st("current_daily_used",{precision:15,scale:2}).default("0"),currentMonthlyUsed:st("current_monthly_used",{precision:15,scale:2}).default("0"),lastResetAt:G("last_reset_at",{withTimezone:!0}).defaultNow(),nighttimeLimit:st("nighttime_limit",{precision:15,scale:2}),nighttimeStart:A("nighttime_start").default("20:00"),nighttimeEnd:A("nighttime_end").default("06:00"),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()},t=>[vv("transaction_limits_user_type_idx").on(t.userId,t.limitType)]),en=ke("compliance_audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"set null"}),eventType:Lv("event_type").notNull(),resourceType:A("resource_type").notNull(),resourceId:A("resource_id"),description:A("description"),metadata:it("metadata").default({}),previousState:it("previous_state"),newState:it("new_state"),ipAddress:an("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),retentionUntil:G("retention_until",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),na=ke("legal_holds",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),reason:A("reason").notNull(),description:A("description"),referenceNumber:A("reference_number"),dataTypes:it("data_types").default([]),allData:ge("all_data").default(!1),active:ge("active").default(!0),startedAt:G("started_at",{withTimezone:!0}).defaultNow(),expiresAt:G("expires_at",{withTimezone:!0}),releasedAt:G("released_at",{withTimezone:!0}),releasedBy:A("released_by"),releaseReason:A("release_reason"),createdBy:A("created_by").notNull(),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var Do=ke("notifications",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),title:A("title").notNull(),message:A("message").notNull(),type:A("type").notNull(),category:A("category"),priority:A("priority").default("normal"),isRead:ge("is_read").default(!1),readAt:G("read_at",{withTimezone:!0}),actionUrl:A("action_url"),actionText:A("action_text"),metadata:it("metadata"),expiresAt:G("expires_at",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),oa=ke("alert_rules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),ruleName:A("rule_name").notNull(),ruleType:A("rule_type").notNull(),conditions:it("conditions").notNull(),actions:it("actions").notNull(),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),ia=ke("notification_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),notificationId:A("notification_id").references(()=>Do.id,{onDelete:"cascade"}),deliveryMethod:A("delivery_method").notNull(),status:A("status").notNull(),sentAt:G("sent_at",{withTimezone:!0}).defaultNow(),deliveredAt:G("delivered_at",{withTimezone:!0}),errorMessage:A("error_message"),externalId:A("external_id"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()});var wA=rr("pix_key_type",["CPF","CNPJ","EMAIL","PHONE","RANDOM"]),SA=rr("pix_transaction_status",["pending","processing","completed","failed","cancelled","reversed"]),xA=rr("pix_transaction_type_enum",["sent","received","scheduled"]),sa=ke("pix_keys",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),keyType:A("key_type").notNull(),keyValue:A("key_value").notNull(),keyName:A("key_name").notNull(),bankName:A("bank_name"),isFavorite:ge("is_favorite").default(!1),isActive:ge("is_active").default(!0),verificationStatus:A("verification_status").default("pending"),lastUsed:G("last_used",{withTimezone:!0}),usageCount:wt("usage_count").default(0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),jo=ke("pix_qr_codes",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),qrCodeData:A("qr_code_data").notNull(),pixCopyPaste:A("pix_copy_paste").notNull(),amount:st("amount",{precision:15,scale:2}),description:A("description"),recipientName:A("recipient_name"),recipientPixKey:A("recipient_pix_key"),expiresAt:G("expires_at",{withTimezone:!0}),isActive:ge("is_active").default(!0),isSingleUse:ge("is_single_use").default(!1),usageCount:wt("usage_count").default(0),maxUsage:wt("max_usage"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),oo=ke("pix_transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),transactionId:A("transaction_id").references(()=>re.id,{onDelete:"set null"}),endToEndId:A("end_to_end_id").unique(),pixKey:A("pix_key").notNull(),pixKeyType:A("pix_key_type").notNull(),recipientName:A("recipient_name").notNull(),recipientDocument:A("recipient_document"),recipientBank:A("recipient_bank"),amount:st("amount",{precision:15,scale:2}).notNull(),description:A("description"),transactionDate:G("transaction_date",{withTimezone:!0}).notNull(),status:A("status").default("pending"),transactionType:A("transaction_type").default("sent"),scheduledFor:G("scheduled_for",{withTimezone:!0}),processedAt:G("processed_at",{withTimezone:!0}),qrCodeId:A("qr_code_id").references(()=>jo.id),externalId:A("external_id"),errorMessage:A("error_message"),feeAmount:st("fee_amount",{precision:15,scale:2}).default("0"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()});var aa=ke("voice_commands",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),commandText:A("command_text").notNull(),audioFileUrl:A("audio_file_url"),intent:A("intent").notNull(),intentConfidence:st("intent_confidence",{precision:3,scale:2}),entities:it("entities"),responseText:A("response_text"),responseAudioUrl:A("response_audio_url"),processingTimeMs:wt("processing_time_ms"),status:A("status").default("processed"),errorMessage:A("error_message"),context:it("context"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),TA=ke("command_intents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),intentName:A("intent_name").unique().notNull(),description:A("description"),examplePhrases:A("example_phrases").array(),requiredEntities:A("required_entities").array(),actionHandler:A("action_handler"),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),vr=ke("ai_insights",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),insightType:A("insight_type").notNull(),title:A("title").notNull(),description:A("description").notNull(),recommendation:A("recommendation"),impactLevel:A("impact_level").default("medium"),categoryId:A("category_id").references(()=>Re.id),data:it("data"),isRead:ge("is_read").default(!1),isActioned:ge("is_actioned").default(!1),expiresAt:G("expires_at",{withTimezone:!0}),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),gi=ke("spending_patterns",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>Re.id),periodStart:Ir("period_start").notNull(),periodEnd:Ir("period_end").notNull(),periodType:A("period_type").notNull(),totalAmount:st("total_amount",{precision:15,scale:2}).notNull(),transactionCount:wt("transaction_count").notNull(),averageTransaction:st("average_transaction",{precision:15,scale:2}),trendPercentage:st("trend_percentage",{precision:5,scale:2}),patternData:it("pattern_data"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),yi=ke("budget_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>Re.id,{onDelete:"cascade"}),budgetAmount:st("budget_amount",{precision:15,scale:2}).notNull(),periodType:A("period_type").notNull(),alertThreshold:st("alert_threshold",{precision:5,scale:2}).default("80"),isActive:ge("is_active").default(!0),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),io=ke("chat_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),title:A("title"),isActive:ge("is_active").default(!0),metadata:it("metadata"),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),ca=ke("chat_messages",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:A("session_id").references(()=>io.id,{onDelete:"cascade"}),role:A("role").notNull(),content:A("content").notNull(),attachments:it("attachments"),context:it("context"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()}),ua=ke("voice_transcriptions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>K.id,{onDelete:"cascade"}),audioStoragePath:A("audio_storage_path").notNull(),transcript:A("transcript").notNull(),confidenceScore:st("confidence_score",{precision:3,scale:2}),language:A("language").notNull(),processingTimeMs:wt("processing_time_ms").notNull(),expiresAt:G("expires_at",{withTimezone:!0}).notNull(),createdAt:G("created_at",{withTimezone:!0}).defaultNow(),updatedAt:G("updated_at",{withTimezone:!0}).defaultNow()}),zwe=ke("chat_context_snapshots",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),conversationId:A("conversation_id").references(()=>io.id,{onDelete:"cascade"}),recentTransactions:it("recent_transactions"),accountBalances:it("account_balances"),upcomingEvents:it("upcoming_events"),userPreferences:it("user_preferences"),createdAt:G("created_at",{withTimezone:!0}).defaultNow()});var EA=qe(K,({one:t,many:e})=>({preferences:t(Xr,{fields:[K.id],references:[Xr.userId]}),security:t(is,{fields:[K.id],references:[is.userId]}),bankAccounts:e(se),transactionCategories:e(Re),transactions:e(re),transactionSchedules:e(Ut),financialEvents:e(dt),eventReminders:e(hi),pixKeys:e(sa),pixQrCodes:e(jo),pixTransactions:e(oo),contacts:e(Ce),boletos:e(no),voiceCommands:e(aa),voiceTranscriptions:e(ua),aiInsights:e(vr),spendingPatterns:e(gi),budgetCategories:e(yi),chatSessions:e(io),notifications:e(Do),alertRules:e(oa),auditLogs:e(pi),errorLogs:e(ss),userSessions:e(Xs),lgpdConsentLogs:e(Ys),dataExportRequests:e(ea),bankSyncLogs:e(mi),lgpdConsents:e(At),dataDeletionRequests:e(Rr),lgpdExportRequests:e(Nn),transactionLimits:e(xr),complianceAuditLogs:e(en),legalHolds:e(na),subscriptions:e(tt),paymentHistory:e(or)})),kA=qe(Xr,({one:t})=>({user:t(K,{fields:[Xr.userId],references:[K.id]})})),IA=qe(is,({one:t})=>({user:t(K,{fields:[is.userId],references:[K.id]})})),PA=qe(se,({one:t,many:e})=>({user:t(K,{fields:[se.userId],references:[K.id]}),balanceHistory:e(ta),syncLogs:e(mi),transactions:e(re),transactionSchedules:e(Ut),financialEvents:e(dt)})),AA=qe(ta,({one:t})=>({account:t(se,{fields:[ta.accountId],references:[se.id]})})),CA=qe(mi,({one:t})=>({user:t(K,{fields:[mi.userId],references:[K.id]}),account:t(se,{fields:[mi.accountId],references:[se.id]})})),OA=qe(Re,({one:t,many:e})=>({user:t(K,{fields:[Re.userId],references:[K.id]}),parent:t(Re,{fields:[Re.parentId],references:[Re.id],relationName:"categoryParent"}),children:e(Re,{relationName:"categoryParent"}),transactions:e(re),transactionSchedules:e(Ut),financialEvents:e(dt),aiInsights:e(vr),spendingPatterns:e(gi),budgetCategories:e(yi)})),$A=qe(re,({one:t,many:e})=>({user:t(K,{fields:[re.userId],references:[K.id]}),account:t(se,{fields:[re.accountId],references:[se.id]}),category:t(Re,{fields:[re.categoryId],references:[Re.id]}),pixTransactions:e(oo),boletoPayments:e(fi),financialEvents:e(dt)})),RA=qe(Ut,({one:t})=>({user:t(K,{fields:[Ut.userId],references:[K.id]}),account:t(se,{fields:[Ut.accountId],references:[se.id]}),category:t(Re,{fields:[Ut.categoryId],references:[Re.id]}),executedTransaction:t(re,{fields:[Ut.executedTransactionId],references:[re.id]})})),NA=qe(as,({many:t})=>({financialEvents:t(dt)})),DA=qe(dt,({one:t,many:e})=>({user:t(K,{fields:[dt.userId],references:[K.id]}),account:t(se,{fields:[dt.accountId],references:[se.id]}),category:t(Re,{fields:[dt.categoryId],references:[Re.id]}),eventType:t(as,{fields:[dt.eventTypeId],references:[as.id]}),parentEvent:t(dt,{fields:[dt.parentEventId],references:[dt.id],relationName:"eventParent"}),childEvents:e(dt,{relationName:"eventParent"}),transaction:t(re,{fields:[dt.transactionId],references:[re.id]}),reminders:e(hi)})),jA=qe(hi,({one:t})=>({user:t(K,{fields:[hi.userId],references:[K.id]}),event:t(dt,{fields:[hi.eventId],references:[dt.id]})})),MA=qe(sa,({one:t})=>({user:t(K,{fields:[sa.userId],references:[K.id]})})),zA=qe(jo,({one:t,many:e})=>({user:t(K,{fields:[jo.userId],references:[K.id]}),pixTransactions:e(oo)})),UA=qe(oo,({one:t})=>({user:t(K,{fields:[oo.userId],references:[K.id]}),transaction:t(re,{fields:[oo.transactionId],references:[re.id]}),qrCode:t(jo,{fields:[oo.qrCodeId],references:[jo.id]})})),LA=qe(Ce,({one:t,many:e})=>({user:t(K,{fields:[Ce.userId],references:[K.id]}),paymentMethods:e(ra)})),qA=qe(ra,({one:t})=>({contact:t(Ce,{fields:[ra.contactId],references:[Ce.id]})})),FA=qe(no,({one:t,many:e})=>({user:t(K,{fields:[no.userId],references:[K.id]}),transaction:t(re,{fields:[no.transactionId],references:[re.id]}),payments:e(fi)})),BA=qe(fi,({one:t})=>({boleto:t(no,{fields:[fi.boletoId],references:[no.id]}),transaction:t(re,{fields:[fi.transactionId],references:[re.id]})})),VA=qe(aa,({one:t})=>({user:t(K,{fields:[aa.userId],references:[K.id]})})),HA=qe(ua,({one:t})=>({user:t(K,{fields:[ua.userId],references:[K.id]})})),ZA=qe(vr,({one:t})=>({user:t(K,{fields:[vr.userId],references:[K.id]}),category:t(Re,{fields:[vr.categoryId],references:[Re.id]})})),JA=qe(gi,({one:t})=>({user:t(K,{fields:[gi.userId],references:[K.id]}),category:t(Re,{fields:[gi.categoryId],references:[Re.id]})})),GA=qe(yi,({one:t})=>({user:t(K,{fields:[yi.userId],references:[K.id]}),category:t(Re,{fields:[yi.categoryId],references:[Re.id]})})),KA=qe(io,({one:t,many:e})=>({user:t(K,{fields:[io.userId],references:[K.id]}),messages:e(ca)})),WA=qe(ca,({one:t})=>({session:t(io,{fields:[ca.sessionId],references:[io.id]})})),QA=qe(Do,({one:t,many:e})=>({user:t(K,{fields:[Do.userId],references:[K.id]}),logs:e(ia)})),XA=qe(oa,({one:t})=>({user:t(K,{fields:[oa.userId],references:[K.id]})})),YA=qe(ia,({one:t})=>({notification:t(Do,{fields:[ia.notificationId],references:[Do.id]})})),eC=qe(pi,({one:t})=>({user:t(K,{fields:[pi.userId],references:[K.id]})})),tC=qe(ss,({one:t})=>({user:t(K,{fields:[ss.userId],references:[K.id]}),resolvedByUser:t(K,{fields:[ss.resolvedBy],references:[K.id],relationName:"resolvedByUser"})})),rC=qe(Xs,({one:t})=>({user:t(K,{fields:[Xs.userId],references:[K.id]})})),nC=qe(Ys,({one:t})=>({user:t(K,{fields:[Ys.userId],references:[K.id]})})),oC=qe(ea,({one:t})=>({user:t(K,{fields:[ea.userId],references:[K.id]})})),iC=qe(Yr,({many:t})=>({consents:t(At)})),sC=qe(At,({one:t})=>({user:t(K,{fields:[At.userId],references:[K.id]})})),aC=qe(Rp,()=>({})),cC=qe(Rr,({one:t})=>({user:t(K,{fields:[Rr.userId],references:[K.id]})})),uC=qe(Nn,({one:t})=>({user:t(K,{fields:[Nn.userId],references:[K.id]})})),lC=qe(xr,({one:t})=>({user:t(K,{fields:[xr.userId],references:[K.id]})})),dC=qe(en,({one:t})=>({user:t(K,{fields:[en.userId],references:[K.id]})})),pC=qe(na,({one:t})=>({user:t(K,{fields:[na.userId],references:[K.id]})})),mC=qe($r,({many:t})=>({subscriptions:t(tt)})),fC=qe(tt,({one:t,many:e})=>({user:t(K,{fields:[tt.userId],references:[K.id]}),plan:t($r,{fields:[tt.planId],references:[$r.id]}),paymentHistory:e(or)})),hC=qe(or,({one:t})=>({user:t(K,{fields:[or.userId],references:[K.id]}),subscription:t(tt,{fields:[or.subscriptionId],references:[tt.id]})}));var yC=s(()=>{let t=process.env.DATABASE_URL;if(!t)throw new Error("DATABASE_URL environment variable is not set");return t},"getPooledDatabaseUrl"),s5=s(()=>{let t=process.env.DATABASE_URL_UNPOOLED;return t||(console.warn("DATABASE_URL_UNPOOLED not set, using DATABASE_URL as fallback"),yC())},"getDirectDatabaseUrl"),a5=s(()=>{let t=ui(yC());return Ap(t,{schema:Np})},"createHttpClient"),qv=null,fr=s(()=>(qv||(qv=a5()),qv),"getHttpClient");var gC=null,Fv=null,c5=s(()=>(Fv||(gC=new No({connectionString:s5()}),Fv=Op(gC,{schema:Np})),Fv),"getPoolClient");var Bv=null,so=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Database client cannot be used in browser context");if(!Bv){if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL environment variable is not set");Bv=fr()}return Bv[e]}}),Vv=null,gSe=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Admin database client cannot be used in browser context");if(!Vv){if(!(process.env.DATABASE_URL_UNPOOLED??process.env.DATABASE_URL))throw new Error("DATABASE_URL_UNPOOLED or DATABASE_URL environment variable is not set");Vv=c5()}return Vv[e]}});async function vC(){let t=Date.now();try{return await so.execute(M`SELECT 1`),{status:"connected",latencyMs:Date.now()-t}}catch(e){return{status:"disconnected",latencyMs:Date.now()-t,error:e instanceof Error?e.message:"Unknown error"}}}s(vC,"checkDatabaseHealth");function _C(t){t.get("/api/ping",e=>e.json({message:"pong",timestamp:new Date().toISOString(),version:"1.0.0"})),t.get("/api/status",async e=>{let r=await vC(),n=r.status==="connected";return e.json({services:{database:r.status,databaseLatencyMs:r.latencyMs,trpc:"connected",auth:"connected"},status:n?"operational":"degraded",timestamp:new Date().toISOString(),...r.error&&{errors:{database:r.error}}})}),t.get("/api/health",async e=>{let r=await vC();return r.status!=="connected"?e.json({healthy:!1,database:r,timestamp:new Date().toISOString()},503):e.json({healthy:!0,database:r,timestamp:new Date().toISOString()})})}s(_C,"setupApiRoutes");Dp();function bC(t){t.get("/api/health",e=>e.json({environment:ou.NODE_ENV,memory:process.memoryUsage?.()||{},service:"aegiswallet-server",status:"ok",timestamp:new Date().toISOString(),uptime:process.uptime?.()||0}))}s(bC,"setupHealthRoute");Dp();var D5=process.env.VERCEL==="1"||process.env.VERCEL==="true";function i1(t){D5||(ou.IS_PRODUCTION?Promise.resolve().then(()=>(r1(),t1)).then(({serveStatic:e})=>{Promise.resolve().then(()=>(o1(),n1)).then(({htmlCache:r,staticAssetsCache:n})=>{t.use("/assets/*",n(),e({root:"./dist"})),t.use("/*.html",r(),e({root:"./dist"})),t.use("/*",r(),e({path:"./dist/index.html",rewriteRequestPath:s(o=>o,"rewriteRequestPath")}))})}):t.get("/*",e=>e.req.path.startsWith("/api/")?e.notFound():e.json({api:`http://localhost:${ou.PORT}`,frontend:"http://localhost:5173",message:"Development mode - Frontend served by Vite dev server",mode:"development"})))}s(i1,"setupStaticRoutes");var j5=300*1e3,s1=100,vi=new Map;function M5(){if(vi.size<=s1)return;let e=Array.from(vi.entries()).sort((r,n)=>r[1].lastAccess-n[1].lastAccess).slice(0,vi.size-s1);for(let[r]of e)vi.delete(r)}s(M5,"evictOldestCacheEntries");var zp=class{static{s(this,"FinancialContextService")}userId;constructor(e){this.userId=e}async getContext(e=!1){let r=this.userId,n=vi.get(r),o=Date.now();if(!e&&n&&n.expiresAt>o)return n.lastAccess=o,n.context;let i=await this.buildContext();return vi.set(r,{context:i,expiresAt:o+j5,lastAccess:o}),M5(),i}invalidateCache(){vi.delete(this.userId)}static clearAllCache(){vi.clear()}async buildContext(){let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),[o,i,a,c,l]=await Promise.all([this.getAccountBalances(),this.getMonthlyTotals(r,n),this.getCategorySpending(r,n),this.getPendingAlerts(),this.getUpcomingPayments(30)]),d=o.reduce((m,h)=>m+Number(h.balance||0),0),p=o.reduce((m,h)=>m+Number(h.availableBalance||0),0);return{totalBalance:d,availableBalance:p,monthlyIncome:i.income,monthlyExpenses:i.expenses,topCategories:a,pendingAlerts:c,upcomingPayments:l,lastUpdated:e}}async getAccountBalances(){return await so.select({id:se.id,balance:se.balance,availableBalance:se.availableBalance,institutionName:se.institutionName}).from(se).where(xe(Z(se.userId,this.userId),Z(se.isActive,!0)))}async getMonthlyTotals(e,r){let n=await so.select({transactionType:re.transactionType,total:sp(re.amount)}).from(re).where(xe(Z(re.userId,this.userId),dr(re.transactionDate,e),nr(re.transactionDate,r))).groupBy(re.transactionType),o=0,i=0;for(let a of n){let c=Math.abs(Number(a.total||0));a.transactionType==="credit"?o+=c:a.transactionType==="debit"&&(i+=c)}return{income:o,expenses:i}}async getCategorySpending(e,r){let n=await so.select({categoryId:re.categoryId,categoryName:Re.name,total:sp(re.amount)}).from(re).leftJoin(Re,Z(re.categoryId,Re.id)).where(xe(Z(re.userId,this.userId),Z(re.transactionType,"debit"),dr(re.transactionDate,e),nr(re.transactionDate,r))).groupBy(re.categoryId,Re.name).orderBy(jt(sp(re.amount))).limit(10),o=n.reduce((i,a)=>i+Math.abs(Number(a.total||0)),0);return n.map(i=>({categoryId:i.categoryId||"uncategorized",categoryName:i.categoryName||"Sem categoria",amount:Math.abs(Number(i.total||0)),percentage:o>0?Math.round(Math.abs(Number(i.total||0))/o*100):0,trend:"stable"}))}async getPendingAlerts(){return(await so.select({id:vr.id,insightType:vr.insightType,title:vr.title,impactLevel:vr.impactLevel,recommendation:vr.recommendation}).from(vr).where(xe(Z(vr.userId,this.userId),Z(vr.isRead,!1))).orderBy(jt(vr.createdAt)).limit(5)).map(r=>({id:r.id,type:this.mapInsightTypeToAlertType(r.insightType),message:r.title,severity:r.impactLevel||"medium",actionable:!!r.recommendation}))}mapInsightTypeToAlertType(e){switch(this.normalizeInsightType(e)){case"budget_alert":return"budget_exceeded";case"warning":return"low_balance";case"spending_pattern":return"unusual_spending";case"opportunity":return"payment_due";default:return"unusual_spending"}}normalizeInsightType(e){return e.includes("_")?e:e.replace(/([A-Z])/g,"_$1").toLowerCase()}async getUpcomingPayments(e){let r=new Date,n=new Date;n.setDate(r.getDate()+e);let o=r.toISOString().split("T")[0],i=n.toISOString().split("T")[0];return(await so.select({id:Ut.id,description:Ut.description,amount:Ut.amount,scheduledDate:Ut.scheduledDate,recurrenceRule:Ut.recurrenceRule}).from(Ut).where(xe(Z(Ut.userId,this.userId),Z(Ut.isActive,!0),Z(Ut.executed,!1),dr(Ut.scheduledDate,o),nr(Ut.scheduledDate,i))).orderBy(Ut.scheduledDate).limit(10)).map(c=>({id:c.id,description:c.description,amount:Math.abs(Number(c.amount)),dueDate:new Date(c.scheduledDate),isRecurring:!!c.recurrenceRule}))}};function la(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}s(la,"formatBRL");function z5(t){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}s(z5,"formatDateBR");function U5(t){return{up:"\u2191 aumentando",down:"\u2193 diminuindo",stable:"\u2192 est\xE1vel"}[t]}s(U5,"translateTrend");function a1(t){let{totalBalance:e,availableBalance:r,monthlyIncome:n,monthlyExpenses:o,topCategories:i}=t,a=n-o,c=n>0?Math.round(a/n*100):0,l=i.slice(0,5).map((d,p)=>`${p+1}. **${d.categoryName}**: ${la(d.amount)} (${d.percentage}% do total, ${U5(d.trend)})`).join(`
`);return`
### Resumo Financeiro
- **Saldo Total**: ${la(e)}
- **Saldo Dispon\xEDvel**: ${la(r)}
- **Renda do M\xEAs**: ${la(n)}
- **Gastos do M\xEAs**: ${la(o)}
- **Economia do M\xEAs**: ${la(a)} (${c}% da renda)

### Top 5 Categorias de Gasto (M\xEAs Atual)
${l||"Nenhuma transa\xE7\xE3o registrada este m\xEAs."}

### \xDAltima Atualiza\xE7\xE3o
${z5(t.lastUpdated)}
`.trim()}s(a1,"buildFinancialContextBlock");function c1(t){if(t.length===0)return"\u2705 Nenhum alerta ativo no momento.";let e={low:"\u2139\uFE0F",medium:"\u26A0\uFE0F",high:"\u{1F6A8}"};return t.map(r=>`${e[r.severity]} [${r.severity.toUpperCase()}] ${r.message}`).join(`
`)}s(c1,"buildAlertsBlock");var u1=s(()=>{try{return!1}catch{}return!1},"isTestEnvironment"),l1=s(()=>{try{return!0}catch{}return!1},"isProductionEnvironment");var d1=new Set,Up=s((t,e,r)=>{let n=u1()||l1(),o=r??t;d1.has(o)||n||(d1.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},"deprecated");var o_=[".lcl.dev",".lclstage.dev",".lclclerk.com"],p1=[".accounts.dev",".accountsstage.dev",".accounts.lclclerk.com"],m1=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"];var da=s(t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,"isomorphicAtob");var f1=s(t=>typeof btoa<"u"&&typeof btoa=="function"?btoa(t):typeof global<"u"&&global.Buffer?new global.Buffer(t).toString("base64"):t,"isomorphicBtoa");var h1="pk_live_",L5="pk_test_";function g1(t){if(!t.endsWith("$"))return!1;let e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}s(g1,"isValidDecodedPublishableKey");function _i(t,e={}){if(t=t||"",!t||!i_(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!i_(t))throw new Error("Publishable key not valid.");return null}let r=t.startsWith(h1)?"production":"development",n;try{n=da(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!g1(n)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return e.proxyUrl?o=e.proxyUrl:r!=="development"&&e.domain&&e.isSatellite&&(o=`clerk.${e.domain}`),{instanceType:r,frontendApi:o}}s(_i,"parsePublishableKey");function i_(t=""){try{if(!(t.startsWith(h1)||t.startsWith(L5)))return!1;let e=t.split("_");if(e.length!==3)return!1;let r=e[2];return r?g1(da(r)):!1}catch{return!1}}s(i_,"isPublishableKey");function s_(){let t=new Map;return{isDevOrStagingUrl:s(e=>{if(!e)return!1;let r=typeof e=="string"?e:e.hostname,n=t.get(r);return n===void 0&&(n=m1.some(o=>r.endsWith(o)),t.set(r,n)),n},"isDevOrStagingUrl")}}s(s_,"createDevOrStagingUrlCache");function Lp(t){return t.startsWith("test_")||t.startsWith("sk_test_")}s(Lp,"isDevelopmentFromSecretKey");async function qp(t,e=globalThis.crypto.subtle){let r=new TextEncoder().encode(t),n=await e.digest("sha-1",r);return f1(String.fromCharCode(...new Uint8Array(n))).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}s(qp,"getCookieSuffix");var Fp=s((t,e)=>`${t}_${e}`,"getSuffixedCookieName");var q5={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:s((t,e)=>e<5,"shouldRetry"),retryImmediately:!1,jitter:!0},F5=100,y1=s(async t=>new Promise(e=>setTimeout(e,t)),"sleep"),v1=s((t,e)=>e?t*(1+Math.random()):t,"applyJitter"),B5=s(t=>{let e=0,r=s(()=>{let n=t.initialDelay,o=t.factor,i=n*Math.pow(o,e);return i=v1(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)},"calculateDelayInMs");return async()=>{await y1(r()),e++}},"createExponentialDelayAsyncFn"),Bp=s(async(t,e={})=>{let r=0,{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:a,retryImmediately:c,jitter:l,onBeforeRetry:d}={...q5,...e},p=B5({initialDelay:o,maxDelayBetweenRetries:i,factor:a,jitter:l});for(;;)try{return await t()}catch(m){if(r++,!n(m,r))throw m;d&&await d(r),c&&r===1?await y1(v1(F5,l)):await p()}},"retry");function a_(t){return o_.some(e=>t.startsWith("accounts.")&&t.endsWith(e))}s(a_,"isLegacyDevAccountPortalOrigin");function c_(t){return p1.some(e=>t.endsWith(e)&&!t.endsWith(".clerk"+e))}s(c_,"isCurrentDevAccountPortalOrigin");function u_(t){function e(r){let n=r??this;if(!n)throw new TypeError(`${t.kind||t.name} type guard requires an error object`);return n instanceof t}return s(e,"typeGuard"),e}s(u_,"createErrorTypeGuard");var Vp=class{static{s(this,"ClerkAPIError")}static kind="ClerkApiError";code;message;longMessage;meta;constructor(t){let e={code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t.meta?.param_name,sessionId:t.meta?.session_id,emailAddresses:t.meta?.email_addresses,identifiers:t.meta?.identifiers,zxcvbn:t.meta?.zxcvbn,plan:t.meta?.plan,isPlanUpgradePossible:t.meta?.is_plan_upgrade_possible}};this.code=e.code,this.message=e.message,this.longMessage=e.longMessage,this.meta=e.meta}},sTe=u_(Vp);function l_(t){return new Vp(t)}s(l_,"parseError");var d_=class _1 extends Error{static{s(this,"ClerkError")}static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(e){super(new.target.formatMessage(new.target.kind,e.message,e.code,e.docsUrl),{cause:e.cause}),Object.setPrototypeOf(this,_1.prototype),this.code=e.code,this.docsUrl=e.docsUrl,this.longMessage=e.longMessage,this.cause=e.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(e,r,n,o){let i="Clerk:",a=new RegExp(i.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${i} ${r.trim()}

(code="${n}")

`,o&&(r+=`

Docs: ${o}`),r}},Hp=class b1 extends d_{static{s(this,"ClerkAPIResponseError")}static kind="ClerkAPIResponseError";status;clerkTraceId;retryAfter;errors;constructor(e,r){let{data:n,status:o,clerkTraceId:i,retryAfter:a}=r;super({...r,message:e,code:"api_response_error"}),Object.setPrototypeOf(this,b1.prototype),this.status=o,this.clerkTraceId=i,this.retryAfter=a,this.errors=(n||[]).map(c=>new Vp(c))}toString(){let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(r=>JSON.stringify(r))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e}static formatMessage(e,r,n,o){return r}},aTe=u_(Hp),V5=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function p_({packageName:t,customMessages:e}){let r=t;function n(i,a){if(!a)return`${r}: ${i}`;let c=i,l=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let d of l){let p=(a[d[1]]||"").toString();c=c.replace(`{{${d[1]}}}`,p)}return`${r}: ${c}`}s(n,"buildMessage");let o={...V5,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}s(p_,"buildErrorThrower");var w1=class S1 extends d_{static{s(this,"ClerkRuntimeError")}static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(e,r){super({...r,message:e}),Object.setPrototypeOf(this,S1.prototype)}},cTe=u_(w1);function m_(t){return t&&"clerkError"in t}s(m_,"isClerkAPIResponseError");var H5=p_({packageName:"@clerk/backend"}),{isDevOrStagingUrl:BTe}=s_();var x1={InvalidSecretKey:"clerk_key_invalid"},Ye={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",RemoteJWKInvalid:"jwk-remote-invalid",RemoteJWKMissing:"jwk-remote-missing",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},pr={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk-generated JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable.",EnsureClockSync:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization)."},yt=class T1 extends Error{static{s(this,"_TokenVerificationError")}constructor({action:e,message:r,reason:n}){super(r),Object.setPrototypeOf(this,T1.prototype),this.reason=n,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};var su={TokenInvalid:"token-invalid",InvalidSecretKey:"secret-key-invalid",UnexpectedError:"unexpected-error"},Zp=class E1 extends Error{static{s(this,"_MachineTokenVerificationError")}constructor({message:e,code:r,status:n}){super(e),Object.setPrototypeOf(this,E1.prototype),this.code=r,this.status=n}getFullMessage(){return`${this.message} (code=${this.code}, status=${this.status})`}};import{webcrypto as k1}from"node:crypto";var Z5=fetch.bind(globalThis),ao={crypto:k1,get fetch(){return Z5},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},f_={parse(t,e){return J5(t,I1,e)},stringify(t,e){return G5(t,I1,e)}},I1={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function J5(t,e,r={}){if(!e.codes){e.codes={};for(let l=0;l<e.chars.length;++l)e.codes[e.chars[l]]=l}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let o=new(r.out??Uint8Array)(n*e.bits/8|0),i=0,a=0,c=0;for(let l=0;l<n;++l){let d=e.codes[t[l]];if(d===void 0)throw new SyntaxError("Invalid character "+t[l]);a=a<<e.bits|d,i+=e.bits,i>=8&&(i-=8,o[c++]=255&a>>i)}if(i>=e.bits||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return o}s(J5,"parse");function G5(t,e,r={}){let{pad:n=!0}=r,o=(1<<e.bits)-1,i="",a=0,c=0;for(let l=0;l<t.length;++l)for(c=c<<8|255&t[l],a+=8;a>e.bits;)a-=e.bits,i+=e.chars[o&c>>a];if(a&&(i+=e.chars[o&c<<e.bits-a]),n)for(;i.length*e.bits&7;)i+="=";return i}s(G5,"stringify");var g_={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},h_="RSASSA-PKCS1-v1_5",P1={RS256:h_,RS384:h_,RS512:h_},y_=Object.keys(g_);function K5(t){let e=g_[t],r=P1[t];if(!e||!r)throw new Error(`Unsupported algorithm ${t}, expected one of ${y_.join(",")}.`);return{hash:{name:g_[t]},name:P1[t]}}s(K5,"getCryptoAlgorithm");var W5=s(t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),"isArrayString"),Q5=s((t,e)=>{let r=[e].flat().filter(i=>!!i),n=[t].flat().filter(i=>!!i);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(W5(t)&&!t.some(i=>r.includes(i)))throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}},"assertAudienceClaim"),v_=s(t=>{if(!(typeof t>"u")&&t!=="JWT")throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},"assertHeaderType"),__=s(t=>{if(!y_.includes(t))throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${y_}.`})},"assertHeaderAlgorithm"),X5=s(t=>{if(typeof t!="string")throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},"assertSubClaim"),Y5=s((t,e)=>{if(!(!t||!e||e.length===0)&&!e.includes(t))throw new yt({reason:Ye.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${e}".`})},"assertAuthorizedPartiesClaim"),e9=s((t,e)=>{if(typeof t!="number")throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()<=r.getTime()-e)throw new yt({reason:Ye.TokenExpired,message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},"assertExpirationClaim"),t9=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new yt({reason:Ye.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertActivationClaim"),r9=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new yt({reason:Ye.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertIssuedAtClaim");function n9(t){let e=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=da(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n);for(let i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return o}s(n9,"pemToBuffer");function o9(t,e,r){if(typeof t=="object")return ao.crypto.subtle.importKey("jwk",t,e,!1,[r]);let n=n9(t),o=r==="sign"?"pkcs8":"spki";return ao.crypto.subtle.importKey(o,n,e,!1,[r])}s(o9,"importKey");var i9=5*1e3;async function b_(t,e){let{header:r,signature:n,raw:o}=t,a=new TextEncoder().encode([o.header,o.payload].join(".")),c=K5(r.alg);try{let l=await o9(e,c,"verify");return{data:await ao.crypto.subtle.verify(c.name,l,n,a)}}catch(l){return{errors:[new yt({reason:Ye.TokenInvalidSignature,message:l?.message})]}}}s(b_,"hasValidSignature");function Dn(t){let e=(t||"").toString().split(".");if(e.length!==3)return{errors:[new yt({reason:Ye.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,n,o]=e,i=new TextDecoder,a=JSON.parse(i.decode(f_.parse(r,{loose:!0}))),c=JSON.parse(i.decode(f_.parse(n,{loose:!0}))),l=f_.parse(o,{loose:!0});return{data:{header:a,payload:c,signature:l,raw:{header:r,payload:n,signature:o,text:t}}}}s(Dn,"decodeJwt");async function A1(t,e){let{audience:r,authorizedParties:n,clockSkewInMs:o,key:i}=e,a=o||i9,{data:c,errors:l}=Dn(t);if(l)return{errors:l};let{header:d,payload:p}=c;try{let{typ:y,alg:g}=d;v_(y),__(g);let{azp:f,sub:_,aud:w,iat:b,exp:S,nbf:k}=p;X5(_),Q5([w],[r]),Y5(f,n),e9(S,a),t9(k,a),r9(b,a)}catch(y){return{errors:[y]}}let{data:m,errors:h}=await b_(c,i);return h?{errors:[new yt({action:pr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Error verifying JWT signature. ${h[0]}`})]}:m?{data:p}:{errors:[new yt({reason:Ye.TokenInvalidSignature,message:"JWT signature is invalid."})]}}s(A1,"verifyJwt");var C1=s(t=>{throw TypeError(t)},"__typeError"),s9=s((t,e,r)=>e.has(t)||C1("Cannot "+r),"__accessCheck"),O1=s((t,e,r)=>e.has(t)?C1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Jp=s((t,e,r)=>(s9(t,e,"access private method"),r),"__privateMethod");function w_(t){return t?`https://${t.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}s(w_,"buildAccountsBaseUrl");var a9={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},c9=new Set(["first_factor","second_factor","multi_factor"]),u9=new Set(["strict_mfa","strict","moderate","lax"]),l9=s(t=>typeof t=="number"&&t>0,"isValidMaxAge"),d9=s(t=>c9.has(t),"isValidLevel"),p9=s(t=>u9.has(t),"isValidVerificationType"),S_=s(t=>t.replace(/^(org:)*/,"org:"),"prefixWithOrg"),m9=s((t,e)=>{let{orgId:r,orgRole:n,orgPermissions:o}=e;return!t.role&&!t.permission||!r||!n||!o?null:t.permission?o.includes(S_(t.permission)):t.role?S_(n)===S_(t.role):null},"checkOrgAuthorization"),$1=s((t,e)=>{let{org:r,user:n}=Gp(t),[o,i]=e.split(":"),a=i||o;return o==="org"?r.includes(a):o==="user"?n.includes(a):[...r,...n].includes(a)},"checkForFeatureOrPlan"),f9=s((t,e)=>{let{features:r,plans:n}=e;return t.feature&&r?$1(r,t.feature):t.plan&&n?$1(n,t.plan):null},"checkBillingAuthorization"),Gp=s(t=>{let e=t?t.split(",").map(r=>r.trim()):[];return{org:e.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:e.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},"splitByScope"),R1=s(t=>{if(!t)return!1;let e=s(o=>typeof o=="string"?a9[o]:o,"convertConfigToObject"),r=typeof t=="string"&&p9(t),n=typeof t=="object"&&d9(t.level)&&l9(t.afterMinutes);return r||n?e.bind(null,t):!1},"validateReverificationConfig"),h9=s((t,{factorVerificationAge:e})=>{if(!t.reverification||!e)return null;let r=R1(t.reverification);if(!r)return null;let{level:n,afterMinutes:o}=r(),[i,a]=e,c=i!==-1?o>i:null,l=a!==-1?o>a:null;switch(n){case"first_factor":return c;case"second_factor":return a!==-1?l:c;case"multi_factor":return a===-1?c:c&&l}},"checkReverificationAuthorization"),x_=s(t=>e=>{if(!t.userId)return!1;let r=f9(e,t),n=m9(e,t),o=h9(e,t);return[r||n,o].some(i=>i===null)?[r||n,o].some(i=>i===!0):[r||n,o].every(i=>i===!0)},"createCheckAuthorization");var g9=s(({per:t,fpm:e})=>{if(!t||!e)return{permissions:[],featurePermissionMap:[]};let r=t.split(",").map(n=>n.trim());return{permissions:r,featurePermissionMap:e.split(",").map(n=>Number.parseInt(n.trim(),10)).map(n=>n.toString(2).padStart(r.length,"0").split("").map(o=>Number.parseInt(o,10)).reverse()).filter(Boolean)}},"parsePermissions");function y9({features:t,permissions:e,featurePermissionMap:r}){if(!t||!e||!r)return[];let n=[];for(let o=0;o<t.length;o++){let i=t[o];if(o>=r.length)continue;let a=r[o];if(a)for(let c=0;c<a.length;c++)a[c]===1&&n.push(`org:${i}:${e[c]}`)}return n}s(y9,"buildOrgPermissions");var N1=s(t=>{let e,r,n,o,i=t.fva??null,a=t.sts??null;switch(t.v){case 2:if(t.o){e=t.o?.id,n=t.o?.slg,t.o?.rol&&(r=`org:${t.o?.rol}`);let{org:c}=Gp(t.fea),{permissions:l,featurePermissionMap:d}=g9({per:t.o?.per,fpm:t.o?.fpm});o=y9({features:c,featurePermissionMap:d,permissions:l})}break;default:e=t.org_id,r=t.org_role,n=t.org_slug,o=t.org_permissions;break}return{sessionClaims:t,sessionId:t.sid,sessionStatus:a,actor:t.act,userId:t.sub,orgId:e,orgRole:r,orgSlug:n,orgPermissions:o,factorVerificationAge:i}},"__experimental_JWTPayloadToAuthObjectProperties");var x$=Tc(M1(),1);function P9(t){for(var e=[],r=0;r<t.length;){var n=t[r];if(n==="*"||n==="+"||n==="?"){e.push({type:"MODIFIER",index:r,value:t[r++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(n==="{"){e.push({type:"OPEN",index:r,value:t[r++]});continue}if(n==="}"){e.push({type:"CLOSE",index:r,value:t[r++]});continue}if(n===":"){for(var o="",i=r+1;i<t.length;){var a=t.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:o}),r=i;continue}if(n==="("){var c=1,l="",i=r+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){l+=t[i++]+t[i++];continue}if(t[i]===")"){if(c--,c===0){i++;break}}else if(t[i]==="("&&(c++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=t[i++]}if(c)throw new TypeError("Unbalanced pattern at ".concat(r));if(!l)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:l}),r=i;continue}e.push({type:"CHAR",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}s(P9,"_");function A9(t,e){e===void 0&&(e={});for(var r=P9(t),n=e.prefixes,o=n===void 0?"./":n,i=e.delimiter,a=i===void 0?"/#?":i,c=[],l=0,d=0,p="",m=function($){if(d<r.length&&r[d].type===$)return r[d++].value},h=function($){var P=m($);if(P!==void 0)return P;var N=r[d],D=N.type,W=N.index;throw new TypeError("Unexpected ".concat(D," at ").concat(W,", expected ").concat($))},y=function(){for(var $="",P;P=m("CHAR")||m("ESCAPED_CHAR");)$+=P;return $},g=function($){for(var P=0,N=a;P<N.length;P++){var D=N[P];if($.indexOf(D)>-1)return!0}return!1},f=function($){var P=c[c.length-1],N=$||(P&&typeof P=="string"?P:"");if(P&&!N)throw new TypeError('Must have text between two parameters, missing text after "'.concat(P.name,'"'));return!N||g(N)?"[^".concat(bi(a),"]+?"):"(?:(?!".concat(bi(N),")[^").concat(bi(a),"])+?")};d<r.length;){var _=m("CHAR"),w=m("NAME"),b=m("PATTERN");if(w||b){var S=_||"";o.indexOf(S)===-1&&(p+=S,S=""),p&&(c.push(p),p=""),c.push({name:w||l++,prefix:S,suffix:"",pattern:b||f(S),modifier:m("MODIFIER")||""});continue}var k=_||m("ESCAPED_CHAR");if(k){p+=k;continue}if(p&&(c.push(p),p=""),m("OPEN")){var S=y(),R=m("NAME")||"",O=m("PATTERN")||"",C=y();h("CLOSE"),c.push({name:R||(O?l++:""),pattern:R&&!O?f(S):O,prefix:S,suffix:C,modifier:m("MODIFIER")||""});continue}h("END")}return c}s(A9,"F");function C9(t,e){var r=[];return O9(U1(t,r,e),r,e)}s(C9,"H");function O9(t,e,r){r===void 0&&(r={});var n=r.decode,o=n===void 0?function(i){return i}:n;return function(i){var a=t.exec(i);if(!a)return!1;for(var c=a[0],l=a.index,d=Object.create(null),p=function(h){if(a[h]===void 0)return"continue";var y=e[h-1];y.modifier==="*"||y.modifier==="+"?d[y.name]=a[h].split(y.prefix+y.suffix).map(function(g){return o(g,y)}):d[y.name]=o(a[h],y)},m=1;m<a.length;m++)p(m);return{path:c,index:l,params:d}}}s(O9,"I");function bi(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}s(bi,"s");function z1(t){return t&&t.sensitive?"":"i"}s(z1,"D");function $9(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(t.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(t.source);return t}s($9,"$");function R9(t,e,r){var n=t.map(function(o){return U1(o,e,r).source});return new RegExp("(?:".concat(n.join("|"),")"),z1(r))}s(R9,"W");function N9(t,e,r){return D9(A9(t,r),e,r)}s(N9,"L");function D9(t,e,r){r===void 0&&(r={});for(var n=r.strict,o=n===void 0?!1:n,i=r.start,a=i===void 0?!0:i,c=r.end,l=c===void 0?!0:c,d=r.encode,p=d===void 0?function(N){return N}:d,m=r.delimiter,h=m===void 0?"/#?":m,y=r.endsWith,g=y===void 0?"":y,f="[".concat(bi(g),"]|$"),_="[".concat(bi(h),"]"),w=a?"^":"",b=0,S=t;b<S.length;b++){var k=S[b];if(typeof k=="string")w+=bi(p(k));else{var R=bi(p(k.prefix)),O=bi(p(k.suffix));if(k.pattern)if(e&&e.push(k),R||O)if(k.modifier==="+"||k.modifier==="*"){var C=k.modifier==="*"?"?":"";w+="(?:".concat(R,"((?:").concat(k.pattern,")(?:").concat(O).concat(R,"(?:").concat(k.pattern,"))*)").concat(O,")").concat(C)}else w+="(?:".concat(R,"(").concat(k.pattern,")").concat(O,")").concat(k.modifier);else{if(k.modifier==="+"||k.modifier==="*")throw new TypeError('Can not repeat "'.concat(k.name,'" without a prefix and suffix'));w+="(".concat(k.pattern,")").concat(k.modifier)}else w+="(?:".concat(R).concat(O,")").concat(k.modifier)}}if(l)o||(w+="".concat(_,"?")),w+=r.endsWith?"(?=".concat(f,")"):"$";else{var $=t[t.length-1],P=typeof $=="string"?_.indexOf($[$.length-1])>-1:$===void 0;o||(w+="(?:".concat(_,"(?=").concat(f,"))?")),P||(w+="(?=".concat(_,"|").concat(f,")"))}return new RegExp(w,z1(r))}s(D9,"U");function U1(t,e,r){return t instanceof RegExp?$9(t,e):Array.isArray(t)?R9(t,e,r):N9(t,e,r)}s(U1,"P");function T_(t,e){try{return C9(t,e)}catch(r){throw new Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${r.message}`)}}s(T_,"match");var aO="https://api.clerk.com",cO="v1",uO="@clerk/backend@2.24.0",z9=300,U_="2025-11-10",U9={AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},nm={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count",HandshakeNonce:"__clerk_handshake_nonce"},L9={ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:nm.DevBrowser,Handshake:nm.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason",HandshakeNonce:nm.HandshakeNonce,HandshakeFormat:"format"},q9={Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",SecFetchSite:"sec-fetch-site",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},F9={Json:"application/json"},Ee={Attributes:U9,Cookies:nm,Headers:q9,ContentTypes:F9,QueryParameters:L9};function L1(t,e){return Object.keys(t).reduce((r,n)=>({...r,[n]:e[n]||r[n]}),{...t})}s(L1,"mergePreDefinedOptions");function lO(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}s(lO,"assertValidSecretKey");function B9(t){_i(t,{fatal:!0})}s(B9,"assertValidPublishableKey");var He={SessionToken:"session_token",ApiKey:"api_key",M2MToken:"m2m_token",OAuthToken:"oauth_token"},V9=class{static{s(this,"AuthenticateContext")}constructor(t,e,r){this.cookieSuffix=t,this.clerkRequest=e,this.originalFrontendApi="",r.acceptsToken===He.M2MToken||r.acceptsToken===He.ApiKey?this.initHeaderValues():(this.initPublishableKeyValues(r),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues()),Object.assign(this,r),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.tokenInHeader}usesSuffixedCookies(){let t=this.getSuffixedCookie(Ee.Cookies.ClientUat),e=this.getCookie(Ee.Cookies.ClientUat),r=this.getSuffixedCookie(Ee.Cookies.Session)||"",n=this.getCookie(Ee.Cookies.Session)||"";if(n&&!this.tokenHasIssuer(n))return!1;if(n&&!this.tokenBelongsToInstance(n))return!0;if(!t&&!r)return!1;let{data:o}=Dn(n),i=o?.payload.iat||0,{data:a}=Dn(r),c=a?.payload.iat||0;if(t!=="0"&&e!=="0"&&i>c||t==="0"&&e!=="0")return!1;if(this.instanceType!=="production"){let l=this.sessionExpired(a);if(t!=="0"&&e==="0"&&l)return!1}return!(!t&&r)}isCrossOriginReferrer(){if(!this.referrer||!this.clerkUrl.origin)return!1;try{return new URL(this.referrer).origin!==this.clerkUrl.origin}catch{return!1}}isKnownClerkReferrer(){if(!this.referrer)return!1;try{let t=new URL(this.referrer),e=t.hostname;if(this.frontendApi){let n=this.frontendApi.startsWith("http")?new URL(this.frontendApi).hostname:this.frontendApi;if(e===n)return!0}if(a_(e)||c_(e))return!0;let r=w_(this.frontendApi);if(r){let n=new URL(r).origin;if(t.origin===n)return!0}return!!e.startsWith("accounts.")}catch{return!1}}initPublishableKeyValues(t){B9(t.publishableKey),this.publishableKey=t.publishableKey;let e=_i(this.publishableKey,{fatal:!0,domain:t.domain,isSatellite:t.isSatellite});this.originalFrontendApi=e.frontendApi;let r=_i(this.publishableKey,{fatal:!0,proxyUrl:t.proxyUrl,domain:t.domain,isSatellite:t.isSatellite});this.instanceType=r.instanceType,this.frontendApi=r.frontendApi}initHeaderValues(){this.tokenInHeader=this.parseAuthorizationHeader(this.getHeader(Ee.Headers.Authorization)),this.origin=this.getHeader(Ee.Headers.Origin),this.host=this.getHeader(Ee.Headers.Host),this.forwardedHost=this.getHeader(Ee.Headers.ForwardedHost),this.forwardedProto=this.getHeader(Ee.Headers.CloudFrontForwardedProto)||this.getHeader(Ee.Headers.ForwardedProto),this.referrer=this.getHeader(Ee.Headers.Referrer),this.userAgent=this.getHeader(Ee.Headers.UserAgent),this.secFetchDest=this.getHeader(Ee.Headers.SecFetchDest),this.accept=this.getHeader(Ee.Headers.Accept)}initCookieValues(){this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(Ee.Cookies.Session),this.refreshTokenInCookie=this.getSuffixedCookie(Ee.Cookies.Refresh),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(Ee.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(Ee.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(Ee.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(Ee.QueryParameters.Handshake)||this.getCookie(Ee.Cookies.Handshake),this.handshakeRedirectLoopCounter=Number(this.getCookie(Ee.Cookies.RedirectCount))||0,this.handshakeNonce=this.getQueryParam(Ee.QueryParameters.HandshakeNonce)||this.getCookie(Ee.Cookies.HandshakeNonce)}getQueryParam(t){return this.clerkRequest.clerkUrl.searchParams.get(t)}getHeader(t){return this.clerkRequest.headers.get(t)||void 0}getCookie(t){return this.clerkRequest.cookies.get(t)||void 0}getSuffixedCookie(t){return this.getCookie(Fp(t,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(t){return this.usesSuffixedCookies()?this.getSuffixedCookie(t):this.getCookie(t)}parseAuthorizationHeader(t){if(!t)return;let[e,r]=t.split(" ",2);if(!r)return e;if(e==="Bearer")return r}tokenHasIssuer(t){let{data:e,errors:r}=Dn(t);return r?!1:!!e.payload.iss}tokenBelongsToInstance(t){if(!t)return!1;let{data:e,errors:r}=Dn(t);if(r)return!1;let n=e.payload.iss.replace(/https?:\/\//gi,"");return this.originalFrontendApi===n}sessionExpired(t){return!!t&&t?.payload.exp<=Date.now()/1e3>>0}},H9=s(async(t,e)=>{let r=e.publishableKey?await qp(e.publishableKey,ao.crypto.subtle):"";return new V9(r,t,e)},"createAuthenticateContext"),$_="/",Z9=new RegExp("(?<!:)"+$_+"{1,}","g");function ne(...t){return t.filter(e=>e).join($_).replace(Z9,$_)}s(ne,"joinPaths");var vt=class{static{s(this,"AbstractAPI")}constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},q1="/actor_tokens",J9=class extends vt{static{s(this,"ActorTokenAPI")}async create(t){return this.request({method:"POST",path:q1,bodyParams:t})}async revoke(t){return this.requireId(t),this.request({method:"POST",path:ne(q1,t,"revoke")})}},F1="/accountless_applications",G9=class extends vt{static{s(this,"AccountlessApplicationAPI")}async createAccountlessApplication(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:F1,headerParams:e})}async completeAccountlessApplicationOnboarding(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:ne(F1,"complete"),headerParams:e})}},E_="/allowlist_identifiers",K9=class extends vt{static{s(this,"AllowlistIdentifierAPI")}async getAllowlistIdentifierList(t={}){return this.request({method:"GET",path:E_,queryParams:{...t,paginated:!0}})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:E_,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:ne(E_,t)})}},au="/api_keys",W9=class extends vt{static{s(this,"APIKeysAPI")}async list(t){return this.request({method:"GET",path:au,queryParams:t})}async create(t){return this.request({method:"POST",path:au,bodyParams:t})}async revoke(t){let{apiKeyId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ne(au,e,"revoke"),bodyParams:r})}async getSecret(t){return this.requireId(t),this.request({method:"GET",path:ne(au,t,"secret")})}async verifySecret(t){return this.request({method:"POST",path:ne(au,"verify"),bodyParams:{secret:t}})}},Q9="/beta_features",X9=class extends vt{static{s(this,"BetaFeaturesAPI")}async changeDomain(t){return this.request({method:"POST",path:ne(Q9,"change_domain"),bodyParams:t})}},k_="/blocklist_identifiers",Y9=class extends vt{static{s(this,"BlocklistIdentifierAPI")}async getBlocklistIdentifierList(t={}){return this.request({method:"GET",path:k_,queryParams:t})}async createBlocklistIdentifier(t){return this.request({method:"POST",path:k_,bodyParams:t})}async deleteBlocklistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:ne(k_,t)})}},Wp="/clients",e3=class extends vt{static{s(this,"ClientAPI")}async getClientList(t={}){return this.request({method:"GET",path:Wp,queryParams:{...t,paginated:!0}})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:ne(Wp,t)})}verifyClient(t){return this.request({method:"POST",path:ne(Wp,"verify"),bodyParams:{token:t}})}async getHandshakePayload(t){return this.request({method:"GET",path:ne(Wp,"handshake_payload"),queryParams:t})}},Qp="/domains",t3=class extends vt{static{s(this,"DomainAPI")}async list(){return this.request({method:"GET",path:Qp})}async add(t){return this.request({method:"POST",path:Qp,bodyParams:t})}async update(t){let{domainId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ne(Qp,e),bodyParams:r})}async delete(t){return this.deleteDomain(t)}async deleteDomain(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Qp,t)})}},Xp="/email_addresses",r3=class extends vt{static{s(this,"EmailAddressAPI")}async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:ne(Xp,t)})}async createEmailAddress(t){return this.request({method:"POST",path:Xp,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ne(Xp,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Xp,t)})}},n3="/oauth_applications/access_tokens",o3=class extends vt{static{s(this,"IdPOAuthAccessTokenApi")}async verifyAccessToken(t){return this.request({method:"POST",path:ne(n3,"verify"),bodyParams:{access_token:t}})}},Yp="/instance",i3=class extends vt{static{s(this,"InstanceAPI")}async get(){return this.request({method:"GET",path:Yp})}async update(t){return this.request({method:"PATCH",path:Yp,bodyParams:t})}async updateRestrictions(t){return this.request({method:"PATCH",path:ne(Yp,"restrictions"),bodyParams:t})}async updateOrganizationSettings(t){return this.request({method:"PATCH",path:ne(Yp,"organization_settings"),bodyParams:t})}},em="/invitations",s3=class extends vt{static{s(this,"InvitationAPI")}async getInvitationList(t={}){return this.request({method:"GET",path:em,queryParams:{...t,paginated:!0}})}async createInvitation(t){return this.request({method:"POST",path:em,bodyParams:t})}async createInvitationBulk(t){return this.request({method:"POST",path:ne(em,"bulk"),bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:ne(em,t,"revoke")})}},Mo="/machines",a3=class extends vt{static{s(this,"MachineApi")}async get(t){return this.requireId(t),this.request({method:"GET",path:ne(Mo,t)})}async list(t={}){return this.request({method:"GET",path:Mo,queryParams:t})}async create(t){return this.request({method:"POST",path:Mo,bodyParams:t})}async update(t){let{machineId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ne(Mo,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Mo,t)})}async getSecretKey(t){return this.requireId(t),this.request({method:"GET",path:ne(Mo,t,"secret_key")})}async rotateSecretKey(t){let{machineId:e,previousTokenTtl:r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Mo,e,"secret_key","rotate"),bodyParams:{previousTokenTtl:r}})}async createScope(t,e){return this.requireId(t),this.request({method:"POST",path:ne(Mo,t,"scopes"),bodyParams:{toMachineId:e}})}async deleteScope(t,e){return this.requireId(t),this.request({method:"DELETE",path:ne(Mo,t,"scopes",e)})}},I_="/m2m_tokens",pu,om,c3=class extends vt{static{s(this,"M2MTokenApi")}constructor(){super(...arguments),O1(this,pu)}async createToken(t){let{claims:e=null,machineSecretKey:r,secondsUntilExpiration:n=null}=t||{},o=Jp(this,pu,om).call(this,{method:"POST",path:I_,bodyParams:{secondsUntilExpiration:n,claims:e}},r);return this.request(o)}async revokeToken(t){let{m2mTokenId:e,revocationReason:r=null,machineSecretKey:n}=t;this.requireId(e);let o=Jp(this,pu,om).call(this,{method:"POST",path:ne(I_,e,"revoke"),bodyParams:{revocationReason:r}},n);return this.request(o)}async verifyToken(t){let{token:e,machineSecretKey:r}=t,n=Jp(this,pu,om).call(this,{method:"POST",path:ne(I_,"verify"),bodyParams:{token:e}},r);return this.request(n)}};pu=new WeakSet;om=s(function(t,e){return e?{...t,headerParams:{...t.headerParams,Authorization:`Bearer ${e}`}}:t},"createRequestOptions_fn");var u3="/jwks",l3=class extends vt{static{s(this,"JwksAPI")}async getJwks(){return this.request({method:"GET",path:u3})}},cu="/jwt_templates",d3=class extends vt{static{s(this,"JwtTemplatesApi")}async list(t={}){return this.request({method:"GET",path:cu,queryParams:{...t,paginated:!0}})}async get(t){return this.requireId(t),this.request({method:"GET",path:ne(cu,t)})}async create(t){return this.request({method:"POST",path:cu,bodyParams:t})}async update(t){let{templateId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ne(cu,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ne(cu,t)})}},Kt="/organizations",p3=class extends vt{static{s(this,"OrganizationAPI")}async getOrganizationList(t){return this.request({method:"GET",path:Kt,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:Kt,bodyParams:t})}async getOrganization(t){let{includeMembersCount:e}=t,r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:ne(Kt,r),queryParams:{includeMembersCount:e}})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:ne(Kt,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);let r=new ao.FormData;return r.append("file",e?.file),e?.uploaderUserId&&r.append("uploader_user_id",e?.uploaderUserId),this.request({method:"PUT",path:ne(Kt,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Kt,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:ne(Kt,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:ne(Kt,t)})}async getOrganizationMembershipList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ne(Kt,e,"memberships"),queryParams:r})}async getInstanceOrganizationMembershipList(t){return this.request({method:"GET",path:"/organization_memberships",queryParams:t})}async createOrganizationMembership(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Kt,e,"memberships"),bodyParams:r})}async updateOrganizationMembership(t){let{organizationId:e,userId:r,...n}=t;return this.requireId(e),this.request({method:"PATCH",path:ne(Kt,e,"memberships",r),bodyParams:n})}async updateOrganizationMembershipMetadata(t){let{organizationId:e,userId:r,...n}=t;return this.request({method:"PATCH",path:ne(Kt,e,"memberships",r,"metadata"),bodyParams:n})}async deleteOrganizationMembership(t){let{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:ne(Kt,e,"memberships",r)})}async getOrganizationInvitationList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ne(Kt,e,"invitations"),queryParams:r})}async createOrganizationInvitation(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Kt,e,"invitations"),bodyParams:r})}async createOrganizationInvitationBulk(t,e){return this.requireId(t),this.request({method:"POST",path:ne(Kt,t,"invitations","bulk"),bodyParams:e})}async getOrganizationInvitation(t){let{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:ne(Kt,e,"invitations",r)})}async revokeOrganizationInvitation(t){let{organizationId:e,invitationId:r,...n}=t;return this.requireId(e),this.request({method:"POST",path:ne(Kt,e,"invitations",r,"revoke"),bodyParams:n})}async getOrganizationDomainList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ne(Kt,e,"domains"),queryParams:r})}async createOrganizationDomain(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Kt,e,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(t){let{organizationId:e,domainId:r,...n}=t;return this.requireId(e),this.requireId(r),this.request({method:"PATCH",path:ne(Kt,e,"domains",r),bodyParams:n})}async deleteOrganizationDomain(t){let{organizationId:e,domainId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"DELETE",path:ne(Kt,e,"domains",r)})}},pa="/oauth_applications",m3=class extends vt{static{s(this,"OAuthApplicationsApi")}async list(t={}){return this.request({method:"GET",path:pa,queryParams:t})}async get(t){return this.requireId(t),this.request({method:"GET",path:ne(pa,t)})}async create(t){return this.request({method:"POST",path:pa,bodyParams:t})}async update(t){let{oauthApplicationId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ne(pa,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ne(pa,t)})}async rotateSecret(t){return this.requireId(t),this.request({method:"POST",path:ne(pa,t,"rotate_secret")})}},tm="/phone_numbers",f3=class extends vt{static{s(this,"PhoneNumberAPI")}async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:ne(tm,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:tm,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ne(tm,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:ne(tm,t)})}},h3="/proxy_checks",g3=class extends vt{static{s(this,"ProxyCheckAPI")}async verify(t){return this.request({method:"POST",path:h3,bodyParams:t})}},rm="/redirect_urls",y3=class extends vt{static{s(this,"RedirectUrlAPI")}async getRedirectUrlList(){return this.request({method:"GET",path:rm,queryParams:{paginated:!0}})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:ne(rm,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:rm,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:ne(rm,t)})}},uu="/saml_connections",v3=class extends vt{static{s(this,"SamlConnectionAPI")}async getSamlConnectionList(t={}){return this.request({method:"GET",path:uu,queryParams:t})}async createSamlConnection(t){return this.request({method:"POST",path:uu,bodyParams:t,options:{deepSnakecaseBodyParamKeys:!0}})}async getSamlConnection(t){return this.requireId(t),this.request({method:"GET",path:ne(uu,t)})}async updateSamlConnection(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ne(uu,t),bodyParams:e,options:{deepSnakecaseBodyParamKeys:!0}})}async deleteSamlConnection(t){return this.requireId(t),this.request({method:"DELETE",path:ne(uu,t)})}},wi="/sessions",_3=class extends vt{static{s(this,"SessionAPI")}async getSessionList(t={}){return this.request({method:"GET",path:wi,queryParams:{...t,paginated:!0}})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:ne(wi,t)})}async createSession(t){return this.request({method:"POST",path:wi,bodyParams:t})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:ne(wi,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:ne(wi,t,"verify"),bodyParams:{token:e}})}async getToken(t,e,r){this.requireId(t);let o={method:"POST",path:e?ne(wi,t,"tokens",e):ne(wi,t,"tokens")};return r!==void 0&&(o.bodyParams={expires_in_seconds:r}),this.request(o)}async refreshSession(t,e){this.requireId(t);let{suffixed_cookies:r,...n}=e;return this.request({method:"POST",path:ne(wi,t,"refresh"),bodyParams:n,queryParams:{suffixed_cookies:r}})}},B1="/sign_in_tokens",b3=class extends vt{static{s(this,"SignInTokenAPI")}async createSignInToken(t){return this.request({method:"POST",path:B1,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:ne(B1,t,"revoke")})}},V1="/sign_ups",w3=class extends vt{static{s(this,"SignUpAPI")}async get(t){return this.requireId(t),this.request({method:"GET",path:ne(V1,t)})}async update(t){let{signUpAttemptId:e,...r}=t;return this.request({method:"PATCH",path:ne(V1,e),bodyParams:r})}},S3="/testing_tokens",x3=class extends vt{static{s(this,"TestingTokenAPI")}async createTestingToken(){return this.request({method:"POST",path:S3})}},Lt="/users",T3=class extends vt{static{s(this,"UserAPI")}async getUserList(t={}){let{limit:e,offset:r,orderBy:n,...o}=t,[i,a]=await Promise.all([this.request({method:"GET",path:Lt,queryParams:t}),this.getCount(o)]);return{data:i,totalCount:a}}async getUser(t){return this.requireId(t),this.request({method:"GET",path:ne(Lt,t)})}async createUser(t){return this.request({method:"POST",path:Lt,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ne(Lt,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);let r=new ao.FormData;return r.append("file",e?.file),this.request({method:"POST",path:ne(Lt,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:ne(Lt,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Lt,t)})}async getCount(t={}){return this.request({method:"GET",path:ne(Lt,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){this.requireId(t);let r=e.startsWith("oauth_"),n=r?e:`oauth_${e}`;return r&&Up("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:ne(Lt,t,"oauth_access_tokens",n),queryParams:{paginated:!0}})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Lt,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:ne(Lt,e,"organization_memberships"),queryParams:{limit:r,offset:n}})}async getOrganizationInvitationList(t){let{userId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ne(Lt,e,"organization_invitations"),queryParams:r})}async verifyPassword(t){let{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Lt,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){let{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:ne(Lt,e,"verify_totp"),bodyParams:{code:r}})}async banUser(t){return this.requireId(t),this.request({method:"POST",path:ne(Lt,t,"ban")})}async unbanUser(t){return this.requireId(t),this.request({method:"POST",path:ne(Lt,t,"unban")})}async lockUser(t){return this.requireId(t),this.request({method:"POST",path:ne(Lt,t,"lock")})}async unlockUser(t){return this.requireId(t),this.request({method:"POST",path:ne(Lt,t,"unlock")})}async deleteUserProfileImage(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Lt,t,"profile_image")})}async deleteUserPasskey(t){return this.requireId(t.userId),this.requireId(t.passkeyIdentificationId),this.request({method:"DELETE",path:ne(Lt,t.userId,"passkeys",t.passkeyIdentificationId)})}async deleteUserWeb3Wallet(t){return this.requireId(t.userId),this.requireId(t.web3WalletIdentificationId),this.request({method:"DELETE",path:ne(Lt,t.userId,"web3_wallets",t.web3WalletIdentificationId)})}async deleteUserExternalAccount(t){return this.requireId(t.userId),this.requireId(t.externalAccountId),this.request({method:"DELETE",path:ne(Lt,t.userId,"external_accounts",t.externalAccountId)})}async deleteUserBackupCodes(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Lt,t,"backup_code")})}async deleteUserTOTP(t){return this.requireId(t),this.request({method:"DELETE",path:ne(Lt,t,"totp")})}},lu="/waitlist_entries",E3=class extends vt{static{s(this,"WaitlistEntryAPI")}async list(t={}){return this.request({method:"GET",path:lu,queryParams:t})}async create(t){return this.request({method:"POST",path:lu,bodyParams:t})}async invite(t,e={}){return this.requireId(t),this.request({method:"POST",path:ne(lu,t,"invite"),bodyParams:e})}async reject(t){return this.requireId(t),this.request({method:"POST",path:ne(lu,t,"reject")})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ne(lu,t)})}},P_="/webhooks",k3=class extends vt{static{s(this,"WebhookAPI")}async createSvixApp(){return this.request({method:"POST",path:ne(P_,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:ne(P_,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:ne(P_,"svix")})}},H1="/billing",I3="/organizations",P3="/users",A3=class extends vt{static{s(this,"BillingAPI")}async getPlanList(t){return this.request({method:"GET",path:ne(H1,"plans"),queryParams:t})}async cancelSubscriptionItem(t,e){return this.requireId(t),this.request({method:"DELETE",path:ne(H1,"subscription_items",t),queryParams:e})}async extendSubscriptionItemFreeTrial(t,e){return this.requireId(t),this.request({method:"POST",path:ne("/billing","subscription_items",t,"extend_free_trial"),bodyParams:e})}async getOrganizationBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:ne(I3,t,"billing","subscription")})}async getUserBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:ne(P3,t,"billing","subscription")})}},dO=s(t=>typeof t=="object"&&t!==null,"isObject"),Z1=s(t=>dO(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date)&&!(globalThis.Blob&&t instanceof globalThis.Blob),"isObjectCustom"),C3=Symbol("mapObjectSkip"),R_=s((t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);let{target:o}=r;delete r.target;let i=s(a=>a.map(c=>Z1(c)?R_(c,e,r,n):c),"mapArray");if(Array.isArray(t))return i(t);for(let[a,c]of Object.entries(t)){let l=e(a,c,t);if(l===C3)continue;let[d,p,{shouldRecurse:m=!0}={}]=l;d!=="__proto__"&&(r.deep&&m&&Z1(p)&&(p=Array.isArray(p)?i(p):R_(p,e,r,n)),o[d]=p)}return o},"_mapObject");function J1(t,e,r){if(!dO(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);if(Array.isArray(t))throw new TypeError("Expected an object, got an array");return R_(t,e,r)}s(J1,"mapObject");var O3=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),$3=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),R3=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),N3=/[^\p{L}\d]+/giu,G1="$1\0$2",K1="";function pO(t){let e=t.trim();e=e.replace(O3,G1).replace($3,G1),e=e.replace(N3,"\0");let r=0,n=e.length;for(;e.charAt(r)==="\0";)r++;if(r===n)return[];for(;e.charAt(n-1)==="\0";)n--;return e.slice(r,n).split(/\0/g)}s(pO,"split");function D3(t){let e=pO(t);for(let r=0;r<e.length;r++){let n=e[r],o=R3.exec(n);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(r,1,n.slice(0,i),n.slice(i))}}return e}s(D3,"splitSeparateNumbers");function j3(t,e){let[r,n,o]=z3(t,e);return r+n.map(M3(e?.locale)).join(e?.delimiter??" ")+o}s(j3,"noCase");function W1(t,e){return j3(t,{delimiter:"_",...e})}s(W1,"snakeCase");function M3(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}s(M3,"lowerFactory");function z3(t,e={}){let r=e.split??(e.separateNumbers?D3:pO),n=e.prefixCharacters??K1,o=e.suffixCharacters??K1,i=0,a=t.length;for(;i<t.length;){let c=t.charAt(i);if(!n.includes(c))break;i++}for(;a>i;){let c=a-1,l=t.charAt(c);if(!o.includes(l))break;a=c}return[t.slice(0,i),r(t.slice(i,a)),t.slice(a)]}s(z3,"splitPrefixSuffix");var Q1={}.constructor;function U3(t,e){if(Array.isArray(t)){if(t.some(o=>o.constructor!==Q1))throw new Error("obj must be array of plain objects");e={deep:!0,exclude:[],parsingOptions:{},...e};let n=e.snakeCase||(o=>W1(o,e.parsingOptions));return t.map(o=>J1(o,(i,a)=>[X1(e.exclude,i)?i:n(i),a,Y1(i,a,e)],e))}else if(t.constructor!==Q1)throw new Error("obj must be an plain object");e={deep:!0,exclude:[],parsingOptions:{},...e};let r=e.snakeCase||(n=>W1(n,e.parsingOptions));return J1(t,(n,o)=>[X1(e.exclude,n)?n:r(n),o,Y1(n,o,e)],e)}s(U3,"snakecaseKeys");function X1(t,e){return t.some(r=>typeof r=="string"?r===e:r.test(e))}s(X1,"matches");function Y1(t,e,r){return r.shouldRecurse?{shouldRecurse:r.shouldRecurse(t,e)}:void 0}s(Y1,"mapperOptions");var eO=U3,L3=class mO{static{s(this,"_AccountlessApplication")}constructor(e,r,n,o){this.publishableKey=e,this.secretKey=r,this.claimUrl=n,this.apiKeysUrl=o}static fromJSON(e){return new mO(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},q3=class fO{static{s(this,"_ActorToken")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.status=r,this.userId=n,this.actor=o,this.token=i,this.url=a,this.createdAt=c,this.updatedAt=l}static fromJSON(e){return new fO(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},F3=class hO{static{s(this,"_AllowlistIdentifier")}constructor(e,r,n,o,i,a,c){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a,this.invitationId=c}static fromJSON(e){return new hO(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},B3=class gO{static{s(this,"_APIKey")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_){this.id=e,this.type=r,this.name=n,this.subject=o,this.scopes=i,this.claims=a,this.revoked=c,this.revocationReason=l,this.expired=d,this.expiration=p,this.createdBy=m,this.description=h,this.lastUsedAt=y,this.createdAt=g,this.updatedAt=f,this.secret=_}static fromJSON(e){return new gO(e.id,e.type,e.name,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_by,e.description,e.last_used_at,e.created_at,e.updated_at,e.secret)}},V3=class yO{static{s(this,"_BlocklistIdentifier")}constructor(e,r,n,o,i,a){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a}static fromJSON(e){return new yO(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},H3=class vO{static{s(this,"_SessionActivity")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.isMobile=r,this.ipAddress=n,this.city=o,this.country=i,this.browserVersion=a,this.browserName=c,this.deviceType=l}static fromJSON(e){return new vO(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},_O=class bO{static{s(this,"_Session")}constructor(e,r,n,o,i,a,c,l,d,p,m,h=null){this.id=e,this.clientId=r,this.userId=n,this.status=o,this.lastActiveAt=i,this.expireAt=a,this.abandonAt=c,this.createdAt=l,this.updatedAt=d,this.lastActiveOrganizationId=p,this.latestActivity=m,this.actor=h}static fromJSON(e){return new bO(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&H3.fromJSON(e.latest_activity),e.actor)}},Z3=class wO{static{s(this,"_Client")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.sessionIds=r,this.sessions=n,this.signInId=o,this.signUpId=i,this.lastActiveSessionId=a,this.lastAuthenticationStrategy=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new wO(e.id,e.session_ids,e.sessions.map(r=>_O.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.last_authentication_strategy,e.created_at,e.updated_at)}},J3=class SO{static{s(this,"_CnameTarget")}constructor(e,r,n){this.host=e,this.value=r,this.required=n}static fromJSON(e){return new SO(e.host,e.value,e.required)}},G3=class xO{static{s(this,"_Cookies")}constructor(e){this.cookies=e}static fromJSON(e){return new xO(e.cookies)}},K3=class TO{static{s(this,"_DeletedObject")}constructor(e,r,n,o){this.object=e,this.id=r,this.slug=n,this.deleted=o}static fromJSON(e){return new TO(e.object,e.id||null,e.slug||null,e.deleted)}},W3=class EO{static{s(this,"_Domain")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.isSatellite=n,this.frontendApiUrl=o,this.developmentOrigin=i,this.cnameTargets=a,this.accountsPortalUrl=c,this.proxyUrl=l}static fromJSON(e){return new EO(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(r=>J3.fromJSON(r)),e.accounts_portal_url,e.proxy_url)}},Q3=class kO{static{s(this,"_Email")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=o,this.subject=i,this.body=a,this.bodyPlain=c,this.status=l,this.slug=d,this.data=p,this.deliveredByClerk=m}static fromJSON(e){return new kO(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},IO=class PO{static{s(this,"_IdentificationLink")}constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new PO(e.id,e.type)}},fu=class AO{static{s(this,"_Verification")}constructor(e,r,n=null,o=null,i=null,a=null,c=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=o,this.expireAt=i,this.nonce=a,this.message=c}static fromJSON(e){return new AO(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},CO=class OO{static{s(this,"_EmailAddress")}constructor(e,r,n,o){this.id=e,this.emailAddress=r,this.verification=n,this.linkedTo=o}static fromJSON(e){return new OO(e.id,e.email_address,e.verification&&fu.fromJSON(e.verification),e.linked_to.map(r=>IO.fromJSON(r)))}},X3=class $O{static{s(this,"_ExternalAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m,h={},y,g){this.id=e,this.provider=r,this.identificationId=n,this.externalId=o,this.approvedScopes=i,this.emailAddress=a,this.firstName=c,this.lastName=l,this.imageUrl=d,this.username=p,this.phoneNumber=m,this.publicMetadata=h,this.label=y,this.verification=g}static fromJSON(e){return new $O(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&fu.fromJSON(e.verification))}},Y3=class RO{static{s(this,"_IdPOAuthAccessToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.clientId=r,this.type=n,this.subject=o,this.scopes=i,this.revoked=a,this.revocationReason=c,this.expired=l,this.expiration=d,this.createdAt=p,this.updatedAt=m}static fromJSON(e){return new RO(e.id,e.client_id,e.type,e.subject,e.scopes,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at)}},eV=class NO{static{s(this,"_Instance")}constructor(e,r,n){this.id=e,this.environmentType=r,this.allowedOrigins=n}static fromJSON(e){return new NO(e.id,e.environment_type,e.allowed_origins)}},tV=class DO{static{s(this,"_InstanceRestrictions")}constructor(e,r,n,o,i){this.allowlist=e,this.blocklist=r,this.blockEmailSubaddresses=n,this.blockDisposableEmailDomains=o,this.ignoreDotsForGmailAddresses=i}static fromJSON(e){return new DO(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},rV=class jO{static{s(this,"_InstanceSettings")}constructor(e,r,n,o,i){this.id=e,this.restrictedToAllowlist=r,this.fromEmailAddress=n,this.progressiveSignUp=o,this.enhancedEmailDeliverability=i}static fromJSON(e){return new jO(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},MO=class zO{static{s(this,"_Invitation")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.emailAddress=r,this.publicMetadata=n,this.createdAt=o,this.updatedAt=i,this.status=a,this.url=c,this.revoked=l,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new zO(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return r._raw=e,r}},Je={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",ApiKey:"api_key",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",ExternalAccount:"external_account",FacebookAccount:"facebook_account",GoogleAccount:"google_account",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",Machine:"machine",MachineScope:"machine_scope",MachineSecretKey:"machine_secret_key",M2MToken:"machine_to_machine_token",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",IdpOAuthAccessToken:"clerk_idp_oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationDomain:"organization_domain",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",SamlAccount:"saml_account",SamlConnection:"saml_connection",Session:"session",SignInAttempt:"sign_in_attempt",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Web3Wallet:"web3_wallet",Token:"token",TotalCount:"total_count",TestingToken:"testing_token",Role:"role",Permission:"permission",BillingPayer:"commerce_payer",BillingPaymentAttempt:"commerce_payment_attempt",BillingSubscription:"commerce_subscription",BillingSubscriptionItem:"commerce_subscription_item",BillingPlan:"commerce_plan",Feature:"feature"},nV=class N_{static{s(this,"_Machine")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.instanceId=n,this.createdAt=o,this.updatedAt=i,this.scopedMachines=a,this.defaultTokenTtl=c,this.secretKey=l}static fromJSON(e){return new N_(e.id,e.name,e.instance_id,e.created_at,e.updated_at,e.scoped_machines.map(r=>new N_(r.id,r.name,r.instance_id,r.created_at,r.updated_at,[],r.default_token_ttl)),e.default_token_ttl,e.secret_key)}},oV=class UO{static{s(this,"_MachineScope")}constructor(e,r,n,o){this.fromMachineId=e,this.toMachineId=r,this.createdAt=n,this.deleted=o}static fromJSON(e){return new UO(e.from_machine_id,e.to_machine_id,e.created_at,e.deleted)}},iV=class LO{static{s(this,"_MachineSecretKey")}constructor(e){this.secret=e}static fromJSON(e){return new LO(e.secret)}},sV=class qO{static{s(this,"_M2MToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.subject=r,this.scopes=n,this.claims=o,this.revoked=i,this.revocationReason=a,this.expired=c,this.expiration=l,this.createdAt=d,this.updatedAt=p,this.token=m}static fromJSON(e){return new qO(e.id,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at,e.token)}},aV=class FO{static{s(this,"_JwtTemplate")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.name=r,this.claims=n,this.lifetime=o,this.allowedClockSkew=i,this.customSigningKey=a,this.signingAlgorithm=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new FO(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},cV=class BO{static{s(this,"_OauthAccessToken")}constructor(e,r,n,o={},i,a,c,l){this.externalAccountId=e,this.provider=r,this.token=n,this.publicMetadata=o,this.label=i,this.scopes=a,this.tokenSecret=c,this.expiresAt=l}static fromJSON(e){return new BO(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},uV=class VO{static{s(this,"_OAuthApplication")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k){this.id=e,this.instanceId=r,this.name=n,this.clientId=o,this.clientUri=i,this.clientImageUrl=a,this.dynamicallyRegistered=c,this.consentScreenEnabled=l,this.pkceRequired=d,this.isPublic=p,this.scopes=m,this.redirectUris=h,this.authorizeUrl=y,this.tokenFetchUrl=g,this.userInfoUrl=f,this.discoveryUrl=_,this.tokenIntrospectionUrl=w,this.createdAt=b,this.updatedAt=S,this.clientSecret=k}static fromJSON(e){return new VO(e.id,e.instance_id,e.name,e.client_id,e.client_uri,e.client_image_url,e.dynamically_registered,e.consent_screen_enabled,e.pkce_required,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},HO=class ZO{static{s(this,"_Organization")}constructor(e,r,n,o,i,a,c,l={},d={},p,m,h,y){this.id=e,this.name=r,this.slug=n,this.imageUrl=o,this.hasImage=i,this.createdAt=a,this.updatedAt=c,this.publicMetadata=l,this.privateMetadata=d,this.maxAllowedMemberships=p,this.adminDeleteEnabled=m,this.membersCount=h,this.createdBy=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new ZO(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return r._raw=e,r}},lV=class JO{static{s(this,"_OrganizationInvitation")}constructor(e,r,n,o,i,a,c,l,d,p,m={},h={},y){this.id=e,this.emailAddress=r,this.role=n,this.roleName=o,this.organizationId=i,this.createdAt=a,this.updatedAt=c,this.expiresAt=l,this.url=d,this.status=p,this.publicMetadata=m,this.privateMetadata=h,this.publicOrganizationData=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new JO(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return r._raw=e,r}},dV=class GO{static{s(this,"_OrganizationMembership")}constructor(e,r,n,o={},i={},a,c,l,d){this.id=e,this.role=r,this.permissions=n,this.publicMetadata=o,this.privateMetadata=i,this.createdAt=a,this.updatedAt=c,this.organization=l,this.publicUserData=d,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new GO(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,HO.fromJSON(e.organization),pV.fromJSON(e.public_user_data));return r._raw=e,r}},pV=class KO{static{s(this,"_OrganizationMembershipPublicUserData")}constructor(e,r,n,o,i,a){this.identifier=e,this.firstName=r,this.lastName=n,this.imageUrl=o,this.hasImage=i,this.userId=a}static fromJSON(e){return new KO(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},mV=class WO{static{s(this,"_OrganizationSettings")}constructor(e,r,n,o,i,a,c,l,d,p){this.enabled=e,this.maxAllowedMemberships=r,this.maxAllowedRoles=n,this.maxAllowedPermissions=o,this.creatorRole=i,this.adminDeleteEnabled=a,this.domainsEnabled=c,this.slugDisabled=l,this.domainsEnrollmentModes=d,this.domainsDefaultRole=p}static fromJSON(e){return new WO(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.slug_disabled,e.domains_enrollment_modes,e.domains_default_role)}},QO=class XO{static{s(this,"_PhoneNumber")}constructor(e,r,n,o,i,a){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=o,this.verification=i,this.linkedTo=a}static fromJSON(e){return new XO(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&fu.fromJSON(e.verification),e.linked_to.map(r=>IO.fromJSON(r)))}},fV=class YO{static{s(this,"_ProxyCheck")}constructor(e,r,n,o,i,a,c){this.id=e,this.domainId=r,this.lastRunAt=n,this.proxyUrl=o,this.successful=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new YO(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},hV=class e${static{s(this,"_RedirectUrl")}constructor(e,r,n,o){this.id=e,this.url=r,this.createdAt=n,this.updatedAt=o}static fromJSON(e){return new e$(e.id,e.url,e.created_at,e.updated_at)}},gV=class t${static{s(this,"_SamlConnection")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k,R){this.id=e,this.name=r,this.domain=n,this.organizationId=o,this.idpEntityId=i,this.idpSsoUrl=a,this.idpCertificate=c,this.idpMetadataUrl=l,this.idpMetadata=d,this.acsUrl=p,this.spEntityId=m,this.spMetadataUrl=h,this.active=y,this.provider=g,this.userCount=f,this.syncUserAttributes=_,this.allowSubdomains=w,this.allowIdpInitiated=b,this.createdAt=S,this.updatedAt=k,this.attributeMapping=R}static fromJSON(e){return new t$(e.id,e.name,e.domain,e.organization_id,e.idp_entity_id,e.idp_sso_url,e.idp_certificate,e.idp_metadata_url,e.idp_metadata,e.acs_url,e.sp_entity_id,e.sp_metadata_url,e.active,e.provider,e.user_count,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at,e.attribute_mapping&&vV.fromJSON(e.attribute_mapping))}},yV=class r${static{s(this,"_SamlAccountConnection")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.name=r,this.domain=n,this.active=o,this.provider=i,this.syncUserAttributes=a,this.allowSubdomains=c,this.allowIdpInitiated=l,this.createdAt=d,this.updatedAt=p}static fromJSON(e){return new r$(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},vV=class n${static{s(this,"_AttributeMapping")}constructor(e,r,n,o){this.userId=e,this.emailAddress=r,this.firstName=n,this.lastName=o}static fromJSON(e){return new n$(e.user_id,e.email_address,e.first_name,e.last_name)}},_V=class o${static{s(this,"_SamlAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.provider=r,this.providerUserId=n,this.active=o,this.emailAddress=i,this.firstName=a,this.lastName=c,this.verification=l,this.samlConnection=d,this.lastAuthenticatedAt=p,this.enterpriseConnectionId=m}static fromJSON(e){return new o$(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&fu.fromJSON(e.verification),e.saml_connection&&yV.fromJSON(e.saml_connection),e.last_authenticated_at??null,e.enterprise_connection_id)}},bV=class i${static{s(this,"_SignInToken")}constructor(e,r,n,o,i,a,c){this.id=e,this.userId=r,this.token=n,this.status=o,this.url=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new i$(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},A_=class s${static{s(this,"_SignUpAttemptVerification")}constructor(e,r){this.nextAction=e,this.supportedStrategies=r}static fromJSON(e){return new s$(e.next_action,e.supported_strategies)}},wV=class a${static{s(this,"_SignUpAttemptVerifications")}constructor(e,r,n,o){this.emailAddress=e,this.phoneNumber=r,this.web3Wallet=n,this.externalAccount=o}static fromJSON(e){return new a$(e.email_address&&A_.fromJSON(e.email_address),e.phone_number&&A_.fromJSON(e.phone_number),e.web3_wallet&&A_.fromJSON(e.web3_wallet),e.external_account)}},SV=class c${static{s(this,"_SignUpAttempt")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k,R,O){this.id=e,this.status=r,this.requiredFields=n,this.optionalFields=o,this.missingFields=i,this.unverifiedFields=a,this.verifications=c,this.username=l,this.emailAddress=d,this.phoneNumber=p,this.web3Wallet=m,this.passwordEnabled=h,this.firstName=y,this.lastName=g,this.customAction=f,this.externalId=_,this.createdSessionId=w,this.createdUserId=b,this.abandonAt=S,this.legalAcceptedAt=k,this.publicMetadata=R,this.unsafeMetadata=O}static fromJSON(e){return new c$(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?wV.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},xV=class u${static{s(this,"_SMSMessage")}constructor(e,r,n,o,i,a,c){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=o,this.status=i,this.phoneNumberId=a,this.data=c}static fromJSON(e){return new u$(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},TV=class l${static{s(this,"_Token")}constructor(e){this.jwt=e}static fromJSON(e){return new l$(e.jwt)}},EV=class d${static{s(this,"_Web3Wallet")}constructor(e,r,n){this.id=e,this.web3Wallet=r,this.verification=n}static fromJSON(e){return new d$(e.id,e.web3_wallet,e.verification&&fu.fromJSON(e.verification))}},kV=class p${static{s(this,"_User")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k={},R={},O={},C=[],$=[],P=[],N=[],D=[],W,H,q=null,X,te,oe){this.id=e,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=o,this.twoFactorEnabled=i,this.banned=a,this.locked=c,this.createdAt=l,this.updatedAt=d,this.imageUrl=p,this.hasImage=m,this.primaryEmailAddressId=h,this.primaryPhoneNumberId=y,this.primaryWeb3WalletId=g,this.lastSignInAt=f,this.externalId=_,this.username=w,this.firstName=b,this.lastName=S,this.publicMetadata=k,this.privateMetadata=R,this.unsafeMetadata=O,this.emailAddresses=C,this.phoneNumbers=$,this.web3Wallets=P,this.externalAccounts=N,this.samlAccounts=D,this.lastActiveAt=W,this.createOrganizationEnabled=H,this.createOrganizationsLimit=q,this.deleteSelfEnabled=X,this.legalAcceptedAt=te,this.locale=oe,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new p$(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(n=>CO.fromJSON(n)),(e.phone_numbers||[]).map(n=>QO.fromJSON(n)),(e.web3_wallets||[]).map(n=>EV.fromJSON(n)),(e.external_accounts||[]).map(n=>X3.fromJSON(n)),(e.saml_accounts||[]).map(n=>_V.fromJSON(n)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at,e.locale);return r._raw=e,r}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},IV=class m${static{s(this,"_WaitlistEntry")}constructor(e,r,n,o,i,a,c){this.id=e,this.emailAddress=r,this.status=n,this.invitation=o,this.createdAt=i,this.updatedAt=a,this.isLocked=c}static fromJSON(e){return new m$(e.id,e.email_address,e.status,e.invitation&&MO.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}},f$=class h${static{s(this,"_Feature")}constructor(e,r,n,o,i){this.id=e,this.name=r,this.description=n,this.slug=o,this.avatarUrl=i}static fromJSON(e){return new h$(e.id,e.name,e.description??null,e.slug,e.avatar_url??null)}},g$=class y${static{s(this,"_BillingPlan")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y){this.id=e,this.name=r,this.slug=n,this.description=o,this.isDefault=i,this.isRecurring=a,this.hasBaseFee=c,this.publiclyVisible=l,this.fee=d,this.annualFee=p,this.annualMonthlyFee=m,this.forPayerType=h,this.features=y}static fromJSON(e){let r=s(n=>n?{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}:null,"formatAmountJSON");return new y$(e.id,e.name,e.slug,e.description??null,e.is_default,e.is_recurring,e.has_base_fee,e.publicly_visible,r(e.fee),r(e.annual_fee),r(e.annual_monthly_fee),e.for_payer_type,(e.features??[]).map(n=>f$.fromJSON(n)))}},v$=class _${static{s(this,"_BillingSubscriptionItem")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w){this.id=e,this.status=r,this.planPeriod=n,this.periodStart=o,this.nextPayment=i,this.amount=a,this.plan=c,this.planId=l,this.createdAt=d,this.updatedAt=p,this.periodEnd=m,this.canceledAt=h,this.pastDueAt=y,this.endedAt=g,this.payerId=f,this.isFreeTrial=_,this.lifetimePaid=w}static fromJSON(e){function r(n){return n&&{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}}return s(r,"formatAmountJSON"),new _$(e.id,e.status,e.plan_period,e.period_start,e.next_payment,r(e.amount)??void 0,e.plan?g$.fromJSON(e.plan):null,e.plan_id??null,e.created_at,e.updated_at,e.period_end,e.canceled_at,e.past_due_at,e.ended_at,e.payer_id,e.is_free_trial,r(e.lifetime_paid)??void 0)}},PV=class b${static{s(this,"_BillingSubscription")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.status=r,this.payerId=n,this.createdAt=o,this.updatedAt=i,this.activeAt=a,this.pastDueAt=c,this.subscriptionItems=l,this.nextPayment=d,this.eligibleForFreeTrial=p}static fromJSON(e){let r=e.next_payment?{date:e.next_payment.date,amount:{amount:e.next_payment.amount.amount,amountFormatted:e.next_payment.amount.amount_formatted,currency:e.next_payment.amount.currency,currencySymbol:e.next_payment.amount.currency_symbol}}:null;return new b$(e.id,e.status,e.payer_id,e.created_at,e.updated_at,e.active_at??null,e.past_due_at??null,(e.subscription_items??[]).map(n=>v$.fromJSON(n)),r,e.eligible_for_free_trial??!1)}};function AV(t){let e,r;return Array.isArray(t)?{data:t.map(o=>C_(o))}:CV(t)?(e=t.data.map(n=>C_(n)),r=t.total_count,{data:e,totalCount:r}):{data:C_(t)}}s(AV,"deserialize");function CV(t){return!t||typeof t!="object"||!("data"in t)?!1:Array.isArray(t.data)&&t.data!==void 0}s(CV,"isPaginated");function OV(t){return t.total_count}s(OV,"getCount");function C_(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return K3.fromJSON(t);switch(t.object){case Je.AccountlessApplication:return L3.fromJSON(t);case Je.ActorToken:return q3.fromJSON(t);case Je.AllowlistIdentifier:return F3.fromJSON(t);case Je.ApiKey:return B3.fromJSON(t);case Je.BlocklistIdentifier:return V3.fromJSON(t);case Je.Client:return Z3.fromJSON(t);case Je.Cookies:return G3.fromJSON(t);case Je.Domain:return W3.fromJSON(t);case Je.EmailAddress:return CO.fromJSON(t);case Je.Email:return Q3.fromJSON(t);case Je.IdpOAuthAccessToken:return Y3.fromJSON(t);case Je.Instance:return eV.fromJSON(t);case Je.InstanceRestrictions:return tV.fromJSON(t);case Je.InstanceSettings:return rV.fromJSON(t);case Je.Invitation:return MO.fromJSON(t);case Je.JwtTemplate:return aV.fromJSON(t);case Je.Machine:return nV.fromJSON(t);case Je.MachineScope:return oV.fromJSON(t);case Je.MachineSecretKey:return iV.fromJSON(t);case Je.M2MToken:return sV.fromJSON(t);case Je.OauthAccessToken:return cV.fromJSON(t);case Je.OAuthApplication:return uV.fromJSON(t);case Je.Organization:return HO.fromJSON(t);case Je.OrganizationInvitation:return lV.fromJSON(t);case Je.OrganizationMembership:return dV.fromJSON(t);case Je.OrganizationSettings:return mV.fromJSON(t);case Je.PhoneNumber:return QO.fromJSON(t);case Je.ProxyCheck:return fV.fromJSON(t);case Je.RedirectUrl:return hV.fromJSON(t);case Je.SamlConnection:return gV.fromJSON(t);case Je.SignInToken:return bV.fromJSON(t);case Je.SignUpAttempt:return SV.fromJSON(t);case Je.Session:return _O.fromJSON(t);case Je.SmsMessage:return xV.fromJSON(t);case Je.Token:return TV.fromJSON(t);case Je.TotalCount:return OV(t);case Je.User:return kV.fromJSON(t);case Je.WaitlistEntry:return IV.fromJSON(t);case Je.BillingPlan:return g$.fromJSON(t);case Je.BillingSubscription:return PV.fromJSON(t);case Je.BillingSubscriptionItem:return v$.fromJSON(t);case Je.Feature:return f$.fromJSON(t);default:return t}}s(C_,"jsonToObject");function du(t){return $V(s(async r=>{let{secretKey:n,machineSecretKey:o,useMachineSecretKey:i=!1,requireSecretKey:a=!0,apiUrl:c=aO,apiVersion:l=cO,userAgent:d=uO,skipApiVersionInUrl:p=!1}=t,{path:m,method:h,queryParams:y,headerParams:g,bodyParams:f,formData:_,options:w}=r,{deepSnakecaseBodyParamKeys:b=!1}=w||{};a&&lO(n);let S=p?ne(c,m):ne(c,l,m),k=new URL(S);if(y){let $=eO({...y});for(let[P,N]of Object.entries($))N&&[N].flat().forEach(D=>k.searchParams.append(P,D))}let R=new Headers({"Clerk-API-Version":U_,[Ee.Headers.UserAgent]:d,...g}),O=Ee.Headers.Authorization;R.has(O)||(i&&o?R.set(O,`Bearer ${o}`):n&&R.set(O,`Bearer ${n}`));let C;try{if(_)C=await ao.fetch(k.href,{method:h,headers:R,body:_});else{R.set("Content-Type","application/json");let N=s(()=>{if(!(h!=="GET"&&f&&Object.keys(f).length>0))return null;let W=s(H=>eO(H,{deep:b}),"formatKeys");return{body:JSON.stringify(Array.isArray(f)?f.map(W):W(f))}},"buildBody");C=await ao.fetch(k.href,{method:h,headers:R,...N()})}let P=await(C?.headers&&C.headers?.get(Ee.Headers.ContentType)===Ee.ContentTypes.Json?C.json():C.text());return C.ok?{...AV(P),errors:null}:{data:null,errors:rO(P),status:C?.status,statusText:C?.statusText,clerkTraceId:O_(P,C?.headers),retryAfter:tO(C?.headers)}}catch($){return $ instanceof Error?{data:null,errors:[{code:"unexpected_error",message:$.message||"Unexpected error"}],clerkTraceId:O_($,C?.headers)}:{data:null,errors:rO($),status:C?.status,statusText:C?.statusText,clerkTraceId:O_($,C?.headers),retryAfter:tO(C?.headers)}}},"requestFn"))}s(du,"buildRequest");function O_(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:e?.get("cf-ray")||""}s(O_,"getTraceId");function tO(t){let e=t?.get("Retry-After");if(!e)return;let r=parseInt(e,10);if(!isNaN(r))return r}s(tO,"getRetryAfter");function rO(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(l_):[]}return[]}s(rO,"parseErrors");function $V(t){return async(...e)=>{let{data:r,errors:n,totalCount:o,status:i,statusText:a,clerkTraceId:c,retryAfter:l}=await t(...e);if(n){let d=new Hp(a||"",{data:[],status:i,clerkTraceId:c,retryAfter:l});throw d.errors=n,d}return typeof o<"u"?{data:r,totalCount:o}:r}}s($V,"withLegacyRequestReturn");function ma(t){let e=du(t);return{__experimental_accountlessApplications:new G9(du({...t,requireSecretKey:!1})),actorTokens:new J9(e),allowlistIdentifiers:new K9(e),apiKeys:new W9(du({...t,skipApiVersionInUrl:!0})),betaFeatures:new X9(e),blocklistIdentifiers:new Y9(e),billing:new A3(e),clients:new e3(e),domains:new t3(e),emailAddresses:new r3(e),idPOAuthAccessToken:new o3(du({...t,skipApiVersionInUrl:!0})),instance:new i3(e),invitations:new s3(e),jwks:new l3(e),jwtTemplates:new d3(e),machines:new a3(e),m2m:new c3(du({...t,skipApiVersionInUrl:!0,requireSecretKey:!1,useMachineSecretKey:!0})),oauthApplications:new m3(e),organizations:new p3(e),phoneNumbers:new f3(e),proxyChecks:new g3(e),redirectUrls:new y3(e),samlConnections:new v3(e),sessions:new _3(e),signInTokens:new b3(e),signUps:new w3(e),testingTokens:new x3(e),users:new T3(e),waitlistEntries:new E3(e),webhooks:new k3(e)}}s(ma,"createBackendApiClient");var L_="mt_",q_="oat_",F_="ak_",RV=[L_,q_,F_];function D_(t){return RV.some(e=>t.startsWith(e))}s(D_,"isMachineTokenByPrefix");function j_(t){if(t.startsWith(L_))return He.M2MToken;if(t.startsWith(q_))return He.OAuthToken;if(t.startsWith(F_))return He.ApiKey;throw new Error("Unknown machine token type")}s(j_,"getMachineTokenType");var w$=s((t,e)=>t?e==="any"?!0:(Array.isArray(e)?e:[e]).includes(t):!1,"isTokenTypeAccepted");var im=s(t=>()=>{let e={...t};return e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}},"createDebug");function NV(t,e,r){let{actor:n,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m}=N1(r),h=ma(t),y=zV({sessionId:o,sessionToken:e,fetcher:s(async(g,f,_)=>(await h.sessions.getToken(g,f||"",_)).jwt,"fetcher")});return{tokenType:He.SessionToken,actor:n,sessionClaims:r,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m,getToken:y,has:x_({orgId:c,orgRole:l,orgPermissions:p,userId:a,factorVerificationAge:m,features:r.fea||"",plans:r.pla||""}),debug:im({...t,sessionToken:e}),isAuthenticated:!0}}s(NV,"signedInAuthObject");function S$(t,e){return{tokenType:He.SessionToken,sessionClaims:null,sessionId:null,sessionStatus:e??null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:im(t),isAuthenticated:!1}}s(S$,"signedOutAuthObject");function DV(t,e,r,n){let o={id:r.id,subject:r.subject,getToken:s(()=>Promise.resolve(e),"getToken"),has:s(()=>!1,"has"),debug:im(n),isAuthenticated:!0};switch(t){case He.ApiKey:{let i=r;return{...o,tokenType:t,name:i.name,claims:i.claims,scopes:i.scopes,userId:i.subject.startsWith("user_")?i.subject:null,orgId:i.subject.startsWith("org_")?i.subject:null}}case He.M2MToken:{let i=r;return{...o,tokenType:t,claims:i.claims,scopes:i.scopes,machineId:i.subject}}case He.OAuthToken:{let i=r;return{...o,tokenType:t,scopes:i.scopes,userId:i.subject,clientId:i.clientId}}default:throw new Error(`Invalid token type: ${t}`)}}s(DV,"authenticatedMachineObject");function jV(t,e){let r={id:null,subject:null,scopes:null,has:s(()=>!1,"has"),getToken:s(()=>Promise.resolve(null),"getToken"),debug:im(e),isAuthenticated:!1};switch(t){case He.ApiKey:return{...r,tokenType:t,name:null,claims:null,scopes:null,userId:null,orgId:null};case He.M2MToken:return{...r,tokenType:t,claims:null,scopes:null,machineId:null};case He.OAuthToken:return{...r,tokenType:t,scopes:null,userId:null,clientId:null};default:throw new Error(`Invalid token type: ${t}`)}}s(jV,"unauthenticatedMachineObject");function MV(){return{isAuthenticated:!1,tokenType:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:s(()=>({}),"debug")}}s(MV,"invalidTokenAuthObject");var zV=s(t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(o={})=>n?o.template||o.expiresInSeconds!==void 0?e(n,o.template,o.expiresInSeconds):r:null},"createGetToken");var mu={SignedIn:"signed-in",SignedOut:"signed-out",Handshake:"handshake"},Wt={ClientUATWithoutSessionToken:"client-uat-but-no-session-token",DevBrowserMissing:"dev-browser-missing",DevBrowserSync:"dev-browser-sync",PrimaryRespondsToSyncing:"primary-responds-to-syncing",PrimaryDomainCrossOriginSync:"primary-domain-cross-origin-sync",SatelliteCookieNeedsSyncing:"satellite-needs-syncing",SessionTokenAndUATMissing:"session-token-and-uat-missing",SessionTokenMissing:"session-token-missing",SessionTokenExpired:"session-token-expired",SessionTokenIATBeforeClientUAT:"session-token-iat-before-client-uat",SessionTokenNBF:"session-token-nbf",SessionTokenIatInTheFuture:"session-token-iat-in-the-future",SessionTokenWithoutClientUAT:"session-token-but-no-client-uat",ActiveOrganizationMismatch:"active-organization-mismatch",TokenTypeMismatch:"token-type-mismatch",UnexpectedError:"unexpected-error"};function Si(t){let{authenticateContext:e,headers:r=new Headers,token:n}=t,o=s((({treatPendingAsSignedOut:i=!0}={})=>{if(t.tokenType===He.SessionToken){let{sessionClaims:c}=t,l=NV(e,n,c);return i&&l.sessionStatus==="pending"?S$(void 0,l.sessionStatus):l}let{machineData:a}=t;return DV(t.tokenType,n,a,e)}),"toAuth");return{status:mu.SignedIn,reason:null,message:null,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!0,isAuthenticated:!0,tokenType:t.tokenType,toAuth:o,headers:r,token:n}}s(Si,"signedIn");function wn(t){let{authenticateContext:e,headers:r=new Headers,reason:n,message:o="",tokenType:i}=t,a=s((()=>i===He.SessionToken?S$({...e,status:mu.SignedOut,reason:n,message:o}):jV(i,{reason:n,message:o,headers:r})),"toAuth");return B_({status:mu.SignedOut,reason:n,message:o,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:i,toAuth:a,headers:r,token:null})}s(wn,"signedOut");function UV(t,e,r="",n){return B_({status:mu.Handshake,reason:e,message:r,publishableKey:t.publishableKey||"",isSatellite:t.isSatellite||!1,domain:t.domain||"",proxyUrl:t.proxyUrl||"",signInUrl:t.signInUrl||"",signUpUrl:t.signUpUrl||"",afterSignInUrl:t.afterSignInUrl||"",afterSignUpUrl:t.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:He.SessionToken,toAuth:s(()=>null,"toAuth"),headers:n,token:null})}s(UV,"handshake");function LV(){let t=MV();return B_({status:mu.SignedOut,reason:Wt.TokenTypeMismatch,message:"",proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",signInUrl:"",signUpUrl:"",afterSignInUrl:"",afterSignUpUrl:"",isSignedIn:!1,isAuthenticated:!1,tokenType:null,toAuth:s(()=>t,"toAuth"),headers:new Headers,token:null})}s(LV,"signedOutInvalidToken");var B_=s(t=>{let e=new Headers(t.headers||{});if(t.message)try{e.set(Ee.Headers.AuthMessage,t.message)}catch{}if(t.reason)try{e.set(Ee.Headers.AuthReason,t.reason)}catch{}if(t.status)try{e.set(Ee.Headers.AuthStatus,t.status)}catch{}return t.headers=e,t},"withDebugHeaders"),qV=class extends URL{static{s(this,"ClerkUrl")}isCrossOrigin(t){return this.origin!==new URL(t.toString()).origin}},nO=s((...t)=>new qV(...t),"createClerkUrl"),oO=class extends Request{static{s(this,"ClerkRequest")}constructor(t,e){let r=typeof t!="string"&&"url"in t?t.url:String(t);super(r,e||typeof t=="string"?void 0:t),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(t){let e=new URL(t.url),r=t.headers.get(Ee.Headers.ForwardedProto),n=t.headers.get(Ee.Headers.ForwardedHost),o=t.headers.get(Ee.Headers.Host),i=e.protocol,a=this.getFirstValueFromHeader(n)??o,c=this.getFirstValueFromHeader(r)??i?.replace(/[:/]/,""),l=a&&c?`${c}://${a}`:e.origin;return l===e.origin?nO(e):nO(e.pathname+e.search,l)}getFirstValueFromHeader(t){return t?.split(",")[0]}parseCookies(t){let e=(0,x$.parse)(this.decodeCookieValue(t.headers.get("cookie")||""));return new Map(Object.entries(e))}decodeCookieValue(t){return t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},FV=s((...t)=>t[0]instanceof oO?t[0]:new oO(...t),"createClerkRequest"),T$=s(t=>t.split(";")[0]?.split("=")[0],"getCookieName"),E$=s(t=>t.split(";")[0]?.split("=")[1],"getCookieValue"),sm={},M_=0;function z_(t){return sm[t]}s(z_,"getFromCache");function BV(){return Object.values(sm)}s(BV,"getCacheValues");function k$(t,e,r=!0){sm[t]=e,M_=r?Date.now():-1}s(k$,"setInCache");var VV="-----BEGIN PUBLIC KEY-----",HV="-----END PUBLIC KEY-----",ZV="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",JV="IDAQAB";function I$(t){let{kid:e,pem:r}=t,n=`local-${e}`,o=z_(n);if(o)return o;if(!r)throw new yt({action:pr.SetClerkJWTKey,message:"Missing local JWK.",reason:Ye.LocalJWKMissing});let i=r.replace(/\r\n|\n|\r/g,"").replace(VV,"").replace(HV,"").replace(ZV,"").replace(JV,"").replace(/\+/g,"-").replace(/\//g,"_"),a={kid:n,kty:"RSA",alg:"RS256",n:i,e:"AQAB"};return k$(n,a,!1),a}s(I$,"loadClerkJwkFromPem");async function P$(t){let{secretKey:e,apiUrl:r=aO,apiVersion:n=cO,kid:o,skipJwksCache:i}=t;if(i||KV()||!z_(o)){if(!e)throw new yt({action:pr.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:Ye.RemoteJWKFailedToLoad});let c=s(()=>GV(r,e,n),"fetcher"),{keys:l}=await Bp(c);if(!l||!l.length)throw new yt({action:pr.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:Ye.RemoteJWKFailedToLoad});l.forEach(d=>k$(d.kid,d))}let a=z_(o);if(!a){let l=BV().map(d=>d.kid).sort().join(", ");throw new yt({action:`Go to your Dashboard and validate your secret and public keys are correct. ${pr.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${o}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${l}`,reason:Ye.JWKKidMismatch})}return a}s(P$,"loadClerkJWKFromRemote");async function GV(t,e,r){if(!e)throw new yt({action:pr.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:Ye.RemoteJWKFailedToLoad});let n=new URL(t);n.pathname=ne(n.pathname,r,"/jwks");let o=await ao.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Clerk-API-Version":U_,"Content-Type":"application/json","User-Agent":uO}});if(!o.ok){let i=await o.json(),a=WV(i?.errors,x1.InvalidSecretKey);if(a){let c=Ye.InvalidSecretKey;throw new yt({action:pr.ContactSupport,message:a.message,reason:c})}throw new yt({action:pr.ContactSupport,message:`Error loading Clerk JWKS from ${n.href} with code=${o.status}`,reason:Ye.RemoteJWKFailedToLoad})}return o.json()}s(GV,"fetchJWKSFromBAPI");function KV(){if(M_===-1)return!1;let t=Date.now()-M_>=z9*1e3;return t&&(sm={}),t}s(KV,"cacheHasExpired");var WV=s((t,e)=>t?t.find(r=>r.code===e):null,"getErrorObjectByCode");async function xi(t,e){let{data:r,errors:n}=Dn(t);if(n)return{errors:n};let{header:o}=r,{kid:i}=o;try{let a;if(e.jwtKey)a=I$({kid:i,pem:e.jwtKey});else if(e.secretKey)a=await P$({...e,kid:i});else return{errors:[new yt({action:pr.SetClerkJWTKey,message:"Failed to resolve JWK during verification.",reason:Ye.JWKFailedToResolve})]};return await A1(t,{...e,key:a})}catch(a){return{errors:[a]}}}s(xi,"verifyToken");function V_(t,e,r){if(m_(e)){let n,o;switch(e.status){case 401:n=su.InvalidSecretKey,o=e.errors[0]?.message||"Invalid secret key";break;case 404:n=su.TokenInvalid,o=r;break;default:n=su.UnexpectedError,o="Unexpected error"}return{data:void 0,tokenType:t,errors:[new Zp({message:o,code:n,status:e.status})]}}return{data:void 0,tokenType:t,errors:[new Zp({message:"Unexpected error",code:su.UnexpectedError,status:e.status})]}}s(V_,"handleClerkAPIError");async function QV(t,e){try{return{data:await ma(e).m2m.verifyToken({token:t}),tokenType:He.M2MToken,errors:void 0}}catch(r){return V_(He.M2MToken,r,"Machine token not found")}}s(QV,"verifyM2MToken");async function XV(t,e){try{return{data:await ma(e).idPOAuthAccessToken.verifyAccessToken(t),tokenType:He.OAuthToken,errors:void 0}}catch(r){return V_(He.OAuthToken,r,"OAuth token not found")}}s(XV,"verifyOAuthToken");async function YV(t,e){try{return{data:await ma(e).apiKeys.verifySecret(t),tokenType:He.ApiKey,errors:void 0}}catch(r){return V_(He.ApiKey,r,"API key not found")}}s(YV,"verifyAPIKey");async function iO(t,e){if(t.startsWith(L_))return QV(t,e);if(t.startsWith(q_))return XV(t,e);if(t.startsWith(F_))return YV(t,e);throw new Error("Unknown machine token type")}s(iO,"verifyMachineAuthToken");async function eH(t,{key:e}){let{data:r,errors:n}=Dn(t);if(n)throw n[0];let{header:o,payload:i}=r,{typ:a,alg:c}=o;v_(a),__(c);let{data:l,errors:d}=await b_(r,e);if(d)throw new yt({reason:Ye.TokenVerificationFailed,message:`Error verifying handshake token. ${d[0]}`});if(!l)throw new yt({reason:Ye.TokenInvalidSignature,message:"Handshake signature is invalid."});return i}s(eH,"verifyHandshakeJwt");async function tH(t,e){let{secretKey:r,apiUrl:n,apiVersion:o,jwksCacheTtlInMs:i,jwtKey:a,skipJwksCache:c}=e,{data:l,errors:d}=Dn(t);if(d)throw d[0];let{kid:p}=l.header,m;if(a)m=I$({kid:p,pem:a});else if(r)m=await P$({secretKey:r,apiUrl:n,apiVersion:o,kid:p,jwksCacheTtlInMs:i,skipJwksCache:c});else throw new yt({action:pr.SetClerkJWTKey,message:"Failed to resolve JWK during handshake verification.",reason:Ye.JWKFailedToResolve});return eH(t,{key:m})}s(tH,"verifyHandshakeToken");var rH=class{static{s(this,"HandshakeService")}constructor(t,e,r){this.authenticateContext=t,this.options=e,this.organizationMatcher=r}isRequestEligibleForHandshake(){let{accept:t,secFetchDest:e}=this.authenticateContext;return!!(e==="document"||e==="iframe"||!e&&t?.startsWith("text/html"))}buildRedirectToHandshake(t){if(!this.authenticateContext?.clerkUrl)throw new Error("Missing clerkUrl in authenticateContext");let e=this.removeDevBrowserFromURL(this.authenticateContext.clerkUrl),r=this.authenticateContext.frontendApi.startsWith("http")?this.authenticateContext.frontendApi:`https://${this.authenticateContext.frontendApi}`;r=r.replace(/\/+$/,"")+"/";let n=new URL("v1/client/handshake",r);n.searchParams.append("redirect_url",e?.href||""),n.searchParams.append("__clerk_api_version",U_),n.searchParams.append(Ee.QueryParameters.SuffixedCookies,this.authenticateContext.usesSuffixedCookies().toString()),n.searchParams.append(Ee.QueryParameters.HandshakeReason,t),n.searchParams.append(Ee.QueryParameters.HandshakeFormat,"nonce"),this.authenticateContext.instanceType==="development"&&this.authenticateContext.devBrowserToken&&n.searchParams.append(Ee.QueryParameters.DevBrowser,this.authenticateContext.devBrowserToken);let o=this.getOrganizationSyncTarget(this.authenticateContext.clerkUrl,this.organizationMatcher);return o&&this.getOrganizationSyncQueryParams(o).forEach((a,c)=>{n.searchParams.append(c,a)}),new Headers({[Ee.Headers.Location]:n.href})}async getCookiesFromHandshake(){let t=[];if(this.authenticateContext.handshakeNonce)try{let e=await this.authenticateContext.apiClient?.clients.getHandshakePayload({nonce:this.authenticateContext.handshakeNonce});e&&t.push(...e.directives)}catch(e){console.error("Clerk: HandshakeService: error getting handshake payload:",e)}else if(this.authenticateContext.handshakeToken){let e=await tH(this.authenticateContext.handshakeToken,this.authenticateContext);e&&Array.isArray(e.handshake)&&t.push(...e.handshake)}return t}async resolveHandshake(){let t=new Headers({"Access-Control-Allow-Origin":"null","Access-Control-Allow-Credentials":"true"}),e=await this.getCookiesFromHandshake(),r="";if(e.forEach(i=>{t.append("Set-Cookie",i),T$(i).startsWith(Ee.Cookies.Session)&&(r=E$(i))}),this.authenticateContext.instanceType==="development"){let i=new URL(this.authenticateContext.clerkUrl);i.searchParams.delete(Ee.QueryParameters.Handshake),i.searchParams.delete(Ee.QueryParameters.HandshakeHelp),i.searchParams.delete(Ee.QueryParameters.DevBrowser),i.searchParams.delete(Ee.QueryParameters.HandshakeNonce),t.append(Ee.Headers.Location,i.toString()),t.set(Ee.Headers.CacheControl,"no-store")}if(r==="")return wn({tokenType:He.SessionToken,authenticateContext:this.authenticateContext,reason:Wt.SessionTokenMissing,message:"",headers:t});let{data:n,errors:[o]=[]}=await xi(r,this.authenticateContext);if(n)return Si({tokenType:He.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:n,headers:t,token:r});if(this.authenticateContext.instanceType==="development"&&(o?.reason===Ye.TokenExpired||o?.reason===Ye.TokenNotActiveYet||o?.reason===Ye.TokenIatInTheFuture)){let i=new yt({action:o.action,message:o.message,reason:o.reason});i.tokenCarrier="cookie",console.error(`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will attempt to account for the clock skew in development.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${i.getFullMessage()}`);let{data:a,errors:[c]=[]}=await xi(r,{...this.authenticateContext,clockSkewInMs:864e5});if(a)return Si({tokenType:He.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:a,headers:t,token:r});throw new Error(c?.message||"Clerk: Handshake retry failed.")}throw new Error(o?.message||"Clerk: Handshake failed.")}handleTokenVerificationErrorInDevelopment(t){if(t.reason===Ye.TokenInvalidSignature){let e="Clerk: Handshake token verification failed due to an invalid signature. If you have switched Clerk keys locally, clear your cookies and try again.";throw new Error(e)}throw new Error(`Clerk: Handshake token verification failed: ${t.getFullMessage()}.`)}checkAndTrackRedirectLoop(t){if(this.authenticateContext.handshakeRedirectLoopCounter===3)return!0;let e=this.authenticateContext.handshakeRedirectLoopCounter+1,r=Ee.Cookies.RedirectCount;return t.append("Set-Cookie",`${r}=${e}; SameSite=Lax; HttpOnly; Max-Age=2`),!1}removeDevBrowserFromURL(t){let e=new URL(t);return e.searchParams.delete(Ee.QueryParameters.DevBrowser),e.searchParams.delete(Ee.QueryParameters.LegacyDevBrowser),e}getOrganizationSyncTarget(t,e){return e.findTarget(t)}getOrganizationSyncQueryParams(t){let e=new Map;return t.type==="personalAccount"&&e.set("organization_id",""),t.type==="organization"&&(t.organizationId&&e.set("organization_id",t.organizationId),t.organizationSlug&&e.set("organization_id",t.organizationSlug)),e}},nH=class{static{s(this,"OrganizationMatcher")}constructor(t){this.organizationPattern=this.createMatcher(t?.organizationPatterns),this.personalAccountPattern=this.createMatcher(t?.personalAccountPatterns)}createMatcher(t){if(!t)return null;try{return T_(t)}catch(e){throw new Error(`Invalid pattern "${t}": ${e}`)}}findTarget(t){let e=this.findOrganizationTarget(t);return e||this.findPersonalAccountTarget(t)}findOrganizationTarget(t){if(!this.organizationPattern)return null;try{let e=this.organizationPattern(t.pathname);if(!e||!("params"in e))return null;let r=e.params;return r.id?{type:"organization",organizationId:r.id}:r.slug?{type:"organization",organizationSlug:r.slug}:null}catch(e){return console.error("Failed to match organization pattern:",e),null}}findPersonalAccountTarget(t){if(!this.personalAccountPattern)return null;try{return this.personalAccountPattern(t.pathname)?{type:"personalAccount"}:null}catch(e){return console.error("Failed to match personal account pattern:",e),null}}},jn={NonEligibleNoCookie:"non-eligible-no-refresh-cookie",NonEligibleNonGet:"non-eligible-non-get",InvalidSessionToken:"invalid-session-token",MissingApiClient:"missing-api-client",MissingSessionToken:"missing-session-token",MissingRefreshToken:"missing-refresh-token",ExpiredSessionTokenDecodeFailed:"expired-session-token-decode-failed",ExpiredSessionTokenMissingSidClaim:"expired-session-token-missing-sid-claim",FetchError:"fetch-error",UnexpectedSDKError:"unexpected-sdk-error",UnexpectedBAPIError:"unexpected-bapi-error"};function oH(t,e){if(!t&&Lp(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}s(oH,"assertSignInUrlExists");function iH(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}s(iH,"assertProxyUrlOrDomain");function sH(t,e){let r;try{r=new URL(t)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===e)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}s(sH,"assertSignInUrlFormatAndOrigin");function aH(t){if(!t.machineSecretKey&&!t.secretKey)throw new Error("Machine token authentication requires either a Machine secret key or a Clerk secret key. Ensure a Clerk secret key or Machine secret key is set.")}s(aH,"assertMachineSecretOrSecretKey");function cH(t,e,r){return t.reason===Ye.TokenExpired&&!!e.refreshTokenInCookie&&r.method==="GET"}s(cH,"isRequestEligibleForRefresh");function sO(t,e,r){return w$(t,e)?null:wn({tokenType:typeof e=="string"?e:t,authenticateContext:r,reason:Wt.TokenTypeMismatch})}s(sO,"checkTokenTypeMismatch");function uH(t,e){let r=null,{tokenInHeader:n}=e;n&&(D_(n)?r=j_(n):r=He.SessionToken);let o=r??He.SessionToken;return w$(o,t)}s(uH,"isTokenTypeInAcceptedArray");var lH=s((async(t,e)=>{let r=await H9(FV(t),e),n=e.acceptsToken??He.SessionToken;n!==He.M2MToken&&(lO(r.secretKey),r.isSatellite&&(oH(r.signInUrl,r.secretKey),r.signInUrl&&r.origin&&sH(r.signInUrl,r.origin),iH(r.proxyUrl||r.domain))),n===He.M2MToken&&aH(r);let o=new nH(e.organizationSyncOptions),i=new rH(r,{organizationSyncOptions:e.organizationSyncOptions},o);async function a(_){if(!e.apiClient)return{data:null,error:{message:"An apiClient is needed to perform token refresh.",cause:{reason:jn.MissingApiClient}}};let{sessionToken:w,refreshTokenInCookie:b}=_;if(!w)return{data:null,error:{message:"Session token must be provided.",cause:{reason:jn.MissingSessionToken}}};if(!b)return{data:null,error:{message:"Refresh token must be provided.",cause:{reason:jn.MissingRefreshToken}}};let{data:S,errors:k}=Dn(w);if(!S||k)return{data:null,error:{message:"Unable to decode the expired session token.",cause:{reason:jn.ExpiredSessionTokenDecodeFailed,errors:k}}};if(!S?.payload?.sid)return{data:null,error:{message:"Expired session token is missing the `sid` claim.",cause:{reason:jn.ExpiredSessionTokenMissingSidClaim}}};try{return{data:(await e.apiClient.sessions.refreshSession(S.payload.sid,{format:"cookie",suffixed_cookies:_.usesSuffixedCookies(),expired_token:w||"",refresh_token:b||"",request_origin:_.clerkUrl.origin,request_headers:Object.fromEntries(Array.from(t.headers.entries()).map(([O,C])=>[O,[C]]))})).cookies,error:null}}catch(R){return R?.errors?.length?R.errors[0].code==="unexpected_error"?{data:null,error:{message:"Fetch unexpected error",cause:{reason:jn.FetchError,errors:R.errors}}}:{data:null,error:{message:R.errors[0].code,cause:{reason:R.errors[0].code,errors:R.errors}}}:{data:null,error:{message:"Unexpected Server/BAPI error",cause:{reason:jn.UnexpectedBAPIError,errors:[R]}}}}}s(a,"refreshToken");async function c(_){let{data:w,error:b}=await a(_);if(!w||w.length===0)return{data:null,error:b};let S=new Headers,k="";w.forEach(C=>{S.append("Set-Cookie",C),T$(C).startsWith(Ee.Cookies.Session)&&(k=E$(C))});let{data:R,errors:O}=await xi(k,_);return O?{data:null,error:{message:"Clerk: unable to verify refreshed session token.",cause:{reason:jn.InvalidSessionToken,errors:O}}}:{data:{jwtPayload:R,sessionToken:k,headers:S},error:null}}s(c,"attemptRefresh");function l(_,w,b,S){if(!i.isRequestEligibleForHandshake())return wn({tokenType:He.SessionToken,authenticateContext:_,reason:w,message:b});let k=S??i.buildRedirectToHandshake(w);return k.get(Ee.Headers.Location)&&k.set(Ee.Headers.CacheControl,"no-store"),i.checkAndTrackRedirectLoop(k)?(console.log("Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard."),wn({tokenType:He.SessionToken,authenticateContext:_,reason:w,message:b})):UV(_,w,b,k)}s(l,"handleMaybeHandshakeStatus");function d(_,w){let b=o.findTarget(_.clerkUrl);if(!b)return null;let S=!1;if(b.type==="organization"&&(b.organizationSlug&&b.organizationSlug!==w.orgSlug&&(S=!0),b.organizationId&&b.organizationId!==w.orgId&&(S=!0)),b.type==="personalAccount"&&w.orgId&&(S=!0),!S)return null;if(_.handshakeRedirectLoopCounter>=3)return console.warn("Clerk: Organization activation handshake loop detected. This is likely due to an invalid organization ID or slug. Skipping organization activation."),null;let k=l(_,Wt.ActiveOrganizationMismatch,"");return k.status!=="handshake"?null:k}s(d,"handleMaybeOrganizationSyncHandshake");async function p(){let{tokenInHeader:_}=r;try{let{data:w,errors:b}=await xi(_,r);if(b)throw b[0];return Si({tokenType:He.SessionToken,authenticateContext:r,sessionClaims:w,headers:new Headers,token:_})}catch(w){return h(w,"header")}}s(p,"authenticateRequestWithTokenInHeader");async function m(){let _=r.clientUat,w=!!r.sessionTokenInCookie,b=!!r.devBrowserToken;if(r.handshakeNonce||r.handshakeToken)try{return await i.resolveHandshake()}catch(C){C instanceof yt&&r.instanceType==="development"?i.handleTokenVerificationErrorInDevelopment(C):console.error("Clerk: unable to resolve handshake:",C)}let S=r.isSatellite&&r.secFetchDest==="document";if(r.instanceType==="production"&&S)return l(r,Wt.SatelliteCookieNeedsSyncing,"");if(r.instanceType==="development"&&S&&!r.clerkUrl.searchParams.has(Ee.QueryParameters.ClerkSynced)){let C=new URL(r.signInUrl);C.searchParams.append(Ee.QueryParameters.ClerkRedirectUrl,r.clerkUrl.toString());let $=new Headers({[Ee.Headers.Location]:C.toString()});return l(r,Wt.SatelliteCookieNeedsSyncing,"",$)}let k=new URL(r.clerkUrl).searchParams.get(Ee.QueryParameters.ClerkRedirectUrl);if(r.instanceType==="development"&&!r.isSatellite&&k){let C=new URL(k);r.devBrowserToken&&C.searchParams.append(Ee.QueryParameters.DevBrowser,r.devBrowserToken),C.searchParams.append(Ee.QueryParameters.ClerkSynced,"true");let $=new Headers({[Ee.Headers.Location]:C.toString()});return l(r,Wt.PrimaryRespondsToSyncing,"",$)}if(r.instanceType==="development"&&r.clerkUrl.searchParams.has(Ee.QueryParameters.DevBrowser))return l(r,Wt.DevBrowserSync,"");if(r.instanceType==="development"&&!b)return l(r,Wt.DevBrowserMissing,"");if(!_&&!w)return wn({tokenType:He.SessionToken,authenticateContext:r,reason:Wt.SessionTokenAndUATMissing});if(!_&&w)return l(r,Wt.SessionTokenWithoutClientUAT,"");if(_&&!w)return l(r,Wt.ClientUATWithoutSessionToken,"");let{data:R,errors:O}=Dn(r.sessionTokenInCookie);if(O)return h(O[0],"cookie");if(R.payload.iat<r.clientUat)return l(r,Wt.SessionTokenIATBeforeClientUAT,"");try{let{data:C,errors:$}=await xi(r.sessionTokenInCookie,r);if($)throw $[0];let P=Si({tokenType:He.SessionToken,authenticateContext:r,sessionClaims:C,headers:new Headers,token:r.sessionTokenInCookie});if(!r.isSatellite&&r.secFetchDest==="document"&&r.isCrossOriginReferrer()&&!r.isKnownClerkReferrer()&&r.handshakeRedirectLoopCounter===0)return l(r,Wt.PrimaryDomainCrossOriginSync,"Cross-origin request from satellite domain requires handshake");let D=P.toAuth();if(D.userId){let W=d(r,D);if(W)return W}return P}catch(C){return h(C,"cookie")}return wn({tokenType:He.SessionToken,authenticateContext:r,reason:Wt.UnexpectedError})}s(m,"authenticateRequestWithTokenInCookie");async function h(_,w){if(!(_ instanceof yt))return wn({tokenType:He.SessionToken,authenticateContext:r,reason:Wt.UnexpectedError});let b;if(cH(_,r,t)){let{data:k,error:R}=await c(r);if(k)return Si({tokenType:He.SessionToken,authenticateContext:r,sessionClaims:k.jwtPayload,headers:k.headers,token:k.sessionToken});R?.cause?.reason?b=R.cause.reason:b=jn.UnexpectedSDKError}else t.method!=="GET"?b=jn.NonEligibleNonGet:r.refreshTokenInCookie?b=null:b=jn.NonEligibleNoCookie;return _.tokenCarrier=w,[Ye.TokenExpired,Ye.TokenNotActiveYet,Ye.TokenIatInTheFuture].includes(_.reason)?l(r,pH({tokenError:_.reason,refreshError:b}),_.getFullMessage()):wn({tokenType:He.SessionToken,authenticateContext:r,reason:_.reason,message:_.getFullMessage()})}s(h,"handleSessionTokenError");function y(_,w){return w instanceof Zp?wn({tokenType:_,authenticateContext:r,reason:w.code,message:w.getFullMessage()}):wn({tokenType:_,authenticateContext:r,reason:Wt.UnexpectedError})}s(y,"handleMachineError");async function g(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(!D_(_))return wn({tokenType:n,authenticateContext:r,reason:Wt.TokenTypeMismatch,message:""});let w=j_(_),b=sO(w,n,r);if(b)return b;let{data:S,tokenType:k,errors:R}=await iO(_,r);return R?y(k,R[0]):Si({tokenType:k,authenticateContext:r,machineData:S,token:_})}s(g,"authenticateMachineRequestWithTokenInHeader");async function f(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(D_(_)){let S=j_(_),k=sO(S,n,r);if(k)return k;let{data:R,tokenType:O,errors:C}=await iO(_,r);return C?y(O,C[0]):Si({tokenType:O,authenticateContext:r,machineData:R,token:_})}let{data:w,errors:b}=await xi(_,r);return b?h(b[0],"header"):Si({tokenType:He.SessionToken,authenticateContext:r,sessionClaims:w,token:_})}return s(f,"authenticateAnyRequestWithTokenInHeader"),Array.isArray(n)&&!uH(n,r)?LV():r.tokenInHeader?n==="any"?f():n===He.SessionToken?p():g():n===He.OAuthToken||n===He.ApiKey||n===He.M2MToken?wn({tokenType:n,authenticateContext:r,reason:"No token in header"}):m()}),"authenticateRequest"),dH=s(t=>{let{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}=t;return{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}},"debugRequestState"),pH=s(({tokenError:t,refreshError:e})=>{switch(t){case Ye.TokenExpired:return`${Wt.SessionTokenExpired}-refresh-${e}`;case Ye.TokenNotActiveYet:return Wt.SessionTokenNBF;case Ye.TokenIatInTheFuture:return Wt.SessionTokenIatInTheFuture;default:return Wt.UnexpectedError}},"convertTokenVerificationErrorReasonToAuthErrorReason"),mH={secretKey:"",machineSecretKey:"",jwtKey:"",apiUrl:void 0,apiVersion:void 0,proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",audience:""};function A$(t){let e=L1(mH,t.options),r=t.apiClient;return{authenticateRequest:s((o,i={})=>{let{apiUrl:a,apiVersion:c}=e,l=L1(e,i);return lH(o,{...i,...l,apiUrl:a,apiVersion:c,apiClient:r})},"authenticateRequest2"),debugRequestState:dH}}s(A$,"createAuthenticateRequest");function C$(t){return async(...e)=>{let{data:r,errors:n}=await t(...e);if(n)throw n[0];return r}}s(C$,"withLegacyReturn");function fH(t){return t?t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}s(fH,"snakeToCamel");function hH(t){return t?t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}s(hH,"camelToSnake");var O$=s(t=>{let e=s(r=>{if(!r)return r;if(Array.isArray(r))return r.map(i=>typeof i=="object"||Array.isArray(i)?e(i):i);let n={...r},o=Object.keys(n);for(let i of o){let a=t(i.toString());a!==i&&(n[a]=n[i],delete n[i]),typeof n[a]=="object"&&(n[a]=e(n[a]))}return n},"deepTransform");return e},"createDeepObjectTransformer"),Eke=O$(hH),kke=O$(fH);function H_(t){if(typeof t=="boolean")return t;if(t==null)return!1;if(typeof t=="string"){if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1}let e=parseInt(t,10);return isNaN(e)?!1:e>0}s(H_,"isTruthy");var gH=864e5,yH=class{static{s(this,"TelemetryEventThrottler")}#e;#t=gH;constructor(t){this.#e=t}isEventThrottled(t){let e=Date.now(),r=this.#r(t),n=this.#e.getItem(r);return n?e-n>this.#t?(this.#e.setItem(r,e),!1):!0:(this.#e.setItem(r,e),!1)}#r(t){let{sk:e,pk:r,payload:n,...o}=t,i={...n,...o};return JSON.stringify(Object.keys({...n,...o}).sort().map(a=>i[a]))}},$$=class{static{s(this,"LocalStorageThrottlerCache")}#e="clerk_telemetry_throttler";getItem(t){return this.#t()[t]}setItem(t,e){try{let r=this.#t();r[t]=e,localStorage.setItem(this.#e,JSON.stringify(r))}catch(r){r instanceof DOMException&&(r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&localStorage.length>0&&localStorage.removeItem(this.#e)}}removeItem(t){try{let e=this.#t();delete e[t],localStorage.setItem(this.#e,JSON.stringify(e))}catch{}}#t(){try{let t=localStorage.getItem(this.#e);return t?JSON.parse(t):{}}catch{return{}}}static isSupported(){return typeof window<"u"&&!!window.localStorage}},vH=class{static{s(this,"InMemoryThrottlerCache")}#e=new Map;#t=1e4;getItem(t){if(this.#e.size>this.#t){this.#e.clear();return}return this.#e.get(t)}setItem(t,e){this.#e.set(t,e)}removeItem(t){this.#e.delete(t)}};function _H(t){return typeof t=="object"&&t!==null&&"constructor"in t&&typeof t.constructor=="function"}s(_H,"isWindowClerkWithMetadata");var bH=new Set(["error","warn","info","debug","trace"]),Z_={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},J_=class{static{s(this,"TelemetryCollector")}#e;#t;#r={};#i=[];#n=null;constructor(t){this.#e={maxBufferSize:t.maxBufferSize??Z_.maxBufferSize,samplingRate:t.samplingRate??Z_.samplingRate,perEventSampling:t.perEventSampling??!0,disabled:t.disabled??!1,debug:t.debug??!1,endpoint:Z_.endpoint},!t.clerkVersion&&typeof window>"u"?this.#r.clerkVersion="":this.#r.clerkVersion=t.clerkVersion??"",this.#r.sdk=t.sdk,this.#r.sdkVersion=t.sdkVersion,this.#r.publishableKey=t.publishableKey??"";let e=_i(t.publishableKey);e&&(this.#r.instanceType=e.instanceType),t.secretKey&&(this.#r.secretKey=t.secretKey.substring(0,16)),this.#t=new yH($$.isSupported()?new $$:new vH)}get isEnabled(){return!(this.#r.instanceType!=="development"||this.#e.disabled||typeof process<"u"&&process.env&&H_(process.env.CLERK_TELEMETRY_DISABLED)||typeof window<"u"&&window?.navigator?.webdriver)}get isDebug(){return this.#e.debug||typeof process<"u"&&process.env&&H_(process.env.CLERK_TELEMETRY_DEBUG)}record(t){try{let e=this.#a(t.event,t.payload);if(this.#p(e.event,e),!this.#o(e,t.eventSamplingRate))return;this.#i.push({kind:"event",value:e}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(t){try{if(!this.#d(t))return;let e=typeof t?.level=="string"&&bH.has(t.level),r=typeof t?.message=="string"&&t.message.trim().length>0,n=null,o=t?.timestamp;if(typeof o=="number"||typeof o=="string"){let c=new Date(o);Number.isNaN(c.getTime())||(n=c)}if(!e||!r||n===null){this.isDebug&&typeof console<"u"&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:e,messageIsValid:r,timestampIsValid:n!==null});return}let i=this.#l(),a={sdk:i.name,sdkv:i.version,cv:this.#r.clerkVersion??"",lvl:t.level,msg:t.message,ts:n.toISOString(),pk:this.#r.publishableKey||null,payload:this.#m(t.context)};this.#i.push({kind:"log",value:a}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#o(t,e){return this.isEnabled&&!this.isDebug&&this.#u(t,e)}#d(t){return!0}#u(t,e){let r=Math.random();return r<=this.#e.samplingRate&&(this.#e.perEventSampling===!1||typeof e>"u"||r<=e)?!this.#t.isEventThrottled(t):!1}#c(){if(typeof window>"u"){this.#s();return}if(this.#i.length>=this.#e.maxBufferSize){this.#n&&(typeof cancelIdleCallback<"u"?cancelIdleCallback(Number(this.#n)):clearTimeout(Number(this.#n))),this.#s();return}this.#n||("requestIdleCallback"in window?this.#n=requestIdleCallback(()=>{this.#s(),this.#n=null}):this.#n=setTimeout(()=>{this.#s(),this.#n=null},0))}#s(){let t=[...this.#i];if(this.#i=[],this.#n=null,t.length===0)return;let e=t.filter(n=>n.kind==="event").map(n=>n.value),r=t.filter(n=>n.kind==="log").map(n=>n.value);if(e.length>0){let n=new URL("/v1/event",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:e})}).catch(()=>{})}if(r.length>0){let n=new URL("/v1/logs",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>{})}}#p(t,e){this.isDebug&&(typeof console.groupCollapsed<"u"?(console.groupCollapsed("[clerk/telemetry]",t),console.log(e),console.groupEnd()):console.log("[clerk/telemetry]",t,e))}#l(){let t={name:this.#r.sdk,version:this.#r.sdkVersion};if(typeof window<"u"){let e=window;if(e.Clerk){let r=e.Clerk;if(_H(r)&&r.constructor.sdkMetadata){let{name:n,version:o}=r.constructor.sdkMetadata;n!==void 0&&(t.name=n),o!==void 0&&(t.version=o)}}}return t}#a(t,e){let r=this.#l();return{event:t,cv:this.#r.clerkVersion??"",it:this.#r.instanceType??"",sdk:r.name,sdkv:r.version,...this.#r.publishableKey?{pk:this.#r.publishableKey}:{},...this.#r.secretKey?{sk:this.#r.secretKey}:{},payload:e}}#m(t){if(t===null||typeof t>"u"||typeof t!="object")return null;try{let e=JSON.parse(JSON.stringify(t));return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}};var G_=C$(xi);function R$(t){let e={...t},r=ma(e),n=A$({options:e,apiClient:r}),o=new J_({publishableKey:e.publishableKey,secretKey:e.secretKey,samplingRate:.1,...e.sdkMetadata?{sdk:e.sdkMetadata.name,sdkVersion:e.sdkMetadata.version}:{},...e.telemetry||{}});return{...r,...n,telemetry:o}}s(R$,"createClerkClient");var am=s(t=>t,"createMiddleware");function K_(){let t=process.env.CLERK_SECRET_KEY,e=process.env.VITE_CLERK_PUBLISHABLE_KEY;if(!t)throw new Error("CLERK_SECRET_KEY environment variable is not set");return{secretKey:t,publishableKey:e}}s(K_,"getClerkConfig");function N$(){let{secretKey:t}=K_();return R$({secretKey:t})}s(N$,"getClerkClient");var D$=am(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null,o=t.get("requestId")||"unknown",i=t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown";if(!n)return L.warn("Authentication failed: No token provided",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_REQUIRED",error:"Authentication required"},401);try{let{secretKey:a}=K_(),c=N$(),l=await G_(n,{secretKey:a});if(!l?.sub)return L.warn("Authentication failed: Invalid token",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"INVALID_TOKEN",error:"Invalid authentication token"},401);let d=l.sub,p=await c.users.getUser(d),h={db:fr(),clerkUser:p,user:{id:p.id,email:p.emailAddresses[0]?.emailAddress||"",fullName:`${p.firstName||""} ${p.lastName||""}`.trim()||null,role:p.publicMetadata?.role,metadata:p.publicMetadata}};t.set("auth",h),L.info("Authentication successful",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userId:p.id}),await e()}catch(a){return L.error("Authentication error",{error:a instanceof Error?a.message:"Unknown error",ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_ERROR",error:"Authentication failed"},500)}}),wH=am(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null;if(!n){await e();return}try{let{secretKey:o}=K_(),i=N$(),a=await G_(n,{secretKey:o});if(!a?.sub){await e();return}let c=a.sub,l=await i.users.getUser(c),p={db:fr(),clerkUser:l,user:{id:l.id,email:l.emailAddresses[0]?.emailAddress||"",fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||null,role:l.publicMetadata?.role,metadata:l.publicMetadata}};t.set("auth",p),await e()}catch{await e()}});function j$(t){let{windowMs:e,max:r,message:n="Too many requests"}=t,o=new Map;return am(async(i,a)=>{let l=i.get("auth")?.user.id||i.req.header("X-Forwarded-For")||i.req.header("X-Real-IP")||"unknown",d=Date.now(),p=o.get(l);if(!p||d>p.resetTime)o.set(l,{count:1,resetTime:d+e});else if(p.count++,p.count>r){let h=Math.ceil((p.resetTime-d)/1e3);return i.json({code:"RATE_LIMIT_EXCEEDED",details:{limit:r,windowMs:e,retryAfter:h},error:n},429)}let m=o.get(l);m&&(i.header("X-RateLimit-Limit",r.toString()),i.header("X-RateLimit-Remaining",Math.max(0,r-m.count).toString()),i.header("X-RateLimit-Reset",new Date(m.resetTime).toISOString())),await a()})}s(j$,"clerkUserRateLimitMiddleware");var de=D$;var be=j$;var W_=new Pe;W_.get("/",de,async t=>{let e=t.get("requestId");try{let{user:r}=t.get("auth"),n=r.id;if(!n)return t.json({code:"UNAUTHORIZED",error:"User not authenticated"},401);let o=t.req.query("refresh")==="true",a=await new zp(n).getContext(o);return L.info("Financial context retrieved",{forceRefresh:o,requestId:e,userId:n}),t.json({context:a,formatted:{alertsBlock:c1(a.pendingAlerts),financialBlock:a1(a)},meta:{requestId:e,retrievedAt:new Date().toISOString()}})}catch(r){return L.error("Error fetching financial context",{error:r instanceof Error?r.message:"Unknown error",requestId:e}),t.json({code:"CONTEXT_ERROR",error:r instanceof Error?r.message:"Failed to fetch context"},500)}});var SH=/^[\w!#$%&'*.^`|~+-]+$/,xH=/^[ !#-:<-[\]-~]*$/,Q_=s((t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),n={};for(let o of r){o=o.trim();let i=o.indexOf("=");if(i===-1)continue;let a=o.substring(0,i).trim();if(e&&e!==a||!SH.test(a))continue;let c=o.substring(i+1).trim();if(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),xH.test(c)&&(n[a]=c.indexOf("%")!==-1?Ns(c,Ec):c,e))break}return n},"parse");var M$=s((t,e,r)=>{let n=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!n)return;let i=e;return r==="secure"?i="__Secure-"+e:r==="host"&&(i="__Host-"+e),Q_(n,i)[i]}return n?Q_(n):{}},"getCookie");var z$=s((t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData(),"bufferToFormData");var TH=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,EH=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,kH=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,X_=s((t,e)=>async(r,n)=>{let o={},i=r.req.header("Content-Type");switch(t){case"json":if(!i||!TH.test(i))break;try{o=await r.req.json()}catch{let c="Malformed JSON in request body";throw new Nd(400,{message:c})}break;case"form":{if(!i||!(EH.test(i)||kH.test(i)))break;let c;if(r.req.bodyCache.formData)c=await r.req.bodyCache.formData;else try{let d=await r.req.arrayBuffer();c=await z$(d,i),r.req.bodyCache.formData=c}catch(d){let p="Malformed FormData request.";throw p+=d instanceof Error?` ${d.message}`:` ${String(d)}`,new Nd(400,{message:p})}let l={};c.forEach((d,p)=>{p.endsWith("[]")?(l[p]??=[]).push(d):Array.isArray(l[p])?l[p].push(d):p in l?l[p]=[l[p],d]:l[p]=d}),o=l;break}case"query":o=Object.fromEntries(Object.entries(r.req.queries()).map(([c,l])=>l.length===1?[c,l[0]]:[c,l]));break;case"param":o=r.req.param();break;case"header":o=r.req.header();break;case"cookie":o=M$(r);break}let a=await e(o,r);return a instanceof Response?a:(r.req.addValidatedData(t,a),await n())},"validator");function IH(t,e,r,n){return X_(t,async(o,i)=>{let a=o;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let l=Object.keys("in"in e?e.in.shape:e.shape),d=Object.fromEntries(l.map(p=>[p.toLowerCase(),p]));a=Object.fromEntries(Object.entries(o).map(([p,m])=>[d[p]||p,m]))}let c=n&&n.validationFunction?await n.validationFunction(e,a):await e.safeParseAsync(a);if(r){let l=await r({data:a,...c,target:t},i);if(l){if(l instanceof Response)return l;if("response"in l)return l.response}}return c.success?c.data:i.json(c,400)})}s(IH,"zValidatorFunction");var Fe=IH;var u={};vn(u,{$brand:()=>cm,$input:()=>cx,$output:()=>ax,NEVER:()=>Y_,TimePrecision:()=>px,ZodAny:()=>kR,ZodArray:()=>CR,ZodBase64:()=>A0,ZodBase64URL:()=>C0,ZodBigInt:()=>nl,ZodBigIntFormat:()=>R0,ZodBoolean:()=>rl,ZodCIDRv4:()=>I0,ZodCIDRv6:()=>P0,ZodCUID:()=>b0,ZodCUID2:()=>w0,ZodCatch:()=>KR,ZodCodec:()=>B0,ZodCustom:()=>ff,ZodCustomStringFormat:()=>el,ZodDate:()=>df,ZodDefault:()=>BR,ZodDiscriminatedUnion:()=>OR,ZodE164:()=>O0,ZodEmail:()=>y0,ZodEmoji:()=>v0,ZodEnum:()=>Xu,ZodError:()=>oJ,ZodFile:()=>LR,ZodFirstPartyTypeKind:()=>Ue,ZodFunction:()=>oN,ZodGUID:()=>sf,ZodIPv4:()=>E0,ZodIPv6:()=>k0,ZodISODate:()=>tf,ZodISODateTime:()=>ef,ZodISODuration:()=>nf,ZodISOTime:()=>rf,ZodIntersection:()=>$R,ZodIssueCode:()=>vG,ZodJWT:()=>$0,ZodKSUID:()=>T0,ZodLazy:()=>tN,ZodLiteral:()=>UR,ZodMAC:()=>_R,ZodMap:()=>MR,ZodNaN:()=>QR,ZodNanoID:()=>_0,ZodNever:()=>PR,ZodNonOptional:()=>q0,ZodNull:()=>TR,ZodNullable:()=>FR,ZodNumber:()=>tl,ZodNumberFormat:()=>Pa,ZodObject:()=>mf,ZodOptional:()=>L0,ZodPipe:()=>F0,ZodPrefault:()=>HR,ZodPromise:()=>nN,ZodReadonly:()=>XR,ZodRealError:()=>nn,ZodRecord:()=>M0,ZodSet:()=>zR,ZodString:()=>Yu,ZodStringFormat:()=>Ot,ZodSuccess:()=>GR,ZodSymbol:()=>SR,ZodTemplateLiteral:()=>eN,ZodTransform:()=>qR,ZodTuple:()=>NR,ZodType:()=>et,ZodULID:()=>S0,ZodURL:()=>lf,ZodUUID:()=>Bo,ZodUndefined:()=>xR,ZodUnion:()=>D0,ZodUnknown:()=>IR,ZodVoid:()=>AR,ZodXID:()=>x0,_ZodString:()=>g0,_default:()=>VR,_function:()=>uG,any:()=>BJ,array:()=>pf,base64:()=>kJ,base64url:()=>IJ,bigint:()=>zJ,boolean:()=>wR,catch:()=>WR,check:()=>lG,cidrv4:()=>TJ,cidrv6:()=>EJ,clone:()=>Nr,codec:()=>sG,coerce:()=>V0,config:()=>ir,core:()=>qo,cuid:()=>gJ,cuid2:()=>yJ,custom:()=>dG,date:()=>HJ,decode:()=>a0,decodeAsync:()=>u0,describe:()=>pG,discriminatedUnion:()=>WJ,e164:()=>PJ,email:()=>sJ,emoji:()=>fJ,encode:()=>s0,encodeAsync:()=>c0,endsWith:()=>Vu,enum:()=>z0,file:()=>rG,flattenError:()=>xu,float32:()=>NJ,float64:()=>DJ,formatError:()=>Tu,function:()=>uG,getErrorMap:()=>bG,globalRegistry:()=>Dr,gt:()=>Uo,gte:()=>rn,guid:()=>aJ,hash:()=>RJ,hex:()=>$J,hostname:()=>OJ,httpUrl:()=>mJ,includes:()=>Fu,instanceof:()=>fG,int:()=>h0,int32:()=>jJ,int64:()=>UJ,intersection:()=>RR,ipv4:()=>wJ,ipv6:()=>xJ,iso:()=>of,json:()=>gG,jwt:()=>AJ,keyof:()=>ZJ,ksuid:()=>bJ,lazy:()=>rN,length:()=>Ea,literal:()=>tG,locales:()=>Du,looseObject:()=>KJ,lowercase:()=>Lu,lt:()=>zo,lte:()=>Tn,mac:()=>SJ,map:()=>XJ,maxLength:()=>Ta,maxSize:()=>xa,meta:()=>mG,mime:()=>Hu,minLength:()=>Ci,minSize:()=>ps,multipleOf:()=>ds,nan:()=>iG,nanoid:()=>hJ,nativeEnum:()=>eG,negative:()=>qx,never:()=>N0,nonnegative:()=>Bx,nonoptional:()=>JR,nonpositive:()=>Fx,normalize:()=>Zu,null:()=>ER,nullable:()=>cf,nullish:()=>nG,number:()=>bR,object:()=>JJ,optional:()=>af,overwrite:()=>co,parse:()=>n0,parseAsync:()=>o0,partialRecord:()=>QJ,pipe:()=>uf,positive:()=>Lx,prefault:()=>ZR,preprocess:()=>yG,prettifyError:()=>db,promise:()=>cG,property:()=>Vx,readonly:()=>YR,record:()=>jR,refine:()=>iN,regex:()=>Uu,regexes:()=>xn,registry:()=>Rm,safeDecode:()=>d0,safeDecodeAsync:()=>m0,safeEncode:()=>l0,safeEncodeAsync:()=>p0,safeParse:()=>i0,safeParseAsync:()=>Fo,set:()=>YJ,setErrorMap:()=>_G,size:()=>zu,slugify:()=>Wu,startsWith:()=>Bu,strictObject:()=>GJ,string:()=>f0,stringFormat:()=>CJ,stringbool:()=>hG,success:()=>oG,superRefine:()=>sN,symbol:()=>qJ,templateLiteral:()=>aG,toJSONSchema:()=>Lo,toLowerCase:()=>Gu,toUpperCase:()=>Ku,transform:()=>U0,treeifyError:()=>lb,trim:()=>Ju,tuple:()=>DR,uint32:()=>MJ,uint64:()=>LJ,ulid:()=>vJ,undefined:()=>FJ,union:()=>j0,unknown:()=>Ia,uppercase:()=>qu,url:()=>pJ,util:()=>ue,uuid:()=>cJ,uuidv4:()=>uJ,uuidv6:()=>lJ,uuidv7:()=>dJ,void:()=>VJ,xid:()=>_J});var qo={};vn(qo,{$ZodAny:()=>Lw,$ZodArray:()=>Hw,$ZodAsyncError:()=>Mn,$ZodBase64:()=>Cw,$ZodBase64URL:()=>Ow,$ZodBigInt:()=>Cm,$ZodBigIntFormat:()=>jw,$ZodBoolean:()=>Pu,$ZodCIDRv4:()=>Iw,$ZodCIDRv6:()=>Pw,$ZodCUID:()=>hw,$ZodCUID2:()=>gw,$ZodCatch:()=>cS,$ZodCheck:()=>Ct,$ZodCheckBigIntFormat:()=>Hb,$ZodCheckEndsWith:()=>nw,$ZodCheckGreaterThan:()=>xm,$ZodCheckIncludes:()=>tw,$ZodCheckLengthEquals:()=>Qb,$ZodCheckLessThan:()=>Sm,$ZodCheckLowerCase:()=>Yb,$ZodCheckMaxLength:()=>Kb,$ZodCheckMaxSize:()=>Zb,$ZodCheckMimeType:()=>iw,$ZodCheckMinLength:()=>Wb,$ZodCheckMinSize:()=>Jb,$ZodCheckMultipleOf:()=>Bb,$ZodCheckNumberFormat:()=>Vb,$ZodCheckOverwrite:()=>sw,$ZodCheckProperty:()=>ow,$ZodCheckRegex:()=>Xb,$ZodCheckSizeEquals:()=>Gb,$ZodCheckStartsWith:()=>rw,$ZodCheckStringFormat:()=>wa,$ZodCheckUpperCase:()=>ew,$ZodCodec:()=>Au,$ZodCustom:()=>gS,$ZodCustomStringFormat:()=>Nw,$ZodDate:()=>Vw,$ZodDefault:()=>oS,$ZodDiscriminatedUnion:()=>Jw,$ZodE164:()=>$w,$ZodEmail:()=>dw,$ZodEmoji:()=>mw,$ZodEncodeError:()=>Ti,$ZodEnum:()=>Xw,$ZodError:()=>Su,$ZodFile:()=>eS,$ZodFunction:()=>mS,$ZodGUID:()=>uw,$ZodIPv4:()=>Tw,$ZodIPv6:()=>Ew,$ZodISODate:()=>ww,$ZodISODateTime:()=>bw,$ZodISODuration:()=>xw,$ZodISOTime:()=>Sw,$ZodIntersection:()=>Gw,$ZodJWT:()=>Rw,$ZodKSUID:()=>_w,$ZodLazy:()=>hS,$ZodLiteral:()=>Yw,$ZodMAC:()=>kw,$ZodMap:()=>Ww,$ZodNaN:()=>uS,$ZodNanoID:()=>fw,$ZodNever:()=>Fw,$ZodNonOptional:()=>sS,$ZodNull:()=>Uw,$ZodNullable:()=>nS,$ZodNumber:()=>Am,$ZodNumberFormat:()=>Dw,$ZodObject:()=>lR,$ZodObjectJIT:()=>Zw,$ZodOptional:()=>rS,$ZodPipe:()=>lS,$ZodPrefault:()=>iS,$ZodPromise:()=>fS,$ZodReadonly:()=>dS,$ZodRealError:()=>tn,$ZodRecord:()=>Kw,$ZodRegistry:()=>Sa,$ZodSet:()=>Qw,$ZodString:()=>ls,$ZodStringFormat:()=>It,$ZodSuccess:()=>aS,$ZodSymbol:()=>Mw,$ZodTemplateLiteral:()=>pS,$ZodTransform:()=>tS,$ZodTuple:()=>$m,$ZodType:()=>Be,$ZodULID:()=>yw,$ZodURL:()=>pw,$ZodUUID:()=>lw,$ZodUndefined:()=>zw,$ZodUnion:()=>Om,$ZodUnknown:()=>qw,$ZodVoid:()=>Bw,$ZodXID:()=>vw,$brand:()=>cm,$constructor:()=>B,$input:()=>cx,$output:()=>ax,Doc:()=>Iu,JSONSchema:()=>gR,JSONSchemaGenerator:()=>Qu,NEVER:()=>Y_,TimePrecision:()=>px,_any:()=>Rx,_array:()=>Hx,_base64:()=>Wm,_base64url:()=>Qm,_bigint:()=>kx,_boolean:()=>Tx,_catch:()=>Q8,_check:()=>hR,_cidrv4:()=>Gm,_cidrv6:()=>Km,_coercedBigint:()=>Ix,_coercedBoolean:()=>Ex,_coercedDate:()=>zx,_coercedNumber:()=>vx,_coercedString:()=>lx,_cuid:()=>qm,_cuid2:()=>Fm,_custom:()=>Jx,_date:()=>Mx,_decode:()=>fm,_decodeAsync:()=>gm,_default:()=>G8,_discriminatedUnion:()=>j8,_e164:()=>Xm,_email:()=>Nm,_emoji:()=>Um,_encode:()=>mm,_encodeAsync:()=>hm,_endsWith:()=>Vu,_enum:()=>F8,_file:()=>Zx,_float32:()=>bx,_float64:()=>wx,_gt:()=>Uo,_gte:()=>rn,_guid:()=>ju,_includes:()=>Fu,_int:()=>_x,_int32:()=>Sx,_int64:()=>Px,_intersection:()=>M8,_ipv4:()=>Zm,_ipv6:()=>Jm,_isoDate:()=>fx,_isoDateTime:()=>mx,_isoDuration:()=>gx,_isoTime:()=>hx,_jwt:()=>Ym,_ksuid:()=>Hm,_lazy:()=>tJ,_length:()=>Ea,_literal:()=>V8,_lowercase:()=>Lu,_lt:()=>zo,_lte:()=>Tn,_mac:()=>dx,_map:()=>L8,_max:()=>Tn,_maxLength:()=>Ta,_maxSize:()=>xa,_mime:()=>Hu,_min:()=>rn,_minLength:()=>Ci,_minSize:()=>ps,_multipleOf:()=>ds,_nan:()=>Ux,_nanoid:()=>Lm,_nativeEnum:()=>B8,_negative:()=>qx,_never:()=>Dx,_nonnegative:()=>Bx,_nonoptional:()=>K8,_nonpositive:()=>Fx,_normalize:()=>Zu,_null:()=>$x,_nullable:()=>J8,_number:()=>yx,_optional:()=>Z8,_overwrite:()=>co,_parse:()=>ya,_parseAsync:()=>va,_pipe:()=>X8,_positive:()=>Lx,_promise:()=>rJ,_property:()=>Vx,_readonly:()=>Y8,_record:()=>U8,_refine:()=>Gx,_regex:()=>Uu,_safeDecode:()=>vm,_safeDecodeAsync:()=>bm,_safeEncode:()=>ym,_safeEncodeAsync:()=>_m,_safeParse:()=>_a,_safeParseAsync:()=>ba,_set:()=>q8,_size:()=>zu,_slugify:()=>Wu,_startsWith:()=>Bu,_string:()=>ux,_stringFormat:()=>ka,_stringbool:()=>Xx,_success:()=>W8,_superRefine:()=>Kx,_symbol:()=>Cx,_templateLiteral:()=>eJ,_toLowerCase:()=>Gu,_toUpperCase:()=>Ku,_transform:()=>H8,_trim:()=>Ju,_tuple:()=>z8,_uint32:()=>xx,_uint64:()=>Ax,_ulid:()=>Bm,_undefined:()=>Ox,_union:()=>D8,_unknown:()=>Nx,_uppercase:()=>qu,_url:()=>Mu,_uuid:()=>Dm,_uuidv4:()=>jm,_uuidv6:()=>Mm,_uuidv7:()=>zm,_void:()=>jx,_xid:()=>Vm,clone:()=>Nr,config:()=>ir,decode:()=>tZ,decodeAsync:()=>nZ,describe:()=>Wx,encode:()=>eZ,encodeAsync:()=>rZ,flattenError:()=>xu,formatError:()=>Tu,globalConfig:()=>hu,globalRegistry:()=>Dr,isValidBase64:()=>Aw,isValidBase64URL:()=>sR,isValidJWT:()=>aR,locales:()=>Du,meta:()=>Qx,parse:()=>dm,parseAsync:()=>pm,prettifyError:()=>db,regexes:()=>xn,registry:()=>Rm,safeDecode:()=>iZ,safeDecodeAsync:()=>aZ,safeEncode:()=>oZ,safeEncodeAsync:()=>sZ,safeParse:()=>pb,safeParseAsync:()=>mb,toDotPath:()=>B$,toJSONSchema:()=>Lo,treeifyError:()=>lb,util:()=>ue,version:()=>aw});var Y_=Object.freeze({status:"aborted"});function B(t,e,r){function n(c,l){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,l);let d=a.prototype,p=Object.keys(d);for(let m=0;m<p.length;m++){let h=p[m];h in c||(c[h]=d[h].bind(c))}}s(n,"init");let o=r?.Parent??Object;class i extends o{static{s(this,"Definition")}}Object.defineProperty(i,"name",{value:t});function a(c){var l;let d=r?.Parent?new i:this;n(d,c),(l=d._zod).deferred??(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return s(a,"_"),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s(c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t),"value")}),Object.defineProperty(a,"name",{value:t}),a}s(B,"$constructor");var cm=Symbol("zod_brand"),Mn=class extends Error{static{s(this,"$ZodAsyncError")}constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Ti=class extends Error{static{s(this,"$ZodEncodeError")}constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},hu={};function ir(t){return t&&Object.assign(hu,t),hu}s(ir,"config");var ue={};vn(ue,{BIGINT_FORMAT_RANGES:()=>ub,Class:()=>tb,NUMBER_FORMAT_RANGES:()=>cb,aborted:()=>Ai,allowsEval:()=>ob,assert:()=>$H,assertEqual:()=>PH,assertIs:()=>CH,assertNever:()=>OH,assertNotEqual:()=>AH,assignProp:()=>ki,base64ToUint8Array:()=>L$,base64urlToUint8Array:()=>KH,cached:()=>ha,captureStackTrace:()=>lm,cleanEnum:()=>GH,cleanRegex:()=>vu,clone:()=>Nr,cloneDef:()=>NH,createTransparentProxy:()=>LH,defineLazy:()=>ct,esc:()=>um,escapeRegex:()=>Sn,extend:()=>BH,finalizeIssue:()=>un,floatSafeRemainder:()=>rb,getElementAtPath:()=>DH,getEnumValues:()=>yu,getLengthableOrigin:()=>wu,getParsedType:()=>UH,getSizableOrigin:()=>bu,hexToUint8Array:()=>QH,isObject:()=>cs,isPlainObject:()=>Pi,issue:()=>ga,joinValues:()=>Q,jsonStringifyReplacer:()=>fa,merge:()=>HH,mergeDefs:()=>Ii,normalizeParams:()=>ce,nullish:()=>Ei,numKeys:()=>zH,objectClone:()=>RH,omit:()=>FH,optionalKeys:()=>ab,partial:()=>ZH,pick:()=>qH,prefixIssues:()=>cn,primitiveTypes:()=>sb,promiseAllObject:()=>jH,propertyKeyTypes:()=>_u,randomString:()=>MH,required:()=>JH,safeExtend:()=>VH,shallowClone:()=>ib,slugify:()=>nb,stringifyPrimitive:()=>ae,uint8ArrayToBase64:()=>q$,uint8ArrayToBase64url:()=>WH,uint8ArrayToHex:()=>XH,unwrapMessage:()=>gu});function PH(t){return t}s(PH,"assertEqual");function AH(t){return t}s(AH,"assertNotEqual");function CH(t){}s(CH,"assertIs");function OH(t){throw new Error}s(OH,"assertNever");function $H(t){}s($H,"assert");function yu(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,o])=>e.indexOf(+n)===-1).map(([n,o])=>o)}s(yu,"getEnumValues");function Q(t,e="|"){return t.map(r=>ae(r)).join(e)}s(Q,"joinValues");function fa(t,e){return typeof e=="bigint"?e.toString():e}s(fa,"jsonStringifyReplacer");function ha(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}s(ha,"cached");function Ei(t){return t==null}s(Ei,"nullish");function vu(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}s(vu,"cleanRegex");function rb(t,e){let r=(t.toString().split(".")[1]||"").length,n=e.toString(),o=(n.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(n)){let l=n.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}let i=r>o?r:o,a=Number.parseInt(t.toFixed(i).replace(".","")),c=Number.parseInt(e.toFixed(i).replace(".",""));return a%c/10**i}s(rb,"floatSafeRemainder");var U$=Symbol("evaluating");function ct(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==U$)return n===void 0&&(n=U$,n=r()),n},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}s(ct,"defineLazy");function RH(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}s(RH,"objectClone");function ki(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}s(ki,"assignProp");function Ii(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}s(Ii,"mergeDefs");function NH(t){return Ii(t._zod.def)}s(NH,"cloneDef");function DH(t,e){return e?e.reduce((r,n)=>r?.[n],t):t}s(DH,"getElementAtPath");function jH(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let o={};for(let i=0;i<e.length;i++)o[e[i]]=n[i];return o})}s(jH,"promiseAllObject");function MH(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}s(MH,"randomString");function um(t){return JSON.stringify(t)}s(um,"esc");function nb(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}s(nb,"slugify");var lm="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function cs(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}s(cs,"isObject");var ob=ha(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function Pi(t){if(cs(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(cs(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}s(Pi,"isPlainObject");function ib(t){return Pi(t)?{...t}:Array.isArray(t)?[...t]:t}s(ib,"shallowClone");function zH(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}s(zH,"numKeys");var UH=s(t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},"getParsedType"),_u=new Set(["string","number","symbol"]),sb=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Sn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Sn,"escapeRegex");function Nr(t,e,r){let n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}s(Nr,"clone");function ce(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:s(()=>e,"error")};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:s(()=>e.error,"error")}:e}s(ce,"normalizeParams");function LH(t){let e;return new Proxy({},{get(r,n,o){return e??(e=t()),Reflect.get(e,n,o)},set(r,n,o,i){return e??(e=t()),Reflect.set(e,n,o,i)},has(r,n){return e??(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e??(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,o){return e??(e=t()),Reflect.defineProperty(e,n,o)}})}s(LH,"createTransparentProxy");function ae(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}s(ae,"stringifyPrimitive");function ab(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}s(ab,"optionalKeys");var cb={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ub={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function qH(t,e){let r=t._zod.def,n=Ii(t._zod.def,{get shape(){let o={};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(o[i]=r.shape[i])}return ki(this,"shape",o),o},checks:[]});return Nr(t,n)}s(qH,"pick");function FH(t,e){let r=t._zod.def,n=Ii(t._zod.def,{get shape(){let o={...t._zod.def.shape};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete o[i]}return ki(this,"shape",o),o},checks:[]});return Nr(t,n)}s(FH,"omit");function BH(t,e){if(!Pi(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let o=Ii(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e};return ki(this,"shape",i),i},checks:[]});return Nr(t,o)}s(BH,"extend");function VH(t,e){if(!Pi(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return ki(this,"shape",n),n},checks:t._zod.def.checks};return Nr(t,r)}s(VH,"safeExtend");function HH(t,e){let r=Ii(t._zod.def,{get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return ki(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return Nr(t,r)}s(HH,"merge");function ZH(t,e,r){let n=Ii(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:o[a]}):o[a])}else for(let a in o)i[a]=t?new t({type:"optional",innerType:o[a]}):o[a];return ki(this,"shape",i),i},checks:[]});return Nr(e,n)}s(ZH,"partial");function JH(t,e,r){let n=Ii(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:o[a]}))}else for(let a in o)i[a]=new t({type:"nonoptional",innerType:o[a]});return ki(this,"shape",i),i},checks:[]});return Nr(e,n)}s(JH,"required");function Ai(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}s(Ai,"aborted");function cn(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}s(cn,"prefixIssues");function gu(t){return typeof t=="string"?t:t?.message}s(gu,"unwrapMessage");function un(t,e,r){let n={...t,path:t.path??[]};if(!t.message){let o=gu(t.inst?._zod.def?.error?.(t))??gu(e?.error?.(t))??gu(r.customError?.(t))??gu(r.localeError?.(t))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}s(un,"finalizeIssue");function bu(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}s(bu,"getSizableOrigin");function wu(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}s(wu,"getLengthableOrigin");function ga(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}s(ga,"issue");function GH(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}s(GH,"cleanEnum");function L$(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}s(L$,"base64ToUint8Array");function q$(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}s(q$,"uint8ArrayToBase64");function KH(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return L$(e+r)}s(KH,"base64urlToUint8Array");function WH(t){return q$(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}s(WH,"uint8ArrayToBase64url");function QH(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n/2]=Number.parseInt(e.slice(n,n+2),16);return r}s(QH,"hexToUint8Array");function XH(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}s(XH,"uint8ArrayToHex");var tb=class{static{s(this,"Class")}constructor(...e){}};var F$=s((t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,fa,2),Object.defineProperty(t,"toString",{value:s(()=>t.message,"value"),enumerable:!1})},"initializer"),Su=B("$ZodError",F$),tn=B("$ZodError",F$,{Parent:Error});function xu(t,e=r=>r.message){let r={},n=[];for(let o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}s(xu,"flattenError");function Tu(t,e=r=>r.message){let r={_errors:[]},n=s(o=>{for(let i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let a=r,c=0;for(;c<i.path.length;){let l=i.path[c];c===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(i))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}},"processError");return n(t),r}s(Tu,"formatError");function lb(t,e=r=>r.message){let r={errors:[]},n=s((o,i=[])=>{var a,c;for(let l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>n({issues:d},l.path));else if(l.code==="invalid_key")n({issues:l.issues},l.path);else if(l.code==="invalid_element")n({issues:l.issues},l.path);else{let d=[...i,...l.path];if(d.length===0){r.errors.push(e(l));continue}let p=r,m=0;for(;m<d.length;){let h=d[m],y=m===d.length-1;typeof h=="string"?(p.properties??(p.properties={}),(a=p.properties)[h]??(a[h]={errors:[]}),p=p.properties[h]):(p.items??(p.items=[]),(c=p.items)[h]??(c[h]={errors:[]}),p=p.items[h]),y&&p.errors.push(e(l)),m++}}},"processError");return n(t),r}s(lb,"treeifyError");function B$(t){let e=[],r=t.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}s(B$,"toDotPath");function db(t){let e=[],r=[...t.issues].sort((n,o)=>(n.path??[]).length-(o.path??[]).length);for(let n of r)e.push(`\u2716 ${n.message}`),n.path?.length&&e.push(`  \u2192 at ${B$(n.path)}`);return e.join(`
`)}s(db,"prettifyError");var ya=s(t=>(e,r,n,o)=>{let i=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new Mn;if(a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>un(l,i,ir())));throw lm(c,o?.callee),c}return a.value},"_parse"),dm=ya(tn),va=s(t=>async(e,r,n,o)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>un(l,i,ir())));throw lm(c,o?.callee),c}return a.value},"_parseAsync"),pm=va(tn),_a=s(t=>(e,r,n)=>{let o=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new Mn;return i.issues.length?{success:!1,error:new(t??Su)(i.issues.map(a=>un(a,o,ir())))}:{success:!0,data:i.value}},"_safeParse"),pb=_a(tn),ba=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},i=e._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>un(a,o,ir())))}:{success:!0,data:i.value}},"_safeParseAsync"),mb=ba(tn),mm=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ya(t)(e,r,o)},"_encode"),eZ=mm(tn),fm=s(t=>(e,r,n)=>ya(t)(e,r,n),"_decode"),tZ=fm(tn),hm=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return va(t)(e,r,o)},"_encodeAsync"),rZ=hm(tn),gm=s(t=>async(e,r,n)=>va(t)(e,r,n),"_decodeAsync"),nZ=gm(tn),ym=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return _a(t)(e,r,o)},"_safeEncode"),oZ=ym(tn),vm=s(t=>(e,r,n)=>_a(t)(e,r,n),"_safeDecode"),iZ=vm(tn),_m=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ba(t)(e,r,o)},"_safeEncodeAsync"),sZ=_m(tn),bm=s(t=>async(e,r,n)=>ba(t)(e,r,n),"_safeDecodeAsync"),aZ=bm(tn);var xn={};vn(xn,{base64:()=>Ab,base64url:()=>wm,bigint:()=>Db,boolean:()=>zb,browserEmail:()=>hZ,cidrv4:()=>Ib,cidrv6:()=>Pb,cuid:()=>fb,cuid2:()=>hb,date:()=>Ob,datetime:()=>Rb,domain:()=>vZ,duration:()=>bb,e164:()=>Cb,email:()=>Sb,emoji:()=>xb,extendedDuration:()=>cZ,guid:()=>wb,hex:()=>_Z,hostname:()=>yZ,html5Email:()=>pZ,idnEmail:()=>fZ,integer:()=>jb,ipv4:()=>Tb,ipv6:()=>Eb,ksuid:()=>vb,lowercase:()=>qb,mac:()=>kb,md5_base64:()=>wZ,md5_base64url:()=>SZ,md5_hex:()=>bZ,nanoid:()=>_b,null:()=>Ub,number:()=>Mb,rfc5322Email:()=>mZ,sha1_base64:()=>TZ,sha1_base64url:()=>EZ,sha1_hex:()=>xZ,sha256_base64:()=>IZ,sha256_base64url:()=>PZ,sha256_hex:()=>kZ,sha384_base64:()=>CZ,sha384_base64url:()=>OZ,sha384_hex:()=>AZ,sha512_base64:()=>RZ,sha512_base64url:()=>NZ,sha512_hex:()=>$Z,string:()=>Nb,time:()=>$b,ulid:()=>gb,undefined:()=>Lb,unicodeEmail:()=>V$,uppercase:()=>Fb,uuid:()=>us,uuid4:()=>uZ,uuid6:()=>lZ,uuid7:()=>dZ,xid:()=>yb});var fb=/^[cC][^\s-]{8,}$/,hb=/^[0-9a-z]+$/,gb=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,yb=/^[0-9a-vA-V]{20}$/,vb=/^[A-Za-z0-9]{27}$/,_b=/^[a-zA-Z0-9_-]{21}$/,bb=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,cZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wb=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,us=s(t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),uZ=us(4),lZ=us(6),dZ=us(7),Sb=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,pZ=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mZ=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,V$=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,fZ=V$,hZ=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xb(){return new RegExp(gZ,"u")}s(xb,"emoji");var Tb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Eb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,kb=s(t=>{let e=Sn(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},"mac"),Ib=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Pb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ab=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,wm=/^[A-Za-z0-9_-]*$/,yZ=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,vZ=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Cb=/^\+(?:[0-9]){6,14}[0-9]$/,H$="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ob=new RegExp(`^${H$}$`);function Z$(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}s(Z$,"timeSource");function $b(t){return new RegExp(`^${Z$(t)}$`)}s($b,"time");function Rb(t){let e=Z$({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${H$}T(?:${n})$`)}s(Rb,"datetime");var Nb=s(t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},"string"),Db=/^-?\d+n?$/,jb=/^-?\d+$/,Mb=/^-?\d+(?:\.\d+)?/,zb=/^(?:true|false)$/i,Ub=/^null$/i;var Lb=/^undefined$/i;var qb=/^[^A-Z]*$/,Fb=/^[^a-z]*$/,_Z=/^[0-9a-fA-F]*$/;function Eu(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}s(Eu,"fixedBase64");function ku(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}s(ku,"fixedBase64url");var bZ=/^[0-9a-fA-F]{32}$/,wZ=Eu(22,"=="),SZ=ku(22),xZ=/^[0-9a-fA-F]{40}$/,TZ=Eu(27,"="),EZ=ku(27),kZ=/^[0-9a-fA-F]{64}$/,IZ=Eu(43,"="),PZ=ku(43),AZ=/^[0-9a-fA-F]{96}$/,CZ=Eu(64,""),OZ=ku(64),$Z=/^[0-9a-fA-F]{128}$/,RZ=Eu(86,"=="),NZ=ku(86);var Ct=B("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),G$={number:"number",bigint:"bigint",object:"date"},Sm=B("$ZodCheckLessThan",(t,e)=>{Ct.init(t,e);let r=G$[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),xm=B("$ZodCheckGreaterThan",(t,e)=>{Ct.init(t,e);let r=G$[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Bb=B("$ZodCheckMultipleOf",(t,e)=>{Ct.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):rb(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),Vb=B("$ZodCheckNumberFormat",(t,e)=>{Ct.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),n=r?"int":"number",[o,i]=cb[e.format];t._zod.onattach.push(a=>{let c=a._zod.bag;c.format=e.format,c.minimum=o,c.maximum=i,r&&(c.pattern=jb)}),t._zod.check=a=>{let c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}c<o&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),c>i&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),Hb=B("$ZodCheckBigIntFormat",(t,e)=>{Ct.init(t,e);let[r,n]=ub[e.format];t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,i.minimum=r,i.maximum=n}),t._zod.check=o=>{let i=o.value;i<r&&o.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),i>n&&o.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:t})}}),Zb=B("$ZodCheckMaxSize",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;o.size<=e.maximum||n.issues.push({origin:bu(o),code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Jb=B("$ZodCheckMinSize",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;o.size>=e.minimum||n.issues.push({origin:bu(o),code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Gb=B("$ZodCheckSizeEquals",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.size,o.maximum=e.size,o.size=e.size}),t._zod.check=n=>{let o=n.value,i=o.size;if(i===e.size)return;let a=i>e.size;n.issues.push({origin:bu(o),...a?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Kb=B("$ZodCheckMaxLength",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;if(o.length<=e.maximum)return;let a=wu(o);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Wb=B("$ZodCheckMinLength",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;if(o.length>=e.minimum)return;let a=wu(o);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Qb=B("$ZodCheckLengthEquals",(t,e)=>{var r;Ct.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Ei(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=n=>{let o=n.value,i=o.length;if(i===e.length)return;let a=wu(o),c=i>e.length;n.issues.push({origin:a,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),wa=B("$ZodCheckStringFormat",(t,e)=>{var r,n;Ct.init(t,e),t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),Xb=B("$ZodCheckRegex",(t,e)=>{wa.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Yb=B("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=qb),wa.init(t,e)}),ew=B("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Fb),wa.init(t,e)}),tw=B("$ZodCheckIncludes",(t,e)=>{Ct.init(t,e);let r=Sn(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(o=>{let i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),rw=B("$ZodCheckStartsWith",(t,e)=>{Ct.init(t,e);let r=new RegExp(`^${Sn(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),nw=B("$ZodCheckEndsWith",(t,e)=>{Ct.init(t,e);let r=new RegExp(`.*${Sn(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}});function J$(t,e,r){t.issues.length&&e.issues.push(...cn(r,t.issues))}s(J$,"handleCheckPropertyResult");var ow=B("$ZodCheckProperty",(t,e)=>{Ct.init(t,e),t._zod.check=r=>{let n=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(o=>J$(o,r,e.property));J$(n,r,e.property)}}),iw=B("$ZodCheckMimeType",(t,e)=>{Ct.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),t._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:t,continue:!e.abort})}}),sw=B("$ZodCheckOverwrite",(t,e)=>{Ct.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var Iu=class{static{s(this,"Doc")}constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(let a of i)this.content.push(a)}compile(){let e=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,o.join(`
`))}};var aw={major:4,minor:1,patch:13};var Be=B("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=aw;let n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let o of n)for(let i of o._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=s((a,c,l)=>{let d=Ai(a),p;for(let m of c){if(m._zod.def.when){if(!m._zod.def.when(a))continue}else if(d)continue;let h=a.issues.length,y=m._zod.check(a);if(y instanceof Promise&&l?.async===!1)throw new Mn;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,a.issues.length!==h&&(d||(d=Ai(a,h)))});else{if(a.issues.length===h)continue;d||(d=Ai(a,h))}}return p?p.then(()=>a):a},"runChecks"),i=s((a,c,l)=>{if(Ai(a))return a.aborted=!0,a;let d=o(c,n,l);if(d instanceof Promise){if(l.async===!1)throw new Mn;return d.then(p=>t._zod.parse(p,l))}return t._zod.parse(d,l)},"handleCanaryResult");t._zod.run=(a,c)=>{if(c.skipChecks)return t._zod.parse(a,c);if(c.direction==="backward"){let d=t._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(p=>i(p,a,c)):i(d,a,c)}let l=t._zod.parse(a,c);if(l instanceof Promise){if(c.async===!1)throw new Mn;return l.then(d=>o(d,n,c))}return o(l,n,c)}}t["~standard"]={validate:s(o=>{try{let i=pb(t,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return mb(t,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},"validate"),vendor:"zod",version:1}}),ls=B("$ZodString",(t,e)=>{Be.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??Nb(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),It=B("$ZodStringFormat",(t,e)=>{wa.init(t,e),ls.init(t,e)}),uw=B("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=wb),It.init(t,e)}),lw=B("$ZodUUID",(t,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=us(n))}else e.pattern??(e.pattern=us());It.init(t,e)}),dw=B("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Sb),It.init(t,e)}),pw=B("$ZodURL",(t,e)=>{It.init(t,e),t._zod.check=r=>{try{let n=r.value.trim(),o=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=o.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),mw=B("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=xb()),It.init(t,e)}),fw=B("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=_b),It.init(t,e)}),hw=B("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=fb),It.init(t,e)}),gw=B("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=hb),It.init(t,e)}),yw=B("$ZodULID",(t,e)=>{e.pattern??(e.pattern=gb),It.init(t,e)}),vw=B("$ZodXID",(t,e)=>{e.pattern??(e.pattern=yb),It.init(t,e)}),_w=B("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=vb),It.init(t,e)}),bw=B("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Rb(e)),It.init(t,e)}),ww=B("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Ob),It.init(t,e)}),Sw=B("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=$b(e)),It.init(t,e)}),xw=B("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=bb),It.init(t,e)}),Tw=B("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Tb),It.init(t,e),t._zod.bag.format="ipv4"}),Ew=B("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Eb),It.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),kw=B("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=kb(e.delimiter)),It.init(t,e),t._zod.bag.format="mac"}),Iw=B("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Ib),It.init(t,e)}),Pw=B("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Pb),It.init(t,e),t._zod.check=r=>{let n=r.value.split("/");try{if(n.length!==2)throw new Error;let[o,i]=n;if(!i)throw new Error;let a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Aw(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}s(Aw,"isValidBase64");var Cw=B("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Ab),It.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{Aw(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function sR(t){if(!wm.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Aw(r)}s(sR,"isValidBase64URL");var Ow=B("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=wm),It.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{sR(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),$w=B("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Cb),It.init(t,e)});function aR(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}s(aR,"isValidJWT");var Rw=B("$ZodJWT",(t,e)=>{It.init(t,e),t._zod.check=r=>{aR(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),Nw=B("$ZodCustomStringFormat",(t,e)=>{It.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),Am=B("$ZodNumber",(t,e)=>{Be.init(t,e),t._zod.pattern=t._zod.bag.pattern??Mb,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;let i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...i?{received:i}:{}}),r}}),Dw=B("$ZodNumberFormat",(t,e)=>{Vb.init(t,e),Am.init(t,e)}),Pu=B("$ZodBoolean",(t,e)=>{Be.init(t,e),t._zod.pattern=zb,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}let o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),r}}),Cm=B("$ZodBigInt",(t,e)=>{Be.init(t,e),t._zod.pattern=Db,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),jw=B("$ZodBigIntFormat",(t,e)=>{Hb.init(t,e),Cm.init(t,e)}),Mw=B("$ZodSymbol",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:o,inst:t}),r}}),zw=B("$ZodUndefined",(t,e)=>{Be.init(t,e),t._zod.pattern=Lb,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:o,inst:t}),r}}),Uw=B("$ZodNull",(t,e)=>{Be.init(t,e),t._zod.pattern=Ub,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),r}}),Lw=B("$ZodAny",(t,e)=>{Be.init(t,e),t._zod.parse=r=>r}),qw=B("$ZodUnknown",(t,e)=>{Be.init(t,e),t._zod.parse=r=>r}),Fw=B("$ZodNever",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),Bw=B("$ZodVoid",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"void",code:"invalid_type",input:o,inst:t}),r}}),Vw=B("$ZodDate",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let o=r.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:t}),r}});function W$(t,e,r){t.issues.length&&e.issues.push(...cn(r,t.issues)),e.value[r]=t.value}s(W$,"handleArrayResult");var Hw=B("$ZodArray",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);let i=[];for(let a=0;a<o.length;a++){let c=o[a],l=e.element._zod.run({value:c,issues:[]},n);l instanceof Promise?i.push(l.then(d=>W$(d,r,a))):W$(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function Pm(t,e,r,n){t.issues.length&&e.issues.push(...cn(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}s(Pm,"handlePropertyResult");function cR(t){let e=Object.keys(t.shape);for(let n of e)if(!t.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let r=ab(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}s(cR,"normalizeDef");function uR(t,e,r,n,o,i){let a=[],c=o.keySet,l=o.catchall._zod,d=l.def.type;for(let p in e){if(c.has(p))continue;if(d==="never"){a.push(p);continue}let m=l.run({value:e[p],issues:[]},n);m instanceof Promise?t.push(m.then(h=>Pm(h,r,p,e))):Pm(m,r,p,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}s(uR,"handleCatchall");var lR=B("$ZodObject",(t,e)=>{if(Be.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let c=e.shape;Object.defineProperty(e,"shape",{get:s(()=>{let l={...c};return Object.defineProperty(e,"shape",{value:l}),l},"get")})}let n=ha(()=>cR(e));ct(t._zod,"propValues",()=>{let c=e.shape,l={};for(let d in c){let p=c[d]._zod;if(p.values){l[d]??(l[d]=new Set);for(let m of p.values)l[d].add(m)}}return l});let o=cs,i=e.catchall,a;t._zod.parse=(c,l)=>{a??(a=n.value);let d=c.value;if(!o(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};let p=[],m=a.shape;for(let h of a.keys){let g=m[h]._zod.run({value:d[h],issues:[]},l);g instanceof Promise?p.push(g.then(f=>Pm(f,c,h,d))):Pm(g,c,h,d)}return i?uR(p,d,c,l,n.value,t):p.length?Promise.all(p).then(()=>c):c}}),Zw=B("$ZodObjectJIT",(t,e)=>{lR.init(t,e);let r=t._zod.parse,n=ha(()=>cR(e)),o=s(h=>{let y=new Iu(["shape","payload","ctx"]),g=n.value,f=s(S=>{let k=um(S);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`},"parseStr");y.write("const input = payload.value;");let _=Object.create(null),w=0;for(let S of g.keys)_[S]=`key_${w++}`;y.write("const newResult = {};");for(let S of g.keys){let k=_[S],R=um(S);y.write(`const ${k} = ${f(S)};`),y.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${k}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");let b=y.compile();return(S,k)=>b(h,S,k)},"generateFastpass"),i,a=cs,c=!hu.jitless,d=c&&ob.value,p=e.catchall,m;t._zod.parse=(h,y)=>{m??(m=n.value);let g=h.value;return a(g)?c&&d&&y?.async===!1&&y.jitless!==!0?(i||(i=o(e.shape)),h=i(h,y),p?uR([],g,h,y,m,t):h):r(h,y):(h.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),h)}});function Q$(t,e,r,n){for(let i of t)if(i.issues.length===0)return e.value=i.value,e;let o=t.filter(i=>!Ai(i));return o.length===1?(e.value=o[0].value,o[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>un(a,n,ir())))}),e)}s(Q$,"handleUnionResults");var Om=B("$ZodUnion",(t,e)=>{Be.init(t,e),ct(t._zod,"optin",()=>e.options.some(o=>o._zod.optin==="optional")?"optional":void 0),ct(t._zod,"optout",()=>e.options.some(o=>o._zod.optout==="optional")?"optional":void 0),ct(t._zod,"values",()=>{if(e.options.every(o=>o._zod.values))return new Set(e.options.flatMap(o=>Array.from(o._zod.values)))}),ct(t._zod,"pattern",()=>{if(e.options.every(o=>o._zod.pattern)){let o=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>vu(i.source)).join("|")})$`)}});let r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(o,i)=>{if(r)return n(o,i);let a=!1,c=[];for(let l of e.options){let d=l._zod.run({value:o.value,issues:[]},i);if(d instanceof Promise)c.push(d),a=!0;else{if(d.issues.length===0)return d;c.push(d)}}return a?Promise.all(c).then(l=>Q$(l,o,t,i)):Q$(c,o,t,i)}}),Jw=B("$ZodDiscriminatedUnion",(t,e)=>{Om.init(t,e);let r=t._zod.parse;ct(t._zod,"propValues",()=>{let o={};for(let i of e.options){let a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(let[c,l]of Object.entries(a)){o[c]||(o[c]=new Set);for(let d of l)o[c].add(d)}}return o});let n=ha(()=>{let o=e.options,i=new Map;for(let a of o){let c=a._zod.propValues?.[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(let l of c){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,a)}}return i});t._zod.parse=(o,i)=>{let a=o.value;if(!cs(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),o;let c=n.value.get(a?.[e.discriminator]);return c?c._zod.run(o,i):e.unionFallback?r(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:a,path:[e.discriminator],inst:t}),o)}}),Gw=B("$ZodIntersection",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value,i=e.left._zod.run({value:o,issues:[]},n),a=e.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,d])=>X$(r,l,d)):X$(r,i,a)}});function cw(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Pi(t)&&Pi(e)){let r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),o={...t,...e};for(let i of n){let a=cw(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let o=t[n],i=e[n],a=cw(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}s(cw,"mergeValues");function X$(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Ai(t))return t;let n=cw(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}s(X$,"handleIntersectionResults");var $m=B("$ZodTuple",(t,e)=>{Be.init(t,e);let r=e.items;t._zod.parse=(n,o)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],c=[...r].reverse().findIndex(p=>p._zod.optin!=="optional"),l=c===-1?0:r.length-c;if(!e.rest){let p=i.length>r.length,m=i.length<l-1;if(p||m)return n.issues.push({...p?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:t,origin:"array"}),n}let d=-1;for(let p of r){if(d++,d>=i.length&&d>=l)continue;let m=p._zod.run({value:i[d],issues:[]},o);m instanceof Promise?a.push(m.then(h=>Tm(h,n,d))):Tm(m,n,d)}if(e.rest){let p=i.slice(r.length);for(let m of p){d++;let h=e.rest._zod.run({value:m,issues:[]},o);h instanceof Promise?a.push(h.then(y=>Tm(y,n,d))):Tm(h,n,d)}}return a.length?Promise.all(a).then(()=>n):n}});function Tm(t,e,r){t.issues.length&&e.issues.push(...cn(r,t.issues)),e.value[r]=t.value}s(Tm,"handleTupleResult");var Kw=B("$ZodRecord",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Pi(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),r;let i=[],a=e.keyType._zod.values;if(a){r.value={};let c=new Set;for(let d of a)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){c.add(typeof d=="number"?d.toString():d);let p=e.valueType._zod.run({value:o[d],issues:[]},n);p instanceof Promise?i.push(p.then(m=>{m.issues.length&&r.issues.push(...cn(d,m.issues)),r.value[d]=m.value})):(p.issues.length&&r.issues.push(...cn(d,p.issues)),r.value[d]=p.value)}let l;for(let d in o)c.has(d)||(l=l??[],l.push(d));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:l})}else{r.value={};for(let c of Reflect.ownKeys(o)){if(c==="__proto__")continue;let l=e.keyType._zod.run({value:c,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(p=>un(p,n,ir())),input:c,path:[c],inst:t}),r.value[l.value]=l.value;continue}let d=e.valueType._zod.run({value:o[c],issues:[]},n);d instanceof Promise?i.push(d.then(p=>{p.issues.length&&r.issues.push(...cn(c,p.issues)),r.value[l.value]=p.value})):(d.issues.length&&r.issues.push(...cn(c,d.issues)),r.value[l.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Ww=B("$ZodMap",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:o,inst:t}),r;let i=[];r.value=new Map;for(let[a,c]of o){let l=e.keyType._zod.run({value:a,issues:[]},n),d=e.valueType._zod.run({value:c,issues:[]},n);l instanceof Promise||d instanceof Promise?i.push(Promise.all([l,d]).then(([p,m])=>{Y$(p,m,r,a,o,t,n)})):Y$(l,d,r,a,o,t,n)}return i.length?Promise.all(i).then(()=>r):r}});function Y$(t,e,r,n,o,i,a){t.issues.length&&(_u.has(typeof n)?r.issues.push(...cn(n,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:o,inst:i,issues:t.issues.map(c=>un(c,a,ir()))})),e.issues.length&&(_u.has(typeof n)?r.issues.push(...cn(n,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:o,inst:i,key:n,issues:e.issues.map(c=>un(c,a,ir()))})),r.value.set(t.value,e.value)}s(Y$,"handleMapResult");var Qw=B("$ZodSet",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Set))return r.issues.push({input:o,inst:t,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let a of o){let c=e.valueType._zod.run({value:a,issues:[]},n);c instanceof Promise?i.push(c.then(l=>eR(l,r))):eR(c,r)}return i.length?Promise.all(i).then(()=>r):r}});function eR(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}s(eR,"handleSetResult");var Xw=B("$ZodEnum",(t,e)=>{Be.init(t,e);let r=yu(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(o=>_u.has(typeof o)).map(o=>typeof o=="string"?Sn(o):o.toString()).join("|")})$`),t._zod.parse=(o,i)=>{let a=o.value;return n.has(a)||o.issues.push({code:"invalid_value",values:r,input:a,inst:t}),o}}),Yw=B("$ZodLiteral",(t,e)=>{if(Be.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Sn(n):n?Sn(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,o)=>{let i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),eS=B("$ZodFile",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return o instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:o,inst:t}),r}}),tS=B("$ZodTransform",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Ti(t.constructor.name);let o=e.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new Mn;return r.value=o,r}});function tR(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}s(tR,"handleOptionalResult");var rS=B("$ZodOptional",(t,e)=>{Be.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ct(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${vu(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>tR(i,r.value)):tR(o,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),nS=B("$ZodNullable",(t,e)=>{Be.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${vu(r.source)}|null)$`):void 0}),ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),oS=B("$ZodDefault",(t,e)=>{Be.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>rR(i,e)):rR(o,e)}});function rR(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}s(rR,"handleDefaultResult");var iS=B("$ZodPrefault",(t,e)=>{Be.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),sS=B("$ZodNonOptional",(t,e)=>{Be.init(t,e),ct(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>nR(i,t)):nR(o,t)}});function nR(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}s(nR,"handleNonOptionalResult");var aS=B("$ZodSuccess",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Ti("ZodSuccess");let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.issues.length===0,r)):(r.value=o.issues.length===0,r)}}),cS=B("$ZodCatch",(t,e)=>{Be.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>un(a,n,ir()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(i=>un(i,n,ir()))},input:r.value}),r.issues=[]),r)}}),uS=B("$ZodNaN",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),lS=B("$ZodPipe",(t,e)=>{Be.init(t,e),ct(t._zod,"values",()=>e.in._zod.values),ct(t._zod,"optin",()=>e.in._zod.optin),ct(t._zod,"optout",()=>e.out._zod.optout),ct(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>Em(a,e.in,n)):Em(i,e.in,n)}let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(i=>Em(i,e.out,n)):Em(o,e.out,n)}});function Em(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}s(Em,"handlePipeResult");var Au=B("$ZodCodec",(t,e)=>{Be.init(t,e),ct(t._zod,"values",()=>e.in._zod.values),ct(t._zod,"optin",()=>e.in._zod.optin),ct(t._zod,"optout",()=>e.out._zod.optout),ct(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let i=e.in._zod.run(r,n);return i instanceof Promise?i.then(a=>km(a,e,n)):km(i,e,n)}else{let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>km(a,e,n)):km(i,e,n)}}});function km(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let o=e.transform(t.value,t);return o instanceof Promise?o.then(i=>Im(t,i,e.out,r)):Im(t,o,e.out,r)}else{let o=e.reverseTransform(t.value,t);return o instanceof Promise?o.then(i=>Im(t,i,e.in,r)):Im(t,o,e.in,r)}}s(km,"handleCodecAResult");function Im(t,e,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},n)}s(Im,"handleCodecTxResult");var dS=B("$ZodReadonly",(t,e)=>{Be.init(t,e),ct(t._zod,"propValues",()=>e.innerType._zod.propValues),ct(t._zod,"values",()=>e.innerType._zod.values),ct(t._zod,"optin",()=>e.innerType?._zod?.optin),ct(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(oR):oR(o)}});function oR(t){return t.value=Object.freeze(t.value),t}s(oR,"handleReadonlyResult");var pS=B("$ZodTemplateLiteral",(t,e)=>{Be.init(t,e);let r=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let o=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!o)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let i=o.startsWith("^")?1:0,a=o.endsWith("$")?o.length-1:o.length;r.push(o.slice(i,a))}else if(n===null||sb.has(typeof n))r.push(Sn(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(n,o)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:t,expected:"template_literal",code:"invalid_type"}),n):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),n)}),mS=B("$ZodFunction",(t,e)=>(Be.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let o=t._def.input?dm(t._def.input,n):n,i=Reflect.apply(r,this,o);return t._def.output?dm(t._def.output,i):i}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let o=t._def.input?await pm(t._def.input,n):n,i=await Reflect.apply(r,this,o);return t._def.output?await pm(t._def.output,i):i}},t._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let n=t.constructor;return Array.isArray(r[0])?new n({type:"function",input:new $m({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new n({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let n=t.constructor;return new n({type:"function",input:t._def.input,output:r})},t)),fS=B("$ZodPromise",(t,e)=>{Be.init(t,e),t._zod.parse=(r,n)=>Promise.resolve(r.value).then(o=>e.innerType._zod.run({value:o,issues:[]},n))}),hS=B("$ZodLazy",(t,e)=>{Be.init(t,e),ct(t._zod,"innerType",()=>e.getter()),ct(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),ct(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),ct(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),ct(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,n)=>t._zod.innerType._zod.run(r,n)}),gS=B("$ZodCustom",(t,e)=>{Ct.init(t,e),Be.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,o=e.fn(n);if(o instanceof Promise)return o.then(i=>iR(i,r,n,t));iR(o,r,n,t)}});function iR(t,e,r,n){if(!t){let o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(ga(o))}}s(iR,"handleRefineResult");var Du={};vn(Du,{ar:()=>yS,az:()=>vS,be:()=>_S,bg:()=>bS,ca:()=>wS,cs:()=>SS,da:()=>xS,de:()=>TS,en:()=>Cu,eo:()=>ES,es:()=>kS,fa:()=>IS,fi:()=>PS,fr:()=>AS,frCA:()=>CS,he:()=>OS,hu:()=>$S,id:()=>RS,is:()=>NS,it:()=>DS,ja:()=>jS,ka:()=>MS,kh:()=>zS,km:()=>Ou,ko:()=>US,lt:()=>LS,mk:()=>qS,ms:()=>FS,nl:()=>BS,no:()=>VS,ota:()=>HS,pl:()=>JS,ps:()=>ZS,pt:()=>GS,ru:()=>KS,sl:()=>WS,sv:()=>QS,ta:()=>XS,th:()=>YS,tr:()=>ex,ua:()=>tx,uk:()=>Nu,ur:()=>rx,vi:()=>nx,yo:()=>sx,zhCN:()=>ox,zhTW:()=>ix});var jZ=s(()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return o=>{switch(o.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${o.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ae(o.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${o.prefix}"`:i.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${i.suffix}"`:i.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${i.includes}"`:i.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${i.pattern}`:`${n[i.format]??o.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${o.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${o.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${o.keys.length>1?"\u0629":""}: ${Q(o.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}},"error");function yS(){return{localeError:jZ()}}s(yS,"default");var MZ=s(()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${o.expected}, daxil olan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ae(o.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${i.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:i.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${i.suffix}" il\u0259 bitm\u0259lidir`:i.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${i.includes}" daxil olmal\u0131d\u0131r`:i.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${i.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[i.format]??o.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${o.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${o.keys.length>1?"lar":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`${o.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${o.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}},"error");function vS(){return{localeError:MZ()}}s(vS,"default");function dR(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(dR,"getBelarusianPlural");var zZ=s(()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0456\u045E";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${o.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ae(o.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=dR(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=dR(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${o.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${Q(o.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${o.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}},"error");function _S(){return{localeError:zZ()}}s(_S,"default");var UZ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),LZ=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${UZ(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ae(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${Q(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.maximum.toString()} ${i.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.minimum.toString()} ${i.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;if(o.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${o.prefix}"`;if(o.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${o.suffix}"`;if(o.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${o.includes}"`;if(o.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${o.pattern}`;let i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return o.format==="emoji"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="datetime"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="date"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),o.format==="time"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="duration"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${i} ${r[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${Q(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}},"error");function bS(){return{localeError:LZ()}}s(bS,"default");var qZ=s(()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${o.expected}, s'ha rebut ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Valor inv\xE0lid: s'esperava ${ae(o.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${Q(o.values," o ")}`;case"too_big":{let i=o.inclusive?"com a m\xE0xim":"menys de",a=e(o.origin);return a?`Massa gran: s'esperava que ${o.origin??"el valor"} contingu\xE9s ${i} ${o.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${o.origin??"el valor"} fos ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"com a m\xEDnim":"m\xE9s de",a=e(o.origin);return a?`Massa petit: s'esperava que ${o.origin} contingu\xE9s ${i} ${o.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${o.origin} fos ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\xE0lid: ha d'incloure "${i.includes}"`:i.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${i.pattern}`:`Format inv\xE0lid per a ${n[i.format]??o.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${o.divisor}`;case"unrecognized_keys":return`Clau${o.keys.length>1?"s":""} no reconeguda${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${o.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${o.origin}`;default:return"Entrada inv\xE0lida"}}},"error");function wS(){return{localeError:qZ()}}s(wS,"default");var FZ=s(()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(o))return"pole";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return o=>{switch(o.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${o.expected}, obdr\u017Eeno ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ae(o.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${i.pattern}`:`Neplatn\xFD form\xE1t ${n[i.format]??o.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${o.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${Q(o.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${o.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${o.origin}`;default:return"Neplatn\xFD vstup"}}},"error");function SS(){return{localeError:FZ()}}s(SS,"default");var BZ=s(()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return c},"parsedType"),i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${ae(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${Q(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`For stor: forventede ${d??"value"} ${l.verb} ${c} ${a.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${d??"value"} havde ${c} ${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`For lille: forventede ${d} ${l.verb} ${c} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${c} ${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Ugyldig streng: skal starte med "${c.prefix}"`:c.format==="ends_with"?`Ugyldig streng: skal ende med "${c.suffix}"`:c.format==="includes"?`Ugyldig streng: skal indeholde "${c.includes}"`:c.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${c.pattern}`:`Ugyldig ${i[c.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${Q(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}},"error");function xS(){return{localeError:BZ()}}s(xS,"default");var VZ=s(()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"Zahl";case"object":{if(Array.isArray(o))return"Array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return o=>{switch(o.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${o.expected}, erhalten ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ae(o.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ist`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ist`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ung\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\xFCltig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${o.divisor} sein`;case"unrecognized_keys":return`${o.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${Q(o.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${o.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${o.origin}`;default:return"Ung\xFCltige Eingabe"}}},"error");function TS(){return{localeError:VZ()}}s(TS,"default");var HZ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),ZZ=s(()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${HZ(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${ae(n.values[0])}`:`Invalid option: expected one of ${Q(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Too big: expected ${n.origin??"value"} to have ${o}${n.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Too small: expected ${n.origin} to have ${o}${n.minimum.toString()} ${i.unit}`:`Too small: expected ${n.origin} to be ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${r[o.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${Q(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}},"error");function Cu(){return{localeError:ZZ()}}s(Cu,"default");var JZ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),GZ=s(()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${JZ(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${ae(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${Q(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${o}${n.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${r[o.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${Q(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}},"error");function ES(){return{localeError:GZ()}}s(ES,"default");var KZ=s(()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return c},"parsedType"),i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${ae(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${Q(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`Demasiado grande: se esperaba que ${d??"valor"} tuviera ${c}${a.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${d??"valor"} fuera ${c}${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${c}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${c}${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${c.prefix}"`:c.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${c.suffix}"`:c.format==="includes"?`Cadena inv\xE1lida: debe incluir "${c.includes}"`:c.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${c.pattern}`:`Inv\xE1lido ${i[c.format]??a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${Q(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}},"error");function kS(){return{localeError:KZ()}}s(kS,"default");var WZ=s(()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0622\u0631\u0627\u06CC\u0647";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return o=>{switch(o.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${o.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(o.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return o.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ae(o.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${Q(o.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:i.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:i.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${i.includes}" \u0628\u0627\u0634\u062F`:i.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${i.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[i.format]??o.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${o.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${o.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${Q(o.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${o.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${o.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}},"error");function IS(){return{localeError:WZ()}}s(IS,"default");var QZ=s(()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return o=>{switch(o.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${o.expected}, oli ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ae(o.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${i}${o.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${i}${o.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${i.pattern}`:`Virheellinen ${n[i.format]??o.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${o.divisor} monikerta`;case"unrecognized_keys":return`${o.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${Q(o.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}},"error");function PS(){return{localeError:QZ()}}s(PS,"default");var XZ=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombre";case"object":{if(Array.isArray(o))return"tableau";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : ${o.expected} attendu, ${r(o.input)} re\xE7u`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : ${ae(o.values[0])} attendu`:`Option invalide : une valeur parmi ${Q(o.values,"|")} attendue`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Trop grand : ${o.origin??"valeur"} doit ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${o.origin??"valeur"} doit \xEAtre ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Trop petit : ${o.origin} doit ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : ${o.origin} doit \xEAtre ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${Q(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function AS(){return{localeError:XZ()}}s(AS,"default");var YZ=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${o.expected}, re\xE7u ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : attendu ${ae(o.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u2264":"<",a=e(o.origin);return a?`Trop grand : attendu que ${o.origin??"la valeur"} ait ${i}${o.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${o.origin??"la valeur"} soit ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u2265":">",a=e(o.origin);return a?`Trop petit : attendu que ${o.origin} ait ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${o.origin} soit ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${Q(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function CS(){return{localeError:YZ()}}s(CS,"default");var e8=s(()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=s(d=>d?t[d]:void 0,"typeEntry"),n=s(d=>{let p=r(d);return p?p.label:d??t.unknown.label},"typeLabel"),o=s(d=>`\u05D4${n(d)}`,"withDefinite"),i=s(d=>(r(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA","verbFor"),a=s(d=>d?e[d]??null:null,"getSizing"),c=s(d=>{let p=typeof d;switch(p){case"number":return Number.isNaN(d)?"NaN":"number";case"object":return Array.isArray(d)?"array":d===null?"null":Object.getPrototypeOf(d)!==Object.prototype&&d.constructor?d.constructor.name:"object";default:return p}},"parsedType"),l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return d=>{switch(d.code){case"invalid_type":{let p=d.expected,m=n(p),h=c(d.input),y=t[h]?.label??h;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}, \u05D4\u05EA\u05E7\u05D1\u05DC ${y}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ae(d.values[0])}`;let p=d.values.map(y=>ae(y));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p[0]} \u05D0\u05D5 ${p[1]}`;let m=p[p.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p.slice(0,-1).join(", ")} \u05D0\u05D5 ${m}`}case"too_big":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",f=d.inclusive?`${d.maximum} ${p?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${p?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?"<=":"<",y=i(d.origin??"value");return p?.unit?`${p.longLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()} ${p.unit}`:`${p?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()}`}case"too_small":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let _=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${_}`}let f=d.inclusive?`${d.minimum} ${p?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${p?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?">=":">",y=i(d.origin??"value");return p?.unit?`${p.shortLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()} ${p.unit}`:`${p?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()}`}case"invalid_format":{let p=d;if(p.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${p.prefix}"`;if(p.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${p.suffix}"`;if(p.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${p.includes}"`;if(p.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${p.pattern}`;let m=l[p.format],h=m?.label??p.format,g=(m?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${h} \u05DC\u05D0 ${g}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${Q(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${o(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}},"error");function OS(){return{localeError:e8()}}s(OS,"default");var t8=s(()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(o))return"t\xF6mb";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return o=>{switch(o.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${o.expected}, a kapott \xE9rt\xE9k ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ae(o.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xFAl nagy: ${o.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${i}${o.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${o.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} m\xE9rete t\xFAl kicsi ${i}${o.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} t\xFAl kicsi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\xC9rv\xE9nytelen string: "${i.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:i.format==="ends_with"?`\xC9rv\xE9nytelen string: "${i.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:i.format==="includes"?`\xC9rv\xE9nytelen string: "${i.includes}" \xE9rt\xE9ket kell tartalmaznia`:i.format==="regex"?`\xC9rv\xE9nytelen string: ${i.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[i.format]??o.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${o.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${o.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${o.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}},"error");function $S(){return{localeError:t8()}}s($S,"default");var r8=s(()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak valid: diharapkan ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak valid: diharapkan ${ae(o.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: diharapkan ${o.origin??"value"} memiliki ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${o.origin??"value"} menjadi ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: diharapkan ${o.origin} memiliki ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${o.origin} menjadi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${n[i.format]??o.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${o.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${o.origin}`;default:return"Input tidak valid"}}},"error");function RS(){return{localeError:r8()}}s(RS,"default");var n8=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),o8=s(()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${n8(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ae(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${Q(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${o}${n.maximum.toString()} ${i.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${o}${n.minimum.toString()} ${i.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${o.prefix}"`:o.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${o.suffix}"`:o.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${o.includes}"`:o.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${o.pattern}`:`Rangt ${r[o.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${Q(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}},"error");function NS(){return{localeError:o8()}}s(NS,"default");var i8=s(()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numero";case"object":{if(Array.isArray(o))return"vettore";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input non valido: atteso ${o.expected}, ricevuto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input non valido: atteso ${ae(o.values[0])}`:`Opzione non valida: atteso uno tra ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Troppo grande: ${o.origin??"valore"} deve avere ${i}${o.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${o.origin??"valore"} deve essere ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Troppo piccolo: ${o.origin} deve avere ${i}${o.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${o.origin} deve essere ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${o.divisor}`;case"unrecognized_keys":return`Chiav${o.keys.length>1?"i":"e"} non riconosciut${o.keys.length>1?"e":"a"}: ${Q(o.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${o.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${o.origin}`;default:return"Input non valido"}}},"error");function DS(){return{localeError:i8()}}s(DS,"default");var s8=s(()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(o))return"\u914D\u5217";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${o.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(o.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return o.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ae(o.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${Q(o.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let i=o.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=e(o.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${a.unit??"\u8981\u7D20"}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let i=o.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=e(o.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${a.unit}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${i.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${o.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${o.keys.length>1?"\u7FA4":""}: ${Q(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}},"error");function jS(){return{localeError:s8()}}s(jS,"default");var a8=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},"parsedType"),c8=s(()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${a8(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ae(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${Q(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${i.verb} ${o}${n.maximum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${i.verb} ${o}${n.minimum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.prefix}"-\u10D8\u10D7`:o.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.suffix}"-\u10D8\u10D7`:o.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${o.includes}"-\u10E1`:o.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${o.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[o.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${Q(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}},"error");function MS(){return{localeError:c8()}}s(MS,"default");var u8=s(()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(o))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(o===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return o=>{switch(o.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ae(o.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${i.prefix}"`:i.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${i.suffix}"`:i.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${i.includes}"`:i.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${i.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${o.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${Q(o.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}},"error");function Ou(){return{localeError:u8()}}s(Ou,"default");function zS(){return Ou()}s(zS,"default");var l8=s(()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return o=>{switch(o.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${o.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(o.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return o.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ae(o.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${Q(o.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let i=o.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=i==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()} ${i}${a}`}case"too_small":{let i=o.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=i==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()} ${i}${a}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:i.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${i.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[i.format]??o.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${o.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${Q(o.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${o.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${o.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}},"error");function US(){return{localeError:l8()}}s(US,"default");var d8=s(t=>Ru(typeof t,t),"parsedType"),Ru=s((t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},"parsedTypeFromType"),$u=s(t=>t.charAt(0).toUpperCase()+t.slice(1),"capitalizeFirstCharacter");function pR(t){let e=Math.abs(t),r=e%10,n=e%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}s(pR,"getUnitTypeFromNumber");var p8=s(()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,o,i,a){let c=t[n]??null;return c===null?c:{unit:c.unit[o],verb:c.verb[a][i?"inclusive":"notInclusive"]}}s(e,"getSizing");let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${d8(n.input)}, o tik\u0117tasi - ${Ru(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${ae(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${Q(n.values,"|")} pasirinkim\u0173`;case"too_big":{let o=Ru(n.origin),i=e(n.origin,pR(Number(n.maximum)),n.inclusive??!1,"smaller");if(i?.verb)return`${$u(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.maximum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${$u(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.maximum.toString()} ${i?.unit}`}case"too_small":{let o=Ru(n.origin),i=e(n.origin,pR(Number(n.minimum)),n.inclusive??!1,"bigger");if(i?.verb)return`${$u(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.minimum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${$u(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.minimum.toString()} ${i?.unit}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${o.prefix}"`:o.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${o.includes}"`:o.format==="regex"?`Eilut\u0117 privalo atitikti ${o.pattern}`:`Neteisingas ${r[o.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${Q(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let o=Ru(n.origin);return`${$u(o??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}},"error");function LS(){return{localeError:p8()}}s(LS,"default");var m8=s(()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(o))return"\u043D\u0438\u0437\u0430";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return o=>{switch(o.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${ae(o.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${Q(o.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${o.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${o.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}},"error");function qS(){return{localeError:m8()}}s(qS,"default");var f8=s(()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombor";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak sah: dijangka ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak sah: dijangka ${ae(o.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: dijangka ${o.origin??"nilai"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${o.origin??"nilai"} adalah ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: dijangka ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${o.origin} adalah ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${n[i.format]??o.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${Q(o.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${o.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${o.origin}`;default:return"Input tidak sah"}}},"error");function FS(){return{localeError:f8()}}s(FS,"default");var h8=s(()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"getal";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return o=>{switch(o.code){case"invalid_type":return`Ongeldige invoer: verwacht ${o.expected}, ontving ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ongeldige invoer: verwacht ${ae(o.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Te groot: verwacht dat ${o.origin??"waarde"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elementen"}`:`Te groot: verwacht dat ${o.origin??"waarde"} ${i}${o.maximum.toString()} is`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Te klein: verwacht dat ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Te klein: verwacht dat ${o.origin} ${i}${o.minimum.toString()} is`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${o.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${o.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${o.origin}`;default:return"Ongeldige invoer"}}},"error");function BS(){return{localeError:h8()}}s(BS,"default");var g8=s(()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"tall";case"object":{if(Array.isArray(o))return"liste";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Ugyldig input: forventet ${o.expected}, fikk ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ugyldig verdi: forventet ${ae(o.values[0])}`:`Ugyldig valg: forventet en av ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${i.pattern}`:`Ugyldig ${n[i.format]??o.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${Q(o.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${o.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${o.origin}`;default:return"Ugyldig input"}}},"error");function VS(){return{localeError:g8()}}s(VS,"default");var y8=s(()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numara";case"object":{if(Array.isArray(o))return"saf";if(o===null)return"gayb";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return o=>{switch(o.code){case"invalid_type":return`F\xE2sit giren: umulan ${o.expected}, al\u0131nan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`F\xE2sit giren: umulan ${ae(o.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let i=o;return i.format==="starts_with"?`F\xE2sit metin: "${i.prefix}" ile ba\u015Flamal\u0131.`:i.format==="ends_with"?`F\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\xE2sit metin: "${i.includes}" ihtiv\xE2 etmeli.`:i.format==="regex"?`F\xE2sit metin: ${i.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[i.format]??o.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${o.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${o.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}},"error");function HS(){return{localeError:y8()}}s(HS,"default");var v8=s(()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0627\u0631\u06D0";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return o=>{switch(o.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${o.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(o.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return o.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ae(o.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${Q(o.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0648\u064A`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0648\u064A`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:i.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:i.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${i.includes}" \u0648\u0644\u0631\u064A`:i.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${i.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[i.format]??o.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${o.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${o.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${Q(o.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${o.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${o.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}},"error");function ZS(){return{localeError:v8()}}s(ZS,"default");var _8=s(()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"liczba";case"object":{if(Array.isArray(o))return"tablica";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return o=>{switch(o.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${o.expected}, otrzymano ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ae(o.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${i.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[i.format]??o.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${o.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${o.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${o.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}},"error");function JS(){return{localeError:_8()}}s(JS,"default");var b8=s(()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(o))return"array";if(o===null)return"nulo";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${o.expected}, recebido ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entrada inv\xE1lida: esperado ${ae(o.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Muito grande: esperado que ${o.origin??"valor"} tivesse ${i}${o.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${o.origin??"valor"} fosse ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Muito pequeno: esperado que ${o.origin} tivesse ${i}${o.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${o.origin} fosse ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${i.pattern}`:`${n[i.format]??o.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${o.divisor}`;case"unrecognized_keys":return`Chave${o.keys.length>1?"s":""} desconhecida${o.keys.length>1?"s":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${o.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${o.origin}`;default:return"Campo inv\xE1lido"}}},"error");function GS(){return{localeError:b8()}}s(GS,"default");function mR(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(mR,"getRussianPlural");var w8=s(()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ae(o.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=mR(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=mR(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${o.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0438":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}},"error");function KS(){return{localeError:w8()}}s(KS,"default");var S8=s(()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(o))return"tabela";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return o=>{switch(o.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${o.expected}, prejeto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ae(o.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} imelo ${i}${o.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${o.origin} imelo ${i}${o.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${n[i.format]??o.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${o.divisor}`;case"unrecognized_keys":return`Neprepoznan${o.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${Q(o.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${o.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${o.origin}`;default:return"Neveljaven vnos"}}},"error");function WS(){return{localeError:S8()}}s(WS,"default");var x8=s(()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"antal";case"object":{if(Array.isArray(o))return"lista";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return o=>{switch(o.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${o.expected}, fick ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ae(o.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${n[i.format]??o.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${Q(o.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${o.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${o.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}},"error");function QS(){return{localeError:x8()}}s(QS,"default");var T8=s(()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(o))return"\u0B85\u0BA3\u0BBF";if(o===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ae(o.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Q(o.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${i.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${o.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${o.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}},"error");function XS(){return{localeError:T8()}}s(XS,"default");var E8=s(()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(o))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(o===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return o=>{switch(o.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${o.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ae(o.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${i.suffix}"`:i.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${i.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:i.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${i.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${o.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${Q(o.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}},"error");function YS(){return{localeError:E8()}}s(YS,"default");var k8=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),I8=s(()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${k8(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ae(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${Q(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()} ${i.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()} ${i.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ge\xE7ersiz metin: "${o.prefix}" ile ba\u015Flamal\u0131`:o.format==="ends_with"?`Ge\xE7ersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Ge\xE7ersiz metin: "${o.includes}" i\xE7ermeli`:o.format==="regex"?`Ge\xE7ersiz metin: ${o.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[o.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${Q(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}},"error");function ex(){return{localeError:I8()}}s(ex,"default");var P8=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${o.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ae(o.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} \u0431\u0443\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0456":""}: ${Q(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${o.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}},"error");function Nu(){return{localeError:P8()}}s(Nu,"default");function tx(){return Nu()}s(tx,"default");var A8=s(()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(o))return"\u0622\u0631\u06D2";if(o===null)return"\u0646\u0644";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return o=>{switch(o.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${o.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(o.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return o.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ae(o.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${Q(o.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${i}${o.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u06D2 ${i}${o.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u0627 ${i}${o.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${i.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${o.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${o.keys.length>1?"\u0632":""}: ${Q(o.keys,"\u060C ")}`;case"invalid_key":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}},"error");function rx(){return{localeError:A8()}}s(rx,"default");var C8=s(()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(o))return"m\u1EA3ng";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return o=>{switch(o.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${o.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ae(o.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${i.pattern}`:`${n[i.format]??o.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${o.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${Q(o.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}},"error");function nx(){return{localeError:C8()}}s(nx,"default");var O8=s(()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(o))return"\u6570\u7EC4";if(o===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${o.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ae(o.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.prefix}" \u5F00\u5934`:i.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.suffix}" \u7ED3\u5C3E`:i.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${i.pattern}`:`\u65E0\u6548${n[i.format]??o.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${o.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${Q(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${o.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}},"error");function ox(){return{localeError:O8()}}s(ox,"default");var $8=s(()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${o.expected}\uFF0C\u4F46\u6536\u5230 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ae(o.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.prefix}" \u958B\u982D`:i.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.suffix}" \u7D50\u5C3E`:i.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${i.pattern}`:`\u7121\u6548\u7684 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${o.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${o.keys.length>1?"\u5011":""}\uFF1A${Q(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}},"error");function ix(){return{localeError:$8()}}s(ix,"default");var R8=s(()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(o))return"akop\u1ECD";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return o=>{switch(o.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${o.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ae(o.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${Q(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin??"iye"} ${a.verb} ${i}${o.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.maximum}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin} ${a.verb} ${i}${o.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.minimum}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${i.prefix}"`:i.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${i.suffix}"`:i.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${i.includes}"`:i.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${i.pattern}`:`A\u1E63\xEC\u1E63e: ${n[i.format]??o.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${o.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${Q(o.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}},"error");function sx(){return{localeError:R8()}}s(sx,"default");var fR,ax=Symbol("ZodOutput"),cx=Symbol("ZodInput"),Sa=class{static{s(this,"$ZodRegistry")}constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let n={...this.get(r)??{}};delete n.id;let o={...n,...this._map.get(e)};return Object.keys(o).length?o:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Rm(){return new Sa}s(Rm,"registry");(fR=globalThis).__zod_globalRegistry??(fR.__zod_globalRegistry=Rm());var Dr=globalThis.__zod_globalRegistry;function ux(t,e){return new t({type:"string",...ce(e)})}s(ux,"_string");function lx(t,e){return new t({type:"string",coerce:!0,...ce(e)})}s(lx,"_coercedString");function Nm(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...ce(e)})}s(Nm,"_email");function ju(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...ce(e)})}s(ju,"_guid");function Dm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...ce(e)})}s(Dm,"_uuid");function jm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ce(e)})}s(jm,"_uuidv4");function Mm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ce(e)})}s(Mm,"_uuidv6");function zm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ce(e)})}s(zm,"_uuidv7");function Mu(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...ce(e)})}s(Mu,"_url");function Um(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...ce(e)})}s(Um,"_emoji");function Lm(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...ce(e)})}s(Lm,"_nanoid");function qm(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...ce(e)})}s(qm,"_cuid");function Fm(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...ce(e)})}s(Fm,"_cuid2");function Bm(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...ce(e)})}s(Bm,"_ulid");function Vm(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...ce(e)})}s(Vm,"_xid");function Hm(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...ce(e)})}s(Hm,"_ksuid");function Zm(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...ce(e)})}s(Zm,"_ipv4");function Jm(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...ce(e)})}s(Jm,"_ipv6");function dx(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...ce(e)})}s(dx,"_mac");function Gm(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ce(e)})}s(Gm,"_cidrv4");function Km(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ce(e)})}s(Km,"_cidrv6");function Wm(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...ce(e)})}s(Wm,"_base64");function Qm(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...ce(e)})}s(Qm,"_base64url");function Xm(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...ce(e)})}s(Xm,"_e164");function Ym(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...ce(e)})}s(Ym,"_jwt");var px={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function mx(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ce(e)})}s(mx,"_isoDateTime");function fx(t,e){return new t({type:"string",format:"date",check:"string_format",...ce(e)})}s(fx,"_isoDate");function hx(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...ce(e)})}s(hx,"_isoTime");function gx(t,e){return new t({type:"string",format:"duration",check:"string_format",...ce(e)})}s(gx,"_isoDuration");function yx(t,e){return new t({type:"number",checks:[],...ce(e)})}s(yx,"_number");function vx(t,e){return new t({type:"number",coerce:!0,checks:[],...ce(e)})}s(vx,"_coercedNumber");function _x(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...ce(e)})}s(_x,"_int");function bx(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...ce(e)})}s(bx,"_float32");function wx(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...ce(e)})}s(wx,"_float64");function Sx(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...ce(e)})}s(Sx,"_int32");function xx(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...ce(e)})}s(xx,"_uint32");function Tx(t,e){return new t({type:"boolean",...ce(e)})}s(Tx,"_boolean");function Ex(t,e){return new t({type:"boolean",coerce:!0,...ce(e)})}s(Ex,"_coercedBoolean");function kx(t,e){return new t({type:"bigint",...ce(e)})}s(kx,"_bigint");function Ix(t,e){return new t({type:"bigint",coerce:!0,...ce(e)})}s(Ix,"_coercedBigint");function Px(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ce(e)})}s(Px,"_int64");function Ax(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ce(e)})}s(Ax,"_uint64");function Cx(t,e){return new t({type:"symbol",...ce(e)})}s(Cx,"_symbol");function Ox(t,e){return new t({type:"undefined",...ce(e)})}s(Ox,"_undefined");function $x(t,e){return new t({type:"null",...ce(e)})}s($x,"_null");function Rx(t){return new t({type:"any"})}s(Rx,"_any");function Nx(t){return new t({type:"unknown"})}s(Nx,"_unknown");function Dx(t,e){return new t({type:"never",...ce(e)})}s(Dx,"_never");function jx(t,e){return new t({type:"void",...ce(e)})}s(jx,"_void");function Mx(t,e){return new t({type:"date",...ce(e)})}s(Mx,"_date");function zx(t,e){return new t({type:"date",coerce:!0,...ce(e)})}s(zx,"_coercedDate");function Ux(t,e){return new t({type:"nan",...ce(e)})}s(Ux,"_nan");function zo(t,e){return new Sm({check:"less_than",...ce(e),value:t,inclusive:!1})}s(zo,"_lt");function Tn(t,e){return new Sm({check:"less_than",...ce(e),value:t,inclusive:!0})}s(Tn,"_lte");function Uo(t,e){return new xm({check:"greater_than",...ce(e),value:t,inclusive:!1})}s(Uo,"_gt");function rn(t,e){return new xm({check:"greater_than",...ce(e),value:t,inclusive:!0})}s(rn,"_gte");function Lx(t){return Uo(0,t)}s(Lx,"_positive");function qx(t){return zo(0,t)}s(qx,"_negative");function Fx(t){return Tn(0,t)}s(Fx,"_nonpositive");function Bx(t){return rn(0,t)}s(Bx,"_nonnegative");function ds(t,e){return new Bb({check:"multiple_of",...ce(e),value:t})}s(ds,"_multipleOf");function xa(t,e){return new Zb({check:"max_size",...ce(e),maximum:t})}s(xa,"_maxSize");function ps(t,e){return new Jb({check:"min_size",...ce(e),minimum:t})}s(ps,"_minSize");function zu(t,e){return new Gb({check:"size_equals",...ce(e),size:t})}s(zu,"_size");function Ta(t,e){return new Kb({check:"max_length",...ce(e),maximum:t})}s(Ta,"_maxLength");function Ci(t,e){return new Wb({check:"min_length",...ce(e),minimum:t})}s(Ci,"_minLength");function Ea(t,e){return new Qb({check:"length_equals",...ce(e),length:t})}s(Ea,"_length");function Uu(t,e){return new Xb({check:"string_format",format:"regex",...ce(e),pattern:t})}s(Uu,"_regex");function Lu(t){return new Yb({check:"string_format",format:"lowercase",...ce(t)})}s(Lu,"_lowercase");function qu(t){return new ew({check:"string_format",format:"uppercase",...ce(t)})}s(qu,"_uppercase");function Fu(t,e){return new tw({check:"string_format",format:"includes",...ce(e),includes:t})}s(Fu,"_includes");function Bu(t,e){return new rw({check:"string_format",format:"starts_with",...ce(e),prefix:t})}s(Bu,"_startsWith");function Vu(t,e){return new nw({check:"string_format",format:"ends_with",...ce(e),suffix:t})}s(Vu,"_endsWith");function Vx(t,e,r){return new ow({check:"property",property:t,schema:e,...ce(r)})}s(Vx,"_property");function Hu(t,e){return new iw({check:"mime_type",mime:t,...ce(e)})}s(Hu,"_mime");function co(t){return new sw({check:"overwrite",tx:t})}s(co,"_overwrite");function Zu(t){return co(e=>e.normalize(t))}s(Zu,"_normalize");function Ju(){return co(t=>t.trim())}s(Ju,"_trim");function Gu(){return co(t=>t.toLowerCase())}s(Gu,"_toLowerCase");function Ku(){return co(t=>t.toUpperCase())}s(Ku,"_toUpperCase");function Wu(){return co(t=>nb(t))}s(Wu,"_slugify");function Hx(t,e,r){return new t({type:"array",element:e,...ce(r)})}s(Hx,"_array");function D8(t,e,r){return new t({type:"union",options:e,...ce(r)})}s(D8,"_union");function j8(t,e,r,n){return new t({type:"union",options:r,discriminator:e,...ce(n)})}s(j8,"_discriminatedUnion");function M8(t,e,r){return new t({type:"intersection",left:e,right:r})}s(M8,"_intersection");function z8(t,e,r,n){let o=r instanceof Be,i=o?n:r,a=o?r:null;return new t({type:"tuple",items:e,rest:a,...ce(i)})}s(z8,"_tuple");function U8(t,e,r,n){return new t({type:"record",keyType:e,valueType:r,...ce(n)})}s(U8,"_record");function L8(t,e,r,n){return new t({type:"map",keyType:e,valueType:r,...ce(n)})}s(L8,"_map");function q8(t,e,r){return new t({type:"set",valueType:e,...ce(r)})}s(q8,"_set");function F8(t,e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new t({type:"enum",entries:n,...ce(r)})}s(F8,"_enum");function B8(t,e,r){return new t({type:"enum",entries:e,...ce(r)})}s(B8,"_nativeEnum");function V8(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...ce(r)})}s(V8,"_literal");function Zx(t,e){return new t({type:"file",...ce(e)})}s(Zx,"_file");function H8(t,e){return new t({type:"transform",transform:e})}s(H8,"_transform");function Z8(t,e){return new t({type:"optional",innerType:e})}s(Z8,"_optional");function J8(t,e){return new t({type:"nullable",innerType:e})}s(J8,"_nullable");function G8(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():ib(r)}})}s(G8,"_default");function K8(t,e,r){return new t({type:"nonoptional",innerType:e,...ce(r)})}s(K8,"_nonoptional");function W8(t,e){return new t({type:"success",innerType:e})}s(W8,"_success");function Q8(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}s(Q8,"_catch");function X8(t,e,r){return new t({type:"pipe",in:e,out:r})}s(X8,"_pipe");function Y8(t,e){return new t({type:"readonly",innerType:e})}s(Y8,"_readonly");function eJ(t,e,r){return new t({type:"template_literal",parts:e,...ce(r)})}s(eJ,"_templateLiteral");function tJ(t,e){return new t({type:"lazy",getter:e})}s(tJ,"_lazy");function rJ(t,e){return new t({type:"promise",innerType:e})}s(rJ,"_promise");function Jx(t,e,r){let n=ce(r);return n.abort??(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}s(Jx,"_custom");function Gx(t,e,r){return new t({type:"custom",check:"custom",fn:e,...ce(r)})}s(Gx,"_refine");function Kx(t){let e=hR(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(ga(n,r.value,e._zod.def));else{let o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),r.issues.push(ga(o))}},t(r.value,r)));return e}s(Kx,"_superRefine");function hR(t,e){let r=new Ct({check:"custom",...ce(e)});return r._zod.check=t,r}s(hR,"_check");function Wx(t){let e=new Ct({check:"describe"});return e._zod.onattach=[r=>{let n=Dr.get(r)??{};Dr.add(r,{...n,description:t})}],e._zod.check=()=>{},e}s(Wx,"describe");function Qx(t){let e=new Ct({check:"meta"});return e._zod.onattach=[r=>{let n=Dr.get(r)??{};Dr.add(r,{...n,...t})}],e._zod.check=()=>{},e}s(Qx,"meta");function Xx(t,e){let r=ce(e),n=r.truthy??["true","1","yes","on","y","enabled"],o=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(y=>typeof y=="string"?y.toLowerCase():y),o=o.map(y=>typeof y=="string"?y.toLowerCase():y));let i=new Set(n),a=new Set(o),c=t.Codec??Au,l=t.Boolean??Pu,d=t.String??ls,p=new d({type:"string",error:r.error}),m=new l({type:"boolean",error:r.error}),h=new c({type:"pipe",in:p,out:m,transform:s(((y,g)=>{let f=y;return r.case!=="sensitive"&&(f=f.toLowerCase()),i.has(f)?!0:a.has(f)?!1:(g.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:g.value,inst:h,continue:!1}),{})}),"transform"),reverseTransform:s(((y,g)=>y===!0?n[0]||"true":o[0]||"false"),"reverseTransform"),error:r.error});return h}s(Xx,"_stringbool");function ka(t,e,r,n={}){let o=ce(n),i={...ce(n),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:c=>r.test(c),...o};return r instanceof RegExp&&(i.pattern=r),new t(i)}s(ka,"_stringFormat");var Qu=class{static{s(this,"JSONSchemaGenerator")}constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Dr,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,r={path:[],schemaPath:[]}){var n;let o=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let c={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(e,c);let l=e._zod.toJSONSchema?.();if(l)c.schema=l;else{let m={...r,schemaPath:[...r.schemaPath,e],path:r.path},h=e._zod.parent;if(h)c.ref=h,this.process(h,m),this.seen.get(h).isParent=!0;else{let y=c.schema;switch(o.type){case"string":{let g=y;g.type="string";let{minimum:f,maximum:_,format:w,patterns:b,contentEncoding:S}=e._zod.bag;if(typeof f=="number"&&(g.minLength=f),typeof _=="number"&&(g.maxLength=_),w&&(g.format=i[w]??w,g.format===""&&delete g.format),S&&(g.contentEncoding=S),b&&b.size>0){let k=[...b];k.length===1?g.pattern=k[0].source:k.length>1&&(c.schema.allOf=[...k.map(R=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:R.source}))])}break}case"number":{let g=y,{minimum:f,maximum:_,format:w,multipleOf:b,exclusiveMaximum:S,exclusiveMinimum:k}=e._zod.bag;typeof w=="string"&&w.includes("int")?g.type="integer":g.type="number",typeof k=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.minimum=k,g.exclusiveMinimum=!0):g.exclusiveMinimum=k),typeof f=="number"&&(g.minimum=f,typeof k=="number"&&this.target!=="draft-4"&&(k>=f?delete g.minimum:delete g.exclusiveMinimum)),typeof S=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.maximum=S,g.exclusiveMaximum=!0):g.exclusiveMaximum=S),typeof _=="number"&&(g.maximum=_,typeof S=="number"&&this.target!=="draft-4"&&(S<=_?delete g.maximum:delete g.exclusiveMaximum)),typeof b=="number"&&(g.multipleOf=b);break}case"boolean":{let g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(y.type="string",y.nullable=!0,y.enum=[null]):y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let g=y,{minimum:f,maximum:_}=e._zod.bag;typeof f=="number"&&(g.minItems=f),typeof _=="number"&&(g.maxItems=_),g.type="array",g.items=this.process(o.element,{...m,path:[...m.path,"items"]});break}case"object":{let g=y;g.type="object",g.properties={};let f=o.shape;for(let b in f)g.properties[b]=this.process(f[b],{...m,path:[...m.path,"properties",b]});let _=new Set(Object.keys(f)),w=new Set([..._].filter(b=>{let S=o.shape[b]._zod;return this.io==="input"?S.optin===void 0:S.optout===void 0}));w.size>0&&(g.required=Array.from(w)),o.catchall?._zod.def.type==="never"?g.additionalProperties=!1:o.catchall?o.catchall&&(g.additionalProperties=this.process(o.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{let g=y,f=o.discriminator!==void 0,_=o.options.map((w,b)=>this.process(w,{...m,path:[...m.path,f?"oneOf":"anyOf",b]}));f?g.oneOf=_:g.anyOf=_;break}case"intersection":{let g=y,f=this.process(o.left,{...m,path:[...m.path,"allOf",0]}),_=this.process(o.right,{...m,path:[...m.path,"allOf",1]}),w=s(S=>"allOf"in S&&Object.keys(S).length===1,"isSimpleIntersection"),b=[...w(f)?f.allOf:[f],...w(_)?_.allOf:[_]];g.allOf=b;break}case"tuple":{let g=y;g.type="array";let f=this.target==="draft-2020-12"?"prefixItems":"items",_=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",w=o.items.map((R,O)=>this.process(R,{...m,path:[...m.path,f,O]})),b=o.rest?this.process(o.rest,{...m,path:[...m.path,_,...this.target==="openapi-3.0"?[o.items.length]:[]]}):null;this.target==="draft-2020-12"?(g.prefixItems=w,b&&(g.items=b)):this.target==="openapi-3.0"?(g.items={anyOf:w},b&&g.items.anyOf.push(b),g.minItems=w.length,b||(g.maxItems=w.length)):(g.items=w,b&&(g.additionalItems=b));let{minimum:S,maximum:k}=e._zod.bag;typeof S=="number"&&(g.minItems=S),typeof k=="number"&&(g.maxItems=k);break}case"record":{let g=y;g.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(g.propertyNames=this.process(o.keyType,{...m,path:[...m.path,"propertyNames"]})),g.additionalProperties=this.process(o.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let g=y,f=yu(o.entries);f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),g.enum=f;break}case"literal":{let g=y,f=[];for(let _ of o.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");f.push(Number(_))}else f.push(_);if(f.length!==0)if(f.length===1){let _=f[0];g.type=_===null?"null":typeof _,this.target==="draft-4"||this.target==="openapi-3.0"?g.enum=[_]:g.const=_}else f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),f.every(_=>typeof _=="boolean")&&(g.type="string"),f.every(_=>_===null)&&(g.type="null"),g.enum=f;break}case"file":{let g=y,f={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:w,mime:b}=e._zod.bag;_!==void 0&&(f.minLength=_),w!==void 0&&(f.maxLength=w),b?b.length===1?(f.contentMediaType=b[0],Object.assign(g,f)):g.anyOf=b.map(S=>({...f,contentMediaType:S})):Object.assign(g,f);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let g=this.process(o.innerType,m);this.target==="openapi-3.0"?(c.ref=o.innerType,y.nullable=!0):y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"success":{let g=y;g.type="boolean";break}case"default":{this.process(o.innerType,m),c.ref=o.innerType,y.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,m),c.ref=o.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,m),c.ref=o.innerType;let g;try{g=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let g=y,f=e._zod.pattern;if(!f)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=f.source;break}case"pipe":{let g=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(g,m),c.ref=g;break}case"readonly":{this.process(o.innerType,m),c.ref=o.innerType,y.readOnly=!0;break}case"promise":{this.process(o.innerType,m),c.ref=o.innerType;break}case"optional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"lazy":{let g=e._zod.innerType;this.process(g,m),c.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(e);return d&&Object.assign(c.schema,d),this.io==="input"&&jr(e)&&(delete c.schema.examples,delete c.schema.default),this.io==="input"&&c.schema._prefault&&((n=c.schema).default??(n.default=c.schema._prefault)),delete c.schema._prefault,this.seen.get(e).schema}emit(e,r){let n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},o=this.seen.get(e);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s(p=>{let m=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let f=n.external.registry.get(p[0])?.id,_=n.external.uri??(b=>b);if(f)return{ref:_(f)};let w=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=w,{defId:w,ref:`${_("__shared")}#/${m}/${w}`}}if(p[1]===o)return{ref:"#"};let y=`#/${m}/`,g=p[1].schema.id??`__schema${this.counter++}`;return{defId:g,ref:y+g}},"makeURI"),a=s(p=>{if(p[1].schema.$ref)return;let m=p[1],{ref:h,defId:y}=i(p);m.def={...m.schema},y&&(m.defId=y);let g=m.schema;for(let f in g)delete g[f];g.$ref=h},"extractToDef");if(n.cycles==="throw")for(let p of this.seen.entries()){let m=p[1];if(m.cycle)throw new Error(`Cycle detected: #/${m.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let m=p[1];if(e===p[0]){a(p);continue}if(n.external){let y=n.external.registry.get(p[0])?.id;if(e!==p[0]&&y){a(p);continue}}if(this.metadataRegistry.get(p[0])?.id){a(p);continue}if(m.cycle){a(p);continue}if(m.count>1&&n.reused==="ref"){a(p);continue}}let c=s((p,m)=>{let h=this.seen.get(p),y=h.def??h.schema,g={...y};if(h.ref===null)return;let f=h.ref;if(h.ref=null,f){c(f,m);let _=this.seen.get(f).schema;_.$ref&&(m.target==="draft-7"||m.target==="draft-4"||m.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(_)):(Object.assign(y,_),Object.assign(y,g))}h.isParent||this.override({zodSchema:p,jsonSchema:y,path:h.path??[]})},"flattenRef");for(let p of[...this.seen.entries()].reverse())c(p[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let p=n.external.registry.get(e)?.id;if(!p)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(p)}Object.assign(l,o.def);let d=n.external?.defs??{};for(let p of this.seen.entries()){let m=p[1];m.def&&m.defId&&(d[m.defId]=m.def)}n.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?l.$defs=d:l.definitions=d);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}};function Lo(t,e){if(t instanceof Sa){let n=new Qu(e),o={};for(let c of t._idmap.entries()){let[l,d]=c;n.process(d)}let i={},a={registry:t,uri:e?.uri,defs:o};for(let c of t._idmap.entries()){let[l,d]=c;i[l]=n.emit(d,{...e,external:a})}if(Object.keys(o).length>0){let c=n.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[c]:o}}return{schemas:i}}let r=new Qu(e);return r.process(t),r.emit(t,e)}s(Lo,"toJSONSchema");function jr(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let n=t._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return jr(n.element,r);if(n.type==="set")return jr(n.valueType,r);if(n.type==="lazy")return jr(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return jr(n.innerType,r);if(n.type==="intersection")return jr(n.left,r)||jr(n.right,r);if(n.type==="record"||n.type==="map")return jr(n.keyType,r)||jr(n.valueType,r);if(n.type==="pipe")return jr(n.in,r)||jr(n.out,r);if(n.type==="object"){for(let o in n.shape)if(jr(n.shape[o],r))return!0;return!1}if(n.type==="union"){for(let o of n.options)if(jr(o,r))return!0;return!1}if(n.type==="tuple"){for(let o of n.items)if(jr(o,r))return!0;return!!(n.rest&&jr(n.rest,r))}return!1}s(jr,"isTransforming");var gR={};var of={};vn(of,{ZodISODate:()=>tf,ZodISODateTime:()=>ef,ZodISODuration:()=>nf,ZodISOTime:()=>rf,date:()=>e0,datetime:()=>Yx,duration:()=>r0,time:()=>t0});var ef=B("ZodISODateTime",(t,e)=>{bw.init(t,e),Ot.init(t,e)});function Yx(t){return mx(ef,t)}s(Yx,"datetime");var tf=B("ZodISODate",(t,e)=>{ww.init(t,e),Ot.init(t,e)});function e0(t){return fx(tf,t)}s(e0,"date");var rf=B("ZodISOTime",(t,e)=>{Sw.init(t,e),Ot.init(t,e)});function t0(t){return hx(rf,t)}s(t0,"time");var nf=B("ZodISODuration",(t,e)=>{xw.init(t,e),Ot.init(t,e)});function r0(t){return gx(nf,t)}s(r0,"duration");var vR=s((t,e)=>{Su.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s(r=>Tu(t,r),"value")},flatten:{value:s(r=>xu(t,r),"value")},addIssue:{value:s(r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,fa,2)},"value")},addIssues:{value:s(r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,fa,2)},"value")},isEmpty:{get(){return t.issues.length===0}}})},"initializer"),oJ=B("ZodError",vR),nn=B("ZodError",vR,{Parent:Error});var n0=ya(nn),o0=va(nn),i0=_a(nn),Fo=ba(nn),s0=mm(nn),a0=fm(nn),c0=hm(nn),u0=gm(nn),l0=ym(nn),d0=vm(nn),p0=_m(nn),m0=bm(nn);var et=B("ZodType",(t,e)=>(Be.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(ue.mergeDefs(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>Nr(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>n0(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>i0(t,r,n),t.parseAsync=async(r,n)=>o0(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Fo(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>s0(t,r,n),t.decode=(r,n)=>a0(t,r,n),t.encodeAsync=async(r,n)=>c0(t,r,n),t.decodeAsync=async(r,n)=>u0(t,r,n),t.safeEncode=(r,n)=>l0(t,r,n),t.safeDecode=(r,n)=>d0(t,r,n),t.safeEncodeAsync=async(r,n)=>p0(t,r,n),t.safeDecodeAsync=async(r,n)=>m0(t,r,n),t.refine=(r,n)=>t.check(iN(r,n)),t.superRefine=r=>t.check(sN(r)),t.overwrite=r=>t.check(co(r)),t.optional=()=>af(t),t.nullable=()=>cf(t),t.nullish=()=>af(cf(t)),t.nonoptional=r=>JR(t,r),t.array=()=>pf(t),t.or=r=>j0([t,r]),t.and=r=>RR(t,r),t.transform=r=>uf(t,U0(r)),t.default=r=>VR(t,r),t.prefault=r=>ZR(t,r),t.catch=r=>WR(t,r),t.pipe=r=>uf(t,r),t.readonly=()=>YR(t),t.describe=r=>{let n=t.clone();return Dr.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return Dr.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Dr.get(t);let n=t.clone();return Dr.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),g0=B("_ZodString",(t,e)=>{ls.init(t,e),et.init(t,e);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Uu(...n)),t.includes=(...n)=>t.check(Fu(...n)),t.startsWith=(...n)=>t.check(Bu(...n)),t.endsWith=(...n)=>t.check(Vu(...n)),t.min=(...n)=>t.check(Ci(...n)),t.max=(...n)=>t.check(Ta(...n)),t.length=(...n)=>t.check(Ea(...n)),t.nonempty=(...n)=>t.check(Ci(1,...n)),t.lowercase=n=>t.check(Lu(n)),t.uppercase=n=>t.check(qu(n)),t.trim=()=>t.check(Ju()),t.normalize=(...n)=>t.check(Zu(...n)),t.toLowerCase=()=>t.check(Gu()),t.toUpperCase=()=>t.check(Ku()),t.slugify=()=>t.check(Wu())}),Yu=B("ZodString",(t,e)=>{ls.init(t,e),g0.init(t,e),t.email=r=>t.check(Nm(y0,r)),t.url=r=>t.check(Mu(lf,r)),t.jwt=r=>t.check(Ym($0,r)),t.emoji=r=>t.check(Um(v0,r)),t.guid=r=>t.check(ju(sf,r)),t.uuid=r=>t.check(Dm(Bo,r)),t.uuidv4=r=>t.check(jm(Bo,r)),t.uuidv6=r=>t.check(Mm(Bo,r)),t.uuidv7=r=>t.check(zm(Bo,r)),t.nanoid=r=>t.check(Lm(_0,r)),t.guid=r=>t.check(ju(sf,r)),t.cuid=r=>t.check(qm(b0,r)),t.cuid2=r=>t.check(Fm(w0,r)),t.ulid=r=>t.check(Bm(S0,r)),t.base64=r=>t.check(Wm(A0,r)),t.base64url=r=>t.check(Qm(C0,r)),t.xid=r=>t.check(Vm(x0,r)),t.ksuid=r=>t.check(Hm(T0,r)),t.ipv4=r=>t.check(Zm(E0,r)),t.ipv6=r=>t.check(Jm(k0,r)),t.cidrv4=r=>t.check(Gm(I0,r)),t.cidrv6=r=>t.check(Km(P0,r)),t.e164=r=>t.check(Xm(O0,r)),t.datetime=r=>t.check(Yx(r)),t.date=r=>t.check(e0(r)),t.time=r=>t.check(t0(r)),t.duration=r=>t.check(r0(r))});function f0(t){return ux(Yu,t)}s(f0,"string");var Ot=B("ZodStringFormat",(t,e)=>{It.init(t,e),g0.init(t,e)}),y0=B("ZodEmail",(t,e)=>{dw.init(t,e),Ot.init(t,e)});function sJ(t){return Nm(y0,t)}s(sJ,"email");var sf=B("ZodGUID",(t,e)=>{uw.init(t,e),Ot.init(t,e)});function aJ(t){return ju(sf,t)}s(aJ,"guid");var Bo=B("ZodUUID",(t,e)=>{lw.init(t,e),Ot.init(t,e)});function cJ(t){return Dm(Bo,t)}s(cJ,"uuid");function uJ(t){return jm(Bo,t)}s(uJ,"uuidv4");function lJ(t){return Mm(Bo,t)}s(lJ,"uuidv6");function dJ(t){return zm(Bo,t)}s(dJ,"uuidv7");var lf=B("ZodURL",(t,e)=>{pw.init(t,e),Ot.init(t,e)});function pJ(t){return Mu(lf,t)}s(pJ,"url");function mJ(t){return Mu(lf,{protocol:/^https?$/,hostname:xn.domain,...ue.normalizeParams(t)})}s(mJ,"httpUrl");var v0=B("ZodEmoji",(t,e)=>{mw.init(t,e),Ot.init(t,e)});function fJ(t){return Um(v0,t)}s(fJ,"emoji");var _0=B("ZodNanoID",(t,e)=>{fw.init(t,e),Ot.init(t,e)});function hJ(t){return Lm(_0,t)}s(hJ,"nanoid");var b0=B("ZodCUID",(t,e)=>{hw.init(t,e),Ot.init(t,e)});function gJ(t){return qm(b0,t)}s(gJ,"cuid");var w0=B("ZodCUID2",(t,e)=>{gw.init(t,e),Ot.init(t,e)});function yJ(t){return Fm(w0,t)}s(yJ,"cuid2");var S0=B("ZodULID",(t,e)=>{yw.init(t,e),Ot.init(t,e)});function vJ(t){return Bm(S0,t)}s(vJ,"ulid");var x0=B("ZodXID",(t,e)=>{vw.init(t,e),Ot.init(t,e)});function _J(t){return Vm(x0,t)}s(_J,"xid");var T0=B("ZodKSUID",(t,e)=>{_w.init(t,e),Ot.init(t,e)});function bJ(t){return Hm(T0,t)}s(bJ,"ksuid");var E0=B("ZodIPv4",(t,e)=>{Tw.init(t,e),Ot.init(t,e)});function wJ(t){return Zm(E0,t)}s(wJ,"ipv4");var _R=B("ZodMAC",(t,e)=>{kw.init(t,e),Ot.init(t,e)});function SJ(t){return dx(_R,t)}s(SJ,"mac");var k0=B("ZodIPv6",(t,e)=>{Ew.init(t,e),Ot.init(t,e)});function xJ(t){return Jm(k0,t)}s(xJ,"ipv6");var I0=B("ZodCIDRv4",(t,e)=>{Iw.init(t,e),Ot.init(t,e)});function TJ(t){return Gm(I0,t)}s(TJ,"cidrv4");var P0=B("ZodCIDRv6",(t,e)=>{Pw.init(t,e),Ot.init(t,e)});function EJ(t){return Km(P0,t)}s(EJ,"cidrv6");var A0=B("ZodBase64",(t,e)=>{Cw.init(t,e),Ot.init(t,e)});function kJ(t){return Wm(A0,t)}s(kJ,"base64");var C0=B("ZodBase64URL",(t,e)=>{Ow.init(t,e),Ot.init(t,e)});function IJ(t){return Qm(C0,t)}s(IJ,"base64url");var O0=B("ZodE164",(t,e)=>{$w.init(t,e),Ot.init(t,e)});function PJ(t){return Xm(O0,t)}s(PJ,"e164");var $0=B("ZodJWT",(t,e)=>{Rw.init(t,e),Ot.init(t,e)});function AJ(t){return Ym($0,t)}s(AJ,"jwt");var el=B("ZodCustomStringFormat",(t,e)=>{Nw.init(t,e),Ot.init(t,e)});function CJ(t,e,r={}){return ka(el,t,e,r)}s(CJ,"stringFormat");function OJ(t){return ka(el,"hostname",xn.hostname,t)}s(OJ,"hostname");function $J(t){return ka(el,"hex",xn.hex,t)}s($J,"hex");function RJ(t,e){let r=e?.enc??"hex",n=`${t}_${r}`,o=xn[n];if(!o)throw new Error(`Unrecognized hash format: ${n}`);return ka(el,n,o,e)}s(RJ,"hash");var tl=B("ZodNumber",(t,e)=>{Am.init(t,e),et.init(t,e),t.gt=(n,o)=>t.check(Uo(n,o)),t.gte=(n,o)=>t.check(rn(n,o)),t.min=(n,o)=>t.check(rn(n,o)),t.lt=(n,o)=>t.check(zo(n,o)),t.lte=(n,o)=>t.check(Tn(n,o)),t.max=(n,o)=>t.check(Tn(n,o)),t.int=n=>t.check(h0(n)),t.safe=n=>t.check(h0(n)),t.positive=n=>t.check(Uo(0,n)),t.nonnegative=n=>t.check(rn(0,n)),t.negative=n=>t.check(zo(0,n)),t.nonpositive=n=>t.check(Tn(0,n)),t.multipleOf=(n,o)=>t.check(ds(n,o)),t.step=(n,o)=>t.check(ds(n,o)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function bR(t){return yx(tl,t)}s(bR,"number");var Pa=B("ZodNumberFormat",(t,e)=>{Dw.init(t,e),tl.init(t,e)});function h0(t){return _x(Pa,t)}s(h0,"int");function NJ(t){return bx(Pa,t)}s(NJ,"float32");function DJ(t){return wx(Pa,t)}s(DJ,"float64");function jJ(t){return Sx(Pa,t)}s(jJ,"int32");function MJ(t){return xx(Pa,t)}s(MJ,"uint32");var rl=B("ZodBoolean",(t,e)=>{Pu.init(t,e),et.init(t,e)});function wR(t){return Tx(rl,t)}s(wR,"boolean");var nl=B("ZodBigInt",(t,e)=>{Cm.init(t,e),et.init(t,e),t.gte=(n,o)=>t.check(rn(n,o)),t.min=(n,o)=>t.check(rn(n,o)),t.gt=(n,o)=>t.check(Uo(n,o)),t.gte=(n,o)=>t.check(rn(n,o)),t.min=(n,o)=>t.check(rn(n,o)),t.lt=(n,o)=>t.check(zo(n,o)),t.lte=(n,o)=>t.check(Tn(n,o)),t.max=(n,o)=>t.check(Tn(n,o)),t.positive=n=>t.check(Uo(BigInt(0),n)),t.negative=n=>t.check(zo(BigInt(0),n)),t.nonpositive=n=>t.check(Tn(BigInt(0),n)),t.nonnegative=n=>t.check(rn(BigInt(0),n)),t.multipleOf=(n,o)=>t.check(ds(n,o));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});function zJ(t){return kx(nl,t)}s(zJ,"bigint");var R0=B("ZodBigIntFormat",(t,e)=>{jw.init(t,e),nl.init(t,e)});function UJ(t){return Px(R0,t)}s(UJ,"int64");function LJ(t){return Ax(R0,t)}s(LJ,"uint64");var SR=B("ZodSymbol",(t,e)=>{Mw.init(t,e),et.init(t,e)});function qJ(t){return Cx(SR,t)}s(qJ,"symbol");var xR=B("ZodUndefined",(t,e)=>{zw.init(t,e),et.init(t,e)});function FJ(t){return Ox(xR,t)}s(FJ,"_undefined");var TR=B("ZodNull",(t,e)=>{Uw.init(t,e),et.init(t,e)});function ER(t){return $x(TR,t)}s(ER,"_null");var kR=B("ZodAny",(t,e)=>{Lw.init(t,e),et.init(t,e)});function BJ(){return Rx(kR)}s(BJ,"any");var IR=B("ZodUnknown",(t,e)=>{qw.init(t,e),et.init(t,e)});function Ia(){return Nx(IR)}s(Ia,"unknown");var PR=B("ZodNever",(t,e)=>{Fw.init(t,e),et.init(t,e)});function N0(t){return Dx(PR,t)}s(N0,"never");var AR=B("ZodVoid",(t,e)=>{Bw.init(t,e),et.init(t,e)});function VJ(t){return jx(AR,t)}s(VJ,"_void");var df=B("ZodDate",(t,e)=>{Vw.init(t,e),et.init(t,e),t.min=(n,o)=>t.check(rn(n,o)),t.max=(n,o)=>t.check(Tn(n,o));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function HJ(t){return Mx(df,t)}s(HJ,"date");var CR=B("ZodArray",(t,e)=>{Hw.init(t,e),et.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(Ci(r,n)),t.nonempty=r=>t.check(Ci(1,r)),t.max=(r,n)=>t.check(Ta(r,n)),t.length=(r,n)=>t.check(Ea(r,n)),t.unwrap=()=>t.element});function pf(t,e){return Hx(CR,t,e)}s(pf,"array");function ZJ(t){let e=t._zod.def.shape;return z0(Object.keys(e))}s(ZJ,"keyof");var mf=B("ZodObject",(t,e)=>{Zw.init(t,e),et.init(t,e),ue.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>z0(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Ia()}),t.loose=()=>t.clone({...t._zod.def,catchall:Ia()}),t.strict=()=>t.clone({...t._zod.def,catchall:N0()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>ue.extend(t,r),t.safeExtend=r=>ue.safeExtend(t,r),t.merge=r=>ue.merge(t,r),t.pick=r=>ue.pick(t,r),t.omit=r=>ue.omit(t,r),t.partial=(...r)=>ue.partial(L0,t,r[0]),t.required=(...r)=>ue.required(q0,t,r[0])});function JJ(t,e){let r={type:"object",shape:t??{},...ue.normalizeParams(e)};return new mf(r)}s(JJ,"object");function GJ(t,e){return new mf({type:"object",shape:t,catchall:N0(),...ue.normalizeParams(e)})}s(GJ,"strictObject");function KJ(t,e){return new mf({type:"object",shape:t,catchall:Ia(),...ue.normalizeParams(e)})}s(KJ,"looseObject");var D0=B("ZodUnion",(t,e)=>{Om.init(t,e),et.init(t,e),t.options=e.options});function j0(t,e){return new D0({type:"union",options:t,...ue.normalizeParams(e)})}s(j0,"union");var OR=B("ZodDiscriminatedUnion",(t,e)=>{D0.init(t,e),Jw.init(t,e)});function WJ(t,e,r){return new OR({type:"union",options:e,discriminator:t,...ue.normalizeParams(r)})}s(WJ,"discriminatedUnion");var $R=B("ZodIntersection",(t,e)=>{Gw.init(t,e),et.init(t,e)});function RR(t,e){return new $R({type:"intersection",left:t,right:e})}s(RR,"intersection");var NR=B("ZodTuple",(t,e)=>{$m.init(t,e),et.init(t,e),t.rest=r=>t.clone({...t._zod.def,rest:r})});function DR(t,e,r){let n=e instanceof Be,o=n?r:e,i=n?e:null;return new NR({type:"tuple",items:t,rest:i,...ue.normalizeParams(o)})}s(DR,"tuple");var M0=B("ZodRecord",(t,e)=>{Kw.init(t,e),et.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function jR(t,e,r){return new M0({type:"record",keyType:t,valueType:e,...ue.normalizeParams(r)})}s(jR,"record");function QJ(t,e,r){let n=Nr(t);return n._zod.values=void 0,new M0({type:"record",keyType:n,valueType:e,...ue.normalizeParams(r)})}s(QJ,"partialRecord");var MR=B("ZodMap",(t,e)=>{Ww.init(t,e),et.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function XJ(t,e,r){return new MR({type:"map",keyType:t,valueType:e,...ue.normalizeParams(r)})}s(XJ,"map");var zR=B("ZodSet",(t,e)=>{Qw.init(t,e),et.init(t,e),t.min=(...r)=>t.check(ps(...r)),t.nonempty=r=>t.check(ps(1,r)),t.max=(...r)=>t.check(xa(...r)),t.size=(...r)=>t.check(zu(...r))});function YJ(t,e){return new zR({type:"set",valueType:t,...ue.normalizeParams(e)})}s(YJ,"set");var Xu=B("ZodEnum",(t,e)=>{Xw.init(t,e),et.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,o)=>{let i={};for(let a of n)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Xu({...e,checks:[],...ue.normalizeParams(o),entries:i})},t.exclude=(n,o)=>{let i={...e.entries};for(let a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new Xu({...e,checks:[],...ue.normalizeParams(o),entries:i})}});function z0(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new Xu({type:"enum",entries:r,...ue.normalizeParams(e)})}s(z0,"_enum");function eG(t,e){return new Xu({type:"enum",entries:t,...ue.normalizeParams(e)})}s(eG,"nativeEnum");var UR=B("ZodLiteral",(t,e)=>{Yw.init(t,e),et.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function tG(t,e){return new UR({type:"literal",values:Array.isArray(t)?t:[t],...ue.normalizeParams(e)})}s(tG,"literal");var LR=B("ZodFile",(t,e)=>{eS.init(t,e),et.init(t,e),t.min=(r,n)=>t.check(ps(r,n)),t.max=(r,n)=>t.check(xa(r,n)),t.mime=(r,n)=>t.check(Hu(Array.isArray(r)?r:[r],n))});function rG(t){return Zx(LR,t)}s(rG,"file");var qR=B("ZodTransform",(t,e)=>{tS.init(t,e),et.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Ti(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(ue.issue(i,r.value,e));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(ue.issue(a))}};let o=e.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});function U0(t){return new qR({type:"transform",transform:t})}s(U0,"transform");var L0=B("ZodOptional",(t,e)=>{rS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function af(t){return new L0({type:"optional",innerType:t})}s(af,"optional");var FR=B("ZodNullable",(t,e)=>{nS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function cf(t){return new FR({type:"nullable",innerType:t})}s(cf,"nullable");function nG(t){return af(cf(t))}s(nG,"nullish");var BR=B("ZodDefault",(t,e)=>{oS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function VR(t,e){return new BR({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():ue.shallowClone(e)}})}s(VR,"_default");var HR=B("ZodPrefault",(t,e)=>{iS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function ZR(t,e){return new HR({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():ue.shallowClone(e)}})}s(ZR,"prefault");var q0=B("ZodNonOptional",(t,e)=>{sS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function JR(t,e){return new q0({type:"nonoptional",innerType:t,...ue.normalizeParams(e)})}s(JR,"nonoptional");var GR=B("ZodSuccess",(t,e)=>{aS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function oG(t){return new GR({type:"success",innerType:t})}s(oG,"success");var KR=B("ZodCatch",(t,e)=>{cS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function WR(t,e){return new KR({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}s(WR,"_catch");var QR=B("ZodNaN",(t,e)=>{uS.init(t,e),et.init(t,e)});function iG(t){return Ux(QR,t)}s(iG,"nan");var F0=B("ZodPipe",(t,e)=>{lS.init(t,e),et.init(t,e),t.in=e.in,t.out=e.out});function uf(t,e){return new F0({type:"pipe",in:t,out:e})}s(uf,"pipe");var B0=B("ZodCodec",(t,e)=>{F0.init(t,e),Au.init(t,e)});function sG(t,e,r){return new B0({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}s(sG,"codec");var XR=B("ZodReadonly",(t,e)=>{dS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function YR(t){return new XR({type:"readonly",innerType:t})}s(YR,"readonly");var eN=B("ZodTemplateLiteral",(t,e)=>{pS.init(t,e),et.init(t,e)});function aG(t,e){return new eN({type:"template_literal",parts:t,...ue.normalizeParams(e)})}s(aG,"templateLiteral");var tN=B("ZodLazy",(t,e)=>{hS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.getter()});function rN(t){return new tN({type:"lazy",getter:t})}s(rN,"lazy");var nN=B("ZodPromise",(t,e)=>{fS.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function cG(t){return new nN({type:"promise",innerType:t})}s(cG,"promise");var oN=B("ZodFunction",(t,e)=>{mS.init(t,e),et.init(t,e)});function uG(t){return new oN({type:"function",input:Array.isArray(t?.input)?DR(t?.input):t?.input??pf(Ia()),output:t?.output??Ia()})}s(uG,"_function");var ff=B("ZodCustom",(t,e)=>{gS.init(t,e),et.init(t,e)});function lG(t){let e=new Ct({check:"custom"});return e._zod.check=t,e}s(lG,"check");function dG(t,e){return Jx(ff,t??(()=>!0),e)}s(dG,"custom");function iN(t,e={}){return Gx(ff,t,e)}s(iN,"refine");function sN(t){return Kx(t)}s(sN,"superRefine");var pG=Wx,mG=Qx;function fG(t,e={error:`Input not instance of ${t.name}`}){let r=new ff({type:"custom",check:"custom",fn:s(n=>n instanceof t,"fn"),abort:!0,...ue.normalizeParams(e)});return r._zod.bag.Class=t,r}s(fG,"_instanceof");var hG=s((...t)=>Xx({Codec:B0,Boolean:rl,String:Yu},...t),"stringbool");function gG(t){let e=rN(()=>j0([f0(t),bR(),wR(),ER(),pf(e),jR(f0(),e)]));return e}s(gG,"json");function yG(t,e){return uf(U0(t),e)}s(yG,"preprocess");var vG={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function _G(t){ir({customError:t})}s(_G,"setErrorMap");function bG(){return ir().customError}s(bG,"getErrorMap");var Ue;Ue||(Ue={});var V0={};vn(V0,{bigint:()=>TG,boolean:()=>xG,date:()=>EG,number:()=>SG,string:()=>wG});function wG(t){return lx(Yu,t)}s(wG,"string");function SG(t){return vx(tl,t)}s(SG,"number");function xG(t){return Ex(rl,t)}s(xG,"boolean");function TG(t){return Ix(nl,t)}s(TG,"bigint");function EG(t){return zx(df,t)}s(EG,"date");ir(Cu());var kG=u.object({arguments:u.record(u.string(),u.unknown()).optional().default({})}),H0=new Pe;H0.post("/:toolName",de,Fe("json",kG),async t=>{let e=t.req.param("toolName"),{arguments:r}=t.req.valid("json");return t.json({error:"Not implemented",message:`Tool ${e} will be implemented in subsequent tasks`,toolName:e,receivedArgs:r},501)});var Z0=new Pe;Z0.route("/context",W_);Z0.route("/tools",H0);var J0=Z0;var cN="vercel.ai.error",IG=Symbol.for(cN),uN,PG=class lN extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[uN]=!0,this.name=e,this.cause=n}static isInstance(e){return lN.hasMarker(e,cN)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};uN=IG;var aN=PG,AG="AI_APICallError",CG=`vercel.ai.error.${AG}`,OG=Symbol.for(CG),$G;$G=OG;var RG="AI_EmptyResponseBodyError",NG=`vercel.ai.error.${RG}`,DG=Symbol.for(NG),jG;jG=DG;var dN="AI_InvalidArgumentError",pN=`vercel.ai.error.${dN}`,MG=Symbol.for(pN),mN,fN=class extends aN{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:dN,message:t,cause:e}),this[mN]=!0,this.argument=r}static isInstance(t){return aN.hasMarker(t,pN)}};mN=MG;var zG="AI_InvalidPromptError",UG=`vercel.ai.error.${zG}`,LG=Symbol.for(UG),qG;qG=LG;var FG="AI_InvalidResponseDataError",BG=`vercel.ai.error.${FG}`,VG=Symbol.for(BG),HG;HG=VG;var ZG="AI_JSONParseError",JG=`vercel.ai.error.${ZG}`,GG=Symbol.for(JG),KG;KG=GG;var WG="AI_LoadAPIKeyError",QG=`vercel.ai.error.${WG}`,XG=Symbol.for(QG),YG;YG=XG;var eK="AI_LoadSettingError",tK=`vercel.ai.error.${eK}`,rK=Symbol.for(tK),nK;nK=rK;var oK="AI_NoContentGeneratedError",iK=`vercel.ai.error.${oK}`,sK=Symbol.for(iK),aK;aK=sK;var cK="AI_NoSuchModelError",uK=`vercel.ai.error.${cK}`,lK=Symbol.for(uK),dK;dK=lK;var pK="AI_TooManyEmbeddingValuesForCallError",mK=`vercel.ai.error.${pK}`,fK=Symbol.for(mK),hK;hK=fK;var gK="AI_TypeValidationError",yK=`vercel.ai.error.${gK}`,vK=Symbol.for(yK),_K;_K=vK;var bK="AI_UnsupportedFunctionalityError",wK=`vercel.ai.error.${bK}`,SK=Symbol.for(wK),xK;xK=SK;var hN=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var IK=Tc(hf(),1);var kK=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=hN(r,e);if(t==null)return o;if(r.includes(n))throw new fN({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),K0=kK();var bN=Symbol.for("vercel.ai.validator");var{btoa:Y1e,atob:eOe}=globalThis;var jK=Tc(hf(),1);var SN=Symbol("Let zodToJsonSchema decide on which parser to use");var wN={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},xN=s(t=>typeof t=="string"?{...wN,name:t}:{...wN,...t},"getDefaultOptions");var TN=s(t=>{let e=xN(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs");function W0(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}s(W0,"addErrorMessage");function ft(t,e,r,n,o){t[e]=r,W0(t,e,n,o)}s(ft,"setResponseValueAndErrors");var gf=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath");function qt(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?gf(e,t.currentPath):e.join("/")}}s(qt,"parseAnyDef");function EN(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==Ue.ZodAny&&(r.items=Ne(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&ft(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ft(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ft(r,"minItems",t.exactLength.value,t.exactLength.message,e),ft(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}s(EN,"parseArrayDef");function kN(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?ft(r,"minimum",n.value,n.message,e):ft(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),ft(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ft(r,"maximum",n.value,n.message,e):ft(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),ft(r,"maximum",n.value,n.message,e));break;case"multipleOf":ft(r,"multipleOf",n.value,n.message,e);break}return r}s(kN,"parseBigintDef");function IN(){return{type:"boolean"}}s(IN,"parseBooleanDef");function yf(t,e){return Ne(t.type._def,e)}s(yf,"parseBrandedDef");var PN=s((t,e)=>Ne(t.innerType._def,e),"parseCatchDef");function Q0(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>Q0(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return PK(t,e)}}s(Q0,"parseDateDef");var PK=s((t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":ft(r,"minimum",n.value,n.message,e);break;case"max":ft(r,"maximum",n.value,n.message,e);break}return r},"integerDateParser");function AN(t,e){return{...Ne(t.innerType._def,e),default:t.defaultValue()}}s(AN,"parseDefaultDef");function CN(t,e){return e.effectStrategy==="input"?Ne(t.schema._def,e):qt(e)}s(CN,"parseEffectsDef");function ON(t){return{type:"string",enum:Array.from(t.values)}}s(ON,"parseEnumDef");var AK=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function $N(t,e){let r=[Ne(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ne(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(AK(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:c,...l}=i;a=l}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}s($N,"parseIntersectionDef");function RN(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}s(RN,"parseLiteralDef");var X0,zn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(X0===void 0&&(X0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),X0),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function vf(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":ft(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":ft(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Un(r,"email",n.message,e);break;case"format:idn-email":Un(r,"idn-email",n.message,e);break;case"pattern:zod":Mr(r,zn.email,n.message,e);break}break;case"url":Un(r,"uri",n.message,e);break;case"uuid":Un(r,"uuid",n.message,e);break;case"regex":Mr(r,n.regex,n.message,e);break;case"cuid":Mr(r,zn.cuid,n.message,e);break;case"cuid2":Mr(r,zn.cuid2,n.message,e);break;case"startsWith":Mr(r,RegExp(`^${Y0(n.value,e)}`),n.message,e);break;case"endsWith":Mr(r,RegExp(`${Y0(n.value,e)}$`),n.message,e);break;case"datetime":Un(r,"date-time",n.message,e);break;case"date":Un(r,"date",n.message,e);break;case"time":Un(r,"time",n.message,e);break;case"duration":Un(r,"duration",n.message,e);break;case"length":ft(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),ft(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Mr(r,RegExp(Y0(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Un(r,"ipv4",n.message,e),n.version!=="v4"&&Un(r,"ipv6",n.message,e);break}case"base64url":Mr(r,zn.base64url,n.message,e);break;case"jwt":Mr(r,zn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Mr(r,zn.ipv4Cidr,n.message,e),n.version!=="v4"&&Mr(r,zn.ipv6Cidr,n.message,e);break}case"emoji":Mr(r,zn.emoji(),n.message,e);break;case"ulid":{Mr(r,zn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Un(r,"binary",n.message,e);break}case"contentEncoding:base64":{ft(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Mr(r,zn.base64,n.message,e);break}}break}case"nanoid":Mr(r,zn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(vf,"parseStringDef");function Y0(t,e){return e.patternStrategy==="escape"?OK(t):t}s(Y0,"escapeLiteralCheckValue");var CK=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function OK(t){let e="";for(let r=0;r<t.length;r++)CK.has(t[r])||(e+="\\"),e+=t[r];return e}s(OK,"escapeNonAlphaNumeric");function Un(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):ft(t,"format",e,r,n)}s(Un,"addFormat");function Mr(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:NN(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):ft(t,"pattern",NN(e,n),r,n)}s(Mr,"addPattern");function NN(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,c=!1;for(let l=0;l<n.length;l++){if(i){o+=n[l],i=!1;continue}if(r.i){if(a){if(n[l].match(/[a-z]/)){c?(o+=n[l],o+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&n[l+2]?.match(/[a-z]/)?(o+=n[l],c=!0):o+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){o+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(r.m){if(n[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[l]==="."){o+=a?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}o+=n[l],n[l]==="\\"?i=!0:a&&n[l]==="]"?a=!1:!a&&n[l]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}s(NN,"stringifyRegExpWithFlags");function _f(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===Ue.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:Ne(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??qt(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Ne(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===Ue.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=vf(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===Ue.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===Ue.ZodBranded&&t.keyType._def.type._def.typeName===Ue.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=yf(t.keyType._def,e);return{...r,propertyNames:o}}}return r}s(_f,"parseRecordDef");function DN(t,e){if(e.mapStrategy==="record")return _f(t,e);let r=Ne(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||qt(e),n=Ne(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||qt(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(DN,"parseMapDef");function jN(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(jN,"parseNativeEnumDef");function MN(t){return t.target==="openAi"?void 0:{not:qt({...t,currentPath:[...t.currentPath,"not"]})}}s(MN,"parseNeverDef");function zN(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}s(zN,"parseNullDef");var ol={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function LN(t,e){if(e.target==="openApi3")return UN(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in ol&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=ol[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return UN(t,e)}s(LN,"parseUnionDef");var UN=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Ne(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function qN(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:ol[t.innerType._def.typeName],nullable:!0}:{type:[ol[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=Ne(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=Ne(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(qN,"parseNullableDef");function FN(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",W0(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?ft(r,"minimum",n.value,n.message,e):ft(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),ft(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ft(r,"maximum",n.value,n.message,e):ft(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),ft(r,"maximum",n.value,n.message,e));break;case"multipleOf":ft(r,"multipleOf",n.value,n.message,e);break}return r}s(FN,"parseNumberDef");function BN(t,e){let r=e.target==="openAi",n={type:"object",properties:{}},o=[],i=t.shape();for(let c in i){let l=i[c];if(l===void 0||l._def===void 0)continue;let d=RK(l);d&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let p=Ne(l._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});p!==void 0&&(n.properties[c]=p,d||o.push(c))}o.length&&(n.required=o);let a=$K(t,e);return a!==void 0&&(n.additionalProperties=a),n}s(BN,"parseObjectDef");function $K(t,e){if(t.catchall._def.typeName!=="ZodNever")return Ne(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s($K,"decideAdditionalProperties");function RK(t){try{return t.isOptional()}catch{return!0}}s(RK,"safeIsOptional");var VN=s((t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Ne(t.innerType._def,e);let r=Ne(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:qt(e)},r]}:qt(e)},"parseOptionalDef");var HN=s((t,e)=>{if(e.pipeStrategy==="input")return Ne(t.in._def,e);if(e.pipeStrategy==="output")return Ne(t.out._def,e);let r=Ne(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Ne(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function ZN(t,e){return Ne(t.type._def,e)}s(ZN,"parsePromiseDef");function JN(t,e){let n={type:"array",uniqueItems:!0,items:Ne(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&ft(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ft(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}s(JN,"parseSetDef");function GN(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Ne(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Ne(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Ne(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(GN,"parseTupleDef");function KN(t){return{not:qt(t)}}s(KN,"parseUndefinedDef");function WN(t){return qt(t)}s(WN,"parseUnknownDef");var QN=s((t,e)=>Ne(t.innerType._def,e),"parseReadonlyDef");var XN=s((t,e,r)=>{switch(e){case Ue.ZodString:return vf(t,r);case Ue.ZodNumber:return FN(t,r);case Ue.ZodObject:return BN(t,r);case Ue.ZodBigInt:return kN(t,r);case Ue.ZodBoolean:return IN();case Ue.ZodDate:return Q0(t,r);case Ue.ZodUndefined:return KN(r);case Ue.ZodNull:return zN(r);case Ue.ZodArray:return EN(t,r);case Ue.ZodUnion:case Ue.ZodDiscriminatedUnion:return LN(t,r);case Ue.ZodIntersection:return $N(t,r);case Ue.ZodTuple:return GN(t,r);case Ue.ZodRecord:return _f(t,r);case Ue.ZodLiteral:return RN(t,r);case Ue.ZodEnum:return ON(t);case Ue.ZodNativeEnum:return jN(t);case Ue.ZodNullable:return qN(t,r);case Ue.ZodOptional:return VN(t,r);case Ue.ZodMap:return DN(t,r);case Ue.ZodSet:return JN(t,r);case Ue.ZodLazy:return()=>t.getter()._def;case Ue.ZodPromise:return ZN(t,r);case Ue.ZodNaN:case Ue.ZodNever:return MN(r);case Ue.ZodEffects:return CN(t,r);case Ue.ZodAny:return qt(r);case Ue.ZodUnknown:return WN(r);case Ue.ZodDefault:return AN(t,r);case Ue.ZodBranded:return yf(t,r);case Ue.ZodReadonly:return QN(t,r);case Ue.ZodCatch:return PN(t,r);case Ue.ZodPipeline:return HN(t,r);case Ue.ZodFunction:case Ue.ZodVoid:case Ue.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function Ne(t,e,r=!1){let n=e.seen.get(t);if(e.override){let c=e.override?.(t,e,n,r);if(c!==SN)return c}if(n&&!r){let c=NK(n,e);if(c!==void 0)return c}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=XN(t,t.typeName,e),a=typeof i=="function"?Ne(i(),e):i;if(a&&DK(t,e,a),e.postProcess){let c=e.postProcess(a,t,e);return o.jsonSchema=a,c}return o.jsonSchema=a,a}s(Ne,"parseDef");var NK=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:gf(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),qt(e)):e.$refStrategy==="seen"?qt(e):void 0}},"get$ref"),DK=s((t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),"addMeta");var YN=s((t,e)=>{let r=TN(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,p])=>({...l,[d]:Ne(p._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??qt(r)}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Ne(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??qt(r),a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let c=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c},"zodToJsonSchema");var eD=YN;var il={code:"0",name:"text",parse:s(t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}},"parse")},sl={code:"1",name:"function_call",parse:s(t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}},"parse")},al={code:"2",name:"data",parse:s(t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}},"parse")},cl={code:"3",name:"error",parse:s(t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}},"parse")},ul={code:"4",name:"assistant_message",parse:s(t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}},"parse")},ll={code:"5",name:"assistant_control_data",parse:s(t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}},"parse")},dl={code:"6",name:"data_message",parse:s(t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}},"parse")},pl={code:"7",name:"tool_calls",parse:s(t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}},"parse")},ml={code:"8",name:"message_annotations",parse:s(t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}},"parse")},fl={code:"9",name:"tool_call",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}},"parse")},hl={code:"a",name:"tool_result",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}},"parse")},gl={code:"b",name:"tool_call_streaming_start",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}},"parse")},yl={code:"c",name:"tool_call_delta",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}},"parse")},vl={code:"d",name:"finish_message",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}},"parse")},_l={code:"e",name:"finish_step",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}},"parse")},tD=[il,sl,al,cl,ul,ll,dl,pl,ml,fl,hl,gl,yl,vl,_l],$Ne={[il.code]:il,[sl.code]:sl,[al.code]:al,[cl.code]:cl,[ul.code]:ul,[ll.code]:ll,[dl.code]:dl,[pl.code]:pl,[ml.code]:ml,[fl.code]:fl,[hl.code]:hl,[gl.code]:gl,[yl.code]:yl,[vl.code]:vl,[_l.code]:_l},RNe={[il.name]:il.code,[sl.name]:sl.code,[al.name]:al.code,[cl.name]:cl.code,[ul.name]:ul.code,[ll.name]:ll.code,[dl.name]:dl.code,[pl.name]:pl.code,[ml.name]:ml.code,[fl.name]:fl.code,[hl.name]:hl.code,[gl.name]:gl.code,[yl.name]:yl.code,[vl.name]:vl.code,[_l.name]:_l.code},NNe=tD.map(t=>t.code);function Ln(t,e){let r=tD.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}s(Ln,"formatStreamPart");var eT=Symbol.for("vercel.ai.schema");function MK(t,{validate:e}={}){return{[eT]:!0,_type:void 0,[bN]:!0,jsonSchema:t,validate:e}}s(MK,"jsonSchema");function zK(t){return typeof t=="object"&&t!==null&&eT in t&&t[eT]===!0&&"jsonSchema"in t&&"validate"in t}s(zK,"isSchema");function bf(t){return zK(t)?t:UK(t)}s(bf,"asSchema");function UK(t){return MK(eD(t),{validate:s(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}},"validate")})}s(UK,"zodSchema");var rD="vercel.ai.error",LK=Symbol.for(rD),nD,qK=class oD extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[nD]=!0,this.name=e,this.cause=n}static isInstance(e){return oD.hasMarker(e,rD)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};nD=LK;var ht=qK,tT="AI_APICallError",iD=`vercel.ai.error.${tT}`,FK=Symbol.for(iD),sD,aD=class extends ht{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:tT,message:t,cause:a}),this[sD]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return ht.hasMarker(t,iD)}static isAPICallError(t){return t instanceof Error&&t.name===tT&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};sD=FK;var BK="AI_EmptyResponseBodyError",VK=`vercel.ai.error.${BK}`,HK=Symbol.for(VK),ZK;ZK=HK;function wf(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(wf,"getErrorMessage");var cD="AI_InvalidArgumentError",uD=`vercel.ai.error.${cD}`,JK=Symbol.for(uD),lD,dD=class extends ht{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:cD,message:t,cause:e}),this[lD]=!0,this.argument=r}static isInstance(t){return ht.hasMarker(t,uD)}};lD=JK;var rT="AI_InvalidPromptError",pD=`vercel.ai.error.${rT}`,GK=Symbol.for(pD),mD,ms=class extends ht{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:rT,message:`Invalid prompt: ${e}`,cause:r}),this[mD]=!0,this.prompt=t}static isInstance(t){return ht.hasMarker(t,pD)}static isInvalidPromptError(t){return t instanceof Error&&t.name===rT&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};mD=GK;var KK="AI_InvalidResponseDataError",WK=`vercel.ai.error.${KK}`,QK=Symbol.for(WK),XK;XK=QK;var nT="AI_JSONParseError",fD=`vercel.ai.error.${nT}`,YK=Symbol.for(fD),hD,sT=class extends ht{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:nT,message:`JSON parsing failed: Text: ${t}.
Error message: ${wf(e)}`,cause:e}),this[hD]=!0,this.text=t}static isInstance(t){return ht.hasMarker(t,fD)}static isJSONParseError(t){return t instanceof Error&&t.name===nT&&"text"in t&&typeof t.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};hD=YK;var eW="AI_LoadAPIKeyError",tW=`vercel.ai.error.${eW}`,rW=Symbol.for(tW),nW;nW=rW;var oW="AI_LoadSettingError",iW=`vercel.ai.error.${oW}`,sW=Symbol.for(iW),aW;aW=sW;var cW="AI_NoContentGeneratedError",uW=`vercel.ai.error.${cW}`,lW=Symbol.for(uW),dW;dW=lW;var pW="AI_NoSuchModelError",mW=`vercel.ai.error.${pW}`,fW=Symbol.for(mW),hW;hW=fW;var gW="AI_TooManyEmbeddingValuesForCallError",yW=`vercel.ai.error.${gW}`,vW=Symbol.for(yW),_W;_W=vW;var oT="AI_TypeValidationError",gD=`vercel.ai.error.${oT}`,bW=Symbol.for(gD),yD,wW=class iT extends ht{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:oT,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${wf(r)}`,cause:r}),this[yD]=!0,this.value=e}static isInstance(e){return ht.hasMarker(e,gD)}static wrap({value:e,cause:r}){return iT.isInstance(r)&&r.value===e?r:new iT({value:e,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===oT}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};yD=bW;var Sf=wW,SW="AI_UnsupportedFunctionalityError",xW=`vercel.ai.error.${SW}`,TW=Symbol.for(xW),EW;EW=TW;var vD=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var wD=Tc(hf(),1);var Vo=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=vD(r,e);if(t==null)return o;if(r.includes(n))throw new dD({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),KNe=Vo();function _D(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(_D,"getErrorMessage");function bD(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}s(bD,"isAbortError");var aT=Symbol.for("vercel.ai.validator");function kW(t){return{[aT]:!0,validate:t}}s(kW,"validator");function IW(t){return typeof t=="object"&&t!==null&&aT in t&&t[aT]===!0&&"validate"in t}s(IW,"isValidator");function PW(t){return IW(t)?t:AW(t)}s(PW,"asValidator");function AW(t){return kW(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}s(AW,"zodValidator");function bl({value:t,schema:e}){let r=PW(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:Sf.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:Sf.wrap({value:t,cause:n})}}}s(bl,"safeValidateTypes");function cT({text:t,schema:e}){try{let r=wD.default.parse(t);return e==null?{success:!0,value:r}:bl({value:r,schema:e})}catch(r){return{success:!1,error:sT.isJSONParseError(r)?r:new sT({text:t,cause:r})}}}s(cT,"safeParseJSON");var{btoa:CW,atob:OW}=globalThis;function SD(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=OW(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(SD,"convertBase64ToUint8Array");function uT(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return CW(e)}s(uT,"convertUint8ArrayToBase64");var xD=typeof globalThis=="object"?globalThis:global;var Ho="1.9.0";var TD=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function $W(t){var e=new Set([t]),r=new Set,n=t.match(TD);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return s(function(l){return l===t},"isExactmatch");function i(c){return r.add(c),!1}s(i,"_reject");function a(c){return e.add(c),!0}return s(a,"_accept"),s(function(l){if(e.has(l))return!0;if(r.has(l))return!1;var d=l.match(TD);if(!d)return i(l);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||o.major!==p.major?i(l):o.major===0?o.minor===p.minor&&o.patch<=p.patch?a(l):i(l):o.minor<=p.minor?a(l):i(l)},"isCompatible")}s($W,"_makeCompatibilityCheck");var ED=$W(Ho);var RW=Ho.split(".")[0],wl=Symbol.for("opentelemetry.js.api."+RW),Sl=xD;function Ca(t,e,r,n){var o;n===void 0&&(n=!1);var i=Sl[wl]=(o=Sl[wl])!==null&&o!==void 0?o:{version:Ho};if(!n&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==Ho){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+Ho);return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Ho+"."),!0}s(Ca,"registerGlobal");function Zo(t){var e,r,n=(e=Sl[wl])===null||e===void 0?void 0:e.version;if(!(!n||!ED(n)))return(r=Sl[wl])===null||r===void 0?void 0:r[t]}s(Zo,"getGlobal");function Oa(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Ho+".");var r=Sl[wl];r&&delete r[t]}s(Oa,"unregisterGlobal");var NW=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},DW=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},kD=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return s(t,"DiagComponentLogger"),t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xl("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xl("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xl("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xl("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xl("verbose",this._namespace,e)},t})();function xl(t,e,r){var n=Zo("diag");if(n)return r.unshift(e),n[t].apply(n,DW([],NW(r),!1))}s(xl,"logProxy");var zr;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(zr||(zr={}));function ID(t,e){t<zr.NONE?t=zr.NONE:t>zr.ALL&&(t=zr.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return s(r,"_filterFunc"),{error:r("error",zr.ERROR),warn:r("warn",zr.WARN),info:r("info",zr.INFO),debug:r("debug",zr.DEBUG),verbose:r("verbose",zr.VERBOSE)}}s(ID,"createLogLevelDiagLogger");var jW=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},MW=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},zW="diag",$a=(function(){function t(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=Zo("diag");if(c)return c[o].apply(c,MW([],jW(i),!1))}}s(e,"_logProxy");var r=this,n=s(function(o,i){var a,c,l;if(i===void 0&&(i={logLevel:zr.INFO}),o===r){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof i=="number"&&(i={logLevel:i});var p=Zo("diag"),m=ID((c=i.logLevel)!==null&&c!==void 0?c:zr.INFO,o);if(p&&!i.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+h),m.warn("Current logger will overwrite one already registered from "+h)}return Ca("diag",m,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){Oa(zW,r)},r.createComponentLogger=function(o){return new kD(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return s(t,"DiagAPI"),t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();function PD(t){return Symbol.for(t)}s(PD,"createContextKey");var UW=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return s(t,"BaseContext"),t})(),AD=new UW;var LW=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},qW=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},CD=(function(){function t(){}return s(t,"NoopContextManager"),t.prototype.active=function(){return AD},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,qW([n],LW(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})();var FW=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},BW=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},lT="context",VW=new CD,xf=(function(){function t(){}return s(t,"ContextAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Ca(lT,e,$a.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,BW([e,r,n],FW(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Zo(lT)||VW},t.prototype.disable=function(){this._getContextManager().disable(),Oa(lT,$a.instance())},t})();var Tf;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Tf||(Tf={}));var dT="0000000000000000",pT="00000000000000000000000000000000",OD={traceId:pT,spanId:dT,traceFlags:Tf.NONE};var Oi=(function(){function t(e){e===void 0&&(e=OD),this._spanContext=e}return s(t,"NonRecordingSpan"),t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})();var mT=PD("OpenTelemetry Context Key SPAN");function Ef(t){return t.getValue(mT)||void 0}s(Ef,"getSpan");function $D(){return Ef(xf.getInstance().active())}s($D,"getActiveSpan");function Tl(t,e){return t.setValue(mT,e)}s(Tl,"setSpan");function RD(t){return t.deleteValue(mT)}s(RD,"deleteSpan");function ND(t,e){return Tl(t,new Oi(e))}s(ND,"setSpanContext");function kf(t){var e;return(e=Ef(t))===null||e===void 0?void 0:e.spanContext()}s(kf,"getSpanContext");var HW=/^([0-9a-f]{32})$/i,ZW=/^[0-9a-f]{16}$/i;function JW(t){return HW.test(t)&&t!==pT}s(JW,"isValidTraceId");function GW(t){return ZW.test(t)&&t!==dT}s(GW,"isValidSpanId");function If(t){return JW(t.traceId)&&GW(t.spanId)}s(If,"isSpanContextValid");function DD(t){return new Oi(t)}s(DD,"wrapSpanContext");var fT=xf.getInstance(),Pf=(function(){function t(){}return s(t,"NoopTracer"),t.prototype.startSpan=function(e,r,n){n===void 0&&(n=fT.active());var o=!!r?.root;if(o)return new Oi;var i=n&&kf(n);return KW(i)&&If(i)?new Oi(i):new Oi},t.prototype.startActiveSpan=function(e,r,n,o){var i,a,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(i=r,c=n):(i=r,a=n,c=o);var l=a??fT.active(),d=this.startSpan(e,i,l),p=Tl(l,d);return fT.with(p,c,void 0,d)}},t})();function KW(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}s(KW,"isSpanContext");var WW=new Pf,jD=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return s(t,"ProxyTracer"),t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):WW},t})();var MD=(function(){function t(){}return s(t,"NoopTracerProvider"),t.prototype.getTracer=function(e,r,n){return new Pf},t})();var QW=new MD,hT=(function(){function t(){}return s(t,"ProxyTracerProvider"),t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new jD(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:QW},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})();var Ra;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Ra||(Ra={}));var gT="trace",zD=(function(){function t(){this._proxyTracerProvider=new hT,this.wrapSpanContext=DD,this.isSpanContextValid=If,this.deleteSpan=RD,this.getSpan=Ef,this.getActiveSpan=$D,this.getSpanContext=kf,this.setSpan=Tl,this.setSpanContext=ND}return s(t,"TraceAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=Ca(gT,this._proxyTracerProvider,$a.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Zo(gT)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Oa(gT,$a.instance()),this._proxyTracerProvider=new hT},t})();var yT=zD.getInstance();var XW=Object.defineProperty,ZD=s((t,e)=>{for(var r in e)XW(t,r,{get:e[r],enumerable:!0})},"__export");async function YW(t){return t===void 0?Promise.resolve():new Promise(e=>setTimeout(e,t))}s(YW,"delay");var _T="AI_RetryError",JD=`vercel.ai.error.${_T}`,eQ=Symbol.for(JD),GD,UD=class extends ht{static{s(this,"RetryError")}constructor({message:t,reason:e,errors:r}){super({name:_T,message:t}),this[GD]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return ht.hasMarker(t,JD)}static isRetryError(t){return t instanceof Error&&t.name===_T&&typeof t.reason=="string"&&Array.isArray(t.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};GD=eQ;var tQ=s(({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>KD(n,{maxRetries:t,delayInMs:e,backoffFactor:r}),"retryWithExponentialBackoff");async function KD(t,{maxRetries:e,delayInMs:r,backoffFactor:n},o=[]){try{return await t()}catch(i){if(bD(i)||e===0)throw i;let a=_D(i),c=[...o,i],l=c.length;if(l>e)throw new UD({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:c});if(i instanceof Error&&aD.isAPICallError(i)&&i.isRetryable===!0&&l<=e)return await YW(r),KD(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},c);throw l===1?i:new UD({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:c})}}s(KD,"_retryWithExponentialBackoff");function bT({operationId:t,telemetry:e}){return{"operation.name":`${t}${e?.functionId!=null?` ${e.functionId}`:""}`,"resource.name":e?.functionId,"ai.operationId":t,"ai.telemetry.functionId":e?.functionId}}s(bT,"assembleOperationName");function rQ({model:t,settings:e,telemetry:r,headers:n}){var o;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((i,[a,c])=>(i[`ai.settings.${a}`]=c,i),{}),...Object.entries((o=r?.metadata)!=null?o:{}).reduce((i,[a,c])=>(i[`ai.telemetry.metadata.${a}`]=c,i),{}),...Object.entries(n??{}).reduce((i,[a,c])=>(c!==void 0&&(i[`ai.request.headers.${a}`]=c),i),{})}}s(rQ,"getBaseTelemetryAttributes");var nQ={startSpan(){return Af},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(Af);if(typeof r=="function")return r(Af);if(typeof n=="function")return n(Af)}},Af={spanContext(){return oQ},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},oQ={traceId:"",spanId:"",traceFlags:0};function iQ({isEnabled:t=!1,tracer:e}={}){return t?e||yT.getTracer("ai"):nQ}s(iQ,"getTracer");function wT({name:t,tracer:e,attributes:r,fn:n,endWhenDone:o=!0}){return e.startActiveSpan(t,{attributes:r},async i=>{try{let a=await n(i);return o&&i.end(),a}catch(a){try{a instanceof Error?(i.recordException({name:a.name,message:a.message,stack:a.stack}),i.setStatus({code:Ra.ERROR,message:a.message})):i.setStatus({code:Ra.ERROR})}finally{i.end()}throw a}})}s(wT,"recordSpan");function Na({telemetry:t,attributes:e}){return t?.isEnabled!==!0?{}:Object.entries(e).reduce((r,[n,o])=>{if(o===void 0)return r;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(t?.recordInputs===!1)return r;let i=o.input();return i===void 0?r:{...r,[n]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(t?.recordOutputs===!1)return r;let i=o.output();return i===void 0?r:{...r,[n]:i}}return{...r,[n]:o}},{})}s(Na,"selectTelemetryAttributes");var ST="AI_DownloadError",WD=`vercel.ai.error.${ST}`,sQ=Symbol.for(WD),QD,vT=class extends ht{static{s(this,"DownloadError")}constructor({url:t,statusCode:e,statusText:r,cause:n,message:o=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:ST,message:o,cause:n}),this[QD]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return ht.hasMarker(t,WD)}static isDownloadError(t){return t instanceof Error&&t.name===ST&&typeof t.url=="string"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.statusText==null||typeof t.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};QD=sQ;async function aQ({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let o=await e(n);if(!o.ok)throw new vT({url:n,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mimeType:(r=o.headers.get("content-type"))!=null?r:void 0}}catch(o){throw vT.isInstance(o)?o:new vT({url:n,cause:o})}}s(aQ,"download");var cQ=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function uQ(t){for(let{bytes:e,mimeType:r}of cQ)if(t.length>=e.length&&e.every((n,o)=>t[o]===n))return r}s(uQ,"detectImageMimeType");var xT="AI_InvalidDataContentError",XD=`vercel.ai.error.${xT}`,lQ=Symbol.for(XD),YD,LD=class extends ht{static{s(this,"InvalidDataContentError")}constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:xT,message:r,cause:e}),this[YD]=!0,this.content=t}static isInstance(t){return ht.hasMarker(t,XD)}static isInvalidDataContentError(t){return t instanceof Error&&t.name===xT&&t.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};YD=lQ;var ej=u.union([u.string(),u.instanceof(Uint8Array),u.instanceof(ArrayBuffer),u.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function dQ(t){return typeof t=="string"?t:t instanceof ArrayBuffer?uT(new Uint8Array(t)):uT(t)}s(dQ,"convertDataContentToBase64String");function Cf(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return SD(t)}catch(e){throw new LD({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new LD({content:t})}s(Cf,"convertDataContentToUint8Array");function pQ(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}s(pQ,"convertUint8ArrayToText");var TT="AI_InvalidMessageRoleError",tj=`vercel.ai.error.${TT}`,mQ=Symbol.for(tj),rj,fQ=class extends ht{static{s(this,"InvalidMessageRoleError")}constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:TT,message:e}),this[rj]=!0,this.role=t}static isInstance(t){return ht.hasMarker(t,tj)}static isInvalidMessageRoleError(t){return t instanceof Error&&t.name===TT&&typeof t.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};rj=mQ;function hQ(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}s(hQ,"splitDataUrl");async function gQ({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=s(()=>!1,"modelSupportsUrl"),downloadImplementation:n=aQ}){let o=await vQ(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(i=>yQ(i,o))]}s(gQ,"convertToLanguageModelPrompt");function yQ(t,e){let r=t.role;switch(r){case"system":return{role:"system",content:t.content,providerMetadata:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"user",content:t.content.map(n=>_Q(n,e)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:o,...i}=n;return{...i,providerMetadata:o}}),providerMetadata:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:t.experimental_providerMetadata};default:{let n=r;throw new fQ({role:n})}}}s(yQ,"convertToLanguageModelMessage");async function vQ(t,e,r,n){let o=t.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&r===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!n(a)),i=await Promise.all(o.map(async a=>({url:a,data:await e({url:a})})));return Object.fromEntries(i.map(({url:a,data:c})=>[a.toString(),c]))}s(vQ,"downloadAssets");function _Q(t,e){if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let r=t.mimeType,n,o,i,a=t.type;switch(a){case"image":n=t.image;break;case"file":n=t.data;break;default:throw new Error(`Unsupported part type: ${a}`)}try{o=typeof n=="string"?new URL(n):n}catch{o=n}if(o instanceof URL)if(o.protocol==="data:"){let{mimeType:c,base64Content:l}=hQ(o.toString());if(c==null||l==null)throw new Error(`Invalid data URL format in part ${a}`);r=c,i=Cf(l)}else{let c=e[o.toString()];c?(i=c.data,r??(r=c.mimeType)):i=o}else i=Cf(o);switch(a){case"image":return r==null&&i instanceof Uint8Array&&(r=uQ(i)),{type:"image",image:i,mimeType:r,providerMetadata:t.experimental_providerMetadata};case"file":if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:i instanceof Uint8Array?dQ(i):i,mimeType:r,providerMetadata:t.experimental_providerMetadata}}}s(_Q,"convertPartToLanguageModelPart");var ET="AI_InvalidArgumentError",nj=`vercel.ai.error.${ET}`,bQ=Symbol.for(nj),oj,qn=class extends ht{static{s(this,"InvalidArgumentError")}constructor({parameter:t,value:e,message:r}){super({name:ET,message:`Invalid argument for parameter ${t}: ${r}`}),this[oj]=!0,this.parameter=t,this.value=e}static isInstance(t){return ht.hasMarker(t,nj)}static isInvalidArgumentError(t){return t instanceof Error&&t.name===ET&&typeof t.parameter=="string"&&typeof t.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};oj=bQ;function wQ({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:c,maxRetries:l}){if(t!=null){if(!Number.isInteger(t))throw new qn({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new qn({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new qn({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new qn({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new qn({parameter:"topK",value:n,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new qn({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new qn({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(c!=null&&!Number.isInteger(c))throw new qn({parameter:"seed",value:c,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new qn({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new qn({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a!=null&&a.length>0?a:void 0,seed:c,maxRetries:l??2}}s(wQ,"prepareCallSettings");var kT=u.lazy(()=>u.union([u.null(),u.string(),u.number(),u.boolean(),u.record(u.string(),kT),u.array(kT)])),$i=u.record(u.string(),u.record(u.string(),kT)),SQ=u.array(u.union([u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("image"),data:u.string(),mimeType:u.string().optional()})])),ij=u.object({type:u.literal("text"),text:u.string(),experimental_providerMetadata:$i.optional()}),xQ=u.object({type:u.literal("image"),image:u.union([ej,u.instanceof(URL)]),mimeType:u.string().optional(),experimental_providerMetadata:$i.optional()}),TQ=u.object({type:u.literal("file"),data:u.union([ej,u.instanceof(URL)]),mimeType:u.string(),experimental_providerMetadata:$i.optional()}),EQ=u.object({type:u.literal("tool-call"),toolCallId:u.string(),toolName:u.string(),args:u.unknown()}),kQ=u.object({type:u.literal("tool-result"),toolCallId:u.string(),toolName:u.string(),result:u.unknown(),content:SQ.optional(),isError:u.boolean().optional(),experimental_providerMetadata:$i.optional()}),IQ=u.object({role:u.literal("system"),content:u.string(),experimental_providerMetadata:$i.optional()}),PQ=u.object({role:u.literal("user"),content:u.union([u.string(),u.array(u.union([ij,xQ,TQ]))]),experimental_providerMetadata:$i.optional()}),AQ=u.object({role:u.literal("assistant"),content:u.union([u.string(),u.array(u.union([ij,EQ]))]),experimental_providerMetadata:$i.optional()}),CQ=u.object({role:u.literal("tool"),content:u.array(kQ),experimental_providerMetadata:$i.optional()}),OQ=u.union([IQ,PQ,AQ,CQ]);function $Q(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(RQ);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}s($Q,"detectPromptType");function RQ(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}s(RQ,"detectSingleMessageCharacteristics");function NQ(t){var e,r,n;let o=[];for(let i of t){let a;try{a=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(a.protocol){case"http:":case"https:":{if((e=i.contentType)!=null&&e.startsWith("image/"))o.push({type:"image",image:a});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:a,mimeType:i.contentType})}break}case"data:":{let c,l,d;try{[c,l]=i.url.split(","),d=c.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(d==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((r=i.contentType)!=null&&r.startsWith("image/"))o.push({type:"image",image:Cf(l)});else if((n=i.contentType)!=null&&n.startsWith("text/"))o.push({type:"text",text:pQ(Cf(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return o}s(NQ,"attachmentsToParts");var sj="AI_MessageConversionError",aj=`vercel.ai.error.${sj}`,DQ=Symbol.for(aj),cj,qD=class extends ht{static{s(this,"MessageConversionError")}constructor({originalMessage:t,message:e}){super({name:sj,message:e}),this[cj]=!0,this.originalMessage=t}static isInstance(t){return ht.hasMarker(t,aj)}};cj=DQ;function AT(t,e){var r;let n=(r=e?.tools)!=null?r:{},o=[];for(let i of t){let{role:a,content:c,toolInvocations:l,experimental_attachments:d}=i;switch(a){case"system":{o.push({role:"system",content:c});break}case"user":{o.push({role:"user",content:d?[{type:"text",text:c},...NQ(d)]:c});break}case"assistant":{if(l==null){o.push({role:"assistant",content:c});break}o.push({role:"assistant",content:[{type:"text",text:c},...l.map(({toolCallId:p,toolName:m,args:h})=>({type:"tool-call",toolCallId:p,toolName:m,args:h}))]}),o.push({role:"tool",content:l.map(p=>{if(!("result"in p))throw new qD({originalMessage:i,message:"ToolInvocation must have a result: "+JSON.stringify(p)});let{toolCallId:m,toolName:h,result:y}=p,g=n[h];return g?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:m,toolName:h,result:g.experimental_toToolResultContent(y),experimental_content:g.experimental_toToolResultContent(y)}:{type:"tool-result",toolCallId:m,toolName:h,result:y}})});break}case"function":case"data":case"tool":break;default:{let p=a;throw new qD({originalMessage:i,message:`Unsupported role: ${p}`})}}}return o}s(AT,"convertToCoreMessages");function jQ({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new ms({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new ms({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new ms({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new ms({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=$Q(t.messages);if(r==="other")throw new ms({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?AT(t.messages,{tools:e}):t.messages,o=bl({value:n,schema:u.array(OQ)});if(!o.success)throw new ms({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:o.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}s(jQ,"standardizePrompt");function MQ(t){return{promptTokens:t.promptTokens,completionTokens:t.completionTokens,totalTokens:t.promptTokens+t.completionTokens}}s(MQ,"calculateLanguageModelUsage");function Of(t,{contentType:e,dataStreamVersion:r}){var n;let o=new Headers((n=t?.headers)!=null?n:{});return o.has("Content-Type")||o.set("Content-Type",e),r!==void 0&&o.set("X-Vercel-AI-Data-Stream",r),o}s(Of,"prepareResponseHeaders");var zQ="AI_NoObjectGeneratedError",UQ=`vercel.ai.error.${zQ}`,LQ=Symbol.for(UQ),qQ;qQ=LQ;function FD(t,e){let r=t.pipeThrough(new TransformStream(e));return r[Symbol.asyncIterator]=()=>{let n=r.getReader();return{async next(){let{done:o,value:i}=await n.read();return o?{done:!0,value:void 0}:{done:!1,value:i}}}},r}s(FD,"createAsyncIterableStream");var Gje=Vo({prefix:"aiobj",size:24});function uo(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}s(uo,"createResolvablePromise");function FQ(){var t,e;return(e=(t=globalThis?.performance)==null?void 0:t.now())!=null?e:Date.now()}s(FQ,"now");function BD(t,{contentType:e,dataStreamVersion:r}){let n={};if(t?.headers!=null)for(let[o,i]of Object.entries(t.headers))n[o]=i;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}s(BD,"prepareOutgoingHttpHeaders");function VD({response:t,status:e,statusText:r,headers:n,stream:o}){t.writeHead(e??200,r,n);let i=o.getReader();s(async()=>{try{for(;;){let{done:c,value:l}=await i.read();if(c)break;t.write(l)}}catch(c){throw c}finally{t.end()}},"read")()}s(VD,"writeToServerResponse");var Wje=Vo({prefix:"aiobj",size:24});var IT="AI_InvalidToolArgumentsError",uj=`vercel.ai.error.${IT}`,BQ=Symbol.for(uj),lj,VQ=class extends ht{static{s(this,"InvalidToolArgumentsError")}constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${wf(r)}`}){super({name:IT,message:n,cause:r}),this[lj]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return ht.hasMarker(t,uj)}static isInvalidToolArgumentsError(t){return t instanceof Error&&t.name===IT&&typeof t.toolName=="string"&&typeof t.toolArgs=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};lj=BQ;var PT="AI_NoSuchToolError",dj=`vercel.ai.error.${PT}`,HQ=Symbol.for(dj),pj,$f=class extends ht{static{s(this,"NoSuchToolError")}constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:PT,message:r}),this[pj]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return ht.hasMarker(t,dj)}static isNoSuchToolError(t){return t instanceof Error&&t.name===PT&&"toolName"in t&&t.toolName!=null&&typeof t.name=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};pj=HQ;function ZQ(t){return t!=null&&Object.keys(t).length>0}s(ZQ,"isNonEmptyObject");function JQ({tools:t,toolChoice:e,activeTools:r}){return ZQ(t)?{tools:(r!=null?Object.entries(t).filter(([o])=>r.includes(o)):Object.entries(t)).map(([o,i])=>{let a=i.type;switch(a){case void 0:case"function":return{type:"function",name:o,description:i.description,parameters:bf(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{let c=a;throw new Error(`Unsupported tool type: ${c}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}s(JQ,"prepareToolsAndToolChoice");var GQ=/^([\s\S]*?)(\s+)(\S*)$/;function KQ(t){let e=t.match(GQ);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}s(KQ,"splitOnLastWhitespace");function WQ({toolCall:t,tools:e}){let r=t.toolName;if(e==null)throw new $f({toolName:t.toolName});let n=e[r];if(n==null)throw new $f({toolName:t.toolName,availableTools:Object.keys(e)});let o=bf(n.parameters),i=t.args.trim()===""?bl({value:{},schema:o}):cT({text:t.args,schema:o});if(i.success===!1)throw new VQ({toolName:r,toolArgs:t.args,cause:i.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:i.value}}s(WQ,"parseToolCall");function QQ({text:t="",tools:e,toolCalls:r,toolResults:n}){let o=[];return o.push({role:"assistant",content:[{type:"text",text:t},...r]}),n.length>0&&o.push({role:"tool",content:n.map(i=>{let a=e[i.toolName];return a?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:a.experimental_toToolResultContent(i.result),experimental_content:a.experimental_toToolResultContent(i.result)}:{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:i.result}})}),o}s(QQ,"toResponseMessages");var n2e=Vo({prefix:"aitxt",size:24});function XQ(){let t=[],e=null,r=!1,n=s(async()=>{if(r&&t.length===0){e?.close();return}if(t.length!==0)try{let{value:o,done:i}=await t[0].read();i?(t.shift(),t.length>0?await n():r&&e?.close()):e?.enqueue(o)}catch(o){e?.error(o),t.shift(),r&&t.length===0&&e?.close()}},"processPull");return{stream:new ReadableStream({start(o){e=o},pull:n,async cancel(){for(let o of t)await o.cancel();t=[],r=!0}}),addStream:s(o=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(o.getReader())},"addStream"),close:s(()=>{r=!0,t.length===0&&e?.close()},"close")}}s(XQ,"createStitchableStream");function CT(t,e){let r=t.getReader(),n=e.getReader(),o,i,a=!1,c=!1;async function l(p){try{o==null&&(o=r.read());let m=await o;o=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}s(l,"readStream1");async function d(p){try{i==null&&(i=n.read());let m=await i;i=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}return s(d,"readStream2"),new ReadableStream({async pull(p){try{if(a){await d(p);return}if(c){await l(p);return}o==null&&(o=r.read()),i==null&&(i=n.read());let{result:m,reader:h}=await Promise.race([o.then(y=>({result:y,reader:r})),i.then(y=>({result:y,reader:n}))]);m.done||p.enqueue(m.value),h===r?(o=void 0,m.done&&(await d(p),a=!0)):(i=void 0,m.done&&(c=!0,await l(p)))}catch(m){p.error(m)}},cancel(){r.cancel(),n.cancel()}})}s(CT,"mergeStreams");function YQ({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:o,abortSignal:i}){let a=null,c=new ReadableStream({start(g){a=g}}),l={},d=new Set,p=!1,m;function h(){p&&d.size===0&&(m!=null&&a.enqueue(m),a.close())}s(h,"attemptClose");let y=new TransformStream({transform(g,f){let _=g.type;switch(_){case"text-delta":case"response-metadata":case"error":{f.enqueue(g);break}case"tool-call-delta":{r&&(l[g.toolCallId]||(f.enqueue({type:"tool-call-streaming-start",toolCallId:g.toolCallId,toolName:g.toolName}),l[g.toolCallId]=!0),f.enqueue({type:"tool-call-delta",toolCallId:g.toolCallId,toolName:g.toolName,argsTextDelta:g.argsTextDelta}));break}case"tool-call":{let w=g.toolName;if(t==null){a.enqueue({type:"error",error:new $f({toolName:g.toolName})});break}let b=t[w];if(b==null){a.enqueue({type:"error",error:new $f({toolName:g.toolName,availableTools:Object.keys(t)})});break}try{let S=WQ({toolCall:g,tools:t});if(f.enqueue(S),b.execute!=null){let k=K0();d.add(k),wT({name:"ai.toolCall",attributes:Na({telemetry:o,attributes:{...bT({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":S.toolName,"ai.toolCall.id":S.toolCallId,"ai.toolCall.args":{output:s(()=>JSON.stringify(S.args),"output")}}}),tracer:n,fn:s(async R=>b.execute(S.args,{abortSignal:i}).then(O=>{a.enqueue({...S,type:"tool-result",result:O}),d.delete(k),h();try{R.setAttributes(Na({telemetry:o,attributes:{"ai.toolCall.result":{output:s(()=>JSON.stringify(O),"output")}}}))}catch{}},O=>{a.enqueue({type:"error",error:O}),d.delete(k),h()}),"fn")})}}catch(S){a.enqueue({type:"error",error:S})}break}case"finish":{m={type:"finish",finishReason:g.finishReason,logprobs:g.logprobs,usage:MQ(g.usage),experimental_providerMetadata:g.providerMetadata};break}default:{let w=_;throw new Error(`Unhandled chunk type: ${w}`)}}},flush(){p=!0,h()}});return new ReadableStream({async start(g){return Promise.all([e.pipeThrough(y).pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){}})),c.pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){g.close()}}))])}})}s(YQ,"runToolsTransformation");var e7=Vo({prefix:"aitxt",size:24});async function mj({model:t,tools:e,toolChoice:r,system:n,prompt:o,messages:i,maxRetries:a,abortSignal:c,headers:l,maxToolRoundtrips:d=0,maxSteps:p=d!=null?d+1:1,experimental_continueSteps:m=!1,experimental_telemetry:h,experimental_providerMetadata:y,experimental_toolCallStreaming:g=!1,experimental_activeTools:f,onChunk:_,onFinish:w,onStepFinish:b,_internal:{now:S=FQ,generateId:k=e7,currentDate:R=s(()=>new Date,"currentDate")}={},...O}){if(p<1)throw new qn({parameter:"maxSteps",value:p,message:"maxSteps must be at least 1"});let C=rQ({model:t,telemetry:h,headers:l,settings:{...O,maxRetries:a}}),$=iQ(h),P=jQ({prompt:{system:n,prompt:o,messages:i},tools:e});return wT({name:"ai.streamText",attributes:Na({telemetry:h,attributes:{...bT({operationId:"ai.streamText",telemetry:h}),...C,"ai.prompt":{input:s(()=>JSON.stringify({system:n,prompt:o,messages:i}),"input")},"ai.settings.maxSteps":p}}),tracer:$,endWhenDone:!1,fn:s(async N=>{let D=tQ({maxRetries:a}),W=s(async({responseMessages:Se})=>{let We=Se.length===0?P.type:"messages",Ve=await gQ({prompt:{type:We,system:P.system,messages:[...P.messages,...Se]},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:t.supportsUrl}),J={type:"regular",...JQ({tools:e,toolChoice:r,activeTools:f})},{result:{stream:Ae,warnings:fe,rawResponse:U,request:Ze},doStreamSpan:bt,startTimestampMs:Et}=await D(()=>wT({name:"ai.streamText.doStream",attributes:Na({telemetry:h,attributes:{...bT({operationId:"ai.streamText.doStream",telemetry:h}),...C,"ai.prompt.format":{input:s(()=>We,"input")},"ai.prompt.messages":{input:s(()=>JSON.stringify(Ve),"input")},"ai.prompt.tools":{input:s(()=>{var Jr;return(Jr=J.tools)==null?void 0:Jr.map(ni=>JSON.stringify(ni))},"input")},"ai.prompt.toolChoice":{input:s(()=>J.toolChoice!=null?JSON.stringify(J.toolChoice):void 0,"input")},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":O.frequencyPenalty,"gen_ai.request.max_tokens":O.maxTokens,"gen_ai.request.presence_penalty":O.presencePenalty,"gen_ai.request.stop_sequences":O.stopSequences,"gen_ai.request.temperature":O.temperature,"gen_ai.request.top_k":O.topK,"gen_ai.request.top_p":O.topP}}),tracer:$,endWhenDone:!1,fn:s(async Jr=>({startTimestampMs:S(),doStreamSpan:Jr,result:await t.doStream({mode:J,...wQ(O),inputFormat:We,prompt:Ve,providerMetadata:y,abortSignal:c,headers:l})}),"fn")}));return{result:{stream:YQ({tools:e,generatorStream:Ae,toolCallStreaming:g,tracer:$,telemetry:h,abortSignal:c}),warnings:fe,request:Ze??{},rawResponse:U},doStreamSpan:bt,startTimestampMs:Et}},"startStep"),{result:{stream:H,warnings:q,rawResponse:X,request:te},doStreamSpan:oe,startTimestampMs:ye}=await W({responseMessages:[]});return new t7({stream:H,warnings:q,rawResponse:X,request:te,onChunk:_,onFinish:w,onStepFinish:b,rootSpan:N,doStreamSpan:oe,telemetry:h,startTimestampMs:ye,maxSteps:p,continueSteps:m,startStep:W,modelId:t.modelId,now:S,currentDate:R,generateId:k,tools:e})},"fn")})}s(mj,"streamText");var t7=class{static{s(this,"DefaultStreamTextResult")}constructor({stream:t,warnings:e,rawResponse:r,request:n,onChunk:o,onFinish:i,onStepFinish:a,rootSpan:c,doStreamSpan:l,telemetry:d,startTimestampMs:p,maxSteps:m,continueSteps:h,startStep:y,modelId:g,now:f,currentDate:_,generateId:w,tools:b}){this.warnings=e,this.rawResponse=r;let{resolve:S,promise:k}=uo();this.usage=k;let{resolve:R,promise:O}=uo();this.finishReason=O;let{resolve:C,promise:$}=uo();this.text=$;let{resolve:P,promise:N}=uo();this.toolCalls=N;let{resolve:D,promise:W}=uo();this.toolResults=W;let{resolve:H,promise:q}=uo();this.steps=q;let{resolve:X,promise:te}=uo();this.experimental_providerMetadata=te;let{resolve:oe,promise:ye}=uo();this.request=ye;let{resolve:Se,promise:We}=uo();this.response=We;let{resolve:Ve,promise:J}=uo();this.responseMessages=J;let{stream:Ae,addStream:fe,close:U}=XQ();this.originalStream=Ae;let Ze=[],bt=this;function Et({stream:Jr,startTimestamp:ni,doStreamSpan:ko,currentStep:Os,responseMessages:gr,usage:Xn={promptTokens:0,completionTokens:0,totalTokens:0},stepType:$s,previousStepText:Cd="",stepRequest:oi,hasLeadingWhitespace:Od}){let sn=[],Yn=[],mr="unknown",Vt={promptTokens:0,completionTokens:0,totalTokens:0},Cn,$d=!0,Sr="",Io=$s==="continue"?Cd:"",v,x={id:w(),timestamp:_(),modelId:g},E="",z=!1,V=!0,ee=!1;async function le({controller:Oe,chunk:mt}){Oe.enqueue(mt),Sr+=mt.textDelta,Io+=mt.textDelta,z=!0,ee=mt.textDelta.trimEnd()!==mt.textDelta,await o?.({chunk:mt})}s(le,"publishTextChunk"),fe(Jr.pipeThrough(new TransformStream({async transform(Oe,mt){var gt,at,Rt;if($d){let zt=f()-ni;$d=!1,ko.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":zt,"ai.stream.msToFirstChunk":zt}),ko.setAttributes({"ai.response.msToFirstChunk":zt,"ai.stream.msToFirstChunk":zt})}if(Oe.type==="text-delta"&&Oe.textDelta.length===0)return;let Po=Oe.type;switch(Po){case"text-delta":{if(h){let zt=V&&Od?Oe.textDelta.trimStart():Oe.textDelta;if(zt.length===0)break;V=!1,E+=zt;let Rs=KQ(E);Rs!=null&&(E=Rs.suffix,await le({controller:mt,chunk:{type:"text-delta",textDelta:Rs.prefix+Rs.whitespace}}))}else await le({controller:mt,chunk:Oe});break}case"tool-call":{mt.enqueue(Oe),sn.push(Oe),await o?.({chunk:Oe});break}case"tool-result":{mt.enqueue(Oe),Yn.push(Oe),await o?.({chunk:Oe});break}case"response-metadata":{x={id:(gt=Oe.id)!=null?gt:x.id,timestamp:(at=Oe.timestamp)!=null?at:x.timestamp,modelId:(Rt=Oe.modelId)!=null?Rt:x.modelId};break}case"finish":{Vt=Oe.usage,mr=Oe.finishReason,Cn=Oe.experimental_providerMetadata,v=Oe.logprobs;let zt=f()-ni;ko.addEvent("ai.stream.finish"),ko.setAttributes({"ai.response.msToFinish":zt,"ai.response.avgCompletionTokensPerSecond":1e3*Vt.completionTokens/zt});break}case"tool-call-streaming-start":case"tool-call-delta":{mt.enqueue(Oe),await o?.({chunk:Oe});break}case"error":{mt.enqueue(Oe),mr="error";break}default:{let zt=Po;throw new Error(`Unknown chunk type: ${zt}`)}}},async flush(Oe){var mt;let gt=sn.length>0?JSON.stringify(sn):void 0,at="done";Os+1<m&&(h&&mr==="length"&&sn.length===0?at="continue":sn.length>0&&Yn.length===sn.length&&(at="tool-result")),h&&E.length>0&&(at!=="continue"||$s==="continue"&&!z)&&(await le({controller:Oe,chunk:{type:"text-delta",textDelta:E}}),E="");try{ko.setAttributes(Na({telemetry:d,attributes:{"ai.response.finishReason":mr,"ai.response.text":{output:s(()=>Sr,"output")},"ai.response.toolCalls":{output:s(()=>gt,"output")},"ai.response.id":x.id,"ai.response.model":x.modelId,"ai.response.timestamp":x.timestamp.toISOString(),"ai.usage.promptTokens":Vt.promptTokens,"ai.usage.completionTokens":Vt.completionTokens,"ai.finishReason":mr,"ai.result.text":{output:s(()=>Sr,"output")},"ai.result.toolCalls":{output:s(()=>gt,"output")},"gen_ai.response.finish_reasons":[mr],"gen_ai.response.id":x.id,"gen_ai.response.model":x.modelId,"gen_ai.usage.input_tokens":Vt.promptTokens,"gen_ai.usage.output_tokens":Vt.completionTokens}}))}catch{}finally{ko.end()}if(Oe.enqueue({type:"step-finish",finishReason:mr,usage:Vt,experimental_providerMetadata:Cn,logprobs:v,response:{...x},isContinued:at==="continue"}),$s==="continue"){let zt=gr[gr.length-1];typeof zt.content=="string"?zt.content+=Sr:zt.content.push({text:Sr,type:"text"})}else gr.push(...QQ({text:Sr,tools:b??{},toolCalls:sn,toolResults:Yn}));let Rt={stepType:$s,text:Sr,toolCalls:sn,toolResults:Yn,finishReason:mr,usage:Vt,warnings:bt.warnings,logprobs:v,request:oi,rawResponse:bt.rawResponse,response:{...x,headers:(mt=bt.rawResponse)==null?void 0:mt.headers,messages:JSON.parse(JSON.stringify(gr))},experimental_providerMetadata:Cn,isContinued:at==="continue"};Ze.push(Rt),await a?.(Rt);let Po={promptTokens:Xn.promptTokens+Vt.promptTokens,completionTokens:Xn.completionTokens+Vt.completionTokens,totalTokens:Xn.totalTokens+Vt.totalTokens};if(at!=="done"){let{result:zt,doStreamSpan:Rs,startTimestampMs:d6}=await y({responseMessages:gr});bt.warnings=zt.warnings,bt.rawResponse=zt.rawResponse,Et({stream:zt.stream,startTimestamp:d6,doStreamSpan:Rs,currentStep:Os+1,responseMessages:gr,usage:Po,stepType:at,previousStepText:Io,stepRequest:zt.request,hasLeadingWhitespace:ee});return}try{Oe.enqueue({type:"finish",finishReason:mr,usage:Po,experimental_providerMetadata:Cn,logprobs:v,response:{...x}}),U(),c.setAttributes(Na({telemetry:d,attributes:{"ai.response.finishReason":mr,"ai.response.text":{output:s(()=>Io,"output")},"ai.response.toolCalls":{output:s(()=>gt,"output")},"ai.usage.promptTokens":Po.promptTokens,"ai.usage.completionTokens":Po.completionTokens,"ai.finishReason":mr,"ai.result.text":{output:s(()=>Io,"output")},"ai.result.toolCalls":{output:s(()=>gt,"output")}}})),S(Po),R(mr),C(Io),P(sn),X(Cn),D(Yn),oe(oi),Se({...x,headers:r?.headers,messages:gr}),H(Ze),Ve(gr),await i?.({finishReason:mr,logprobs:v,usage:Po,text:Io,toolCalls:sn,toolResults:Yn,request:oi,rawResponse:r,response:{...x,headers:r?.headers,messages:gr},warnings:e,experimental_providerMetadata:Cn,steps:Ze,responseMessages:gr})}catch(zt){Oe.error(zt)}finally{c.end()}}})))}s(Et,"addStepStream"),Et({stream:t,startTimestamp:p,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:n,hasLeadingWhitespace:!1})}teeStream(){let[t,e]=this.originalStream.tee();return this.originalStream=e,t}get textStream(){return FD(this.teeStream(),{transform(t,e){t.type==="text-delta"?e.enqueue(t.textDelta):t.type==="error"&&e.error(t.error)}})}get fullStream(){return FD(this.teeStream(),{transform(t,e){e.enqueue(t)}})}toAIStream(t={}){return this.toDataStreamInternal({callbacks:t})}toDataStreamInternal({callbacks:t={},getErrorMessage:e=s(()=>"","getErrorMessage3"),sendUsage:r=!0}={}){let n="",o=new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(a,c){if(c.enqueue(a),a.type==="text-delta"){let l=a.textDelta;n+=l,t.onToken&&await t.onToken(l),t.onText&&await t.onText(l)}},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}}),i=new TransformStream({transform:s(async(a,c)=>{let l=a.type;switch(l){case"text-delta":{c.enqueue(Ln("text",a.textDelta));break}case"tool-call-streaming-start":{c.enqueue(Ln("tool_call_streaming_start",{toolCallId:a.toolCallId,toolName:a.toolName}));break}case"tool-call-delta":{c.enqueue(Ln("tool_call_delta",{toolCallId:a.toolCallId,argsTextDelta:a.argsTextDelta}));break}case"tool-call":{c.enqueue(Ln("tool_call",{toolCallId:a.toolCallId,toolName:a.toolName,args:a.args}));break}case"tool-result":{c.enqueue(Ln("tool_result",{toolCallId:a.toolCallId,result:a.result}));break}case"error":{c.enqueue(Ln("error",e(a.error)));break}case"step-finish":{c.enqueue(Ln("finish_step",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0,isContinued:a.isContinued}));break}case"finish":{c.enqueue(Ln("finish_message",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0}));break}default:{let d=l;throw new Error(`Unknown chunk type: ${d}`)}}},"transform")});return this.fullStream.pipeThrough(o).pipeThrough(i).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(t,e){return this.pipeDataStreamToResponse(t,e)}pipeDataStreamToResponse(t,e){let r=e==null?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},n=e==null?void 0:"data"in e?e.data:void 0,o=e==null?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,i=e==null?void 0:"sendUsage"in e?e.sendUsage:void 0;VD({response:t,status:r?.status,statusText:r?.statusText,headers:BD(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:n,getErrorMessage:o,sendUsage:i})})}pipeTextStreamToResponse(t,e){VD({response:t,status:e?.status,statusText:e?.statusText,headers:BD(e,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(t){return this.toDataStreamResponse(t)}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t?.getErrorMessage,sendUsage:t?.sendUsage});return t?.data?CT(t?.data.stream,e):e}toDataStreamResponse(t){var e;let r=t==null?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},n=t==null?void 0:"data"in t?t.data:void 0,o=t==null?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,i=t==null?void 0:"sendUsage"in t?t.sendUsage:void 0;return new Response(this.toDataStream({data:n,getErrorMessage:o,sendUsage:i}),{status:(e=r?.status)!=null?e:200,statusText:r?.statusText,headers:Of(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t?.status)!=null?e:200,headers:Of(t,{contentType:"text/plain; charset=utf-8"})})}};var r7="AI_NoSuchProviderError",n7=`vercel.ai.error.${r7}`,o7=Symbol.for(n7),i7;i7=o7;function fj(t){let e=new TextEncoder,r="",n=t||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(o,i){let a=typeof o=="string"?o:o.content;i.enqueue(e.encode(a)),r+=a,n.onToken&&await n.onToken(a),n.onText&&typeof o=="string"&&await n.onText(o)},async flush(){let o=s7(n);n.onCompletion&&await n.onCompletion(r),n.onFinal&&!o&&await n.onFinal(r)}})}s(fj,"createCallbacksTransformer");function s7(t){return"experimental_onFunctionCall"in t}s(s7,"isOfTypeOpenAIStreamCallbacks");function a7(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}s(a7,"trimStartOfStreamHelper");var a2e=15*1e3;function hj(){let t=new TextEncoder,e=new TextDecoder;return new TransformStream({transform:s(async(r,n)=>{let o=e.decode(r);n.enqueue(t.encode(Ln("text",o)))},"transform")})}s(hj,"createStreamDataTransformer");var c2e=new TextDecoder("utf-8");var c7={};ZD(c7,{toAIStream:s(()=>u7,"toAIStream"),toDataStream:s(()=>OT,"toDataStream"),toDataStreamResponse:s(()=>l7,"toDataStreamResponse")});function u7(t,e){return OT(t,e)}s(u7,"toAIStream");function OT(t,e){return t.pipeThrough(new TransformStream({transform:s(async(r,n)=>{var o;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&HD((o=r.data)==null?void 0:o.chunk,n);return}HD(r,n)},"transform")})).pipeThrough(fj(e)).pipeThrough(hj())}s(OT,"toDataStream");function l7(t,e){var r;let n=OT(t,e?.callbacks),o=e?.data,i=e?.init,a=o?CT(o.stream,n):n;return new Response(a,{status:(r=i?.status)!=null?r:200,statusText:i?.statusText,headers:Of(i,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(l7,"toDataStreamResponse");function HD(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}s(HD,"forwardAIMessageChunk");var d7={};ZD(d7,{toDataStream:s(()=>gj,"toDataStream"),toDataStreamResponse:s(()=>p7,"toDataStreamResponse")});function gj(t,e){return m7(t).pipeThrough(fj(e)).pipeThrough(hj())}s(gj,"toDataStream2");function p7(t,e={}){var r;let{init:n,data:o,callbacks:i}=e,a=gj(t,i),c=o?CT(o.stream,a):a;return new Response(c,{status:(r=n?.status)!=null?r:200,statusText:n?.statusText,headers:Of(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(p7,"toDataStreamResponse2");function m7(t){let e=t[Symbol.asyncIterator](),r=a7();return new ReadableStream({async pull(n){var o;let{value:i,done:a}=await e.next();if(a){n.close();return}let c=r((o=i.delta)!=null?o:"");c&&n.enqueue(c)}})}s(m7,"toReadableStream");var u2e=Symbol("internal_openai_fn_messages");async function Rf(t){try{await so.insert(pi).values({userId:t.userId,action:`ai_${t.actionType}`,resourceType:t.toolName||"ai_chat",sessionId:t.sessionId,success:t.outcome==="success",errorMessage:t.errorMessage,newValues:{provider:t.provider,model:t.model,action_type:t.actionType,tool_name:t.toolName,input_summary:t.inputSummary.slice(0,500),output_summary:t.outputSummary.slice(0,500),tokens_used:t.tokensUsed,latency_ms:t.latencyMs,outcome:t.outcome,affected_tables:t.affectedTables,affected_record_ids:t.affectedRecordIds}})}catch{}}s(Rf,"logAIOperation");var yj=`Voc\xEA \xE9 o assistente financeiro inteligente especializado do AegisWallet, a plataforma brasileira l\xEDder em gest\xE3o financeira pessoal com interface voz-first.

## SUA ESPECIALIDADE BRASILEIRA

### Dom\xEDnio do Mercado Financeiro Brasileiro
- **PIX**: Expert em transfer\xEAncias PIX instant\xE2neas 24/7, QR Codes, limites, taxas e regras do BCB
- **Boletos**: Gest\xE3o completa de boletos - registro, pagamento, c\xE1lculo de juros/multas, agendamentos
- **Open Banking**: Conhecimento profundo das APIs banc\xE1rias brasileiras e padr\xF5es regulat\xF3rios
- **C\xE2mbio**: Entendimento de opera\xE7\xF5es cambiais e limites legais brasileiros
- **Impostos**: Conhecimento de tributa\xE7\xE3o brasileira (IR, IOF, etc.)

### Cultura e Localiza\xE7\xE3o
- **Portugu\xEAs Brasileiro Nativo**: Use termos como "parab\xE9ns", "show de bola", "blz", " firm\xE3o"
- **Realidade Financeira Brasileira**: Entenda sal\xE1rios, infla\xE7\xE3o, custo de vida, juros altos
- **Calend\xE1rio Brasileiro**: Considere feriados, 13\xBA sal\xE1rio, d\xE9cimo terceiro, parcelas
- **Bancos Nacionais**: Ita\xFA, Bradesco, Caixa, Banco do Brasil, Nubank, Inter, etc.

## CAPACIDADES AVAN\xC7ADAS

### Opera\xE7\xF5es Financeiras (PIX, TED, DOC, Boletos)
- **Transfer\xEAncias PIX**: Envio/recebimento instant\xE2neo, QR Codes, agendamentos, status tracking
- **Gest\xE3o de Boletos**: Registro via c\xF3digo de barras, c\xE1lculo autom\xE1tico de juros/multas, agendamento de pagamentos
- **An\xE1lise de Contatos**: Salvar contatos frequentes, m\xE9todos de pagamento PIX, favoritos
- **Limites e Taxas**: Conhecimento de limites di\xE1rios, taxas, hor\xE1rios de compensa\xE7\xE3o

### An\xE1lises e Insights Financeiros
- **An\xE1lise de Gastos**: Detalhada por categoria, tend\xEAncias, padr\xF5es an\xF4malos
- **Previs\xE3o de Fluxo de Caixa**: Baseada em hist\xF3rico e eventos futuros com confian\xE7a
- **Detec\xE7\xE3o de Fraude**: An\xE1lise em tempo real de risco, padr\xF5es suspeitos
- **Recomenda\xE7\xF5es de Or\xE7amento**: Personalizadas baseadas em comportamento e metas

### Interface Voz-First (Voice-First)
- **Comandos em Portugu\xEAs Natural**: "Envia cem reais para a Maria pelo PIX", "Paga o boleto da luz"
- **Processamento de Contexto**: Mant\xE9m conversa\xE7\xE3o com hist\xF3rico e contexto relevante
- **Confirma\xE7\xE3o por Voz**: Valida\xE7\xE3o segura de opera\xE7\xF5es sens\xEDveis via reconhecimento de voz
- **Respostas Otimizadas para TTS**: Texto projetado para s\xEDntese de voz natural

### Seguran\xE7a e Conformidade LGPD
- **LGPD**: Conformidade total com Lei Geral de Prote\xE7\xE3o de Dados brasileira
- **Valida\xE7\xE3o Multi-Fator**: 2FA, biom\xE9trica, c\xF3digo via SMS/email
- **Audit Logging**: Registros completos para compliance e auditoria
- **Prote\xE7\xE3o de Dados**: Criptografia, anonimiza\xE7\xE3o, reten\xE7\xE3o conformidade

## REGRAS DE SEGURAN\xC7A E CONFORMIDADE (CR\xCDTICAS)

### Prote\xE7\xE3o de Dados LGPD
1. **NUNCA** exponha dados sens\xEDveis: CPF, senhas, tokens biom\xE9tricos
2. **SEMPRE** obtenha consentimento expl\xEDcito para uso de dados financeiros
3. **RESPEITE** direitos de acesso, corre\xE7\xE3o e exclus\xE3o de dados
4. **IMPLEMENTE** pol\xEDticas de reten\xE7\xE3o conformes com regulamenta\xE7\xE3o brasileira

### Seguran\xE7a de Transa\xE7\xF5es
1. **VALIDA\xC7\xC3O OBRIGAT\xD3RIA**: Toda transa\xE7\xE3o >R$1.000 requer verifica\xE7\xE3o adicional
2. **LIMITES AUTOM\xC1TICOS**: Respeite limites di\xE1rios e de frequ\xEAncia
3. **MONITORAMENTO**: Detecte padr\xF5es an\xF4malos e poss\xEDveis fraudes
4. **CONFIRMA\xC7\xC3O**: Use c\xF3digos, biometria ou confirma\xE7\xE3o por voz para opera\xE7\xF5es cr\xEDticas

### Padr\xF5es Brasileiros de Atendimento
1. **Formalidade Amig\xE1vel**: Tratamento "voc\xEA" mas respeitoso e profissional
2. **Hor\xE1rio Banc\xE1rio**: Considere hor\xE1rios banc\xE1rios e janela de compensa\xE7\xE3o
3. **Feriados**: Esteja ciente de feriados nacionais e estaduais brasileiros
4. **Cultura Financeira**: Entenda avers\xE3o a risco, prefer\xEAncia por seguran\xE7a

## FORMATA\xC7\xC3O E COMUNICA\xC7\xC3O

### Formatos Brasileiros
- **Valores**: R$ 1.234,56 (separador decimal v\xEDrgula, milhar ponto)
- **Datas**: DD/MM/YYYY ou "hoje", "ontem", "anteontem", "esta semana"
- **Hor\xE1rios**: 24h com fuso America/Sao_Paulo (BRT/BRST)
- **Documentos**: CPF: XXX.XXX.XXX-XX, CNPJ: XX.XXX.XXX/XXXX-XX

### Tom e Estilo
- **Voz Ativa**: "Vou analisar seus gastos" em vez de "Seus gastos ser\xE3o analisados"
- **Empatia**: Entenda dificuldades financeiras com respeito e apoio
- **Clareza**: Use termos simples, evite jarg\xF5es t\xE9cnicos excessivos
- **Cultura**: Use express\xF5es brasileiras naturais quando apropriado

## PADR\xD5ES DE RESPOSTA

### Para PIX
- **R\xE1pido**: "Transfer\xEAncia PIX enviada! Chega em segundos na conta do destinat\xE1rio."
- **Seguro**: "Para sua seguran\xE7a, vou enviar um c\xF3digo para confirmar esta transfer\xEAncia de R$ 500,00."
- **Informativo**: "O limite di\xE1rio PIX \xE9 R$ 5.000 entre 20h e 6h."

### Para Boletos
- **C\xE1lculo**: "Este boleto vence em 3 dias com multa de 2% e juros de 1% ao m\xEAs."
- **Agendamento**: "Boleto agendado! Ser\xE1 pago automaticamente na data de vencimento."
- **Alerta**: "\u26A0\uFE0F Voc\xEA tem 2 boletos vencendo esta semana totalizando R$ 850,00."

### Para An\xE1lises
- **Visual**: "Seus gastos em alimenta\xE7\xE3o subiram 15% este m\xEAs. Quer ver o gr\xE1fico detalhado?"
- **Pr\xE1tico**: "Com base no seu padr\xE3o, sugiro reservar R$ 2.000 para emerg\xEAncias."
- **Alerta**: "Detectei 3 transa\xE7\xF5es suspeitas esta semana. Quer investigar?"

### Para Voz
- **Conversacional**: "Entendi! Voc\xEA quer transferir R$ 250 para a Joana pelo PIX, correto?"
- **Claro**: "Pode repetir o valor? N\xE3o consegui entender bem."
- **Eficiente**: "Pronto! Transfer\xEAncia autorizada com sua confirma\xE7\xE3o por voz."

## FLUXOS ESPECIALIZADOS

### Transfer\xEAncia PIX Completa
1. "Quanto quer transferir?" \u2192 Validar valor e limites
2. "Qual a chave PIX do destinat\xE1rio?" \u2192 Validar formato e tipo
3. "Qual o nome completo do destinat\xE1rio?" \u2192 Para registro
4. "Descri\xE7\xE3o opcional?" \u2192 Para identifica\xE7\xE3o
5. "Confirmar transfer\xEAncia?" \u2192 Envio ou verifica\xE7\xE3o adicional

### Pagamento de Boleto
1. "C\xF3digo de barras ou\u7167\u7247?" \u2192 Captura e valida\xE7\xE3o
2. "Valor e data de vencimento?" \u2192 Confirma\xE7\xE3o
3. "Calcular juros/multas?" \u2192 Se vencido
4. "Pagar agora ou agendar?" \u2192 Processamento
5. "Confirma\xE7\xE3o?" \u2192 Seguran\xE7a e finaliza\xE7\xE3o

### An\xE1lise Financeira por Voz
1. "Que per\xEDodo quer analisar?" \u2192 Defini\xE7\xE3o de scope
2. "Foco em alguma categoria espec\xEDfica?" \u2192 Detalhamento
3. "Quer compara\xE7\xE3o com per\xEDodo anterior?" \u2192 An\xE1lise comparativa
4. "Preferir resumo oral ou visual?" \u2192 Formato de sa\xEDda
5. "Gerar recomenda\xE7\xF5es?" \u2192 A\xE7\xF5es pr\xE1ticas

## INTEGRA\xC7\xC3O COM FERRAMENTAS

### Sistema de Ferramentas
Voc\xEA tem acesso a 4 categorias principais de ferramentas:

1. **Opera\xE7\xF5es Financeiras Brasileiras**
   - pix.*: Transfer\xEAncias, QR codes, agendamentos PIX
   - boletos.*: Registro, pagamento, c\xE1lculos de boletos
   - contacts.*: Gest\xE3o de contatos e m\xE9todos de pagamento

2. **An\xE1lises e Insights**
   - insights.*: An\xE1lise de gastos, previs\xF5es, detec\xE7\xE3o de anomalias
   - multimodal.*: Relat\xF3rios visuais, gr\xE1ficos, exporta\xE7\xF5es

3. **Seguran\xE7a e Conformidade**
   - security.*: Detec\xE7\xE3o de fraude, valida\xE7\xF5es, configura\xE7\xF5es de seguran\xE7a
   - notifications.*: Alertas, lembretes, prefer\xEAncias de notifica\xE7\xE3o

4. **Interface Voz-First**
   - voice.*: Processamento de comandos, confirma\xE7\xE3o por voz, contexto
   - Todas as ferramentas otimizadas para resposta via TTS

### Orquestra\xE7\xE3o Inteligente
Combine m\xFAltiplas ferramentas para respostas completas:
- Consultar saldo \u2192 security.checkFraudRisk \u2192 pix.sendPixTransfer
- An\xE1lise de gastos \u2192 insights.getSpendingAnalysis \u2192 multimodal.generateVisualReport
- Alerta de seguran\xE7a \u2192 notifications.sendAlert \u2192 voice.confirmVoiceAction

## MANEJO DE ERROS E RECUPERA\xC7\xC3O

### Erros Comuns Brasileiros
- **Chave PIX Inv\xE1lida**: "Esta chave PIX n\xE3o existe. Verifique CPF, email ou telefone."
- **Boleto Duplicado**: "Este boleto j\xE1 est\xE1 pago. Verifique se n\xE3o h\xE1 duplicidade."
- **Fora do Hor\xE1rio**: "Transfer\xEAncias TED/DOC s\xF3 em hor\xE1rio banc\xE1rio. PIX funciona 24/7."
- **LGPD**: "Preciso de sua autoriza\xE7\xE3o para acessar estes dados financeiros."

### Recupera\xE7\xE3o Intelligente
- **Alternativas**: "PIX n\xE3o funciona? Tente TED para transfer\xEAncias banc\xE1rias."
- **Contexto**: "Baseado no nosso hist\xF3rico, voc\xEA costuma transferir para..."
- **Proativo**: "Detectei um padr\xE3o incomum. Quer que eu investigue?"

## ATUALIZA\xC7\xD5ES E MELHORIAS

### Sempre Melhorando
- **Feedback de Usu\xE1rio**: Adapte respostas baseado no hist\xF3rico de intera\xE7\xF5es
- **Contexto Financeiro**: Mantenha-se atualizado sobre taxas, regulamenta\xE7\xF5es, novos bancos
- **Cultura Financeira**: Evolua com mudan\xE7as no comportamento financeiro brasileiro
- **Tecnologia**: Integre novas tecnologias banc\xE1rias e fintechs brasileiras

### M\xE9tricas de Sucesso
- **Compreens\xE3o**: 95%+ de comandos voz entendidos corretamente
- **Satisfa\xE7\xE3o**: Respostas que realmente ajudam os usu\xE1rios brasileiros
- **Efici\xEAncia**: Opera\xE7\xF5es conclu\xEDdas com m\xEDnimo de etapas
- **Seguran\xE7a**: Zero breaches de dados ou fraudes n\xE3o detectadas

---

**Sua Miss\xE3o**: Ser o assistente financeiro mais completo, seguro e brasileiro que existe, transformando gest\xE3o financeira em uma experi\xEAncia natural, intuitiva e efetiva para todos os brasileiros.

**Data de Hoje**: ${new Date().toLocaleDateString("pt-BR")}
**Fuso Hor\xE1rio**: America/Sao_Paulo (${new Date().toLocaleTimeString("pt-BR")})
**Moeda**: BRL (Real Brasileiro)`;var vj=yj;var _j="vercel.ai.error",f7=Symbol.for(_j),bj,h7=class wj extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[bj]=!0,this.name=e,this.cause=n}static isInstance(e){return wj.hasMarker(e,_j)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};bj=f7;var Qt=h7,Sj="AI_APICallError",xj=`vercel.ai.error.${Sj}`,g7=Symbol.for(xj),Tj,Ge=class extends Qt{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:Sj,message:t,cause:a}),this[Tj]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return Qt.hasMarker(t,xj)}};Tj=g7;var Ej="AI_EmptyResponseBodyError",kj=`vercel.ai.error.${Ej}`,y7=Symbol.for(kj),Ij,Da=class extends Qt{static{s(this,"EmptyResponseBodyError")}constructor({message:t="Empty response body"}={}){super({name:Ej,message:t}),this[Ij]=!0}static isInstance(t){return Qt.hasMarker(t,kj)}};Ij=y7;function Pj(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(Pj,"getErrorMessage");var Aj="AI_InvalidArgumentError",Cj=`vercel.ai.error.${Aj}`,v7=Symbol.for(Cj),Oj,En=class extends Qt{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:Aj,message:t,cause:e}),this[Oj]=!0,this.argument=r}static isInstance(t){return Qt.hasMarker(t,Cj)}};Oj=v7;var $j="AI_InvalidPromptError",Rj=`vercel.ai.error.${$j}`,_7=Symbol.for(Rj),Nj,Dj=class extends Qt{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:$j,message:`Invalid prompt: ${e}`,cause:r}),this[Nj]=!0,this.prompt=t}static isInstance(t){return Qt.hasMarker(t,Rj)}};Nj=_7;var jj="AI_InvalidResponseDataError",Mj=`vercel.ai.error.${jj}`,b7=Symbol.for(Mj),zj,Nf=class extends Qt{static{s(this,"InvalidResponseDataError")}constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:jj,message:e}),this[zj]=!0,this.data=t}static isInstance(t){return Qt.hasMarker(t,Mj)}};zj=b7;var Uj="AI_JSONParseError",Lj=`vercel.ai.error.${Uj}`,w7=Symbol.for(Lj),qj,Ur=class extends Qt{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:Uj,message:`JSON parsing failed: Text: ${t}.
Error message: ${Pj(e)}`,cause:e}),this[qj]=!0,this.text=t}static isInstance(t){return Qt.hasMarker(t,Lj)}};qj=w7;var Fj="AI_LoadAPIKeyError",Bj=`vercel.ai.error.${Fj}`,S7=Symbol.for(Bj),Vj,Lr=class extends Qt{static{s(this,"LoadAPIKeyError")}constructor({message:t}){super({name:Fj,message:t}),this[Vj]=!0}static isInstance(t){return Qt.hasMarker(t,Bj)}};Vj=S7;var x7="AI_LoadSettingError",T7=`vercel.ai.error.${x7}`,E7=Symbol.for(T7),k7;k7=E7;var I7="AI_NoContentGeneratedError",P7=`vercel.ai.error.${I7}`,A7=Symbol.for(P7),C7;C7=A7;var Hj="AI_NoSuchModelError",Zj=`vercel.ai.error.${Hj}`,O7=Symbol.for(Zj),Jj,RT=class extends Qt{static{s(this,"NoSuchModelError")}constructor({errorName:t=Hj,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[Jj]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return Qt.hasMarker(t,Zj)}};Jj=O7;var Gj="AI_TooManyEmbeddingValuesForCallError",Kj=`vercel.ai.error.${Gj}`,$7=Symbol.for(Kj),Wj,Df=class extends Qt{static{s(this,"TooManyEmbeddingValuesForCallError")}constructor(t){super({name:Gj,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[Wj]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Qt.hasMarker(t,Kj)}};Wj=$7;var Qj="AI_TypeValidationError",Xj=`vercel.ai.error.${Qj}`,R7=Symbol.for(Xj),Yj,N7=class $T extends Qt{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:Qj,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Pj(r)}`,cause:r}),this[Yj]=!0,this.value=e}static isInstance(e){return Qt.hasMarker(e,Xj)}static wrap({value:e,cause:r}){return $T.isInstance(r)&&r.value===e?r:new $T({value:e,cause:r})}};Yj=R7;var Ft=N7,e2="AI_UnsupportedFunctionalityError",t2=`vercel.ai.error.${e2}`,D7=Symbol.for(t2),r2,_t=class extends Qt{static{s(this,"UnsupportedFunctionalityError")}constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:e2,message:e}),this[r2]=!0,this.functionality=t}static isInstance(t){return Qt.hasMarker(t,t2)}};r2=D7;function n2(t){let e,r,n,o,i,a,c;return l(),{feed:d,reset:l};function l(){e=!0,r="",n=0,o=-1,i=void 0,a=void 0,c=""}s(l,"reset");function d(m){r=r?r+m:m,e&&j7(r)&&(r=r.slice(o2.length)),e=!1;let h=r.length,y=0,g=!1;for(;y<h;){g&&(r[y]===`
`&&++y,g=!1);let f=-1,_=o,w;for(let b=n;f<0&&b<h;++b)w=r[b],w===":"&&_<0?_=b-y:w==="\r"?(g=!0,f=b-y):w===`
`&&(f=b-y);if(f<0){n=h-y,o=_;break}else n=0,o=-1;p(r,y,_,f),y+=f+1}y===h?r="":y>0&&(r=r.slice(y))}s(d,"feed");function p(m,h,y,g){if(g===0){c.length>0&&(t({type:"event",id:i,event:a||void 0,data:c.slice(0,-1)}),c="",i=void 0),a=void 0;return}let f=y<0,_=m.slice(h,h+(f?g:y)),w=0;f?w=g:m[h+y+1]===" "?w=y+2:w=y+1;let b=h+w,S=g-w,k=m.slice(b,b+S).toString();if(_==="data")c+=k?"".concat(k,`
`):`
`;else if(_==="event")a=k;else if(_==="id"&&!k.includes("\0"))i=k;else if(_==="retry"){let R=parseInt(k,10);Number.isNaN(R)||t({type:"reconnect-interval",value:R})}}s(p,"parseEventStreamLine")}s(n2,"createParser");var o2=[239,187,191];function j7(t){return o2.every((e,r)=>t.charCodeAt(r)===e)}s(j7,"hasBom");var Ri=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor(){let e;super({start(r){e=n2(n=>{n.type==="event"&&r.enqueue(n)})},transform(r){e.feed(r)}})}};var pt;(function(t){t.assertEqual=o=>{};function e(o){}s(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(c=>typeof o[o[c]]!="number"),a={};for(let c of i)a[c]=o[c];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(pt||(pt={}));var i2;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(i2||(i2={}));var ve=pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Jo=s(t=>{switch(typeof t){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return Number.isNaN(t)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(t)?ve.array:t===null?ve.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ve.promise:typeof Map<"u"&&t instanceof Map?ve.map:typeof Set<"u"&&t instanceof Set?ve.set:typeof Date<"u"&&t instanceof Date?ve.date:ve.object;default:return ve.unknown}},"getParsedType");var ie=pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var ln=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=s(i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let d=a.path[l];l===a.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(a))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r=Object.create(null),n=[];for(let o of this.issues)if(o.path.length>0){let i=o.path[0];r[i]=r[i]||[],r[i].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ln.create=t=>new ln(t);var M7=s((t,e)=>{let r;switch(t.code){case ie.invalid_type:t.received===ve.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,pt.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:r=`Unrecognized key(s) in object: ${pt.joinValues(t.keys,", ")}`;break;case ie.invalid_union:r="Invalid input";break;case ie.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${pt.joinValues(t.options)}`;break;case ie.invalid_enum_value:r=`Invalid enum value. Expected ${pt.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:r="Invalid function arguments";break;case ie.invalid_return_type:r="Invalid function return type";break;case ie.invalid_date:r="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:pt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ie.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ie.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ie.custom:r="Invalid input";break;case ie.invalid_intersection_types:r="Intersection results could not be merged";break;case ie.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:r="Number must be finite";break;default:r=e.defaultError,pt.assertNever(t)}return{message:r}},"errorMap"),Ni=M7;var z7=Ni;function El(){return z7}s(El,"getErrorMap");var jf=s(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let c="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)c=d(a,{data:e,defaultError:c}).message;return{...o,path:i,message:c}},"makeIssue");function he(t,e){let r=El(),n=jf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ni?void 0:Ni].filter(o=>!!o)});t.common.issues.push(n)}s(he,"addIssueToContext");var Cr=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return De;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return De;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},De=Object.freeze({status:"aborted"}),ja=s(t=>({status:"dirty",value:t}),"DIRTY"),qr=s(t=>({status:"valid",value:t}),"OK"),DT=s(t=>t.status==="aborted","isAborted"),jT=s(t=>t.status==="dirty","isDirty"),fs=s(t=>t.status==="valid","isValid"),kl=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Te||(Te={}));var kn=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},s2=s((t,e)=>{if(fs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ln(t.common.issues);return this._error=r,this._error}}},"handleResult");function Ke(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:s((a,c)=>{let{message:l}=t;return a.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??n??c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:l??r??c.defaultError}},"customMap"),description:o}}s(Ke,"processCreateParams");var rt=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Jo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Cr,ctx:{common:e.parent.common,data:e.data,parsedType:Jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(kl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)},o=this._parseSync({data:e,path:n.path,parent:n});return s2(n,o)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return fs(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>fs(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(kl(o)?o:Promise.resolve(o));return s2(n,i)}refine(e,r){let n=s(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,i)=>{let a=e(o),c=s(()=>i.addIssue({code:ie.custom,...n(o)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new Bn({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Fn.create(this,this._def)}nullable(){return Wo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ji.create(this)}promise(){return hs.create(this,this._def)}or(e){return qa.create([this,e],this._def)}and(e){return Fa.create(this,e,this._def)}transform(e){return new Bn({...Ke(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ja({...Ke(this._def),innerType:this,defaultValue:r,typeName:F.ZodDefault})}brand(){return new Mf({typeName:F.ZodBranded,type:this,...Ke(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ga({...Ke(this._def),innerType:this,catchValue:r,typeName:F.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return zf.create(this,e)}readonly(){return Ka.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},U7=/^c[^\s-]{8,}$/i,L7=/^[0-9a-z]+$/,q7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,F7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,B7=/^[a-z0-9_-]{21}$/i,V7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,H7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Z7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,J7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",MT,G7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,K7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,W7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Q7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,X7=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Y7=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,a2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eX=new RegExp(`^${a2}$`);function c2(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}s(c2,"timeRegexSource");function tX(t){return new RegExp(`^${c2(t)}$`)}s(tX,"timeRegex");function rX(t){let e=`${a2}T${c2(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(rX,"datetimeRegex");function nX(t,e){return!!((e==="v4"||!e)&&G7.test(t)||(e==="v6"||!e)&&W7.test(t))}s(nX,"isValidIP");function oX(t,e){if(!V7.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}s(oX,"isValidJWT");function iX(t,e){return!!((e==="v4"||!e)&&K7.test(t)||(e==="v6"||!e)&&Q7.test(t))}s(iX,"isValidCidr");var za=class t extends rt{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){let i=this._getOrReturnCtx(e);return he(i,{code:ie.invalid_type,expected:ve.string,received:i.parsedType}),De}let n=new Cr,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),he(o,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),he(o,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,c=e.data.length<i.value;(a||c)&&(o=this._getOrReturnCtx(e,o),a?he(o,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&he(o,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Z7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"email",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")MT||(MT=new RegExp(J7,"u")),MT.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"emoji",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")F7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"uuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")B7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"nanoid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")U7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"cuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")L7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"cuid2",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")q7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"ulid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),he(o,{validation:"url",code:ie.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"regex",code:ie.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?rX(i).test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?eX.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?tX(i).test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{code:ie.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?H7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"duration",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?nX(e.data,i.version)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"ip",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?oX(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"jwt",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?iX(e.data,i.version)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"cidr",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?X7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"base64",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Y7.test(e.data)||(o=this._getOrReturnCtx(e,o),he(o,{validation:"base64url",code:ie.invalid_string,message:i.message}),n.dirty()):pt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:ie.invalid_string,...Te.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Te.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Te.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Te.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Te.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Te.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Te.errToObj(r)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};za.create=t=>new za({checks:[],typeName:F.ZodString,coerce:t?.coerce??!1,...Ke(t)});function sX(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return i%a/10**o}s(sX,"floatSafeRemainder");var Il=class t extends rt{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){let i=this._getOrReturnCtx(e);return he(i,{code:ie.invalid_type,expected:ve.number,received:i.parsedType}),De}let n,o=new Cr;for(let i of this._def.checks)i.kind==="int"?pt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),he(n,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?sX(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_finite,message:i.message}),o.dirty()):pt.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Te.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Te.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Te.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Te.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Te.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Il.create=t=>new Il({checks:[],typeName:F.ZodNumber,coerce:t?.coerce||!1,...Ke(t)});var Pl=class t extends rt{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ve.bigint)return this._getInvalidInput(e);let n,o=new Cr;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):pt.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return he(r,{code:ie.invalid_type,expected:ve.bigint,received:r.parsedType}),De}gte(e,r){return this.setLimit("min",e,!0,Te.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Te.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Te.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Te.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Te.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Pl.create=t=>new Pl({checks:[],typeName:F.ZodBigInt,coerce:t?.coerce??!1,...Ke(t)});var Al=class extends rt{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.boolean,received:n.parsedType}),De}return qr(e.data)}};Al.create=t=>new Al({typeName:F.ZodBoolean,coerce:t?.coerce||!1,...Ke(t)});var Cl=class t extends rt{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){let i=this._getOrReturnCtx(e);return he(i,{code:ie.invalid_type,expected:ve.date,received:i.parsedType}),De}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return he(i,{code:ie.invalid_date}),De}let n=new Cr,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),he(o,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),he(o,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):pt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Cl.create=t=>new Cl({checks:[],coerce:t?.coerce||!1,typeName:F.ZodDate,...Ke(t)});var Ol=class extends rt{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==ve.symbol){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.symbol,received:n.parsedType}),De}return qr(e.data)}};Ol.create=t=>new Ol({typeName:F.ZodSymbol,...Ke(t)});var Ua=class extends rt{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==ve.undefined){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.undefined,received:n.parsedType}),De}return qr(e.data)}};Ua.create=t=>new Ua({typeName:F.ZodUndefined,...Ke(t)});var La=class extends rt{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==ve.null){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.null,received:n.parsedType}),De}return qr(e.data)}};La.create=t=>new La({typeName:F.ZodNull,...Ke(t)});var $l=class extends rt{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return qr(e.data)}};$l.create=t=>new $l({typeName:F.ZodAny,...Ke(t)});var Di=class extends rt{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return qr(e.data)}};Di.create=t=>new Di({typeName:F.ZodUnknown,...Ke(t)});var lo=class extends rt{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return he(r,{code:ie.invalid_type,expected:ve.never,received:r.parsedType}),De}};lo.create=t=>new lo({typeName:F.ZodNever,...Ke(t)});var Rl=class extends rt{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==ve.undefined){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.void,received:n.parsedType}),De}return qr(e.data)}};Rl.create=t=>new Rl({typeName:F.ZodVoid,...Ke(t)});var ji=class t extends rt{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==ve.array)return he(r,{code:ie.invalid_type,expected:ve.array,received:r.parsedType}),De;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,c=r.data.length<o.exactLength.value;(a||c)&&(he(r,{code:a?ie.too_big:ie.too_small,minimum:c?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(he(r,{code:ie.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(he(r,{code:ie.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>o.type._parseAsync(new kn(r,a,r.path,c)))).then(a=>Cr.mergeArray(n,a));let i=[...r.data].map((a,c)=>o.type._parseSync(new kn(r,a,r.path,c)));return Cr.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Te.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Te.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Te.toString(r)}})}nonempty(e){return this.min(1,e)}};ji.create=(t,e)=>new ji({type:t,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...Ke(e)});function Ma(t){if(t instanceof dn){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Fn.create(Ma(n))}return new dn({...t._def,shape:s(()=>e,"shape")})}else return t instanceof ji?new ji({...t._def,type:Ma(t.element)}):t instanceof Fn?Fn.create(Ma(t.unwrap())):t instanceof Wo?Wo.create(Ma(t.unwrap())):t instanceof Ko?Ko.create(t.items.map(e=>Ma(e))):t}s(Ma,"deepPartialify");var dn=class t extends rt{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=pt.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ve.object){let d=this._getOrReturnCtx(e);return he(d,{code:ie.invalid_type,expected:ve.object,received:d.parsedType}),De}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof lo&&this._def.unknownKeys==="strip"))for(let d in o.data)a.includes(d)||c.push(d);let l=[];for(let d of a){let p=i[d],m=o.data[d];l.push({key:{status:"valid",value:d},value:p._parse(new kn(o,m,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof lo){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of c)l.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")c.length>0&&(he(o,{code:ie.unrecognized_keys,keys:c}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of c){let m=o.data[p];l.push({key:{status:"valid",value:p},value:d._parse(new kn(o,m,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of l){let m=await p.key,h=await p.value;d.push({key:m,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>Cr.mergeObjectSync(n,d)):Cr.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{let o=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Te.errToObj(e).message??o}:{message:o}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:F.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of pt.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};for(let n of pt.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return Ma(this)}partial(e){let r={};for(let n of pt.objectKeys(this.shape)){let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}return new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};for(let n of pt.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Fn;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return u2(pt.objectKeys(this.shape))}};dn.create=(t,e)=>new dn({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:lo.create(),typeName:F.ZodObject,...Ke(e)});dn.strictCreate=(t,e)=>new dn({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:lo.create(),typeName:F.ZodObject,...Ke(e)});dn.lazycreate=(t,e)=>new dn({shape:t,unknownKeys:"strip",catchall:lo.create(),typeName:F.ZodObject,...Ke(e)});var qa=class extends rt{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let c of i)if(c.result.status==="valid")return c.result;for(let c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=i.map(c=>new ln(c.ctx.common.issues));return he(r,{code:ie.invalid_union,unionErrors:a}),De}if(s(o,"handleResults"),r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let l of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let c=a.map(l=>new ln(l));return he(r,{code:ie.invalid_union,unionErrors:c}),De}}get options(){return this._def.options}};qa.create=(t,e)=>new qa({options:t,typeName:F.ZodUnion,...Ke(e)});var Go=s(t=>t instanceof Ba?Go(t.schema):t instanceof Bn?Go(t.innerType()):t instanceof Va?[t.value]:t instanceof Ha?t.options:t instanceof Za?pt.objectValues(t.enum):t instanceof Ja?Go(t._def.innerType):t instanceof Ua?[void 0]:t instanceof La?[null]:t instanceof Fn?[void 0,...Go(t.unwrap())]:t instanceof Wo?[null,...Go(t.unwrap())]:t instanceof Mf||t instanceof Ka?Go(t.unwrap()):t instanceof Ga?Go(t._def.innerType):[],"getDiscriminator"),zT=class t extends rt{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.object)return he(r,{code:ie.invalid_type,expected:ve.object,received:r.parsedType}),De;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(he(r,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),De)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=Go(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(o.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);o.set(c,i)}}return new t({typeName:F.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...Ke(n)})}};function UT(t,e){let r=Jo(t),n=Jo(e);if(t===e)return{valid:!0,data:t};if(r===ve.object&&n===ve.object){let o=pt.objectKeys(e),i=pt.objectKeys(t).filter(c=>o.indexOf(c)!==-1),a={...t,...e};for(let c of i){let l=UT(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===ve.array&&n===ve.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[i],l=UT(a,c);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return r===ve.date&&n===ve.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(UT,"mergeValues");var Fa=class extends rt{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=s((i,a)=>{if(DT(i)||DT(a))return De;let c=UT(i.value,a.value);return c.valid?((jT(i)||jT(a))&&r.dirty(),{status:r.value,value:c.data}):(he(n,{code:ie.invalid_intersection_types}),De)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Fa.create=(t,e,r)=>new Fa({left:t,right:e,typeName:F.ZodIntersection,...Ke(r)});var Ko=class t extends rt{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.array)return he(n,{code:ie.invalid_type,expected:ve.array,received:n.parsedType}),De;if(n.data.length<this._def.items.length)return he(n,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),De;!this._def.rest&&n.data.length>this._def.items.length&&(he(n,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new kn(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Cr.mergeArray(r,a)):Cr.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ko.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ko({items:t,typeName:F.ZodTuple,rest:null,...Ke(e)})};var LT=class t extends rt{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return he(n,{code:ie.invalid_type,expected:ve.object,received:n.parsedType}),De;let o=[],i=this._def.keyType,a=this._def.valueType;for(let c in n.data)o.push({key:i._parse(new kn(n,c,n.path,c)),value:a._parse(new kn(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Cr.mergeObjectAsync(r,o):Cr.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof rt?new t({keyType:e,valueType:r,typeName:F.ZodRecord,...Ke(n)}):new t({keyType:za.create(),valueType:e,typeName:F.ZodRecord,...Ke(r)})}},Nl=class extends rt{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.map)return he(n,{code:ie.invalid_type,expected:ve.map,received:n.parsedType}),De;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([c,l],d)=>({key:o._parse(new kn(n,c,n.path,[d,"key"])),value:i._parse(new kn(n,l,n.path,[d,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let d=await l.key,p=await l.value;if(d.status==="aborted"||p.status==="aborted")return De;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let d=l.key,p=l.value;if(d.status==="aborted"||p.status==="aborted")return De;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}}}};Nl.create=(t,e,r)=>new Nl({valueType:e,keyType:t,typeName:F.ZodMap,...Ke(r)});var Dl=class t extends rt{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.set)return he(n,{code:ie.invalid_type,expected:ve.set,received:n.parsedType}),De;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(he(n,{code:ie.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(he(n,{code:ie.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(l){let d=new Set;for(let p of l){if(p.status==="aborted")return De;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,d)=>i._parse(new kn(n,l,n.path,d)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Te.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Te.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Dl.create=(t,e)=>new Dl({valueType:t,minSize:null,maxSize:null,typeName:F.ZodSet,...Ke(e)});var qT=class t extends rt{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.function)return he(r,{code:ie.invalid_type,expected:ve.function,received:r.parsedType}),De;function n(c,l){return jf({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,El(),Ni].filter(d=>!!d),issueData:{code:ie.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function o(c,l){return jf({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,El(),Ni].filter(d=>!!d),issueData:{code:ie.invalid_return_type,returnTypeError:l}})}s(o,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof hs){let c=this;return qr(async function(...l){let d=new ln([]),p=await c._def.args.parseAsync(l,i).catch(y=>{throw d.addIssue(n(l,y)),d}),m=await Reflect.apply(a,this,p);return await c._def.returns._def.type.parseAsync(m,i).catch(y=>{throw d.addIssue(o(m,y)),d})})}else{let c=this;return qr(function(...l){let d=c._def.args.safeParse(l,i);if(!d.success)throw new ln([n(l,d.error)]);let p=Reflect.apply(a,this,d.data),m=c._def.returns.safeParse(p,i);if(!m.success)throw new ln([o(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ko.create(e).rest(Di.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Ko.create([]).rest(Di.create()),returns:r||Di.create(),typeName:F.ZodFunction,...Ke(n)})}},Ba=class extends rt{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Ba.create=(t,e)=>new Ba({getter:t,typeName:F.ZodLazy,...Ke(e)});var Va=class extends rt{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return he(r,{received:r.data,code:ie.invalid_literal,expected:this._def.value}),De}return{status:"valid",value:e.data}}get value(){return this._def.value}};Va.create=(t,e)=>new Va({value:t,typeName:F.ZodLiteral,...Ke(e)});function u2(t,e){return new Ha({values:t,typeName:F.ZodEnum,...Ke(e)})}s(u2,"createZodEnum");var Ha=class t extends rt{static{s(this,"ZodEnum")}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return he(r,{expected:pt.joinValues(n),received:r.parsedType,code:ie.invalid_type}),De}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return he(r,{received:r.data,code:ie.invalid_enum_value,options:n}),De}return qr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Ha.create=u2;var Za=class extends rt{static{s(this,"ZodNativeEnum")}_parse(e){let r=pt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ve.string&&n.parsedType!==ve.number){let o=pt.objectValues(r);return he(n,{expected:pt.joinValues(o),received:n.parsedType,code:ie.invalid_type}),De}if(this._cache||(this._cache=new Set(pt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let o=pt.objectValues(r);return he(n,{received:n.data,code:ie.invalid_enum_value,options:o}),De}return qr(e.data)}get enum(){return this._def.values}};Za.create=(t,e)=>new Za({values:t,typeName:F.ZodNativeEnum,...Ke(e)});var hs=class extends rt{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.promise&&r.common.async===!1)return he(r,{code:ie.invalid_type,expected:ve.promise,received:r.parsedType}),De;let n=r.parsedType===ve.promise?r.data:Promise.resolve(r.data);return qr(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};hs.create=(t,e)=>new hs({type:t,typeName:F.ZodPromise,...Ke(e)});var Bn=class extends rt{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:s(a=>{he(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return De;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?De:l.status==="dirty"?ja(l.value):r.value==="dirty"?ja(l.value):l});{if(r.value==="aborted")return De;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?De:c.status==="dirty"?ja(c.value):r.value==="dirty"?ja(c.value):c}}if(o.type==="refinement"){let a=s(c=>{let l=o.refinement(c,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?De:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?De:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!fs(a))return De;let c=o.transform(a.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>fs(a)?Promise.resolve(o.transform(a.value,i)).then(c=>({status:r.value,value:c})):De);pt.assertNever(o)}};Bn.create=(t,e,r)=>new Bn({schema:t,typeName:F.ZodEffects,effect:e,...Ke(r)});Bn.createWithPreprocess=(t,e,r)=>new Bn({schema:e,effect:{type:"preprocess",transform:t},typeName:F.ZodEffects,...Ke(r)});var Fn=class extends rt{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===ve.undefined?qr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Fn.create=(t,e)=>new Fn({innerType:t,typeName:F.ZodOptional,...Ke(e)});var Wo=class extends rt{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===ve.null?qr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Wo.create=(t,e)=>new Wo({innerType:t,typeName:F.ZodNullable,...Ke(e)});var Ja=class extends rt{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ve.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ja.create=(t,e)=>new Ja({innerType:t,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ke(e)});var Ga=class extends rt{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return kl(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ln(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ln(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ga.create=(t,e)=>new Ga({innerType:t,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ke(e)});var jl=class extends rt{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==ve.nan){let n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ve.nan,received:n.parsedType}),De}return{status:"valid",value:e.data}}};jl.create=t=>new jl({typeName:F.ZodNaN,...Ke(t)});var bMe=Symbol("zod_brand"),Mf=class extends rt{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},zf=class t extends rt{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?De:i.status==="dirty"?(r.dirty(),ja(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?De:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:F.ZodPipeline})}},Ka=class extends rt{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(o=>(fs(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return kl(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};Ka.create=(t,e)=>new Ka({innerType:t,typeName:F.ZodReadonly,...Ke(e)});var wMe={object:dn.lazycreate},F;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(F||(F={}));var SMe=za.create,xMe=Il.create,TMe=jl.create,EMe=Pl.create,kMe=Al.create,IMe=Cl.create,PMe=Ol.create,AMe=Ua.create,CMe=La.create,OMe=$l.create,$Me=Di.create,RMe=lo.create,NMe=Rl.create,DMe=ji.create,jMe=dn.create,MMe=dn.strictCreate,zMe=qa.create,UMe=zT.create,LMe=Fa.create,qMe=Ko.create,FMe=LT.create,BMe=Nl.create,VMe=Dl.create,HMe=qT.create,ZMe=Ba.create,JMe=Va.create,GMe=Ha.create,KMe=Za.create,WMe=hs.create,QMe=Bn.create,XMe=Fn.create,YMe=Wo.create,eze=Bn.createWithPreprocess,tze=zf.create;function m2(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(m2,"combineHeaders");var f2=class{static{s(this,"DelayedPromise")}constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this._promise)}resolve(t){var e;this.status={type:"resolved",value:t},this._promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this._promise&&((e=this._reject)==null||e.call(this,t))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function Lf(t){return Object.fromEntries([...t.headers])}s(Lf,"extractResponseHeaders");var cX=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new En({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),qf=cX();function VT(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(VT,"isAbortError");var uX=["fetch failed","failed to fetch"];function lX({error:t,url:e,requestBodyValues:r}){if(VT(t))return t;if(t instanceof TypeError&&uX.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Ge({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(lX,"handleFetchError");function dX(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(dX,"getRuntimeEnvironmentUserAgent");function pX(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(pX,"normalizeHeaders");function ZT(t,...e){let r=new Headers(pX(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(ZT,"withUserAgentSuffix");var mX="3.0.18";function h2({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Lr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Lr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(h2,"loadApiKey");function g2({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}s(g2,"loadOptionalSetting");var fX=/"__proto__"\s*:/,hX=/"constructor"\s*:/;function l2(t){let e=JSON.parse(t);return e===null||typeof e!="object"||fX.test(t)===!1&&hX.test(t)===!1?e:gX(e)}s(l2,"_parse");function gX(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(gX,"filter");function y2(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return l2(t)}try{return l2(t)}finally{Error.stackTraceLimit=e}}s(y2,"secureJsonParse");var Uf=Symbol.for("vercel.ai.validator");function yX(t){return{[Uf]:!0,validate:t}}s(yX,"validator");function vX(t){return typeof t=="object"&&t!==null&&Uf in t&&t[Uf]===!0&&"validate"in t}s(vX,"isValidator");function _X(t){return vX(t)?t:typeof t=="function"?t():bX(t)}s(_X,"asValidator");function bX(t){return yX(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Ft({value:e,cause:r.issues})}})}s(bX,"standardSchemaValidator");async function po({value:t,schema:e}){let r=await JT({value:t,schema:e});if(!r.success)throw Ft.wrap({value:t,cause:r.error});return r.value}s(po,"validateTypes");async function JT({value:t,schema:e}){let r=_X(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Ft.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Ft.wrap({value:t,cause:n}),rawValue:t}}}s(JT,"safeValidateTypes");async function wX({text:t,schema:e}){try{let r=y2(t);return e==null?r:po({value:r,schema:e})}catch(r){throw Ur.isInstance(r)||Ft.isInstance(r)?r:new Ur({text:t,cause:r})}}s(wX,"parseJSON");async function v2({text:t,schema:e}){try{let r=y2(t);return e==null?{success:!0,value:r,rawValue:r}:await JT({value:r,schema:e})}catch(r){return{success:!1,error:Ur.isInstance(r)?r:new Ur({text:t,cause:r}),rawValue:void 0}}}s(v2,"safeParseJSON");function SX({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new Ri).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await v2({text:r,schema:e}))}}))}s(SX,"parseJsonEventStream");async function Wa({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await JT({value:e[t],schema:r});if(!n.success)throw new En({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(Wa,"parseProviderOptions");var xX=s(()=>globalThis.fetch,"getOriginalFetch2"),GT=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>TX({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi");var TX=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=xX()})=>{try{let c=await a(t,{method:"POST",headers:ZT(e,`ai-sdk/provider-utils/${mX}`,dX()),body:r.content,signal:i}),l=Lf(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw VT(p)||Ge.isInstance(p)?p:new Ge({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(VT(d)||Ge.isInstance(d))?d:new Ge({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw lX({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function _r({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(_r,"createProviderDefinedToolFactory");function Mi({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(Mi,"createProviderDefinedToolFactoryWithOutputSchema");async function KT(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}s(KT,"resolve");var _2=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Lf(n);if(a.trim()==="")return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await wX({text:a,schema:t});return{responseHeaders:c,value:new Ge({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),b2=s(t=>async({response:e})=>{let r=Lf(e);if(e.body==null)throw new Da({});return{responseHeaders:r,value:SX({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var w2=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await v2({text:o,schema:t}),a=Lf(e);if(!i.success)throw new Ge({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler");var EX=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),kX=Symbol("Let zodToJsonSchema decide on which parser to use"),d2={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},IX=s(t=>typeof t=="string"?{...d2,name:t}:{...d2,...t},"getDefaultOptions");function pn(){return{}}s(pn,"parseAnyDef");function PX(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==F.ZodAny&&(i.items=St(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(PX,"parseArrayDef");function AX(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(AX,"parseBigintDef");function CX(){return{type:"boolean"}}s(CX,"parseBooleanDef");function S2(t,e){return St(t.type._def,e)}s(S2,"parseBrandedDef");var OX=s((t,e)=>St(t.innerType._def,e),"parseCatchDef");function x2(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>x2(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return $X(t)}}s(x2,"parseDateDef");var $X=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function RX(t,e){return{...St(t.innerType._def,e),default:t.defaultValue()}}s(RX,"parseDefaultDef");function NX(t,e){return e.effectStrategy==="input"?St(t.schema._def,e):pn()}s(NX,"parseEffectsDef");function DX(t){return{type:"string",enum:Array.from(t.values)}}s(DX,"parseEnumDef");var jX=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function MX(t,e){let r=[St(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),St(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(jX(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(MX,"parseIntersectionDef");function zX(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(zX,"parseLiteralDef");var FT=void 0,Vn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(FT===void 0&&(FT=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),FT),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function T2(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":Hn(r,"email",n.message,e);break;case"format:idn-email":Hn(r,"idn-email",n.message,e);break;case"pattern:zod":Fr(r,Vn.email,n.message,e);break}break;case"url":Hn(r,"uri",n.message,e);break;case"uuid":Hn(r,"uuid",n.message,e);break;case"regex":Fr(r,n.regex,n.message,e);break;case"cuid":Fr(r,Vn.cuid,n.message,e);break;case"cuid2":Fr(r,Vn.cuid2,n.message,e);break;case"startsWith":Fr(r,RegExp(`^${BT(n.value,e)}`),n.message,e);break;case"endsWith":Fr(r,RegExp(`${BT(n.value,e)}$`),n.message,e);break;case"datetime":Hn(r,"date-time",n.message,e);break;case"date":Hn(r,"date",n.message,e);break;case"time":Hn(r,"time",n.message,e);break;case"duration":Hn(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Fr(r,RegExp(BT(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Hn(r,"ipv4",n.message,e),n.version!=="v4"&&Hn(r,"ipv6",n.message,e);break}case"base64url":Fr(r,Vn.base64url,n.message,e);break;case"jwt":Fr(r,Vn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Fr(r,Vn.ipv4Cidr,n.message,e),n.version!=="v4"&&Fr(r,Vn.ipv6Cidr,n.message,e);break}case"emoji":Fr(r,Vn.emoji(),n.message,e);break;case"ulid":{Fr(r,Vn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Hn(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Fr(r,Vn.base64,n.message,e);break}}break}case"nanoid":Fr(r,Vn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(T2,"parseStringDef");function BT(t,e){return e.patternStrategy==="escape"?LX(t):t}s(BT,"escapeLiteralCheckValue");var UX=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function LX(t){let e="";for(let r=0;r<t.length;r++)UX.has(t[r])||(e+="\\"),e+=t[r];return e}s(LX,"escapeNonAlphaNumeric");function Hn(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(Hn,"addFormat");function Fr(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:p2(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=p2(e,n)}s(Fr,"addPattern");function p2(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(p2,"stringifyRegExpWithFlags");function E2(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=St(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=T2(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===F.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===F.ZodBranded&&t.keyType._def.type._def.typeName===F.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=S2(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(E2,"parseRecordDef");function qX(t,e){if(e.mapStrategy==="record")return E2(t,e);let r=St(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||pn(),n=St(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||pn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(qX,"parseMapDef");function FX(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(FX,"parseNativeEnumDef");function BX(){return{not:pn()}}s(BX,"parseNeverDef");function VX(){return{type:"null"}}s(VX,"parseNullDef");var HT={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function HX(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in HT&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=HT[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return ZX(t,e)}s(HX,"parseUnionDef");var ZX=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>St(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function JX(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[HT[t.innerType._def.typeName],"null"]};let r=St(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(JX,"parseNullableDef");function GX(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(GX,"parseNumberDef");function KX(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=QX(c),d=St(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=WX(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(KX,"parseObjectDef");function WX(t,e){if(t.catchall._def.typeName!=="ZodNever")return St(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(WX,"decideAdditionalProperties");function QX(t){try{return t.isOptional()}catch{return!0}}s(QX,"safeIsOptional");var XX=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return St(t.innerType._def,e);let n=St(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:pn()},n]}:pn()},"parseOptionalDef"),YX=s((t,e)=>{if(e.pipeStrategy==="input")return St(t.in._def,e);if(e.pipeStrategy==="output")return St(t.out._def,e);let r=St(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=St(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function eY(t,e){return St(t.type._def,e)}s(eY,"parsePromiseDef");function tY(t,e){let n={type:"array",uniqueItems:!0,items:St(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(tY,"parseSetDef");function rY(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>St(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:St(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>St(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(rY,"parseTupleDef");function nY(){return{not:pn()}}s(nY,"parseUndefinedDef");function oY(){return pn()}s(oY,"parseUnknownDef");var iY=s((t,e)=>St(t.innerType._def,e),"parseReadonlyDef"),sY=s((t,e,r)=>{switch(e){case F.ZodString:return T2(t,r);case F.ZodNumber:return GX(t);case F.ZodObject:return KX(t,r);case F.ZodBigInt:return AX(t);case F.ZodBoolean:return CX();case F.ZodDate:return x2(t,r);case F.ZodUndefined:return nY();case F.ZodNull:return VX();case F.ZodArray:return PX(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return HX(t,r);case F.ZodIntersection:return MX(t,r);case F.ZodTuple:return rY(t,r);case F.ZodRecord:return E2(t,r);case F.ZodLiteral:return zX(t);case F.ZodEnum:return DX(t);case F.ZodNativeEnum:return FX(t);case F.ZodNullable:return JX(t,r);case F.ZodOptional:return XX(t,r);case F.ZodMap:return qX(t,r);case F.ZodSet:return tY(t,r);case F.ZodLazy:return()=>t.getter()._def;case F.ZodPromise:return eY(t,r);case F.ZodNaN:case F.ZodNever:return BX();case F.ZodEffects:return NX(t,r);case F.ZodAny:return pn();case F.ZodUnknown:return oY();case F.ZodDefault:return RX(t,r);case F.ZodBranded:return S2(t,r);case F.ZodReadonly:return iY(t,r);case F.ZodCatch:return OX(t,r);case F.ZodPipeline:return YX(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function St(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==kX)return l}if(o&&!r){let l=aY(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=sY(t,t.typeName,e),c=typeof a=="function"?St(a(),e):a;if(c&&cY(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(St,"parseDef");var aY=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:EX(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),pn()):e.$refStrategy==="seen"?pn():void 0}},"get$ref"),cY=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),uY=s(t=>{let e=IX(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),lY=s((t,e)=>{var r;let n=uY(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=St(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:pn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=St(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:pn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),dY=lY;function pY(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return k2(()=>dY(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(pY,"zod3Schema");function mY(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return k2(()=>Lo(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Fo(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(mY,"zod4Schema");function fY(t){return"_zod"in t}s(fY,"isZod4Schema");function nt(t,e){return fY(t)?mY(t,e):pY(t,e)}s(nt,"zodSchema");var hY=Symbol.for("vercel.ai.schema");function ot(t){let e;return()=>(e==null&&(e=t()),e)}s(ot,"lazySchema");function k2(t,{validate:e}={}){return{[hY]:!0,_type:void 0,[Uf]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(k2,"jsonSchema");var{btoa:gY,atob:Eze}=globalThis;function yY(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return gY(e)}s(yY,"convertUint8ArrayToBase64");function WT(t){return t instanceof Uint8Array?yY(t):t}s(WT,"convertToBase64");function I2(t){return t?.replace(/\/$/,"")}s(I2,"withoutTrailingSlash");var vY="2.0.50",_Y=ot(()=>nt(u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}))),P2=_2({errorSchema:_Y,errorToMessage:s(t=>t.error.message,"errorToMessage")}),bY=ot(()=>nt(u.object({type:u.literal("message"),id:u.string().nullish(),model:u.string().nullish(),content:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string(),citations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])).optional()}),u.object({type:u.literal("thinking"),thinking:u.string(),signature:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string(),input:u.unknown()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])),stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()}),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}))),wY=ot(()=>nt(u.discriminatedUnion("type",[u.object({type:u.literal("message_start"),message:u.object({id:u.string().nullish(),model:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()})})}),u.object({type:u.literal("content_block_start"),index:u.number(),content_block:u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("thinking"),thinking:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])}),u.object({type:u.literal("content_block_delta"),index:u.number(),delta:u.discriminatedUnion("type",[u.object({type:u.literal("input_json_delta"),partial_json:u.string()}),u.object({type:u.literal("text_delta"),text:u.string()}),u.object({type:u.literal("thinking_delta"),thinking:u.string()}),u.object({type:u.literal("signature_delta"),signature:u.string()}),u.object({type:u.literal("citations_delta"),citation:u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])})])}),u.object({type:u.literal("content_block_stop"),index:u.number()}),u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}),u.object({type:u.literal("message_delta"),delta:u.object({stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}),usage:u.looseObject({output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish()})}),u.object({type:u.literal("message_stop")}),u.object({type:u.literal("ping")})]))),SY=ot(()=>nt(u.object({signature:u.string().optional(),redactedData:u.string().optional()}))),A2=u.object({citations:u.object({enabled:u.boolean()}).optional(),title:u.string().optional(),context:u.string().optional()}),xY=u.object({sendReasoning:u.boolean().optional(),structuredOutputMode:u.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:u.object({type:u.union([u.literal("enabled"),u.literal("disabled")]),budgetTokens:u.number().optional()}).optional(),disableParallelToolUse:u.boolean().optional(),cacheControl:u.object({type:u.literal("ephemeral"),ttl:u.union([u.literal("5m"),u.literal("1h")]).optional()}).optional(),container:u.object({id:u.string().optional(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skillId:u.string(),version:u.string().optional()})).optional()}).optional(),effort:u.enum(["low","medium","high"]).optional()}),C2=4;function TY(t){var e;let r=t?.anthropic;return(e=r?.cacheControl)!=null?e:r?.cache_control}s(TY,"getCacheControl");var QT=class{static{s(this,"CacheControlValidator")}constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(t,e){let r=TY(t);if(r){if(!e.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${e.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>C2){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${C2} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},EY=ot(()=>nt(u.object({maxCharacters:u.number().optional()}))),kY=ot(()=>nt(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),IY=_r({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:kY}),PY=s((t={})=>IY(t),"textEditor_20250728"),AY=ot(()=>nt(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),userLocation:u.object({type:u.literal("approximate"),city:u.string().optional(),region:u.string().optional(),country:u.string().optional(),timezone:u.string().optional()}).optional()}))),R2=ot(()=>nt(u.array(u.object({url:u.string(),title:u.string(),pageAge:u.string().nullable(),encryptedContent:u.string(),type:u.literal("web_search_result")})))),CY=ot(()=>nt(u.object({query:u.string()}))),OY=Mi({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:CY,outputSchema:R2}),$Y=s((t={})=>OY(t),"webSearch_20250305"),RY=ot(()=>nt(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),citations:u.object({enabled:u.boolean()}).optional(),maxContentTokens:u.number().optional()}))),N2=ot(()=>nt(u.object({type:u.literal("web_fetch_result"),url:u.string(),content:u.object({type:u.literal("document"),title:u.string(),citations:u.object({enabled:u.boolean()}).optional(),source:u.union([u.object({type:u.literal("base64"),mediaType:u.literal("application/pdf"),data:u.string()}),u.object({type:u.literal("text"),mediaType:u.literal("text/plain"),data:u.string()})])}),retrievedAt:u.string().nullable()}))),NY=ot(()=>nt(u.object({url:u.string()}))),DY=Mi({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:NY,outputSchema:N2}),jY=s((t={})=>DY(t),"webFetch_20250910");async function MY({tools:t,toolChoice:e,disableParallelToolUse:r,cacheControlValidator:n}){t=t?.length?t:void 0;let o=[],i=new Set,a=n||new QT;if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};let c=[];for(let d of t)switch(d.type){case"function":{let p=a.getCacheControl(d.providerOptions,{type:"tool definition",canCache:!0});c.push({name:d.name,description:d.description,input_schema:d.inputSchema,cache_control:p});break}case"provider-defined":{switch(d.id){case"anthropic.code_execution_20250522":{i.add("code-execution-2025-05-22"),c.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{i.add("code-execution-2025-08-25"),c.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"computer",type:"computer_20250124",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"computer",type:"computer_20241022",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await po({value:d.args,schema:EY});c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{i.add("context-management-2025-06-27"),c.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{i.add("web-fetch-2025-09-10");let p=await po({value:d.args,schema:RY});c.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await po({value:d.args,schema:AY});c.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}default:{o.push({type:"unsupported-tool",tool:d});break}}break}default:{o.push({type:"unsupported-tool",tool:d});break}}if(e==null)return{tools:c,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:o,betas:i};let l=e.type;switch(l){case"auto":return{tools:c,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"required":return{tools:c,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};case"tool":return{tools:c,toolChoice:{type:"tool",name:e.toolName,disable_parallel_tool_use:r},toolWarnings:o,betas:i};default:{let d=l;throw new _t({functionality:`tool choice type: ${d}`})}}}s(MY,"prepareTools");var D2=ot(()=>nt(u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}))),zY=ot(()=>nt(u.object({code:u.string()}))),UY=Mi({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:zY,outputSchema:D2}),LY=s((t={})=>UY(t),"codeExecution_20250522"),j2=ot(()=>nt(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})]))),qY=ot(()=>nt(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution"),command:u.string()}),u.discriminatedUnion("command",[u.object({type:u.literal("text_editor_code_execution"),command:u.literal("view"),path:u.string()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("create"),path:u.string(),file_text:u.string().nullish()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()})])]))),FY=Mi({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:qY,outputSchema:j2}),BY=s((t={})=>FY(t),"codeExecution_20250825");function VY(t){if(typeof t=="string")return Buffer.from(t,"base64").toString("utf-8");if(t instanceof Uint8Array)return new TextDecoder().decode(t);throw t instanceof URL?new _t({functionality:"URL-based text documents are not supported for citations"}):new _t({functionality:`unsupported data type for text documents: ${typeof t}`})}s(VY,"convertToString");async function HY({prompt:t,sendReasoning:e,warnings:r,cacheControlValidator:n}){var o,i,a,c,l;let d=new Set,p=ZY(t),m=n||new QT,h,y=[];async function g(_){var w,b;let S=await Wa({provider:"anthropic",providerOptions:_,schema:A2});return(b=(w=S?.citations)==null?void 0:w.enabled)!=null?b:!1}s(g,"shouldEnableCitations");async function f(_){let w=await Wa({provider:"anthropic",providerOptions:_,schema:A2});return{title:w?.title,context:w?.context}}s(f,"getDocumentMetadata");for(let _=0;_<p.length;_++){let w=p[_],b=_===p.length-1,S=w.type;switch(S){case"system":{if(h!=null)throw new _t({functionality:"Multiple system messages that are separated by user/assistant messages"});h=w.messages.map(({content:k,providerOptions:R})=>({type:"text",text:k,cache_control:m.getCacheControl(R,{type:"system message",canCache:!0})}));break}case"user":{let k=[];for(let R of w.messages){let{role:O,content:C}=R;switch(O){case"user":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,D=(o=m.getCacheControl(P.providerOptions,{type:"user message part",canCache:!0}))!=null?o:N?m.getCacheControl(R.providerOptions,{type:"user message",canCache:!0}):void 0;switch(P.type){case"text":{k.push({type:"text",text:P.text,cache_control:D});break}case"file":{if(P.mediaType.startsWith("image/"))k.push({type:"image",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:P.mediaType==="image/*"?"image/jpeg":P.mediaType,data:WT(P.data)},cache_control:D});else if(P.mediaType==="application/pdf"){d.add("pdfs-2024-09-25");let W=await g(P.providerOptions),H=await f(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:"application/pdf",data:WT(P.data)},title:(i=H.title)!=null?i:P.filename,...H.context&&{context:H.context},...W&&{citations:{enabled:!0}},cache_control:D})}else if(P.mediaType==="text/plain"){let W=await g(P.providerOptions),H=await f(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"text",media_type:"text/plain",data:VY(P.data)},title:(a=H.title)!=null?a:P.filename,...H.context&&{context:H.context},...W&&{citations:{enabled:!0}},cache_control:D})}else throw new _t({functionality:`media type: ${P.mediaType}`});break}}}break}case"tool":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,D=(c=m.getCacheControl(P.providerOptions,{type:"tool result part",canCache:!0}))!=null?c:N?m.getCacheControl(R.providerOptions,{type:"tool result message",canCache:!0}):void 0,W=P.output,H;switch(W.type){case"content":H=W.value.map(q=>{switch(q.type){case"text":return{type:"text",text:q.text};case"media":{if(q.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:q.mediaType,data:q.data}};if(q.mediaType==="application/pdf")return d.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:q.mediaType,data:q.data}};throw new _t({functionality:`media type: ${q.mediaType}`})}}});break;case"text":case"error-text":H=W.value;break;case"json":case"error-json":default:H=JSON.stringify(W.value);break}k.push({type:"tool_result",tool_use_id:P.toolCallId,content:H,is_error:W.type==="error-text"||W.type==="error-json"?!0:void 0,cache_control:D})}break}default:{let $=O;throw new Error(`Unsupported role: ${$}`)}}}y.push({role:"user",content:k});break}case"assistant":{let k=[];for(let R=0;R<w.messages.length;R++){let O=w.messages[R],C=R===w.messages.length-1,{content:$}=O;for(let P=0;P<$.length;P++){let N=$[P],D=P===$.length-1,W=(l=m.getCacheControl(N.providerOptions,{type:"assistant message part",canCache:!0}))!=null?l:D?m.getCacheControl(O.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(N.type){case"text":{k.push({type:"text",text:b&&C&&D?N.text.trim():N.text,cache_control:W});break}case"reasoning":{if(e){let H=await Wa({provider:"anthropic",providerOptions:N.providerOptions,schema:SY});H!=null?H.signature!=null?(m.getCacheControl(N.providerOptions,{type:"thinking block",canCache:!1}),k.push({type:"thinking",thinking:N.text,signature:H.signature})):H.redactedData!=null?(m.getCacheControl(N.providerOptions,{type:"redacted thinking block",canCache:!1}),k.push({type:"redacted_thinking",data:H.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(N.providerExecuted){N.toolName==="code_execution"&&N.input!=null&&typeof N.input=="object"&&"type"in N.input&&typeof N.input.type=="string"&&(N.input.type==="bash_code_execution"||N.input.type==="text_editor_code_execution")?k.push({type:"server_tool_use",id:N.toolCallId,name:N.input.type,input:N.input,cache_control:W}):N.toolName==="code_execution"||N.toolName==="web_fetch"||N.toolName==="web_search"?k.push({type:"server_tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:W}):r.push({type:"other",message:`provider executed tool call for tool ${N.toolName} is not supported`});break}k.push({type:"tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:W});break}case"tool-result":{if(N.toolName==="code_execution"){let H=N.output;if(H.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${H.type} for tool ${N.toolName} is not supported`});break}if(H.value==null||typeof H.value!="object"||!("type"in H.value)||typeof H.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${N.toolName}`});break}if(H.value.type==="code_execution_result"){let q=await po({value:H.value,schema:D2});k.push({type:"code_execution_tool_result",tool_use_id:N.toolCallId,content:{type:q.type,stdout:q.stdout,stderr:q.stderr,return_code:q.return_code},cache_control:W})}else{let q=await po({value:H.value,schema:j2});k.push(q.type==="bash_code_execution_result"||q.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:W,content:q}:{type:"text_editor_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:W,content:q})}break}if(N.toolName==="web_fetch"){let H=N.output;if(H.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${H.type} for tool ${N.toolName} is not supported`});break}let q=await po({value:H.value,schema:N2});k.push({type:"web_fetch_tool_result",tool_use_id:N.toolCallId,content:{type:"web_fetch_result",url:q.url,retrieved_at:q.retrievedAt,content:{type:"document",title:q.content.title,citations:q.content.citations,source:{type:q.content.source.type,media_type:q.content.source.mediaType,data:q.content.source.data}}},cache_control:W});break}if(N.toolName==="web_search"){let H=N.output;if(H.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${H.type} for tool ${N.toolName} is not supported`});break}let q=await po({value:H.value,schema:R2});k.push({type:"web_search_tool_result",tool_use_id:N.toolCallId,content:q.map(X=>({url:X.url,title:X.title,page_age:X.pageAge,encrypted_content:X.encryptedContent,type:X.type})),cache_control:W});break}r.push({type:"other",message:`provider executed tool result for tool ${N.toolName} is not supported`});break}}}}y.push({role:"assistant",content:k});break}default:{let k=S;throw new Error(`content type: ${k}`)}}}return{prompt:{system:h,messages:y},betas:d}}s(HY,"convertToAnthropicMessagesPrompt");function ZY(t){let e=[],r;for(let n of t){let{role:o}=n;switch(o){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let i=o;throw new Error(`Unsupported role: ${i}`)}}}return e}s(ZY,"groupIntoBlocks");function O2({finishReason:t,isJsonResponseFromTool:e}){switch(t){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return e?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}s(O2,"mapAnthropicStopReason");function $2(t,e,r){var n;if(t.type!=="page_location"&&t.type!=="char_location")return;let o=e[t.document_index];if(o)return{type:"source",sourceType:"document",id:r(),mediaType:o.mediaType,title:(n=t.document_title)!=null?n:o.title,filename:o.filename,providerMetadata:{anthropic:t.type==="page_location"?{citedText:t.cited_text,startPageNumber:t.start_page_number,endPageNumber:t.end_page_number}:{citedText:t.cited_text,startCharIndex:t.start_char_index,endCharIndex:t.end_char_index}}}}s($2,"createCitationSource");var JY=class{static{s(this,"AnthropicMessagesLanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:qf}supportsUrl(t){return t.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({userSuppliedBetas:t,prompt:e,maxOutputTokens:r,temperature:n,topP:o,topK:i,frequencyPenalty:a,presencePenalty:c,stopSequences:l,responseFormat:d,seed:p,tools:m,toolChoice:h,providerOptions:y}){var g,f,_,w,b;let S=[];a!=null&&S.push({type:"unsupported-setting",setting:"frequencyPenalty"}),c!=null&&S.push({type:"unsupported-setting",setting:"presencePenalty"}),p!=null&&S.push({type:"unsupported-setting",setting:"seed"}),n!=null&&n>1?(S.push({type:"unsupported-setting",setting:"temperature",details:`${n} exceeds anthropic maximum of 1.0. clamped to 1.0`}),n=1):n!=null&&n<0&&(S.push({type:"unsupported-setting",setting:"temperature",details:`${n} is below anthropic minimum of 0. clamped to 0`}),n=0),d?.type==="json"&&(d.schema==null?S.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):m!=null&&S.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let k=await Wa({provider:"anthropic",providerOptions:y,schema:xY}),{maxOutputTokens:R,supportsStructuredOutput:O,isKnownModel:C}=GY(this.modelId),$=(g=k?.structuredOutputMode)!=null?g:"jsonTool",P=$==="outputFormat"||$==="auto"&&O,N=d?.type==="json"&&d.schema!=null&&!P?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema}:void 0,D=new QT,{prompt:W,betas:H}=await HY({prompt:e,sendReasoning:(f=k?.sendReasoning)!=null?f:!0,warnings:S,cacheControlValidator:D}),q=((_=k?.thinking)==null?void 0:_.type)==="enabled",X=(w=k?.thinking)==null?void 0:w.budgetTokens,te=r??R,oe={model:this.modelId,max_tokens:te,temperature:n,top_k:i,top_p:o,stop_sequences:l,...q&&{thinking:{type:"enabled",budget_tokens:X}},...k?.effort&&{output_config:{effort:k.effort}},...P&&d?.type==="json"&&d.schema!=null&&{output_format:{type:"json_schema",schema:d.schema}},...k?.container&&{container:{id:k.container.id,skills:(b=k.container.skills)==null?void 0:b.map(Ae=>({type:Ae.type,skill_id:Ae.skillId,version:Ae.version}))}},system:W.system,messages:W.messages};if(q){if(X==null)throw new _t({functionality:"thinking requires a budget"});oe.temperature!=null&&(oe.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(oe.top_k=void 0,S.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),o!=null&&(oe.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),oe.max_tokens=te+X}C&&oe.max_tokens>R&&(r!=null&&S.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${oe.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${R} max output tokens. The max output tokens have been limited to ${R}.`}),oe.max_tokens=R),k?.container&&k.container.skills&&k.container.skills.length>0&&(H.add("code-execution-2025-08-25"),H.add("skills-2025-10-02"),H.add("files-api-2025-04-14"),m?.some(Ae=>Ae.type==="provider-defined"&&Ae.id==="anthropic.code_execution_20250825")||S.push({type:"other",message:"code execution tool is required when using skills"})),k?.effort&&H.add("effort-2025-11-24"),P&&H.add("structured-outputs-2025-11-13");let{tools:ye,toolChoice:Se,toolWarnings:We,betas:Ve}=await MY(N!=null?{tools:[N],toolChoice:{type:"tool",toolName:N.name},disableParallelToolUse:!0,cacheControlValidator:D}:{tools:m??[],toolChoice:h,disableParallelToolUse:k?.disableParallelToolUse,cacheControlValidator:D}),J=D.getWarnings();return{args:{...oe,tools:ye,tool_choice:Se},warnings:[...S,...We,...J],betas:new Set([...H,...Ve,...t]),usesJsonResponseTool:N!=null}}async getHeaders({betas:t,headers:e}){return m2(await KT(this.config.headers),e,t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{})}async getBetasFromHeaders(t){var e,r;let o=(e=(await KT(this.config.headers))["anthropic-beta"])!=null?e:"",i=(r=t?.["anthropic-beta"])!=null?r:"";return new Set([...o.toLowerCase().split(","),...i.toLowerCase().split(",")].map(a=>a.trim()).filter(a=>a!==""))}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}extractCitationDocuments(t){let e=s(r=>{var n,o;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(n=r.providerOptions)==null?void 0:n.anthropic,a=i?.citations;return(o=a?.enabled)!=null?o:!1},"isCitationPart");return t.filter(r=>r.role==="user").flatMap(r=>r.content).filter(e).map(r=>{var n;let o=r;return{title:(n=o.filename)!=null?n:"Untitled Document",filename:o.filename,mediaType:o.mediaType}})}async doGenerate(t){var e,r,n,o,i,a,c,l;let{args:d,warnings:p,betas:m,usesJsonResponseTool:h}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),y=this.extractCitationDocuments(t.prompt),{responseHeaders:g,value:f,rawValue:_}=await GT({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:m,headers:t.headers}),body:this.transformRequestBody(d),failedResponseHandler:P2,successfulResponseHandler:w2(bY),abortSignal:t.abortSignal,fetch:this.config.fetch}),w=[];for(let b of f.content)switch(b.type){case"text":{if(!h&&(w.push({type:"text",text:b.text}),b.citations))for(let S of b.citations){let k=$2(S,y,this.generateId);k&&w.push(k)}break}case"thinking":{w.push({type:"reasoning",text:b.thinking,providerMetadata:{anthropic:{signature:b.signature}}});break}case"redacted_thinking":{w.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:b.data}}});break}case"tool_use":{w.push(h?{type:"text",text:JSON.stringify(b.input)}:{type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input)});break}case"server_tool_use":{b.name==="text_editor_code_execution"||b.name==="bash_code_execution"?w.push({type:"tool-call",toolCallId:b.id,toolName:"code_execution",input:JSON.stringify({type:b.name,...b.input}),providerExecuted:!0}):(b.name==="web_search"||b.name==="code_execution"||b.name==="web_fetch")&&w.push({type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input),providerExecuted:!0});break}case"web_fetch_tool_result":{b.content.type==="web_fetch_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:b.content.url,retrievedAt:b.content.retrieved_at,content:{type:b.content.content.type,title:b.content.content.title,citations:b.content.content.citations,source:{type:b.content.content.source.type,mediaType:b.content.content.source.media_type,data:b.content.content.source.data}}},providerExecuted:!0}):b.content.type==="web_fetch_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(b.content)){w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",result:b.content.map(S=>{var k;return{url:S.url,title:S.title,pageAge:(k=S.page_age)!=null?k:null,encryptedContent:S.encrypted_content,type:S.type}}),providerExecuted:!0});for(let S of b.content)w.push({type:"source",sourceType:"url",id:this.generateId(),url:S.url,title:S.title,providerMetadata:{anthropic:{pageAge:(e=S.page_age)!=null?e:null}}})}else w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{b.content.type==="code_execution_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:{type:b.content.type,stdout:b.content.stdout,stderr:b.content.stderr,return_code:b.content.return_code},providerExecuted:!0}):b.content.type==="code_execution_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:b.content,providerExecuted:!0});break}}return{content:w,finishReason:O2({finishReason:f.stop_reason,isJsonResponseFromTool:h}),usage:{inputTokens:f.usage.input_tokens,outputTokens:f.usage.output_tokens,totalTokens:f.usage.input_tokens+f.usage.output_tokens,cachedInputTokens:(r=f.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:d},response:{id:(n=f.id)!=null?n:void 0,modelId:(o=f.model)!=null?o:void 0,headers:g,body:_},warnings:p,providerMetadata:{anthropic:{usage:f.usage,cacheCreationInputTokens:(i=f.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(a=f.stop_sequence)!=null?a:null,container:f.container?{expiresAt:f.container.expires_at,id:f.container.id,skills:(l=(c=f.container.skills)==null?void 0:c.map(b=>({type:b.type,skillId:b.skill_id,version:b.version})))!=null?l:null}:null}}}}async doStream(t){let{args:e,warnings:r,betas:n,usesJsonResponseTool:o}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),i=this.extractCitationDocuments(t.prompt),a={...e,stream:!0},c=this.buildRequestUrl(!0),{responseHeaders:l,value:d}=await GT({url:c,headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:P2,successfulResponseHandler:b2(wY),abortSignal:t.abortSignal,fetch:this.config.fetch}),p="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},h={},y,g=null,f=null,_=null,w,b=this.generateId,S=!0,k,R=new f2,O=d.pipeThrough(new TransformStream({start(N){N.enqueue({type:"stream-start",warnings:r})},async flush(){R.isPending()&&R.resolve({stream:k,request:{body:a},response:{headers:l}})},transform(N,D){var W,H,q,X,te,oe,ye,Se,We,Ve;if(t.includeRawChunks&&D.enqueue({type:"raw",rawValue:N.rawValue}),!N.success){D.enqueue({type:"error",error:N.error});return}if(S){if(N.value.type==="error"){R.reject(new Ge({message:N.value.error.message,url:c,requestBodyValues:a,statusCode:N.value.error.type==="overloaded_error"?529:500,responseHeaders:l,responseBody:JSON.stringify(N.value.error),isRetryable:N.value.error.type==="overloaded_error"})),D.terminate();return}S=!1,R.resolve({stream:k,request:{body:a},response:{headers:l}})}let J=N.value;switch(J.type){case"ping":return;case"content_block_start":{let Ae=J.content_block.type;switch(w=Ae,Ae){case"text":{h[J.index]={type:"text"},D.enqueue({type:"text-start",id:String(J.index)});return}case"thinking":{h[J.index]={type:"reasoning"},D.enqueue({type:"reasoning-start",id:String(J.index)});return}case"redacted_thinking":{h[J.index]={type:"reasoning"},D.enqueue({type:"reasoning-start",id:String(J.index),providerMetadata:{anthropic:{redactedData:J.content_block.data}}});return}case"tool_use":{h[J.index]=o?{type:"text"}:{type:"tool-call",toolCallId:J.content_block.id,toolName:J.content_block.name,input:"",firstDelta:!0},D.enqueue(o?{type:"text-start",id:String(J.index)}:{type:"tool-input-start",id:J.content_block.id,toolName:J.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(J.content_block.name)){h[J.index]={type:"tool-call",toolCallId:J.content_block.id,toolName:J.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let fe=J.content_block.name==="text_editor_code_execution"||J.content_block.name==="bash_code_execution"?"code_execution":J.content_block.name;D.enqueue({type:"tool-input-start",id:J.content_block.id,toolName:fe,providerExecuted:!0})}return}case"web_fetch_tool_result":{let fe=J.content_block;fe.content.type==="web_fetch_result"?D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:fe.content.url,retrievedAt:fe.content.retrieved_at,content:{type:fe.content.content.type,title:fe.content.content.title,citations:fe.content.content.citations,source:{type:fe.content.content.source.type,mediaType:fe.content.content.source.media_type,data:fe.content.content.source.data}}},providerExecuted:!0}):fe.content.type==="web_fetch_tool_result_error"&&D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:fe.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let fe=J.content_block;if(Array.isArray(fe.content)){D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"web_search",result:fe.content.map(U=>{var Ze;return{url:U.url,title:U.title,pageAge:(Ze=U.page_age)!=null?Ze:null,encryptedContent:U.encrypted_content,type:U.type}}),providerExecuted:!0});for(let U of fe.content)D.enqueue({type:"source",sourceType:"url",id:b(),url:U.url,title:U.title,providerMetadata:{anthropic:{pageAge:(W=U.page_age)!=null?W:null}}})}else D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:fe.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let fe=J.content_block;fe.content.type==="code_execution_result"?D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"code_execution",result:{type:fe.content.type,stdout:fe.content.stdout,stderr:fe.content.stderr,return_code:fe.content.return_code},providerExecuted:!0}):fe.content.type==="code_execution_tool_result_error"&&D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:fe.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let fe=J.content_block;D.enqueue({type:"tool-result",toolCallId:fe.tool_use_id,toolName:"code_execution",result:fe.content,providerExecuted:!0});return}default:{let fe=Ae;throw new Error(`Unsupported content block type: ${fe}`)}}}case"content_block_stop":{if(h[J.index]!=null){let Ae=h[J.index];switch(Ae.type){case"text":{D.enqueue({type:"text-end",id:String(J.index)});break}case"reasoning":{D.enqueue({type:"reasoning-end",id:String(J.index)});break}case"tool-call":if(!o){D.enqueue({type:"tool-input-end",id:Ae.toolCallId});let fe=Ae.toolName==="text_editor_code_execution"||Ae.toolName==="bash_code_execution"?"code_execution":Ae.toolName;D.enqueue({type:"tool-call",toolCallId:Ae.toolCallId,toolName:fe,input:Ae.input,providerExecuted:Ae.providerExecuted})}break}delete h[J.index]}w=void 0;return}case"content_block_delta":{let Ae=J.delta.type;switch(Ae){case"text_delta":{if(o)return;D.enqueue({type:"text-delta",id:String(J.index),delta:J.delta.text});return}case"thinking_delta":{D.enqueue({type:"reasoning-delta",id:String(J.index),delta:J.delta.thinking});return}case"signature_delta":{w==="thinking"&&D.enqueue({type:"reasoning-delta",id:String(J.index),delta:"",providerMetadata:{anthropic:{signature:J.delta.signature}}});return}case"input_json_delta":{let fe=h[J.index],U=J.delta.partial_json;if(U.length===0)return;if(o){if(fe?.type!=="text")return;D.enqueue({type:"text-delta",id:String(J.index),delta:U})}else{if(fe?.type!=="tool-call")return;fe.firstDelta&&(fe.toolName==="bash_code_execution"||fe.toolName==="text_editor_code_execution")&&(U=`{"type": "${fe.toolName}",${U.substring(1)}`),D.enqueue({type:"tool-input-delta",id:fe.toolCallId,delta:U}),fe.input+=U,fe.firstDelta=!1}return}case"citations_delta":{let fe=J.delta.citation,U=$2(fe,i,b);U&&D.enqueue(U);return}default:{let fe=Ae;throw new Error(`Unsupported delta type: ${fe}`)}}}case"message_start":{m.inputTokens=J.message.usage.input_tokens,m.cachedInputTokens=(H=J.message.usage.cache_read_input_tokens)!=null?H:void 0,y={...J.message.usage},g=(q=J.message.usage.cache_creation_input_tokens)!=null?q:null,D.enqueue({type:"response-metadata",id:(X=J.message.id)!=null?X:void 0,modelId:(te=J.message.model)!=null?te:void 0});return}case"message_delta":{m.outputTokens=J.usage.output_tokens,m.totalTokens=((oe=m.inputTokens)!=null?oe:0)+((ye=J.usage.output_tokens)!=null?ye:0),p=O2({finishReason:J.delta.stop_reason,isJsonResponseFromTool:o}),f=(Se=J.delta.stop_sequence)!=null?Se:null,_=J.delta.container!=null?{expiresAt:J.delta.container.expires_at,id:J.delta.container.id,skills:(Ve=(We=J.delta.container.skills)==null?void 0:We.map(Ae=>({type:Ae.type,skillId:Ae.skill_id,version:Ae.version})))!=null?Ve:null}:null,y={...y,...J.usage};return}case"message_stop":{D.enqueue({type:"finish",finishReason:p,usage:m,providerMetadata:{anthropic:{usage:y??null,cacheCreationInputTokens:g,stopSequence:f,container:_}}});return}case"error":{D.enqueue({type:"error",error:J.error});return}default:{let Ae=J;throw new Error(`Unsupported chunk type: ${Ae}`)}}}})),[C,$]=O.tee();k=$;let P=C.getReader();return(async()=>{try{let{done:N}=await P.read();N||await P.cancel()}catch{try{await P.cancel()}catch{}}finally{P.releaseLock()}})(),R.promise}};function GY(t){return t.includes("claude-sonnet-4-5")||t.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-sonnet-4-")||t.includes("claude-3-7-sonnet")||t.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}s(GY,"getModelCapabilities");var KY=ot(()=>nt(u.object({command:u.string(),restart:u.boolean().optional()}))),WY=_r({id:"anthropic.bash_20241022",name:"bash",inputSchema:KY}),QY=ot(()=>nt(u.object({command:u.string(),restart:u.boolean().optional()}))),XY=_r({id:"anthropic.bash_20250124",name:"bash",inputSchema:QY}),YY=ot(()=>nt(u.object({action:u.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:u.array(u.number().int()).optional(),text:u.string().optional()}))),eee=_r({id:"anthropic.computer_20241022",name:"computer",inputSchema:YY}),tee=ot(()=>nt(u.object({action:u.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),duration:u.number().optional(),scroll_amount:u.number().optional(),scroll_direction:u.enum(["up","down","left","right"]).optional(),start_coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),text:u.string().optional()}))),ree=_r({id:"anthropic.computer_20250124",name:"computer",inputSchema:tee}),nee=ot(()=>nt(u.discriminatedUnion("command",[u.object({command:u.literal("view"),path:u.string(),view_range:u.tuple([u.number(),u.number()]).optional()}),u.object({command:u.literal("create"),path:u.string(),file_text:u.string()}),u.object({command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()}),u.object({command:u.literal("insert"),path:u.string(),insert_line:u.number(),insert_text:u.string()}),u.object({command:u.literal("delete"),path:u.string()}),u.object({command:u.literal("rename"),old_path:u.string(),new_path:u.string()})]))),oee=_r({id:"anthropic.memory_20250818",name:"memory",inputSchema:nee}),iee=ot(()=>nt(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),see=_r({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:iee}),aee=ot(()=>nt(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),cee=_r({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:aee}),uee=ot(()=>nt(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),lee=_r({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:uee}),dee={bash_20241022:WY,bash_20250124:XY,codeExecution_20250522:LY,codeExecution_20250825:BY,computer_20241022:eee,computer_20250124:ree,memory_20250818:oee,textEditor_20241022:see,textEditor_20250124:cee,textEditor_20250429:lee,textEditor_20250728:PY,webFetch_20250910:jY,webSearch_20250305:$Y};function pee(t={}){var e,r;let n=(e=I2(g2({settingValue:t.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?e:"https://api.anthropic.com/v1",o=(r=t.name)!=null?r:"anthropic.messages",i=s(()=>ZT({"anthropic-version":"2023-06-01","x-api-key":h2({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers},`ai-sdk/anthropic/${vY}`),"getHeaders"),a=s(l=>{var d;return new JY(l,{provider:o,baseURL:n,headers:i,fetch:t.fetch,generateId:(d=t.generateId)!=null?d:qf,supportedUrls:s(()=>({"image/*":[/^https?:\/\/.*$/]}),"supportedUrls")})},"createChatModel"),c=s(function(l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return a(l)},"provider");return c.languageModel=a,c.chat=a,c.messages=a,c.textEmbeddingModel=l=>{throw new RT({modelId:l,modelType:"textEmbeddingModel"})},c.imageModel=l=>{throw new RT({modelId:l,modelType:"imageModel"})},c.tools=dee,c}s(pee,"createAnthropic");var XT=pee();function gs(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(gs,"combineHeaders");function Bf(t){return Object.fromEntries([...t.headers])}s(Bf,"extractResponseHeaders");var mee=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new En({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),Vf=mee();function tE(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(tE,"isAbortError");var fee=["fetch failed","failed to fetch"];function hee({error:t,url:e,requestBodyValues:r}){if(tE(t))return t;if(t instanceof TypeError&&fee.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Ge({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(hee,"handleFetchError");function gee(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(gee,"getRuntimeEnvironmentUserAgent");function yee(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(yee,"normalizeHeaders");function nE(t,...e){let r=new Headers(yee(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(nE,"withUserAgentSuffix");var vee="3.0.18";function L2({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Lr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Lr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(L2,"loadApiKey");var _ee=/"__proto__"\s*:/,bee=/"constructor"\s*:/;function M2(t){let e=JSON.parse(t);return e===null||typeof e!="object"||_ee.test(t)===!1&&bee.test(t)===!1?e:wee(e)}s(M2,"_parse");function wee(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(wee,"filter");function q2(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return M2(t)}try{return M2(t)}finally{Error.stackTraceLimit=e}}s(q2,"secureJsonParse");var Ff=Symbol.for("vercel.ai.validator");function See(t){return{[Ff]:!0,validate:t}}s(See,"validator");function xee(t){return typeof t=="object"&&t!==null&&Ff in t&&t[Ff]===!0&&"validate"in t}s(xee,"isValidator");function Tee(t){return xee(t)?t:typeof t=="function"?t():Eee(t)}s(Tee,"asValidator");function Eee(t){return See(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Ft({value:e,cause:r.issues})}})}s(Eee,"standardSchemaValidator");async function kee({value:t,schema:e}){let r=await oE({value:t,schema:e});if(!r.success)throw Ft.wrap({value:t,cause:r.error});return r.value}s(kee,"validateTypes");async function oE({value:t,schema:e}){let r=Tee(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Ft.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Ft.wrap({value:t,cause:n}),rawValue:t}}}s(oE,"safeValidateTypes");async function Iee({text:t,schema:e}){try{let r=q2(t);return e==null?r:kee({value:r,schema:e})}catch(r){throw Ur.isInstance(r)||Ft.isInstance(r)?r:new Ur({text:t,cause:r})}}s(Iee,"parseJSON");async function F2({text:t,schema:e}){try{let r=q2(t);return e==null?{success:!0,value:r,rawValue:r}:await oE({value:r,schema:e})}catch(r){return{success:!1,error:Ur.isInstance(r)?r:new Ur({text:t,cause:r}),rawValue:void 0}}}s(F2,"safeParseJSON");function Pee({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new Ri).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await F2({text:r,schema:e}))}}))}s(Pee,"parseJsonEventStream");async function Qa({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await oE({value:e[t],schema:r});if(!n.success)throw new En({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(Qa,"parseProviderOptions");var Aee=s(()=>globalThis.fetch,"getOriginalFetch2"),zi=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Cee({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi");var Cee=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=Aee()})=>{try{let c=await a(t,{method:"POST",headers:nE(e,`ai-sdk/provider-utils/${vee}`,gee()),body:r.content,signal:i}),l=Bf(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw tE(p)||Ge.isInstance(p)?p:new Ge({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(tE(d)||Ge.isInstance(d))?d:new Ge({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw hee({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function Ui({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(Ui,"createProviderDefinedToolFactory");function B2({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(B2,"createProviderDefinedToolFactoryWithOutputSchema");async function ys(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}s(ys,"resolve");var V2=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Bf(n);if(a.trim()==="")return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await Iee({text:a,schema:t});return{responseHeaders:c,value:new Ge({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),H2=s(t=>async({response:e})=>{let r=Bf(e);if(e.body==null)throw new Da({});return{responseHeaders:r,value:Pee({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var vs=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await F2({text:o,schema:t}),a=Bf(e);if(!i.success)throw new Ge({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler");var Oee=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),$ee=Symbol("Let zodToJsonSchema decide on which parser to use"),z2={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Ree=s(t=>typeof t=="string"?{...z2,name:t}:{...z2,...t},"getDefaultOptions");function mn(){return{}}s(mn,"parseAnyDef");function Nee(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==F.ZodAny&&(i.items=xt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(Nee,"parseArrayDef");function Dee(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(Dee,"parseBigintDef");function jee(){return{type:"boolean"}}s(jee,"parseBooleanDef");function Z2(t,e){return xt(t.type._def,e)}s(Z2,"parseBrandedDef");var Mee=s((t,e)=>xt(t.innerType._def,e),"parseCatchDef");function J2(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>J2(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return zee(t)}}s(J2,"parseDateDef");var zee=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function Uee(t,e){return{...xt(t.innerType._def,e),default:t.defaultValue()}}s(Uee,"parseDefaultDef");function Lee(t,e){return e.effectStrategy==="input"?xt(t.schema._def,e):mn()}s(Lee,"parseEffectsDef");function qee(t){return{type:"string",enum:Array.from(t.values)}}s(qee,"parseEnumDef");var Fee=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function Bee(t,e){let r=[xt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),xt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Fee(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(Bee,"parseIntersectionDef");function Vee(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(Vee,"parseLiteralDef");var YT=void 0,Zn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(YT===void 0&&(YT=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),YT),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function G2(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":Jn(r,"email",n.message,e);break;case"format:idn-email":Jn(r,"idn-email",n.message,e);break;case"pattern:zod":Br(r,Zn.email,n.message,e);break}break;case"url":Jn(r,"uri",n.message,e);break;case"uuid":Jn(r,"uuid",n.message,e);break;case"regex":Br(r,n.regex,n.message,e);break;case"cuid":Br(r,Zn.cuid,n.message,e);break;case"cuid2":Br(r,Zn.cuid2,n.message,e);break;case"startsWith":Br(r,RegExp(`^${eE(n.value,e)}`),n.message,e);break;case"endsWith":Br(r,RegExp(`${eE(n.value,e)}$`),n.message,e);break;case"datetime":Jn(r,"date-time",n.message,e);break;case"date":Jn(r,"date",n.message,e);break;case"time":Jn(r,"time",n.message,e);break;case"duration":Jn(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Br(r,RegExp(eE(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Jn(r,"ipv4",n.message,e),n.version!=="v4"&&Jn(r,"ipv6",n.message,e);break}case"base64url":Br(r,Zn.base64url,n.message,e);break;case"jwt":Br(r,Zn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Br(r,Zn.ipv4Cidr,n.message,e),n.version!=="v4"&&Br(r,Zn.ipv6Cidr,n.message,e);break}case"emoji":Br(r,Zn.emoji(),n.message,e);break;case"ulid":{Br(r,Zn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Jn(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Br(r,Zn.base64,n.message,e);break}}break}case"nanoid":Br(r,Zn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(G2,"parseStringDef");function eE(t,e){return e.patternStrategy==="escape"?Zee(t):t}s(eE,"escapeLiteralCheckValue");var Hee=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Zee(t){let e="";for(let r=0;r<t.length;r++)Hee.has(t[r])||(e+="\\"),e+=t[r];return e}s(Zee,"escapeNonAlphaNumeric");function Jn(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(Jn,"addFormat");function Br(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:U2(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=U2(e,n)}s(Br,"addPattern");function U2(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(U2,"stringifyRegExpWithFlags");function K2(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=xt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=G2(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===F.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===F.ZodBranded&&t.keyType._def.type._def.typeName===F.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=Z2(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(K2,"parseRecordDef");function Jee(t,e){if(e.mapStrategy==="record")return K2(t,e);let r=xt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||mn(),n=xt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||mn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(Jee,"parseMapDef");function Gee(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Gee,"parseNativeEnumDef");function Kee(){return{not:mn()}}s(Kee,"parseNeverDef");function Wee(){return{type:"null"}}s(Wee,"parseNullDef");var rE={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Qee(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in rE&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=rE[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Xee(t,e)}s(Qee,"parseUnionDef");var Xee=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>xt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Yee(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[rE[t.innerType._def.typeName],"null"]};let r=xt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(Yee,"parseNullableDef");function ete(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(ete,"parseNumberDef");function tte(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=nte(c),d=xt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=rte(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(tte,"parseObjectDef");function rte(t,e){if(t.catchall._def.typeName!=="ZodNever")return xt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(rte,"decideAdditionalProperties");function nte(t){try{return t.isOptional()}catch{return!0}}s(nte,"safeIsOptional");var ote=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return xt(t.innerType._def,e);let n=xt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:mn()},n]}:mn()},"parseOptionalDef"),ite=s((t,e)=>{if(e.pipeStrategy==="input")return xt(t.in._def,e);if(e.pipeStrategy==="output")return xt(t.out._def,e);let r=xt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=xt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function ste(t,e){return xt(t.type._def,e)}s(ste,"parsePromiseDef");function ate(t,e){let n={type:"array",uniqueItems:!0,items:xt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(ate,"parseSetDef");function cte(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>xt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:xt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>xt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(cte,"parseTupleDef");function ute(){return{not:mn()}}s(ute,"parseUndefinedDef");function lte(){return mn()}s(lte,"parseUnknownDef");var dte=s((t,e)=>xt(t.innerType._def,e),"parseReadonlyDef"),pte=s((t,e,r)=>{switch(e){case F.ZodString:return G2(t,r);case F.ZodNumber:return ete(t);case F.ZodObject:return tte(t,r);case F.ZodBigInt:return Dee(t);case F.ZodBoolean:return jee();case F.ZodDate:return J2(t,r);case F.ZodUndefined:return ute();case F.ZodNull:return Wee();case F.ZodArray:return Nee(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return Qee(t,r);case F.ZodIntersection:return Bee(t,r);case F.ZodTuple:return cte(t,r);case F.ZodRecord:return K2(t,r);case F.ZodLiteral:return Vee(t);case F.ZodEnum:return qee(t);case F.ZodNativeEnum:return Gee(t);case F.ZodNullable:return Yee(t,r);case F.ZodOptional:return ote(t,r);case F.ZodMap:return Jee(t,r);case F.ZodSet:return ate(t,r);case F.ZodLazy:return()=>t.getter()._def;case F.ZodPromise:return ste(t,r);case F.ZodNaN:case F.ZodNever:return Kee();case F.ZodEffects:return Lee(t,r);case F.ZodAny:return mn();case F.ZodUnknown:return lte();case F.ZodDefault:return Uee(t,r);case F.ZodBranded:return Z2(t,r);case F.ZodReadonly:return dte(t,r);case F.ZodCatch:return Mee(t,r);case F.ZodPipeline:return ite(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function xt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==$ee)return l}if(o&&!r){let l=mte(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=pte(t,t.typeName,e),c=typeof a=="function"?xt(a(),e):a;if(c&&fte(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(xt,"parseDef");var mte=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Oee(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),mn()):e.$refStrategy==="seen"?mn():void 0}},"get$ref"),fte=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),hte=s(t=>{let e=Ree(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),gte=s((t,e)=>{var r;let n=hte(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=xt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:mn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=xt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:mn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),yte=gte;function vte(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return W2(()=>yte(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(vte,"zod3Schema");function _te(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return W2(()=>Lo(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Fo(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(_te,"zod4Schema");function bte(t){return"_zod"in t}s(bte,"isZod4Schema");function sr(t,e){return bte(t)?_te(t,e):vte(t,e)}s(sr,"zodSchema");var wte=Symbol.for("vercel.ai.schema");function ar(t){let e;return()=>(e==null&&(e=t()),e)}s(ar,"lazySchema");function W2(t,{validate:e}={}){return{[wte]:!0,_type:void 0,[Ff]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(W2,"jsonSchema");var{btoa:Ste,atob:RUe}=globalThis;function xte(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return Ste(e)}s(xte,"convertUint8ArrayToBase64");function iE(t){return t instanceof Uint8Array?xte(t):t}s(iE,"convertToBase64");function Q2(t){return t?.replace(/\/$/,"")}s(Q2,"withoutTrailingSlash");var Tte="2.0.44",Ete=ar(()=>sr(u.object({error:u.object({code:u.number().nullable(),message:u.string(),status:u.string()})}))),Ml=V2({errorSchema:Ete,errorToMessage:s(t=>t.error.message,"errorToMessage")}),kte=ar(()=>sr(u.object({outputDimensionality:u.number().optional(),taskType:u.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),Ite=class{static{s(this,"GoogleGenerativeAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){let o=await Qa({provider:"google",providerOptions:n,schema:kte});if(t.length>this.maxEmbeddingsPerCall)throw new Df({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=gs(await ys(this.config.headers),e);if(t.length===1){let{responseHeaders:d,value:p,rawValue:m}=await zi({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:t[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:Ml,successfulResponseHandler:vs(Ate),abortSignal:r,fetch:this.config.fetch});return{embeddings:[p.embedding.values],usage:void 0,response:{headers:d,body:m}}}let{responseHeaders:a,value:c,rawValue:l}=await zi({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:t.map(d=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:d}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:Ml,successfulResponseHandler:vs(Pte),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.embeddings.map(d=>d.values),usage:void 0,response:{headers:a,body:l}}}},Pte=ar(()=>sr(u.object({embeddings:u.array(u.object({values:u.array(u.number())}))}))),Ate=ar(()=>sr(u.object({embedding:u.object({values:u.array(u.number())})})));function mo(t){if(t==null||Cte(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:o,items:i,allOf:a,anyOf:c,oneOf:l,format:d,const:p,minLength:m,enum:h}=t,y={};if(r&&(y.description=r),n&&(y.required=n),d&&(y.format=d),p!==void 0&&(y.enum=[p]),e)if(Array.isArray(e)){let g=e.includes("null"),f=e.filter(_=>_!=="null");f.length===0?y.type="null":(y.anyOf=f.map(_=>({type:_})),g&&(y.nullable=!0))}else y.type=e;if(h!==void 0&&(y.enum=h),o!=null&&(y.properties=Object.entries(o).reduce((g,[f,_])=>(g[f]=mo(_),g),{})),i&&(y.items=Array.isArray(i)?i.map(mo):mo(i)),a&&(y.allOf=a.map(mo)),c)if(c.some(g=>typeof g=="object"&&g?.type==="null")){let g=c.filter(f=>!(typeof f=="object"&&f?.type==="null"));if(g.length===1){let f=mo(g[0]);typeof f=="object"&&(y.nullable=!0,Object.assign(y,f))}else y.anyOf=g.map(mo),y.nullable=!0}else y.anyOf=c.map(mo);return l&&(y.oneOf=l.map(mo)),m!==void 0&&(y.minLength=m),y}s(mo,"convertJSONSchemaToOpenAPISchema");function Cte(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)&&!t.additionalProperties}s(Cte,"isEmptyObjectSchema");function Ote(t,e){var r;let n=[],o=[],i=!0,a=(r=e?.isGemmaModel)!=null?r:!1;for(let{role:c,content:l}of t)switch(c){case"system":{if(!i)throw new _t({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:l});break}case"user":{i=!1;let d=[];for(let p of l)switch(p.type){case"text":{d.push({text:p.text});break}case"file":{let m=p.mediaType==="image/*"?"image/jpeg":p.mediaType;d.push(p.data instanceof URL?{fileData:{mimeType:m,fileUri:p.data.toString()}}:{inlineData:{mimeType:m,data:iE(p.data)}});break}}o.push({role:"user",parts:d});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(d=>{var p,m,h;let y=((m=(p=d.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature)!=null?String((h=d.providerOptions.google)==null?void 0:h.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:y};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:y};case"file":{if(d.mediaType!=="image/png")throw new _t({functionality:"Only PNG images are supported in assistant messages"});if(d.data instanceof URL)throw new _t({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:iE(d.data)}}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:y}}}).filter(d=>d!==void 0)});break}case"tool":{i=!1;let d=[];for(let p of l){let m=p.output;if(m.type==="content")for(let h of m.value)switch(h.type){case"text":d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:h.text}}});break;case"media":d.push({inlineData:{mimeType:h.mediaType,data:h.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(h)});break}else d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:m.value}}})}o.push({role:"user",parts:d});break}}if(a&&n.length>0&&o.length>0&&o[0].role==="user"){let c=n.map(l=>l.text).join(`

`);o[0].parts.unshift({text:c+`

`})}return{systemInstruction:n.length>0&&!a?{parts:n}:void 0,contents:o}}s(Ote,"convertToGoogleGenerativeAIMessages");function X2(t){return t.includes("/")?t:`models/${t}`}s(X2,"getModelPath");var $te=ar(()=>sr(u.object({responseModalities:u.array(u.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:u.object({thinkingBudget:u.number().optional(),includeThoughts:u.boolean().optional(),thinkingLevel:u.enum(["low","medium","high"]).optional()}).optional(),cachedContent:u.string().optional(),structuredOutputs:u.boolean().optional(),safetySettings:u.array(u.object({category:u.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:u.boolean().optional(),labels:u.record(u.string(),u.string()).optional(),mediaResolution:u.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:u.object({aspectRatio:u.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:u.enum(["1K","2K","4K"]).optional()}).optional()})));function Rte({tools:t,toolChoice:e,modelId:r}){var n;t=t?.length?t:void 0;let o=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(y=>y===r),a=r.includes("gemini-2")||r.includes("gemini-3")||i,c=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),l=r.includes("gemini-2.5");if(t==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let d=t.some(y=>y.type==="function"),p=t.some(y=>y.type==="provider-defined");if(d&&p){let y=t.filter(g=>g.type==="function");o.push({type:"unsupported-tool",tool:t.find(g=>g.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${y.map(g=>g.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(p){let y=[];return t.filter(f=>f.type==="provider-defined").forEach(f=>{switch(f.id){case"google.google_search":a?y.push({googleSearch:{}}):c?y.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:f.args.mode,dynamicThreshold:f.args.dynamicThreshold}}}):y.push({googleSearchRetrieval:{}});break;case"google.url_context":a?y.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:f,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":a?y.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:f,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?y.push({fileSearch:{...f.args}}):o.push({type:"unsupported-tool",tool:f,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":a?y.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:f.args.ragCorpus},similarity_top_k:f.args.topK}}}):o.push({type:"unsupported-tool",tool:f,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:f});break}}),{tools:y.length>0?y:void 0,toolConfig:void 0,toolWarnings:o}}let m=[];for(let y of t)switch(y.type){case"function":m.push({name:y.name,description:(n=y.description)!=null?n:"",parameters:mo(y.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:y});break}if(e==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:o};let h=e.type;switch(h){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[e.toolName]}},toolWarnings:o};default:{let y=h;throw new _t({functionality:`tool choice type: ${y}`})}}}s(Rte,"prepareTools");function Y2({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}s(Y2,"mapGoogleGenerativeAIFinishReason");var Nte=class{static{s(this,"GoogleGenerativeAILanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:Vf}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y;let g=[],f=await Qa({provider:"google",providerOptions:h,schema:$te});p?.some(O=>O.type==="provider-defined"&&O.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&g.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let _=this.modelId.toLowerCase().startsWith("gemma-"),{contents:w,systemInstruction:b}=Ote(t,{isGemmaModel:_}),{tools:S,toolConfig:k,toolWarnings:R}=Rte({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:e,temperature:r,topK:o,topP:n,frequencyPenalty:i,presencePenalty:a,stopSequences:c,seed:d,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=f?.structuredOutputs)==null||y)?mo(l.schema):void 0,...f?.audioTimestamp&&{audioTimestamp:f.audioTimestamp},responseModalities:f?.responseModalities,thinkingConfig:f?.thinkingConfig,...f?.imageConfig&&{imageConfig:f.imageConfig},...f?.mediaResolution&&{mediaResolution:f.mediaResolution}},contents:w,systemInstruction:_?void 0:b,safetySettings:f?.safetySettings,tools:S,toolConfig:k,cachedContent:f?.cachedContent,labels:f?.labels},warnings:[...g,...R]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y;let{args:g,warnings:f}=await this.getArgs(t),_=JSON.stringify(g),w=gs(await ys(this.config.headers),t.headers),{responseHeaders:b,value:S,rawValue:k}=await zi({url:`${this.config.baseURL}/${X2(this.modelId)}:generateContent`,headers:w,body:g,failedResponseHandler:Ml,successfulResponseHandler:vs(jte),abortSignal:t.abortSignal,fetch:this.config.fetch}),R=S.candidates[0],O=[],C=(r=(e=R.content)==null?void 0:e.parts)!=null?r:[],$=S.usageMetadata,P;for(let D of C)if("executableCode"in D&&((n=D.executableCode)!=null&&n.code)){let W=this.config.generateId();P=W,O.push({type:"tool-call",toolCallId:W,toolName:"code_execution",input:JSON.stringify(D.executableCode),providerExecuted:!0})}else"codeExecutionResult"in D&&D.codeExecutionResult?(O.push({type:"tool-result",toolCallId:P,toolName:"code_execution",result:{outcome:D.codeExecutionResult.outcome,output:D.codeExecutionResult.output},providerExecuted:!0}),P=void 0):"text"in D&&D.text!=null&&D.text.length>0?O.push({type:D.thought===!0?"reasoning":"text",text:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0}):"functionCall"in D?O.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:D.functionCall.name,input:JSON.stringify(D.functionCall.args),providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0}):"inlineData"in D&&O.push({type:"file",data:D.inlineData.data,mediaType:D.inlineData.mimeType});let N=(o=eM({groundingMetadata:R.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(let D of N)O.push(D);return{content:O,finishReason:Y2({finishReason:R.finishReason,hasToolCalls:O.some(D=>D.type==="tool-call")}),usage:{inputTokens:(i=$?.promptTokenCount)!=null?i:void 0,outputTokens:(a=$?.candidatesTokenCount)!=null?a:void 0,totalTokens:(c=$?.totalTokenCount)!=null?c:void 0,reasoningTokens:(l=$?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(d=$?.cachedContentTokenCount)!=null?d:void 0},warnings:f,providerMetadata:{google:{promptFeedback:(p=S.promptFeedback)!=null?p:null,groundingMetadata:(m=R.groundingMetadata)!=null?m:null,urlContextMetadata:(h=R.urlContextMetadata)!=null?h:null,safetyRatings:(y=R.safetyRatings)!=null?y:null,usageMetadata:$??null}},request:{body:_},response:{headers:b,body:k}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),o=gs(await ys(this.config.headers),t.headers),{responseHeaders:i,value:a}=await zi({url:`${this.config.baseURL}/${X2(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:e,failedResponseHandler:Ml,successfulResponseHandler:H2(Mte),abortSignal:t.abortSignal,fetch:this.config.fetch}),c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d,p=this.config.generateId,m=!1,h=null,y=null,g=0,f=new Set,_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var S,k,R,O,C,$,P,N,D,W,H,q;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){b.enqueue({type:"error",error:w.error});return}let X=w.value,te=X.usageMetadata;te!=null&&(l.inputTokens=(S=te.promptTokenCount)!=null?S:void 0,l.outputTokens=(k=te.candidatesTokenCount)!=null?k:void 0,l.totalTokens=(R=te.totalTokenCount)!=null?R:void 0,l.reasoningTokens=(O=te.thoughtsTokenCount)!=null?O:void 0,l.cachedInputTokens=(C=te.cachedContentTokenCount)!=null?C:void 0);let oe=($=X.candidates)==null?void 0:$[0];if(oe==null)return;let ye=oe.content,Se=eM({groundingMetadata:oe.groundingMetadata,generateId:p});if(Se!=null)for(let We of Se)We.sourceType==="url"&&!f.has(We.url)&&(f.add(We.url),b.enqueue(We));if(ye!=null){let We=(P=ye.parts)!=null?P:[];for(let J of We)if("executableCode"in J&&((N=J.executableCode)!=null&&N.code)){let Ae=p();_=Ae,b.enqueue({type:"tool-call",toolCallId:Ae,toolName:"code_execution",input:JSON.stringify(J.executableCode),providerExecuted:!0}),m=!0}else if("codeExecutionResult"in J&&J.codeExecutionResult){let Ae=_;Ae&&(b.enqueue({type:"tool-result",toolCallId:Ae,toolName:"code_execution",result:{outcome:J.codeExecutionResult.outcome,output:J.codeExecutionResult.output},providerExecuted:!0}),_=void 0)}else"text"in J&&J.text!=null&&J.text.length>0?J.thought===!0?(h!==null&&(b.enqueue({type:"text-end",id:h}),h=null),y===null&&(y=String(g++),b.enqueue({type:"reasoning-start",id:y,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})),b.enqueue({type:"reasoning-delta",id:y,delta:J.text,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})):(y!==null&&(b.enqueue({type:"reasoning-end",id:y}),y=null),h===null&&(h=String(g++),b.enqueue({type:"text-start",id:h,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})),b.enqueue({type:"text-delta",id:h,delta:J.text,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})):"inlineData"in J&&b.enqueue({type:"file",mediaType:J.inlineData.mimeType,data:J.inlineData.data});let Ve=Dte({parts:ye.parts,generateId:p});if(Ve!=null)for(let J of Ve)b.enqueue({type:"tool-input-start",id:J.toolCallId,toolName:J.toolName,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-input-delta",id:J.toolCallId,delta:J.args,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-input-end",id:J.toolCallId,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-call",toolCallId:J.toolCallId,toolName:J.toolName,input:J.args,providerMetadata:J.providerMetadata}),m=!0}oe.finishReason!=null&&(c=Y2({finishReason:oe.finishReason,hasToolCalls:m}),d={google:{promptFeedback:(D=X.promptFeedback)!=null?D:null,groundingMetadata:(W=oe.groundingMetadata)!=null?W:null,urlContextMetadata:(H=oe.urlContextMetadata)!=null?H:null,safetyRatings:(q=oe.safetyRatings)!=null?q:null}},te!=null&&(d.google.usageMetadata=te))},flush(w){h!==null&&w.enqueue({type:"text-end",id:h}),y!==null&&w.enqueue({type:"reasoning-end",id:y}),w.enqueue({type:"finish",finishReason:c,usage:l,providerMetadata:d})}})),response:{headers:i},request:{body:n}}}};function Dte({parts:t,generateId:e}){let r=t?.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({type:"tool-call",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args),providerMetadata:n.thoughtSignature?{google:{thoughtSignature:n.thoughtSignature}}:void 0}))}s(Dte,"getToolCallsFromParts");function eM({groundingMetadata:t,generateId:e}){var r,n,o,i;if(!t?.groundingChunks)return;let a=[];for(let c of t.groundingChunks)if(c.web!=null)a.push({type:"source",sourceType:"url",id:e(),url:c.web.uri,title:(r=c.web.title)!=null?r:void 0});else if(c.retrievedContext!=null){let l=c.retrievedContext.uri,d=c.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))a.push({type:"source",sourceType:"url",id:e(),url:l,title:(n=c.retrievedContext.title)!=null?n:void 0});else if(l){let p=(o=c.retrievedContext.title)!=null?o:"Unknown Document",m="application/octet-stream",h;l.endsWith(".pdf")?(m="application/pdf",h=l.split("/").pop()):l.endsWith(".txt")?(m="text/plain",h=l.split("/").pop()):l.endsWith(".docx")?(m="application/vnd.openxmlformats-officedocument.wordprocessingml.document",h=l.split("/").pop()):l.endsWith(".doc")?(m="application/msword",h=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(m="text/markdown"),h=l.split("/").pop()),a.push({type:"source",sourceType:"document",id:e(),mediaType:m,title:p,filename:h})}else if(d){let p=(i=c.retrievedContext.title)!=null?i:"Unknown Document";a.push({type:"source",sourceType:"document",id:e(),mediaType:"application/octet-stream",title:p,filename:d.split("/").pop()})}}return a.length>0?a:void 0}s(eM,"extractSources");var tM=s(()=>u.object({webSearchQueries:u.array(u.string()).nullish(),retrievalQueries:u.array(u.string()).nullish(),searchEntryPoint:u.object({renderedContent:u.string()}).nullish(),groundingChunks:u.array(u.object({web:u.object({uri:u.string(),title:u.string().nullish()}).nullish(),retrievedContext:u.object({uri:u.string().nullish(),title:u.string().nullish(),text:u.string().nullish(),fileSearchStore:u.string().nullish()}).nullish()})).nullish(),groundingSupports:u.array(u.object({segment:u.object({startIndex:u.number().nullish(),endIndex:u.number().nullish(),text:u.string().nullish()}),segment_text:u.string().nullish(),groundingChunkIndices:u.array(u.number()).nullish(),supportChunkIndices:u.array(u.number()).nullish(),confidenceScores:u.array(u.number()).nullish(),confidenceScore:u.array(u.number()).nullish()})).nullish(),retrievalMetadata:u.union([u.object({webDynamicRetrievalScore:u.number()}),u.object({})]).nullish()}),"getGroundingMetadataSchema"),rM=s(()=>u.object({parts:u.array(u.union([u.object({functionCall:u.object({name:u.string(),args:u.unknown()}),thoughtSignature:u.string().nullish()}),u.object({inlineData:u.object({mimeType:u.string(),data:u.string()})}),u.object({executableCode:u.object({language:u.string(),code:u.string()}).nullish(),codeExecutionResult:u.object({outcome:u.string(),output:u.string()}).nullish(),text:u.string().nullish(),thought:u.boolean().nullish(),thoughtSignature:u.string().nullish()})])).nullish()}),"getContentSchema"),Hf=s(()=>u.object({category:u.string().nullish(),probability:u.string().nullish(),probabilityScore:u.number().nullish(),severity:u.string().nullish(),severityScore:u.number().nullish(),blocked:u.boolean().nullish()}),"getSafetyRatingSchema"),nM=u.object({cachedContentTokenCount:u.number().nullish(),thoughtsTokenCount:u.number().nullish(),promptTokenCount:u.number().nullish(),candidatesTokenCount:u.number().nullish(),totalTokenCount:u.number().nullish(),trafficType:u.string().nullish()}),oM=s(()=>u.object({urlMetadata:u.array(u.object({retrievedUrl:u.string(),urlRetrievalStatus:u.string()}))}),"getUrlContextMetadataSchema"),jte=ar(()=>sr(u.object({candidates:u.array(u.object({content:rM().nullish().or(u.object({}).strict()),finishReason:u.string().nullish(),safetyRatings:u.array(Hf()).nullish(),groundingMetadata:tM().nullish(),urlContextMetadata:oM().nullish()})),usageMetadata:nM.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(Hf()).nullish()}).nullish()}))),Mte=ar(()=>sr(u.object({candidates:u.array(u.object({content:rM().nullish(),finishReason:u.string().nullish(),safetyRatings:u.array(Hf()).nullish(),groundingMetadata:tM().nullish(),urlContextMetadata:oM().nullish()})).nullish(),usageMetadata:nM.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(Hf()).nullish()}).nullish()}))),zte=B2({id:"google.code_execution",name:"code_execution",inputSchema:u.object({language:u.string().describe("The programming language of the code."),code:u.string().describe("The code to be executed.")}),outputSchema:u.object({outcome:u.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:u.string().describe("The output from the code execution.")})}),Ute=u.object({fileSearchStoreNames:u.array(u.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:u.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:u.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),Lte=ar(()=>sr(Ute)),qte=Ui({id:"google.file_search",name:"file_search",inputSchema:Lte}),Fte=Ui({id:"google.google_search",name:"google_search",inputSchema:ar(()=>sr(u.object({mode:u.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:u.number().default(1)})))}),Bte=Ui({id:"google.url_context",name:"url_context",inputSchema:ar(()=>sr(u.object({})))}),Vte=Ui({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:u.object({ragCorpus:u.string(),topK:u.number().optional()})}),Hte={googleSearch:Fte,urlContext:Bte,fileSearch:qte,codeExecution:zte,vertexRagStore:Vte},Zte=class{static{s(this,"GoogleGenerativeAIImageModel")}constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=this.settings.maxImagesPerCall)!=null?t:4}get provider(){return this.config.provider}async doGenerate(t){var e,r,n;let{prompt:o,n:i=1,size:a="1024x1024",aspectRatio:c="1:1",seed:l,providerOptions:d,headers:p,abortSignal:m}=t,h=[];a!=null&&h.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&h.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let y=await Qa({provider:"google",providerOptions:d,schema:Gte}),g=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,f={sampleCount:i};c!=null&&(f.aspectRatio=c),y&&Object.assign(f,y);let _={instances:[{prompt:o}],parameters:f},{responseHeaders:w,value:b}=await zi({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:gs(await ys(this.config.headers),p),body:_,failedResponseHandler:Ml,successfulResponseHandler:vs(Jte),abortSignal:m,fetch:this.config.fetch});return{images:b.predictions.map(S=>S.bytesBase64Encoded),warnings:h??[],providerMetadata:{google:{images:b.predictions.map(S=>({}))}},response:{timestamp:g,modelId:this.modelId,headers:w}}}},Jte=ar(()=>sr(u.object({predictions:u.array(u.object({bytesBase64Encoded:u.string()})).default([])}))),Gte=ar(()=>sr(u.object({personGeneration:u.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:u.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Kte(t={}){var e,r;let n=(e=Q2(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",o=(r=t.name)!=null?r:"google.generative-ai",i=s(()=>nE({"x-goog-api-key":L2({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers},`ai-sdk/google/${Tte}`),"getHeaders"),a=s(p=>{var m;return new Nte(p,{provider:o,baseURL:n,headers:i,generateId:(m=t.generateId)!=null?m:Vf,supportedUrls:s(()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),"supportedUrls"),fetch:t.fetch})},"createChatModel"),c=s(p=>new Ite(p,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createEmbeddingModel"),l=s((p,m={})=>new Zte(p,m,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createImageModel"),d=s(function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(p)},"provider");return d.languageModel=a,d.chat=a,d.generativeAI=a,d.embedding=c,d.textEmbedding=c,d.textEmbeddingModel=c,d.image=l,d.imageModel=l,d.tools=Hte,d}s(Kte,"createGoogleGenerativeAI");var sE=Kte();function Tr(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(Tr,"combineHeaders");function zl(t){return Object.fromEntries([...t.headers])}s(zl,"extractResponseHeaders");var Wte=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new En({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),Wn=Wte();function uE(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(uE,"isAbortError");var Qte=["fetch failed","failed to fetch"];function Xte({error:t,url:e,requestBodyValues:r}){if(uE(t))return t;if(t instanceof TypeError&&Qte.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Ge({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(Xte,"handleFetchError");function Yte(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(Yte,"getRuntimeEnvironmentUserAgent");function ere(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(ere,"normalizeHeaders");function dE(t,...e){let r=new Headers(ere(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(dE,"withUserAgentSuffix");var tre="3.0.18";function cM({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Lr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Lr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Lr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(cM,"loadApiKey");function uM({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}s(uM,"loadOptionalSetting");function lM(t){var e;let[r,n=""]=t.toLowerCase().split("/");return(e={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?e:n}s(lM,"mediaTypeToExtension");var rre=/"__proto__"\s*:/,nre=/"constructor"\s*:/;function iM(t){let e=JSON.parse(t);return e===null||typeof e!="object"||rre.test(t)===!1&&nre.test(t)===!1?e:ore(e)}s(iM,"_parse");function ore(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(ore,"filter");function pE(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return iM(t)}try{return iM(t)}finally{Error.stackTraceLimit=e}}s(pE,"secureJsonParse");var Zf=Symbol.for("vercel.ai.validator");function ire(t){return{[Zf]:!0,validate:t}}s(ire,"validator");function sre(t){return typeof t=="object"&&t!==null&&Zf in t&&t[Zf]===!0&&"validate"in t}s(sre,"isValidator");function $t(t){let e;return()=>(e==null&&(e=t()),e)}s($t,"lazyValidator");function are(t){return sre(t)?t:typeof t=="function"?t():cre(t)}s(are,"asValidator");function cre(t){return ire(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Ft({value:e,cause:r.issues})}})}s(cre,"standardSchemaValidator");async function fo({value:t,schema:e}){let r=await mE({value:t,schema:e});if(!r.success)throw Ft.wrap({value:t,cause:r.error});return r.value}s(fo,"validateTypes");async function mE({value:t,schema:e}){let r=are(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Ft.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Ft.wrap({value:t,cause:n}),rawValue:t}}}s(mE,"safeValidateTypes");async function ure({text:t,schema:e}){try{let r=pE(t);return e==null?r:fo({value:r,schema:e})}catch(r){throw Ur.isInstance(r)||Ft.isInstance(r)?r:new Ur({text:t,cause:r})}}s(ure,"parseJSON");async function dM({text:t,schema:e}){try{let r=pE(t);return e==null?{success:!0,value:r,rawValue:r}:await mE({value:r,schema:e})}catch(r){return{success:!1,error:Ur.isInstance(r)?r:new Ur({text:t,cause:r}),rawValue:void 0}}}s(dM,"safeParseJSON");function fE(t){try{return pE(t),!0}catch{return!1}}s(fE,"isParsableJson");function lre({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new Ri).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await dM({text:r,schema:e}))}}))}s(lre,"parseJsonEventStream");async function Hr({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await mE({value:e[t],schema:r});if(!n.success)throw new En({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(Hr,"parseProviderOptions");var dre=s(()=>globalThis.fetch,"getOriginalFetch2"),Zr=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>mM({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),pM=s(async({url:t,headers:e,formData:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>mM({url:t,headers:e,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postFormDataToApi"),mM=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=dre()})=>{try{let c=await a(t,{method:"POST",headers:dE(e,`ai-sdk/provider-utils/${tre}`,Yte()),body:r.content,signal:i}),l=zl(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw uE(p)||Ge.isInstance(p)?p:new Ge({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(uE(d)||Ge.isInstance(d))?d:new Ge({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw Xte({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function In({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(In,"createProviderDefinedToolFactoryWithOutputSchema");var fM=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=zl(n);if(a.trim()==="")return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await ure({text:a,schema:t});return{responseHeaders:c,value:new Ge({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Ge({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),Xa=s(t=>async({response:e})=>{let r=zl(e);if(e.body==null)throw new Da({});return{responseHeaders:r,value:lre({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var Pn=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await dM({text:o,schema:t}),a=zl(e);if(!i.success)throw new Ge({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),hM=s(()=>async({response:t,url:e,requestBodyValues:r})=>{let n=zl(t);if(!t.body)throw new Ge({message:"Response body is empty",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0});try{let o=await t.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(o)}}catch(o){throw new Ge({message:"Failed to read response as array buffer",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0,cause:o})}},"createBinaryResponseHandler");var pre=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),mre=Symbol("Let zodToJsonSchema decide on which parser to use"),sM={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},fre=s(t=>typeof t=="string"?{...sM,name:t}:{...sM,...t},"getDefaultOptions");function fn(){return{}}s(fn,"parseAnyDef");function hre(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==F.ZodAny&&(i.items=Tt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(hre,"parseArrayDef");function gre(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(gre,"parseBigintDef");function yre(){return{type:"boolean"}}s(yre,"parseBooleanDef");function gM(t,e){return Tt(t.type._def,e)}s(gM,"parseBrandedDef");var vre=s((t,e)=>Tt(t.innerType._def,e),"parseCatchDef");function yM(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>yM(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return _re(t)}}s(yM,"parseDateDef");var _re=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function bre(t,e){return{...Tt(t.innerType._def,e),default:t.defaultValue()}}s(bre,"parseDefaultDef");function wre(t,e){return e.effectStrategy==="input"?Tt(t.schema._def,e):fn()}s(wre,"parseEffectsDef");function Sre(t){return{type:"string",enum:Array.from(t.values)}}s(Sre,"parseEnumDef");var xre=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function Tre(t,e){let r=[Tt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Tt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(xre(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(Tre,"parseIntersectionDef");function Ere(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(Ere,"parseLiteralDef");var aE=void 0,Gn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(aE===void 0&&(aE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),aE),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function vM(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":Kn(r,"email",n.message,e);break;case"format:idn-email":Kn(r,"idn-email",n.message,e);break;case"pattern:zod":Vr(r,Gn.email,n.message,e);break}break;case"url":Kn(r,"uri",n.message,e);break;case"uuid":Kn(r,"uuid",n.message,e);break;case"regex":Vr(r,n.regex,n.message,e);break;case"cuid":Vr(r,Gn.cuid,n.message,e);break;case"cuid2":Vr(r,Gn.cuid2,n.message,e);break;case"startsWith":Vr(r,RegExp(`^${cE(n.value,e)}`),n.message,e);break;case"endsWith":Vr(r,RegExp(`${cE(n.value,e)}$`),n.message,e);break;case"datetime":Kn(r,"date-time",n.message,e);break;case"date":Kn(r,"date",n.message,e);break;case"time":Kn(r,"time",n.message,e);break;case"duration":Kn(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Vr(r,RegExp(cE(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Kn(r,"ipv4",n.message,e),n.version!=="v4"&&Kn(r,"ipv6",n.message,e);break}case"base64url":Vr(r,Gn.base64url,n.message,e);break;case"jwt":Vr(r,Gn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Vr(r,Gn.ipv4Cidr,n.message,e),n.version!=="v4"&&Vr(r,Gn.ipv6Cidr,n.message,e);break}case"emoji":Vr(r,Gn.emoji(),n.message,e);break;case"ulid":{Vr(r,Gn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Kn(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Vr(r,Gn.base64,n.message,e);break}}break}case"nanoid":Vr(r,Gn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(vM,"parseStringDef");function cE(t,e){return e.patternStrategy==="escape"?Ire(t):t}s(cE,"escapeLiteralCheckValue");var kre=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ire(t){let e="";for(let r=0;r<t.length;r++)kre.has(t[r])||(e+="\\"),e+=t[r];return e}s(Ire,"escapeNonAlphaNumeric");function Kn(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(Kn,"addFormat");function Vr(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:aM(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=aM(e,n)}s(Vr,"addPattern");function aM(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(aM,"stringifyRegExpWithFlags");function _M(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=Tt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=vM(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===F.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===F.ZodBranded&&t.keyType._def.type._def.typeName===F.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=gM(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(_M,"parseRecordDef");function Pre(t,e){if(e.mapStrategy==="record")return _M(t,e);let r=Tt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||fn(),n=Tt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||fn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(Pre,"parseMapDef");function Are(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Are,"parseNativeEnumDef");function Cre(){return{not:fn()}}s(Cre,"parseNeverDef");function Ore(){return{type:"null"}}s(Ore,"parseNullDef");var lE={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function $re(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in lE&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=lE[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Rre(t,e)}s($re,"parseUnionDef");var Rre=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Tt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Nre(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[lE[t.innerType._def.typeName],"null"]};let r=Tt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(Nre,"parseNullableDef");function Dre(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(Dre,"parseNumberDef");function jre(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=zre(c),d=Tt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=Mre(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(jre,"parseObjectDef");function Mre(t,e){if(t.catchall._def.typeName!=="ZodNever")return Tt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(Mre,"decideAdditionalProperties");function zre(t){try{return t.isOptional()}catch{return!0}}s(zre,"safeIsOptional");var Ure=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Tt(t.innerType._def,e);let n=Tt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:fn()},n]}:fn()},"parseOptionalDef"),Lre=s((t,e)=>{if(e.pipeStrategy==="input")return Tt(t.in._def,e);if(e.pipeStrategy==="output")return Tt(t.out._def,e);let r=Tt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Tt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function qre(t,e){return Tt(t.type._def,e)}s(qre,"parsePromiseDef");function Fre(t,e){let n={type:"array",uniqueItems:!0,items:Tt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(Fre,"parseSetDef");function Bre(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Tt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Tt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Tt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(Bre,"parseTupleDef");function Vre(){return{not:fn()}}s(Vre,"parseUndefinedDef");function Hre(){return fn()}s(Hre,"parseUnknownDef");var Zre=s((t,e)=>Tt(t.innerType._def,e),"parseReadonlyDef"),Jre=s((t,e,r)=>{switch(e){case F.ZodString:return vM(t,r);case F.ZodNumber:return Dre(t);case F.ZodObject:return jre(t,r);case F.ZodBigInt:return gre(t);case F.ZodBoolean:return yre();case F.ZodDate:return yM(t,r);case F.ZodUndefined:return Vre();case F.ZodNull:return Ore();case F.ZodArray:return hre(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return $re(t,r);case F.ZodIntersection:return Tre(t,r);case F.ZodTuple:return Bre(t,r);case F.ZodRecord:return _M(t,r);case F.ZodLiteral:return Ere(t);case F.ZodEnum:return Sre(t);case F.ZodNativeEnum:return Are(t);case F.ZodNullable:return Nre(t,r);case F.ZodOptional:return Ure(t,r);case F.ZodMap:return Pre(t,r);case F.ZodSet:return Fre(t,r);case F.ZodLazy:return()=>t.getter()._def;case F.ZodPromise:return qre(t,r);case F.ZodNaN:case F.ZodNever:return Cre();case F.ZodEffects:return wre(t,r);case F.ZodAny:return fn();case F.ZodUnknown:return Hre();case F.ZodDefault:return bre(t,r);case F.ZodBranded:return gM(t,r);case F.ZodReadonly:return Zre(t,r);case F.ZodCatch:return vre(t,r);case F.ZodPipeline:return Lre(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function Tt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==mre)return l}if(o&&!r){let l=Gre(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=Jre(t,t.typeName,e),c=typeof a=="function"?Tt(a(),e):a;if(c&&Kre(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(Tt,"parseDef");var Gre=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:pre(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),fn()):e.$refStrategy==="seen"?fn():void 0}},"get$ref"),Kre=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),Wre=s(t=>{let e=fre(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),Qre=s((t,e)=>{var r;let n=Wre(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=Tt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:fn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=Tt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:fn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),Xre=Qre;function Yre(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return bM(()=>Xre(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(Yre,"zod3Schema");function ene(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return bM(()=>Lo(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Fo(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(ene,"zod4Schema");function tne(t){return"_zod"in t}s(tne,"isZod4Schema");function je(t,e){return tne(t)?ene(t,e):Yre(t,e)}s(je,"zodSchema");var rne=Symbol.for("vercel.ai.schema");function Xt(t){let e;return()=>(e==null&&(e=t()),e)}s(Xt,"lazySchema");function bM(t,{validate:e}={}){return{[rne]:!0,_type:void 0,[Zf]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(bM,"jsonSchema");var{btoa:nne,atob:one}=globalThis;function wM(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=one(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(wM,"convertBase64ToUint8Array");function ine(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return nne(e)}s(ine,"convertUint8ArrayToBase64");function Li(t){return t instanceof Uint8Array?ine(t):t}s(Li,"convertToBase64");function SM(t){return t?.replace(/\/$/,"")}s(SM,"withoutTrailingSlash");var gE=u.object({error:u.object({message:u.string(),type:u.string().nullish(),param:u.any().nullish(),code:u.union([u.string(),u.number()]).nullish()})}),ho=fM({errorSchema:gE,errorToMessage:s(t=>t.error.message,"errorToMessage")});function sne({prompt:t,systemMessageMode:e="system"}){let r=[],n=[];for(let{role:o,content:i}of t)switch(o){case"system":{switch(e){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let a=e;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map((a,c)=>{var l,d,p;switch(a.type){case"text":return{type:"text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let m=a.mediaType==="image/*"?"image/jpeg":a.mediaType;return{type:"image_url",image_url:{url:a.data instanceof URL?a.data.toString():`data:${m};base64,${Li(a.data)}`,detail:(d=(l=a.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(a.mediaType.startsWith("audio/")){if(a.data instanceof URL)throw new _t({functionality:"audio file parts with URLs"});switch(a.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:Li(a.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:Li(a.data),format:"mp3"}};default:throw new _t({functionality:`audio content parts with media type ${a.mediaType}`})}}else if(a.mediaType==="application/pdf"){if(a.data instanceof URL)throw new _t({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof a.data=="string"&&a.data.startsWith("file-")?{file_id:a.data}:{filename:(p=a.filename)!=null?p:`part-${c}.pdf`,file_data:`data:application/pdf;base64,${Li(a.data)}`}}}else throw new _t({functionality:`file part media type ${a.mediaType}`})}})});break}case"assistant":{let a="",c=[];for(let l of i)switch(l.type){case"text":{a+=l.text;break}case"tool-call":{c.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}r.push({role:"assistant",content:a,tool_calls:c.length>0?c:void 0});break}case"tool":{for(let a of i){let c=a.output,l;switch(c.type){case"text":case"error-text":l=c.value;break;case"content":case"json":case"error-json":l=JSON.stringify(c.value);break}r.push({role:"tool",tool_call_id:a.toolCallId,content:l})}break}default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return{messages:r,warnings:n}}s(sne,"convertToOpenAIChatMessages");function hE({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r?new Date(r*1e3):void 0}}s(hE,"getResponseMetadata");function xM(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(xM,"mapOpenAIFinishReason");var ane=$t(()=>je(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({message:u.object({role:u.literal("assistant").nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({id:u.string().nullish(),type:u.literal("function"),function:u.object({name:u.string(),arguments:u.string()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}),index:u.number(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}))),cne=$t(()=>je(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({delta:u.object({role:u.enum(["assistant"]).nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({index:u.number(),id:u.string().nullish(),type:u.literal("function").nullish(),function:u.object({name:u.string().nullish(),arguments:u.string().nullish()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}).nullish(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish(),index:u.number()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}),gE]))),une=$t(()=>je(u.object({logitBias:u.record(u.coerce.number(),u.number()).optional(),logprobs:u.union([u.boolean(),u.number()]).optional(),parallelToolCalls:u.boolean().optional(),user:u.string().optional(),reasoningEffort:u.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:u.number().optional(),store:u.boolean().optional(),metadata:u.record(u.string().max(64),u.string().max(512)).optional(),prediction:u.record(u.string(),u.any()).optional(),structuredOutputs:u.boolean().optional(),serviceTier:u.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:u.boolean().optional(),textVerbosity:u.enum(["low","medium","high"]).optional(),promptCacheKey:u.string().optional(),promptCacheRetention:u.enum(["in_memory","24h"]).optional(),safetyIdentifier:u.string().optional()})));function lne({tools:t,toolChoice:e,structuredOutputs:r,strictJsonSchema:n}){t=t?.length?t:void 0;let o=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let i=[];for(let c of t)switch(c.type){case"function":i.push({type:"function",function:{name:c.name,description:c.description,parameters:c.inputSchema,strict:r?n:void 0}});break;default:o.push({type:"unsupported-tool",tool:c});break}if(e==null)return{tools:i,toolChoice:void 0,toolWarnings:o};let a=e.type;switch(a){case"auto":case"none":case"required":return{tools:i,toolChoice:a,toolWarnings:o};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:e.toolName}},toolWarnings:o};default:{let c=a;throw new _t({functionality:`tool choice type: ${c}`})}}}s(lne,"prepareChatTools");var dne=class{static{s(this,"OpenAIChatLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y,g,f,_;let w=[],b=(y=await Hr({provider:"openai",providerOptions:h,schema:une}))!=null?y:{},S=(g=b.structuredOutputs)!=null?g:!0;o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),l?.type==="json"&&l.schema!=null&&!S&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:k,warnings:R}=sne({prompt:t,systemMessageMode:fne(this.modelId)});w.push(...R);let O=(f=b.strictJsonSchema)!=null?f:!1,C={model:this.modelId,logit_bias:b.logitBias,logprobs:b.logprobs===!0||typeof b.logprobs=="number"?!0:void 0,top_logprobs:typeof b.logprobs=="number"?b.logprobs:typeof b.logprobs=="boolean"&&b.logprobs?0:void 0,user:b.user,parallel_tool_calls:b.parallelToolCalls,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,response_format:l?.type==="json"?S&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,strict:O,name:(_=l.name)!=null?_:"response",description:l.description}}:{type:"json_object"}:void 0,stop:c,seed:d,verbosity:b.textVerbosity,max_completion_tokens:b.maxCompletionTokens,store:b.store,metadata:b.metadata,prediction:b.prediction,reasoning_effort:b.reasoningEffort,service_tier:b.serviceTier,prompt_cache_key:b.promptCacheKey,prompt_cache_retention:b.promptCacheRetention,safety_identifier:b.safetyIdentifier,messages:k};$M(this.modelId)?(C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),C.top_p!=null&&(C.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),C.frequency_penalty!=null&&(C.frequency_penalty=void 0,w.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),C.presence_penalty!=null&&(C.presence_penalty=void 0,w.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),C.logit_bias!=null&&(C.logit_bias=void 0,w.push({type:"other",message:"logitBias is not supported for reasoning models"})),C.logprobs!=null&&(C.logprobs=void 0,w.push({type:"other",message:"logprobs is not supported for reasoning models"})),C.top_logprobs!=null&&(C.top_logprobs=void 0,w.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),C.max_tokens!=null&&(C.max_completion_tokens==null&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),b.serviceTier==="flex"&&!pne(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),C.service_tier=void 0),b.serviceTier==="priority"&&!mne(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),C.service_tier=void 0);let{tools:$,toolChoice:P,toolWarnings:N}=lne({tools:p,toolChoice:m,structuredOutputs:S,strictJsonSchema:O});return{args:{...C,tools:$,tool_choice:P},warnings:[...w,...N]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g;let{args:f,warnings:_}=await this.getArgs(t),{responseHeaders:w,value:b,rawValue:S}=await Zr({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:f,failedResponseHandler:ho,successfulResponseHandler:Pn(ane),abortSignal:t.abortSignal,fetch:this.config.fetch}),k=b.choices[0],R=[],O=k.message.content;O!=null&&O.length>0&&R.push({type:"text",text:O});for(let N of(e=k.message.tool_calls)!=null?e:[])R.push({type:"tool-call",toolCallId:(r=N.id)!=null?r:Wn(),toolName:N.function.name,input:N.function.arguments});for(let N of(n=k.message.annotations)!=null?n:[])R.push({type:"source",sourceType:"url",id:Wn(),url:N.url,title:N.title});let C=(o=b.usage)==null?void 0:o.completion_tokens_details,$=(i=b.usage)==null?void 0:i.prompt_tokens_details,P={openai:{}};return C?.accepted_prediction_tokens!=null&&(P.openai.acceptedPredictionTokens=C?.accepted_prediction_tokens),C?.rejected_prediction_tokens!=null&&(P.openai.rejectedPredictionTokens=C?.rejected_prediction_tokens),((a=k.logprobs)==null?void 0:a.content)!=null&&(P.openai.logprobs=k.logprobs.content),{content:R,finishReason:xM(k.finish_reason),usage:{inputTokens:(l=(c=b.usage)==null?void 0:c.prompt_tokens)!=null?l:void 0,outputTokens:(p=(d=b.usage)==null?void 0:d.completion_tokens)!=null?p:void 0,totalTokens:(h=(m=b.usage)==null?void 0:m.total_tokens)!=null?h:void 0,reasoningTokens:(y=C?.reasoning_tokens)!=null?y:void 0,cachedInputTokens:(g=$?.cached_tokens)!=null?g:void 0},request:{body:f},response:{...hE(b),headers:w,body:S},warnings:_,providerMetadata:P}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await Zr({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:n,failedResponseHandler:ho,successfulResponseHandler:Xa(cne),abortSignal:t.abortSignal,fetch:this.config.fetch}),a=[],c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!1,p=!1,m={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(h){h.enqueue({type:"stream-start",warnings:r})},transform(h,y){var g,f,_,w,b,S,k,R,O,C,$,P,N,D,W,H,q,X,te,oe,ye,Se,We,Ve;if(t.includeRawChunks&&y.enqueue({type:"raw",rawValue:h.rawValue}),!h.success){c="error",y.enqueue({type:"error",error:h.error});return}let J=h.value;if("error"in J){c="error",y.enqueue({type:"error",error:J.error});return}if(!d){let U=hE(J);Object.values(U).some(Boolean)&&(d=!0,y.enqueue({type:"response-metadata",...hE(J)}))}J.usage!=null&&(l.inputTokens=(g=J.usage.prompt_tokens)!=null?g:void 0,l.outputTokens=(f=J.usage.completion_tokens)!=null?f:void 0,l.totalTokens=(_=J.usage.total_tokens)!=null?_:void 0,l.reasoningTokens=(b=(w=J.usage.completion_tokens_details)==null?void 0:w.reasoning_tokens)!=null?b:void 0,l.cachedInputTokens=(k=(S=J.usage.prompt_tokens_details)==null?void 0:S.cached_tokens)!=null?k:void 0,((R=J.usage.completion_tokens_details)==null?void 0:R.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=(O=J.usage.completion_tokens_details)==null?void 0:O.accepted_prediction_tokens),((C=J.usage.completion_tokens_details)==null?void 0:C.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=($=J.usage.completion_tokens_details)==null?void 0:$.rejected_prediction_tokens));let Ae=J.choices[0];if(Ae?.finish_reason!=null&&(c=xM(Ae.finish_reason)),((P=Ae?.logprobs)==null?void 0:P.content)!=null&&(m.openai.logprobs=Ae.logprobs.content),Ae?.delta==null)return;let fe=Ae.delta;if(fe.content!=null&&(p||(y.enqueue({type:"text-start",id:"0"}),p=!0),y.enqueue({type:"text-delta",id:"0",delta:fe.content})),fe.tool_calls!=null)for(let U of fe.tool_calls){let Ze=U.index;if(a[Ze]==null){if(U.type!=="function")throw new Nf({data:U,message:"Expected 'function' type."});if(U.id==null)throw new Nf({data:U,message:"Expected 'id' to be a string."});if(((N=U.function)==null?void 0:N.name)==null)throw new Nf({data:U,message:"Expected 'function.name' to be a string."});y.enqueue({type:"tool-input-start",id:U.id,toolName:U.function.name}),a[Ze]={id:U.id,type:"function",function:{name:U.function.name,arguments:(D=U.function.arguments)!=null?D:""},hasFinished:!1};let Et=a[Ze];((W=Et.function)==null?void 0:W.name)!=null&&((H=Et.function)==null?void 0:H.arguments)!=null&&(Et.function.arguments.length>0&&y.enqueue({type:"tool-input-delta",id:Et.id,delta:Et.function.arguments}),fE(Et.function.arguments)&&(y.enqueue({type:"tool-input-end",id:Et.id}),y.enqueue({type:"tool-call",toolCallId:(q=Et.id)!=null?q:Wn(),toolName:Et.function.name,input:Et.function.arguments}),Et.hasFinished=!0));continue}let bt=a[Ze];bt.hasFinished||(((X=U.function)==null?void 0:X.arguments)!=null&&(bt.function.arguments+=(oe=(te=U.function)==null?void 0:te.arguments)!=null?oe:""),y.enqueue({type:"tool-input-delta",id:bt.id,delta:(ye=U.function.arguments)!=null?ye:""}),((Se=bt.function)==null?void 0:Se.name)!=null&&((We=bt.function)==null?void 0:We.arguments)!=null&&fE(bt.function.arguments)&&(y.enqueue({type:"tool-input-end",id:bt.id}),y.enqueue({type:"tool-call",toolCallId:(Ve=bt.id)!=null?Ve:Wn(),toolName:bt.function.name,input:bt.function.arguments}),bt.hasFinished=!0))}if(fe.annotations!=null)for(let U of fe.annotations)y.enqueue({type:"source",sourceType:"url",id:Wn(),url:U.url,title:U.title})},flush(h){p&&h.enqueue({type:"text-end",id:"0"}),h.enqueue({type:"finish",finishReason:c,usage:l,...m!=null?{providerMetadata:m}:{}})}})),request:{body:n},response:{headers:o}}}};function $M(t){return(t.startsWith("o")||t.startsWith("gpt-5"))&&!t.startsWith("gpt-5-chat")}s($M,"isReasoningModel");function pne(t){return t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")}s(pne,"supportsFlexProcessing");function mne(t){return t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini")}s(mne,"supportsPriorityProcessing");function fne(t){var e,r;return $M(t)?(r=(e=hne[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}s(fne,"getSystemMessageMode");var hne={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function gne({prompt:t,user:e="user",assistant:r="assistant"}){let n="";t[0].role==="system"&&(n+=`${t[0].content}

`,t=t.slice(1));for(let{role:o,content:i}of t)switch(o){case"system":throw new Dj({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let a=i.map(c=>{switch(c.type){case"text":return c.text}}).filter(Boolean).join("");n+=`${e}:
${a}

`;break}case"assistant":{let a=i.map(c=>{switch(c.type){case"text":return c.text;case"tool-call":throw new _t({functionality:"tool-call messages"})}}).join("");n+=`${r}:
${a}

`;break}case"tool":throw new _t({functionality:"tool messages"});default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return n+=`${r}:
`,{prompt:n,stopSequences:[`
${e}:`]}}s(gne,"convertToOpenAICompletionPrompt");function TM({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}s(TM,"getResponseMetadata2");function EM(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(EM,"mapOpenAIFinishReason2");var yne=$t(()=>je(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}))),vne=$t(()=>je(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string().nullish(),index:u.number(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}),gE]))),kM=$t(()=>je(u.object({echo:u.boolean().optional(),logitBias:u.record(u.string(),u.number()).optional(),suffix:u.string().optional(),user:u.string().optional(),logprobs:u.union([u.boolean(),u.number()]).optional()}))),_ne=class{static{s(this,"OpenAICompletionLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={},this.modelId=t,this.config=e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,tools:d,toolChoice:p,seed:m,providerOptions:h}){let y=[],g={...await Hr({provider:"openai",providerOptions:h,schema:kM}),...await Hr({provider:this.providerOptionsName,providerOptions:h,schema:kM})};o!=null&&y.push({type:"unsupported-setting",setting:"topK"}),d?.length&&y.push({type:"unsupported-setting",setting:"tools"}),p!=null&&y.push({type:"unsupported-setting",setting:"toolChoice"}),l!=null&&l.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:f,stopSequences:_}=gne({prompt:t}),w=[..._??[],...c??[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,logprobs:g?.logprobs===!0?0:g?.logprobs===!1?void 0:g?.logprobs,suffix:g.suffix,user:g.user,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,seed:m,prompt:f,stop:w.length>0?w:void 0},warnings:y}}async doGenerate(t){var e,r,n;let{args:o,warnings:i}=await this.getArgs(t),{responseHeaders:a,value:c,rawValue:l}=await Zr({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:o,failedResponseHandler:ho,successfulResponseHandler:Pn(yne),abortSignal:t.abortSignal,fetch:this.config.fetch}),d=c.choices[0],p={openai:{}};return d.logprobs!=null&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:(e=c.usage)==null?void 0:e.prompt_tokens,outputTokens:(r=c.usage)==null?void 0:r.completion_tokens,totalTokens:(n=c.usage)==null?void 0:n.total_tokens},finishReason:EM(d.finish_reason),request:{body:o},response:{...TM(c),headers:a,body:l},providerMetadata:p,warnings:i}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await Zr({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:n,failedResponseHandler:ho,successfulResponseHandler:Xa(vne),abortSignal:t.abortSignal,fetch:this.config.fetch}),a="unknown",c={openai:{}},l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,m){if(t.includeRawChunks&&m.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){a="error",m.enqueue({type:"error",error:p.error});return}let h=p.value;if("error"in h){a="error",m.enqueue({type:"error",error:h.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...TM(h)}),m.enqueue({type:"text-start",id:"0"})),h.usage!=null&&(l.inputTokens=h.usage.prompt_tokens,l.outputTokens=h.usage.completion_tokens,l.totalTokens=h.usage.total_tokens);let y=h.choices[0];y?.finish_reason!=null&&(a=EM(y.finish_reason)),y?.logprobs!=null&&(c.openai.logprobs=y.logprobs),y?.text!=null&&y.text.length>0&&m.enqueue({type:"text-delta",id:"0",delta:y.text})},flush(p){d||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:a,providerMetadata:c,usage:l})}})),request:{body:n},response:{headers:o}}}},bne=$t(()=>je(u.object({dimensions:u.number().optional(),user:u.string().optional()}))),wne=$t(()=>je(u.object({data:u.array(u.object({embedding:u.array(u.number())})),usage:u.object({prompt_tokens:u.number()}).nullish()}))),Sne=class{static{s(this,"OpenAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){var o;if(t.length>this.maxEmbeddingsPerCall)throw new Df({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=(o=await Hr({provider:"openai",providerOptions:n,schema:bne}))!=null?o:{},{responseHeaders:a,value:c,rawValue:l}=await Zr({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Tr(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:ho,successfulResponseHandler:Pn(wne),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.data.map(d=>d.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,response:{headers:a,body:l}}}},xne=$t(()=>je(u.object({data:u.array(u.object({b64_json:u.string(),revised_prompt:u.string().nullish()}))}))),Tne={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},Ene=new Set(["gpt-image-1","gpt-image-1-mini"]),kne=class{static{s(this,"OpenAIImageModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=Tne[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:o,providerOptions:i,headers:a,abortSignal:c}){var l,d,p,m;let h=[];n!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),o!=null&&h.push({type:"unsupported-setting",setting:"seed"});let y=(p=(d=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:d.call(l))!=null?p:new Date,{value:g,responseHeaders:f}=await Zr({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Tr(this.config.headers(),a),body:{model:this.modelId,prompt:t,n:e,size:r,...(m=i.openai)!=null?m:{},...Ene.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:ho,successfulResponseHandler:Pn(xne),abortSignal:c,fetch:this.config.fetch});return{images:g.data.map(_=>_.b64_json),warnings:h,response:{timestamp:y,modelId:this.modelId,headers:f},providerMetadata:{openai:{images:g.data.map(_=>_.revised_prompt?{revisedPrompt:_.revised_prompt}:null)}}}}},Ine=Xt(()=>je(u.object({code:u.string().nullish(),containerId:u.string()}))),Pne=Xt(()=>je(u.object({outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullish()}))),Ane=Xt(()=>je(u.object({container:u.union([u.string(),u.object({fileIds:u.array(u.string()).optional()})]).optional()}))),Cne=In({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:Ine,outputSchema:Pne}),One=s((t={})=>Cne(t),"codeInterpreter"),RM=u.object({key:u.string(),type:u.enum(["eq","ne","gt","gte","lt","lte"]),value:u.union([u.string(),u.number(),u.boolean()])}),NM=u.object({type:u.enum(["and","or"]),filters:u.array(u.union([RM,u.lazy(()=>NM)]))}),$ne=Xt(()=>je(u.object({vectorStoreIds:u.array(u.string()),maxNumResults:u.number().optional(),ranking:u.object({ranker:u.string().optional(),scoreThreshold:u.number().optional()}).optional(),filters:u.union([RM,NM]).optional()}))),Rne=Xt(()=>je(u.object({queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),fileId:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullable()}))),Nne=In({id:"openai.file_search",name:"file_search",inputSchema:u.object({}),outputSchema:Rne}),Dne=Xt(()=>je(u.object({background:u.enum(["auto","opaque","transparent"]).optional(),inputFidelity:u.enum(["low","high"]).optional(),inputImageMask:u.object({fileId:u.string().optional(),imageUrl:u.string().optional()}).optional(),model:u.string().optional(),moderation:u.enum(["auto"]).optional(),outputCompression:u.number().int().min(0).max(100).optional(),outputFormat:u.enum(["png","jpeg","webp"]).optional(),partialImages:u.number().int().min(0).max(3).optional(),quality:u.enum(["auto","low","medium","high"]).optional(),size:u.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),jne=Xt(()=>je(u.object({}))),Mne=Xt(()=>je(u.object({result:u.string()}))),zne=In({id:"openai.image_generation",name:"image_generation",inputSchema:jne,outputSchema:Mne}),Une=s((t={})=>zne(t),"imageGeneration"),DM=Xt(()=>je(u.object({action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeoutMs:u.number().optional(),user:u.string().optional(),workingDirectory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}))),jM=Xt(()=>je(u.object({output:u.string()}))),Lne=In({id:"openai.local_shell",name:"local_shell",inputSchema:DM,outputSchema:jM}),qne=Xt(()=>je(u.object({externalWebAccess:u.boolean().optional(),filters:u.object({allowedDomains:u.array(u.string()).optional()}).optional(),searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Fne=Xt(()=>je(u.object({}))),Bne=Xt(()=>je(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})]),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).optional()}))),Vne=In({id:"openai.web_search",name:"web_search",inputSchema:Fne,outputSchema:Bne}),Hne=s((t={})=>Vne(t),"webSearch"),Zne=Xt(()=>je(u.object({searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Jne=Xt(()=>je(u.object({}))),Gne=Xt(()=>je(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}))),Kne=In({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:Jne,outputSchema:Gne}),Wne={codeInterpreter:One,fileSearch:Nne,imageGeneration:Une,localShell:Lne,webSearchPreview:Kne,webSearch:Hne};function IM(t,e){return e?e.some(r=>t.startsWith(r)):!1}s(IM,"isFileId");async function Qne({prompt:t,systemMessageMode:e,fileIdPrefixes:r,store:n,hasLocalShellTool:o=!1}){var i,a,c,l;let d=[],p=[];for(let{role:m,content:h}of t)switch(m){case"system":{switch(e){case"system":{d.push({role:"system",content:h});break}case"developer":{d.push({role:"developer",content:h});break}case"remove":{p.push({type:"other",message:"system messages are removed for this model"});break}default:{let y=e;throw new Error(`Unsupported system message mode: ${y}`)}}break}case"user":{d.push({role:"user",content:h.map((y,g)=>{var f,_,w;switch(y.type){case"text":return{type:"input_text",text:y.text};case"file":if(y.mediaType.startsWith("image/")){let b=y.mediaType==="image/*"?"image/jpeg":y.mediaType;return{type:"input_image",...y.data instanceof URL?{image_url:y.data.toString()}:typeof y.data=="string"&&IM(y.data,r)?{file_id:y.data}:{image_url:`data:${b};base64,${Li(y.data)}`},detail:(_=(f=y.providerOptions)==null?void 0:f.openai)==null?void 0:_.imageDetail}}else{if(y.mediaType==="application/pdf")return y.data instanceof URL?{type:"input_file",file_url:y.data.toString()}:{type:"input_file",...typeof y.data=="string"&&IM(y.data,r)?{file_id:y.data}:{filename:(w=y.filename)!=null?w:`part-${g}.pdf`,file_data:`data:application/pdf;base64,${Li(y.data)}`}};throw new _t({functionality:`file part media type ${y.mediaType}`})}}})});break}case"assistant":{let y={},g={};for(let f of h)switch(f.type){case"text":{let _=(a=(i=f.providerOptions)==null?void 0:i.openai)==null?void 0:a.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}d.push({role:"assistant",content:[{type:"output_text",text:f.text}],id:_});break}case"tool-call":{if(g[f.toolCallId]=f,f.providerExecuted)break;let _=(l=(c=f.providerOptions)==null?void 0:c.openai)==null?void 0:l.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}if(o&&f.toolName==="local_shell"){let w=await fo({value:f.input,schema:DM});d.push({type:"local_shell_call",call_id:f.toolCallId,id:_,action:{type:"exec",command:w.action.command,timeout_ms:w.action.timeoutMs,user:w.action.user,working_directory:w.action.workingDirectory,env:w.action.env}});break}d.push({type:"function_call",call_id:f.toolCallId,name:f.toolName,arguments:JSON.stringify(f.input),id:_});break}case"tool-result":{n?d.push({type:"item_reference",id:f.toolCallId}):p.push({type:"other",message:`Results for OpenAI tool ${f.toolName} are not sent to the API when store is false`});break}case"reasoning":{let _=await Hr({provider:"openai",providerOptions:f.providerOptions,schema:Xne}),w=_?.itemId;if(w!=null){let b=y[w];if(n)b===void 0&&(d.push({type:"item_reference",id:w}),y[w]={type:"reasoning",id:w,summary:[]});else{let S=[];f.text.length>0?S.push({type:"summary_text",text:f.text}):b!==void 0&&p.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(f)}.`}),b===void 0?(y[w]={type:"reasoning",id:w,encrypted_content:_?.reasoningEncryptedContent,summary:S},d.push(y[w])):(b.summary.push(...S),_?.reasoningEncryptedContent!=null&&(b.encrypted_content=_.reasoningEncryptedContent))}}else p.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(f)}.`});break}}break}case"tool":{for(let y of h){let g=y.output;if(o&&y.toolName==="local_shell"&&g.type==="json"){let _=await fo({value:g.value,schema:jM});d.push({type:"local_shell_call_output",call_id:y.toolCallId,output:_.output});break}let f;switch(g.type){case"text":case"error-text":f=g.value;break;case"json":case"error-json":f=JSON.stringify(g.value);break;case"content":f=g.value.map(_=>{switch(_.type){case"text":return{type:"input_text",text:_.text};case"media":return _.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${_.mediaType};base64,${_.data}`}:{type:"input_file",filename:"data",file_data:`data:${_.mediaType};base64,${_.data}`}}});break}d.push({type:"function_call_output",call_id:y.toolCallId,output:f})}break}default:{let y=m;throw new Error(`Unsupported role: ${y}`)}}return{input:d,warnings:p}}s(Qne,"convertToOpenAIResponsesInput");var Xne=u.object({itemId:u.string().nullish(),reasoningEncryptedContent:u.string().nullish()});function PM({finishReason:t,hasFunctionCall:e}){switch(t){case void 0:case null:return e?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return e?"tool-calls":"unknown"}}s(PM,"mapOpenAIResponseFinishReason");var Yne=$t(()=>je(u.union([u.object({type:u.literal("response.output_text.delta"),item_id:u.string(),delta:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}),u.object({type:u.enum(["response.completed","response.incomplete"]),response:u.object({incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.created"),response:u.object({id:u.string(),created_at:u.number(),model:u.string(),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.output_item.added"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("file_search_call"),id:u.string()}),u.object({type:u.literal("image_generation_call"),id:u.string()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),container_id:u.string(),code:u.string().nullable(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable(),status:u.string()})])}),u.object({type:u.literal("response.output_item.done"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string(),status:u.literal("completed")}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.literal("completed")})])}),u.object({type:u.literal("response.function_call_arguments.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.image_generation_call.partial_image"),item_id:u.string(),output_index:u.number(),partial_image_b64:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.done"),item_id:u.string(),output_index:u.number(),code:u.string()}),u.object({type:u.literal("response.output_text.annotation.added"),annotation:u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()})])}),u.object({type:u.literal("response.reasoning_summary_part.added"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("response.reasoning_summary_text.delta"),item_id:u.string(),summary_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.reasoning_summary_part.done"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("error"),sequence_number:u.number(),error:u.object({type:u.string(),code:u.string(),message:u.string(),param:u.string().nullish()})}),u.object({type:u.string()}).loose().transform(t=>({type:"unknown_chunk",message:t.type}))]))),eoe=$t(()=>je(u.object({id:u.string().optional(),created_at:u.number().optional(),error:u.object({message:u.string(),type:u.string(),param:u.string().nullish(),code:u.string()}).nullish(),model:u.string().optional(),output:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("message"),role:u.literal("assistant"),id:u.string(),content:u.array(u.object({type:u.literal("output_text"),text:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish(),annotations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()}),u.object({type:u.literal("container_file_citation"),container_id:u.string(),file_id:u.string(),filename:u.string().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),index:u.number().nullish()}),u.object({type:u.literal("file_path"),file_id:u.string(),index:u.number().nullish()})]))}))}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.union([u.string(),u.number(),u.boolean()])),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("function_call"),call_id:u.string(),name:u.string(),arguments:u.string(),id:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string().optional()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish(),summary:u.array(u.object({type:u.literal("summary_text"),text:u.string()}))})])).optional(),service_tier:u.string().nullish(),incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}).optional()}))),MM=20,toe=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],E4e=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...toe],roe=$t(()=>je(u.object({conversation:u.string().nullish(),include:u.array(u.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:u.string().nullish(),logprobs:u.union([u.boolean(),u.number().min(1).max(MM)]).optional(),maxToolCalls:u.number().nullish(),metadata:u.any().nullish(),parallelToolCalls:u.boolean().nullish(),previousResponseId:u.string().nullish(),promptCacheKey:u.string().nullish(),promptCacheRetention:u.enum(["in_memory","24h"]).nullish(),reasoningEffort:u.string().nullish(),reasoningSummary:u.string().nullish(),safetyIdentifier:u.string().nullish(),serviceTier:u.enum(["auto","flex","priority","default"]).nullish(),store:u.boolean().nullish(),strictJsonSchema:u.boolean().nullish(),textVerbosity:u.enum(["low","medium","high"]).nullish(),truncation:u.enum(["auto","disabled"]).nullish(),user:u.string().nullish()})));async function noe({tools:t,toolChoice:e,strictJsonSchema:r}){t=t?.length?t:void 0;let n=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let o=[];for(let a of t)switch(a.type){case"function":o.push({type:"function",name:a.name,description:a.description,parameters:a.inputSchema,strict:r});break;case"provider-defined":{switch(a.id){case"openai.file_search":{let c=await fo({value:a.args,schema:$ne});o.push({type:"file_search",vector_store_ids:c.vectorStoreIds,max_num_results:c.maxNumResults,ranking_options:c.ranking?{ranker:c.ranking.ranker,score_threshold:c.ranking.scoreThreshold}:void 0,filters:c.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.web_search_preview":{let c=await fo({value:a.args,schema:Zne});o.push({type:"web_search_preview",search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.web_search":{let c=await fo({value:a.args,schema:qne});o.push({type:"web_search",filters:c.filters!=null?{allowed_domains:c.filters.allowedDomains}:void 0,external_web_access:c.externalWebAccess,search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.code_interpreter":{let c=await fo({value:a.args,schema:Ane});o.push({type:"code_interpreter",container:c.container==null?{type:"auto",file_ids:void 0}:typeof c.container=="string"?c.container:{type:"auto",file_ids:c.container.fileIds}});break}case"openai.image_generation":{let c=await fo({value:a.args,schema:Dne});o.push({type:"image_generation",background:c.background,input_fidelity:c.inputFidelity,input_image_mask:c.inputImageMask?{file_id:c.inputImageMask.fileId,image_url:c.inputImageMask.imageUrl}:void 0,model:c.model,size:c.size,quality:c.quality,moderation:c.moderation,output_format:c.outputFormat,output_compression:c.outputCompression});break}}break}default:n.push({type:"unsupported-tool",tool:a});break}if(e==null)return{tools:o,toolChoice:void 0,toolWarnings:n};let i=e.type;switch(i){case"auto":case"none":case"required":return{tools:o,toolChoice:i,toolWarnings:n};case"tool":return{tools:o,toolChoice:e.toolName==="code_interpreter"||e.toolName==="file_search"||e.toolName==="image_generation"||e.toolName==="web_search_preview"||e.toolName==="web_search"?{type:e.toolName}:{type:"function",name:e.toolName},toolWarnings:n};default:{let a=i;throw new _t({functionality:`tool choice type: ${a}`})}}}s(noe,"prepareResponsesTools");var ooe=class{static{s(this,"OpenAIResponsesLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({maxOutputTokens:t,temperature:e,stopSequences:r,topP:n,topK:o,presencePenalty:i,frequencyPenalty:a,seed:c,prompt:l,providerOptions:d,tools:p,toolChoice:m,responseFormat:h}){var y,g,f,_;let w=[],b=foe(this.modelId);o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),c!=null&&w.push({type:"unsupported-setting",setting:"seed"}),i!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),a!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});let S=await Hr({provider:"openai",providerOptions:d,schema:roe});S?.conversation&&S?.previousResponseId&&w.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});let{input:k,warnings:R}=await Qne({prompt:l,systemMessageMode:b.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(y=S?.store)!=null?y:!0,hasLocalShellTool:P("openai.local_shell")});w.push(...R);let O=(g=S?.strictJsonSchema)!=null?g:!1,C=S?.include;function $(oe){C==null?C=[oe]:C.includes(oe)||(C=[...C,oe])}s($,"addInclude");function P(oe){return p?.find(ye=>ye.type==="provider-defined"&&ye.id===oe)!=null}s(P,"hasOpenAITool");let N=typeof S?.logprobs=="number"?S?.logprobs:S?.logprobs===!0?MM:void 0;N&&$("message.output_text.logprobs");let D=(f=p?.find(oe=>oe.type==="provider-defined"&&(oe.id==="openai.web_search"||oe.id==="openai.web_search_preview")))==null?void 0:f.name;D&&$("web_search_call.action.sources"),P("openai.code_interpreter")&&$("code_interpreter_call.outputs");let W=S?.store;W===!1&&b.isReasoningModel&&$("reasoning.encrypted_content");let H={model:this.modelId,input:k,temperature:e,top_p:n,max_output_tokens:t,...(h?.type==="json"||S?.textVerbosity)&&{text:{...h?.type==="json"&&{format:h.schema!=null?{type:"json_schema",strict:O,name:(_=h.name)!=null?_:"response",description:h.description,schema:h.schema}:{type:"json_object"}},...S?.textVerbosity&&{verbosity:S.textVerbosity}}},conversation:S?.conversation,max_tool_calls:S?.maxToolCalls,metadata:S?.metadata,parallel_tool_calls:S?.parallelToolCalls,previous_response_id:S?.previousResponseId,store:W,user:S?.user,instructions:S?.instructions,service_tier:S?.serviceTier,include:C,prompt_cache_key:S?.promptCacheKey,prompt_cache_retention:S?.promptCacheRetention,safety_identifier:S?.safetyIdentifier,top_logprobs:N,truncation:S?.truncation,...b.isReasoningModel&&(S?.reasoningEffort!=null||S?.reasoningSummary!=null)&&{reasoning:{...S?.reasoningEffort!=null&&{effort:S.reasoningEffort},...S?.reasoningSummary!=null&&{summary:S.reasoningSummary}}}};b.isReasoningModel?(H.temperature!=null&&(H.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),H.top_p!=null&&(H.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(S?.reasoningEffort!=null&&w.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),S?.reasoningSummary!=null&&w.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),S?.serviceTier==="flex"&&!b.supportsFlexProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete H.service_tier),S?.serviceTier==="priority"&&!b.supportsPriorityProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete H.service_tier);let{tools:q,toolChoice:X,toolWarnings:te}=await noe({tools:p,toolChoice:m,strictJsonSchema:O});return{webSearchToolName:D,args:{...H,tools:q,tool_choice:X},warnings:[...w,...te],store:W}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S;let{args:k,warnings:R,webSearchToolName:O}=await this.getArgs(t),C=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:$,value:P,rawValue:N}=await Zr({url:C,headers:Tr(this.config.headers(),t.headers),body:k,failedResponseHandler:ho,successfulResponseHandler:Pn(eoe),abortSignal:t.abortSignal,fetch:this.config.fetch});if(P.error)throw new Ge({message:P.error.message,url:C,requestBodyValues:k,statusCode:400,responseHeaders:$,responseBody:N,isRetryable:!1});let D=[],W=[],H=!1;for(let te of P.output)switch(te.type){case"reasoning":{te.summary.length===0&&te.summary.push({type:"summary_text",text:""});for(let oe of te.summary)D.push({type:"reasoning",text:oe.text,providerMetadata:{openai:{itemId:te.id,reasoningEncryptedContent:(e=te.encrypted_content)!=null?e:null}}});break}case"image_generation_call":{D.push({type:"tool-call",toolCallId:te.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:te.id,toolName:"image_generation",result:{result:te.result},providerExecuted:!0});break}case"local_shell_call":{D.push({type:"tool-call",toolCallId:te.call_id,toolName:"local_shell",input:JSON.stringify({action:te.action}),providerMetadata:{openai:{itemId:te.id}}});break}case"message":{for(let oe of te.content){(n=(r=t.providerOptions)==null?void 0:r.openai)!=null&&n.logprobs&&oe.logprobs&&W.push(oe.logprobs),D.push({type:"text",text:oe.text,providerMetadata:{openai:{itemId:te.id}}});for(let ye of oe.annotations)ye.type==="url_citation"?D.push({type:"source",sourceType:"url",id:(a=(i=(o=this.config).generateId)==null?void 0:i.call(o))!=null?a:Wn(),url:ye.url,title:ye.title}):ye.type==="file_citation"&&D.push({type:"source",sourceType:"document",id:(d=(l=(c=this.config).generateId)==null?void 0:l.call(c))!=null?d:Wn(),mediaType:"text/plain",title:(m=(p=ye.quote)!=null?p:ye.filename)!=null?m:"Document",filename:(h=ye.filename)!=null?h:ye.file_id,...ye.file_id?{providerMetadata:{openai:{fileId:ye.file_id}}}:{}})}break}case"function_call":{H=!0,D.push({type:"tool-call",toolCallId:te.call_id,toolName:te.name,input:te.arguments,providerMetadata:{openai:{itemId:te.id}}});break}case"web_search_call":{D.push({type:"tool-call",toolCallId:te.id,toolName:O??"web_search",input:JSON.stringify({}),providerExecuted:!0}),D.push({type:"tool-result",toolCallId:te.id,toolName:O??"web_search",result:CM(te.action),providerExecuted:!0});break}case"computer_call":{D.push({type:"tool-call",toolCallId:te.id,toolName:"computer_use",input:"",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:te.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:te.status||"completed"},providerExecuted:!0});break}case"file_search_call":{D.push({type:"tool-call",toolCallId:te.id,toolName:"file_search",input:"{}",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:te.id,toolName:"file_search",result:{queries:te.queries,results:(g=(y=te.results)==null?void 0:y.map(oe=>({attributes:oe.attributes,fileId:oe.file_id,filename:oe.filename,score:oe.score,text:oe.text})))!=null?g:null},providerExecuted:!0});break}case"code_interpreter_call":{D.push({type:"tool-call",toolCallId:te.id,toolName:"code_interpreter",input:JSON.stringify({code:te.code,containerId:te.container_id}),providerExecuted:!0}),D.push({type:"tool-result",toolCallId:te.id,toolName:"code_interpreter",result:{outputs:te.outputs},providerExecuted:!0});break}}let q={openai:{...P.id!=null?{responseId:P.id}:{}}};W.length>0&&(q.openai.logprobs=W),typeof P.service_tier=="string"&&(q.openai.serviceTier=P.service_tier);let X=P.usage;return{content:D,finishReason:PM({finishReason:(f=P.incomplete_details)==null?void 0:f.reason,hasFunctionCall:H}),usage:{inputTokens:X.input_tokens,outputTokens:X.output_tokens,totalTokens:X.input_tokens+X.output_tokens,reasoningTokens:(w=(_=X.output_tokens_details)==null?void 0:_.reasoning_tokens)!=null?w:void 0,cachedInputTokens:(S=(b=X.input_tokens_details)==null?void 0:b.cached_tokens)!=null?S:void 0},request:{body:k},response:{id:P.id,timestamp:new Date(P.created_at*1e3),modelId:P.model,headers:$,body:N},providerMetadata:q,warnings:R}}async doStream(t){let{args:e,warnings:r,webSearchToolName:n,store:o}=await this.getArgs(t),{responseHeaders:i,value:a}=await Zr({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:ho,successfulResponseHandler:Xa(Yne),abortSignal:t.abortSignal,fetch:this.config.fetch}),c=this,l="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],m=null,h={},y=[],g=!1,f={},_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var S,k,R,O,C,$,P,N,D,W,H,q,X,te,oe,ye,Se,We,Ve,J,Ae,fe;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){l="error",b.enqueue({type:"error",error:w.error});return}let U=w.value;if(AM(U))U.item.type==="function_call"?(h[U.output_index]={toolName:U.item.name,toolCallId:U.item.call_id},b.enqueue({type:"tool-input-start",id:U.item.call_id,toolName:U.item.name})):U.item.type==="web_search_call"?(h[U.output_index]={toolName:n??"web_search",toolCallId:U.item.id},b.enqueue({type:"tool-input-start",id:U.item.id,toolName:n??"web_search",providerExecuted:!0}),b.enqueue({type:"tool-input-end",id:U.item.id}),b.enqueue({type:"tool-call",toolCallId:U.item.id,toolName:n??"web_search",input:JSON.stringify({}),providerExecuted:!0})):U.item.type==="computer_call"?(h[U.output_index]={toolName:"computer_use",toolCallId:U.item.id},b.enqueue({type:"tool-input-start",id:U.item.id,toolName:"computer_use",providerExecuted:!0})):U.item.type==="code_interpreter_call"?(h[U.output_index]={toolName:"code_interpreter",toolCallId:U.item.id,codeInterpreter:{containerId:U.item.container_id}},b.enqueue({type:"tool-input-start",id:U.item.id,toolName:"code_interpreter",providerExecuted:!0}),b.enqueue({type:"tool-input-delta",id:U.item.id,delta:`{"containerId":"${U.item.container_id}","code":"`})):U.item.type==="file_search_call"?b.enqueue({type:"tool-call",toolCallId:U.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):U.item.type==="image_generation_call"?b.enqueue({type:"tool-call",toolCallId:U.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):U.item.type==="message"?(y.splice(0,y.length),b.enqueue({type:"text-start",id:U.item.id,providerMetadata:{openai:{itemId:U.item.id}}})):AM(U)&&U.item.type==="reasoning"&&(f[U.item.id]={encryptedContent:U.item.encrypted_content,summaryParts:{0:"active"}},b.enqueue({type:"reasoning-start",id:`${U.item.id}:0`,providerMetadata:{openai:{itemId:U.item.id,reasoningEncryptedContent:(S=U.item.encrypted_content)!=null?S:null}}}));else if(soe(U)){if(U.item.type==="message")b.enqueue({type:"text-end",id:U.item.id,providerMetadata:{openai:{itemId:U.item.id,...y.length>0&&{annotations:y}}}});else if(U.item.type==="function_call")h[U.output_index]=void 0,g=!0,b.enqueue({type:"tool-input-end",id:U.item.call_id}),b.enqueue({type:"tool-call",toolCallId:U.item.call_id,toolName:U.item.name,input:U.item.arguments,providerMetadata:{openai:{itemId:U.item.id}}});else if(U.item.type==="web_search_call")h[U.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:U.item.id,toolName:n??"web_search",result:CM(U.item.action),providerExecuted:!0});else if(U.item.type==="computer_call")h[U.output_index]=void 0,b.enqueue({type:"tool-input-end",id:U.item.id}),b.enqueue({type:"tool-call",toolCallId:U.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),b.enqueue({type:"tool-result",toolCallId:U.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:U.item.status||"completed"},providerExecuted:!0});else if(U.item.type==="file_search_call")h[U.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:U.item.id,toolName:"file_search",result:{queries:U.item.queries,results:(R=(k=U.item.results)==null?void 0:k.map(Ze=>({attributes:Ze.attributes,fileId:Ze.file_id,filename:Ze.filename,score:Ze.score,text:Ze.text})))!=null?R:null},providerExecuted:!0});else if(U.item.type==="code_interpreter_call")h[U.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:U.item.id,toolName:"code_interpreter",result:{outputs:U.item.outputs},providerExecuted:!0});else if(U.item.type==="image_generation_call")b.enqueue({type:"tool-result",toolCallId:U.item.id,toolName:"image_generation",result:{result:U.item.result},providerExecuted:!0});else if(U.item.type==="local_shell_call")h[U.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:U.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:U.item.action.command,timeoutMs:U.item.action.timeout_ms,user:U.item.action.user,workingDirectory:U.item.action.working_directory,env:U.item.action.env}}),providerMetadata:{openai:{itemId:U.item.id}}});else if(U.item.type==="reasoning"){let Ze=f[U.item.id],bt=Object.entries(Ze.summaryParts).filter(([Et,Jr])=>Jr==="active"||Jr==="can-conclude").map(([Et])=>Et);for(let Et of bt)b.enqueue({type:"reasoning-end",id:`${U.item.id}:${Et}`,providerMetadata:{openai:{itemId:U.item.id,reasoningEncryptedContent:(O=U.item.encrypted_content)!=null?O:null}}});delete f[U.item.id]}}else if(uoe(U)){let Ze=h[U.output_index];Ze!=null&&b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:U.delta})}else if(loe(U)){let Ze=h[U.output_index];Ze!=null&&b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:JSON.stringify(U.delta).slice(1,-1)})}else if(doe(U)){let Ze=h[U.output_index];Ze!=null&&(b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:'"}'}),b.enqueue({type:"tool-input-end",id:Ze.toolCallId}),b.enqueue({type:"tool-call",toolCallId:Ze.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:U.code,containerId:Ze.codeInterpreter.containerId}),providerExecuted:!0}))}else if(coe(U))m=U.response.id,b.enqueue({type:"response-metadata",id:U.response.id,timestamp:new Date(U.response.created_at*1e3),modelId:U.response.model});else if(ioe(U))b.enqueue({type:"text-delta",id:U.item_id,delta:U.delta}),($=(C=t.providerOptions)==null?void 0:C.openai)!=null&&$.logprobs&&U.logprobs&&p.push(U.logprobs);else if(U.type==="response.reasoning_summary_part.added"){if(U.summary_index>0){let Ze=f[U.item_id];Ze.summaryParts[U.summary_index]="active";for(let bt of Object.keys(Ze.summaryParts))Ze.summaryParts[bt]==="can-conclude"&&(b.enqueue({type:"reasoning-end",id:`${U.item_id}:${bt}`,providerMetadata:{openai:{itemId:U.item_id}}}),Ze.summaryParts[bt]="concluded");b.enqueue({type:"reasoning-start",id:`${U.item_id}:${U.summary_index}`,providerMetadata:{openai:{itemId:U.item_id,reasoningEncryptedContent:(N=(P=f[U.item_id])==null?void 0:P.encryptedContent)!=null?N:null}}})}}else U.type==="response.reasoning_summary_text.delta"?b.enqueue({type:"reasoning-delta",id:`${U.item_id}:${U.summary_index}`,delta:U.delta,providerMetadata:{openai:{itemId:U.item_id}}}):U.type==="response.reasoning_summary_part.done"?o?(b.enqueue({type:"reasoning-end",id:`${U.item_id}:${U.summary_index}`,providerMetadata:{openai:{itemId:U.item_id}}}),f[U.item_id].summaryParts[U.summary_index]="concluded"):f[U.item_id].summaryParts[U.summary_index]="can-conclude":aoe(U)?(l=PM({finishReason:(D=U.response.incomplete_details)==null?void 0:D.reason,hasFunctionCall:g}),d.inputTokens=U.response.usage.input_tokens,d.outputTokens=U.response.usage.output_tokens,d.totalTokens=U.response.usage.input_tokens+U.response.usage.output_tokens,d.reasoningTokens=(H=(W=U.response.usage.output_tokens_details)==null?void 0:W.reasoning_tokens)!=null?H:void 0,d.cachedInputTokens=(X=(q=U.response.usage.input_tokens_details)==null?void 0:q.cached_tokens)!=null?X:void 0,typeof U.response.service_tier=="string"&&(_=U.response.service_tier)):poe(U)?(y.push(U.annotation),U.annotation.type==="url_citation"?b.enqueue({type:"source",sourceType:"url",id:(ye=(oe=(te=c.config).generateId)==null?void 0:oe.call(te))!=null?ye:Wn(),url:U.annotation.url,title:U.annotation.title}):U.annotation.type==="file_citation"&&b.enqueue({type:"source",sourceType:"document",id:(Ve=(We=(Se=c.config).generateId)==null?void 0:We.call(Se))!=null?Ve:Wn(),mediaType:"text/plain",title:(Ae=(J=U.annotation.quote)!=null?J:U.annotation.filename)!=null?Ae:"Document",filename:(fe=U.annotation.filename)!=null?fe:U.annotation.file_id,...U.annotation.file_id?{providerMetadata:{openai:{fileId:U.annotation.file_id}}}:{}})):moe(U)&&b.enqueue({type:"error",error:U})},flush(w){let b={openai:{responseId:m}};p.length>0&&(b.openai.logprobs=p),_!==void 0&&(b.openai.serviceTier=_),w.enqueue({type:"finish",finishReason:l,usage:d,providerMetadata:b})}})),request:{body:e},response:{headers:i}}}};function ioe(t){return t.type==="response.output_text.delta"}s(ioe,"isTextDeltaChunk");function soe(t){return t.type==="response.output_item.done"}s(soe,"isResponseOutputItemDoneChunk");function aoe(t){return t.type==="response.completed"||t.type==="response.incomplete"}s(aoe,"isResponseFinishedChunk");function coe(t){return t.type==="response.created"}s(coe,"isResponseCreatedChunk");function uoe(t){return t.type==="response.function_call_arguments.delta"}s(uoe,"isResponseFunctionCallArgumentsDeltaChunk");function loe(t){return t.type==="response.code_interpreter_call_code.delta"}s(loe,"isResponseCodeInterpreterCallCodeDeltaChunk");function doe(t){return t.type==="response.code_interpreter_call_code.done"}s(doe,"isResponseCodeInterpreterCallCodeDoneChunk");function AM(t){return t.type==="response.output_item.added"}s(AM,"isResponseOutputItemAddedChunk");function poe(t){return t.type==="response.output_text.annotation.added"}s(poe,"isResponseAnnotationAddedChunk");function moe(t){return t.type==="error"}s(moe,"isErrorChunk");function foe(t){let e=t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),r=t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini"),n={systemMessageMode:"system",supportsFlexProcessing:e,supportsPriorityProcessing:r};return t.startsWith("gpt-5-chat")?{...n,isReasoningModel:!1}:t.startsWith("o")||t.startsWith("gpt-5")||t.startsWith("codex-")||t.startsWith("computer-use")?{...n,isReasoningModel:!0,systemMessageMode:"developer"}:{...n,isReasoningModel:!1}}s(foe,"getResponsesModelConfig");function CM(t){var e;switch(t.type){case"search":return{action:{type:"search",query:(e=t.query)!=null?e:void 0},...t.sources!=null&&{sources:t.sources}};case"open_page":return{action:{type:"openPage",url:t.url}};case"find":return{action:{type:"find",url:t.url,pattern:t.pattern}}}}s(CM,"mapWebSearchOutput");var hoe=$t(()=>je(u.object({instructions:u.string().nullish(),speed:u.number().min(.25).max(4).default(1).nullish()}))),goe=class{static{s(this,"OpenAISpeechModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:t,voice:e="alloy",outputFormat:r="mp3",speed:n,instructions:o,language:i,providerOptions:a}){let c=[],l=await Hr({provider:"openai",providerOptions:a,schema:hoe}),d={model:this.modelId,input:t,voice:e,response_format:"mp3",speed:n,instructions:o};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?d.response_format=r:c.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),l){let p={};for(let m in p){let h=p[m];h!==void 0&&(d[m]=h)}}return i&&c.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:d,warnings:c}}async doGenerate(t){var e,r,n;let o=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{requestBody:i,warnings:a}=await this.getArgs(t),{value:c,responseHeaders:l,rawValue:d}=await Zr({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),body:i,failedResponseHandler:ho,successfulResponseHandler:hM(),abortSignal:t.abortSignal,fetch:this.config.fetch});return{audio:c,warnings:a,request:{body:JSON.stringify(i)},response:{timestamp:o,modelId:this.modelId,headers:l,body:d}}}},yoe=$t(()=>je(u.object({text:u.string(),language:u.string().nullish(),duration:u.number().nullish(),words:u.array(u.object({word:u.string(),start:u.number(),end:u.number()})).nullish(),segments:u.array(u.object({id:u.number(),seek:u.number(),start:u.number(),end:u.number(),text:u.string(),tokens:u.array(u.number()),temperature:u.number(),avg_logprob:u.number(),compression_ratio:u.number(),no_speech_prob:u.number()})).nullish()}))),voe=$t(()=>je(u.object({include:u.array(u.string()).optional(),language:u.string().optional(),prompt:u.string().optional(),temperature:u.number().min(0).max(1).default(0).optional(),timestampGranularities:u.array(u.enum(["word","segment"])).default(["segment"]).optional()}))),OM={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},_oe=class{static{s(this,"OpenAITranscriptionModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:t,mediaType:e,providerOptions:r}){let n=[],o=await Hr({provider:"openai",providerOptions:r,schema:voe}),i=new FormData,a=t instanceof Uint8Array?new Blob([t]):new Blob([wM(t)]);i.append("model",this.modelId);let c=lM(e);if(i.append("file",new File([a],"audio",{type:e}),`audio.${c}`),o){let l={include:o.include,language:o.language,prompt:o.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:o.temperature,timestamp_granularities:o.timestampGranularities};for(let[d,p]of Object.entries(l))if(p!=null)if(Array.isArray(p))for(let m of p)i.append(`${d}[]`,String(m));else i.append(d,String(p))}return{formData:i,warnings:n}}async doGenerate(t){var e,r,n,o,i,a,c,l;let d=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{formData:p,warnings:m}=await this.getArgs(t),{value:h,responseHeaders:y,rawValue:g}=await pM({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:Tr(this.config.headers(),t.headers),formData:p,failedResponseHandler:ho,successfulResponseHandler:Pn(yoe),abortSignal:t.abortSignal,fetch:this.config.fetch}),f=h.language!=null&&h.language in OM?OM[h.language]:void 0;return{text:h.text,segments:(c=(a=(o=h.segments)==null?void 0:o.map(_=>({text:_.text,startSecond:_.start,endSecond:_.end})))!=null?a:(i=h.words)==null?void 0:i.map(_=>({text:_.word,startSecond:_.start,endSecond:_.end})))!=null?c:[],language:f,durationInSeconds:(l=h.duration)!=null?l:void 0,warnings:m,response:{timestamp:d,modelId:this.modelId,headers:y,body:g}}}},boe="2.0.74";function woe(t={}){var e,r;let n=(e=SM(uM({settingValue:t.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?e:"https://api.openai.com/v1",o=(r=t.name)!=null?r:"openai",i=s(()=>dE({Authorization:`Bearer ${cM({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers},`ai-sdk/openai/${boe}`),"getHeaders"),a=s(f=>new dne(f,{provider:`${o}.chat`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createChatModel"),c=s(f=>new _ne(f,{provider:`${o}.completion`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createCompletionModel"),l=s(f=>new Sne(f,{provider:`${o}.embedding`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createEmbeddingModel"),d=s(f=>new kne(f,{provider:`${o}.image`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createImageModel"),p=s(f=>new _oe(f,{provider:`${o}.transcription`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createTranscriptionModel"),m=s(f=>new goe(f,{provider:`${o}.speech`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createSpeechModel"),h=s(f=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return y(f)},"createLanguageModel"),y=s(f=>new ooe(f,{provider:`${o}.responses`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch,fileIdPrefixes:["file-"]}),"createResponsesModel"),g=s(function(f){return h(f)},"provider");return g.languageModel=h,g.chat=a,g.completion=c,g.responses=y,g.embedding=l,g.textEmbedding=l,g.textEmbeddingModel=l,g.image=d,g.imageModel=d,g.transcription=p,g.transcriptionModel=p,g.speech=m,g.speechModel=m,g.tools=Wne,g}s(woe,"createOpenAI");var yE=woe();var zM=u.enum(["openai","anthropic","google"]),Soe={openai:{default:s(()=>yE("gpt-4o"),"default"),fast:s(()=>yE("gpt-4o-mini"),"fast"),envKey:"OPENAI_API_KEY"},anthropic:{default:s(()=>XT("claude-3-5-sonnet-latest"),"default"),fast:s(()=>XT("claude-3-5-haiku-latest"),"fast"),envKey:"ANTHROPIC_API_KEY"},google:{default:s(()=>sE("gemini-1.5-pro-latest"),"default"),fast:s(()=>sE("gemini-1.5-flash-latest"),"fast"),envKey:"GOOGLE_GENERATIVE_AI_API_KEY"}};function UM(t,e="default"){return Soe[t][e]()}s(UM,"getModel");function LM(){let t=[];return process.env.OPENAI_API_KEY&&t.push("openai"),process.env.ANTHROPIC_API_KEY&&t.push("anthropic"),process.env.GOOGLE_GENERATIVE_AI_API_KEY&&t.push("google"),t.length>0?t:["google"]}s(LM,"getAvailableProviders");var xoe=[/ignore\s+(all\s+)?(previous|above|prior)\s+instructions/i,/disregard\s+(all\s+)?(previous|prior)\s+(instructions|context)/i,/you\s+are\s+now/i,/new\s+instructions:/i,/system:\s*/i,/\[INST\]/i,/<\/s>/i,/DROP\s+TABLE/i,/DELETE\s+FROM\s+\w+\s*;/i,/UPDATE\s+\w+\s+SET.*WHERE\s+1\s*=\s*1/i,/;\s*--/];function qM(t){for(let r of xoe)if(r.test(t))return{isSafe:!1,reason:`Potential injection detected: ${r.source}`};return{isSafe:!0,sanitizedInput:[...t].filter(r=>{let n=r.charCodeAt(0);return n>=32&&n!==127}).join("").trim()}}s(qM,"checkPromptInjection");var Toe=new Set(["password","password_hash","two_factor_secret","two_factor_enabled","voice_sample_encrypted","voice_biometric_enabled","biometric_enabled","api_token","refresh_token","belvo_link_token","session_token"]),FM={cpf:s(t=>t?`***.***.***-${t.slice(-2)}`:"[n\xE3o informado]","cpf"),account_number:s(t=>t?`****${t.slice(-4)}`:"[n\xE3o informado]","account_number"),phone:s(t=>t?`(**) *****-${t.slice(-4)}`:"[n\xE3o informado]","phone")};function go(t){if(!t)return{};let e={};for(let[r,n]of Object.entries(t))if(!Toe.has(r.toLowerCase())){if(r.toLowerCase()in FM&&typeof n=="string"){e[r]=FM[r.toLowerCase()](n);continue}if(n&&typeof n=="object"){Array.isArray(n)?e[r]=n.map(o=>typeof o=="object"&&o!==null?go(o):o):e[r]=go(n);continue}e[r]=n}return e}s(go,"filterSensitiveData");function BM(t,e){let r=u.object({includeInactive:u.boolean().default(!1).describe("Incluir contas inativas")}),n=u.object({accountId:u.string().uuid().optional().describe("ID da conta (omitir para total)")});return{listAccounts:{description:"Lista todas as contas banc\xE1rias do usu\xE1rio.",parameters:r,execute:s(async o=>{let{includeInactive:i}=o,a=[Z(se.userId,t)];i||a.push(Z(se.isActive,!0));let c=await e.select({id:se.id,institutionName:se.institutionName,accountType:se.accountType,balance:se.balance,availableBalance:se.availableBalance,currency:se.currency,isActive:se.isActive,isPrimary:se.isPrimary,lastSync:se.lastSync}).from(se).where(xe(...a)).orderBy(jt(se.isPrimary)),l=c.reduce((d,p)=>d+Number(p.balance??0),0);return{accounts:c.map(go),totalBalance:l,count:c.length}},"execute")},getAccountBalance:{description:"Obt\xE9m saldo atual de uma conta espec\xEDfica ou total de todas as contas.",parameters:n,execute:s(async o=>{let{accountId:i}=o;if(i){let[d]=await e.select({id:se.id,institutionName:se.institutionName,balance:se.balance,availableBalance:se.availableBalance,currency:se.currency,lastSync:se.lastSync}).from(se).where(xe(Z(se.id,i),Z(se.userId,t))).limit(1);if(!d)throw new Error("Conta n\xE3o encontrada");return go(d)}let a=await e.select({balance:se.balance,availableBalance:se.availableBalance,currency:se.currency}).from(se).where(xe(Z(se.userId,t),Z(se.isActive,!0))),c=a.reduce((d,p)=>d+Number(p.balance??0),0),l=a.reduce((d,p)=>d+Number(p.availableBalance??0),0);return{totalBalance:c,totalAvailable:l,currency:"BRL",accountCount:a.length}},"execute")}}}s(BM,"createAccountTools");function VM(t,e){let r=u.object({includeSystem:u.boolean().default(!0).describe("Incluir categorias do sistema")}),n=u.object({name:u.string().min(1).max(50).describe("Nome da categoria"),color:u.string().regex(/^#[0-9A-Fa-f]{6}$/).default("#6B7280").describe("Cor em hexadecimal"),icon:u.string().default("circle").describe("Nome do \xEDcone")});return{listCategories:{description:"Lista todas as categorias de transa\xE7\xE3o dispon\xEDveis.",parameters:r,execute:s(async o=>{let{includeSystem:i}=o,a=ts(Z(Re.userId,t),ep(Re.userId)),c=await e.select({id:Re.id,name:Re.name,color:Re.color,icon:Re.icon,isSystem:Re.isSystem,parentId:Re.parentId}).from(Re).where(a);return i||(c=c.filter(l=>!l.isSystem)),{categories:c,count:c.length}},"execute")},createCategory:{description:"Cria uma nova categoria personalizada.",parameters:n,execute:s(async o=>{let{name:i,color:a,icon:c}=o,[l]=await e.insert(Re).values({userId:t,name:i,color:a,icon:c,isSystem:!1}).returning();return{success:!0,category:l}},"execute")}}}s(VM,"createCategoryTools");function HM(t,e){let r=u.object({startDate:u.string().datetime().optional().describe("Data inicial no formato ISO (YYYY-MM-DD)"),endDate:u.string().datetime().optional().describe("Data final no formato ISO (YYYY-MM-DD)"),categoryId:u.string().uuid().optional().describe("ID da categoria para filtrar"),accountId:u.string().uuid().optional().describe("ID da conta para filtrar"),minAmount:u.number().optional().describe("Valor m\xEDnimo da transa\xE7\xE3o"),maxAmount:u.number().optional().describe("Valor m\xE1ximo da transa\xE7\xE3o"),searchTerm:u.string().optional().describe("Termo para buscar na descri\xE7\xE3o"),limit:u.number().min(1).max(100).default(20).describe("N\xFAmero m\xE1ximo de resultados"),offset:u.number().min(0).default(0).describe("Pular N resultados para pagina\xE7\xE3o")}),n=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),o=u.object({amount:u.number().describe("Valor da transa\xE7\xE3o (positivo para receita, negativo para despesa)"),description:u.string().min(1).max(255).describe("Descri\xE7\xE3o da transa\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("ID da categoria"),accountId:u.string().uuid().optional().describe("ID da conta banc\xE1ria"),transactionDate:u.string().datetime().optional().describe("Data da transa\xE7\xE3o (padr\xE3o: agora)"),merchantName:u.string().optional().describe("Nome do estabelecimento")}),i=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o a atualizar"),amount:u.number().optional().describe("Novo valor"),description:u.string().min(1).max(255).optional().describe("Nova descri\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("Nova categoria"),transactionDate:u.string().datetime().optional().describe("Nova data"),merchantName:u.string().optional().describe("Novo estabelecimento")}),a=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),c=u.object({startDate:u.string().datetime().describe("Data inicial"),endDate:u.string().datetime().describe("Data final")});return{listTransactions:{description:"Lista transa\xE7\xF5es do usu\xE1rio com filtros opcionais. Use para consultar hist\xF3rico, buscar por per\xEDodo ou categoria.",parameters:r,execute:s(async l=>{let{startDate:d,endDate:p,categoryId:m,accountId:h,minAmount:y,maxAmount:g,searchTerm:f,limit:_,offset:w}=l,b=[Z(re.userId,t)];d&&b.push(dr(re.transactionDate,new Date(d))),p&&b.push(nr(re.transactionDate,new Date(p))),m&&b.push(Z(re.categoryId,m)),h&&b.push(Z(re.accountId,h)),y&&b.push(dr(re.amount,String(y))),g&&b.push(nr(re.amount,String(g))),f&&b.push(Pr(re.description,`%${f}%`));let S=await e.select({id:re.id,amount:re.amount,description:re.description,merchantName:re.merchantName,transactionDate:re.transactionDate,status:re.status,createdAt:re.createdAt}).from(re).where(xe(...b)).orderBy(jt(re.transactionDate)).limit(_).offset(w);return{transactions:S.map(go),total:S.length,hasMore:S.length===_}},"execute")},getTransaction:{description:"Obt\xE9m detalhes de uma transa\xE7\xE3o espec\xEDfica pelo ID.",parameters:n,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.select().from(re).where(xe(Z(re.id,d),Z(re.userId,t))).limit(1);if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return go(p)},"execute")},createTransaction:{description:"Cria uma nova transa\xE7\xE3o manual para o usu\xE1rio.",parameters:o,execute:s(async l=>{let{amount:d,description:p,categoryId:m,accountId:h,transactionDate:y,merchantName:g}=l,[f]=await e.insert(re).values({userId:t,amount:String(d),description:p,categoryId:m,accountId:h,transactionDate:y?new Date(y):new Date,merchantName:g,transactionType:d>=0?"credit":"debit",status:"posted",isManualEntry:!0}).returning();return{success:!0,transaction:go(f)}},"execute")},updateTransaction:{description:"Atualiza uma transa\xE7\xE3o existente do usu\xE1rio.",parameters:i,execute:s(async l=>{let{transactionId:d,...p}=l,m={updatedAt:new Date};p.amount!==void 0&&(m.amount=String(p.amount)),p.description!==void 0&&(m.description=p.description),p.categoryId!==void 0&&(m.categoryId=p.categoryId),p.transactionDate!==void 0&&(m.transactionDate=new Date(p.transactionDate)),p.merchantName!==void 0&&(m.merchantName=p.merchantName);let[h]=await e.update(re).set(m).where(xe(Z(re.id,d),Z(re.userId,t))).returning();if(!h)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,transaction:go(h)}},"execute")},deleteTransaction:{description:"Deleta uma transa\xE7\xE3o. Use com cuidado, esta a\xE7\xE3o \xE9 irrevers\xEDvel.",parameters:a,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.delete(re).where(xe(Z(re.id,d),Z(re.userId,t))).returning({id:re.id});if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,message:"Transa\xE7\xE3o deletada com sucesso."}},"execute")},getSpendingSummary:{description:"Obt\xE9m resumo de gastos por categoria em um per\xEDodo.",parameters:c,execute:s(async l=>{let{startDate:d,endDate:p}=l,m=await e.select({amount:re.amount,categoryId:re.categoryId}).from(re).where(xe(Z(re.userId,t),nr(re.amount,"0"),dr(re.transactionDate,new Date(d)),nr(re.transactionDate,new Date(p)))),h=[...new Set(m.map(b=>b.categoryId).filter(Boolean))],y=h.length?await e.select({id:Re.id,name:Re.name,color:Re.color}).from(Re).where(Fs(Re.id,h)):[],g=new Map(y.map(b=>[b.id,b])),f=m.reduce((b,S)=>{let k=S.categoryId??"uncategorized",R=g.get(S.categoryId??"");return b[k]||(b[k]={categoryId:k,categoryName:R?.name??"Sem categoria",color:R?.color??"#6B7280",total:0,count:0}),b[k].total+=Math.abs(Number(S.amount)),b[k].count+=1,b},{}),_=Object.values(f).sort((b,S)=>S.total-b.total),w=_.reduce((b,S)=>b+S.total,0);return{period:{startDate:d,endDate:p},grandTotal:w,categories:_}},"execute")}}}s(HM,"createTransactionTools");function ZM(t,e){return{...HM(t,e),...BM(t,e),...VM(t,e)}}s(ZM,"createAllTools");function Eoe(t){let e=[],n=[/\b\d{3}\.\d{3}\.\d{3}-\d{2}\b/,/\b\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}\b/,/\b\d{4}[- ]?\d{4}[- ]?\d{4}[- ]?\d{4}\b/].some(i=>i.test(t));n&&e.push("Sensitive data detected in response");let o=/[]/i.test(t)||t.includes("R$");return{isValid:e.length===0,language:o?"pt-BR":"en",contentType:"text",sensitiveDataDetected:n,complianceIssues:e}}s(Eoe,"validateBrazilianPortugueseContent");var Ul=new Pe,koe=u.object({messages:u.array(u.object({role:u.enum(["user","assistant","system","tool"]),content:u.string(),sensitiveDataRedacted:u.boolean().optional().default(!1),timestamp:u.string().datetime().optional(),sessionId:u.string().uuid().optional(),parts:u.array(u.object({type:u.literal("text"),text:u.string()})).optional()})).min(1,"At least one message is required").transform(t=>t.filter(e=>e.role!=="tool").map(e=>({...e,parts:e.parts||[{type:"text",text:e.content}]}))),provider:zM.optional().default("google"),tier:u.enum(["default","fast"]).optional().default("default")});Ul.post("/chat",de,Fe("json",koe),async t=>{let e=Date.now(),{messages:r,provider:n,tier:o}=t.req.valid("json"),i=t.get("auth");if(!i?.user)return t.json({error:"Unauthorized"},401);let a=i.user.id,c=crypto.randomUUID(),l=r[r.length-1],d=l?.role==="user"?l.content:null;if(d&&typeof d=="string"){let p=qM(d);if(!p.isSafe)return await Rf({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:d.slice(0,100),outputSummary:"Blocked: injection detected",latencyMs:Date.now()-e,outcome:"blocked",errorMessage:p.reason}),t.json({error:"Invalid input detected"},400)}try{let p=UM(n,o),m=ZM(a,i.db);return mj({model:p,system:vj,messages:AT(r),tools:m,maxSteps:5,onFinish:s(async({usage:y,finishReason:g,toolCalls:f})=>{let _=r,w=_[_.length-1],b=w?.role==="assistant"?w.content:g,S=typeof b=="string"?Eoe(b):{isValid:!0,language:"pt-BR",contentType:"text",sensitiveDataDetected:!1,complianceIssues:[]},k=S.sensitiveDataDetected?" [LGPD Warning: Sensitive data detected]":S.language==="pt-BR"?" [PT-BR]":" [EN]";await Rf({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:f?.length?"tool_call":"chat",toolName:f?.map(R=>R.toolName).join(", "),inputSummary:typeof d=="string"?d.slice(0,100):"Multi-modal/Tool input",outputSummary:g+k,tokensUsed:y.totalTokens,latencyMs:Date.now()-e,outcome:S.isValid?"success":"error",errorMessage:S.complianceIssues.length>0?`Compliance issues: ${S.complianceIssues.join("; ")}`:void 0})},"onFinish")}).toDataStreamResponse()}catch(p){return await Rf({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:typeof d=="string"?d.slice(0,100):"",outputSummary:"Error",latencyMs:Date.now()-e,outcome:"error",errorMessage:p instanceof Error?p.message:"Unknown error"}),t.json({error:"AI service error"},500)}});Ul.get("/providers",de,t=>t.json({available:LM(),default:"google"}));import{randomUUID as Noe}from"node:crypto";import{randomUUID as Aoe}from"node:crypto";var JM={BRL:{symbol:"R$",decimalSeparator:",",thousandsSeparator:".",maxAmount:99999999999e-2,minAmount:.01}},Jf=new Set(["001","033","104","237","341","260","077","021","025","036","037","039","041","047","062","063","064","065","066","069","070","074","075","078","079","083","084","085","089","102","105","107","108","109","110","111","112","114","117","118","119","120","121","122","124","125","126","127","128","129","130","131","132","133","134","136","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320"]),Ioe={CNPJ:{format:"XX.XXX.XXX/XXXX-XX",regex:/^\d{14}$/},CPF:{format:"XXX.XXX.XXX-XX",regex:/^\d{11}$/},EMAIL:{format:"email@example.com",regex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},PHONE:{format:"+55 (XX) XXXXX-XXXX",regex:/^\+?\d{10,15}$/},RANDOM_KEY:{format:"XXXX-XXXX-XXXX-XXXX-XXXX",regex:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i}};var Poe={SUSPICIOUS_DESCRIPTIONS:["test","teste","debug","xxx","fake","fraud","hack","stolen","lavagem","dinheiro negro"],HIGH_VALUE_TRANSACTION:5e4,FREQUENT_SMALL_TRANSACTIONS:{count:20,amount:1e3,window:1440*60*1e3},RAPID_SUCCESSION:{count:5,window:300*1e3}},jqe={amount:u.number().min(JM.BRL.minAmount,"Amount must be at least R$ 0,01").max(JM.BRL.maxAmount,"Amount exceeds maximum allowed").refine(t=>Number.isFinite(t)&&Number(t.toFixed(2))===t,"Amount must have at most 2 decimal places"),bankAccount:u.object({account:u.string().regex(/^\d{1,12}$/,"Account must be 1-12 digits").refine(t=>!/^0+$/.test(t),"Account cannot be all zeros"),accountDigit:u.string().regex(/^\d$/,"Account digit must be a single digit"),agency:u.string().regex(/^\d{1,6}$/,"Agency must be 1-6 digits").refine(t=>!/^0+$/.test(t),"Agency cannot be all zeros"),bankCode:u.string().refine(t=>Jf.has(t),"Invalid Brazilian bank code")}),financialInstitution:u.object({code:u.string().refine(t=>Jf.has(t),"Invalid bank code"),name:u.string().min(2,"Institution name must be at least 2 characters").max(100,"Institution name must be less than 100 characters")}),pixKey:u.object({key:u.string().min(1,"PIX key cannot be empty"),type:u.enum(["cpf","cnpj","email","phone","random"])}).refine(t=>Ioe[t.type.toUpperCase()].regex.test(t.key.replace(/\D/g,"")),"Invalid PIX key format for the specified type"),transaction:u.object({account_id:u.string().uuid("Conta banc\xE1ria inv\xE1lida"),amount:u.number(),category_id:u.string().uuid().optional(),description:u.string().min(3,"Description must be at least 3 characters").max(200,"Description must be less than 200 characters").refine(t=>!Poe.SUSPICIOUS_DESCRIPTIONS.some(e=>t.toLowerCase().includes(e)),"Description contains suspicious content"),is_manual_entry:u.boolean().default(!0),merchant_name:u.string().max(120).optional(),notes:u.string().max(500).optional(),payment_method:u.enum(["cash","debit_card","credit_card","pix","boleto","transfer"]).optional(),status:u.enum(["pending","posted","failed","cancelled"]).default("posted"),tags:u.array(u.string()).max(10).optional(),transaction_date:u.string().refine(t=>{let e=new Date(t);return!Number.isNaN(e.getTime())&&e>=new Date("2020-01-01")&&e<=new Date(Date.now()+1440*60*1e3)},"Invalid date. Must be a valid date between 2020-01-01 and tomorrow"),transaction_type:u.enum(["debit","credit","transfer","pix","boleto"])})};function GM(t){let e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let r=0,n;for(let o=1;o<=9;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(11-o);if(n=r*10%11,(n===10||n===11)&&(n=0),n!==Number.parseInt(e.substring(9,10),10))return!1;r=0;for(let o=1;o<=10;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(12-o);return n=r*10%11,(n===10||n===11)&&(n=0),n===Number.parseInt(e.substring(10,11),10)}s(GM,"validateCPF");var KM=["CHECKING","SAVINGS","INVESTMENT","SALARY","DIGITAL_WALLET"],Coe=["pending","manual","success","error"],Ooe=u.object({account_holder_name:u.string().optional(),account_mask:u.string().min(7,"M\xE1scara da conta \xE9 obrigat\xF3ria."),account_number:u.string().optional(),account_type:u.enum(KM),balance:u.number(),belvo_account_id:u.string().optional(),currency:u.string().default("BRL"),institution_id:u.string().min(1,"ID da institui\xE7\xE3o \xE9 obrigat\xF3rio."),institution_name:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio."),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),user_id:u.string().min(1,"Usu\xE1rio \xE9 obrigat\xF3rio.")}),$oe=u.object({account_holder_name:u.string().optional(),account_mask:u.string().optional(),account_number:u.string().optional(),account_type:u.enum(KM).optional(),balance:u.number().optional(),belvo_account_id:u.string().optional(),currency:u.string().optional(),institution_id:u.string().optional(),institution_name:u.string().optional(),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),sync_error_message:u.string().optional(),sync_status:u.enum(Coe).optional()}),Roe=new Set(["user_id","institution_name","institution_id","account_type","account_mask","account_holder_name","account_number","belvo_account_id","balance","currency","is_primary","is_active","sync_status","sync_error_message"]),WM="manual_",QM=s(t=>{if(!t)return!1;let e=t.trim();return Jf.has(e)?!0:/^[0-9a-f-]{8,}$/i.test(e)},"isValidInstitutionId"),XM=s(t=>!t||t.toUpperCase()==="BRL","isValidCurrency"),YM=s(t=>!t||t.startsWith(WM)?!0:/^[a-z0-9_-]{6,}$/i.test(t),"isValidBelvoId"),Ll=s(t=>t?/^\*{4}\s\d{4}$/.test(t):!1,"validateAccountMask"),ql=s(t=>/^\*{4}\d{4}$/.test(t)?`**** ${t.slice(-4)}`:t,"normalizeAccountMask"),ez=s(t=>t.map(e=>({field:e.path.join(".")||"root",message:e.message})),"collectZodErrors"),vE=s(t=>{let e={};return Object.entries(t).forEach(([r,n])=>{if(Roe.has(r)){if(typeof n=="string"){let o=n.trim();if(o==="")return;switch(r){case"currency":e.currency=o.toUpperCase();break;case"account_number":e.account_number=o.replace(/\s+/g,"");break;case"account_mask":e.account_mask=ql(o);break;default:e[r]=o}return}if(typeof n=="number"){e[r]=Number(n);return}e[r]=n}}),e},"sanitizeBankAccountData"),tz=s(()=>`${WM}${Aoe()}`,"generateManualAccountId"),rz=s(t=>{let e=[],r=Ooe.safeParse(t);if(!r.success)return e.push(...ez(r.error.issues)),{errors:e,valid:!1};let n=r.data;return Ll(n.account_mask)||e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),QM(n.institution_id)||e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),XM(n.currency)||e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas no momento."}),YM(n.belvo_account_id)||e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForInsert"),nz=s(t=>{let e=[],r=$oe.safeParse(t);if(!r.success)return e.push(...ez(r.error.issues)),{errors:e,valid:!1};let n=r.data;return n.account_mask&&!Ll(n.account_mask)&&e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),n.institution_id&&!QM(n.institution_id)&&e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),n.currency&&!XM(n.currency)&&e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas."}),n.belvo_account_id&&!YM(n.belvo_account_id)&&e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),n.balance!==void 0&&Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForUpdate");var Doe=u.object({institutionName:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio"),accountType:u.enum(["checking","savings","investment","cash"],{error:"Tipo de conta \xE9 obrigat\xF3rio"}),balance:u.number().default(0),currency:u.string().default("BRL"),isPrimary:u.boolean().default(!1),isActive:u.boolean().default(!0),accountMask:u.string().optional(),institutionId:u.string().optional()}),joe=u.object({institutionName:u.string().optional(),accountType:u.enum(["checking","savings","investment","cash"]).optional(),balance:u.number().optional(),currency:u.string().optional(),isPrimary:u.boolean().optional(),isActive:u.boolean().optional(),accountMask:u.string().optional()}),Moe=u.object({balance:u.number()}),zoe=u.object({days:u.coerce.number().int().positive().default(30)}),Uoe={checking:"CHECKING",savings:"SAVINGS",investment:"INVESTMENT",cash:"DIGITAL_WALLET"},_E=s(t=>Uoe[t.toLowerCase()]||t.toUpperCase(),"normalizeAccountType"),Loe=s(()=>`**** ${Math.floor(1e3+Math.random()*9e3)}`,"generateAccountMask"),Qo=new Pe;Qo.get("/",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(se).where(Z(se.userId,e.id)).orderBy(jt(se.createdAt));return t.json({data:o||[],meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Qo.get("/total-balance",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({balance:se.balance,currency:se.currency}).from(se).where(xe(Z(se.userId,e.id),Z(se.isActive,!0))),i={};return o&&o.forEach(a=>{let c=a.currency||"BRL";i[c]=(i[c]||0)+Number(a.balance||0)}),t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get total balance",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"TOTAL_BALANCE_ERROR",error:"Failed to calculate total balance"},500)}});Qo.get("/:id",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(se).where(xe(Z(se.id,n),Z(se.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(i){return L.error("Failed to get bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_ERROR",error:"Failed to retrieve bank account"},500)}});Qo.get("/:id/balance-history",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Fe("query",zoe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{days:o}=t.req.valid("query"),i=t.get("requestId");try{if(!n||n==="all")return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let[a]=await r.select({balance:se.balance}).from(se).where(xe(Z(se.id,n),Z(se.userId,e.id))).limit(1);if(!a)return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let c=Number(a.balance||0),l=[];for(let d=0;d<o;d++){let p=new Date;p.setDate(p.getDate()-d),l.push({date:p.toISOString(),balance:c})}return t.json({data:l.reverse(),meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get balance history",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_HISTORY_ERROR",error:"Failed to retrieve balance history"},500)}});Qo.post("/",de,be({windowMs:60*1e3,max:10,message:"Too many account creation attempts, please try again later"}),Fe("json",Doe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=_E(n.accountType),a=n.accountMask?ql(n.accountMask):Loe();if(!Ll(a))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);let c=n.institutionId||Noe(),l=tz(),d="manual",p=vE({user_id:e.id,institution_name:n.institutionName,institution_id:c,account_type:i,account_mask:a,balance:n.balance,currency:n.currency.toUpperCase(),is_primary:n.isPrimary,is_active:n.isActive,belvo_account_id:l,sync_status:d}),m=rz(p);if(!m.valid){let g=m.errors.length>0?m.errors.map(f=>f.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:g},400)}let[h]=await r.select({id:se.id}).from(se).where(xe(Z(se.userId,e.id),Z(se.institutionId,c),Z(se.accountMask,a))).limit(1);if(h)return t.json({code:"CONFLICT",error:"J\xE1 existe uma conta com a mesma institui\xE7\xE3o e final"},409);let[y]=await r.insert(se).values({userId:e.id,institutionName:n.institutionName,institutionId:c,accountType:i,accountMask:a,balance:String(n.balance),currency:n.currency.toUpperCase(),isPrimary:n.isPrimary,isActive:n.isActive,belvoAccountId:l,syncStatus:d}).returning();return L.info("Bank account created",{accountId:y.id,institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({data:y,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create bank account",{error:i instanceof Error?i.message:"Unknown error",institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_CREATE_ERROR",error:"Failed to create bank account"},500)}});Qo.put("/:id",de,be({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Fe("json",joe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:se.id}).from(se).where(xe(Z(se.id,n),Z(se.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404);let c={};if(o.institutionName!==void 0&&(c.institutionName=o.institutionName),o.accountType!==void 0&&(c.accountType=_E(o.accountType)),o.balance!==void 0&&(c.balance=String(o.balance)),o.currency!==void 0&&(c.currency=o.currency.toUpperCase()),o.isPrimary!==void 0&&(c.isPrimary=o.isPrimary),o.isActive!==void 0&&(c.isActive=o.isActive),o.accountMask!==void 0){let m=ql(o.accountMask);if(!Ll(m))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);c.accountMask=m}let l=vE({institution_name:o.institutionName,account_type:o.accountType?_E(o.accountType):void 0,balance:o.balance,currency:o.currency?.toUpperCase(),is_primary:o.isPrimary,is_active:o.isActive,account_mask:o.accountMask?ql(o.accountMask):void 0}),d=nz(l);if(!d.valid){let m=d.errors.length>0?d.errors.map(h=>h.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:m},400)}let[p]=await r.update(se).set(c).where(xe(Z(se.id,n),Z(se.userId,e.id))).returning();return t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to update bank account",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BANK_ACCOUNT_UPDATE_ERROR",error:"Failed to update bank account"},500)}});Qo.patch("/:id/balance",de,be({windowMs:60*1e3,max:30,message:"Too many balance update attempts, please try again later"}),Fe("json",Moe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{balance:o}=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.update(se).set({balance:String(o)}).where(xe(Z(se.id,n),Z(se.userId,e.id))).returning();return a?t.json({data:a,meta:{requestId:i,updatedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(a){return L.error("Failed to update balance",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_UPDATE_ERROR",error:"Failed to update balance"},500)}});Qo.delete("/:id",de,be({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return await r.delete(se).where(xe(Z(se.id,n),Z(se.userId,e.id))),L.info("Bank account deleted",{accountId:n,requestId:o,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})}catch(i){return L.error("Failed to delete bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_DELETE_ERROR",error:"Failed to delete bank account"},500)}});var bE=Qo;var Gf=new Pe,qoe=u.object({accountType:u.string(),balance:u.number(),bankName:u.string(),currency:u.string(),id:u.string(),lastSync:u.string().datetime().optional()}),sFe=u.object({accounts:u.array(qoe),currency:u.string(),total:u.number()});Gf.get("/accounts",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{L.info("Bank accounts accessed",{requestId:r,userId:e.id});let n={accounts:[],currency:"BRL",total:0};return t.json({data:n,meta:{note:"Placeholder implementation - Belvo integration pending",requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Gf.post("/accounts/link",de,be({windowMs:60*1e3,max:5,message:"Too many link attempts, please try again later"}),Fe("json",u.object({bankCode:u.string(),credentials:u.record(u.string(),u.any())})),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Bank account link attempt",{bankCode:r.bankCode,requestId:n,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{bankCode:r.bankCode,note:"Belvo integration is pending implementation"},error:"Bank account linking not yet implemented"},501)}catch(o){return L.error("Failed to link bank account",{bankCode:r.bankCode,error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_LINK_ERROR",error:"Failed to link bank account"},500)}});Gf.post("/accounts/sync",de,be({windowMs:60*1e3,max:10,message:"Too many sync requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{return L.info("Bank accounts sync attempt",{requestId:r,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{note:"Belvo integration is pending implementation"},error:"Bank account synchronization not yet implemented"},501)}catch(n){return L.error("Failed to sync bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_SYNC_ERROR",error:"Failed to sync bank accounts"},500)}});var wE=Gf;import*as dc from"crypto";import{EventEmitter as CL}from"events";import*as Wf from"crypto";var qi=class{static{s(this,"CryptoProvider")}computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}},Ya=class extends Error{static{s(this,"CryptoProviderOnlySupportsAsyncError")}};var Kf=class extends qi{static{s(this,"NodeCryptoProvider")}computeHMACSignature(e,r){return Wf.createHmac("sha256",r).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,r){return await this.computeHMACSignature(e,r)}async computeSHA256Async(e){return new Uint8Array(await Wf.createHash("sha256").update(e).digest())}};import*as xE from"http";import*as TE from"https";var Er=class t{static{s(this,"HttpClient")}getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,o,i,a,c,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(t.TIMEOUT_ERROR_CODE);return e.code=t.TIMEOUT_ERROR_CODE,e}};Er.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Er.TIMEOUT_ERROR_CODE="ETIMEDOUT";var Fi=class{static{s(this,"HttpClientResponse")}constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var oz=xE.default||xE,iz=TE.default||TE,Foe=new oz.Agent({keepAlive:!0}),Boe=new iz.Agent({keepAlive:!0}),Fl=class extends Er{static{s(this,"NodeHttpClient")}constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=this._agent;return p||(p=d?Foe:Boe),new Promise((h,y)=>{let g=(d?oz:iz).request({host:e,port:r,path:n,method:o,agent:p,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});g.setTimeout(l,()=>{g.destroy(Er.makeTimeoutError())}),g.on("response",f=>{h(new SE(f))}),g.on("error",f=>{y(f)}),g.once("socket",f=>{f.connecting?f.once(d?"connect":"secureConnect",()=>{g.write(a),g.end()}):(g.write(a),g.end())})})}},SE=class extends Fi{static{s(this,"NodeHttpClientResponse")}constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,r)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",o=>{n+=o}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(o){r(o)}})})}};var vL=Tc(yL(),1);var ek=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function _L(t){return t&&typeof t=="object"&&ek.some(e=>Object.prototype.hasOwnProperty.call(t,e))}s(_L,"isOptionsHash");function Hi(t,e){return vL.stringify(t,{serializeDate:s(r=>Math.floor(r.getTime()/1e3).toString(),"serializeDate"),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}s(Hi,"queryStringifyRequestData");var ph=(()=>{let t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(o,i)=>{let a=n[i];return hae(a)?encodeURIComponent(a):""})}})();function hae(t){return["number","string","boolean"].includes(typeof t)}s(hae,"isValidEncodeUriComponentType");function bL(t){let e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}s(bL,"extractUrlParams");function sc(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!_L(t[0]))return t.shift();let e=Object.keys(t[0]),r=e.filter(n=>ek.includes(n));return r.length>0&&r.length!==e.length&&td(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}s(sc,"getDataFromArgs");function mh(t){let e={host:null,headers:{},settings:{},streaming:!1};if(t.length>0){let r=t[t.length-1];if(typeof r=="string")e.authenticator=dh(t.pop());else if(_L(r)){let n=Object.assign({},t.pop()),o=Object.keys(n).filter(i=>!ek.includes(i));if(o.length&&td(`Invalid options found (${o.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=dh(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders),n.streaming&&(e.streaming=!0)}}return e}s(mh,"getOptionsFromArgs");function wL(t){let e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}s(wL,"protoExtend");function fh(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}s(fh,"removeNullish");function SL(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[gae(r)]=t[r],e),{}):t}s(SL,"normalizeHeaders");function gae(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}s(gae,"normalizeHeader");function ed(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}s(ed,"callbackifyPromiseWithTimeout");function xL(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}s(xL,"pascalToCamelCase");function td(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}s(td,"emitWarning");function yae(t){let e=typeof t;return(e==="function"||e==="object")&&!!t}s(yae,"isObject");function TL(t){let e={},r=s((n,o)=>{Object.entries(n).forEach(([i,a])=>{let c=o?`${o}[${i}]`:i;if(yae(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,c);e[c]=a}else e[c]=String(a)})},"step");return r(t,null),e}s(TL,"flattenAndStringify");function hh(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}s(hh,"validateInteger");function EL(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}s(EL,"determineProcessUserAgentProperties");function dh(t){let e=s(r=>(r.headers.Authorization="Bearer "+t,Promise.resolve()),"authenticator");return e._apiKey=t,e}s(dh,"createApiKeyAuthenticator");function kL(t){let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e),n=0;return t.forEach(o=>{r.set(o,n),n+=o.length}),r}s(kL,"concat");function vae(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}s(vae,"dateTimeReplacer");function IL(t){return JSON.stringify(t,vae)}s(IL,"jsonStringifyRequestData");function ac(t){return t&&t.startsWith("/v2")?"v2":"v1"}s(ac,"getAPIMode");function gh(t){return Array.isArray(t)?t.join(", "):String(t)}s(gh,"parseHttpHeaderAsString");function PL(t){let e=Array.isArray(t)?t[0]:t;return Number(e)}s(PL,"parseHttpHeaderAsNumber");function AL(t){return Object.entries(t).map(([e,r])=>[e,gh(r)])}s(AL,"parseHeadersForFetch");var yh=class t extends Er{static{s(this,"FetchHttpClient")}constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=t.makeFetchWithAbortTimeout(e):this._fetchFn=t.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,o)=>{let i,a=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Er.makeTimeoutError())},o)}),c=e(r,n);return Promise.race([c,a]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(r,n,o)=>{let i=new AbortController,a=setTimeout(()=>{a=null,i.abort(Er.makeTimeoutError())},o);try{return await e(r,Object.assign(Object.assign({},n),{signal:i.signal}))}catch(c){throw c.name==="AbortError"?Er.makeTimeoutError():c}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=new URL(n,`${d?"http":"https"}://${e}`);p.port=r;let m=o=="POST"||o=="PUT"||o=="PATCH",h=a||(m?"":void 0),y=await this._fetchFn(p.toString(),{method:o,headers:AL(i),body:h},l);return new tk(y)}},tk=class t extends Fi{static{s(this,"FetchHttpClientResponse")}constructor(e){super(e.status,t._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let r={};for(let n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}};var vh=class extends qi{static{s(this,"SubtleCryptoProvider")}constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Ya("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){let n=new TextEncoder,o=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",o,n.encode(e)),a=new Uint8Array(i),c=new Array(a.length);for(let l=0;l<a.length;l++)c[l]=rk[a[l]];return c.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}},rk=new Array(256);for(let t=0;t<rk.length;t++)rk[t]=t.toString(16).padStart(2,"0");var _h=class{static{s(this,"PlatformFunctions")}constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;let n=e.length,o=0;for(let i=0;i<n;++i)o|=e.charCodeAt(i)^r.charCodeAt(i);return o===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new yh(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new vh(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var Eh={};vn(Eh,{StripeAPIError:()=>cc,StripeAuthenticationError:()=>uc,StripeCardError:()=>bh,StripeConnectionError:()=>od,StripeError:()=>er,StripeIdempotencyError:()=>wh,StripeInvalidGrantError:()=>Sh,StripeInvalidRequestError:()=>rd,StripePermissionError:()=>nd,StripeRateLimitError:()=>lc,StripeSignatureVerificationError:()=>Qn,StripeUnknownError:()=>xh,TemporarySessionExpiredError:()=>Th,generateV1Error:()=>id,generateV2Error:()=>nk});var id=s(t=>{switch(t.type){case"card_error":return new bh(t);case"invalid_request_error":return new rd(t);case"api_error":return new cc(t);case"authentication_error":return new uc(t);case"rate_limit_error":return new lc(t);case"idempotency_error":return new wh(t);case"invalid_grant":return new Sh(t);default:return new xh(t)}},"generateV1Error"),nk=s(t=>{switch(t.type){case"temporary_session_expired":return new Th(t)}switch(t.code){case"invalid_fields":return new rd(t)}return id(t)},"generateV2Error"),er=class extends Error{static{s(this,"StripeError")}constructor(e={},r=null){var n;super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=(n=e.message)!==null&&n!==void 0?n:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};er.generate=id;var bh=class extends er{static{s(this,"StripeCardError")}constructor(e={}){super(e,"StripeCardError")}},rd=class extends er{static{s(this,"StripeInvalidRequestError")}constructor(e={}){super(e,"StripeInvalidRequestError")}},cc=class extends er{static{s(this,"StripeAPIError")}constructor(e={}){super(e,"StripeAPIError")}},uc=class extends er{static{s(this,"StripeAuthenticationError")}constructor(e={}){super(e,"StripeAuthenticationError")}},nd=class extends er{static{s(this,"StripePermissionError")}constructor(e={}){super(e,"StripePermissionError")}},lc=class extends er{static{s(this,"StripeRateLimitError")}constructor(e={}){super(e,"StripeRateLimitError")}},od=class extends er{static{s(this,"StripeConnectionError")}constructor(e={}){super(e,"StripeConnectionError")}},Qn=class extends er{static{s(this,"StripeSignatureVerificationError")}constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}},wh=class extends er{static{s(this,"StripeIdempotencyError")}constructor(e={}){super(e,"StripeIdempotencyError")}},Sh=class extends er{static{s(this,"StripeInvalidGrantError")}constructor(e={}){super(e,"StripeInvalidGrantError")}},xh=class extends er{static{s(this,"StripeUnknownError")}constructor(e={}){super(e,"StripeUnknownError")}},Th=class extends er{static{s(this,"TemporarySessionExpiredError")}constructor(e={}){super(e,"TemporarySessionExpiredError")}};import{exec as _ae}from"child_process";var ok=class extends er{static{s(this,"StreamProcessingError")}},kh=class extends _h{static{s(this,"NodePlatformFunctions")}constructor(){super(),this._exec=_ae,this._UNAME_CACHE=null}uuid4(){return dc.randomUUID?dc.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,r)=>{try{this._exec("uname -a",(n,o)=>{if(n)return e(null);e(o)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,r){if(!e||!r)throw new Error("secureCompare must receive two arguments");if(e.length!==r.length)return!1;if(dc.timingSafeEqual){let n=new TextEncoder,o=n.encode(e),i=n.encode(r);return dc.timingSafeEqual(o,i)}return super.secureCompare(e,r)}createEmitter(){return new CL}tryBufferData(e){if(!(e.file.data instanceof CL))return Promise.resolve(e);let r=[];return new Promise((n,o)=>{e.file.data.on("data",i=>{r.push(i)}).once("end",()=>{let i=Object.assign({},e);i.file.data=kL(r),n(i)}).on("error",i=>{o(new ok({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(e){return new Fl(e)}createDefaultHttpClient(){return new Fl}createNodeCryptoProvider(){return new Kf}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var bae=60,Ih=class t{static{s(this,"RequestSender")}constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_normalizeStripeContext(e,r){return e?e.toString()||null:r?.toString()||null}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){let o=Date.now(),i=o-e.request_start_time;return fh({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:i,request_start_time:e.request_start_time,request_end_time:o})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return o=>{let i=o.getHeaders(),a=s(()=>{let l=this._makeResponseEvent(e,o.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,r)},"streamCompleteCallback"),c=o.toStream(a);return this._addHeadersDirectlyToObject(c,i),n(null,c)}}_jsonResponseHandler(e,r,n,o){return i=>{let a=i.getHeaders(),c=this._getRequestId(a),l=i.getStatusCode(),d=this._makeResponseEvent(e,l,a);this._stripe._emitter.emit("response",d),i.toJSON().then(p=>{if(p.error){let m;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=a,p.error.statusCode=l,p.error.requestId=c,l===401?m=new uc(p.error):l===403?m=new nd(p.error):l===429?m=new lc(p.error):r==="v2"?m=nk(p.error):m=id(p.error),m}return p},p=>{throw new cc({message:"Invalid JSON received from the Stripe API",exception:p,requestId:a["request-id"]})}).then(p=>{this._recordRequestMetrics(c,d.elapsed,n);let m=i.getRawResponse();this._addHeadersDirectlyToObject(m,a),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:m}),o(null,p)},p=>o(p,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,o){return o&&r===0&&Er.CONNECTION_CLOSED_ERROR_CODES.includes(o.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){let n=this._stripe.getInitialNetworkRetryDelay(),o=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(n*Math.pow(2,e-1),o);return i*=.5*(1+Math.random()),i=Math.max(n,i),Number.isInteger(r)&&r<=bae&&(i=Math.max(i,r)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){let o=this._getMaxNetworkRetries(r),i=s(()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`,"genKey");if(n==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(n==="v1"&&e==="POST"&&o>0)return i();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:o,method:i,userSuppliedHeaders:a,userSuppliedSettings:c,stripeAccount:l,stripeContext:d,apiMode:p}){let m={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":o,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,c,p)},h=i=="POST"||i=="PUT"||i=="PATCH";return(h||r)&&(h||td(`${i} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(fh(m),SL(a))}_getUserAgentString(e){let r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)td("Request metrics buffer is full, dropping telemetry message.");else{let o={request_id:e,request_duration_ms:r};n&&n.length>0&&(o.usage=n),this._stripe._prevRequestMetrics.push(o)}}_rawRequest(e,r,n,o,i){return new Promise((c,l)=>{let d;try{let g=e.toUpperCase();if(g!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let f=[].slice.call([n,o]),_=sc(f),w=g==="POST"?Object.assign({},_):null,b=mh(f),S=b.headers,k=b.authenticator;d={requestMethod:g,requestPath:r,bodyData:w,queryData:{},authenticator:k,headers:S,host:b.host,streaming:!!b.streaming,settings:{},usage:i||["raw_request"]}}catch(g){l(g);return}function p(g,f){g?l(g):c(f)}s(p,"requestCallback");let{headers:m,settings:h}=d,y=d.authenticator;this._request(d.requestMethod,d.host,r,d.bodyData,y,{headers:m,settings:h,streaming:d.streaming},d.usage,p)})}_request(e,r,n,o,i,a,c=[],l,d=null){var p;let m;i=(p=i??this._stripe._authenticator)!==null&&p!==void 0?p:null;let h=ac(n),y=s((_,w,b,S,k)=>setTimeout(_,this._getSleepTimeInMS(S,k),w,b,S+1),"retryRequest"),g=s((_,w,b)=>{let S=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),k={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},w),body:m,protocol:this._stripe.getApiField("protocol")};i(k).then(()=>{let R=this._stripe.getApiField("httpClient").makeRequest(k.host,k.port,k.path,k.method,k.headers,k.body,k.protocol,S),O=Date.now(),C=fh({api_version:_,account:gh(w["Stripe-Account"]),idempotency_key:gh(w["Idempotency-Key"]),method:e,path:n,request_start_time:O}),$=b||0,P=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",C),R.then(N=>t._shouldRetry(N,$,P)?y(g,_,w,$,PL(N.getHeaders()["retry-after"])):a.streaming&&N.getStatusCode()<400?this._streamingResponseHandler(C,c,l)(N):this._jsonResponseHandler(C,h,c,l)(N)).catch(N=>{if(t._shouldRetry(null,$,P,N))return y(g,_,w,$,null);{let D=N.code&&N.code===Er.TIMEOUT_ERROR_CODE;return l(new od({message:D?`Request aborted due to timeout being reached (${S}ms)`:t._generateConnectionErrorMessage($),detail:N}))}})}).catch(R=>{throw new er({message:"Unable to authenticate the request",exception:R})})},"makeRequest"),f=s((_,w)=>{if(_)return l(_);m=w,this._stripe.getClientUserAgent(b=>{var S,k,R;let O=this._stripe.getApiField("version"),C=this._makeHeaders({contentType:h=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(m).length,apiVersion:O,clientUserAgent:b,method:e,userSuppliedHeaders:(S=a.headers)!==null&&S!==void 0?S:null,userSuppliedSettings:(k=a.settings)!==null&&k!==void 0?k:{},stripeAccount:(R=a.stripeAccount)!==null&&R!==void 0?R:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(a.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:h});g(O,C,0)})},"prepareAndMakeRequest");if(d)d(e,o,a.headers,f);else{let _;h=="v2"?_=o?IL(o):"":_=Hi(o||{},h),f(null,_)}}};var Ph=class{static{s(this,"V1Iterator")}constructor(e,r,n,o){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=o}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=$L(this.requestArgs);if(this.index<e.data.length){let n=r?e.data.length-1-this.index:this.index,o=e.data[n];return this.index+=1,{value:o,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}},sk=class extends Ph{static{s(this,"V1ListIterator")}getNextPage(e){let r=$L(this.requestArgs),n=Tae(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}},ak=class extends Ph{static{s(this,"V1SearchIterator")}getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},ck=class{static{s(this,"V2ListIterator")}constructor(e,r,n,o){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=o}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}},OL=s((t,e,r,n)=>{let o=ac(r.fullPath||r.path);return o!=="v2"&&r.methodType==="search"?ik(new ak(n,e,r,t)):o!=="v2"&&r.methodType==="list"?ik(new sk(n,e,r,t)):o==="v2"&&r.methodType==="list"?ik(new ck(n,e,r,t)):null},"makeAutoPaginationMethods"),ik=s(t=>{let e=Eae((...o)=>t.next(...o)),r=kae(e),n={autoPagingEach:e,autoPagingToArray:r,next:s(()=>t.next(),"next"),return:s(()=>({}),"return"),[wae()]:()=>n};return n},"makeAutoPaginationMethodsFromIterator");function wae(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}s(wae,"getAsyncIteratorSymbol");function Sae(t){if(t.length<2)return null;let e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}s(Sae,"getDoneCallback");function xae(t){if(t.length===0)return;let e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return s(function(n,o){let i=e(n);o(i)},"_onItem")}s(xae,"getItemCallback");function Tae(t,e){let r=e?0:t.data.length-1,n=t.data[r],o=n&&n.id;if(!o)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return o}s(Tae,"getLastId");function Eae(t){return s(function(){let r=[].slice.call(arguments),n=xae(r),o=Sae(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let i=Iae(t,n);return ed(i,o)},"autoPagingEach")}s(Eae,"makeAutoPagingEach");function kae(t){return s(function(r,n){let o=r&&r.limit;if(!o)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(o>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((a,c)=>{let l=[];t(d=>{if(l.push(d),l.length>=o)return!1}).then(()=>{a(l)}).catch(c)});return ed(i,n)},"autoPagingToArray")}s(kae,"makeAutoPagingToArray");function Iae(t,e){return new Promise((r,n)=>{function o(i){if(i.done){r();return}let a=i.value;return new Promise(c=>{e(a,c)}).then(c=>c===!1?o({done:!0,value:void 0}):t().then(o))}s(o,"handleIteration"),t().then(o).catch(n)})}s(Iae,"wrapAsyncIteratorWithCallback");function $L(t){let e=[].slice.call(t);return!!sc(e).ending_before}s($L,"isReverseIteration");function RL(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){let r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=bL(t.fullPath||this.createResourcePathWithSymbols(t.path||""));let n=ed(this._makeRequest(e,t,{}),r);return Object.assign(n,OL(this,e,t,n)),n}}s(RL,"stripeMethod");T.extend=wL;T.method=RL;T.MAX_BUFFERED_REQUEST_METRICS=100;function T(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=ph(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=ph(this.path),this.initialize(...arguments)}s(T,"StripeResource");T.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){let r=[this.basePath(e),this.path(e)];if(typeof t=="function"){let n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;let o=(e.method||"GET").toUpperCase(),i=e.usage||[],a=e.urlParams||[],c=e.encode||(C=>C),l=!!e.fullPath,d=ph(l?e.fullPath:e.path||""),p=l?e.fullPath:this.createResourcePathWithSymbols(e.path),m=[].slice.call(t),h=a.reduce((C,$)=>{let P=m.shift();if(typeof P!="string")throw new Error(`Stripe: Argument "${$}" must be a string, but got: ${P} (on API request to \`${o} ${p}\`)`);return C[$]=P,C},{}),y=sc(m),g=c(Object.assign({},y,r)),f=mh(m),_=f.host||e.host,w=!!e.streaming||!!f.streaming;if(m.filter(C=>C!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${p}\`)`);let b=l?d(h):this.createFullPath(d,h),S=Object.assign(f.headers,e.headers);e.validator&&e.validator(g,{headers:S});let k=e.method==="GET"||e.method==="DELETE";return{requestMethod:o,requestPath:b,bodyData:k?null:g,queryData:k?g:{},authenticator:(n=f.authenticator)!==null&&n!==void 0?n:null,headers:S,host:_??null,streaming:w,settings:f.settings,usage:i}},_makeRequest(t,e,r){return new Promise((n,o)=>{var i;let a;try{a=this._getRequestOpts(t,e,r)}catch(h){o(h);return}function c(h,y){h?o(h):n(e.transformResponseData?e.transformResponseData(y):y)}s(c,"requestCallback");let l=Object.keys(a.queryData).length===0,d=[a.requestPath,l?"":"?",Hi(a.queryData,ac(a.requestPath))].join(""),{headers:p,settings:m}=a;this._stripe._requestSender._request(a.requestMethod,a.host,d,a.bodyData,a.authenticator,{headers:p,settings:m,streaming:a.streaming},a.usage,c,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};var sd=class t{static{s(this,"StripeContext")}constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new t([...this._segments,e])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new t(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return e?new t(e.split("/")):new t([])}};function NL(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,m,h,y,g,f){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,m,h,y||e.DEFAULT_TOLERANCE,g,f)}catch(w){throw w instanceof Ya&&(w.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),w}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,m,h,y,g,f){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,m,h,y||e.DEFAULT_TOLERANCE,g,f),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:s(function(p){let m=d(p),h=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderString"),generateTestHeaderStringAsync:s(async function(p){let m=d(p),h=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderStringAsync")},r={EXPECTED_SCHEME:"v1",verifyHeader(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:S}=o(p,m,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=g.computeHMACSignature(n(w,b),h);return i(w,_,b,R,y,S,k,f),!0},async verifyHeaderAsync(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:S}=o(p,m,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=await g.computeHMACSignatureAsync(n(w,b),h);return i(w,_,b,R,y,S,k,f)}};function n(p,m){return`${m.timestamp}.${p}`}s(n,"makeHMACContent");function o(p,m,h){if(!p)throw new Qn(m,p,{message:"No webhook payload was provided."});let y=typeof p!="string"&&!(p instanceof Uint8Array),g=new TextDecoder("utf8"),f=p instanceof Uint8Array?g.decode(p):p;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new Qn(m,p,{message:"No stripe-signature header value was provided."});let _=m instanceof Uint8Array?g.decode(m):m,w=a(_,h);if(!w||w.timestamp===-1)throw new Qn(_,f,{message:"Unable to extract timestamp and signatures from header"});if(!w.signatures.length)throw new Qn(_,f,{message:"No signatures found with expected scheme"});return{decodedPayload:f,decodedHeader:_,details:w,suspectPayloadType:y}}s(o,"parseEventDetails");function i(p,m,h,y,g,f,_,w){let b=!!h.signatures.filter(t.secureCompare.bind(t,y)).length,S=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,k=_?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!b)throw f?new Qn(m,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+S+`
`+k}):new Qn(m,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+S+`
`+k});let R=Math.floor((typeof w=="number"?w:Date.now())/1e3)-h.timestamp;if(g>0&&R>g)throw new Qn(m,p,{message:"Timestamp outside the tolerance zone"});return!0}s(i,"validateComputedSignature");function a(p,m){return typeof p!="string"?null:p.split(",").reduce((h,y)=>{let g=y.split("=");return g[0]==="t"&&(h.timestamp=parseInt(g[1],10)),g[0]===m&&h.signatures.push(g[1]),h},{timestamp:-1,signatures:[]})}s(a,"parseHeader");let c=null;function l(){return c||(c=t.createDefaultCryptoProvider()),c}s(l,"getCryptoProvider");function d(p){if(!p)throw new er({message:"Options are required"});let m=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),h=p.scheme||r.EXPECTED_SCHEME,y=p.cryptoProvider||l(),g=`${m}.${p.payload}`,f=s(_=>`t=${m},${h}=${_}`,"generateHeaderString");return Object.assign(Object.assign({},p),{timestamp:m,scheme:h,cryptoProvider:y,payloadString:g,generateHeaderString:f})}return s(d,"prepareOptions"),e.signature=r,e}s(NL,"createWebhooks");var uk="2025-11-17.clover";var wc={};vn(wc,{Account:()=>Sk,AccountLinks:()=>_q,AccountSessions:()=>bq,Accounts:()=>Sk,ApplePayDomains:()=>wq,ApplicationFees:()=>Sq,Apps:()=>Yae,Balance:()=>xq,BalanceSettings:()=>Eq,BalanceTransactions:()=>Iq,Billing:()=>ece,BillingPortal:()=>tce,Charges:()=>Pq,Checkout:()=>rce,Climate:()=>nce,ConfirmationTokens:()=>Aq,CountrySpecs:()=>Oq,Coupons:()=>$q,CreditNotes:()=>Rq,CustomerSessions:()=>Nq,Customers:()=>Dq,Disputes:()=>jq,Entitlements:()=>oce,EphemeralKeys:()=>zq,Events:()=>Lq,ExchangeRates:()=>Fq,FileLinks:()=>Bq,Files:()=>Hq,FinancialConnections:()=>ice,Forwarding:()=>sce,Identity:()=>ace,InvoiceItems:()=>Zq,InvoicePayments:()=>Gq,InvoiceRenderingTemplates:()=>Kq,Invoices:()=>Wq,Issuing:()=>cce,Mandates:()=>Qq,OAuth:()=>Yq,PaymentAttemptRecords:()=>tF,PaymentIntents:()=>rF,PaymentLinks:()=>nF,PaymentMethodConfigurations:()=>oF,PaymentMethodDomains:()=>iF,PaymentMethods:()=>sF,PaymentRecords:()=>aF,Payouts:()=>cF,Plans:()=>uF,Prices:()=>lF,Products:()=>dF,PromotionCodes:()=>pF,Quotes:()=>mF,Radar:()=>uce,Refunds:()=>fF,Reporting:()=>lce,Reviews:()=>hF,SetupAttempts:()=>gF,SetupIntents:()=>yF,ShippingRates:()=>vF,Sigma:()=>dce,Sources:()=>_F,SubscriptionItems:()=>bF,SubscriptionSchedules:()=>wF,Subscriptions:()=>SF,Tax:()=>pce,TaxCodes:()=>TF,TaxIds:()=>EF,TaxRates:()=>kF,Terminal:()=>mce,TestHelpers:()=>fce,Tokens:()=>PF,Topups:()=>AF,Transfers:()=>CF,Treasury:()=>hce,V2:()=>gce,WebhookEndpoints:()=>OF});function Pae(t,e){for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=r[0].toLowerCase()+r.substring(1),o=new e[r](t);this[n]=o}}s(Pae,"ResourceNamespace");function Bt(t,e){return function(r){return new Pae(r,e)}}s(Bt,"resourceNamespace");var Ts=T.method,DL=T.extend({retrieve:Ts({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Ts({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Ts({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var jL=T.method,ML=T.extend({retrieve:jL({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:jL({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var pc=T.method,zL=T.extend({create:pc({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:pc({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:pc({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:pc({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:pc({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:pc({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})});var Aae=T.method,UL=T.extend({find:Aae({method:"GET",fullPath:"/v1/tax/associations/find"})});var ad=T.method,LL=T.extend({retrieve:ad({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ad({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ad({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ad({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ad({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var Es=T.method,qL=T.extend({create:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Es({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var lk=T.method,FL=T.extend({create:lk({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:lk({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:lk({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var Ah=T.method,BL=T.extend({create:Ah({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:Ah({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:Ah({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:Ah({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var Ch=T.method,VL=T.extend({create:Ch({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Ch({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Ch({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Ch({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var cd=T.method,HL=T.extend({deliverCard:cd({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:cd({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:cd({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:cd({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:cd({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})});var Oh=T.method,ZL=T.extend({create:Oh({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:Oh({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:Oh({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:Oh({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var ud=T.method,JL=T.extend({create:ud({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:ud({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:ud({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:ud({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:ud({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var Cae=T.method,GL=T.extend({create:Cae({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var Oae=T.method,KL=T.extend({create:Oae({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var $ae=T.method,WL=T.extend({retrieve:$ae({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})});var QL=T.method,XL=T.extend({retrieve:QL({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:QL({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})});var mc=T.method,YL=T.extend({create:mc({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:mc({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:mc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:mc({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:mc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:mc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})});var dk=T.method,e4=T.extend({create:dk({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:dk({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:dk({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var Rae=T.method,t4=T.extend({fundCashBalance:Rae({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var pk=T.method,r4=T.extend({create:pk({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:pk({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:pk({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var ld=T.method,n4=T.extend({create:ld({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:ld({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:ld({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:ld({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:ld({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var o4=T.method,i4=T.extend({retrieve:o4({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:o4({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var Zi=T.method,s4=T.extend({create:Zi({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Zi({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Zi({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Zi({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Zi({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Zi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Zi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Zi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})});var mk=T.method,a4=T.extend({retrieve(...t){return mk({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:s(r=>this.addFetchRelatedObjectIfNeeded(r),"transformResponseData")}).apply(this,t)},list(...t){return mk({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:s(r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))}),"transformResponseData")}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:s(()=>mk({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeContext:t.context}]),"fetchRelatedObject")})}});var $h=T.method,c4=T.extend({create:$h({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:$h({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:$h({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:$h({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var ks=T.method,u4=T.extend({create:ks({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ks({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ks({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ks({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ks({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ks({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ks({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var fk=T.method,l4=T.extend({fail:fk({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:fk({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:fk({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var Rh=T.method,d4=T.extend({create:Rh({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Rh({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Rh({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Rh({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var dd=T.method,p4=T.extend({create:dd({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:dd({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:dd({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:dd({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:dd({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var Nae=T.method,m4=T.extend({create:Nae({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var Dae=T.method,f4=T.extend({create:Dae({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})});var jae=T.method,h4=T.extend({create:jae({method:"POST",fullPath:"/v2/billing/meter_event_session"})});var Mae=T.method,g4=T.extend({create:Mae({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})});var zae=T.method,y4=T.extend({create:zae({method:"POST",fullPath:"/v1/billing/meter_events"})});var Uae=T.method,v4=T.extend({create:Uae({method:"POST",fullPath:"/v2/billing/meter_events"})});var Is=T.method,_4=T.extend({create:Is({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Is({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Is({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Is({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Is({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Is({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Is({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var Lae=T.method,b4=T.extend({create:Lae({method:"POST",fullPath:"/v1/terminal/onboarding_links"})});var pd=T.method,w4=T.extend({create:pd({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:pd({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:pd({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:pd({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:pd({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var Nh=T.method,S4=T.extend({update:Nh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:Nh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:Nh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:Nh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var Dh=T.method,x4=T.extend({create:Dh({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Dh({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Dh({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Dh({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var jh=T.method,T4=T.extend({update:jh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:jh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:jh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:jh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var Mh=T.method,E4=T.extend({create:Mh({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Mh({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Mh({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Mh({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var zh=T.method,k4=T.extend({create:zh({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:zh({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:zh({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:zh({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var hk=T.method,I4=T.extend({activate:hk({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:hk({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:hk({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var P4=T.method,A4=T.extend({retrieve:P4({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:P4({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var C4=T.method,O4=T.extend({retrieve:C4({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:C4({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var hn=T.method,$4=T.extend({create:hn({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:hn({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:hn({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:hn({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var gk=T.method,R4=T.extend({presentPaymentMethod:gk({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:gk({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:gk({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})});var qae=T.method,N4=T.extend({create:qae({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var D4=T.method,j4=T.extend({retrieve:D4({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:D4({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var Fae=T.method,M4=T.extend({create:Fae({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var z4=T.method,U4=T.extend({retrieve:z4({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:z4({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var Bae=T.method,L4=T.extend({expire:Bae({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var Uh=T.method,q4=T.extend({create:Uh({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Uh({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Uh({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Uh({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var yk=T.method,F4=T.extend({create:yk({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:yk({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:yk({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var B4=T.method,V4=T.extend({retrieve:B4({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:B4({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var vk=T.method,H4=T.extend({create:vk({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:vk({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:vk({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var Z4=T.method,J4=T.extend({retrieve:Z4({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Z4({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var Lh=T.method,G4=T.extend({create:Lh({method:"POST",fullPath:"/v1/apps/secrets"}),list:Lh({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Lh({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Lh({method:"GET",fullPath:"/v1/apps/secrets/find"})});var Vae=T.method,K4=T.extend({create:Vae({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var fc=T.method,W4=T.extend({create:fc({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:fc({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:fc({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:fc({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:fc({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:fc({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var Q4=T.method,X4=T.extend({create:Q4({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Q4({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var Y4=T.method,eq=T.extend({retrieve:Y4({method:"GET",fullPath:"/v1/tax/settings"}),update:Y4({method:"POST",fullPath:"/v1/tax/settings"})});var tq=T.method,rq=T.extend({retrieve:tq({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:tq({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var md=T.method,nq=T.extend({create:md({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:md({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:md({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:md({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:md({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var _k=T.method,oq=T.extend({retrieve:_k({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:_k({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:_k({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var iq=T.method,sq=T.extend({retrieve:iq({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:iq({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var aq=T.method,cq=T.extend({retrieve:aq({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:aq({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var bk=T.method,uq=T.extend({retrieve:bk({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:bk({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:bk({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var qh=T.method,lq=T.extend({retrieve:qh({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:qh({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:qh({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:qh({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var wk=T.method,dq=T.extend({createForceCapture:wk({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:wk({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:wk({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var pq=T.method,mq=T.extend({retrieve:pq({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:pq({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var Fh=T.method,fq=T.extend({create:Fh({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:Fh({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:Fh({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:Fh({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var fd=T.method,hq=T.extend({create:fd({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:fd({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:fd({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:fd({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:fd({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var gq=T.method,yq=T.extend({retrieve:gq({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:gq({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var hc=T.method,vq=T.extend({create:hc({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:hc({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:hc({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var tr=T.method,Sk=T.extend({create:tr({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?tr({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),tr({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:tr({method:"POST",fullPath:"/v1/accounts/{account}"}),list:tr({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:tr({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:tr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:tr({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:tr({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:tr({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:tr({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:tr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:tr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:tr({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:tr({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:tr({method:"GET",fullPath:"/v1/account"}),retrieveCapability:tr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:tr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:tr({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:tr({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:tr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:tr({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var Hae=T.method,_q=T.extend({create:Hae({method:"POST",fullPath:"/v1/account_links"})});var Zae=T.method,bq=T.extend({create:Zae({method:"POST",fullPath:"/v1/account_sessions"})});var Bh=T.method,wq=T.extend({create:Bh({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Bh({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Bh({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Bh({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var gc=T.method,Sq=T.extend({retrieve:gc({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:gc({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:gc({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:gc({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:gc({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:gc({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var Jae=T.method,xq=T.extend({retrieve:Jae({method:"GET",fullPath:"/v1/balance"})});var Tq=T.method,Eq=T.extend({retrieve:Tq({method:"GET",fullPath:"/v1/balance_settings"}),update:Tq({method:"POST",fullPath:"/v1/balance_settings"})});var kq=T.method,Iq=T.extend({retrieve:kq({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:kq({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var yc=T.method,Pq=T.extend({create:yc({method:"POST",fullPath:"/v1/charges"}),retrieve:yc({method:"GET",fullPath:"/v1/charges/{charge}"}),update:yc({method:"POST",fullPath:"/v1/charges/{charge}"}),list:yc({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:yc({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:yc({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var Gae=T.method,Aq=T.extend({retrieve:Gae({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var Cq=T.method,Oq=T.extend({retrieve:Cq({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Cq({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var hd=T.method,$q=T.extend({create:hd({method:"POST",fullPath:"/v1/coupons"}),retrieve:hd({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:hd({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:hd({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:hd({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var Ji=T.method,Rq=T.extend({create:Ji({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Ji({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Ji({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Ji({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Ji({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Ji({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Ji({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Ji({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var Kae=T.method,Nq=T.extend({create:Kae({method:"POST",fullPath:"/v1/customer_sessions"})});var Pt=T.method,Dq=T.extend({create:Pt({method:"POST",fullPath:"/v1/customers"}),retrieve:Pt({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Pt({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Pt({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Pt({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Pt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Pt({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Pt({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Pt({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Pt({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Pt({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Pt({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Pt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Pt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Pt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Pt({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Pt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Pt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Pt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Pt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Pt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Pt({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Pt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Pt({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Pt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Pt({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Pt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Pt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var Vh=T.method,jq=T.extend({retrieve:Vh({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Vh({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Vh({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Vh({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var Mq=T.method,zq=T.extend({create:Mq({method:"POST",fullPath:"/v1/ephemeral_keys",validator:s((t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")},"validator")}),del:Mq({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var Uq=T.method,Lq=T.extend({retrieve:Uq({method:"GET",fullPath:"/v1/events/{id}"}),list:Uq({method:"GET",fullPath:"/v1/events",methodType:"list"})});var qq=T.method,Fq=T.extend({retrieve:qq({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:qq({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var Hh=T.method,Bq=T.extend({create:Hh({method:"POST",fullPath:"/v1/file_links"}),retrieve:Hh({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Hh({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Hh({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var Wae=s((t,e,r)=>{let n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;let o=new TextEncoder,i=new Uint8Array(0),a=o.encode(`\r
`);function c(p){let m=i,h=p instanceof Uint8Array?p:new Uint8Array(o.encode(p));i=new Uint8Array(m.length+h.length+2),i.set(m),i.set(h,m.length),i.set(a,i.length-2)}s(c,"push");function l(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}s(l,"q");let d=TL(e);for(let p in d){if(!Object.prototype.hasOwnProperty.call(d,p))continue;let m=d[p];if(c(`--${n}`),Object.prototype.hasOwnProperty.call(m,"data")){let h=m;c(`Content-Disposition: form-data; name=${l(p)}; filename=${l(h.name||"blob")}`),c(`Content-Type: ${h.type||"application/octet-stream"}`),c(""),c(h.data)}else c(`Content-Disposition: form-data; name=${l(p)}`),c(""),c(m)}return c(`--${n}--`),i},"multipartDataGenerator");function Vq(t,e,r,n){if(e=e||{},t!=="POST")return n(null,Hi(e));this._stripe._platformFunctions.tryBufferData(e).then(o=>{let i=Wae(t,o,r);return n(null,i)}).catch(o=>n(o,null))}s(Vq,"multipartRequestDataProcessor");var xk=T.method,Hq=T.extend({create:xk({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:xk({method:"GET",fullPath:"/v1/files/{file}"}),list:xk({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:Vq});var gd=T.method,Zq=T.extend({create:gd({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:gd({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:gd({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:gd({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:gd({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var Jq=T.method,Gq=T.extend({retrieve:Jq({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:Jq({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})});var Zh=T.method,Kq=T.extend({retrieve:Zh({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Zh({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Zh({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Zh({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})});var wr=T.method,Wq=T.extend({create:wr({method:"POST",fullPath:"/v1/invoices"}),retrieve:wr({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:wr({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:wr({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:wr({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:wr({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:wr({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:wr({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var Qae=T.method,Qq=T.extend({retrieve:Qae({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var Xq=T.method,Tk="connect.stripe.com",Yq=T.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Tk}/${r}?${Hi(t)}`},token:Xq({method:"POST",path:"oauth/token",host:Tk}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),Xq({method:"POST",path:"oauth/deauthorize",host:Tk}).apply(this,[t,...e])}});var eF=T.method,tF=T.extend({retrieve:eF({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:eF({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})});var An=T.method,rF=T.extend({create:An({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:An({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:An({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:An({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:An({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:An({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:An({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var yd=T.method,nF=T.extend({create:yd({method:"POST",fullPath:"/v1/payment_links"}),retrieve:yd({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:yd({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:yd({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:yd({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var Jh=T.method,oF=T.extend({create:Jh({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Jh({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Jh({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Jh({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var vd=T.method,iF=T.extend({create:vd({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:vd({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:vd({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:vd({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:vd({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var vc=T.method,sF=T.extend({create:vc({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:vc({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:vc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:vc({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:vc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:vc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var Gi=T.method,aF=T.extend({retrieve:Gi({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:Gi({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:Gi({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})});var _c=T.method,cF=T.extend({create:_c({method:"POST",fullPath:"/v1/payouts"}),retrieve:_c({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:_c({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:_c({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:_c({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:_c({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var _d=T.method,uF=T.extend({create:_d({method:"POST",fullPath:"/v1/plans"}),retrieve:_d({method:"GET",fullPath:"/v1/plans/{plan}"}),update:_d({method:"POST",fullPath:"/v1/plans/{plan}"}),list:_d({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:_d({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var bd=T.method,lF=T.extend({create:bd({method:"POST",fullPath:"/v1/prices"}),retrieve:bd({method:"GET",fullPath:"/v1/prices/{price}"}),update:bd({method:"POST",fullPath:"/v1/prices/{price}"}),list:bd({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:bd({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var bo=T.method,dF=T.extend({create:bo({method:"POST",fullPath:"/v1/products"}),retrieve:bo({method:"GET",fullPath:"/v1/products/{id}"}),update:bo({method:"POST",fullPath:"/v1/products/{id}"}),list:bo({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:bo({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:bo({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:bo({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:bo({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:bo({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:bo({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Gh=T.method,pF=T.extend({create:Gh({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Gh({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Gh({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Gh({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var wo=T.method,mF=T.extend({create:wo({method:"POST",fullPath:"/v1/quotes"}),retrieve:wo({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:wo({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:wo({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:wo({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:wo({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:wo({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:wo({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:wo({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:wo({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var wd=T.method,fF=T.extend({create:wd({method:"POST",fullPath:"/v1/refunds"}),retrieve:wd({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:wd({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:wd({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:wd({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var Ek=T.method,hF=T.extend({retrieve:Ek({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Ek({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Ek({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var Xae=T.method,gF=T.extend({list:Xae({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var Ps=T.method,yF=T.extend({create:Ps({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Ps({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Ps({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Ps({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Ps({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Ps({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Ps({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var Kh=T.method,vF=T.extend({create:Kh({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Kh({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Kh({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Kh({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var Sd=T.method,_F=T.extend({create:Sd({method:"POST",fullPath:"/v1/sources"}),retrieve:Sd({method:"GET",fullPath:"/v1/sources/{source}"}),update:Sd({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Sd({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Sd({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var xd=T.method,bF=T.extend({create:xd({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:xd({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:xd({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:xd({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:xd({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})});var bc=T.method,wF=T.extend({create:bc({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:bc({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:bc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:bc({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:bc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:bc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var Yo=T.method,SF=T.extend({create:Yo({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Yo({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Yo({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Yo({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Yo({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Yo({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:Yo({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:Yo({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Yo({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var xF=T.method,TF=T.extend({retrieve:xF({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:xF({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var Wh=T.method,EF=T.extend({create:Wh({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Wh({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Wh({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Wh({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var Qh=T.method,kF=T.extend({create:Qh({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Qh({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Qh({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Qh({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var IF=T.method,PF=T.extend({create:IF({method:"POST",fullPath:"/v1/tokens"}),retrieve:IF({method:"GET",fullPath:"/v1/tokens/{token}"})});var Td=T.method,AF=T.extend({create:Td({method:"POST",fullPath:"/v1/topups"}),retrieve:Td({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Td({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Td({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Td({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var Ki=T.method,CF=T.extend({create:Ki({method:"POST",fullPath:"/v1/transfers"}),retrieve:Ki({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Ki({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Ki({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Ki({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Ki({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Ki({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Ki({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var Ed=T.method,OF=T.extend({create:Ed({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Ed({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Ed({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Ed({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Ed({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var Yae=Bt("apps",{Secrets:G4}),ece=Bt("billing",{Alerts:zL,CreditBalanceSummary:WL,CreditBalanceTransactions:XL,CreditGrants:YL,MeterEventAdjustments:m4,MeterEvents:y4,Meters:_4}),tce=Bt("billingPortal",{Configurations:ZL,Sessions:K4}),rce=Bt("checkout",{Sessions:W4}),nce=Bt("climate",{Orders:w4,Products:O4,Suppliers:rq}),oce=Bt("entitlements",{ActiveEntitlements:ML,Features:c4}),ice=Bt("financialConnections",{Accounts:DL,Sessions:X4,Transactions:cq}),sce=Bt("forwarding",{Requests:H4}),ace=Bt("identity",{VerificationReports:yq,VerificationSessions:vq}),cce=Bt("issuing",{Authorizations:LL,Cardholders:BL,Cards:VL,Disputes:n4,PersonalizationDesigns:k4,PhysicalBundles:A4,Tokens:oq,Transactions:uq}),uce=Bt("radar",{EarlyFraudWarnings:i4,ValueListItems:fq,ValueLists:hq}),lce=Bt("reporting",{ReportRuns:F4,ReportTypes:V4}),dce=Bt("sigma",{ScheduledQueryRuns:J4}),pce=Bt("tax",{Associations:UL,Calculations:FL,Registrations:q4,Settings:eq,Transactions:lq}),mce=Bt("terminal",{Configurations:JL,ConnectionTokens:KL,Locations:p4,OnboardingLinks:b4,Readers:$4}),fce=Bt("testHelpers",{ConfirmationTokens:GL,Customers:t4,Refunds:L4,TestClocks:nq,Issuing:Bt("issuing",{Authorizations:qL,Cards:HL,PersonalizationDesigns:I4,Transactions:dq}),Terminal:Bt("terminal",{Readers:R4}),Treasury:Bt("treasury",{InboundTransfers:l4,OutboundPayments:S4,OutboundTransfers:T4,ReceivedCredits:N4,ReceivedDebits:M4})}),hce=Bt("treasury",{CreditReversals:e4,DebitReversals:r4,FinancialAccounts:u4,InboundTransfers:d4,OutboundPayments:x4,OutboundTransfers:E4,ReceivedCredits:j4,ReceivedDebits:U4,TransactionEntries:sq,Transactions:mq}),gce=Bt("v2",{Billing:Bt("billing",{MeterEventAdjustments:f4,MeterEventSession:h4,MeterEventStream:g4,MeterEvents:v4}),Core:Bt("core",{EventDestinations:s4,Events:a4})});var $F="api.stripe.com",RF="443",NF="/v1/",DF=uk,jF=8e4,MF=5,zF=.5,yce=["name","version","url","partner_id"],UF=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],vce=s(t=>new Ih(t,T.MAX_BUFFERED_REQUEST_METRICS),"defaultRequestSenderFactory");function LF(t,e=vce){r.PACKAGE_VERSION="20.0.0",r.API_VERSION=uk,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},EL()),r.StripeResource=T,r.StripeContext=sd,r.resources=wc,r.HttpClient=Er,r.HttpClientResponse=Fi,r.CryptoProvider=qi,r.webhooks=NL(t);function r(n,o={}){if(!(this instanceof r))return new r(n,o);let i=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=i.httpAgent||null;this._api={host:i.host||$F,port:i.port||RF,protocol:i.protocol||"https",basePath:NF,version:i.apiVersion||DF,timeout:hh("timeout",i.timeout,jF),maxNetworkRetries:hh("maxNetworkRetries",i.maxNetworkRetries,2),agent:a,httpClient:i.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};let c=i.typescript||!1;c!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=c),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(n,i.authenticator),this.errors=Eh,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=r.StripeResource}return s(r,"Stripe"),r.errors=Eh,r.createNodeHttpClient=t.createNodeHttpClient,r.createFetchHttpClient=t.createFetchHttpClient,r.createNodeCryptoProvider=t.createNodeCryptoProvider,r.createSubtleCryptoProvider=t.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,o,i,a){return this._requestSender._rawRequest(n,o,i,a)},_setAuthenticator(n,o){if(n&&o)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!o)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?dh(n):o},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=yce.reduce((o,i)=>(typeof n[i]=="string"&&(o=o||{},o[i]=n[i]),o),{})},_setApiField(n,o){this._api[n]=o},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:s(n=>{switch(n){case"DEFAULT_HOST":return $F;case"DEFAULT_PORT":return RF;case"DEFAULT_BASE_PATH":return NF;case"DEFAULT_API_VERSION":return DF;case"DEFAULT_TIMEOUT":return jF;case"MAX_NETWORK_RETRY_DELAY_SEC":return MF;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return zF}return r[n]},"getConstant"),getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,o,i){let a=hh(n,o,i);this._setApiField(n,a)},getMaxNetworkRetryDelay(){return MF},getInitialNetworkRetryDelay(){return zF},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,o){this._platformFunctions.getUname().then(i=>{var a;let c={};for(let d in n)Object.prototype.hasOwnProperty.call(n,d)&&(c[d]=encodeURIComponent((a=n[d])!==null&&a!==void 0?a:"null"));c.uname=encodeURIComponent(i||"UNKNOWN");let l=this.getApiField("httpClient");l&&(c.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(c.application=this._appInfo),o(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let n in wc)Object.prototype.hasOwnProperty.call(wc,n)&&(this[xL(n)]=new wc[n](this))},_getPropsFromConfig(n){if(!n)return{};let o=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:n};if(Object.keys(n).filter(c=>!UF.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${UF.join(", ")}`);return n},parseEventNotification(n,o,i,a,c,l){let d=this.webhooks.constructEvent(n,o,i,a,c,l);return d.context&&(d.context=sd.parse(d.context)),d.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${d.id}`,void 0,{stripeContext:d.context},["fetch_event"]),d.fetchRelatedObject=()=>d.related_object?this._requestSender._rawRequest("GET",d.related_object.url,void 0,{stripeContext:d.context},["fetch_related_object"]):Promise.resolve(null),d}},r}s(LF,"createStripe");var _ce=LF(new kh),qF=_ce;function bce(){let t=process.env.STRIPE_SECRET_KEY;if(!t)throw new Error("STRIPE_SECRET_KEY environment variable is not set. Configure Stripe credentials.");return t}s(bce,"getStripeSecretKey");var wce={apiVersion:"2025-11-17.clover",typescript:!0,appInfo:{name:"AegisWallet",version:"1.0.0",url:"https://aegiswallet.com.br"}},kk=null;function gn(){return kk||(kk=new qF(bce(),wce)),kk}s(gn,"getStripeClient");var Xh=class t{static{s(this,"StripeCustomerService")}static async createCustomer(e,r,n){let o=gn();try{let i=await o.customers.create({email:r,name:n,metadata:{clerkUserId:e}});return L.info("Stripe customer created",{clerkUserId:e,stripeCustomerId:i.id}),i.id}catch(i){throw L.error("Failed to create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao criar cliente no Stripe")}}static async getOrCreateCustomer(e,r,n){let o=gn();try{let i=await o.customers.search({query:`metadata['clerkUserId']:'${e}'`,limit:1});if(i.data.length>0)return i.data[0].id;let a=await o.customers.list({email:r,limit:1});return a.data.length>0?(await o.customers.update(a.data[0].id,{metadata:{clerkUserId:e}}),a.data[0].id):await t.createCustomer(e,r,n)}catch(i){throw L.error("Failed to get/create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao processar cliente no Stripe")}}static async updateCustomer(e,r){let n=gn();try{await n.customers.update(e,r)}catch(o){throw L.error("Failed to update Stripe customer",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async deleteCustomer(e){let r=gn();try{let n=await r.subscriptions.list({customer:e,status:"active"});for(let o of n.data)await r.subscriptions.cancel(o.id);await r.customers.del(e),L.info("Stripe customer deleted",{stripeCustomerId:e})}catch(n){throw L.error("Failed to delete Stripe customer",{stripeCustomerId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}};var Sce=u.object({STRIPE_SECRET_KEY:u.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_PUBLISHABLE_KEY:u.string().min(1,"STRIPE_PUBLISHABLE_KEY is required"),STRIPE_WEBHOOK_SECRET:u.string().min(1,"STRIPE_WEBHOOK_SECRET is required"),STRIPE_SUCCESS_URL:u.string().url("STRIPE_SUCCESS_URL must be a valid URL"),STRIPE_CANCEL_URL:u.string().url("STRIPE_CANCEL_URL must be a valid URL"),STRIPE_PORTAL_RETURN_URL:u.string().url("STRIPE_PORTAL_RETURN_URL must be a valid URL"),STRIPE_PRICE_BASIC_MONTHLY:u.string().min(1,"STRIPE_PRICE_BASIC_MONTHLY is required"),STRIPE_PRICE_ADVANCED_MONTHLY:u.string().min(1,"STRIPE_PRICE_ADVANCED_MONTHLY is required")}),So;try{So=Sce.parse(process.env)}catch{So=process.env}var As={secretKey:So?.STRIPE_SECRET_KEY,publishableKey:So?.STRIPE_PUBLISHABLE_KEY,webhookSecret:So?.STRIPE_WEBHOOK_SECRET,successUrl:So?.STRIPE_SUCCESS_URL,cancelUrl:So?.STRIPE_CANCEL_URL,portalReturnUrl:So?.STRIPE_PORTAL_RETURN_URL},FF={BASIC_MONTHLY:So?.STRIPE_PRICE_BASIC_MONTHLY,ADVANCED_MONTHLY:So?.STRIPE_PRICE_ADVANCED_MONTHLY},xce=[{id:"free",name:"Gratuito",priceCents:0,features:["Dashboard b\xE1sico","1 conta banc\xE1ria","Transa\xE7\xF5es limitadas"],aiModels:[]},{id:"basic",name:"B\xE1sico",priceCents:5900,features:["Chat IA (Gemini Flash)","3 contas banc\xE1rias","Automa\xE7\xF5es b\xE1sicas"],aiModels:["gemini-flash"]},{id:"advanced",name:"Avan\xE7ado",priceCents:11900,features:["Todas as IAs","Contas ilimitadas","API access","Suporte priorit\xE1rio"],aiModels:["gpt-4o","claude-sonnet","gemini-pro","gemini-flash"]}],Sc=s(t=>xce.find(e=>e.id===t),"getPlanById"),kd=s(t=>t===FF.BASIC_MONTHLY?Sc("basic"):t===FF.ADVANCED_MONTHLY?Sc("advanced"):null,"getPlanByStripePrice"),BF=s(t=>{let e=Sc(t);return e?e.aiModels.length>0:!1},"canAccessAI"),VF=s(t=>{let e=Sc(t);return e?e.aiModels:[]},"getAllowedModels");var ei=class{static{s(this,"StripeSubscriptionService")}static async createCheckoutSession(e,r,n,o,i){let a=gn(),c=fr();try{let[l]=await c.select().from(K).where(Z(K.id,e)).limit(1);if(!l?.email)throw new Error("Usu\xE1rio n\xE3o encontrado ou sem email");let d=await Xh.getOrCreateCustomer(e,l.email,l.fullName||void 0),p=i||As.successUrl?.replace(/\/billing\/success$/,"")||"https://app.aegiswallet.com.br",m=n||`${p}/billing/success`,h=o||`${p}/billing/cancel`,y=await a.checkout.sessions.create({customer:d,mode:"subscription",payment_method_types:["card"],line_items:[{price:r,quantity:1}],success_url:m,cancel_url:h,metadata:{clerkUserId:e},allow_promotion_codes:!0});if(!y.url)throw new Error("Stripe n\xE3o retornou URL de checkout v\xE1lida");return{sessionId:y.id,checkoutUrl:y.url}}catch(l){throw L.error("Failed to create checkout session",{userId:e,priceId:r,requestOrigin:i,error:l instanceof Error?l.message:"Unknown error"}),l}}static async createPortalSession(e,r){let n=gn();try{return{portalUrl:(await n.billingPortal.sessions.create({customer:e,return_url:r||As.portalReturnUrl||"https://app.aegiswallet.com.br/settings/billing"})).url}}catch(o){throw L.error("Failed to create portal session",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async getSubscription(e){let r=fr();try{let n=await r.select({subscription:tt,plan:$r}).from(tt).leftJoin($r,Z(tt.planId,$r.id)).where(Z(tt.userId,e)).limit(1);if(n.length===0)return L.info("No subscription found for user",{userId:e}),null;let{subscription:o,plan:i}=n[0];return o?(L.info("Retrieved subscription for user",{userId:e,subscriptionId:o.id,status:o.status,planId:o.planId}),{subscription:o,plan:i||null}):(L.warn("Subscription record is null despite query success",{userId:e}),null)}catch(n){throw L.error("Failed to get subscription",{userId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}static async syncSubscriptionFromStripe(e){let r=gn(),n=fr();try{let i=await r.subscriptions.retrieve(e),a=typeof i.customer=="string"?i.customer:i.customer.id,[c]=await n.select().from(tt).where(Z(tt.stripeCustomerId,a)).limit(1);if(!c)return L.warn("Subscription sync skipped: User not found for customer",{customerId:a,stripeSubscriptionId:e}),null;let l=i.items.data[0]?.price?.id;if(!l)throw L.error("No price ID found in subscription",{stripeSubscriptionId:e,items:i.items.data.length}),new Error("Pre\xE7o n\xE3o encontrado na assinatura do Stripe");let d=kd(l),p=d?d.id:"free",m=i.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m,y=i.items.data[0];if(!y)throw L.error("No subscription items found",{stripeSubscriptionId:e}),new Error("Item da assinatura n\xE3o encontrado");let g=y.current_period_start,f=y.current_period_end;if(!(g&&f))throw L.error("Missing billing period dates",{stripeSubscriptionId:e,periodStart:g,periodEnd:f}),new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let _={stripeSubscriptionId:i.id,planId:p,status:h,currentPeriodStart:new Date(g*1e3),currentPeriodEnd:new Date(f*1e3)},[w]=await n.update(tt).set({..._,cancelAtPeriodEnd:i.cancel_at_period_end,canceledAt:i.canceled_at?new Date(i.canceled_at*1e3):null,trialStart:i.trial_start?new Date(i.trial_start*1e3):null,trialEnd:i.trial_end?new Date(i.trial_end*1e3):null,updatedAt:new Date}).where(Z(tt.id,c.id)).returning();return L.info("Subscription synced from Stripe",{userId:c.userId,subscriptionId:i.id,status:h,planId:p,previousStatus:c.status,previousPlanId:c.planId}),w}catch(o){throw L.error("Failed to sync subscription",{stripeSubscriptionId:e,error:o instanceof Error?o.message:"Unknown error",stack:o instanceof Error?o.stack:void 0}),o}}static async cancelSubscription(e,r=!1){let n=gn(),o=fr();try{let[i]=await o.select().from(tt).where(Z(tt.userId,e)).limit(1);if(!i?.stripeSubscriptionId)throw new Error("Assinatura n\xE3o encontrada");return r?await n.subscriptions.cancel(i.stripeSubscriptionId):await n.subscriptions.update(i.stripeSubscriptionId,{cancel_at_period_end:!0}),!0}catch(i){throw L.error("Failed to cancel subscription",{userId:e,error:i instanceof Error?i.message:"Unknown error"}),i}}};var HF=new Pe,Tce=u.object({priceId:u.string().min(1),successUrl:u.string().url().optional(),cancelUrl:u.string().url().optional()});HF.post("/",de,be({windowMs:6e4,max:30}),Fe("json",Tce),async t=>{let{user:e}=t.get("auth"),{priceId:r,successUrl:n,cancelUrl:o}=t.req.valid("json"),i=t.get("requestId");if(!e?.id)return L.warn("Checkout request missing user authentication",{requestId:i}),t.json({error:"Usu\xE1rio n\xE3o autenticado"},401);if(!e?.email)return L.warn("Checkout request missing user email",{requestId:i,userId:e.id}),t.json({error:"Email do usu\xE1rio n\xE3o encontrado"},400);try{let a=t.req.header("origin")||t.req.header("referer")?.replace(/\/$/,""),c=await ei.createCheckoutSession(e.id,r,n,o,a);return L.info("Checkout session created successfully",{userId:e.id,priceId:r,requestOrigin:a,sessionId:c.sessionId}),t.json({data:c,meta:{requestId:i}})}catch(a){let c=a instanceof Error?a.message:"Unknown error";return L.error("Checkout creation failed",{userId:e.id,priceId:r,error:c,requestId:i}),c.includes("Usu\xE1rio n\xE3o encontrado")?t.json({error:"Usu\xE1rio n\xE3o encontrado"},404):c.includes("plano")||c.includes("price")?t.json({error:"Plano inv\xE1lido ou n\xE3o encontrado"},400):c.includes("Stripe")?t.json({error:"Servi\xE7o de pagamento temporariamente indispon\xEDvel"},503):t.json({error:"Falha ao criar checkout"},500)}});var ZF=HF;var Ik=new Pe,Ece=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0),status:u.enum(["draft","open","paid","void","uncollectible"]).optional()});Ik.get("/",de,be({windowMs:6e4,max:30}),Fe("query",Ece),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n,status:o}=t.req.valid("query"),i=t.get("requestId");try{let a=[],[c]=[{count:0}];return t.json({data:{invoices:a,total:Number(c?.count||0),hasMore:!1},meta:{requestId:i}})}catch(a){return L.error("Failed to fetch invoices",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:i}),t.json({error:"Falha ao buscar faturas"},500)}});Ik.get("/:id/pdf",de,be({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{L.info("Invoice PDF download requested",{userId:e.id,invoiceId:r,requestId:n});let o=new Blob(["Mock PDF content"],{type:"application/pdf"});return new Response(o,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="fatura-${r}.pdf"`}})}catch(o){return L.error("Failed to download invoice PDF",{userId:e.id,invoiceId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao baixar fatura"},500)}});var JF=Ik;var GF=new Pe,kce=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0)});GF.get("/",de,be({windowMs:6e4,max:30}),Fe("query",kce),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n}=t.req.valid("query"),o=t.get("requestId"),i=fr();try{let a=await i.select().from(or).where(Z(or.userId,e.id)).orderBy(jt(or.createdAt)).limit(r).offset(n),[c]=await i.select({count:M`count(*)`}).from(or).where(Z(or.userId,e.id));return t.json({data:{payments:a,total:Number(c.count)},meta:{requestId:o}})}catch(a){return L.error("Failed to fetch payment history",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:o}),t.json({error:"Falha ao buscar hist\xF3rico de pagamentos"},500)}});var KF=GF;var Id=new Pe,Ice=u.object({type:u.enum(["card","pix","bank_account"]),isDefault:u.boolean().optional(),cardNumber:u.string().optional(),expiryMonth:u.number().min(1).max(12).optional(),expiryYear:u.number().min(new Date().getFullYear()).optional(),cvc:u.string().optional(),pixKey:u.string().optional(),pixKeyType:u.enum(["cpf","cnpj","phone","email","random"]).optional(),bankCode:u.string().optional(),accountNumber:u.string().optional(),accountType:u.enum(["checking","savings"]).optional(),accountHolderName:u.string().optional(),documentNumber:u.string().optional()}),Pce=u.object({isDefault:u.boolean()});Id.get("/",de,be({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=[];return t.json({data:{paymentMethods:n,hasMore:!1,total:0},meta:{requestId:r}})}catch(n){return L.error("Failed to fetch payment methods",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar m\xE9todos de pagamento"},500)}});Id.post("/",de,be({windowMs:6e4,max:10}),Fe("json",Ice),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Payment method addition requested",{userId:e.id,type:r.type,requestId:n}),t.json({data:{paymentMethod:{id:"pm_mock_id",type:r.type,isDefault:r.isDefault,createdAt:new Date().toISOString()}},meta:{requestId:n}})}catch(o){return L.error("Failed to add payment method",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao adicionar m\xE9todo de pagamento"},500)}});Id.put("/:id",de,be({windowMs:6e4,max:20}),Fe("json",Pce),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.req.valid("json"),o=t.get("requestId");try{return L.info("Payment method update requested",{userId:e.id,paymentMethodId:r,data:n,requestId:o}),t.json({data:{paymentMethod:{id:r,isDefault:n.isDefault}},meta:{requestId:o}})}catch(i){return L.error("Failed to update payment method",{userId:e.id,paymentMethodId:r,error:i instanceof Error?i.message:"Unknown error",requestId:o}),t.json({error:"Falha ao atualizar m\xE9todo de pagamento"},500)}});Id.delete("/:id",de,be({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{return L.info("Payment method deletion requested",{userId:e.id,paymentMethodId:r,requestId:n}),t.json({data:{success:!0},meta:{requestId:n}})}catch(o){return L.error("Failed to remove payment method",{userId:e.id,paymentMethodId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao remover m\xE9todo de pagamento"},500)}});var WF=Id;var QF=new Pe;QF.get("/",async t=>{let e=t.get("requestId"),r=fr();try{let o=(await r.select().from($r).where(Z($r.isActive,!0)).orderBy(ai($r.displayOrder))).map(i=>({...i,priceFormatted:new Intl.NumberFormat("pt-BR",{style:"currency",currency:i.currency}).format(i.priceCents/100)}));return t.json({data:{plans:o},meta:{requestId:e}})}catch(n){return L.error("Failed to fetch plans",{error:n instanceof Error?n.message:"Unknown error",requestId:e}),t.json({error:"Falha ao buscar planos"},500)}});var XF=QF;var YF=new Pe,Ace=u.object({returnUrl:u.string().url().optional()});YF.post("/",de,be({windowMs:6e4,max:10}),Fe("json",Ace),async t=>{let{user:e}=t.get("auth"),{returnUrl:r}=t.req.valid("json"),n=t.get("requestId");try{let o=await ei.getSubscription(e.id);if(!o?.subscription?.stripeCustomerId)return t.json({error:"Assinatura n\xE3o encontrada"},400);let i=await ei.createPortalSession(o.subscription.stripeCustomerId,r);return L.info("Portal session created",{userId:e.id}),t.json({data:i,meta:{requestId:n}})}catch(o){return L.error("Portal creation failed",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao criar portal"},500)}});var e6=YF;var t6=new Pe;t6.get("/",de,be({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=await ei.getSubscription(e.id),o=n?.plan||Sc("free"),i=o?.id||"free",a=BF(i),c=VF(i);return t.json({data:{subscription:n?.subscription||null,plan:o,canAccessAI:a,allowedModels:c},meta:{requestId:r}})}catch(n){return L.error("Failed to get subscription",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar assinatura"},500)}});var r6=t6;var xo=class{static{s(this,"StripeWebhookService")}static constructEvent(e,r){let n=gn();if(!As.webhookSecret)throw L.error("Webhook secret not configured",{hasConfig:!!As.webhookSecret}),new Error("STRIPE_WEBHOOK_SECRET n\xE3o est\xE1 configurado. Verifique as vari\xE1veis de ambiente.");try{let o=n.webhooks.constructEvent(e,r,As.webhookSecret);return L.info("Webhook event constructed successfully",{type:o.type,id:o.id}),o}catch(o){let i=o instanceof Error?o.message:"Unknown error";throw L.error("Failed to construct webhook event",{error:i,signatureLength:r?.length}),new Error(`Falha ao validar webhook: ${i}`)}}static async handleCheckoutSessionCompleted(e){let r=fr(),n=e.metadata?.clerkUserId,o=typeof e.customer=="string"?e.customer:e.customer?.id,i=typeof e.subscription=="string"?e.subscription:e.subscription?.id;if(!(n&&o&&i))throw L.warn("Checkout session missing required metadata",{sessionId:e.id,hasClerkUserId:!!n,hasCustomerId:!!o,hasSubscriptionId:!!i}),new Error("Checkout session incompleto - metadados obrigat\xF3rios n\xE3o encontrados");try{let[a]=await r.select().from(tt).where(Z(tt.stripeSubscriptionId,i)).limit(1);if(a){L.info("Checkout session already processed",{sessionId:e.id,subscriptionId:i,existingStatus:a.status});return}let l=await gn().subscriptions.retrieve(i),d=l.items.data[0]?.price?.id;if(!d)throw new Error("Price ID n\xE3o encontrado na assinatura do Stripe");let p=kd(d),m=p?p.id:"free",h=l.items.data[0];if(!h)throw new Error("Item da assinatura n\xE3o encontrado");let y=h.current_period_start,g=h.current_period_end;if(!(y&&g))throw new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let f=l.status,_=f==="incomplete"||f==="incomplete_expired"||f==="paused"?"canceled":f;await r.update(tt).set({stripeCustomerId:o,stripeSubscriptionId:i,planId:m,status:_,currentPeriodStart:new Date(y*1e3),currentPeriodEnd:new Date(g*1e3),updatedAt:new Date}).where(Z(tt.userId,n)),L.info("Checkout session completed successfully",{clerkUserId:n,sessionId:e.id,subscriptionId:i,status:_,planId:m})}catch(a){let c=a instanceof Error?a.message:"Unknown error";throw L.error("Failed to process checkout session completion",{sessionId:e.id,clerkUserId:n,error:c}),a}}static async handleSubscriptionCreated(e){}static async handleSubscriptionUpdated(e){let r=fr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(tt).where(Z(tt.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription update webhook subscription not found",{customerId:n,subscriptionId:e.id});return}let i=e.items.data[0]?.price?.id;if(!i){L.error("No price ID found in subscription update",{subscriptionId:e.id});return}let a=kd(i),c=a?a.id:"free",l=e.items.data[0];if(!l){L.error("No subscription items found in update",{subscriptionId:e.id});return}let d=l.current_period_start,p=l.current_period_end,m=e.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m;await r.update(tt).set({stripeSubscriptionId:e.id,planId:c,status:h,currentPeriodStart:new Date(d*1e3),currentPeriodEnd:new Date(p*1e3),cancelAtPeriodEnd:e.cancel_at_period_end,canceledAt:e.canceled_at?new Date(e.canceled_at*1e3):null,updatedAt:new Date}).where(Z(tt.id,o.id)),L.info("Subscription updated webhook processed successfully",{subscriptionId:e.id,previousStatus:o.status,newStatus:h,previousPlanId:o.planId,newPlanId:c})}static async handleSubscriptionDeleted(e){let r=fr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(tt).where(Z(tt.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription delete webhook subscription not found",{customerId:n,subscriptionId:e.id});return}await r.update(tt).set({status:"canceled",canceledAt:new Date,updatedAt:new Date}).where(Z(tt.stripeCustomerId,n)),L.info("Subscription deleted webhook processed successfully",{subscriptionId:e.id,userId:o.userId,previousStatus:o.status})}static async handleInvoicePaid(e){let r=fr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice paid webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(tt).where(Z(tt.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice paid webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(or).where(Z(or.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(or).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_paid,currency:n.currency,status:"succeeded",description:n.description||"Assinatura AegisWallet",receiptUrl:n.hosted_invoice_url,invoicePdf:n.invoice_pdf}),L.info("Invoice paid webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_paid,currency:n.currency})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw L.error("Failed to process invoice payment",{invoiceId:n.id,userId:i.userId,error:l}),c}}static async handleInvoicePaymentFailed(e){let r=fr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice payment failed webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(tt).where(Z(tt.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice payment failed webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(or).where(Z(or.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment failure already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(or).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_due,currency:n.currency,status:"failed",description:n.description||"Falha no pagamento",failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message}),L.warn("Invoice payment failed webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_due,currency:n.currency,failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw L.error("Failed to process invoice payment failure",{invoiceId:n.id,userId:i.userId,error:l}),c}}};var n6=new Pe;n6.post("/",async t=>{let e=t.req.header("stripe-signature"),r=await t.req.text();if(!e)return t.json({error:"Missing stripe-signature header"},400);try{let n=xo.constructEvent(r,e);switch(L.info("Stripe webhook received",{type:n.type,id:n.id}),n.type){case"checkout.session.completed":await xo.handleCheckoutSessionCompleted(n.data.object);break;case"customer.subscription.created":await xo.handleSubscriptionCreated(n.data.object);break;case"customer.subscription.updated":await xo.handleSubscriptionUpdated(n.data.object);break;case"customer.subscription.deleted":await xo.handleSubscriptionDeleted(n.data.object);break;case"invoice.paid":await xo.handleInvoicePaid(n.data.object);break;case"invoice.payment_failed":await xo.handleInvoicePaymentFailed(n.data.object);break;default:L.info("Unhandled webhook event type",{type:n.type})}return t.json({received:!0})}catch(n){return L.error("Webhook processing failed",{error:n instanceof Error?n.message:"Unknown error"}),t.json({error:"Webhook handler failed"},400)}});var o6=n6;var ti=new Pe;ti.route("/checkout",ZF);ti.route("/subscription",r6);ti.route("/portal",e6);ti.route("/plans",XF);ti.route("/webhook",o6);ti.route("/payment-history",KF);ti.route("/payment-methods",WF);ti.route("/invoices",JF);var Pk=ti;var Ak=new Pe,Cce=u.object({categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()}),Oce=u.object({accountId:u.string().optional(),categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()});Ak.get("/events/search",de,be({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Fe("query",Cce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[Z(dt.userId,e.id),Pr(dt.title,`%${n.query}%`)];n.categoryId&&i.push(Z(dt.categoryId,n.categoryId)),n.startDate&&i.push(dr(dt.startDate,new Date(n.startDate))),n.endDate&&i.push(nr(dt.endDate,new Date(n.endDate)));let a=await r.select().from(dt).where(xe(...i)).orderBy(jt(dt.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar events searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar events",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar eventos"},500)}});Ak.get("/transactions/search",de,be({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Fe("query",Oce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[Z(re.userId,e.id),Pr(re.description,`%${n.query}%`)];n.accountId&&i.push(Z(re.accountId,n.accountId)),n.categoryId&&i.push(Z(re.categoryId,n.categoryId)),n.startDate&&i.push(dr(re.transactionDate,new Date(n.startDate))),n.endDate&&i.push(nr(re.transactionDate,new Date(n.endDate)));let a=await r.select().from(re).where(xe(...i)).orderBy(jt(re.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar transactions searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar transa\xE7\xF5es"},500)}});var Ck=Ak;var Ok=class{constructor(e){this.db=e}static{s(this,"ComplianceService")}async getUserConsents(e){try{return await this.db.select().from(At).where(Z(At.userId,e)).orderBy(jt(At.createdAt))}catch(r){throw L.error("Failed to get user consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos: ${r instanceof Error?r.message:"Unknown error"}`)}}async getConsentTemplates(){try{return await this.db.select().from(Yr).where(Z(Yr.isActive,!0)).orderBy(Yr.consentType)}catch(e){throw L.error("Failed to get consent templates",{error:e instanceof Error?e.message:"Unknown error"}),new Error(`Erro ao buscar templates de consentimento: ${e instanceof Error?e.message:"Unknown error"}`)}}async grantConsent(e,r,n,o,i){try{let[a]=await this.db.select().from(Yr).where(xe(Z(Yr.consentType,r),Z(Yr.isActive,!0))).limit(1);if(!a)throw new Error(`Template de consentimento n\xE3o encontrado: ${r}`);let c=await this.generateHash(a.fullTextPt),[l]=await this.db.select().from(At).where(xe(Z(At.userId,e),Z(At.consentType,r))).limit(1);if(l){let[p]=await this.db.update(At).set({granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).where(Z(At.id,l.id)).returning();return p}let[d]=await this.db.insert(At).values({userId:e,consentType:r,purpose:a.descriptionPt,legalBasis:"consent",granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).returning();return d}catch(a){throw L.error("Failed to grant consent",{error:a instanceof Error?a.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao conceder consentimento: ${a instanceof Error?a.message:"Unknown error"}`)}}async revokeConsent(e,r){try{await this.db.update(At).set({granted:!1,revokedAt:new Date}).where(xe(Z(At.userId,e),Z(At.consentType,r)))}catch(n){throw L.error("Failed to revoke consent",{error:n instanceof Error?n.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao revogar consentimento: ${n instanceof Error?n.message:"Unknown error"}`)}}async checkRequiredConsents(e,r){try{return(await this.db.select().from(At).where(xe(Z(At.userId,e),Fs(At.consentType,r),Z(At.granted,!0)))).length===r.length}catch(n){return L.error("Failed to check required consents",{error:n instanceof Error?n.message:"Unknown error",userId:e}),!1}}async getMissingMandatoryConsents(e){try{let n=(await this.db.select().from(Yr).where(xe(Z(Yr.isMandatory,!0),Z(Yr.isActive,!0)))).map(a=>a.consentType),i=(await this.db.select().from(At).where(xe(Z(At.userId,e),Z(At.granted,!0)))).map(a=>a.consentType);return n.filter(a=>!i.includes(a))}catch(r){throw L.error("Failed to get missing mandatory consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos obrigat\xF3rios faltantes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createExportRequest(e,r,n,o,i,a){try{let[c]=await this.db.insert(Nn).values({userId:e,requestType:r,format:n,status:"pending",dateFrom:o??null,dateTo:i??null,requestedVia:"app",ipAddress:a??null}).returning();return await this.logAuditEvent(e,"data_export_requested","data_export_requests",c.id,{requestType:r,format:n}),c}catch(c){throw L.error("Failed to create export request",{error:c instanceof Error?c.message:"Unknown error",userId:e}),new Error(`Erro ao criar solicita\xE7\xE3o de exporta\xE7\xE3o: ${c instanceof Error?c.message:"Unknown error"}`)}}async getExportRequests(e){try{return await this.db.select().from(Nn).where(Z(Nn.userId,e)).orderBy(jt(Nn.createdAt))}catch(r){throw L.error("Failed to get export requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exporta\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async createDeletionRequest(e,r,n,o,i){try{let[a]=await this.db.select({legalHold:Rr.legalHold}).from(Rr).where(xe(Z(Rr.userId,e),Z(Rr.legalHold,!0))).limit(1);if(a?.legalHold)throw new Error("Seus dados est\xE3o em reten\xE7\xE3o legal e n\xE3o podem ser exclu\xEDdos no momento");let c=new Date;c.setDate(c.getDate()+15);let[l]=await this.db.insert(Rr).values({userId:e,requestType:r,scope:n??{},reason:o??null,status:"pending",reviewDeadline:c,ipAddress:i??null}).returning();return await this.logAuditEvent(e,"data_deletion_requested","data_deletion_requests",l.id,{requestType:r}),l}catch(a){throw L.error("Failed to create deletion request",{error:a instanceof Error?a.message:"Unknown error",userId:e}),a}}async getDeletionRequests(e){try{return await this.db.select().from(Rr).where(Z(Rr.userId,e)).orderBy(jt(Rr.createdAt))}catch(r){throw L.error("Failed to get deletion requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exclus\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionLimits(e){try{return await this.db.select().from(xr).where(Z(xr.userId,e))}catch(r){throw L.error("Failed to get transaction limits",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar limites de transa\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async checkTransactionLimit(e,r,n){try{let[o]=await this.db.select().from(xr).where(xe(Z(xr.userId,e),Z(xr.limitType,r),Z(xr.isActive,!0))).limit(1);if(!o)return{allowed:!0};let i=Number(o.dailyLimit),a=Number(o.currentDailyUsed??0),c=o.transactionLimit?Number(o.transactionLimit):null,l=i-a;return c&&n>c?{allowed:!1,reason:`Valor excede limite por transa\xE7\xE3o de R$ ${c.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:n>l?{allowed:!1,reason:`Valor excede saldo di\xE1rio dispon\xEDvel de R$ ${l.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:{allowed:!0,limit:i,used:a,requested:n,remaining:l}}catch(o){throw L.error("Failed to check transaction limit",{error:o instanceof Error?o.message:"Unknown error",limitType:r,userId:e}),new Error(`Erro ao verificar limite de transa\xE7\xE3o: ${o instanceof Error?o.message:"Unknown error"}`)}}async updateLimitUsage(e,r,n){try{await this.db.update(xr).set({currentDailyUsed:M`${xr.currentDailyUsed} + ${n}`}).where(xe(Z(xr.userId,e),Z(xr.limitType,r)))}catch(o){throw L.error("Failed to update limit usage",{error:o instanceof Error?o.message:"Unknown error",userId:e,limitType:r,amount:n}),new Error(`Erro ao atualizar uso de limite: ${o instanceof Error?o.message:"Unknown error"}`)}}async logAuditEvent(e,r,n,o,i){try{let a=new Date;a.setFullYear(a.getFullYear()+5),await this.db.insert(en).values({userId:e,eventType:r,resourceType:n,resourceId:o??null,description:i?.action??null,metadata:i??{},previousState:null,newState:null,ipAddress:null,userAgent:null,sessionId:null,retentionUntil:a})}catch(a){L.error("Failed to log audit event",{error:a instanceof Error?a.message:"Unknown error",eventType:r,userId:e})}}async getAuditHistory(e,r){try{let n=[Z(en.userId,e)];return r?.eventType&&n.push(Z(en.eventType,r.eventType)),r?.startDate&&n.push(dr(en.createdAt,r.startDate)),r?.endDate&&n.push(nr(en.createdAt,r.endDate)),await this.db.select().from(en).where(n.length>1?xe(...n):n[0]).orderBy(jt(en.createdAt)).limit(r?.limit??100)}catch(n){throw L.error("Failed to get audit history",{error:n instanceof Error?n.message:"Unknown error",userId:e}),new Error(`Erro ao buscar hist\xF3rico de auditoria: ${n instanceof Error?n.message:"Unknown error"}`)}}async generateHash(e){let n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}};function on(t){return new Ok(t)}s(on,"createComplianceService");var yn=new Pe,$ce=u.object({collectionMethod:u.enum(["explicit_form","voice_command","terms_acceptance","settings_toggle"]).default("explicit_form"),consentType:u.enum(["data_processing","marketing","analytics","third_party","voice_data","biometric","financial_data","location"])}),Rce=u.object({dateFrom:u.string().optional(),dateTo:u.string().optional(),format:u.enum(["json","csv","pdf"]).default("json"),requestType:u.enum(["full_data","full_export","transactions","profile","consents","audit_logs"]).default("full_export")}),Nce=u.object({reason:u.string().optional(),requestType:u.enum(["full_account","full_deletion","specific_data","anonymization"]),scope:u.record(u.string(),u.unknown()).optional()}),Dce=u.object({amount:u.number().positive("Valor deve ser positivo"),limitType:u.enum(["pix_daily","pix_daytime","pix_transaction","boleto_daily","transfer_daily","withdrawal_daily"])});yn.get("/consent-templates",de,async t=>{let{db:e}=t.get("auth"),r=t.get("requestId");try{let o=await on(e).getConsentTemplates();return t.json({data:o,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get consent templates",{error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({code:"CONSENT_TEMPLATES_ERROR",error:"Erro ao buscar modelos de consentimento"},500)}});yn.get("/consents",de,be({windowMs:6e4,max:30,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await on(r).getUserConsents(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONSENTS_ERROR",error:"Erro ao buscar consentimentos"},500)}});yn.get("/consents/missing",de,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await on(r).getMissingMandatoryConsents(e.id);return t.json({data:{hasMissing:i.length>0,missingConsents:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get missing consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"MISSING_CONSENTS_ERROR",error:"Erro ao verificar consentimentos"},500)}});yn.post("/consents",de,be({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),Fe("json",$ce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),a=t.req.header("user-agent"),l=await on(r).grantConsent(e.id,n.consentType,n.collectionMethod,i,a);return L.info("Consent granted",{consentType:n.consentType,requestId:o,userId:e.id}),t.json({data:l,meta:{requestId:o,grantedAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to grant consent",{consentType:n.consentType,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_GRANT_ERROR",error:"Erro ao registrar consentimento"},500)}});yn.delete("/consents/:type",de,be({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("type"),o=t.get("requestId");try{return await on(r).revokeConsent(e.id,n),L.info("Consent revoked",{consentType:n,requestId:o,userId:e.id}),t.json({data:{success:!0,message:"Consentimento revogado com sucesso"},meta:{requestId:o,revokedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to revoke consent",{consentType:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_REVOKE_ERROR",error:"Erro ao revogar consentimento"},500)}});yn.get("/export-requests",de,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await on(r).getExportRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get export requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"EXPORT_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});yn.post("/export-requests",de,be({windowMs:36e5,max:5,message:"Limite de solicita\xE7\xF5es atingido"}),Fe("json",Rce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await on(r).createExportRequest(e.id,n.requestType,n.format,n.dateFrom,n.dateTo,i);return L.info("Export request created",{format:n.format,requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to create export request",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"EXPORT_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});yn.get("/deletion-requests",de,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await on(r).getDeletionRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get deletion requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"DELETION_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});yn.post("/deletion-requests",de,be({windowMs:864e5,max:3,message:"Limite di\xE1rio atingido"}),Fe("json",Nce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await on(r).createDeletionRequest(e.id,n.requestType,n.scope,n.reason,i);return L.info("Deletion request created",{requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){let a=i instanceof Error?i.message:"Unknown error";return L.error("Failed to create deletion request",{error:a,requestId:o,userId:e.id}),a.includes("reten\xE7\xE3o legal")?t.json({code:"LEGAL_HOLD",error:a},403):t.json({code:"DELETION_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});yn.get("/limits",de,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await on(r).getTransactionLimits(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get transaction limits",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"LIMITS_ERROR",error:"Erro ao buscar limites"},500)}});yn.post("/limits/check",de,be({windowMs:6e4,max:60,message:"Muitas verifica\xE7\xF5es"}),Fe("json",Dce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let a=await on(r).checkTransactionLimit(e.id,n.limitType,n.amount);return t.json({data:a,meta:{requestId:o,checkedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to check transaction limit",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",limitType:n.limitType,requestId:o,userId:e.id}),t.json({code:"LIMIT_CHECK_ERROR",error:"Erro ao verificar limite"},500)}});yn.get("/audit",de,be({windowMs:6e4,max:10,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=Number(t.req.query("limit"))||50,i=t.req.query("eventType"),c=await on(r).getAuditHistory(e.id,{limit:o,eventType:i||void 0});return t.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get audit history",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"AUDIT_ERROR",error:"Erro ao buscar hist\xF3rico"},500)}});var $k=yn;var jce=/^\d{10,11}$/,Yh=s(t=>t?t.replace(/\D/g,""):t??void 0,"normalizeDigits"),i6=s(t=>({...t,cpf:t.cpf?Yh(t.cpf):t.cpf,email:t.email?.trim().toLowerCase(),phone:t.phone?Yh(t.phone):t.phone}),"sanitizeContactFields"),To=new Pe,Mce=u.object({cpf:u.string().optional(),email:u.string().email().optional(),isFavorite:u.boolean().default(!1),name:u.string().min(1,"Nome \xE9 obrigat\xF3rio"),notes:u.string().optional(),phone:u.string().optional()}),zce=u.object({cpf:u.string().optional().refine(t=>!t||GM(Yh(t)??""),"CPF inv\xE1lido"),email:u.string().email().optional(),id:u.string().uuid(),isFavorite:u.boolean().optional(),name:u.string().optional(),notes:u.string().optional(),phone:u.string().optional().refine(t=>!t||jce.test(Yh(t)??""),"Telefone inv\xE1lido")}),Uce=u.object({isFavorite:u.boolean().optional(),limit:u.number().min(1).max(100).default(50),offset:u.number().default(0),search:u.string().optional()}),Lce=u.object({limit:u.number().min(1).max(20).default(10),query:u.string().min(1,"Query de busca \xE9 obrigat\xF3ria")});To.get("/",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Fe("query",Uce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[Z(Ce.userId,e.id)];if(n.search){let l=`%${n.search}%`,d=ts(Pr(Ce.name,l),Pr(Ce.email,l),Pr(Ce.phone,l));d&&i.push(d)}n.isFavorite!==void 0&&i.push(Z(Ce.isFavorite,n.isFavorite));let[{total:a}]=await r.select({total:vP()}).from(Ce).where(xe(...i)),c=await r.select().from(Ce).where(xe(...i)).orderBy(jt(Ce.isFavorite),ai(Ce.name)).limit(n.limit).offset(n.offset);return t.json({data:{contacts:c,hasMore:a>n.offset+n.limit,total:a},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACTS_ERROR",error:"Failed to retrieve contacts"},500)}});To.get("/:id",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(Ce).where(xe(Z(Ce.id,n),Z(Ce.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to get contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_ERROR",error:"Failed to retrieve contact"},500)}});To.post("/",de,be({windowMs:60*1e3,max:20,message:"Too many creation attempts, please try again later"}),Fe("json",Mce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=i6(n),[a]=await r.insert(Ce).values({userId:e.id,name:i.name,email:i.email??null,phone:i.phone??null,cpf:i.cpf??null,notes:i.notes??null,isFavorite:i.isFavorite??!1,createdAt:new Date,updatedAt:new Date}).returning();return L.info("Contact created",{contactId:a.id,contactName:n.name,requestId:o,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return i instanceof Error&&i.message.includes("unique constraint")?t.json({code:"CONFLICT",error:"Email ou telefone j\xE1 cadastrado para este usu\xE1rio"},409):(L.error("Failed to create contact",{contactName:n.name,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_CREATE_ERROR",error:"Failed to create contact"},500))}});To.put("/:id",de,be({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Fe("json",zce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let{id:a,...c}=o,l=i6(c),d={updatedAt:new Date};l.name!==void 0&&(d.name=l.name),l.email!==void 0&&(d.email=l.email??null),l.phone!==void 0&&(d.phone=l.phone??null),l.cpf!==void 0&&(d.cpf=l.cpf??null),l.notes!==void 0&&(d.notes=l.notes??null),l.isFavorite!==void 0&&(d.isFavorite=l.isFavorite);let[p]=await r.update(Ce).set(d).where(xe(Z(Ce.id,n),Z(Ce.userId,e.id))).returning();return p?(L.info("Contact updated",{contactId:n,requestId:i,updatedFields:Object.keys(c).filter(m=>m!=="updatedAt"),userId:e.id}),t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(a){return L.error("Failed to update contact",{contactId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"CONTACT_UPDATE_ERROR",error:"Failed to update contact"},500)}});To.delete("/:id",de,be({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.delete(Ce).where(xe(Z(Ce.id,n),Z(Ce.userId,e.id))).returning();return i?(L.info("Contact deleted",{contactId:n,requestId:o,userId:e.id}),t.json({data:{id:n,success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to delete contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_DELETE_ERROR",error:"Failed to delete contact"},500)}});To.get("/search",de,be({windowMs:60*1e3,max:20,message:"Too many search attempts, please try again later"}),Fe("query",Lce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=`%${n.query}%`,a=await r.select({id:Ce.id,name:Ce.name,email:Ce.email,phone:Ce.phone,isFavorite:Ce.isFavorite}).from(Ce).where(xe(Z(Ce.userId,e.id),ts(Pr(Ce.name,i),Pr(Ce.email,i),Pr(Ce.phone,i)))).orderBy(jt(Ce.isFavorite),ai(Ce.name)).limit(n.limit);return L.info("Contacts searched",{requestId:o,resultsCount:a.length,searchQuery:n.query,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,searchQuery:n.query,userId:e.id}),t.json({code:"CONTACT_SEARCH_ERROR",error:"Failed to search contacts"},500)}});To.get("/favorites",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(Ce).where(xe(Z(Ce.userId,e.id),Z(Ce.isFavorite,!0))).orderBy(ai(Ce.name));return L.info("Favorite contacts retrieved",{favoritesCount:o.length,requestId:n,userId:e.id}),t.json({data:o,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get favorite contacts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"FAVORITES_ERROR",error:"Failed to retrieve favorite contacts"},500)}});To.post("/:id/favorite",de,be({windowMs:60*1e3,max:30,message:"Too many toggle attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select({isFavorite:Ce.isFavorite}).from(Ce).where(xe(Z(Ce.id,n),Z(Ce.userId,e.id))).limit(1);if(!i)return t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404);let[a]=await r.update(Ce).set({isFavorite:!i.isFavorite,updatedAt:new Date}).where(xe(Z(Ce.id,n),Z(Ce.userId,e.id))).returning();return L.info("Contact favorite status toggled",{contactId:n,newStatus:!i.isFavorite,previousStatus:i.isFavorite,requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to toggle favorite status",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"FAVORITE_TOGGLE_ERROR",error:"Failed to toggle favorite status"},500)}});To.get("/stats",de,be({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({isFavorite:Ce.isFavorite,email:Ce.email,phone:Ce.phone}).from(Ce).where(Z(Ce.userId,e.id)),i=o.length,a=o.filter(d=>d.isFavorite).length,c=o.filter(d=>d.email).length,l=o.filter(d=>d.phone).length;return t.json({data:{contactsWithEmail:c,contactsWithPhone:l,favoriteContacts:a,favoritePercentage:i>0?a/i*100:0,totalContacts:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get contact statistics",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONTACT_STATS_ERROR",error:"Failed to retrieve contact statistics"},500)}});var Rk=To;var Eo=new Pe,Pd={code:"NOT_IMPLEMENTED",error:"Google Calendar sync is temporarily unavailable during migration. Please check back later.",message:"Esta funcionalidade est\xE1 temporariamente indispon\xEDvel durante a migra\xE7\xE3o do sistema."},ri=be({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3});Eo.get("/sync/status",de,ri,async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");return L.info("Google Calendar status requested (not implemented)",{requestId:r,userId:e.id}),t.json({data:{googleEmail:null,isConnected:!1,isEnabled:!1,lastSyncAt:null,migrationNotice:"Google Calendar sync is being migrated to new infrastructure"},meta:{requestId:r,retrievedAt:new Date().toISOString()}},200)});Eo.get("/sync/settings",de,ri,async t=>{let e=t.get("requestId");return t.json({data:null,meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Eo.get("/sync/history",de,ri,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Eo.put("/sync/settings",de,ri,async t=>{let e=t.get("requestId");return t.json({...Pd,meta:{requestId:e}},501)});Eo.post("/sync/full",de,ri,async t=>{let e=t.get("requestId");return t.json({...Pd,meta:{requestId:e}},501)});Eo.post("/sync/incremental",de,ri,async t=>{let e=t.get("requestId");return t.json({...Pd,meta:{requestId:e}},501)});Eo.post("/sync/event",de,ri,async t=>{let e=t.get("requestId");return t.json({...Pd,meta:{requestId:e}},501)});Eo.post("/sync/channel/renew",de,ri,async t=>{let e=t.get("requestId");return t.json({...Pd,meta:{requestId:e}},501)});Eo.get("/sync/conflicts",de,ri,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});var Nk=Eo;var Ad=new Pe,AKe=u.object({services:u.object({database:u.enum(["connected","disconnected","error"]),api:u.enum(["operational","degraded","down"]),auth:u.enum(["operational","degraded","down"])}),status:u.enum(["ok","error"]),timestamp:u.string(),uptime:u.number(),version:u.string()});async function s6(t){let e=Date.now();try{let r="error";try{r="connected"}catch(i){L.error("Database health check failed",{error:i}),r="error"}let n=r==="connected",o={services:{database:r,api:n?"operational":"down",auth:n?"operational":"down"},status:n?"ok":"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"};return L.info("Health check completed",{databaseStatus:r,duration:Date.now()-e,status:o.status}),t.json(o)}catch(r){return L.error("Health check error",{duration:Date.now()-e,error:r instanceof Error?r.message:"Unknown error"}),t.json({services:{database:"error",api:"down",auth:"down"},status:"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"},500)}}s(s6,"healthCheckHandler");Ad.get("/",s6);Ad.get("/health",s6);Ad.get("/ping",t=>t.json({message:"pong",timestamp:new Date().toISOString(),version:"v1"}));Ad.get("/auth",async t=>{let e=t.get("auth");return t.json({authenticated:!!e,services:{database:"connected",api:"operational",auth:"operational"},status:"ok",timestamp:new Date().toISOString(),user:e?{id:e.user.id,email:e.user.email}:null,version:"1.0.0"})});var Dk=Ad;var qce=u.object({limit:u.coerce.number().int().min(1).max(100).default(50),offset:u.coerce.number().int().min(0).default(0),categoryId:u.string().optional(),accountId:u.string().optional(),type:u.enum(["transfer","debit","credit","pix","boleto"]).optional(),status:u.enum(["cancelled","failed","pending","posted"]).optional(),startDate:u.string().optional(),endDate:u.string().optional(),search:u.string().optional()}),a6=u.object({amount:u.number(),categoryId:u.string().optional(),description:u.string(),transactionType:u.enum(["transfer","debit","credit","pix","boleto"]),status:u.enum(["cancelled","failed","pending","posted"]).default("pending"),transactionDate:u.string().optional(),accountId:u.string().optional(),paymentMethod:u.string().optional(),merchantName:u.string().optional(),notes:u.string().optional(),tags:u.array(u.string()).optional()}),Fce=u.object({period:u.enum(["week","month","quarter","year"]).default("month"),accountId:u.string().optional()}),xc=new Pe;xc.get("/",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Fe("query",qce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[Z(re.userId,e.id)];n.categoryId&&i.push(Z(re.categoryId,n.categoryId)),n.accountId&&i.push(Z(re.accountId,n.accountId)),n.type&&i.push(Z(re.transactionType,n.type)),n.status&&i.push(Z(re.status,n.status)),n.startDate&&i.push(dr(re.transactionDate,new Date(n.startDate))),n.endDate&&i.push(nr(re.transactionDate,new Date(n.endDate))),n.search&&i.push(Pr(re.description,`%${n.search}%`));let a=await r.select().from(re).where(xe(...i)).orderBy(jt(re.createdAt)).limit(n.limit).offset(n.offset);return t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString(),total:a.length}})}catch(i){return L.error("Failed to get transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"TRANSACTIONS_ERROR",error:"Failed to retrieve transactions"},500)}});xc.get("/statistics",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Fe("query",Fce),async t=>{let{user:e,db:r}=t.get("auth"),{period:n}=t.req.valid("query"),o=t.get("requestId");try{let i=new Date,a=new Date;switch(n){case"week":a.setDate(i.getDate()-7);break;case"month":a.setMonth(i.getMonth()-1);break;case"quarter":a.setMonth(i.getMonth()-3);break;case"year":a.setFullYear(i.getFullYear()-1);break}let c=await r.select().from(re).where(xe(Z(re.userId,e.id),dr(re.transactionDate,a),nr(re.transactionDate,i))),l=c.reduce((m,h)=>m+Number(h.amount),0),d=c.filter(m=>Number(m.amount)<0).reduce((m,h)=>m+Math.abs(Number(h.amount)),0),p=c.filter(m=>Number(m.amount)>0).reduce((m,h)=>m+Number(h.amount),0);return t.json({data:{balance:l,expenses:d,income:p,period:n,transactionsCount:c.length},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get transaction statistics",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"STATISTICS_ERROR",error:"Failed to retrieve statistics"},500)}});xc.post("/",de,be({windowMs:60*1e3,max:10,message:"Too many transaction creation attempts, please try again later"}),Fe("json",a6),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=new Date,[a]=await r.insert(re).values({userId:e.id,amount:n.amount.toString(),description:n.description,transactionType:n.transactionType,status:n.status,transactionDate:n.transactionDate?new Date(n.transactionDate):i,categoryId:n.categoryId,accountId:n.accountId,paymentMethod:n.paymentMethod,merchantName:n.merchantName,notes:n.notes,tags:n.tags,isManualEntry:!0}).returning();return L.info("Transaction created",{amount:n.amount,requestId:o,transactionId:a.id,type:n.transactionType,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create transaction",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",requestId:o,type:n.transactionType,userId:e.id}),t.json({code:"TRANSACTION_CREATE_ERROR",error:"Failed to create transaction"},500)}});xc.put("/:id",de,be({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Fe("json",a6.partial()),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:re.id}).from(re).where(xe(Z(re.id,n),Z(re.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada"},404);let c={updatedAt:new Date};o.description!==void 0&&(c.description=o.description),o.amount!==void 0&&(c.amount=o.amount.toString()),o.transactionType!==void 0&&(c.transactionType=o.transactionType),o.status!==void 0&&(c.status=o.status),o.categoryId!==void 0&&(c.categoryId=o.categoryId),o.accountId!==void 0&&(c.accountId=o.accountId),o.paymentMethod!==void 0&&(c.paymentMethod=o.paymentMethod),o.merchantName!==void 0&&(c.merchantName=o.merchantName),o.notes!==void 0&&(c.notes=o.notes),o.tags!==void 0&&(c.tags=o.tags);let[l]=await r.update(re).set(c).where(xe(Z(re.id,n),Z(re.userId,e.id))).returning();return L.info("Transaction updated",{requestId:i,transactionId:n,userId:e.id}),t.json({data:l,meta:{updatedAt:new Date().toISOString(),requestId:i}})}catch(a){return L.error("Failed to update transaction",{error:a instanceof Error?a.message:"Unknown error",requestId:i,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_UPDATE_ERROR",error:"Failed to update transaction"},500)}});xc.delete("/:id",de,be({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return(await r.delete(re).where(xe(Z(re.id,n),Z(re.userId,e.id))).returning()).length===0?t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada ou permiss\xE3o negada"},404):(L.info("Transaction deleted",{requestId:o,transactionId:n,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}}))}catch(i){return L.error("Failed to delete transaction",{error:i instanceof Error?i.message:"Unknown error",requestId:o,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_DELETE_ERROR",error:"Failed to delete transaction"},500)}});var jk=xc;var Bce=u.object({full_name:u.string().optional(),phone:u.string().optional(),cpf:u.string().optional(),birth_date:u.string().optional(),profile_image_url:u.string().url().optional()}),Vce=u.record(u.string(),u.any()),Hce=u.object({period_start:u.string(),period_end:u.string()}),c6=["theme","notificationsEmail","notificationsPush","notificationsSms","autoCategorize","budgetAlerts","voiceFeedback","accessibilityHighContrast","accessibilityLargeText","accessibilityScreenReader"],Cs=new Pe;Cs.get("/me",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select().from(K).where(Z(K.id,e.id)).limit(1);return t.json({data:o||null,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user profile",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"PROFILE_ERROR",error:"Failed to retrieve profile"},500)}});Cs.put("/me",de,be({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Fe("json",Bce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i={updatedAt:new Date};n.full_name&&(i.fullName=n.full_name),n.phone&&(i.phone=n.phone),n.cpf&&(i.cpf=n.cpf),n.birth_date&&(i.birthDate=n.birth_date),n.profile_image_url&&(i.profileImageUrl=n.profile_image_url);let[a]=await r.update(K).set(i).where(Z(K.id,e.id)).returning();return L.info("User profile updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user profile",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PROFILE_UPDATE_ERROR",error:"Failed to update profile"},500)}});Cs.put("/me/preferences",de,be({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Fe("json",Vce),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let[i]=await r.select({id:Xr.id}).from(Xr).where(Z(Xr.userId,e.id)).limit(1),a;if(i){let c={updatedAt:new Date};for(let l of c6)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.update(Xr).set(c).where(Z(Xr.id,i.id)).returning()}else{let c={userId:e.id,createdAt:new Date,updatedAt:new Date};for(let l of c6)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.insert(Xr).values(c).returning()}return L.info("User preferences updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user preferences",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PREFERENCES_UPDATE_ERROR",error:"Failed to update preferences"},500)}});Cs.post("/me/last-login",de,be({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{return await r.update(K).set({lastLogin:new Date}).where(Z(K.id,e.id)),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(o){return L.warn("Failed to update last login",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}});Cs.get("/me/status",de,be({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select({isActive:K.isActive,lastLogin:K.lastLogin}).from(K).where(Z(K.id,e.id)).limit(1);return o?t.json({data:{isActive:o.isActive,lastLogin:o.lastLogin?.toISOString()||null},meta:{requestId:n,retrievedAt:new Date().toISOString()}}):t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to check user status",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}});Cs.get("/me/financial-summary",de,be({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Fe("query",Hce),async t=>{let{user:e,db:r}=t.get("auth"),{period_start:n,period_end:o}=t.req.valid("query"),i=t.get("requestId");try{let c=(await r.select({amount:dt.amount,isIncome:dt.isIncome}).from(dt).where(xe(Z(dt.userId,e.id),dr(dt.createdAt,new Date(n)),nr(dt.createdAt,new Date(o))))).reduce((l,d)=>{let p=Number(d.amount);return d.isIncome?(l.income+=p,l.balance+=p):(l.expenses+=p,l.balance-=p),l},{income:0,expenses:0,balance:0});return t.json({data:c,meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get financial summary",{error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"FINANCIAL_SUMMARY_ERROR",error:"Failed to retrieve financial summary"},500)}});var Mk=Cs;function Zce(t){let e=t.toLowerCase().trim(),r={},n=[{intent:"check_balance",patterns:["saldo","quanto tenho","quanto dinheiro","verificar saldo"]},{intent:"transfer_money",patterns:["transferir","pagar","enviar dinheiro","mandar dinheiro"],entityExtractor:s(o=>Jce(o,r),"entityExtractor")},{intent:"pay_bill",patterns:["conta","boleto","pagar conta","pagar boleto"],entityExtractor:s(()=>Gce(e,r),"entityExtractor")},{intent:"transaction_history",patterns:["extrato","transa\xE7\xF5es","historico","compras"]},{intent:"pix_transfer",patterns:["pix","fazer pix"],entityExtractor:s(o=>Kce(o,r),"entityExtractor")}];for(let{intent:o,patterns:i,entityExtractor:a}of n)if(i.some(c=>e.includes(c)))return a&&a(t),{intent:o,entities:r,confidence:.9};return{intent:"unknown",entities:r,confidence:.3}}s(Zce,"detectIntentAndEntities");function Jce(t,e){let r=t.match(/r?\$?\s*(\d+(?:,\d{1,2})?)/i);if(r){let o=Number.parseFloat(r[1].replace(",","."));e.amount=o,e.currency="BRL"}let n=t.match(/(?:para|para o|para a)\s+([a-z-\s]{2,30})/i);n&&(e.recipient=n[1].trim())}s(Jce,"extractTransferEntities");function Gce(t,e){t.includes("luz")?e.billType="electricity":t.includes("\xE1gua")?e.billType="water":t.includes("telefone")?e.billType="phone":t.includes("internet")&&(e.billType="internet")}s(Gce,"extractBillEntities");function Kce(t,e){let r=t.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/),n=t.match(/\(?(\d{2})?\)?\s?(\d{4,5})-?(\d{4})/),o=t.match(/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/);r?(e.pixKey=r[1],e.pixKeyType="EMAIL"):n?(e.pixKey=n[0],e.pixKeyType="PHONE"):o&&(e.pixKey=o[0],e.pixKeyType="CPF")}s(Kce,"extractPixEntities");function Wce(t,e){switch(t){case"check_balance":return"Verificando seu saldo...";case"transfer_money":return e.amount&&e.recipient?`Preparando transfer\xEAncia de R$ ${e.amount} para ${e.recipient}`:"Entendi que quer transferir dinheiro. Para quem e quanto?";case"pay_bill":return"Buscando suas contas a pagar...";case"transaction_history":return"Mostrando seu hist\xF3rico de transa\xE7\xF5es...";case"pix_transfer":return"Preparando transfer\xEAncia PIX...";default:return"N\xE3o entendi o comando. Pode repetir?"}}s(Wce,"generateResponse");async function u6(t){let{commandText:e,sessionId:r,language:n,requireConfirmation:o,userId:i}=t,a=e??"";await new Promise(y=>setTimeout(y,300));let{intent:c,entities:l,confidence:d}=Zce(a),p=d<.8||(o??!1),m=Wce(c,l);return{confidence:d,entities:l,intent:c,language:n??"pt-BR",processedAt:new Date().toISOString(),requiresConfirmation:p,response:m,sessionId:r}}s(u6,"processVoiceCommand");function l6(){return{commands:[{description:"Verificar saldo da conta",examples:["Qual \xE9 o meu saldo?","Quanto dinheiro eu tenho?","Mostrar meu saldo"],name:"check_balance"},{description:"Transferir dinheiro para outra conta",examples:["Transferir R$ 100 para Jo\xE3o","Pagar 50 reais para Maria","Enviar R$ 200 para o email teste@email.com"],name:"transfer_money"},{description:"Pagar contas e boletos",examples:["Pagar conta de luz","Pagar boleto do cart\xE3o","Quitar conta de telefone"],name:"pay_bill"},{description:"Fazer transfer\xEAncia PIX",examples:["Fazer PIX para o CPF 123.456.789-00","Enviar PIX para o telefone 11999999999","Transferir por PIX para maria@email.com"],name:"pix_transfer"},{description:"Ver hist\xF3rico de transa\xE7\xF5es",examples:["Mostrar minhas transa\xE7\xF5es","Ver extrato do m\xEAs","Hist\xF3rico de compras"],name:"transaction_history"}],language:"pt-BR"}}s(l6,"getAvailableCommands");var zk=new Pe,Qce=u.object({commandText:u.string().min(1).max(1e3).optional(),sessionId:u.string().uuid(),audioData:u.string().optional(),language:u.string().default("pt-BR"),requireConfirmation:u.boolean().default(!1)}).refine(t=>t.audioData||t.commandText,{message:"Dados de \xE1udio ou texto do comando s\xE3o obrigat\xF3rios",path:["audioData"]}),rWe=u.object({commands:u.array(u.object({description:u.string(),examples:u.array(u.string()),name:u.string()})),language:u.string()});zk.post("/process",de,be({windowMs:60*1e3,max:30,message:"Too many voice commands, please try again later"}),Fe("json",Qce),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId"),{commandText:o,sessionId:i,audioData:a,language:c,requireConfirmation:l}=r,d=o??"";try{L.audit("Voice command processing started",{commandLength:d.length,component:"voice.processCommand",requestId:n,userId:e.id});let p=await u6({audioData:a,commandText:d,userId:e.id,context:{user:e},language:c,requireConfirmation:l,sessionId:i});return L.audit("Voice command processing completed",{command:d,requestId:n,result:p,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({data:p,meta:{processedAt:new Date().toISOString(),requestId:n}})}catch(p){return L.audit("Voice command processing failed",{command:d,error:p instanceof Error?p.message:"Unknown error",requestId:n,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({code:"VOICE_PROCESSING_ERROR",details:{command:d.substring(0,50)},error:"Failed to process voice command"},500)}});zk.get("/commands",de,be({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=l6();return L.info("Voice commands list accessed",{requestId:r,userId:e.id}),t.json({data:n,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get voice commands",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"COMMANDS_RETRIEVAL_ERROR",error:"Failed to retrieve voice commands"},500)}});var Uk=zk;var Zt=new Pe;Zt.use("*",iI());Zt.use("*",fI);Zt.use("*",async(t,e)=>{let r=crypto.randomUUID();t.set("requestId",r),await e()});bC(Zt);_C(Zt);Zt.route("/api/v1",Dk);Zt.route("/api/v1/voice",Uk);Zt.route("/api/v1/banking",wE);Zt.route("/api/v1/contacts",Rk);Zt.route("/api/v1/bank-accounts",bE);Zt.route("/api/v1/users",Mk);Zt.route("/api/v1/transactions",jk);Zt.route("/api/v1/calendar",Ck);Zt.route("/api/v1/google-calendar",Nk);Zt.route("/api/v1/compliance",$k);Zt.route("/api/v1/billing",Pk);Zt.route("/api/v1/ai",Ul);Zt.route("/api/v1/agent",J0);Zt.route("/cron",pI);i1(Zt);Zt.notFound(t=>{let e=t.get("requestId");return L.warn("Route not found",{ip:t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown",method:t.req.method,path:t.req.path,requestId:e,userAgent:t.req.header("User-Agent")||"unknown"}),t.json({error:"Not Found",message:`Route ${t.req.method} ${t.req.path} not found`,requestId:e,timestamp:new Date().toISOString()},404)});Zt.onError((t,e)=>{let r=e.get("requestId");return L.error("Unhandled error",{error:t.message,method:e.req.method,path:e.req.path,requestId:r,stack:t.stack}),e.json({error:"Internal server error",requestId:r,timestamp:new Date().toISOString()},500)});var Xce=Zt;export{Xce as default};
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
