# Story 04.01: Interface Voz-Principal (Home Screen)

## Status
**Current Status:** Approved  
**Epic:** 04 - Frontend Implementation  
**Priority:** High  
**Estimated Effort:** 5 days  
**Dependencies:** Componentes VoiceIndicator/VoiceResponse existentes, tRPC procedures, Supabase subscriptions

---

## Story

**As a** usuário do AegisWallet,  
**I want** uma interface principal que priorize comandos de voz com feedback visual claro e acesso rápido a informações financeiras,  
**so that** eu possa gerenciar minhas finanças de forma natural e eficiente, usando principalmente minha voz.

---

## Acceptance Criteria

1. [ ] Implementar layout exato conforme screen-designs-and-flows.md
2. [ ] Criar AI Status Indicator com animações (idle, listening, processing, responding)
3. [ ] Implementar Voice Activation Circle com feedback visual e tátil
4. [ ] Integrar Quick Insights com dados financeiros em tempo real
5. [ ] Adicionar Emergency Menu para acesso visual-only
6. [ ] Implementar navegação por gestos (swipe actions)
7. [ ] Garantir responsividade para todos dispositivos
8. [ ] Tempo de carregamento inicial <3 segundos
9. [ ] Acessibilidade WCAG 2.1 AA+ completa

---

## Tasks / Subtasks

- [ ] **Layout Principal Voice-First** (AC: 1, 7)
  - [ ] Implementar estrutura de layout conforme design specs
  - [ ] Criar grid system responsivo para diferentes telas
  - [ ] Implementar hierarquia visual priorizando voz
  - [ ] Adicionar breakpoints para mobile, tablet, desktop
  - [ ] Configurar spacing e typography consistentes

- [ ] **AI Status Indicator Animado** (AC: 2)
  - [ ] Criar componente AIStatusIndicator com estados visuais
  - [ ] Implementar animações suaves entre estados
  - [ ] Adicionar indicadores de progresso para processamento
  - [ ] Configurar cores e ícones para cada estado
  - [ ] Integrar com hook useVoiceRecognition existente

- [ ] **Voice Activation Circle** (AC: 3)
  - [ ] Implementar botão circular central para ativação
  - [ ] Adicionar animações de pulse e ripple
  - [ ] Configurar feedback tátil (vibração) para mobile
  - [ ] Implementar estados visuais (idle, active, processing)
  - [ ] Adicionar indicador de nível de áudio

- [ ] **Quick Insights Financeiros** (AC: 4)
  - [ ] Criar componente QuickInsights com dados em tempo real
  - [ ] Implementar cards para saldo, gastos, próximos pagamentos
  - [ ] Adicionar formatação brasileira (R$, datas)
  - [ ] Configurar atualização automática via Supabase subscriptions
  - [ ] Implementar skeleton loading para dados

- [ ] **Emergency Menu Visual** (AC: 5)
  - [ ] Criar menu de acesso rápido para modo visual
  - [ ] Implementar ações essenciais sem voz
  - [ ] Adicionar toggle para modo somente-visual
  - [ ] Configurar atalhos de teclado para acessibilidade
  - [ ] Implementar breadcrumbs para navegação

- [ ] **Navegação por Gestos** (AC: 6)
  - [ ] Implementar swipe left/right para navegação
  - [ ] Adicionar pull-to-refresh para atualizar dados
  - [ ] Configurar long-press para ações contextuais
  - [ ] Implementar feedback visual para gestos
  - [ ] Adicionar configuração para desabilitar gestos

---

## Dev Notes

### Arquitetura Relevante

**Componentes Existentes para Expansão:**
- `src/components/voice/VoiceDashboard.tsx` - Dashboard principal de voz
- `src/components/voice/VoiceIndicator.tsx` - Indicador de status
- `src/components/voice/VoiceResponse.tsx` - Componente de resposta
- `src/hooks/useVoiceRecognition.ts` - Hook de reconhecimento de voz

**Novos Componentes Necessários:**
- `src/components/home/HomeScreen.tsx` - Tela principal
- `src/components/home/AIStatusIndicator.tsx` - Indicador de IA
- `src/components/home/VoiceActivationCircle.tsx` - Botão de ativação
- `src/components/home/QuickInsights.tsx` - Insights rápidos
- `src/components/home/EmergencyMenu.tsx` - Menu de emergência

**Hooks e Utilitários:**
- `src/hooks/useGestures.ts` - Hook para gestos
- `src/hooks/useFinancialData.ts` - Hook para dados financeiros
- `src/lib/formatters/brazilianFormatters.ts` - Formatadores brasileiros

### Design System

**Cores Principais:**
- Primary: Voice activation e estados ativos
- Secondary: Informações financeiras
- Success: Operações bem-sucedidas
- Warning: Alertas e confirmações
- Error: Falhas e problemas

**Animações:**
- Duração padrão: 200ms para micro-interações
- Easing: ease-out para entrada, ease-in para saída
- Pulse animation: 1.5s para indicador de voz ativo
- Ripple effect: 600ms para feedback tátil

### Integração com Backend

**tRPC Procedures Necessárias:**
- `user.getFinancialSummary` - Resumo financeiro
- `transactions.getRecent` - Transações recentes
- `bills.getUpcoming` - Próximos pagamentos
- `voice.getStatus` - Status do sistema de voz

**Supabase Subscriptions:**
- Real-time updates para saldo de contas
- Notificações de transações
- Status de sincronização bancária

### Testing

**Localização:** `src/test/components/home/`
**Frameworks:** Vitest + Testing Library, Playwright para E2E
**Cenários de Teste:**
- Renderização correta em diferentes dispositivos
- Animações e transições suaves
- Integração com dados em tempo real
- Gestos e interações touch
- Acessibilidade com screen readers

**Performance Testing:**
- Tempo de carregamento inicial
- Responsividade de animações
- Memory usage com subscriptions
- Battery impact em mobile

### Acessibilidade

**WCAG 2.1 AA+ Requirements:**
- Contraste mínimo 4.5:1 para texto
- Navegação completa por teclado
- Screen reader compatibility
- Reduced motion support
- High contrast mode
- Focus indicators visíveis

**Voice-Specific Accessibility:**
- Alternativas visuais para feedback sonoro
- Legendas para comandos de voz
- Modo somente-texto configurável
- Indicadores visuais para status de áudio

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-04 | 1.0.0 | Criação inicial da story | PM Agent "John" |

---

## Dev Agent Record

*Esta seção será preenchida pelo agente de desenvolvimento durante a implementação*

### Agent Model Used
*TBD*

### Debug Log References
*TBD*

### Completion Notes List
*TBD*

### File List
*TBD*

---

## QA Results

*Esta seção será preenchida pelo agente de QA após revisão da implementação*