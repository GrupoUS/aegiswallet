// AegisWallet API - Bundled for Vercel Node.js Runtime
// Generated at: 2025-12-02T12:54:50.435Z
// Entry: src/server/vercel.ts

"use strict";var Y4=Object.create;var ec=Object.defineProperty;var eF=Object.getOwnPropertyDescriptor;var tF=Object.getOwnPropertyNames;var rF=Object.getPrototypeOf,nF=Object.prototype.hasOwnProperty;var s=(t,e)=>ec(t,"name",{value:e,configurable:!0});var Vt=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ue=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),en=(t,e)=>{for(var r in e)ec(t,r,{get:e[r],enumerable:!0})},oI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of tF(e))!nF.call(t,o)&&o!==r&&ec(t,o,{get:()=>e[o],enumerable:!(n=eF(e,o))||n.enumerable});return t};var mo=(t,e,r)=>(r=t!=null?Y4(rF(t)):{},oI(e||!t||!t.__esModule?ec(r,"default",{value:t,enumerable:!0}):r,t)),oF=t=>oI(ec({},"__esModule",{value:!0}),t);var Ot,gI,yI,yd,vd,Fo=Vt(()=>{Ot="ALL",gI="all",yI=["get","post","put","delete","options","patch"],yd="Can not add a route since the matcher is already built.",vd=class extends Error{static{s(this,"UnsupportedPathError")}}});var rc,zh=Vt(()=>{rc="__COMPOSED_HANDLER"});var Tv,Nc,hp=Vt(()=>{"use strict";Tv={staticAssets:"public, max-age=31536000, immutable",htmlFiles:"no-cache, no-store, must-revalidate",apiResponses:"private, max-age=60",dynamicContent:"private, no-cache"},Nc={NODE_ENV:"production",PORT:Number(process.env.PORT)||3e3,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,DATABASE_URL:process.env.DATABASE_URL||"",DATABASE_URL_UNPOOLED:process.env.DATABASE_URL_UNPOOLED||"",CLERK_PUBLISHABLE_KEY:process.env.VITE_CLERK_PUBLISHABLE_KEY||process.env.CLERK_PUBLISHABLE_KEY||"",CLERK_SECRET_KEY:process.env.CLERK_SECRET_KEY||"",API_URL:process.env.VITE_API_URL||process.env.API_URL||"http://localhost:3000",CORS_ORIGINS:(process.env.CORS_ORIGINS||"http://localhost:5173,http://localhost:3000").split(",")}});var LA,qA=Vt(()=>{LA=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i});var Iv,FA,K6,Ev,kv=Vt(()=>{Iv=s((t,e=Ev)=>{let r=/\.([a-zA-Z0-9]+?)$/,n=t.match(r);if(!n)return;let o=e[n[1]];return o&&o.startsWith("text")&&(o+="; charset=utf-8"),o},"getMimeType"),FA=s(t=>{for(let e in Ev)if(Ev[e]===t)return e},"getExtension"),K6={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Ev=K6});var BA,VA=Vt(()=>{BA=s((...t)=>{let e=t.filter(o=>o!=="").join("/");e=e.replace(/(?<=\/)\/+/g,"");let r=e.split("/"),n=[];for(let o of r)o===".."&&n.length>0&&n.at(-1)!==".."?n.pop():o!=="."&&n.push(o);return n.join("/")||"."},"defaultJoin")});var HA,W6,Q6,GA,ZA=Vt(()=>{qA();kv();VA();HA={br:".br",zstd:".zst",gzip:".gz"},W6=Object.keys(HA),Q6="index.html",GA=s(t=>{let e=t.root??"./",r=t.path,n=t.join??BA;return async(o,i)=>{if(o.finalized)return i();let a;if(t.path)a=t.path;else try{if(a=decodeURIComponent(o.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(a))throw new Error}catch{return await t.onNotFound?.(o.req.path,o),i()}let u=n(e,!r&&t.rewriteRequestPath?t.rewriteRequestPath(a):a);t.isDir&&await t.isDir(u)&&(u=n(u,Q6));let l=t.getContent,d=await l(u,o);if(d instanceof Response)return o.newResponse(d.body,d);if(d){let p=t.mimes&&Iv(u,t.mimes)||Iv(u);if(o.header("Content-Type",p||"application/octet-stream"),t.precompressed&&(!p||LA.test(p))){let f=new Set(o.req.header("Accept-Encoding")?.split(",").map(h=>h.trim()));for(let h of W6){if(!f.has(h))continue;let y=await l(u+HA[h],o);if(y){d=y,o.header("Content-Encoding",h),o.header("Vary","Accept-Encoding",{append:!0});break}}}return await t.onFound?.(u,o),o.body(d)}await t.onNotFound?.(u,o),await i()}},"serveStatic")});var JA,KA,WA,QA=Vt(()=>{JA=require("node:fs/promises"),KA=require("node:path");ZA();WA=s(t=>s(async function(r,n){return GA({...t,getContent:s(async a=>{let u=Bun.file(a);return await u.exists()?u:null},"getContent"),join:KA.join,isDir:s(async a=>{let u;try{u=(await(0,JA.stat)(a)).isDirectory()}catch{}return u},"isDir")})(r,n)},"serveStatic2"),"serveStatic")});var XA=Vt(()=>{});var YA,eC=Vt(()=>{XA();YA=s((t,e)=>{for(let[r,n]of Object.entries(e)){let o=new RegExp("/:"+r+"(?:{[^/]+})?\\??");t=t.replace(o,n?`/${n}`:"")}return t},"replaceUrlParam")});var X6,tC,rC=Vt(()=>{X6=1024,tC=s(({concurrency:t,interval:e}={})=>{if(t||=X6,t===1/0)return{run:s(async o=>o(),"run")};let r=new Set,n=s(async(o,i,a)=>{if(r.size>=t)return i||=new Promise(d=>a=d),setTimeout(()=>n(o,i,a)),i;let u={};r.add(u);let l=await o();return e?setTimeout(()=>r.delete(u),e):r.delete(u),a?(a(l),i):l},"run");return{run:n}},"createPool")});var nC,Pv,oC=Vt(()=>{zh();nC=s(t=>t.length>1,"isMiddleware"),Pv=s(t=>t[rc]?Pv(t[rc]):t,"findTargetHandler")});var iC,Y6,eB,tB,rB,Dc,sC,Av,Cv=Vt(()=>{Fo();oC();iC=s(t=>t.split(/[\/\\]/).slice(0,-1).join("/"),"dirname"),Y6=s(t=>t.replace(/(\\)/g,"/").replace(/\/$/g,""),"normalizePath"),eB=s((t,e)=>{t.length===0||e?t.push(".."):t.pop()},"handleParent"),tB=s((t,e)=>{t=t.replace(/^\.(?!.)/,""),t!==""&&e.push(t)},"handleNonDot"),rB=s((t,e)=>{let r=!1;for(let n of t)n===".."?(eB(e,r),r=!0):(tB(n,e),r=!1)},"handleSegments"),Dc=s((...t)=>{t=t.map(Y6);let e=[];return rB(t.join("/").split("/"),e),(t[0][0]==="/"?"/":"")+e.join("/")},"joinPaths"),sC=s(t=>t.routes.reduce((e,{method:r,handler:n,path:o})=>{let i=Pv(n);return["GET",Ot].includes(r)&&!nC(i)&&e.push({path:o}),e},[]),"filterStaticGenerateRoutes"),Av=s(t=>t.split("/").some(e=>e.startsWith(":")||e.includes("*")),"isDynamicRoute")});var aC,gp,A_e,Ov=Vt(()=>{Cv();aC="HONO_SSG_CONTEXT",gp="x-hono-disable-ssg",A_e=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[gp]:"true"}})}catch{return null}})()});var nB,oB,iB,sB,aB,cB,uB,lB,dB,pB,mB,cC,fB,hB,uC,lC=Vt(()=>{eC();rC();kv();Ov();Cv();nB=2,oB="text/plain",iB="./static",sB=s((t,e,r,n)=>{let o=uB(r,n);return t.endsWith(`.${o}`)?Dc(e,t):t==="/"?Dc(e,`index.${o}`):t.endsWith("/")?Dc(e,t,`index.${o}`):Dc(e,`${t}.${o}`)},"generateFilePath"),aB=s(async t=>{let e=t.headers.get("Content-Type");try{return e?.includes("text")||e?.includes("json")?await t.text():await t.arrayBuffer()}catch(r){throw new Error(`Error processing response: ${r instanceof Error?r.message:"Unknown error"}`)}},"parseResponseContent"),cB={"text/html":"html","text/xml":"xml","application/xml":"xml","application/yaml":"yaml"},uB=s((t,e)=>{let r=e||cB;return t in r?r[t]:FA(t)||"html"},"determineExtension"),lB=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Request&&(r=o)}return r}:t,"combineBeforeRequestHooks"),dB=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Response&&(r=o)}return r}:t,"combineAfterResponseHooks"),pB=s((t,e,r)=>Array.isArray(t)?async n=>{for(let o of t)await o(n,e,r)}:t,"combineAfterGenerateHooks"),mB=s(function*(t,e,r,n){let o="http://localhost",i=tC({concurrency:n});for(let a of sC(t)){let u=new URL(a.path,o).toString(),l=new Request(u);yield new Promise(async(d,p)=>{try{if(e){let h=await e(l);if(!h){d(void 0);return}l=h}if(await i.run(()=>t.fetch(l)),!l.ssgParams){if(Av(a.path)){d(void 0);return}l.ssgParams=[{}]}let f={method:l.method,headers:l.headers};d((function*(){for(let h of l.ssgParams)yield new Promise(async(y,g)=>{try{let m=YA(a.path,h),_=await i.run(()=>t.request(m,f,{[aC]:!0}));if(_.headers.get(gp)){y(void 0);return}if(r){let x=await r(_);if(!x){y(void 0);return}_=x}let w=_.headers.get("Content-Type")?.split(";")[0]||oB,b=await aB(_);y({routePath:m,mimeType:w,content:b})}catch(m){g(m)}})})())}catch(f){p(f)}})}},"fetchRoutesContent"),cC=new Set,fB=s(async(t,e,r,n)=>{let o=await t;if(!o)return;let{routePath:i,content:a,mimeType:u}=o,l=sB(i,r,u,n),d=iC(l);return cC.has(d)||(await e.mkdir(d,{recursive:!0}),cC.add(d)),typeof a=="string"?await e.writeFile(l,a):a instanceof ArrayBuffer&&await e.writeFile(l,new Uint8Array(a)),l},"saveContentToFile"),hB={afterResponseHook:s(t=>t.status!==200?!1:t,"afterResponseHook")},uC=s(async(t,e,r)=>{let n,o=[],i=[],a=r?.plugins||[hB],u=[],l=[],d=[];r?.beforeRequestHook&&u.push(...Array.isArray(r.beforeRequestHook)?r.beforeRequestHook:[r.beforeRequestHook]),r?.afterResponseHook&&l.push(...Array.isArray(r.afterResponseHook)?r.afterResponseHook:[r.afterResponseHook]),r?.afterGenerateHook&&d.push(...Array.isArray(r.afterGenerateHook)?r.afterGenerateHook:[r.afterGenerateHook]);for(let p of a)p.beforeRequestHook&&u.push(...Array.isArray(p.beforeRequestHook)?p.beforeRequestHook:[p.beforeRequestHook]),p.afterResponseHook&&l.push(...Array.isArray(p.afterResponseHook)?p.afterResponseHook:[p.afterResponseHook]),p.afterGenerateHook&&d.push(...Array.isArray(p.afterGenerateHook)?p.afterGenerateHook:[p.afterGenerateHook]);try{let p=r?.dir??iB,f=r?.concurrency??nB,h=lB(u.length>0?u:[_=>_]),y=dB(l.length>0?l:[_=>_]),g=mB(t,h,y,f);for(let _ of g)o.push(_.then(w=>{if(w)for(let b of w)i.push(fB(b,e,p,r?.extensionMap).catch(x=>x))}));await Promise.all(o);let m=[];for(let _ of i){let w=await _;if(typeof w=="string")m.push(w);else if(w)throw w}n={success:!0,files:m}}catch(p){let f=p instanceof Error?p:new Error(String(p));n={success:!1,files:[],error:f}}return d.length>0&&await pB(d,e,r)(n,e,r),n},"toSSG")});var dC=Vt(()=>{lC();Ov()});var gB,$v,pC,mC=Vt(()=>{dC();({write:gB}=Bun),$v={writeFile:s(async(t,e)=>{await gB(t,e)},"writeFile"),mkdir:s(async()=>{},"mkdir")},pC=s(async(t,e)=>uC(t,$v,e),"toSSG")});var fC,hC,gC,yC=Vt(()=>{fC=class{static{s(this,"WSContext")}#e;constructor(t){this.#e=t,this.raw=t.raw,this.url=t.url?new URL(t.url):null,this.protocol=t.protocol??null}send(t,e){this.#e.send(t,e??{})}raw;binaryType="arraybuffer";get readyState(){return this.#e.readyState}url;protocol;close(t,e){this.#e.close(t,e)}},hC=s(t=>new MessageEvent("message",{data:t}),"createWSMessageEvent"),gC=s(t=>(...e)=>{if(typeof e[0]=="function"){let[r,n]=e;return s(async function(i,a){let u=await r(i),l=await t(i,u,n);if(l)return l;await a()},"upgradeWebSocket")}else{let[r,n,o]=e;return(async()=>{let i=await t(r,n,o);if(!i)throw new Error("Failed to upgrade WebSocket");return i})()}},"defineWebSocketHelper")});var yp,Rv=Vt(()=>{yp=s(t=>"server"in t.env?t.env.server:t.env,"getBunServer")});var Nv,Dv,jv,vC,_C=Vt(()=>{yC();Rv();Nv=s(t=>new fC({send:s((e,r)=>{t.send(e,r?.compress)},"send"),raw:t,readyState:t.readyState,url:t.data.url,protocol:t.data.protocol,close(e,r){t.close(e,r)}}),"createWSContext"),Dv=gC((t,e)=>{let r=yp(t);if(!r)throw new TypeError("env has to include the 2nd argument of fetch.");if(r.upgrade(t.req.raw,{data:{events:e,url:new URL(t.req.url),protocol:t.req.url}}))return new Response(null)}),jv={open(t){let e=t.data.events;e.onOpen&&e.onOpen(new Event("open"),Nv(t))},close(t,e,r){let n=t.data.events;n.onClose&&n.onClose(new CloseEvent("close",{code:e,reason:r}),Nv(t))},message(t,e){let r=t.data.events;if(r.onMessage){let n=typeof e=="string"?e:e.buffer;r.onMessage(hC(n),Nv(t))}}},vC=s(()=>({upgradeWebSocket:Dv,websocket:jv}),"createBunWebSocket")});var bC,wC=Vt(()=>{Rv();bC=s(t=>{let e=yp(t);if(!e)throw new TypeError("env has to include the 2nd argument of fetch.");if(typeof e.requestIP!="function")throw new TypeError("server.requestIP is not a function.");let r=e.requestIP(t.req.raw);return r?{remote:{address:r.address,addressType:r.family==="IPv6"||r.family==="IPv4"?r.family:void 0,port:r.port}}:{remote:{}}},"getConnInfo")});var xC={};en(xC,{bunFileSystemModule:()=>$v,createBunWebSocket:()=>vC,getConnInfo:()=>bC,serveStatic:()=>WA,toSSG:()=>pC,upgradeWebSocket:()=>Dv,websocket:()=>jv});var SC=Vt(()=>{QA();mC();_C();wC()});var TC={};en(TC,{htmlCache:()=>vB,staticAssetsCache:()=>yB});var yB,vB,EC=Vt(()=>{"use strict";hp();yB=s(()=>async(t,e)=>{t.header("Cache-Control",Tv.staticAssets),await e()},"staticAssetsCache"),vB=s(()=>async(t,e)=>{t.header("Cache-Control",Tv.htmlFiles),t.header("Pragma","no-cache"),t.header("Expires","0"),await e()},"htmlCache")});var n1=Ue(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.parse=c5;Ap.serialize=u5;var r5=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n5=/^[\u0021-\u003A\u003C-\u007E]*$/,o5=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i5=/^[\u0020-\u003A\u003D-\u007E]*$/,s5=Object.prototype.toString,a5=(()=>{let t=s(function(){},"C");return t.prototype=Object.create(null),t})();function c5(t,e){let r=new a5,n=t.length;if(n<2)return r;let o=e?.decode||l5,i=0;do{let a=t.indexOf("=",i);if(a===-1)break;let u=t.indexOf(";",i),l=u===-1?n:u;if(a>l){i=t.lastIndexOf(";",a-1)+1;continue}let d=t1(t,i,a),p=r1(t,a,d),f=t.slice(d,p);if(r[f]===void 0){let h=t1(t,a+1,l),y=r1(t,l,h),g=o(t.slice(h,y));r[f]=g}i=l+1}while(i<n);return r}s(c5,"parse");function t1(t,e,r){do{let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}s(t1,"startIndex");function r1(t,e,r){for(;e>r;){let n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}s(r1,"endIndex");function u5(t,e,r){let n=r?.encode||encodeURIComponent;if(!r5.test(t))throw new TypeError(`argument name is invalid: ${t}`);let o=n(e);if(!n5.test(o))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+o;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!o5.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!i5.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!d5(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}s(u5,"serialize");function l5(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}s(l5,"decode");function d5(t){return s5.call(t)==="[object Date]"}s(d5,"isDate")});var Jm=Ue((yPe,sa)=>{"use strict";var cJ=typeof Buffer<"u",jR=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,MR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function UR(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),cJ&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let o=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(o==="ignore"&&i==="ignore")return n;if(o!=="ignore"&&i!=="ignore"){if(jR.test(t)===!1&&MR.test(t)===!1)return n}else if(o!=="ignore"&&i==="ignore"){if(jR.test(t)===!1)return n}else if(MR.test(t)===!1)return n;return zR(n,{protoAction:o,constructorAction:i,safe:r&&r.safe})}s(UR,"_parse");function zR(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let o=[t];for(;o.length;){let i=o;o=[];for(let a of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let u in a){let l=a[u];l&&typeof l=="object"&&o.push(l)}}}return t}s(zR,"filter");function PT(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return UR(t,e,r)}finally{Error.stackTraceLimit=n}}s(PT,"parse");function uJ(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return UR(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}s(uJ,"safeParse");sa.exports=PT;sa.exports.default=PT;sa.exports.parse=PT;sa.exports.safeParse=uJ;sa.exports.scan=zR});var Wi=Ue((oze,GM)=>{"use strict";GM.exports=TypeError});var JM=Ue((ize,ZM)=>{ZM.exports=require("util").inspect});var kl=Ue((sze,f2)=>{var Q0=typeof Map=="function"&&Map.prototype,F0=Object.getOwnPropertyDescriptor&&Q0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Cf=Q0&&F0&&typeof F0.get=="function"?F0.get:null,KM=Q0&&Map.prototype.forEach,X0=typeof Set=="function"&&Set.prototype,B0=Object.getOwnPropertyDescriptor&&X0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Of=X0&&B0&&typeof B0.get=="function"?B0.get:null,WM=X0&&Set.prototype.forEach,ste=typeof WeakMap=="function"&&WeakMap.prototype,Tl=ste?WeakMap.prototype.has:null,ate=typeof WeakSet=="function"&&WeakSet.prototype,El=ate?WeakSet.prototype.has:null,cte=typeof WeakRef=="function"&&WeakRef.prototype,QM=cte?WeakRef.prototype.deref:null,ute=Boolean.prototype.valueOf,lte=Object.prototype.toString,dte=Function.prototype.toString,pte=String.prototype.match,Y0=String.prototype.slice,xi=String.prototype.replace,mte=String.prototype.toUpperCase,XM=String.prototype.toLowerCase,a2=RegExp.prototype.test,YM=Array.prototype.concat,eo=Array.prototype.join,fte=Array.prototype.slice,e2=Math.floor,G0=typeof BigInt=="function"?BigInt.prototype.valueOf:null,V0=Object.getOwnPropertySymbols,Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Il=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ca||!0)?Symbol.toStringTag:null,c2=Object.prototype.propertyIsEnumerable,t2=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function r2(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||a2.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-e2(-t):e2(t);if(n!==t){var o=String(n),i=Y0.call(e,o.length+1);return xi.call(o,r,"$&_")+"."+xi.call(xi.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return xi.call(e,r,"$&_")}s(r2,"addNumericSeparator");var J0=JM(),n2=J0.custom,o2=d2(n2)?n2:null,u2={__proto__:null,double:'"',single:"'"},hte={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};f2.exports=s(function t(e,r,n,o){var i=r||{};if(Do(i,"quoteStyle")&&!Do(u2,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Do(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Do(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Do(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Do(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return m2(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return u?r2(e,l):l}if(typeof e=="bigint"){var d=String(e)+"n";return u?r2(e,d):d}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return K0(e)?"[Array]":"[Object]";var f=Rte(i,n);if(typeof o>"u")o=[];else if(p2(o,e)>=0)return"[Circular]";function h(V,q,Q){if(q&&(o=fte.call(o),o.push(q)),Q){var ee={depth:i.depth};return Do(i,"quoteStyle")&&(ee.quoteStyle=i.quoteStyle),t(V,ee,n+1,o)}return t(V,i,n+1,o)}if(s(h,"inspect"),typeof e=="function"&&!i2(e)){var y=Tte(e),g=Af(e,h);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(g.length>0?" { "+eo.call(g,", ")+" }":"")}if(d2(e)){var m=Ca?xi.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Z0.call(e);return typeof e=="object"&&!Ca?Sl(m):m}if(Cte(e)){for(var _="<"+XM.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)_+=" "+w[b].name+"="+l2(gte(w[b].value),"double",i);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+XM.call(String(e.nodeName))+">",_}if(K0(e)){if(e.length===0)return"[]";var x=Af(e,h);return f&&!$te(x)?"["+W0(x,f)+"]":"[ "+eo.call(x,", ")+" ]"}if(vte(e)){var k=Af(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!c2.call(e,"cause")?"{ ["+String(e)+"] "+eo.call(YM.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+eo.call(k,", ")+" }"}if(typeof e=="object"&&a){if(o2&&typeof e[o2]=="function"&&J0)return J0(e,{depth:p-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Ete(e)){var R=[];return KM&&KM.call(e,function(V,q){R.push(h(q,e,!0)+" => "+h(V,e))}),s2("Map",Cf.call(e),R,f)}if(Pte(e)){var O=[];return WM&&WM.call(e,function(V){O.push(h(V,e))}),s2("Set",Of.call(e),O,f)}if(Ite(e))return H0("WeakMap");if(Ate(e))return H0("WeakSet");if(kte(e))return H0("WeakRef");if(bte(e))return Sl(h(Number(e)));if(xte(e))return Sl(h(G0.call(e)));if(wte(e))return Sl(ute.call(e));if(_te(e))return Sl(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!yte(e)&&!i2(e)){var C=Af(e,h),$=t2?t2(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",N=!$&&Il&&Object(e)===e&&Il in e?Y0.call(Si(e),8,-1):P?"Object":"",D=$||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",K=D+(N||P?"["+eo.call(YM.call([],N||[],P||[]),": ")+"] ":"");return C.length===0?K+"{}":f?K+"{"+W0(C,f)+"}":K+"{ "+eo.call(C,", ")+" }"}return String(e)},"inspect_");function l2(t,e,r){var n=r.quoteStyle||e,o=u2[n];return o+t+o}s(l2,"wrapQuotes");function gte(t){return xi.call(String(t),/"/g,"&quot;")}s(gte,"quote");function Qi(t){return!Il||!(typeof t=="object"&&(Il in t||typeof t[Il]<"u"))}s(Qi,"canTrustToString");function K0(t){return Si(t)==="[object Array]"&&Qi(t)}s(K0,"isArray");function yte(t){return Si(t)==="[object Date]"&&Qi(t)}s(yte,"isDate");function i2(t){return Si(t)==="[object RegExp]"&&Qi(t)}s(i2,"isRegExp");function vte(t){return Si(t)==="[object Error]"&&Qi(t)}s(vte,"isError");function _te(t){return Si(t)==="[object String]"&&Qi(t)}s(_te,"isString");function bte(t){return Si(t)==="[object Number]"&&Qi(t)}s(bte,"isNumber");function wte(t){return Si(t)==="[object Boolean]"&&Qi(t)}s(wte,"isBoolean");function d2(t){if(Ca)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Z0)return!1;try{return Z0.call(t),!0}catch{}return!1}s(d2,"isSymbol");function xte(t){if(!t||typeof t!="object"||!G0)return!1;try{return G0.call(t),!0}catch{}return!1}s(xte,"isBigInt");var Ste=Object.prototype.hasOwnProperty||function(t){return t in this};function Do(t,e){return Ste.call(t,e)}s(Do,"has");function Si(t){return lte.call(t)}s(Si,"toStr");function Tte(t){if(t.name)return t.name;var e=pte.call(dte.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}s(Tte,"nameOf");function p2(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}s(p2,"indexOf");function Ete(t){if(!Cf||!t||typeof t!="object")return!1;try{Cf.call(t);try{Of.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}s(Ete,"isMap");function Ite(t){if(!Tl||!t||typeof t!="object")return!1;try{Tl.call(t,Tl);try{El.call(t,El)}catch{return!0}return t instanceof WeakMap}catch{}return!1}s(Ite,"isWeakMap");function kte(t){if(!QM||!t||typeof t!="object")return!1;try{return QM.call(t),!0}catch{}return!1}s(kte,"isWeakRef");function Pte(t){if(!Of||!t||typeof t!="object")return!1;try{Of.call(t);try{Cf.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}s(Pte,"isSet");function Ate(t){if(!El||!t||typeof t!="object")return!1;try{El.call(t,El);try{Tl.call(t,Tl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}s(Ate,"isWeakSet");function Cte(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}s(Cte,"isElement");function m2(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return m2(Y0.call(t,0,e.maxStringLength),e)+n}var o=hte[e.quoteStyle||"single"];o.lastIndex=0;var i=xi.call(xi.call(t,o,"\\$1"),/[\x00-\x1f]/g,Ote);return l2(i,"single",e)}s(m2,"inspectString");function Ote(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+mte.call(e.toString(16))}s(Ote,"lowbyte");function Sl(t){return"Object("+t+")"}s(Sl,"markBoxed");function H0(t){return t+" { ? }"}s(H0,"weakCollectionOf");function s2(t,e,r,n){var o=n?W0(r,n):eo.call(r,", ");return t+" ("+e+") {"+o+"}"}s(s2,"collectionOf");function $te(t){for(var e=0;e<t.length;e++)if(p2(t[e],`
`)>=0)return!1;return!0}s($te,"singleLineValues");function Rte(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=eo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:eo.call(Array(e+1),r)}}s(Rte,"getIndent");function W0(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+eo.call(t,","+r)+`
`+e.prev}s(W0,"indentedJoin");function Af(t,e){var r=K0(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Do(t,o)?e(t[o],t):""}var i=typeof V0=="function"?V0(t):[],a;if(Ca){a={};for(var u=0;u<i.length;u++)a["$"+i[u]]=i[u]}for(var l in t)Do(t,l)&&(r&&String(Number(l))===l&&l<t.length||Ca&&a["$"+l]instanceof Symbol||(a2.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof V0=="function")for(var d=0;d<i.length;d++)c2.call(t,i[d])&&n.push("["+e(i[d])+"]: "+e(t[i[d]],t));return n}s(Af,"arrObjKeys")});var g2=Ue((cze,h2)=>{"use strict";var Nte=kl(),Dte=Wi(),$f=s(function(t,e,r){for(var n=t,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,r||(o.next=t.next,t.next=o),o},"listGetNode"),jte=s(function(t,e){if(t){var r=$f(t,e);return r&&r.value}},"listGet"),Mte=s(function(t,e,r){var n=$f(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},"listSet"),Ute=s(function(t,e){return t?!!$f(t,e):!1},"listHas"),zte=s(function(t,e){if(t)return $f(t,e,!0)},"listDelete");h2.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Dte("Side channel does not contain "+Nte(n))},"assert"),delete:s(function(n){var o=e&&e.next,i=zte(e,n);return i&&o&&o===i&&(e=void 0),!!i},"delete"),get:s(function(n){return jte(e,n)},"get"),has:s(function(n){return Ute(e,n)},"has"),set:s(function(n,o){e||(e={next:void 0}),Mte(e,n,o)},"set")};return r},"getSideChannelList")});var eE=Ue((lze,y2)=>{"use strict";y2.exports=Object});var _2=Ue((dze,v2)=>{"use strict";v2.exports=Error});var w2=Ue((pze,b2)=>{"use strict";b2.exports=EvalError});var S2=Ue((mze,x2)=>{"use strict";x2.exports=RangeError});var E2=Ue((fze,T2)=>{"use strict";T2.exports=ReferenceError});var k2=Ue((hze,I2)=>{"use strict";I2.exports=SyntaxError});var A2=Ue((gze,P2)=>{"use strict";P2.exports=URIError});var O2=Ue((yze,C2)=>{"use strict";C2.exports=Math.abs});var R2=Ue((vze,$2)=>{"use strict";$2.exports=Math.floor});var D2=Ue((_ze,N2)=>{"use strict";N2.exports=Math.max});var M2=Ue((bze,j2)=>{"use strict";j2.exports=Math.min});var z2=Ue((wze,U2)=>{"use strict";U2.exports=Math.pow});var q2=Ue((xze,L2)=>{"use strict";L2.exports=Math.round});var B2=Ue((Sze,F2)=>{"use strict";F2.exports=Number.isNaN||s(function(e){return e!==e},"isNaN")});var H2=Ue((Eze,V2)=>{"use strict";var Lte=B2();V2.exports=s(function(e){return Lte(e)||e===0?e:e<0?-1:1},"sign")});var Z2=Ue((kze,G2)=>{"use strict";G2.exports=Object.getOwnPropertyDescriptor});var tE=Ue((Pze,J2)=>{"use strict";var Rf=Z2();if(Rf)try{Rf([],"length")}catch{Rf=null}J2.exports=Rf});var W2=Ue((Aze,K2)=>{"use strict";var Nf=Object.defineProperty||!1;if(Nf)try{Nf({},"a",{value:1})}catch{Nf=!1}K2.exports=Nf});var X2=Ue((Cze,Q2)=>{"use strict";Q2.exports=s(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,r);if(u.value!==o||u.enumerable!==!0)return!1}return!0},"hasSymbols")});var tU=Ue(($ze,eU)=>{"use strict";var Y2=typeof Symbol<"u"&&Symbol,qte=X2();eU.exports=s(function(){return typeof Y2!="function"||typeof Symbol!="function"||typeof Y2("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qte()},"hasNativeSymbols")});var rE=Ue((Nze,rU)=>{"use strict";rU.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var nE=Ue((Dze,nU)=>{"use strict";var Fte=eE();nU.exports=Fte.getPrototypeOf||null});var sU=Ue((jze,iU)=>{"use strict";var Bte="Function.prototype.bind called on incompatible ",Vte=Object.prototype.toString,Hte=Math.max,Gte="[object Function]",oU=s(function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},"concatty"),Zte=s(function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},"slicy"),Jte=s(function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},"joiny");iU.exports=s(function(e){var r=this;if(typeof r!="function"||Vte.apply(r)!==Gte)throw new TypeError(Bte+r);for(var n=Zte(arguments,1),o,i=s(function(){if(this instanceof o){var p=r.apply(this,oU(n,arguments));return Object(p)===p?p:this}return r.apply(e,oU(n,arguments))},"binder"),a=Hte(0,r.length-n.length),u=[],l=0;l<a;l++)u[l]="$"+l;if(o=Function("binder","return function ("+Jte(u,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var d=s(function(){},"Empty");d.prototype=r.prototype,o.prototype=new d,d.prototype=null}return o},"bind")});var Pl=Ue((Uze,aU)=>{"use strict";var Kte=sU();aU.exports=Function.prototype.bind||Kte});var Df=Ue((zze,cU)=>{"use strict";cU.exports=Function.prototype.call});var oE=Ue((Lze,uU)=>{"use strict";uU.exports=Function.prototype.apply});var dU=Ue((qze,lU)=>{"use strict";lU.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var mU=Ue((Fze,pU)=>{"use strict";var Wte=Pl(),Qte=oE(),Xte=Df(),Yte=dU();pU.exports=Yte||Wte.call(Xte,Qte)});var iE=Ue((Bze,fU)=>{"use strict";var ere=Pl(),tre=Wi(),rre=Df(),nre=mU();fU.exports=s(function(e){if(e.length<1||typeof e[0]!="function")throw new tre("a function is required");return nre(ere,rre,e)},"callBindBasic")});var bU=Ue((Hze,_U)=>{"use strict";var ore=iE(),hU=tE(),yU;try{yU=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var sE=!!yU&&hU&&hU(Object.prototype,"__proto__"),vU=Object,gU=vU.getPrototypeOf;_U.exports=sE&&typeof sE.get=="function"?ore([sE.get]):typeof gU=="function"?s(function(e){return gU(e==null?e:vU(e))},"getDunder"):!1});var EU=Ue((Zze,TU)=>{"use strict";var wU=rE(),xU=nE(),SU=bU();TU.exports=wU?s(function(e){return wU(e)},"getProto"):xU?s(function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return xU(e)},"getProto"):SU?s(function(e){return SU(e)},"getProto"):null});var kU=Ue((Kze,IU)=>{"use strict";var ire=Function.prototype.call,sre=Object.prototype.hasOwnProperty,are=Pl();IU.exports=are.call(ire,sre)});var Uf=Ue((Wze,RU)=>{"use strict";var at,cre=eE(),ure=_2(),lre=w2(),dre=S2(),pre=E2(),Na=k2(),Ra=Wi(),mre=A2(),fre=O2(),hre=R2(),gre=D2(),yre=M2(),vre=z2(),_re=q2(),bre=H2(),OU=Function,aE=s(function(t){try{return OU('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),Al=tE(),wre=W2(),cE=s(function(){throw new Ra},"throwTypeError"),xre=Al?(function(){try{return arguments.callee,cE}catch{try{return Al(arguments,"callee").get}catch{return cE}}})():cE,Oa=tU()(),br=EU(),Sre=nE(),Tre=rE(),$U=oE(),Cl=Df(),$a={},Ere=typeof Uint8Array>"u"||!br?at:br(Uint8Array),Xi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?at:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?at:ArrayBuffer,"%ArrayIteratorPrototype%":Oa&&br?br([][Symbol.iterator]()):at,"%AsyncFromSyncIteratorPrototype%":at,"%AsyncFunction%":$a,"%AsyncGenerator%":$a,"%AsyncGeneratorFunction%":$a,"%AsyncIteratorPrototype%":$a,"%Atomics%":typeof Atomics>"u"?at:Atomics,"%BigInt%":typeof BigInt>"u"?at:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?at:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?at:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?at:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ure,"%eval%":eval,"%EvalError%":lre,"%Float16Array%":typeof Float16Array>"u"?at:Float16Array,"%Float32Array%":typeof Float32Array>"u"?at:Float32Array,"%Float64Array%":typeof Float64Array>"u"?at:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?at:FinalizationRegistry,"%Function%":OU,"%GeneratorFunction%":$a,"%Int8Array%":typeof Int8Array>"u"?at:Int8Array,"%Int16Array%":typeof Int16Array>"u"?at:Int16Array,"%Int32Array%":typeof Int32Array>"u"?at:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Oa&&br?br(br([][Symbol.iterator]())):at,"%JSON%":typeof JSON=="object"?JSON:at,"%Map%":typeof Map>"u"?at:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Oa||!br?at:br(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":cre,"%Object.getOwnPropertyDescriptor%":Al,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?at:Promise,"%Proxy%":typeof Proxy>"u"?at:Proxy,"%RangeError%":dre,"%ReferenceError%":pre,"%Reflect%":typeof Reflect>"u"?at:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?at:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Oa||!br?at:br(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?at:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Oa&&br?br(""[Symbol.iterator]()):at,"%Symbol%":Oa?Symbol:at,"%SyntaxError%":Na,"%ThrowTypeError%":xre,"%TypedArray%":Ere,"%TypeError%":Ra,"%Uint8Array%":typeof Uint8Array>"u"?at:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?at:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?at:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?at:Uint32Array,"%URIError%":mre,"%WeakMap%":typeof WeakMap>"u"?at:WeakMap,"%WeakRef%":typeof WeakRef>"u"?at:WeakRef,"%WeakSet%":typeof WeakSet>"u"?at:WeakSet,"%Function.prototype.call%":Cl,"%Function.prototype.apply%":$U,"%Object.defineProperty%":wre,"%Object.getPrototypeOf%":Sre,"%Math.abs%":fre,"%Math.floor%":hre,"%Math.max%":gre,"%Math.min%":yre,"%Math.pow%":vre,"%Math.round%":_re,"%Math.sign%":bre,"%Reflect.getPrototypeOf%":Tre};if(br)try{null.error}catch(t){PU=br(br(t)),Xi["%Error.prototype%"]=PU}var PU,Ire=s(function t(e){var r;if(e==="%AsyncFunction%")r=aE("async function () {}");else if(e==="%GeneratorFunction%")r=aE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=aE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&br&&(r=br(o.prototype))}return Xi[e]=r,r},"doEval"),AU={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ol=Pl(),jf=kU(),kre=Ol.call(Cl,Array.prototype.concat),Pre=Ol.call($U,Array.prototype.splice),CU=Ol.call(Cl,String.prototype.replace),Mf=Ol.call(Cl,String.prototype.slice),Are=Ol.call(Cl,RegExp.prototype.exec),Cre=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ore=/\\(\\)?/g,$re=s(function(e){var r=Mf(e,0,1),n=Mf(e,-1);if(r==="%"&&n!=="%")throw new Na("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Na("invalid intrinsic syntax, expected opening `%`");var o=[];return CU(e,Cre,function(i,a,u,l){o[o.length]=u?CU(l,Ore,"$1"):a||i}),o},"stringToPath"),Rre=s(function(e,r){var n=e,o;if(jf(AU,n)&&(o=AU[n],n="%"+o[0]+"%"),jf(Xi,n)){var i=Xi[n];if(i===$a&&(i=Ire(n)),typeof i>"u"&&!r)throw new Ra("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Na("intrinsic "+e+" does not exist!")},"getBaseIntrinsic");RU.exports=s(function(e,r){if(typeof e!="string"||e.length===0)throw new Ra("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ra('"allowMissing" argument must be a boolean');if(Are(/^%?[^%]*%?$/,e)===null)throw new Na("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=$re(e),o=n.length>0?n[0]:"",i=Rre("%"+o+"%",r),a=i.name,u=i.value,l=!1,d=i.alias;d&&(o=d[0],Pre(n,kre([0,1],d)));for(var p=1,f=!0;p<n.length;p+=1){var h=n[p],y=Mf(h,0,1),g=Mf(h,-1);if((y==='"'||y==="'"||y==="`"||g==='"'||g==="'"||g==="`")&&y!==g)throw new Na("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),o+="."+h,a="%"+o+"%",jf(Xi,a))u=Xi[a];else if(u!=null){if(!(h in u)){if(!r)throw new Ra("base intrinsic for "+e+" exists, but the property is not available.");return}if(Al&&p+1>=n.length){var m=Al(u,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?u=m.get:u=u[h]}else f=jf(u,h),u=u[h];f&&!l&&(Xi[a]=u)}}return u},"GetIntrinsic")});var uE=Ue((Xze,jU)=>{"use strict";var NU=Uf(),DU=iE(),Nre=DU([NU("%String.prototype.indexOf%")]);jU.exports=s(function(e,r){var n=NU(e,!!r);return typeof n=="function"&&Nre(e,".prototype.")>-1?DU([n]):n},"callBoundIntrinsic")});var lE=Ue((eLe,UU)=>{"use strict";var Dre=Uf(),$l=uE(),jre=kl(),Mre=Wi(),MU=Dre("%Map%",!0),Ure=$l("Map.prototype.get",!0),zre=$l("Map.prototype.set",!0),Lre=$l("Map.prototype.has",!0),qre=$l("Map.prototype.delete",!0),Fre=$l("Map.prototype.size",!0);UU.exports=!!MU&&s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Mre("Side channel does not contain "+jre(n))},"assert"),delete:s(function(n){if(e){var o=qre(e,n);return Fre(e)===0&&(e=void 0),o}return!1},"delete"),get:s(function(n){if(e)return Ure(e,n)},"get"),has:s(function(n){return e?Lre(e,n):!1},"has"),set:s(function(n,o){e||(e=new MU),zre(e,n,o)},"set")};return r},"getSideChannelMap")});var LU=Ue((rLe,zU)=>{"use strict";var Bre=Uf(),Lf=uE(),Vre=kl(),zf=lE(),Hre=Wi(),Da=Bre("%WeakMap%",!0),Gre=Lf("WeakMap.prototype.get",!0),Zre=Lf("WeakMap.prototype.set",!0),Jre=Lf("WeakMap.prototype.has",!0),Kre=Lf("WeakMap.prototype.delete",!0);zU.exports=Da?s(function(){var e,r,n={assert:s(function(o){if(!n.has(o))throw new Hre("Side channel does not contain "+Vre(o))},"assert"),delete:s(function(o){if(Da&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Kre(e,o)}else if(zf&&r)return r.delete(o);return!1},"delete"),get:s(function(o){return Da&&o&&(typeof o=="object"||typeof o=="function")&&e?Gre(e,o):r&&r.get(o)},"get"),has:s(function(o){return Da&&o&&(typeof o=="object"||typeof o=="function")&&e?Jre(e,o):!!r&&r.has(o)},"has"),set:s(function(o,i){Da&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Da),Zre(e,o,i)):zf&&(r||(r=zf()),r.set(o,i))},"set")};return n},"getSideChannelWeakMap"):zf});var FU=Ue((oLe,qU)=>{"use strict";var Wre=Wi(),Qre=kl(),Xre=g2(),Yre=lE(),ene=LU(),tne=ene||Yre||Xre;qU.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Wre("Side channel does not contain "+Qre(n))},"assert"),delete:s(function(n){return!!e&&e.delete(n)},"delete"),get:s(function(n){return e&&e.get(n)},"get"),has:s(function(n){return!!e&&e.has(n)},"has"),set:s(function(n,o){e||(e=tne()),e.set(n,o)},"set")};return r},"getSideChannel")});var qf=Ue((sLe,BU)=>{"use strict";var rne=String.prototype.replace,nne=/%20/g,dE={RFC1738:"RFC1738",RFC3986:"RFC3986"};BU.exports={default:dE.RFC3986,formatters:{RFC1738:s(function(t){return rne.call(t,nne,"+")},"RFC1738"),RFC3986:s(function(t){return String(t)},"RFC3986")},RFC1738:dE.RFC1738,RFC3986:dE.RFC3986}});var fE=Ue((cLe,HU)=>{"use strict";var one=qf(),pE=Object.prototype.hasOwnProperty,Yi=Array.isArray,to=(function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ine=s(function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Yi(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);r.obj[r.prop]=o}}},"compactQueue"),VU=s(function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},"arrayToObject"),sne=s(function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Yi(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!pE.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return Yi(e)&&!Yi(r)&&(o=VU(e,n)),Yi(e)&&Yi(r)?(r.forEach(function(i,a){if(pE.call(e,a)){var u=e[a];u&&typeof u=="object"&&i&&typeof i=="object"?e[a]=t(u,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var u=r[a];return pE.call(i,a)?i[a]=t(i[a],u,n):i[a]=u,i},o)},"merge"),ane=s(function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},"assignSingleSource"),cne=s(function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},"decode"),mE=1024,une=s(function(e,r,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var u="",l=0;l<a.length;l+=mE){for(var d=a.length>=mE?a.slice(l,l+mE):a,p=[],f=0;f<d.length;++f){var h=d.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===one.RFC1738&&(h===40||h===41)){p[p.length]=d.charAt(f);continue}if(h<128){p[p.length]=to[h];continue}if(h<2048){p[p.length]=to[192|h>>6]+to[128|h&63];continue}if(h<55296||h>=57344){p[p.length]=to[224|h>>12]+to[128|h>>6&63]+to[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|d.charCodeAt(f)&1023),p[p.length]=to[240|h>>18]+to[128|h>>12&63]+to[128|h>>6&63]+to[128|h&63]}u+=p.join("")}return u},"encode"),lne=s(function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var i=r[o],a=i.obj[i.prop],u=Object.keys(a),l=0;l<u.length;++l){var d=u[l],p=a[d];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:a,prop:d}),n.push(p))}return ine(r),e},"compact"),dne=s(function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},"isRegExp"),pne=s(function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},"isBuffer"),mne=s(function(e,r){return[].concat(e,r)},"combine"),fne=s(function(e,r){if(Yi(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)},"maybeMap");HU.exports={arrayToObject:VU,assign:ane,combine:mne,compact:lne,decode:cne,encode:une,isBuffer:pne,isRegExp:dne,maybeMap:fne,merge:sne}});var QU=Ue((lLe,WU)=>{"use strict";var ZU=FU(),Ff=fE(),Rl=qf(),hne=Object.prototype.hasOwnProperty,JU={brackets:s(function(e){return e+"[]"},"brackets"),comma:"comma",indices:s(function(e,r){return e+"["+r+"]"},"indices"),repeat:s(function(e){return e},"repeat")},ro=Array.isArray,gne=Array.prototype.push,KU=s(function(t,e){gne.apply(t,ro(e)?e:[e])},"pushToArray"),yne=Date.prototype.toISOString,GU=Rl.default,hr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ff.encode,encodeValuesOnly:!1,filter:void 0,format:GU,formatter:Rl.formatters[GU],indices:!1,serializeDate:s(function(e){return yne.call(e)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},vne=s(function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},"isNonNullishPrimitive"),hE={},_ne=s(function t(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b){for(var x=e,k=b,R=0,O=!1;(k=k.get(hE))!==void 0&&!O;){var C=k.get(e);if(R+=1,typeof C<"u"){if(C===R)throw new RangeError("Cyclic object value");O=!0}typeof k.get(hE)>"u"&&(R=0)}if(typeof p=="function"?x=p(r,x):x instanceof Date?x=y(x):n==="comma"&&ro(x)&&(x=Ff.maybeMap(x,function(We){return We instanceof Date?y(We):We})),x===null){if(a)return d&&!_?d(r,hr.encoder,w,"key",g):r;x=""}if(vne(x)||Ff.isBuffer(x)){if(d){var $=_?r:d(r,hr.encoder,w,"key",g);return[m($)+"="+m(d(x,hr.encoder,w,"value",g))]}return[m(r)+"="+m(String(x))]}var P=[];if(typeof x>"u")return P;var N;if(n==="comma"&&ro(x))_&&d&&(x=Ff.maybeMap(x,d)),N=[{value:x.length>0?x.join(",")||null:void 0}];else if(ro(p))N=p;else{var D=Object.keys(x);N=f?D.sort(f):D}var K=l?String(r).replace(/\./g,"%2E"):String(r),V=o&&ro(x)&&x.length===1?K+"[]":K;if(i&&ro(x)&&x.length===0)return V+"[]";for(var q=0;q<N.length;++q){var Q=N[q],ee=typeof Q=="object"&&Q&&typeof Q.value<"u"?Q.value:x[Q];if(!(u&&ee===null)){var oe=h&&l?String(Q).replace(/\./g,"%2E"):String(Q),_e=ro(x)?typeof n=="function"?n(V,oe):V:V+(h?"."+oe:"["+oe+"]");b.set(e,R);var Te=ZU();Te.set(hE,b),KU(P,t(ee,_e,n,o,i,a,u,l,n==="comma"&&_&&ro(x)?null:d,p,f,h,y,g,m,_,w,Te))}}return P},"stringify"),bne=s(function(e){if(!e)return hr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||hr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Rl.default;if(typeof e.format<"u"){if(!hne.call(Rl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Rl.formatters[n],i=hr.filter;(typeof e.filter=="function"||ro(e.filter))&&(i=e.filter);var a;if(e.arrayFormat in JU?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=hr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:hr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:hr.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:hr.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:hr.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?hr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:hr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:hr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:hr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:hr.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:hr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:hr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:hr.strictNullHandling}},"normalizeStringifyOptions");WU.exports=function(t,e){var r=t,n=bne(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):ro(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof r!="object"||r===null)return"";var u=JU[n.arrayFormat],l=u==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var d=ZU(),p=0;p<o.length;++p){var f=o[p],h=r[f];n.skipNulls&&h===null||KU(a,_ne(h,f,u,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var y=a.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}});var tz=Ue((pLe,ez)=>{"use strict";var es=fE(),gE=Object.prototype.hasOwnProperty,XU=Array.isArray,Xt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:es.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},wne=s(function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),YU=s(function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},"parseArrayValue"),xne="utf8=%26%2310003%3B",Sne="utf8=%E2%9C%93",Tne=s(function(e,r){var n={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=o.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&a.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var u=-1,l,d=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===Sne?d="utf-8":a[l]===xne&&(d="iso-8859-1"),u=l,l=a.length);for(l=0;l<a.length;++l)if(l!==u){var p=a[l],f=p.indexOf("]="),h=f===-1?p.indexOf("="):f+1,y,g;h===-1?(y=r.decoder(p,Xt.decoder,d,"key"),g=r.strictNullHandling?null:""):(y=r.decoder(p.slice(0,h),Xt.decoder,d,"key"),g=es.maybeMap(YU(p.slice(h+1),r,XU(n[y])?n[y].length:0),function(_){return r.decoder(_,Xt.decoder,d,"value")})),g&&r.interpretNumericEntities&&d==="iso-8859-1"&&(g=wne(String(g))),p.indexOf("[]=")>-1&&(g=XU(g)?[g]:g);var m=gE.call(n,y);m&&r.duplicates==="combine"?n[y]=es.combine(n[y],g):(!m||r.duplicates==="last")&&(n[y]=g)}return n},"parseQueryStringValues"),Ene=s(function(t,e,r,n){var o=0;if(t.length>0&&t[t.length-1]==="[]"){var i=t.slice(0,-1).join("");o=Array.isArray(e)&&e[i]?e[i].length:0}for(var a=n?e:YU(e,r,o),u=t.length-1;u>=0;--u){var l,d=t[u];if(d==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:es.combine([],a);else{l=r.plainObjects?{__proto__:null}:{};var p=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,f=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,h=parseInt(f,10);!r.parseArrays&&f===""?l={0:a}:!isNaN(h)&&d!==f&&String(h)===f&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[],l[h]=a):f!=="__proto__"&&(l[f]=a)}a=l}return a},"parseObject"),Ine=s(function(e,r,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(i),d=l?i.slice(0,l.index):i,p=[];if(d){if(!n.plainObjects&&gE.call(Object.prototype,d)&&!n.allowPrototypes)return;p.push(d)}for(var f=0;n.depth>0&&(l=u.exec(i))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&gE.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");p.push("["+i.slice(l.index)+"]")}return Ene(p,r,n,o)}},"parseQueryStringKeys"),kne=s(function(e){if(!e)return Xt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?Xt.charset:e.charset,n=typeof e.duplicates>"u"?Xt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Xt.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Xt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Xt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Xt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Xt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Xt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Xt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Xt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Xt.decoder,delimiter:typeof e.delimiter=="string"||es.isRegExp(e.delimiter)?e.delimiter:Xt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Xt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Xt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Xt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Xt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Xt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Xt.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},"normalizeParseOptions");ez.exports=function(t,e){var r=kne(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?Tne(t,r):t,o=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),a=0;a<i.length;++a){var u=i[a],l=Ine(u,n[u],r,typeof t=="string");o=es.merge(o,l,r)}return r.allowSparse===!0?o:es.compact(o)}});var nz=Ue((fLe,rz)=>{"use strict";var Pne=QU(),Ane=tz(),Cne=qf();rz.exports={formats:Cne,parse:Ane,stringify:Pne}});var hie={};en(hie,{config:()=>mie,default:()=>fie});module.exports=oF(hie);var $h=s(t=>e=>t.fetch(e),"handle");var Rh=s((t,e,r)=>(n,o)=>{let i=-1;return a(0);async function a(u){if(u<=i)throw new Error("next() called multiple times");i=u;let l,d=!1,p;if(t[u]?(p=t[u][0][0],n.req.routeIndex=u):p=u===t.length&&o||void 0,p)try{l=await p(n,()=>a(u+1))}catch(f){if(f instanceof Error&&e)n.error=f,l=await e(f,n),d=!0;else throw f}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||d)&&(n.res=l),n}},"compose");var md=class extends Error{static{s(this,"HTTPException")}res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var iI=Symbol();var sI=s(async(t,e=Object.create(null))=>{let{all:r=!1,dot:n=!1}=e,i=(t instanceof fd?t.raw.headers:t.headers).get("Content-Type");return i?.startsWith("multipart/form-data")||i?.startsWith("application/x-www-form-urlencoded")?iF(t,{all:r,dot:n}):{}},"parseBody");async function iF(t,e){let r=await t.formData();return r?sF(r,e):{}}s(iF,"parseFormData");function sF(t,e){let r=Object.create(null);return t.forEach((n,o)=>{e.all||o.endsWith("[]")?aF(r,o,n):r[o]=n}),e.dot&&Object.entries(r).forEach(([n,o])=>{n.includes(".")&&(cF(r,n,o),delete r[n])}),r}s(sF,"convertFormDataToBodyData");var aF=s((t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},"handleParsingAllValues"),cF=s((t,e,r)=>{let n=t,o=e.split(".");o.forEach((i,a)=>{a===o.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},"handleParsingNestedValues");var Dh=s(t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},"splitPath"),aI=s(t=>{let{groups:e,path:r}=uF(t),n=Dh(r);return lF(n,e)},"splitRoutingPath"),uF=s(t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,n)=>{let o=`@${n}`;return e.push([o,r]),o}),{groups:e,path:t}},"extractGroupsFromPath"),lF=s((t,e)=>{for(let r=e.length-1;r>=0;r--){let[n]=e[r];for(let o=t.length-1;o>=0;o--)if(t[o].includes(n)){t[o]=t[o].replace(n,e[r][1]);break}}return t},"replaceGroupMarks"),hd={},cI=s((t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${t}#${e}`;return hd[n]||(r[2]?hd[n]=e&&e[0]!==":"&&e[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:hd[n]=[t,r[1],!0]),hd[n]}return null},"getPattern"),ds=s((t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},"tryDecode"),dF=s(t=>ds(t,decodeURI),"tryDecodeURI"),jh=s(t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),n=r;for(;n<e.length;n++){let o=e.charCodeAt(n);if(o===37){let i=e.indexOf("?",n),a=e.slice(r,i===-1?void 0:i);return dF(a.includes("%25")?a.replace(/%25/g,"%2525"):a)}else if(o===63)break}return e.slice(r,n)},"getPath");var uI=s(t=>{let e=jh(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},"getPathNoStrict"),Ai=s((t,e,...r)=>(r.length&&(e=Ai(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),"mergePath"),gd=s(t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],n="";return e.forEach(o=>{if(o!==""&&!/\:/.test(o))n+="/"+o;else if(/\:/.test(o))if(/\?/.test(o)){r.length===0&&n===""?r.push("/"):r.push(n);let i=o.replace("?","");n+="/"+i,r.push(n)}else n+="/"+o}),r.filter((o,i,a)=>a.indexOf(o)===i)},"checkOptionalParameter"),Nh=s(t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?ds(t,tc):t):t,"_decodeURI"),lI=s((t,e,r)=>{let n;if(!r&&e&&!/[%+]/.test(e)){let a=t.indexOf("?",8);if(a===-1)return;for(t.startsWith(e,a+1)||(a=t.indexOf(`&${e}`,a+1));a!==-1;){let u=t.charCodeAt(a+e.length+1);if(u===61){let l=a+e.length+2,d=t.indexOf("&",l);return Nh(t.slice(l,d===-1?void 0:d))}else if(u==38||isNaN(u))return"";a=t.indexOf(`&${e}`,a+1)}if(n=/[%+]/.test(t),!n)return}let o={};n??=/[%+]/.test(t);let i=t.indexOf("?",8);for(;i!==-1;){let a=t.indexOf("&",i+1),u=t.indexOf("=",i);u>a&&a!==-1&&(u=-1);let l=t.slice(i+1,u===-1?a===-1?void 0:a:u);if(n&&(l=Nh(l)),i=a,l==="")continue;let d;u===-1?d="":(d=t.slice(u+1,a===-1?void 0:a),n&&(d=Nh(d))),r?(o[l]&&Array.isArray(o[l])||(o[l]=[]),o[l].push(d)):o[l]??=d}return e?o[e]:o},"_getQueryParam"),dI=lI,pI=s((t,e)=>lI(t,e,!0),"getQueryParams"),tc=decodeURIComponent;var mI=s(t=>ds(t,tc),"tryDecodeURIComponent"),fd=class{static{s(this,"HonoRequest")}raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#i()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#n(e);return r&&/\%/.test(r)?mI(r):r}#i(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let n=this.#n(this.#t[0][this.routeIndex][1][r]);n!==void 0&&(t[r]=/\%/.test(n)?mI(n):n)}return t}#n(t){return this.#t[1]?this.#t[1][t]:t}query(t){return dI(this.url,t)}queries(t){return pI(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,n)=>{e[n]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await sI(this,t)}#o=s(t=>{let{bodyCache:e,raw:r}=this,n=e[t];if(n)return n;let o=Object.keys(e)[0];return o?e[o].then(i=>(o==="json"&&(i=JSON.stringify(i)),new Response(i)[t]())):e[t]=r[t]()},"#cachedBody");json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[iI](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}};var fI={Stringify:1,BeforeStream:2,Stream:3},pF=s((t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r},"raw");var Mh=s(async(t,e,r,n,o)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let i=t.callbacks;if(!i?.length)return Promise.resolve(t);o?o[0]+=t:o=[t];let a=Promise.all(i.map(u=>u({phase:e,buffer:o,context:n}))).then(u=>Promise.all(u.filter(Boolean).map(l=>Mh(l,e,!1,n,o))).then(()=>o[0]));return r?pF(await a,i):a},"resolveCallback");var mF="text/plain; charset=UTF-8",Uh=s((t,e)=>({"Content-Type":t,...e}),"setDefaultContentType"),hI=class{static{s(this,"Context")}#e;#t;env={};#r;finalized=!1;error;#i;#n;#o;#d;#u;#c;#s;#p;#l;constructor(t,e){this.#e=t,e&&(this.#n=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#l=e.path,this.#p=e.matchResult)}get req(){return this.#t??=new fd(this.#e,this.#l,this.#p),this.#t}get event(){if(this.#n&&"respondWith"in this.#n)return this.#n;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#n)return this.#n;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#s??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let n=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let o of n)t.headers.append("set-cookie",o)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=s((...t)=>(this.#u??=e=>this.html(e),this.#u(...t)),"render");setLayout=s(t=>this.#d=t,"setLayout");getLayout=s(()=>this.#d,"getLayout");setRenderer=s(t=>{this.#u=t},"setRenderer");header=s((t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let n=this.#o?this.#o.headers:this.#s??=new Headers;e===void 0?n.delete(t):r?.append?n.append(t,e):n.set(t,e)},"header");status=s(t=>{this.#i=t},"status");set=s((t,e)=>{this.#r??=new Map,this.#r.set(t,e)},"set");get=s(t=>this.#r?this.#r.get(t):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(t,e,r){let n=this.#o?new Headers(this.#o.headers):this.#s??new Headers;if(typeof e=="object"&&"headers"in e){let i=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[a,u]of i)a.toLowerCase()==="set-cookie"?n.append(a,u):n.set(a,u)}if(r)for(let[i,a]of Object.entries(r))if(typeof a=="string")n.set(i,a);else{n.delete(i);for(let u of a)n.append(i,u)}let o=typeof e=="number"?e:e?.status??this.#i;return new Response(t,{status:o,headers:n})}newResponse=s((...t)=>this.#a(...t),"newResponse");body=s((t,e,r)=>this.#a(t,e,r),"body");text=s((t,e,r)=>!this.#s&&!this.#i&&!e&&!r&&!this.finalized?new Response(t):this.#a(t,e,Uh(mF,r)),"text");json=s((t,e,r)=>this.#a(JSON.stringify(t),e,Uh("application/json",r)),"json");html=s((t,e,r)=>{let n=s(o=>this.#a(o,e,Uh("text/html; charset=UTF-8",r)),"res");return typeof t=="object"?Mh(t,fI.Stringify,!1,{}).then(n):n(t)},"html");redirect=s((t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)},"redirect");notFound=s(()=>(this.#c??=()=>new Response,this.#c(this)),"notFound")};Fo();zh();var fF=s(t=>t.text("404 Not Found",404),"notFoundHandler"),vI=s((t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},"errorHandler"),Lh=class{static{s(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(t={}){[...yI,gI].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?this.#e=i:this.#i(o,this.#e,i),a.forEach(u=>{this.#i(o,this.#e,u)}),this)}),this.on=(o,i,...a)=>{for(let u of[i].flat()){this.#e=u;for(let l of[o].flat())a.map(d=>{this.#i(l.toUpperCase(),this.#e,d)})}return this},this.use=(o,...i)=>(typeof o=="string"?this.#e=o:(this.#e="*",i.unshift(o)),i.forEach(a=>{this.#i(Ot,this.#e,a)}),this);let{strict:r,...n}=t;Object.assign(this,n),this.getPath=r??!0?t.getPath??jh:uI}#t(){let t=new Lh({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,t.#r=this.#r,t.routes=this.routes,t}#r=fF;errorHandler=vI;route(t,e){let r=this.basePath(t);return e.routes.map(n=>{let o;e.errorHandler===vI?o=n.handler:(o=s(async(i,a)=>(await Rh([],e.errorHandler)(i,()=>n.handler(i,a))).res,"handler"),o[rc]=n.handler),r.#i(n.method,n.path,o)}),this}basePath(t){let e=this.#t();return e._basePath=Ai(this._basePath,t),e}onError=s(t=>(this.errorHandler=t,this),"onError");notFound=s(t=>(this.#r=t,this),"notFound");mount(t,e,r){let n,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?n=s(u=>u,"replaceRequest"):n=r.replaceRequest));let i=o?u=>{let l=o(u);return Array.isArray(l)?l:[l]}:u=>{let l;try{l=u.executionCtx}catch{}return[u.env,l]};n||=(()=>{let u=Ai(this._basePath,t),l=u==="/"?0:u.length;return d=>{let p=new URL(d.url);return p.pathname=p.pathname.slice(l)||"/",new Request(p,d)}})();let a=s(async(u,l)=>{let d=await e(n(u.req.raw),...i(u));if(d)return d;await l()},"handler");return this.#i(Ot,Ai(t,"*"),a),this}#i(t,e,r){t=t.toUpperCase(),e=Ai(this._basePath,e);let n={basePath:this._basePath,path:e,method:t,handler:r};this.router.add(t,e,[r,n]),this.routes.push(n)}#n(t,e){if(t instanceof Error)return this.errorHandler(t,e);throw t}#o(t,e,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(t,e,r,"GET")))();let o=this.getPath(t,{env:r}),i=this.router.match(n,o),a=new hI(t,{path:o,matchResult:i,env:r,executionCtx:e,notFoundHandler:this.#r});if(i[0].length===1){let l;try{l=i[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(d){return this.#n(d,a)}return l instanceof Promise?l.then(d=>d||(a.finalized?a.res:this.#r(a))).catch(d=>this.#n(d,a)):l??this.#r(a)}let u=Rh(i[0],this.errorHandler,this.#r);return(async()=>{try{let l=await u(a);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#n(l,a)}})()}fetch=s((t,...e)=>this.#o(t,e[1],e[0],t.method),"fetch");request=s((t,e,r,n)=>t instanceof Request?this.fetch(e?new Request(t,e):t,r,n):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Ai("/",t)}`,e),r,n)),"request");fire=s(()=>{addEventListener("fetch",t=>{t.respondWith(this.#o(t.request,t,void 0,t.request.method))})},"fire")};Fo();Fo();var _d=[];function qh(t,e){let r=this.buildAllMatchers(),n=s((o,i)=>{let a=r[o]||r[Ot],u=a[2][i];if(u)return u;let l=i.match(a[0]);if(!l)return[[],_d];let d=l.indexOf("",1);return[a[1][d],l]},"match2");return this.match=n,n(t,e)}s(qh,"match");var bd="[^/]+",nc=".*",oc="(?:|/.*)",Ci=Symbol(),hF=new Set(".\\+*[^]$()");function gF(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===nc||t===oc?1:e===nc||e===oc?-1:t===bd?1:e===bd?-1:t.length===e.length?t<e?-1:1:e.length-t.length}s(gF,"compareKey");var wd=class{static{s(this,"Node")}#e;#t;#r=Object.create(null);insert(t,e,r,n,o){if(t.length===0){if(this.#e!==void 0)throw Ci;if(o)return;this.#e=e;return}let[i,...a]=t,u=i==="*"?a.length===0?["","",nc]:["","",bd]:i==="/*"?["","",oc]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(u){let d=u[1],p=u[2]||bd;if(d&&u[2]&&(p===".*"||(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p))))throw Ci;if(l=this.#r[p],!l){if(Object.keys(this.#r).some(f=>f!==nc&&f!==oc))throw Ci;if(o)return;l=this.#r[p]=new wd,d!==""&&(l.#t=n.varIndex++)}!o&&d!==""&&r.push([d,l.#t])}else if(l=this.#r[i],!l){if(Object.keys(this.#r).some(d=>d.length>1&&d!==nc&&d!==oc))throw Ci;if(o)return;l=this.#r[i]=new wd}l.insert(a,e,r,n,o)}buildRegExpStr(){let e=Object.keys(this.#r).sort(gF).map(r=>{let n=this.#r[r];return(typeof n.#t=="number"?`(${r})@${n.#t}`:hF.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#e=="number"&&e.unshift(`#${this.#e}`),e.length===0?"":e.length===1?e[0]:"(?:"+e.join("|")+")"}};var _I=class{static{s(this,"Trie")}#e={varIndex:0};#t=new wd;insert(t,e,r){let n=[],o=[];for(let a=0;;){let u=!1;if(t=t.replace(/\{[^}]+\}/g,l=>{let d=`@\\${a}`;return o[a]=[d,l],a++,u=!0,d}),!u)break}let i=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=o.length-1;a>=0;a--){let[u]=o[a];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(u)!==-1){i[l]=i[l].replace(u,o[a][1]);break}}return this.#t.insert(i,e,n,this.#e,r),n}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],n=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(o,i,a)=>i!==void 0?(r[++e]=Number(i),"$()"):(a!==void 0&&(n[Number(a)]=++e),"")),[new RegExp(`^${t}`),r,n]}};var yF=[/^$/,[],Object.create(null)],bI=Object.create(null);function wI(t){return bI[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}s(wI,"buildWildcardRegExp");function vF(){bI=Object.create(null)}s(vF,"clearWildcardRegExpCache");function _F(t){let e=new _I,r=[];if(t.length===0)return yF;let n=t.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,p],[f,h])=>d?1:f?-1:p.length-h.length),o=Object.create(null);for(let d=0,p=-1,f=n.length;d<f;d++){let[h,y,g]=n[d];h?o[y]=[g.map(([_])=>[_,Object.create(null)]),_d]:p++;let m;try{m=e.insert(y,p,h)}catch(_){throw _===Ci?new vd(y):_}h||(r[p]=g.map(([_,w])=>{let b=Object.create(null);for(w-=1;w>=0;w--){let[x,k]=m[w];b[x]=k}return[_,b]}))}let[i,a,u]=e.buildRegExp();for(let d=0,p=r.length;d<p;d++)for(let f=0,h=r[d].length;f<h;f++){let y=r[d][f]?.[1];if(!y)continue;let g=Object.keys(y);for(let m=0,_=g.length;m<_;m++)y[g[m]]=u[y[g[m]]]}let l=[];for(let d in a)l[d]=r[a[d]];return[i,l,o]}s(_F,"buildMatcherFromPreprocessedRoutes");function ps(t,e){if(t){for(let r of Object.keys(t).sort((n,o)=>o.length-n.length))if(wI(r).test(e))return[...t[r]]}}s(ps,"findMiddleware");var xd=class{static{s(this,"RegExpRouter")}name="RegExpRouter";#e;#t;constructor(){this.#e={[Ot]:Object.create(null)},this.#t={[Ot]:Object.create(null)}}add(t,e,r){let n=this.#e,o=this.#t;if(!n||!o)throw new Error(yd);n[t]||[n,o].forEach(u=>{u[t]=Object.create(null),Object.keys(u[Ot]).forEach(l=>{u[t][l]=[...u[Ot][l]]})}),e==="/*"&&(e="*");let i=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let u=wI(e);t===Ot?Object.keys(n).forEach(l=>{n[l][e]||=ps(n[l],e)||ps(n[Ot],e)||[]}):n[t][e]||=ps(n[t],e)||ps(n[Ot],e)||[],Object.keys(n).forEach(l=>{(t===Ot||t===l)&&Object.keys(n[l]).forEach(d=>{u.test(d)&&n[l][d].push([r,i])})}),Object.keys(o).forEach(l=>{(t===Ot||t===l)&&Object.keys(o[l]).forEach(d=>u.test(d)&&o[l][d].push([r,i]))});return}let a=gd(e)||[e];for(let u=0,l=a.length;u<l;u++){let d=a[u];Object.keys(o).forEach(p=>{(t===Ot||t===p)&&(o[p][d]||=[...ps(n[p],d)||ps(n[Ot],d)||[]],o[p][d].push([r,i-l+u+1]))})}}match=qh;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,vF(),t}#r(t){let e=[],r=t===Ot;return[this.#e,this.#t].forEach(n=>{let o=n[t]?Object.keys(n[t]).map(i=>[i,n[t][i]]):[];o.length!==0?(r||=!0,e.push(...o)):t!==Ot&&e.push(...Object.keys(n[Ot]).map(i=>[i,n[Ot][i]]))}),r?_F(e):null}};Fo();Fo();var Fh=class{static{s(this,"SmartRouter")}name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(yd);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,n=this.#t,o=r.length,i=0,a;for(;i<o;i++){let u=r[i];try{for(let l=0,d=n.length;l<d;l++)u.add(...n[l]);a=u.match(t,e)}catch(l){if(l instanceof vd)continue;throw l}this.match=u.match.bind(u),this.#e=[u],this.#t=void 0;break}if(i===o)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};Fo();var ic=Object.create(null),Bh=class{static{s(this,"Node")}#e;#t;#r;#i=0;#n=ic;constructor(t,e,r){if(this.#t=r||Object.create(null),this.#e=[],t&&e){let n=Object.create(null);n[t]={handler:e,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(t,e,r){this.#i=++this.#i;let n=this,o=aI(e),i=[];for(let a=0,u=o.length;a<u;a++){let l=o[a],d=o[a+1],p=cI(l,d),f=Array.isArray(p)?p[0]:l;if(f in n.#t){n=n.#t[f],p&&i.push(p[1]);continue}n.#t[f]=new Bh,p&&(n.#r.push(p),i.push(p[1])),n=n.#t[f]}return n.#e.push({[t]:{handler:r,possibleKeys:i.filter((a,u,l)=>l.indexOf(a)===u),score:this.#i}}),n}#o(t,e,r,n){let o=[];for(let i=0,a=t.#e.length;i<a;i++){let u=t.#e[i],l=u[e]||u[Ot],d={};if(l!==void 0&&(l.params=Object.create(null),o.push(l),r!==ic||n&&n!==ic))for(let p=0,f=l.possibleKeys.length;p<f;p++){let h=l.possibleKeys[p],y=d[l.score];l.params[h]=n?.[h]&&!y?n[h]:r[h]??n?.[h],d[l.score]=!0}}return o}search(t,e){let r=[];this.#n=ic;let o=[this],i=Dh(e),a=[];for(let u=0,l=i.length;u<l;u++){let d=i[u],p=u===l-1,f=[];for(let h=0,y=o.length;h<y;h++){let g=o[h],m=g.#t[d];m&&(m.#n=g.#n,p?(m.#t["*"]&&r.push(...this.#o(m.#t["*"],t,g.#n)),r.push(...this.#o(m,t,g.#n))):f.push(m));for(let _=0,w=g.#r.length;_<w;_++){let b=g.#r[_],x=g.#n===ic?{}:{...g.#n};if(b==="*"){let P=g.#t["*"];P&&(r.push(...this.#o(P,t,g.#n)),P.#n=x,f.push(P));continue}let[k,R,O]=b;if(!d&&!(O instanceof RegExp))continue;let C=g.#t[k],$=i.slice(u).join("/");if(O instanceof RegExp){let P=O.exec($);if(P){if(x[R]=P[0],r.push(...this.#o(C,t,g.#n,x)),Object.keys(C.#t).length){C.#n=x;let N=P[0].match(/\//)?.length??0;(a[N]||=[]).push(C)}continue}}(O===!0||O.test(d))&&(x[R]=d,p?(r.push(...this.#o(C,t,x,g.#n)),C.#t["*"]&&r.push(...this.#o(C.#t["*"],t,x,g.#n))):(C.#n=x,f.push(C)))}}o=f.concat(a.shift()??[])}return r.length>1&&r.sort((u,l)=>u.score-l.score),[r.map(({handler:u,params:l})=>[u,l])]}};var Vh=class{static{s(this,"TrieRouter")}name="TrieRouter";#e;constructor(){this.#e=new Bh}add(t,e,r){let n=gd(e);if(n){for(let o=0,i=n.length;o<i;o++)this.#e.insert(t,n[o],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}};var Ce=class extends Lh{static{s(this,"Hono")}constructor(t={}){super(t),this.router=t.router??new Fh({routers:[new xd,new Vh]})}};function bF(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}s(bF,"getColorEnabled");async function xI(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!bF())}s(xI,"getColorEnabledAsync");var wF=s(t=>{let[e,r]=[",","."];return t.map(o=>o.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},"humanize"),xF=s(t=>{let e=Date.now()-t;return wF([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},"time"),SF=s(async t=>{if(await xI())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`},"colorStatus");async function SI(t,e,r,n,o=0,i){let a=e==="<--"?`${e} ${r} ${n}`:`${e} ${r} ${n} ${await SF(o)} ${i}`;t(a)}s(SI,"log");var TI=s((t=console.log)=>s(async function(r,n){let{method:o,url:i}=r.req,a=i.slice(i.indexOf("/",8));await SI(t,"<--",o,a);let u=Date.now();await n(),await SI(t,"-->",o,a,r.res.status,xF(u))},"logger2"),"logger");var Sd={};var Hh=class{static{s(this,"SecureLogger")}isDevelopment;isProduction;currentUserId;sensitivePatterns;logBuffer=[];maxBufferSize=1e3;flushInterval=5e3;constructor(){this.isDevelopment=!!(typeof process<"u"&&!1||typeof Sd<"u"&&Sd.env?.DEV),this.isProduction=typeof process<"u"||typeof Sd<"u"&&Sd.env?.MODE==="production",this.sensitivePatterns=[/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/g,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,/\b(?:\+55\s?)?\(?[1-9]{2}\)?\s?[9]?\d{4}-?\d{4}\b/g,/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,/(?:sk_|eyJ)[a-zA-Z0-9_-]{20,}/g,/password["\s:]+["']?[^"'\s,}]+["']?/gi,/token["\s:]+["']?[^"'\s,}]+["']?/gi,/account["\s:]+["']?\d{6,}["']?/gi],this.isProduction&&setInterval(()=>this.flushBuffer(),this.flushInterval)}setUserId(e){this.currentUserId=e}clearUserId(){this.currentUserId=void 0}sanitizeData(e,r){let n=e;this.sensitivePatterns.forEach(i=>{n=n.replace(i,"[REDACTED]")});let o;return r&&(o=this.sanitizeContextObject(r)),{sanitizedContext:o,sanitizedMessage:n}}sanitizeContextObject(e){let r={};for(let[n,o]of Object.entries(e))if(this.isSensitiveKey(n)&&o)r[n]="[REDACTED]";else if(typeof o=="string"){let a=o;this.sensitivePatterns.forEach(u=>{a=a.replace(u,"[REDACTED]")}),r[n]=a}else typeof o=="object"&&o!==null?r[n]=this.sanitizeContextObject(o):r[n]=o;return this.currentUserId&&!r.userId&&(r.userId=`${this.currentUserId.substring(0,8)}...`),r}isSensitiveKey(e){return["password","token","secret","key","auth","session","email","phone","cpf","cnpj","account","balance","creditcard","card","bank","transaction","amount"].some(n=>e.toLowerCase().includes(n.toLowerCase()))}createLogEntry(e,r,n){let{sanitizedMessage:o,sanitizedContext:i}=this.sanitizeData(r,n);return{context:i,level:e,message:o,sanitized:!0,timestamp:new Date().toISOString()}}writeLog(e){if(this.isDevelopment)switch(e.level){case 0:break;case 1:break;case 2:break;case 3:case 4:break;case 5:break}else this.isProduction&&this.addToBuffer(e)}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>=this.maxBufferSize&&this.flushBuffer()}flushBuffer(){if(this.logBuffer.length===0)return;let e=[...this.logBuffer];this.logBuffer=[];let r=e.filter(n=>n.level>=3);r.length>0&&r.forEach(n=>{})}log(e,r,n){if(!this.isDevelopment&&e===0)return;let o=this.createLogEntry(e,r,n);this.writeLog(o)}debug(e,r){this.log(0,e,r)}info(e,r){this.log(1,e,r)}warn(e,r){this.log(2,e,r)}error(e,r){this.log(3,e,r)}security(e,r){this.log(4,e,r)}audit(e,r){this.log(5,e,r)}voiceCommand(e,r,n){this.info("Voice command processed",{...n,command:e.substring(0,50),confidence:r})}authEvent(e,r,n){this.audit("Authentication event",{...n,event:e,userId:r?`${r.substring(0,8)}...`:void 0})}userAction(e,r,n){this.info("User action",{action:e,component:r,...n})}performance(e,r,n){this.info("Performance metric",{...n,operation:e,duration:r})}getBufferStats(){return{lastFlush:new Date,maxSize:this.maxBufferSize,size:this.logBuffer.length}}forceFlush(){this.flushBuffer()}clear(){this.logBuffer=[],this.currentUserId=void 0}},L=new Hh;var EI=new Ce;EI.get("/",async t=>{try{return L.info("Starting calendar channel renewal check"),t.json({success:!0,message:"Calendar channel renewal completed",timestamp:new Date().toISOString(),channelsRenewed:0})}catch(e){return L.error("Calendar channel renewal failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Calendar channel renewal failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var II=EI;var kI=new Ce;kI.get("/",async t=>{try{return L.info("Starting sync queue cleanup"),t.json({success:!0,message:"Sync queue cleanup completed",timestamp:new Date().toISOString(),itemsDeleted:0})}catch(e){return L.error("Sync queue cleanup failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue cleanup failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var PI=kI;var AI=new Ce;AI.get("/",async t=>{try{return L.info("Starting sync queue processing"),t.json({success:!0,message:"Sync queue processing completed",timestamp:new Date().toISOString(),itemsProcessed:0})}catch(e){return L.error("Sync queue processing failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue processing failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var CI=AI;var sc=new Ce;sc.route("/calendar-channel-renewal",II);sc.route("/sync-queue-processor",CI);sc.route("/cleanup-sync-queue",PI);sc.get("/health",t=>t.json({status:"healthy",service:"cron-jobs",timestamp:new Date().toISOString(),jobs:[{name:"calendar-channel-renewal",schedule:"0 0 * * *",description:"Renew expiring Google Calendar webhook channels"},{name:"sync-queue-processor",schedule:"*/5 * * * *",description:"Process pending Google Calendar sync queue items"},{name:"cleanup-sync-queue",schedule:"0 2 * * *",description:"Clean up old completed/failed sync queue items"}]}));var OI=sc;var $I=["https://aegiswallet.com","https://www.aegiswallet.com","https://app.aegiswallet.com","http://localhost:3000","http://localhost:5173","http://localhost:8080","http://localhost:8081","http://localhost:8082","https://localhost:3000","https://localhost:5173","https://localhost:8080","https://localhost:8081","https://localhost:8082"],RI=s(async(t,e)=>{let r=t.req.header("Origin");if($I.includes(r||"")||r?.startsWith("http://localhost:")&&!1||r?.startsWith("https://localhost:")&&!1?t.header("Access-Control-Allow-Origin",r||"*"):t.header("Access-Control-Allow-Origin",$I[0]),t.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.header("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, X-Client-ID"),t.header("Access-Control-Allow-Credentials","true"),t.header("Access-Control-Max-Age","86400"),t.header("Vary","Origin"),t.req.method==="OPTIONS")return t.newResponse(null,204);await e()},"corsMiddleware");var j=Symbol.for("drizzle:entityKind"),Rae=Symbol.for("drizzle:hasOwnEntityKind");function X(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,j))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(j in r&&r[j]===e[j])return!0;r=Object.getPrototypeOf(r)}return!1}s(X,"is");var xt=class{static{s(this,"Column")}constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[j]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Td=class{static{s(this,"ColumnBuilder")}static[j]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var bn=Symbol.for("drizzle:Name");var Ed=class{static{s(this,"ForeignKeyBuilder")}static[j]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:n,columns:o,foreignColumns:i}=e();return{name:n,columns:o,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Gh(e,this)}},Gh=class{static{s(this,"ForeignKey")}constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[j]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(u=>u.name),i=n.map(u=>u.name),a=[this.table[bn],...o,n[0].table[bn],...i];return e??`${a.join("_")}_fk`}};function Id(t,...e){return t(...e)}s(Id,"iife");function Kh(t,e){return`${t[bn]}_${e.join("_")}_unique`}s(Kh,"uniqueKeyName");var Zh=class{static{s(this,"UniqueConstraintBuilder")}constructor(e,r){this.name=r,this.columns=e}static[j]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Jh(e,this.columns,this.nullsNotDistinctConfig,this.name)}},NI=class{static{s(this,"UniqueOnConstraintBuilder")}static[j]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new Zh(e,this.name)}},Jh=class{static{s(this,"UniqueConstraint")}constructor(e,r,n,o){this.table=e,this.columns=r,this.name=o??Kh(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}static[j]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function DI(t,e,r){for(let n=e;n<t.length;n++){let o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}s(DI,"parsePgArrayValue");function jI(t,e=0){let r=[],n=e,o=!1;for(;n<t.length;){let i=t[n];if(i===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,i==="\\"){n+=2;continue}if(i==='"'){let[l,d]=DI(t,n+1,!0);r.push(l),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){let[l,d]=jI(t,n+1);r.push(l),n=d;continue}let[a,u]=DI(t,n,!1);r.push(a),n=u}return[r,n]}s(jI,"parsePgNestedArray");function MI(t){let[e]=jI(t,1);return e}s(MI,"parsePgArray");function Wh(t){return`{${t.map(e=>Array.isArray(e)?Wh(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}s(Wh,"makePgArray");var Se=class extends Td{static{s(this,"PgColumnBuilder")}foreignKeyConfigs=[];static[j]="PgColumnBuilder";array(e){return new Xh(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>Id((i,a)=>{let u=new Ed(()=>{let l=i();return{columns:[e],foreignColumns:[l]}});return a.onUpdate&&u.onUpdate(a.onUpdate),a.onDelete&&u.onDelete(a.onDelete),u.build(r)},n,o))}buildExtraConfigColumn(e){return new Qh(e,this.config)}},me=class extends xt{static{s(this,"PgColumn")}constructor(e,r){r.uniqueName||(r.uniqueName=Kh(e,[r.name])),super(e,r),this.table=e}static[j]="PgColumn"},Qh=class extends me{static{s(this,"ExtraConfigColumn")}static[j]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},ms=class{static{s(this,"IndexedColumn")}static[j]="IndexedColumn";constructor(e,r,n,o){this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=o}name;keyAsName;type;indexConfig},Xh=class extends Se{static{s(this,"PgArrayBuilder")}static[j]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){let r=this.config.baseBuilder.build(e);return new Yh(e,this.config,r)}},Yh=class t extends me{static{s(this,"PgArray")}constructor(e,r,n,o){super(e,r),this.baseColumn=n,this.range=o,this.size=r.size}size;static[j]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=MI(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let n=e.map(o=>o===null?null:X(this.baseColumn,t)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?n:Wh(n)}};var eg=class extends Se{static{s(this,"PgEnumObjectColumnBuilder")}static[j]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new tg(e,this.config)}},tg=class extends me{static{s(this,"PgEnumObjectColumn")}static[j]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},kd=Symbol.for("drizzle:isPgEnum");function UI(t){return!!t&&typeof t=="function"&&kd in t&&t[kd]===!0}s(UI,"isPgEnum");var rg=class extends Se{static{s(this,"PgEnumColumnBuilder")}static[j]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new ng(e,this.config)}},ng=class extends me{static{s(this,"PgEnumColumn")}static[j]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};function tr(t,e){return Array.isArray(e)?TF(t,[...e],void 0):EF(t,e,void 0)}s(tr,"pgEnum");function TF(t,e,r){let n=Object.assign(o=>new rg(o??"",n),{enumName:t,enumValues:e,schema:r,[kd]:!0});return n}s(TF,"pgEnumWithSchema");function EF(t,e,r){let n=Object.assign(o=>new eg(o??"",n),{enumName:t,enumValues:Object.values(e),schema:r,[kd]:!0});return n}s(EF,"pgEnumObjectWithSchema");var Gt=class{static{s(this,"Subquery")}static[j]="Subquery";constructor(e,r,n,o=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o,usedTables:i}}},fs=class extends Gt{static{s(this,"WithSubquery")}static[j]="WithSubquery"};var zI="0.44.7";var og,ig,sr={startActiveSpan(t,e){return og?(ig||(ig=og.trace.getTracer("drizzle-orm",zI)),Id((r,n)=>n.startActiveSpan(t,o=>{try{return e(o)}catch(i){throw o.setStatus({code:r.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{o.end()}}),og,ig)):e()}};var $t=Symbol.for("drizzle:ViewBaseConfig");var Oi=Symbol.for("drizzle:Schema"),Pd=Symbol.for("drizzle:Columns"),LI=Symbol.for("drizzle:ExtraConfigColumns"),sg=Symbol.for("drizzle:OriginalName"),ag=Symbol.for("drizzle:BaseName"),ac=Symbol.for("drizzle:IsAlias"),qI=Symbol.for("drizzle:ExtraConfigBuilder"),IF=Symbol.for("drizzle:IsDrizzleTable"),he=class{static{s(this,"Table")}static[j]="Table";static Symbol={Name:bn,Schema:Oi,OriginalName:sg,Columns:Pd,ExtraConfigColumns:LI,BaseName:ag,IsAlias:ac,ExtraConfigBuilder:qI};[bn];[sg];[Oi];[Pd];[LI];[ag];[ac]=!1;[IF]=!0;[qI]=void 0;constructor(e,r,n){this[bn]=this[sg]=e,this[Oi]=r,this[ag]=n}};function qr(t){return t[bn]}s(qr,"getTableName");function $i(t){return`${t[Oi]??"public"}.${t[bn]}`}s($i,"getTableUniqueName");var FI=class{static{s(this,"FakePrimitiveParam")}static[j]="FakePrimitiveParam"};function cg(t){return t!=null&&typeof t.getSQL=="function"}s(cg,"isSQLWrapper");function kF(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}s(kF,"mergeQueries");var ar=class{static{s(this,"StringChunk")}static[j]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new we([this])}},we=class t{static{s(this,"SQL")}constructor(e){this.queryChunks=e;for(let r of e)if(X(r,he)){let n=r[he.Symbol.Schema];this.usedTables.push(n===void 0?r[he.Symbol.Name]:n+"."+r[he.Symbol.Name])}}static[j]="SQL";decoder=VI;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return sr.startActiveSpan("drizzle.buildSQL",r=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){let n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:i,escapeParam:a,prepareTyping:u,inlineParams:l,paramStartIndex:d}=n;return kF(e.map(p=>{if(X(p,ar))return{sql:p.value.join(""),params:[]};if(X(p,cc))return{sql:i(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){let f=[new ar("(")];for(let[h,y]of p.entries())f.push(y),h<p.length-1&&f.push(new ar(", "));return f.push(new ar(")")),this.buildQueryFromSourceParams(f,n)}if(X(p,t))return this.buildQueryFromSourceParams(p.queryChunks,{...n,inlineParams:l||p.shouldInlineParams});if(X(p,he)){let f=p[he.Symbol.Schema],h=p[he.Symbol.Name];return{sql:f===void 0||p[ac]?i(h):i(f)+"."+i(h),params:[]}}if(X(p,xt)){let f=o.getColumnCasing(p);if(r.invokeSource==="indexes")return{sql:i(f),params:[]};let h=p.table[he.Symbol.Schema];return{sql:p.table[ac]||h===void 0?i(p.table[he.Symbol.Name])+"."+i(f):i(h)+"."+i(p.table[he.Symbol.Name])+"."+i(f),params:[]}}if(X(p,Cr)){let f=p[$t].schema,h=p[$t].name;return{sql:f===void 0||p[$t].isAlias?i(h):i(f)+"."+i(h),params:[]}}if(X(p,Fr)){if(X(p.value,fo))return{sql:a(d.value++,p),params:[p],typings:["none"]};let f=p.value===null?null:p.encoder.mapToDriverValue(p.value);if(X(f,t))return this.buildQueryFromSourceParams([f],n);if(l)return{sql:this.mapInlineParam(f,n),params:[]};let h=["none"];return u&&(h=[u(p.encoder)]),{sql:a(d.value++,f),params:[f],typings:h}}return X(p,fo)?{sql:a(d.value++,p),params:[p],typings:["none"]}:X(p,t.Aliased)&&p.fieldAlias!==void 0?{sql:i(p.fieldAlias),params:[]}:X(p,Gt)?p._.isWith?{sql:i(p._.alias),params:[]}:this.buildQueryFromSourceParams([new ar("("),p._.sql,new ar(") "),new cc(p._.alias)],n):UI(p)?p.schema?{sql:i(p.schema)+"."+i(p.enumName),params:[]}:{sql:i(p.enumName),params:[]}:cg(p)?p.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([p.getSQL()],n):this.buildQueryFromSourceParams([new ar("("),p.getSQL(),new ar(")")],n):l?{sql:this.mapInlineParam(p,n),params:[]}:{sql:a(d.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},cc=class{static{s(this,"Name")}constructor(e){this.value=e}static[j]="Name";brand;getSQL(){return new we([this])}};function BI(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}s(BI,"isDriverValueEncoder");var VI={mapFromDriverValue:s(t=>t,"mapFromDriverValue")},HI={mapToDriverValue:s(t=>t,"mapToDriverValue")},Rce={...VI,...HI},Fr=class{static{s(this,"Param")}constructor(e,r=HI){this.value=e,this.encoder=r}static[j]="Param";brand;getSQL(){return new we([this])}};function M(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new ar(t[0]));for(let[n,o]of e.entries())r.push(o,new ar(t[n+1]));return new we(r)}s(M,"sql");(t=>{function e(){return new we([])}s(e,"empty"),t.empty=e;function r(l){return new we(l)}s(r,"fromList"),t.fromList=r;function n(l){return new we([new ar(l)])}s(n,"raw"),t.raw=n;function o(l,d){let p=[];for(let[f,h]of l.entries())f>0&&d!==void 0&&p.push(d),p.push(h);return new we(p)}s(o,"join"),t.join=o;function i(l){return new cc(l)}s(i,"identifier"),t.identifier=i;function a(l){return new fo(l)}s(a,"placeholder2"),t.placeholder=a;function u(l,d){return new Fr(l,d)}s(u,"param2"),t.param=u})(M||(M={}));(t=>{class e{static{s(this,"Aliased")}constructor(n,o){this.sql=n,this.fieldAlias=o}static[j]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(we||(we={}));var fo=class{static{s(this,"Placeholder")}constructor(e){this.name=e}static[j]="Placeholder";getSQL(){return new we([this])}};function Bo(t,e){return t.map(r=>{if(X(r,fo)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(X(r,Fr)&&X(r.value,fo)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}s(Bo,"fillPlaceholders");var PF=Symbol.for("drizzle:IsDrizzleView"),Cr=class{static{s(this,"View")}static[j]="View";[$t];[PF]=!0;constructor({name:e,schema:r,selectedFields:n,query:o}){this[$t]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new we([this])}};xt.prototype.getSQL=function(){return new we([this])};he.prototype.getSQL=function(){return new we([this])};Gt.prototype.getSQL=function(){return new we([this])};var Ri=class{static{s(this,"ColumnAliasProxyHandler")}constructor(e){this.table=e}static[j]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},hs=class{static{s(this,"TableAliasProxyHandler")}constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[j]="TableAliasProxyHandler";get(e,r){if(r===he.Symbol.IsAlias)return!0;if(r===he.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===he.Symbol.OriginalName)return this.alias;if(r===$t)return{...e[$t],name:this.alias,isAlias:!0};if(r===he.Symbol.Columns){let o=e[he.Symbol.Columns];if(!o)return o;let i={};return Object.keys(o).map(a=>{i[a]=new Proxy(o[a],new Ri(new Proxy(e,this)))}),i}let n=e[r];return X(n,xt)?new Proxy(n,new Ri(new Proxy(e,this))):n}},GI=class{static{s(this,"RelationTableAliasProxyHandler")}constructor(e){this.alias=e}static[j]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?uc(e.sourceTable,this.alias):e[r]}};function uc(t,e){return new Proxy(t,new hs(e,!1))}s(uc,"aliasedTable");function Un(t,e){return new Proxy(t,new Ri(new Proxy(t.table,new hs(e,!1))))}s(Un,"aliasedTableColumn");function ug(t,e){return new we.Aliased(lc(t.sql,e),t.fieldAlias)}s(ug,"mapColumnsInAliasedSQLToAlias");function lc(t,e){return M.join(t.queryChunks.map(r=>X(r,xt)?Un(r,e):X(r,we)?lc(r,e):X(r,we.Aliased)?ug(r,e):r))}s(lc,"mapColumnsInSQLToAlias");var dc=class extends Error{static{s(this,"DrizzleError")}static[j]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},ho=class t extends Error{static{s(this,"DrizzleQueryError")}constructor(e,r,n){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=n,Error.captureStackTrace(this,t),n&&(this.cause=n)}},Ad=class extends dc{static{s(this,"TransactionRollbackError")}static[j]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var lg=class{static{s(this,"ConsoleLogWriter")}static[j]="ConsoleLogWriter";write(e){console.log(e)}},gs=class{static{s(this,"DefaultLogger")}static[j]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new lg}logQuery(e,r){let n=r.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),o=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${o}`)}},ys=class{static{s(this,"NoopLogger")}static[j]="NoopLogger";logQuery(){}};var Er=class{static{s(this,"QueryPromise")}static[j]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};function Cd(t,e,r){let n={},o=t.reduce((i,{path:a,field:u},l)=>{let d;X(u,xt)?d=u:X(u,we)?d=u.decoder:d=u.sql.decoder;let p=i;for(let[f,h]of a.entries())if(f<a.length-1)h in p||(p[h]={}),p=p[h];else{let y=e[l],g=p[h]=y===null?null:d.mapFromDriverValue(y);if(r&&X(u,xt)&&a.length===2){let m=a[0];m in n?typeof n[m]=="string"&&n[m]!==qr(u.table)&&(n[m]=!1):n[m]=g===null?qr(u.table):!1}}return i},{});if(r&&Object.keys(n).length>0)for(let[i,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(o[i]=null);return o}s(Cd,"mapResultRow");function dn(t,e){return Object.entries(t).reduce((r,[n,o])=>{if(typeof n!="string")return r;let i=e?[...e,n]:[n];return X(o,xt)||X(o,we)||X(o,we.Aliased)?r.push({path:i,field:o}):X(o,he)?r.push(...dn(o[he.Symbol.Columns],i)):r.push(...dn(o,i)),r},[])}s(dn,"orderSelectedFields");function pc(t,e){let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let[o,i]of r.entries())if(i!==n[o])return!1;return!0}s(pc,"haveSameKeys");function Od(t,e){let r=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,o])=>X(o,we)||X(o,xt)?[n,o]:[n,new Fr(o,t[he.Symbol.Columns][n])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}s(Od,"mapUpdateSet");function ZI(t,e){for(let r of e)for(let n of Object.getOwnPropertyNames(r.prototype))n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))}s(ZI,"applyMixins");function JI(t){return t[he.Symbol.Columns]}s(JI,"getTableColumns");function go(t){return X(t,Gt)?t._.alias:X(t,Cr)?t[$t].name:X(t,we)?void 0:t[he.Symbol.IsAlias]?t[he.Symbol.Name]:t[he.Symbol.BaseName]}s(go,"getTableLikeName");function ct(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}s(ct,"getColumnNameAndConfig");function $d(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}s($d,"isConfig");var oue=typeof TextDecoder>"u"?null:new TextDecoder;var yo=class extends Se{static{s(this,"PgIntColumnBaseBuilder")}static[j]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var dg=class extends yo{static{s(this,"PgBigInt53Builder")}static[j]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new pg(e,this.config)}},pg=class extends me{static{s(this,"PgBigInt53")}static[j]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},mg=class extends yo{static{s(this,"PgBigInt64Builder")}static[j]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new fg(e,this.config)}},fg=class extends me{static{s(this,"PgBigInt64")}static[j]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function KI(t,e){let{name:r,config:n}=ct(t,e);return n.mode==="number"?new dg(r):new mg(r)}s(KI,"bigint");var hg=class extends Se{static{s(this,"PgBigSerial53Builder")}static[j]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new gg(e,this.config)}},gg=class extends me{static{s(this,"PgBigSerial53")}static[j]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},yg=class extends Se{static{s(this,"PgBigSerial64Builder")}static[j]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new vg(e,this.config)}},vg=class extends me{static{s(this,"PgBigSerial64")}static[j]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function WI(t,e){let{name:r,config:n}=ct(t,e);return n.mode==="number"?new hg(r):new yg(r)}s(WI,"bigserial");var _g=class extends Se{static{s(this,"PgBooleanBuilder")}static[j]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new bg(e,this.config)}},bg=class extends me{static{s(this,"PgBoolean")}static[j]="PgBoolean";getSQLType(){return"boolean"}};function ve(t){return new _g(t??"")}s(ve,"boolean");var wg=class extends Se{static{s(this,"PgCharBuilder")}static[j]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new xg(e,this.config)}},xg=class extends me{static{s(this,"PgChar")}static[j]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function QI(t,e={}){let{name:r,config:n}=ct(t,e);return new wg(r,n)}s(QI,"char");var Sg=class extends Se{static{s(this,"PgCidrBuilder")}static[j]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Tg(e,this.config)}},Tg=class extends me{static{s(this,"PgCidr")}static[j]="PgCidr";getSQLType(){return"cidr"}};function XI(t){return new Sg(t??"")}s(XI,"cidr");var Eg=class extends Se{static{s(this,"PgCustomColumnBuilder")}static[j]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Ig(e,this.config)}},Ig=class extends me{static{s(this,"PgCustomColumn")}static[j]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function YI(t){return(e,r)=>{let{name:n,config:o}=ct(e,r);return new Eg(n,o,t)}}s(YI,"customType");var zn=class extends Se{static{s(this,"PgDateColumnBaseBuilder")}static[j]="PgDateColumnBaseBuilder";defaultNow(){return this.default(M`now()`)}};var kg=class extends zn{static{s(this,"PgDateBuilder")}static[j]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new mc(e,this.config)}},mc=class extends me{static{s(this,"PgDate")}static[j]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Pg=class extends zn{static{s(this,"PgDateStringBuilder")}static[j]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new fc(e,this.config)}},fc=class extends me{static{s(this,"PgDateString")}static[j]="PgDateString";getSQLType(){return"date"}};function Ir(t,e){let{name:r,config:n}=ct(t,e);return n?.mode==="date"?new kg(r):new Pg(r)}s(Ir,"date");var Ag=class extends Se{static{s(this,"PgDoublePrecisionBuilder")}static[j]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Cg(e,this.config)}},Cg=class extends me{static{s(this,"PgDoublePrecision")}static[j]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function ek(t){return new Ag(t??"")}s(ek,"doublePrecision");var Og=class extends Se{static{s(this,"PgInetBuilder")}static[j]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new $g(e,this.config)}},$g=class extends me{static{s(this,"PgInet")}static[j]="PgInet";getSQLType(){return"inet"}};function tn(t){return new Og(t??"")}s(tn,"inet");var Rg=class extends yo{static{s(this,"PgIntegerBuilder")}static[j]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Ng(e,this.config)}},Ng=class extends me{static{s(this,"PgInteger")}static[j]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function _t(t){return new Rg(t??"")}s(_t,"integer");var Dg=class extends Se{static{s(this,"PgIntervalBuilder")}static[j]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new jg(e,this.config)}},jg=class extends me{static{s(this,"PgInterval")}static[j]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};function tk(t,e={}){let{name:r,config:n}=ct(t,e);return new Dg(r,n)}s(tk,"interval");var Mg=class extends Se{static{s(this,"PgJsonBuilder")}static[j]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new hc(e,this.config)}},hc=class extends me{static{s(this,"PgJson")}static[j]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function rk(t){return new Mg(t??"")}s(rk,"json");var Ug=class extends Se{static{s(this,"PgJsonbBuilder")}static[j]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new gc(e,this.config)}},gc=class extends me{static{s(this,"PgJsonb")}static[j]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function nt(t){return new Ug(t??"")}s(nt,"jsonb");var zg=class extends Se{static{s(this,"PgLineBuilder")}static[j]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Lg(e,this.config)}},Lg=class extends me{static{s(this,"PgLineTuple")}static[j]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},qg=class extends Se{static{s(this,"PgLineABCBuilder")}static[j]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Fg(e,this.config)}},Fg=class extends me{static{s(this,"PgLineABC")}static[j]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function nk(t,e){let{name:r,config:n}=ct(t,e);return!n?.mode||n.mode==="tuple"?new zg(r):new qg(r)}s(nk,"line");var Bg=class extends Se{static{s(this,"PgMacaddrBuilder")}static[j]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Vg(e,this.config)}},Vg=class extends me{static{s(this,"PgMacaddr")}static[j]="PgMacaddr";getSQLType(){return"macaddr"}};function ok(t){return new Bg(t??"")}s(ok,"macaddr");var Hg=class extends Se{static{s(this,"PgMacaddr8Builder")}static[j]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Gg(e,this.config)}},Gg=class extends me{static{s(this,"PgMacaddr8")}static[j]="PgMacaddr8";getSQLType(){return"macaddr8"}};function ik(t){return new Hg(t??"")}s(ik,"macaddr8");var Zg=class extends Se{static{s(this,"PgNumericBuilder")}static[j]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new yc(e,this.config)}},yc=class extends me{static{s(this,"PgNumeric")}static[j]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},Jg=class extends Se{static{s(this,"PgNumericNumberBuilder")}static[j]="PgNumericNumberBuilder";constructor(e,r,n){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=n}build(e){return new Kg(e,this.config)}},Kg=class extends me{static{s(this,"PgNumericNumber")}static[j]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},Wg=class extends Se{static{s(this,"PgNumericBigIntBuilder")}static[j]="PgNumericBigIntBuilder";constructor(e,r,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=n}build(e){return new Qg(e,this.config)}},Qg=class extends me{static{s(this,"PgNumericBigInt")}static[j]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function Xg(t,e){let{name:r,config:n}=ct(t,e),o=n?.mode;return o==="number"?new Jg(r,n?.precision,n?.scale):o==="bigint"?new Wg(r,n?.precision,n?.scale):new Zg(r,n?.precision,n?.scale)}s(Xg,"numeric");var ot=Xg;var Yg=class extends Se{static{s(this,"PgPointTupleBuilder")}static[j]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ey(e,this.config)}},ey=class extends me{static{s(this,"PgPointTuple")}static[j]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ty=class extends Se{static{s(this,"PgPointObjectBuilder")}static[j]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new ry(e,this.config)}},ry=class extends me{static{s(this,"PgPointObject")}static[j]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function sk(t,e){let{name:r,config:n}=ct(t,e);return!n?.mode||n.mode==="tuple"?new Yg(r):new ty(r)}s(sk,"point");function AF(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}s(AF,"hexToBytes");function ak(t,e){let r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}s(ak,"bytesToFloat64");function ny(t){let e=AF(t),r=0,n=e[r];r+=1;let o=new DataView(e.buffer),i=o.getUint32(r,n===1);r+=4;let a;if(i&536870912&&(a=o.getUint32(r,n===1),r+=4),(i&65535)===1){let u=ak(e,r);r+=8;let l=ak(e,r);return r+=8,[u,l]}throw new Error("Unsupported geometry type")}s(ny,"parseEWKB");var oy=class extends Se{static{s(this,"PgGeometryBuilder")}static[j]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new iy(e,this.config)}},iy=class extends me{static{s(this,"PgGeometry")}static[j]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ny(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},sy=class extends Se{static{s(this,"PgGeometryObjectBuilder")}static[j]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ay(e,this.config)}},ay=class extends me{static{s(this,"PgGeometryObject")}static[j]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=ny(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function ck(t,e){let{name:r,config:n}=ct(t,e);return!n?.mode||n.mode==="tuple"?new oy(r):new sy(r)}s(ck,"geometry");var cy=class extends Se{static{s(this,"PgRealBuilder")}static[j]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new uy(e,this.config)}},uy=class extends me{static{s(this,"PgReal")}static[j]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=s(e=>typeof e=="string"?Number.parseFloat(e):e,"mapFromDriverValue")};function uk(t){return new cy(t??"")}s(uk,"real");var ly=class extends Se{static{s(this,"PgSerialBuilder")}static[j]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new dy(e,this.config)}},dy=class extends me{static{s(this,"PgSerial")}static[j]="PgSerial";getSQLType(){return"serial"}};function lk(t){return new ly(t??"")}s(lk,"serial");var py=class extends yo{static{s(this,"PgSmallIntBuilder")}static[j]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new my(e,this.config)}},my=class extends me{static{s(this,"PgSmallInt")}static[j]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=s(e=>typeof e=="string"?Number(e):e,"mapFromDriverValue")};function dk(t){return new py(t??"")}s(dk,"smallint");var fy=class extends Se{static{s(this,"PgSmallSerialBuilder")}static[j]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new hy(e,this.config)}},hy=class extends me{static{s(this,"PgSmallSerial")}static[j]="PgSmallSerial";getSQLType(){return"smallserial"}};function pk(t){return new fy(t??"")}s(pk,"smallserial");var gy=class extends Se{static{s(this,"PgTextBuilder")}static[j]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new yy(e,this.config)}},yy=class extends me{static{s(this,"PgText")}static[j]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function A(t,e={}){let{name:r,config:n}=ct(t,e);return new gy(r,n)}s(A,"text");var vy=class extends zn{static{s(this,"PgTimeBuilder")}constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[j]="PgTimeBuilder";build(e){return new vc(e,this.config)}},vc=class extends me{static{s(this,"PgTime")}static[j]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function mk(t,e={}){let{name:r,config:n}=ct(t,e);return new vy(r,n.withTimezone??!1,n.precision)}s(mk,"time");var _y=class extends zn{static{s(this,"PgTimestampBuilder")}static[j]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new _c(e,this.config)}},_c=class extends me{static{s(this,"PgTimestamp")}static[j]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=s(e=>new Date(this.withTimezone?e:e+"+0000"),"mapFromDriverValue");mapToDriverValue=s(e=>e.toISOString(),"mapToDriverValue")},by=class extends zn{static{s(this,"PgTimestampStringBuilder")}static[j]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new bc(e,this.config)}},bc=class extends me{static{s(this,"PgTimestampString")}static[j]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Z(t,e={}){let{name:r,config:n}=ct(t,e);return n?.mode==="string"?new by(r,n.withTimezone??!1,n.precision):new _y(r,n?.withTimezone??!1,n?.precision)}s(Z,"timestamp");var wy=class extends Se{static{s(this,"PgUUIDBuilder")}static[j]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(M`gen_random_uuid()`)}build(e){return new wc(e,this.config)}},wc=class extends me{static{s(this,"PgUUID")}static[j]="PgUUID";getSQLType(){return"uuid"}};function vs(t){return new wy(t??"")}s(vs,"uuid");var xy=class extends Se{static{s(this,"PgVarcharBuilder")}static[j]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Sy(e,this.config)}},Sy=class extends me{static{s(this,"PgVarchar")}static[j]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function fk(t,e={}){let{name:r,config:n}=ct(t,e);return new xy(r,n)}s(fk,"varchar");var Ty=class extends Se{static{s(this,"PgBinaryVectorBuilder")}static[j]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Ey(e,this.config)}},Ey=class extends me{static{s(this,"PgBinaryVector")}static[j]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function hk(t,e){let{name:r,config:n}=ct(t,e);return new Ty(r,n)}s(hk,"bit");var Iy=class extends Se{static{s(this,"PgHalfVectorBuilder")}static[j]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new ky(e,this.config)}},ky=class extends me{static{s(this,"PgHalfVector")}static[j]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function gk(t,e){let{name:r,config:n}=ct(t,e);return new Iy(r,n)}s(gk,"halfvec");var Py=class extends Se{static{s(this,"PgSparseVectorBuilder")}static[j]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Ay(e,this.config)}},Ay=class extends me{static{s(this,"PgSparseVector")}static[j]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function yk(t,e){let{name:r,config:n}=ct(t,e);return new Py(r,n)}s(yk,"sparsevec");var Cy=class extends Se{static{s(this,"PgVectorBuilder")}static[j]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Oy(e,this.config)}},Oy=class extends me{static{s(this,"PgVector")}static[j]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function vk(t,e){let{name:r,config:n}=ct(t,e);return new Cy(r,n)}s(vk,"vector");function _k(){return{bigint:KI,bigserial:WI,boolean:ve,char:QI,cidr:XI,customType:YI,date:Ir,doublePrecision:ek,inet:tn,integer:_t,interval:tk,json:rk,jsonb:nt,line:nk,macaddr:ok,macaddr8:ik,numeric:Xg,point:sk,geometry:ck,real:uk,serial:lk,smallint:dk,smallserial:pk,text:A,time:mk,timestamp:Z,uuid:vs,varchar:fk,bit:hk,halfvec:gk,sparsevec:yk,vector:vk}}s(_k,"getPgColumnBuilders");var $y=Symbol.for("drizzle:PgInlineForeignKeys"),bk=Symbol.for("drizzle:EnableRLS"),cr=class extends he{static{s(this,"PgTable")}static[j]="PgTable";static Symbol=Object.assign({},he.Symbol,{InlineForeignKeys:$y,EnableRLS:bk});[$y]=[];[bk]=!1;[he.Symbol.ExtraConfigBuilder]=void 0;[he.Symbol.ExtraConfigColumns]={}};function CF(t,e,r,n,o=t){let i=new cr(t,n,o),a=typeof e=="function"?e(_k()):e,u=Object.fromEntries(Object.entries(a).map(([p,f])=>{let h=f;h.setName(p);let y=h.build(i);return i[$y].push(...h.buildForeignKeys(y,i)),[p,y]})),l=Object.fromEntries(Object.entries(a).map(([p,f])=>{let h=f;h.setName(p);let y=h.buildExtraConfigColumn(i);return[p,y]})),d=Object.assign(i,u);return d[he.Symbol.Columns]=u,d[he.Symbol.ExtraConfigColumns]=l,r&&(d[cr.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:s(()=>(d[cr.Symbol.EnableRLS]=!0,d),"enableRLS")})}s(CF,"pgTableWithSchema");var Pe=s((t,e,r)=>CF(t,e,r,void 0),"pgTable");var Rd=class{static{s(this,"PrimaryKeyBuilder")}static[j]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new Ry(e,this.columns,this.name)}},Ry=class{static{s(this,"PrimaryKey")}constructor(e,r,n){this.table=e,this.columns=r,this.name=n}static[j]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[cr.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function Br(t,e){return BI(e)&&!cg(t)&&!X(t,Fr)&&!X(t,fo)&&!X(t,xt)&&!X(t,he)&&!X(t,Cr)?new Fr(t,e):t}s(Br,"bindIfParam");var H=s((t,e)=>M`${t} = ${Br(e,t)}`,"eq"),wk=s((t,e)=>M`${t} <> ${Br(e,t)}`,"ne");function Ee(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new we(e):new we([new ar("("),M.join(e,new ar(" and ")),new ar(")")])}s(Ee,"and");function Ni(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new we(e):new we([new ar("("),M.join(e,new ar(" or ")),new ar(")")])}s(Ni,"or");function xk(t){return M`not ${t}`}s(xk,"not");var Sk=s((t,e)=>M`${t} > ${Br(e,t)}`,"gt"),ur=s((t,e)=>M`${t} >= ${Br(e,t)}`,"gte"),Tk=s((t,e)=>M`${t} < ${Br(e,t)}`,"lt"),rr=s((t,e)=>M`${t} <= ${Br(e,t)}`,"lte");function _s(t,e){return Array.isArray(e)?e.length===0?M`false`:M`${t} in ${e.map(r=>Br(r,t))}`:M`${t} in ${Br(e,t)}`}s(_s,"inArray");function Ek(t,e){return Array.isArray(e)?e.length===0?M`true`:M`${t} not in ${e.map(r=>Br(r,t))}`:M`${t} not in ${Br(e,t)}`}s(Ek,"notInArray");function Nd(t){return M`${t} is null`}s(Nd,"isNull");function Ik(t){return M`${t} is not null`}s(Ik,"isNotNull");function kk(t){return M`exists ${t}`}s(kk,"exists");function Pk(t){return M`not exists ${t}`}s(Pk,"notExists");function Ak(t,e,r){return M`${t} between ${Br(e,t)} and ${Br(r,t)}`}s(Ak,"between");function Ck(t,e,r){return M`${t} not between ${Br(e,t)} and ${Br(r,t)}`}s(Ck,"notBetween");function Ok(t,e){return M`${t} like ${e}`}s(Ok,"like");function $k(t,e){return M`${t} not like ${e}`}s($k,"notLike");function kr(t,e){return M`${t} ilike ${e}`}s(kr,"ilike");function Rk(t,e){return M`${t} not ilike ${e}`}s(Rk,"notIlike");function Vo(t){return M`${t} asc`}s(Vo,"asc");function Rt(t){return M`${t} desc`}s(Rt,"desc");var Dd=class{static{s(this,"Relation")}constructor(e,r,n){this.sourceTable=e,this.referencedTable=r,this.relationName=n,this.referencedTableName=r[he.Symbol.Name]}static[j]="Relation";referencedTableName;fieldName},jd=class{static{s(this,"Relations")}constructor(e,r){this.table=e,this.config=r}static[j]="Relations"},Ho=class t extends Dd{static{s(this,"One")}constructor(e,r,n,o){super(e,r,n?.relationName),this.config=n,this.isNullable=o}static[j]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},xc=class t extends Dd{static{s(this,"Many")}constructor(e,r,n){super(e,r,n?.relationName),this.config=n}static[j]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function Nk(){return{and:Ee,between:Ak,eq:H,exists:kk,gt:Sk,gte:ur,ilike:kr,inArray:_s,isNull:Nd,isNotNull:Ik,like:Ok,lt:Tk,lte:rr,ne:wk,not:xk,notBetween:Ck,notExists:Pk,notLike:$k,notIlike:Rk,notInArray:Ek,or:Ni,sql:M}}s(Nk,"getOperators");function Dk(){return{sql:M,asc:Vo,desc:Rt}}s(Dk,"getOrderByOperators");function Ud(t,e){Object.keys(t).length===1&&"default"in t&&!X(t.default,he)&&(t=t.default);let r={},n={},o={};for(let[i,a]of Object.entries(t))if(X(a,he)){let u=$i(a),l=n[u];r[u]=i,o[i]={tsName:i,dbName:a[he.Symbol.Name],schema:a[he.Symbol.Schema],columns:a[he.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let p of Object.values(a[he.Symbol.Columns]))p.primary&&o[i].primaryKey.push(p);let d=a[he.Symbol.ExtraConfigBuilder]?.(a[he.Symbol.ExtraConfigColumns]);if(d)for(let p of Object.values(d))X(p,Rd)&&o[i].primaryKey.push(...p.columns)}else if(X(a,jd)){let u=$i(a.table),l=r[u],d=a.config(e(a.table)),p;for(let[f,h]of Object.entries(d))if(l){let y=o[l];y.relations[f]=h,p&&y.primaryKey.push(...p)}else u in n||(n[u]={relations:{},primaryKey:p}),n[u].relations[f]=h}return{tables:o,tableNamesMap:r}}s(Ud,"extractTablesRelationalConfig");function Fe(t,e){return new jd(t,r=>Object.fromEntries(Object.entries(e(r)).map(([n,o])=>[n,o.withFieldName(n)])))}s(Fe,"relations");function OF(t){return s(function(r,n){return new Ho(t,r,n,n?.fields.reduce((o,i)=>o&&i.notNull,!0)??!1)},"one")}s(OF,"createOne");function $F(t){return s(function(r,n){return new xc(t,r,n)},"many")}s($F,"createMany");function jk(t,e,r){if(X(r,Ho)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=e[$i(r.referencedTable)];if(!n)throw new Error(`Table "${r.referencedTable[he.Symbol.Name]}" not found in schema`);let o=t[n];if(!o)throw new Error(`Table "${n}" not found in schema`);let i=r.sourceTable,a=e[$i(i)];if(!a)throw new Error(`Table "${i[he.Symbol.Name]}" not found in schema`);let u=[];for(let l of Object.values(o.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&u.push(l);if(u.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[he.Symbol.Name]}". Please specify relation name`);if(u[0]&&X(u[0],Ho)&&u[0].config)return{fields:u[0].config.references,references:u[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}s(jk,"normalizeRelation");function zd(t){return{one:OF(t),many:$F(t)}}s(zd,"createTableRelationsHelpers");function Md(t,e,r,n,o=i=>i){let i={};for(let[a,u]of n.entries())if(u.isJson){let l=e.relations[u.tsKey],d=r[a],p=typeof d=="string"?JSON.parse(d):d;i[u.tsKey]=X(l,Ho)?p&&Md(t,t[u.relationTableTsKey],p,u.selection,o):p.map(f=>Md(t,t[u.relationTableTsKey],f,u.selection,o))}else{let l=o(r[a]),d=u.field,p;X(d,xt)?p=d:X(d,we)?p=d.decoder:p=d.sql.decoder,i[u.tsKey]=l===null?null:p.mapFromDriverValue(l)}return i}s(Md,"mapRelationalRow");function Mk(t){return M`count(${t||M.raw("*")})`.mapWith(Number)}s(Mk,"count");function Ld(t){return M`sum(${t})`.mapWith(String)}s(Ld,"sum");var RF=Object.create,ws=Object.defineProperty,NF=Object.getOwnPropertyDescriptor,DF=Object.getOwnPropertyNames,jF=Object.getPrototypeOf,MF=Object.prototype.hasOwnProperty,UF=s((t,e,r)=>e in t?ws(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"Io"),I=s((t,e)=>ws(t,"name",{value:e,configurable:!0}),"a"),Vr=s((t,e)=>()=>(t&&(e=t(t=0)),e),"G"),Xe=s((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),"T"),wn=s((t,e)=>{for(var r in e)ws(t,r,{get:e[r],enumerable:!0})},"ie"),Vk=s((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of DF(e))!MF.call(t,o)&&o!==r&&ws(t,o,{get:s(()=>e[o],"get"),enumerable:!(n=NF(e,o))||n.enumerable});return t},"Dn"),ji=s((t,e,r)=>(r=t!=null?RF(jF(t)):{},Vk(e||!t||!t.__esModule?ws(r,"default",{value:t,enumerable:!0}):r,t)),"Se"),yr=s(t=>Vk(ws({},"__esModule",{value:!0}),t),"O"),qe=s((t,e,r)=>UF(t,typeof e!="symbol"?e+"":e,r),"E"),zF=Xe(t=>{"use strict";Ae(),t.byteLength=l,t.toByteArray=p,t.fromByteArray=y;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,a=o.length;i<a;++i)e[i]=o[i],r[o.charCodeAt(i)]=i;var i,a;r[45]=62,r[95]=63;function u(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=g.indexOf("=");_===-1&&(_=m);var w=_===m?0:4-_%4;return[_,w]}s(u,"qn"),I(u,"getLens");function l(g){var m=u(g),_=m[0],w=m[1];return(_+w)*3/4-w}s(l,"Po"),I(l,"byteLength");function d(g,m,_){return(m+_)*3/4-_}s(d,"Bo"),I(d,"_byteLength");function p(g){var m,_=u(g),w=_[0],b=_[1],x=new n(d(g,w,b)),k=0,R=b>0?w-4:w,O;for(O=0;O<R;O+=4)m=r[g.charCodeAt(O)]<<18|r[g.charCodeAt(O+1)]<<12|r[g.charCodeAt(O+2)]<<6|r[g.charCodeAt(O+3)],x[k++]=m>>16&255,x[k++]=m>>8&255,x[k++]=m&255;return b===2&&(m=r[g.charCodeAt(O)]<<2|r[g.charCodeAt(O+1)]>>4,x[k++]=m&255),b===1&&(m=r[g.charCodeAt(O)]<<10|r[g.charCodeAt(O+1)]<<4|r[g.charCodeAt(O+2)]>>2,x[k++]=m>>8&255,x[k++]=m&255),x}s(p,"Ro"),I(p,"toByteArray");function f(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}s(f,"Lo"),I(f,"tripletToBase64");function h(g,m,_){for(var w,b=[],x=m;x<_;x+=3)w=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),b.push(f(w));return b.join("")}s(h,"Fo"),I(h,"encodeChunk");function y(g){for(var m,_=g.length,w=_%3,b=[],x=16383,k=0,R=_-w;k<R;k+=x)b.push(h(g,k,k+x>R?R:k+x));return w===1?(m=g[_-1],b.push(e[m>>2]+e[m<<4&63]+"==")):w===2&&(m=(g[_-2]<<8)+g[_-1],b.push(e[m>>10]+e[m>>4&63]+e[m<<2&63]+"=")),b.join("")}s(y,"ko"),I(y,"fromByteArray")}),LF=Xe(t=>{Ae(),t.read=function(e,r,n,o,i){var a,u,l=i*8-o-1,d=(1<<l)-1,p=d>>1,f=-7,h=n?i-1:0,y=n?-1:1,g=e[r+h];for(h+=y,a=g&(1<<-f)-1,g>>=-f,f+=l;f>0;a=a*256+e[r+h],h+=y,f-=8);for(u=a&(1<<-f)-1,a>>=-f,f+=o;f>0;u=u*256+e[r+h],h+=y,f-=8);if(a===0)a=1-p;else{if(a===d)return u?NaN:(g?-1:1)*(1/0);u=u+Math.pow(2,o),a=a-p}return(g?-1:1)*u*Math.pow(2,a-o)},t.write=function(e,r,n,o,i,a){var u,l,d,p=a*8-i-1,f=(1<<p)-1,h=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:a-1,m=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,u=f):(u=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+h>=1?r+=y/d:r+=y*Math.pow(2,1-h),r*d>=2&&(u++,d/=2),u+h>=f?(l=0,u=f):u+h>=1?(l=(r*d-1)*Math.pow(2,i),u=u+h):(l=r*Math.pow(2,h-1)*Math.pow(2,i),u=0));i>=8;e[n+g]=l&255,g+=m,l/=256,i-=8);for(u=u<<i|l,p+=i;p>0;e[n+g]=u&255,g+=m,u/=256,p-=8);e[n+g-m]|=_*128}}),qF=Xe(t=>{"use strict";Ae();var e=zF(),r=LF(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let v=new Uint8Array(1),S={foo:I(function(){return 42},"foo")};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(v,S),v.foo()===42}catch{return!1}}s(i,"Mo"),I(i,"typedArraySupport"),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:I(function(){if(u.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:I(function(){if(u.isBuffer(this))return this.byteOffset},"get")});function a(v){if(v>o)throw new RangeError('The value "'+v+'" is invalid for option "size"');let S=new Uint8Array(v);return Object.setPrototypeOf(S,u.prototype),S}s(a,"he"),I(a,"createBuffer");function u(v,S,E){if(typeof v=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(v)}return l(v,S,E)}s(u,"h"),I(u,"Buffer"),u.poolSize=8192;function l(v,S,E){if(typeof v=="string")return h(v,S);if(ArrayBuffer.isView(v))return g(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Bt(v,ArrayBuffer)||v&&Bt(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Bt(v,SharedArrayBuffer)||v&&Bt(v.buffer,SharedArrayBuffer)))return m(v,S,E);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let U=v.valueOf&&v.valueOf();if(U!=null&&U!==v)return u.from(U,S,E);let B=_(v);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),S,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s(l,"Gn"),I(l,"from"),u.from=function(v,S,E){return l(v,S,E)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function d(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}s(d,"Vn"),I(d,"assertSize");function p(v,S,E){return d(v),v<=0?a(v):S!==void 0?typeof E=="string"?a(v).fill(S,E):a(v).fill(S):a(v)}s(p,"Uo"),I(p,"alloc"),u.alloc=function(v,S,E){return p(v,S,E)};function f(v){return d(v),a(v<0?0:w(v)|0)}s(f,"$t"),I(f,"allocUnsafe"),u.allocUnsafe=function(v){return f(v)},u.allocUnsafeSlow=function(v){return f(v)};function h(v,S){if((typeof S!="string"||S==="")&&(S="utf8"),!u.isEncoding(S))throw new TypeError("Unknown encoding: "+S);let E=x(v,S)|0,U=a(E),B=U.write(v,S);return B!==E&&(U=U.slice(0,B)),U}s(h,"Do"),I(h,"fromString");function y(v){let S=v.length<0?0:w(v.length)|0,E=a(S);for(let U=0;U<S;U+=1)E[U]=v[U]&255;return E}s(y,"Wt"),I(y,"fromArrayLike");function g(v){if(Bt(v,Uint8Array)){let S=new Uint8Array(v);return m(S.buffer,S.byteOffset,S.byteLength)}return y(v)}s(g,"Oo"),I(g,"fromArrayView");function m(v,S,E){if(S<0||v.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<S+(E||0))throw new RangeError('"length" is outside of buffer bounds');let U;return S===void 0&&E===void 0?U=new Uint8Array(v):E===void 0?U=new Uint8Array(v,S):U=new Uint8Array(v,S,E),Object.setPrototypeOf(U,u.prototype),U}s(m,"jt"),I(m,"fromArrayBuffer");function _(v){if(u.isBuffer(v)){let S=w(v.length)|0,E=a(S);return E.length===0||v.copy(E,0,0,S),E}if(v.length!==void 0)return typeof v.length!="number"||_n(v.length)?a(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}s(_,"qo"),I(_,"fromObject");function w(v){if(v>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return v|0}s(w,"Gt"),I(w,"checked");function b(v){return+v!=v&&(v=0),u.alloc(+v)}s(b,"Qo"),I(b,"SlowBuffer"),u.isBuffer=I(function(v){return v!=null&&v._isBuffer===!0&&v!==u.prototype},"isBuffer"),u.compare=I(function(v,S){if(Bt(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),Bt(S,Uint8Array)&&(S=u.from(S,S.offset,S.byteLength)),!u.isBuffer(v)||!u.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===S)return 0;let E=v.length,U=S.length;for(let B=0,Y=Math.min(E,U);B<Y;++B)if(v[B]!==S[B]){E=v[B],U=S[B];break}return E<U?-1:U<E?1:0},"compare"),u.isEncoding=I(function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),u.concat=I(function(v,S){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return u.alloc(0);let E;if(S===void 0)for(S=0,E=0;E<v.length;++E)S+=v[E].length;let U=u.allocUnsafe(S),B=0;for(E=0;E<v.length;++E){let Y=v[E];if(Bt(Y,Uint8Array))B+Y.length>U.length?(u.isBuffer(Y)||(Y=u.from(Y)),Y.copy(U,B)):Uint8Array.prototype.set.call(U,Y,B);else if(u.isBuffer(Y))Y.copy(U,B);else throw new TypeError('"list" argument must be an Array of Buffers');B+=Y.length}return U},"concat");function x(v,S){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Bt(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let E=v.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&E===0)return 0;let B=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return qo(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Mn(v).length;default:if(B)return U?-1:qo(v).length;S=(""+S).toLowerCase(),B=!0}}s(x,"zn"),I(x,"byteLength"),u.byteLength=x;function k(v,S,E){let U=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,S>>>=0,E<=S))return"";for(v||(v="utf8");;)switch(v){case"hex":return Te(this,S,E);case"utf8":case"utf-8":return q(this,S,E);case"ascii":return oe(this,S,E);case"latin1":case"binary":return _e(this,S,E);case"base64":return V(this,S,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,S,E);default:if(U)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),U=!0}}s(k,"No"),I(k,"slowToString"),u.prototype._isBuffer=!0;function R(v,S,E){let U=v[S];v[S]=v[E],v[E]=U}s(R,"Ae"),I(R,"swap"),u.prototype.swap16=I(function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<v;S+=2)R(this,S,S+1);return this},"swap16"),u.prototype.swap32=I(function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<v;S+=4)R(this,S,S+3),R(this,S+1,S+2);return this},"swap32"),u.prototype.swap64=I(function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<v;S+=8)R(this,S,S+7),R(this,S+1,S+6),R(this,S+2,S+5),R(this,S+3,S+4);return this},"swap64"),u.prototype.toString=I(function(){let v=this.length;return v===0?"":arguments.length===0?q(this,0,v):k.apply(this,arguments)},"toString"),u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=I(function(v){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:u.compare(this,v)===0},"equals"),u.prototype.inspect=I(function(){let v="",S=t.INSPECT_MAX_BYTES;return v=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(v+=" ... "),"<Buffer "+v+">"},"inspect"),n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=I(function(v,S,E,U,B){if(Bt(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(S===void 0&&(S=0),E===void 0&&(E=v?v.length:0),U===void 0&&(U=0),B===void 0&&(B=this.length),S<0||E>v.length||U<0||B>this.length)throw new RangeError("out of range index");if(U>=B&&S>=E)return 0;if(U>=B)return-1;if(S>=E)return 1;if(S>>>=0,E>>>=0,U>>>=0,B>>>=0,this===v)return 0;let Y=B-U,de=E-S,Re=Math.min(Y,de),dt=this.slice(U,B),ft=v.slice(S,E);for(let it=0;it<Re;++it)if(dt[it]!==ft[it]){Y=dt[it],de=ft[it];break}return Y<de?-1:de<Y?1:0},"compare");function O(v,S,E,U,B){if(v.length===0)return-1;if(typeof E=="string"?(U=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,_n(E)&&(E=B?0:v.length-1),E<0&&(E=v.length+E),E>=v.length){if(B)return-1;E=v.length-1}else if(E<0)if(B)E=0;else return-1;if(typeof S=="string"&&(S=u.from(S,U)),u.isBuffer(S))return S.length===0?-1:C(v,S,E,U,B);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(v,S,E):Uint8Array.prototype.lastIndexOf.call(v,S,E):C(v,[S],E,U,B);throw new TypeError("val must be string, number or Buffer")}s(O,"Kn"),I(O,"bidirectionalIndexOf");function C(v,S,E,U,B){let Y=1,de=v.length,Re=S.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(v.length<2||S.length<2)return-1;Y=2,de/=2,Re/=2,E/=2}function dt(it,Ct){return Y===1?it[Ct]:it.readUInt16BE(Ct*Y)}s(dt,"c"),I(dt,"read");let ft;if(B){let it=-1;for(ft=E;ft<de;ft++)if(dt(v,ft)===dt(S,it===-1?0:ft-it)){if(it===-1&&(it=ft),ft-it+1===Re)return it*Y}else it!==-1&&(ft-=ft-it),it=-1}else for(E+Re>de&&(E=de-Re),ft=E;ft>=0;ft--){let it=!0;for(let Ct=0;Ct<Re;Ct++)if(dt(v,ft+Ct)!==dt(S,Ct)){it=!1;break}if(it)return ft}return-1}s(C,"jn"),I(C,"arrayIndexOf"),u.prototype.includes=I(function(v,S,E){return this.indexOf(v,S,E)!==-1},"includes"),u.prototype.indexOf=I(function(v,S,E){return O(this,v,S,E,!0)},"indexOf"),u.prototype.lastIndexOf=I(function(v,S,E){return O(this,v,S,E,!1)},"lastIndexOf");function $(v,S,E,U){E=Number(E)||0;let B=v.length-E;U?(U=Number(U),U>B&&(U=B)):U=B;let Y=S.length;U>Y/2&&(U=Y/2);let de;for(de=0;de<U;++de){let Re=parseInt(S.substr(de*2,2),16);if(_n(Re))return de;v[E+de]=Re}return de}s($,"Wo"),I($,"hexWrite");function P(v,S,E,U){return dr(qo(S,v.length-E),v,E,U)}s(P,"jo"),I(P,"utf8Write");function N(v,S,E,U){return dr(dd(S),v,E,U)}s(N,"Ho"),I(N,"asciiWrite");function D(v,S,E,U){return dr(Mn(S),v,E,U)}s(D,"$o"),I(D,"base64Write");function K(v,S,E,U){return dr(Yr(S,v.length-E),v,E,U)}s(K,"Go"),I(K,"ucs2Write"),u.prototype.write=I(function(v,S,E,U){if(S===void 0)U="utf8",E=this.length,S=0;else if(E===void 0&&typeof S=="string")U=S,E=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(E)?(E=E>>>0,U===void 0&&(U="utf8")):(U=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let B=this.length-S;if((E===void 0||E>B)&&(E=B),v.length>0&&(E<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let Y=!1;for(;;)switch(U){case"hex":return $(this,v,S,E);case"utf8":case"utf-8":return P(this,v,S,E);case"ascii":case"latin1":case"binary":return N(this,v,S,E);case"base64":return D(this,v,S,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,v,S,E);default:if(Y)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),Y=!0}},"write"),u.prototype.toJSON=I(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function V(v,S,E){return S===0&&E===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(S,E))}s(V,"Vo"),I(V,"base64Slice");function q(v,S,E){E=Math.min(v.length,E);let U=[],B=S;for(;B<E;){let Y=v[B],de=null,Re=Y>239?4:Y>223?3:Y>191?2:1;if(B+Re<=E){let dt,ft,it,Ct;switch(Re){case 1:Y<128&&(de=Y);break;case 2:dt=v[B+1],(dt&192)===128&&(Ct=(Y&31)<<6|dt&63,Ct>127&&(de=Ct));break;case 3:dt=v[B+1],ft=v[B+2],(dt&192)===128&&(ft&192)===128&&(Ct=(Y&15)<<12|(dt&63)<<6|ft&63,Ct>2047&&(Ct<55296||Ct>57343)&&(de=Ct));break;case 4:dt=v[B+1],ft=v[B+2],it=v[B+3],(dt&192)===128&&(ft&192)===128&&(it&192)===128&&(Ct=(Y&15)<<18|(dt&63)<<12|(ft&63)<<6|it&63,Ct>65535&&Ct<1114112&&(de=Ct))}}de===null?(de=65533,Re=1):de>65535&&(de-=65536,U.push(de>>>10&1023|55296),de=56320|de&1023),U.push(de),B+=Re}return ee(U)}s(q,"Yn"),I(q,"utf8Slice");var Q=4096;function ee(v){let S=v.length;if(S<=Q)return String.fromCharCode.apply(String,v);let E="",U=0;for(;U<S;)E+=String.fromCharCode.apply(String,v.slice(U,U+=Q));return E}s(ee,"zo"),I(ee,"decodeCodePointsArray");function oe(v,S,E){let U="";E=Math.min(v.length,E);for(let B=S;B<E;++B)U+=String.fromCharCode(v[B]&127);return U}s(oe,"Ko"),I(oe,"asciiSlice");function _e(v,S,E){let U="";E=Math.min(v.length,E);for(let B=S;B<E;++B)U+=String.fromCharCode(v[B]);return U}s(_e,"Yo"),I(_e,"latin1Slice");function Te(v,S,E){let U=v.length;(!S||S<0)&&(S=0),(!E||E<0||E>U)&&(E=U);let B="";for(let Y=S;Y<E;++Y)B+=pd[v[Y]];return B}s(Te,"Zo"),I(Te,"hexSlice");function We(v,S,E){let U=v.slice(S,E),B="";for(let Y=0;Y<U.length-1;Y+=2)B+=String.fromCharCode(U[Y]+U[Y+1]*256);return B}s(We,"Jo"),I(We,"utf16leSlice"),u.prototype.slice=I(function(v,S){let E=this.length;v=~~v,S=S===void 0?E:~~S,v<0?(v+=E,v<0&&(v=0)):v>E&&(v=E),S<0?(S+=E,S<0&&(S=0)):S>E&&(S=E),S<v&&(S=v);let U=this.subarray(v,S);return Object.setPrototypeOf(U,u.prototype),U},"slice");function He(v,S,E){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+S>E)throw new RangeError("Trying to access beyond buffer length")}s(He,"q"),I(He,"checkOffset"),u.prototype.readUintLE=u.prototype.readUIntLE=I(function(v,S,E){v=v>>>0,S=S>>>0,E||He(v,S,this.length);let U=this[v],B=1,Y=0;for(;++Y<S&&(B*=256);)U+=this[v+Y]*B;return U},"readUIntLE"),u.prototype.readUintBE=u.prototype.readUIntBE=I(function(v,S,E){v=v>>>0,S=S>>>0,E||He(v,S,this.length);let U=this[v+--S],B=1;for(;S>0&&(B*=256);)U+=this[v+--S]*B;return U},"readUIntBE"),u.prototype.readUint8=u.prototype.readUInt8=I(function(v,S){return v=v>>>0,S||He(v,1,this.length),this[v]},"readUInt8"),u.prototype.readUint16LE=u.prototype.readUInt16LE=I(function(v,S){return v=v>>>0,S||He(v,2,this.length),this[v]|this[v+1]<<8},"readUInt16LE"),u.prototype.readUint16BE=u.prototype.readUInt16BE=I(function(v,S){return v=v>>>0,S||He(v,2,this.length),this[v]<<8|this[v+1]},"readUInt16BE"),u.prototype.readUint32LE=u.prototype.readUInt32LE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},"readUInt32LE"),u.prototype.readUint32BE=u.prototype.readUInt32BE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},"readUInt32BE"),u.prototype.readBigUInt64LE=xr(I(function(v){v=v>>>0,gr(v,"offset");let S=this[v],E=this[v+7];(S===void 0||E===void 0)&&jn(v,this.length-8);let U=S+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,B=this[++v]+this[++v]*2**8+this[++v]*2**16+E*2**24;return BigInt(U)+(BigInt(B)<<BigInt(32))},"readBigUInt64LE")),u.prototype.readBigUInt64BE=xr(I(function(v){v=v>>>0,gr(v,"offset");let S=this[v],E=this[v+7];(S===void 0||E===void 0)&&jn(v,this.length-8);let U=S*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],B=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E;return(BigInt(U)<<BigInt(32))+BigInt(B)},"readBigUInt64BE")),u.prototype.readIntLE=I(function(v,S,E){v=v>>>0,S=S>>>0,E||He(v,S,this.length);let U=this[v],B=1,Y=0;for(;++Y<S&&(B*=256);)U+=this[v+Y]*B;return B*=128,U>=B&&(U-=Math.pow(2,8*S)),U},"readIntLE"),u.prototype.readIntBE=I(function(v,S,E){v=v>>>0,S=S>>>0,E||He(v,S,this.length);let U=S,B=1,Y=this[v+--U];for(;U>0&&(B*=256);)Y+=this[v+--U]*B;return B*=128,Y>=B&&(Y-=Math.pow(2,8*S)),Y},"readIntBE"),u.prototype.readInt8=I(function(v,S){return v=v>>>0,S||He(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},"readInt8"),u.prototype.readInt16LE=I(function(v,S){v=v>>>0,S||He(v,2,this.length);let E=this[v]|this[v+1]<<8;return E&32768?E|4294901760:E},"readInt16LE"),u.prototype.readInt16BE=I(function(v,S){v=v>>>0,S||He(v,2,this.length);let E=this[v+1]|this[v]<<8;return E&32768?E|4294901760:E},"readInt16BE"),u.prototype.readInt32LE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},"readInt32LE"),u.prototype.readInt32BE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},"readInt32BE"),u.prototype.readBigInt64LE=xr(I(function(v){v=v>>>0,gr(v,"offset");let S=this[v],E=this[v+7];(S===void 0||E===void 0)&&jn(v,this.length-8);let U=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(E<<24);return(BigInt(U)<<BigInt(32))+BigInt(S+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)},"readBigInt64LE")),u.prototype.readBigInt64BE=xr(I(function(v){v=v>>>0,gr(v,"offset");let S=this[v],E=this[v+7];(S===void 0||E===void 0)&&jn(v,this.length-8);let U=(S<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(U)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E)},"readBigInt64BE")),u.prototype.readFloatLE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),r.read(this,v,!0,23,4)},"readFloatLE"),u.prototype.readFloatBE=I(function(v,S){return v=v>>>0,S||He(v,4,this.length),r.read(this,v,!1,23,4)},"readFloatBE"),u.prototype.readDoubleLE=I(function(v,S){return v=v>>>0,S||He(v,8,this.length),r.read(this,v,!0,52,8)},"readDoubleLE"),u.prototype.readDoubleBE=I(function(v,S){return v=v>>>0,S||He(v,8,this.length),r.read(this,v,!1,52,8)},"readDoubleBE");function G(v,S,E,U,B,Y){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>B||S<Y)throw new RangeError('"value" argument is out of bounds');if(E+U>v.length)throw new RangeError("Index out of range")}s(G,"V"),I(G,"checkInt"),u.prototype.writeUintLE=u.prototype.writeUIntLE=I(function(v,S,E,U){if(v=+v,S=S>>>0,E=E>>>0,!U){let de=Math.pow(2,8*E)-1;G(this,v,S,E,de,0)}let B=1,Y=0;for(this[S]=v&255;++Y<E&&(B*=256);)this[S+Y]=v/B&255;return S+E},"writeUIntLE"),u.prototype.writeUintBE=u.prototype.writeUIntBE=I(function(v,S,E,U){if(v=+v,S=S>>>0,E=E>>>0,!U){let de=Math.pow(2,8*E)-1;G(this,v,S,E,de,0)}let B=E-1,Y=1;for(this[S+B]=v&255;--B>=0&&(Y*=256);)this[S+B]=v/Y&255;return S+E},"writeUIntBE"),u.prototype.writeUint8=u.prototype.writeUInt8=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,1,255,0),this[S]=v&255,S+1},"writeUInt8"),u.prototype.writeUint16LE=u.prototype.writeUInt16LE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,2,65535,0),this[S]=v&255,this[S+1]=v>>>8,S+2},"writeUInt16LE"),u.prototype.writeUint16BE=u.prototype.writeUInt16BE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,2,65535,0),this[S]=v>>>8,this[S+1]=v&255,S+2},"writeUInt16BE"),u.prototype.writeUint32LE=u.prototype.writeUInt32LE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,4,4294967295,0),this[S+3]=v>>>24,this[S+2]=v>>>16,this[S+1]=v>>>8,this[S]=v&255,S+4},"writeUInt32LE"),u.prototype.writeUint32BE=u.prototype.writeUInt32BE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,4,4294967295,0),this[S]=v>>>24,this[S+1]=v>>>16,this[S+2]=v>>>8,this[S+3]=v&255,S+4},"writeUInt32BE");function Oe(v,S,E,U,B){cs(S,U,B,v,E,7);let Y=Number(S&BigInt(4294967295));v[E++]=Y,Y=Y>>8,v[E++]=Y,Y=Y>>8,v[E++]=Y,Y=Y>>8,v[E++]=Y;let de=Number(S>>BigInt(32)&BigInt(4294967295));return v[E++]=de,de=de>>8,v[E++]=de,de=de>>8,v[E++]=de,de=de>>8,v[E++]=de,E}s(Oe,"Zn"),I(Oe,"wrtBigUInt64LE");function ge(v,S,E,U,B){cs(S,U,B,v,E,7);let Y=Number(S&BigInt(4294967295));v[E+7]=Y,Y=Y>>8,v[E+6]=Y,Y=Y>>8,v[E+5]=Y,Y=Y>>8,v[E+4]=Y;let de=Number(S>>BigInt(32)&BigInt(4294967295));return v[E+3]=de,de=de>>8,v[E+2]=de,de=de>>8,v[E+1]=de,de=de>>8,v[E]=de,E+8}s(ge,"Jn"),I(ge,"wrtBigUInt64BE"),u.prototype.writeBigUInt64LE=xr(I(function(v,S=0){return Oe(this,v,S,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),u.prototype.writeBigUInt64BE=xr(I(function(v,S=0){return ge(this,v,S,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),u.prototype.writeIntLE=I(function(v,S,E,U){if(v=+v,S=S>>>0,!U){let Re=Math.pow(2,8*E-1);G(this,v,S,E,Re-1,-Re)}let B=0,Y=1,de=0;for(this[S]=v&255;++B<E&&(Y*=256);)v<0&&de===0&&this[S+B-1]!==0&&(de=1),this[S+B]=(v/Y>>0)-de&255;return S+E},"writeIntLE"),u.prototype.writeIntBE=I(function(v,S,E,U){if(v=+v,S=S>>>0,!U){let Re=Math.pow(2,8*E-1);G(this,v,S,E,Re-1,-Re)}let B=E-1,Y=1,de=0;for(this[S+B]=v&255;--B>=0&&(Y*=256);)v<0&&de===0&&this[S+B+1]!==0&&(de=1),this[S+B]=(v/Y>>0)-de&255;return S+E},"writeIntBE"),u.prototype.writeInt8=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,1,127,-128),v<0&&(v=255+v+1),this[S]=v&255,S+1},"writeInt8"),u.prototype.writeInt16LE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,2,32767,-32768),this[S]=v&255,this[S+1]=v>>>8,S+2},"writeInt16LE"),u.prototype.writeInt16BE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,2,32767,-32768),this[S]=v>>>8,this[S+1]=v&255,S+2},"writeInt16BE"),u.prototype.writeInt32LE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,4,2147483647,-2147483648),this[S]=v&255,this[S+1]=v>>>8,this[S+2]=v>>>16,this[S+3]=v>>>24,S+4},"writeInt32LE"),u.prototype.writeInt32BE=I(function(v,S,E){return v=+v,S=S>>>0,E||G(this,v,S,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[S]=v>>>24,this[S+1]=v>>>16,this[S+2]=v>>>8,this[S+3]=v&255,S+4},"writeInt32BE"),u.prototype.writeBigInt64LE=xr(I(function(v,S=0){return Oe(this,v,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),u.prototype.writeBigInt64BE=xr(I(function(v,S=0){return ge(this,v,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function z(v,S,E,U,B,Y){if(E+U>v.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}s(z,"Xn"),I(z,"checkIEEE754");function Ze(v,S,E,U,B){return S=+S,E=E>>>0,B||z(v,S,E,4,34028234663852886e22,-34028234663852886e22),r.write(v,S,E,U,23,4),E+4}s(Ze,"ei"),I(Ze,"writeFloat"),u.prototype.writeFloatLE=I(function(v,S,E){return Ze(this,v,S,!0,E)},"writeFloatLE"),u.prototype.writeFloatBE=I(function(v,S,E){return Ze(this,v,S,!1,E)},"writeFloatBE");function vt(v,S,E,U,B){return S=+S,E=E>>>0,B||z(v,S,E,8,17976931348623157e292,-17976931348623157e292),r.write(v,S,E,U,52,8),E+8}s(vt,"ti"),I(vt,"writeDouble"),u.prototype.writeDoubleLE=I(function(v,S,E){return vt(this,v,S,!0,E)},"writeDoubleLE"),u.prototype.writeDoubleBE=I(function(v,S,E){return vt(this,v,S,!1,E)},"writeDoubleBE"),u.prototype.copy=I(function(v,S,E,U){if(!u.isBuffer(v))throw new TypeError("argument should be a Buffer");if(E||(E=0),!U&&U!==0&&(U=this.length),S>=v.length&&(S=v.length),S||(S=0),U>0&&U<E&&(U=E),U===E||v.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),v.length-S<U-E&&(U=v.length-S+E);let B=U-E;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,E,U):Uint8Array.prototype.set.call(v,this.subarray(E,U),S),B},"copy"),u.prototype.fill=I(function(v,S,E,U){if(typeof v=="string"){if(typeof S=="string"?(U=S,S=0,E=this.length):typeof E=="string"&&(U=E,E=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!u.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(v.length===1){let Y=v.charCodeAt(0);(U==="utf8"&&Y<128||U==="latin1")&&(v=Y)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(S<0||this.length<S||this.length<E)throw new RangeError("Out of range index");if(E<=S)return this;S=S>>>0,E=E===void 0?this.length:E>>>0,v||(v=0);let B;if(typeof v=="number")for(B=S;B<E;++B)this[B]=v;else{let Y=u.isBuffer(v)?v:u.from(v,U),de=Y.length;if(de===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(B=0;B<E-S;++B)this[B+S]=Y[B%de]}return this},"fill");var wt={};function Lr(v,S,E){var U;wt[v]=(U=class extends E{static{s(this,"n")}constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}},I(U,"NodeError"),U)}s(Lr,"Vt"),I(Lr,"E"),Lr("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Lr("ERR_INVALID_ARG_TYPE",function(v,S){return`The "${v}" argument must be of type number. Received type ${typeof S}`},TypeError),Lr("ERR_OUT_OF_RANGE",function(v,S,E){let U=`The value of "${v}" is out of range.`,B=E;return Number.isInteger(E)&&Math.abs(E)>2**32?B=Lo(String(E)):typeof E=="bigint"&&(B=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(B=Lo(B)),B+="n"),U+=` It must be ${S}. Received ${B}`,U},RangeError);function Lo(v){let S="",E=v.length,U=v[0]==="-"?1:0;for(;E>=U+4;E-=3)S=`_${v.slice(E-3,E)}${S}`;return`${v.slice(0,E)}${S}`}s(Lo,"$n"),I(Lo,"addNumericalSeparator");function uo(v,S,E){gr(S,"offset"),(v[S]===void 0||v[S+E]===void 0)&&jn(S,v.length-(E+1))}s(uo,"Xo"),I(uo,"checkBounds");function cs(v,S,E,U,B,Y){if(v>E||v<S){let de=typeof S=="bigint"?"n":"",Re;throw Y>3?S===0||S===BigInt(0)?Re=`>= 0${de} and < 2${de} ** ${(Y+1)*8}${de}`:Re=`>= -(2${de} ** ${(Y+1)*8-1}${de}) and < 2 ** ${(Y+1)*8-1}${de}`:Re=`>= ${S}${de} and <= ${E}${de}`,new wt.ERR_OUT_OF_RANGE("value",Re,v)}uo(U,B,Y)}s(cs,"ri"),I(cs,"checkIntBI");function gr(v,S){if(typeof v!="number")throw new wt.ERR_INVALID_ARG_TYPE(S,"number",v)}s(gr,"Be"),I(gr,"validateNumber");function jn(v,S,E){throw Math.floor(v)!==v?(gr(v,E),new wt.ERR_OUT_OF_RANGE(E||"offset","an integer",v)):S<0?new wt.ERR_BUFFER_OUT_OF_BOUNDS:new wt.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${S}`,v)}s(jn,"je"),I(jn,"boundsError");var us=/[^+/0-9A-Za-z-_]/g;function ld(v){if(v=v.split("=")[0],v=v.trim().replace(us,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}s(ld,"ta"),I(ld,"base64clean");function qo(v,S){S=S||1/0;let E,U=v.length,B=null,Y=[];for(let de=0;de<U;++de){if(E=v.charCodeAt(de),E>55295&&E<57344){if(!B){if(E>56319){(S-=3)>-1&&Y.push(239,191,189);continue}else if(de+1===U){(S-=3)>-1&&Y.push(239,191,189);continue}B=E;continue}if(E<56320){(S-=3)>-1&&Y.push(239,191,189),B=E;continue}E=(B-55296<<10|E-56320)+65536}else B&&(S-=3)>-1&&Y.push(239,191,189);if(B=null,E<128){if((S-=1)<0)break;Y.push(E)}else if(E<2048){if((S-=2)<0)break;Y.push(E>>6|192,E&63|128)}else if(E<65536){if((S-=3)<0)break;Y.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((S-=4)<0)break;Y.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return Y}s(qo,"Ht"),I(qo,"utf8ToBytes");function dd(v){let S=[];for(let E=0;E<v.length;++E)S.push(v.charCodeAt(E)&255);return S}s(dd,"ra"),I(dd,"asciiToBytes");function Yr(v,S){let E,U,B,Y=[];for(let de=0;de<v.length&&!((S-=2)<0);++de)E=v.charCodeAt(de),U=E>>8,B=E%256,Y.push(B),Y.push(U);return Y}s(Yr,"na"),I(Yr,"utf16leToBytes");function Mn(v){return e.toByteArray(ld(v))}s(Mn,"ni"),I(Mn,"base64ToBytes");function dr(v,S,E,U){let B;for(B=0;B<U&&!(B+E>=S.length||B>=v.length);++B)S[B+E]=v[B];return B}s(dr,"ht"),I(dr,"blitBuffer");function Bt(v,S){return v instanceof S||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===S.name}s(Bt,"ue"),I(Bt,"isInstance");function _n(v){return v!==v}s(_n,"zt"),I(_n,"numberIsNaN");var pd=(function(){let v="0123456789abcdef",S=new Array(256);for(let E=0;E<16;++E){let U=E*16;for(let B=0;B<16;++B)S[U+B]=v[E]+v[B]}return S})();function xr(v){return typeof BigInt>"u"?lo:v}s(xr,"we"),I(xr,"defineBigIntMethod");function lo(){throw new Error("BigInt not supported")}s(lo,"sa"),I(lo,"BufferBigIntNotDefined")}),Hd,zy,FF,ze,Qe,Ae=Vr(()=>{"use strict";Hd=globalThis,zy=globalThis.setImmediate??(t=>setTimeout(t,0)),FF=globalThis.clearImmediate??(t=>clearTimeout(t)),ze=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:qF().Buffer,Qe=globalThis.process??{},Qe.env??(Qe.env={});try{Qe.nextTick(()=>{})}catch{let t=Promise.resolve();Qe.nextTick=t.then.bind(t)}}),Mi=Xe((t,e)=>{"use strict";Ae();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:I(function(O,C,$){return Function.prototype.apply.call(O,C,$)},"ReflectApply"),o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=I(function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))},"ReflectOwnKeys"):o=I(function(O){return Object.getOwnPropertyNames(O)},"ReflectOwnKeys");function i(O){console&&console.warn&&console.warn(O)}s(i,"oa"),I(i,"ProcessEmitWarning");var a=Number.isNaN||I(function(O){return O!==O},"NumberIsNaN");function u(){u.init.call(this)}s(u,"B"),I(u,"EventEmitter"),e.exports=u,e.exports.once=x,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function d(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}s(d,"dt"),I(d,"checkListener"),Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:I(function(){return l},"get"),set:I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");l=O},"set")}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},"setMaxListeners");function p(O){return O._maxListeners===void 0?u.defaultMaxListeners:O._maxListeners}s(p,"ui"),I(p,"_getMaxListeners"),u.prototype.getMaxListeners=I(function(){return p(this)},"getMaxListeners"),u.prototype.emit=I(function(O){for(var C=[],$=1;$<arguments.length;$++)C.push(arguments[$]);var P=O==="error",N=this._events;if(N!==void 0)P=P&&N.error===void 0;else if(!P)return!1;if(P){var D;if(C.length>0&&(D=C[0]),D instanceof Error)throw D;var K=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw K.context=D,K}var V=N[O];if(V===void 0)return!1;if(typeof V=="function")n(V,this,C);else for(var q=V.length,Q=_(V,q),$=0;$<q;++$)n(Q[$],this,C);return!0},"emit");function f(O,C,$,P){var N,D,K;if(d($),D=O._events,D===void 0?(D=O._events=Object.create(null),O._eventsCount=0):(D.newListener!==void 0&&(O.emit("newListener",C,$.listener?$.listener:$),D=O._events),K=D[C]),K===void 0)K=D[C]=$,++O._eventsCount;else if(typeof K=="function"?K=D[C]=P?[$,K]:[K,$]:P?K.unshift($):K.push($),N=p(O),N>0&&K.length>N&&!K.warned){K.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=O,V.type=C,V.count=K.length,i(V)}return O}s(f,"ci"),I(f,"_addListener"),u.prototype.addListener=I(function(O,C){return f(this,O,C,!1)},"addListener"),u.prototype.on=u.prototype.addListener,u.prototype.prependListener=I(function(O,C){return f(this,O,C,!0)},"prependListener");function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}s(h,"aa"),I(h,"onceWrapper");function y(O,C,$){var P={fired:!1,wrapFn:void 0,target:O,type:C,listener:$},N=h.bind(P);return N.listener=$,P.wrapFn=N,N}s(y,"li"),I(y,"_onceWrap"),u.prototype.once=I(function(O,C){return d(C),this.on(O,y(this,O,C)),this},"once"),u.prototype.prependOnceListener=I(function(O,C){return d(C),this.prependListener(O,y(this,O,C)),this},"prependOnceListener"),u.prototype.removeListener=I(function(O,C){var $,P,N,D,K;if(d(C),P=this._events,P===void 0)return this;if($=P[O],$===void 0)return this;if($===C||$.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete P[O],P.removeListener&&this.emit("removeListener",O,$.listener||C));else if(typeof $!="function"){for(N=-1,D=$.length-1;D>=0;D--)if($[D]===C||$[D].listener===C){K=$[D].listener,N=D;break}if(N<0)return this;N===0?$.shift():w($,N),$.length===1&&(P[O]=$[0]),P.removeListener!==void 0&&this.emit("removeListener",O,K||C)}return this},"removeListener"),u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=I(function(O){var C,$,P;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[O]),this;if(arguments.length===0){var N=Object.keys($),D;for(P=0;P<N.length;++P)D=N[P],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=$[O],typeof C=="function")this.removeListener(O,C);else if(C!==void 0)for(P=C.length-1;P>=0;P--)this.removeListener(O,C[P]);return this},"removeAllListeners");function g(O,C,$){var P=O._events;if(P===void 0)return[];var N=P[C];return N===void 0?[]:typeof N=="function"?$?[N.listener||N]:[N]:$?b(N):_(N,N.length)}s(g,"fi"),I(g,"_listeners"),u.prototype.listeners=I(function(O){return g(this,O,!0)},"listeners"),u.prototype.rawListeners=I(function(O){return g(this,O,!1)},"rawListeners"),u.listenerCount=function(O,C){return typeof O.listenerCount=="function"?O.listenerCount(C):m.call(O,C)},u.prototype.listenerCount=m;function m(O){var C=this._events;if(C!==void 0){var $=C[O];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}s(m,"hi"),I(m,"listenerCount"),u.prototype.eventNames=I(function(){return this._eventsCount>0?o(this._events):[]},"eventNames");function _(O,C){for(var $=new Array(C),P=0;P<C;++P)$[P]=O[P];return $}s(_,"pi"),I(_,"arrayClone");function w(O,C){for(;C+1<O.length;C++)O[C]=O[C+1];O.pop()}s(w,"ua"),I(w,"spliceOne");function b(O){for(var C=new Array(O.length),$=0;$<C.length;++$)C[$]=O[$].listener||O[$];return C}s(b,"ca"),I(b,"unwrapListeners");function x(O,C){return new Promise(function($,P){function N(K){O.removeListener(C,D),P(K)}s(N,"i"),I(N,"errorListener");function D(){typeof O.removeListener=="function"&&O.removeListener("error",N),$([].slice.call(arguments))}s(D,"s"),I(D,"resolver"),R(O,C,D,{once:!0}),C!=="error"&&k(O,N,{once:!0})})}s(x,"la"),I(x,"once");function k(O,C,$){typeof O.on=="function"&&R(O,"error",C,$)}s(k,"fa"),I(k,"addErrorHandlerIfEventEmitter");function R(O,C,$,P){if(typeof O.on=="function")P.once?O.once(C,$):O.on(C,$);else if(typeof O.addEventListener=="function")O.addEventListener(C,I(s(function N(D){P.once&&O.removeEventListener(C,N),$(D)},"i"),"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}s(R,"di"),I(R,"eventTargetAgnosticAddListener")}),Hk={};wn(Hk,{Socket:s(()=>Di,"Socket"),isIP:s(()=>Gk,"isIP")});function Gk(t){return 0}s(Gk,"ha");var Uk,Ny,Sc,Di,Ic=Vr(()=>{"use strict";Ae(),Uk=ji(Mi(),1),I(Gk,"isIP"),Ny=/^[^.]+\./,Sc=class Ne extends Uk.EventEmitter{static{s(this,"S")}constructor(){super(...arguments),qe(this,"opts",{}),qe(this,"connecting",!1),qe(this,"pending",!0),qe(this,"writable",!0),qe(this,"encrypted",!1),qe(this,"authorized",!1),qe(this,"destroyed",!1),qe(this,"ws",null),qe(this,"writeBuffer"),qe(this,"tlsState",0),qe(this,"tlsRead"),qe(this,"tlsWrite")}static get poolQueryViaFetch(){return Ne.opts.poolQueryViaFetch??Ne.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){Ne.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return Ne.opts.fetchEndpoint??Ne.defaults.fetchEndpoint}static set fetchEndpoint(e){Ne.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return Ne.opts.fetchFunction??Ne.defaults.fetchFunction}static set fetchFunction(e){Ne.opts.fetchFunction=e}static get webSocketConstructor(){return Ne.opts.webSocketConstructor??Ne.defaults.webSocketConstructor}static set webSocketConstructor(e){Ne.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??Ne.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return Ne.opts.wsProxy??Ne.defaults.wsProxy}static set wsProxy(e){Ne.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??Ne.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return Ne.opts.coalesceWrites??Ne.defaults.coalesceWrites}static set coalesceWrites(e){Ne.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??Ne.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return Ne.opts.useSecureWebSocket??Ne.defaults.useSecureWebSocket}static set useSecureWebSocket(e){Ne.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??Ne.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return Ne.opts.forceDisablePgSSL??Ne.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){Ne.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??Ne.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return Ne.opts.disableSNI??Ne.defaults.disableSNI}static set disableSNI(e){Ne.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??Ne.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return Ne.opts.disableWarningInBrowsers??Ne.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){Ne.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??Ne.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return Ne.opts.pipelineConnect??Ne.defaults.pipelineConnect}static set pipelineConnect(e){Ne.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??Ne.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return Ne.opts.subtls??Ne.defaults.subtls}static set subtls(e){Ne.opts.subtls=e}get subtls(){return this.opts.subtls??Ne.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return Ne.opts.pipelineTLS??Ne.defaults.pipelineTLS}static set pipelineTLS(e){Ne.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??Ne.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return Ne.opts.rootCerts??Ne.defaults.rootCerts}static set rootCerts(e){Ne.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??Ne.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,n){this.connecting=!0,n&&this.once("connect",n);let o=I(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=I((u,l=!1)=>{u.binaryType="arraybuffer",u.addEventListener("error",d=>{this.emit("error",d),this.emit("close")}),u.addEventListener("message",d=>{if(this.tlsState===0){let p=ze.from(d.data);this.emit("data",p)}}),u.addEventListener("close",()=>{this.emit("close")}),l?o():u.addEventListener("open",o)},"configureWebSocket"),a;try{a=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(u){this.emit("error",u),this.emit("close");return}try{let u=(this.useSecureWebSocket?"wss:":"ws:")+"//"+a;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(u),i(this.ws);else try{this.ws=new WebSocket(u),i(this.ws)}catch{this.ws=new __unstable_WebSocket(u),i(this.ws)}}catch(u){let l=(this.useSecureWebSocket?"https:":"http:")+"//"+a;fetch(l,{headers:{Upgrade:"websocket"}}).then(d=>{if(this.ws=d.webSocket,this.ws==null)throw u;this.ws.accept(),i(this.ws,!0)}).catch(d=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${d}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),i=this.rawWrite.bind(this),{read:a,write:u}=await this.subtls.startTls(e,r,o,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=a,this.tlsWrite=u,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=ze.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=o=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=ze.from(e,r)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,n)}):(this.tlsWrite(e),n()),!0)}end(e=ze.alloc(0),r="utf8",n=()=>{}){return this.write(e,r,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},I(Sc,"Socket"),qe(Sc,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:I((t,e,r)=>{let n;return r?.jwtAuth?n=t.replace(Ny,"apiauth."):n=t.replace(Ny,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:I(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),qe(Sc,"opts",{}),Di=Sc}),Zk={};wn(Zk,{parse:s(()=>Ly,"parse")});function Ly(t,e=!1){let{protocol:r}=new URL(t),n="http:"+t.substring(r.length),{username:o,password:i,host:a,hostname:u,port:l,pathname:d,search:p,searchParams:f,hash:h}=new URL(n);i=decodeURIComponent(i),o=decodeURIComponent(o),d=decodeURIComponent(d);let y=o+":"+i,g=e?Object.fromEntries(f.entries()):p;return{href:t,protocol:r,auth:y,username:o,password:i,host:a,hostname:u,port:l,pathname:d,search:p,query:g,hash:h}}s(Ly,"Yt");var Jk=Vr(()=>{"use strict";Ae(),I(Ly,"parse")}),Kk=Xe(t=>{"use strict";Ae(),t.parse=function(o,i){return new r(o,i).parse()};var e=class Wk{static{s(this,"vt")}constructor(i,a){this.source=i,this.transform=a||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var a;(this.recorded.length>0||i)&&(a=this.recorded.join(""),a==="NULL"&&!i&&(a=null),a!==null&&(a=this.transform(a)),this.entries.push(a),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var a,u,l;for(this.consumeDimensions();!this.isEof();)if(a=this.nextCharacter(),a.value==="{"&&!l)this.dimension++,this.dimension>1&&(u=new Wk(this.source.substr(this.position-1),this.transform),this.entries.push(u.parse(!0)),this.position+=u.position-2);else if(a.value==="}"&&!l){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else a.value==='"'&&!a.escaped?(l&&this.newEntry(!0),l=!l):a.value===","&&!l?this.newEntry():this.record(a.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};I(e,"ArrayParser");var r=e;function n(o){return o}s(n,"Ca"),I(n,"identity")}),Qk=Xe((t,e)=>{Ae();var r=Kk();e.exports={create:I(function(n,o){return{parse:I(function(){return r.parse(n,o)},"parse")}},"create")}}),BF=Xe((t,e)=>{"use strict";Ae();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,o=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=I(function(p){if(i.test(p))return Number(p.replace("i","I"));var f=r.exec(p);if(!f)return a(p)||null;var h=!!f[8],y=parseInt(f[1],10);h&&(y=l(y));var g=parseInt(f[2],10)-1,m=f[3],_=parseInt(f[4],10),w=parseInt(f[5],10),b=parseInt(f[6],10),x=f[7];x=x?1e3*parseFloat(x):0;var k,R=u(p);return R!=null?(k=new Date(Date.UTC(y,g,m,_,w,b,x)),d(y)&&k.setUTCFullYear(y),R!==0&&k.setTime(k.getTime()-R)):(k=new Date(y,g,m,_,w,b,x),d(y)&&k.setFullYear(y)),k},"parseDate");function a(p){var f=n.exec(p);if(f){var h=parseInt(f[1],10),y=!!f[4];y&&(h=l(h));var g=parseInt(f[2],10)-1,m=f[3],_=new Date(h,g,m);return d(h)&&_.setFullYear(h),_}}s(a,"Ra"),I(a,"getDate");function u(p){if(p.endsWith("+00"))return 0;var f=o.exec(p.split(" ")[1]);if(f){var h=f[1];if(h==="Z")return 0;var y=h==="-"?-1:1,g=parseInt(f[2],10)*3600+parseInt(f[3]||0,10)*60+parseInt(f[4]||0,10);return g*y*1e3}}s(u,"La"),I(u,"timeZoneOffset");function l(p){return-(p-1)}s(l,"_i"),I(l,"bcYearToNegativeYear");function d(p){return p>=0&&p<100}s(d,"nr"),I(d,"is0To99")}),VF=Xe((t,e)=>{Ae(),e.exports=n;var r=Object.prototype.hasOwnProperty;function n(o){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var u in a)r.call(a,u)&&(o[u]=a[u])}return o}s(n,"ka"),I(n,"extend")}),HF=Xe((t,e)=>{"use strict";Ae();var r=VF();e.exports=n;function n(b){if(!(this instanceof n))return new n(b);r(this,w(b))}s(n,"ke"),I(n,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var b=o.filter(this.hasOwnProperty,this);return this.milliseconds&&b.indexOf("seconds")<0&&b.push("seconds"),b.length===0?"0":b.map(function(x){var k=this[x]||0;return x==="seconds"&&this.milliseconds&&(k=(k+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),k+" "+x},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],u=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var b=a.map(k,this).join(""),x=u.map(k,this).join("");return"P"+b+"T"+x;function k(R){var O=this[R]||0;return R==="seconds"&&this.milliseconds&&(O=(O+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),O+i[R]}};var l="([+-]?\\d+)",d=l+"\\s+years?",p=l+"\\s+mons?",f=l+"\\s+days?",h="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",y=new RegExp([d,p,f,h].map(function(b){return"("+b+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},m=["hours","minutes","seconds","milliseconds"];function _(b){var x=b+"000000".slice(b.length);return parseInt(x,10)/1e3}s(_,"Ga"),I(_,"parseMilliseconds");function w(b){if(!b)return{};var x=y.exec(b),k=x[8]==="-";return Object.keys(g).reduce(function(R,O){var C=g[O],$=x[C];return!$||($=O==="milliseconds"?_($):parseInt($,10),!$)||(k&&~m.indexOf(O)&&($*=-1),R[O]=$),R},{})}s(w,"Va"),I(w,"parse")}),GF=Xe((t,e)=>{"use strict";Ae(),e.exports=I(function(r){if(/^\\x/.test(r))return new ze(r.substr(2),"hex");for(var n="",o=0;o<r.length;)if(r[o]!=="\\")n+=r[o],++o;else if(/[0-7]{3}/.test(r.substr(o+1,3)))n+=String.fromCharCode(parseInt(r.substr(o+1,3),8)),o+=4;else{for(var i=1;o+i<r.length&&r[o+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";o+=Math.floor(i/2)*2}return new ze(n,"binary")},"parseBytea")}),ZF=Xe((t,e)=>{Ae();var r=Kk(),n=Qk(),o=BF(),i=HF(),a=GF();function u(P){return I(function(N){return N===null?N:P(N)},"nullAllowed")}s(u,"St"),I(u,"allowNull");function l(P){return P===null?P:P==="TRUE"||P==="t"||P==="true"||P==="y"||P==="yes"||P==="on"||P==="1"}s(l,"qi"),I(l,"parseBool");function d(P){return P?r.parse(P,l):null}s(d,"za"),I(d,"parseBoolArray");function p(P){return parseInt(P,10)}s(p,"Ka"),I(p,"parseBaseTenInt");function f(P){return P?r.parse(P,u(p)):null}s(f,"sr"),I(f,"parseIntegerArray");function h(P){return P?r.parse(P,u(function(N){return k(N).trim()})):null}s(h,"Ya"),I(h,"parseBigIntegerArray");var y=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=O(D)),D});return N.parse()},"parsePointArray"),g=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=parseFloat(D)),D});return N.parse()},"parseFloatArray"),m=I(function(P){if(!P)return null;var N=n.create(P);return N.parse()},"parseStringArray"),_=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=o(D)),D});return N.parse()},"parseDateArray"),w=I(function(P){if(!P)return null;var N=n.create(P,function(D){return D!==null&&(D=i(D)),D});return N.parse()},"parseIntervalArray"),b=I(function(P){return P?r.parse(P,u(a)):null},"parseByteAArray"),x=I(function(P){return parseInt(P,10)},"parseInteger"),k=I(function(P){var N=String(P);return/^\d+$/.test(N)?N:P},"parseBigInteger"),R=I(function(P){return P?r.parse(P,u(JSON.parse)):null},"parseJsonArray"),O=I(function(P){return P[0]!=="("?null:(P=P.substring(1,P.length-1).split(","),{x:parseFloat(P[0]),y:parseFloat(P[1])})},"parsePoint"),C=I(function(P){if(P[0]!=="<"&&P[1]!=="(")return null;for(var N="(",D="",K=!1,V=2;V<P.length-1;V++){if(K||(N+=P[V]),P[V]===")"){K=!0;continue}else if(!K)continue;P[V]!==","&&(D+=P[V])}var q=O(N);return q.radius=parseFloat(D),q},"parseCircle"),$=I(function(P){P(20,k),P(21,x),P(23,x),P(26,x),P(700,parseFloat),P(701,parseFloat),P(16,l),P(1082,o),P(1114,o),P(1184,o),P(600,O),P(651,m),P(718,C),P(1e3,d),P(1001,b),P(1005,f),P(1007,f),P(1028,f),P(1016,h),P(1017,y),P(1021,g),P(1022,g),P(1231,g),P(1014,m),P(1015,m),P(1008,m),P(1009,m),P(1040,m),P(1041,m),P(1115,_),P(1182,_),P(1185,_),P(1186,i),P(1187,w),P(17,a),P(114,JSON.parse.bind(JSON)),P(3802,JSON.parse.bind(JSON)),P(199,R),P(3807,R),P(3907,m),P(2951,m),P(791,m),P(1183,m),P(1270,m)},"init");e.exports={init:$}}),JF=Xe((t,e)=>{"use strict";Ae();var r=1e6;function n(o){var i=o.readInt32BE(0),a=o.readUInt32BE(4),u="";i<0&&(i=~i+(a===0),a=~a+1>>>0,u="-");var l="",d,p,f,h,y,g;{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,f=""+(p-r*a),a===0&&i===0)return u+f+l;for(h="",y=6-f.length,g=0;g<y;g++)h+="0";l=h+f+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,f=""+(p-r*a),a===0&&i===0)return u+f+l;for(h="",y=6-f.length,g=0;g<y;g++)h+="0";l=h+f+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,f=""+(p-r*a),a===0&&i===0)return u+f+l;for(h="",y=6-f.length,g=0;g<y;g++)h+="0";l=h+f+l}return d=i%r,p=4294967296*d+a,f=""+p%r,u+f+l}s(n,"ru"),I(n,"readInt8"),e.exports=n}),KF=Xe((t,e)=>{Ae();var r=JF(),n=I(function(m,_,w,b,x){w=w||0,b=b||!1,x=x||function(K,V,q){return K*Math.pow(2,q)+V};var k=w>>3,R=I(function(K){return b?~K&255:K},"inv"),O=255,C=8-w%8;_<C&&(O=255<<8-_&255,C=_),w&&(O=O>>w%8);var $=0;w%8+_>=8&&($=x(0,R(m[k])&O,C));for(var P=_+w>>3,N=k+1;N<P;N++)$=x($,R(m[N]),8);var D=(_+w)%8;return D>0&&($=x($,R(m[P])>>8-D,D)),$},"parseBits"),o=I(function(m,_,w){var b=Math.pow(2,w-1)-1,x=n(m,1),k=n(m,w,1);if(k===0)return 0;var R=1,O=I(function($,P,N){$===0&&($=1);for(var D=1;D<=N;D++)R/=2,(P&1<<N-D)>0&&($+=R);return $},"parsePrecisionBits"),C=n(m,_,w+1,!1,O);return k==Math.pow(2,w+1)-1?C===0?x===0?1/0:-1/0:NaN:(x===0?1:-1)*Math.pow(2,k-b)*C},"parseFloatFromBits"),i=I(function(m){return n(m,1)==1?-1*(n(m,15,1,!0)+1):n(m,15,1)},"parseInt16"),a=I(function(m){return n(m,1)==1?-1*(n(m,31,1,!0)+1):n(m,31,1)},"parseInt32"),u=I(function(m){return o(m,23,8)},"parseFloat32"),l=I(function(m){return o(m,52,11)},"parseFloat64"),d=I(function(m){var _=n(m,16,32);if(_==49152)return NaN;for(var w=Math.pow(1e4,n(m,16,16)),b=0,x=[],k=n(m,16),R=0;R<k;R++)b+=n(m,16,64+16*R)*w,w/=1e4;var O=Math.pow(10,n(m,16,48));return(_===0?1:-1)*Math.round(b*O)/O},"parseNumeric"),p=I(function(m,_){var w=n(_,1),b=n(_,63,1),x=new Date((w===0?1:-1)*b/1e3+9466848e5);return m||x.setTime(x.getTime()+x.getTimezoneOffset()*6e4),x.usec=b%1e3,x.getMicroSeconds=function(){return this.usec},x.setMicroSeconds=function(k){this.usec=k},x.getUTCMicroSeconds=function(){return this.usec},x},"parseDate"),f=I(function(m){for(var _=n(m,32),w=n(m,32,32),b=n(m,32,64),x=96,k=[],R=0;R<_;R++)k[R]=n(m,32,x),x+=32,x+=32;var O=I(function($){var P=n(m,32,x);if(x+=32,P==4294967295)return null;var N;if($==23||$==20)return N=n(m,P*8,x),x+=P*8,N;if($==25)return N=m.toString(this.encoding,x>>3,(x+=P<<3)>>3),N;console.log("ERROR: ElementType not implemented: "+$)},"parseElement"),C=I(function($,P){var N=[],D;if($.length>1){var K=$.shift();for(D=0;D<K;D++)N[D]=C($,P);$.unshift(K)}else for(D=0;D<$[0];D++)N[D]=O(P);return N},"parse");return C(k,b)},"parseArray"),h=I(function(m){return m.toString("utf8")},"parseText"),y=I(function(m){return m===null?null:n(m,8)>0},"parseBool"),g=I(function(m){m(20,r),m(21,i),m(23,a),m(26,a),m(1700,d),m(700,u),m(701,l),m(16,y),m(1114,p.bind(null,!1)),m(1184,p.bind(null,!0)),m(1e3,f),m(1007,f),m(1016,f),m(1008,f),m(1009,f),m(25,h)},"init");e.exports={init:g}}),WF=Xe((t,e)=>{Ae(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Gd=Xe(t=>{Ae();var e=ZF(),r=KF(),n=Qk(),o=WF();t.getTypeParser=u,t.setTypeParser=l,t.arrayParser=n,t.builtins=o;var i={text:{},binary:{}};function a(d){return String(d)}s(a,"Ji"),I(a,"noParse");function u(d,p){return p=p||"text",i[p]&&i[p][d]||a}s(u,"yu"),I(u,"getTypeParser");function l(d,p,f){typeof p=="function"&&(f=p,p="text"),i[p][d]=f}s(l,"mu"),I(l,"setTypeParser"),e.init(function(d,p){i.text[d]=p}),r.init(function(d,p){i.binary[d]=p})}),qy=Xe((t,e)=>{"use strict";Ae();var r=Gd();function n(o){this._types=o||r,this.text={},this.binary={}}s(n,"Et"),I(n,"TypeOverrides"),n.prototype.getOverrides=function(o){switch(o){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(o,i,a){typeof i=="function"&&(a=i,i="text"),this.getOverrides(i)[o]=a},n.prototype.getTypeParser=function(o,i){return i=i||"text",this.getOverrides(i)[o]||this._types.getTypeParser(o,i)},e.exports=n});function Ec(t){let e=1779033703,r=3144134277,n=1013904242,o=2773480762,i=1359893119,a=2600822924,u=528734635,l=1541459225,d=0,p=0,f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=I((b,x)=>b>>>x|b<<32-x,"rrot"),y=new Uint32Array(64),g=new Uint8Array(64),m=I(()=>{for(let N=0,D=0;N<16;N++,D+=4)y[N]=g[D]<<24|g[D+1]<<16|g[D+2]<<8|g[D+3];for(let N=16;N<64;N++){let D=h(y[N-15],7)^h(y[N-15],18)^y[N-15]>>>3,K=h(y[N-2],17)^h(y[N-2],19)^y[N-2]>>>10;y[N]=y[N-16]+D+y[N-7]+K|0}let b=e,x=r,k=n,R=o,O=i,C=a,$=u,P=l;for(let N=0;N<64;N++){let D=h(O,6)^h(O,11)^h(O,25),K=O&C^~O&$,V=P+D+K+f[N]+y[N]|0,q=h(b,2)^h(b,13)^h(b,22),Q=b&x^b&k^x&k,ee=q+Q|0;P=$,$=C,C=O,O=R+V|0,R=k,k=x,x=b,b=V+ee|0}e=e+b|0,r=r+x|0,n=n+k|0,o=o+R|0,i=i+O|0,a=a+C|0,u=u+$|0,l=l+P|0,p=0},"process"),_=I(b=>{typeof b=="string"&&(b=new TextEncoder().encode(b));for(let x=0;x<b.length;x++)g[p++]=b[x],p===64&&m();d+=b.length},"add"),w=I(()=>{if(g[p++]=128,p==64&&m(),p+8>64){for(;p<64;)g[p++]=0;m()}for(;p<58;)g[p++]=0;let b=d*8;g[p++]=b/1099511627776&255,g[p++]=b/4294967296&255,g[p++]=b>>>24,g[p++]=b>>>16&255,g[p++]=b>>>8&255,g[p++]=b&255,m();let x=new Uint8Array(32);return x[0]=e>>>24,x[1]=e>>>16&255,x[2]=e>>>8&255,x[3]=e&255,x[4]=r>>>24,x[5]=r>>>16&255,x[6]=r>>>8&255,x[7]=r&255,x[8]=n>>>24,x[9]=n>>>16&255,x[10]=n>>>8&255,x[11]=n&255,x[12]=o>>>24,x[13]=o>>>16&255,x[14]=o>>>8&255,x[15]=o&255,x[16]=i>>>24,x[17]=i>>>16&255,x[18]=i>>>8&255,x[19]=i&255,x[20]=a>>>24,x[21]=a>>>16&255,x[22]=a>>>8&255,x[23]=a&255,x[24]=u>>>24,x[25]=u>>>16&255,x[26]=u>>>8&255,x[27]=u&255,x[28]=l>>>24,x[29]=l>>>16&255,x[30]=l>>>8&255,x[31]=l&255,x},"digest");return t===void 0?{add:_,digest:w}:(_(t),w())}s(Ec,"Xe");var QF=Vr(()=>{"use strict";Ae(),I(Ec,"sha256")}),vo,jy,XF=Vr(()=>{"use strict";Ae(),vo=class pn{static{s(this,"U")}constructor(){qe(this,"_dataLength",0),qe(this,"_bufferLength",0),qe(this,"_state",new Int32Array(4)),qe(this,"_buffer",new ArrayBuffer(68)),qe(this,"_buffer8"),qe(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=pn.hexChars,n=pn.hexOut,o,i,a,u;for(u=0;u<4;u+=1)for(i=u*8,o=e[u],a=0;a<8;a+=2)n[i+1+a]=r.charAt(o&15),o>>>=4,n[i+0+a]=r.charAt(o&15),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],i=e[2],a=e[3];n+=(o&i|~o&a)+r[0]-680876936|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[2]+606105819|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[3]-1044525330|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[4]-176418897|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[7]-45705983|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[8]+1770035416|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[10]-42063|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[11]-1990404162|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[12]+1804603682|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[15]+1236535329|0,o=(o<<22|o>>>10)+i|0,n+=(o&a|i&~a)+r[1]-165796510|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[11]+643717713|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[0]-373897302|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[5]-701558691|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[15]-660478335|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[4]-405537848|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[9]+568446438|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[3]-187363961|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[8]+1163531501|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[13]-1444681467|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[12]-1926607734|0,o=(o<<20|o>>>12)+i|0,n+=(o^i^a)+r[5]-378558|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[14]-35309556|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[1]-1530992060|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[7]-155497632|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[10]-1094730640|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[13]+681279174|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[3]-722521979|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[6]+76029189|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[9]-640364487|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[15]+530742520|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+i|0,n+=(i^(o|~a))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[10]-1051523|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[2]+718787259|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(pn.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a;for(a=0;a<e.length;a+=1){if(i=e.charCodeAt(a),i<128)r[o++]=i;else if(i<2048)r[o++]=(i>>>6)+192,r[o++]=i&63|128;else if(i<55296||i>56319)r[o++]=(i>>>12)+224,r[o++]=i>>>6&63|128,r[o++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++a)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(i>>>18)+240,r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=i&63|128}o>=64&&(this._dataLength+=64,pn._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e.charCodeAt(a++);if(o<64)break;this._dataLength+=64,pn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e[a++];if(o<64)break;this._dataLength+=64,pn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i=0;i<r.length;i+=1)this._buffer8[i]=r.charCodeAt(i)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,i=(r>>2)+1;this._dataLength+=r;let a=this._dataLength*8;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(pn.buffer32Identity.subarray(i),i),r>55&&(pn._md5cycle(this._state,o),o.set(pn.buffer32Identity)),a<=4294967295)o[14]=a;else{let u=a.toString(16).match(/(.*?)(.{0,8})$/);if(u===null)return;let l=parseInt(u[2],16),d=parseInt(u[1],16)||0;o[14]=l,o[15]=d}return pn._md5cycle(this._state,o),e?this._state:pn._hex(this._state)}},I(vo,"Md5"),qe(vo,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),qe(vo,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),qe(vo,"hexChars","0123456789abcdef"),qe(vo,"hexOut",[]),qe(vo,"onePassHasher",new vo),jy=vo}),Fy={};wn(Fy,{createHash:s(()=>Yk,"createHash"),createHmac:s(()=>eP,"createHmac"),randomBytes:s(()=>Xk,"randomBytes")});function Xk(t){return crypto.getRandomValues(ze.alloc(t))}s(Xk,"gu");function Yk(t){if(t==="sha256")return{update:I(function(e){return{digest:I(function(){return ze.from(Ec(e))},"digest")}},"update")};if(t==="md5")return{update:I(function(e){return{digest:I(function(){return typeof e=="string"?jy.hashStr(e):jy.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}s(Yk,"bu");function eP(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:I(function(r){return{digest:I(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let n=e.length;if(n>64)e=Ec(e);else if(n<64){let l=new Uint8Array(64);l.set(e),e=l}let o=new Uint8Array(64),i=new Uint8Array(64);for(let l=0;l<64;l++)o[l]=54^e[l],i[l]=92^e[l];let a=new Uint8Array(r.length+64);a.set(o,0),a.set(r,64);let u=new Uint8Array(96);return u.set(i,0),u.set(Ec(a),64),ze.from(Ec(u))},"digest")}},"update")}}s(eP,"vu");var tP=Vr(()=>{"use strict";Ae(),QF(),XF(),I(Xk,"randomBytes"),I(Yk,"createHash"),I(eP,"createHmac")}),Zd=Xe((t,e)=>{"use strict";Ae(),e.exports={host:"localhost",user:Qe.platform==="win32"?Qe.env.USERNAME:Qe.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=Gd(),n=r.getTypeParser(20,"text"),o=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){r.setTypeParser(20,"text",i?r.getTypeParser(23,"text"):n),r.setTypeParser(1016,"text",i?r.getTypeParser(1007,"text"):o)})}),Jd=Xe((t,e)=>{"use strict";Ae();var r=(tP(),yr(Fy)),n=Zd();function o(g){var m=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+m+'"'}s(o,"Cu"),I(o,"escapeElement");function i(g){for(var m="{",_=0;_<g.length;_++)_>0&&(m=m+","),g[_]===null||typeof g[_]>"u"?m=m+"NULL":Array.isArray(g[_])?m=m+i(g[_]):g[_]instanceof ze?m+="\\\\x"+g[_].toString("hex"):m+=o(a(g[_]));return m=m+"}",m}s(i,"rs"),I(i,"arrayString");var a=I(function(g,m){if(g==null)return null;if(g instanceof ze)return g;if(ArrayBuffer.isView(g)){var _=ze.from(g.buffer,g.byteOffset,g.byteLength);return _.length===g.byteLength?_:_.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?p(g):d(g):Array.isArray(g)?i(g):typeof g=="object"?u(g,m):g.toString()},"prepareValue");function u(g,m){if(g&&typeof g.toPostgres=="function"){if(m=m||[],m.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return m.push(g),a(g.toPostgres(a),m)}return JSON.stringify(g)}s(u,"_u"),I(u,"prepareObject");function l(g,m){for(g=""+g;g.length<m;)g="0"+g;return g}s(l,"N"),I(l,"pad");function d(g){var m=-g.getTimezoneOffset(),_=g.getFullYear(),w=_<1;w&&(_=Math.abs(_)+1);var b=l(_,4)+"-"+l(g.getMonth()+1,2)+"-"+l(g.getDate(),2)+"T"+l(g.getHours(),2)+":"+l(g.getMinutes(),2)+":"+l(g.getSeconds(),2)+"."+l(g.getMilliseconds(),3);return m<0?(b+="-",m*=-1):b+="+",b+=l(Math.floor(m/60),2)+":"+l(m%60,2),w&&(b+=" BC"),b}s(d,"Iu"),I(d,"dateToString");function p(g){var m=g.getUTCFullYear(),_=m<1;_&&(m=Math.abs(m)+1);var w=l(m,4)+"-"+l(g.getUTCMonth()+1,2)+"-"+l(g.getUTCDate(),2)+"T"+l(g.getUTCHours(),2)+":"+l(g.getUTCMinutes(),2)+":"+l(g.getUTCSeconds(),2)+"."+l(g.getUTCMilliseconds(),3);return w+="+00:00",_&&(w+=" BC"),w}s(p,"Tu"),I(p,"dateToStringUTC");function f(g,m,_){return g=typeof g=="string"?{text:g}:g,m&&(typeof m=="function"?g.callback=m:g.values=m),_&&(g.callback=_),g}s(f,"Pu"),I(f,"normalizeQueryConfig");var h=I(function(g){return r.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),y=I(function(g,m,_){var w=h(m+g),b=h(ze.concat([ze.from(w),_]));return"md5"+b},"postgresMd5PasswordHash");e.exports={prepareValue:I(function(g){return a(g)},"prepareValueWrapper"),normalizeQueryConfig:f,postgresMd5PasswordHash:y,md5:h}}),kc={};wn(kc,{default:s(()=>rP,"default")});var rP,Kd=Vr(()=>{"use strict";Ae(),rP={}}),YF=Xe((t,e)=>{"use strict";Ae();var r=(tP(),yr(Fy));function n(m){if(m.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let _=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:_,response:"n,,n=*,r="+_,message:"SASLInitialResponse"}}s(n,"Mu"),I(n,"startSession");function o(m,_,w){if(m.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let b=d(w);if(b.nonce.startsWith(m.clientNonce)){if(b.nonce.length===m.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var x=ze.from(b.salt,"base64"),k=g(_,x,b.iteration),R=y(k,"Client Key"),O=h(R),C="n=*,r="+m.clientNonce,$="r="+b.nonce+",s="+b.salt+",i="+b.iteration,P="c=biws,r="+b.nonce,N=C+","+$+","+P,D=y(O,N),K=f(R,D),V=K.toString("base64"),q=y(k,"Server Key"),Q=y(q,N);m.message="SASLResponse",m.serverSignature=Q.toString("base64"),m.response=P+",p="+V}s(o,"Uu"),I(o,"continueSession");function i(m,_){if(m.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:w}=p(_);if(w!==m.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}s(i,"Du"),I(i,"finalizeSession");function a(m){if(typeof m!="string")throw new TypeError("SASL: text must be a string");return m.split("").map((_,w)=>m.charCodeAt(w)).every(_=>_>=33&&_<=43||_>=45&&_<=126)}s(a,"Ou"),I(a,"isPrintableChars");function u(m){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(m)}s(u,"ls"),I(u,"isBase64");function l(m){if(typeof m!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(m.split(",").map(_=>{if(!/^.=/.test(_))throw new Error("SASL: Invalid attribute pair entry");let w=_[0],b=_.substring(2);return[w,b]}))}s(l,"fs"),I(l,"parseAttributePairs");function d(m){let _=l(m),w=_.get("r");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let b=_.get("s");if(b){if(!u(b))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let x=_.get("i");if(x){if(!/^[1-9][0-9]*$/.test(x))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let k=parseInt(x,10);return{nonce:w,salt:b,iteration:k}}s(d,"qu"),I(d,"parseServerFirstMessage");function p(m){let _=l(m).get("v");if(_){if(!u(_))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:_}}s(p,"Qu"),I(p,"parseServerFinalMessage");function f(m,_){if(!ze.isBuffer(m))throw new TypeError("first argument must be a Buffer");if(!ze.isBuffer(_))throw new TypeError("second argument must be a Buffer");if(m.length!==_.length)throw new Error("Buffer lengths must match");if(m.length===0)throw new Error("Buffers cannot be empty");return ze.from(m.map((w,b)=>m[b]^_[b]))}s(f,"hs"),I(f,"xorBuffers");function h(m){return r.createHash("sha256").update(m).digest()}s(h,"Nu"),I(h,"sha256");function y(m,_){return r.createHmac("sha256",m).update(_).digest()}s(y,"Ue"),I(y,"hmacSha256");function g(m,_,w){for(var b=y(m,ze.concat([_,ze.from([0,0,0,1])])),x=b,k=0;k<w-1;k++)b=y(m,b),x=f(x,b);return x}s(g,"Wu"),I(g,"Hi"),e.exports={startSession:n,continueSession:o,finalizeSession:i}}),By={};wn(By,{join:s(()=>nP,"join")});function nP(...t){return t.join("/")}s(nP,"ju");var oP=Vr(()=>{"use strict";Ae(),I(nP,"join")}),Vy={};wn(Vy,{stat:s(()=>iP,"stat")});function iP(t,e){e(new Error("No filesystem"))}s(iP,"Hu");var sP=Vr(()=>{"use strict";Ae(),I(iP,"stat")}),Hy={};wn(Hy,{default:s(()=>aP,"default")});var aP,cP=Vr(()=>{"use strict";Ae(),aP={}}),uP={};wn(uP,{StringDecoder:s(()=>lP,"StringDecoder")});var Dy,lP,e6=Vr(()=>{"use strict";Ae(),Dy=class{static{s(this,"Er")}constructor(e){qe(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},I(Dy,"StringDecoder"),lP=Dy}),t6=Xe((t,e)=>{"use strict";Ae();var{Transform:r}=(cP(),yr(Hy)),{StringDecoder:n}=(e6(),yr(uP)),o=Symbol("last"),i=Symbol("decoder");function a(f,h,y){let g;if(this.overflow){if(g=this[i].write(f).split(this.matcher),g.length===1)return y();g.shift(),this.overflow=!1}else this[o]+=this[i].write(f),g=this[o].split(this.matcher);this[o]=g.pop();for(let m=0;m<g.length;m++)try{l(this,this.mapper(g[m]))}catch(_){return y(_)}if(this.overflow=this[o].length>this.maxLength,this.overflow&&!this.skipOverflow){y(new Error("maximum buffer reached"));return}y()}s(a,"zu"),I(a,"transform");function u(f){if(this[o]+=this[i].end(),this[o])try{l(this,this.mapper(this[o]))}catch(h){return f(h)}f()}s(u,"Ku"),I(u,"flush");function l(f,h){h!==void 0&&f.push(h)}s(l,"gs"),I(l,"push");function d(f){return f}s(d,"ws"),I(d,"noop");function p(f,h,y){switch(f=f||/\r?\n/,h=h||d,y=y||{},arguments.length){case 1:typeof f=="function"?(h=f,f=/\r?\n/):typeof f=="object"&&!(f instanceof RegExp)&&!f[Symbol.split]&&(y=f,f=/\r?\n/);break;case 2:typeof f=="function"?(y=h,h=f,f=/\r?\n/):typeof h=="object"&&(y=h,h=d)}y=Object.assign({},y),y.autoDestroy=!0,y.transform=a,y.flush=u,y.readableObjectMode=!0;let g=new r(y);return g[o]="",g[i]=new n("utf8"),g.matcher=f,g.mapper=h,g.maxLength=y.maxLength,g.skipOverflow=y.skipOverflow||!1,g.overflow=!1,g._destroy=function(m,_){this._writableState.errorEmitted=!1,_(m)},g}s(p,"Yu"),I(p,"split"),e.exports=p}),r6=Xe((t,e)=>{"use strict";Ae();var r=(oP(),yr(By)),n=(cP(),yr(Hy)).Stream,o=t6(),i=(Kd(),yr(kc)),a=5432,u=Qe.platform==="win32",l=Qe.stderr,d=56,p=7,f=61440,h=32768;function y(R){return(R&f)==h}s(y,"ic"),I(y,"isRegFile");var g=["host","port","database","user","password"],m=g.length,_=g[m-1];function w(){var R=l instanceof n&&l.writable===!0;if(R){var O=Array.prototype.slice.call(arguments).concat(`
`);l.write(i.format.apply(i,O))}}s(w,"Cr"),I(w,"warn"),Object.defineProperty(e.exports,"isWin",{get:I(function(){return u},"get"),set:I(function(R){u=R},"set")}),e.exports.warnTo=function(R){var O=l;return l=R,O},e.exports.getFileName=function(R){var O=R||Qe.env,C=O.PGPASSFILE||(u?r.join(O.APPDATA||"./","postgresql","pgpass.conf"):r.join(O.HOME||"./",".pgpass"));return C},e.exports.usePgPass=function(R,O){return Object.prototype.hasOwnProperty.call(Qe.env,"PGPASSWORD")?!1:u?!0:(O=O||"<unkn>",y(R.mode)?R.mode&(d|p)?(w('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',O),!1):!0:(w('WARNING: password file "%s" is not a plain file',O),!1))};var b=e.exports.match=function(R,O){return g.slice(0,-1).reduce(function(C,$,P){return P==1&&Number(R[$]||a)===Number(O[$])?C&&!0:C&&(O[$]==="*"||O[$]===R[$])},!0)};e.exports.getPassword=function(R,O,C){var $,P=O.pipe(o());function N(V){var q=x(V);q&&k(q)&&b(R,q)&&($=q[_],P.end())}s(N,"s"),I(N,"onLine");var D=I(function(){O.destroy(),C($)},"onEnd"),K=I(function(V){O.destroy(),w("WARNING: error on reading file: %s",V),C(void 0)},"onErr");O.on("error",K),P.on("data",N).on("end",D).on("error",K)};var x=e.exports.parseLine=function(R){if(R.length<11||R.match(/^\s+#/))return null;for(var O="",C="",$=0,P=0,N=0,D={},K=!1,V=I(function(Q,ee,oe){var _e=R.substring(ee,oe);Object.hasOwnProperty.call(Qe.env,"PGPASS_NO_DEESCAPE")||(_e=_e.replace(/\\([:\\])/g,"$1")),D[g[Q]]=_e},"addToObj"),q=0;q<R.length-1;q+=1){if(O=R.charAt(q+1),C=R.charAt(q),K=$==m-1,K){V($,P);break}q>=0&&O==":"&&C!=="\\"&&(V($,P,q+1),P=q+2,$+=1)}return D=Object.keys(D).length===m?D:null,D},k=e.exports.isValidEntry=function(R){for(var O={0:function(D){return D.length>0},1:function(D){return D==="*"?!0:(D=Number(D),isFinite(D)&&D>0&&D<9007199254740992&&Math.floor(D)===D)},2:function(D){return D.length>0},3:function(D){return D.length>0},4:function(D){return D.length>0}},C=0;C<g.length;C+=1){var $=O[C],P=R[g[C]]||"",N=$(P);if(!N)return!1}return!0}}),n6=Xe((t,e)=>{"use strict";Ae();var r=(oP(),yr(By)),n=(sP(),yr(Vy)),o=r6();e.exports=function(i,a){var u=o.getFileName();n.stat(u,function(l,d){if(l||!o.usePgPass(d,u))return a(void 0);var p=n.createReadStream(u);o.getPassword(i,p,a)})},e.exports.warnTo=o.warnTo}),dP={};wn(dP,{default:s(()=>pP,"default")});var pP,o6=Vr(()=>{"use strict";Ae(),pP={}}),i6=Xe((t,e)=>{"use strict";Ae();var r=(Jk(),yr(Zk)),n=(sP(),yr(Vy));function o(i){if(i.charAt(0)==="/"){var u=i.split(" ");return{host:u[0],database:u[1]}}var a=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),u=a.query;for(var l in u)Array.isArray(u[l])&&(u[l]=u[l][u[l].length-1]);var d=(a.auth||":").split(":");if(u.user=d[0],u.password=d.splice(1).join(":"),u.port=a.port,a.protocol=="socket:")return u.host=decodeURI(a.pathname),u.database=a.query.db,u.client_encoding=a.query.encoding,u;u.host||(u.host=a.hostname);var p=a.pathname;if(!u.host&&p&&/^%2f/i.test(p)){var f=p.split("/");u.host=decodeURIComponent(f[0]),p=f.splice(1).join("/")}switch(p&&p.charAt(0)==="/"&&(p=p.slice(1)||null),u.database=p&&decodeURI(p),(u.ssl==="true"||u.ssl==="1")&&(u.ssl=!0),u.ssl==="0"&&(u.ssl=!1),(u.sslcert||u.sslkey||u.sslrootcert||u.sslmode)&&(u.ssl={}),u.sslcert&&(u.ssl.cert=n.readFileSync(u.sslcert).toString()),u.sslkey&&(u.ssl.key=n.readFileSync(u.sslkey).toString()),u.sslrootcert&&(u.ssl.ca=n.readFileSync(u.sslrootcert).toString()),u.sslmode){case"disable":{u.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{u.ssl.rejectUnauthorized=!1;break}}return u}s(o,"Tr"),I(o,"parse"),e.exports=o,o.parse=o}),Gy=Xe((t,e)=>{"use strict";Ae();var r=(o6(),yr(dP)),n=Zd(),o=i6().parse,i=I(function(f,h,y){return y===void 0?y=Qe.env["PG"+f.toUpperCase()]:y===!1||(y=Qe.env[y]),h[f]||y||n[f]},"val"),a=I(function(){switch(Qe.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),u=I(function(f){return"'"+(""+f).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),l=I(function(f,h,y){var g=h[y];g!=null&&f.push(y+"="+u(g))},"add"),d=class{static{s(this,"Br")}constructor(h){h=typeof h=="string"?o(h):h||{},h.connectionString&&(h=Object.assign({},h,o(h.connectionString))),this.user=i("user",h),this.database=i("database",h),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",h),10),this.host=i("host",h),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",h)}),this.binary=i("binary",h),this.options=i("options",h),this.ssl=typeof h.ssl>"u"?a():h.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",h),this.replication=i("replication",h),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",h,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",h,!1),this.statement_timeout=i("statement_timeout",h,!1),this.lock_timeout=i("lock_timeout",h,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",h,!1),this.query_timeout=i("query_timeout",h,!1),h.connectionTimeoutMillis===void 0?this.connect_timeout=Qe.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(h.connectionTimeoutMillis/1e3),h.keepAlive===!1?this.keepalives=0:h.keepAlive===!0&&(this.keepalives=1),typeof h.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(h.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(h){var y=[];l(y,this,"user"),l(y,this,"password"),l(y,this,"port"),l(y,this,"application_name"),l(y,this,"fallback_application_name"),l(y,this,"connect_timeout"),l(y,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(y,g,"sslmode"),l(y,g,"sslca"),l(y,g,"sslkey"),l(y,g,"sslcert"),l(y,g,"sslrootcert"),this.database&&y.push("dbname="+u(this.database)),this.replication&&y.push("replication="+u(this.replication)),this.host&&y.push("host="+u(this.host)),this.isDomainSocket)return h(null,y.join(" "));this.client_encoding&&y.push("client_encoding="+u(this.client_encoding)),r.lookup(this.host,function(m,_){return m?h(m,null):(y.push("hostaddr="+u(_)),h(null,y.join(" ")))})}};I(d,"ConnectionParameters");var p=d;e.exports=p}),s6=Xe((t,e)=>{"use strict";Ae();var r=Gd(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,o=class{static{s(this,"Lr")}constructor(u,l){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=l,this.RowCtor=null,this.rowAsArray=u==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(u){var l;u.text?l=n.exec(u.text):l=n.exec(u.command),l&&(this.command=l[1],l[3]?(this.oid=parseInt(l[2],10),this.rowCount=parseInt(l[3],10)):l[2]&&(this.rowCount=parseInt(l[2],10)))}_parseRowAsArray(u){for(var l=new Array(u.length),d=0,p=u.length;d<p;d++){var f=u[d];f!==null?l[d]=this._parsers[d](f):l[d]=null}return l}parseRow(u){for(var l={},d=0,p=u.length;d<p;d++){var f=u[d],h=this.fields[d].name;f!==null?l[h]=this._parsers[d](f):l[h]=null}return l}addRow(u){this.rows.push(u)}addFields(u){this.fields=u,this.fields.length&&(this._parsers=new Array(u.length));for(var l=0;l<u.length;l++){var d=u[l];this._types?this._parsers[l]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[l]=r.getTypeParser(d.dataTypeID,d.format||"text")}}};I(o,"Result");var i=o;e.exports=i}),a6=Xe((t,e)=>{"use strict";Ae();var{EventEmitter:r}=Mi(),n=s6(),o=Jd(),i=class extends r{static{s(this,"kr")}constructor(l,d,p){super(),l=o.normalizeQueryConfig(l,d,p),this.text=l.text,this.values=l.values,this.rows=l.rows,this.types=l.types,this.name=l.name,this.binary=l.binary,this.portal=l.portal||"",this.callback=l.callback,this._rowMode=l.rowMode,Qe.domain&&l.callback&&(this.callback=Qe.domain.bind(l.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(l){this._checkForMultirow(),this._result.addFields(l.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(l){let d;if(!this._canceledDueToError){try{d=this._result.parseRow(l.fields)}catch(p){this._canceledDueToError=p;return}this.emit("row",d,this._result),this._accumulateRows&&this._result.addRow(d)}}handleCommandComplete(l,d){this._checkForMultirow(),this._result.addCommandComplete(l),this.rows&&d.sync()}handleEmptyQuery(l){this.rows&&l.sync()}handleError(l,d){if(this._canceledDueToError&&(l=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(l);this.emit("error",l)}handleReadyForQuery(l){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,l);if(this.callback)try{this.callback(null,this._results)}catch(d){Qe.nextTick(()=>{throw d})}this.emit("end",this._results)}submit(l){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let d=l.parsedStatements[this.name];return this.text&&d&&this.text!==d?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(l):l.query(this.text),null)}hasBeenParsed(l){return this.name&&l.parsedStatements[this.name]}handlePortalSuspended(l){this._getRows(l,this.rows)}_getRows(l,d){l.execute({portal:this.portal,rows:d}),d?l.flush():l.sync()}prepare(l){this.isPreparedStatement=!0,this.hasBeenParsed(l)||l.parse({text:this.text,name:this.name,types:this.types});try{l.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:o.prepareValue})}catch(d){this.handleError(d,l);return}l.describe({type:"P",name:this.portal||""}),this._getRows(l,this.rows)}handleCopyInResponse(l){l.sendCopyFail("No source stream defined")}handleCopyData(l,d){}};I(i,"Query");var a=i;e.exports=a}),mP=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{static{s(this,"Kr")}constructor(q,Q,ee){super(q),this.length=Q,this.name=ee}};I(e,"DatabaseError");var r=e;t.DatabaseError=r;var n=class{static{s(this,"Yr")}constructor(q,Q){this.length=q,this.chunk=Q,this.name="copyData"}};I(n,"CopyDataMessage");var o=n;t.CopyDataMessage=o;var i=class{static{s(this,"Zr")}constructor(q,Q,ee,oe){this.length=q,this.name=Q,this.binary=ee,this.columnTypes=new Array(oe)}};I(i,"CopyResponse");var a=i;t.CopyResponse=a;var u=class{static{s(this,"Jr")}constructor(q,Q,ee,oe,_e,Te,We){this.name=q,this.tableID=Q,this.columnID=ee,this.dataTypeID=oe,this.dataTypeSize=_e,this.dataTypeModifier=Te,this.format=We}};I(u,"Field");var l=u;t.Field=l;var d=class{static{s(this,"Xr")}constructor(q,Q){this.length=q,this.fieldCount=Q,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};I(d,"RowDescriptionMessage");var p=d;t.RowDescriptionMessage=p;var f=class{static{s(this,"en")}constructor(q,Q){this.length=q,this.parameterCount=Q,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};I(f,"ParameterDescriptionMessage");var h=f;t.ParameterDescriptionMessage=h;var y=class{static{s(this,"tn")}constructor(q,Q,ee){this.length=q,this.parameterName=Q,this.parameterValue=ee,this.name="parameterStatus"}};I(y,"ParameterStatusMessage");var g=y;t.ParameterStatusMessage=g;var m=class{static{s(this,"rn")}constructor(q,Q){this.length=q,this.salt=Q,this.name="authenticationMD5Password"}};I(m,"AuthenticationMD5Password");var _=m;t.AuthenticationMD5Password=_;var w=class{static{s(this,"nn")}constructor(q,Q,ee){this.length=q,this.processID=Q,this.secretKey=ee,this.name="backendKeyData"}};I(w,"BackendKeyDataMessage");var b=w;t.BackendKeyDataMessage=b;var x=class{static{s(this,"sn")}constructor(q,Q,ee,oe){this.length=q,this.processId=Q,this.channel=ee,this.payload=oe,this.name="notification"}};I(x,"NotificationResponseMessage");var k=x;t.NotificationResponseMessage=k;var R=class{static{s(this,"on")}constructor(q,Q){this.length=q,this.status=Q,this.name="readyForQuery"}};I(R,"ReadyForQueryMessage");var O=R;t.ReadyForQueryMessage=O;var C=class{static{s(this,"an")}constructor(q,Q){this.length=q,this.text=Q,this.name="commandComplete"}};I(C,"CommandCompleteMessage");var $=C;t.CommandCompleteMessage=$;var P=class{static{s(this,"un")}constructor(q,Q){this.length=q,this.fields=Q,this.name="dataRow",this.fieldCount=Q.length}};I(P,"DataRowMessage");var N=P;t.DataRowMessage=N;var D=class{static{s(this,"cn")}constructor(q,Q){this.length=q,this.message=Q,this.name="notice"}};I(D,"NoticeMessage");var K=D;t.NoticeMessage=K}),c6=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{static{s(this,"hn")}constructor(o=256){this.size=o,this.offset=5,this.headerPosition=0,this.buffer=ze.allocUnsafe(o)}ensure(o){if(this.buffer.length-this.offset<o){let i=this.buffer,a=i.length+(i.length>>1)+o;this.buffer=ze.allocUnsafe(a),i.copy(this.buffer)}}addInt32(o){return this.ensure(4),this.buffer[this.offset++]=o>>>24&255,this.buffer[this.offset++]=o>>>16&255,this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addInt16(o){return this.ensure(2),this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addCString(o){if(!o)this.ensure(1);else{let i=ze.byteLength(o);this.ensure(i+1),this.buffer.write(o,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(o=""){let i=ze.byteLength(o);return this.ensure(i),this.buffer.write(o,this.offset),this.offset+=i,this}add(o){return this.ensure(o.length),o.copy(this.buffer,this.offset),this.offset+=o.length,this}join(o){if(o){this.buffer[this.headerPosition]=o;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(o?0:5,this.offset)}flush(o){let i=this.join(o);return this.offset=5,this.headerPosition=0,this.buffer=ze.allocUnsafe(this.size),i}};I(e,"Writer");var r=e;t.Writer=r}),u6=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=c6(),r=new e.Writer,n=I(q=>{r.addInt16(3).addInt16(0);for(let oe of Object.keys(q))r.addCString(oe).addCString(q[oe]);r.addCString("client_encoding").addCString("UTF8");let Q=r.addCString("").flush(),ee=Q.length+4;return new e.Writer().addInt32(ee).add(Q).flush()},"startup"),o=I(()=>{let q=ze.allocUnsafe(8);return q.writeInt32BE(8,0),q.writeInt32BE(80877103,4),q},"requestSsl"),i=I(q=>r.addCString(q).flush(112),"password"),a=I(function(q,Q){return r.addCString(q).addInt32(ze.byteLength(Q)).addString(Q),r.flush(112)},"sendSASLInitialResponseMessage"),u=I(function(q){return r.addString(q).flush(112)},"sendSCRAMClientFinalMessage"),l=I(q=>r.addCString(q).flush(81),"query"),d=[],p=I(q=>{let Q=q.name||"";Q.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Q,Q.length),console.error("This can cause conflicts and silent errors executing queries"));let ee=q.types||d,oe=ee.length,_e=r.addCString(Q).addCString(q.text).addInt16(oe);for(let Te=0;Te<oe;Te++)_e.addInt32(ee[Te]);return r.flush(80)},"parse"),f=new e.Writer,h=I(function(q,Q){for(let ee=0;ee<q.length;ee++){let oe=Q?Q(q[ee],ee):q[ee];oe==null?(r.addInt16(0),f.addInt32(-1)):oe instanceof ze?(r.addInt16(1),f.addInt32(oe.length),f.add(oe)):(r.addInt16(0),f.addInt32(ze.byteLength(oe)),f.addString(oe))}},"writeValues"),y=I((q={})=>{let Q=q.portal||"",ee=q.statement||"",oe=q.binary||!1,_e=q.values||d,Te=_e.length;return r.addCString(Q).addCString(ee),r.addInt16(Te),h(_e,q.valueMapper),r.addInt16(Te),r.add(f.flush()),r.addInt16(oe?1:0),r.flush(66)},"bind"),g=ze.from([69,0,0,0,9,0,0,0,0,0]),m=I(q=>{if(!q||!q.portal&&!q.rows)return g;let Q=q.portal||"",ee=q.rows||0,oe=ze.byteLength(Q),_e=4+oe+1+4,Te=ze.allocUnsafe(1+_e);return Te[0]=69,Te.writeInt32BE(_e,1),Te.write(Q,5,"utf-8"),Te[oe+5]=0,Te.writeUInt32BE(ee,Te.length-4),Te},"execute"),_=I((q,Q)=>{let ee=ze.allocUnsafe(16);return ee.writeInt32BE(16,0),ee.writeInt16BE(1234,4),ee.writeInt16BE(5678,6),ee.writeInt32BE(q,8),ee.writeInt32BE(Q,12),ee},"cancel"),w=I((q,Q)=>{let ee=4+ze.byteLength(Q)+1,oe=ze.allocUnsafe(1+ee);return oe[0]=q,oe.writeInt32BE(ee,1),oe.write(Q,5,"utf-8"),oe[ee]=0,oe},"cstringMessage"),b=r.addCString("P").flush(68),x=r.addCString("S").flush(68),k=I(q=>q.name?w(68,`${q.type}${q.name||""}`):q.type==="P"?b:x,"describe"),R=I(q=>{let Q=`${q.type}${q.name||""}`;return w(67,Q)},"close"),O=I(q=>r.add(q).flush(100),"copyData"),C=I(q=>w(102,q),"copyFail"),$=I(q=>ze.from([q,0,0,0,4]),"codeOnlyBuffer"),P=$(72),N=$(83),D=$(88),K=$(99),V={startup:n,password:i,requestSsl:o,sendSASLInitialResponseMessage:a,sendSCRAMClientFinalMessage:u,query:l,parse:p,bind:y,execute:m,describe:k,close:R,flush:I(()=>P,"flush"),sync:I(()=>N,"sync"),end:I(()=>D,"end"),copyData:O,copyDone:I(()=>K,"copyDone"),copyFail:C,cancel:_};t.serialize=V}),l6=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=ze.allocUnsafe(0),r=class{static{s(this,"mn")}constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,a){this.offset=i,this.buffer=a}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let a=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,a}cstring(){let i=this.offset,a=i;for(;this.buffer[a++]!==0;);return this.offset=a,this.buffer.toString(this.encoding,i,a-1)}bytes(i){let a=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,a}};I(r,"BufferReader");var n=r;t.BufferReader=n}),d6=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=mP(),r=l6(),n=1,o=4,i=n+o,a=ze.allocUnsafe(0),u=class{static{s(this,"bn")}constructor(p){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,p?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=p?.mode||"text"}parse(p,f){this.mergeBuffer(p);let h=this.bufferOffset+this.bufferLength,y=this.bufferOffset;for(;y+i<=h;){let g=this.buffer[y],m=this.buffer.readUInt32BE(y+n),_=n+m;if(_+y<=h){let w=this.handlePacket(y+i,g,m,this.buffer);f(w),y+=_}else break}y===h?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=h-y,this.bufferOffset=y)}mergeBuffer(p){if(this.bufferLength>0){let f=this.bufferLength+p.byteLength;if(f+this.bufferOffset>this.buffer.byteLength){let h;if(f<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)h=this.buffer;else{let y=this.buffer.byteLength*2;for(;f>=y;)y*=2;h=ze.allocUnsafe(y)}this.buffer.copy(h,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=h,this.bufferOffset=0}p.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=f}else this.buffer=p,this.bufferOffset=0,this.bufferLength=p.byteLength}handlePacket(p,f,h,y){switch(f){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(p,h,y);case 67:return this.parseCommandCompleteMessage(p,h,y);case 90:return this.parseReadyForQueryMessage(p,h,y);case 65:return this.parseNotificationMessage(p,h,y);case 82:return this.parseAuthenticationResponse(p,h,y);case 83:return this.parseParameterStatusMessage(p,h,y);case 75:return this.parseBackendKeyData(p,h,y);case 69:return this.parseErrorMessage(p,h,y,"error");case 78:return this.parseErrorMessage(p,h,y,"notice");case 84:return this.parseRowDescriptionMessage(p,h,y);case 116:return this.parseParameterDescriptionMessage(p,h,y);case 71:return this.parseCopyInMessage(p,h,y);case 72:return this.parseCopyOutMessage(p,h,y);case 100:return this.parseCopyData(p,h,y);default:return new e.DatabaseError("received invalid response: "+f.toString(16),h,"error")}}parseReadyForQueryMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.string(1);return new e.ReadyForQueryMessage(f,y)}parseCommandCompleteMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.cstring();return new e.CommandCompleteMessage(f,y)}parseCopyData(p,f,h){let y=h.slice(p,p+(f-4));return new e.CopyDataMessage(f,y)}parseCopyInMessage(p,f,h){return this.parseCopyMessage(p,f,h,"copyInResponse")}parseCopyOutMessage(p,f,h){return this.parseCopyMessage(p,f,h,"copyOutResponse")}parseCopyMessage(p,f,h,y){this.reader.setBuffer(p,h);let g=this.reader.byte()!==0,m=this.reader.int16(),_=new e.CopyResponse(f,y,g,m);for(let w=0;w<m;w++)_.columnTypes[w]=this.reader.int16();return _}parseNotificationMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.cstring(),m=this.reader.cstring();return new e.NotificationResponseMessage(f,y,g,m)}parseRowDescriptionMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.RowDescriptionMessage(f,y);for(let m=0;m<y;m++)g.fields[m]=this.parseField();return g}parseField(){let p=this.reader.cstring(),f=this.reader.uint32(),h=this.reader.int16(),y=this.reader.uint32(),g=this.reader.int16(),m=this.reader.int32(),_=this.reader.int16()===0?"text":"binary";return new e.Field(p,f,h,y,g,m,_)}parseParameterDescriptionMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.ParameterDescriptionMessage(f,y);for(let m=0;m<y;m++)g.dataTypeIDs[m]=this.reader.int32();return g}parseDataRowMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new Array(y);for(let m=0;m<y;m++){let _=this.reader.int32();g[m]=_===-1?null:this.reader.string(_)}return new e.DataRowMessage(f,g)}parseParameterStatusMessage(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(f,y,g)}parseBackendKeyData(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(f,y,g)}parseAuthenticationResponse(p,f,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g={name:"authenticationOk",length:f};switch(y){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let m=this.reader.bytes(4);return new e.AuthenticationMD5Password(f,m)}break;case 10:{g.name="authenticationSASL",g.mechanisms=[];let m;do m=this.reader.cstring(),m&&g.mechanisms.push(m);while(m)}break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(f-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(f-8);break;default:throw new Error("Unknown authenticationOk message type "+y)}return g}parseErrorMessage(p,f,h,y){this.reader.setBuffer(p,h);let g={},m=this.reader.string(1);for(;m!=="\0";)g[m]=this.reader.cstring(),m=this.reader.string(1);let _=g.M,w=y==="notice"?new e.NoticeMessage(f,_):new e.DatabaseError(_,f,y);return w.severity=g.S,w.code=g.C,w.detail=g.D,w.hint=g.H,w.position=g.P,w.internalPosition=g.p,w.internalQuery=g.q,w.where=g.W,w.schema=g.s,w.table=g.t,w.column=g.c,w.dataType=g.d,w.constraint=g.n,w.file=g.F,w.line=g.L,w.routine=g.R,w}};I(u,"Parser");var l=u;t.Parser=l}),fP=Xe(t=>{"use strict";Ae(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=mP();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:I(function(){return e.DatabaseError},"get")});var r=u6();Object.defineProperty(t,"serialize",{enumerable:!0,get:I(function(){return r.serialize},"get")});var n=d6();function o(i,a){let u=new n.Parser;return i.on("data",l=>u.parse(l,a)),new Promise(l=>i.on("end",()=>l()))}s(o,"Hc"),I(o,"parse"),t.parse=o}),hP={};wn(hP,{connect:s(()=>gP,"connect")});function gP({socket:t,servername:e}){return t.startTls(e),t}s(gP,"$c");var p6=Vr(()=>{"use strict";Ae(),I(gP,"connect")}),yP=Xe((t,e)=>{"use strict";Ae();var r=(Ic(),yr(Hk)),n=Mi().EventEmitter,{parse:o,serialize:i}=fP(),a=i.flush(),u=i.sync(),l=i.end(),d=class extends n{static{s(this,"Sn")}constructor(h){super(),h=h||{},this.stream=h.stream||new r.Socket,this._keepAlive=h.keepAlive,this._keepAliveInitialDelayMillis=h.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=h.ssl||!1,this._ending=!1,this._emitMessage=!1;var y=this;this.on("newListener",function(g){g==="message"&&(y._emitMessage=!0)})}connect(h,y){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(h,y),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let m=I(function(_){g._ending&&(_.code==="ECONNRESET"||_.code==="EPIPE")||g.emit("error",_)},"reportStreamError");if(this.stream.on("error",m),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(_){var w=_.toString("utf8");switch(w){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var b=(p6(),yr(hP));let x={socket:g.stream};g.ssl!==!0&&(Object.assign(x,g.ssl),"key"in g.ssl&&(x.key=g.ssl.key)),r.isIP(y)===0&&(x.servername=y);try{g.stream=b.connect(x)}catch(k){return g.emit("error",k)}g.attachListeners(g.stream),g.stream.on("error",m),g.emit("sslconnect")})}attachListeners(h){h.on("end",()=>{this.emit("end")}),o(h,y=>{var g=y.name==="error"?"errorMessage":y.name;this._emitMessage&&this.emit("message",y),this.emit(g,y)})}requestSsl(){this.stream.write(i.requestSsl())}startup(h){this.stream.write(i.startup(h))}cancel(h,y){this._send(i.cancel(h,y))}password(h){this._send(i.password(h))}sendSASLInitialResponseMessage(h,y){this._send(i.sendSASLInitialResponseMessage(h,y))}sendSCRAMClientFinalMessage(h){this._send(i.sendSCRAMClientFinalMessage(h))}_send(h){return this.stream.writable?this.stream.write(h):!1}query(h){this._send(i.query(h))}parse(h){this._send(i.parse(h))}bind(h){this._send(i.bind(h))}execute(h){this._send(i.execute(h))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(u)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(h){this._send(i.close(h))}describe(h){this._send(i.describe(h))}sendCopyFromChunk(h){this._send(i.copyData(h))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(h){this._send(i.copyFail(h))}};I(d,"Connection");var p=d;e.exports=p}),m6=Xe((t,e)=>{"use strict";Ae();var r=Mi().EventEmitter,n=(Kd(),yr(kc)),o=Jd(),i=YF(),a=n6(),u=qy(),l=Gy(),d=a6(),p=Zd(),f=yP(),h=class extends r{static{s(this,"Cn")}constructor(m){super(),this.connectionParameters=new l(m),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var _=m||{};this._Promise=_.Promise||Hd.Promise,this._types=new u(_.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=_.connection||new f({stream:_.stream,ssl:this.connectionParameters.ssl,keepAlive:_.keepAlive||!1,keepAliveInitialDelayMillis:_.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=_.binary||p.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=_.connectionTimeoutMillis||0}_errorAllQueries(m){let _=I(w=>{Qe.nextTick(()=>{w.handleError(m,this.connection)})},"enqueueError");this.activeQuery&&(_(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(_),this.queryQueue.length=0}_connect(m){var _=this,w=this.connection;if(this._connectionCallback=m,this._connecting||this._connected){let b=new Error("Client has already been connected. You cannot reuse a client.");Qe.nextTick(()=>{m(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{w._ending=!0,w.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){_.ssl?w.requestSsl():w.startup(_.getStartupConf())}),w.on("sslconnect",function(){w.startup(_.getStartupConf())}),this._attachListeners(w),w.once("end",()=>{let b=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(b),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(b):this._handleErrorEvent(b):this._connectionError||this._handleErrorEvent(b)),Qe.nextTick(()=>{this.emit("end")})})}connect(m){if(m){this._connect(m);return}return new this._Promise((_,w)=>{this._connect(b=>{b?w(b):_()})})}_attachListeners(m){m.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),m.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),m.on("authenticationSASL",this._handleAuthSASL.bind(this)),m.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),m.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),m.on("backendKeyData",this._handleBackendKeyData.bind(this)),m.on("error",this._handleErrorEvent.bind(this)),m.on("errorMessage",this._handleErrorMessage.bind(this)),m.on("readyForQuery",this._handleReadyForQuery.bind(this)),m.on("notice",this._handleNotice.bind(this)),m.on("rowDescription",this._handleRowDescription.bind(this)),m.on("dataRow",this._handleDataRow.bind(this)),m.on("portalSuspended",this._handlePortalSuspended.bind(this)),m.on("emptyQuery",this._handleEmptyQuery.bind(this)),m.on("commandComplete",this._handleCommandComplete.bind(this)),m.on("parseComplete",this._handleParseComplete.bind(this)),m.on("copyInResponse",this._handleCopyInResponse.bind(this)),m.on("copyData",this._handleCopyData.bind(this)),m.on("notification",this._handleNotification.bind(this))}_checkPgPass(m){let _=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(w=>{if(w!==void 0){if(typeof w!="string"){_.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=w}else this.connectionParameters.password=this.password=null;m()}).catch(w=>{_.emit("error",w)}):this.password!==null?m():a(this.connectionParameters,w=>{w!==void 0&&(this.connectionParameters.password=this.password=w),m()})}_handleAuthCleartextPassword(m){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(m){this._checkPgPass(()=>{let _=o.postgresMd5PasswordHash(this.user,this.password,m.salt);this.connection.password(_)})}_handleAuthSASL(m){this._checkPgPass(()=>{this.saslSession=i.startSession(m.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(m){i.continueSession(this.saslSession,this.password,m.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(m){i.finalizeSession(this.saslSession,m.data),this.saslSession=null}_handleBackendKeyData(m){this.processID=m.processID,this.secretKey=m.secretKey}_handleReadyForQuery(m){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:_}=this;this.activeQuery=null,this.readyForQuery=!0,_&&_.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(m){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(m);this.emit("error",m)}}_handleErrorEvent(m){if(this._connecting)return this._handleErrorWhileConnecting(m);this._queryable=!1,this._errorAllQueries(m),this.emit("error",m)}_handleErrorMessage(m){if(this._connecting)return this._handleErrorWhileConnecting(m);let _=this.activeQuery;if(!_){this._handleErrorEvent(m);return}this.activeQuery=null,_.handleError(m,this.connection)}_handleRowDescription(m){this.activeQuery.handleRowDescription(m)}_handleDataRow(m){this.activeQuery.handleDataRow(m)}_handlePortalSuspended(m){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(m){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(m){this.activeQuery.handleCommandComplete(m,this.connection)}_handleParseComplete(m){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(m){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(m){this.activeQuery.handleCopyData(m,this.connection)}_handleNotification(m){this.emit("notification",m)}_handleNotice(m){this.emit("notice",m)}getStartupConf(){var m=this.connectionParameters,_={user:m.user,database:m.database},w=m.application_name||m.fallback_application_name;return w&&(_.application_name=w),m.replication&&(_.replication=""+m.replication),m.statement_timeout&&(_.statement_timeout=String(parseInt(m.statement_timeout,10))),m.lock_timeout&&(_.lock_timeout=String(parseInt(m.lock_timeout,10))),m.idle_in_transaction_session_timeout&&(_.idle_in_transaction_session_timeout=String(parseInt(m.idle_in_transaction_session_timeout,10))),m.options&&(_.options=m.options),_}cancel(m,_){if(m.activeQuery===_){var w=this.connection;this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){w.cancel(m.processID,m.secretKey)})}else m.queryQueue.indexOf(_)!==-1&&m.queryQueue.splice(m.queryQueue.indexOf(_),1)}setTypeParser(m,_,w){return this._types.setTypeParser(m,_,w)}getTypeParser(m,_){return this._types.getTypeParser(m,_)}escapeIdentifier(m){return'"'+m.replace(/"/g,'""')+'"'}escapeLiteral(m){for(var _=!1,w="'",b=0;b<m.length;b++){var x=m[b];x==="'"?w+=x+x:x==="\\"?(w+=x+x,_=!0):w+=x}return w+="'",_===!0&&(w=" E"+w),w}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let m=this.activeQuery.submit(this.connection);m&&Qe.nextTick(()=>{this.activeQuery.handleError(m,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(m,_,w){var b,x,k,R,O;if(m==null)throw new TypeError("Client was passed a null or undefined query");return typeof m.submit=="function"?(k=m.query_timeout||this.connectionParameters.query_timeout,x=b=m,typeof _=="function"&&(b.callback=b.callback||_)):(k=this.connectionParameters.query_timeout,b=new d(m,_,w),b.callback||(x=new this._Promise((C,$)=>{b.callback=(P,N)=>P?$(P):C(N)}))),k&&(O=b.callback,R=setTimeout(()=>{var C=new Error("Query read timeout");Qe.nextTick(()=>{b.handleError(C,this.connection)}),O(C),b.callback=()=>{};var $=this.queryQueue.indexOf(b);$>-1&&this.queryQueue.splice($,1),this._pulseQueryQueue()},k),b.callback=(C,$)=>{clearTimeout(R),O(C,$)}),this.binary&&!b.binary&&(b.binary=!0),b._result&&!b._result._types&&(b._result._types=this._types),this._queryable?this._ending?(Qe.nextTick(()=>{b.handleError(new Error("Client was closed and is not queryable"),this.connection)}),x):(this.queryQueue.push(b),this._pulseQueryQueue(),x):(Qe.nextTick(()=>{b.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),x)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(m){if(this._ending=!0,!this.connection._connecting)if(m)m();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),m)this.connection.once("end",m);else return new this._Promise(_=>{this.connection.once("end",_)})}};I(h,"Client");var y=h;y.Query=d,e.exports=y}),f6=Xe((t,e)=>{"use strict";Ae();var r=Mi().EventEmitter,n=I(function(){},"NOOP"),o=I((g,m)=>{let _=g.findIndex(m);return _===-1?void 0:g.splice(_,1)[0]},"removeWhere"),i=class{static{s(this,"Tn")}constructor(m,_,w){this.client=m,this.idleListener=_,this.timeoutId=w}};I(i,"IdleItem");var a=i,u=class{static{s(this,"Pn")}constructor(m){this.callback=m}};I(u,"PendingItem");var l=u;function d(){throw new Error("Release called on client which has already been released to the pool.")}s(d,"il"),I(d,"throwOnDoubleRelease");function p(g,m){if(m)return{callback:m,result:void 0};let _,w,b=I(function(k,R){k?_(k):w(R)},"cb"),x=new g(function(k,R){w=k,_=R}).catch(k=>{throw Error.captureStackTrace(k),k});return{callback:b,result:x}}s(p,"Dt"),I(p,"promisify");function f(g,m){return I(s(function _(w){w.client=m,m.removeListener("error",_),m.on("error",()=>{g.log("additional client error after disconnection due to error",w)}),g._remove(m),g.emit("error",w,m)},"t"),"idleListener")}s(f,"sl"),I(f,"makeIdleListener");var h=class extends r{static{s(this,"Bn")}constructor(m,_){super(),this.options=Object.assign({},m),m!=null&&"password"in m&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:m.password}),m!=null&&m.ssl&&m.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||_||Wd().Client,this.Promise=this.options.Promise||Hd.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(_=>{this._remove(_.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let m=this._pendingQueue.shift();if(this._idle.length){let _=this._idle.pop();clearTimeout(_.timeoutId);let w=_.client;w.ref&&w.ref();let b=_.idleListener;return this._acquireClient(w,m,b,!1)}if(!this._isFull())return this.newClient(m);throw new Error("unexpected condition")}_remove(m){let _=o(this._idle,w=>w.client===m);_!==void 0&&clearTimeout(_.timeoutId),this._clients=this._clients.filter(w=>w!==m),m.end(),this.emit("remove",m)}connect(m){if(this.ending){let b=new Error("Cannot use a pool after calling end on the pool");return m?m(b):this.Promise.reject(b)}let _=p(this.Promise,m),w=_.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Qe.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(_.callback)),w;let b=I((R,O,C)=>{clearTimeout(k),_.callback(R,O,C)},"queueCallback"),x=new l(b),k=setTimeout(()=>{o(this._pendingQueue,R=>R.callback===b),x.timedOut=!0,_.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return k.unref&&k.unref(),this._pendingQueue.push(x),w}return this.newClient(new l(_.callback)),w}newClient(m){let _=new this.Client(this.options);this._clients.push(_);let w=f(this,_);this.log("checking client timeout");let b,x=!1;this.options.connectionTimeoutMillis&&(b=setTimeout(()=>{this.log("ending client due to timeout"),x=!0,_.connection?_.connection.stream.destroy():_.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),_.connect(k=>{if(b&&clearTimeout(b),_.on("error",w),k)this.log("client failed to connect",k),this._clients=this._clients.filter(R=>R!==_),x&&(k=new Error("Connection terminated due to connection timeout",{cause:k})),this._pulseQueue(),m.timedOut||m.callback(k,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let R=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(_),this._idle.findIndex(O=>O.client===_)!==-1&&this._acquireClient(_,new l((O,C,$)=>$()),w,!1)},this.options.maxLifetimeSeconds*1e3);R.unref(),_.once("end",()=>clearTimeout(R))}return this._acquireClient(_,m,w,!0)}})}_acquireClient(m,_,w,b){b&&this.emit("connect",m),this.emit("acquire",m),m.release=this._releaseOnce(m,w),m.removeListener("error",w),_.timedOut?b&&this.options.verify?this.options.verify(m,m.release):m.release():b&&this.options.verify?this.options.verify(m,x=>{if(x)return m.release(x),_.callback(x,void 0,n);_.callback(void 0,m,m.release)}):_.callback(void 0,m,m.release)}_releaseOnce(m,_){let w=!1;return b=>{w&&d(),w=!0,this._release(m,_,b)}}_release(m,_,w){if(m.on("error",_),m._poolUseCount=(m._poolUseCount||0)+1,this.emit("release",w,m),w||this.ending||!m._queryable||m._ending||m._poolUseCount>=this.options.maxUses){m._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(m),this._pulseQueue();return}if(this._expired.has(m)){this.log("remove expired client"),this._expired.delete(m),this._remove(m),this._pulseQueue();return}let b;this.options.idleTimeoutMillis&&this._isAboveMin()&&(b=setTimeout(()=>{this.log("remove idle client"),this._remove(m)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&b.unref()),this.options.allowExitOnIdle&&m.unref(),this._idle.push(new a(m,_,b)),this._pulseQueue()}query(m,_,w){if(typeof m=="function"){let x=p(this.Promise,m);return zy(function(){return x.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),x.result}typeof _=="function"&&(w=_,_=void 0);let b=p(this.Promise,w);return w=b.callback,this.connect((x,k)=>{if(x)return w(x);let R=!1,O=I(C=>{R||(R=!0,k.release(C),w(C))},"onError");k.once("error",O),this.log("dispatching query");try{k.query(m,_,(C,$)=>{if(this.log("query dispatched"),k.removeListener("error",O),!R)return R=!0,k.release(C),C?w(C):w(void 0,$)})}catch(C){return k.release(C),w(C)}}),b.result}end(m){if(this.log("ending"),this.ending){let w=new Error("Called end on pool more than once");return m?m(w):this.Promise.reject(w)}this.ending=!0;let _=p(this.Promise,m);return this._endCallback=_.callback,this._pulseQueue(),_.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((m,_)=>m+(this._expired.has(_)?1:0),0)}get totalCount(){return this._clients.length}};I(h,"Pool");var y=h;e.exports=y}),vP={};wn(vP,{default:s(()=>_P,"default")});var _P,h6=Vr(()=>{"use strict";Ae(),_P={}}),g6=Xe((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),y6=Xe((t,e)=>{"use strict";Ae();var r=Mi().EventEmitter,n=(Kd(),yr(kc)),o=Jd(),i=e.exports=function(u,l,d){r.call(this),u=o.normalizeQueryConfig(u,l,d),this.text=u.text,this.values=u.values,this.name=u.name,this.callback=u.callback,this.state="new",this._arrayMode=u.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(p){p==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,r);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(u){var l=this.native.pq.resultErrorFields();if(l)for(var d in l){var p=a[d]||d;u[p]=l[d]}this.callback?this.callback(u):this.emit("error",u),this.state="error"},i.prototype.then=function(u,l){return this._getPromise().then(u,l)},i.prototype.catch=function(u){return this._getPromise().catch(u)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(u,l){this._once("end",u),this._once("error",l)}.bind(this)),this._promise)},i.prototype.submit=function(u){this.state="running";var l=this;this.native=u.native,u.native.arrayMode=this._arrayMode;var d=I(function(h,y,g){if(u.native.arrayMode=!1,zy(function(){l.emit("_done")}),h)return l.handleError(h);l._emitRowEvents&&(g.length>1?y.forEach((m,_)=>{m.forEach(w=>{l.emit("row",w,g[_])})}):y.forEach(function(m){l.emit("row",m,g)})),l.state="end",l.emit("end",g),l.callback&&l.callback(null,g)},"after");if(Qe.domain&&(d=Qe.domain.bind(d)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var p=(this.values||[]).map(o.prepareValue);if(u.namedQueries[this.name]){if(this.text&&u.namedQueries[this.name]!==this.text){let h=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return d(h)}return u.native.execute(this.name,p,d)}return u.native.prepare(this.name,this.text,p.length,function(h){return h?d(h):(u.namedQueries[l.name]=l.text,l.native.execute(l.name,p,d))})}else if(this.values){if(!Array.isArray(this.values)){let h=new Error("Query values must be an array");return d(h)}var f=this.values.map(o.prepareValue);u.native.query(this.text,f,d)}else u.native.query(this.text,d)}}),v6=Xe((t,e)=>{"use strict";Ae();var r=(h6(),yr(vP)),n=qy(),o=g6(),i=Mi().EventEmitter,a=(Kd(),yr(kc)),u=Gy(),l=y6(),d=e.exports=function(p){i.call(this),p=p||{},this._Promise=p.Promise||Hd.Promise,this._types=new n(p.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var f=this.connectionParameters=new u(p);this.user=f.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),this.database=f.database,this.host=f.host,this.port=f.port,this.namedQueries={}};d.Query=l,a.inherits(d,i),d.prototype._errorAllQueries=function(p){let f=I(h=>{Qe.nextTick(()=>{h.native=this.native,h.handleError(p)})},"enqueueError");this._hasActiveQuery()&&(f(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(f),this._queryQueue.length=0},d.prototype._connect=function(p){var f=this;if(this._connecting){Qe.nextTick(()=>p(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(h,y){if(h)return p(h);f.native.connect(y,function(g){if(g)return f.native.end(),p(g);f._connected=!0,f.native.on("error",function(m){f._queryable=!1,f._errorAllQueries(m),f.emit("error",m)}),f.native.on("notification",function(m){f.emit("notification",{channel:m.relname,payload:m.extra})}),f.emit("connect"),f._pulseQueryQueue(!0),p()})})},d.prototype.connect=function(p){if(p){this._connect(p);return}return new this._Promise((f,h)=>{this._connect(y=>{y?h(y):f()})})},d.prototype.query=function(p,f,h){var y,g,m,_,w;if(p==null)throw new TypeError("Client was passed a null or undefined query");if(typeof p.submit=="function")m=p.query_timeout||this.connectionParameters.query_timeout,g=y=p,typeof f=="function"&&(p.callback=f);else if(m=this.connectionParameters.query_timeout,y=new l(p,f,h),!y.callback){let b,x;g=new this._Promise((k,R)=>{b=k,x=R}),y.callback=(k,R)=>k?x(k):b(R)}return m&&(w=y.callback,_=setTimeout(()=>{var b=new Error("Query read timeout");Qe.nextTick(()=>{y.handleError(b,this.connection)}),w(b),y.callback=()=>{};var x=this._queryQueue.indexOf(y);x>-1&&this._queryQueue.splice(x,1),this._pulseQueryQueue()},m),y.callback=(b,x)=>{clearTimeout(_),w(b,x)}),this._queryable?this._ending?(y.native=this.native,Qe.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(y),this._pulseQueryQueue(),g):(y.native=this.native,Qe.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},d.prototype.end=function(p){var f=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,p));var h;return p||(h=new this._Promise(function(y,g){p=I(m=>m?g(m):y(),"cb")})),this.native.end(function(){f._errorAllQueries(new Error("Connection terminated")),Qe.nextTick(()=>{f.emit("end"),p&&p()})}),h},d.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},d.prototype._pulseQueryQueue=function(p){if(this._connected&&!this._hasActiveQuery()){var f=this._queryQueue.shift();if(!f){p||this.emit("drain");return}this._activeQuery=f,f.submit(this);var h=this;f.once("_done",function(){h._pulseQueryQueue()})}},d.prototype.cancel=function(p){this._activeQuery===p?this.native.cancel(function(){}):this._queryQueue.indexOf(p)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(p),1)},d.prototype.ref=function(){},d.prototype.unref=function(){},d.prototype.setTypeParser=function(p,f,h){return this._types.setTypeParser(p,f,h)},d.prototype.getTypeParser=function(p,f){return this._types.getTypeParser(p,f)}}),zk=Xe((t,e)=>{"use strict";Ae(),e.exports=v6()}),Wd=Xe((t,e)=>{"use strict";Ae();var r=m6(),n=Zd(),o=yP(),i=f6(),{DatabaseError:a}=fP(),u=I(d=>{var p;return p=class extends i{static{s(this,"e")}constructor(f){super(f,d)}},I(p,"BoundPool"),p},"poolFactory"),l=I(function(d){this.defaults=n,this.Client=d,this.Query=this.Client.Query,this.Pool=u(this.Client),this._pools=[],this.Connection=o,this.types=Gd(),this.DatabaseError=a},"PG");typeof Qe.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new l(zk()):(e.exports=new l(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var d=null;try{d=new l(zk())}catch(p){if(p.code!=="MODULE_NOT_FOUND")throw p}return Object.defineProperty(e.exports,"native",{value:d}),d}}))});Ae();Ae();Ic();Jk();Ae();var _6=Object.defineProperty,b6=Object.defineProperties,w6=Object.getOwnPropertyDescriptors,Lk=Object.getOwnPropertySymbols,x6=Object.prototype.hasOwnProperty,S6=Object.prototype.propertyIsEnumerable,qk=I((t,e,r)=>e in t?_6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),T6=I((t,e)=>{for(var r in e||(e={}))x6.call(e,r)&&qk(t,r,e[r]);if(Lk)for(var r of Lk(e))S6.call(e,r)&&qk(t,r,e[r]);return t},"__spreadValues"),E6=I((t,e)=>b6(t,w6(e)),"__spreadProps"),I6=1008e3,Fk=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,k6=new TextDecoder,Zy=new TextEncoder,qd=Zy.encode("0123456789abcdef"),Fd=Zy.encode("0123456789ABCDEF"),P6=Zy.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),bP=P6.slice();bP[62]=45;bP[63]=95;var Tc,Bd;function wP(t,{alphabet:e,scratchArr:r}={}){if(!Tc)if(Tc=new Uint16Array(256),Bd=new Uint16Array(256),Fk)for(let y=0;y<256;y++)Tc[y]=qd[y&15]<<8|qd[y>>>4],Bd[y]=Fd[y&15]<<8|Fd[y>>>4];else for(let y=0;y<256;y++)Tc[y]=qd[y&15]|qd[y>>>4]<<8,Bd[y]=Fd[y&15]|Fd[y>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let n=t.length,o=n>>>1,i=n>>>2,a=r||new Uint16Array(n),u=new Uint32Array(t.buffer,t.byteOffset,i),l=new Uint32Array(a.buffer,a.byteOffset,o),d=e==="upper"?Bd:Tc,p=0,f=0,h;if(Fk)for(;p<i;)h=u[p++],l[f++]=d[h>>>8&255]<<16|d[h&255],l[f++]=d[h>>>24]<<16|d[h>>>16&255];else for(;p<i;)h=u[p++],l[f++]=d[h>>>24]<<16|d[h>>>16&255],l[f++]=d[h>>>8&255]<<16|d[h&255];for(p<<=2;p<n;)a[p]=d[t[p++]];return k6.decode(a.subarray(0,n))}s(wP,"Ea");I(wP,"_toHex");function xP(t,e={}){let r="",n=t.length,o=I6>>>1,i=Math.ceil(n/o),a=new Uint16Array(i>1?o:n);for(let u=0;u<i;u++){let l=u*o,d=l+o;r+=wP(t.subarray(l,d),E6(T6({},e),{scratchArr:a}))}return r}s(xP,"Aa");I(xP,"_toHexChunked");function SP(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():xP(t,e)}s(SP,"Ei");I(SP,"toHex");Ae();var TP=class EP{static{s(this,"gt")}constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:n}=this;for(let o=0,i=r.length;o<i;o++)if(e.query+=r[o],o<n.length){let a=n[o];if(a instanceof PP)e.query+=a.sql;else if(a instanceof Vd)if(a.queryData instanceof EP)a.queryData.toParameterizedQuery(e);else{if(a.queryData.params?.length)throw new Error("This query is not composable");e.query+=a.queryData.query}else{let{params:u}=e;u.push(a),e.query+="$"+u.length,(a instanceof ze||ArrayBuffer.isView(a))&&(e.query+="::bytea")}}return e}};I(TP,"SqlTemplate");var IP=TP,kP=class{static{s(this,"Xt")}constructor(e){this.sql=e}};I(kP,"UnsafeRawSql");var PP=kP;Ae();function Jy(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}s(Jy,"bt");I(Jy,"warnIfBrowser");Ic();var A6=ji(qy()),C6=ji(Jd()),AP=class CP extends Error{static{s(this,"_t")}constructor(e){super(e),qe(this,"name","NeonDbError"),qe(this,"severity"),qe(this,"code"),qe(this,"detail"),qe(this,"hint"),qe(this,"position"),qe(this,"internalPosition"),qe(this,"internalQuery"),qe(this,"where"),qe(this,"schema"),qe(this,"table"),qe(this,"column"),qe(this,"dataType"),qe(this,"constraint"),qe(this,"file"),qe(this,"line"),qe(this,"routine"),qe(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,CP)}};I(AP,"NeonDbError");var bs=AP,Bk="transaction() expects an array of queries, or a function returning an array of queries",O6=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function OP(t){return t instanceof ze?"\\x"+SP(t):t}s(OP,"Lu");I(OP,"encodeBuffersAsBytea");function My(t){let{query:e,params:r}=t instanceof IP?t.toParameterizedQuery():t;return{query:e,params:r.map(n=>OP((0,C6.prepareValue)(n)))}}s(My,"ss");I(My,"prepareQuery");function Go(t,{arrayMode:e,fullResults:r,fetchOptions:n,isolationLevel:o,readOnly:i,deferrable:a,authToken:u,disableWarningInBrowsers:l}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=Ly(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:p,username:f,hostname:h,port:y,pathname:g}=d;if(p!=="postgres:"&&p!=="postgresql:"||!f||!h||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function m(w,...b){if(!(Array.isArray(w)&&Array.isArray(w.raw)&&Array.isArray(b)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Vd(_,new IP(w,b))}s(m,"D"),I(m,"templateFn"),m.query=(w,b,x)=>new Vd(_,{query:w,params:b??[]},x),m.unsafe=w=>new PP(w),m.transaction=async(w,b)=>{if(typeof w=="function"&&(w=w(m)),!Array.isArray(w))throw new Error(Bk);w.forEach(R=>{if(!(R instanceof Vd))throw new Error(Bk)});let x=w.map(R=>R.queryData),k=w.map(R=>R.opts??{});return _(x,k,b)};async function _(w,b,x){let{fetchEndpoint:k,fetchFunction:R}=Di,O=Array.isArray(w)?{queries:w.map(_e=>My(_e))}:My(w),C=n??{},$=e??!1,P=r??!1,N=o,D=i,K=a;x!==void 0&&(x.fetchOptions!==void 0&&(C={...C,...x.fetchOptions}),x.arrayMode!==void 0&&($=x.arrayMode),x.fullResults!==void 0&&(P=x.fullResults),x.isolationLevel!==void 0&&(N=x.isolationLevel),x.readOnly!==void 0&&(D=x.readOnly),x.deferrable!==void 0&&(K=x.deferrable)),b!==void 0&&!Array.isArray(b)&&b.fetchOptions!==void 0&&(C={...C,...b.fetchOptions});let V=u;!Array.isArray(b)&&b?.authToken!==void 0&&(V=b.authToken);let q=typeof k=="function"?k(h,y,{jwtAuth:V!==void 0}):k,Q={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},ee=await RP(V);ee&&(Q.Authorization=`Bearer ${ee}`),Array.isArray(w)&&(N!==void 0&&(Q["Neon-Batch-Isolation-Level"]=N),D!==void 0&&(Q["Neon-Batch-Read-Only"]=String(D)),K!==void 0&&(Q["Neon-Batch-Deferrable"]=String(K))),l||Di.disableWarningInBrowsers||Jy();let oe;try{oe=await(R??fetch)(q,{method:"POST",body:JSON.stringify(O),headers:Q,...C})}catch(_e){let Te=new bs(`Error connecting to database: ${_e}`);throw Te.sourceError=_e,Te}if(oe.ok){let _e=await oe.json();if(Array.isArray(w)){let Te=_e.results;if(!Array.isArray(Te))throw new bs("Neon internal error: unexpected result format");return Te.map((We,He)=>{let G=b[He]??{},Oe=G.arrayMode??$,ge=G.fullResults??P;return Uy(We,{arrayMode:Oe,fullResults:ge,types:G.types})})}else{let Te=b??{},We=Te.arrayMode??$,He=Te.fullResults??P;return Uy(_e,{arrayMode:We,fullResults:He,types:Te.types})}}else{let{status:_e}=oe;if(_e===400){let Te=await oe.json(),We=new bs(Te.message);for(let He of O6)We[He]=Te[He]??void 0;throw We}else{let Te=await oe.text();throw new bs(`Server error (HTTP status ${_e}): ${Te}`)}}}return s(_,"Y"),I(_,"execute"),m}s(Go,"cs");I(Go,"neon");var $P=class{static{s(this,"dr")}constructor(e,r,n){this.execute=e,this.queryData=r,this.opts=n}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};I($P,"NeonQueryPromise");var Vd=$P;function Uy(t,{arrayMode:e,fullResults:r,types:n}){let o=new A6.default(n),i=t.fields.map(l=>l.name),a=t.fields.map(l=>o.getTypeParser(l.dataTypeID)),u=e===!0?t.rows.map(l=>l.map((d,p)=>d===null?null:a[p](d))):t.rows.map(l=>Object.fromEntries(l.map((d,p)=>[i[p],d===null?null:a[p](d)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=u,t._parsers=a,t._types=o,t):u}s(Uy,"os");I(Uy,"processQueryResult");async function RP(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new bs("Error getting auth token.");throw e instanceof Error&&(r=new bs(`Error getting auth token: ${e.message}`)),r}}s(RP,"Fu");I(RP,"getAuthToken");Ae();var $6=ji(Wd());Ae();var R6=ji(Wd()),NP=class extends R6.Client{static{s(this,"kn")}constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||Qe.env.PGHOST!==void 0,o=Qe.env.USER??Qe.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===o&&this.database===o&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${o}, db: ${o}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),a=r.pipelineTLS&&this.ssl,u=r.pipelineConnect==="password";if(!a&&!r.pipelineConnect)return i;let l=this.connection;if(a&&l.on("connect",()=>l.stream.emit("data","S")),u){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let d=this.ssl?"sslconnect":"connect";l.on(d,()=>{this.neonConfig.disableWarningInBrowsers||Jy(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,n=this.saslSession,o=this.password,i=e.data;if(n.message!=="SASLInitialResponse"||typeof o!="string"||typeof i!="string")throw new Error("SASL: protocol error");let a=Object.fromEntries(i.split(",").map(_e=>{if(!/^.=/.test(_e))throw new Error("SASL: Invalid attribute pair entry");let Te=_e[0],We=_e.substring(2);return[Te,We]})),u=a.r,l=a.s,d=a.i;if(!u||!/^[!-+--~]+$/.test(u))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!d||!/^[1-9][0-9]*$/.test(d))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!u.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(u.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let p=parseInt(d,10),f=ze.from(l,"base64"),h=new TextEncoder,y=h.encode(o),g=await r.importKey("raw",y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),m=new Uint8Array(await r.sign("HMAC",g,ze.concat([f,ze.from([0,0,0,1])]))),_=m;for(var w=0;w<p-1;w++)m=new Uint8Array(await r.sign("HMAC",g,m)),_=ze.from(_.map((_e,Te)=>_[Te]^m[Te]));let b=_,x=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),k=new Uint8Array(await r.sign("HMAC",x,h.encode("Client Key"))),R=await r.digest("SHA-256",k),O="n=*,r="+n.clientNonce,C="r="+u+",s="+l+",i="+p,$="c=biws,r="+u,P=O+","+C+","+$,N=await r.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var D=new Uint8Array(await r.sign("HMAC",N,h.encode(P))),K=ze.from(k.map((_e,Te)=>k[Te]^D[Te])),V=K.toString("base64");let q=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),Q=await r.sign("HMAC",q,h.encode("Server Key")),ee=await r.importKey("raw",Q,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var oe=ze.from(await r.sign("HMAC",ee,h.encode(P)));n.message="SASLResponse",n.serverSignature=oe.toString("base64"),n.response=$+",p="+V,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};I(NP,"NeonClient");var N6=NP;Ic();var D6=ji(Gy());function DP(t,e){if(e)return{callback:e,result:void 0};let r,n,o=I(function(a,u){a?r(a):n(u)},"cb"),i=new t(function(a,u){n=a,r=u});return{callback:o,result:i}}s(DP,"vl");I(DP,"promisify");var jP=class extends $6.Pool{static{s(this,"Un")}constructor(){super(...arguments),qe(this,"Client",N6),qe(this,"hasFetchUnsupportedListeners",!1),qe(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!Di.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,n);typeof r=="function"&&(n=r,r=void 0);let o=DP(this.Promise,n);n=o.callback;try{let i=new D6.default(this.options),a=encodeURIComponent,u=encodeURI,l=`postgresql://${a(i.user)}:${a(i.password)}@${a(i.host)}/${u(i.database)}`,d=typeof e=="string"?e:e.text,p=r??e.values??[];Go(l,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(d,p,{types:e.types??this.options?.types}).then(f=>n(void 0,f)).catch(f=>n(f))}catch(i){n(i)}return o.result}};I(jP,"NeonPool");var _o=jP;Ic();var Pc=ji(Wd());var Kme=Pc.DatabaseError,Wme=Pc.defaults,Qme=Pc.escapeIdentifier,Xme=Pc.escapeLiteral,Mt=Pc.types;var Zt=class t{static{s(this,"SelectionProxyHandler")}static[j]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===$t)return{...e[$t],selectedFields:new Proxy(e[$t].selectedFields,this)};if(typeof r=="symbol")return e[r];let o=(X(e,Gt)?e._.selectedFields:X(e,Cr)?e[$t].selectedFields:e)[r];if(X(o,we.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;let i=o.clone();return i.isSelectionField=!0,i}if(X(o,we)){if(this.config.sqlBehavior==="sql")return o;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return X(o,xt)?this.config.alias?new Proxy(o,new Ri(new Proxy(o.table,new hs(this.config.alias,this.config.replaceOriginalName??!1)))):o:typeof o!="object"||o===null?o:new Proxy(o,new t(this.config))}};var Ky=class{static{s(this,"IndexBuilderOn")}constructor(e,r){this.unique=e,this.name=r}static[j]="PgIndexBuilderOn";on(...e){return new Ac(e.map(r=>{if(X(r,we))return r;r=r;let n=new ms(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Ac(e.map(r=>{if(X(r,we))return r;r=r;let n=new ms(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new Ac(r.map(n=>{if(X(n,we))return n;n=n;let o=new ms(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),o}),this.unique,!0,this.name,e)}},Ac=class{static{s(this,"IndexBuilder")}static[j]="PgIndexBuilder";config;constructor(e,r,n,o,i="btree"){this.config={name:o,columns:e,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Wy(this.config,e)}},Wy=class{static{s(this,"Index")}static[j]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};function Qy(t){return new Ky(!0,t)}s(Qy,"uniqueIndex");function j6(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}s(j6,"toSnakeCase");function M6(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,n,o)=>{let i=o===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return r+i},"")}s(M6,"toCamelCase");function U6(t){return t}s(U6,"noopCase");var Qd=class{static{s(this,"CasingCache")}static[j]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?j6:e==="camelCase"?M6:U6}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[he.Symbol.Schema]??"public",n=e.table[he.Symbol.OriginalName],o=`${r}.${n}.${e.name}`;return this.cache[o]||this.cacheTable(e.table),this.cache[o]}cacheTable(e){let r=e[he.Symbol.Schema]??"public",n=e[he.Symbol.OriginalName],o=`${r}.${n}`;if(!this.cachedTables[o]){for(let i of Object.values(e[he.Symbol.Columns])){let a=`${o}.${i.name}`;this.cache[a]=this.convert(i.name)}this.cachedTables[o]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var xs=class extends Cr{static{s(this,"PgViewBase")}static[j]="PgViewBase"};var Ln=class{static{s(this,"PgDialect")}static[j]="PgDialect";casing;constructor(e){this.casing=new Qd(e?.casing)}async migrate(e,r,n){let o=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",a=M`
			CREATE TABLE IF NOT EXISTS ${M.identifier(i)}.${M.identifier(o)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(M`CREATE SCHEMA IF NOT EXISTS ${M.identifier(i)}`),await r.execute(a);let l=(await r.all(M`select id, hash, created_at from ${M.identifier(i)}.${M.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async d=>{for await(let p of e)if(!l||Number(l.created_at)<p.folderMillis){for(let f of p.sql)await d.execute(M.raw(f));await d.execute(M`insert into ${M.identifier(i)}.${M.identifier(o)} ("hash", "created_at") values(${p.hash}, ${p.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[M`with `];for(let[n,o]of e.entries())r.push(M`${M.identifier(o._.alias)} as (${o._.sql})`),n<e.length-1&&r.push(M`, `);return r.push(M` `),M.join(r)}buildDeleteQuery({table:e,where:r,returning:n,withList:o}){let i=this.buildWithCTE(o),a=n?M` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,u=r?M` where ${r}`:void 0;return M`${i}delete from ${e}${u}${a}`}buildUpdateSet(e,r){let n=e[he.Symbol.Columns],o=Object.keys(n).filter(a=>r[a]!==void 0||n[a]?.onUpdateFn!==void 0),i=o.length;return M.join(o.flatMap((a,u)=>{let l=n[a],d=r[a]??M.param(l.onUpdateFn(),l),p=M`${M.identifier(this.casing.getColumnCasing(l))} = ${d}`;return u<i-1?[p,M.raw(", ")]:[p]}))}buildUpdateQuery({table:e,set:r,where:n,returning:o,withList:i,from:a,joins:u}){let l=this.buildWithCTE(i),d=e[cr.Symbol.Name],p=e[cr.Symbol.Schema],f=e[cr.Symbol.OriginalName],h=d===f?void 0:d,y=M`${p?M`${M.identifier(p)}.`:void 0}${M.identifier(f)}${h&&M` ${M.identifier(h)}`}`,g=this.buildUpdateSet(e,r),m=a&&M.join([M.raw(" from "),this.buildFromTable(a)]),_=this.buildJoins(u),w=o?M` returning ${this.buildSelection(o,{isSingleTable:!a})}`:void 0,b=n?M` where ${n}`:void 0;return M`${l}update ${y} set ${g}${m}${_}${b}${w}`}buildSelection(e,{isSingleTable:r=!1}={}){let n=e.length,o=e.flatMap(({field:i},a)=>{let u=[];if(X(i,we.Aliased)&&i.isSelectionField)u.push(M.identifier(i.fieldAlias));else if(X(i,we.Aliased)||X(i,we)){let l=X(i,we.Aliased)?i.sql:i;r?u.push(new we(l.queryChunks.map(d=>X(d,me)?M.identifier(this.casing.getColumnCasing(d)):d))):u.push(l),X(i,we.Aliased)&&u.push(M` as ${M.identifier(i.fieldAlias)}`)}else X(i,xt)&&(r?u.push(M.identifier(this.casing.getColumnCasing(i))):u.push(i));return a<n-1&&u.push(M`, `),u});return M.join(o)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[n,o]of e.entries()){n===0&&r.push(M` `);let i=o.table,a=o.lateral?M` lateral`:void 0,u=o.on?M` on ${o.on}`:void 0;if(X(i,cr)){let l=i[cr.Symbol.Name],d=i[cr.Symbol.Schema],p=i[cr.Symbol.OriginalName],f=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${f&&M` ${M.identifier(f)}`}${u}`)}else if(X(i,Cr)){let l=i[$t].name,d=i[$t].schema,p=i[$t].originalName,f=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${f&&M` ${M.identifier(f)}`}${u}`)}else r.push(M`${M.raw(o.joinType)} join${a} ${i}${u}`);n<e.length-1&&r.push(M` `)}return M.join(r)}buildFromTable(e){if(X(e,he)&&e[he.Symbol.IsAlias]){let r=M`${M.identifier(e[he.Symbol.OriginalName])}`;return e[he.Symbol.Schema]&&(r=M`${M.identifier(e[he.Symbol.Schema])}.${r}`),M`${r} ${M.identifier(e[he.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:n,where:o,having:i,table:a,joins:u,orderBy:l,groupBy:d,limit:p,offset:f,lockingClause:h,distinct:y,setOperators:g}){let m=n??dn(r);for(let q of m)if(X(q.field,xt)&&qr(q.field.table)!==(X(a,Gt)?a._.alias:X(a,xs)?a[$t].name:X(a,we)?void 0:qr(a))&&!(Q=>u?.some(({alias:ee})=>ee===(Q[he.Symbol.IsAlias]?qr(Q):Q[he.Symbol.BaseName])))(q.field.table)){let Q=qr(q.field.table);throw new Error(`Your "${q.path.join("->")}" field references a column "${Q}"."${q.field.name}", but the table "${Q}" is not part of the query! Did you forget to join it?`)}let _=!u||u.length===0,w=this.buildWithCTE(e),b;y&&(b=y===!0?M` distinct`:M` distinct on (${M.join(y.on,M`, `)})`);let x=this.buildSelection(m,{isSingleTable:_}),k=this.buildFromTable(a),R=this.buildJoins(u),O=o?M` where ${o}`:void 0,C=i?M` having ${i}`:void 0,$;l&&l.length>0&&($=M` order by ${M.join(l,M`, `)}`);let P;d&&d.length>0&&(P=M` group by ${M.join(d,M`, `)}`);let N=typeof p=="object"||typeof p=="number"&&p>=0?M` limit ${p}`:void 0,D=f?M` offset ${f}`:void 0,K=M.empty();if(h){let q=M` for ${M.raw(h.strength)}`;h.config.of&&q.append(M` of ${M.join(Array.isArray(h.config.of)?h.config.of:[h.config.of],M`, `)}`),h.config.noWait?q.append(M` nowait`):h.config.skipLocked&&q.append(M` skip locked`),K.append(q)}let V=M`${w}select${b} ${x} from ${k}${R}${O}${P}${C}${$}${N}${D}${K}`;return g.length>0?this.buildSetOperations(V,g):V}buildSetOperations(e,r){let[n,...o]=r;if(!n)throw new Error("Cannot pass undefined values to any set operator");return o.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),o)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:n,rightSelect:o,limit:i,orderBy:a,offset:u}}){let l=M`(${e.getSQL()}) `,d=M`(${o.getSQL()})`,p;if(a&&a.length>0){let g=[];for(let m of a)if(X(m,me))g.push(M.identifier(m.name));else if(X(m,we)){for(let _=0;_<m.queryChunks.length;_++){let w=m.queryChunks[_];X(w,me)&&(m.queryChunks[_]=M.identifier(w.name))}g.push(M`${m}`)}else g.push(M`${m}`);p=M` order by ${M.join(g,M`, `)} `}let f=typeof i=="object"||typeof i=="number"&&i>=0?M` limit ${i}`:void 0,h=M.raw(`${r} ${n?"all ":""}`),y=u?M` offset ${u}`:void 0;return M`${l}${h}${d}${p}${f}${y}`}buildInsertQuery({table:e,values:r,onConflict:n,returning:o,withList:i,select:a,overridingSystemValue_:u}){let l=[],d=e[he.Symbol.Columns],p=Object.entries(d).filter(([w,b])=>!b.shouldDisableInsert()),f=p.map(([,w])=>M.identifier(this.casing.getColumnCasing(w)));if(a){let w=r;X(w,we)?l.push(w):l.push(w.getSQL())}else{let w=r;l.push(M.raw("values "));for(let[b,x]of w.entries()){let k=[];for(let[R,O]of p){let C=x[R];if(C===void 0||X(C,Fr)&&C.value===void 0)if(O.defaultFn!==void 0){let $=O.defaultFn(),P=X($,we)?$:M.param($,O);k.push(P)}else if(!O.default&&O.onUpdateFn!==void 0){let $=O.onUpdateFn(),P=X($,we)?$:M.param($,O);k.push(P)}else k.push(M`default`);else k.push(C)}l.push(k),b<w.length-1&&l.push(M`, `)}}let h=this.buildWithCTE(i),y=M.join(l),g=o?M` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,m=n?M` on conflict ${n}`:void 0,_=u===!0?M`overriding system value `:void 0;return M`${h}insert into ${e} ${f} ${_}${y}${m}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:n}){let o=r?M` concurrently`:void 0,i=n?M` with no data`:void 0;return M`refresh materialized view${o} ${e}${i}`}prepareTyping(e){return X(e,gc)||X(e,hc)?"json":X(e,yc)?"decimal":X(e,vc)?"time":X(e,_c)||X(e,bc)?"timestamp":X(e,mc)||X(e,fc)?"date":X(e,wc)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:o,tableConfig:i,queryConfig:a,tableAlias:u,nestedQueryRelation:l,joinOn:d}){let p=[],f,h,y=[],g,m=[];if(a===!0)p=Object.entries(i.columns).map(([b,x])=>({dbKey:x.name,tsKey:b,field:Un(x,u),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let w=Object.fromEntries(Object.entries(i.columns).map(([C,$])=>[C,Un($,u)]));if(a.where){let C=typeof a.where=="function"?a.where(w,Nk()):a.where;g=C&&lc(C,u)}let b=[],x=[];if(a.columns){let C=!1;for(let[$,P]of Object.entries(a.columns))P!==void 0&&$ in i.columns&&(!C&&P===!0&&(C=!0),x.push($));x.length>0&&(x=C?x.filter($=>a.columns?.[$]===!0):Object.keys(i.columns).filter($=>!x.includes($)))}else x=Object.keys(i.columns);for(let C of x){let $=i.columns[C];b.push({tsKey:C,value:$})}let k=[];a.with&&(k=Object.entries(a.with).filter(C=>!!C[1]).map(([C,$])=>({tsKey:C,queryConfig:$,relation:i.relations[C]})));let R;if(a.extras){R=typeof a.extras=="function"?a.extras(w,{sql:M}):a.extras;for(let[C,$]of Object.entries(R))b.push({tsKey:C,value:ug($,u)})}for(let{tsKey:C,value:$}of b)p.push({dbKey:X($,we.Aliased)?$.fieldAlias:i.columns[C].name,tsKey:C,field:X($,xt)?Un($,u):$,relationTableTsKey:void 0,isJson:!1,selection:[]});let O=typeof a.orderBy=="function"?a.orderBy(w,Dk()):a.orderBy??[];Array.isArray(O)||(O=[O]),y=O.map(C=>X(C,xt)?Un(C,u):lc(C,u)),f=a.limit,h=a.offset;for(let{tsKey:C,queryConfig:$,relation:P}of k){let N=jk(r,n,P),D=$i(P.referencedTable),K=n[D],V=`${u}_${C}`,q=Ee(...N.fields.map((oe,_e)=>H(Un(N.references[_e],V),Un(oe,u)))),Q=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:e[K],tableConfig:r[K],queryConfig:X(P,Ho)?$===!0?{limit:1}:{...$,limit:1}:$,tableAlias:V,joinOn:q,nestedQueryRelation:P}),ee=M`${M.identifier(V)}.${M.identifier("data")}`.as(C);m.push({on:M`true`,table:new Gt(Q.sql,{},V),alias:V,joinType:"left",lateral:!0}),p.push({dbKey:C,tsKey:C,field:ee,relationTableTsKey:K,isJson:!0,selection:Q.selection})}}if(p.length===0)throw new dc({message:`No fields selected for table "${i.tsName}" ("${u}")`});let _;if(g=Ee(d,g),l){let w=M`json_build_array(${M.join(p.map(({field:k,tsKey:R,isJson:O})=>O?M`${M.identifier(`${u}_${R}`)}.${M.identifier("data")}`:X(k,we.Aliased)?k.sql:k),M`, `)})`;X(l,xc)&&(w=M`coalesce(json_agg(${w}${y.length>0?M` order by ${M.join(y,M`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:w.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];f!==void 0||h!==void 0||y.length>0?(_=this.buildSelectQuery({table:uc(o,u),fields:{},fieldsFlat:[{path:[],field:M.raw("*")}],where:g,limit:f,offset:h,orderBy:y,setOperators:[]}),g=void 0,f=void 0,h=void 0,y=[]):_=uc(o,u),_=this.buildSelectQuery({table:X(_,cr)?_:new Gt(_,{},u),fields:{},fieldsFlat:b.map(({field:k})=>({path:[],field:X(k,xt)?Un(k,u):k})),joins:m,where:g,limit:f,offset:h,orderBy:y,setOperators:[]})}else _=this.buildSelectQuery({table:uc(o,u),fields:{},fieldsFlat:p.map(({field:w})=>({path:[],field:X(w,xt)?Un(w,u):w})),joins:m,where:g,limit:f,offset:h,orderBy:y,setOperators:[]});return{tableTsKey:i.tsName,sql:_,selection:p}}};var Xd=class{static{s(this,"TypedQueryBuilder")}static[j]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Pr=class{static{s(this,"PgSelectBuilder")}static[j]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,n=e,o;return this.fields?o=this.fields:X(n,Gt)?o=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):X(n,xs)?o=n[$t].selectedFields:X(n,we)?o={}:o=JI(n),new Yd({table:n,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Xy=class extends Xd{static{s(this,"PgSelectQueryBuilderBase")}static[j]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:n,session:o,dialect:i,withList:a,distinct:u}){super(),this.config={withList:a,table:e,fields:{...r},distinct:u,setOperators:[]},this.isPartialSelect=n,this.session=o,this.dialect=i,this._={selectedFields:r,config:this.config},this.tableName=go(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let l of xn(e))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(n,o)=>{let i=this.tableName,a=go(n);for(let u of xn(n))this.usedTables.add(u);if(typeof a=="string"&&this.config.joins?.some(u=>u.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof a=="string"&&!X(n,we))){let u=X(n,Gt)?n._.selectedFields:X(n,Cr)?n[$t].selectedFields:n[he.Symbol.Columns];this.config.fields[a]=u}if(typeof o=="function"&&(o=o(new Proxy(this.config.fields,new Zt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:n,joinType:e,alias:a,lateral:r}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[a]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return n=>{let o=typeof n=="function"?n(z6()):n;if(!pc(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Zt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Zt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Zt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Zt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...xn(this.config.table)),this.config.joins)for(let n of this.config.joins)r.push(...xn(n.table));return new Proxy(new Gt(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new Zt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Zt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},Yd=class extends Xy{static{s(this,"PgSelectBase")}static[j]="PgSelect";_prepare(e){let{session:r,config:n,dialect:o,joinsNotNullableMap:i,authToken:a,cacheConfig:u,usedTables:l}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=n;return sr.startActiveSpan("drizzle.prepareQuery",()=>{let p=dn(d),f=r.prepareQuery(o.sqlToQuery(this.getSQL()),p,e,!0,void 0,{type:"select",tables:[...l]},u);return f.joinsNotNullableMap=i,f.setToken(a)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>sr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};ZI(Yd,[Er]);function Ss(t,e){return(r,n,...o)=>{let i=[n,...o].map(a=>({type:t,isAll:e,rightSelect:a}));for(let a of i)if(!pc(r.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}s(Ss,"createSetOperator");var z6=s(()=>({union:L6,unionAll:q6,intersect:F6,intersectAll:B6,except:V6,exceptAll:H6}),"getPgSetOperators"),L6=Ss("union",!1),q6=Ss("union",!0),F6=Ss("intersect",!1),B6=Ss("intersect",!0),V6=Ss("except",!1),H6=Ss("except",!0);var Ts=class{static{s(this,"QueryBuilder")}static[j]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=X(e,Ln)?e:void 0,this.dialectConfig=X(e,Ln)?void 0:e}$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(n)),new Proxy(new fs(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Zt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");with(...e){let r=this;function n(a){return new Pr({fields:a??void 0,session:void 0,dialect:r.getDialect(),withList:e})}s(n,"select");function o(a){return new Pr({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}s(o,"selectDistinct");function i(a,u){return new Pr({fields:u??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:a}})}return s(i,"selectDistinctOn"),{select:n,selectDistinct:o,selectDistinctOn:i}}select(e){return new Pr({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Pr({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Pr({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Ln(this.dialectConfig)),this.dialect}};function xn(t){return X(t,cr)?[t[Oi]?`${t[Oi]}.${t[he.Symbol.BaseName]}`:t[he.Symbol.BaseName]]:X(t,Gt)?t._.usedTables??[]:X(t,we)?t.usedTables??[]:[]}s(xn,"extractUsedTable");var Cc=class extends Er{static{s(this,"PgDeleteBase")}constructor(e,r,n,o){super(),this.session=r,this.dialect=n,this.config={table:e,withList:o}}static[j]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[he.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=dn(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return sr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:xn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>sr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Zt({alias:qr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Oc=class{static{s(this,"PgInsertBuilder")}constructor(e,r,n,o,i){this.table=e,this.session=r,this.dialect=n,this.withList=o,this.overridingSystemValue_=i}static[j]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(n=>{let o={},i=this.table[he.Symbol.Columns];for(let a of Object.keys(n)){let u=n[a];o[a]=X(u,we)?u:new Fr(u,i[a])}return o});return new ep(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new Ts):e;if(!X(r,we)&&!pc(this.table[Pd],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new ep(this.table,r,this.session,this.dialect,this.withList,!0)}},ep=class extends Er{static{s(this,"PgInsertBase")}constructor(e,r,n,o,i,a,u){super(),this.session=n,this.dialect=o,this.config={table:e,values:r,withList:i,select:a,overridingSystemValue_:u}}static[j]="PgInsert";config;cacheConfig;returning(e=this.config.table[he.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=dn(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=M`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?M` where ${e.where}`:void 0;this.config.onConflict=M`(${M.raw(r)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?M` where ${e.where}`:void 0,n=e.targetWhere?M` where ${e.targetWhere}`:void 0,o=e.setWhere?M` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,Od(this.config.table,e.set)),a="";return a=Array.isArray(e.target)?e.target.map(u=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(u))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=M`(${M.raw(a)})${n} do update set ${i}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return sr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:xn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>sr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Zt({alias:qr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var tp=class extends Er{static{s(this,"PgRefreshMaterializedView")}constructor(e,r,n){super(),this.session=r,this.dialect=n,this.config={view:e}}static[j]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return sr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>sr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};var $c=class{static{s(this,"PgUpdateBuilder")}constructor(e,r,n,o){this.table=e,this.session=r,this.dialect=n,this.withList=o}static[j]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new Yy(this.table,Od(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},Yy=class extends Er{static{s(this,"PgUpdateBase")}constructor(e,r,n,o,i){super(),this.session=n,this.dialect=o,this.config={set:r,table:e,withList:i,joins:[]},this.tableName=go(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[j]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,n=go(r);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=r,this}getTableLikeFields(e){return X(e,cr)?e[he.Symbol.Columns]:X(e,Gt)?e._.selectedFields:e[$t].selectedFields}createJoin(e){return(r,n)=>{let o=go(r);if(typeof o=="string"&&this.config.joins.some(i=>i.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!X(this.config.from,we)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[he.Symbol.Columns],new Zt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new Zt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:r,joinType:e,alias:o}),typeof o=="string")switch(e){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[he.Symbol.Columns]),this.config.from)){let r=go(this.config.from);if(typeof r=="string"&&this.config.from&&!X(this.config.from,we)){let n=this.getTableLikeFields(this.config.from);e[r]=n}for(let n of this.config.joins){let o=go(n.table);if(typeof o=="string"&&!X(n.table,we)){let i=this.getTableLikeFields(n.table);e[o]=i}}}return this.config.returningFields=e,this.config.returning=dn(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:xn(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>this._prepare().execute(e,this.authToken),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Zt({alias:qr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var rp=class t extends we{static{s(this,"PgCountBuilder")}constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[j]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return M`(select count(*) from ${e}${M.raw(" where ").if(r)}${r})`}static buildCount(e,r){return M`select count(*) as count from ${e}${M.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}};var np=class{static{s(this,"RelationalQueryBuilder")}constructor(e,r,n,o,i,a,u){this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=u}static[j]="PgRelationalQueryBuilder";findMany(e){return new op(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new op(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},op=class extends Er{static{s(this,"PgRelationalQuery")}constructor(e,r,n,o,i,a,u,l,d){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=u,this.config=l,this.mode=d}static[j]="PgRelationalQuery";_prepare(e){return sr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(o,i)=>{let a=o.map(u=>Md(this.schema,this.tableConfig,u,r.selection,i));return this.mode==="first"?a[0]:a})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return sr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var ip=class extends Er{static{s(this,"PgRaw")}constructor(e,r,n,o){super(),this.execute=e,this.sql=r,this.query=n,this.mapBatchResult=o}static[j]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Zo=class{static{s(this,"PgDatabase")}constructor(e,r,n){if(this.dialect=e,this.session=r,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,i]of Object.entries(this._.schema))this.query[o]=new np(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[o],i,e,r);this.$cache={invalidate:s(async o=>{},"invalidate")}}static[j]="PgDatabase";query;$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(new Ts(n.dialect))),new Proxy(new fs(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Zt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");$count(e,r){return new rp({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function n(d){return new Pr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e})}s(n,"select");function o(d){return new Pr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}s(o,"selectDistinct");function i(d,p){return new Pr({fields:p??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:d}})}s(i,"selectDistinctOn");function a(d){return new $c(d,r.session,r.dialect,e)}s(a,"update");function u(d){return new Oc(d,r.session,r.dialect,e)}s(u,"insert");function l(d){return new Cc(d,r.session,r.dialect,e)}return s(l,"delete_"),{select:n,selectDistinct:o,selectDistinctOn:i,update:a,insert:u,delete:l}}select(e){return new Pr({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Pr({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Pr({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new $c(e,this.session,this.dialect)}insert(e){return new Oc(e,this.session,this.dialect)}delete(e){return new Cc(e,this.session,this.dialect)}refreshMaterializedView(e){return new tp(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?M.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(n,void 0,void 0,!1);return new ip(()=>o.execute(void 0,this.authToken),r,n,i=>o.mapResult(i,!0))}transaction(e,r){return this.session.transaction(e,r)}};var ev=class{static{s(this,"Cache")}static[j]="Cache"},Jo=class extends ev{static{s(this,"NoopCache")}strategy(){return"all"}static[j]="NoopCache";async get(e){}async put(e,r,n,o){}async onMutate(e){}};async function tv(t,e){let r=`${t}-${JSON.stringify(e)}`,o=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",o);return[...new Uint8Array(i)].map(l=>l.toString(16).padStart(2,"0")).join("")}s(tv,"hashQuery");var Es=class{static{s(this,"PgPreparedQuery")}constructor(e,r,n,o){this.query=e,this.cache=r,this.queryMetadata=n,this.cacheConfig=o,r&&r.strategy()==="all"&&o===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[j]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,n){if(this.cache===void 0||X(this.cache,Jo)||this.queryMetadata===void 0)try{return await n()}catch(o){throw new ho(e,r,o)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(o){throw new ho(e,r,o)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[o]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return o}catch(o){throw new ho(e,r,o)}if(!this.cacheConfig)try{return await n()}catch(o){throw new ho(e,r,o)}if(this.queryMetadata.type==="select"){let o=await this.cache.get(this.cacheConfig.tag??await tv(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(o===void 0){let i;try{i=await n()}catch(a){throw new ho(e,r,a)}return await this.cache.put(this.cacheConfig.tag??await tv(e,r),i,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),i}return o}try{return await n()}catch(o){throw new ho(e,r,o)}}},Is=class{static{s(this,"PgSession")}constructor(e){this.dialect=e}static[j]="PgSession";execute(e,r){return sr.startActiveSpan("drizzle.operation",()=>sr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let n=await this.execute(e,r);return Number(n[0].count)}},ks=class extends Zo{static{s(this,"PgTransaction")}constructor(e,r,n,o=0){super(e,r,n),this.schema=n,this.nestedIndex=o}static[j]="PgTransaction";rollback(){throw new Ad}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),M.raw(r.join(" "))}setTransaction(e){return this.session.execute(M`set transaction ${this.getTransactionConfigSQL(e)}`)}};var sp={arrayMode:!1,fullResults:!0},rv={arrayMode:!0,fullResults:!0},nv=class extends Es{static{s(this,"NeonHttpPreparedQuery")}constructor(e,r,n,o,i,a,u,l,d){super(r,o,i,a),this.client=e,this.logger=n,this.fields=u,this._isResponseInArrayMode=l,this.customResultMapper=d,this.clientQuery=e.query??e}static[j]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let n=Bo(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:o,clientQuery:i,query:a,customResultMapper:u}=this;if(!o&&!u)return this.queryWithCache(a.sql,n,async()=>i(a.sql,n,r===void 0?sp:{...sp,authToken:r}));let l=await this.queryWithCache(a.sql,n,async()=>await i(a.sql,n,r===void 0?rv:{...rv,authToken:r}));return this.mapResult(l)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(n=>Cd(this.fields,n,this.joinsNotNullableMap))}all(e={}){let r=Bo(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?sp:{...sp,authToken:this.authToken}).then(n=>n.rows)}values(e={},r){let n=Bo(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:r}).then(o=>o.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},ap=class extends Is{static{s(this,"NeonHttpSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.clientQuery=e.query??e,this.logger=o.logger??new ys,this.cache=o.cache??new Jo}static[j]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,n,o,i,a,u){return new nv(this.client,e,this.logger,this.cache,a,u,r,o,i)}async batch(e){let r=[],n=[];for(let i of e){let a=i._prepare(),u=a.getQuery();r.push(a),n.push(this.clientQuery(u.sql,u.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(n,rv)).map((i,a)=>r[a].mapResult(i,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let n=await this.execute(e,r);return Number(n.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},MP=class extends ks{static{s(this,"NeonTransaction")}static[j]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}};var ov=class{static{s(this,"NeonHttpDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n,this.initMappers()}static[j]="NeonHttpDriver";createSession(e){return new ap(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){Mt.setTypeParser(Mt.builtins.TIMESTAMPTZ,e=>e),Mt.setTypeParser(Mt.builtins.TIMESTAMP,e=>e),Mt.setTypeParser(Mt.builtins.DATE,e=>e),Mt.setTypeParser(Mt.builtins.INTERVAL,e=>e),Mt.setTypeParser(1231,e=>e),Mt.setTypeParser(1115,e=>e),Mt.setTypeParser(1185,e=>e),Mt.setTypeParser(1187,e=>e),Mt.setTypeParser(1182,e=>e)}};function cp(t,e,r,n){return new Proxy(t,{get(o,i){let a=o[i];return typeof a!="function"&&(typeof a!="object"||a===null)?a:n?cp(a,e,r):i==="query"?cp(a,e,r,!0):new Proxy(a,{apply(u,l,d){let p=u.call(l,...d);return typeof p=="object"&&p!==null&&"setToken"in p&&typeof p.setToken=="function"&&p.setToken(e),r(u,i,p)}})}})}s(cp,"wrap");var iv=class extends Zo{static{s(this,"NeonHttpDatabase")}static[j]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,cp(this,e,(r,n,o)=>n==="with"?cp(o,e,(i,a,u)=>u):o)}async batch(e){return this.session.batch(e)}};function Ps(t,e={}){let r=new Ln({casing:e.casing}),n;e.logger===!0?n=new gs:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=Ud(e.schema,zd);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new ov(t,r,{logger:n,cache:e.cache}).createSession(o),u=new iv(r,a,o);return u.$client=t,u.$cache=e.cache,u.$cache&&(u.$cache.invalidate=e.cache?.onMutate),u}s(Ps,"construct");function up(...t){if(typeof t[0]=="string"){let e=Go(t[0]);return Ps(e,t[1])}if($d(t[0])){let{connection:e,client:r,...n}=t[0];if(r)return Ps(r,n);if(typeof e=="object"){let{connectionString:i,...a}=e,u=Go(i,a);return Ps(u,n)}let o=Go(e);return Ps(o,n)}return Ps(t[0],t[1])}s(up,"drizzle");(t=>{function e(r){return Ps({},r)}s(e,"mock"),t.mock=e})(up||(up={}));var sv=class extends Es{static{s(this,"NeonPreparedQuery")}constructor(e,r,n,o,i,a,u,l,d,p,f){super({sql:r,params:n},i,a,u),this.client=e,this.params=n,this.logger=o,this.fields=l,this._isResponseInArrayMode=p,this.customResultMapper=f,this.rawQueryConfig={name:d,text:r,types:{getTypeParser:s((h,y)=>h===Mt.builtins.TIMESTAMPTZ?g=>g:h===Mt.builtins.TIMESTAMP?g=>g:h===Mt.builtins.DATE?g=>g:h===Mt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Mt.getTypeParser(h,y),"getTypeParser")}},this.queryConfig={name:d,text:r,rowMode:"array",types:{getTypeParser:s((h,y)=>h===Mt.builtins.TIMESTAMPTZ?g=>g:h===Mt.builtins.TIMESTAMP?g=>g:h===Mt.builtins.DATE?g=>g:h===Mt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Mt.getTypeParser(h,y),"getTypeParser")}}}static[j]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let r=Bo(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:n,client:o,rawQueryConfig:i,queryConfig:a,joinsNotNullableMap:u,customResultMapper:l}=this;if(!n&&!l)return await this.queryWithCache(i.text,r,async()=>await o.query(i,r));let d=await this.queryWithCache(a.text,r,async()=>await o.query(a,r));return l?l(d.rows):d.rows.map(p=>Cd(n,p,u))}all(e={}){let r=Bo(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.rawQueryConfig.text,r,async()=>await this.client.query(this.rawQueryConfig,r)).then(n=>n.rows)}values(e={}){let r=Bo(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.queryConfig.text,r,async()=>await this.client.query(this.queryConfig,r)).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},lp=class t extends Is{static{s(this,"NeonSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.logger=o.logger??new ys,this.cache=o.cache??new Jo}static[j]="NeonSession";logger;cache;prepareQuery(e,r,n,o,i,a,u){return new sv(this.client,e.sql,e.params,this.logger,this.cache,a,u,r,n,o,i)}async query(e,r){return this.logger.logQuery(e,r),await this.client.query({rowMode:"array",text:e,values:r})}async queryObjects(e,r){return this.client.query(e,r)}async count(e){let r=await this.execute(e);return Number(r.rows[0].count)}async transaction(e,r={}){let n=this.client instanceof _o?new t(await this.client.connect(),this.dialect,this.schema,this.options):this,o=new av(this.dialect,n,this.schema);await o.execute(M`begin ${o.getTransactionConfigSQL(r)}`);try{let i=await e(o);return await o.execute(M`commit`),i}catch(i){throw await o.execute(M`rollback`),i}finally{this.client instanceof _o&&n.client.release()}}},av=class t extends ks{static{s(this,"NeonTransaction")}static[j]="NeonTransaction";async transaction(e){let r=`sp${this.nestedIndex+1}`,n=new t(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(M.raw(`savepoint ${r}`));try{let o=await e(n);return await n.execute(M.raw(`release savepoint ${r}`)),o}catch(o){throw await n.execute(M.raw(`rollback to savepoint ${r}`)),o}}};var cv=class{static{s(this,"NeonDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n}static[j]="NeonDriver";createSession(e){return new lp(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}},uv=class extends Zo{static{s(this,"NeonDatabase")}static[j]="NeonServerlessDatabase"};function Rc(t,e={}){let r=new Ln({casing:e.casing}),n;e.logger===!0?n=new gs:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=Ud(e.schema,zd);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new cv(t,r,{logger:n,cache:e.cache}).createSession(o),u=new uv(r,a,o);return u.$client=t,u.$cache=e.cache,u.$cache&&(u.$cache.invalidate=e.cache?.onMutate),u}s(Rc,"construct");function dp(...t){if(typeof t[0]=="string"){let e=new _o({connectionString:t[0]});return Rc(e,t[1])}if($d(t[0])){let{connection:e,client:r,ws:n,...o}=t[0];if(n&&(Di.webSocketConstructor=n),r)return Rc(r,o);let i=typeof e=="string"?new _o({connectionString:e}):new _o(e);return Rc(i,o)}return Rc(t[0],t[1])}s(dp,"drizzle");(t=>{function e(r){return Rc({},r)}s(e,"mock"),t.mock=e})(dp||(dp={}));var fp={};en(fp,{accountBalanceHistory:()=>$s,accountBalanceHistoryRelations:()=>JP,aiInsights:()=>vr,aiInsightsRelations:()=>dA,alertRules:()=>Ds,alertRulesRelations:()=>yA,auditLogs:()=>Ko,auditLogsRelations:()=>_A,bankAccounts:()=>se,bankAccountsRelations:()=>ZP,bankSyncLogs:()=>Wo,bankSyncLogsRelations:()=>KP,boletoPayments:()=>Qo,boletoPaymentsRelations:()=>cA,boletoStatusEnum:()=>UP,boletos:()=>qn,boletosRelations:()=>aA,budgetCategories:()=>ei,budgetCategoriesRelations:()=>mA,chatMessages:()=>zs,chatMessagesRelations:()=>hA,chatSessions:()=>Bn,chatSessionsRelations:()=>fA,collectionMethodEnum:()=>pv,commandIntents:()=>BP,complianceAuditLogs:()=>Zr,complianceAuditLogsRelations:()=>CA,complianceEventTypeEnum:()=>_v,consentTemplates:()=>Gr,consentTemplatesRelations:()=>TA,consentTypeEnum:()=>pp,contactPaymentMethods:()=>Rs,contactPaymentMethodsRelations:()=>sA,contacts:()=>$e,contactsRelations:()=>iA,dataDeletionRequests:()=>$r,dataDeletionRequestsRelations:()=>kA,dataExportRequests:()=>Os,dataExportRequestsRelations:()=>SA,dataRetentionPolicies:()=>mp,dataRetentionPoliciesRelations:()=>IA,deletionRequestStatusEnum:()=>fv,deletionRequestTypeEnum:()=>mv,errorLogs:()=>zi,errorLogsRelations:()=>bA,eventReminders:()=>Xo,eventRemindersRelations:()=>tA,eventTypes:()=>Li,eventTypesRelations:()=>YP,exportFormatEnum:()=>gv,exportRequestTypeEnum:()=>hv,exportStatusEnum:()=>yv,financialEvents:()=>ut,financialEventsRelations:()=>eA,legalHolds:()=>Ns,legalHoldsRelations:()=>OA,lgpdConsentLogs:()=>Cs,lgpdConsentLogsRelations:()=>xA,lgpdConsents:()=>Et,lgpdConsentsRelations:()=>EA,lgpdExportRequests:()=>Sn,lgpdExportRequestsRelations:()=>PA,limitTypeEnum:()=>vv,notificationLogs:()=>js,notificationLogsRelations:()=>vA,notifications:()=>bo,notificationsRelations:()=>gA,paymentHistory:()=>nr,paymentHistoryRelations:()=>NA,paymentMethodTypeEnum:()=>zP,paymentStatusEnum:()=>dv,pixKeyTypeEnum:()=>LP,pixKeys:()=>Ms,pixKeysRelations:()=>rA,pixQrCodes:()=>wo,pixQrCodesRelations:()=>nA,pixTransactionStatusEnum:()=>qP,pixTransactionTypeEnum:()=>FP,pixTransactions:()=>Fn,pixTransactionsRelations:()=>oA,spendingPatterns:()=>Yo,spendingPatternsRelations:()=>pA,subscriptionPlans:()=>Or,subscriptionPlansRelations:()=>$A,subscriptionStatusEnum:()=>lv,subscriptions:()=>tt,subscriptionsRelations:()=>RA,transactionCategories:()=>De,transactionCategoriesRelations:()=>WP,transactionLimits:()=>Sr,transactionLimitsRelations:()=>AA,transactionSchedules:()=>zt,transactionSchedulesRelations:()=>XP,transactions:()=>te,transactionsRelations:()=>QP,userPreferences:()=>Hr,userPreferencesRelations:()=>HP,userSecurity:()=>Ui,userSecurityRelations:()=>GP,userSessions:()=>As,userSessionsRelations:()=>wA,users:()=>J,usersRelations:()=>VP,voiceCommands:()=>Us,voiceCommandsRelations:()=>uA,voiceTranscriptions:()=>Ls,voiceTranscriptionsRelations:()=>lA});var J=Pe("users",{id:A("id").primaryKey(),email:A("email").unique().notNull(),fullName:A("full_name"),phone:A("phone"),cpf:A("cpf").unique(),birthDate:Ir("birth_date"),autonomyLevel:_t("autonomy_level").default(50),voiceCommandEnabled:ve("voice_command_enabled").default(!0),language:A("language").default("pt-BR"),timezone:A("timezone").default("America/Sao_Paulo"),currency:A("currency").default("BRL"),profileImageUrl:A("profile_image_url"),isActive:ve("is_active").default(!0),lastLogin:Z("last_login",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Hr=Pe("user_preferences",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),theme:A("theme").default("system"),notificationsEmail:ve("notifications_email").default(!0),notificationsPush:ve("notifications_push").default(!0),notificationsSms:ve("notifications_sms").default(!1),autoCategorize:ve("auto_categorize").default(!0),budgetAlerts:ve("budget_alerts").default(!0),voiceFeedback:ve("voice_feedback").default(!0),accessibilityHighContrast:ve("accessibility_high_contrast").default(!1),accessibilityLargeText:ve("accessibility_large_text").default(!1),accessibilityScreenReader:ve("accessibility_screen_reader").default(!1),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Ui=Pe("user_security",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),biometricEnabled:ve("biometric_enabled").default(!1),twoFactorEnabled:ve("two_factor_enabled").default(!1),twoFactorSecret:A("two_factor_secret"),voiceBiometricEnabled:ve("voice_biometric_enabled").default(!1),voiceSampleEncrypted:A("voice_sample_encrypted"),sessionTimeoutMinutes:_t("session_timeout_minutes").default(30),maxFailedAttempts:_t("max_failed_attempts").default(5),lockedUntil:Z("locked_until",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var Ko=Pe("audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),action:A("action").notNull(),resourceType:A("resource_type"),resourceId:A("resource_id"),oldValues:nt("old_values"),newValues:nt("new_values"),ipAddress:tn("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),success:ve("success").default(!0),errorMessage:A("error_message"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),zi=Pe("error_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),errorType:A("error_type").notNull(),errorCode:A("error_code"),errorMessage:A("error_message").notNull(),stackTrace:A("stack_trace"),context:nt("context"),userAgent:A("user_agent"),ipAddress:tn("ip_address"),sessionId:A("session_id"),isResolved:ve("is_resolved").default(!1),resolvedAt:Z("resolved_at",{withTimezone:!0}),resolvedBy:A("resolved_by").references(()=>J.id),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),As=Pe("user_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),sessionToken:A("session_token").unique().notNull(),deviceType:A("device_type"),deviceId:A("device_id"),ipAddress:tn("ip_address"),userAgent:A("user_agent"),isActive:ve("is_active").default(!0),lastActivity:Z("last_activity",{withTimezone:!0}).defaultNow(),expiresAt:Z("expires_at",{withTimezone:!0}).notNull(),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Cs=Pe("lgpd_consent_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),consentType:A("consent_type").notNull(),consentGiven:ve("consent_given").notNull(),consentVersion:A("consent_version").notNull(),ipAddress:tn("ip_address"),userAgent:A("user_agent"),consentedAt:Z("consented_at",{withTimezone:!0}).defaultNow(),revokedAt:Z("revoked_at",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Os=Pe("data_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),requestType:A("request_type").notNull(),status:A("status").default("pending"),processedAt:Z("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),expiresAt:Z("expires_at",{withTimezone:!0}),ipAddress:tn("ip_address"),userAgent:A("user_agent"),requestedAt:Z("requested_at",{withTimezone:!0}).defaultNow(),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()});var se=Pe("bank_accounts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),belvoAccountId:A("belvo_account_id").unique().notNull(),institutionId:A("institution_id").notNull(),institutionName:A("institution_name").notNull(),accountType:A("account_type").notNull(),accountNumber:A("account_number"),accountMask:A("account_mask").notNull(),accountHolderName:A("account_holder_name"),balance:ot("balance",{precision:15,scale:2}).default("0"),availableBalance:ot("available_balance",{precision:15,scale:2}).default("0"),currency:A("currency").default("BRL"),isActive:ve("is_active").default(!0),isPrimary:ve("is_primary").default(!1),lastSync:Z("last_sync",{withTimezone:!0}),syncStatus:A("sync_status").default("pending"),syncErrorMessage:A("sync_error_message"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),$s=Pe("account_balance_history",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),accountId:A("account_id").references(()=>se.id,{onDelete:"cascade"}),balance:ot("balance",{precision:15,scale:2}).notNull(),availableBalance:ot("available_balance",{precision:15,scale:2}),recordedAt:Z("recorded_at",{withTimezone:!0}).defaultNow(),source:A("source").default("sync")}),Wo=Pe("bank_sync_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"cascade"}),syncType:A("sync_type").notNull(),status:A("status").notNull(),recordsSynced:_t("records_synced").default(0),errorMessage:A("error_message"),startedAt:Z("started_at",{withTimezone:!0}).defaultNow(),completedAt:Z("completed_at",{withTimezone:!0}),durationMs:_t("duration_ms")});var lv=tr("subscription_status",["free","trialing","active","past_due","canceled","unpaid"]),dv=tr("payment_status",["succeeded","failed","pending"]),Or=Pe("subscription_plans",{id:A("id").primaryKey(),name:A("name").notNull(),description:A("description"),priceCents:_t("price_cents").notNull().default(0),currency:A("currency").notNull().default("BRL"),interval:A("interval"),stripeProductId:A("stripe_product_id"),stripePriceId:A("stripe_price_id"),features:nt("features").$type().default([]),aiModels:nt("ai_models").$type().default([]),maxBankAccounts:_t("max_bank_accounts").default(1),maxTransactionsPerMonth:_t("max_transactions_per_month"),isActive:ve("is_active").default(!0),displayOrder:_t("display_order").default(0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),tt=Pe("subscriptions",{id:vs("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().unique().references(()=>J.id,{onDelete:"cascade"}),stripeCustomerId:A("stripe_customer_id"),stripeSubscriptionId:A("stripe_subscription_id").unique(),planId:A("plan_id").notNull().default("free").references(()=>Or.id),status:lv("status").notNull().default("free"),currentPeriodStart:Z("current_period_start",{withTimezone:!0}),currentPeriodEnd:Z("current_period_end",{withTimezone:!0}),cancelAtPeriodEnd:ve("cancel_at_period_end").default(!1),canceledAt:Z("canceled_at",{withTimezone:!0}),trialStart:Z("trial_start",{withTimezone:!0}),trialEnd:Z("trial_end",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),nr=Pe("payment_history",{id:vs("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),subscriptionId:vs("subscription_id").references(()=>tt.id,{onDelete:"set null"}),stripePaymentIntentId:A("stripe_payment_intent_id"),stripeInvoiceId:A("stripe_invoice_id"),stripeChargeId:A("stripe_charge_id"),amountCents:_t("amount_cents").notNull(),currency:A("currency").notNull().default("BRL"),status:dv("status").notNull(),description:A("description"),receiptUrl:A("receipt_url"),invoicePdf:A("invoice_pdf"),failureCode:A("failure_code"),failureMessage:A("failure_message"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()});var De=Pe("transaction_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),name:A("name").notNull(),color:A("color").default("#6B7280"),icon:A("icon").default("circle"),isSystem:ve("is_system").default(!1),parentId:A("parent_id"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),te=Pe("transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),amount:ot("amount",{precision:15,scale:2}).notNull(),originalAmount:ot("original_amount",{precision:15,scale:2}),currency:A("currency").default("BRL"),description:A("description").notNull(),merchantName:A("merchant_name"),transactionDate:Z("transaction_date",{withTimezone:!0}).notNull(),postedDate:Z("posted_date",{withTimezone:!0}),transactionType:A("transaction_type").notNull(),paymentMethod:A("payment_method"),status:A("status").default("posted"),isRecurring:ve("is_recurring").default(!1),recurringRule:nt("recurring_rule"),tags:A("tags").array(),notes:A("notes"),attachments:A("attachments").array(),confidenceScore:ot("confidence_score",{precision:3,scale:2}),isCategorized:ve("is_categorized").default(!1),isManualEntry:ve("is_manual_entry").default(!1),externalId:A("external_id"),externalSource:A("external_source"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),zt=Pe("transaction_schedules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),amount:ot("amount",{precision:15,scale:2}).notNull(),description:A("description").notNull(),recipientName:A("recipient_name"),recipientAccount:A("recipient_account"),recipientPixKey:A("recipient_pix_key"),scheduledDate:Ir("scheduled_date").notNull(),recurrenceRule:A("recurrence_rule"),isActive:ve("is_active").default(!0),autoExecute:ve("auto_execute").default(!1),notificationSent:ve("notification_sent").default(!1),executed:ve("executed").default(!1),executedTransactionId:A("executed_transaction_id").references(()=>te.id),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var UP=tr("boleto_status",["pending","paid","overdue","cancelled","scheduled"]),qn=Pe("boletos",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),barcode:A("barcode").unique().notNull(),lineIdDigitable:A("line_id_digitable").unique().notNull(),amount:ot("amount",{precision:15,scale:2}).notNull(),dueDate:Ir("due_date").notNull(),beneficiaryName:A("beneficiary_name").notNull(),beneficiaryCnpj:A("beneficiary_cnpj"),description:A("description"),status:A("status").default("pending"),paymentDate:Z("payment_date",{withTimezone:!0}),paidAmount:ot("paid_amount",{precision:15,scale:2}),paidWith:A("paid_with"),transactionId:A("transaction_id").references(()=>te.id),fineAmount:ot("fine_amount",{precision:15,scale:2}).default("0"),interestAmount:ot("interest_amount",{precision:15,scale:2}).default("0"),discountAmount:ot("discount_amount",{precision:15,scale:2}).default("0"),pdfUrl:A("pdf_url"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Qo=Pe("boleto_payments",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),boletoId:A("boleto_id").references(()=>qn.id,{onDelete:"cascade"}),amount:ot("amount",{precision:15,scale:2}).notNull(),paymentDate:Z("payment_date",{withTimezone:!0}).defaultNow(),paymentMethod:A("payment_method").notNull(),transactionId:A("transaction_id").references(()=>te.id),status:A("status").default("processing"),externalId:A("external_id"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()});var Li=Pe("event_types",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:A("name").unique().notNull(),description:A("description"),color:A("color").default("#3B82F6"),icon:A("icon").default("calendar"),isSystem:ve("is_system").default(!0),defaultReminderHours:_t("default_reminder_hours").default(24),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),ut=Pe("financial_events",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),accountId:A("account_id").references(()=>se.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),eventTypeId:A("event_type_id").references(()=>Li.id,{onDelete:"set null"}),title:A("title").notNull(),description:A("description"),amount:ot("amount",{precision:15,scale:2}).notNull(),status:A("status").notNull().default("pending"),startDate:Z("start_date",{withTimezone:!0}).notNull(),endDate:Z("end_date",{withTimezone:!0}).notNull(),allDay:ve("all_day").default(!1),color:A("color").notNull().default("blue"),icon:A("icon"),isIncome:ve("is_income").default(!1),isCompleted:ve("is_completed").default(!1),isRecurring:ve("is_recurring").default(!1),recurrenceRule:A("recurrence_rule"),parentEventId:A("parent_event_id"),location:A("location"),notes:A("notes"),dueDate:Ir("due_date"),completedAt:Z("completed_at",{withTimezone:!0}),priority:A("priority").default("normal"),tags:A("tags").array(),attachments:A("attachments").array(),brazilianEventType:A("brazilian_event_type"),installmentInfo:nt("installment_info"),merchantCategory:A("merchant_category"),metadata:nt("metadata"),transactionId:A("transaction_id").references(()=>te.id,{onDelete:"set null"}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Xo=Pe("event_reminders",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),eventId:A("event_id").references(()=>ut.id,{onDelete:"cascade"}),remindAt:Z("remind_at",{withTimezone:!0}).notNull(),reminderType:A("reminder_type").default("notification"),message:A("message"),isSent:ve("is_sent").default(!1),sentAt:Z("sent_at",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var zP=tr("payment_method_type",["PIX","BANK_ACCOUNT","BOLETO"]),$e=Pe("contacts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),name:A("name").notNull(),email:A("email"),phone:A("phone"),cpf:A("cpf"),cnpj:A("cnpj"),notes:A("notes"),isFavorite:ve("is_favorite").default(!1),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Rs=Pe("contact_payment_methods",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),contactId:A("contact_id").references(()=>$e.id,{onDelete:"cascade"}),methodType:A("method_type").notNull(),methodDetails:nt("method_details").notNull(),isDefault:ve("is_default").default(!1),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var pp=tr("consent_type",["data_processing","marketing","analytics","third_party","third_party_sharing","voice_data","voice_recording","biometric","financial_data","location","open_banking"]),pv=tr("collection_method",["signup","settings","settings_toggle","prompt","api","import","explicit_form","terms_acceptance","voice_command"]),mv=tr("deletion_request_type",["full_account","full_deletion","specific_data","anonymization","partial_deletion","consent_withdrawal"]),fv=tr("deletion_request_status",["pending","verified","approved","processing","completed","rejected","cancelled"]),hv=tr("export_request_type",["full_data","full_export","transactions","profile","consents","audit_logs","financial_only","voice_commands","specific_period"]),gv=tr("export_format",["json","csv","pdf"]),yv=tr("export_status",["pending","processing","completed","failed","expired"]),vv=tr("limit_type",["pix_daily","pix_daytime","pix_nighttime","pix_transaction","pix_total_daily","boleto_daily","ted_daily","transfer_daily","withdrawal_daily","total_daily","total_monthly"]),_v=tr("compliance_event_type",["consent_granted","consent_revoked","data_export_requested","data_export_completed","data_deletion_requested","data_deletion_completed","data_accessed","data_modified","limit_updated","policy_acknowledged"]),Gr=Pe("consent_templates",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),consentType:pp("consent_type").notNull(),version:A("version").notNull().default("1.0"),titlePt:A("title_pt").notNull(),descriptionPt:A("description_pt").notNull(),fullTextPt:A("full_text_pt").notNull(),titleEn:A("title_en"),descriptionEn:A("description_en"),fullTextEn:A("full_text_en"),isMandatory:ve("is_mandatory").default(!1),isActive:ve("is_active").default(!0),legalBasis:A("legal_basis"),effectiveFrom:Z("effective_from",{withTimezone:!0}).defaultNow(),effectiveUntil:Z("effective_until",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Et=Pe("lgpd_consents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),consentType:pp("consent_type").notNull(),purpose:A("purpose").notNull(),legalBasis:A("legal_basis").notNull(),granted:ve("granted").notNull().default(!1),grantedAt:Z("granted_at",{withTimezone:!0}),revokedAt:Z("revoked_at",{withTimezone:!0}),consentVersion:A("consent_version").notNull(),consentTextHash:A("consent_text_hash"),collectionMethod:pv("collection_method").notNull(),ipAddress:tn("ip_address"),userAgent:A("user_agent"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()},t=>[Qy("lgpd_consents_user_type_version_idx").on(t.userId,t.consentType,t.consentVersion)]),mp=Pe("data_retention_policies",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),dataType:A("data_type").notNull().unique(),description:A("description"),descriptionPt:A("description_pt"),retentionMonths:_t("retention_months").notNull(),retentionPeriodLabel:A("retention_period_label"),autoDelete:ve("auto_delete").default(!1),deletionMethod:A("deletion_method").default("hard_delete"),legalHold:ve("legal_hold").default(!1),legalBasis:A("legal_basis"),legalRequirement:ve("legal_requirement").default(!1),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),$r=Pe("data_deletion_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),requestType:mv("request_type").notNull(),scope:nt("scope").default({}),reason:A("reason"),status:fv("status").default("pending"),verificationCode:A("verification_code"),verifiedAt:Z("verified_at",{withTimezone:!0}),reviewDeadline:Z("review_deadline",{withTimezone:!0}),processedAt:Z("processed_at",{withTimezone:!0}),processedBy:A("processed_by"),processingNotes:A("processing_notes"),legalHold:ve("legal_hold").default(!1),legalHoldReason:A("legal_hold_reason"),ipAddress:tn("ip_address"),userAgent:A("user_agent"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Sn=Pe("lgpd_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),requestType:hv("request_type").notNull(),format:gv("format").default("json"),dateFrom:Ir("date_from"),dateTo:Ir("date_to"),status:yv("status").default("pending"),processedAt:Z("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),downloadExpiresAt:Z("download_expires_at",{withTimezone:!0}),fileSizeBytes:_t("file_size_bytes"),errorMessage:A("error_message"),retryCount:_t("retry_count").default(0),requestedVia:A("requested_via").default("app"),ipAddress:tn("ip_address"),userAgent:A("user_agent"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Sr=Pe("transaction_limits",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),limitType:vv("limit_type").notNull(),dailyLimit:ot("daily_limit",{precision:15,scale:2}).notNull(),transactionLimit:ot("transaction_limit",{precision:15,scale:2}),monthlyLimit:ot("monthly_limit",{precision:15,scale:2}),currentDailyUsed:ot("current_daily_used",{precision:15,scale:2}).default("0"),currentMonthlyUsed:ot("current_monthly_used",{precision:15,scale:2}).default("0"),lastResetAt:Z("last_reset_at",{withTimezone:!0}).defaultNow(),nighttimeLimit:ot("nighttime_limit",{precision:15,scale:2}),nighttimeStart:A("nighttime_start").default("20:00"),nighttimeEnd:A("nighttime_end").default("06:00"),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()},t=>[Qy("transaction_limits_user_type_idx").on(t.userId,t.limitType)]),Zr=Pe("compliance_audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"set null"}),eventType:_v("event_type").notNull(),resourceType:A("resource_type").notNull(),resourceId:A("resource_id"),description:A("description"),metadata:nt("metadata").default({}),previousState:nt("previous_state"),newState:nt("new_state"),ipAddress:tn("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),retentionUntil:Z("retention_until",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Ns=Pe("legal_holds",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),reason:A("reason").notNull(),description:A("description"),referenceNumber:A("reference_number"),dataTypes:nt("data_types").default([]),allData:ve("all_data").default(!1),active:ve("active").default(!0),startedAt:Z("started_at",{withTimezone:!0}).defaultNow(),expiresAt:Z("expires_at",{withTimezone:!0}),releasedAt:Z("released_at",{withTimezone:!0}),releasedBy:A("released_by"),releaseReason:A("release_reason"),createdBy:A("created_by").notNull(),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var bo=Pe("notifications",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),title:A("title").notNull(),message:A("message").notNull(),type:A("type").notNull(),category:A("category"),priority:A("priority").default("normal"),isRead:ve("is_read").default(!1),readAt:Z("read_at",{withTimezone:!0}),actionUrl:A("action_url"),actionText:A("action_text"),metadata:nt("metadata"),expiresAt:Z("expires_at",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Ds=Pe("alert_rules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),ruleName:A("rule_name").notNull(),ruleType:A("rule_type").notNull(),conditions:nt("conditions").notNull(),actions:nt("actions").notNull(),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),js=Pe("notification_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),notificationId:A("notification_id").references(()=>bo.id,{onDelete:"cascade"}),deliveryMethod:A("delivery_method").notNull(),status:A("status").notNull(),sentAt:Z("sent_at",{withTimezone:!0}).defaultNow(),deliveredAt:Z("delivered_at",{withTimezone:!0}),errorMessage:A("error_message"),externalId:A("external_id"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()});var LP=tr("pix_key_type",["CPF","CNPJ","EMAIL","PHONE","RANDOM"]),qP=tr("pix_transaction_status",["pending","processing","completed","failed","cancelled","reversed"]),FP=tr("pix_transaction_type_enum",["sent","received","scheduled"]),Ms=Pe("pix_keys",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),keyType:A("key_type").notNull(),keyValue:A("key_value").notNull(),keyName:A("key_name").notNull(),bankName:A("bank_name"),isFavorite:ve("is_favorite").default(!1),isActive:ve("is_active").default(!0),verificationStatus:A("verification_status").default("pending"),lastUsed:Z("last_used",{withTimezone:!0}),usageCount:_t("usage_count").default(0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),wo=Pe("pix_qr_codes",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),qrCodeData:A("qr_code_data").notNull(),pixCopyPaste:A("pix_copy_paste").notNull(),amount:ot("amount",{precision:15,scale:2}),description:A("description"),recipientName:A("recipient_name"),recipientPixKey:A("recipient_pix_key"),expiresAt:Z("expires_at",{withTimezone:!0}),isActive:ve("is_active").default(!0),isSingleUse:ve("is_single_use").default(!1),usageCount:_t("usage_count").default(0),maxUsage:_t("max_usage"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Fn=Pe("pix_transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),transactionId:A("transaction_id").references(()=>te.id,{onDelete:"set null"}),endToEndId:A("end_to_end_id").unique(),pixKey:A("pix_key").notNull(),pixKeyType:A("pix_key_type").notNull(),recipientName:A("recipient_name").notNull(),recipientDocument:A("recipient_document"),recipientBank:A("recipient_bank"),amount:ot("amount",{precision:15,scale:2}).notNull(),description:A("description"),transactionDate:Z("transaction_date",{withTimezone:!0}).notNull(),status:A("status").default("pending"),transactionType:A("transaction_type").default("sent"),scheduledFor:Z("scheduled_for",{withTimezone:!0}),processedAt:Z("processed_at",{withTimezone:!0}),qrCodeId:A("qr_code_id").references(()=>wo.id),externalId:A("external_id"),errorMessage:A("error_message"),feeAmount:ot("fee_amount",{precision:15,scale:2}).default("0"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()});var Us=Pe("voice_commands",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),commandText:A("command_text").notNull(),audioFileUrl:A("audio_file_url"),intent:A("intent").notNull(),intentConfidence:ot("intent_confidence",{precision:3,scale:2}),entities:nt("entities"),responseText:A("response_text"),responseAudioUrl:A("response_audio_url"),processingTimeMs:_t("processing_time_ms"),status:A("status").default("processed"),errorMessage:A("error_message"),context:nt("context"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),BP=Pe("command_intents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),intentName:A("intent_name").unique().notNull(),description:A("description"),examplePhrases:A("example_phrases").array(),requiredEntities:A("required_entities").array(),actionHandler:A("action_handler"),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),vr=Pe("ai_insights",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),insightType:A("insight_type").notNull(),title:A("title").notNull(),description:A("description").notNull(),recommendation:A("recommendation"),impactLevel:A("impact_level").default("medium"),categoryId:A("category_id").references(()=>De.id),data:nt("data"),isRead:ve("is_read").default(!1),isActioned:ve("is_actioned").default(!1),expiresAt:Z("expires_at",{withTimezone:!0}),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Yo=Pe("spending_patterns",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>De.id),periodStart:Ir("period_start").notNull(),periodEnd:Ir("period_end").notNull(),periodType:A("period_type").notNull(),totalAmount:ot("total_amount",{precision:15,scale:2}).notNull(),transactionCount:_t("transaction_count").notNull(),averageTransaction:ot("average_transaction",{precision:15,scale:2}),trendPercentage:ot("trend_percentage",{precision:5,scale:2}),patternData:nt("pattern_data"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),ei=Pe("budget_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"cascade"}),budgetAmount:ot("budget_amount",{precision:15,scale:2}).notNull(),periodType:A("period_type").notNull(),alertThreshold:ot("alert_threshold",{precision:5,scale:2}).default("80"),isActive:ve("is_active").default(!0),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),Bn=Pe("chat_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),title:A("title"),isActive:ve("is_active").default(!0),metadata:nt("metadata"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),zs=Pe("chat_messages",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:A("session_id").references(()=>Bn.id,{onDelete:"cascade"}),role:A("role").notNull(),content:A("content").notNull(),attachments:nt("attachments"),context:nt("context"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()}),Ls=Pe("voice_transcriptions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>J.id,{onDelete:"cascade"}),audioStoragePath:A("audio_storage_path").notNull(),transcript:A("transcript").notNull(),confidenceScore:ot("confidence_score",{precision:3,scale:2}),language:A("language").notNull(),processingTimeMs:_t("processing_time_ms").notNull(),expiresAt:Z("expires_at",{withTimezone:!0}).notNull(),createdAt:Z("created_at",{withTimezone:!0}).defaultNow(),updatedAt:Z("updated_at",{withTimezone:!0}).defaultNow()}),uve=Pe("chat_context_snapshots",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),conversationId:A("conversation_id").references(()=>Bn.id,{onDelete:"cascade"}),recentTransactions:nt("recent_transactions"),accountBalances:nt("account_balances"),upcomingEvents:nt("upcoming_events"),userPreferences:nt("user_preferences"),createdAt:Z("created_at",{withTimezone:!0}).defaultNow()});var VP=Fe(J,({one:t,many:e})=>({preferences:t(Hr,{fields:[J.id],references:[Hr.userId]}),security:t(Ui,{fields:[J.id],references:[Ui.userId]}),bankAccounts:e(se),transactionCategories:e(De),transactions:e(te),transactionSchedules:e(zt),financialEvents:e(ut),eventReminders:e(Xo),pixKeys:e(Ms),pixQrCodes:e(wo),pixTransactions:e(Fn),contacts:e($e),boletos:e(qn),voiceCommands:e(Us),voiceTranscriptions:e(Ls),aiInsights:e(vr),spendingPatterns:e(Yo),budgetCategories:e(ei),chatSessions:e(Bn),notifications:e(bo),alertRules:e(Ds),auditLogs:e(Ko),errorLogs:e(zi),userSessions:e(As),lgpdConsentLogs:e(Cs),dataExportRequests:e(Os),bankSyncLogs:e(Wo),lgpdConsents:e(Et),dataDeletionRequests:e($r),lgpdExportRequests:e(Sn),transactionLimits:e(Sr),complianceAuditLogs:e(Zr),legalHolds:e(Ns),subscriptions:e(tt),paymentHistory:e(nr)})),HP=Fe(Hr,({one:t})=>({user:t(J,{fields:[Hr.userId],references:[J.id]})})),GP=Fe(Ui,({one:t})=>({user:t(J,{fields:[Ui.userId],references:[J.id]})})),ZP=Fe(se,({one:t,many:e})=>({user:t(J,{fields:[se.userId],references:[J.id]}),balanceHistory:e($s),syncLogs:e(Wo),transactions:e(te),transactionSchedules:e(zt),financialEvents:e(ut)})),JP=Fe($s,({one:t})=>({account:t(se,{fields:[$s.accountId],references:[se.id]})})),KP=Fe(Wo,({one:t})=>({user:t(J,{fields:[Wo.userId],references:[J.id]}),account:t(se,{fields:[Wo.accountId],references:[se.id]})})),WP=Fe(De,({one:t,many:e})=>({user:t(J,{fields:[De.userId],references:[J.id]}),parent:t(De,{fields:[De.parentId],references:[De.id],relationName:"categoryParent"}),children:e(De,{relationName:"categoryParent"}),transactions:e(te),transactionSchedules:e(zt),financialEvents:e(ut),aiInsights:e(vr),spendingPatterns:e(Yo),budgetCategories:e(ei)})),QP=Fe(te,({one:t,many:e})=>({user:t(J,{fields:[te.userId],references:[J.id]}),account:t(se,{fields:[te.accountId],references:[se.id]}),category:t(De,{fields:[te.categoryId],references:[De.id]}),pixTransactions:e(Fn),boletoPayments:e(Qo),financialEvents:e(ut)})),XP=Fe(zt,({one:t})=>({user:t(J,{fields:[zt.userId],references:[J.id]}),account:t(se,{fields:[zt.accountId],references:[se.id]}),category:t(De,{fields:[zt.categoryId],references:[De.id]}),executedTransaction:t(te,{fields:[zt.executedTransactionId],references:[te.id]})})),YP=Fe(Li,({many:t})=>({financialEvents:t(ut)})),eA=Fe(ut,({one:t,many:e})=>({user:t(J,{fields:[ut.userId],references:[J.id]}),account:t(se,{fields:[ut.accountId],references:[se.id]}),category:t(De,{fields:[ut.categoryId],references:[De.id]}),eventType:t(Li,{fields:[ut.eventTypeId],references:[Li.id]}),parentEvent:t(ut,{fields:[ut.parentEventId],references:[ut.id],relationName:"eventParent"}),childEvents:e(ut,{relationName:"eventParent"}),transaction:t(te,{fields:[ut.transactionId],references:[te.id]}),reminders:e(Xo)})),tA=Fe(Xo,({one:t})=>({user:t(J,{fields:[Xo.userId],references:[J.id]}),event:t(ut,{fields:[Xo.eventId],references:[ut.id]})})),rA=Fe(Ms,({one:t})=>({user:t(J,{fields:[Ms.userId],references:[J.id]})})),nA=Fe(wo,({one:t,many:e})=>({user:t(J,{fields:[wo.userId],references:[J.id]}),pixTransactions:e(Fn)})),oA=Fe(Fn,({one:t})=>({user:t(J,{fields:[Fn.userId],references:[J.id]}),transaction:t(te,{fields:[Fn.transactionId],references:[te.id]}),qrCode:t(wo,{fields:[Fn.qrCodeId],references:[wo.id]})})),iA=Fe($e,({one:t,many:e})=>({user:t(J,{fields:[$e.userId],references:[J.id]}),paymentMethods:e(Rs)})),sA=Fe(Rs,({one:t})=>({contact:t($e,{fields:[Rs.contactId],references:[$e.id]})})),aA=Fe(qn,({one:t,many:e})=>({user:t(J,{fields:[qn.userId],references:[J.id]}),transaction:t(te,{fields:[qn.transactionId],references:[te.id]}),payments:e(Qo)})),cA=Fe(Qo,({one:t})=>({boleto:t(qn,{fields:[Qo.boletoId],references:[qn.id]}),transaction:t(te,{fields:[Qo.transactionId],references:[te.id]})})),uA=Fe(Us,({one:t})=>({user:t(J,{fields:[Us.userId],references:[J.id]})})),lA=Fe(Ls,({one:t})=>({user:t(J,{fields:[Ls.userId],references:[J.id]})})),dA=Fe(vr,({one:t})=>({user:t(J,{fields:[vr.userId],references:[J.id]}),category:t(De,{fields:[vr.categoryId],references:[De.id]})})),pA=Fe(Yo,({one:t})=>({user:t(J,{fields:[Yo.userId],references:[J.id]}),category:t(De,{fields:[Yo.categoryId],references:[De.id]})})),mA=Fe(ei,({one:t})=>({user:t(J,{fields:[ei.userId],references:[J.id]}),category:t(De,{fields:[ei.categoryId],references:[De.id]})})),fA=Fe(Bn,({one:t,many:e})=>({user:t(J,{fields:[Bn.userId],references:[J.id]}),messages:e(zs)})),hA=Fe(zs,({one:t})=>({session:t(Bn,{fields:[zs.sessionId],references:[Bn.id]})})),gA=Fe(bo,({one:t,many:e})=>({user:t(J,{fields:[bo.userId],references:[J.id]}),logs:e(js)})),yA=Fe(Ds,({one:t})=>({user:t(J,{fields:[Ds.userId],references:[J.id]})})),vA=Fe(js,({one:t})=>({notification:t(bo,{fields:[js.notificationId],references:[bo.id]})})),_A=Fe(Ko,({one:t})=>({user:t(J,{fields:[Ko.userId],references:[J.id]})})),bA=Fe(zi,({one:t})=>({user:t(J,{fields:[zi.userId],references:[J.id]}),resolvedByUser:t(J,{fields:[zi.resolvedBy],references:[J.id],relationName:"resolvedByUser"})})),wA=Fe(As,({one:t})=>({user:t(J,{fields:[As.userId],references:[J.id]})})),xA=Fe(Cs,({one:t})=>({user:t(J,{fields:[Cs.userId],references:[J.id]})})),SA=Fe(Os,({one:t})=>({user:t(J,{fields:[Os.userId],references:[J.id]})})),TA=Fe(Gr,({many:t})=>({consents:t(Et)})),EA=Fe(Et,({one:t})=>({user:t(J,{fields:[Et.userId],references:[J.id]})})),IA=Fe(mp,()=>({})),kA=Fe($r,({one:t})=>({user:t(J,{fields:[$r.userId],references:[J.id]})})),PA=Fe(Sn,({one:t})=>({user:t(J,{fields:[Sn.userId],references:[J.id]})})),AA=Fe(Sr,({one:t})=>({user:t(J,{fields:[Sr.userId],references:[J.id]})})),CA=Fe(Zr,({one:t})=>({user:t(J,{fields:[Zr.userId],references:[J.id]})})),OA=Fe(Ns,({one:t})=>({user:t(J,{fields:[Ns.userId],references:[J.id]})})),$A=Fe(Or,({many:t})=>({subscriptions:t(tt)})),RA=Fe(tt,({one:t,many:e})=>({user:t(J,{fields:[tt.userId],references:[J.id]}),plan:t(Or,{fields:[tt.planId],references:[Or.id]}),paymentHistory:e(nr)})),NA=Fe(nr,({one:t})=>({user:t(J,{fields:[nr.userId],references:[J.id]}),subscription:t(tt,{fields:[nr.subscriptionId],references:[tt.id]})}));var jA=s(()=>{let t=process.env.DATABASE_URL;if(!t)throw new Error("DATABASE_URL environment variable is not set");return t},"getPooledDatabaseUrl"),G6=s(()=>{let t=process.env.DATABASE_URL_UNPOOLED;return t||(console.warn("DATABASE_URL_UNPOOLED not set, using DATABASE_URL as fallback"),jA())},"getDirectDatabaseUrl"),Z6=s(()=>{let t=Go(jA());return up(t,{schema:fp})},"createHttpClient"),bv=null,pr=s(()=>(bv||(bv=Z6()),bv),"getHttpClient");var DA=null,wv=null,J6=s(()=>(wv||(DA=new _o({connectionString:G6()}),wv=dp(DA,{schema:fp})),wv),"getPoolClient");var xv=null,Vn=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Database client cannot be used in browser context");if(!xv){if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL environment variable is not set");xv=pr()}return xv[e]}}),Sv=null,qve=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Admin database client cannot be used in browser context");if(!Sv){if(!(process.env.DATABASE_URL_UNPOOLED??process.env.DATABASE_URL))throw new Error("DATABASE_URL_UNPOOLED or DATABASE_URL environment variable is not set");Sv=J6()}return Sv[e]}});async function MA(){let t=Date.now();try{return await Vn.execute(M`SELECT 1`),{status:"connected",latencyMs:Date.now()-t}}catch(e){return{status:"disconnected",latencyMs:Date.now()-t,error:e instanceof Error?e.message:"Unknown error"}}}s(MA,"checkDatabaseHealth");function UA(t){t.get("/api/ping",e=>e.json({message:"pong",timestamp:new Date().toISOString(),version:"1.0.0"})),t.get("/api/status",async e=>{let r=await MA(),n=r.status==="connected";return e.json({services:{database:r.status,databaseLatencyMs:r.latencyMs,trpc:"connected",auth:"connected"},status:n?"operational":"degraded",timestamp:new Date().toISOString(),...r.error&&{errors:{database:r.error}}})}),t.get("/api/health",async e=>{let r=await MA();return r.status!=="connected"?e.json({healthy:!1,database:r,timestamp:new Date().toISOString()},503):e.json({healthy:!0,database:r,timestamp:new Date().toISOString()})})}s(UA,"setupApiRoutes");hp();function zA(t){t.get("/api/health",e=>e.json({environment:Nc.NODE_ENV,memory:process.memoryUsage?.()||{},service:"aegiswallet-server",status:"ok",timestamp:new Date().toISOString(),uptime:process.uptime?.()||0}))}s(zA,"setupHealthRoute");hp();var _B=process.env.VERCEL==="1"||process.env.VERCEL==="true";function IC(t){_B||(Nc.IS_PRODUCTION?Promise.resolve().then(()=>(SC(),xC)).then(({serveStatic:e})=>{Promise.resolve().then(()=>(EC(),TC)).then(({htmlCache:r,staticAssetsCache:n})=>{t.use("/assets/*",n(),e({root:"./dist"})),t.use("/*.html",r(),e({root:"./dist"})),t.use("/*",r(),e({path:"./dist/index.html",rewriteRequestPath:s(o=>o,"rewriteRequestPath")}))})}):t.get("/*",e=>e.req.path.startsWith("/api/")?e.notFound():e.json({api:`http://localhost:${Nc.PORT}`,frontend:"http://localhost:5173",message:"Development mode - Frontend served by Vite dev server",mode:"development"})))}s(IC,"setupStaticRoutes");var bB=300*1e3,kC=100,ti=new Map;function wB(){if(ti.size<=kC)return;let e=Array.from(ti.entries()).sort((r,n)=>r[1].lastAccess-n[1].lastAccess).slice(0,ti.size-kC);for(let[r]of e)ti.delete(r)}s(wB,"evictOldestCacheEntries");var vp=class{static{s(this,"FinancialContextService")}userId;constructor(e){this.userId=e}async getContext(e=!1){let r=this.userId,n=ti.get(r),o=Date.now();if(!e&&n&&n.expiresAt>o)return n.lastAccess=o,n.context;let i=await this.buildContext();return ti.set(r,{context:i,expiresAt:o+bB,lastAccess:o}),wB(),i}invalidateCache(){ti.delete(this.userId)}static clearAllCache(){ti.clear()}async buildContext(){let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),[o,i,a,u,l]=await Promise.all([this.getAccountBalances(),this.getMonthlyTotals(r,n),this.getCategorySpending(r,n),this.getPendingAlerts(),this.getUpcomingPayments(30)]),d=o.reduce((f,h)=>f+Number(h.balance||0),0),p=o.reduce((f,h)=>f+Number(h.availableBalance||0),0);return{totalBalance:d,availableBalance:p,monthlyIncome:i.income,monthlyExpenses:i.expenses,topCategories:a,pendingAlerts:u,upcomingPayments:l,lastUpdated:e}}async getAccountBalances(){return await Vn.select({id:se.id,balance:se.balance,availableBalance:se.availableBalance,institutionName:se.institutionName}).from(se).where(Ee(H(se.userId,this.userId),H(se.isActive,!0)))}async getMonthlyTotals(e,r){let n=await Vn.select({transactionType:te.transactionType,total:Ld(te.amount)}).from(te).where(Ee(H(te.userId,this.userId),ur(te.transactionDate,e),rr(te.transactionDate,r))).groupBy(te.transactionType),o=0,i=0;for(let a of n){let u=Math.abs(Number(a.total||0));a.transactionType==="credit"?o+=u:a.transactionType==="debit"&&(i+=u)}return{income:o,expenses:i}}async getCategorySpending(e,r){let n=await Vn.select({categoryId:te.categoryId,categoryName:De.name,total:Ld(te.amount)}).from(te).leftJoin(De,H(te.categoryId,De.id)).where(Ee(H(te.userId,this.userId),H(te.transactionType,"debit"),ur(te.transactionDate,e),rr(te.transactionDate,r))).groupBy(te.categoryId,De.name).orderBy(Rt(Ld(te.amount))).limit(10),o=n.reduce((i,a)=>i+Math.abs(Number(a.total||0)),0);return n.map(i=>({categoryId:i.categoryId||"uncategorized",categoryName:i.categoryName||"Sem categoria",amount:Math.abs(Number(i.total||0)),percentage:o>0?Math.round(Math.abs(Number(i.total||0))/o*100):0,trend:"stable"}))}async getPendingAlerts(){return(await Vn.select({id:vr.id,insightType:vr.insightType,title:vr.title,impactLevel:vr.impactLevel,recommendation:vr.recommendation}).from(vr).where(Ee(H(vr.userId,this.userId),H(vr.isRead,!1))).orderBy(Rt(vr.createdAt)).limit(5)).map(r=>({id:r.id,type:this.mapInsightTypeToAlertType(r.insightType),message:r.title,severity:r.impactLevel||"medium",actionable:!!r.recommendation}))}mapInsightTypeToAlertType(e){switch(this.normalizeInsightType(e)){case"budget_alert":return"budget_exceeded";case"warning":return"low_balance";case"spending_pattern":return"unusual_spending";case"opportunity":return"payment_due";default:return"unusual_spending"}}normalizeInsightType(e){return e.includes("_")?e:e.replace(/([A-Z])/g,"_$1").toLowerCase()}async getUpcomingPayments(e){let r=new Date,n=new Date;n.setDate(r.getDate()+e);let o=r.toISOString().split("T")[0],i=n.toISOString().split("T")[0];return(await Vn.select({id:zt.id,description:zt.description,amount:zt.amount,scheduledDate:zt.scheduledDate,recurrenceRule:zt.recurrenceRule}).from(zt).where(Ee(H(zt.userId,this.userId),H(zt.isActive,!0),H(zt.executed,!1),ur(zt.scheduledDate,o),rr(zt.scheduledDate,i))).orderBy(zt.scheduledDate).limit(10)).map(u=>({id:u.id,description:u.description,amount:Math.abs(Number(u.amount)),dueDate:new Date(u.scheduledDate),isRecurring:!!u.recurrenceRule}))}};function qs(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}s(qs,"formatBRL");function xB(t){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}s(xB,"formatDateBR");function SB(t){return{up:"\u2191 aumentando",down:"\u2193 diminuindo",stable:"\u2192 est\xE1vel"}[t]}s(SB,"translateTrend");function PC(t){let{totalBalance:e,availableBalance:r,monthlyIncome:n,monthlyExpenses:o,topCategories:i}=t,a=n-o,u=n>0?Math.round(a/n*100):0,l=i.slice(0,5).map((d,p)=>`${p+1}. **${d.categoryName}**: ${qs(d.amount)} (${d.percentage}% do total, ${SB(d.trend)})`).join(`
`);return`
### Resumo Financeiro
- **Saldo Total**: ${qs(e)}
- **Saldo Dispon\xEDvel**: ${qs(r)}
- **Renda do M\xEAs**: ${qs(n)}
- **Gastos do M\xEAs**: ${qs(o)}
- **Economia do M\xEAs**: ${qs(a)} (${u}% da renda)

### Top 5 Categorias de Gasto (M\xEAs Atual)
${l||"Nenhuma transa\xE7\xE3o registrada este m\xEAs."}

### \xDAltima Atualiza\xE7\xE3o
${xB(t.lastUpdated)}
`.trim()}s(PC,"buildFinancialContextBlock");function AC(t){if(t.length===0)return"\u2705 Nenhum alerta ativo no momento.";let e={low:"\u2139\uFE0F",medium:"\u26A0\uFE0F",high:"\u{1F6A8}"};return t.map(r=>`${e[r.severity]} [${r.severity.toUpperCase()}] ${r.message}`).join(`
`)}s(AC,"buildAlertsBlock");var CC=s(()=>{try{return!1}catch{}return!1},"isTestEnvironment"),OC=s(()=>{try{return!0}catch{}return!1},"isProductionEnvironment");var $C=new Set,_p=s((t,e,r)=>{let n=CC()||OC(),o=r??t;$C.has(o)||n||($C.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},"deprecated");var Mv=[".lcl.dev",".lclstage.dev",".lclclerk.com"],RC=[".accounts.dev",".accountsstage.dev",".accounts.lclclerk.com"],NC=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"];var Fs=s(t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,"isomorphicAtob");var DC=s(t=>typeof btoa<"u"&&typeof btoa=="function"?btoa(t):typeof global<"u"&&global.Buffer?new global.Buffer(t).toString("base64"):t,"isomorphicBtoa");var jC="pk_live_",TB="pk_test_";function MC(t){if(!t.endsWith("$"))return!1;let e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}s(MC,"isValidDecodedPublishableKey");function ri(t,e={}){if(t=t||"",!t||!Uv(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!Uv(t))throw new Error("Publishable key not valid.");return null}let r=t.startsWith(jC)?"production":"development",n;try{n=Fs(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!MC(n)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return e.proxyUrl?o=e.proxyUrl:r!=="development"&&e.domain&&e.isSatellite&&(o=`clerk.${e.domain}`),{instanceType:r,frontendApi:o}}s(ri,"parsePublishableKey");function Uv(t=""){try{if(!(t.startsWith(jC)||t.startsWith(TB)))return!1;let e=t.split("_");if(e.length!==3)return!1;let r=e[2];return r?MC(Fs(r)):!1}catch{return!1}}s(Uv,"isPublishableKey");function zv(){let t=new Map;return{isDevOrStagingUrl:s(e=>{if(!e)return!1;let r=typeof e=="string"?e:e.hostname,n=t.get(r);return n===void 0&&(n=NC.some(o=>r.endsWith(o)),t.set(r,n)),n},"isDevOrStagingUrl")}}s(zv,"createDevOrStagingUrlCache");function bp(t){return t.startsWith("test_")||t.startsWith("sk_test_")}s(bp,"isDevelopmentFromSecretKey");async function wp(t,e=globalThis.crypto.subtle){let r=new TextEncoder().encode(t),n=await e.digest("sha-1",r);return DC(String.fromCharCode(...new Uint8Array(n))).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}s(wp,"getCookieSuffix");var xp=s((t,e)=>`${t}_${e}`,"getSuffixedCookieName");var EB={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:s((t,e)=>e<5,"shouldRetry"),retryImmediately:!1,jitter:!0},IB=100,UC=s(async t=>new Promise(e=>setTimeout(e,t)),"sleep"),zC=s((t,e)=>e?t*(1+Math.random()):t,"applyJitter"),kB=s(t=>{let e=0,r=s(()=>{let n=t.initialDelay,o=t.factor,i=n*Math.pow(o,e);return i=zC(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)},"calculateDelayInMs");return async()=>{await UC(r()),e++}},"createExponentialDelayAsyncFn"),Sp=s(async(t,e={})=>{let r=0,{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:a,retryImmediately:u,jitter:l,onBeforeRetry:d}={...EB,...e},p=kB({initialDelay:o,maxDelayBetweenRetries:i,factor:a,jitter:l});for(;;)try{return await t()}catch(f){if(r++,!n(f,r))throw f;d&&await d(r),u&&r===1?await UC(zC(IB,l)):await p()}},"retry");function Lv(t){return Mv.some(e=>t.startsWith("accounts.")&&t.endsWith(e))}s(Lv,"isLegacyDevAccountPortalOrigin");function qv(t){return RC.some(e=>t.endsWith(e)&&!t.endsWith(".clerk"+e))}s(qv,"isCurrentDevAccountPortalOrigin");function Fv(t){function e(r){let n=r??this;if(!n)throw new TypeError(`${t.kind||t.name} type guard requires an error object`);return n instanceof t}return s(e,"typeGuard"),e}s(Fv,"createErrorTypeGuard");var Tp=class{static{s(this,"ClerkAPIError")}static kind="ClerkApiError";code;message;longMessage;meta;constructor(t){let e={code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t.meta?.param_name,sessionId:t.meta?.session_id,emailAddresses:t.meta?.email_addresses,identifiers:t.meta?.identifiers,zxcvbn:t.meta?.zxcvbn,plan:t.meta?.plan,isPlanUpgradePossible:t.meta?.is_plan_upgrade_possible}};this.code=e.code,this.message=e.message,this.longMessage=e.longMessage,this.meta=e.meta}},Awe=Fv(Tp);function Bv(t){return new Tp(t)}s(Bv,"parseError");var Vv=class LC extends Error{static{s(this,"ClerkError")}static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(e){super(new.target.formatMessage(new.target.kind,e.message,e.code,e.docsUrl),{cause:e.cause}),Object.setPrototypeOf(this,LC.prototype),this.code=e.code,this.docsUrl=e.docsUrl,this.longMessage=e.longMessage,this.cause=e.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(e,r,n,o){let i="Clerk:",a=new RegExp(i.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${i} ${r.trim()}

(code="${n}")

`,o&&(r+=`

Docs: ${o}`),r}},Ep=class qC extends Vv{static{s(this,"ClerkAPIResponseError")}static kind="ClerkAPIResponseError";status;clerkTraceId;retryAfter;errors;constructor(e,r){let{data:n,status:o,clerkTraceId:i,retryAfter:a}=r;super({...r,message:e,code:"api_response_error"}),Object.setPrototypeOf(this,qC.prototype),this.status=o,this.clerkTraceId=i,this.retryAfter=a,this.errors=(n||[]).map(u=>new Tp(u))}toString(){let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(r=>JSON.stringify(r))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e}static formatMessage(e,r,n,o){return r}},Cwe=Fv(Ep),PB=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Hv({packageName:t,customMessages:e}){let r=t;function n(i,a){if(!a)return`${r}: ${i}`;let u=i,l=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let d of l){let p=(a[d[1]]||"").toString();u=u.replace(`{{${d[1]}}}`,p)}return`${r}: ${u}`}s(n,"buildMessage");let o={...PB,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}s(Hv,"buildErrorThrower");var FC=class BC extends Vv{static{s(this,"ClerkRuntimeError")}static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(e,r){super({...r,message:e}),Object.setPrototypeOf(this,BC.prototype)}},Owe=Fv(FC);function Gv(t){return t&&"clerkError"in t}s(Gv,"isClerkAPIResponseError");var AB=Hv({packageName:"@clerk/backend"}),{isDevOrStagingUrl:pxe}=zv();var VC={InvalidSecretKey:"clerk_key_invalid"},Ye={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",RemoteJWKInvalid:"jwk-remote-invalid",RemoteJWKMissing:"jwk-remote-missing",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},lr={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk-generated JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable.",EnsureClockSync:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization)."},ht=class HC extends Error{static{s(this,"_TokenVerificationError")}constructor({action:e,message:r,reason:n}){super(r),Object.setPrototypeOf(this,HC.prototype),this.reason=n,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};var jc={TokenInvalid:"token-invalid",InvalidSecretKey:"secret-key-invalid",UnexpectedError:"unexpected-error"},Ip=class GC extends Error{static{s(this,"_MachineTokenVerificationError")}constructor({message:e,code:r,status:n}){super(e),Object.setPrototypeOf(this,GC.prototype),this.code=r,this.status=n}getFullMessage(){return`${this.message} (code=${this.code}, status=${this.status})`}};var Zv=require("node:crypto");var CB=fetch.bind(globalThis),Hn={crypto:Zv.webcrypto,get fetch(){return CB},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},Jv={parse(t,e){return OB(t,ZC,e)},stringify(t,e){return $B(t,ZC,e)}},ZC={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function OB(t,e,r={}){if(!e.codes){e.codes={};for(let l=0;l<e.chars.length;++l)e.codes[e.chars[l]]=l}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let o=new(r.out??Uint8Array)(n*e.bits/8|0),i=0,a=0,u=0;for(let l=0;l<n;++l){let d=e.codes[t[l]];if(d===void 0)throw new SyntaxError("Invalid character "+t[l]);a=a<<e.bits|d,i+=e.bits,i>=8&&(i-=8,o[u++]=255&a>>i)}if(i>=e.bits||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return o}s(OB,"parse");function $B(t,e,r={}){let{pad:n=!0}=r,o=(1<<e.bits)-1,i="",a=0,u=0;for(let l=0;l<t.length;++l)for(u=u<<8|255&t[l],a+=8;a>e.bits;)a-=e.bits,i+=e.chars[o&u>>a];if(a&&(i+=e.chars[o&u<<e.bits-a]),n)for(;i.length*e.bits&7;)i+="=";return i}s($B,"stringify");var Wv={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},Kv="RSASSA-PKCS1-v1_5",JC={RS256:Kv,RS384:Kv,RS512:Kv},Qv=Object.keys(Wv);function RB(t){let e=Wv[t],r=JC[t];if(!e||!r)throw new Error(`Unsupported algorithm ${t}, expected one of ${Qv.join(",")}.`);return{hash:{name:Wv[t]},name:JC[t]}}s(RB,"getCryptoAlgorithm");var NB=s(t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),"isArrayString"),DB=s((t,e)=>{let r=[e].flat().filter(i=>!!i),n=[t].flat().filter(i=>!!i);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(NB(t)&&!t.some(i=>r.includes(i)))throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}},"assertAudienceClaim"),Xv=s(t=>{if(!(typeof t>"u")&&t!=="JWT")throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},"assertHeaderType"),Yv=s(t=>{if(!Qv.includes(t))throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${Qv}.`})},"assertHeaderAlgorithm"),jB=s(t=>{if(typeof t!="string")throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},"assertSubClaim"),MB=s((t,e)=>{if(!(!t||!e||e.length===0)&&!e.includes(t))throw new ht({reason:Ye.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${e}".`})},"assertAuthorizedPartiesClaim"),UB=s((t,e)=>{if(typeof t!="number")throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()<=r.getTime()-e)throw new ht({reason:Ye.TokenExpired,message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},"assertExpirationClaim"),zB=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new ht({reason:Ye.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertActivationClaim"),LB=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new ht({reason:Ye.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertIssuedAtClaim");function qB(t){let e=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=Fs(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n);for(let i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return o}s(qB,"pemToBuffer");function FB(t,e,r){if(typeof t=="object")return Hn.crypto.subtle.importKey("jwk",t,e,!1,[r]);let n=qB(t),o=r==="sign"?"pkcs8":"spki";return Hn.crypto.subtle.importKey(o,n,e,!1,[r])}s(FB,"importKey");var BB=5*1e3;async function e_(t,e){let{header:r,signature:n,raw:o}=t,a=new TextEncoder().encode([o.header,o.payload].join(".")),u=RB(r.alg);try{let l=await FB(e,u,"verify");return{data:await Hn.crypto.subtle.verify(u.name,l,n,a)}}catch(l){return{errors:[new ht({reason:Ye.TokenInvalidSignature,message:l?.message})]}}}s(e_,"hasValidSignature");function Tn(t){let e=(t||"").toString().split(".");if(e.length!==3)return{errors:[new ht({reason:Ye.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,n,o]=e,i=new TextDecoder,a=JSON.parse(i.decode(Jv.parse(r,{loose:!0}))),u=JSON.parse(i.decode(Jv.parse(n,{loose:!0}))),l=Jv.parse(o,{loose:!0});return{data:{header:a,payload:u,signature:l,raw:{header:r,payload:n,signature:o,text:t}}}}s(Tn,"decodeJwt");async function KC(t,e){let{audience:r,authorizedParties:n,clockSkewInMs:o,key:i}=e,a=o||BB,{data:u,errors:l}=Tn(t);if(l)return{errors:l};let{header:d,payload:p}=u;try{let{typ:y,alg:g}=d;Xv(y),Yv(g);let{azp:m,sub:_,aud:w,iat:b,exp:x,nbf:k}=p;jB(_),DB([w],[r]),MB(m,n),UB(x,a),zB(k,a),LB(b,a)}catch(y){return{errors:[y]}}let{data:f,errors:h}=await e_(u,i);return h?{errors:[new ht({action:lr.EnsureClerkJWT,reason:Ye.TokenVerificationFailed,message:`Error verifying JWT signature. ${h[0]}`})]}:f?{data:p}:{errors:[new ht({reason:Ye.TokenInvalidSignature,message:"JWT signature is invalid."})]}}s(KC,"verifyJwt");var WC=s(t=>{throw TypeError(t)},"__typeError"),VB=s((t,e,r)=>e.has(t)||WC("Cannot "+r),"__accessCheck"),QC=s((t,e,r)=>e.has(t)?WC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),kp=s((t,e,r)=>(VB(t,e,"access private method"),r),"__privateMethod");function t_(t){return t?`https://${t.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}s(t_,"buildAccountsBaseUrl");var HB={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},GB=new Set(["first_factor","second_factor","multi_factor"]),ZB=new Set(["strict_mfa","strict","moderate","lax"]),JB=s(t=>typeof t=="number"&&t>0,"isValidMaxAge"),KB=s(t=>GB.has(t),"isValidLevel"),WB=s(t=>ZB.has(t),"isValidVerificationType"),r_=s(t=>t.replace(/^(org:)*/,"org:"),"prefixWithOrg"),QB=s((t,e)=>{let{orgId:r,orgRole:n,orgPermissions:o}=e;return!t.role&&!t.permission||!r||!n||!o?null:t.permission?o.includes(r_(t.permission)):t.role?r_(n)===r_(t.role):null},"checkOrgAuthorization"),XC=s((t,e)=>{let{org:r,user:n}=Pp(t),[o,i]=e.split(":"),a=i||o;return o==="org"?r.includes(a):o==="user"?n.includes(a):[...r,...n].includes(a)},"checkForFeatureOrPlan"),XB=s((t,e)=>{let{features:r,plans:n}=e;return t.feature&&r?XC(r,t.feature):t.plan&&n?XC(n,t.plan):null},"checkBillingAuthorization"),Pp=s(t=>{let e=t?t.split(",").map(r=>r.trim()):[];return{org:e.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:e.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},"splitByScope"),YC=s(t=>{if(!t)return!1;let e=s(o=>typeof o=="string"?HB[o]:o,"convertConfigToObject"),r=typeof t=="string"&&WB(t),n=typeof t=="object"&&KB(t.level)&&JB(t.afterMinutes);return r||n?e.bind(null,t):!1},"validateReverificationConfig"),YB=s((t,{factorVerificationAge:e})=>{if(!t.reverification||!e)return null;let r=YC(t.reverification);if(!r)return null;let{level:n,afterMinutes:o}=r(),[i,a]=e,u=i!==-1?o>i:null,l=a!==-1?o>a:null;switch(n){case"first_factor":return u;case"second_factor":return a!==-1?l:u;case"multi_factor":return a===-1?u:u&&l}},"checkReverificationAuthorization"),n_=s(t=>e=>{if(!t.userId)return!1;let r=XB(e,t),n=QB(e,t),o=YB(e,t);return[r||n,o].some(i=>i===null)?[r||n,o].some(i=>i===!0):[r||n,o].every(i=>i===!0)},"createCheckAuthorization");var e5=s(({per:t,fpm:e})=>{if(!t||!e)return{permissions:[],featurePermissionMap:[]};let r=t.split(",").map(n=>n.trim());return{permissions:r,featurePermissionMap:e.split(",").map(n=>Number.parseInt(n.trim(),10)).map(n=>n.toString(2).padStart(r.length,"0").split("").map(o=>Number.parseInt(o,10)).reverse()).filter(Boolean)}},"parsePermissions");function t5({features:t,permissions:e,featurePermissionMap:r}){if(!t||!e||!r)return[];let n=[];for(let o=0;o<t.length;o++){let i=t[o];if(o>=r.length)continue;let a=r[o];if(a)for(let u=0;u<a.length;u++)a[u]===1&&n.push(`org:${i}:${e[u]}`)}return n}s(t5,"buildOrgPermissions");var e1=s(t=>{let e,r,n,o,i=t.fva??null,a=t.sts??null;switch(t.v){case 2:if(t.o){e=t.o?.id,n=t.o?.slg,t.o?.rol&&(r=`org:${t.o?.rol}`);let{org:u}=Pp(t.fea),{permissions:l,featurePermissionMap:d}=e5({per:t.o?.per,fpm:t.o?.fpm});o=t5({features:u,featurePermissionMap:d,permissions:l})}break;default:e=t.org_id,r=t.org_role,n=t.org_slug,o=t.org_permissions;break}return{sessionClaims:t,sessionId:t.sid,sessionStatus:a,actor:t.act,userId:t.sub,orgId:e,orgRole:r,orgSlug:n,orgPermissions:o,factorVerificationAge:i}},"__experimental_JWTPayloadToAuthObjectProperties");var BO=mo(n1(),1);function p5(t){for(var e=[],r=0;r<t.length;){var n=t[r];if(n==="*"||n==="+"||n==="?"){e.push({type:"MODIFIER",index:r,value:t[r++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(n==="{"){e.push({type:"OPEN",index:r,value:t[r++]});continue}if(n==="}"){e.push({type:"CLOSE",index:r,value:t[r++]});continue}if(n===":"){for(var o="",i=r+1;i<t.length;){var a=t.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:o}),r=i;continue}if(n==="("){var u=1,l="",i=r+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){l+=t[i++]+t[i++];continue}if(t[i]===")"){if(u--,u===0){i++;break}}else if(t[i]==="("&&(u++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=t[i++]}if(u)throw new TypeError("Unbalanced pattern at ".concat(r));if(!l)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:l}),r=i;continue}e.push({type:"CHAR",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}s(p5,"_");function m5(t,e){e===void 0&&(e={});for(var r=p5(t),n=e.prefixes,o=n===void 0?"./":n,i=e.delimiter,a=i===void 0?"/#?":i,u=[],l=0,d=0,p="",f=function($){if(d<r.length&&r[d].type===$)return r[d++].value},h=function($){var P=f($);if(P!==void 0)return P;var N=r[d],D=N.type,K=N.index;throw new TypeError("Unexpected ".concat(D," at ").concat(K,", expected ").concat($))},y=function(){for(var $="",P;P=f("CHAR")||f("ESCAPED_CHAR");)$+=P;return $},g=function($){for(var P=0,N=a;P<N.length;P++){var D=N[P];if($.indexOf(D)>-1)return!0}return!1},m=function($){var P=u[u.length-1],N=$||(P&&typeof P=="string"?P:"");if(P&&!N)throw new TypeError('Must have text between two parameters, missing text after "'.concat(P.name,'"'));return!N||g(N)?"[^".concat(ni(a),"]+?"):"(?:(?!".concat(ni(N),")[^").concat(ni(a),"])+?")};d<r.length;){var _=f("CHAR"),w=f("NAME"),b=f("PATTERN");if(w||b){var x=_||"";o.indexOf(x)===-1&&(p+=x,x=""),p&&(u.push(p),p=""),u.push({name:w||l++,prefix:x,suffix:"",pattern:b||m(x),modifier:f("MODIFIER")||""});continue}var k=_||f("ESCAPED_CHAR");if(k){p+=k;continue}if(p&&(u.push(p),p=""),f("OPEN")){var x=y(),R=f("NAME")||"",O=f("PATTERN")||"",C=y();h("CLOSE"),u.push({name:R||(O?l++:""),pattern:R&&!O?m(x):O,prefix:x,suffix:C,modifier:f("MODIFIER")||""});continue}h("END")}return u}s(m5,"F");function f5(t,e){var r=[];return h5(i1(t,r,e),r,e)}s(f5,"H");function h5(t,e,r){r===void 0&&(r={});var n=r.decode,o=n===void 0?function(i){return i}:n;return function(i){var a=t.exec(i);if(!a)return!1;for(var u=a[0],l=a.index,d=Object.create(null),p=function(h){if(a[h]===void 0)return"continue";var y=e[h-1];y.modifier==="*"||y.modifier==="+"?d[y.name]=a[h].split(y.prefix+y.suffix).map(function(g){return o(g,y)}):d[y.name]=o(a[h],y)},f=1;f<a.length;f++)p(f);return{path:u,index:l,params:d}}}s(h5,"I");function ni(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}s(ni,"s");function o1(t){return t&&t.sensitive?"":"i"}s(o1,"D");function g5(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(t.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(t.source);return t}s(g5,"$");function y5(t,e,r){var n=t.map(function(o){return i1(o,e,r).source});return new RegExp("(?:".concat(n.join("|"),")"),o1(r))}s(y5,"W");function v5(t,e,r){return _5(m5(t,r),e,r)}s(v5,"L");function _5(t,e,r){r===void 0&&(r={});for(var n=r.strict,o=n===void 0?!1:n,i=r.start,a=i===void 0?!0:i,u=r.end,l=u===void 0?!0:u,d=r.encode,p=d===void 0?function(N){return N}:d,f=r.delimiter,h=f===void 0?"/#?":f,y=r.endsWith,g=y===void 0?"":y,m="[".concat(ni(g),"]|$"),_="[".concat(ni(h),"]"),w=a?"^":"",b=0,x=t;b<x.length;b++){var k=x[b];if(typeof k=="string")w+=ni(p(k));else{var R=ni(p(k.prefix)),O=ni(p(k.suffix));if(k.pattern)if(e&&e.push(k),R||O)if(k.modifier==="+"||k.modifier==="*"){var C=k.modifier==="*"?"?":"";w+="(?:".concat(R,"((?:").concat(k.pattern,")(?:").concat(O).concat(R,"(?:").concat(k.pattern,"))*)").concat(O,")").concat(C)}else w+="(?:".concat(R,"(").concat(k.pattern,")").concat(O,")").concat(k.modifier);else{if(k.modifier==="+"||k.modifier==="*")throw new TypeError('Can not repeat "'.concat(k.name,'" without a prefix and suffix'));w+="(".concat(k.pattern,")").concat(k.modifier)}else w+="(?:".concat(R).concat(O,")").concat(k.modifier)}}if(l)o||(w+="".concat(_,"?")),w+=r.endsWith?"(?=".concat(m,")"):"$";else{var $=t[t.length-1],P=typeof $=="string"?_.indexOf($[$.length-1])>-1:$===void 0;o||(w+="(?:".concat(_,"(?=").concat(m,"))?")),P||(w+="(?=".concat(_,"|").concat(m,")"))}return new RegExp(w,o1(r))}s(_5,"U");function i1(t,e,r){return t instanceof RegExp?g5(t,e):Array.isArray(t)?y5(t,e,r):v5(t,e,r)}s(i1,"P");function o_(t,e){try{return f5(t,e)}catch(r){throw new Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${r.message}`)}}s(o_,"match");var k1="https://api.clerk.com",P1="v1",A1="@clerk/backend@2.24.0",x5=300,__="2025-11-10",S5={AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},Mp={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count",HandshakeNonce:"__clerk_handshake_nonce"},T5={ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:Mp.DevBrowser,Handshake:Mp.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason",HandshakeNonce:Mp.HandshakeNonce,HandshakeFormat:"format"},E5={Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",SecFetchSite:"sec-fetch-site",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},I5={Json:"application/json"},ke={Attributes:S5,Cookies:Mp,Headers:E5,ContentTypes:I5,QueryParameters:T5};function s1(t,e){return Object.keys(t).reduce((r,n)=>({...r,[n]:e[n]||r[n]}),{...t})}s(s1,"mergePreDefinedOptions");function C1(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}s(C1,"assertValidSecretKey");function k5(t){ri(t,{fatal:!0})}s(k5,"assertValidPublishableKey");var Ge={SessionToken:"session_token",ApiKey:"api_key",M2MToken:"m2m_token",OAuthToken:"oauth_token"},P5=class{static{s(this,"AuthenticateContext")}constructor(t,e,r){this.cookieSuffix=t,this.clerkRequest=e,this.originalFrontendApi="",r.acceptsToken===Ge.M2MToken||r.acceptsToken===Ge.ApiKey?this.initHeaderValues():(this.initPublishableKeyValues(r),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues()),Object.assign(this,r),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.tokenInHeader}usesSuffixedCookies(){let t=this.getSuffixedCookie(ke.Cookies.ClientUat),e=this.getCookie(ke.Cookies.ClientUat),r=this.getSuffixedCookie(ke.Cookies.Session)||"",n=this.getCookie(ke.Cookies.Session)||"";if(n&&!this.tokenHasIssuer(n))return!1;if(n&&!this.tokenBelongsToInstance(n))return!0;if(!t&&!r)return!1;let{data:o}=Tn(n),i=o?.payload.iat||0,{data:a}=Tn(r),u=a?.payload.iat||0;if(t!=="0"&&e!=="0"&&i>u||t==="0"&&e!=="0")return!1;if(this.instanceType!=="production"){let l=this.sessionExpired(a);if(t!=="0"&&e==="0"&&l)return!1}return!(!t&&r)}isCrossOriginReferrer(){if(!this.referrer||!this.clerkUrl.origin)return!1;try{return new URL(this.referrer).origin!==this.clerkUrl.origin}catch{return!1}}isKnownClerkReferrer(){if(!this.referrer)return!1;try{let t=new URL(this.referrer),e=t.hostname;if(this.frontendApi){let n=this.frontendApi.startsWith("http")?new URL(this.frontendApi).hostname:this.frontendApi;if(e===n)return!0}if(Lv(e)||qv(e))return!0;let r=t_(this.frontendApi);if(r){let n=new URL(r).origin;if(t.origin===n)return!0}return!!e.startsWith("accounts.")}catch{return!1}}initPublishableKeyValues(t){k5(t.publishableKey),this.publishableKey=t.publishableKey;let e=ri(this.publishableKey,{fatal:!0,domain:t.domain,isSatellite:t.isSatellite});this.originalFrontendApi=e.frontendApi;let r=ri(this.publishableKey,{fatal:!0,proxyUrl:t.proxyUrl,domain:t.domain,isSatellite:t.isSatellite});this.instanceType=r.instanceType,this.frontendApi=r.frontendApi}initHeaderValues(){this.tokenInHeader=this.parseAuthorizationHeader(this.getHeader(ke.Headers.Authorization)),this.origin=this.getHeader(ke.Headers.Origin),this.host=this.getHeader(ke.Headers.Host),this.forwardedHost=this.getHeader(ke.Headers.ForwardedHost),this.forwardedProto=this.getHeader(ke.Headers.CloudFrontForwardedProto)||this.getHeader(ke.Headers.ForwardedProto),this.referrer=this.getHeader(ke.Headers.Referrer),this.userAgent=this.getHeader(ke.Headers.UserAgent),this.secFetchDest=this.getHeader(ke.Headers.SecFetchDest),this.accept=this.getHeader(ke.Headers.Accept)}initCookieValues(){this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(ke.Cookies.Session),this.refreshTokenInCookie=this.getSuffixedCookie(ke.Cookies.Refresh),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(ke.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(ke.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(ke.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(ke.QueryParameters.Handshake)||this.getCookie(ke.Cookies.Handshake),this.handshakeRedirectLoopCounter=Number(this.getCookie(ke.Cookies.RedirectCount))||0,this.handshakeNonce=this.getQueryParam(ke.QueryParameters.HandshakeNonce)||this.getCookie(ke.Cookies.HandshakeNonce)}getQueryParam(t){return this.clerkRequest.clerkUrl.searchParams.get(t)}getHeader(t){return this.clerkRequest.headers.get(t)||void 0}getCookie(t){return this.clerkRequest.cookies.get(t)||void 0}getSuffixedCookie(t){return this.getCookie(xp(t,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(t){return this.usesSuffixedCookies()?this.getSuffixedCookie(t):this.getCookie(t)}parseAuthorizationHeader(t){if(!t)return;let[e,r]=t.split(" ",2);if(!r)return e;if(e==="Bearer")return r}tokenHasIssuer(t){let{data:e,errors:r}=Tn(t);return r?!1:!!e.payload.iss}tokenBelongsToInstance(t){if(!t)return!1;let{data:e,errors:r}=Tn(t);if(r)return!1;let n=e.payload.iss.replace(/https?:\/\//gi,"");return this.originalFrontendApi===n}sessionExpired(t){return!!t&&t?.payload.exp<=Date.now()/1e3>>0}},A5=s(async(t,e)=>{let r=e.publishableKey?await wp(e.publishableKey,Hn.crypto.subtle):"";return new P5(r,t,e)},"createAuthenticateContext"),p_="/",C5=new RegExp("(?<!:)"+p_+"{1,}","g");function re(...t){return t.filter(e=>e).join(p_).replace(C5,p_)}s(re,"joinPaths");var gt=class{static{s(this,"AbstractAPI")}constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},a1="/actor_tokens",O5=class extends gt{static{s(this,"ActorTokenAPI")}async create(t){return this.request({method:"POST",path:a1,bodyParams:t})}async revoke(t){return this.requireId(t),this.request({method:"POST",path:re(a1,t,"revoke")})}},c1="/accountless_applications",$5=class extends gt{static{s(this,"AccountlessApplicationAPI")}async createAccountlessApplication(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:c1,headerParams:e})}async completeAccountlessApplicationOnboarding(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:re(c1,"complete"),headerParams:e})}},i_="/allowlist_identifiers",R5=class extends gt{static{s(this,"AllowlistIdentifierAPI")}async getAllowlistIdentifierList(t={}){return this.request({method:"GET",path:i_,queryParams:{...t,paginated:!0}})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:i_,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:re(i_,t)})}},Mc="/api_keys",N5=class extends gt{static{s(this,"APIKeysAPI")}async list(t){return this.request({method:"GET",path:Mc,queryParams:t})}async create(t){return this.request({method:"POST",path:Mc,bodyParams:t})}async revoke(t){let{apiKeyId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:re(Mc,e,"revoke"),bodyParams:r})}async getSecret(t){return this.requireId(t),this.request({method:"GET",path:re(Mc,t,"secret")})}async verifySecret(t){return this.request({method:"POST",path:re(Mc,"verify"),bodyParams:{secret:t}})}},D5="/beta_features",j5=class extends gt{static{s(this,"BetaFeaturesAPI")}async changeDomain(t){return this.request({method:"POST",path:re(D5,"change_domain"),bodyParams:t})}},s_="/blocklist_identifiers",M5=class extends gt{static{s(this,"BlocklistIdentifierAPI")}async getBlocklistIdentifierList(t={}){return this.request({method:"GET",path:s_,queryParams:t})}async createBlocklistIdentifier(t){return this.request({method:"POST",path:s_,bodyParams:t})}async deleteBlocklistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:re(s_,t)})}},Cp="/clients",U5=class extends gt{static{s(this,"ClientAPI")}async getClientList(t={}){return this.request({method:"GET",path:Cp,queryParams:{...t,paginated:!0}})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:re(Cp,t)})}verifyClient(t){return this.request({method:"POST",path:re(Cp,"verify"),bodyParams:{token:t}})}async getHandshakePayload(t){return this.request({method:"GET",path:re(Cp,"handshake_payload"),queryParams:t})}},Op="/domains",z5=class extends gt{static{s(this,"DomainAPI")}async list(){return this.request({method:"GET",path:Op})}async add(t){return this.request({method:"POST",path:Op,bodyParams:t})}async update(t){let{domainId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:re(Op,e),bodyParams:r})}async delete(t){return this.deleteDomain(t)}async deleteDomain(t){return this.requireId(t),this.request({method:"DELETE",path:re(Op,t)})}},$p="/email_addresses",L5=class extends gt{static{s(this,"EmailAddressAPI")}async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:re($p,t)})}async createEmailAddress(t){return this.request({method:"POST",path:$p,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:re($p,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:re($p,t)})}},q5="/oauth_applications/access_tokens",F5=class extends gt{static{s(this,"IdPOAuthAccessTokenApi")}async verifyAccessToken(t){return this.request({method:"POST",path:re(q5,"verify"),bodyParams:{access_token:t}})}},Rp="/instance",B5=class extends gt{static{s(this,"InstanceAPI")}async get(){return this.request({method:"GET",path:Rp})}async update(t){return this.request({method:"PATCH",path:Rp,bodyParams:t})}async updateRestrictions(t){return this.request({method:"PATCH",path:re(Rp,"restrictions"),bodyParams:t})}async updateOrganizationSettings(t){return this.request({method:"PATCH",path:re(Rp,"organization_settings"),bodyParams:t})}},Np="/invitations",V5=class extends gt{static{s(this,"InvitationAPI")}async getInvitationList(t={}){return this.request({method:"GET",path:Np,queryParams:{...t,paginated:!0}})}async createInvitation(t){return this.request({method:"POST",path:Np,bodyParams:t})}async createInvitationBulk(t){return this.request({method:"POST",path:re(Np,"bulk"),bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:re(Np,t,"revoke")})}},xo="/machines",H5=class extends gt{static{s(this,"MachineApi")}async get(t){return this.requireId(t),this.request({method:"GET",path:re(xo,t)})}async list(t={}){return this.request({method:"GET",path:xo,queryParams:t})}async create(t){return this.request({method:"POST",path:xo,bodyParams:t})}async update(t){let{machineId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:re(xo,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:re(xo,t)})}async getSecretKey(t){return this.requireId(t),this.request({method:"GET",path:re(xo,t,"secret_key")})}async rotateSecretKey(t){let{machineId:e,previousTokenTtl:r}=t;return this.requireId(e),this.request({method:"POST",path:re(xo,e,"secret_key","rotate"),bodyParams:{previousTokenTtl:r}})}async createScope(t,e){return this.requireId(t),this.request({method:"POST",path:re(xo,t,"scopes"),bodyParams:{toMachineId:e}})}async deleteScope(t,e){return this.requireId(t),this.request({method:"DELETE",path:re(xo,t,"scopes",e)})}},a_="/m2m_tokens",Fc,Up,G5=class extends gt{static{s(this,"M2MTokenApi")}constructor(){super(...arguments),QC(this,Fc)}async createToken(t){let{claims:e=null,machineSecretKey:r,secondsUntilExpiration:n=null}=t||{},o=kp(this,Fc,Up).call(this,{method:"POST",path:a_,bodyParams:{secondsUntilExpiration:n,claims:e}},r);return this.request(o)}async revokeToken(t){let{m2mTokenId:e,revocationReason:r=null,machineSecretKey:n}=t;this.requireId(e);let o=kp(this,Fc,Up).call(this,{method:"POST",path:re(a_,e,"revoke"),bodyParams:{revocationReason:r}},n);return this.request(o)}async verifyToken(t){let{token:e,machineSecretKey:r}=t,n=kp(this,Fc,Up).call(this,{method:"POST",path:re(a_,"verify"),bodyParams:{token:e}},r);return this.request(n)}};Fc=new WeakSet;Up=s(function(t,e){return e?{...t,headerParams:{...t.headerParams,Authorization:`Bearer ${e}`}}:t},"createRequestOptions_fn");var Z5="/jwks",J5=class extends gt{static{s(this,"JwksAPI")}async getJwks(){return this.request({method:"GET",path:Z5})}},Uc="/jwt_templates",K5=class extends gt{static{s(this,"JwtTemplatesApi")}async list(t={}){return this.request({method:"GET",path:Uc,queryParams:{...t,paginated:!0}})}async get(t){return this.requireId(t),this.request({method:"GET",path:re(Uc,t)})}async create(t){return this.request({method:"POST",path:Uc,bodyParams:t})}async update(t){let{templateId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:re(Uc,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:re(Uc,t)})}},Jt="/organizations",W5=class extends gt{static{s(this,"OrganizationAPI")}async getOrganizationList(t){return this.request({method:"GET",path:Jt,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:Jt,bodyParams:t})}async getOrganization(t){let{includeMembersCount:e}=t,r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:re(Jt,r),queryParams:{includeMembersCount:e}})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:re(Jt,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);let r=new Hn.FormData;return r.append("file",e?.file),e?.uploaderUserId&&r.append("uploader_user_id",e?.uploaderUserId),this.request({method:"PUT",path:re(Jt,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:re(Jt,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:re(Jt,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:re(Jt,t)})}async getOrganizationMembershipList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:re(Jt,e,"memberships"),queryParams:r})}async getInstanceOrganizationMembershipList(t){return this.request({method:"GET",path:"/organization_memberships",queryParams:t})}async createOrganizationMembership(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:re(Jt,e,"memberships"),bodyParams:r})}async updateOrganizationMembership(t){let{organizationId:e,userId:r,...n}=t;return this.requireId(e),this.request({method:"PATCH",path:re(Jt,e,"memberships",r),bodyParams:n})}async updateOrganizationMembershipMetadata(t){let{organizationId:e,userId:r,...n}=t;return this.request({method:"PATCH",path:re(Jt,e,"memberships",r,"metadata"),bodyParams:n})}async deleteOrganizationMembership(t){let{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:re(Jt,e,"memberships",r)})}async getOrganizationInvitationList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:re(Jt,e,"invitations"),queryParams:r})}async createOrganizationInvitation(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:re(Jt,e,"invitations"),bodyParams:r})}async createOrganizationInvitationBulk(t,e){return this.requireId(t),this.request({method:"POST",path:re(Jt,t,"invitations","bulk"),bodyParams:e})}async getOrganizationInvitation(t){let{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:re(Jt,e,"invitations",r)})}async revokeOrganizationInvitation(t){let{organizationId:e,invitationId:r,...n}=t;return this.requireId(e),this.request({method:"POST",path:re(Jt,e,"invitations",r,"revoke"),bodyParams:n})}async getOrganizationDomainList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:re(Jt,e,"domains"),queryParams:r})}async createOrganizationDomain(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:re(Jt,e,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(t){let{organizationId:e,domainId:r,...n}=t;return this.requireId(e),this.requireId(r),this.request({method:"PATCH",path:re(Jt,e,"domains",r),bodyParams:n})}async deleteOrganizationDomain(t){let{organizationId:e,domainId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"DELETE",path:re(Jt,e,"domains",r)})}},Bs="/oauth_applications",Q5=class extends gt{static{s(this,"OAuthApplicationsApi")}async list(t={}){return this.request({method:"GET",path:Bs,queryParams:t})}async get(t){return this.requireId(t),this.request({method:"GET",path:re(Bs,t)})}async create(t){return this.request({method:"POST",path:Bs,bodyParams:t})}async update(t){let{oauthApplicationId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:re(Bs,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:re(Bs,t)})}async rotateSecret(t){return this.requireId(t),this.request({method:"POST",path:re(Bs,t,"rotate_secret")})}},Dp="/phone_numbers",X5=class extends gt{static{s(this,"PhoneNumberAPI")}async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:re(Dp,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Dp,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:re(Dp,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:re(Dp,t)})}},Y5="/proxy_checks",e3=class extends gt{static{s(this,"ProxyCheckAPI")}async verify(t){return this.request({method:"POST",path:Y5,bodyParams:t})}},jp="/redirect_urls",t3=class extends gt{static{s(this,"RedirectUrlAPI")}async getRedirectUrlList(){return this.request({method:"GET",path:jp,queryParams:{paginated:!0}})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:re(jp,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:jp,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:re(jp,t)})}},zc="/saml_connections",r3=class extends gt{static{s(this,"SamlConnectionAPI")}async getSamlConnectionList(t={}){return this.request({method:"GET",path:zc,queryParams:t})}async createSamlConnection(t){return this.request({method:"POST",path:zc,bodyParams:t,options:{deepSnakecaseBodyParamKeys:!0}})}async getSamlConnection(t){return this.requireId(t),this.request({method:"GET",path:re(zc,t)})}async updateSamlConnection(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:re(zc,t),bodyParams:e,options:{deepSnakecaseBodyParamKeys:!0}})}async deleteSamlConnection(t){return this.requireId(t),this.request({method:"DELETE",path:re(zc,t)})}},oi="/sessions",n3=class extends gt{static{s(this,"SessionAPI")}async getSessionList(t={}){return this.request({method:"GET",path:oi,queryParams:{...t,paginated:!0}})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:re(oi,t)})}async createSession(t){return this.request({method:"POST",path:oi,bodyParams:t})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:re(oi,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:re(oi,t,"verify"),bodyParams:{token:e}})}async getToken(t,e,r){this.requireId(t);let o={method:"POST",path:e?re(oi,t,"tokens",e):re(oi,t,"tokens")};return r!==void 0&&(o.bodyParams={expires_in_seconds:r}),this.request(o)}async refreshSession(t,e){this.requireId(t);let{suffixed_cookies:r,...n}=e;return this.request({method:"POST",path:re(oi,t,"refresh"),bodyParams:n,queryParams:{suffixed_cookies:r}})}},u1="/sign_in_tokens",o3=class extends gt{static{s(this,"SignInTokenAPI")}async createSignInToken(t){return this.request({method:"POST",path:u1,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:re(u1,t,"revoke")})}},l1="/sign_ups",i3=class extends gt{static{s(this,"SignUpAPI")}async get(t){return this.requireId(t),this.request({method:"GET",path:re(l1,t)})}async update(t){let{signUpAttemptId:e,...r}=t;return this.request({method:"PATCH",path:re(l1,e),bodyParams:r})}},s3="/testing_tokens",a3=class extends gt{static{s(this,"TestingTokenAPI")}async createTestingToken(){return this.request({method:"POST",path:s3})}},Lt="/users",c3=class extends gt{static{s(this,"UserAPI")}async getUserList(t={}){let{limit:e,offset:r,orderBy:n,...o}=t,[i,a]=await Promise.all([this.request({method:"GET",path:Lt,queryParams:t}),this.getCount(o)]);return{data:i,totalCount:a}}async getUser(t){return this.requireId(t),this.request({method:"GET",path:re(Lt,t)})}async createUser(t){return this.request({method:"POST",path:Lt,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:re(Lt,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);let r=new Hn.FormData;return r.append("file",e?.file),this.request({method:"POST",path:re(Lt,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:re(Lt,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lt,t)})}async getCount(t={}){return this.request({method:"GET",path:re(Lt,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){this.requireId(t);let r=e.startsWith("oauth_"),n=r?e:`oauth_${e}`;return r&&_p("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:re(Lt,t,"oauth_access_tokens",n),queryParams:{paginated:!0}})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lt,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:re(Lt,e,"organization_memberships"),queryParams:{limit:r,offset:n}})}async getOrganizationInvitationList(t){let{userId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:re(Lt,e,"organization_invitations"),queryParams:r})}async verifyPassword(t){let{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:re(Lt,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){let{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:re(Lt,e,"verify_totp"),bodyParams:{code:r}})}async banUser(t){return this.requireId(t),this.request({method:"POST",path:re(Lt,t,"ban")})}async unbanUser(t){return this.requireId(t),this.request({method:"POST",path:re(Lt,t,"unban")})}async lockUser(t){return this.requireId(t),this.request({method:"POST",path:re(Lt,t,"lock")})}async unlockUser(t){return this.requireId(t),this.request({method:"POST",path:re(Lt,t,"unlock")})}async deleteUserProfileImage(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lt,t,"profile_image")})}async deleteUserPasskey(t){return this.requireId(t.userId),this.requireId(t.passkeyIdentificationId),this.request({method:"DELETE",path:re(Lt,t.userId,"passkeys",t.passkeyIdentificationId)})}async deleteUserWeb3Wallet(t){return this.requireId(t.userId),this.requireId(t.web3WalletIdentificationId),this.request({method:"DELETE",path:re(Lt,t.userId,"web3_wallets",t.web3WalletIdentificationId)})}async deleteUserExternalAccount(t){return this.requireId(t.userId),this.requireId(t.externalAccountId),this.request({method:"DELETE",path:re(Lt,t.userId,"external_accounts",t.externalAccountId)})}async deleteUserBackupCodes(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lt,t,"backup_code")})}async deleteUserTOTP(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lt,t,"totp")})}},Lc="/waitlist_entries",u3=class extends gt{static{s(this,"WaitlistEntryAPI")}async list(t={}){return this.request({method:"GET",path:Lc,queryParams:t})}async create(t){return this.request({method:"POST",path:Lc,bodyParams:t})}async invite(t,e={}){return this.requireId(t),this.request({method:"POST",path:re(Lc,t,"invite"),bodyParams:e})}async reject(t){return this.requireId(t),this.request({method:"POST",path:re(Lc,t,"reject")})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:re(Lc,t)})}},c_="/webhooks",l3=class extends gt{static{s(this,"WebhookAPI")}async createSvixApp(){return this.request({method:"POST",path:re(c_,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:re(c_,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:re(c_,"svix")})}},d1="/billing",d3="/organizations",p3="/users",m3=class extends gt{static{s(this,"BillingAPI")}async getPlanList(t){return this.request({method:"GET",path:re(d1,"plans"),queryParams:t})}async cancelSubscriptionItem(t,e){return this.requireId(t),this.request({method:"DELETE",path:re(d1,"subscription_items",t),queryParams:e})}async extendSubscriptionItemFreeTrial(t,e){return this.requireId(t),this.request({method:"POST",path:re("/billing","subscription_items",t,"extend_free_trial"),bodyParams:e})}async getOrganizationBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:re(d3,t,"billing","subscription")})}async getUserBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:re(p3,t,"billing","subscription")})}},O1=s(t=>typeof t=="object"&&t!==null,"isObject"),p1=s(t=>O1(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date)&&!(globalThis.Blob&&t instanceof globalThis.Blob),"isObjectCustom"),f3=Symbol("mapObjectSkip"),m_=s((t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);let{target:o}=r;delete r.target;let i=s(a=>a.map(u=>p1(u)?m_(u,e,r,n):u),"mapArray");if(Array.isArray(t))return i(t);for(let[a,u]of Object.entries(t)){let l=e(a,u,t);if(l===f3)continue;let[d,p,{shouldRecurse:f=!0}={}]=l;d!=="__proto__"&&(r.deep&&f&&p1(p)&&(p=Array.isArray(p)?i(p):m_(p,e,r,n)),o[d]=p)}return o},"_mapObject");function m1(t,e,r){if(!O1(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);if(Array.isArray(t))throw new TypeError("Expected an object, got an array");return m_(t,e,r)}s(m1,"mapObject");var h3=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),g3=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),y3=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),v3=/[^\p{L}\d]+/giu,f1="$1\0$2",h1="";function $1(t){let e=t.trim();e=e.replace(h3,f1).replace(g3,f1),e=e.replace(v3,"\0");let r=0,n=e.length;for(;e.charAt(r)==="\0";)r++;if(r===n)return[];for(;e.charAt(n-1)==="\0";)n--;return e.slice(r,n).split(/\0/g)}s($1,"split");function _3(t){let e=$1(t);for(let r=0;r<e.length;r++){let n=e[r],o=y3.exec(n);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(r,1,n.slice(0,i),n.slice(i))}}return e}s(_3,"splitSeparateNumbers");function b3(t,e){let[r,n,o]=x3(t,e);return r+n.map(w3(e?.locale)).join(e?.delimiter??" ")+o}s(b3,"noCase");function g1(t,e){return b3(t,{delimiter:"_",...e})}s(g1,"snakeCase");function w3(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}s(w3,"lowerFactory");function x3(t,e={}){let r=e.split??(e.separateNumbers?_3:$1),n=e.prefixCharacters??h1,o=e.suffixCharacters??h1,i=0,a=t.length;for(;i<t.length;){let u=t.charAt(i);if(!n.includes(u))break;i++}for(;a>i;){let u=a-1,l=t.charAt(u);if(!o.includes(l))break;a=u}return[t.slice(0,i),r(t.slice(i,a)),t.slice(a)]}s(x3,"splitPrefixSuffix");var y1={}.constructor;function S3(t,e){if(Array.isArray(t)){if(t.some(o=>o.constructor!==y1))throw new Error("obj must be array of plain objects");e={deep:!0,exclude:[],parsingOptions:{},...e};let n=e.snakeCase||(o=>g1(o,e.parsingOptions));return t.map(o=>m1(o,(i,a)=>[v1(e.exclude,i)?i:n(i),a,_1(i,a,e)],e))}else if(t.constructor!==y1)throw new Error("obj must be an plain object");e={deep:!0,exclude:[],parsingOptions:{},...e};let r=e.snakeCase||(n=>g1(n,e.parsingOptions));return m1(t,(n,o)=>[v1(e.exclude,n)?n:r(n),o,_1(n,o,e)],e)}s(S3,"snakecaseKeys");function v1(t,e){return t.some(r=>typeof r=="string"?r===e:r.test(e))}s(v1,"matches");function _1(t,e,r){return r.shouldRecurse?{shouldRecurse:r.shouldRecurse(t,e)}:void 0}s(_1,"mapperOptions");var b1=S3,T3=class R1{static{s(this,"_AccountlessApplication")}constructor(e,r,n,o){this.publishableKey=e,this.secretKey=r,this.claimUrl=n,this.apiKeysUrl=o}static fromJSON(e){return new R1(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},E3=class N1{static{s(this,"_ActorToken")}constructor(e,r,n,o,i,a,u,l){this.id=e,this.status=r,this.userId=n,this.actor=o,this.token=i,this.url=a,this.createdAt=u,this.updatedAt=l}static fromJSON(e){return new N1(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},I3=class D1{static{s(this,"_AllowlistIdentifier")}constructor(e,r,n,o,i,a,u){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a,this.invitationId=u}static fromJSON(e){return new D1(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},k3=class j1{static{s(this,"_APIKey")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_){this.id=e,this.type=r,this.name=n,this.subject=o,this.scopes=i,this.claims=a,this.revoked=u,this.revocationReason=l,this.expired=d,this.expiration=p,this.createdBy=f,this.description=h,this.lastUsedAt=y,this.createdAt=g,this.updatedAt=m,this.secret=_}static fromJSON(e){return new j1(e.id,e.type,e.name,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_by,e.description,e.last_used_at,e.created_at,e.updated_at,e.secret)}},P3=class M1{static{s(this,"_BlocklistIdentifier")}constructor(e,r,n,o,i,a){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a}static fromJSON(e){return new M1(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},A3=class U1{static{s(this,"_SessionActivity")}constructor(e,r,n,o,i,a,u,l){this.id=e,this.isMobile=r,this.ipAddress=n,this.city=o,this.country=i,this.browserVersion=a,this.browserName=u,this.deviceType=l}static fromJSON(e){return new U1(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},z1=class L1{static{s(this,"_Session")}constructor(e,r,n,o,i,a,u,l,d,p,f,h=null){this.id=e,this.clientId=r,this.userId=n,this.status=o,this.lastActiveAt=i,this.expireAt=a,this.abandonAt=u,this.createdAt=l,this.updatedAt=d,this.lastActiveOrganizationId=p,this.latestActivity=f,this.actor=h}static fromJSON(e){return new L1(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&A3.fromJSON(e.latest_activity),e.actor)}},C3=class q1{static{s(this,"_Client")}constructor(e,r,n,o,i,a,u,l,d){this.id=e,this.sessionIds=r,this.sessions=n,this.signInId=o,this.signUpId=i,this.lastActiveSessionId=a,this.lastAuthenticationStrategy=u,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new q1(e.id,e.session_ids,e.sessions.map(r=>z1.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.last_authentication_strategy,e.created_at,e.updated_at)}},O3=class F1{static{s(this,"_CnameTarget")}constructor(e,r,n){this.host=e,this.value=r,this.required=n}static fromJSON(e){return new F1(e.host,e.value,e.required)}},$3=class B1{static{s(this,"_Cookies")}constructor(e){this.cookies=e}static fromJSON(e){return new B1(e.cookies)}},R3=class V1{static{s(this,"_DeletedObject")}constructor(e,r,n,o){this.object=e,this.id=r,this.slug=n,this.deleted=o}static fromJSON(e){return new V1(e.object,e.id||null,e.slug||null,e.deleted)}},N3=class H1{static{s(this,"_Domain")}constructor(e,r,n,o,i,a,u,l){this.id=e,this.name=r,this.isSatellite=n,this.frontendApiUrl=o,this.developmentOrigin=i,this.cnameTargets=a,this.accountsPortalUrl=u,this.proxyUrl=l}static fromJSON(e){return new H1(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(r=>O3.fromJSON(r)),e.accounts_portal_url,e.proxy_url)}},D3=class G1{static{s(this,"_Email")}constructor(e,r,n,o,i,a,u,l,d,p,f){this.id=e,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=o,this.subject=i,this.body=a,this.bodyPlain=u,this.status=l,this.slug=d,this.data=p,this.deliveredByClerk=f}static fromJSON(e){return new G1(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},Z1=class J1{static{s(this,"_IdentificationLink")}constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new J1(e.id,e.type)}},Vc=class K1{static{s(this,"_Verification")}constructor(e,r,n=null,o=null,i=null,a=null,u=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=o,this.expireAt=i,this.nonce=a,this.message=u}static fromJSON(e){return new K1(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},W1=class Q1{static{s(this,"_EmailAddress")}constructor(e,r,n,o){this.id=e,this.emailAddress=r,this.verification=n,this.linkedTo=o}static fromJSON(e){return new Q1(e.id,e.email_address,e.verification&&Vc.fromJSON(e.verification),e.linked_to.map(r=>Z1.fromJSON(r)))}},j3=class X1{static{s(this,"_ExternalAccount")}constructor(e,r,n,o,i,a,u,l,d,p,f,h={},y,g){this.id=e,this.provider=r,this.identificationId=n,this.externalId=o,this.approvedScopes=i,this.emailAddress=a,this.firstName=u,this.lastName=l,this.imageUrl=d,this.username=p,this.phoneNumber=f,this.publicMetadata=h,this.label=y,this.verification=g}static fromJSON(e){return new X1(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&Vc.fromJSON(e.verification))}},M3=class Y1{static{s(this,"_IdPOAuthAccessToken")}constructor(e,r,n,o,i,a,u,l,d,p,f){this.id=e,this.clientId=r,this.type=n,this.subject=o,this.scopes=i,this.revoked=a,this.revocationReason=u,this.expired=l,this.expiration=d,this.createdAt=p,this.updatedAt=f}static fromJSON(e){return new Y1(e.id,e.client_id,e.type,e.subject,e.scopes,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at)}},U3=class eO{static{s(this,"_Instance")}constructor(e,r,n){this.id=e,this.environmentType=r,this.allowedOrigins=n}static fromJSON(e){return new eO(e.id,e.environment_type,e.allowed_origins)}},z3=class tO{static{s(this,"_InstanceRestrictions")}constructor(e,r,n,o,i){this.allowlist=e,this.blocklist=r,this.blockEmailSubaddresses=n,this.blockDisposableEmailDomains=o,this.ignoreDotsForGmailAddresses=i}static fromJSON(e){return new tO(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},L3=class rO{static{s(this,"_InstanceSettings")}constructor(e,r,n,o,i){this.id=e,this.restrictedToAllowlist=r,this.fromEmailAddress=n,this.progressiveSignUp=o,this.enhancedEmailDeliverability=i}static fromJSON(e){return new rO(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},nO=class oO{static{s(this,"_Invitation")}constructor(e,r,n,o,i,a,u,l){this.id=e,this.emailAddress=r,this.publicMetadata=n,this.createdAt=o,this.updatedAt=i,this.status=a,this.url=u,this.revoked=l,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new oO(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return r._raw=e,r}},Je={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",ApiKey:"api_key",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",ExternalAccount:"external_account",FacebookAccount:"facebook_account",GoogleAccount:"google_account",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",Machine:"machine",MachineScope:"machine_scope",MachineSecretKey:"machine_secret_key",M2MToken:"machine_to_machine_token",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",IdpOAuthAccessToken:"clerk_idp_oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationDomain:"organization_domain",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",SamlAccount:"saml_account",SamlConnection:"saml_connection",Session:"session",SignInAttempt:"sign_in_attempt",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Web3Wallet:"web3_wallet",Token:"token",TotalCount:"total_count",TestingToken:"testing_token",Role:"role",Permission:"permission",BillingPayer:"commerce_payer",BillingPaymentAttempt:"commerce_payment_attempt",BillingSubscription:"commerce_subscription",BillingSubscriptionItem:"commerce_subscription_item",BillingPlan:"commerce_plan",Feature:"feature"},q3=class f_{static{s(this,"_Machine")}constructor(e,r,n,o,i,a,u,l){this.id=e,this.name=r,this.instanceId=n,this.createdAt=o,this.updatedAt=i,this.scopedMachines=a,this.defaultTokenTtl=u,this.secretKey=l}static fromJSON(e){return new f_(e.id,e.name,e.instance_id,e.created_at,e.updated_at,e.scoped_machines.map(r=>new f_(r.id,r.name,r.instance_id,r.created_at,r.updated_at,[],r.default_token_ttl)),e.default_token_ttl,e.secret_key)}},F3=class iO{static{s(this,"_MachineScope")}constructor(e,r,n,o){this.fromMachineId=e,this.toMachineId=r,this.createdAt=n,this.deleted=o}static fromJSON(e){return new iO(e.from_machine_id,e.to_machine_id,e.created_at,e.deleted)}},B3=class sO{static{s(this,"_MachineSecretKey")}constructor(e){this.secret=e}static fromJSON(e){return new sO(e.secret)}},V3=class aO{static{s(this,"_M2MToken")}constructor(e,r,n,o,i,a,u,l,d,p,f){this.id=e,this.subject=r,this.scopes=n,this.claims=o,this.revoked=i,this.revocationReason=a,this.expired=u,this.expiration=l,this.createdAt=d,this.updatedAt=p,this.token=f}static fromJSON(e){return new aO(e.id,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at,e.token)}},H3=class cO{static{s(this,"_JwtTemplate")}constructor(e,r,n,o,i,a,u,l,d){this.id=e,this.name=r,this.claims=n,this.lifetime=o,this.allowedClockSkew=i,this.customSigningKey=a,this.signingAlgorithm=u,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new cO(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},G3=class uO{static{s(this,"_OauthAccessToken")}constructor(e,r,n,o={},i,a,u,l){this.externalAccountId=e,this.provider=r,this.token=n,this.publicMetadata=o,this.label=i,this.scopes=a,this.tokenSecret=u,this.expiresAt=l}static fromJSON(e){return new uO(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},Z3=class lO{static{s(this,"_OAuthApplication")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b,x,k){this.id=e,this.instanceId=r,this.name=n,this.clientId=o,this.clientUri=i,this.clientImageUrl=a,this.dynamicallyRegistered=u,this.consentScreenEnabled=l,this.pkceRequired=d,this.isPublic=p,this.scopes=f,this.redirectUris=h,this.authorizeUrl=y,this.tokenFetchUrl=g,this.userInfoUrl=m,this.discoveryUrl=_,this.tokenIntrospectionUrl=w,this.createdAt=b,this.updatedAt=x,this.clientSecret=k}static fromJSON(e){return new lO(e.id,e.instance_id,e.name,e.client_id,e.client_uri,e.client_image_url,e.dynamically_registered,e.consent_screen_enabled,e.pkce_required,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},dO=class pO{static{s(this,"_Organization")}constructor(e,r,n,o,i,a,u,l={},d={},p,f,h,y){this.id=e,this.name=r,this.slug=n,this.imageUrl=o,this.hasImage=i,this.createdAt=a,this.updatedAt=u,this.publicMetadata=l,this.privateMetadata=d,this.maxAllowedMemberships=p,this.adminDeleteEnabled=f,this.membersCount=h,this.createdBy=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new pO(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return r._raw=e,r}},J3=class mO{static{s(this,"_OrganizationInvitation")}constructor(e,r,n,o,i,a,u,l,d,p,f={},h={},y){this.id=e,this.emailAddress=r,this.role=n,this.roleName=o,this.organizationId=i,this.createdAt=a,this.updatedAt=u,this.expiresAt=l,this.url=d,this.status=p,this.publicMetadata=f,this.privateMetadata=h,this.publicOrganizationData=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new mO(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return r._raw=e,r}},K3=class fO{static{s(this,"_OrganizationMembership")}constructor(e,r,n,o={},i={},a,u,l,d){this.id=e,this.role=r,this.permissions=n,this.publicMetadata=o,this.privateMetadata=i,this.createdAt=a,this.updatedAt=u,this.organization=l,this.publicUserData=d,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new fO(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,dO.fromJSON(e.organization),W3.fromJSON(e.public_user_data));return r._raw=e,r}},W3=class hO{static{s(this,"_OrganizationMembershipPublicUserData")}constructor(e,r,n,o,i,a){this.identifier=e,this.firstName=r,this.lastName=n,this.imageUrl=o,this.hasImage=i,this.userId=a}static fromJSON(e){return new hO(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},Q3=class gO{static{s(this,"_OrganizationSettings")}constructor(e,r,n,o,i,a,u,l,d,p){this.enabled=e,this.maxAllowedMemberships=r,this.maxAllowedRoles=n,this.maxAllowedPermissions=o,this.creatorRole=i,this.adminDeleteEnabled=a,this.domainsEnabled=u,this.slugDisabled=l,this.domainsEnrollmentModes=d,this.domainsDefaultRole=p}static fromJSON(e){return new gO(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.slug_disabled,e.domains_enrollment_modes,e.domains_default_role)}},yO=class vO{static{s(this,"_PhoneNumber")}constructor(e,r,n,o,i,a){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=o,this.verification=i,this.linkedTo=a}static fromJSON(e){return new vO(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&Vc.fromJSON(e.verification),e.linked_to.map(r=>Z1.fromJSON(r)))}},X3=class _O{static{s(this,"_ProxyCheck")}constructor(e,r,n,o,i,a,u){this.id=e,this.domainId=r,this.lastRunAt=n,this.proxyUrl=o,this.successful=i,this.createdAt=a,this.updatedAt=u}static fromJSON(e){return new _O(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},Y3=class bO{static{s(this,"_RedirectUrl")}constructor(e,r,n,o){this.id=e,this.url=r,this.createdAt=n,this.updatedAt=o}static fromJSON(e){return new bO(e.id,e.url,e.created_at,e.updated_at)}},eV=class wO{static{s(this,"_SamlConnection")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b,x,k,R){this.id=e,this.name=r,this.domain=n,this.organizationId=o,this.idpEntityId=i,this.idpSsoUrl=a,this.idpCertificate=u,this.idpMetadataUrl=l,this.idpMetadata=d,this.acsUrl=p,this.spEntityId=f,this.spMetadataUrl=h,this.active=y,this.provider=g,this.userCount=m,this.syncUserAttributes=_,this.allowSubdomains=w,this.allowIdpInitiated=b,this.createdAt=x,this.updatedAt=k,this.attributeMapping=R}static fromJSON(e){return new wO(e.id,e.name,e.domain,e.organization_id,e.idp_entity_id,e.idp_sso_url,e.idp_certificate,e.idp_metadata_url,e.idp_metadata,e.acs_url,e.sp_entity_id,e.sp_metadata_url,e.active,e.provider,e.user_count,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at,e.attribute_mapping&&rV.fromJSON(e.attribute_mapping))}},tV=class xO{static{s(this,"_SamlAccountConnection")}constructor(e,r,n,o,i,a,u,l,d,p){this.id=e,this.name=r,this.domain=n,this.active=o,this.provider=i,this.syncUserAttributes=a,this.allowSubdomains=u,this.allowIdpInitiated=l,this.createdAt=d,this.updatedAt=p}static fromJSON(e){return new xO(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},rV=class SO{static{s(this,"_AttributeMapping")}constructor(e,r,n,o){this.userId=e,this.emailAddress=r,this.firstName=n,this.lastName=o}static fromJSON(e){return new SO(e.user_id,e.email_address,e.first_name,e.last_name)}},nV=class TO{static{s(this,"_SamlAccount")}constructor(e,r,n,o,i,a,u,l,d,p,f){this.id=e,this.provider=r,this.providerUserId=n,this.active=o,this.emailAddress=i,this.firstName=a,this.lastName=u,this.verification=l,this.samlConnection=d,this.lastAuthenticatedAt=p,this.enterpriseConnectionId=f}static fromJSON(e){return new TO(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&Vc.fromJSON(e.verification),e.saml_connection&&tV.fromJSON(e.saml_connection),e.last_authenticated_at??null,e.enterprise_connection_id)}},oV=class EO{static{s(this,"_SignInToken")}constructor(e,r,n,o,i,a,u){this.id=e,this.userId=r,this.token=n,this.status=o,this.url=i,this.createdAt=a,this.updatedAt=u}static fromJSON(e){return new EO(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},u_=class IO{static{s(this,"_SignUpAttemptVerification")}constructor(e,r){this.nextAction=e,this.supportedStrategies=r}static fromJSON(e){return new IO(e.next_action,e.supported_strategies)}},iV=class kO{static{s(this,"_SignUpAttemptVerifications")}constructor(e,r,n,o){this.emailAddress=e,this.phoneNumber=r,this.web3Wallet=n,this.externalAccount=o}static fromJSON(e){return new kO(e.email_address&&u_.fromJSON(e.email_address),e.phone_number&&u_.fromJSON(e.phone_number),e.web3_wallet&&u_.fromJSON(e.web3_wallet),e.external_account)}},sV=class PO{static{s(this,"_SignUpAttempt")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b,x,k,R,O){this.id=e,this.status=r,this.requiredFields=n,this.optionalFields=o,this.missingFields=i,this.unverifiedFields=a,this.verifications=u,this.username=l,this.emailAddress=d,this.phoneNumber=p,this.web3Wallet=f,this.passwordEnabled=h,this.firstName=y,this.lastName=g,this.customAction=m,this.externalId=_,this.createdSessionId=w,this.createdUserId=b,this.abandonAt=x,this.legalAcceptedAt=k,this.publicMetadata=R,this.unsafeMetadata=O}static fromJSON(e){return new PO(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?iV.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},aV=class AO{static{s(this,"_SMSMessage")}constructor(e,r,n,o,i,a,u){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=o,this.status=i,this.phoneNumberId=a,this.data=u}static fromJSON(e){return new AO(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},cV=class CO{static{s(this,"_Token")}constructor(e){this.jwt=e}static fromJSON(e){return new CO(e.jwt)}},uV=class OO{static{s(this,"_Web3Wallet")}constructor(e,r,n){this.id=e,this.web3Wallet=r,this.verification=n}static fromJSON(e){return new OO(e.id,e.web3_wallet,e.verification&&Vc.fromJSON(e.verification))}},lV=class $O{static{s(this,"_User")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b,x,k={},R={},O={},C=[],$=[],P=[],N=[],D=[],K,V,q=null,Q,ee,oe){this.id=e,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=o,this.twoFactorEnabled=i,this.banned=a,this.locked=u,this.createdAt=l,this.updatedAt=d,this.imageUrl=p,this.hasImage=f,this.primaryEmailAddressId=h,this.primaryPhoneNumberId=y,this.primaryWeb3WalletId=g,this.lastSignInAt=m,this.externalId=_,this.username=w,this.firstName=b,this.lastName=x,this.publicMetadata=k,this.privateMetadata=R,this.unsafeMetadata=O,this.emailAddresses=C,this.phoneNumbers=$,this.web3Wallets=P,this.externalAccounts=N,this.samlAccounts=D,this.lastActiveAt=K,this.createOrganizationEnabled=V,this.createOrganizationsLimit=q,this.deleteSelfEnabled=Q,this.legalAcceptedAt=ee,this.locale=oe,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new $O(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(n=>W1.fromJSON(n)),(e.phone_numbers||[]).map(n=>yO.fromJSON(n)),(e.web3_wallets||[]).map(n=>uV.fromJSON(n)),(e.external_accounts||[]).map(n=>j3.fromJSON(n)),(e.saml_accounts||[]).map(n=>nV.fromJSON(n)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at,e.locale);return r._raw=e,r}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},dV=class RO{static{s(this,"_WaitlistEntry")}constructor(e,r,n,o,i,a,u){this.id=e,this.emailAddress=r,this.status=n,this.invitation=o,this.createdAt=i,this.updatedAt=a,this.isLocked=u}static fromJSON(e){return new RO(e.id,e.email_address,e.status,e.invitation&&nO.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}},NO=class DO{static{s(this,"_Feature")}constructor(e,r,n,o,i){this.id=e,this.name=r,this.description=n,this.slug=o,this.avatarUrl=i}static fromJSON(e){return new DO(e.id,e.name,e.description??null,e.slug,e.avatar_url??null)}},jO=class MO{static{s(this,"_BillingPlan")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y){this.id=e,this.name=r,this.slug=n,this.description=o,this.isDefault=i,this.isRecurring=a,this.hasBaseFee=u,this.publiclyVisible=l,this.fee=d,this.annualFee=p,this.annualMonthlyFee=f,this.forPayerType=h,this.features=y}static fromJSON(e){let r=s(n=>n?{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}:null,"formatAmountJSON");return new MO(e.id,e.name,e.slug,e.description??null,e.is_default,e.is_recurring,e.has_base_fee,e.publicly_visible,r(e.fee),r(e.annual_fee),r(e.annual_monthly_fee),e.for_payer_type,(e.features??[]).map(n=>NO.fromJSON(n)))}},UO=class zO{static{s(this,"_BillingSubscriptionItem")}constructor(e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w){this.id=e,this.status=r,this.planPeriod=n,this.periodStart=o,this.nextPayment=i,this.amount=a,this.plan=u,this.planId=l,this.createdAt=d,this.updatedAt=p,this.periodEnd=f,this.canceledAt=h,this.pastDueAt=y,this.endedAt=g,this.payerId=m,this.isFreeTrial=_,this.lifetimePaid=w}static fromJSON(e){function r(n){return n&&{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}}return s(r,"formatAmountJSON"),new zO(e.id,e.status,e.plan_period,e.period_start,e.next_payment,r(e.amount)??void 0,e.plan?jO.fromJSON(e.plan):null,e.plan_id??null,e.created_at,e.updated_at,e.period_end,e.canceled_at,e.past_due_at,e.ended_at,e.payer_id,e.is_free_trial,r(e.lifetime_paid)??void 0)}},pV=class LO{static{s(this,"_BillingSubscription")}constructor(e,r,n,o,i,a,u,l,d,p){this.id=e,this.status=r,this.payerId=n,this.createdAt=o,this.updatedAt=i,this.activeAt=a,this.pastDueAt=u,this.subscriptionItems=l,this.nextPayment=d,this.eligibleForFreeTrial=p}static fromJSON(e){let r=e.next_payment?{date:e.next_payment.date,amount:{amount:e.next_payment.amount.amount,amountFormatted:e.next_payment.amount.amount_formatted,currency:e.next_payment.amount.currency,currencySymbol:e.next_payment.amount.currency_symbol}}:null;return new LO(e.id,e.status,e.payer_id,e.created_at,e.updated_at,e.active_at??null,e.past_due_at??null,(e.subscription_items??[]).map(n=>UO.fromJSON(n)),r,e.eligible_for_free_trial??!1)}};function mV(t){let e,r;return Array.isArray(t)?{data:t.map(o=>l_(o))}:fV(t)?(e=t.data.map(n=>l_(n)),r=t.total_count,{data:e,totalCount:r}):{data:l_(t)}}s(mV,"deserialize");function fV(t){return!t||typeof t!="object"||!("data"in t)?!1:Array.isArray(t.data)&&t.data!==void 0}s(fV,"isPaginated");function hV(t){return t.total_count}s(hV,"getCount");function l_(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return R3.fromJSON(t);switch(t.object){case Je.AccountlessApplication:return T3.fromJSON(t);case Je.ActorToken:return E3.fromJSON(t);case Je.AllowlistIdentifier:return I3.fromJSON(t);case Je.ApiKey:return k3.fromJSON(t);case Je.BlocklistIdentifier:return P3.fromJSON(t);case Je.Client:return C3.fromJSON(t);case Je.Cookies:return $3.fromJSON(t);case Je.Domain:return N3.fromJSON(t);case Je.EmailAddress:return W1.fromJSON(t);case Je.Email:return D3.fromJSON(t);case Je.IdpOAuthAccessToken:return M3.fromJSON(t);case Je.Instance:return U3.fromJSON(t);case Je.InstanceRestrictions:return z3.fromJSON(t);case Je.InstanceSettings:return L3.fromJSON(t);case Je.Invitation:return nO.fromJSON(t);case Je.JwtTemplate:return H3.fromJSON(t);case Je.Machine:return q3.fromJSON(t);case Je.MachineScope:return F3.fromJSON(t);case Je.MachineSecretKey:return B3.fromJSON(t);case Je.M2MToken:return V3.fromJSON(t);case Je.OauthAccessToken:return G3.fromJSON(t);case Je.OAuthApplication:return Z3.fromJSON(t);case Je.Organization:return dO.fromJSON(t);case Je.OrganizationInvitation:return J3.fromJSON(t);case Je.OrganizationMembership:return K3.fromJSON(t);case Je.OrganizationSettings:return Q3.fromJSON(t);case Je.PhoneNumber:return yO.fromJSON(t);case Je.ProxyCheck:return X3.fromJSON(t);case Je.RedirectUrl:return Y3.fromJSON(t);case Je.SamlConnection:return eV.fromJSON(t);case Je.SignInToken:return oV.fromJSON(t);case Je.SignUpAttempt:return sV.fromJSON(t);case Je.Session:return z1.fromJSON(t);case Je.SmsMessage:return aV.fromJSON(t);case Je.Token:return cV.fromJSON(t);case Je.TotalCount:return hV(t);case Je.User:return lV.fromJSON(t);case Je.WaitlistEntry:return dV.fromJSON(t);case Je.BillingPlan:return jO.fromJSON(t);case Je.BillingSubscription:return pV.fromJSON(t);case Je.BillingSubscriptionItem:return UO.fromJSON(t);case Je.Feature:return NO.fromJSON(t);default:return t}}s(l_,"jsonToObject");function qc(t){return gV(s(async r=>{let{secretKey:n,machineSecretKey:o,useMachineSecretKey:i=!1,requireSecretKey:a=!0,apiUrl:u=k1,apiVersion:l=P1,userAgent:d=A1,skipApiVersionInUrl:p=!1}=t,{path:f,method:h,queryParams:y,headerParams:g,bodyParams:m,formData:_,options:w}=r,{deepSnakecaseBodyParamKeys:b=!1}=w||{};a&&C1(n);let x=p?re(u,f):re(u,l,f),k=new URL(x);if(y){let $=b1({...y});for(let[P,N]of Object.entries($))N&&[N].flat().forEach(D=>k.searchParams.append(P,D))}let R=new Headers({"Clerk-API-Version":__,[ke.Headers.UserAgent]:d,...g}),O=ke.Headers.Authorization;R.has(O)||(i&&o?R.set(O,`Bearer ${o}`):n&&R.set(O,`Bearer ${n}`));let C;try{if(_)C=await Hn.fetch(k.href,{method:h,headers:R,body:_});else{R.set("Content-Type","application/json");let N=s(()=>{if(!(h!=="GET"&&m&&Object.keys(m).length>0))return null;let K=s(V=>b1(V,{deep:b}),"formatKeys");return{body:JSON.stringify(Array.isArray(m)?m.map(K):K(m))}},"buildBody");C=await Hn.fetch(k.href,{method:h,headers:R,...N()})}let P=await(C?.headers&&C.headers?.get(ke.Headers.ContentType)===ke.ContentTypes.Json?C.json():C.text());return C.ok?{...mV(P),errors:null}:{data:null,errors:x1(P),status:C?.status,statusText:C?.statusText,clerkTraceId:d_(P,C?.headers),retryAfter:w1(C?.headers)}}catch($){return $ instanceof Error?{data:null,errors:[{code:"unexpected_error",message:$.message||"Unexpected error"}],clerkTraceId:d_($,C?.headers)}:{data:null,errors:x1($),status:C?.status,statusText:C?.statusText,clerkTraceId:d_($,C?.headers),retryAfter:w1(C?.headers)}}},"requestFn"))}s(qc,"buildRequest");function d_(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:e?.get("cf-ray")||""}s(d_,"getTraceId");function w1(t){let e=t?.get("Retry-After");if(!e)return;let r=parseInt(e,10);if(!isNaN(r))return r}s(w1,"getRetryAfter");function x1(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(Bv):[]}return[]}s(x1,"parseErrors");function gV(t){return async(...e)=>{let{data:r,errors:n,totalCount:o,status:i,statusText:a,clerkTraceId:u,retryAfter:l}=await t(...e);if(n){let d=new Ep(a||"",{data:[],status:i,clerkTraceId:u,retryAfter:l});throw d.errors=n,d}return typeof o<"u"?{data:r,totalCount:o}:r}}s(gV,"withLegacyRequestReturn");function Vs(t){let e=qc(t);return{__experimental_accountlessApplications:new $5(qc({...t,requireSecretKey:!1})),actorTokens:new O5(e),allowlistIdentifiers:new R5(e),apiKeys:new N5(qc({...t,skipApiVersionInUrl:!0})),betaFeatures:new j5(e),blocklistIdentifiers:new M5(e),billing:new m3(e),clients:new U5(e),domains:new z5(e),emailAddresses:new L5(e),idPOAuthAccessToken:new F5(qc({...t,skipApiVersionInUrl:!0})),instance:new B5(e),invitations:new V5(e),jwks:new J5(e),jwtTemplates:new K5(e),machines:new H5(e),m2m:new G5(qc({...t,skipApiVersionInUrl:!0,requireSecretKey:!1,useMachineSecretKey:!0})),oauthApplications:new Q5(e),organizations:new W5(e),phoneNumbers:new X5(e),proxyChecks:new e3(e),redirectUrls:new t3(e),samlConnections:new r3(e),sessions:new n3(e),signInTokens:new o3(e),signUps:new i3(e),testingTokens:new a3(e),users:new c3(e),waitlistEntries:new u3(e),webhooks:new l3(e)}}s(Vs,"createBackendApiClient");var b_="mt_",w_="oat_",x_="ak_",yV=[b_,w_,x_];function h_(t){return yV.some(e=>t.startsWith(e))}s(h_,"isMachineTokenByPrefix");function g_(t){if(t.startsWith(b_))return Ge.M2MToken;if(t.startsWith(w_))return Ge.OAuthToken;if(t.startsWith(x_))return Ge.ApiKey;throw new Error("Unknown machine token type")}s(g_,"getMachineTokenType");var qO=s((t,e)=>t?e==="any"?!0:(Array.isArray(e)?e:[e]).includes(t):!1,"isTokenTypeAccepted");var zp=s(t=>()=>{let e={...t};return e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}},"createDebug");function vV(t,e,r){let{actor:n,sessionId:o,sessionStatus:i,userId:a,orgId:u,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:f}=e1(r),h=Vs(t),y=xV({sessionId:o,sessionToken:e,fetcher:s(async(g,m,_)=>(await h.sessions.getToken(g,m||"",_)).jwt,"fetcher")});return{tokenType:Ge.SessionToken,actor:n,sessionClaims:r,sessionId:o,sessionStatus:i,userId:a,orgId:u,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:f,getToken:y,has:n_({orgId:u,orgRole:l,orgPermissions:p,userId:a,factorVerificationAge:f,features:r.fea||"",plans:r.pla||""}),debug:zp({...t,sessionToken:e}),isAuthenticated:!0}}s(vV,"signedInAuthObject");function FO(t,e){return{tokenType:Ge.SessionToken,sessionClaims:null,sessionId:null,sessionStatus:e??null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:zp(t),isAuthenticated:!1}}s(FO,"signedOutAuthObject");function _V(t,e,r,n){let o={id:r.id,subject:r.subject,getToken:s(()=>Promise.resolve(e),"getToken"),has:s(()=>!1,"has"),debug:zp(n),isAuthenticated:!0};switch(t){case Ge.ApiKey:{let i=r;return{...o,tokenType:t,name:i.name,claims:i.claims,scopes:i.scopes,userId:i.subject.startsWith("user_")?i.subject:null,orgId:i.subject.startsWith("org_")?i.subject:null}}case Ge.M2MToken:{let i=r;return{...o,tokenType:t,claims:i.claims,scopes:i.scopes,machineId:i.subject}}case Ge.OAuthToken:{let i=r;return{...o,tokenType:t,scopes:i.scopes,userId:i.subject,clientId:i.clientId}}default:throw new Error(`Invalid token type: ${t}`)}}s(_V,"authenticatedMachineObject");function bV(t,e){let r={id:null,subject:null,scopes:null,has:s(()=>!1,"has"),getToken:s(()=>Promise.resolve(null),"getToken"),debug:zp(e),isAuthenticated:!1};switch(t){case Ge.ApiKey:return{...r,tokenType:t,name:null,claims:null,scopes:null,userId:null,orgId:null};case Ge.M2MToken:return{...r,tokenType:t,claims:null,scopes:null,machineId:null};case Ge.OAuthToken:return{...r,tokenType:t,scopes:null,userId:null,clientId:null};default:throw new Error(`Invalid token type: ${t}`)}}s(bV,"unauthenticatedMachineObject");function wV(){return{isAuthenticated:!1,tokenType:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:s(()=>({}),"debug")}}s(wV,"invalidTokenAuthObject");var xV=s(t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(o={})=>n?o.template||o.expiresInSeconds!==void 0?e(n,o.template,o.expiresInSeconds):r:null},"createGetToken");var Bc={SignedIn:"signed-in",SignedOut:"signed-out",Handshake:"handshake"},Kt={ClientUATWithoutSessionToken:"client-uat-but-no-session-token",DevBrowserMissing:"dev-browser-missing",DevBrowserSync:"dev-browser-sync",PrimaryRespondsToSyncing:"primary-responds-to-syncing",PrimaryDomainCrossOriginSync:"primary-domain-cross-origin-sync",SatelliteCookieNeedsSyncing:"satellite-needs-syncing",SessionTokenAndUATMissing:"session-token-and-uat-missing",SessionTokenMissing:"session-token-missing",SessionTokenExpired:"session-token-expired",SessionTokenIATBeforeClientUAT:"session-token-iat-before-client-uat",SessionTokenNBF:"session-token-nbf",SessionTokenIatInTheFuture:"session-token-iat-in-the-future",SessionTokenWithoutClientUAT:"session-token-but-no-client-uat",ActiveOrganizationMismatch:"active-organization-mismatch",TokenTypeMismatch:"token-type-mismatch",UnexpectedError:"unexpected-error"};function ii(t){let{authenticateContext:e,headers:r=new Headers,token:n}=t,o=s((({treatPendingAsSignedOut:i=!0}={})=>{if(t.tokenType===Ge.SessionToken){let{sessionClaims:u}=t,l=vV(e,n,u);return i&&l.sessionStatus==="pending"?FO(void 0,l.sessionStatus):l}let{machineData:a}=t;return _V(t.tokenType,n,a,e)}),"toAuth");return{status:Bc.SignedIn,reason:null,message:null,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!0,isAuthenticated:!0,tokenType:t.tokenType,toAuth:o,headers:r,token:n}}s(ii,"signedIn");function mn(t){let{authenticateContext:e,headers:r=new Headers,reason:n,message:o="",tokenType:i}=t,a=s((()=>i===Ge.SessionToken?FO({...e,status:Bc.SignedOut,reason:n,message:o}):bV(i,{reason:n,message:o,headers:r})),"toAuth");return S_({status:Bc.SignedOut,reason:n,message:o,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:i,toAuth:a,headers:r,token:null})}s(mn,"signedOut");function SV(t,e,r="",n){return S_({status:Bc.Handshake,reason:e,message:r,publishableKey:t.publishableKey||"",isSatellite:t.isSatellite||!1,domain:t.domain||"",proxyUrl:t.proxyUrl||"",signInUrl:t.signInUrl||"",signUpUrl:t.signUpUrl||"",afterSignInUrl:t.afterSignInUrl||"",afterSignUpUrl:t.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:Ge.SessionToken,toAuth:s(()=>null,"toAuth"),headers:n,token:null})}s(SV,"handshake");function TV(){let t=wV();return S_({status:Bc.SignedOut,reason:Kt.TokenTypeMismatch,message:"",proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",signInUrl:"",signUpUrl:"",afterSignInUrl:"",afterSignUpUrl:"",isSignedIn:!1,isAuthenticated:!1,tokenType:null,toAuth:s(()=>t,"toAuth"),headers:new Headers,token:null})}s(TV,"signedOutInvalidToken");var S_=s(t=>{let e=new Headers(t.headers||{});if(t.message)try{e.set(ke.Headers.AuthMessage,t.message)}catch{}if(t.reason)try{e.set(ke.Headers.AuthReason,t.reason)}catch{}if(t.status)try{e.set(ke.Headers.AuthStatus,t.status)}catch{}return t.headers=e,t},"withDebugHeaders"),EV=class extends URL{static{s(this,"ClerkUrl")}isCrossOrigin(t){return this.origin!==new URL(t.toString()).origin}},S1=s((...t)=>new EV(...t),"createClerkUrl"),T1=class extends Request{static{s(this,"ClerkRequest")}constructor(t,e){let r=typeof t!="string"&&"url"in t?t.url:String(t);super(r,e||typeof t=="string"?void 0:t),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(t){let e=new URL(t.url),r=t.headers.get(ke.Headers.ForwardedProto),n=t.headers.get(ke.Headers.ForwardedHost),o=t.headers.get(ke.Headers.Host),i=e.protocol,a=this.getFirstValueFromHeader(n)??o,u=this.getFirstValueFromHeader(r)??i?.replace(/[:/]/,""),l=a&&u?`${u}://${a}`:e.origin;return l===e.origin?S1(e):S1(e.pathname+e.search,l)}getFirstValueFromHeader(t){return t?.split(",")[0]}parseCookies(t){let e=(0,BO.parse)(this.decodeCookieValue(t.headers.get("cookie")||""));return new Map(Object.entries(e))}decodeCookieValue(t){return t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},IV=s((...t)=>t[0]instanceof T1?t[0]:new T1(...t),"createClerkRequest"),VO=s(t=>t.split(";")[0]?.split("=")[0],"getCookieName"),HO=s(t=>t.split(";")[0]?.split("=")[1],"getCookieValue"),Lp={},y_=0;function v_(t){return Lp[t]}s(v_,"getFromCache");function kV(){return Object.values(Lp)}s(kV,"getCacheValues");function GO(t,e,r=!0){Lp[t]=e,y_=r?Date.now():-1}s(GO,"setInCache");var PV="-----BEGIN PUBLIC KEY-----",AV="-----END PUBLIC KEY-----",CV="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",OV="IDAQAB";function ZO(t){let{kid:e,pem:r}=t,n=`local-${e}`,o=v_(n);if(o)return o;if(!r)throw new ht({action:lr.SetClerkJWTKey,message:"Missing local JWK.",reason:Ye.LocalJWKMissing});let i=r.replace(/\r\n|\n|\r/g,"").replace(PV,"").replace(AV,"").replace(CV,"").replace(OV,"").replace(/\+/g,"-").replace(/\//g,"_"),a={kid:n,kty:"RSA",alg:"RS256",n:i,e:"AQAB"};return GO(n,a,!1),a}s(ZO,"loadClerkJwkFromPem");async function JO(t){let{secretKey:e,apiUrl:r=k1,apiVersion:n=P1,kid:o,skipJwksCache:i}=t;if(i||RV()||!v_(o)){if(!e)throw new ht({action:lr.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:Ye.RemoteJWKFailedToLoad});let u=s(()=>$V(r,e,n),"fetcher"),{keys:l}=await Sp(u);if(!l||!l.length)throw new ht({action:lr.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:Ye.RemoteJWKFailedToLoad});l.forEach(d=>GO(d.kid,d))}let a=v_(o);if(!a){let l=kV().map(d=>d.kid).sort().join(", ");throw new ht({action:`Go to your Dashboard and validate your secret and public keys are correct. ${lr.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${o}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${l}`,reason:Ye.JWKKidMismatch})}return a}s(JO,"loadClerkJWKFromRemote");async function $V(t,e,r){if(!e)throw new ht({action:lr.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:Ye.RemoteJWKFailedToLoad});let n=new URL(t);n.pathname=re(n.pathname,r,"/jwks");let o=await Hn.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Clerk-API-Version":__,"Content-Type":"application/json","User-Agent":A1}});if(!o.ok){let i=await o.json(),a=NV(i?.errors,VC.InvalidSecretKey);if(a){let u=Ye.InvalidSecretKey;throw new ht({action:lr.ContactSupport,message:a.message,reason:u})}throw new ht({action:lr.ContactSupport,message:`Error loading Clerk JWKS from ${n.href} with code=${o.status}`,reason:Ye.RemoteJWKFailedToLoad})}return o.json()}s($V,"fetchJWKSFromBAPI");function RV(){if(y_===-1)return!1;let t=Date.now()-y_>=x5*1e3;return t&&(Lp={}),t}s(RV,"cacheHasExpired");var NV=s((t,e)=>t?t.find(r=>r.code===e):null,"getErrorObjectByCode");async function si(t,e){let{data:r,errors:n}=Tn(t);if(n)return{errors:n};let{header:o}=r,{kid:i}=o;try{let a;if(e.jwtKey)a=ZO({kid:i,pem:e.jwtKey});else if(e.secretKey)a=await JO({...e,kid:i});else return{errors:[new ht({action:lr.SetClerkJWTKey,message:"Failed to resolve JWK during verification.",reason:Ye.JWKFailedToResolve})]};return await KC(t,{...e,key:a})}catch(a){return{errors:[a]}}}s(si,"verifyToken");function T_(t,e,r){if(Gv(e)){let n,o;switch(e.status){case 401:n=jc.InvalidSecretKey,o=e.errors[0]?.message||"Invalid secret key";break;case 404:n=jc.TokenInvalid,o=r;break;default:n=jc.UnexpectedError,o="Unexpected error"}return{data:void 0,tokenType:t,errors:[new Ip({message:o,code:n,status:e.status})]}}return{data:void 0,tokenType:t,errors:[new Ip({message:"Unexpected error",code:jc.UnexpectedError,status:e.status})]}}s(T_,"handleClerkAPIError");async function DV(t,e){try{return{data:await Vs(e).m2m.verifyToken({token:t}),tokenType:Ge.M2MToken,errors:void 0}}catch(r){return T_(Ge.M2MToken,r,"Machine token not found")}}s(DV,"verifyM2MToken");async function jV(t,e){try{return{data:await Vs(e).idPOAuthAccessToken.verifyAccessToken(t),tokenType:Ge.OAuthToken,errors:void 0}}catch(r){return T_(Ge.OAuthToken,r,"OAuth token not found")}}s(jV,"verifyOAuthToken");async function MV(t,e){try{return{data:await Vs(e).apiKeys.verifySecret(t),tokenType:Ge.ApiKey,errors:void 0}}catch(r){return T_(Ge.ApiKey,r,"API key not found")}}s(MV,"verifyAPIKey");async function E1(t,e){if(t.startsWith(b_))return DV(t,e);if(t.startsWith(w_))return jV(t,e);if(t.startsWith(x_))return MV(t,e);throw new Error("Unknown machine token type")}s(E1,"verifyMachineAuthToken");async function UV(t,{key:e}){let{data:r,errors:n}=Tn(t);if(n)throw n[0];let{header:o,payload:i}=r,{typ:a,alg:u}=o;Xv(a),Yv(u);let{data:l,errors:d}=await e_(r,e);if(d)throw new ht({reason:Ye.TokenVerificationFailed,message:`Error verifying handshake token. ${d[0]}`});if(!l)throw new ht({reason:Ye.TokenInvalidSignature,message:"Handshake signature is invalid."});return i}s(UV,"verifyHandshakeJwt");async function zV(t,e){let{secretKey:r,apiUrl:n,apiVersion:o,jwksCacheTtlInMs:i,jwtKey:a,skipJwksCache:u}=e,{data:l,errors:d}=Tn(t);if(d)throw d[0];let{kid:p}=l.header,f;if(a)f=ZO({kid:p,pem:a});else if(r)f=await JO({secretKey:r,apiUrl:n,apiVersion:o,kid:p,jwksCacheTtlInMs:i,skipJwksCache:u});else throw new ht({action:lr.SetClerkJWTKey,message:"Failed to resolve JWK during handshake verification.",reason:Ye.JWKFailedToResolve});return UV(t,{key:f})}s(zV,"verifyHandshakeToken");var LV=class{static{s(this,"HandshakeService")}constructor(t,e,r){this.authenticateContext=t,this.options=e,this.organizationMatcher=r}isRequestEligibleForHandshake(){let{accept:t,secFetchDest:e}=this.authenticateContext;return!!(e==="document"||e==="iframe"||!e&&t?.startsWith("text/html"))}buildRedirectToHandshake(t){if(!this.authenticateContext?.clerkUrl)throw new Error("Missing clerkUrl in authenticateContext");let e=this.removeDevBrowserFromURL(this.authenticateContext.clerkUrl),r=this.authenticateContext.frontendApi.startsWith("http")?this.authenticateContext.frontendApi:`https://${this.authenticateContext.frontendApi}`;r=r.replace(/\/+$/,"")+"/";let n=new URL("v1/client/handshake",r);n.searchParams.append("redirect_url",e?.href||""),n.searchParams.append("__clerk_api_version",__),n.searchParams.append(ke.QueryParameters.SuffixedCookies,this.authenticateContext.usesSuffixedCookies().toString()),n.searchParams.append(ke.QueryParameters.HandshakeReason,t),n.searchParams.append(ke.QueryParameters.HandshakeFormat,"nonce"),this.authenticateContext.instanceType==="development"&&this.authenticateContext.devBrowserToken&&n.searchParams.append(ke.QueryParameters.DevBrowser,this.authenticateContext.devBrowserToken);let o=this.getOrganizationSyncTarget(this.authenticateContext.clerkUrl,this.organizationMatcher);return o&&this.getOrganizationSyncQueryParams(o).forEach((a,u)=>{n.searchParams.append(u,a)}),new Headers({[ke.Headers.Location]:n.href})}async getCookiesFromHandshake(){let t=[];if(this.authenticateContext.handshakeNonce)try{let e=await this.authenticateContext.apiClient?.clients.getHandshakePayload({nonce:this.authenticateContext.handshakeNonce});e&&t.push(...e.directives)}catch(e){console.error("Clerk: HandshakeService: error getting handshake payload:",e)}else if(this.authenticateContext.handshakeToken){let e=await zV(this.authenticateContext.handshakeToken,this.authenticateContext);e&&Array.isArray(e.handshake)&&t.push(...e.handshake)}return t}async resolveHandshake(){let t=new Headers({"Access-Control-Allow-Origin":"null","Access-Control-Allow-Credentials":"true"}),e=await this.getCookiesFromHandshake(),r="";if(e.forEach(i=>{t.append("Set-Cookie",i),VO(i).startsWith(ke.Cookies.Session)&&(r=HO(i))}),this.authenticateContext.instanceType==="development"){let i=new URL(this.authenticateContext.clerkUrl);i.searchParams.delete(ke.QueryParameters.Handshake),i.searchParams.delete(ke.QueryParameters.HandshakeHelp),i.searchParams.delete(ke.QueryParameters.DevBrowser),i.searchParams.delete(ke.QueryParameters.HandshakeNonce),t.append(ke.Headers.Location,i.toString()),t.set(ke.Headers.CacheControl,"no-store")}if(r==="")return mn({tokenType:Ge.SessionToken,authenticateContext:this.authenticateContext,reason:Kt.SessionTokenMissing,message:"",headers:t});let{data:n,errors:[o]=[]}=await si(r,this.authenticateContext);if(n)return ii({tokenType:Ge.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:n,headers:t,token:r});if(this.authenticateContext.instanceType==="development"&&(o?.reason===Ye.TokenExpired||o?.reason===Ye.TokenNotActiveYet||o?.reason===Ye.TokenIatInTheFuture)){let i=new ht({action:o.action,message:o.message,reason:o.reason});i.tokenCarrier="cookie",console.error(`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will attempt to account for the clock skew in development.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${i.getFullMessage()}`);let{data:a,errors:[u]=[]}=await si(r,{...this.authenticateContext,clockSkewInMs:864e5});if(a)return ii({tokenType:Ge.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:a,headers:t,token:r});throw new Error(u?.message||"Clerk: Handshake retry failed.")}throw new Error(o?.message||"Clerk: Handshake failed.")}handleTokenVerificationErrorInDevelopment(t){if(t.reason===Ye.TokenInvalidSignature){let e="Clerk: Handshake token verification failed due to an invalid signature. If you have switched Clerk keys locally, clear your cookies and try again.";throw new Error(e)}throw new Error(`Clerk: Handshake token verification failed: ${t.getFullMessage()}.`)}checkAndTrackRedirectLoop(t){if(this.authenticateContext.handshakeRedirectLoopCounter===3)return!0;let e=this.authenticateContext.handshakeRedirectLoopCounter+1,r=ke.Cookies.RedirectCount;return t.append("Set-Cookie",`${r}=${e}; SameSite=Lax; HttpOnly; Max-Age=2`),!1}removeDevBrowserFromURL(t){let e=new URL(t);return e.searchParams.delete(ke.QueryParameters.DevBrowser),e.searchParams.delete(ke.QueryParameters.LegacyDevBrowser),e}getOrganizationSyncTarget(t,e){return e.findTarget(t)}getOrganizationSyncQueryParams(t){let e=new Map;return t.type==="personalAccount"&&e.set("organization_id",""),t.type==="organization"&&(t.organizationId&&e.set("organization_id",t.organizationId),t.organizationSlug&&e.set("organization_id",t.organizationSlug)),e}},qV=class{static{s(this,"OrganizationMatcher")}constructor(t){this.organizationPattern=this.createMatcher(t?.organizationPatterns),this.personalAccountPattern=this.createMatcher(t?.personalAccountPatterns)}createMatcher(t){if(!t)return null;try{return o_(t)}catch(e){throw new Error(`Invalid pattern "${t}": ${e}`)}}findTarget(t){let e=this.findOrganizationTarget(t);return e||this.findPersonalAccountTarget(t)}findOrganizationTarget(t){if(!this.organizationPattern)return null;try{let e=this.organizationPattern(t.pathname);if(!e||!("params"in e))return null;let r=e.params;return r.id?{type:"organization",organizationId:r.id}:r.slug?{type:"organization",organizationSlug:r.slug}:null}catch(e){return console.error("Failed to match organization pattern:",e),null}}findPersonalAccountTarget(t){if(!this.personalAccountPattern)return null;try{return this.personalAccountPattern(t.pathname)?{type:"personalAccount"}:null}catch(e){return console.error("Failed to match personal account pattern:",e),null}}},En={NonEligibleNoCookie:"non-eligible-no-refresh-cookie",NonEligibleNonGet:"non-eligible-non-get",InvalidSessionToken:"invalid-session-token",MissingApiClient:"missing-api-client",MissingSessionToken:"missing-session-token",MissingRefreshToken:"missing-refresh-token",ExpiredSessionTokenDecodeFailed:"expired-session-token-decode-failed",ExpiredSessionTokenMissingSidClaim:"expired-session-token-missing-sid-claim",FetchError:"fetch-error",UnexpectedSDKError:"unexpected-sdk-error",UnexpectedBAPIError:"unexpected-bapi-error"};function FV(t,e){if(!t&&bp(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}s(FV,"assertSignInUrlExists");function BV(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}s(BV,"assertProxyUrlOrDomain");function VV(t,e){let r;try{r=new URL(t)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===e)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}s(VV,"assertSignInUrlFormatAndOrigin");function HV(t){if(!t.machineSecretKey&&!t.secretKey)throw new Error("Machine token authentication requires either a Machine secret key or a Clerk secret key. Ensure a Clerk secret key or Machine secret key is set.")}s(HV,"assertMachineSecretOrSecretKey");function GV(t,e,r){return t.reason===Ye.TokenExpired&&!!e.refreshTokenInCookie&&r.method==="GET"}s(GV,"isRequestEligibleForRefresh");function I1(t,e,r){return qO(t,e)?null:mn({tokenType:typeof e=="string"?e:t,authenticateContext:r,reason:Kt.TokenTypeMismatch})}s(I1,"checkTokenTypeMismatch");function ZV(t,e){let r=null,{tokenInHeader:n}=e;n&&(h_(n)?r=g_(n):r=Ge.SessionToken);let o=r??Ge.SessionToken;return qO(o,t)}s(ZV,"isTokenTypeInAcceptedArray");var JV=s((async(t,e)=>{let r=await A5(IV(t),e),n=e.acceptsToken??Ge.SessionToken;n!==Ge.M2MToken&&(C1(r.secretKey),r.isSatellite&&(FV(r.signInUrl,r.secretKey),r.signInUrl&&r.origin&&VV(r.signInUrl,r.origin),BV(r.proxyUrl||r.domain))),n===Ge.M2MToken&&HV(r);let o=new qV(e.organizationSyncOptions),i=new LV(r,{organizationSyncOptions:e.organizationSyncOptions},o);async function a(_){if(!e.apiClient)return{data:null,error:{message:"An apiClient is needed to perform token refresh.",cause:{reason:En.MissingApiClient}}};let{sessionToken:w,refreshTokenInCookie:b}=_;if(!w)return{data:null,error:{message:"Session token must be provided.",cause:{reason:En.MissingSessionToken}}};if(!b)return{data:null,error:{message:"Refresh token must be provided.",cause:{reason:En.MissingRefreshToken}}};let{data:x,errors:k}=Tn(w);if(!x||k)return{data:null,error:{message:"Unable to decode the expired session token.",cause:{reason:En.ExpiredSessionTokenDecodeFailed,errors:k}}};if(!x?.payload?.sid)return{data:null,error:{message:"Expired session token is missing the `sid` claim.",cause:{reason:En.ExpiredSessionTokenMissingSidClaim}}};try{return{data:(await e.apiClient.sessions.refreshSession(x.payload.sid,{format:"cookie",suffixed_cookies:_.usesSuffixedCookies(),expired_token:w||"",refresh_token:b||"",request_origin:_.clerkUrl.origin,request_headers:Object.fromEntries(Array.from(t.headers.entries()).map(([O,C])=>[O,[C]]))})).cookies,error:null}}catch(R){return R?.errors?.length?R.errors[0].code==="unexpected_error"?{data:null,error:{message:"Fetch unexpected error",cause:{reason:En.FetchError,errors:R.errors}}}:{data:null,error:{message:R.errors[0].code,cause:{reason:R.errors[0].code,errors:R.errors}}}:{data:null,error:{message:"Unexpected Server/BAPI error",cause:{reason:En.UnexpectedBAPIError,errors:[R]}}}}}s(a,"refreshToken");async function u(_){let{data:w,error:b}=await a(_);if(!w||w.length===0)return{data:null,error:b};let x=new Headers,k="";w.forEach(C=>{x.append("Set-Cookie",C),VO(C).startsWith(ke.Cookies.Session)&&(k=HO(C))});let{data:R,errors:O}=await si(k,_);return O?{data:null,error:{message:"Clerk: unable to verify refreshed session token.",cause:{reason:En.InvalidSessionToken,errors:O}}}:{data:{jwtPayload:R,sessionToken:k,headers:x},error:null}}s(u,"attemptRefresh");function l(_,w,b,x){if(!i.isRequestEligibleForHandshake())return mn({tokenType:Ge.SessionToken,authenticateContext:_,reason:w,message:b});let k=x??i.buildRedirectToHandshake(w);return k.get(ke.Headers.Location)&&k.set(ke.Headers.CacheControl,"no-store"),i.checkAndTrackRedirectLoop(k)?(console.log("Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard."),mn({tokenType:Ge.SessionToken,authenticateContext:_,reason:w,message:b})):SV(_,w,b,k)}s(l,"handleMaybeHandshakeStatus");function d(_,w){let b=o.findTarget(_.clerkUrl);if(!b)return null;let x=!1;if(b.type==="organization"&&(b.organizationSlug&&b.organizationSlug!==w.orgSlug&&(x=!0),b.organizationId&&b.organizationId!==w.orgId&&(x=!0)),b.type==="personalAccount"&&w.orgId&&(x=!0),!x)return null;if(_.handshakeRedirectLoopCounter>=3)return console.warn("Clerk: Organization activation handshake loop detected. This is likely due to an invalid organization ID or slug. Skipping organization activation."),null;let k=l(_,Kt.ActiveOrganizationMismatch,"");return k.status!=="handshake"?null:k}s(d,"handleMaybeOrganizationSyncHandshake");async function p(){let{tokenInHeader:_}=r;try{let{data:w,errors:b}=await si(_,r);if(b)throw b[0];return ii({tokenType:Ge.SessionToken,authenticateContext:r,sessionClaims:w,headers:new Headers,token:_})}catch(w){return h(w,"header")}}s(p,"authenticateRequestWithTokenInHeader");async function f(){let _=r.clientUat,w=!!r.sessionTokenInCookie,b=!!r.devBrowserToken;if(r.handshakeNonce||r.handshakeToken)try{return await i.resolveHandshake()}catch(C){C instanceof ht&&r.instanceType==="development"?i.handleTokenVerificationErrorInDevelopment(C):console.error("Clerk: unable to resolve handshake:",C)}let x=r.isSatellite&&r.secFetchDest==="document";if(r.instanceType==="production"&&x)return l(r,Kt.SatelliteCookieNeedsSyncing,"");if(r.instanceType==="development"&&x&&!r.clerkUrl.searchParams.has(ke.QueryParameters.ClerkSynced)){let C=new URL(r.signInUrl);C.searchParams.append(ke.QueryParameters.ClerkRedirectUrl,r.clerkUrl.toString());let $=new Headers({[ke.Headers.Location]:C.toString()});return l(r,Kt.SatelliteCookieNeedsSyncing,"",$)}let k=new URL(r.clerkUrl).searchParams.get(ke.QueryParameters.ClerkRedirectUrl);if(r.instanceType==="development"&&!r.isSatellite&&k){let C=new URL(k);r.devBrowserToken&&C.searchParams.append(ke.QueryParameters.DevBrowser,r.devBrowserToken),C.searchParams.append(ke.QueryParameters.ClerkSynced,"true");let $=new Headers({[ke.Headers.Location]:C.toString()});return l(r,Kt.PrimaryRespondsToSyncing,"",$)}if(r.instanceType==="development"&&r.clerkUrl.searchParams.has(ke.QueryParameters.DevBrowser))return l(r,Kt.DevBrowserSync,"");if(r.instanceType==="development"&&!b)return l(r,Kt.DevBrowserMissing,"");if(!_&&!w)return mn({tokenType:Ge.SessionToken,authenticateContext:r,reason:Kt.SessionTokenAndUATMissing});if(!_&&w)return l(r,Kt.SessionTokenWithoutClientUAT,"");if(_&&!w)return l(r,Kt.ClientUATWithoutSessionToken,"");let{data:R,errors:O}=Tn(r.sessionTokenInCookie);if(O)return h(O[0],"cookie");if(R.payload.iat<r.clientUat)return l(r,Kt.SessionTokenIATBeforeClientUAT,"");try{let{data:C,errors:$}=await si(r.sessionTokenInCookie,r);if($)throw $[0];let P=ii({tokenType:Ge.SessionToken,authenticateContext:r,sessionClaims:C,headers:new Headers,token:r.sessionTokenInCookie});if(!r.isSatellite&&r.secFetchDest==="document"&&r.isCrossOriginReferrer()&&!r.isKnownClerkReferrer()&&r.handshakeRedirectLoopCounter===0)return l(r,Kt.PrimaryDomainCrossOriginSync,"Cross-origin request from satellite domain requires handshake");let D=P.toAuth();if(D.userId){let K=d(r,D);if(K)return K}return P}catch(C){return h(C,"cookie")}return mn({tokenType:Ge.SessionToken,authenticateContext:r,reason:Kt.UnexpectedError})}s(f,"authenticateRequestWithTokenInCookie");async function h(_,w){if(!(_ instanceof ht))return mn({tokenType:Ge.SessionToken,authenticateContext:r,reason:Kt.UnexpectedError});let b;if(GV(_,r,t)){let{data:k,error:R}=await u(r);if(k)return ii({tokenType:Ge.SessionToken,authenticateContext:r,sessionClaims:k.jwtPayload,headers:k.headers,token:k.sessionToken});R?.cause?.reason?b=R.cause.reason:b=En.UnexpectedSDKError}else t.method!=="GET"?b=En.NonEligibleNonGet:r.refreshTokenInCookie?b=null:b=En.NonEligibleNoCookie;return _.tokenCarrier=w,[Ye.TokenExpired,Ye.TokenNotActiveYet,Ye.TokenIatInTheFuture].includes(_.reason)?l(r,WV({tokenError:_.reason,refreshError:b}),_.getFullMessage()):mn({tokenType:Ge.SessionToken,authenticateContext:r,reason:_.reason,message:_.getFullMessage()})}s(h,"handleSessionTokenError");function y(_,w){return w instanceof Ip?mn({tokenType:_,authenticateContext:r,reason:w.code,message:w.getFullMessage()}):mn({tokenType:_,authenticateContext:r,reason:Kt.UnexpectedError})}s(y,"handleMachineError");async function g(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(!h_(_))return mn({tokenType:n,authenticateContext:r,reason:Kt.TokenTypeMismatch,message:""});let w=g_(_),b=I1(w,n,r);if(b)return b;let{data:x,tokenType:k,errors:R}=await E1(_,r);return R?y(k,R[0]):ii({tokenType:k,authenticateContext:r,machineData:x,token:_})}s(g,"authenticateMachineRequestWithTokenInHeader");async function m(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(h_(_)){let x=g_(_),k=I1(x,n,r);if(k)return k;let{data:R,tokenType:O,errors:C}=await E1(_,r);return C?y(O,C[0]):ii({tokenType:O,authenticateContext:r,machineData:R,token:_})}let{data:w,errors:b}=await si(_,r);return b?h(b[0],"header"):ii({tokenType:Ge.SessionToken,authenticateContext:r,sessionClaims:w,token:_})}return s(m,"authenticateAnyRequestWithTokenInHeader"),Array.isArray(n)&&!ZV(n,r)?TV():r.tokenInHeader?n==="any"?m():n===Ge.SessionToken?p():g():n===Ge.OAuthToken||n===Ge.ApiKey||n===Ge.M2MToken?mn({tokenType:n,authenticateContext:r,reason:"No token in header"}):f()}),"authenticateRequest"),KV=s(t=>{let{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:u,domain:l}=t;return{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:u,domain:l}},"debugRequestState"),WV=s(({tokenError:t,refreshError:e})=>{switch(t){case Ye.TokenExpired:return`${Kt.SessionTokenExpired}-refresh-${e}`;case Ye.TokenNotActiveYet:return Kt.SessionTokenNBF;case Ye.TokenIatInTheFuture:return Kt.SessionTokenIatInTheFuture;default:return Kt.UnexpectedError}},"convertTokenVerificationErrorReasonToAuthErrorReason"),QV={secretKey:"",machineSecretKey:"",jwtKey:"",apiUrl:void 0,apiVersion:void 0,proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",audience:""};function KO(t){let e=s1(QV,t.options),r=t.apiClient;return{authenticateRequest:s((o,i={})=>{let{apiUrl:a,apiVersion:u}=e,l=s1(e,i);return JV(o,{...i,...l,apiUrl:a,apiVersion:u,apiClient:r})},"authenticateRequest2"),debugRequestState:KV}}s(KO,"createAuthenticateRequest");function WO(t){return async(...e)=>{let{data:r,errors:n}=await t(...e);if(n)throw n[0];return r}}s(WO,"withLegacyReturn");function XV(t){return t?t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}s(XV,"snakeToCamel");function YV(t){return t?t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}s(YV,"camelToSnake");var QO=s(t=>{let e=s(r=>{if(!r)return r;if(Array.isArray(r))return r.map(i=>typeof i=="object"||Array.isArray(i)?e(i):i);let n={...r},o=Object.keys(n);for(let i of o){let a=t(i.toString());a!==i&&(n[a]=n[i],delete n[i]),typeof n[a]=="object"&&(n[a]=e(n[a]))}return n},"deepTransform");return e},"createDeepObjectTransformer"),ZSe=QO(YV),JSe=QO(XV);function E_(t){if(typeof t=="boolean")return t;if(t==null)return!1;if(typeof t=="string"){if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1}let e=parseInt(t,10);return isNaN(e)?!1:e>0}s(E_,"isTruthy");var eH=864e5,tH=class{static{s(this,"TelemetryEventThrottler")}#e;#t=eH;constructor(t){this.#e=t}isEventThrottled(t){let e=Date.now(),r=this.#r(t),n=this.#e.getItem(r);return n?e-n>this.#t?(this.#e.setItem(r,e),!1):!0:(this.#e.setItem(r,e),!1)}#r(t){let{sk:e,pk:r,payload:n,...o}=t,i={...n,...o};return JSON.stringify(Object.keys({...n,...o}).sort().map(a=>i[a]))}},XO=class{static{s(this,"LocalStorageThrottlerCache")}#e="clerk_telemetry_throttler";getItem(t){return this.#t()[t]}setItem(t,e){try{let r=this.#t();r[t]=e,localStorage.setItem(this.#e,JSON.stringify(r))}catch(r){r instanceof DOMException&&(r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&localStorage.length>0&&localStorage.removeItem(this.#e)}}removeItem(t){try{let e=this.#t();delete e[t],localStorage.setItem(this.#e,JSON.stringify(e))}catch{}}#t(){try{let t=localStorage.getItem(this.#e);return t?JSON.parse(t):{}}catch{return{}}}static isSupported(){return typeof window<"u"&&!!window.localStorage}},rH=class{static{s(this,"InMemoryThrottlerCache")}#e=new Map;#t=1e4;getItem(t){if(this.#e.size>this.#t){this.#e.clear();return}return this.#e.get(t)}setItem(t,e){this.#e.set(t,e)}removeItem(t){this.#e.delete(t)}};function nH(t){return typeof t=="object"&&t!==null&&"constructor"in t&&typeof t.constructor=="function"}s(nH,"isWindowClerkWithMetadata");var oH=new Set(["error","warn","info","debug","trace"]),I_={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},k_=class{static{s(this,"TelemetryCollector")}#e;#t;#r={};#i=[];#n=null;constructor(t){this.#e={maxBufferSize:t.maxBufferSize??I_.maxBufferSize,samplingRate:t.samplingRate??I_.samplingRate,perEventSampling:t.perEventSampling??!0,disabled:t.disabled??!1,debug:t.debug??!1,endpoint:I_.endpoint},!t.clerkVersion&&typeof window>"u"?this.#r.clerkVersion="":this.#r.clerkVersion=t.clerkVersion??"",this.#r.sdk=t.sdk,this.#r.sdkVersion=t.sdkVersion,this.#r.publishableKey=t.publishableKey??"";let e=ri(t.publishableKey);e&&(this.#r.instanceType=e.instanceType),t.secretKey&&(this.#r.secretKey=t.secretKey.substring(0,16)),this.#t=new tH(XO.isSupported()?new XO:new rH)}get isEnabled(){return!(this.#r.instanceType!=="development"||this.#e.disabled||typeof process<"u"&&process.env&&E_(process.env.CLERK_TELEMETRY_DISABLED)||typeof window<"u"&&window?.navigator?.webdriver)}get isDebug(){return this.#e.debug||typeof process<"u"&&process.env&&E_(process.env.CLERK_TELEMETRY_DEBUG)}record(t){try{let e=this.#a(t.event,t.payload);if(this.#p(e.event,e),!this.#o(e,t.eventSamplingRate))return;this.#i.push({kind:"event",value:e}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(t){try{if(!this.#d(t))return;let e=typeof t?.level=="string"&&oH.has(t.level),r=typeof t?.message=="string"&&t.message.trim().length>0,n=null,o=t?.timestamp;if(typeof o=="number"||typeof o=="string"){let u=new Date(o);Number.isNaN(u.getTime())||(n=u)}if(!e||!r||n===null){this.isDebug&&typeof console<"u"&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:e,messageIsValid:r,timestampIsValid:n!==null});return}let i=this.#l(),a={sdk:i.name,sdkv:i.version,cv:this.#r.clerkVersion??"",lvl:t.level,msg:t.message,ts:n.toISOString(),pk:this.#r.publishableKey||null,payload:this.#m(t.context)};this.#i.push({kind:"log",value:a}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#o(t,e){return this.isEnabled&&!this.isDebug&&this.#u(t,e)}#d(t){return!0}#u(t,e){let r=Math.random();return r<=this.#e.samplingRate&&(this.#e.perEventSampling===!1||typeof e>"u"||r<=e)?!this.#t.isEventThrottled(t):!1}#c(){if(typeof window>"u"){this.#s();return}if(this.#i.length>=this.#e.maxBufferSize){this.#n&&(typeof cancelIdleCallback<"u"?cancelIdleCallback(Number(this.#n)):clearTimeout(Number(this.#n))),this.#s();return}this.#n||("requestIdleCallback"in window?this.#n=requestIdleCallback(()=>{this.#s(),this.#n=null}):this.#n=setTimeout(()=>{this.#s(),this.#n=null},0))}#s(){let t=[...this.#i];if(this.#i=[],this.#n=null,t.length===0)return;let e=t.filter(n=>n.kind==="event").map(n=>n.value),r=t.filter(n=>n.kind==="log").map(n=>n.value);if(e.length>0){let n=new URL("/v1/event",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:e})}).catch(()=>{})}if(r.length>0){let n=new URL("/v1/logs",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>{})}}#p(t,e){this.isDebug&&(typeof console.groupCollapsed<"u"?(console.groupCollapsed("[clerk/telemetry]",t),console.log(e),console.groupEnd()):console.log("[clerk/telemetry]",t,e))}#l(){let t={name:this.#r.sdk,version:this.#r.sdkVersion};if(typeof window<"u"){let e=window;if(e.Clerk){let r=e.Clerk;if(nH(r)&&r.constructor.sdkMetadata){let{name:n,version:o}=r.constructor.sdkMetadata;n!==void 0&&(t.name=n),o!==void 0&&(t.version=o)}}}return t}#a(t,e){let r=this.#l();return{event:t,cv:this.#r.clerkVersion??"",it:this.#r.instanceType??"",sdk:r.name,sdkv:r.version,...this.#r.publishableKey?{pk:this.#r.publishableKey}:{},...this.#r.secretKey?{sk:this.#r.secretKey}:{},payload:e}}#m(t){if(t===null||typeof t>"u"||typeof t!="object")return null;try{let e=JSON.parse(JSON.stringify(t));return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}};var P_=WO(si);function YO(t){let e={...t},r=Vs(e),n=KO({options:e,apiClient:r}),o=new k_({publishableKey:e.publishableKey,secretKey:e.secretKey,samplingRate:.1,...e.sdkMetadata?{sdk:e.sdkMetadata.name,sdkVersion:e.sdkMetadata.version}:{},...e.telemetry||{}});return{...r,...n,telemetry:o}}s(YO,"createClerkClient");var qp=s(t=>t,"createMiddleware");function A_(){let t=process.env.CLERK_SECRET_KEY,e=process.env.VITE_CLERK_PUBLISHABLE_KEY;if(!t)throw new Error("CLERK_SECRET_KEY environment variable is not set");return{secretKey:t,publishableKey:e}}s(A_,"getClerkConfig");function e$(){let{secretKey:t}=A_();return YO({secretKey:t})}s(e$,"getClerkClient");var t$=qp(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null,o=t.get("requestId")||"unknown",i=t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown";if(!n)return L.warn("Authentication failed: No token provided",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_REQUIRED",error:"Authentication required"},401);try{let{secretKey:a}=A_(),u=e$(),l=await P_(n,{secretKey:a});if(!l?.sub)return L.warn("Authentication failed: Invalid token",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"INVALID_TOKEN",error:"Invalid authentication token"},401);let d=l.sub,p=await u.users.getUser(d),h={db:pr(),clerkUser:p,user:{id:p.id,email:p.emailAddresses[0]?.emailAddress||"",fullName:`${p.firstName||""} ${p.lastName||""}`.trim()||null,role:p.publicMetadata?.role,metadata:p.publicMetadata}};t.set("auth",h),L.info("Authentication successful",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userId:p.id}),await e()}catch(a){return L.error("Authentication error",{error:a instanceof Error?a.message:"Unknown error",ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_ERROR",error:"Authentication failed"},500)}}),iH=qp(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null;if(!n){await e();return}try{let{secretKey:o}=A_(),i=e$(),a=await P_(n,{secretKey:o});if(!a?.sub){await e();return}let u=a.sub,l=await i.users.getUser(u),p={db:pr(),clerkUser:l,user:{id:l.id,email:l.emailAddresses[0]?.emailAddress||"",fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||null,role:l.publicMetadata?.role,metadata:l.publicMetadata}};t.set("auth",p),await e()}catch{await e()}});function r$(t){let{windowMs:e,max:r,message:n="Too many requests"}=t,o=new Map;return qp(async(i,a)=>{let l=i.get("auth")?.user.id||i.req.header("X-Forwarded-For")||i.req.header("X-Real-IP")||"unknown",d=Date.now(),p=o.get(l);if(!p||d>p.resetTime)o.set(l,{count:1,resetTime:d+e});else if(p.count++,p.count>r){let h=Math.ceil((p.resetTime-d)/1e3);return i.json({code:"RATE_LIMIT_EXCEEDED",details:{limit:r,windowMs:e,retryAfter:h},error:n},429)}let f=o.get(l);f&&(i.header("X-RateLimit-Limit",r.toString()),i.header("X-RateLimit-Remaining",Math.max(0,r-f.count).toString()),i.header("X-RateLimit-Reset",new Date(f.resetTime).toISOString())),await a()})}s(r$,"clerkUserRateLimitMiddleware");var pe=t$;var xe=r$;var C_=new Ce;C_.get("/",pe,async t=>{let e=t.get("requestId");try{let{user:r}=t.get("auth"),n=r.id;if(!n)return t.json({code:"UNAUTHORIZED",error:"User not authenticated"},401);let o=t.req.query("refresh")==="true",a=await new vp(n).getContext(o);return L.info("Financial context retrieved",{forceRefresh:o,requestId:e,userId:n}),t.json({context:a,formatted:{alertsBlock:AC(a.pendingAlerts),financialBlock:PC(a)},meta:{requestId:e,retrievedAt:new Date().toISOString()}})}catch(r){return L.error("Error fetching financial context",{error:r instanceof Error?r.message:"Unknown error",requestId:e}),t.json({code:"CONTEXT_ERROR",error:r instanceof Error?r.message:"Failed to fetch context"},500)}});var sH=/^[\w!#$%&'*.^`|~+-]+$/,aH=/^[ !#-:<-[\]-~]*$/,O_=s((t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),n={};for(let o of r){o=o.trim();let i=o.indexOf("=");if(i===-1)continue;let a=o.substring(0,i).trim();if(e&&e!==a||!sH.test(a))continue;let u=o.substring(i+1).trim();if(u.startsWith('"')&&u.endsWith('"')&&(u=u.slice(1,-1)),aH.test(u)&&(n[a]=u.indexOf("%")!==-1?ds(u,tc):u,e))break}return n},"parse");var n$=s((t,e,r)=>{let n=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!n)return;let i=e;return r==="secure"?i="__Secure-"+e:r==="host"&&(i="__Host-"+e),O_(n,i)[i]}return n?O_(n):{}},"getCookie");var o$=s((t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData(),"bufferToFormData");var cH=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,uH=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,lH=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,$_=s((t,e)=>async(r,n)=>{let o={},i=r.req.header("Content-Type");switch(t){case"json":if(!i||!cH.test(i))break;try{o=await r.req.json()}catch{let u="Malformed JSON in request body";throw new md(400,{message:u})}break;case"form":{if(!i||!(uH.test(i)||lH.test(i)))break;let u;if(r.req.bodyCache.formData)u=await r.req.bodyCache.formData;else try{let d=await r.req.arrayBuffer();u=await o$(d,i),r.req.bodyCache.formData=u}catch(d){let p="Malformed FormData request.";throw p+=d instanceof Error?` ${d.message}`:` ${String(d)}`,new md(400,{message:p})}let l={};u.forEach((d,p)=>{p.endsWith("[]")?(l[p]??=[]).push(d):Array.isArray(l[p])?l[p].push(d):p in l?l[p]=[l[p],d]:l[p]=d}),o=l;break}case"query":o=Object.fromEntries(Object.entries(r.req.queries()).map(([u,l])=>l.length===1?[u,l[0]]:[u,l]));break;case"param":o=r.req.param();break;case"header":o=r.req.header();break;case"cookie":o=n$(r);break}let a=await e(o,r);return a instanceof Response?a:(r.req.addValidatedData(t,a),await n())},"validator");function dH(t,e,r,n){return $_(t,async(o,i)=>{let a=o;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let l=Object.keys("in"in e?e.in.shape:e.shape),d=Object.fromEntries(l.map(p=>[p.toLowerCase(),p]));a=Object.fromEntries(Object.entries(o).map(([p,f])=>[d[p]||p,f]))}let u=n&&n.validationFunction?await n.validationFunction(e,a):await e.safeParseAsync(a);if(r){let l=await r({data:a,...u,target:t},i);if(l){if(l instanceof Response)return l;if("response"in l)return l.response}}return u.success?u.data:i.json(u,400)})}s(dH,"zValidatorFunction");var Be=dH;var c={};en(c,{$brand:()=>Fp,$input:()=>Fx,$output:()=>qx,NEVER:()=>R_,TimePrecision:()=>Gx,ZodAny:()=>G$,ZodArray:()=>W$,ZodBase64:()=>uT,ZodBase64URL:()=>lT,ZodBigInt:()=>Du,ZodBigIntFormat:()=>mT,ZodBoolean:()=>Nu,ZodCIDRv4:()=>aT,ZodCIDRv6:()=>cT,ZodCUID:()=>eT,ZodCUID2:()=>tT,ZodCatch:()=>hR,ZodCodec:()=>ST,ZodCustom:()=>Zm,ZodCustomStringFormat:()=>$u,ZodDate:()=>Vm,ZodDefault:()=>uR,ZodDiscriminatedUnion:()=>Q$,ZodE164:()=>dT,ZodEmail:()=>QS,ZodEmoji:()=>XS,ZodEnum:()=>Cu,ZodError:()=>F8,ZodFile:()=>sR,ZodFirstPartyTypeKind:()=>Le,ZodFunction:()=>TR,ZodGUID:()=>zm,ZodIPv4:()=>iT,ZodIPv6:()=>sT,ZodISODate:()=>Dm,ZodISODateTime:()=>Nm,ZodISODuration:()=>Mm,ZodISOTime:()=>jm,ZodIntersection:()=>X$,ZodIssueCode:()=>rZ,ZodJWT:()=>pT,ZodKSUID:()=>oT,ZodLazy:()=>wR,ZodLiteral:()=>iR,ZodMAC:()=>z$,ZodMap:()=>nR,ZodNaN:()=>yR,ZodNanoID:()=>YS,ZodNever:()=>J$,ZodNonOptional:()=>wT,ZodNull:()=>V$,ZodNullable:()=>cR,ZodNumber:()=>Ru,ZodNumberFormat:()=>ia,ZodObject:()=>Gm,ZodOptional:()=>bT,ZodPipe:()=>xT,ZodPrefault:()=>dR,ZodPromise:()=>SR,ZodReadonly:()=>vR,ZodRealError:()=>Wr,ZodRecord:()=>yT,ZodSet:()=>oR,ZodString:()=>Ou,ZodStringFormat:()=>kt,ZodSuccess:()=>fR,ZodSymbol:()=>F$,ZodTemplateLiteral:()=>bR,ZodTransform:()=>aR,ZodTuple:()=>eR,ZodType:()=>et,ZodULID:()=>rT,ZodURL:()=>Bm,ZodUUID:()=>Io,ZodUndefined:()=>B$,ZodUnion:()=>hT,ZodUnknown:()=>Z$,ZodVoid:()=>K$,ZodXID:()=>nT,_ZodString:()=>WS,_default:()=>lR,_function:()=>ZG,any:()=>kG,array:()=>Hm,base64:()=>lG,base64url:()=>dG,bigint:()=>xG,boolean:()=>q$,catch:()=>gR,check:()=>JG,cidrv4:()=>cG,cidrv6:()=>uG,clone:()=>Rr,codec:()=>VG,coerce:()=>TT,config:()=>or,core:()=>Eo,cuid:()=>eG,cuid2:()=>tG,custom:()=>KG,date:()=>AG,decode:()=>qS,decodeAsync:()=>BS,describe:()=>WG,discriminatedUnion:()=>NG,e164:()=>pG,email:()=>V8,emoji:()=>X8,encode:()=>LS,encodeAsync:()=>FS,endsWith:()=>bu,enum:()=>vT,file:()=>LG,flattenError:()=>Yc,float32:()=>vG,float64:()=>_G,formatError:()=>eu,function:()=>ZG,getErrorMap:()=>oZ,globalRegistry:()=>Nr,gt:()=>To,gte:()=>Kr,guid:()=>H8,hash:()=>yG,hex:()=>gG,hostname:()=>hG,httpUrl:()=>Q8,includes:()=>vu,instanceof:()=>XG,int:()=>KS,int32:()=>bG,int64:()=>SG,intersection:()=>Y$,ipv4:()=>iG,ipv6:()=>aG,iso:()=>Um,json:()=>eZ,jwt:()=>mG,keyof:()=>CG,ksuid:()=>oG,lazy:()=>xR,length:()=>ra,literal:()=>zG,locales:()=>du,looseObject:()=>RG,lowercase:()=>gu,lt:()=>So,lte:()=>gn,mac:()=>sG,map:()=>jG,maxLength:()=>ta,maxSize:()=>ea,meta:()=>QG,mime:()=>wu,minLength:()=>mi,minSize:()=>Hi,multipleOf:()=>Vi,nan:()=>BG,nanoid:()=>Y8,nativeEnum:()=>UG,negative:()=>wS,never:()=>fT,nonnegative:()=>SS,nonoptional:()=>mR,nonpositive:()=>xS,normalize:()=>xu,null:()=>H$,nullable:()=>qm,nullish:()=>qG,number:()=>L$,object:()=>OG,optional:()=>Lm,overwrite:()=>Gn,parse:()=>MS,parseAsync:()=>US,partialRecord:()=>DG,pipe:()=>Fm,positive:()=>bS,prefault:()=>pR,preprocess:()=>tZ,prettifyError:()=>H_,promise:()=>GG,property:()=>TS,readonly:()=>_R,record:()=>rR,refine:()=>ER,regex:()=>hu,regexes:()=>hn,registry:()=>mm,safeDecode:()=>HS,safeDecodeAsync:()=>ZS,safeEncode:()=>VS,safeEncodeAsync:()=>GS,safeParse:()=>zS,safeParseAsync:()=>Au,set:()=>MG,setErrorMap:()=>nZ,size:()=>fu,slugify:()=>Iu,startsWith:()=>_u,strictObject:()=>$G,string:()=>JS,stringFormat:()=>fG,stringbool:()=>YG,success:()=>FG,superRefine:()=>IR,symbol:()=>EG,templateLiteral:()=>HG,toJSONSchema:()=>Pu,toLowerCase:()=>Tu,toUpperCase:()=>Eu,transform:()=>_T,treeifyError:()=>V_,trim:()=>Su,tuple:()=>tR,uint32:()=>wG,uint64:()=>TG,ulid:()=>rG,undefined:()=>IG,union:()=>gT,unknown:()=>oa,uppercase:()=>yu,url:()=>W8,util:()=>le,uuid:()=>G8,uuidv4:()=>Z8,uuidv6:()=>J8,uuidv7:()=>K8,void:()=>PG,xid:()=>nG});var Eo={};en(Eo,{$ZodAny:()=>bw,$ZodArray:()=>Ew,$ZodAsyncError:()=>In,$ZodBase64:()=>lw,$ZodBase64URL:()=>dw,$ZodBigInt:()=>lm,$ZodBigIntFormat:()=>gw,$ZodBoolean:()=>ou,$ZodCIDRv4:()=>aw,$ZodCIDRv6:()=>cw,$ZodCUID:()=>Kb,$ZodCUID2:()=>Wb,$ZodCatch:()=>Fw,$ZodCheck:()=>It,$ZodCheckBigIntFormat:()=>Eb,$ZodCheckEndsWith:()=>Mb,$ZodCheckGreaterThan:()=>nm,$ZodCheckIncludes:()=>Db,$ZodCheckLengthEquals:()=>Ob,$ZodCheckLessThan:()=>rm,$ZodCheckLowerCase:()=>Rb,$ZodCheckMaxLength:()=>Ab,$ZodCheckMaxSize:()=>Ib,$ZodCheckMimeType:()=>zb,$ZodCheckMinLength:()=>Cb,$ZodCheckMinSize:()=>kb,$ZodCheckMultipleOf:()=>Sb,$ZodCheckNumberFormat:()=>Tb,$ZodCheckOverwrite:()=>Lb,$ZodCheckProperty:()=>Ub,$ZodCheckRegex:()=>$b,$ZodCheckSizeEquals:()=>Pb,$ZodCheckStartsWith:()=>jb,$ZodCheckStringFormat:()=>Xs,$ZodCheckUpperCase:()=>Nb,$ZodCodec:()=>iu,$ZodCustom:()=>Ww,$ZodCustomStringFormat:()=>fw,$ZodDate:()=>Tw,$ZodDefault:()=>Uw,$ZodDiscriminatedUnion:()=>kw,$ZodE164:()=>pw,$ZodEmail:()=>Hb,$ZodEmoji:()=>Zb,$ZodEncodeError:()=>ai,$ZodEnum:()=>$w,$ZodError:()=>Xc,$ZodFile:()=>Nw,$ZodFunction:()=>Zw,$ZodGUID:()=>Bb,$ZodIPv4:()=>ow,$ZodIPv6:()=>iw,$ZodISODate:()=>tw,$ZodISODateTime:()=>ew,$ZodISODuration:()=>nw,$ZodISOTime:()=>rw,$ZodIntersection:()=>Pw,$ZodJWT:()=>mw,$ZodKSUID:()=>Yb,$ZodLazy:()=>Kw,$ZodLiteral:()=>Rw,$ZodMAC:()=>sw,$ZodMap:()=>Cw,$ZodNaN:()=>Bw,$ZodNanoID:()=>Jb,$ZodNever:()=>xw,$ZodNonOptional:()=>Lw,$ZodNull:()=>_w,$ZodNullable:()=>Mw,$ZodNumber:()=>um,$ZodNumberFormat:()=>hw,$ZodObject:()=>C$,$ZodObjectJIT:()=>Iw,$ZodOptional:()=>jw,$ZodPipe:()=>Vw,$ZodPrefault:()=>zw,$ZodPromise:()=>Jw,$ZodReadonly:()=>Hw,$ZodRealError:()=>Jr,$ZodRecord:()=>Aw,$ZodRegistry:()=>Ys,$ZodSet:()=>Ow,$ZodString:()=>Bi,$ZodStringFormat:()=>St,$ZodSuccess:()=>qw,$ZodSymbol:()=>yw,$ZodTemplateLiteral:()=>Gw,$ZodTransform:()=>Dw,$ZodTuple:()=>pm,$ZodType:()=>Ve,$ZodULID:()=>Qb,$ZodURL:()=>Gb,$ZodUUID:()=>Vb,$ZodUndefined:()=>vw,$ZodUnion:()=>dm,$ZodUnknown:()=>ww,$ZodVoid:()=>Sw,$ZodXID:()=>Xb,$brand:()=>Fp,$constructor:()=>F,$input:()=>Fx,$output:()=>qx,Doc:()=>nu,JSONSchema:()=>j$,JSONSchemaGenerator:()=>ku,NEVER:()=>R_,TimePrecision:()=>Gx,_any:()=>mS,_array:()=>ES,_base64:()=>Cm,_base64url:()=>Om,_bigint:()=>sS,_boolean:()=>oS,_catch:()=>D8,_check:()=>D$,_cidrv4:()=>Pm,_cidrv6:()=>Am,_coercedBigint:()=>aS,_coercedBoolean:()=>iS,_coercedDate:()=>vS,_coercedNumber:()=>Xx,_coercedString:()=>Vx,_cuid:()=>wm,_cuid2:()=>xm,_custom:()=>kS,_date:()=>yS,_decode:()=>Jp,_decodeAsync:()=>Wp,_default:()=>$8,_discriminatedUnion:()=>b8,_e164:()=>$m,_email:()=>fm,_emoji:()=>_m,_encode:()=>Zp,_encodeAsync:()=>Kp,_endsWith:()=>bu,_enum:()=>I8,_file:()=>IS,_float32:()=>eS,_float64:()=>tS,_gt:()=>To,_gte:()=>Kr,_guid:()=>pu,_includes:()=>vu,_int:()=>Yx,_int32:()=>rS,_int64:()=>cS,_intersection:()=>w8,_ipv4:()=>Im,_ipv6:()=>km,_isoDate:()=>Jx,_isoDateTime:()=>Zx,_isoDuration:()=>Wx,_isoTime:()=>Kx,_jwt:()=>Rm,_ksuid:()=>Em,_lazy:()=>z8,_length:()=>ra,_literal:()=>P8,_lowercase:()=>gu,_lt:()=>So,_lte:()=>gn,_mac:()=>Hx,_map:()=>T8,_max:()=>gn,_maxLength:()=>ta,_maxSize:()=>ea,_mime:()=>wu,_min:()=>Kr,_minLength:()=>mi,_minSize:()=>Hi,_multipleOf:()=>Vi,_nan:()=>_S,_nanoid:()=>bm,_nativeEnum:()=>k8,_negative:()=>wS,_never:()=>hS,_nonnegative:()=>SS,_nonoptional:()=>R8,_nonpositive:()=>xS,_normalize:()=>xu,_null:()=>pS,_nullable:()=>O8,_number:()=>Qx,_optional:()=>C8,_overwrite:()=>Gn,_parse:()=>Js,_parseAsync:()=>Ks,_pipe:()=>j8,_positive:()=>bS,_promise:()=>L8,_property:()=>TS,_readonly:()=>M8,_record:()=>S8,_refine:()=>PS,_regex:()=>hu,_safeDecode:()=>Xp,_safeDecodeAsync:()=>em,_safeEncode:()=>Qp,_safeEncodeAsync:()=>Yp,_safeParse:()=>Ws,_safeParseAsync:()=>Qs,_set:()=>E8,_size:()=>fu,_slugify:()=>Iu,_startsWith:()=>_u,_string:()=>Bx,_stringFormat:()=>na,_stringbool:()=>$S,_success:()=>N8,_superRefine:()=>AS,_symbol:()=>lS,_templateLiteral:()=>U8,_toLowerCase:()=>Tu,_toUpperCase:()=>Eu,_transform:()=>A8,_trim:()=>Su,_tuple:()=>x8,_uint32:()=>nS,_uint64:()=>uS,_ulid:()=>Sm,_undefined:()=>dS,_union:()=>_8,_unknown:()=>fS,_uppercase:()=>yu,_url:()=>mu,_uuid:()=>hm,_uuidv4:()=>gm,_uuidv6:()=>ym,_uuidv7:()=>vm,_void:()=>gS,_xid:()=>Tm,clone:()=>Rr,config:()=>or,decode:()=>zH,decodeAsync:()=>qH,describe:()=>CS,encode:()=>UH,encodeAsync:()=>LH,flattenError:()=>Yc,formatError:()=>eu,globalConfig:()=>Hc,globalRegistry:()=>Nr,isValidBase64:()=>uw,isValidBase64URL:()=>I$,isValidJWT:()=>k$,locales:()=>du,meta:()=>OS,parse:()=>Hp,parseAsync:()=>Gp,prettifyError:()=>H_,regexes:()=>hn,registry:()=>mm,safeDecode:()=>BH,safeDecodeAsync:()=>HH,safeEncode:()=>FH,safeEncodeAsync:()=>VH,safeParse:()=>G_,safeParseAsync:()=>Z_,toDotPath:()=>u$,toJSONSchema:()=>Pu,treeifyError:()=>V_,util:()=>le,version:()=>qb});var R_=Object.freeze({status:"aborted"});function F(t,e,r){function n(u,l){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,l);let d=a.prototype,p=Object.keys(d);for(let f=0;f<p.length;f++){let h=p[f];h in u||(u[h]=d[h].bind(u))}}s(n,"init");let o=r?.Parent??Object;class i extends o{static{s(this,"Definition")}}Object.defineProperty(i,"name",{value:t});function a(u){var l;let d=r?.Parent?new i:this;n(d,u),(l=d._zod).deferred??(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return s(a,"_"),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s(u=>r?.Parent&&u instanceof r.Parent?!0:u?._zod?.traits?.has(t),"value")}),Object.defineProperty(a,"name",{value:t}),a}s(F,"$constructor");var Fp=Symbol("zod_brand"),In=class extends Error{static{s(this,"$ZodAsyncError")}constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},ai=class extends Error{static{s(this,"$ZodEncodeError")}constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},Hc={};function or(t){return t&&Object.assign(Hc,t),Hc}s(or,"config");var le={};en(le,{BIGINT_FORMAT_RANGES:()=>B_,Class:()=>D_,NUMBER_FORMAT_RANGES:()=>F_,aborted:()=>pi,allowsEval:()=>U_,assert:()=>gH,assertEqual:()=>pH,assertIs:()=>fH,assertNever:()=>hH,assertNotEqual:()=>mH,assignProp:()=>ui,base64ToUint8Array:()=>s$,base64urlToUint8Array:()=>RH,cached:()=>Gs,captureStackTrace:()=>Vp,cleanEnum:()=>$H,cleanRegex:()=>Jc,clone:()=>Rr,cloneDef:()=>vH,createTransparentProxy:()=>TH,defineLazy:()=>st,esc:()=>Bp,escapeRegex:()=>fn,extend:()=>kH,finalizeIssue:()=>nn,floatSafeRemainder:()=>j_,getElementAtPath:()=>_H,getEnumValues:()=>Zc,getLengthableOrigin:()=>Qc,getParsedType:()=>SH,getSizableOrigin:()=>Wc,hexToUint8Array:()=>DH,isObject:()=>qi,isPlainObject:()=>di,issue:()=>Zs,joinValues:()=>W,jsonStringifyReplacer:()=>Hs,merge:()=>AH,mergeDefs:()=>li,normalizeParams:()=>ue,nullish:()=>ci,numKeys:()=>xH,objectClone:()=>yH,omit:()=>IH,optionalKeys:()=>q_,partial:()=>CH,pick:()=>EH,prefixIssues:()=>rn,primitiveTypes:()=>L_,promiseAllObject:()=>bH,propertyKeyTypes:()=>Kc,randomString:()=>wH,required:()=>OH,safeExtend:()=>PH,shallowClone:()=>z_,slugify:()=>M_,stringifyPrimitive:()=>ae,uint8ArrayToBase64:()=>a$,uint8ArrayToBase64url:()=>NH,uint8ArrayToHex:()=>jH,unwrapMessage:()=>Gc});function pH(t){return t}s(pH,"assertEqual");function mH(t){return t}s(mH,"assertNotEqual");function fH(t){}s(fH,"assertIs");function hH(t){throw new Error}s(hH,"assertNever");function gH(t){}s(gH,"assert");function Zc(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,o])=>e.indexOf(+n)===-1).map(([n,o])=>o)}s(Zc,"getEnumValues");function W(t,e="|"){return t.map(r=>ae(r)).join(e)}s(W,"joinValues");function Hs(t,e){return typeof e=="bigint"?e.toString():e}s(Hs,"jsonStringifyReplacer");function Gs(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}s(Gs,"cached");function ci(t){return t==null}s(ci,"nullish");function Jc(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}s(Jc,"cleanRegex");function j_(t,e){let r=(t.toString().split(".")[1]||"").length,n=e.toString(),o=(n.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(n)){let l=n.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}let i=r>o?r:o,a=Number.parseInt(t.toFixed(i).replace(".","")),u=Number.parseInt(e.toFixed(i).replace(".",""));return a%u/10**i}s(j_,"floatSafeRemainder");var i$=Symbol("evaluating");function st(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==i$)return n===void 0&&(n=i$,n=r()),n},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}s(st,"defineLazy");function yH(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}s(yH,"objectClone");function ui(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}s(ui,"assignProp");function li(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}s(li,"mergeDefs");function vH(t){return li(t._zod.def)}s(vH,"cloneDef");function _H(t,e){return e?e.reduce((r,n)=>r?.[n],t):t}s(_H,"getElementAtPath");function bH(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let o={};for(let i=0;i<e.length;i++)o[e[i]]=n[i];return o})}s(bH,"promiseAllObject");function wH(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}s(wH,"randomString");function Bp(t){return JSON.stringify(t)}s(Bp,"esc");function M_(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}s(M_,"slugify");var Vp="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function qi(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}s(qi,"isObject");var U_=Gs(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function di(t){if(qi(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(qi(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}s(di,"isPlainObject");function z_(t){return di(t)?{...t}:Array.isArray(t)?[...t]:t}s(z_,"shallowClone");function xH(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}s(xH,"numKeys");var SH=s(t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},"getParsedType"),Kc=new Set(["string","number","symbol"]),L_=new Set(["string","number","bigint","boolean","symbol","undefined"]);function fn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(fn,"escapeRegex");function Rr(t,e,r){let n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}s(Rr,"clone");function ue(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:s(()=>e,"error")};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:s(()=>e.error,"error")}:e}s(ue,"normalizeParams");function TH(t){let e;return new Proxy({},{get(r,n,o){return e??(e=t()),Reflect.get(e,n,o)},set(r,n,o,i){return e??(e=t()),Reflect.set(e,n,o,i)},has(r,n){return e??(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e??(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,o){return e??(e=t()),Reflect.defineProperty(e,n,o)}})}s(TH,"createTransparentProxy");function ae(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}s(ae,"stringifyPrimitive");function q_(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}s(q_,"optionalKeys");var F_={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},B_={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function EH(t,e){let r=t._zod.def,n=li(t._zod.def,{get shape(){let o={};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(o[i]=r.shape[i])}return ui(this,"shape",o),o},checks:[]});return Rr(t,n)}s(EH,"pick");function IH(t,e){let r=t._zod.def,n=li(t._zod.def,{get shape(){let o={...t._zod.def.shape};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete o[i]}return ui(this,"shape",o),o},checks:[]});return Rr(t,n)}s(IH,"omit");function kH(t,e){if(!di(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let o=li(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e};return ui(this,"shape",i),i},checks:[]});return Rr(t,o)}s(kH,"extend");function PH(t,e){if(!di(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return ui(this,"shape",n),n},checks:t._zod.def.checks};return Rr(t,r)}s(PH,"safeExtend");function AH(t,e){let r=li(t._zod.def,{get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return ui(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return Rr(t,r)}s(AH,"merge");function CH(t,e,r){let n=li(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:o[a]}):o[a])}else for(let a in o)i[a]=t?new t({type:"optional",innerType:o[a]}):o[a];return ui(this,"shape",i),i},checks:[]});return Rr(e,n)}s(CH,"partial");function OH(t,e,r){let n=li(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:o[a]}))}else for(let a in o)i[a]=new t({type:"nonoptional",innerType:o[a]});return ui(this,"shape",i),i},checks:[]});return Rr(e,n)}s(OH,"required");function pi(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}s(pi,"aborted");function rn(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}s(rn,"prefixIssues");function Gc(t){return typeof t=="string"?t:t?.message}s(Gc,"unwrapMessage");function nn(t,e,r){let n={...t,path:t.path??[]};if(!t.message){let o=Gc(t.inst?._zod.def?.error?.(t))??Gc(e?.error?.(t))??Gc(r.customError?.(t))??Gc(r.localeError?.(t))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}s(nn,"finalizeIssue");function Wc(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}s(Wc,"getSizableOrigin");function Qc(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}s(Qc,"getLengthableOrigin");function Zs(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}s(Zs,"issue");function $H(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}s($H,"cleanEnum");function s$(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}s(s$,"base64ToUint8Array");function a$(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}s(a$,"uint8ArrayToBase64");function RH(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return s$(e+r)}s(RH,"base64urlToUint8Array");function NH(t){return a$(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}s(NH,"uint8ArrayToBase64url");function DH(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n/2]=Number.parseInt(e.slice(n,n+2),16);return r}s(DH,"hexToUint8Array");function jH(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}s(jH,"uint8ArrayToHex");var D_=class{static{s(this,"Class")}constructor(...e){}};var c$=s((t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Hs,2),Object.defineProperty(t,"toString",{value:s(()=>t.message,"value"),enumerable:!1})},"initializer"),Xc=F("$ZodError",c$),Jr=F("$ZodError",c$,{Parent:Error});function Yc(t,e=r=>r.message){let r={},n=[];for(let o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}s(Yc,"flattenError");function eu(t,e=r=>r.message){let r={_errors:[]},n=s(o=>{for(let i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let a=r,u=0;for(;u<i.path.length;){let l=i.path[u];u===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(i))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}},"processError");return n(t),r}s(eu,"formatError");function V_(t,e=r=>r.message){let r={errors:[]},n=s((o,i=[])=>{var a,u;for(let l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>n({issues:d},l.path));else if(l.code==="invalid_key")n({issues:l.issues},l.path);else if(l.code==="invalid_element")n({issues:l.issues},l.path);else{let d=[...i,...l.path];if(d.length===0){r.errors.push(e(l));continue}let p=r,f=0;for(;f<d.length;){let h=d[f],y=f===d.length-1;typeof h=="string"?(p.properties??(p.properties={}),(a=p.properties)[h]??(a[h]={errors:[]}),p=p.properties[h]):(p.items??(p.items=[]),(u=p.items)[h]??(u[h]={errors:[]}),p=p.items[h]),y&&p.errors.push(e(l)),f++}}},"processError");return n(t),r}s(V_,"treeifyError");function u$(t){let e=[],r=t.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}s(u$,"toDotPath");function H_(t){let e=[],r=[...t.issues].sort((n,o)=>(n.path??[]).length-(o.path??[]).length);for(let n of r)e.push(`\u2716 ${n.message}`),n.path?.length&&e.push(`  \u2192 at ${u$(n.path)}`);return e.join(`
`)}s(H_,"prettifyError");var Js=s(t=>(e,r,n,o)=>{let i=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new In;if(a.issues.length){let u=new(o?.Err??t)(a.issues.map(l=>nn(l,i,or())));throw Vp(u,o?.callee),u}return a.value},"_parse"),Hp=Js(Jr),Ks=s(t=>async(e,r,n,o)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let u=new(o?.Err??t)(a.issues.map(l=>nn(l,i,or())));throw Vp(u,o?.callee),u}return a.value},"_parseAsync"),Gp=Ks(Jr),Ws=s(t=>(e,r,n)=>{let o=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new In;return i.issues.length?{success:!1,error:new(t??Xc)(i.issues.map(a=>nn(a,o,or())))}:{success:!0,data:i.value}},"_safeParse"),G_=Ws(Jr),Qs=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},i=e._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>nn(a,o,or())))}:{success:!0,data:i.value}},"_safeParseAsync"),Z_=Qs(Jr),Zp=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Js(t)(e,r,o)},"_encode"),UH=Zp(Jr),Jp=s(t=>(e,r,n)=>Js(t)(e,r,n),"_decode"),zH=Jp(Jr),Kp=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ks(t)(e,r,o)},"_encodeAsync"),LH=Kp(Jr),Wp=s(t=>async(e,r,n)=>Ks(t)(e,r,n),"_decodeAsync"),qH=Wp(Jr),Qp=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ws(t)(e,r,o)},"_safeEncode"),FH=Qp(Jr),Xp=s(t=>(e,r,n)=>Ws(t)(e,r,n),"_safeDecode"),BH=Xp(Jr),Yp=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Qs(t)(e,r,o)},"_safeEncodeAsync"),VH=Yp(Jr),em=s(t=>async(e,r,n)=>Qs(t)(e,r,n),"_safeDecodeAsync"),HH=em(Jr);var hn={};en(hn,{base64:()=>ub,base64url:()=>tm,bigint:()=>hb,boolean:()=>vb,browserEmail:()=>YH,cidrv4:()=>ab,cidrv6:()=>cb,cuid:()=>J_,cuid2:()=>K_,date:()=>db,datetime:()=>mb,domain:()=>r9,duration:()=>eb,e164:()=>lb,email:()=>rb,emoji:()=>nb,extendedDuration:()=>GH,guid:()=>tb,hex:()=>n9,hostname:()=>t9,html5Email:()=>WH,idnEmail:()=>XH,integer:()=>gb,ipv4:()=>ob,ipv6:()=>ib,ksuid:()=>X_,lowercase:()=>wb,mac:()=>sb,md5_base64:()=>i9,md5_base64url:()=>s9,md5_hex:()=>o9,nanoid:()=>Y_,null:()=>_b,number:()=>yb,rfc5322Email:()=>QH,sha1_base64:()=>c9,sha1_base64url:()=>u9,sha1_hex:()=>a9,sha256_base64:()=>d9,sha256_base64url:()=>p9,sha256_hex:()=>l9,sha384_base64:()=>f9,sha384_base64url:()=>h9,sha384_hex:()=>m9,sha512_base64:()=>y9,sha512_base64url:()=>v9,sha512_hex:()=>g9,string:()=>fb,time:()=>pb,ulid:()=>W_,undefined:()=>bb,unicodeEmail:()=>l$,uppercase:()=>xb,uuid:()=>Fi,uuid4:()=>ZH,uuid6:()=>JH,uuid7:()=>KH,xid:()=>Q_});var J_=/^[cC][^\s-]{8,}$/,K_=/^[0-9a-z]+$/,W_=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Q_=/^[0-9a-vA-V]{20}$/,X_=/^[A-Za-z0-9]{27}$/,Y_=/^[a-zA-Z0-9_-]{21}$/,eb=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,GH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tb=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Fi=s(t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),ZH=Fi(4),JH=Fi(6),KH=Fi(7),rb=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,WH=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,QH=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l$=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,XH=l$,YH=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,e9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function nb(){return new RegExp(e9,"u")}s(nb,"emoji");var ob=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ib=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,sb=s(t=>{let e=fn(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},"mac"),ab=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ub=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,tm=/^[A-Za-z0-9_-]*$/,t9=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,r9=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,lb=/^\+(?:[0-9]){6,14}[0-9]$/,d$="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",db=new RegExp(`^${d$}$`);function p$(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}s(p$,"timeSource");function pb(t){return new RegExp(`^${p$(t)}$`)}s(pb,"time");function mb(t){let e=p$({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${d$}T(?:${n})$`)}s(mb,"datetime");var fb=s(t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},"string"),hb=/^-?\d+n?$/,gb=/^-?\d+$/,yb=/^-?\d+(?:\.\d+)?/,vb=/^(?:true|false)$/i,_b=/^null$/i;var bb=/^undefined$/i;var wb=/^[^A-Z]*$/,xb=/^[^a-z]*$/,n9=/^[0-9a-fA-F]*$/;function tu(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}s(tu,"fixedBase64");function ru(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}s(ru,"fixedBase64url");var o9=/^[0-9a-fA-F]{32}$/,i9=tu(22,"=="),s9=ru(22),a9=/^[0-9a-fA-F]{40}$/,c9=tu(27,"="),u9=ru(27),l9=/^[0-9a-fA-F]{64}$/,d9=tu(43,"="),p9=ru(43),m9=/^[0-9a-fA-F]{96}$/,f9=tu(64,""),h9=ru(64),g9=/^[0-9a-fA-F]{128}$/,y9=tu(86,"=="),v9=ru(86);var It=F("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),f$={number:"number",bigint:"bigint",object:"date"},rm=F("$ZodCheckLessThan",(t,e)=>{It.init(t,e);let r=f$[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),nm=F("$ZodCheckGreaterThan",(t,e)=>{It.init(t,e);let r=f$[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Sb=F("$ZodCheckMultipleOf",(t,e)=>{It.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):j_(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),Tb=F("$ZodCheckNumberFormat",(t,e)=>{It.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),n=r?"int":"number",[o,i]=F_[e.format];t._zod.onattach.push(a=>{let u=a._zod.bag;u.format=e.format,u.minimum=o,u.maximum=i,r&&(u.pattern=gb)}),t._zod.check=a=>{let u=a.value;if(r){if(!Number.isInteger(u)){a.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:u,inst:t});return}if(!Number.isSafeInteger(u)){u>0?a.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):a.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}u<o&&a.issues.push({origin:"number",input:u,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),u>i&&a.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:t})}}),Eb=F("$ZodCheckBigIntFormat",(t,e)=>{It.init(t,e);let[r,n]=B_[e.format];t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,i.minimum=r,i.maximum=n}),t._zod.check=o=>{let i=o.value;i<r&&o.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),i>n&&o.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:t})}}),Ib=F("$ZodCheckMaxSize",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;o.size<=e.maximum||n.issues.push({origin:Wc(o),code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),kb=F("$ZodCheckMinSize",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;o.size>=e.minimum||n.issues.push({origin:Wc(o),code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Pb=F("$ZodCheckSizeEquals",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.size,o.maximum=e.size,o.size=e.size}),t._zod.check=n=>{let o=n.value,i=o.size;if(i===e.size)return;let a=i>e.size;n.issues.push({origin:Wc(o),...a?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Ab=F("$ZodCheckMaxLength",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;if(o.length<=e.maximum)return;let a=Qc(o);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Cb=F("$ZodCheckMinLength",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;if(o.length>=e.minimum)return;let a=Qc(o);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Ob=F("$ZodCheckLengthEquals",(t,e)=>{var r;It.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!ci(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=n=>{let o=n.value,i=o.length;if(i===e.length)return;let a=Qc(o),u=i>e.length;n.issues.push({origin:a,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Xs=F("$ZodCheckStringFormat",(t,e)=>{var r,n;It.init(t,e),t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),$b=F("$ZodCheckRegex",(t,e)=>{Xs.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Rb=F("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=wb),Xs.init(t,e)}),Nb=F("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=xb),Xs.init(t,e)}),Db=F("$ZodCheckIncludes",(t,e)=>{It.init(t,e);let r=fn(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(o=>{let i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),jb=F("$ZodCheckStartsWith",(t,e)=>{It.init(t,e);let r=new RegExp(`^${fn(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),Mb=F("$ZodCheckEndsWith",(t,e)=>{It.init(t,e);let r=new RegExp(`.*${fn(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}});function m$(t,e,r){t.issues.length&&e.issues.push(...rn(r,t.issues))}s(m$,"handleCheckPropertyResult");var Ub=F("$ZodCheckProperty",(t,e)=>{It.init(t,e),t._zod.check=r=>{let n=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(o=>m$(o,r,e.property));m$(n,r,e.property)}}),zb=F("$ZodCheckMimeType",(t,e)=>{It.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),t._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:t,continue:!e.abort})}}),Lb=F("$ZodCheckOverwrite",(t,e)=>{It.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var nu=class{static{s(this,"Doc")}constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(let a of i)this.content.push(a)}compile(){let e=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,o.join(`
`))}};var qb={major:4,minor:1,patch:13};var Ve=F("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=qb;let n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let o of n)for(let i of o._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=s((a,u,l)=>{let d=pi(a),p;for(let f of u){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(d)continue;let h=a.issues.length,y=f._zod.check(a);if(y instanceof Promise&&l?.async===!1)throw new In;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,a.issues.length!==h&&(d||(d=pi(a,h)))});else{if(a.issues.length===h)continue;d||(d=pi(a,h))}}return p?p.then(()=>a):a},"runChecks"),i=s((a,u,l)=>{if(pi(a))return a.aborted=!0,a;let d=o(u,n,l);if(d instanceof Promise){if(l.async===!1)throw new In;return d.then(p=>t._zod.parse(p,l))}return t._zod.parse(d,l)},"handleCanaryResult");t._zod.run=(a,u)=>{if(u.skipChecks)return t._zod.parse(a,u);if(u.direction==="backward"){let d=t._zod.parse({value:a.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(p=>i(p,a,u)):i(d,a,u)}let l=t._zod.parse(a,u);if(l instanceof Promise){if(u.async===!1)throw new In;return l.then(d=>o(d,n,u))}return o(l,n,u)}}t["~standard"]={validate:s(o=>{try{let i=G_(t,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Z_(t,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},"validate"),vendor:"zod",version:1}}),Bi=F("$ZodString",(t,e)=>{Ve.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??fb(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),St=F("$ZodStringFormat",(t,e)=>{Xs.init(t,e),Bi.init(t,e)}),Bb=F("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=tb),St.init(t,e)}),Vb=F("$ZodUUID",(t,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Fi(n))}else e.pattern??(e.pattern=Fi());St.init(t,e)}),Hb=F("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=rb),St.init(t,e)}),Gb=F("$ZodURL",(t,e)=>{St.init(t,e),t._zod.check=r=>{try{let n=r.value.trim(),o=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=o.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Zb=F("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=nb()),St.init(t,e)}),Jb=F("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Y_),St.init(t,e)}),Kb=F("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=J_),St.init(t,e)}),Wb=F("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=K_),St.init(t,e)}),Qb=F("$ZodULID",(t,e)=>{e.pattern??(e.pattern=W_),St.init(t,e)}),Xb=F("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Q_),St.init(t,e)}),Yb=F("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=X_),St.init(t,e)}),ew=F("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=mb(e)),St.init(t,e)}),tw=F("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=db),St.init(t,e)}),rw=F("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=pb(e)),St.init(t,e)}),nw=F("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=eb),St.init(t,e)}),ow=F("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=ob),St.init(t,e),t._zod.bag.format="ipv4"}),iw=F("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=ib),St.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),sw=F("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=sb(e.delimiter)),St.init(t,e),t._zod.bag.format="mac"}),aw=F("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=ab),St.init(t,e)}),cw=F("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=cb),St.init(t,e),t._zod.check=r=>{let n=r.value.split("/");try{if(n.length!==2)throw new Error;let[o,i]=n;if(!i)throw new Error;let a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function uw(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}s(uw,"isValidBase64");var lw=F("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=ub),St.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{uw(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function I$(t){if(!tm.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return uw(r)}s(I$,"isValidBase64URL");var dw=F("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=tm),St.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{I$(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),pw=F("$ZodE164",(t,e)=>{e.pattern??(e.pattern=lb),St.init(t,e)});function k$(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}s(k$,"isValidJWT");var mw=F("$ZodJWT",(t,e)=>{St.init(t,e),t._zod.check=r=>{k$(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),fw=F("$ZodCustomStringFormat",(t,e)=>{St.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),um=F("$ZodNumber",(t,e)=>{Ve.init(t,e),t._zod.pattern=t._zod.bag.pattern??yb,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;let i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...i?{received:i}:{}}),r}}),hw=F("$ZodNumberFormat",(t,e)=>{Tb.init(t,e),um.init(t,e)}),ou=F("$ZodBoolean",(t,e)=>{Ve.init(t,e),t._zod.pattern=vb,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}let o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),r}}),lm=F("$ZodBigInt",(t,e)=>{Ve.init(t,e),t._zod.pattern=hb,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),gw=F("$ZodBigIntFormat",(t,e)=>{Eb.init(t,e),lm.init(t,e)}),yw=F("$ZodSymbol",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:o,inst:t}),r}}),vw=F("$ZodUndefined",(t,e)=>{Ve.init(t,e),t._zod.pattern=bb,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:o,inst:t}),r}}),_w=F("$ZodNull",(t,e)=>{Ve.init(t,e),t._zod.pattern=_b,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),r}}),bw=F("$ZodAny",(t,e)=>{Ve.init(t,e),t._zod.parse=r=>r}),ww=F("$ZodUnknown",(t,e)=>{Ve.init(t,e),t._zod.parse=r=>r}),xw=F("$ZodNever",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),Sw=F("$ZodVoid",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"void",code:"invalid_type",input:o,inst:t}),r}}),Tw=F("$ZodDate",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let o=r.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:t}),r}});function g$(t,e,r){t.issues.length&&e.issues.push(...rn(r,t.issues)),e.value[r]=t.value}s(g$,"handleArrayResult");var Ew=F("$ZodArray",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);let i=[];for(let a=0;a<o.length;a++){let u=o[a],l=e.element._zod.run({value:u,issues:[]},n);l instanceof Promise?i.push(l.then(d=>g$(d,r,a))):g$(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function cm(t,e,r,n){t.issues.length&&e.issues.push(...rn(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}s(cm,"handlePropertyResult");function P$(t){let e=Object.keys(t.shape);for(let n of e)if(!t.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let r=q_(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}s(P$,"normalizeDef");function A$(t,e,r,n,o,i){let a=[],u=o.keySet,l=o.catchall._zod,d=l.def.type;for(let p in e){if(u.has(p))continue;if(d==="never"){a.push(p);continue}let f=l.run({value:e[p],issues:[]},n);f instanceof Promise?t.push(f.then(h=>cm(h,r,p,e))):cm(f,r,p,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}s(A$,"handleCatchall");var C$=F("$ZodObject",(t,e)=>{if(Ve.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let u=e.shape;Object.defineProperty(e,"shape",{get:s(()=>{let l={...u};return Object.defineProperty(e,"shape",{value:l}),l},"get")})}let n=Gs(()=>P$(e));st(t._zod,"propValues",()=>{let u=e.shape,l={};for(let d in u){let p=u[d]._zod;if(p.values){l[d]??(l[d]=new Set);for(let f of p.values)l[d].add(f)}}return l});let o=qi,i=e.catchall,a;t._zod.parse=(u,l)=>{a??(a=n.value);let d=u.value;if(!o(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),u;u.value={};let p=[],f=a.shape;for(let h of a.keys){let g=f[h]._zod.run({value:d[h],issues:[]},l);g instanceof Promise?p.push(g.then(m=>cm(m,u,h,d))):cm(g,u,h,d)}return i?A$(p,d,u,l,n.value,t):p.length?Promise.all(p).then(()=>u):u}}),Iw=F("$ZodObjectJIT",(t,e)=>{C$.init(t,e);let r=t._zod.parse,n=Gs(()=>P$(e)),o=s(h=>{let y=new nu(["shape","payload","ctx"]),g=n.value,m=s(x=>{let k=Bp(x);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`},"parseStr");y.write("const input = payload.value;");let _=Object.create(null),w=0;for(let x of g.keys)_[x]=`key_${w++}`;y.write("const newResult = {};");for(let x of g.keys){let k=_[x],R=Bp(x);y.write(`const ${k} = ${m(x)};`),y.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${k}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");let b=y.compile();return(x,k)=>b(h,x,k)},"generateFastpass"),i,a=qi,u=!Hc.jitless,d=u&&U_.value,p=e.catchall,f;t._zod.parse=(h,y)=>{f??(f=n.value);let g=h.value;return a(g)?u&&d&&y?.async===!1&&y.jitless!==!0?(i||(i=o(e.shape)),h=i(h,y),p?A$([],g,h,y,f,t):h):r(h,y):(h.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),h)}});function y$(t,e,r,n){for(let i of t)if(i.issues.length===0)return e.value=i.value,e;let o=t.filter(i=>!pi(i));return o.length===1?(e.value=o[0].value,o[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>nn(a,n,or())))}),e)}s(y$,"handleUnionResults");var dm=F("$ZodUnion",(t,e)=>{Ve.init(t,e),st(t._zod,"optin",()=>e.options.some(o=>o._zod.optin==="optional")?"optional":void 0),st(t._zod,"optout",()=>e.options.some(o=>o._zod.optout==="optional")?"optional":void 0),st(t._zod,"values",()=>{if(e.options.every(o=>o._zod.values))return new Set(e.options.flatMap(o=>Array.from(o._zod.values)))}),st(t._zod,"pattern",()=>{if(e.options.every(o=>o._zod.pattern)){let o=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>Jc(i.source)).join("|")})$`)}});let r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(o,i)=>{if(r)return n(o,i);let a=!1,u=[];for(let l of e.options){let d=l._zod.run({value:o.value,issues:[]},i);if(d instanceof Promise)u.push(d),a=!0;else{if(d.issues.length===0)return d;u.push(d)}}return a?Promise.all(u).then(l=>y$(l,o,t,i)):y$(u,o,t,i)}}),kw=F("$ZodDiscriminatedUnion",(t,e)=>{dm.init(t,e);let r=t._zod.parse;st(t._zod,"propValues",()=>{let o={};for(let i of e.options){let a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(let[u,l]of Object.entries(a)){o[u]||(o[u]=new Set);for(let d of l)o[u].add(d)}}return o});let n=Gs(()=>{let o=e.options,i=new Map;for(let a of o){let u=a._zod.propValues?.[e.discriminator];if(!u||u.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(let l of u){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,a)}}return i});t._zod.parse=(o,i)=>{let a=o.value;if(!qi(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),o;let u=n.value.get(a?.[e.discriminator]);return u?u._zod.run(o,i):e.unionFallback?r(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:a,path:[e.discriminator],inst:t}),o)}}),Pw=F("$ZodIntersection",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value,i=e.left._zod.run({value:o,issues:[]},n),a=e.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,d])=>v$(r,l,d)):v$(r,i,a)}});function Fb(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(di(t)&&di(e)){let r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),o={...t,...e};for(let i of n){let a=Fb(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let o=t[n],i=e[n],a=Fb(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}s(Fb,"mergeValues");function v$(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),pi(t))return t;let n=Fb(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}s(v$,"handleIntersectionResults");var pm=F("$ZodTuple",(t,e)=>{Ve.init(t,e);let r=e.items;t._zod.parse=(n,o)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],u=[...r].reverse().findIndex(p=>p._zod.optin!=="optional"),l=u===-1?0:r.length-u;if(!e.rest){let p=i.length>r.length,f=i.length<l-1;if(p||f)return n.issues.push({...p?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:t,origin:"array"}),n}let d=-1;for(let p of r){if(d++,d>=i.length&&d>=l)continue;let f=p._zod.run({value:i[d],issues:[]},o);f instanceof Promise?a.push(f.then(h=>om(h,n,d))):om(f,n,d)}if(e.rest){let p=i.slice(r.length);for(let f of p){d++;let h=e.rest._zod.run({value:f,issues:[]},o);h instanceof Promise?a.push(h.then(y=>om(y,n,d))):om(h,n,d)}}return a.length?Promise.all(a).then(()=>n):n}});function om(t,e,r){t.issues.length&&e.issues.push(...rn(r,t.issues)),e.value[r]=t.value}s(om,"handleTupleResult");var Aw=F("$ZodRecord",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!di(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),r;let i=[],a=e.keyType._zod.values;if(a){r.value={};let u=new Set;for(let d of a)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){u.add(typeof d=="number"?d.toString():d);let p=e.valueType._zod.run({value:o[d],issues:[]},n);p instanceof Promise?i.push(p.then(f=>{f.issues.length&&r.issues.push(...rn(d,f.issues)),r.value[d]=f.value})):(p.issues.length&&r.issues.push(...rn(d,p.issues)),r.value[d]=p.value)}let l;for(let d in o)u.has(d)||(l=l??[],l.push(d));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:l})}else{r.value={};for(let u of Reflect.ownKeys(o)){if(u==="__proto__")continue;let l=e.keyType._zod.run({value:u,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(p=>nn(p,n,or())),input:u,path:[u],inst:t}),r.value[l.value]=l.value;continue}let d=e.valueType._zod.run({value:o[u],issues:[]},n);d instanceof Promise?i.push(d.then(p=>{p.issues.length&&r.issues.push(...rn(u,p.issues)),r.value[l.value]=p.value})):(d.issues.length&&r.issues.push(...rn(u,d.issues)),r.value[l.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Cw=F("$ZodMap",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:o,inst:t}),r;let i=[];r.value=new Map;for(let[a,u]of o){let l=e.keyType._zod.run({value:a,issues:[]},n),d=e.valueType._zod.run({value:u,issues:[]},n);l instanceof Promise||d instanceof Promise?i.push(Promise.all([l,d]).then(([p,f])=>{_$(p,f,r,a,o,t,n)})):_$(l,d,r,a,o,t,n)}return i.length?Promise.all(i).then(()=>r):r}});function _$(t,e,r,n,o,i,a){t.issues.length&&(Kc.has(typeof n)?r.issues.push(...rn(n,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:o,inst:i,issues:t.issues.map(u=>nn(u,a,or()))})),e.issues.length&&(Kc.has(typeof n)?r.issues.push(...rn(n,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:o,inst:i,key:n,issues:e.issues.map(u=>nn(u,a,or()))})),r.value.set(t.value,e.value)}s(_$,"handleMapResult");var Ow=F("$ZodSet",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Set))return r.issues.push({input:o,inst:t,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let a of o){let u=e.valueType._zod.run({value:a,issues:[]},n);u instanceof Promise?i.push(u.then(l=>b$(l,r))):b$(u,r)}return i.length?Promise.all(i).then(()=>r):r}});function b$(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}s(b$,"handleSetResult");var $w=F("$ZodEnum",(t,e)=>{Ve.init(t,e);let r=Zc(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(o=>Kc.has(typeof o)).map(o=>typeof o=="string"?fn(o):o.toString()).join("|")})$`),t._zod.parse=(o,i)=>{let a=o.value;return n.has(a)||o.issues.push({code:"invalid_value",values:r,input:a,inst:t}),o}}),Rw=F("$ZodLiteral",(t,e)=>{if(Ve.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?fn(n):n?fn(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,o)=>{let i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),Nw=F("$ZodFile",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return o instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:o,inst:t}),r}}),Dw=F("$ZodTransform",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new ai(t.constructor.name);let o=e.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new In;return r.value=o,r}});function w$(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}s(w$,"handleOptionalResult");var jw=F("$ZodOptional",(t,e)=>{Ve.init(t,e),t._zod.optin="optional",t._zod.optout="optional",st(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),st(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${Jc(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>w$(i,r.value)):w$(o,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),Mw=F("$ZodNullable",(t,e)=>{Ve.init(t,e),st(t._zod,"optin",()=>e.innerType._zod.optin),st(t._zod,"optout",()=>e.innerType._zod.optout),st(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${Jc(r.source)}|null)$`):void 0}),st(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),Uw=F("$ZodDefault",(t,e)=>{Ve.init(t,e),t._zod.optin="optional",st(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>x$(i,e)):x$(o,e)}});function x$(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}s(x$,"handleDefaultResult");var zw=F("$ZodPrefault",(t,e)=>{Ve.init(t,e),t._zod.optin="optional",st(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),Lw=F("$ZodNonOptional",(t,e)=>{Ve.init(t,e),st(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>S$(i,t)):S$(o,t)}});function S$(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}s(S$,"handleNonOptionalResult");var qw=F("$ZodSuccess",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new ai("ZodSuccess");let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.issues.length===0,r)):(r.value=o.issues.length===0,r)}}),Fw=F("$ZodCatch",(t,e)=>{Ve.init(t,e),st(t._zod,"optin",()=>e.innerType._zod.optin),st(t._zod,"optout",()=>e.innerType._zod.optout),st(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>nn(a,n,or()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(i=>nn(i,n,or()))},input:r.value}),r.issues=[]),r)}}),Bw=F("$ZodNaN",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),Vw=F("$ZodPipe",(t,e)=>{Ve.init(t,e),st(t._zod,"values",()=>e.in._zod.values),st(t._zod,"optin",()=>e.in._zod.optin),st(t._zod,"optout",()=>e.out._zod.optout),st(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>im(a,e.in,n)):im(i,e.in,n)}let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(i=>im(i,e.out,n)):im(o,e.out,n)}});function im(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}s(im,"handlePipeResult");var iu=F("$ZodCodec",(t,e)=>{Ve.init(t,e),st(t._zod,"values",()=>e.in._zod.values),st(t._zod,"optin",()=>e.in._zod.optin),st(t._zod,"optout",()=>e.out._zod.optout),st(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let i=e.in._zod.run(r,n);return i instanceof Promise?i.then(a=>sm(a,e,n)):sm(i,e,n)}else{let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>sm(a,e,n)):sm(i,e,n)}}});function sm(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let o=e.transform(t.value,t);return o instanceof Promise?o.then(i=>am(t,i,e.out,r)):am(t,o,e.out,r)}else{let o=e.reverseTransform(t.value,t);return o instanceof Promise?o.then(i=>am(t,i,e.in,r)):am(t,o,e.in,r)}}s(sm,"handleCodecAResult");function am(t,e,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},n)}s(am,"handleCodecTxResult");var Hw=F("$ZodReadonly",(t,e)=>{Ve.init(t,e),st(t._zod,"propValues",()=>e.innerType._zod.propValues),st(t._zod,"values",()=>e.innerType._zod.values),st(t._zod,"optin",()=>e.innerType?._zod?.optin),st(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(T$):T$(o)}});function T$(t){return t.value=Object.freeze(t.value),t}s(T$,"handleReadonlyResult");var Gw=F("$ZodTemplateLiteral",(t,e)=>{Ve.init(t,e);let r=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let o=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!o)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let i=o.startsWith("^")?1:0,a=o.endsWith("$")?o.length-1:o.length;r.push(o.slice(i,a))}else if(n===null||L_.has(typeof n))r.push(fn(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(n,o)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:t,expected:"template_literal",code:"invalid_type"}),n):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),n)}),Zw=F("$ZodFunction",(t,e)=>(Ve.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let o=t._def.input?Hp(t._def.input,n):n,i=Reflect.apply(r,this,o);return t._def.output?Hp(t._def.output,i):i}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let o=t._def.input?await Gp(t._def.input,n):n,i=await Reflect.apply(r,this,o);return t._def.output?await Gp(t._def.output,i):i}},t._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let n=t.constructor;return Array.isArray(r[0])?new n({type:"function",input:new pm({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new n({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let n=t.constructor;return new n({type:"function",input:t._def.input,output:r})},t)),Jw=F("$ZodPromise",(t,e)=>{Ve.init(t,e),t._zod.parse=(r,n)=>Promise.resolve(r.value).then(o=>e.innerType._zod.run({value:o,issues:[]},n))}),Kw=F("$ZodLazy",(t,e)=>{Ve.init(t,e),st(t._zod,"innerType",()=>e.getter()),st(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),st(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),st(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),st(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,n)=>t._zod.innerType._zod.run(r,n)}),Ww=F("$ZodCustom",(t,e)=>{It.init(t,e),Ve.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,o=e.fn(n);if(o instanceof Promise)return o.then(i=>E$(i,r,n,t));E$(o,r,n,t)}});function E$(t,e,r,n){if(!t){let o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(Zs(o))}}s(E$,"handleRefineResult");var du={};en(du,{ar:()=>Qw,az:()=>Xw,be:()=>Yw,bg:()=>ex,ca:()=>tx,cs:()=>rx,da:()=>nx,de:()=>ox,en:()=>su,eo:()=>ix,es:()=>sx,fa:()=>ax,fi:()=>cx,fr:()=>ux,frCA:()=>lx,he:()=>dx,hu:()=>px,id:()=>mx,is:()=>fx,it:()=>hx,ja:()=>gx,ka:()=>yx,kh:()=>vx,km:()=>au,ko:()=>_x,lt:()=>bx,mk:()=>wx,ms:()=>xx,nl:()=>Sx,no:()=>Tx,ota:()=>Ex,pl:()=>kx,ps:()=>Ix,pt:()=>Px,ru:()=>Ax,sl:()=>Cx,sv:()=>Ox,ta:()=>$x,th:()=>Rx,tr:()=>Nx,ua:()=>Dx,uk:()=>lu,ur:()=>jx,vi:()=>Mx,yo:()=>Lx,zhCN:()=>Ux,zhTW:()=>zx});var b9=s(()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return o=>{switch(o.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${o.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ae(o.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${o.prefix}"`:i.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${i.suffix}"`:i.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${i.includes}"`:i.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${i.pattern}`:`${n[i.format]??o.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${o.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${o.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${o.keys.length>1?"\u0629":""}: ${W(o.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}},"error");function Qw(){return{localeError:b9()}}s(Qw,"default");var w9=s(()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${o.expected}, daxil olan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ae(o.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${i.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:i.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${i.suffix}" il\u0259 bitm\u0259lidir`:i.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${i.includes}" daxil olmal\u0131d\u0131r`:i.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${i.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[i.format]??o.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${o.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${o.keys.length>1?"lar":""}: ${W(o.keys,", ")}`;case"invalid_key":return`${o.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${o.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}},"error");function Xw(){return{localeError:w9()}}s(Xw,"default");function O$(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(O$,"getBelarusianPlural");var x9=s(()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0456\u045E";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${o.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ae(o.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let u=Number(o.maximum),l=O$(u,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let u=Number(o.minimum),l=O$(u,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${o.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${W(o.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${o.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}},"error");function Yw(){return{localeError:x9()}}s(Yw,"default");var S9=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),T9=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${S9(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ae(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${W(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.maximum.toString()} ${i.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.minimum.toString()} ${i.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;if(o.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${o.prefix}"`;if(o.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${o.suffix}"`;if(o.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${o.includes}"`;if(o.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${o.pattern}`;let i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return o.format==="emoji"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="datetime"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="date"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),o.format==="time"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="duration"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${i} ${r[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${W(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}},"error");function ex(){return{localeError:T9()}}s(ex,"default");var E9=s(()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${o.expected}, s'ha rebut ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Valor inv\xE0lid: s'esperava ${ae(o.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${W(o.values," o ")}`;case"too_big":{let i=o.inclusive?"com a m\xE0xim":"menys de",a=e(o.origin);return a?`Massa gran: s'esperava que ${o.origin??"el valor"} contingu\xE9s ${i} ${o.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${o.origin??"el valor"} fos ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"com a m\xEDnim":"m\xE9s de",a=e(o.origin);return a?`Massa petit: s'esperava que ${o.origin} contingu\xE9s ${i} ${o.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${o.origin} fos ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\xE0lid: ha d'incloure "${i.includes}"`:i.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${i.pattern}`:`Format inv\xE0lid per a ${n[i.format]??o.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${o.divisor}`;case"unrecognized_keys":return`Clau${o.keys.length>1?"s":""} no reconeguda${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${o.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${o.origin}`;default:return"Entrada inv\xE0lida"}}},"error");function tx(){return{localeError:E9()}}s(tx,"default");var I9=s(()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(o))return"pole";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return o=>{switch(o.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${o.expected}, obdr\u017Eeno ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ae(o.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${i.pattern}`:`Neplatn\xFD form\xE1t ${n[i.format]??o.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${o.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${W(o.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${o.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${o.origin}`;default:return"Neplatn\xFD vstup"}}},"error");function rx(){return{localeError:I9()}}s(rx,"default");var k9=s(()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let u=typeof a;switch(u){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return u},"parsedType"),i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${ae(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${W(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`For stor: forventede ${d??"value"} ${l.verb} ${u} ${a.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${d??"value"} havde ${u} ${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`For lille: forventede ${d} ${l.verb} ${u} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${u} ${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Ugyldig streng: skal starte med "${u.prefix}"`:u.format==="ends_with"?`Ugyldig streng: skal ende med "${u.suffix}"`:u.format==="includes"?`Ugyldig streng: skal indeholde "${u.includes}"`:u.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${u.pattern}`:`Ugyldig ${i[u.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${W(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}},"error");function nx(){return{localeError:k9()}}s(nx,"default");var P9=s(()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"Zahl";case"object":{if(Array.isArray(o))return"Array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return o=>{switch(o.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${o.expected}, erhalten ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ae(o.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ist`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ist`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ung\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\xFCltig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${o.divisor} sein`;case"unrecognized_keys":return`${o.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${W(o.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${o.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${o.origin}`;default:return"Ung\xFCltige Eingabe"}}},"error");function ox(){return{localeError:P9()}}s(ox,"default");var A9=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),C9=s(()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${A9(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${ae(n.values[0])}`:`Invalid option: expected one of ${W(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Too big: expected ${n.origin??"value"} to have ${o}${n.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Too small: expected ${n.origin} to have ${o}${n.minimum.toString()} ${i.unit}`:`Too small: expected ${n.origin} to be ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${r[o.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${W(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}},"error");function su(){return{localeError:C9()}}s(su,"default");var O9=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),$9=s(()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${O9(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${ae(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${W(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${o}${n.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${r[o.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${W(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}},"error");function ix(){return{localeError:$9()}}s(ix,"default");var R9=s(()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let u=typeof a;switch(u){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return u},"parsedType"),i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${ae(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${W(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`Demasiado grande: se esperaba que ${d??"valor"} tuviera ${u}${a.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${d??"valor"} fuera ${u}${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${u}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${u}${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${u.prefix}"`:u.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${u.suffix}"`:u.format==="includes"?`Cadena inv\xE1lida: debe incluir "${u.includes}"`:u.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${u.pattern}`:`Inv\xE1lido ${i[u.format]??a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${W(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}},"error");function sx(){return{localeError:R9()}}s(sx,"default");var N9=s(()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0622\u0631\u0627\u06CC\u0647";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return o=>{switch(o.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${o.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(o.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return o.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ae(o.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${W(o.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:i.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:i.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${i.includes}" \u0628\u0627\u0634\u062F`:i.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${i.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[i.format]??o.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${o.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${o.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${W(o.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${o.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${o.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}},"error");function ax(){return{localeError:N9()}}s(ax,"default");var D9=s(()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return o=>{switch(o.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${o.expected}, oli ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ae(o.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${i}${o.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${i}${o.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${i.pattern}`:`Virheellinen ${n[i.format]??o.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${o.divisor} monikerta`;case"unrecognized_keys":return`${o.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${W(o.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}},"error");function cx(){return{localeError:D9()}}s(cx,"default");var j9=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombre";case"object":{if(Array.isArray(o))return"tableau";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : ${o.expected} attendu, ${r(o.input)} re\xE7u`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : ${ae(o.values[0])} attendu`:`Option invalide : une valeur parmi ${W(o.values,"|")} attendue`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Trop grand : ${o.origin??"valeur"} doit ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${o.origin??"valeur"} doit \xEAtre ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Trop petit : ${o.origin} doit ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : ${o.origin} doit \xEAtre ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${W(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function ux(){return{localeError:j9()}}s(ux,"default");var M9=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${o.expected}, re\xE7u ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : attendu ${ae(o.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u2264":"<",a=e(o.origin);return a?`Trop grand : attendu que ${o.origin??"la valeur"} ait ${i}${o.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${o.origin??"la valeur"} soit ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u2265":">",a=e(o.origin);return a?`Trop petit : attendu que ${o.origin} ait ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${o.origin} soit ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${W(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function lx(){return{localeError:M9()}}s(lx,"default");var U9=s(()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=s(d=>d?t[d]:void 0,"typeEntry"),n=s(d=>{let p=r(d);return p?p.label:d??t.unknown.label},"typeLabel"),o=s(d=>`\u05D4${n(d)}`,"withDefinite"),i=s(d=>(r(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA","verbFor"),a=s(d=>d?e[d]??null:null,"getSizing"),u=s(d=>{let p=typeof d;switch(p){case"number":return Number.isNaN(d)?"NaN":"number";case"object":return Array.isArray(d)?"array":d===null?"null":Object.getPrototypeOf(d)!==Object.prototype&&d.constructor?d.constructor.name:"object";default:return p}},"parsedType"),l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return d=>{switch(d.code){case"invalid_type":{let p=d.expected,f=n(p),h=u(d.input),y=t[h]?.label??h;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${f}, \u05D4\u05EA\u05E7\u05D1\u05DC ${y}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ae(d.values[0])}`;let p=d.values.map(y=>ae(y));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p[0]} \u05D0\u05D5 ${p[1]}`;let f=p[p.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p.slice(0,-1).join(", ")} \u05D0\u05D5 ${f}`}case"too_big":{let p=a(d.origin),f=o(d.origin??"value");if(d.origin==="string")return`${p?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",m=d.inclusive?`${d.maximum} ${p?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${p?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${m}`.trim()}let h=d.inclusive?"<=":"<",y=i(d.origin??"value");return p?.unit?`${p.longLabel} \u05DE\u05D3\u05D9: ${f} ${y} ${h}${d.maximum.toString()} ${p.unit}`:`${p?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${f} ${y} ${h}${d.maximum.toString()}`}case"too_small":{let p=a(d.origin),f=o(d.origin??"value");if(d.origin==="string")return`${p?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let _=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${_}`}let m=d.inclusive?`${d.minimum} ${p?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${p?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${m}`.trim()}let h=d.inclusive?">=":">",y=i(d.origin??"value");return p?.unit?`${p.shortLabel} \u05DE\u05D3\u05D9: ${f} ${y} ${h}${d.minimum.toString()} ${p.unit}`:`${p?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${f} ${y} ${h}${d.minimum.toString()}`}case"invalid_format":{let p=d;if(p.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${p.prefix}"`;if(p.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${p.suffix}"`;if(p.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${p.includes}"`;if(p.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${p.pattern}`;let f=l[p.format],h=f?.label??p.format,g=(f?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${h} \u05DC\u05D0 ${g}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${W(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${o(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}},"error");function dx(){return{localeError:U9()}}s(dx,"default");var z9=s(()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(o))return"t\xF6mb";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return o=>{switch(o.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${o.expected}, a kapott \xE9rt\xE9k ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ae(o.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xFAl nagy: ${o.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${i}${o.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${o.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} m\xE9rete t\xFAl kicsi ${i}${o.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} t\xFAl kicsi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\xC9rv\xE9nytelen string: "${i.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:i.format==="ends_with"?`\xC9rv\xE9nytelen string: "${i.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:i.format==="includes"?`\xC9rv\xE9nytelen string: "${i.includes}" \xE9rt\xE9ket kell tartalmaznia`:i.format==="regex"?`\xC9rv\xE9nytelen string: ${i.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[i.format]??o.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${o.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${o.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${o.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}},"error");function px(){return{localeError:z9()}}s(px,"default");var L9=s(()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak valid: diharapkan ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak valid: diharapkan ${ae(o.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: diharapkan ${o.origin??"value"} memiliki ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${o.origin??"value"} menjadi ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: diharapkan ${o.origin} memiliki ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${o.origin} menjadi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${n[i.format]??o.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${o.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${o.origin}`;default:return"Input tidak valid"}}},"error");function mx(){return{localeError:L9()}}s(mx,"default");var q9=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),F9=s(()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${q9(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ae(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${W(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${o}${n.maximum.toString()} ${i.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${o}${n.minimum.toString()} ${i.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${o.prefix}"`:o.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${o.suffix}"`:o.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${o.includes}"`:o.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${o.pattern}`:`Rangt ${r[o.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${W(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}},"error");function fx(){return{localeError:F9()}}s(fx,"default");var B9=s(()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numero";case"object":{if(Array.isArray(o))return"vettore";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input non valido: atteso ${o.expected}, ricevuto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input non valido: atteso ${ae(o.values[0])}`:`Opzione non valida: atteso uno tra ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Troppo grande: ${o.origin??"valore"} deve avere ${i}${o.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${o.origin??"valore"} deve essere ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Troppo piccolo: ${o.origin} deve avere ${i}${o.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${o.origin} deve essere ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${o.divisor}`;case"unrecognized_keys":return`Chiav${o.keys.length>1?"i":"e"} non riconosciut${o.keys.length>1?"e":"a"}: ${W(o.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${o.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${o.origin}`;default:return"Input non valido"}}},"error");function hx(){return{localeError:B9()}}s(hx,"default");var V9=s(()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(o))return"\u914D\u5217";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${o.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(o.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return o.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ae(o.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${W(o.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let i=o.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=e(o.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${a.unit??"\u8981\u7D20"}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let i=o.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=e(o.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${a.unit}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${i.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${o.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${o.keys.length>1?"\u7FA4":""}: ${W(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}},"error");function gx(){return{localeError:V9()}}s(gx,"default");var H9=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},"parsedType"),G9=s(()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${H9(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ae(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${W(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${i.verb} ${o}${n.maximum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${i.verb} ${o}${n.minimum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.prefix}"-\u10D8\u10D7`:o.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.suffix}"-\u10D8\u10D7`:o.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${o.includes}"-\u10E1`:o.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${o.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[o.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${W(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}},"error");function yx(){return{localeError:G9()}}s(yx,"default");var Z9=s(()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(o))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(o===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return o=>{switch(o.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ae(o.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${i.prefix}"`:i.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${i.suffix}"`:i.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${i.includes}"`:i.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${i.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${o.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${W(o.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}},"error");function au(){return{localeError:Z9()}}s(au,"default");function vx(){return au()}s(vx,"default");var J9=s(()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return o=>{switch(o.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${o.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(o.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return o.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ae(o.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${W(o.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let i=o.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=i==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",u=e(o.origin),l=u?.unit??"\uC694\uC18C";return u?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()} ${i}${a}`}case"too_small":{let i=o.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=i==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",u=e(o.origin),l=u?.unit??"\uC694\uC18C";return u?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()} ${i}${a}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:i.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${i.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[i.format]??o.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${o.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${W(o.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${o.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${o.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}},"error");function _x(){return{localeError:J9()}}s(_x,"default");var K9=s(t=>uu(typeof t,t),"parsedType"),uu=s((t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},"parsedTypeFromType"),cu=s(t=>t.charAt(0).toUpperCase()+t.slice(1),"capitalizeFirstCharacter");function $$(t){let e=Math.abs(t),r=e%10,n=e%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}s($$,"getUnitTypeFromNumber");var W9=s(()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,o,i,a){let u=t[n]??null;return u===null?u:{unit:u.unit[o],verb:u.verb[a][i?"inclusive":"notInclusive"]}}s(e,"getSizing");let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${K9(n.input)}, o tik\u0117tasi - ${uu(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${ae(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${W(n.values,"|")} pasirinkim\u0173`;case"too_big":{let o=uu(n.origin),i=e(n.origin,$$(Number(n.maximum)),n.inclusive??!1,"smaller");if(i?.verb)return`${cu(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.maximum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${cu(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.maximum.toString()} ${i?.unit}`}case"too_small":{let o=uu(n.origin),i=e(n.origin,$$(Number(n.minimum)),n.inclusive??!1,"bigger");if(i?.verb)return`${cu(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.minimum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${cu(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.minimum.toString()} ${i?.unit}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${o.prefix}"`:o.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${o.includes}"`:o.format==="regex"?`Eilut\u0117 privalo atitikti ${o.pattern}`:`Neteisingas ${r[o.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${W(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let o=uu(n.origin);return`${cu(o??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}},"error");function bx(){return{localeError:W9()}}s(bx,"default");var Q9=s(()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(o))return"\u043D\u0438\u0437\u0430";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return o=>{switch(o.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${ae(o.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${W(o.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${o.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${o.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}},"error");function wx(){return{localeError:Q9()}}s(wx,"default");var X9=s(()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombor";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak sah: dijangka ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak sah: dijangka ${ae(o.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: dijangka ${o.origin??"nilai"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${o.origin??"nilai"} adalah ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: dijangka ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${o.origin} adalah ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${n[i.format]??o.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${W(o.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${o.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${o.origin}`;default:return"Input tidak sah"}}},"error");function xx(){return{localeError:X9()}}s(xx,"default");var Y9=s(()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"getal";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return o=>{switch(o.code){case"invalid_type":return`Ongeldige invoer: verwacht ${o.expected}, ontving ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ongeldige invoer: verwacht ${ae(o.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Te groot: verwacht dat ${o.origin??"waarde"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elementen"}`:`Te groot: verwacht dat ${o.origin??"waarde"} ${i}${o.maximum.toString()} is`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Te klein: verwacht dat ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Te klein: verwacht dat ${o.origin} ${i}${o.minimum.toString()} is`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${o.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${o.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${o.origin}`;default:return"Ongeldige invoer"}}},"error");function Sx(){return{localeError:Y9()}}s(Sx,"default");var e8=s(()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"tall";case"object":{if(Array.isArray(o))return"liste";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Ugyldig input: forventet ${o.expected}, fikk ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ugyldig verdi: forventet ${ae(o.values[0])}`:`Ugyldig valg: forventet en av ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${i.pattern}`:`Ugyldig ${n[i.format]??o.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${W(o.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${o.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${o.origin}`;default:return"Ugyldig input"}}},"error");function Tx(){return{localeError:e8()}}s(Tx,"default");var t8=s(()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numara";case"object":{if(Array.isArray(o))return"saf";if(o===null)return"gayb";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return o=>{switch(o.code){case"invalid_type":return`F\xE2sit giren: umulan ${o.expected}, al\u0131nan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`F\xE2sit giren: umulan ${ae(o.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let i=o;return i.format==="starts_with"?`F\xE2sit metin: "${i.prefix}" ile ba\u015Flamal\u0131.`:i.format==="ends_with"?`F\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\xE2sit metin: "${i.includes}" ihtiv\xE2 etmeli.`:i.format==="regex"?`F\xE2sit metin: ${i.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[i.format]??o.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${o.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${o.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}},"error");function Ex(){return{localeError:t8()}}s(Ex,"default");var r8=s(()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0627\u0631\u06D0";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return o=>{switch(o.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${o.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(o.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return o.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ae(o.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${W(o.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0648\u064A`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0648\u064A`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:i.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:i.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${i.includes}" \u0648\u0644\u0631\u064A`:i.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${i.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[i.format]??o.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${o.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${o.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${W(o.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${o.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${o.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}},"error");function Ix(){return{localeError:r8()}}s(Ix,"default");var n8=s(()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"liczba";case"object":{if(Array.isArray(o))return"tablica";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return o=>{switch(o.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${o.expected}, otrzymano ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ae(o.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${i.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[i.format]??o.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${o.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${o.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${o.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}},"error");function kx(){return{localeError:n8()}}s(kx,"default");var o8=s(()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(o))return"array";if(o===null)return"nulo";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${o.expected}, recebido ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entrada inv\xE1lida: esperado ${ae(o.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Muito grande: esperado que ${o.origin??"valor"} tivesse ${i}${o.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${o.origin??"valor"} fosse ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Muito pequeno: esperado que ${o.origin} tivesse ${i}${o.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${o.origin} fosse ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${i.pattern}`:`${n[i.format]??o.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${o.divisor}`;case"unrecognized_keys":return`Chave${o.keys.length>1?"s":""} desconhecida${o.keys.length>1?"s":""}: ${W(o.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${o.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${o.origin}`;default:return"Campo inv\xE1lido"}}},"error");function Px(){return{localeError:o8()}}s(Px,"default");function R$(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(R$,"getRussianPlural");var i8=s(()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ae(o.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let u=Number(o.maximum),l=R$(u,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let u=Number(o.minimum),l=R$(u,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${o.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0438":""}: ${W(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}},"error");function Ax(){return{localeError:i8()}}s(Ax,"default");var s8=s(()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(o))return"tabela";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return o=>{switch(o.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${o.expected}, prejeto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ae(o.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} imelo ${i}${o.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${o.origin} imelo ${i}${o.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${n[i.format]??o.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${o.divisor}`;case"unrecognized_keys":return`Neprepoznan${o.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${W(o.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${o.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${o.origin}`;default:return"Neveljaven vnos"}}},"error");function Cx(){return{localeError:s8()}}s(Cx,"default");var a8=s(()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"antal";case"object":{if(Array.isArray(o))return"lista";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return o=>{switch(o.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${o.expected}, fick ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ae(o.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${n[i.format]??o.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${W(o.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${o.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${o.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}},"error");function Ox(){return{localeError:a8()}}s(Ox,"default");var c8=s(()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(o))return"\u0B85\u0BA3\u0BBF";if(o===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ae(o.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${W(o.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${i.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${o.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${o.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${W(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}},"error");function $x(){return{localeError:c8()}}s($x,"default");var u8=s(()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(o))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(o===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return o=>{switch(o.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${o.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ae(o.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${i.suffix}"`:i.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${i.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:i.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${i.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${o.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${W(o.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}},"error");function Rx(){return{localeError:u8()}}s(Rx,"default");var l8=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),d8=s(()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${l8(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ae(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${W(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()} ${i.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()} ${i.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ge\xE7ersiz metin: "${o.prefix}" ile ba\u015Flamal\u0131`:o.format==="ends_with"?`Ge\xE7ersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Ge\xE7ersiz metin: "${o.includes}" i\xE7ermeli`:o.format==="regex"?`Ge\xE7ersiz metin: ${o.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[o.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${W(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}},"error");function Nx(){return{localeError:d8()}}s(Nx,"default");var p8=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${o.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ae(o.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} \u0431\u0443\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0456":""}: ${W(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${o.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}},"error");function lu(){return{localeError:p8()}}s(lu,"default");function Dx(){return lu()}s(Dx,"default");var m8=s(()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(o))return"\u0622\u0631\u06D2";if(o===null)return"\u0646\u0644";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return o=>{switch(o.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${o.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(o.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return o.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ae(o.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${W(o.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${i}${o.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u06D2 ${i}${o.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u0627 ${i}${o.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${i.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${o.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${o.keys.length>1?"\u0632":""}: ${W(o.keys,"\u060C ")}`;case"invalid_key":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}},"error");function jx(){return{localeError:m8()}}s(jx,"default");var f8=s(()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(o))return"m\u1EA3ng";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return o=>{switch(o.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${o.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ae(o.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${i.pattern}`:`${n[i.format]??o.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${o.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${W(o.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}},"error");function Mx(){return{localeError:f8()}}s(Mx,"default");var h8=s(()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(o))return"\u6570\u7EC4";if(o===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${o.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ae(o.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.prefix}" \u5F00\u5934`:i.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.suffix}" \u7ED3\u5C3E`:i.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${i.pattern}`:`\u65E0\u6548${n[i.format]??o.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${o.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${W(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${o.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}},"error");function Ux(){return{localeError:h8()}}s(Ux,"default");var g8=s(()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${o.expected}\uFF0C\u4F46\u6536\u5230 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ae(o.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.prefix}" \u958B\u982D`:i.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.suffix}" \u7D50\u5C3E`:i.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${i.pattern}`:`\u7121\u6548\u7684 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${o.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${o.keys.length>1?"\u5011":""}\uFF1A${W(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}},"error");function zx(){return{localeError:g8()}}s(zx,"default");var y8=s(()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(o))return"akop\u1ECD";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return o=>{switch(o.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${o.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ae(o.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${W(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin??"iye"} ${a.verb} ${i}${o.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.maximum}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin} ${a.verb} ${i}${o.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.minimum}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${i.prefix}"`:i.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${i.suffix}"`:i.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${i.includes}"`:i.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${i.pattern}`:`A\u1E63\xEC\u1E63e: ${n[i.format]??o.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${o.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${W(o.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}},"error");function Lx(){return{localeError:y8()}}s(Lx,"default");var N$,qx=Symbol("ZodOutput"),Fx=Symbol("ZodInput"),Ys=class{static{s(this,"$ZodRegistry")}constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let n={...this.get(r)??{}};delete n.id;let o={...n,...this._map.get(e)};return Object.keys(o).length?o:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function mm(){return new Ys}s(mm,"registry");(N$=globalThis).__zod_globalRegistry??(N$.__zod_globalRegistry=mm());var Nr=globalThis.__zod_globalRegistry;function Bx(t,e){return new t({type:"string",...ue(e)})}s(Bx,"_string");function Vx(t,e){return new t({type:"string",coerce:!0,...ue(e)})}s(Vx,"_coercedString");function fm(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...ue(e)})}s(fm,"_email");function pu(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...ue(e)})}s(pu,"_guid");function hm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...ue(e)})}s(hm,"_uuid");function gm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ue(e)})}s(gm,"_uuidv4");function ym(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ue(e)})}s(ym,"_uuidv6");function vm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ue(e)})}s(vm,"_uuidv7");function mu(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...ue(e)})}s(mu,"_url");function _m(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...ue(e)})}s(_m,"_emoji");function bm(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...ue(e)})}s(bm,"_nanoid");function wm(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...ue(e)})}s(wm,"_cuid");function xm(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...ue(e)})}s(xm,"_cuid2");function Sm(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...ue(e)})}s(Sm,"_ulid");function Tm(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...ue(e)})}s(Tm,"_xid");function Em(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...ue(e)})}s(Em,"_ksuid");function Im(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...ue(e)})}s(Im,"_ipv4");function km(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...ue(e)})}s(km,"_ipv6");function Hx(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...ue(e)})}s(Hx,"_mac");function Pm(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ue(e)})}s(Pm,"_cidrv4");function Am(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ue(e)})}s(Am,"_cidrv6");function Cm(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...ue(e)})}s(Cm,"_base64");function Om(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...ue(e)})}s(Om,"_base64url");function $m(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...ue(e)})}s($m,"_e164");function Rm(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...ue(e)})}s(Rm,"_jwt");var Gx={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Zx(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ue(e)})}s(Zx,"_isoDateTime");function Jx(t,e){return new t({type:"string",format:"date",check:"string_format",...ue(e)})}s(Jx,"_isoDate");function Kx(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...ue(e)})}s(Kx,"_isoTime");function Wx(t,e){return new t({type:"string",format:"duration",check:"string_format",...ue(e)})}s(Wx,"_isoDuration");function Qx(t,e){return new t({type:"number",checks:[],...ue(e)})}s(Qx,"_number");function Xx(t,e){return new t({type:"number",coerce:!0,checks:[],...ue(e)})}s(Xx,"_coercedNumber");function Yx(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...ue(e)})}s(Yx,"_int");function eS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...ue(e)})}s(eS,"_float32");function tS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...ue(e)})}s(tS,"_float64");function rS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...ue(e)})}s(rS,"_int32");function nS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...ue(e)})}s(nS,"_uint32");function oS(t,e){return new t({type:"boolean",...ue(e)})}s(oS,"_boolean");function iS(t,e){return new t({type:"boolean",coerce:!0,...ue(e)})}s(iS,"_coercedBoolean");function sS(t,e){return new t({type:"bigint",...ue(e)})}s(sS,"_bigint");function aS(t,e){return new t({type:"bigint",coerce:!0,...ue(e)})}s(aS,"_coercedBigint");function cS(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ue(e)})}s(cS,"_int64");function uS(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ue(e)})}s(uS,"_uint64");function lS(t,e){return new t({type:"symbol",...ue(e)})}s(lS,"_symbol");function dS(t,e){return new t({type:"undefined",...ue(e)})}s(dS,"_undefined");function pS(t,e){return new t({type:"null",...ue(e)})}s(pS,"_null");function mS(t){return new t({type:"any"})}s(mS,"_any");function fS(t){return new t({type:"unknown"})}s(fS,"_unknown");function hS(t,e){return new t({type:"never",...ue(e)})}s(hS,"_never");function gS(t,e){return new t({type:"void",...ue(e)})}s(gS,"_void");function yS(t,e){return new t({type:"date",...ue(e)})}s(yS,"_date");function vS(t,e){return new t({type:"date",coerce:!0,...ue(e)})}s(vS,"_coercedDate");function _S(t,e){return new t({type:"nan",...ue(e)})}s(_S,"_nan");function So(t,e){return new rm({check:"less_than",...ue(e),value:t,inclusive:!1})}s(So,"_lt");function gn(t,e){return new rm({check:"less_than",...ue(e),value:t,inclusive:!0})}s(gn,"_lte");function To(t,e){return new nm({check:"greater_than",...ue(e),value:t,inclusive:!1})}s(To,"_gt");function Kr(t,e){return new nm({check:"greater_than",...ue(e),value:t,inclusive:!0})}s(Kr,"_gte");function bS(t){return To(0,t)}s(bS,"_positive");function wS(t){return So(0,t)}s(wS,"_negative");function xS(t){return gn(0,t)}s(xS,"_nonpositive");function SS(t){return Kr(0,t)}s(SS,"_nonnegative");function Vi(t,e){return new Sb({check:"multiple_of",...ue(e),value:t})}s(Vi,"_multipleOf");function ea(t,e){return new Ib({check:"max_size",...ue(e),maximum:t})}s(ea,"_maxSize");function Hi(t,e){return new kb({check:"min_size",...ue(e),minimum:t})}s(Hi,"_minSize");function fu(t,e){return new Pb({check:"size_equals",...ue(e),size:t})}s(fu,"_size");function ta(t,e){return new Ab({check:"max_length",...ue(e),maximum:t})}s(ta,"_maxLength");function mi(t,e){return new Cb({check:"min_length",...ue(e),minimum:t})}s(mi,"_minLength");function ra(t,e){return new Ob({check:"length_equals",...ue(e),length:t})}s(ra,"_length");function hu(t,e){return new $b({check:"string_format",format:"regex",...ue(e),pattern:t})}s(hu,"_regex");function gu(t){return new Rb({check:"string_format",format:"lowercase",...ue(t)})}s(gu,"_lowercase");function yu(t){return new Nb({check:"string_format",format:"uppercase",...ue(t)})}s(yu,"_uppercase");function vu(t,e){return new Db({check:"string_format",format:"includes",...ue(e),includes:t})}s(vu,"_includes");function _u(t,e){return new jb({check:"string_format",format:"starts_with",...ue(e),prefix:t})}s(_u,"_startsWith");function bu(t,e){return new Mb({check:"string_format",format:"ends_with",...ue(e),suffix:t})}s(bu,"_endsWith");function TS(t,e,r){return new Ub({check:"property",property:t,schema:e,...ue(r)})}s(TS,"_property");function wu(t,e){return new zb({check:"mime_type",mime:t,...ue(e)})}s(wu,"_mime");function Gn(t){return new Lb({check:"overwrite",tx:t})}s(Gn,"_overwrite");function xu(t){return Gn(e=>e.normalize(t))}s(xu,"_normalize");function Su(){return Gn(t=>t.trim())}s(Su,"_trim");function Tu(){return Gn(t=>t.toLowerCase())}s(Tu,"_toLowerCase");function Eu(){return Gn(t=>t.toUpperCase())}s(Eu,"_toUpperCase");function Iu(){return Gn(t=>M_(t))}s(Iu,"_slugify");function ES(t,e,r){return new t({type:"array",element:e,...ue(r)})}s(ES,"_array");function _8(t,e,r){return new t({type:"union",options:e,...ue(r)})}s(_8,"_union");function b8(t,e,r,n){return new t({type:"union",options:r,discriminator:e,...ue(n)})}s(b8,"_discriminatedUnion");function w8(t,e,r){return new t({type:"intersection",left:e,right:r})}s(w8,"_intersection");function x8(t,e,r,n){let o=r instanceof Ve,i=o?n:r,a=o?r:null;return new t({type:"tuple",items:e,rest:a,...ue(i)})}s(x8,"_tuple");function S8(t,e,r,n){return new t({type:"record",keyType:e,valueType:r,...ue(n)})}s(S8,"_record");function T8(t,e,r,n){return new t({type:"map",keyType:e,valueType:r,...ue(n)})}s(T8,"_map");function E8(t,e,r){return new t({type:"set",valueType:e,...ue(r)})}s(E8,"_set");function I8(t,e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new t({type:"enum",entries:n,...ue(r)})}s(I8,"_enum");function k8(t,e,r){return new t({type:"enum",entries:e,...ue(r)})}s(k8,"_nativeEnum");function P8(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...ue(r)})}s(P8,"_literal");function IS(t,e){return new t({type:"file",...ue(e)})}s(IS,"_file");function A8(t,e){return new t({type:"transform",transform:e})}s(A8,"_transform");function C8(t,e){return new t({type:"optional",innerType:e})}s(C8,"_optional");function O8(t,e){return new t({type:"nullable",innerType:e})}s(O8,"_nullable");function $8(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():z_(r)}})}s($8,"_default");function R8(t,e,r){return new t({type:"nonoptional",innerType:e,...ue(r)})}s(R8,"_nonoptional");function N8(t,e){return new t({type:"success",innerType:e})}s(N8,"_success");function D8(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}s(D8,"_catch");function j8(t,e,r){return new t({type:"pipe",in:e,out:r})}s(j8,"_pipe");function M8(t,e){return new t({type:"readonly",innerType:e})}s(M8,"_readonly");function U8(t,e,r){return new t({type:"template_literal",parts:e,...ue(r)})}s(U8,"_templateLiteral");function z8(t,e){return new t({type:"lazy",getter:e})}s(z8,"_lazy");function L8(t,e){return new t({type:"promise",innerType:e})}s(L8,"_promise");function kS(t,e,r){let n=ue(r);return n.abort??(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}s(kS,"_custom");function PS(t,e,r){return new t({type:"custom",check:"custom",fn:e,...ue(r)})}s(PS,"_refine");function AS(t){let e=D$(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Zs(n,r.value,e._zod.def));else{let o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),r.issues.push(Zs(o))}},t(r.value,r)));return e}s(AS,"_superRefine");function D$(t,e){let r=new It({check:"custom",...ue(e)});return r._zod.check=t,r}s(D$,"_check");function CS(t){let e=new It({check:"describe"});return e._zod.onattach=[r=>{let n=Nr.get(r)??{};Nr.add(r,{...n,description:t})}],e._zod.check=()=>{},e}s(CS,"describe");function OS(t){let e=new It({check:"meta"});return e._zod.onattach=[r=>{let n=Nr.get(r)??{};Nr.add(r,{...n,...t})}],e._zod.check=()=>{},e}s(OS,"meta");function $S(t,e){let r=ue(e),n=r.truthy??["true","1","yes","on","y","enabled"],o=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(y=>typeof y=="string"?y.toLowerCase():y),o=o.map(y=>typeof y=="string"?y.toLowerCase():y));let i=new Set(n),a=new Set(o),u=t.Codec??iu,l=t.Boolean??ou,d=t.String??Bi,p=new d({type:"string",error:r.error}),f=new l({type:"boolean",error:r.error}),h=new u({type:"pipe",in:p,out:f,transform:s(((y,g)=>{let m=y;return r.case!=="sensitive"&&(m=m.toLowerCase()),i.has(m)?!0:a.has(m)?!1:(g.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:g.value,inst:h,continue:!1}),{})}),"transform"),reverseTransform:s(((y,g)=>y===!0?n[0]||"true":o[0]||"false"),"reverseTransform"),error:r.error});return h}s($S,"_stringbool");function na(t,e,r,n={}){let o=ue(n),i={...ue(n),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:u=>r.test(u),...o};return r instanceof RegExp&&(i.pattern=r),new t(i)}s(na,"_stringFormat");var ku=class{static{s(this,"JSONSchemaGenerator")}constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Nr,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,r={path:[],schemaPath:[]}){var n;let o=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let u={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(e,u);let l=e._zod.toJSONSchema?.();if(l)u.schema=l;else{let f={...r,schemaPath:[...r.schemaPath,e],path:r.path},h=e._zod.parent;if(h)u.ref=h,this.process(h,f),this.seen.get(h).isParent=!0;else{let y=u.schema;switch(o.type){case"string":{let g=y;g.type="string";let{minimum:m,maximum:_,format:w,patterns:b,contentEncoding:x}=e._zod.bag;if(typeof m=="number"&&(g.minLength=m),typeof _=="number"&&(g.maxLength=_),w&&(g.format=i[w]??w,g.format===""&&delete g.format),x&&(g.contentEncoding=x),b&&b.size>0){let k=[...b];k.length===1?g.pattern=k[0].source:k.length>1&&(u.schema.allOf=[...k.map(R=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:R.source}))])}break}case"number":{let g=y,{minimum:m,maximum:_,format:w,multipleOf:b,exclusiveMaximum:x,exclusiveMinimum:k}=e._zod.bag;typeof w=="string"&&w.includes("int")?g.type="integer":g.type="number",typeof k=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.minimum=k,g.exclusiveMinimum=!0):g.exclusiveMinimum=k),typeof m=="number"&&(g.minimum=m,typeof k=="number"&&this.target!=="draft-4"&&(k>=m?delete g.minimum:delete g.exclusiveMinimum)),typeof x=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.maximum=x,g.exclusiveMaximum=!0):g.exclusiveMaximum=x),typeof _=="number"&&(g.maximum=_,typeof x=="number"&&this.target!=="draft-4"&&(x<=_?delete g.maximum:delete g.exclusiveMaximum)),typeof b=="number"&&(g.multipleOf=b);break}case"boolean":{let g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(y.type="string",y.nullable=!0,y.enum=[null]):y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let g=y,{minimum:m,maximum:_}=e._zod.bag;typeof m=="number"&&(g.minItems=m),typeof _=="number"&&(g.maxItems=_),g.type="array",g.items=this.process(o.element,{...f,path:[...f.path,"items"]});break}case"object":{let g=y;g.type="object",g.properties={};let m=o.shape;for(let b in m)g.properties[b]=this.process(m[b],{...f,path:[...f.path,"properties",b]});let _=new Set(Object.keys(m)),w=new Set([..._].filter(b=>{let x=o.shape[b]._zod;return this.io==="input"?x.optin===void 0:x.optout===void 0}));w.size>0&&(g.required=Array.from(w)),o.catchall?._zod.def.type==="never"?g.additionalProperties=!1:o.catchall?o.catchall&&(g.additionalProperties=this.process(o.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{let g=y,m=o.discriminator!==void 0,_=o.options.map((w,b)=>this.process(w,{...f,path:[...f.path,m?"oneOf":"anyOf",b]}));m?g.oneOf=_:g.anyOf=_;break}case"intersection":{let g=y,m=this.process(o.left,{...f,path:[...f.path,"allOf",0]}),_=this.process(o.right,{...f,path:[...f.path,"allOf",1]}),w=s(x=>"allOf"in x&&Object.keys(x).length===1,"isSimpleIntersection"),b=[...w(m)?m.allOf:[m],...w(_)?_.allOf:[_]];g.allOf=b;break}case"tuple":{let g=y;g.type="array";let m=this.target==="draft-2020-12"?"prefixItems":"items",_=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",w=o.items.map((R,O)=>this.process(R,{...f,path:[...f.path,m,O]})),b=o.rest?this.process(o.rest,{...f,path:[...f.path,_,...this.target==="openapi-3.0"?[o.items.length]:[]]}):null;this.target==="draft-2020-12"?(g.prefixItems=w,b&&(g.items=b)):this.target==="openapi-3.0"?(g.items={anyOf:w},b&&g.items.anyOf.push(b),g.minItems=w.length,b||(g.maxItems=w.length)):(g.items=w,b&&(g.additionalItems=b));let{minimum:x,maximum:k}=e._zod.bag;typeof x=="number"&&(g.minItems=x),typeof k=="number"&&(g.maxItems=k);break}case"record":{let g=y;g.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(g.propertyNames=this.process(o.keyType,{...f,path:[...f.path,"propertyNames"]})),g.additionalProperties=this.process(o.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let g=y,m=Zc(o.entries);m.every(_=>typeof _=="number")&&(g.type="number"),m.every(_=>typeof _=="string")&&(g.type="string"),g.enum=m;break}case"literal":{let g=y,m=[];for(let _ of o.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(_))}else m.push(_);if(m.length!==0)if(m.length===1){let _=m[0];g.type=_===null?"null":typeof _,this.target==="draft-4"||this.target==="openapi-3.0"?g.enum=[_]:g.const=_}else m.every(_=>typeof _=="number")&&(g.type="number"),m.every(_=>typeof _=="string")&&(g.type="string"),m.every(_=>typeof _=="boolean")&&(g.type="string"),m.every(_=>_===null)&&(g.type="null"),g.enum=m;break}case"file":{let g=y,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:w,mime:b}=e._zod.bag;_!==void 0&&(m.minLength=_),w!==void 0&&(m.maxLength=w),b?b.length===1?(m.contentMediaType=b[0],Object.assign(g,m)):g.anyOf=b.map(x=>({...m,contentMediaType:x})):Object.assign(g,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let g=this.process(o.innerType,f);this.target==="openapi-3.0"?(u.ref=o.innerType,y.nullable=!0):y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,f),u.ref=o.innerType;break}case"success":{let g=y;g.type="boolean";break}case"default":{this.process(o.innerType,f),u.ref=o.innerType,y.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,f),u.ref=o.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,f),u.ref=o.innerType;let g;try{g=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let g=y,m=e._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=m.source;break}case"pipe":{let g=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(g,f),u.ref=g;break}case"readonly":{this.process(o.innerType,f),u.ref=o.innerType,y.readOnly=!0;break}case"promise":{this.process(o.innerType,f),u.ref=o.innerType;break}case"optional":{this.process(o.innerType,f),u.ref=o.innerType;break}case"lazy":{let g=e._zod.innerType;this.process(g,f),u.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(e);return d&&Object.assign(u.schema,d),this.io==="input"&&Dr(e)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((n=u.schema).default??(n.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(e).schema}emit(e,r){let n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},o=this.seen.get(e);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s(p=>{let f=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let m=n.external.registry.get(p[0])?.id,_=n.external.uri??(b=>b);if(m)return{ref:_(m)};let w=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=w,{defId:w,ref:`${_("__shared")}#/${f}/${w}`}}if(p[1]===o)return{ref:"#"};let y=`#/${f}/`,g=p[1].schema.id??`__schema${this.counter++}`;return{defId:g,ref:y+g}},"makeURI"),a=s(p=>{if(p[1].schema.$ref)return;let f=p[1],{ref:h,defId:y}=i(p);f.def={...f.schema},y&&(f.defId=y);let g=f.schema;for(let m in g)delete g[m];g.$ref=h},"extractToDef");if(n.cycles==="throw")for(let p of this.seen.entries()){let f=p[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let f=p[1];if(e===p[0]){a(p);continue}if(n.external){let y=n.external.registry.get(p[0])?.id;if(e!==p[0]&&y){a(p);continue}}if(this.metadataRegistry.get(p[0])?.id){a(p);continue}if(f.cycle){a(p);continue}if(f.count>1&&n.reused==="ref"){a(p);continue}}let u=s((p,f)=>{let h=this.seen.get(p),y=h.def??h.schema,g={...y};if(h.ref===null)return;let m=h.ref;if(h.ref=null,m){u(m,f);let _=this.seen.get(m).schema;_.$ref&&(f.target==="draft-7"||f.target==="draft-4"||f.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(_)):(Object.assign(y,_),Object.assign(y,g))}h.isParent||this.override({zodSchema:p,jsonSchema:y,path:h.path??[]})},"flattenRef");for(let p of[...this.seen.entries()].reverse())u(p[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let p=n.external.registry.get(e)?.id;if(!p)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(p)}Object.assign(l,o.def);let d=n.external?.defs??{};for(let p of this.seen.entries()){let f=p[1];f.def&&f.defId&&(d[f.defId]=f.def)}n.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?l.$defs=d:l.definitions=d);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}};function Pu(t,e){if(t instanceof Ys){let n=new ku(e),o={};for(let u of t._idmap.entries()){let[l,d]=u;n.process(d)}let i={},a={registry:t,uri:e?.uri,defs:o};for(let u of t._idmap.entries()){let[l,d]=u;i[l]=n.emit(d,{...e,external:a})}if(Object.keys(o).length>0){let u=n.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[u]:o}}return{schemas:i}}let r=new ku(e);return r.process(t),r.emit(t,e)}s(Pu,"toJSONSchema");function Dr(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let n=t._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return Dr(n.element,r);if(n.type==="set")return Dr(n.valueType,r);if(n.type==="lazy")return Dr(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return Dr(n.innerType,r);if(n.type==="intersection")return Dr(n.left,r)||Dr(n.right,r);if(n.type==="record"||n.type==="map")return Dr(n.keyType,r)||Dr(n.valueType,r);if(n.type==="pipe")return Dr(n.in,r)||Dr(n.out,r);if(n.type==="object"){for(let o in n.shape)if(Dr(n.shape[o],r))return!0;return!1}if(n.type==="union"){for(let o of n.options)if(Dr(o,r))return!0;return!1}if(n.type==="tuple"){for(let o of n.items)if(Dr(o,r))return!0;return!!(n.rest&&Dr(n.rest,r))}return!1}s(Dr,"isTransforming");var j$={};var Um={};en(Um,{ZodISODate:()=>Dm,ZodISODateTime:()=>Nm,ZodISODuration:()=>Mm,ZodISOTime:()=>jm,date:()=>NS,datetime:()=>RS,duration:()=>jS,time:()=>DS});var Nm=F("ZodISODateTime",(t,e)=>{ew.init(t,e),kt.init(t,e)});function RS(t){return Zx(Nm,t)}s(RS,"datetime");var Dm=F("ZodISODate",(t,e)=>{tw.init(t,e),kt.init(t,e)});function NS(t){return Jx(Dm,t)}s(NS,"date");var jm=F("ZodISOTime",(t,e)=>{rw.init(t,e),kt.init(t,e)});function DS(t){return Kx(jm,t)}s(DS,"time");var Mm=F("ZodISODuration",(t,e)=>{nw.init(t,e),kt.init(t,e)});function jS(t){return Wx(Mm,t)}s(jS,"duration");var U$=s((t,e)=>{Xc.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s(r=>eu(t,r),"value")},flatten:{value:s(r=>Yc(t,r),"value")},addIssue:{value:s(r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Hs,2)},"value")},addIssues:{value:s(r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Hs,2)},"value")},isEmpty:{get(){return t.issues.length===0}}})},"initializer"),F8=F("ZodError",U$),Wr=F("ZodError",U$,{Parent:Error});var MS=Js(Wr),US=Ks(Wr),zS=Ws(Wr),Au=Qs(Wr),LS=Zp(Wr),qS=Jp(Wr),FS=Kp(Wr),BS=Wp(Wr),VS=Qp(Wr),HS=Xp(Wr),GS=Yp(Wr),ZS=em(Wr);var et=F("ZodType",(t,e)=>(Ve.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(le.mergeDefs(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>Rr(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>MS(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>zS(t,r,n),t.parseAsync=async(r,n)=>US(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Au(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>LS(t,r,n),t.decode=(r,n)=>qS(t,r,n),t.encodeAsync=async(r,n)=>FS(t,r,n),t.decodeAsync=async(r,n)=>BS(t,r,n),t.safeEncode=(r,n)=>VS(t,r,n),t.safeDecode=(r,n)=>HS(t,r,n),t.safeEncodeAsync=async(r,n)=>GS(t,r,n),t.safeDecodeAsync=async(r,n)=>ZS(t,r,n),t.refine=(r,n)=>t.check(ER(r,n)),t.superRefine=r=>t.check(IR(r)),t.overwrite=r=>t.check(Gn(r)),t.optional=()=>Lm(t),t.nullable=()=>qm(t),t.nullish=()=>Lm(qm(t)),t.nonoptional=r=>mR(t,r),t.array=()=>Hm(t),t.or=r=>gT([t,r]),t.and=r=>Y$(t,r),t.transform=r=>Fm(t,_T(r)),t.default=r=>lR(t,r),t.prefault=r=>pR(t,r),t.catch=r=>gR(t,r),t.pipe=r=>Fm(t,r),t.readonly=()=>_R(t),t.describe=r=>{let n=t.clone();return Nr.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return Nr.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Nr.get(t);let n=t.clone();return Nr.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),WS=F("_ZodString",(t,e)=>{Bi.init(t,e),et.init(t,e);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(hu(...n)),t.includes=(...n)=>t.check(vu(...n)),t.startsWith=(...n)=>t.check(_u(...n)),t.endsWith=(...n)=>t.check(bu(...n)),t.min=(...n)=>t.check(mi(...n)),t.max=(...n)=>t.check(ta(...n)),t.length=(...n)=>t.check(ra(...n)),t.nonempty=(...n)=>t.check(mi(1,...n)),t.lowercase=n=>t.check(gu(n)),t.uppercase=n=>t.check(yu(n)),t.trim=()=>t.check(Su()),t.normalize=(...n)=>t.check(xu(...n)),t.toLowerCase=()=>t.check(Tu()),t.toUpperCase=()=>t.check(Eu()),t.slugify=()=>t.check(Iu())}),Ou=F("ZodString",(t,e)=>{Bi.init(t,e),WS.init(t,e),t.email=r=>t.check(fm(QS,r)),t.url=r=>t.check(mu(Bm,r)),t.jwt=r=>t.check(Rm(pT,r)),t.emoji=r=>t.check(_m(XS,r)),t.guid=r=>t.check(pu(zm,r)),t.uuid=r=>t.check(hm(Io,r)),t.uuidv4=r=>t.check(gm(Io,r)),t.uuidv6=r=>t.check(ym(Io,r)),t.uuidv7=r=>t.check(vm(Io,r)),t.nanoid=r=>t.check(bm(YS,r)),t.guid=r=>t.check(pu(zm,r)),t.cuid=r=>t.check(wm(eT,r)),t.cuid2=r=>t.check(xm(tT,r)),t.ulid=r=>t.check(Sm(rT,r)),t.base64=r=>t.check(Cm(uT,r)),t.base64url=r=>t.check(Om(lT,r)),t.xid=r=>t.check(Tm(nT,r)),t.ksuid=r=>t.check(Em(oT,r)),t.ipv4=r=>t.check(Im(iT,r)),t.ipv6=r=>t.check(km(sT,r)),t.cidrv4=r=>t.check(Pm(aT,r)),t.cidrv6=r=>t.check(Am(cT,r)),t.e164=r=>t.check($m(dT,r)),t.datetime=r=>t.check(RS(r)),t.date=r=>t.check(NS(r)),t.time=r=>t.check(DS(r)),t.duration=r=>t.check(jS(r))});function JS(t){return Bx(Ou,t)}s(JS,"string");var kt=F("ZodStringFormat",(t,e)=>{St.init(t,e),WS.init(t,e)}),QS=F("ZodEmail",(t,e)=>{Hb.init(t,e),kt.init(t,e)});function V8(t){return fm(QS,t)}s(V8,"email");var zm=F("ZodGUID",(t,e)=>{Bb.init(t,e),kt.init(t,e)});function H8(t){return pu(zm,t)}s(H8,"guid");var Io=F("ZodUUID",(t,e)=>{Vb.init(t,e),kt.init(t,e)});function G8(t){return hm(Io,t)}s(G8,"uuid");function Z8(t){return gm(Io,t)}s(Z8,"uuidv4");function J8(t){return ym(Io,t)}s(J8,"uuidv6");function K8(t){return vm(Io,t)}s(K8,"uuidv7");var Bm=F("ZodURL",(t,e)=>{Gb.init(t,e),kt.init(t,e)});function W8(t){return mu(Bm,t)}s(W8,"url");function Q8(t){return mu(Bm,{protocol:/^https?$/,hostname:hn.domain,...le.normalizeParams(t)})}s(Q8,"httpUrl");var XS=F("ZodEmoji",(t,e)=>{Zb.init(t,e),kt.init(t,e)});function X8(t){return _m(XS,t)}s(X8,"emoji");var YS=F("ZodNanoID",(t,e)=>{Jb.init(t,e),kt.init(t,e)});function Y8(t){return bm(YS,t)}s(Y8,"nanoid");var eT=F("ZodCUID",(t,e)=>{Kb.init(t,e),kt.init(t,e)});function eG(t){return wm(eT,t)}s(eG,"cuid");var tT=F("ZodCUID2",(t,e)=>{Wb.init(t,e),kt.init(t,e)});function tG(t){return xm(tT,t)}s(tG,"cuid2");var rT=F("ZodULID",(t,e)=>{Qb.init(t,e),kt.init(t,e)});function rG(t){return Sm(rT,t)}s(rG,"ulid");var nT=F("ZodXID",(t,e)=>{Xb.init(t,e),kt.init(t,e)});function nG(t){return Tm(nT,t)}s(nG,"xid");var oT=F("ZodKSUID",(t,e)=>{Yb.init(t,e),kt.init(t,e)});function oG(t){return Em(oT,t)}s(oG,"ksuid");var iT=F("ZodIPv4",(t,e)=>{ow.init(t,e),kt.init(t,e)});function iG(t){return Im(iT,t)}s(iG,"ipv4");var z$=F("ZodMAC",(t,e)=>{sw.init(t,e),kt.init(t,e)});function sG(t){return Hx(z$,t)}s(sG,"mac");var sT=F("ZodIPv6",(t,e)=>{iw.init(t,e),kt.init(t,e)});function aG(t){return km(sT,t)}s(aG,"ipv6");var aT=F("ZodCIDRv4",(t,e)=>{aw.init(t,e),kt.init(t,e)});function cG(t){return Pm(aT,t)}s(cG,"cidrv4");var cT=F("ZodCIDRv6",(t,e)=>{cw.init(t,e),kt.init(t,e)});function uG(t){return Am(cT,t)}s(uG,"cidrv6");var uT=F("ZodBase64",(t,e)=>{lw.init(t,e),kt.init(t,e)});function lG(t){return Cm(uT,t)}s(lG,"base64");var lT=F("ZodBase64URL",(t,e)=>{dw.init(t,e),kt.init(t,e)});function dG(t){return Om(lT,t)}s(dG,"base64url");var dT=F("ZodE164",(t,e)=>{pw.init(t,e),kt.init(t,e)});function pG(t){return $m(dT,t)}s(pG,"e164");var pT=F("ZodJWT",(t,e)=>{mw.init(t,e),kt.init(t,e)});function mG(t){return Rm(pT,t)}s(mG,"jwt");var $u=F("ZodCustomStringFormat",(t,e)=>{fw.init(t,e),kt.init(t,e)});function fG(t,e,r={}){return na($u,t,e,r)}s(fG,"stringFormat");function hG(t){return na($u,"hostname",hn.hostname,t)}s(hG,"hostname");function gG(t){return na($u,"hex",hn.hex,t)}s(gG,"hex");function yG(t,e){let r=e?.enc??"hex",n=`${t}_${r}`,o=hn[n];if(!o)throw new Error(`Unrecognized hash format: ${n}`);return na($u,n,o,e)}s(yG,"hash");var Ru=F("ZodNumber",(t,e)=>{um.init(t,e),et.init(t,e),t.gt=(n,o)=>t.check(To(n,o)),t.gte=(n,o)=>t.check(Kr(n,o)),t.min=(n,o)=>t.check(Kr(n,o)),t.lt=(n,o)=>t.check(So(n,o)),t.lte=(n,o)=>t.check(gn(n,o)),t.max=(n,o)=>t.check(gn(n,o)),t.int=n=>t.check(KS(n)),t.safe=n=>t.check(KS(n)),t.positive=n=>t.check(To(0,n)),t.nonnegative=n=>t.check(Kr(0,n)),t.negative=n=>t.check(So(0,n)),t.nonpositive=n=>t.check(gn(0,n)),t.multipleOf=(n,o)=>t.check(Vi(n,o)),t.step=(n,o)=>t.check(Vi(n,o)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function L$(t){return Qx(Ru,t)}s(L$,"number");var ia=F("ZodNumberFormat",(t,e)=>{hw.init(t,e),Ru.init(t,e)});function KS(t){return Yx(ia,t)}s(KS,"int");function vG(t){return eS(ia,t)}s(vG,"float32");function _G(t){return tS(ia,t)}s(_G,"float64");function bG(t){return rS(ia,t)}s(bG,"int32");function wG(t){return nS(ia,t)}s(wG,"uint32");var Nu=F("ZodBoolean",(t,e)=>{ou.init(t,e),et.init(t,e)});function q$(t){return oS(Nu,t)}s(q$,"boolean");var Du=F("ZodBigInt",(t,e)=>{lm.init(t,e),et.init(t,e),t.gte=(n,o)=>t.check(Kr(n,o)),t.min=(n,o)=>t.check(Kr(n,o)),t.gt=(n,o)=>t.check(To(n,o)),t.gte=(n,o)=>t.check(Kr(n,o)),t.min=(n,o)=>t.check(Kr(n,o)),t.lt=(n,o)=>t.check(So(n,o)),t.lte=(n,o)=>t.check(gn(n,o)),t.max=(n,o)=>t.check(gn(n,o)),t.positive=n=>t.check(To(BigInt(0),n)),t.negative=n=>t.check(So(BigInt(0),n)),t.nonpositive=n=>t.check(gn(BigInt(0),n)),t.nonnegative=n=>t.check(Kr(BigInt(0),n)),t.multipleOf=(n,o)=>t.check(Vi(n,o));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});function xG(t){return sS(Du,t)}s(xG,"bigint");var mT=F("ZodBigIntFormat",(t,e)=>{gw.init(t,e),Du.init(t,e)});function SG(t){return cS(mT,t)}s(SG,"int64");function TG(t){return uS(mT,t)}s(TG,"uint64");var F$=F("ZodSymbol",(t,e)=>{yw.init(t,e),et.init(t,e)});function EG(t){return lS(F$,t)}s(EG,"symbol");var B$=F("ZodUndefined",(t,e)=>{vw.init(t,e),et.init(t,e)});function IG(t){return dS(B$,t)}s(IG,"_undefined");var V$=F("ZodNull",(t,e)=>{_w.init(t,e),et.init(t,e)});function H$(t){return pS(V$,t)}s(H$,"_null");var G$=F("ZodAny",(t,e)=>{bw.init(t,e),et.init(t,e)});function kG(){return mS(G$)}s(kG,"any");var Z$=F("ZodUnknown",(t,e)=>{ww.init(t,e),et.init(t,e)});function oa(){return fS(Z$)}s(oa,"unknown");var J$=F("ZodNever",(t,e)=>{xw.init(t,e),et.init(t,e)});function fT(t){return hS(J$,t)}s(fT,"never");var K$=F("ZodVoid",(t,e)=>{Sw.init(t,e),et.init(t,e)});function PG(t){return gS(K$,t)}s(PG,"_void");var Vm=F("ZodDate",(t,e)=>{Tw.init(t,e),et.init(t,e),t.min=(n,o)=>t.check(Kr(n,o)),t.max=(n,o)=>t.check(gn(n,o));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function AG(t){return yS(Vm,t)}s(AG,"date");var W$=F("ZodArray",(t,e)=>{Ew.init(t,e),et.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(mi(r,n)),t.nonempty=r=>t.check(mi(1,r)),t.max=(r,n)=>t.check(ta(r,n)),t.length=(r,n)=>t.check(ra(r,n)),t.unwrap=()=>t.element});function Hm(t,e){return ES(W$,t,e)}s(Hm,"array");function CG(t){let e=t._zod.def.shape;return vT(Object.keys(e))}s(CG,"keyof");var Gm=F("ZodObject",(t,e)=>{Iw.init(t,e),et.init(t,e),le.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>vT(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:oa()}),t.loose=()=>t.clone({...t._zod.def,catchall:oa()}),t.strict=()=>t.clone({...t._zod.def,catchall:fT()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>le.extend(t,r),t.safeExtend=r=>le.safeExtend(t,r),t.merge=r=>le.merge(t,r),t.pick=r=>le.pick(t,r),t.omit=r=>le.omit(t,r),t.partial=(...r)=>le.partial(bT,t,r[0]),t.required=(...r)=>le.required(wT,t,r[0])});function OG(t,e){let r={type:"object",shape:t??{},...le.normalizeParams(e)};return new Gm(r)}s(OG,"object");function $G(t,e){return new Gm({type:"object",shape:t,catchall:fT(),...le.normalizeParams(e)})}s($G,"strictObject");function RG(t,e){return new Gm({type:"object",shape:t,catchall:oa(),...le.normalizeParams(e)})}s(RG,"looseObject");var hT=F("ZodUnion",(t,e)=>{dm.init(t,e),et.init(t,e),t.options=e.options});function gT(t,e){return new hT({type:"union",options:t,...le.normalizeParams(e)})}s(gT,"union");var Q$=F("ZodDiscriminatedUnion",(t,e)=>{hT.init(t,e),kw.init(t,e)});function NG(t,e,r){return new Q$({type:"union",options:e,discriminator:t,...le.normalizeParams(r)})}s(NG,"discriminatedUnion");var X$=F("ZodIntersection",(t,e)=>{Pw.init(t,e),et.init(t,e)});function Y$(t,e){return new X$({type:"intersection",left:t,right:e})}s(Y$,"intersection");var eR=F("ZodTuple",(t,e)=>{pm.init(t,e),et.init(t,e),t.rest=r=>t.clone({...t._zod.def,rest:r})});function tR(t,e,r){let n=e instanceof Ve,o=n?r:e,i=n?e:null;return new eR({type:"tuple",items:t,rest:i,...le.normalizeParams(o)})}s(tR,"tuple");var yT=F("ZodRecord",(t,e)=>{Aw.init(t,e),et.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function rR(t,e,r){return new yT({type:"record",keyType:t,valueType:e,...le.normalizeParams(r)})}s(rR,"record");function DG(t,e,r){let n=Rr(t);return n._zod.values=void 0,new yT({type:"record",keyType:n,valueType:e,...le.normalizeParams(r)})}s(DG,"partialRecord");var nR=F("ZodMap",(t,e)=>{Cw.init(t,e),et.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function jG(t,e,r){return new nR({type:"map",keyType:t,valueType:e,...le.normalizeParams(r)})}s(jG,"map");var oR=F("ZodSet",(t,e)=>{Ow.init(t,e),et.init(t,e),t.min=(...r)=>t.check(Hi(...r)),t.nonempty=r=>t.check(Hi(1,r)),t.max=(...r)=>t.check(ea(...r)),t.size=(...r)=>t.check(fu(...r))});function MG(t,e){return new oR({type:"set",valueType:t,...le.normalizeParams(e)})}s(MG,"set");var Cu=F("ZodEnum",(t,e)=>{$w.init(t,e),et.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,o)=>{let i={};for(let a of n)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Cu({...e,checks:[],...le.normalizeParams(o),entries:i})},t.exclude=(n,o)=>{let i={...e.entries};for(let a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new Cu({...e,checks:[],...le.normalizeParams(o),entries:i})}});function vT(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new Cu({type:"enum",entries:r,...le.normalizeParams(e)})}s(vT,"_enum");function UG(t,e){return new Cu({type:"enum",entries:t,...le.normalizeParams(e)})}s(UG,"nativeEnum");var iR=F("ZodLiteral",(t,e)=>{Rw.init(t,e),et.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function zG(t,e){return new iR({type:"literal",values:Array.isArray(t)?t:[t],...le.normalizeParams(e)})}s(zG,"literal");var sR=F("ZodFile",(t,e)=>{Nw.init(t,e),et.init(t,e),t.min=(r,n)=>t.check(Hi(r,n)),t.max=(r,n)=>t.check(ea(r,n)),t.mime=(r,n)=>t.check(wu(Array.isArray(r)?r:[r],n))});function LG(t){return IS(sR,t)}s(LG,"file");var aR=F("ZodTransform",(t,e)=>{Dw.init(t,e),et.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new ai(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(le.issue(i,r.value,e));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(le.issue(a))}};let o=e.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});function _T(t){return new aR({type:"transform",transform:t})}s(_T,"transform");var bT=F("ZodOptional",(t,e)=>{jw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Lm(t){return new bT({type:"optional",innerType:t})}s(Lm,"optional");var cR=F("ZodNullable",(t,e)=>{Mw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function qm(t){return new cR({type:"nullable",innerType:t})}s(qm,"nullable");function qG(t){return Lm(qm(t))}s(qG,"nullish");var uR=F("ZodDefault",(t,e)=>{Uw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function lR(t,e){return new uR({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():le.shallowClone(e)}})}s(lR,"_default");var dR=F("ZodPrefault",(t,e)=>{zw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function pR(t,e){return new dR({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():le.shallowClone(e)}})}s(pR,"prefault");var wT=F("ZodNonOptional",(t,e)=>{Lw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function mR(t,e){return new wT({type:"nonoptional",innerType:t,...le.normalizeParams(e)})}s(mR,"nonoptional");var fR=F("ZodSuccess",(t,e)=>{qw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function FG(t){return new fR({type:"success",innerType:t})}s(FG,"success");var hR=F("ZodCatch",(t,e)=>{Fw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function gR(t,e){return new hR({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}s(gR,"_catch");var yR=F("ZodNaN",(t,e)=>{Bw.init(t,e),et.init(t,e)});function BG(t){return _S(yR,t)}s(BG,"nan");var xT=F("ZodPipe",(t,e)=>{Vw.init(t,e),et.init(t,e),t.in=e.in,t.out=e.out});function Fm(t,e){return new xT({type:"pipe",in:t,out:e})}s(Fm,"pipe");var ST=F("ZodCodec",(t,e)=>{xT.init(t,e),iu.init(t,e)});function VG(t,e,r){return new ST({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}s(VG,"codec");var vR=F("ZodReadonly",(t,e)=>{Hw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function _R(t){return new vR({type:"readonly",innerType:t})}s(_R,"readonly");var bR=F("ZodTemplateLiteral",(t,e)=>{Gw.init(t,e),et.init(t,e)});function HG(t,e){return new bR({type:"template_literal",parts:t,...le.normalizeParams(e)})}s(HG,"templateLiteral");var wR=F("ZodLazy",(t,e)=>{Kw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.getter()});function xR(t){return new wR({type:"lazy",getter:t})}s(xR,"lazy");var SR=F("ZodPromise",(t,e)=>{Jw.init(t,e),et.init(t,e),t.unwrap=()=>t._zod.def.innerType});function GG(t){return new SR({type:"promise",innerType:t})}s(GG,"promise");var TR=F("ZodFunction",(t,e)=>{Zw.init(t,e),et.init(t,e)});function ZG(t){return new TR({type:"function",input:Array.isArray(t?.input)?tR(t?.input):t?.input??Hm(oa()),output:t?.output??oa()})}s(ZG,"_function");var Zm=F("ZodCustom",(t,e)=>{Ww.init(t,e),et.init(t,e)});function JG(t){let e=new It({check:"custom"});return e._zod.check=t,e}s(JG,"check");function KG(t,e){return kS(Zm,t??(()=>!0),e)}s(KG,"custom");function ER(t,e={}){return PS(Zm,t,e)}s(ER,"refine");function IR(t){return AS(t)}s(IR,"superRefine");var WG=CS,QG=OS;function XG(t,e={error:`Input not instance of ${t.name}`}){let r=new Zm({type:"custom",check:"custom",fn:s(n=>n instanceof t,"fn"),abort:!0,...le.normalizeParams(e)});return r._zod.bag.Class=t,r}s(XG,"_instanceof");var YG=s((...t)=>$S({Codec:ST,Boolean:Nu,String:Ou},...t),"stringbool");function eZ(t){let e=xR(()=>gT([JS(t),L$(),q$(),H$(),Hm(e),rR(JS(),e)]));return e}s(eZ,"json");function tZ(t,e){return Fm(_T(t),e)}s(tZ,"preprocess");var rZ={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function nZ(t){or({customError:t})}s(nZ,"setErrorMap");function oZ(){return or().customError}s(oZ,"getErrorMap");var Le;Le||(Le={});var TT={};en(TT,{bigint:()=>cZ,boolean:()=>aZ,date:()=>uZ,number:()=>sZ,string:()=>iZ});function iZ(t){return Vx(Ou,t)}s(iZ,"string");function sZ(t){return Xx(Ru,t)}s(sZ,"number");function aZ(t){return iS(Nu,t)}s(aZ,"boolean");function cZ(t){return aS(Du,t)}s(cZ,"bigint");function uZ(t){return vS(Vm,t)}s(uZ,"date");or(su());var lZ=c.object({arguments:c.record(c.string(),c.unknown()).optional().default({})}),ET=new Ce;ET.post("/:toolName",pe,Be("json",lZ),async t=>{let e=t.req.param("toolName"),{arguments:r}=t.req.valid("json");return t.json({error:"Not implemented",message:`Tool ${e} will be implemented in subsequent tasks`,toolName:e,receivedArgs:r},501)});var IT=new Ce;IT.route("/context",C_);IT.route("/tools",ET);var kT=IT;var PR="vercel.ai.error",dZ=Symbol.for(PR),AR,pZ=class CR extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[AR]=!0,this.name=e,this.cause=n}static isInstance(e){return CR.hasMarker(e,PR)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};AR=dZ;var kR=pZ,mZ="AI_APICallError",fZ=`vercel.ai.error.${mZ}`,hZ=Symbol.for(fZ),gZ;gZ=hZ;var yZ="AI_EmptyResponseBodyError",vZ=`vercel.ai.error.${yZ}`,_Z=Symbol.for(vZ),bZ;bZ=_Z;var OR="AI_InvalidArgumentError",$R=`vercel.ai.error.${OR}`,wZ=Symbol.for($R),RR,NR=class extends kR{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:OR,message:t,cause:e}),this[RR]=!0,this.argument=r}static isInstance(t){return kR.hasMarker(t,$R)}};RR=wZ;var xZ="AI_InvalidPromptError",SZ=`vercel.ai.error.${xZ}`,TZ=Symbol.for(SZ),EZ;EZ=TZ;var IZ="AI_InvalidResponseDataError",kZ=`vercel.ai.error.${IZ}`,PZ=Symbol.for(kZ),AZ;AZ=PZ;var CZ="AI_JSONParseError",OZ=`vercel.ai.error.${CZ}`,$Z=Symbol.for(OZ),RZ;RZ=$Z;var NZ="AI_LoadAPIKeyError",DZ=`vercel.ai.error.${NZ}`,jZ=Symbol.for(DZ),MZ;MZ=jZ;var UZ="AI_LoadSettingError",zZ=`vercel.ai.error.${UZ}`,LZ=Symbol.for(zZ),qZ;qZ=LZ;var FZ="AI_NoContentGeneratedError",BZ=`vercel.ai.error.${FZ}`,VZ=Symbol.for(BZ),HZ;HZ=VZ;var GZ="AI_NoSuchModelError",ZZ=`vercel.ai.error.${GZ}`,JZ=Symbol.for(ZZ),KZ;KZ=JZ;var WZ="AI_TooManyEmbeddingValuesForCallError",QZ=`vercel.ai.error.${WZ}`,XZ=Symbol.for(QZ),YZ;YZ=XZ;var eJ="AI_TypeValidationError",tJ=`vercel.ai.error.${eJ}`,rJ=Symbol.for(tJ),nJ;nJ=rJ;var oJ="AI_UnsupportedFunctionalityError",iJ=`vercel.ai.error.${oJ}`,sJ=Symbol.for(iJ),aJ;aJ=sJ;var DR=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var dJ=mo(Jm(),1);var lJ=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=DR(r,e);if(t==null)return o;if(r.includes(n))throw new NR({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),AT=lJ();var LR=Symbol.for("vercel.ai.validator");var{btoa:wPe,atob:xPe}=globalThis;var bJ=mo(Jm(),1);var FR=Symbol("Let zodToJsonSchema decide on which parser to use");var qR={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},BR=s(t=>typeof t=="string"?{...qR,name:t}:{...qR,...t},"getDefaultOptions");var VR=s(t=>{let e=BR(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs");function CT(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}s(CT,"addErrorMessage");function pt(t,e,r,n,o){t[e]=r,CT(t,e,n,o)}s(pt,"setResponseValueAndErrors");var Km=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath");function qt(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?Km(e,t.currentPath):e.join("/")}}s(qt,"parseAnyDef");function HR(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==Le.ZodAny&&(r.items=je(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&pt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&pt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(pt(r,"minItems",t.exactLength.value,t.exactLength.message,e),pt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}s(HR,"parseArrayDef");function GR(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?pt(r,"minimum",n.value,n.message,e):pt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),pt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?pt(r,"maximum",n.value,n.message,e):pt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),pt(r,"maximum",n.value,n.message,e));break;case"multipleOf":pt(r,"multipleOf",n.value,n.message,e);break}return r}s(GR,"parseBigintDef");function ZR(){return{type:"boolean"}}s(ZR,"parseBooleanDef");function Wm(t,e){return je(t.type._def,e)}s(Wm,"parseBrandedDef");var JR=s((t,e)=>je(t.innerType._def,e),"parseCatchDef");function OT(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>OT(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return pJ(t,e)}}s(OT,"parseDateDef");var pJ=s((t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":pt(r,"minimum",n.value,n.message,e);break;case"max":pt(r,"maximum",n.value,n.message,e);break}return r},"integerDateParser");function KR(t,e){return{...je(t.innerType._def,e),default:t.defaultValue()}}s(KR,"parseDefaultDef");function WR(t,e){return e.effectStrategy==="input"?je(t.schema._def,e):qt(e)}s(WR,"parseEffectsDef");function QR(t){return{type:"string",enum:Array.from(t.values)}}s(QR,"parseEnumDef");var mJ=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function XR(t,e){let r=[je(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),je(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(mJ(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:u,...l}=i;a=l}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}s(XR,"parseIntersectionDef");function YR(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}s(YR,"parseLiteralDef");var $T,kn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>($T===void 0&&($T=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$T),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Qm(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":pt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":pt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Pn(r,"email",n.message,e);break;case"format:idn-email":Pn(r,"idn-email",n.message,e);break;case"pattern:zod":jr(r,kn.email,n.message,e);break}break;case"url":Pn(r,"uri",n.message,e);break;case"uuid":Pn(r,"uuid",n.message,e);break;case"regex":jr(r,n.regex,n.message,e);break;case"cuid":jr(r,kn.cuid,n.message,e);break;case"cuid2":jr(r,kn.cuid2,n.message,e);break;case"startsWith":jr(r,RegExp(`^${RT(n.value,e)}`),n.message,e);break;case"endsWith":jr(r,RegExp(`${RT(n.value,e)}$`),n.message,e);break;case"datetime":Pn(r,"date-time",n.message,e);break;case"date":Pn(r,"date",n.message,e);break;case"time":Pn(r,"time",n.message,e);break;case"duration":Pn(r,"duration",n.message,e);break;case"length":pt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),pt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{jr(r,RegExp(RT(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Pn(r,"ipv4",n.message,e),n.version!=="v4"&&Pn(r,"ipv6",n.message,e);break}case"base64url":jr(r,kn.base64url,n.message,e);break;case"jwt":jr(r,kn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&jr(r,kn.ipv4Cidr,n.message,e),n.version!=="v4"&&jr(r,kn.ipv6Cidr,n.message,e);break}case"emoji":jr(r,kn.emoji(),n.message,e);break;case"ulid":{jr(r,kn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Pn(r,"binary",n.message,e);break}case"contentEncoding:base64":{pt(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{jr(r,kn.base64,n.message,e);break}}break}case"nanoid":jr(r,kn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(Qm,"parseStringDef");function RT(t,e){return e.patternStrategy==="escape"?hJ(t):t}s(RT,"escapeLiteralCheckValue");var fJ=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function hJ(t){let e="";for(let r=0;r<t.length;r++)fJ.has(t[r])||(e+="\\"),e+=t[r];return e}s(hJ,"escapeNonAlphaNumeric");function Pn(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):pt(t,"format",e,r,n)}s(Pn,"addFormat");function jr(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:eN(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):pt(t,"pattern",eN(e,n),r,n)}s(jr,"addPattern");function eN(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,u=!1;for(let l=0;l<n.length;l++){if(i){o+=n[l],i=!1;continue}if(r.i){if(a){if(n[l].match(/[a-z]/)){u?(o+=n[l],o+=`${n[l-2]}-${n[l]}`.toUpperCase(),u=!1):n[l+1]==="-"&&n[l+2]?.match(/[a-z]/)?(o+=n[l],u=!0):o+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){o+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(r.m){if(n[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[l]==="."){o+=a?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}o+=n[l],n[l]==="\\"?i=!0:a&&n[l]==="]"?a=!1:!a&&n[l]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}s(eN,"stringifyRegExpWithFlags");function Xm(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===Le.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:je(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??qt(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:je(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===Le.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=Qm(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===Le.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===Le.ZodBranded&&t.keyType._def.type._def.typeName===Le.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=Wm(t.keyType._def,e);return{...r,propertyNames:o}}}return r}s(Xm,"parseRecordDef");function tN(t,e){if(e.mapStrategy==="record")return Xm(t,e);let r=je(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||qt(e),n=je(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||qt(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(tN,"parseMapDef");function rN(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(rN,"parseNativeEnumDef");function nN(t){return t.target==="openAi"?void 0:{not:qt({...t,currentPath:[...t.currentPath,"not"]})}}s(nN,"parseNeverDef");function oN(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}s(oN,"parseNullDef");var ju={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function sN(t,e){if(e.target==="openApi3")return iN(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in ju&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=ju[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,u)=>u.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return iN(t,e)}s(sN,"parseUnionDef");var iN=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>je(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function aN(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:ju[t.innerType._def.typeName],nullable:!0}:{type:[ju[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=je(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=je(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(aN,"parseNullableDef");function cN(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",CT(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?pt(r,"minimum",n.value,n.message,e):pt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),pt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?pt(r,"maximum",n.value,n.message,e):pt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),pt(r,"maximum",n.value,n.message,e));break;case"multipleOf":pt(r,"multipleOf",n.value,n.message,e);break}return r}s(cN,"parseNumberDef");function uN(t,e){let r=e.target==="openAi",n={type:"object",properties:{}},o=[],i=t.shape();for(let u in i){let l=i[u];if(l===void 0||l._def===void 0)continue;let d=yJ(l);d&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let p=je(l._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});p!==void 0&&(n.properties[u]=p,d||o.push(u))}o.length&&(n.required=o);let a=gJ(t,e);return a!==void 0&&(n.additionalProperties=a),n}s(uN,"parseObjectDef");function gJ(t,e){if(t.catchall._def.typeName!=="ZodNever")return je(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(gJ,"decideAdditionalProperties");function yJ(t){try{return t.isOptional()}catch{return!0}}s(yJ,"safeIsOptional");var lN=s((t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return je(t.innerType._def,e);let r=je(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:qt(e)},r]}:qt(e)},"parseOptionalDef");var dN=s((t,e)=>{if(e.pipeStrategy==="input")return je(t.in._def,e);if(e.pipeStrategy==="output")return je(t.out._def,e);let r=je(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=je(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function pN(t,e){return je(t.type._def,e)}s(pN,"parsePromiseDef");function mN(t,e){let n={type:"array",uniqueItems:!0,items:je(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&pt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&pt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}s(mN,"parseSetDef");function fN(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>je(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:je(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>je(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(fN,"parseTupleDef");function hN(t){return{not:qt(t)}}s(hN,"parseUndefinedDef");function gN(t){return qt(t)}s(gN,"parseUnknownDef");var yN=s((t,e)=>je(t.innerType._def,e),"parseReadonlyDef");var vN=s((t,e,r)=>{switch(e){case Le.ZodString:return Qm(t,r);case Le.ZodNumber:return cN(t,r);case Le.ZodObject:return uN(t,r);case Le.ZodBigInt:return GR(t,r);case Le.ZodBoolean:return ZR();case Le.ZodDate:return OT(t,r);case Le.ZodUndefined:return hN(r);case Le.ZodNull:return oN(r);case Le.ZodArray:return HR(t,r);case Le.ZodUnion:case Le.ZodDiscriminatedUnion:return sN(t,r);case Le.ZodIntersection:return XR(t,r);case Le.ZodTuple:return fN(t,r);case Le.ZodRecord:return Xm(t,r);case Le.ZodLiteral:return YR(t,r);case Le.ZodEnum:return QR(t);case Le.ZodNativeEnum:return rN(t);case Le.ZodNullable:return aN(t,r);case Le.ZodOptional:return lN(t,r);case Le.ZodMap:return tN(t,r);case Le.ZodSet:return mN(t,r);case Le.ZodLazy:return()=>t.getter()._def;case Le.ZodPromise:return pN(t,r);case Le.ZodNaN:case Le.ZodNever:return nN(r);case Le.ZodEffects:return WR(t,r);case Le.ZodAny:return qt(r);case Le.ZodUnknown:return gN(r);case Le.ZodDefault:return KR(t,r);case Le.ZodBranded:return Wm(t,r);case Le.ZodReadonly:return yN(t,r);case Le.ZodCatch:return JR(t,r);case Le.ZodPipeline:return dN(t,r);case Le.ZodFunction:case Le.ZodVoid:case Le.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function je(t,e,r=!1){let n=e.seen.get(t);if(e.override){let u=e.override?.(t,e,n,r);if(u!==FR)return u}if(n&&!r){let u=vJ(n,e);if(u!==void 0)return u}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=vN(t,t.typeName,e),a=typeof i=="function"?je(i(),e):i;if(a&&_J(t,e,a),e.postProcess){let u=e.postProcess(a,t,e);return o.jsonSchema=a,u}return o.jsonSchema=a,a}s(je,"parseDef");var vJ=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Km(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),qt(e)):e.$refStrategy==="seen"?qt(e):void 0}},"get$ref"),_J=s((t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),"addMeta");var _N=s((t,e)=>{let r=VR(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,p])=>({...l,[d]:je(p._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??qt(r)}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=je(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??qt(r),a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let u=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u},"zodToJsonSchema");var bN=_N;var Mu={code:"0",name:"text",parse:s(t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}},"parse")},Uu={code:"1",name:"function_call",parse:s(t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}},"parse")},zu={code:"2",name:"data",parse:s(t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}},"parse")},Lu={code:"3",name:"error",parse:s(t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}},"parse")},qu={code:"4",name:"assistant_message",parse:s(t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}},"parse")},Fu={code:"5",name:"assistant_control_data",parse:s(t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}},"parse")},Bu={code:"6",name:"data_message",parse:s(t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}},"parse")},Vu={code:"7",name:"tool_calls",parse:s(t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}},"parse")},Hu={code:"8",name:"message_annotations",parse:s(t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}},"parse")},Gu={code:"9",name:"tool_call",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}},"parse")},Zu={code:"a",name:"tool_result",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}},"parse")},Ju={code:"b",name:"tool_call_streaming_start",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}},"parse")},Ku={code:"c",name:"tool_call_delta",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}},"parse")},Wu={code:"d",name:"finish_message",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}},"parse")},Qu={code:"e",name:"finish_step",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}},"parse")},wN=[Mu,Uu,zu,Lu,qu,Fu,Bu,Vu,Hu,Gu,Zu,Ju,Ku,Wu,Qu],eOe={[Mu.code]:Mu,[Uu.code]:Uu,[zu.code]:zu,[Lu.code]:Lu,[qu.code]:qu,[Fu.code]:Fu,[Bu.code]:Bu,[Vu.code]:Vu,[Hu.code]:Hu,[Gu.code]:Gu,[Zu.code]:Zu,[Ju.code]:Ju,[Ku.code]:Ku,[Wu.code]:Wu,[Qu.code]:Qu},tOe={[Mu.name]:Mu.code,[Uu.name]:Uu.code,[zu.name]:zu.code,[Lu.name]:Lu.code,[qu.name]:qu.code,[Fu.name]:Fu.code,[Bu.name]:Bu.code,[Vu.name]:Vu.code,[Hu.name]:Hu.code,[Gu.name]:Gu.code,[Zu.name]:Zu.code,[Ju.name]:Ju.code,[Ku.name]:Ku.code,[Wu.name]:Wu.code,[Qu.name]:Qu.code},rOe=wN.map(t=>t.code);function An(t,e){let r=wN.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}s(An,"formatStreamPart");var NT=Symbol.for("vercel.ai.schema");function wJ(t,{validate:e}={}){return{[NT]:!0,_type:void 0,[LR]:!0,jsonSchema:t,validate:e}}s(wJ,"jsonSchema");function xJ(t){return typeof t=="object"&&t!==null&&NT in t&&t[NT]===!0&&"jsonSchema"in t&&"validate"in t}s(xJ,"isSchema");function Ym(t){return xJ(t)?t:SJ(t)}s(Ym,"asSchema");function SJ(t){return wJ(bN(t),{validate:s(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}},"validate")})}s(SJ,"zodSchema");var xN="vercel.ai.error",TJ=Symbol.for(xN),SN,EJ=class TN extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[SN]=!0,this.name=e,this.cause=n}static isInstance(e){return TN.hasMarker(e,xN)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};SN=TJ;var mt=EJ,DT="AI_APICallError",EN=`vercel.ai.error.${DT}`,IJ=Symbol.for(EN),IN,kN=class extends mt{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:u=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:DT,message:t,cause:a}),this[IN]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=u,this.data=l}static isInstance(t){return mt.hasMarker(t,EN)}static isAPICallError(t){return t instanceof Error&&t.name===DT&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};IN=IJ;var kJ="AI_EmptyResponseBodyError",PJ=`vercel.ai.error.${kJ}`,AJ=Symbol.for(PJ),CJ;CJ=AJ;function ef(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(ef,"getErrorMessage");var PN="AI_InvalidArgumentError",AN=`vercel.ai.error.${PN}`,OJ=Symbol.for(AN),CN,ON=class extends mt{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:PN,message:t,cause:e}),this[CN]=!0,this.argument=r}static isInstance(t){return mt.hasMarker(t,AN)}};CN=OJ;var jT="AI_InvalidPromptError",$N=`vercel.ai.error.${jT}`,$J=Symbol.for($N),RN,Gi=class extends mt{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:jT,message:`Invalid prompt: ${e}`,cause:r}),this[RN]=!0,this.prompt=t}static isInstance(t){return mt.hasMarker(t,$N)}static isInvalidPromptError(t){return t instanceof Error&&t.name===jT&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};RN=$J;var RJ="AI_InvalidResponseDataError",NJ=`vercel.ai.error.${RJ}`,DJ=Symbol.for(NJ),jJ;jJ=DJ;var MT="AI_JSONParseError",NN=`vercel.ai.error.${MT}`,MJ=Symbol.for(NN),DN,LT=class extends mt{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:MT,message:`JSON parsing failed: Text: ${t}.
Error message: ${ef(e)}`,cause:e}),this[DN]=!0,this.text=t}static isInstance(t){return mt.hasMarker(t,NN)}static isJSONParseError(t){return t instanceof Error&&t.name===MT&&"text"in t&&typeof t.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};DN=MJ;var UJ="AI_LoadAPIKeyError",zJ=`vercel.ai.error.${UJ}`,LJ=Symbol.for(zJ),qJ;qJ=LJ;var FJ="AI_LoadSettingError",BJ=`vercel.ai.error.${FJ}`,VJ=Symbol.for(BJ),HJ;HJ=VJ;var GJ="AI_NoContentGeneratedError",ZJ=`vercel.ai.error.${GJ}`,JJ=Symbol.for(ZJ),KJ;KJ=JJ;var WJ="AI_NoSuchModelError",QJ=`vercel.ai.error.${WJ}`,XJ=Symbol.for(QJ),YJ;YJ=XJ;var eK="AI_TooManyEmbeddingValuesForCallError",tK=`vercel.ai.error.${eK}`,rK=Symbol.for(tK),nK;nK=rK;var UT="AI_TypeValidationError",jN=`vercel.ai.error.${UT}`,oK=Symbol.for(jN),MN,iK=class zT extends mt{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:UT,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${ef(r)}`,cause:r}),this[MN]=!0,this.value=e}static isInstance(e){return mt.hasMarker(e,jN)}static wrap({value:e,cause:r}){return zT.isInstance(r)&&r.value===e?r:new zT({value:e,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===UT}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};MN=oK;var tf=iK,sK="AI_UnsupportedFunctionalityError",aK=`vercel.ai.error.${sK}`,cK=Symbol.for(aK),uK;uK=cK;var UN=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var qN=mo(Jm(),1);var ko=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=UN(r,e);if(t==null)return o;if(r.includes(n))throw new ON({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),yOe=ko();function zN(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(zN,"getErrorMessage");function LN(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}s(LN,"isAbortError");var qT=Symbol.for("vercel.ai.validator");function lK(t){return{[qT]:!0,validate:t}}s(lK,"validator");function dK(t){return typeof t=="object"&&t!==null&&qT in t&&t[qT]===!0&&"validate"in t}s(dK,"isValidator");function pK(t){return dK(t)?t:mK(t)}s(pK,"asValidator");function mK(t){return lK(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}s(mK,"zodValidator");function Xu({value:t,schema:e}){let r=pK(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:tf.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:tf.wrap({value:t,cause:n})}}}s(Xu,"safeValidateTypes");function FT({text:t,schema:e}){try{let r=qN.default.parse(t);return e==null?{success:!0,value:r}:Xu({value:r,schema:e})}catch(r){return{success:!1,error:LT.isJSONParseError(r)?r:new LT({text:t,cause:r})}}}s(FT,"safeParseJSON");var{btoa:fK,atob:hK}=globalThis;function FN(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=hK(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(FN,"convertBase64ToUint8Array");function BT(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return fK(e)}s(BT,"convertUint8ArrayToBase64");var BN=typeof globalThis=="object"?globalThis:global;var Po="1.9.0";var VN=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function gK(t){var e=new Set([t]),r=new Set,n=t.match(VN);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return s(function(l){return l===t},"isExactmatch");function i(u){return r.add(u),!1}s(i,"_reject");function a(u){return e.add(u),!0}return s(a,"_accept"),s(function(l){if(e.has(l))return!0;if(r.has(l))return!1;var d=l.match(VN);if(!d)return i(l);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||o.major!==p.major?i(l):o.major===0?o.minor===p.minor&&o.patch<=p.patch?a(l):i(l):o.minor<=p.minor?a(l):i(l)},"isCompatible")}s(gK,"_makeCompatibilityCheck");var HN=gK(Po);var yK=Po.split(".")[0],Yu=Symbol.for("opentelemetry.js.api."+yK),el=BN;function aa(t,e,r,n){var o;n===void 0&&(n=!1);var i=el[Yu]=(o=el[Yu])!==null&&o!==void 0?o:{version:Po};if(!n&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==Po){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+Po);return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Po+"."),!0}s(aa,"registerGlobal");function Ao(t){var e,r,n=(e=el[Yu])===null||e===void 0?void 0:e.version;if(!(!n||!HN(n)))return(r=el[Yu])===null||r===void 0?void 0:r[t]}s(Ao,"getGlobal");function ca(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Po+".");var r=el[Yu];r&&delete r[t]}s(ca,"unregisterGlobal");var vK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},_K=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},GN=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return s(t,"DiagComponentLogger"),t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return tl("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return tl("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return tl("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return tl("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return tl("verbose",this._namespace,e)},t})();function tl(t,e,r){var n=Ao("diag");if(n)return r.unshift(e),n[t].apply(n,_K([],vK(r),!1))}s(tl,"logProxy");var Mr;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Mr||(Mr={}));function ZN(t,e){t<Mr.NONE?t=Mr.NONE:t>Mr.ALL&&(t=Mr.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return s(r,"_filterFunc"),{error:r("error",Mr.ERROR),warn:r("warn",Mr.WARN),info:r("info",Mr.INFO),debug:r("debug",Mr.DEBUG),verbose:r("verbose",Mr.VERBOSE)}}s(ZN,"createLogLevelDiagLogger");var bK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},wK=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},xK="diag",ua=(function(){function t(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var u=Ao("diag");if(u)return u[o].apply(u,wK([],bK(i),!1))}}s(e,"_logProxy");var r=this,n=s(function(o,i){var a,u,l;if(i===void 0&&(i={logLevel:Mr.INFO}),o===r){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof i=="number"&&(i={logLevel:i});var p=Ao("diag"),f=ZN((u=i.logLevel)!==null&&u!==void 0?u:Mr.INFO,o);if(p&&!i.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+h),f.warn("Current logger will overwrite one already registered from "+h)}return aa("diag",f,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){ca(xK,r)},r.createComponentLogger=function(o){return new GN(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return s(t,"DiagAPI"),t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();function JN(t){return Symbol.for(t)}s(JN,"createContextKey");var SK=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return s(t,"BaseContext"),t})(),KN=new SK;var TK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},EK=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},WN=(function(){function t(){}return s(t,"NoopContextManager"),t.prototype.active=function(){return KN},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,EK([n],TK(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})();var IK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},kK=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},VT="context",PK=new WN,rf=(function(){function t(){}return s(t,"ContextAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return aa(VT,e,ua.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,kK([e,r,n],IK(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Ao(VT)||PK},t.prototype.disable=function(){this._getContextManager().disable(),ca(VT,ua.instance())},t})();var nf;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(nf||(nf={}));var HT="0000000000000000",GT="00000000000000000000000000000000",QN={traceId:GT,spanId:HT,traceFlags:nf.NONE};var fi=(function(){function t(e){e===void 0&&(e=QN),this._spanContext=e}return s(t,"NonRecordingSpan"),t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})();var ZT=JN("OpenTelemetry Context Key SPAN");function of(t){return t.getValue(ZT)||void 0}s(of,"getSpan");function XN(){return of(rf.getInstance().active())}s(XN,"getActiveSpan");function rl(t,e){return t.setValue(ZT,e)}s(rl,"setSpan");function YN(t){return t.deleteValue(ZT)}s(YN,"deleteSpan");function eD(t,e){return rl(t,new fi(e))}s(eD,"setSpanContext");function sf(t){var e;return(e=of(t))===null||e===void 0?void 0:e.spanContext()}s(sf,"getSpanContext");var AK=/^([0-9a-f]{32})$/i,CK=/^[0-9a-f]{16}$/i;function OK(t){return AK.test(t)&&t!==GT}s(OK,"isValidTraceId");function $K(t){return CK.test(t)&&t!==HT}s($K,"isValidSpanId");function af(t){return OK(t.traceId)&&$K(t.spanId)}s(af,"isSpanContextValid");function tD(t){return new fi(t)}s(tD,"wrapSpanContext");var JT=rf.getInstance(),cf=(function(){function t(){}return s(t,"NoopTracer"),t.prototype.startSpan=function(e,r,n){n===void 0&&(n=JT.active());var o=!!r?.root;if(o)return new fi;var i=n&&sf(n);return RK(i)&&af(i)?new fi(i):new fi},t.prototype.startActiveSpan=function(e,r,n,o){var i,a,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=n):(i=r,a=n,u=o);var l=a??JT.active(),d=this.startSpan(e,i,l),p=rl(l,d);return JT.with(p,u,void 0,d)}},t})();function RK(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}s(RK,"isSpanContext");var NK=new cf,rD=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return s(t,"ProxyTracer"),t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):NK},t})();var nD=(function(){function t(){}return s(t,"NoopTracerProvider"),t.prototype.getTracer=function(e,r,n){return new cf},t})();var DK=new nD,KT=(function(){function t(){}return s(t,"ProxyTracerProvider"),t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new rD(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:DK},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})();var la;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(la||(la={}));var WT="trace",oD=(function(){function t(){this._proxyTracerProvider=new KT,this.wrapSpanContext=tD,this.isSpanContextValid=af,this.deleteSpan=YN,this.getSpan=of,this.getActiveSpan=XN,this.getSpanContext=sf,this.setSpan=rl,this.setSpanContext=eD}return s(t,"TraceAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=aa(WT,this._proxyTracerProvider,ua.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Ao(WT)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){ca(WT,ua.instance()),this._proxyTracerProvider=new KT},t})();var QT=oD.getInstance();var jK=Object.defineProperty,pD=s((t,e)=>{for(var r in e)jK(t,r,{get:e[r],enumerable:!0})},"__export");async function MK(t){return t===void 0?Promise.resolve():new Promise(e=>setTimeout(e,t))}s(MK,"delay");var YT="AI_RetryError",mD=`vercel.ai.error.${YT}`,UK=Symbol.for(mD),fD,iD=class extends mt{static{s(this,"RetryError")}constructor({message:t,reason:e,errors:r}){super({name:YT,message:t}),this[fD]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return mt.hasMarker(t,mD)}static isRetryError(t){return t instanceof Error&&t.name===YT&&typeof t.reason=="string"&&Array.isArray(t.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};fD=UK;var zK=s(({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>hD(n,{maxRetries:t,delayInMs:e,backoffFactor:r}),"retryWithExponentialBackoff");async function hD(t,{maxRetries:e,delayInMs:r,backoffFactor:n},o=[]){try{return await t()}catch(i){if(LN(i)||e===0)throw i;let a=zN(i),u=[...o,i],l=u.length;if(l>e)throw new iD({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:u});if(i instanceof Error&&kN.isAPICallError(i)&&i.isRetryable===!0&&l<=e)return await MK(r),hD(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},u);throw l===1?i:new iD({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:u})}}s(hD,"_retryWithExponentialBackoff");function e0({operationId:t,telemetry:e}){return{"operation.name":`${t}${e?.functionId!=null?` ${e.functionId}`:""}`,"resource.name":e?.functionId,"ai.operationId":t,"ai.telemetry.functionId":e?.functionId}}s(e0,"assembleOperationName");function LK({model:t,settings:e,telemetry:r,headers:n}){var o;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((i,[a,u])=>(i[`ai.settings.${a}`]=u,i),{}),...Object.entries((o=r?.metadata)!=null?o:{}).reduce((i,[a,u])=>(i[`ai.telemetry.metadata.${a}`]=u,i),{}),...Object.entries(n??{}).reduce((i,[a,u])=>(u!==void 0&&(i[`ai.request.headers.${a}`]=u),i),{})}}s(LK,"getBaseTelemetryAttributes");var qK={startSpan(){return uf},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(uf);if(typeof r=="function")return r(uf);if(typeof n=="function")return n(uf)}},uf={spanContext(){return FK},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},FK={traceId:"",spanId:"",traceFlags:0};function BK({isEnabled:t=!1,tracer:e}={}){return t?e||QT.getTracer("ai"):qK}s(BK,"getTracer");function t0({name:t,tracer:e,attributes:r,fn:n,endWhenDone:o=!0}){return e.startActiveSpan(t,{attributes:r},async i=>{try{let a=await n(i);return o&&i.end(),a}catch(a){try{a instanceof Error?(i.recordException({name:a.name,message:a.message,stack:a.stack}),i.setStatus({code:la.ERROR,message:a.message})):i.setStatus({code:la.ERROR})}finally{i.end()}throw a}})}s(t0,"recordSpan");function da({telemetry:t,attributes:e}){return t?.isEnabled!==!0?{}:Object.entries(e).reduce((r,[n,o])=>{if(o===void 0)return r;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(t?.recordInputs===!1)return r;let i=o.input();return i===void 0?r:{...r,[n]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(t?.recordOutputs===!1)return r;let i=o.output();return i===void 0?r:{...r,[n]:i}}return{...r,[n]:o}},{})}s(da,"selectTelemetryAttributes");var r0="AI_DownloadError",gD=`vercel.ai.error.${r0}`,VK=Symbol.for(gD),yD,XT=class extends mt{static{s(this,"DownloadError")}constructor({url:t,statusCode:e,statusText:r,cause:n,message:o=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:r0,message:o,cause:n}),this[yD]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return mt.hasMarker(t,gD)}static isDownloadError(t){return t instanceof Error&&t.name===r0&&typeof t.url=="string"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.statusText==null||typeof t.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};yD=VK;async function HK({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let o=await e(n);if(!o.ok)throw new XT({url:n,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mimeType:(r=o.headers.get("content-type"))!=null?r:void 0}}catch(o){throw XT.isInstance(o)?o:new XT({url:n,cause:o})}}s(HK,"download");var GK=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function ZK(t){for(let{bytes:e,mimeType:r}of GK)if(t.length>=e.length&&e.every((n,o)=>t[o]===n))return r}s(ZK,"detectImageMimeType");var n0="AI_InvalidDataContentError",vD=`vercel.ai.error.${n0}`,JK=Symbol.for(vD),_D,sD=class extends mt{static{s(this,"InvalidDataContentError")}constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:n0,message:r,cause:e}),this[_D]=!0,this.content=t}static isInstance(t){return mt.hasMarker(t,vD)}static isInvalidDataContentError(t){return t instanceof Error&&t.name===n0&&t.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};_D=JK;var bD=c.union([c.string(),c.instanceof(Uint8Array),c.instanceof(ArrayBuffer),c.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function KK(t){return typeof t=="string"?t:t instanceof ArrayBuffer?BT(new Uint8Array(t)):BT(t)}s(KK,"convertDataContentToBase64String");function lf(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return FN(t)}catch(e){throw new sD({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new sD({content:t})}s(lf,"convertDataContentToUint8Array");function WK(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}s(WK,"convertUint8ArrayToText");var o0="AI_InvalidMessageRoleError",wD=`vercel.ai.error.${o0}`,QK=Symbol.for(wD),xD,XK=class extends mt{static{s(this,"InvalidMessageRoleError")}constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:o0,message:e}),this[xD]=!0,this.role=t}static isInstance(t){return mt.hasMarker(t,wD)}static isInvalidMessageRoleError(t){return t instanceof Error&&t.name===o0&&typeof t.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};xD=QK;function YK(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}s(YK,"splitDataUrl");async function eW({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=s(()=>!1,"modelSupportsUrl"),downloadImplementation:n=HK}){let o=await rW(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(i=>tW(i,o))]}s(eW,"convertToLanguageModelPrompt");function tW(t,e){let r=t.role;switch(r){case"system":return{role:"system",content:t.content,providerMetadata:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"user",content:t.content.map(n=>nW(n,e)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:o,...i}=n;return{...i,providerMetadata:o}}),providerMetadata:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:t.experimental_providerMetadata};default:{let n=r;throw new XK({role:n})}}}s(tW,"convertToLanguageModelMessage");async function rW(t,e,r,n){let o=t.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&r===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!n(a)),i=await Promise.all(o.map(async a=>({url:a,data:await e({url:a})})));return Object.fromEntries(i.map(({url:a,data:u})=>[a.toString(),u]))}s(rW,"downloadAssets");function nW(t,e){if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let r=t.mimeType,n,o,i,a=t.type;switch(a){case"image":n=t.image;break;case"file":n=t.data;break;default:throw new Error(`Unsupported part type: ${a}`)}try{o=typeof n=="string"?new URL(n):n}catch{o=n}if(o instanceof URL)if(o.protocol==="data:"){let{mimeType:u,base64Content:l}=YK(o.toString());if(u==null||l==null)throw new Error(`Invalid data URL format in part ${a}`);r=u,i=lf(l)}else{let u=e[o.toString()];u?(i=u.data,r??(r=u.mimeType)):i=o}else i=lf(o);switch(a){case"image":return r==null&&i instanceof Uint8Array&&(r=ZK(i)),{type:"image",image:i,mimeType:r,providerMetadata:t.experimental_providerMetadata};case"file":if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:i instanceof Uint8Array?KK(i):i,mimeType:r,providerMetadata:t.experimental_providerMetadata}}}s(nW,"convertPartToLanguageModelPart");var i0="AI_InvalidArgumentError",SD=`vercel.ai.error.${i0}`,oW=Symbol.for(SD),TD,Cn=class extends mt{static{s(this,"InvalidArgumentError")}constructor({parameter:t,value:e,message:r}){super({name:i0,message:`Invalid argument for parameter ${t}: ${r}`}),this[TD]=!0,this.parameter=t,this.value=e}static isInstance(t){return mt.hasMarker(t,SD)}static isInvalidArgumentError(t){return t instanceof Error&&t.name===i0&&typeof t.parameter=="string"&&typeof t.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};TD=oW;function iW({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:u,maxRetries:l}){if(t!=null){if(!Number.isInteger(t))throw new Cn({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new Cn({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new Cn({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Cn({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Cn({parameter:"topK",value:n,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Cn({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Cn({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(u!=null&&!Number.isInteger(u))throw new Cn({parameter:"seed",value:u,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new Cn({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new Cn({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a!=null&&a.length>0?a:void 0,seed:u,maxRetries:l??2}}s(iW,"prepareCallSettings");var s0=c.lazy(()=>c.union([c.null(),c.string(),c.number(),c.boolean(),c.record(c.string(),s0),c.array(s0)])),hi=c.record(c.string(),c.record(c.string(),s0)),sW=c.array(c.union([c.object({type:c.literal("text"),text:c.string()}),c.object({type:c.literal("image"),data:c.string(),mimeType:c.string().optional()})])),ED=c.object({type:c.literal("text"),text:c.string(),experimental_providerMetadata:hi.optional()}),aW=c.object({type:c.literal("image"),image:c.union([bD,c.instanceof(URL)]),mimeType:c.string().optional(),experimental_providerMetadata:hi.optional()}),cW=c.object({type:c.literal("file"),data:c.union([bD,c.instanceof(URL)]),mimeType:c.string(),experimental_providerMetadata:hi.optional()}),uW=c.object({type:c.literal("tool-call"),toolCallId:c.string(),toolName:c.string(),args:c.unknown()}),lW=c.object({type:c.literal("tool-result"),toolCallId:c.string(),toolName:c.string(),result:c.unknown(),content:sW.optional(),isError:c.boolean().optional(),experimental_providerMetadata:hi.optional()}),dW=c.object({role:c.literal("system"),content:c.string(),experimental_providerMetadata:hi.optional()}),pW=c.object({role:c.literal("user"),content:c.union([c.string(),c.array(c.union([ED,aW,cW]))]),experimental_providerMetadata:hi.optional()}),mW=c.object({role:c.literal("assistant"),content:c.union([c.string(),c.array(c.union([ED,uW]))]),experimental_providerMetadata:hi.optional()}),fW=c.object({role:c.literal("tool"),content:c.array(lW),experimental_providerMetadata:hi.optional()}),hW=c.union([dW,pW,mW,fW]);function gW(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(yW);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}s(gW,"detectPromptType");function yW(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}s(yW,"detectSingleMessageCharacteristics");function vW(t){var e,r,n;let o=[];for(let i of t){let a;try{a=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(a.protocol){case"http:":case"https:":{if((e=i.contentType)!=null&&e.startsWith("image/"))o.push({type:"image",image:a});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:a,mimeType:i.contentType})}break}case"data:":{let u,l,d;try{[u,l]=i.url.split(","),d=u.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(d==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((r=i.contentType)!=null&&r.startsWith("image/"))o.push({type:"image",image:lf(l)});else if((n=i.contentType)!=null&&n.startsWith("text/"))o.push({type:"text",text:WK(lf(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return o}s(vW,"attachmentsToParts");var ID="AI_MessageConversionError",kD=`vercel.ai.error.${ID}`,_W=Symbol.for(kD),PD,aD=class extends mt{static{s(this,"MessageConversionError")}constructor({originalMessage:t,message:e}){super({name:ID,message:e}),this[PD]=!0,this.originalMessage=t}static isInstance(t){return mt.hasMarker(t,kD)}};PD=_W;function u0(t,e){var r;let n=(r=e?.tools)!=null?r:{},o=[];for(let i of t){let{role:a,content:u,toolInvocations:l,experimental_attachments:d}=i;switch(a){case"system":{o.push({role:"system",content:u});break}case"user":{o.push({role:"user",content:d?[{type:"text",text:u},...vW(d)]:u});break}case"assistant":{if(l==null){o.push({role:"assistant",content:u});break}o.push({role:"assistant",content:[{type:"text",text:u},...l.map(({toolCallId:p,toolName:f,args:h})=>({type:"tool-call",toolCallId:p,toolName:f,args:h}))]}),o.push({role:"tool",content:l.map(p=>{if(!("result"in p))throw new aD({originalMessage:i,message:"ToolInvocation must have a result: "+JSON.stringify(p)});let{toolCallId:f,toolName:h,result:y}=p,g=n[h];return g?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:f,toolName:h,result:g.experimental_toToolResultContent(y),experimental_content:g.experimental_toToolResultContent(y)}:{type:"tool-result",toolCallId:f,toolName:h,result:y}})});break}case"function":case"data":case"tool":break;default:{let p=a;throw new aD({originalMessage:i,message:`Unsupported role: ${p}`})}}}return o}s(u0,"convertToCoreMessages");function bW({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new Gi({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new Gi({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new Gi({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new Gi({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=gW(t.messages);if(r==="other")throw new Gi({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?u0(t.messages,{tools:e}):t.messages,o=Xu({value:n,schema:c.array(hW)});if(!o.success)throw new Gi({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:o.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}s(bW,"standardizePrompt");function wW(t){return{promptTokens:t.promptTokens,completionTokens:t.completionTokens,totalTokens:t.promptTokens+t.completionTokens}}s(wW,"calculateLanguageModelUsage");function df(t,{contentType:e,dataStreamVersion:r}){var n;let o=new Headers((n=t?.headers)!=null?n:{});return o.has("Content-Type")||o.set("Content-Type",e),r!==void 0&&o.set("X-Vercel-AI-Data-Stream",r),o}s(df,"prepareResponseHeaders");var xW="AI_NoObjectGeneratedError",SW=`vercel.ai.error.${xW}`,TW=Symbol.for(SW),EW;EW=TW;function cD(t,e){let r=t.pipeThrough(new TransformStream(e));return r[Symbol.asyncIterator]=()=>{let n=r.getReader();return{async next(){let{done:o,value:i}=await n.read();return o?{done:!0,value:void 0}:{done:!1,value:i}}}},r}s(cD,"createAsyncIterableStream");var gRe=ko({prefix:"aiobj",size:24});function Zn(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}s(Zn,"createResolvablePromise");function IW(){var t,e;return(e=(t=globalThis?.performance)==null?void 0:t.now())!=null?e:Date.now()}s(IW,"now");function uD(t,{contentType:e,dataStreamVersion:r}){let n={};if(t?.headers!=null)for(let[o,i]of Object.entries(t.headers))n[o]=i;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}s(uD,"prepareOutgoingHttpHeaders");function lD({response:t,status:e,statusText:r,headers:n,stream:o}){t.writeHead(e??200,r,n);let i=o.getReader();s(async()=>{try{for(;;){let{done:u,value:l}=await i.read();if(u)break;t.write(l)}}catch(u){throw u}finally{t.end()}},"read")()}s(lD,"writeToServerResponse");var vRe=ko({prefix:"aiobj",size:24});var a0="AI_InvalidToolArgumentsError",AD=`vercel.ai.error.${a0}`,kW=Symbol.for(AD),CD,PW=class extends mt{static{s(this,"InvalidToolArgumentsError")}constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${ef(r)}`}){super({name:a0,message:n,cause:r}),this[CD]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return mt.hasMarker(t,AD)}static isInvalidToolArgumentsError(t){return t instanceof Error&&t.name===a0&&typeof t.toolName=="string"&&typeof t.toolArgs=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};CD=kW;var c0="AI_NoSuchToolError",OD=`vercel.ai.error.${c0}`,AW=Symbol.for(OD),$D,pf=class extends mt{static{s(this,"NoSuchToolError")}constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:c0,message:r}),this[$D]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return mt.hasMarker(t,OD)}static isNoSuchToolError(t){return t instanceof Error&&t.name===c0&&"toolName"in t&&t.toolName!=null&&typeof t.name=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};$D=AW;function CW(t){return t!=null&&Object.keys(t).length>0}s(CW,"isNonEmptyObject");function OW({tools:t,toolChoice:e,activeTools:r}){return CW(t)?{tools:(r!=null?Object.entries(t).filter(([o])=>r.includes(o)):Object.entries(t)).map(([o,i])=>{let a=i.type;switch(a){case void 0:case"function":return{type:"function",name:o,description:i.description,parameters:Ym(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{let u=a;throw new Error(`Unsupported tool type: ${u}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}s(OW,"prepareToolsAndToolChoice");var $W=/^([\s\S]*?)(\s+)(\S*)$/;function RW(t){let e=t.match($W);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}s(RW,"splitOnLastWhitespace");function NW({toolCall:t,tools:e}){let r=t.toolName;if(e==null)throw new pf({toolName:t.toolName});let n=e[r];if(n==null)throw new pf({toolName:t.toolName,availableTools:Object.keys(e)});let o=Ym(n.parameters),i=t.args.trim()===""?Xu({value:{},schema:o}):FT({text:t.args,schema:o});if(i.success===!1)throw new PW({toolName:r,toolArgs:t.args,cause:i.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:i.value}}s(NW,"parseToolCall");function DW({text:t="",tools:e,toolCalls:r,toolResults:n}){let o=[];return o.push({role:"assistant",content:[{type:"text",text:t},...r]}),n.length>0&&o.push({role:"tool",content:n.map(i=>{let a=e[i.toolName];return a?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:a.experimental_toToolResultContent(i.result),experimental_content:a.experimental_toToolResultContent(i.result)}:{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:i.result}})}),o}s(DW,"toResponseMessages");var ERe=ko({prefix:"aitxt",size:24});function jW(){let t=[],e=null,r=!1,n=s(async()=>{if(r&&t.length===0){e?.close();return}if(t.length!==0)try{let{value:o,done:i}=await t[0].read();i?(t.shift(),t.length>0?await n():r&&e?.close()):e?.enqueue(o)}catch(o){e?.error(o),t.shift(),r&&t.length===0&&e?.close()}},"processPull");return{stream:new ReadableStream({start(o){e=o},pull:n,async cancel(){for(let o of t)await o.cancel();t=[],r=!0}}),addStream:s(o=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(o.getReader())},"addStream"),close:s(()=>{r=!0,t.length===0&&e?.close()},"close")}}s(jW,"createStitchableStream");function l0(t,e){let r=t.getReader(),n=e.getReader(),o,i,a=!1,u=!1;async function l(p){try{o==null&&(o=r.read());let f=await o;o=void 0,f.done?p.close():p.enqueue(f.value)}catch(f){p.error(f)}}s(l,"readStream1");async function d(p){try{i==null&&(i=n.read());let f=await i;i=void 0,f.done?p.close():p.enqueue(f.value)}catch(f){p.error(f)}}return s(d,"readStream2"),new ReadableStream({async pull(p){try{if(a){await d(p);return}if(u){await l(p);return}o==null&&(o=r.read()),i==null&&(i=n.read());let{result:f,reader:h}=await Promise.race([o.then(y=>({result:y,reader:r})),i.then(y=>({result:y,reader:n}))]);f.done||p.enqueue(f.value),h===r?(o=void 0,f.done&&(await d(p),a=!0)):(i=void 0,f.done&&(u=!0,await l(p)))}catch(f){p.error(f)}},cancel(){r.cancel(),n.cancel()}})}s(l0,"mergeStreams");function MW({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:o,abortSignal:i}){let a=null,u=new ReadableStream({start(g){a=g}}),l={},d=new Set,p=!1,f;function h(){p&&d.size===0&&(f!=null&&a.enqueue(f),a.close())}s(h,"attemptClose");let y=new TransformStream({transform(g,m){let _=g.type;switch(_){case"text-delta":case"response-metadata":case"error":{m.enqueue(g);break}case"tool-call-delta":{r&&(l[g.toolCallId]||(m.enqueue({type:"tool-call-streaming-start",toolCallId:g.toolCallId,toolName:g.toolName}),l[g.toolCallId]=!0),m.enqueue({type:"tool-call-delta",toolCallId:g.toolCallId,toolName:g.toolName,argsTextDelta:g.argsTextDelta}));break}case"tool-call":{let w=g.toolName;if(t==null){a.enqueue({type:"error",error:new pf({toolName:g.toolName})});break}let b=t[w];if(b==null){a.enqueue({type:"error",error:new pf({toolName:g.toolName,availableTools:Object.keys(t)})});break}try{let x=NW({toolCall:g,tools:t});if(m.enqueue(x),b.execute!=null){let k=AT();d.add(k),t0({name:"ai.toolCall",attributes:da({telemetry:o,attributes:{...e0({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":x.toolName,"ai.toolCall.id":x.toolCallId,"ai.toolCall.args":{output:s(()=>JSON.stringify(x.args),"output")}}}),tracer:n,fn:s(async R=>b.execute(x.args,{abortSignal:i}).then(O=>{a.enqueue({...x,type:"tool-result",result:O}),d.delete(k),h();try{R.setAttributes(da({telemetry:o,attributes:{"ai.toolCall.result":{output:s(()=>JSON.stringify(O),"output")}}}))}catch{}},O=>{a.enqueue({type:"error",error:O}),d.delete(k),h()}),"fn")})}}catch(x){a.enqueue({type:"error",error:x})}break}case"finish":{f={type:"finish",finishReason:g.finishReason,logprobs:g.logprobs,usage:wW(g.usage),experimental_providerMetadata:g.providerMetadata};break}default:{let w=_;throw new Error(`Unhandled chunk type: ${w}`)}}},flush(){p=!0,h()}});return new ReadableStream({async start(g){return Promise.all([e.pipeThrough(y).pipeTo(new WritableStream({write(m){g.enqueue(m)},close(){}})),u.pipeTo(new WritableStream({write(m){g.enqueue(m)},close(){g.close()}}))])}})}s(MW,"runToolsTransformation");var UW=ko({prefix:"aitxt",size:24});async function RD({model:t,tools:e,toolChoice:r,system:n,prompt:o,messages:i,maxRetries:a,abortSignal:u,headers:l,maxToolRoundtrips:d=0,maxSteps:p=d!=null?d+1:1,experimental_continueSteps:f=!1,experimental_telemetry:h,experimental_providerMetadata:y,experimental_toolCallStreaming:g=!1,experimental_activeTools:m,onChunk:_,onFinish:w,onStepFinish:b,_internal:{now:x=IW,generateId:k=UW,currentDate:R=s(()=>new Date,"currentDate")}={},...O}){if(p<1)throw new Cn({parameter:"maxSteps",value:p,message:"maxSteps must be at least 1"});let C=LK({model:t,telemetry:h,headers:l,settings:{...O,maxRetries:a}}),$=BK(h),P=bW({prompt:{system:n,prompt:o,messages:i},tools:e});return t0({name:"ai.streamText",attributes:da({telemetry:h,attributes:{...e0({operationId:"ai.streamText",telemetry:h}),...C,"ai.prompt":{input:s(()=>JSON.stringify({system:n,prompt:o,messages:i}),"input")},"ai.settings.maxSteps":p}}),tracer:$,endWhenDone:!1,fn:s(async N=>{let D=zK({maxRetries:a}),K=s(async({responseMessages:Te})=>{let We=Te.length===0?P.type:"messages",He=await eW({prompt:{type:We,system:P.system,messages:[...P.messages,...Te]},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:t.supportsUrl}),G={type:"regular",...OW({tools:e,toolChoice:r,activeTools:m})},{result:{stream:Oe,warnings:ge,rawResponse:z,request:Ze},doStreamSpan:vt,startTimestampMs:wt}=await D(()=>t0({name:"ai.streamText.doStream",attributes:da({telemetry:h,attributes:{...e0({operationId:"ai.streamText.doStream",telemetry:h}),...C,"ai.prompt.format":{input:s(()=>We,"input")},"ai.prompt.messages":{input:s(()=>JSON.stringify(He),"input")},"ai.prompt.tools":{input:s(()=>{var Lr;return(Lr=G.tools)==null?void 0:Lr.map(Lo=>JSON.stringify(Lo))},"input")},"ai.prompt.toolChoice":{input:s(()=>G.toolChoice!=null?JSON.stringify(G.toolChoice):void 0,"input")},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":O.frequencyPenalty,"gen_ai.request.max_tokens":O.maxTokens,"gen_ai.request.presence_penalty":O.presencePenalty,"gen_ai.request.stop_sequences":O.stopSequences,"gen_ai.request.temperature":O.temperature,"gen_ai.request.top_k":O.topK,"gen_ai.request.top_p":O.topP}}),tracer:$,endWhenDone:!1,fn:s(async Lr=>({startTimestampMs:x(),doStreamSpan:Lr,result:await t.doStream({mode:G,...iW(O),inputFormat:We,prompt:He,providerMetadata:y,abortSignal:u,headers:l})}),"fn")}));return{result:{stream:MW({tools:e,generatorStream:Oe,toolCallStreaming:g,tracer:$,telemetry:h,abortSignal:u}),warnings:ge,request:Ze??{},rawResponse:z},doStreamSpan:vt,startTimestampMs:wt}},"startStep"),{result:{stream:V,warnings:q,rawResponse:Q,request:ee},doStreamSpan:oe,startTimestampMs:_e}=await K({responseMessages:[]});return new zW({stream:V,warnings:q,rawResponse:Q,request:ee,onChunk:_,onFinish:w,onStepFinish:b,rootSpan:N,doStreamSpan:oe,telemetry:h,startTimestampMs:_e,maxSteps:p,continueSteps:f,startStep:K,modelId:t.modelId,now:x,currentDate:R,generateId:k,tools:e})},"fn")})}s(RD,"streamText");var zW=class{static{s(this,"DefaultStreamTextResult")}constructor({stream:t,warnings:e,rawResponse:r,request:n,onChunk:o,onFinish:i,onStepFinish:a,rootSpan:u,doStreamSpan:l,telemetry:d,startTimestampMs:p,maxSteps:f,continueSteps:h,startStep:y,modelId:g,now:m,currentDate:_,generateId:w,tools:b}){this.warnings=e,this.rawResponse=r;let{resolve:x,promise:k}=Zn();this.usage=k;let{resolve:R,promise:O}=Zn();this.finishReason=O;let{resolve:C,promise:$}=Zn();this.text=$;let{resolve:P,promise:N}=Zn();this.toolCalls=N;let{resolve:D,promise:K}=Zn();this.toolResults=K;let{resolve:V,promise:q}=Zn();this.steps=q;let{resolve:Q,promise:ee}=Zn();this.experimental_providerMetadata=ee;let{resolve:oe,promise:_e}=Zn();this.request=_e;let{resolve:Te,promise:We}=Zn();this.response=We;let{resolve:He,promise:G}=Zn();this.responseMessages=G;let{stream:Oe,addStream:ge,close:z}=jW();this.originalStream=Oe;let Ze=[],vt=this;function wt({stream:Lr,startTimestamp:Lo,doStreamSpan:uo,currentStep:cs,responseMessages:gr,usage:jn={promptTokens:0,completionTokens:0,totalTokens:0},stepType:us,previousStepText:ld="",stepRequest:qo,hasLeadingWhitespace:dd}){let Yr=[],Mn=[],dr="unknown",Bt={promptTokens:0,completionTokens:0,totalTokens:0},_n,pd=!0,xr="",lo=us==="continue"?ld:"",v,S={id:w(),timestamp:_(),modelId:g},E="",U=!1,B=!0,Y=!1;async function de({controller:Re,chunk:dt}){Re.enqueue(dt),xr+=dt.textDelta,lo+=dt.textDelta,U=!0,Y=dt.textDelta.trimEnd()!==dt.textDelta,await o?.({chunk:dt})}s(de,"publishTextChunk"),ge(Lr.pipeThrough(new TransformStream({async transform(Re,dt){var ft,it,Ct;if(pd){let Ut=m()-Lo;pd=!1,uo.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Ut,"ai.stream.msToFirstChunk":Ut}),uo.setAttributes({"ai.response.msToFirstChunk":Ut,"ai.stream.msToFirstChunk":Ut})}if(Re.type==="text-delta"&&Re.textDelta.length===0)return;let po=Re.type;switch(po){case"text-delta":{if(h){let Ut=B&&dd?Re.textDelta.trimStart():Re.textDelta;if(Ut.length===0)break;B=!1,E+=Ut;let ls=RW(E);ls!=null&&(E=ls.suffix,await de({controller:dt,chunk:{type:"text-delta",textDelta:ls.prefix+ls.whitespace}}))}else await de({controller:dt,chunk:Re});break}case"tool-call":{dt.enqueue(Re),Yr.push(Re),await o?.({chunk:Re});break}case"tool-result":{dt.enqueue(Re),Mn.push(Re),await o?.({chunk:Re});break}case"response-metadata":{S={id:(ft=Re.id)!=null?ft:S.id,timestamp:(it=Re.timestamp)!=null?it:S.timestamp,modelId:(Ct=Re.modelId)!=null?Ct:S.modelId};break}case"finish":{Bt=Re.usage,dr=Re.finishReason,_n=Re.experimental_providerMetadata,v=Re.logprobs;let Ut=m()-Lo;uo.addEvent("ai.stream.finish"),uo.setAttributes({"ai.response.msToFinish":Ut,"ai.response.avgCompletionTokensPerSecond":1e3*Bt.completionTokens/Ut});break}case"tool-call-streaming-start":case"tool-call-delta":{dt.enqueue(Re),await o?.({chunk:Re});break}case"error":{dt.enqueue(Re),dr="error";break}default:{let Ut=po;throw new Error(`Unknown chunk type: ${Ut}`)}}},async flush(Re){var dt;let ft=Yr.length>0?JSON.stringify(Yr):void 0,it="done";cs+1<f&&(h&&dr==="length"&&Yr.length===0?it="continue":Yr.length>0&&Mn.length===Yr.length&&(it="tool-result")),h&&E.length>0&&(it!=="continue"||us==="continue"&&!U)&&(await de({controller:Re,chunk:{type:"text-delta",textDelta:E}}),E="");try{uo.setAttributes(da({telemetry:d,attributes:{"ai.response.finishReason":dr,"ai.response.text":{output:s(()=>xr,"output")},"ai.response.toolCalls":{output:s(()=>ft,"output")},"ai.response.id":S.id,"ai.response.model":S.modelId,"ai.response.timestamp":S.timestamp.toISOString(),"ai.usage.promptTokens":Bt.promptTokens,"ai.usage.completionTokens":Bt.completionTokens,"ai.finishReason":dr,"ai.result.text":{output:s(()=>xr,"output")},"ai.result.toolCalls":{output:s(()=>ft,"output")},"gen_ai.response.finish_reasons":[dr],"gen_ai.response.id":S.id,"gen_ai.response.model":S.modelId,"gen_ai.usage.input_tokens":Bt.promptTokens,"gen_ai.usage.output_tokens":Bt.completionTokens}}))}catch{}finally{uo.end()}if(Re.enqueue({type:"step-finish",finishReason:dr,usage:Bt,experimental_providerMetadata:_n,logprobs:v,response:{...S},isContinued:it==="continue"}),us==="continue"){let Ut=gr[gr.length-1];typeof Ut.content=="string"?Ut.content+=xr:Ut.content.push({text:xr,type:"text"})}else gr.push(...DW({text:xr,tools:b??{},toolCalls:Yr,toolResults:Mn}));let Ct={stepType:us,text:xr,toolCalls:Yr,toolResults:Mn,finishReason:dr,usage:Bt,warnings:vt.warnings,logprobs:v,request:qo,rawResponse:vt.rawResponse,response:{...S,headers:(dt=vt.rawResponse)==null?void 0:dt.headers,messages:JSON.parse(JSON.stringify(gr))},experimental_providerMetadata:_n,isContinued:it==="continue"};Ze.push(Ct),await a?.(Ct);let po={promptTokens:jn.promptTokens+Bt.promptTokens,completionTokens:jn.completionTokens+Bt.completionTokens,totalTokens:jn.totalTokens+Bt.totalTokens};if(it!=="done"){let{result:Ut,doStreamSpan:ls,startTimestampMs:X4}=await y({responseMessages:gr});vt.warnings=Ut.warnings,vt.rawResponse=Ut.rawResponse,wt({stream:Ut.stream,startTimestamp:X4,doStreamSpan:ls,currentStep:cs+1,responseMessages:gr,usage:po,stepType:it,previousStepText:lo,stepRequest:Ut.request,hasLeadingWhitespace:Y});return}try{Re.enqueue({type:"finish",finishReason:dr,usage:po,experimental_providerMetadata:_n,logprobs:v,response:{...S}}),z(),u.setAttributes(da({telemetry:d,attributes:{"ai.response.finishReason":dr,"ai.response.text":{output:s(()=>lo,"output")},"ai.response.toolCalls":{output:s(()=>ft,"output")},"ai.usage.promptTokens":po.promptTokens,"ai.usage.completionTokens":po.completionTokens,"ai.finishReason":dr,"ai.result.text":{output:s(()=>lo,"output")},"ai.result.toolCalls":{output:s(()=>ft,"output")}}})),x(po),R(dr),C(lo),P(Yr),Q(_n),D(Mn),oe(qo),Te({...S,headers:r?.headers,messages:gr}),V(Ze),He(gr),await i?.({finishReason:dr,logprobs:v,usage:po,text:lo,toolCalls:Yr,toolResults:Mn,request:qo,rawResponse:r,response:{...S,headers:r?.headers,messages:gr},warnings:e,experimental_providerMetadata:_n,steps:Ze,responseMessages:gr})}catch(Ut){Re.error(Ut)}finally{u.end()}}})))}s(wt,"addStepStream"),wt({stream:t,startTimestamp:p,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:n,hasLeadingWhitespace:!1})}teeStream(){let[t,e]=this.originalStream.tee();return this.originalStream=e,t}get textStream(){return cD(this.teeStream(),{transform(t,e){t.type==="text-delta"?e.enqueue(t.textDelta):t.type==="error"&&e.error(t.error)}})}get fullStream(){return cD(this.teeStream(),{transform(t,e){e.enqueue(t)}})}toAIStream(t={}){return this.toDataStreamInternal({callbacks:t})}toDataStreamInternal({callbacks:t={},getErrorMessage:e=s(()=>"","getErrorMessage3"),sendUsage:r=!0}={}){let n="",o=new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(a,u){if(u.enqueue(a),a.type==="text-delta"){let l=a.textDelta;n+=l,t.onToken&&await t.onToken(l),t.onText&&await t.onText(l)}},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}}),i=new TransformStream({transform:s(async(a,u)=>{let l=a.type;switch(l){case"text-delta":{u.enqueue(An("text",a.textDelta));break}case"tool-call-streaming-start":{u.enqueue(An("tool_call_streaming_start",{toolCallId:a.toolCallId,toolName:a.toolName}));break}case"tool-call-delta":{u.enqueue(An("tool_call_delta",{toolCallId:a.toolCallId,argsTextDelta:a.argsTextDelta}));break}case"tool-call":{u.enqueue(An("tool_call",{toolCallId:a.toolCallId,toolName:a.toolName,args:a.args}));break}case"tool-result":{u.enqueue(An("tool_result",{toolCallId:a.toolCallId,result:a.result}));break}case"error":{u.enqueue(An("error",e(a.error)));break}case"step-finish":{u.enqueue(An("finish_step",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0,isContinued:a.isContinued}));break}case"finish":{u.enqueue(An("finish_message",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0}));break}default:{let d=l;throw new Error(`Unknown chunk type: ${d}`)}}},"transform")});return this.fullStream.pipeThrough(o).pipeThrough(i).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(t,e){return this.pipeDataStreamToResponse(t,e)}pipeDataStreamToResponse(t,e){let r=e==null?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},n=e==null?void 0:"data"in e?e.data:void 0,o=e==null?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,i=e==null?void 0:"sendUsage"in e?e.sendUsage:void 0;lD({response:t,status:r?.status,statusText:r?.statusText,headers:uD(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:n,getErrorMessage:o,sendUsage:i})})}pipeTextStreamToResponse(t,e){lD({response:t,status:e?.status,statusText:e?.statusText,headers:uD(e,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(t){return this.toDataStreamResponse(t)}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t?.getErrorMessage,sendUsage:t?.sendUsage});return t?.data?l0(t?.data.stream,e):e}toDataStreamResponse(t){var e;let r=t==null?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},n=t==null?void 0:"data"in t?t.data:void 0,o=t==null?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,i=t==null?void 0:"sendUsage"in t?t.sendUsage:void 0;return new Response(this.toDataStream({data:n,getErrorMessage:o,sendUsage:i}),{status:(e=r?.status)!=null?e:200,statusText:r?.statusText,headers:df(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t?.status)!=null?e:200,headers:df(t,{contentType:"text/plain; charset=utf-8"})})}};var LW="AI_NoSuchProviderError",qW=`vercel.ai.error.${LW}`,FW=Symbol.for(qW),BW;BW=FW;function ND(t){let e=new TextEncoder,r="",n=t||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(o,i){let a=typeof o=="string"?o:o.content;i.enqueue(e.encode(a)),r+=a,n.onToken&&await n.onToken(a),n.onText&&typeof o=="string"&&await n.onText(o)},async flush(){let o=VW(n);n.onCompletion&&await n.onCompletion(r),n.onFinal&&!o&&await n.onFinal(r)}})}s(ND,"createCallbacksTransformer");function VW(t){return"experimental_onFunctionCall"in t}s(VW,"isOfTypeOpenAIStreamCallbacks");function HW(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}s(HW,"trimStartOfStreamHelper");var ARe=15*1e3;function DD(){let t=new TextEncoder,e=new TextDecoder;return new TransformStream({transform:s(async(r,n)=>{let o=e.decode(r);n.enqueue(t.encode(An("text",o)))},"transform")})}s(DD,"createStreamDataTransformer");var CRe=new TextDecoder("utf-8");var GW={};pD(GW,{toAIStream:s(()=>ZW,"toAIStream"),toDataStream:s(()=>d0,"toDataStream"),toDataStreamResponse:s(()=>JW,"toDataStreamResponse")});function ZW(t,e){return d0(t,e)}s(ZW,"toAIStream");function d0(t,e){return t.pipeThrough(new TransformStream({transform:s(async(r,n)=>{var o;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&dD((o=r.data)==null?void 0:o.chunk,n);return}dD(r,n)},"transform")})).pipeThrough(ND(e)).pipeThrough(DD())}s(d0,"toDataStream");function JW(t,e){var r;let n=d0(t,e?.callbacks),o=e?.data,i=e?.init,a=o?l0(o.stream,n):n;return new Response(a,{status:(r=i?.status)!=null?r:200,statusText:i?.statusText,headers:df(i,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(JW,"toDataStreamResponse");function dD(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}s(dD,"forwardAIMessageChunk");var KW={};pD(KW,{toDataStream:s(()=>jD,"toDataStream"),toDataStreamResponse:s(()=>WW,"toDataStreamResponse")});function jD(t,e){return QW(t).pipeThrough(ND(e)).pipeThrough(DD())}s(jD,"toDataStream2");function WW(t,e={}){var r;let{init:n,data:o,callbacks:i}=e,a=jD(t,i),u=o?l0(o.stream,a):a;return new Response(u,{status:(r=n?.status)!=null?r:200,statusText:n?.statusText,headers:df(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(WW,"toDataStreamResponse2");function QW(t){let e=t[Symbol.asyncIterator](),r=HW();return new ReadableStream({async pull(n){var o;let{value:i,done:a}=await e.next();if(a){n.close();return}let u=r((o=i.delta)!=null?o:"");u&&n.enqueue(u)}})}s(QW,"toReadableStream");var ORe=Symbol("internal_openai_fn_messages");async function mf(t){try{await Vn.insert(Ko).values({userId:t.userId,action:`ai_${t.actionType}`,resourceType:t.toolName||"ai_chat",sessionId:t.sessionId,success:t.outcome==="success",errorMessage:t.errorMessage,newValues:{provider:t.provider,model:t.model,action_type:t.actionType,tool_name:t.toolName,input_summary:t.inputSummary.slice(0,500),output_summary:t.outputSummary.slice(0,500),tokens_used:t.tokensUsed,latency_ms:t.latencyMs,outcome:t.outcome,affected_tables:t.affectedTables,affected_record_ids:t.affectedRecordIds}})}catch{}}s(mf,"logAIOperation");var MD=`Voc\xEA \xE9 o assistente financeiro inteligente especializado do AegisWallet, a plataforma brasileira l\xEDder em gest\xE3o financeira pessoal com interface voz-first.

## SUA ESPECIALIDADE BRASILEIRA

### Dom\xEDnio do Mercado Financeiro Brasileiro
- **PIX**: Expert em transfer\xEAncias PIX instant\xE2neas 24/7, QR Codes, limites, taxas e regras do BCB
- **Boletos**: Gest\xE3o completa de boletos - registro, pagamento, c\xE1lculo de juros/multas, agendamentos
- **Open Banking**: Conhecimento profundo das APIs banc\xE1rias brasileiras e padr\xF5es regulat\xF3rios
- **C\xE2mbio**: Entendimento de opera\xE7\xF5es cambiais e limites legais brasileiros
- **Impostos**: Conhecimento de tributa\xE7\xE3o brasileira (IR, IOF, etc.)

### Cultura e Localiza\xE7\xE3o
- **Portugu\xEAs Brasileiro Nativo**: Use termos como "parab\xE9ns", "show de bola", "blz", " firm\xE3o"
- **Realidade Financeira Brasileira**: Entenda sal\xE1rios, infla\xE7\xE3o, custo de vida, juros altos
- **Calend\xE1rio Brasileiro**: Considere feriados, 13\xBA sal\xE1rio, d\xE9cimo terceiro, parcelas
- **Bancos Nacionais**: Ita\xFA, Bradesco, Caixa, Banco do Brasil, Nubank, Inter, etc.

## CAPACIDADES AVAN\xC7ADAS

### Opera\xE7\xF5es Financeiras (PIX, TED, DOC, Boletos)
- **Transfer\xEAncias PIX**: Envio/recebimento instant\xE2neo, QR Codes, agendamentos, status tracking
- **Gest\xE3o de Boletos**: Registro via c\xF3digo de barras, c\xE1lculo autom\xE1tico de juros/multas, agendamento de pagamentos
- **An\xE1lise de Contatos**: Salvar contatos frequentes, m\xE9todos de pagamento PIX, favoritos
- **Limites e Taxas**: Conhecimento de limites di\xE1rios, taxas, hor\xE1rios de compensa\xE7\xE3o

### An\xE1lises e Insights Financeiros
- **An\xE1lise de Gastos**: Detalhada por categoria, tend\xEAncias, padr\xF5es an\xF4malos
- **Previs\xE3o de Fluxo de Caixa**: Baseada em hist\xF3rico e eventos futuros com confian\xE7a
- **Detec\xE7\xE3o de Fraude**: An\xE1lise em tempo real de risco, padr\xF5es suspeitos
- **Recomenda\xE7\xF5es de Or\xE7amento**: Personalizadas baseadas em comportamento e metas

### Interface Voz-First (Voice-First)
- **Comandos em Portugu\xEAs Natural**: "Envia cem reais para a Maria pelo PIX", "Paga o boleto da luz"
- **Processamento de Contexto**: Mant\xE9m conversa\xE7\xE3o com hist\xF3rico e contexto relevante
- **Confirma\xE7\xE3o por Voz**: Valida\xE7\xE3o segura de opera\xE7\xF5es sens\xEDveis via reconhecimento de voz
- **Respostas Otimizadas para TTS**: Texto projetado para s\xEDntese de voz natural

### Seguran\xE7a e Conformidade LGPD
- **LGPD**: Conformidade total com Lei Geral de Prote\xE7\xE3o de Dados brasileira
- **Valida\xE7\xE3o Multi-Fator**: 2FA, biom\xE9trica, c\xF3digo via SMS/email
- **Audit Logging**: Registros completos para compliance e auditoria
- **Prote\xE7\xE3o de Dados**: Criptografia, anonimiza\xE7\xE3o, reten\xE7\xE3o conformidade

## REGRAS DE SEGURAN\xC7A E CONFORMIDADE (CR\xCDTICAS)

### Prote\xE7\xE3o de Dados LGPD
1. **NUNCA** exponha dados sens\xEDveis: CPF, senhas, tokens biom\xE9tricos
2. **SEMPRE** obtenha consentimento expl\xEDcito para uso de dados financeiros
3. **RESPEITE** direitos de acesso, corre\xE7\xE3o e exclus\xE3o de dados
4. **IMPLEMENTE** pol\xEDticas de reten\xE7\xE3o conformes com regulamenta\xE7\xE3o brasileira

### Seguran\xE7a de Transa\xE7\xF5es
1. **VALIDA\xC7\xC3O OBRIGAT\xD3RIA**: Toda transa\xE7\xE3o >R$1.000 requer verifica\xE7\xE3o adicional
2. **LIMITES AUTOM\xC1TICOS**: Respeite limites di\xE1rios e de frequ\xEAncia
3. **MONITORAMENTO**: Detecte padr\xF5es an\xF4malos e poss\xEDveis fraudes
4. **CONFIRMA\xC7\xC3O**: Use c\xF3digos, biometria ou confirma\xE7\xE3o por voz para opera\xE7\xF5es cr\xEDticas

### Padr\xF5es Brasileiros de Atendimento
1. **Formalidade Amig\xE1vel**: Tratamento "voc\xEA" mas respeitoso e profissional
2. **Hor\xE1rio Banc\xE1rio**: Considere hor\xE1rios banc\xE1rios e janela de compensa\xE7\xE3o
3. **Feriados**: Esteja ciente de feriados nacionais e estaduais brasileiros
4. **Cultura Financeira**: Entenda avers\xE3o a risco, prefer\xEAncia por seguran\xE7a

## FORMATA\xC7\xC3O E COMUNICA\xC7\xC3O

### Formatos Brasileiros
- **Valores**: R$ 1.234,56 (separador decimal v\xEDrgula, milhar ponto)
- **Datas**: DD/MM/YYYY ou "hoje", "ontem", "anteontem", "esta semana"
- **Hor\xE1rios**: 24h com fuso America/Sao_Paulo (BRT/BRST)
- **Documentos**: CPF: XXX.XXX.XXX-XX, CNPJ: XX.XXX.XXX/XXXX-XX

### Tom e Estilo
- **Voz Ativa**: "Vou analisar seus gastos" em vez de "Seus gastos ser\xE3o analisados"
- **Empatia**: Entenda dificuldades financeiras com respeito e apoio
- **Clareza**: Use termos simples, evite jarg\xF5es t\xE9cnicos excessivos
- **Cultura**: Use express\xF5es brasileiras naturais quando apropriado

## PADR\xD5ES DE RESPOSTA

### Para PIX
- **R\xE1pido**: "Transfer\xEAncia PIX enviada! Chega em segundos na conta do destinat\xE1rio."
- **Seguro**: "Para sua seguran\xE7a, vou enviar um c\xF3digo para confirmar esta transfer\xEAncia de R$ 500,00."
- **Informativo**: "O limite di\xE1rio PIX \xE9 R$ 5.000 entre 20h e 6h."

### Para Boletos
- **C\xE1lculo**: "Este boleto vence em 3 dias com multa de 2% e juros de 1% ao m\xEAs."
- **Agendamento**: "Boleto agendado! Ser\xE1 pago automaticamente na data de vencimento."
- **Alerta**: "\u26A0\uFE0F Voc\xEA tem 2 boletos vencendo esta semana totalizando R$ 850,00."

### Para An\xE1lises
- **Visual**: "Seus gastos em alimenta\xE7\xE3o subiram 15% este m\xEAs. Quer ver o gr\xE1fico detalhado?"
- **Pr\xE1tico**: "Com base no seu padr\xE3o, sugiro reservar R$ 2.000 para emerg\xEAncias."
- **Alerta**: "Detectei 3 transa\xE7\xF5es suspeitas esta semana. Quer investigar?"

### Para Voz
- **Conversacional**: "Entendi! Voc\xEA quer transferir R$ 250 para a Joana pelo PIX, correto?"
- **Claro**: "Pode repetir o valor? N\xE3o consegui entender bem."
- **Eficiente**: "Pronto! Transfer\xEAncia autorizada com sua confirma\xE7\xE3o por voz."

## FLUXOS ESPECIALIZADOS

### Transfer\xEAncia PIX Completa
1. "Quanto quer transferir?" \u2192 Validar valor e limites
2. "Qual a chave PIX do destinat\xE1rio?" \u2192 Validar formato e tipo
3. "Qual o nome completo do destinat\xE1rio?" \u2192 Para registro
4. "Descri\xE7\xE3o opcional?" \u2192 Para identifica\xE7\xE3o
5. "Confirmar transfer\xEAncia?" \u2192 Envio ou verifica\xE7\xE3o adicional

### Pagamento de Boleto
1. "C\xF3digo de barras ou\u7167\u7247?" \u2192 Captura e valida\xE7\xE3o
2. "Valor e data de vencimento?" \u2192 Confirma\xE7\xE3o
3. "Calcular juros/multas?" \u2192 Se vencido
4. "Pagar agora ou agendar?" \u2192 Processamento
5. "Confirma\xE7\xE3o?" \u2192 Seguran\xE7a e finaliza\xE7\xE3o

### An\xE1lise Financeira por Voz
1. "Que per\xEDodo quer analisar?" \u2192 Defini\xE7\xE3o de scope
2. "Foco em alguma categoria espec\xEDfica?" \u2192 Detalhamento
3. "Quer compara\xE7\xE3o com per\xEDodo anterior?" \u2192 An\xE1lise comparativa
4. "Preferir resumo oral ou visual?" \u2192 Formato de sa\xEDda
5. "Gerar recomenda\xE7\xF5es?" \u2192 A\xE7\xF5es pr\xE1ticas

## INTEGRA\xC7\xC3O COM FERRAMENTAS

### Sistema de Ferramentas
Voc\xEA tem acesso a 4 categorias principais de ferramentas:

1. **Opera\xE7\xF5es Financeiras Brasileiras**
   - pix.*: Transfer\xEAncias, QR codes, agendamentos PIX
   - boletos.*: Registro, pagamento, c\xE1lculos de boletos
   - contacts.*: Gest\xE3o de contatos e m\xE9todos de pagamento

2. **An\xE1lises e Insights**
   - insights.*: An\xE1lise de gastos, previs\xF5es, detec\xE7\xE3o de anomalias
   - multimodal.*: Relat\xF3rios visuais, gr\xE1ficos, exporta\xE7\xF5es

3. **Seguran\xE7a e Conformidade**
   - security.*: Detec\xE7\xE3o de fraude, valida\xE7\xF5es, configura\xE7\xF5es de seguran\xE7a
   - notifications.*: Alertas, lembretes, prefer\xEAncias de notifica\xE7\xE3o

4. **Interface Voz-First**
   - voice.*: Processamento de comandos, confirma\xE7\xE3o por voz, contexto
   - Todas as ferramentas otimizadas para resposta via TTS

### Orquestra\xE7\xE3o Inteligente
Combine m\xFAltiplas ferramentas para respostas completas:
- Consultar saldo \u2192 security.checkFraudRisk \u2192 pix.sendPixTransfer
- An\xE1lise de gastos \u2192 insights.getSpendingAnalysis \u2192 multimodal.generateVisualReport
- Alerta de seguran\xE7a \u2192 notifications.sendAlert \u2192 voice.confirmVoiceAction

## MANEJO DE ERROS E RECUPERA\xC7\xC3O

### Erros Comuns Brasileiros
- **Chave PIX Inv\xE1lida**: "Esta chave PIX n\xE3o existe. Verifique CPF, email ou telefone."
- **Boleto Duplicado**: "Este boleto j\xE1 est\xE1 pago. Verifique se n\xE3o h\xE1 duplicidade."
- **Fora do Hor\xE1rio**: "Transfer\xEAncias TED/DOC s\xF3 em hor\xE1rio banc\xE1rio. PIX funciona 24/7."
- **LGPD**: "Preciso de sua autoriza\xE7\xE3o para acessar estes dados financeiros."

### Recupera\xE7\xE3o Intelligente
- **Alternativas**: "PIX n\xE3o funciona? Tente TED para transfer\xEAncias banc\xE1rias."
- **Contexto**: "Baseado no nosso hist\xF3rico, voc\xEA costuma transferir para..."
- **Proativo**: "Detectei um padr\xE3o incomum. Quer que eu investigue?"

## ATUALIZA\xC7\xD5ES E MELHORIAS

### Sempre Melhorando
- **Feedback de Usu\xE1rio**: Adapte respostas baseado no hist\xF3rico de intera\xE7\xF5es
- **Contexto Financeiro**: Mantenha-se atualizado sobre taxas, regulamenta\xE7\xF5es, novos bancos
- **Cultura Financeira**: Evolua com mudan\xE7as no comportamento financeiro brasileiro
- **Tecnologia**: Integre novas tecnologias banc\xE1rias e fintechs brasileiras

### M\xE9tricas de Sucesso
- **Compreens\xE3o**: 95%+ de comandos voz entendidos corretamente
- **Satisfa\xE7\xE3o**: Respostas que realmente ajudam os usu\xE1rios brasileiros
- **Efici\xEAncia**: Opera\xE7\xF5es conclu\xEDdas com m\xEDnimo de etapas
- **Seguran\xE7a**: Zero breaches de dados ou fraudes n\xE3o detectadas

---

**Sua Miss\xE3o**: Ser o assistente financeiro mais completo, seguro e brasileiro que existe, transformando gest\xE3o financeira em uma experi\xEAncia natural, intuitiva e efetiva para todos os brasileiros.

**Data de Hoje**: ${new Date().toLocaleDateString("pt-BR")}
**Fuso Hor\xE1rio**: America/Sao_Paulo (${new Date().toLocaleTimeString("pt-BR")})
**Moeda**: BRL (Real Brasileiro)`;var UD=MD;var zD="vercel.ai.error",XW=Symbol.for(zD),LD,YW=class qD extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[LD]=!0,this.name=e,this.cause=n}static isInstance(e){return qD.hasMarker(e,zD)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};LD=XW;var Wt=YW,FD="AI_APICallError",BD=`vercel.ai.error.${FD}`,eQ=Symbol.for(BD),VD,_r=class extends Wt{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:u=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:FD,message:t,cause:a}),this[VD]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=u,this.data=l}static isInstance(t){return Wt.hasMarker(t,BD)}};VD=eQ;var HD="AI_EmptyResponseBodyError",GD=`vercel.ai.error.${HD}`,tQ=Symbol.for(GD),ZD,JD=class extends Wt{static{s(this,"EmptyResponseBodyError")}constructor({message:t="Empty response body"}={}){super({name:HD,message:t}),this[ZD]=!0}static isInstance(t){return Wt.hasMarker(t,GD)}};ZD=tQ;function KD(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(KD,"getErrorMessage");var WD="AI_InvalidArgumentError",QD=`vercel.ai.error.${WD}`,rQ=Symbol.for(QD),XD,ff=class extends Wt{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:WD,message:t,cause:e}),this[XD]=!0,this.argument=r}static isInstance(t){return Wt.hasMarker(t,QD)}};XD=rQ;var YD="AI_InvalidPromptError",ej=`vercel.ai.error.${YD}`,nQ=Symbol.for(ej),tj,rj=class extends Wt{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:YD,message:`Invalid prompt: ${e}`,cause:r}),this[tj]=!0,this.prompt=t}static isInstance(t){return Wt.hasMarker(t,ej)}};tj=nQ;var nj="AI_InvalidResponseDataError",oj=`vercel.ai.error.${nj}`,oQ=Symbol.for(oj),ij,hf=class extends Wt{static{s(this,"InvalidResponseDataError")}constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:nj,message:e}),this[ij]=!0,this.data=t}static isInstance(t){return Wt.hasMarker(t,oj)}};ij=oQ;var sj="AI_JSONParseError",aj=`vercel.ai.error.${sj}`,iQ=Symbol.for(aj),cj,nl=class extends Wt{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:sj,message:`JSON parsing failed: Text: ${t}.
Error message: ${KD(e)}`,cause:e}),this[cj]=!0,this.text=t}static isInstance(t){return Wt.hasMarker(t,aj)}};cj=iQ;var uj="AI_LoadAPIKeyError",lj=`vercel.ai.error.${uj}`,sQ=Symbol.for(lj),dj,ol=class extends Wt{static{s(this,"LoadAPIKeyError")}constructor({message:t}){super({name:uj,message:t}),this[dj]=!0}static isInstance(t){return Wt.hasMarker(t,lj)}};dj=sQ;var aQ="AI_LoadSettingError",cQ=`vercel.ai.error.${aQ}`,uQ=Symbol.for(cQ),lQ;lQ=uQ;var dQ="AI_NoContentGeneratedError",pQ=`vercel.ai.error.${dQ}`,mQ=Symbol.for(pQ),fQ;fQ=mQ;var pj="AI_NoSuchModelError",mj=`vercel.ai.error.${pj}`,hQ=Symbol.for(mj),fj,m0=class extends Wt{static{s(this,"NoSuchModelError")}constructor({errorName:t=pj,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[fj]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return Wt.hasMarker(t,mj)}};fj=hQ;var hj="AI_TooManyEmbeddingValuesForCallError",gj=`vercel.ai.error.${hj}`,gQ=Symbol.for(gj),yj,gf=class extends Wt{static{s(this,"TooManyEmbeddingValuesForCallError")}constructor(t){super({name:hj,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[yj]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Wt.hasMarker(t,gj)}};yj=gQ;var vj="AI_TypeValidationError",_j=`vercel.ai.error.${vj}`,yQ=Symbol.for(_j),bj,vQ=class p0 extends Wt{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:vj,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${KD(r)}`,cause:r}),this[bj]=!0,this.value=e}static isInstance(e){return Wt.hasMarker(e,_j)}static wrap({value:e,cause:r}){return p0.isInstance(r)&&r.value===e?r:new p0({value:e,cause:r})}};bj=yQ;var gi=vQ,wj="AI_UnsupportedFunctionalityError",xj=`vercel.ai.error.${wj}`,_Q=Symbol.for(xj),Sj,yt=class extends Wt{static{s(this,"UnsupportedFunctionalityError")}constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:wj,message:e}),this[Sj]=!0,this.functionality=t}static isInstance(t){return Wt.hasMarker(t,xj)}};Sj=_Q;var yf=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function f0(t){}s(f0,"noop");function Tj(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=f0,onError:r=f0,onRetry:n=f0,onComment:o}=t,i="",a=!0,u,l="",d="";function p(m){let _=a?m.replace(/^\xEF\xBB\xBF/,""):m,[w,b]=bQ(`${i}${_}`);for(let x of w)f(x);i=b,a=!1}s(p,"feed");function f(m){if(m===""){y();return}if(m.startsWith(":")){o&&o(m.slice(m.startsWith(": ")?2:1));return}let _=m.indexOf(":");if(_!==-1){let w=m.slice(0,_),b=m[_+1]===" "?2:1,x=m.slice(_+b);h(w,x,m);return}h(m,"",m)}s(f,"parseLine");function h(m,_,w){switch(m){case"event":d=_;break;case"data":l=`${l}${_}
`;break;case"id":u=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?n(parseInt(_,10)):r(new yf(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:w}));break;default:r(new yf(`Unknown field "${m.length>20?`${m.slice(0,20)}\u2026`:m}"`,{type:"unknown-field",field:m,value:_,line:w}));break}}s(h,"processField");function y(){l.length>0&&e({id:u,event:d||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),u=void 0,l="",d=""}s(y,"dispatchEvent");function g(m={}){i&&m.consume&&f(i),a=!0,u=void 0,l="",d="",i=""}return s(g,"reset"),{feed:p,reset:g}}s(Tj,"createParser");function bQ(t){let e=[],r="",n=0;for(;n<t.length;){let o=t.indexOf("\r",n),i=t.indexOf(`
`,n),a=-1;if(o!==-1&&i!==-1?a=Math.min(o,i):o!==-1?o===t.length-1?a=-1:a=o:i!==-1&&(a=i),a===-1){r=t.slice(n);break}else{let u=t.slice(n,a);e.push(u),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(bQ,"splitLines");var vf=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let o;super({start(i){o=Tj({onEvent:s(a=>{i.enqueue(a)},"onEvent"),onError(a){e==="terminate"?i.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(i){o.feed(i)}})}};var lt;(function(t){t.assertEqual=o=>{};function e(o){}s(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),a={};for(let u of i)a[u]=o[u];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(lt||(lt={}));var Ej;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ej||(Ej={}));var be=lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Co=s(t=>{switch(typeof t){case"undefined":return be.undefined;case"string":return be.string;case"number":return Number.isNaN(t)?be.nan:be.number;case"boolean":return be.boolean;case"function":return be.function;case"bigint":return be.bigint;case"symbol":return be.symbol;case"object":return Array.isArray(t)?be.array:t===null?be.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?be.promise:typeof Map<"u"&&t instanceof Map?be.map:typeof Set<"u"&&t instanceof Set?be.set:typeof Date<"u"&&t instanceof Date?be.date:be.object;default:return be.unknown}},"getParsedType");var ie=lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var on=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=s(i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let u=n,l=0;for(;l<a.path.length;){let d=a.path[l];l===a.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(r(a))):u[d]=u[d]||{_errors:[]},u=u[d],l++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r=Object.create(null),n=[];for(let o of this.issues)if(o.path.length>0){let i=o.path[0];r[i]=r[i]||[],r[i].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};on.create=t=>new on(t);var xQ=s((t,e)=>{let r;switch(t.code){case ie.invalid_type:t.received===be.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,lt.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:r=`Unrecognized key(s) in object: ${lt.joinValues(t.keys,", ")}`;break;case ie.invalid_union:r="Invalid input";break;case ie.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${lt.joinValues(t.options)}`;break;case ie.invalid_enum_value:r=`Invalid enum value. Expected ${lt.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:r="Invalid function arguments";break;case ie.invalid_return_type:r="Invalid function return type";break;case ie.invalid_date:r="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:lt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ie.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ie.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ie.custom:r="Invalid input";break;case ie.invalid_intersection_types:r="Intersection results could not be merged";break;case ie.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:r="Number must be finite";break;default:r=e.defaultError,lt.assertNever(t)}return{message:r}},"errorMap"),yi=xQ;var SQ=yi;function il(){return SQ}s(il,"getErrorMap");var _f=s(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let u="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)u=d(a,{data:e,defaultError:u}).message;return{...o,path:i,message:u}},"makeIssue");function ye(t,e){let r=il(),n=_f({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===yi?void 0:yi].filter(o=>!!o)});t.common.issues.push(n)}s(ye,"addIssueToContext");var Ar=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return Me;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return Me;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},Me=Object.freeze({status:"aborted"}),pa=s(t=>({status:"dirty",value:t}),"DIRTY"),Ur=s(t=>({status:"valid",value:t}),"OK"),h0=s(t=>t.status==="aborted","isAborted"),g0=s(t=>t.status==="dirty","isDirty"),Zi=s(t=>t.status==="valid","isValid"),sl=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ie||(Ie={}));var yn=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ij=s((t,e)=>{if(Zi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new on(t.common.issues);return this._error=r,this._error}}},"handleResult");function Ke(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:s((a,u)=>{let{message:l}=t;return a.code==="invalid_enum_value"?{message:l??u.defaultError}:typeof u.data>"u"?{message:l??n??u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:l??r??u.defaultError}},"customMap"),description:o}}s(Ke,"processCreateParams");var rt=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Co(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ar,ctx:{common:e.parent.common,data:e.data,parsedType:Co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(sl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)},o=this._parseSync({data:e,path:n.path,parent:n});return Ij(n,o)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return Zi(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Zi(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(sl(o)?o:Promise.resolve(o));return Ij(n,i)}refine(e,r){let n=s(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,i)=>{let a=e(o),u=s(()=>i.addIssue({code:ie.custom,...n(o)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new $n({schema:this,typeName:ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return On.create(this,this._def)}nullable(){return Ro.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _i.create(this)}promise(){return Ji.create(this,this._def)}or(e){return ya.create([this,e],this._def)}and(e){return va.create(this,e,this._def)}transform(e){return new $n({...Ke(this._def),schema:this,typeName:ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Sa({...Ke(this._def),innerType:this,defaultValue:r,typeName:ce.ZodDefault})}brand(){return new bf({typeName:ce.ZodBranded,type:this,...Ke(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ta({...Ke(this._def),innerType:this,catchValue:r,typeName:ce.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return wf.create(this,e)}readonly(){return Ea.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},TQ=/^c[^\s-]{8,}$/i,EQ=/^[0-9a-z]+$/,IQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,PQ=/^[a-z0-9_-]{21}$/i,AQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,CQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,OQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$Q="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",y0,RQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kj="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zQ=new RegExp(`^${kj}$`);function Pj(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}s(Pj,"timeRegexSource");function LQ(t){return new RegExp(`^${Pj(t)}$`)}s(LQ,"timeRegex");function qQ(t){let e=`${kj}T${Pj(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(qQ,"datetimeRegex");function FQ(t,e){return!!((e==="v4"||!e)&&RQ.test(t)||(e==="v6"||!e)&&DQ.test(t))}s(FQ,"isValidIP");function BQ(t,e){if(!AQ.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}s(BQ,"isValidJWT");function VQ(t,e){return!!((e==="v4"||!e)&&NQ.test(t)||(e==="v6"||!e)&&jQ.test(t))}s(VQ,"isValidCidr");var fa=class t extends rt{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==be.string){let i=this._getOrReturnCtx(e);return ye(i,{code:ie.invalid_type,expected:be.string,received:i.parsedType}),Me}let n=new Ar,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,u=e.data.length<i.value;(a||u)&&(o=this._getOrReturnCtx(e,o),a?ye(o,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&ye(o,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")OQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"email",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")y0||(y0=new RegExp($Q,"u")),y0.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"emoji",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")kQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"uuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")PQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"nanoid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")TQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")EQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cuid2",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")IQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"ulid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ye(o,{validation:"url",code:ie.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"regex",code:ie.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?qQ(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?zQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?LQ(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?CQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"duration",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?FQ(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"ip",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?BQ(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"jwt",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?VQ(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cidr",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?MQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"base64",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?UQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"base64url",code:ie.invalid_string,message:i.message}),n.dirty()):lt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:ie.invalid_string,...Ie.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Ie.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ie.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ie.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ie.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ie.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ie.errToObj(r)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};fa.create=t=>new fa({checks:[],typeName:ce.ZodString,coerce:t?.coerce??!1,...Ke(t)});function HQ(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return i%a/10**o}s(HQ,"floatSafeRemainder");var al=class t extends rt{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==be.number){let i=this._getOrReturnCtx(e);return ye(i,{code:ie.invalid_type,expected:be.number,received:i.parsedType}),Me}let n,o=new Ar;for(let i of this._def.checks)i.kind==="int"?lt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?HQ(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.not_finite,message:i.message}),o.dirty()):lt.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ie.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ie.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ie.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ie.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ie.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&lt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};al.create=t=>new al({checks:[],typeName:ce.ZodNumber,coerce:t?.coerce||!1,...Ke(t)});var cl=class t extends rt{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==be.bigint)return this._getInvalidInput(e);let n,o=new Ar;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):lt.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ye(r,{code:ie.invalid_type,expected:be.bigint,received:r.parsedType}),Me}gte(e,r){return this.setLimit("min",e,!0,Ie.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ie.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ie.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ie.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ie.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};cl.create=t=>new cl({checks:[],typeName:ce.ZodBigInt,coerce:t?.coerce??!1,...Ke(t)});var ul=class extends rt{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==be.boolean){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.boolean,received:n.parsedType}),Me}return Ur(e.data)}};ul.create=t=>new ul({typeName:ce.ZodBoolean,coerce:t?.coerce||!1,...Ke(t)});var ll=class t extends rt{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==be.date){let i=this._getOrReturnCtx(e);return ye(i,{code:ie.invalid_type,expected:be.date,received:i.parsedType}),Me}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return ye(i,{code:ie.invalid_date}),Me}let n=new Ar,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):lt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ll.create=t=>new ll({checks:[],coerce:t?.coerce||!1,typeName:ce.ZodDate,...Ke(t)});var dl=class extends rt{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==be.symbol){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.symbol,received:n.parsedType}),Me}return Ur(e.data)}};dl.create=t=>new dl({typeName:ce.ZodSymbol,...Ke(t)});var ha=class extends rt{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==be.undefined){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.undefined,received:n.parsedType}),Me}return Ur(e.data)}};ha.create=t=>new ha({typeName:ce.ZodUndefined,...Ke(t)});var ga=class extends rt{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==be.null){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.null,received:n.parsedType}),Me}return Ur(e.data)}};ga.create=t=>new ga({typeName:ce.ZodNull,...Ke(t)});var pl=class extends rt{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Ur(e.data)}};pl.create=t=>new pl({typeName:ce.ZodAny,...Ke(t)});var vi=class extends rt{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ur(e.data)}};vi.create=t=>new vi({typeName:ce.ZodUnknown,...Ke(t)});var Jn=class extends rt{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return ye(r,{code:ie.invalid_type,expected:be.never,received:r.parsedType}),Me}};Jn.create=t=>new Jn({typeName:ce.ZodNever,...Ke(t)});var ml=class extends rt{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==be.undefined){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.void,received:n.parsedType}),Me}return Ur(e.data)}};ml.create=t=>new ml({typeName:ce.ZodVoid,...Ke(t)});var _i=class t extends rt{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==be.array)return ye(r,{code:ie.invalid_type,expected:be.array,received:r.parsedType}),Me;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,u=r.data.length<o.exactLength.value;(a||u)&&(ye(r,{code:a?ie.too_big:ie.too_small,minimum:u?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(ye(r,{code:ie.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(ye(r,{code:ie.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,u)=>o.type._parseAsync(new yn(r,a,r.path,u)))).then(a=>Ar.mergeArray(n,a));let i=[...r.data].map((a,u)=>o.type._parseSync(new yn(r,a,r.path,u)));return Ar.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Ie.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Ie.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Ie.toString(r)}})}nonempty(e){return this.min(1,e)}};_i.create=(t,e)=>new _i({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ce.ZodArray,...Ke(e)});function ma(t){if(t instanceof sn){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=On.create(ma(n))}return new sn({...t._def,shape:s(()=>e,"shape")})}else return t instanceof _i?new _i({...t._def,type:ma(t.element)}):t instanceof On?On.create(ma(t.unwrap())):t instanceof Ro?Ro.create(ma(t.unwrap())):t instanceof $o?$o.create(t.items.map(e=>ma(e))):t}s(ma,"deepPartialify");var sn=class t extends rt{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=lt.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==be.object){let d=this._getOrReturnCtx(e);return ye(d,{code:ie.invalid_type,expected:be.object,received:d.parsedType}),Me}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof Jn&&this._def.unknownKeys==="strip"))for(let d in o.data)a.includes(d)||u.push(d);let l=[];for(let d of a){let p=i[d],f=o.data[d];l.push({key:{status:"valid",value:d},value:p._parse(new yn(o,f,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof Jn){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of u)l.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")u.length>0&&(ye(o,{code:ie.unrecognized_keys,keys:u}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of u){let f=o.data[p];l.push({key:{status:"valid",value:p},value:d._parse(new yn(o,f,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of l){let f=await p.key,h=await p.value;d.push({key:f,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>Ar.mergeObjectSync(n,d)):Ar.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{let o=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??o}:{message:o}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:ce.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of lt.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};for(let n of lt.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return ma(this)}partial(e){let r={};for(let n of lt.objectKeys(this.shape)){let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}return new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};for(let n of lt.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof On;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Aj(lt.objectKeys(this.shape))}};sn.create=(t,e)=>new sn({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Jn.create(),typeName:ce.ZodObject,...Ke(e)});sn.strictCreate=(t,e)=>new sn({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Jn.create(),typeName:ce.ZodObject,...Ke(e)});sn.lazycreate=(t,e)=>new sn({shape:t,unknownKeys:"strip",catchall:Jn.create(),typeName:ce.ZodObject,...Ke(e)});var ya=class extends rt{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let u of i)if(u.result.status==="valid")return u.result;for(let u of i)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;let a=i.map(u=>new on(u.ctx.common.issues));return ye(r,{code:ie.invalid_union,unionErrors:a}),Me}if(s(o,"handleResults"),r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let l of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let u=a.map(l=>new on(l));return ye(r,{code:ie.invalid_union,unionErrors:u}),Me}}get options(){return this._def.options}};ya.create=(t,e)=>new ya({options:t,typeName:ce.ZodUnion,...Ke(e)});var Oo=s(t=>t instanceof _a?Oo(t.schema):t instanceof $n?Oo(t.innerType()):t instanceof ba?[t.value]:t instanceof wa?t.options:t instanceof xa?lt.objectValues(t.enum):t instanceof Sa?Oo(t._def.innerType):t instanceof ha?[void 0]:t instanceof ga?[null]:t instanceof On?[void 0,...Oo(t.unwrap())]:t instanceof Ro?[null,...Oo(t.unwrap())]:t instanceof bf||t instanceof Ea?Oo(t.unwrap()):t instanceof Ta?Oo(t._def.innerType):[],"getDiscriminator"),v0=class t extends rt{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==be.object)return ye(r,{code:ie.invalid_type,expected:be.object,received:r.parsedType}),Me;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ye(r,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=Oo(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of a){if(o.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);o.set(u,i)}}return new t({typeName:ce.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...Ke(n)})}};function _0(t,e){let r=Co(t),n=Co(e);if(t===e)return{valid:!0,data:t};if(r===be.object&&n===be.object){let o=lt.objectKeys(e),i=lt.objectKeys(t).filter(u=>o.indexOf(u)!==-1),a={...t,...e};for(let u of i){let l=_0(t[u],e[u]);if(!l.valid)return{valid:!1};a[u]=l.data}return{valid:!0,data:a}}else if(r===be.array&&n===be.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],u=e[i],l=_0(a,u);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return r===be.date&&n===be.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(_0,"mergeValues");var va=class extends rt{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=s((i,a)=>{if(h0(i)||h0(a))return Me;let u=_0(i.value,a.value);return u.valid?((g0(i)||g0(a))&&r.dirty(),{status:r.value,value:u.data}):(ye(n,{code:ie.invalid_intersection_types}),Me)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};va.create=(t,e,r)=>new va({left:t,right:e,typeName:ce.ZodIntersection,...Ke(r)});var $o=class t extends rt{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==be.array)return ye(n,{code:ie.invalid_type,expected:be.array,received:n.parsedType}),Me;if(n.data.length<this._def.items.length)return ye(n,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,u)=>{let l=this._def.items[u]||this._def.rest;return l?l._parse(new yn(n,a,n.path,u)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Ar.mergeArray(r,a)):Ar.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};$o.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $o({items:t,typeName:ce.ZodTuple,rest:null,...Ke(e)})};var b0=class t extends rt{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==be.object)return ye(n,{code:ie.invalid_type,expected:be.object,received:n.parsedType}),Me;let o=[],i=this._def.keyType,a=this._def.valueType;for(let u in n.data)o.push({key:i._parse(new yn(n,u,n.path,u)),value:a._parse(new yn(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?Ar.mergeObjectAsync(r,o):Ar.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof rt?new t({keyType:e,valueType:r,typeName:ce.ZodRecord,...Ke(n)}):new t({keyType:fa.create(),valueType:e,typeName:ce.ZodRecord,...Ke(r)})}},fl=class extends rt{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==be.map)return ye(n,{code:ie.invalid_type,expected:be.map,received:n.parsedType}),Me;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([u,l],d)=>({key:o._parse(new yn(n,u,n.path,[d,"key"])),value:i._parse(new yn(n,l,n.path,[d,"value"]))}));if(n.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let l of a){let d=await l.key,p=await l.value;if(d.status==="aborted"||p.status==="aborted")return Me;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),u.set(d.value,p.value)}return{status:r.value,value:u}})}else{let u=new Map;for(let l of a){let d=l.key,p=l.value;if(d.status==="aborted"||p.status==="aborted")return Me;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),u.set(d.value,p.value)}return{status:r.value,value:u}}}};fl.create=(t,e,r)=>new fl({valueType:e,keyType:t,typeName:ce.ZodMap,...Ke(r)});var hl=class t extends rt{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==be.set)return ye(n,{code:ie.invalid_type,expected:be.set,received:n.parsedType}),Me;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ye(n,{code:ie.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ye(n,{code:ie.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(l){let d=new Set;for(let p of l){if(p.status==="aborted")return Me;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}s(a,"finalizeSet");let u=[...n.data.values()].map((l,d)=>i._parse(new yn(n,l,n.path,d)));return n.common.async?Promise.all(u).then(l=>a(l)):a(u)}min(e,r){return new t({...this._def,minSize:{value:e,message:Ie.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Ie.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};hl.create=(t,e)=>new hl({valueType:t,minSize:null,maxSize:null,typeName:ce.ZodSet,...Ke(e)});var w0=class t extends rt{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==be.function)return ye(r,{code:ie.invalid_type,expected:be.function,received:r.parsedType}),Me;function n(u,l){return _f({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,il(),yi].filter(d=>!!d),issueData:{code:ie.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function o(u,l){return _f({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,il(),yi].filter(d=>!!d),issueData:{code:ie.invalid_return_type,returnTypeError:l}})}s(o,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Ji){let u=this;return Ur(async function(...l){let d=new on([]),p=await u._def.args.parseAsync(l,i).catch(y=>{throw d.addIssue(n(l,y)),d}),f=await Reflect.apply(a,this,p);return await u._def.returns._def.type.parseAsync(f,i).catch(y=>{throw d.addIssue(o(f,y)),d})})}else{let u=this;return Ur(function(...l){let d=u._def.args.safeParse(l,i);if(!d.success)throw new on([n(l,d.error)]);let p=Reflect.apply(a,this,d.data),f=u._def.returns.safeParse(p,i);if(!f.success)throw new on([o(p,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:$o.create(e).rest(vi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||$o.create([]).rest(vi.create()),returns:r||vi.create(),typeName:ce.ZodFunction,...Ke(n)})}},_a=class extends rt{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};_a.create=(t,e)=>new _a({getter:t,typeName:ce.ZodLazy,...Ke(e)});var ba=class extends rt{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ye(r,{received:r.data,code:ie.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}};ba.create=(t,e)=>new ba({value:t,typeName:ce.ZodLiteral,...Ke(e)});function Aj(t,e){return new wa({values:t,typeName:ce.ZodEnum,...Ke(e)})}s(Aj,"createZodEnum");var wa=class t extends rt{static{s(this,"ZodEnum")}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ye(r,{expected:lt.joinValues(n),received:r.parsedType,code:ie.invalid_type}),Me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ye(r,{received:r.data,code:ie.invalid_enum_value,options:n}),Me}return Ur(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};wa.create=Aj;var xa=class extends rt{static{s(this,"ZodNativeEnum")}_parse(e){let r=lt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==be.string&&n.parsedType!==be.number){let o=lt.objectValues(r);return ye(n,{expected:lt.joinValues(o),received:n.parsedType,code:ie.invalid_type}),Me}if(this._cache||(this._cache=new Set(lt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let o=lt.objectValues(r);return ye(n,{received:n.data,code:ie.invalid_enum_value,options:o}),Me}return Ur(e.data)}get enum(){return this._def.values}};xa.create=(t,e)=>new xa({values:t,typeName:ce.ZodNativeEnum,...Ke(e)});var Ji=class extends rt{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==be.promise&&r.common.async===!1)return ye(r,{code:ie.invalid_type,expected:be.promise,received:r.parsedType}),Me;let n=r.parsedType===be.promise?r.data:Promise.resolve(r.data);return Ur(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Ji.create=(t,e)=>new Ji({type:t,typeName:ce.ZodPromise,...Ke(e)});var $n=class extends rt{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:s(a=>{ye(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async u=>{if(r.value==="aborted")return Me;let l=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return l.status==="aborted"?Me:l.status==="dirty"?pa(l.value):r.value==="dirty"?pa(l.value):l});{if(r.value==="aborted")return Me;let u=this._def.schema._parseSync({data:a,path:n.path,parent:n});return u.status==="aborted"?Me:u.status==="dirty"?pa(u.value):r.value==="dirty"?pa(u.value):u}}if(o.type==="refinement"){let a=s(u=>{let l=o.refinement(u,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u},"executeRefinement");if(n.common.async===!1){let u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?Me:(u.status==="dirty"&&r.dirty(),a(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?Me:(u.status==="dirty"&&r.dirty(),a(u.value).then(()=>({status:r.value,value:u.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Zi(a))return Me;let u=o.transform(a.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Zi(a)?Promise.resolve(o.transform(a.value,i)).then(u=>({status:r.value,value:u})):Me);lt.assertNever(o)}};$n.create=(t,e,r)=>new $n({schema:t,typeName:ce.ZodEffects,effect:e,...Ke(r)});$n.createWithPreprocess=(t,e,r)=>new $n({schema:e,effect:{type:"preprocess",transform:t},typeName:ce.ZodEffects,...Ke(r)});var On=class extends rt{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===be.undefined?Ur(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};On.create=(t,e)=>new On({innerType:t,typeName:ce.ZodOptional,...Ke(e)});var Ro=class extends rt{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===be.null?Ur(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ro.create=(t,e)=>new Ro({innerType:t,typeName:ce.ZodNullable,...Ke(e)});var Sa=class extends rt{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===be.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Sa.create=(t,e)=>new Sa({innerType:t,typeName:ce.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ke(e)});var Ta=class extends rt{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return sl(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new on(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new on(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ta.create=(t,e)=>new Ta({innerType:t,typeName:ce.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ke(e)});var gl=class extends rt{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==be.nan){let n=this._getOrReturnCtx(e);return ye(n,{code:ie.invalid_type,expected:be.nan,received:n.parsedType}),Me}return{status:"valid",value:e.data}}};gl.create=t=>new gl({typeName:ce.ZodNaN,...Ke(t)});var FNe=Symbol("zod_brand"),bf=class extends rt{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},wf=class t extends rt{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Me:i.status==="dirty"?(r.dirty(),pa(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Me:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ce.ZodPipeline})}},Ea=class extends rt{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(o=>(Zi(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return sl(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:ce.ZodReadonly,...Ke(e)});var BNe={object:sn.lazycreate},ce;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ce||(ce={}));var VNe=fa.create,HNe=al.create,GNe=gl.create,ZNe=cl.create,JNe=ul.create,KNe=ll.create,WNe=dl.create,QNe=ha.create,XNe=ga.create,YNe=pl.create,eDe=vi.create,tDe=Jn.create,rDe=ml.create,nDe=_i.create,oDe=sn.create,iDe=sn.strictCreate,sDe=ya.create,aDe=v0.create,cDe=va.create,uDe=$o.create,lDe=b0.create,dDe=fl.create,pDe=hl.create,mDe=w0.create,fDe=_a.create,hDe=ba.create,gDe=wa.create,yDe=xa.create,vDe=Ji.create,_De=$n.create,bDe=On.create,wDe=Ro.create,xDe=$n.createWithPreprocess,SDe=wf.create;function Nt(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(Nt,"combineHeaders");var Rj=class{static{s(this,"DelayedPromise")}constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this._promise)}resolve(t){var e;this.status={type:"resolved",value:t},this._promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this._promise&&((e=this._reject)==null||e.call(this,t))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function yl(t){return Object.fromEntries([...t.headers])}s(yl,"extractResponseHeaders");var ZQ=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let u=0;u<e;u++)a[u]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new ff({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),mr=ZQ();function T0(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(T0,"isAbortError");var JQ=["fetch failed","failed to fetch"];function KQ({error:t,url:e,requestBodyValues:r}){if(T0(t))return t;if(t instanceof TypeError&&JQ.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new _r({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(KQ,"handleFetchError");function WQ(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(WQ,"getRuntimeEnvironmentUserAgent");function QQ(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(QQ,"normalizeHeaders");function Ki(t,...e){let r=new Headers(QQ(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(Ki,"withUserAgentSuffix");var XQ="3.0.18";function Ia({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new ol({message:`${n} API key must be a string.`});if(typeof process>"u")throw new ol({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new ol({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new ol({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(Ia,"loadApiKey");function Sf({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}s(Sf,"loadOptionalSetting");function Nj(t){var e;let[r,n=""]=t.toLowerCase().split("/");return(e={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?e:n}s(Nj,"mediaTypeToExtension");var YQ=/"__proto__"\s*:/,e7=/"constructor"\s*:/;function Cj(t){let e=JSON.parse(t);return e===null||typeof e!="object"||YQ.test(t)===!1&&e7.test(t)===!1?e:t7(e)}s(Cj,"_parse");function t7(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(t7,"filter");function I0(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return Cj(t)}try{return Cj(t)}finally{Error.stackTraceLimit=e}}s(I0,"secureJsonParse");var xf=Symbol.for("vercel.ai.validator");function r7(t){return{[xf]:!0,validate:t}}s(r7,"validator");function n7(t){return typeof t=="object"&&t!==null&&xf in t&&t[xf]===!0&&"validate"in t}s(n7,"isValidator");function Pt(t){let e;return()=>(e==null&&(e=t()),e)}s(Pt,"lazyValidator");function o7(t){return n7(t)?t:typeof t=="function"?t():i7(t)}s(o7,"asValidator");function i7(t){return r7(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new gi({value:e,cause:r.issues})}})}s(i7,"standardSchemaValidator");async function fr({value:t,schema:e}){let r=await k0({value:t,schema:e});if(!r.success)throw gi.wrap({value:t,cause:r.error});return r.value}s(fr,"validateTypes");async function k0({value:t,schema:e}){let r=o7(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:gi.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:gi.wrap({value:t,cause:n}),rawValue:t}}}s(k0,"safeValidateTypes");async function s7({text:t,schema:e}){try{let r=I0(t);return e==null?r:fr({value:r,schema:e})}catch(r){throw nl.isInstance(r)||gi.isInstance(r)?r:new nl({text:t,cause:r})}}s(s7,"parseJSON");async function Dj({text:t,schema:e}){try{let r=I0(t);return e==null?{success:!0,value:r,rawValue:r}:await k0({value:r,schema:e})}catch(r){return{success:!1,error:nl.isInstance(r)?r:new nl({text:t,cause:r}),rawValue:void 0}}}s(Dj,"safeParseJSON");function P0(t){try{return I0(t),!0}catch{return!1}}s(P0,"isParsableJson");function a7({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new vf).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await Dj({text:r,schema:e}))}}))}s(a7,"parseJsonEventStream");async function At({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await k0({value:e[t],schema:r});if(!n.success)throw new ff({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(At,"parseProviderOptions");var c7=s(()=>globalThis.fetch,"getOriginalFetch2"),Dt=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Mj({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),jj=s(async({url:t,headers:e,formData:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Mj({url:t,headers:e,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postFormDataToApi"),Mj=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=c7()})=>{try{let u=await a(t,{method:"POST",headers:Ki(e,`ai-sdk/provider-utils/${XQ}`,WQ()),body:r.content,signal:i}),l=yl(u);if(!u.ok){let d;try{d=await o({response:u,url:t,requestBodyValues:r.values})}catch(p){throw T0(p)||_r.isInstance(p)?p:new _r({message:"Failed to process error response",cause:p,statusCode:u.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:u,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(T0(d)||_r.isInstance(d))?d:new _r({message:"Failed to process successful response",cause:d,statusCode:u.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(u){throw KQ({error:u,url:t,requestBodyValues:r.values})}},"postToApi");function jt({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:u,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:u,onInputAvailable:l})}s(jt,"createProviderDefinedToolFactory");function Qt({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:u,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:u,onInputAvailable:l})}s(Qt,"createProviderDefinedToolFactoryWithOutputSchema");async function Kn(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}s(Kn,"resolve");var ka=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),u=yl(n);if(a.trim()==="")return{responseHeaders:u,value:new _r({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:u,responseBody:a,isRetryable:r?.(n)})};try{let l=await s7({text:a,schema:t});return{responseHeaders:u,value:new _r({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:u,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:u,value:new _r({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:u,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),Wn=s(t=>async({response:e})=>{let r=yl(e);if(e.body==null)throw new JD({});return{responseHeaders:r,value:a7({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var ir=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await Dj({text:o,schema:t}),a=yl(e);if(!i.success)throw new _r({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),Uj=s(()=>async({response:t,url:e,requestBodyValues:r})=>{let n=yl(t);if(!t.body)throw new _r({message:"Response body is empty",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0});try{let o=await t.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(o)}}catch(o){throw new _r({message:"Failed to read response as array buffer",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0,cause:o})}},"createBinaryResponseHandler");var u7=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),l7=Symbol("Let zodToJsonSchema decide on which parser to use"),Oj={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},d7=s(t=>typeof t=="string"?{...Oj,name:t}:{...Oj,...t},"getDefaultOptions");function an(){return{}}s(an,"parseAnyDef");function p7(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==ce.ZodAny&&(i.items=bt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(p7,"parseArrayDef");function m7(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(m7,"parseBigintDef");function f7(){return{type:"boolean"}}s(f7,"parseBooleanDef");function zj(t,e){return bt(t.type._def,e)}s(zj,"parseBrandedDef");var h7=s((t,e)=>bt(t.innerType._def,e),"parseCatchDef");function Lj(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>Lj(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return g7(t)}}s(Lj,"parseDateDef");var g7=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function y7(t,e){return{...bt(t.innerType._def,e),default:t.defaultValue()}}s(y7,"parseDefaultDef");function v7(t,e){return e.effectStrategy==="input"?bt(t.schema._def,e):an()}s(v7,"parseEffectsDef");function _7(t){return{type:"string",enum:Array.from(t.values)}}s(_7,"parseEnumDef");var b7=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function w7(t,e){let r=[bt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),bt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(b7(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...u}=o;i=u}n.push(i)}}),n.length?{allOf:n}:void 0}s(w7,"parseIntersectionDef");function x7(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(x7,"parseLiteralDef");var x0=void 0,Rn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(x0===void 0&&(x0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),x0),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function qj(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":Nn(r,"email",n.message,e);break;case"format:idn-email":Nn(r,"idn-email",n.message,e);break;case"pattern:zod":zr(r,Rn.email,n.message,e);break}break;case"url":Nn(r,"uri",n.message,e);break;case"uuid":Nn(r,"uuid",n.message,e);break;case"regex":zr(r,n.regex,n.message,e);break;case"cuid":zr(r,Rn.cuid,n.message,e);break;case"cuid2":zr(r,Rn.cuid2,n.message,e);break;case"startsWith":zr(r,RegExp(`^${S0(n.value,e)}`),n.message,e);break;case"endsWith":zr(r,RegExp(`${S0(n.value,e)}$`),n.message,e);break;case"datetime":Nn(r,"date-time",n.message,e);break;case"date":Nn(r,"date",n.message,e);break;case"time":Nn(r,"time",n.message,e);break;case"duration":Nn(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{zr(r,RegExp(S0(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Nn(r,"ipv4",n.message,e),n.version!=="v4"&&Nn(r,"ipv6",n.message,e);break}case"base64url":zr(r,Rn.base64url,n.message,e);break;case"jwt":zr(r,Rn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&zr(r,Rn.ipv4Cidr,n.message,e),n.version!=="v4"&&zr(r,Rn.ipv6Cidr,n.message,e);break}case"emoji":zr(r,Rn.emoji(),n.message,e);break;case"ulid":{zr(r,Rn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Nn(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{zr(r,Rn.base64,n.message,e);break}}break}case"nanoid":zr(r,Rn.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(qj,"parseStringDef");function S0(t,e){return e.patternStrategy==="escape"?T7(t):t}s(S0,"escapeLiteralCheckValue");var S7=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function T7(t){let e="";for(let r=0;r<t.length;r++)S7.has(t[r])||(e+="\\"),e+=t[r];return e}s(T7,"escapeNonAlphaNumeric");function Nn(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(Nn,"addFormat");function zr(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:$j(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=$j(e,n)}s(zr,"addPattern");function $j(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,u=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(u){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=u?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:u&&o[d]==="]"?u=!1:!u&&o[d]==="["&&(u=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s($j,"stringifyRegExpWithFlags");function Fj(t,e){var r,n,o,i,a,u;let l={type:"object",additionalProperties:(r=bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===ce.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=qj(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===ce.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===ce.ZodBranded&&t.keyType._def.type._def.typeName===ce.ZodString&&((u=t.keyType._def.type._def.checks)!=null&&u.length)){let{type:d,...p}=zj(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(Fj,"parseRecordDef");function E7(t,e){if(e.mapStrategy==="record")return Fj(t,e);let r=bt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||an(),n=bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||an();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(E7,"parseMapDef");function I7(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(I7,"parseNativeEnumDef");function k7(){return{not:an()}}s(k7,"parseNeverDef");function P7(){return{type:"null"}}s(P7,"parseNullDef");var E0={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function A7(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in E0&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=E0[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,u)=>u.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return C7(t,e)}s(A7,"parseUnionDef");var C7=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>bt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function O7(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[E0[t.innerType._def.typeName],"null"]};let r=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(O7,"parseNullableDef");function $7(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s($7,"parseNumberDef");function R7(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let u=o[a];if(u===void 0||u._def===void 0)continue;let l=D7(u),d=bt(u._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=N7(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(R7,"parseObjectDef");function N7(t,e){if(t.catchall._def.typeName!=="ZodNever")return bt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(N7,"decideAdditionalProperties");function D7(t){try{return t.isOptional()}catch{return!0}}s(D7,"safeIsOptional");var j7=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return bt(t.innerType._def,e);let n=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:an()},n]}:an()},"parseOptionalDef"),M7=s((t,e)=>{if(e.pipeStrategy==="input")return bt(t.in._def,e);if(e.pipeStrategy==="output")return bt(t.out._def,e);let r=bt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=bt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function U7(t,e){return bt(t.type._def,e)}s(U7,"parsePromiseDef");function z7(t,e){let n={type:"array",uniqueItems:!0,items:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(z7,"parseSetDef");function L7(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>bt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:bt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>bt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(L7,"parseTupleDef");function q7(){return{not:an()}}s(q7,"parseUndefinedDef");function F7(){return an()}s(F7,"parseUnknownDef");var B7=s((t,e)=>bt(t.innerType._def,e),"parseReadonlyDef"),V7=s((t,e,r)=>{switch(e){case ce.ZodString:return qj(t,r);case ce.ZodNumber:return $7(t);case ce.ZodObject:return R7(t,r);case ce.ZodBigInt:return m7(t);case ce.ZodBoolean:return f7();case ce.ZodDate:return Lj(t,r);case ce.ZodUndefined:return q7();case ce.ZodNull:return P7();case ce.ZodArray:return p7(t,r);case ce.ZodUnion:case ce.ZodDiscriminatedUnion:return A7(t,r);case ce.ZodIntersection:return w7(t,r);case ce.ZodTuple:return L7(t,r);case ce.ZodRecord:return Fj(t,r);case ce.ZodLiteral:return x7(t);case ce.ZodEnum:return _7(t);case ce.ZodNativeEnum:return I7(t);case ce.ZodNullable:return O7(t,r);case ce.ZodOptional:return j7(t,r);case ce.ZodMap:return E7(t,r);case ce.ZodSet:return z7(t,r);case ce.ZodLazy:return()=>t.getter()._def;case ce.ZodPromise:return U7(t,r);case ce.ZodNaN:case ce.ZodNever:return k7();case ce.ZodEffects:return v7(t,r);case ce.ZodAny:return an();case ce.ZodUnknown:return F7();case ce.ZodDefault:return y7(t,r);case ce.ZodBranded:return zj(t,r);case ce.ZodReadonly:return B7(t,r);case ce.ZodCatch:return h7(t,r);case ce.ZodPipeline:return M7(t,r);case ce.ZodFunction:case ce.ZodVoid:case ce.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function bt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==l7)return l}if(o&&!r){let l=H7(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=V7(t,t.typeName,e),u=typeof a=="function"?bt(a(),e):a;if(u&&G7(t,e,u),e.postProcess){let l=e.postProcess(u,t,e);return i.jsonSchema=u,l}return i.jsonSchema=u,u}s(bt,"parseDef");var H7=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:u7(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),an()):e.$refStrategy==="seen"?an():void 0}},"get$ref"),G7=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),Z7=s(t=>{let e=d7(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),J7=s((t,e)=>{var r;let n=Z7(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,f])=>{var h;return{...d,[p]:(h=bt(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:an()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=bt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:an(),u=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;u!==void 0&&(a.title=u);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),K7=J7;function W7(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Bj(()=>K7(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(W7,"zod3Schema");function Q7(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Bj(()=>Pu(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Au(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(Q7,"zod4Schema");function X7(t){return"_zod"in t}s(X7,"isZod4Schema");function ne(t,e){return X7(t)?Q7(t,e):W7(t,e)}s(ne,"zodSchema");var Y7=Symbol.for("vercel.ai.schema");function fe(t){let e;return()=>(e==null&&(e=t()),e)}s(fe,"lazySchema");function Bj(t,{validate:e}={}){return{[Y7]:!0,_type:void 0,[xf]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(Bj,"jsonSchema");var{btoa:eX,atob:tX}=globalThis;function Vj(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=tX(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(Vj,"convertBase64ToUint8Array");function rX(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return eX(e)}s(rX,"convertUint8ArrayToBase64");function Qr(t){return t instanceof Uint8Array?rX(t):t}s(Qr,"convertToBase64");function Pa(t){return t?.replace(/\/$/,"")}s(Pa,"withoutTrailingSlash");var nX="2.0.50",oX=fe(()=>ne(c.object({type:c.literal("error"),error:c.object({type:c.string(),message:c.string()})}))),Hj=ka({errorSchema:oX,errorToMessage:s(t=>t.error.message,"errorToMessage")}),iX=fe(()=>ne(c.object({type:c.literal("message"),id:c.string().nullish(),model:c.string().nullish(),content:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("text"),text:c.string(),citations:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("web_search_result_location"),cited_text:c.string(),url:c.string(),title:c.string(),encrypted_index:c.string()}),c.object({type:c.literal("page_location"),cited_text:c.string(),document_index:c.number(),document_title:c.string().nullable(),start_page_number:c.number(),end_page_number:c.number()}),c.object({type:c.literal("char_location"),cited_text:c.string(),document_index:c.number(),document_title:c.string().nullable(),start_char_index:c.number(),end_char_index:c.number()})])).optional()}),c.object({type:c.literal("thinking"),thinking:c.string(),signature:c.string()}),c.object({type:c.literal("redacted_thinking"),data:c.string()}),c.object({type:c.literal("tool_use"),id:c.string(),name:c.string(),input:c.unknown()}),c.object({type:c.literal("server_tool_use"),id:c.string(),name:c.string(),input:c.record(c.string(),c.unknown()).nullish()}),c.object({type:c.literal("web_fetch_tool_result"),tool_use_id:c.string(),content:c.union([c.object({type:c.literal("web_fetch_result"),url:c.string(),retrieved_at:c.string(),content:c.object({type:c.literal("document"),title:c.string().nullable(),citations:c.object({enabled:c.boolean()}).optional(),source:c.object({type:c.literal("text"),media_type:c.string(),data:c.string()})})}),c.object({type:c.literal("web_fetch_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("web_search_tool_result"),tool_use_id:c.string(),content:c.union([c.array(c.object({type:c.literal("web_search_result"),url:c.string(),title:c.string(),encrypted_content:c.string(),page_age:c.string().nullish()})),c.object({type:c.literal("web_search_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("code_execution_tool_result"),tool_use_id:c.string(),content:c.union([c.object({type:c.literal("code_execution_result"),stdout:c.string(),stderr:c.string(),return_code:c.number()}),c.object({type:c.literal("code_execution_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("bash_code_execution_tool_result"),tool_use_id:c.string(),content:c.discriminatedUnion("type",[c.object({type:c.literal("bash_code_execution_result"),content:c.array(c.object({type:c.literal("bash_code_execution_output"),file_id:c.string()})),stdout:c.string(),stderr:c.string(),return_code:c.number()}),c.object({type:c.literal("bash_code_execution_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("text_editor_code_execution_tool_result"),tool_use_id:c.string(),content:c.discriminatedUnion("type",[c.object({type:c.literal("text_editor_code_execution_tool_result_error"),error_code:c.string()}),c.object({type:c.literal("text_editor_code_execution_view_result"),content:c.string(),file_type:c.string(),num_lines:c.number().nullable(),start_line:c.number().nullable(),total_lines:c.number().nullable()}),c.object({type:c.literal("text_editor_code_execution_create_result"),is_file_update:c.boolean()}),c.object({type:c.literal("text_editor_code_execution_str_replace_result"),lines:c.array(c.string()).nullable(),new_lines:c.number().nullable(),new_start:c.number().nullable(),old_lines:c.number().nullable(),old_start:c.number().nullable()})])})])),stop_reason:c.string().nullish(),stop_sequence:c.string().nullish(),usage:c.looseObject({input_tokens:c.number(),output_tokens:c.number(),cache_creation_input_tokens:c.number().nullish(),cache_read_input_tokens:c.number().nullish()}),container:c.object({expires_at:c.string(),id:c.string(),skills:c.array(c.object({type:c.union([c.literal("anthropic"),c.literal("custom")]),skill_id:c.string(),version:c.string()})).nullish()}).nullish()}))),sX=fe(()=>ne(c.discriminatedUnion("type",[c.object({type:c.literal("message_start"),message:c.object({id:c.string().nullish(),model:c.string().nullish(),usage:c.looseObject({input_tokens:c.number(),cache_creation_input_tokens:c.number().nullish(),cache_read_input_tokens:c.number().nullish()})})}),c.object({type:c.literal("content_block_start"),index:c.number(),content_block:c.discriminatedUnion("type",[c.object({type:c.literal("text"),text:c.string()}),c.object({type:c.literal("thinking"),thinking:c.string()}),c.object({type:c.literal("tool_use"),id:c.string(),name:c.string()}),c.object({type:c.literal("redacted_thinking"),data:c.string()}),c.object({type:c.literal("server_tool_use"),id:c.string(),name:c.string(),input:c.record(c.string(),c.unknown()).nullish()}),c.object({type:c.literal("web_fetch_tool_result"),tool_use_id:c.string(),content:c.union([c.object({type:c.literal("web_fetch_result"),url:c.string(),retrieved_at:c.string(),content:c.object({type:c.literal("document"),title:c.string().nullable(),citations:c.object({enabled:c.boolean()}).optional(),source:c.object({type:c.literal("text"),media_type:c.string(),data:c.string()})})}),c.object({type:c.literal("web_fetch_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("web_search_tool_result"),tool_use_id:c.string(),content:c.union([c.array(c.object({type:c.literal("web_search_result"),url:c.string(),title:c.string(),encrypted_content:c.string(),page_age:c.string().nullish()})),c.object({type:c.literal("web_search_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("code_execution_tool_result"),tool_use_id:c.string(),content:c.union([c.object({type:c.literal("code_execution_result"),stdout:c.string(),stderr:c.string(),return_code:c.number()}),c.object({type:c.literal("code_execution_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("bash_code_execution_tool_result"),tool_use_id:c.string(),content:c.discriminatedUnion("type",[c.object({type:c.literal("bash_code_execution_result"),content:c.array(c.object({type:c.literal("bash_code_execution_output"),file_id:c.string()})),stdout:c.string(),stderr:c.string(),return_code:c.number()}),c.object({type:c.literal("bash_code_execution_tool_result_error"),error_code:c.string()})])}),c.object({type:c.literal("text_editor_code_execution_tool_result"),tool_use_id:c.string(),content:c.discriminatedUnion("type",[c.object({type:c.literal("text_editor_code_execution_tool_result_error"),error_code:c.string()}),c.object({type:c.literal("text_editor_code_execution_view_result"),content:c.string(),file_type:c.string(),num_lines:c.number().nullable(),start_line:c.number().nullable(),total_lines:c.number().nullable()}),c.object({type:c.literal("text_editor_code_execution_create_result"),is_file_update:c.boolean()}),c.object({type:c.literal("text_editor_code_execution_str_replace_result"),lines:c.array(c.string()).nullable(),new_lines:c.number().nullable(),new_start:c.number().nullable(),old_lines:c.number().nullable(),old_start:c.number().nullable()})])})])}),c.object({type:c.literal("content_block_delta"),index:c.number(),delta:c.discriminatedUnion("type",[c.object({type:c.literal("input_json_delta"),partial_json:c.string()}),c.object({type:c.literal("text_delta"),text:c.string()}),c.object({type:c.literal("thinking_delta"),thinking:c.string()}),c.object({type:c.literal("signature_delta"),signature:c.string()}),c.object({type:c.literal("citations_delta"),citation:c.discriminatedUnion("type",[c.object({type:c.literal("web_search_result_location"),cited_text:c.string(),url:c.string(),title:c.string(),encrypted_index:c.string()}),c.object({type:c.literal("page_location"),cited_text:c.string(),document_index:c.number(),document_title:c.string().nullable(),start_page_number:c.number(),end_page_number:c.number()}),c.object({type:c.literal("char_location"),cited_text:c.string(),document_index:c.number(),document_title:c.string().nullable(),start_char_index:c.number(),end_char_index:c.number()})])})])}),c.object({type:c.literal("content_block_stop"),index:c.number()}),c.object({type:c.literal("error"),error:c.object({type:c.string(),message:c.string()})}),c.object({type:c.literal("message_delta"),delta:c.object({stop_reason:c.string().nullish(),stop_sequence:c.string().nullish(),container:c.object({expires_at:c.string(),id:c.string(),skills:c.array(c.object({type:c.union([c.literal("anthropic"),c.literal("custom")]),skill_id:c.string(),version:c.string()})).nullish()}).nullish()}),usage:c.looseObject({output_tokens:c.number(),cache_creation_input_tokens:c.number().nullish()})}),c.object({type:c.literal("message_stop")}),c.object({type:c.literal("ping")})]))),aX=fe(()=>ne(c.object({signature:c.string().optional(),redactedData:c.string().optional()}))),Gj=c.object({citations:c.object({enabled:c.boolean()}).optional(),title:c.string().optional(),context:c.string().optional()}),cX=c.object({sendReasoning:c.boolean().optional(),structuredOutputMode:c.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:c.object({type:c.union([c.literal("enabled"),c.literal("disabled")]),budgetTokens:c.number().optional()}).optional(),disableParallelToolUse:c.boolean().optional(),cacheControl:c.object({type:c.literal("ephemeral"),ttl:c.union([c.literal("5m"),c.literal("1h")]).optional()}).optional(),container:c.object({id:c.string().optional(),skills:c.array(c.object({type:c.union([c.literal("anthropic"),c.literal("custom")]),skillId:c.string(),version:c.string().optional()})).optional()}).optional(),effort:c.enum(["low","medium","high"]).optional()}),Zj=4;function uX(t){var e;let r=t?.anthropic;return(e=r?.cacheControl)!=null?e:r?.cache_control}s(uX,"getCacheControl");var A0=class{static{s(this,"CacheControlValidator")}constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(t,e){let r=uX(t);if(r){if(!e.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${e.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>Zj){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${Zj} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},lX=fe(()=>ne(c.object({maxCharacters:c.number().optional()}))),dX=fe(()=>ne(c.object({command:c.enum(["view","create","str_replace","insert"]),path:c.string(),file_text:c.string().optional(),insert_line:c.number().int().optional(),new_str:c.string().optional(),old_str:c.string().optional(),view_range:c.array(c.number().int()).optional()}))),pX=jt({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:dX}),mX=s((t={})=>pX(t),"textEditor_20250728"),fX=fe(()=>ne(c.object({maxUses:c.number().optional(),allowedDomains:c.array(c.string()).optional(),blockedDomains:c.array(c.string()).optional(),userLocation:c.object({type:c.literal("approximate"),city:c.string().optional(),region:c.string().optional(),country:c.string().optional(),timezone:c.string().optional()}).optional()}))),Wj=fe(()=>ne(c.array(c.object({url:c.string(),title:c.string(),pageAge:c.string().nullable(),encryptedContent:c.string(),type:c.literal("web_search_result")})))),hX=fe(()=>ne(c.object({query:c.string()}))),gX=Qt({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:hX,outputSchema:Wj}),yX=s((t={})=>gX(t),"webSearch_20250305"),vX=fe(()=>ne(c.object({maxUses:c.number().optional(),allowedDomains:c.array(c.string()).optional(),blockedDomains:c.array(c.string()).optional(),citations:c.object({enabled:c.boolean()}).optional(),maxContentTokens:c.number().optional()}))),Qj=fe(()=>ne(c.object({type:c.literal("web_fetch_result"),url:c.string(),content:c.object({type:c.literal("document"),title:c.string(),citations:c.object({enabled:c.boolean()}).optional(),source:c.union([c.object({type:c.literal("base64"),mediaType:c.literal("application/pdf"),data:c.string()}),c.object({type:c.literal("text"),mediaType:c.literal("text/plain"),data:c.string()})])}),retrievedAt:c.string().nullable()}))),_X=fe(()=>ne(c.object({url:c.string()}))),bX=Qt({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:_X,outputSchema:Qj}),wX=s((t={})=>bX(t),"webFetch_20250910");async function xX({tools:t,toolChoice:e,disableParallelToolUse:r,cacheControlValidator:n}){t=t?.length?t:void 0;let o=[],i=new Set,a=n||new A0;if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};let u=[];for(let d of t)switch(d.type){case"function":{let p=a.getCacheControl(d.providerOptions,{type:"tool definition",canCache:!0});u.push({name:d.name,description:d.description,input_schema:d.inputSchema,cache_control:p});break}case"provider-defined":{switch(d.id){case"anthropic.code_execution_20250522":{i.add("code-execution-2025-05-22"),u.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{i.add("code-execution-2025-08-25"),u.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"computer",type:"computer_20250124",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"computer",type:"computer_20241022",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{i.add("computer-use-2025-01-24"),u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await fr({value:d.args,schema:lX});u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{i.add("context-management-2025-06-27"),u.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{i.add("web-fetch-2025-09-10");let p=await fr({value:d.args,schema:vX});u.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await fr({value:d.args,schema:fX});u.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}default:{o.push({type:"unsupported-tool",tool:d});break}}break}default:{o.push({type:"unsupported-tool",tool:d});break}}if(e==null)return{tools:u,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:o,betas:i};let l=e.type;switch(l){case"auto":return{tools:u,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"required":return{tools:u,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};case"tool":return{tools:u,toolChoice:{type:"tool",name:e.toolName,disable_parallel_tool_use:r},toolWarnings:o,betas:i};default:{let d=l;throw new yt({functionality:`tool choice type: ${d}`})}}}s(xX,"prepareTools");var Xj=fe(()=>ne(c.object({type:c.literal("code_execution_result"),stdout:c.string(),stderr:c.string(),return_code:c.number()}))),SX=fe(()=>ne(c.object({code:c.string()}))),TX=Qt({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:SX,outputSchema:Xj}),EX=s((t={})=>TX(t),"codeExecution_20250522"),Yj=fe(()=>ne(c.discriminatedUnion("type",[c.object({type:c.literal("bash_code_execution_result"),content:c.array(c.object({type:c.literal("bash_code_execution_output"),file_id:c.string()})),stdout:c.string(),stderr:c.string(),return_code:c.number()}),c.object({type:c.literal("bash_code_execution_tool_result_error"),error_code:c.string()}),c.object({type:c.literal("text_editor_code_execution_tool_result_error"),error_code:c.string()}),c.object({type:c.literal("text_editor_code_execution_view_result"),content:c.string(),file_type:c.string(),num_lines:c.number().nullable(),start_line:c.number().nullable(),total_lines:c.number().nullable()}),c.object({type:c.literal("text_editor_code_execution_create_result"),is_file_update:c.boolean()}),c.object({type:c.literal("text_editor_code_execution_str_replace_result"),lines:c.array(c.string()).nullable(),new_lines:c.number().nullable(),new_start:c.number().nullable(),old_lines:c.number().nullable(),old_start:c.number().nullable()})]))),IX=fe(()=>ne(c.discriminatedUnion("type",[c.object({type:c.literal("bash_code_execution"),command:c.string()}),c.discriminatedUnion("command",[c.object({type:c.literal("text_editor_code_execution"),command:c.literal("view"),path:c.string()}),c.object({type:c.literal("text_editor_code_execution"),command:c.literal("create"),path:c.string(),file_text:c.string().nullish()}),c.object({type:c.literal("text_editor_code_execution"),command:c.literal("str_replace"),path:c.string(),old_str:c.string(),new_str:c.string()})])]))),kX=Qt({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:IX,outputSchema:Yj}),PX=s((t={})=>kX(t),"codeExecution_20250825");function AX(t){if(typeof t=="string")return Buffer.from(t,"base64").toString("utf-8");if(t instanceof Uint8Array)return new TextDecoder().decode(t);throw t instanceof URL?new yt({functionality:"URL-based text documents are not supported for citations"}):new yt({functionality:`unsupported data type for text documents: ${typeof t}`})}s(AX,"convertToString");async function CX({prompt:t,sendReasoning:e,warnings:r,cacheControlValidator:n}){var o,i,a,u,l;let d=new Set,p=OX(t),f=n||new A0,h,y=[];async function g(_){var w,b;let x=await At({provider:"anthropic",providerOptions:_,schema:Gj});return(b=(w=x?.citations)==null?void 0:w.enabled)!=null?b:!1}s(g,"shouldEnableCitations");async function m(_){let w=await At({provider:"anthropic",providerOptions:_,schema:Gj});return{title:w?.title,context:w?.context}}s(m,"getDocumentMetadata");for(let _=0;_<p.length;_++){let w=p[_],b=_===p.length-1,x=w.type;switch(x){case"system":{if(h!=null)throw new yt({functionality:"Multiple system messages that are separated by user/assistant messages"});h=w.messages.map(({content:k,providerOptions:R})=>({type:"text",text:k,cache_control:f.getCacheControl(R,{type:"system message",canCache:!0})}));break}case"user":{let k=[];for(let R of w.messages){let{role:O,content:C}=R;switch(O){case"user":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,D=(o=f.getCacheControl(P.providerOptions,{type:"user message part",canCache:!0}))!=null?o:N?f.getCacheControl(R.providerOptions,{type:"user message",canCache:!0}):void 0;switch(P.type){case"text":{k.push({type:"text",text:P.text,cache_control:D});break}case"file":{if(P.mediaType.startsWith("image/"))k.push({type:"image",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:P.mediaType==="image/*"?"image/jpeg":P.mediaType,data:Qr(P.data)},cache_control:D});else if(P.mediaType==="application/pdf"){d.add("pdfs-2024-09-25");let K=await g(P.providerOptions),V=await m(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:"application/pdf",data:Qr(P.data)},title:(i=V.title)!=null?i:P.filename,...V.context&&{context:V.context},...K&&{citations:{enabled:!0}},cache_control:D})}else if(P.mediaType==="text/plain"){let K=await g(P.providerOptions),V=await m(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"text",media_type:"text/plain",data:AX(P.data)},title:(a=V.title)!=null?a:P.filename,...V.context&&{context:V.context},...K&&{citations:{enabled:!0}},cache_control:D})}else throw new yt({functionality:`media type: ${P.mediaType}`});break}}}break}case"tool":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,D=(u=f.getCacheControl(P.providerOptions,{type:"tool result part",canCache:!0}))!=null?u:N?f.getCacheControl(R.providerOptions,{type:"tool result message",canCache:!0}):void 0,K=P.output,V;switch(K.type){case"content":V=K.value.map(q=>{switch(q.type){case"text":return{type:"text",text:q.text};case"media":{if(q.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:q.mediaType,data:q.data}};if(q.mediaType==="application/pdf")return d.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:q.mediaType,data:q.data}};throw new yt({functionality:`media type: ${q.mediaType}`})}}});break;case"text":case"error-text":V=K.value;break;case"json":case"error-json":default:V=JSON.stringify(K.value);break}k.push({type:"tool_result",tool_use_id:P.toolCallId,content:V,is_error:K.type==="error-text"||K.type==="error-json"?!0:void 0,cache_control:D})}break}default:{let $=O;throw new Error(`Unsupported role: ${$}`)}}}y.push({role:"user",content:k});break}case"assistant":{let k=[];for(let R=0;R<w.messages.length;R++){let O=w.messages[R],C=R===w.messages.length-1,{content:$}=O;for(let P=0;P<$.length;P++){let N=$[P],D=P===$.length-1,K=(l=f.getCacheControl(N.providerOptions,{type:"assistant message part",canCache:!0}))!=null?l:D?f.getCacheControl(O.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(N.type){case"text":{k.push({type:"text",text:b&&C&&D?N.text.trim():N.text,cache_control:K});break}case"reasoning":{if(e){let V=await At({provider:"anthropic",providerOptions:N.providerOptions,schema:aX});V!=null?V.signature!=null?(f.getCacheControl(N.providerOptions,{type:"thinking block",canCache:!1}),k.push({type:"thinking",thinking:N.text,signature:V.signature})):V.redactedData!=null?(f.getCacheControl(N.providerOptions,{type:"redacted thinking block",canCache:!1}),k.push({type:"redacted_thinking",data:V.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(N.providerExecuted){N.toolName==="code_execution"&&N.input!=null&&typeof N.input=="object"&&"type"in N.input&&typeof N.input.type=="string"&&(N.input.type==="bash_code_execution"||N.input.type==="text_editor_code_execution")?k.push({type:"server_tool_use",id:N.toolCallId,name:N.input.type,input:N.input,cache_control:K}):N.toolName==="code_execution"||N.toolName==="web_fetch"||N.toolName==="web_search"?k.push({type:"server_tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:K}):r.push({type:"other",message:`provider executed tool call for tool ${N.toolName} is not supported`});break}k.push({type:"tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:K});break}case"tool-result":{if(N.toolName==="code_execution"){let V=N.output;if(V.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${V.type} for tool ${N.toolName} is not supported`});break}if(V.value==null||typeof V.value!="object"||!("type"in V.value)||typeof V.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${N.toolName}`});break}if(V.value.type==="code_execution_result"){let q=await fr({value:V.value,schema:Xj});k.push({type:"code_execution_tool_result",tool_use_id:N.toolCallId,content:{type:q.type,stdout:q.stdout,stderr:q.stderr,return_code:q.return_code},cache_control:K})}else{let q=await fr({value:V.value,schema:Yj});k.push(q.type==="bash_code_execution_result"||q.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:K,content:q}:{type:"text_editor_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:K,content:q})}break}if(N.toolName==="web_fetch"){let V=N.output;if(V.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${V.type} for tool ${N.toolName} is not supported`});break}let q=await fr({value:V.value,schema:Qj});k.push({type:"web_fetch_tool_result",tool_use_id:N.toolCallId,content:{type:"web_fetch_result",url:q.url,retrieved_at:q.retrievedAt,content:{type:"document",title:q.content.title,citations:q.content.citations,source:{type:q.content.source.type,media_type:q.content.source.mediaType,data:q.content.source.data}}},cache_control:K});break}if(N.toolName==="web_search"){let V=N.output;if(V.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${V.type} for tool ${N.toolName} is not supported`});break}let q=await fr({value:V.value,schema:Wj});k.push({type:"web_search_tool_result",tool_use_id:N.toolCallId,content:q.map(Q=>({url:Q.url,title:Q.title,page_age:Q.pageAge,encrypted_content:Q.encryptedContent,type:Q.type})),cache_control:K});break}r.push({type:"other",message:`provider executed tool result for tool ${N.toolName} is not supported`});break}}}}y.push({role:"assistant",content:k});break}default:{let k=x;throw new Error(`content type: ${k}`)}}}return{prompt:{system:h,messages:y},betas:d}}s(CX,"convertToAnthropicMessagesPrompt");function OX(t){let e=[],r;for(let n of t){let{role:o}=n;switch(o){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let i=o;throw new Error(`Unsupported role: ${i}`)}}}return e}s(OX,"groupIntoBlocks");function Jj({finishReason:t,isJsonResponseFromTool:e}){switch(t){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return e?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}s(Jj,"mapAnthropicStopReason");function Kj(t,e,r){var n;if(t.type!=="page_location"&&t.type!=="char_location")return;let o=e[t.document_index];if(o)return{type:"source",sourceType:"document",id:r(),mediaType:o.mediaType,title:(n=t.document_title)!=null?n:o.title,filename:o.filename,providerMetadata:{anthropic:t.type==="page_location"?{citedText:t.cited_text,startPageNumber:t.start_page_number,endPageNumber:t.end_page_number}:{citedText:t.cited_text,startCharIndex:t.start_char_index,endCharIndex:t.end_char_index}}}}s(Kj,"createCitationSource");var $X=class{static{s(this,"AnthropicMessagesLanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:mr}supportsUrl(t){return t.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({userSuppliedBetas:t,prompt:e,maxOutputTokens:r,temperature:n,topP:o,topK:i,frequencyPenalty:a,presencePenalty:u,stopSequences:l,responseFormat:d,seed:p,tools:f,toolChoice:h,providerOptions:y}){var g,m,_,w,b;let x=[];a!=null&&x.push({type:"unsupported-setting",setting:"frequencyPenalty"}),u!=null&&x.push({type:"unsupported-setting",setting:"presencePenalty"}),p!=null&&x.push({type:"unsupported-setting",setting:"seed"}),n!=null&&n>1?(x.push({type:"unsupported-setting",setting:"temperature",details:`${n} exceeds anthropic maximum of 1.0. clamped to 1.0`}),n=1):n!=null&&n<0&&(x.push({type:"unsupported-setting",setting:"temperature",details:`${n} is below anthropic minimum of 0. clamped to 0`}),n=0),d?.type==="json"&&(d.schema==null?x.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):f!=null&&x.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let k=await At({provider:"anthropic",providerOptions:y,schema:cX}),{maxOutputTokens:R,supportsStructuredOutput:O,isKnownModel:C}=RX(this.modelId),$=(g=k?.structuredOutputMode)!=null?g:"jsonTool",P=$==="outputFormat"||$==="auto"&&O,N=d?.type==="json"&&d.schema!=null&&!P?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema}:void 0,D=new A0,{prompt:K,betas:V}=await CX({prompt:e,sendReasoning:(m=k?.sendReasoning)!=null?m:!0,warnings:x,cacheControlValidator:D}),q=((_=k?.thinking)==null?void 0:_.type)==="enabled",Q=(w=k?.thinking)==null?void 0:w.budgetTokens,ee=r??R,oe={model:this.modelId,max_tokens:ee,temperature:n,top_k:i,top_p:o,stop_sequences:l,...q&&{thinking:{type:"enabled",budget_tokens:Q}},...k?.effort&&{output_config:{effort:k.effort}},...P&&d?.type==="json"&&d.schema!=null&&{output_format:{type:"json_schema",schema:d.schema}},...k?.container&&{container:{id:k.container.id,skills:(b=k.container.skills)==null?void 0:b.map(Oe=>({type:Oe.type,skill_id:Oe.skillId,version:Oe.version}))}},system:K.system,messages:K.messages};if(q){if(Q==null)throw new yt({functionality:"thinking requires a budget"});oe.temperature!=null&&(oe.temperature=void 0,x.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(oe.top_k=void 0,x.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),o!=null&&(oe.top_p=void 0,x.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),oe.max_tokens=ee+Q}C&&oe.max_tokens>R&&(r!=null&&x.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${oe.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${R} max output tokens. The max output tokens have been limited to ${R}.`}),oe.max_tokens=R),k?.container&&k.container.skills&&k.container.skills.length>0&&(V.add("code-execution-2025-08-25"),V.add("skills-2025-10-02"),V.add("files-api-2025-04-14"),f?.some(Oe=>Oe.type==="provider-defined"&&Oe.id==="anthropic.code_execution_20250825")||x.push({type:"other",message:"code execution tool is required when using skills"})),k?.effort&&V.add("effort-2025-11-24"),P&&V.add("structured-outputs-2025-11-13");let{tools:_e,toolChoice:Te,toolWarnings:We,betas:He}=await xX(N!=null?{tools:[N],toolChoice:{type:"tool",toolName:N.name},disableParallelToolUse:!0,cacheControlValidator:D}:{tools:f??[],toolChoice:h,disableParallelToolUse:k?.disableParallelToolUse,cacheControlValidator:D}),G=D.getWarnings();return{args:{...oe,tools:_e,tool_choice:Te},warnings:[...x,...We,...G],betas:new Set([...V,...He,...t]),usesJsonResponseTool:N!=null}}async getHeaders({betas:t,headers:e}){return Nt(await Kn(this.config.headers),e,t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{})}async getBetasFromHeaders(t){var e,r;let o=(e=(await Kn(this.config.headers))["anthropic-beta"])!=null?e:"",i=(r=t?.["anthropic-beta"])!=null?r:"";return new Set([...o.toLowerCase().split(","),...i.toLowerCase().split(",")].map(a=>a.trim()).filter(a=>a!==""))}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}extractCitationDocuments(t){let e=s(r=>{var n,o;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(n=r.providerOptions)==null?void 0:n.anthropic,a=i?.citations;return(o=a?.enabled)!=null?o:!1},"isCitationPart");return t.filter(r=>r.role==="user").flatMap(r=>r.content).filter(e).map(r=>{var n;let o=r;return{title:(n=o.filename)!=null?n:"Untitled Document",filename:o.filename,mediaType:o.mediaType}})}async doGenerate(t){var e,r,n,o,i,a,u,l;let{args:d,warnings:p,betas:f,usesJsonResponseTool:h}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),y=this.extractCitationDocuments(t.prompt),{responseHeaders:g,value:m,rawValue:_}=await Dt({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:f,headers:t.headers}),body:this.transformRequestBody(d),failedResponseHandler:Hj,successfulResponseHandler:ir(iX),abortSignal:t.abortSignal,fetch:this.config.fetch}),w=[];for(let b of m.content)switch(b.type){case"text":{if(!h&&(w.push({type:"text",text:b.text}),b.citations))for(let x of b.citations){let k=Kj(x,y,this.generateId);k&&w.push(k)}break}case"thinking":{w.push({type:"reasoning",text:b.thinking,providerMetadata:{anthropic:{signature:b.signature}}});break}case"redacted_thinking":{w.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:b.data}}});break}case"tool_use":{w.push(h?{type:"text",text:JSON.stringify(b.input)}:{type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input)});break}case"server_tool_use":{b.name==="text_editor_code_execution"||b.name==="bash_code_execution"?w.push({type:"tool-call",toolCallId:b.id,toolName:"code_execution",input:JSON.stringify({type:b.name,...b.input}),providerExecuted:!0}):(b.name==="web_search"||b.name==="code_execution"||b.name==="web_fetch")&&w.push({type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input),providerExecuted:!0});break}case"web_fetch_tool_result":{b.content.type==="web_fetch_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:b.content.url,retrievedAt:b.content.retrieved_at,content:{type:b.content.content.type,title:b.content.content.title,citations:b.content.content.citations,source:{type:b.content.content.source.type,mediaType:b.content.content.source.media_type,data:b.content.content.source.data}}},providerExecuted:!0}):b.content.type==="web_fetch_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(b.content)){w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",result:b.content.map(x=>{var k;return{url:x.url,title:x.title,pageAge:(k=x.page_age)!=null?k:null,encryptedContent:x.encrypted_content,type:x.type}}),providerExecuted:!0});for(let x of b.content)w.push({type:"source",sourceType:"url",id:this.generateId(),url:x.url,title:x.title,providerMetadata:{anthropic:{pageAge:(e=x.page_age)!=null?e:null}}})}else w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{b.content.type==="code_execution_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:{type:b.content.type,stdout:b.content.stdout,stderr:b.content.stderr,return_code:b.content.return_code},providerExecuted:!0}):b.content.type==="code_execution_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:b.content,providerExecuted:!0});break}}return{content:w,finishReason:Jj({finishReason:m.stop_reason,isJsonResponseFromTool:h}),usage:{inputTokens:m.usage.input_tokens,outputTokens:m.usage.output_tokens,totalTokens:m.usage.input_tokens+m.usage.output_tokens,cachedInputTokens:(r=m.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:d},response:{id:(n=m.id)!=null?n:void 0,modelId:(o=m.model)!=null?o:void 0,headers:g,body:_},warnings:p,providerMetadata:{anthropic:{usage:m.usage,cacheCreationInputTokens:(i=m.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(a=m.stop_sequence)!=null?a:null,container:m.container?{expiresAt:m.container.expires_at,id:m.container.id,skills:(l=(u=m.container.skills)==null?void 0:u.map(b=>({type:b.type,skillId:b.skill_id,version:b.version})))!=null?l:null}:null}}}}async doStream(t){let{args:e,warnings:r,betas:n,usesJsonResponseTool:o}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),i=this.extractCitationDocuments(t.prompt),a={...e,stream:!0},u=this.buildRequestUrl(!0),{responseHeaders:l,value:d}=await Dt({url:u,headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:Hj,successfulResponseHandler:Wn(sX),abortSignal:t.abortSignal,fetch:this.config.fetch}),p="unknown",f={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},h={},y,g=null,m=null,_=null,w,b=this.generateId,x=!0,k,R=new Rj,O=d.pipeThrough(new TransformStream({start(N){N.enqueue({type:"stream-start",warnings:r})},async flush(){R.isPending()&&R.resolve({stream:k,request:{body:a},response:{headers:l}})},transform(N,D){var K,V,q,Q,ee,oe,_e,Te,We,He;if(t.includeRawChunks&&D.enqueue({type:"raw",rawValue:N.rawValue}),!N.success){D.enqueue({type:"error",error:N.error});return}if(x){if(N.value.type==="error"){R.reject(new _r({message:N.value.error.message,url:u,requestBodyValues:a,statusCode:N.value.error.type==="overloaded_error"?529:500,responseHeaders:l,responseBody:JSON.stringify(N.value.error),isRetryable:N.value.error.type==="overloaded_error"})),D.terminate();return}x=!1,R.resolve({stream:k,request:{body:a},response:{headers:l}})}let G=N.value;switch(G.type){case"ping":return;case"content_block_start":{let Oe=G.content_block.type;switch(w=Oe,Oe){case"text":{h[G.index]={type:"text"},D.enqueue({type:"text-start",id:String(G.index)});return}case"thinking":{h[G.index]={type:"reasoning"},D.enqueue({type:"reasoning-start",id:String(G.index)});return}case"redacted_thinking":{h[G.index]={type:"reasoning"},D.enqueue({type:"reasoning-start",id:String(G.index),providerMetadata:{anthropic:{redactedData:G.content_block.data}}});return}case"tool_use":{h[G.index]=o?{type:"text"}:{type:"tool-call",toolCallId:G.content_block.id,toolName:G.content_block.name,input:"",firstDelta:!0},D.enqueue(o?{type:"text-start",id:String(G.index)}:{type:"tool-input-start",id:G.content_block.id,toolName:G.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(G.content_block.name)){h[G.index]={type:"tool-call",toolCallId:G.content_block.id,toolName:G.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let ge=G.content_block.name==="text_editor_code_execution"||G.content_block.name==="bash_code_execution"?"code_execution":G.content_block.name;D.enqueue({type:"tool-input-start",id:G.content_block.id,toolName:ge,providerExecuted:!0})}return}case"web_fetch_tool_result":{let ge=G.content_block;ge.content.type==="web_fetch_result"?D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:ge.content.url,retrievedAt:ge.content.retrieved_at,content:{type:ge.content.content.type,title:ge.content.content.title,citations:ge.content.content.citations,source:{type:ge.content.content.source.type,mediaType:ge.content.content.source.media_type,data:ge.content.content.source.data}}},providerExecuted:!0}):ge.content.type==="web_fetch_tool_result_error"&&D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let ge=G.content_block;if(Array.isArray(ge.content)){D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_search",result:ge.content.map(z=>{var Ze;return{url:z.url,title:z.title,pageAge:(Ze=z.page_age)!=null?Ze:null,encryptedContent:z.encrypted_content,type:z.type}}),providerExecuted:!0});for(let z of ge.content)D.enqueue({type:"source",sourceType:"url",id:b(),url:z.url,title:z.title,providerMetadata:{anthropic:{pageAge:(K=z.page_age)!=null?K:null}}})}else D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let ge=G.content_block;ge.content.type==="code_execution_result"?D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",result:{type:ge.content.type,stdout:ge.content.stdout,stderr:ge.content.stderr,return_code:ge.content.return_code},providerExecuted:!0}):ge.content.type==="code_execution_tool_result_error"&&D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let ge=G.content_block;D.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",result:ge.content,providerExecuted:!0});return}default:{let ge=Oe;throw new Error(`Unsupported content block type: ${ge}`)}}}case"content_block_stop":{if(h[G.index]!=null){let Oe=h[G.index];switch(Oe.type){case"text":{D.enqueue({type:"text-end",id:String(G.index)});break}case"reasoning":{D.enqueue({type:"reasoning-end",id:String(G.index)});break}case"tool-call":if(!o){D.enqueue({type:"tool-input-end",id:Oe.toolCallId});let ge=Oe.toolName==="text_editor_code_execution"||Oe.toolName==="bash_code_execution"?"code_execution":Oe.toolName;D.enqueue({type:"tool-call",toolCallId:Oe.toolCallId,toolName:ge,input:Oe.input,providerExecuted:Oe.providerExecuted})}break}delete h[G.index]}w=void 0;return}case"content_block_delta":{let Oe=G.delta.type;switch(Oe){case"text_delta":{if(o)return;D.enqueue({type:"text-delta",id:String(G.index),delta:G.delta.text});return}case"thinking_delta":{D.enqueue({type:"reasoning-delta",id:String(G.index),delta:G.delta.thinking});return}case"signature_delta":{w==="thinking"&&D.enqueue({type:"reasoning-delta",id:String(G.index),delta:"",providerMetadata:{anthropic:{signature:G.delta.signature}}});return}case"input_json_delta":{let ge=h[G.index],z=G.delta.partial_json;if(z.length===0)return;if(o){if(ge?.type!=="text")return;D.enqueue({type:"text-delta",id:String(G.index),delta:z})}else{if(ge?.type!=="tool-call")return;ge.firstDelta&&(ge.toolName==="bash_code_execution"||ge.toolName==="text_editor_code_execution")&&(z=`{"type": "${ge.toolName}",${z.substring(1)}`),D.enqueue({type:"tool-input-delta",id:ge.toolCallId,delta:z}),ge.input+=z,ge.firstDelta=!1}return}case"citations_delta":{let ge=G.delta.citation,z=Kj(ge,i,b);z&&D.enqueue(z);return}default:{let ge=Oe;throw new Error(`Unsupported delta type: ${ge}`)}}}case"message_start":{f.inputTokens=G.message.usage.input_tokens,f.cachedInputTokens=(V=G.message.usage.cache_read_input_tokens)!=null?V:void 0,y={...G.message.usage},g=(q=G.message.usage.cache_creation_input_tokens)!=null?q:null,D.enqueue({type:"response-metadata",id:(Q=G.message.id)!=null?Q:void 0,modelId:(ee=G.message.model)!=null?ee:void 0});return}case"message_delta":{f.outputTokens=G.usage.output_tokens,f.totalTokens=((oe=f.inputTokens)!=null?oe:0)+((_e=G.usage.output_tokens)!=null?_e:0),p=Jj({finishReason:G.delta.stop_reason,isJsonResponseFromTool:o}),m=(Te=G.delta.stop_sequence)!=null?Te:null,_=G.delta.container!=null?{expiresAt:G.delta.container.expires_at,id:G.delta.container.id,skills:(He=(We=G.delta.container.skills)==null?void 0:We.map(Oe=>({type:Oe.type,skillId:Oe.skill_id,version:Oe.version})))!=null?He:null}:null,y={...y,...G.usage};return}case"message_stop":{D.enqueue({type:"finish",finishReason:p,usage:f,providerMetadata:{anthropic:{usage:y??null,cacheCreationInputTokens:g,stopSequence:m,container:_}}});return}case"error":{D.enqueue({type:"error",error:G.error});return}default:{let Oe=G;throw new Error(`Unsupported chunk type: ${Oe}`)}}}})),[C,$]=O.tee();k=$;let P=C.getReader();return(async()=>{try{let{done:N}=await P.read();N||await P.cancel()}catch{try{await P.cancel()}catch{}}finally{P.releaseLock()}})(),R.promise}};function RX(t){return t.includes("claude-sonnet-4-5")||t.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-sonnet-4-")||t.includes("claude-3-7-sonnet")||t.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}s(RX,"getModelCapabilities");var NX=fe(()=>ne(c.object({command:c.string(),restart:c.boolean().optional()}))),DX=jt({id:"anthropic.bash_20241022",name:"bash",inputSchema:NX}),jX=fe(()=>ne(c.object({command:c.string(),restart:c.boolean().optional()}))),MX=jt({id:"anthropic.bash_20250124",name:"bash",inputSchema:jX}),UX=fe(()=>ne(c.object({action:c.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:c.array(c.number().int()).optional(),text:c.string().optional()}))),zX=jt({id:"anthropic.computer_20241022",name:"computer",inputSchema:UX}),LX=fe(()=>ne(c.object({action:c.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:c.tuple([c.number().int(),c.number().int()]).optional(),duration:c.number().optional(),scroll_amount:c.number().optional(),scroll_direction:c.enum(["up","down","left","right"]).optional(),start_coordinate:c.tuple([c.number().int(),c.number().int()]).optional(),text:c.string().optional()}))),qX=jt({id:"anthropic.computer_20250124",name:"computer",inputSchema:LX}),FX=fe(()=>ne(c.discriminatedUnion("command",[c.object({command:c.literal("view"),path:c.string(),view_range:c.tuple([c.number(),c.number()]).optional()}),c.object({command:c.literal("create"),path:c.string(),file_text:c.string()}),c.object({command:c.literal("str_replace"),path:c.string(),old_str:c.string(),new_str:c.string()}),c.object({command:c.literal("insert"),path:c.string(),insert_line:c.number(),insert_text:c.string()}),c.object({command:c.literal("delete"),path:c.string()}),c.object({command:c.literal("rename"),old_path:c.string(),new_path:c.string()})]))),BX=jt({id:"anthropic.memory_20250818",name:"memory",inputSchema:FX}),VX=fe(()=>ne(c.object({command:c.enum(["view","create","str_replace","insert","undo_edit"]),path:c.string(),file_text:c.string().optional(),insert_line:c.number().int().optional(),new_str:c.string().optional(),old_str:c.string().optional(),view_range:c.array(c.number().int()).optional()}))),HX=jt({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:VX}),GX=fe(()=>ne(c.object({command:c.enum(["view","create","str_replace","insert","undo_edit"]),path:c.string(),file_text:c.string().optional(),insert_line:c.number().int().optional(),new_str:c.string().optional(),old_str:c.string().optional(),view_range:c.array(c.number().int()).optional()}))),ZX=jt({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:GX}),JX=fe(()=>ne(c.object({command:c.enum(["view","create","str_replace","insert"]),path:c.string(),file_text:c.string().optional(),insert_line:c.number().int().optional(),new_str:c.string().optional(),old_str:c.string().optional(),view_range:c.array(c.number().int()).optional()}))),KX=jt({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:JX}),WX={bash_20241022:DX,bash_20250124:MX,codeExecution_20250522:EX,codeExecution_20250825:PX,computer_20241022:zX,computer_20250124:qX,memory_20250818:BX,textEditor_20241022:HX,textEditor_20250124:ZX,textEditor_20250429:KX,textEditor_20250728:mX,webFetch_20250910:wX,webSearch_20250305:yX};function QX(t={}){var e,r;let n=(e=Pa(Sf({settingValue:t.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?e:"https://api.anthropic.com/v1",o=(r=t.name)!=null?r:"anthropic.messages",i=s(()=>Ki({"anthropic-version":"2023-06-01","x-api-key":Ia({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers},`ai-sdk/anthropic/${nX}`),"getHeaders"),a=s(l=>{var d;return new $X(l,{provider:o,baseURL:n,headers:i,fetch:t.fetch,generateId:(d=t.generateId)!=null?d:mr,supportedUrls:s(()=>({"image/*":[/^https?:\/\/.*$/]}),"supportedUrls")})},"createChatModel"),u=s(function(l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return a(l)},"provider");return u.languageModel=a,u.chat=a,u.messages=a,u.textEmbeddingModel=l=>{throw new m0({modelId:l,modelType:"textEmbeddingModel"})},u.imageModel=l=>{throw new m0({modelId:l,modelType:"imageModel"})},u.tools=WX,u}s(QX,"createAnthropic");var C0=QX();var XX="2.0.44",YX=fe(()=>ne(c.object({error:c.object({code:c.number().nullable(),message:c.string(),status:c.string()})}))),vl=ka({errorSchema:YX,errorToMessage:s(t=>t.error.message,"errorToMessage")}),eY=fe(()=>ne(c.object({outputDimensionality:c.number().optional(),taskType:c.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),tY=class{static{s(this,"GoogleGenerativeAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){let o=await At({provider:"google",providerOptions:n,schema:eY});if(t.length>this.maxEmbeddingsPerCall)throw new gf({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=Nt(await Kn(this.config.headers),e);if(t.length===1){let{responseHeaders:d,value:p,rawValue:f}=await Dt({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:t[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:vl,successfulResponseHandler:ir(nY),abortSignal:r,fetch:this.config.fetch});return{embeddings:[p.embedding.values],usage:void 0,response:{headers:d,body:f}}}let{responseHeaders:a,value:u,rawValue:l}=await Dt({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:t.map(d=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:d}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:vl,successfulResponseHandler:ir(rY),abortSignal:r,fetch:this.config.fetch});return{embeddings:u.embeddings.map(d=>d.values),usage:void 0,response:{headers:a,body:l}}}},rY=fe(()=>ne(c.object({embeddings:c.array(c.object({values:c.array(c.number())}))}))),nY=fe(()=>ne(c.object({embedding:c.object({values:c.array(c.number())})})));function Qn(t){if(t==null||oY(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:o,items:i,allOf:a,anyOf:u,oneOf:l,format:d,const:p,minLength:f,enum:h}=t,y={};if(r&&(y.description=r),n&&(y.required=n),d&&(y.format=d),p!==void 0&&(y.enum=[p]),e)if(Array.isArray(e)){let g=e.includes("null"),m=e.filter(_=>_!=="null");m.length===0?y.type="null":(y.anyOf=m.map(_=>({type:_})),g&&(y.nullable=!0))}else y.type=e;if(h!==void 0&&(y.enum=h),o!=null&&(y.properties=Object.entries(o).reduce((g,[m,_])=>(g[m]=Qn(_),g),{})),i&&(y.items=Array.isArray(i)?i.map(Qn):Qn(i)),a&&(y.allOf=a.map(Qn)),u)if(u.some(g=>typeof g=="object"&&g?.type==="null")){let g=u.filter(m=>!(typeof m=="object"&&m?.type==="null"));if(g.length===1){let m=Qn(g[0]);typeof m=="object"&&(y.nullable=!0,Object.assign(y,m))}else y.anyOf=g.map(Qn),y.nullable=!0}else y.anyOf=u.map(Qn);return l&&(y.oneOf=l.map(Qn)),f!==void 0&&(y.minLength=f),y}s(Qn,"convertJSONSchemaToOpenAPISchema");function oY(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)&&!t.additionalProperties}s(oY,"isEmptyObjectSchema");function iY(t,e){var r;let n=[],o=[],i=!0,a=(r=e?.isGemmaModel)!=null?r:!1;for(let{role:u,content:l}of t)switch(u){case"system":{if(!i)throw new yt({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:l});break}case"user":{i=!1;let d=[];for(let p of l)switch(p.type){case"text":{d.push({text:p.text});break}case"file":{let f=p.mediaType==="image/*"?"image/jpeg":p.mediaType;d.push(p.data instanceof URL?{fileData:{mimeType:f,fileUri:p.data.toString()}}:{inlineData:{mimeType:f,data:Qr(p.data)}});break}}o.push({role:"user",parts:d});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(d=>{var p,f,h;let y=((f=(p=d.providerOptions)==null?void 0:p.google)==null?void 0:f.thoughtSignature)!=null?String((h=d.providerOptions.google)==null?void 0:h.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:y};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:y};case"file":{if(d.mediaType!=="image/png")throw new yt({functionality:"Only PNG images are supported in assistant messages"});if(d.data instanceof URL)throw new yt({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:Qr(d.data)}}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:y}}}).filter(d=>d!==void 0)});break}case"tool":{i=!1;let d=[];for(let p of l){let f=p.output;if(f.type==="content")for(let h of f.value)switch(h.type){case"text":d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:h.text}}});break;case"media":d.push({inlineData:{mimeType:h.mediaType,data:h.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(h)});break}else d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:f.value}}})}o.push({role:"user",parts:d});break}}if(a&&n.length>0&&o.length>0&&o[0].role==="user"){let u=n.map(l=>l.text).join(`

`);o[0].parts.unshift({text:u+`

`})}return{systemInstruction:n.length>0&&!a?{parts:n}:void 0,contents:o}}s(iY,"convertToGoogleGenerativeAIMessages");function eM(t){return t.includes("/")?t:`models/${t}`}s(eM,"getModelPath");var sY=fe(()=>ne(c.object({responseModalities:c.array(c.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:c.object({thinkingBudget:c.number().optional(),includeThoughts:c.boolean().optional(),thinkingLevel:c.enum(["low","medium","high"]).optional()}).optional(),cachedContent:c.string().optional(),structuredOutputs:c.boolean().optional(),safetySettings:c.array(c.object({category:c.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:c.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:c.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:c.boolean().optional(),labels:c.record(c.string(),c.string()).optional(),mediaResolution:c.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:c.object({aspectRatio:c.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:c.enum(["1K","2K","4K"]).optional()}).optional()})));function aY({tools:t,toolChoice:e,modelId:r}){var n;t=t?.length?t:void 0;let o=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(y=>y===r),a=r.includes("gemini-2")||r.includes("gemini-3")||i,u=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),l=r.includes("gemini-2.5");if(t==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let d=t.some(y=>y.type==="function"),p=t.some(y=>y.type==="provider-defined");if(d&&p){let y=t.filter(g=>g.type==="function");o.push({type:"unsupported-tool",tool:t.find(g=>g.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${y.map(g=>g.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(p){let y=[];return t.filter(m=>m.type==="provider-defined").forEach(m=>{switch(m.id){case"google.google_search":a?y.push({googleSearch:{}}):u?y.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:m.args.mode,dynamicThreshold:m.args.dynamicThreshold}}}):y.push({googleSearchRetrieval:{}});break;case"google.url_context":a?y.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:m,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":a?y.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:m,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?y.push({fileSearch:{...m.args}}):o.push({type:"unsupported-tool",tool:m,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":a?y.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:m.args.ragCorpus},similarity_top_k:m.args.topK}}}):o.push({type:"unsupported-tool",tool:m,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:m});break}}),{tools:y.length>0?y:void 0,toolConfig:void 0,toolWarnings:o}}let f=[];for(let y of t)switch(y.type){case"function":f.push({name:y.name,description:(n=y.description)!=null?n:"",parameters:Qn(y.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:y});break}if(e==null)return{tools:[{functionDeclarations:f}],toolConfig:void 0,toolWarnings:o};let h=e.type;switch(h){case"auto":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[e.toolName]}},toolWarnings:o};default:{let y=h;throw new yt({functionality:`tool choice type: ${y}`})}}}s(aY,"prepareTools");function tM({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}s(tM,"mapGoogleGenerativeAIFinishReason");var cY=class{static{s(this,"GoogleGenerativeAILanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:mr}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:u,responseFormat:l,seed:d,tools:p,toolChoice:f,providerOptions:h}){var y;let g=[],m=await At({provider:"google",providerOptions:h,schema:sY});p?.some(O=>O.type==="provider-defined"&&O.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&g.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let _=this.modelId.toLowerCase().startsWith("gemma-"),{contents:w,systemInstruction:b}=iY(t,{isGemmaModel:_}),{tools:x,toolConfig:k,toolWarnings:R}=aY({tools:p,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:e,temperature:r,topK:o,topP:n,frequencyPenalty:i,presencePenalty:a,stopSequences:u,seed:d,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=m?.structuredOutputs)==null||y)?Qn(l.schema):void 0,...m?.audioTimestamp&&{audioTimestamp:m.audioTimestamp},responseModalities:m?.responseModalities,thinkingConfig:m?.thinkingConfig,...m?.imageConfig&&{imageConfig:m.imageConfig},...m?.mediaResolution&&{mediaResolution:m.mediaResolution}},contents:w,systemInstruction:_?void 0:b,safetySettings:m?.safetySettings,tools:x,toolConfig:k,cachedContent:m?.cachedContent,labels:m?.labels},warnings:[...g,...R]}}async doGenerate(t){var e,r,n,o,i,a,u,l,d,p,f,h,y;let{args:g,warnings:m}=await this.getArgs(t),_=JSON.stringify(g),w=Nt(await Kn(this.config.headers),t.headers),{responseHeaders:b,value:x,rawValue:k}=await Dt({url:`${this.config.baseURL}/${eM(this.modelId)}:generateContent`,headers:w,body:g,failedResponseHandler:vl,successfulResponseHandler:ir(lY),abortSignal:t.abortSignal,fetch:this.config.fetch}),R=x.candidates[0],O=[],C=(r=(e=R.content)==null?void 0:e.parts)!=null?r:[],$=x.usageMetadata,P;for(let D of C)if("executableCode"in D&&((n=D.executableCode)!=null&&n.code)){let K=this.config.generateId();P=K,O.push({type:"tool-call",toolCallId:K,toolName:"code_execution",input:JSON.stringify(D.executableCode),providerExecuted:!0})}else"codeExecutionResult"in D&&D.codeExecutionResult?(O.push({type:"tool-result",toolCallId:P,toolName:"code_execution",result:{outcome:D.codeExecutionResult.outcome,output:D.codeExecutionResult.output},providerExecuted:!0}),P=void 0):"text"in D&&D.text!=null&&D.text.length>0?O.push({type:D.thought===!0?"reasoning":"text",text:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0}):"functionCall"in D?O.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:D.functionCall.name,input:JSON.stringify(D.functionCall.args),providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0}):"inlineData"in D&&O.push({type:"file",data:D.inlineData.data,mediaType:D.inlineData.mimeType});let N=(o=rM({groundingMetadata:R.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(let D of N)O.push(D);return{content:O,finishReason:tM({finishReason:R.finishReason,hasToolCalls:O.some(D=>D.type==="tool-call")}),usage:{inputTokens:(i=$?.promptTokenCount)!=null?i:void 0,outputTokens:(a=$?.candidatesTokenCount)!=null?a:void 0,totalTokens:(u=$?.totalTokenCount)!=null?u:void 0,reasoningTokens:(l=$?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(d=$?.cachedContentTokenCount)!=null?d:void 0},warnings:m,providerMetadata:{google:{promptFeedback:(p=x.promptFeedback)!=null?p:null,groundingMetadata:(f=R.groundingMetadata)!=null?f:null,urlContextMetadata:(h=R.urlContextMetadata)!=null?h:null,safetyRatings:(y=R.safetyRatings)!=null?y:null,usageMetadata:$??null}},request:{body:_},response:{headers:b,body:k}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),o=Nt(await Kn(this.config.headers),t.headers),{responseHeaders:i,value:a}=await Dt({url:`${this.config.baseURL}/${eM(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:e,failedResponseHandler:vl,successfulResponseHandler:Wn(dY),abortSignal:t.abortSignal,fetch:this.config.fetch}),u="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d,p=this.config.generateId,f=!1,h=null,y=null,g=0,m=new Set,_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var x,k,R,O,C,$,P,N,D,K,V,q;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){b.enqueue({type:"error",error:w.error});return}let Q=w.value,ee=Q.usageMetadata;ee!=null&&(l.inputTokens=(x=ee.promptTokenCount)!=null?x:void 0,l.outputTokens=(k=ee.candidatesTokenCount)!=null?k:void 0,l.totalTokens=(R=ee.totalTokenCount)!=null?R:void 0,l.reasoningTokens=(O=ee.thoughtsTokenCount)!=null?O:void 0,l.cachedInputTokens=(C=ee.cachedContentTokenCount)!=null?C:void 0);let oe=($=Q.candidates)==null?void 0:$[0];if(oe==null)return;let _e=oe.content,Te=rM({groundingMetadata:oe.groundingMetadata,generateId:p});if(Te!=null)for(let We of Te)We.sourceType==="url"&&!m.has(We.url)&&(m.add(We.url),b.enqueue(We));if(_e!=null){let We=(P=_e.parts)!=null?P:[];for(let G of We)if("executableCode"in G&&((N=G.executableCode)!=null&&N.code)){let Oe=p();_=Oe,b.enqueue({type:"tool-call",toolCallId:Oe,toolName:"code_execution",input:JSON.stringify(G.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in G&&G.codeExecutionResult){let Oe=_;Oe&&(b.enqueue({type:"tool-result",toolCallId:Oe,toolName:"code_execution",result:{outcome:G.codeExecutionResult.outcome,output:G.codeExecutionResult.output},providerExecuted:!0}),_=void 0)}else"text"in G&&G.text!=null&&G.text.length>0?G.thought===!0?(h!==null&&(b.enqueue({type:"text-end",id:h}),h=null),y===null&&(y=String(g++),b.enqueue({type:"reasoning-start",id:y,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})),b.enqueue({type:"reasoning-delta",id:y,delta:G.text,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})):(y!==null&&(b.enqueue({type:"reasoning-end",id:y}),y=null),h===null&&(h=String(g++),b.enqueue({type:"text-start",id:h,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})),b.enqueue({type:"text-delta",id:h,delta:G.text,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})):"inlineData"in G&&b.enqueue({type:"file",mediaType:G.inlineData.mimeType,data:G.inlineData.data});let He=uY({parts:_e.parts,generateId:p});if(He!=null)for(let G of He)b.enqueue({type:"tool-input-start",id:G.toolCallId,toolName:G.toolName,providerMetadata:G.providerMetadata}),b.enqueue({type:"tool-input-delta",id:G.toolCallId,delta:G.args,providerMetadata:G.providerMetadata}),b.enqueue({type:"tool-input-end",id:G.toolCallId,providerMetadata:G.providerMetadata}),b.enqueue({type:"tool-call",toolCallId:G.toolCallId,toolName:G.toolName,input:G.args,providerMetadata:G.providerMetadata}),f=!0}oe.finishReason!=null&&(u=tM({finishReason:oe.finishReason,hasToolCalls:f}),d={google:{promptFeedback:(D=Q.promptFeedback)!=null?D:null,groundingMetadata:(K=oe.groundingMetadata)!=null?K:null,urlContextMetadata:(V=oe.urlContextMetadata)!=null?V:null,safetyRatings:(q=oe.safetyRatings)!=null?q:null}},ee!=null&&(d.google.usageMetadata=ee))},flush(w){h!==null&&w.enqueue({type:"text-end",id:h}),y!==null&&w.enqueue({type:"reasoning-end",id:y}),w.enqueue({type:"finish",finishReason:u,usage:l,providerMetadata:d})}})),response:{headers:i},request:{body:n}}}};function uY({parts:t,generateId:e}){let r=t?.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({type:"tool-call",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args),providerMetadata:n.thoughtSignature?{google:{thoughtSignature:n.thoughtSignature}}:void 0}))}s(uY,"getToolCallsFromParts");function rM({groundingMetadata:t,generateId:e}){var r,n,o,i;if(!t?.groundingChunks)return;let a=[];for(let u of t.groundingChunks)if(u.web!=null)a.push({type:"source",sourceType:"url",id:e(),url:u.web.uri,title:(r=u.web.title)!=null?r:void 0});else if(u.retrievedContext!=null){let l=u.retrievedContext.uri,d=u.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))a.push({type:"source",sourceType:"url",id:e(),url:l,title:(n=u.retrievedContext.title)!=null?n:void 0});else if(l){let p=(o=u.retrievedContext.title)!=null?o:"Unknown Document",f="application/octet-stream",h;l.endsWith(".pdf")?(f="application/pdf",h=l.split("/").pop()):l.endsWith(".txt")?(f="text/plain",h=l.split("/").pop()):l.endsWith(".docx")?(f="application/vnd.openxmlformats-officedocument.wordprocessingml.document",h=l.split("/").pop()):l.endsWith(".doc")?(f="application/msword",h=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(f="text/markdown"),h=l.split("/").pop()),a.push({type:"source",sourceType:"document",id:e(),mediaType:f,title:p,filename:h})}else if(d){let p=(i=u.retrievedContext.title)!=null?i:"Unknown Document";a.push({type:"source",sourceType:"document",id:e(),mediaType:"application/octet-stream",title:p,filename:d.split("/").pop()})}}return a.length>0?a:void 0}s(rM,"extractSources");var nM=s(()=>c.object({webSearchQueries:c.array(c.string()).nullish(),retrievalQueries:c.array(c.string()).nullish(),searchEntryPoint:c.object({renderedContent:c.string()}).nullish(),groundingChunks:c.array(c.object({web:c.object({uri:c.string(),title:c.string().nullish()}).nullish(),retrievedContext:c.object({uri:c.string().nullish(),title:c.string().nullish(),text:c.string().nullish(),fileSearchStore:c.string().nullish()}).nullish()})).nullish(),groundingSupports:c.array(c.object({segment:c.object({startIndex:c.number().nullish(),endIndex:c.number().nullish(),text:c.string().nullish()}),segment_text:c.string().nullish(),groundingChunkIndices:c.array(c.number()).nullish(),supportChunkIndices:c.array(c.number()).nullish(),confidenceScores:c.array(c.number()).nullish(),confidenceScore:c.array(c.number()).nullish()})).nullish(),retrievalMetadata:c.union([c.object({webDynamicRetrievalScore:c.number()}),c.object({})]).nullish()}),"getGroundingMetadataSchema"),oM=s(()=>c.object({parts:c.array(c.union([c.object({functionCall:c.object({name:c.string(),args:c.unknown()}),thoughtSignature:c.string().nullish()}),c.object({inlineData:c.object({mimeType:c.string(),data:c.string()})}),c.object({executableCode:c.object({language:c.string(),code:c.string()}).nullish(),codeExecutionResult:c.object({outcome:c.string(),output:c.string()}).nullish(),text:c.string().nullish(),thought:c.boolean().nullish(),thoughtSignature:c.string().nullish()})])).nullish()}),"getContentSchema"),Tf=s(()=>c.object({category:c.string().nullish(),probability:c.string().nullish(),probabilityScore:c.number().nullish(),severity:c.string().nullish(),severityScore:c.number().nullish(),blocked:c.boolean().nullish()}),"getSafetyRatingSchema"),iM=c.object({cachedContentTokenCount:c.number().nullish(),thoughtsTokenCount:c.number().nullish(),promptTokenCount:c.number().nullish(),candidatesTokenCount:c.number().nullish(),totalTokenCount:c.number().nullish(),trafficType:c.string().nullish()}),sM=s(()=>c.object({urlMetadata:c.array(c.object({retrievedUrl:c.string(),urlRetrievalStatus:c.string()}))}),"getUrlContextMetadataSchema"),lY=fe(()=>ne(c.object({candidates:c.array(c.object({content:oM().nullish().or(c.object({}).strict()),finishReason:c.string().nullish(),safetyRatings:c.array(Tf()).nullish(),groundingMetadata:nM().nullish(),urlContextMetadata:sM().nullish()})),usageMetadata:iM.nullish(),promptFeedback:c.object({blockReason:c.string().nullish(),safetyRatings:c.array(Tf()).nullish()}).nullish()}))),dY=fe(()=>ne(c.object({candidates:c.array(c.object({content:oM().nullish(),finishReason:c.string().nullish(),safetyRatings:c.array(Tf()).nullish(),groundingMetadata:nM().nullish(),urlContextMetadata:sM().nullish()})).nullish(),usageMetadata:iM.nullish(),promptFeedback:c.object({blockReason:c.string().nullish(),safetyRatings:c.array(Tf()).nullish()}).nullish()}))),pY=Qt({id:"google.code_execution",name:"code_execution",inputSchema:c.object({language:c.string().describe("The programming language of the code."),code:c.string().describe("The code to be executed.")}),outputSchema:c.object({outcome:c.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:c.string().describe("The output from the code execution.")})}),mY=c.object({fileSearchStoreNames:c.array(c.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:c.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:c.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),fY=fe(()=>ne(mY)),hY=jt({id:"google.file_search",name:"file_search",inputSchema:fY}),gY=jt({id:"google.google_search",name:"google_search",inputSchema:fe(()=>ne(c.object({mode:c.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:c.number().default(1)})))}),yY=jt({id:"google.url_context",name:"url_context",inputSchema:fe(()=>ne(c.object({})))}),vY=jt({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:c.object({ragCorpus:c.string(),topK:c.number().optional()})}),_Y={googleSearch:gY,urlContext:yY,fileSearch:hY,codeExecution:pY,vertexRagStore:vY},bY=class{static{s(this,"GoogleGenerativeAIImageModel")}constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=this.settings.maxImagesPerCall)!=null?t:4}get provider(){return this.config.provider}async doGenerate(t){var e,r,n;let{prompt:o,n:i=1,size:a="1024x1024",aspectRatio:u="1:1",seed:l,providerOptions:d,headers:p,abortSignal:f}=t,h=[];a!=null&&h.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&h.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let y=await At({provider:"google",providerOptions:d,schema:xY}),g=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,m={sampleCount:i};u!=null&&(m.aspectRatio=u),y&&Object.assign(m,y);let _={instances:[{prompt:o}],parameters:m},{responseHeaders:w,value:b}=await Dt({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Nt(await Kn(this.config.headers),p),body:_,failedResponseHandler:vl,successfulResponseHandler:ir(wY),abortSignal:f,fetch:this.config.fetch});return{images:b.predictions.map(x=>x.bytesBase64Encoded),warnings:h??[],providerMetadata:{google:{images:b.predictions.map(x=>({}))}},response:{timestamp:g,modelId:this.modelId,headers:w}}}},wY=fe(()=>ne(c.object({predictions:c.array(c.object({bytesBase64Encoded:c.string()})).default([])}))),xY=fe(()=>ne(c.object({personGeneration:c.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:c.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function SY(t={}){var e,r;let n=(e=Pa(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",o=(r=t.name)!=null?r:"google.generative-ai",i=s(()=>Ki({"x-goog-api-key":Ia({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers},`ai-sdk/google/${XX}`),"getHeaders"),a=s(p=>{var f;return new cY(p,{provider:o,baseURL:n,headers:i,generateId:(f=t.generateId)!=null?f:mr,supportedUrls:s(()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),"supportedUrls"),fetch:t.fetch})},"createChatModel"),u=s(p=>new tY(p,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createEmbeddingModel"),l=s((p,f={})=>new bY(p,f,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createImageModel"),d=s(function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(p)},"provider");return d.languageModel=a,d.chat=a,d.generativeAI=a,d.embedding=u,d.textEmbedding=u,d.textEmbeddingModel=u,d.image=l,d.imageModel=l,d.tools=_Y,d}s(SY,"createGoogleGenerativeAI");var O0=SY();var R0=c.object({error:c.object({message:c.string(),type:c.string().nullish(),param:c.any().nullish(),code:c.union([c.string(),c.number()]).nullish()})}),Xn=ka({errorSchema:R0,errorToMessage:s(t=>t.error.message,"errorToMessage")});function TY({prompt:t,systemMessageMode:e="system"}){let r=[],n=[];for(let{role:o,content:i}of t)switch(o){case"system":{switch(e){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let a=e;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map((a,u)=>{var l,d,p;switch(a.type){case"text":return{type:"text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let f=a.mediaType==="image/*"?"image/jpeg":a.mediaType;return{type:"image_url",image_url:{url:a.data instanceof URL?a.data.toString():`data:${f};base64,${Qr(a.data)}`,detail:(d=(l=a.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(a.mediaType.startsWith("audio/")){if(a.data instanceof URL)throw new yt({functionality:"audio file parts with URLs"});switch(a.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:Qr(a.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:Qr(a.data),format:"mp3"}};default:throw new yt({functionality:`audio content parts with media type ${a.mediaType}`})}}else if(a.mediaType==="application/pdf"){if(a.data instanceof URL)throw new yt({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof a.data=="string"&&a.data.startsWith("file-")?{file_id:a.data}:{filename:(p=a.filename)!=null?p:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${Qr(a.data)}`}}}else throw new yt({functionality:`file part media type ${a.mediaType}`})}})});break}case"assistant":{let a="",u=[];for(let l of i)switch(l.type){case"text":{a+=l.text;break}case"tool-call":{u.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}r.push({role:"assistant",content:a,tool_calls:u.length>0?u:void 0});break}case"tool":{for(let a of i){let u=a.output,l;switch(u.type){case"text":case"error-text":l=u.value;break;case"content":case"json":case"error-json":l=JSON.stringify(u.value);break}r.push({role:"tool",tool_call_id:a.toolCallId,content:l})}break}default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return{messages:r,warnings:n}}s(TY,"convertToOpenAIChatMessages");function $0({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r?new Date(r*1e3):void 0}}s($0,"getResponseMetadata");function aM(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(aM,"mapOpenAIFinishReason");var EY=Pt(()=>ne(c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({message:c.object({role:c.literal("assistant").nullish(),content:c.string().nullish(),tool_calls:c.array(c.object({id:c.string().nullish(),type:c.literal("function"),function:c.object({name:c.string(),arguments:c.string()})})).nullish(),annotations:c.array(c.object({type:c.literal("url_citation"),start_index:c.number(),end_index:c.number(),url:c.string(),title:c.string()})).nullish()}),index:c.number(),logprobs:c.object({content:c.array(c.object({token:c.string(),logprob:c.number(),top_logprobs:c.array(c.object({token:c.string(),logprob:c.number()}))})).nullish()}).nullish(),finish_reason:c.string().nullish()})),usage:c.object({prompt_tokens:c.number().nullish(),completion_tokens:c.number().nullish(),total_tokens:c.number().nullish(),prompt_tokens_details:c.object({cached_tokens:c.number().nullish()}).nullish(),completion_tokens_details:c.object({reasoning_tokens:c.number().nullish(),accepted_prediction_tokens:c.number().nullish(),rejected_prediction_tokens:c.number().nullish()}).nullish()}).nullish()}))),IY=Pt(()=>ne(c.union([c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({delta:c.object({role:c.enum(["assistant"]).nullish(),content:c.string().nullish(),tool_calls:c.array(c.object({index:c.number(),id:c.string().nullish(),type:c.literal("function").nullish(),function:c.object({name:c.string().nullish(),arguments:c.string().nullish()})})).nullish(),annotations:c.array(c.object({type:c.literal("url_citation"),start_index:c.number(),end_index:c.number(),url:c.string(),title:c.string()})).nullish()}).nullish(),logprobs:c.object({content:c.array(c.object({token:c.string(),logprob:c.number(),top_logprobs:c.array(c.object({token:c.string(),logprob:c.number()}))})).nullish()}).nullish(),finish_reason:c.string().nullish(),index:c.number()})),usage:c.object({prompt_tokens:c.number().nullish(),completion_tokens:c.number().nullish(),total_tokens:c.number().nullish(),prompt_tokens_details:c.object({cached_tokens:c.number().nullish()}).nullish(),completion_tokens_details:c.object({reasoning_tokens:c.number().nullish(),accepted_prediction_tokens:c.number().nullish(),rejected_prediction_tokens:c.number().nullish()}).nullish()}).nullish()}),R0]))),kY=Pt(()=>ne(c.object({logitBias:c.record(c.coerce.number(),c.number()).optional(),logprobs:c.union([c.boolean(),c.number()]).optional(),parallelToolCalls:c.boolean().optional(),user:c.string().optional(),reasoningEffort:c.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:c.number().optional(),store:c.boolean().optional(),metadata:c.record(c.string().max(64),c.string().max(512)).optional(),prediction:c.record(c.string(),c.any()).optional(),structuredOutputs:c.boolean().optional(),serviceTier:c.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:c.boolean().optional(),textVerbosity:c.enum(["low","medium","high"]).optional(),promptCacheKey:c.string().optional(),promptCacheRetention:c.enum(["in_memory","24h"]).optional(),safetyIdentifier:c.string().optional()})));function PY({tools:t,toolChoice:e,structuredOutputs:r,strictJsonSchema:n}){t=t?.length?t:void 0;let o=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let i=[];for(let u of t)switch(u.type){case"function":i.push({type:"function",function:{name:u.name,description:u.description,parameters:u.inputSchema,strict:r?n:void 0}});break;default:o.push({type:"unsupported-tool",tool:u});break}if(e==null)return{tools:i,toolChoice:void 0,toolWarnings:o};let a=e.type;switch(a){case"auto":case"none":case"required":return{tools:i,toolChoice:a,toolWarnings:o};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:e.toolName}},toolWarnings:o};default:{let u=a;throw new yt({functionality:`tool choice type: ${u}`})}}}s(PY,"prepareChatTools");var AY=class{static{s(this,"OpenAIChatLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:u,responseFormat:l,seed:d,tools:p,toolChoice:f,providerOptions:h}){var y,g,m,_;let w=[],b=(y=await At({provider:"openai",providerOptions:h,schema:kY}))!=null?y:{},x=(g=b.structuredOutputs)!=null?g:!0;o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),l?.type==="json"&&l.schema!=null&&!x&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:k,warnings:R}=TY({prompt:t,systemMessageMode:$Y(this.modelId)});w.push(...R);let O=(m=b.strictJsonSchema)!=null?m:!1,C={model:this.modelId,logit_bias:b.logitBias,logprobs:b.logprobs===!0||typeof b.logprobs=="number"?!0:void 0,top_logprobs:typeof b.logprobs=="number"?b.logprobs:typeof b.logprobs=="boolean"&&b.logprobs?0:void 0,user:b.user,parallel_tool_calls:b.parallelToolCalls,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,response_format:l?.type==="json"?x&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,strict:O,name:(_=l.name)!=null?_:"response",description:l.description}}:{type:"json_object"}:void 0,stop:u,seed:d,verbosity:b.textVerbosity,max_completion_tokens:b.maxCompletionTokens,store:b.store,metadata:b.metadata,prediction:b.prediction,reasoning_effort:b.reasoningEffort,service_tier:b.serviceTier,prompt_cache_key:b.promptCacheKey,prompt_cache_retention:b.promptCacheRetention,safety_identifier:b.safetyIdentifier,messages:k};gM(this.modelId)?(C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),C.top_p!=null&&(C.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),C.frequency_penalty!=null&&(C.frequency_penalty=void 0,w.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),C.presence_penalty!=null&&(C.presence_penalty=void 0,w.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),C.logit_bias!=null&&(C.logit_bias=void 0,w.push({type:"other",message:"logitBias is not supported for reasoning models"})),C.logprobs!=null&&(C.logprobs=void 0,w.push({type:"other",message:"logprobs is not supported for reasoning models"})),C.top_logprobs!=null&&(C.top_logprobs=void 0,w.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),C.max_tokens!=null&&(C.max_completion_tokens==null&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),b.serviceTier==="flex"&&!CY(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),C.service_tier=void 0),b.serviceTier==="priority"&&!OY(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),C.service_tier=void 0);let{tools:$,toolChoice:P,toolWarnings:N}=PY({tools:p,toolChoice:f,structuredOutputs:x,strictJsonSchema:O});return{args:{...C,tools:$,tool_choice:P},warnings:[...w,...N]}}async doGenerate(t){var e,r,n,o,i,a,u,l,d,p,f,h,y,g;let{args:m,warnings:_}=await this.getArgs(t),{responseHeaders:w,value:b,rawValue:x}=await Dt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:m,failedResponseHandler:Xn,successfulResponseHandler:ir(EY),abortSignal:t.abortSignal,fetch:this.config.fetch}),k=b.choices[0],R=[],O=k.message.content;O!=null&&O.length>0&&R.push({type:"text",text:O});for(let N of(e=k.message.tool_calls)!=null?e:[])R.push({type:"tool-call",toolCallId:(r=N.id)!=null?r:mr(),toolName:N.function.name,input:N.function.arguments});for(let N of(n=k.message.annotations)!=null?n:[])R.push({type:"source",sourceType:"url",id:mr(),url:N.url,title:N.title});let C=(o=b.usage)==null?void 0:o.completion_tokens_details,$=(i=b.usage)==null?void 0:i.prompt_tokens_details,P={openai:{}};return C?.accepted_prediction_tokens!=null&&(P.openai.acceptedPredictionTokens=C?.accepted_prediction_tokens),C?.rejected_prediction_tokens!=null&&(P.openai.rejectedPredictionTokens=C?.rejected_prediction_tokens),((a=k.logprobs)==null?void 0:a.content)!=null&&(P.openai.logprobs=k.logprobs.content),{content:R,finishReason:aM(k.finish_reason),usage:{inputTokens:(l=(u=b.usage)==null?void 0:u.prompt_tokens)!=null?l:void 0,outputTokens:(p=(d=b.usage)==null?void 0:d.completion_tokens)!=null?p:void 0,totalTokens:(h=(f=b.usage)==null?void 0:f.total_tokens)!=null?h:void 0,reasoningTokens:(y=C?.reasoning_tokens)!=null?y:void 0,cachedInputTokens:(g=$?.cached_tokens)!=null?g:void 0},request:{body:m},response:{...$0(b),headers:w,body:x},warnings:_,providerMetadata:P}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await Dt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:n,failedResponseHandler:Xn,successfulResponseHandler:Wn(IY),abortSignal:t.abortSignal,fetch:this.config.fetch}),a=[],u="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!1,p=!1,f={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(h){h.enqueue({type:"stream-start",warnings:r})},transform(h,y){var g,m,_,w,b,x,k,R,O,C,$,P,N,D,K,V,q,Q,ee,oe,_e,Te,We,He;if(t.includeRawChunks&&y.enqueue({type:"raw",rawValue:h.rawValue}),!h.success){u="error",y.enqueue({type:"error",error:h.error});return}let G=h.value;if("error"in G){u="error",y.enqueue({type:"error",error:G.error});return}if(!d){let z=$0(G);Object.values(z).some(Boolean)&&(d=!0,y.enqueue({type:"response-metadata",...$0(G)}))}G.usage!=null&&(l.inputTokens=(g=G.usage.prompt_tokens)!=null?g:void 0,l.outputTokens=(m=G.usage.completion_tokens)!=null?m:void 0,l.totalTokens=(_=G.usage.total_tokens)!=null?_:void 0,l.reasoningTokens=(b=(w=G.usage.completion_tokens_details)==null?void 0:w.reasoning_tokens)!=null?b:void 0,l.cachedInputTokens=(k=(x=G.usage.prompt_tokens_details)==null?void 0:x.cached_tokens)!=null?k:void 0,((R=G.usage.completion_tokens_details)==null?void 0:R.accepted_prediction_tokens)!=null&&(f.openai.acceptedPredictionTokens=(O=G.usage.completion_tokens_details)==null?void 0:O.accepted_prediction_tokens),((C=G.usage.completion_tokens_details)==null?void 0:C.rejected_prediction_tokens)!=null&&(f.openai.rejectedPredictionTokens=($=G.usage.completion_tokens_details)==null?void 0:$.rejected_prediction_tokens));let Oe=G.choices[0];if(Oe?.finish_reason!=null&&(u=aM(Oe.finish_reason)),((P=Oe?.logprobs)==null?void 0:P.content)!=null&&(f.openai.logprobs=Oe.logprobs.content),Oe?.delta==null)return;let ge=Oe.delta;if(ge.content!=null&&(p||(y.enqueue({type:"text-start",id:"0"}),p=!0),y.enqueue({type:"text-delta",id:"0",delta:ge.content})),ge.tool_calls!=null)for(let z of ge.tool_calls){let Ze=z.index;if(a[Ze]==null){if(z.type!=="function")throw new hf({data:z,message:"Expected 'function' type."});if(z.id==null)throw new hf({data:z,message:"Expected 'id' to be a string."});if(((N=z.function)==null?void 0:N.name)==null)throw new hf({data:z,message:"Expected 'function.name' to be a string."});y.enqueue({type:"tool-input-start",id:z.id,toolName:z.function.name}),a[Ze]={id:z.id,type:"function",function:{name:z.function.name,arguments:(D=z.function.arguments)!=null?D:""},hasFinished:!1};let wt=a[Ze];((K=wt.function)==null?void 0:K.name)!=null&&((V=wt.function)==null?void 0:V.arguments)!=null&&(wt.function.arguments.length>0&&y.enqueue({type:"tool-input-delta",id:wt.id,delta:wt.function.arguments}),P0(wt.function.arguments)&&(y.enqueue({type:"tool-input-end",id:wt.id}),y.enqueue({type:"tool-call",toolCallId:(q=wt.id)!=null?q:mr(),toolName:wt.function.name,input:wt.function.arguments}),wt.hasFinished=!0));continue}let vt=a[Ze];vt.hasFinished||(((Q=z.function)==null?void 0:Q.arguments)!=null&&(vt.function.arguments+=(oe=(ee=z.function)==null?void 0:ee.arguments)!=null?oe:""),y.enqueue({type:"tool-input-delta",id:vt.id,delta:(_e=z.function.arguments)!=null?_e:""}),((Te=vt.function)==null?void 0:Te.name)!=null&&((We=vt.function)==null?void 0:We.arguments)!=null&&P0(vt.function.arguments)&&(y.enqueue({type:"tool-input-end",id:vt.id}),y.enqueue({type:"tool-call",toolCallId:(He=vt.id)!=null?He:mr(),toolName:vt.function.name,input:vt.function.arguments}),vt.hasFinished=!0))}if(ge.annotations!=null)for(let z of ge.annotations)y.enqueue({type:"source",sourceType:"url",id:mr(),url:z.url,title:z.title})},flush(h){p&&h.enqueue({type:"text-end",id:"0"}),h.enqueue({type:"finish",finishReason:u,usage:l,...f!=null?{providerMetadata:f}:{}})}})),request:{body:n},response:{headers:o}}}};function gM(t){return(t.startsWith("o")||t.startsWith("gpt-5"))&&!t.startsWith("gpt-5-chat")}s(gM,"isReasoningModel");function CY(t){return t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")}s(CY,"supportsFlexProcessing");function OY(t){return t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini")}s(OY,"supportsPriorityProcessing");function $Y(t){var e,r;return gM(t)?(r=(e=RY[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}s($Y,"getSystemMessageMode");var RY={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function NY({prompt:t,user:e="user",assistant:r="assistant"}){let n="";t[0].role==="system"&&(n+=`${t[0].content}

`,t=t.slice(1));for(let{role:o,content:i}of t)switch(o){case"system":throw new rj({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let a=i.map(u=>{switch(u.type){case"text":return u.text}}).filter(Boolean).join("");n+=`${e}:
${a}

`;break}case"assistant":{let a=i.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new yt({functionality:"tool-call messages"})}}).join("");n+=`${r}:
${a}

`;break}case"tool":throw new yt({functionality:"tool messages"});default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return n+=`${r}:
`,{prompt:n,stopSequences:[`
${e}:`]}}s(NY,"convertToOpenAICompletionPrompt");function cM({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}s(cM,"getResponseMetadata2");function uM(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(uM,"mapOpenAIFinishReason2");var DY=Pt(()=>ne(c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({text:c.string(),finish_reason:c.string(),logprobs:c.object({tokens:c.array(c.string()),token_logprobs:c.array(c.number()),top_logprobs:c.array(c.record(c.string(),c.number())).nullish()}).nullish()})),usage:c.object({prompt_tokens:c.number(),completion_tokens:c.number(),total_tokens:c.number()}).nullish()}))),jY=Pt(()=>ne(c.union([c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({text:c.string(),finish_reason:c.string().nullish(),index:c.number(),logprobs:c.object({tokens:c.array(c.string()),token_logprobs:c.array(c.number()),top_logprobs:c.array(c.record(c.string(),c.number())).nullish()}).nullish()})),usage:c.object({prompt_tokens:c.number(),completion_tokens:c.number(),total_tokens:c.number()}).nullish()}),R0]))),lM=Pt(()=>ne(c.object({echo:c.boolean().optional(),logitBias:c.record(c.string(),c.number()).optional(),suffix:c.string().optional(),user:c.string().optional(),logprobs:c.union([c.boolean(),c.number()]).optional()}))),MY=class{static{s(this,"OpenAICompletionLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={},this.modelId=t,this.config=e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:u,responseFormat:l,tools:d,toolChoice:p,seed:f,providerOptions:h}){let y=[],g={...await At({provider:"openai",providerOptions:h,schema:lM}),...await At({provider:this.providerOptionsName,providerOptions:h,schema:lM})};o!=null&&y.push({type:"unsupported-setting",setting:"topK"}),d?.length&&y.push({type:"unsupported-setting",setting:"tools"}),p!=null&&y.push({type:"unsupported-setting",setting:"toolChoice"}),l!=null&&l.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:m,stopSequences:_}=NY({prompt:t}),w=[..._??[],...u??[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,logprobs:g?.logprobs===!0?0:g?.logprobs===!1?void 0:g?.logprobs,suffix:g.suffix,user:g.user,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,seed:f,prompt:m,stop:w.length>0?w:void 0},warnings:y}}async doGenerate(t){var e,r,n;let{args:o,warnings:i}=await this.getArgs(t),{responseHeaders:a,value:u,rawValue:l}=await Dt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:o,failedResponseHandler:Xn,successfulResponseHandler:ir(DY),abortSignal:t.abortSignal,fetch:this.config.fetch}),d=u.choices[0],p={openai:{}};return d.logprobs!=null&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:(e=u.usage)==null?void 0:e.prompt_tokens,outputTokens:(r=u.usage)==null?void 0:r.completion_tokens,totalTokens:(n=u.usage)==null?void 0:n.total_tokens},finishReason:uM(d.finish_reason),request:{body:o},response:{...cM(u),headers:a,body:l},providerMetadata:p,warnings:i}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await Dt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:n,failedResponseHandler:Xn,successfulResponseHandler:Wn(jY),abortSignal:t.abortSignal,fetch:this.config.fetch}),a="unknown",u={openai:{}},l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,f){if(t.includeRawChunks&&f.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){a="error",f.enqueue({type:"error",error:p.error});return}let h=p.value;if("error"in h){a="error",f.enqueue({type:"error",error:h.error});return}d&&(d=!1,f.enqueue({type:"response-metadata",...cM(h)}),f.enqueue({type:"text-start",id:"0"})),h.usage!=null&&(l.inputTokens=h.usage.prompt_tokens,l.outputTokens=h.usage.completion_tokens,l.totalTokens=h.usage.total_tokens);let y=h.choices[0];y?.finish_reason!=null&&(a=uM(y.finish_reason)),y?.logprobs!=null&&(u.openai.logprobs=y.logprobs),y?.text!=null&&y.text.length>0&&f.enqueue({type:"text-delta",id:"0",delta:y.text})},flush(p){d||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:a,providerMetadata:u,usage:l})}})),request:{body:n},response:{headers:o}}}},UY=Pt(()=>ne(c.object({dimensions:c.number().optional(),user:c.string().optional()}))),zY=Pt(()=>ne(c.object({data:c.array(c.object({embedding:c.array(c.number())})),usage:c.object({prompt_tokens:c.number()}).nullish()}))),LY=class{static{s(this,"OpenAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){var o;if(t.length>this.maxEmbeddingsPerCall)throw new gf({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=(o=await At({provider:"openai",providerOptions:n,schema:UY}))!=null?o:{},{responseHeaders:a,value:u,rawValue:l}=await Dt({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Nt(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:Xn,successfulResponseHandler:ir(zY),abortSignal:r,fetch:this.config.fetch});return{embeddings:u.data.map(d=>d.embedding),usage:u.usage?{tokens:u.usage.prompt_tokens}:void 0,response:{headers:a,body:l}}}},qY=Pt(()=>ne(c.object({data:c.array(c.object({b64_json:c.string(),revised_prompt:c.string().nullish()}))}))),FY={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},BY=new Set(["gpt-image-1","gpt-image-1-mini"]),VY=class{static{s(this,"OpenAIImageModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=FY[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:o,providerOptions:i,headers:a,abortSignal:u}){var l,d,p,f;let h=[];n!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),o!=null&&h.push({type:"unsupported-setting",setting:"seed"});let y=(p=(d=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:d.call(l))!=null?p:new Date,{value:g,responseHeaders:m}=await Dt({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Nt(this.config.headers(),a),body:{model:this.modelId,prompt:t,n:e,size:r,...(f=i.openai)!=null?f:{},...BY.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Xn,successfulResponseHandler:ir(qY),abortSignal:u,fetch:this.config.fetch});return{images:g.data.map(_=>_.b64_json),warnings:h,response:{timestamp:y,modelId:this.modelId,headers:m},providerMetadata:{openai:{images:g.data.map(_=>_.revised_prompt?{revisedPrompt:_.revised_prompt}:null)}}}}},HY=fe(()=>ne(c.object({code:c.string().nullish(),containerId:c.string()}))),GY=fe(()=>ne(c.object({outputs:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("logs"),logs:c.string()}),c.object({type:c.literal("image"),url:c.string()})])).nullish()}))),ZY=fe(()=>ne(c.object({container:c.union([c.string(),c.object({fileIds:c.array(c.string()).optional()})]).optional()}))),JY=Qt({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:HY,outputSchema:GY}),KY=s((t={})=>JY(t),"codeInterpreter"),yM=c.object({key:c.string(),type:c.enum(["eq","ne","gt","gte","lt","lte"]),value:c.union([c.string(),c.number(),c.boolean()])}),vM=c.object({type:c.enum(["and","or"]),filters:c.array(c.union([yM,c.lazy(()=>vM)]))}),WY=fe(()=>ne(c.object({vectorStoreIds:c.array(c.string()),maxNumResults:c.number().optional(),ranking:c.object({ranker:c.string().optional(),scoreThreshold:c.number().optional()}).optional(),filters:c.union([yM,vM]).optional()}))),QY=fe(()=>ne(c.object({queries:c.array(c.string()),results:c.array(c.object({attributes:c.record(c.string(),c.unknown()),fileId:c.string(),filename:c.string(),score:c.number(),text:c.string()})).nullable()}))),XY=Qt({id:"openai.file_search",name:"file_search",inputSchema:c.object({}),outputSchema:QY}),YY=fe(()=>ne(c.object({background:c.enum(["auto","opaque","transparent"]).optional(),inputFidelity:c.enum(["low","high"]).optional(),inputImageMask:c.object({fileId:c.string().optional(),imageUrl:c.string().optional()}).optional(),model:c.string().optional(),moderation:c.enum(["auto"]).optional(),outputCompression:c.number().int().min(0).max(100).optional(),outputFormat:c.enum(["png","jpeg","webp"]).optional(),partialImages:c.number().int().min(0).max(3).optional(),quality:c.enum(["auto","low","medium","high"]).optional(),size:c.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),eee=fe(()=>ne(c.object({}))),tee=fe(()=>ne(c.object({result:c.string()}))),ree=Qt({id:"openai.image_generation",name:"image_generation",inputSchema:eee,outputSchema:tee}),nee=s((t={})=>ree(t),"imageGeneration"),_M=fe(()=>ne(c.object({action:c.object({type:c.literal("exec"),command:c.array(c.string()),timeoutMs:c.number().optional(),user:c.string().optional(),workingDirectory:c.string().optional(),env:c.record(c.string(),c.string()).optional()})}))),bM=fe(()=>ne(c.object({output:c.string()}))),oee=Qt({id:"openai.local_shell",name:"local_shell",inputSchema:_M,outputSchema:bM}),iee=fe(()=>ne(c.object({externalWebAccess:c.boolean().optional(),filters:c.object({allowedDomains:c.array(c.string()).optional()}).optional(),searchContextSize:c.enum(["low","medium","high"]).optional(),userLocation:c.object({type:c.literal("approximate"),country:c.string().optional(),city:c.string().optional(),region:c.string().optional(),timezone:c.string().optional()}).optional()}))),see=fe(()=>ne(c.object({}))),aee=fe(()=>ne(c.object({action:c.discriminatedUnion("type",[c.object({type:c.literal("search"),query:c.string().optional()}),c.object({type:c.literal("openPage"),url:c.string()}),c.object({type:c.literal("find"),url:c.string(),pattern:c.string()})]),sources:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("url"),url:c.string()}),c.object({type:c.literal("api"),name:c.string()})])).optional()}))),cee=Qt({id:"openai.web_search",name:"web_search",inputSchema:see,outputSchema:aee}),uee=s((t={})=>cee(t),"webSearch"),lee=fe(()=>ne(c.object({searchContextSize:c.enum(["low","medium","high"]).optional(),userLocation:c.object({type:c.literal("approximate"),country:c.string().optional(),city:c.string().optional(),region:c.string().optional(),timezone:c.string().optional()}).optional()}))),dee=fe(()=>ne(c.object({}))),pee=fe(()=>ne(c.object({action:c.discriminatedUnion("type",[c.object({type:c.literal("search"),query:c.string().optional()}),c.object({type:c.literal("openPage"),url:c.string()}),c.object({type:c.literal("find"),url:c.string(),pattern:c.string()})])}))),mee=Qt({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:dee,outputSchema:pee}),fee={codeInterpreter:KY,fileSearch:XY,imageGeneration:nee,localShell:oee,webSearchPreview:mee,webSearch:uee};function dM(t,e){return e?e.some(r=>t.startsWith(r)):!1}s(dM,"isFileId");async function hee({prompt:t,systemMessageMode:e,fileIdPrefixes:r,store:n,hasLocalShellTool:o=!1}){var i,a,u,l;let d=[],p=[];for(let{role:f,content:h}of t)switch(f){case"system":{switch(e){case"system":{d.push({role:"system",content:h});break}case"developer":{d.push({role:"developer",content:h});break}case"remove":{p.push({type:"other",message:"system messages are removed for this model"});break}default:{let y=e;throw new Error(`Unsupported system message mode: ${y}`)}}break}case"user":{d.push({role:"user",content:h.map((y,g)=>{var m,_,w;switch(y.type){case"text":return{type:"input_text",text:y.text};case"file":if(y.mediaType.startsWith("image/")){let b=y.mediaType==="image/*"?"image/jpeg":y.mediaType;return{type:"input_image",...y.data instanceof URL?{image_url:y.data.toString()}:typeof y.data=="string"&&dM(y.data,r)?{file_id:y.data}:{image_url:`data:${b};base64,${Qr(y.data)}`},detail:(_=(m=y.providerOptions)==null?void 0:m.openai)==null?void 0:_.imageDetail}}else{if(y.mediaType==="application/pdf")return y.data instanceof URL?{type:"input_file",file_url:y.data.toString()}:{type:"input_file",...typeof y.data=="string"&&dM(y.data,r)?{file_id:y.data}:{filename:(w=y.filename)!=null?w:`part-${g}.pdf`,file_data:`data:application/pdf;base64,${Qr(y.data)}`}};throw new yt({functionality:`file part media type ${y.mediaType}`})}}})});break}case"assistant":{let y={},g={};for(let m of h)switch(m.type){case"text":{let _=(a=(i=m.providerOptions)==null?void 0:i.openai)==null?void 0:a.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}d.push({role:"assistant",content:[{type:"output_text",text:m.text}],id:_});break}case"tool-call":{if(g[m.toolCallId]=m,m.providerExecuted)break;let _=(l=(u=m.providerOptions)==null?void 0:u.openai)==null?void 0:l.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}if(o&&m.toolName==="local_shell"){let w=await fr({value:m.input,schema:_M});d.push({type:"local_shell_call",call_id:m.toolCallId,id:_,action:{type:"exec",command:w.action.command,timeout_ms:w.action.timeoutMs,user:w.action.user,working_directory:w.action.workingDirectory,env:w.action.env}});break}d.push({type:"function_call",call_id:m.toolCallId,name:m.toolName,arguments:JSON.stringify(m.input),id:_});break}case"tool-result":{n?d.push({type:"item_reference",id:m.toolCallId}):p.push({type:"other",message:`Results for OpenAI tool ${m.toolName} are not sent to the API when store is false`});break}case"reasoning":{let _=await At({provider:"openai",providerOptions:m.providerOptions,schema:gee}),w=_?.itemId;if(w!=null){let b=y[w];if(n)b===void 0&&(d.push({type:"item_reference",id:w}),y[w]={type:"reasoning",id:w,summary:[]});else{let x=[];m.text.length>0?x.push({type:"summary_text",text:m.text}):b!==void 0&&p.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(m)}.`}),b===void 0?(y[w]={type:"reasoning",id:w,encrypted_content:_?.reasoningEncryptedContent,summary:x},d.push(y[w])):(b.summary.push(...x),_?.reasoningEncryptedContent!=null&&(b.encrypted_content=_.reasoningEncryptedContent))}}else p.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(m)}.`});break}}break}case"tool":{for(let y of h){let g=y.output;if(o&&y.toolName==="local_shell"&&g.type==="json"){let _=await fr({value:g.value,schema:bM});d.push({type:"local_shell_call_output",call_id:y.toolCallId,output:_.output});break}let m;switch(g.type){case"text":case"error-text":m=g.value;break;case"json":case"error-json":m=JSON.stringify(g.value);break;case"content":m=g.value.map(_=>{switch(_.type){case"text":return{type:"input_text",text:_.text};case"media":return _.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${_.mediaType};base64,${_.data}`}:{type:"input_file",filename:"data",file_data:`data:${_.mediaType};base64,${_.data}`}}});break}d.push({type:"function_call_output",call_id:y.toolCallId,output:m})}break}default:{let y=f;throw new Error(`Unsupported role: ${y}`)}}return{input:d,warnings:p}}s(hee,"convertToOpenAIResponsesInput");var gee=c.object({itemId:c.string().nullish(),reasoningEncryptedContent:c.string().nullish()});function pM({finishReason:t,hasFunctionCall:e}){switch(t){case void 0:case null:return e?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return e?"tool-calls":"unknown"}}s(pM,"mapOpenAIResponseFinishReason");var yee=Pt(()=>ne(c.union([c.object({type:c.literal("response.output_text.delta"),item_id:c.string(),delta:c.string(),logprobs:c.array(c.object({token:c.string(),logprob:c.number(),top_logprobs:c.array(c.object({token:c.string(),logprob:c.number()}))})).nullish()}),c.object({type:c.enum(["response.completed","response.incomplete"]),response:c.object({incomplete_details:c.object({reason:c.string()}).nullish(),usage:c.object({input_tokens:c.number(),input_tokens_details:c.object({cached_tokens:c.number().nullish()}).nullish(),output_tokens:c.number(),output_tokens_details:c.object({reasoning_tokens:c.number().nullish()}).nullish()}),service_tier:c.string().nullish()})}),c.object({type:c.literal("response.created"),response:c.object({id:c.string(),created_at:c.number(),model:c.string(),service_tier:c.string().nullish()})}),c.object({type:c.literal("response.output_item.added"),output_index:c.number(),item:c.discriminatedUnion("type",[c.object({type:c.literal("message"),id:c.string()}),c.object({type:c.literal("reasoning"),id:c.string(),encrypted_content:c.string().nullish()}),c.object({type:c.literal("function_call"),id:c.string(),call_id:c.string(),name:c.string(),arguments:c.string()}),c.object({type:c.literal("web_search_call"),id:c.string(),status:c.string()}),c.object({type:c.literal("computer_call"),id:c.string(),status:c.string()}),c.object({type:c.literal("file_search_call"),id:c.string()}),c.object({type:c.literal("image_generation_call"),id:c.string()}),c.object({type:c.literal("code_interpreter_call"),id:c.string(),container_id:c.string(),code:c.string().nullable(),outputs:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("logs"),logs:c.string()}),c.object({type:c.literal("image"),url:c.string()})])).nullable(),status:c.string()})])}),c.object({type:c.literal("response.output_item.done"),output_index:c.number(),item:c.discriminatedUnion("type",[c.object({type:c.literal("message"),id:c.string()}),c.object({type:c.literal("reasoning"),id:c.string(),encrypted_content:c.string().nullish()}),c.object({type:c.literal("function_call"),id:c.string(),call_id:c.string(),name:c.string(),arguments:c.string(),status:c.literal("completed")}),c.object({type:c.literal("code_interpreter_call"),id:c.string(),code:c.string().nullable(),container_id:c.string(),outputs:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("logs"),logs:c.string()}),c.object({type:c.literal("image"),url:c.string()})])).nullable()}),c.object({type:c.literal("image_generation_call"),id:c.string(),result:c.string()}),c.object({type:c.literal("web_search_call"),id:c.string(),status:c.string(),action:c.discriminatedUnion("type",[c.object({type:c.literal("search"),query:c.string().nullish(),sources:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("url"),url:c.string()}),c.object({type:c.literal("api"),name:c.string()})])).nullish()}),c.object({type:c.literal("open_page"),url:c.string()}),c.object({type:c.literal("find"),url:c.string(),pattern:c.string()})])}),c.object({type:c.literal("file_search_call"),id:c.string(),queries:c.array(c.string()),results:c.array(c.object({attributes:c.record(c.string(),c.unknown()),file_id:c.string(),filename:c.string(),score:c.number(),text:c.string()})).nullish()}),c.object({type:c.literal("local_shell_call"),id:c.string(),call_id:c.string(),action:c.object({type:c.literal("exec"),command:c.array(c.string()),timeout_ms:c.number().optional(),user:c.string().optional(),working_directory:c.string().optional(),env:c.record(c.string(),c.string()).optional()})}),c.object({type:c.literal("computer_call"),id:c.string(),status:c.literal("completed")})])}),c.object({type:c.literal("response.function_call_arguments.delta"),item_id:c.string(),output_index:c.number(),delta:c.string()}),c.object({type:c.literal("response.image_generation_call.partial_image"),item_id:c.string(),output_index:c.number(),partial_image_b64:c.string()}),c.object({type:c.literal("response.code_interpreter_call_code.delta"),item_id:c.string(),output_index:c.number(),delta:c.string()}),c.object({type:c.literal("response.code_interpreter_call_code.done"),item_id:c.string(),output_index:c.number(),code:c.string()}),c.object({type:c.literal("response.output_text.annotation.added"),annotation:c.discriminatedUnion("type",[c.object({type:c.literal("url_citation"),start_index:c.number(),end_index:c.number(),url:c.string(),title:c.string()}),c.object({type:c.literal("file_citation"),file_id:c.string(),filename:c.string().nullish(),index:c.number().nullish(),start_index:c.number().nullish(),end_index:c.number().nullish(),quote:c.string().nullish()})])}),c.object({type:c.literal("response.reasoning_summary_part.added"),item_id:c.string(),summary_index:c.number()}),c.object({type:c.literal("response.reasoning_summary_text.delta"),item_id:c.string(),summary_index:c.number(),delta:c.string()}),c.object({type:c.literal("response.reasoning_summary_part.done"),item_id:c.string(),summary_index:c.number()}),c.object({type:c.literal("error"),sequence_number:c.number(),error:c.object({type:c.string(),code:c.string(),message:c.string(),param:c.string().nullish()})}),c.object({type:c.string()}).loose().transform(t=>({type:"unknown_chunk",message:t.type}))]))),vee=Pt(()=>ne(c.object({id:c.string().optional(),created_at:c.number().optional(),error:c.object({message:c.string(),type:c.string(),param:c.string().nullish(),code:c.string()}).nullish(),model:c.string().optional(),output:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("message"),role:c.literal("assistant"),id:c.string(),content:c.array(c.object({type:c.literal("output_text"),text:c.string(),logprobs:c.array(c.object({token:c.string(),logprob:c.number(),top_logprobs:c.array(c.object({token:c.string(),logprob:c.number()}))})).nullish(),annotations:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("url_citation"),start_index:c.number(),end_index:c.number(),url:c.string(),title:c.string()}),c.object({type:c.literal("file_citation"),file_id:c.string(),filename:c.string().nullish(),index:c.number().nullish(),start_index:c.number().nullish(),end_index:c.number().nullish(),quote:c.string().nullish()}),c.object({type:c.literal("container_file_citation"),container_id:c.string(),file_id:c.string(),filename:c.string().nullish(),start_index:c.number().nullish(),end_index:c.number().nullish(),index:c.number().nullish()}),c.object({type:c.literal("file_path"),file_id:c.string(),index:c.number().nullish()})]))}))}),c.object({type:c.literal("web_search_call"),id:c.string(),status:c.string(),action:c.discriminatedUnion("type",[c.object({type:c.literal("search"),query:c.string().nullish(),sources:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("url"),url:c.string()}),c.object({type:c.literal("api"),name:c.string()})])).nullish()}),c.object({type:c.literal("open_page"),url:c.string()}),c.object({type:c.literal("find"),url:c.string(),pattern:c.string()})])}),c.object({type:c.literal("file_search_call"),id:c.string(),queries:c.array(c.string()),results:c.array(c.object({attributes:c.record(c.string(),c.union([c.string(),c.number(),c.boolean()])),file_id:c.string(),filename:c.string(),score:c.number(),text:c.string()})).nullish()}),c.object({type:c.literal("code_interpreter_call"),id:c.string(),code:c.string().nullable(),container_id:c.string(),outputs:c.array(c.discriminatedUnion("type",[c.object({type:c.literal("logs"),logs:c.string()}),c.object({type:c.literal("image"),url:c.string()})])).nullable()}),c.object({type:c.literal("image_generation_call"),id:c.string(),result:c.string()}),c.object({type:c.literal("local_shell_call"),id:c.string(),call_id:c.string(),action:c.object({type:c.literal("exec"),command:c.array(c.string()),timeout_ms:c.number().optional(),user:c.string().optional(),working_directory:c.string().optional(),env:c.record(c.string(),c.string()).optional()})}),c.object({type:c.literal("function_call"),call_id:c.string(),name:c.string(),arguments:c.string(),id:c.string()}),c.object({type:c.literal("computer_call"),id:c.string(),status:c.string().optional()}),c.object({type:c.literal("reasoning"),id:c.string(),encrypted_content:c.string().nullish(),summary:c.array(c.object({type:c.literal("summary_text"),text:c.string()}))})])).optional(),service_tier:c.string().nullish(),incomplete_details:c.object({reason:c.string()}).nullish(),usage:c.object({input_tokens:c.number(),input_tokens_details:c.object({cached_tokens:c.number().nullish()}).nullish(),output_tokens:c.number(),output_tokens_details:c.object({reasoning_tokens:c.number().nullish()}).nullish()}).optional()}))),wM=20,_ee=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],m2e=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",..._ee],bee=Pt(()=>ne(c.object({conversation:c.string().nullish(),include:c.array(c.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:c.string().nullish(),logprobs:c.union([c.boolean(),c.number().min(1).max(wM)]).optional(),maxToolCalls:c.number().nullish(),metadata:c.any().nullish(),parallelToolCalls:c.boolean().nullish(),previousResponseId:c.string().nullish(),promptCacheKey:c.string().nullish(),promptCacheRetention:c.enum(["in_memory","24h"]).nullish(),reasoningEffort:c.string().nullish(),reasoningSummary:c.string().nullish(),safetyIdentifier:c.string().nullish(),serviceTier:c.enum(["auto","flex","priority","default"]).nullish(),store:c.boolean().nullish(),strictJsonSchema:c.boolean().nullish(),textVerbosity:c.enum(["low","medium","high"]).nullish(),truncation:c.enum(["auto","disabled"]).nullish(),user:c.string().nullish()})));async function wee({tools:t,toolChoice:e,strictJsonSchema:r}){t=t?.length?t:void 0;let n=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let o=[];for(let a of t)switch(a.type){case"function":o.push({type:"function",name:a.name,description:a.description,parameters:a.inputSchema,strict:r});break;case"provider-defined":{switch(a.id){case"openai.file_search":{let u=await fr({value:a.args,schema:WY});o.push({type:"file_search",vector_store_ids:u.vectorStoreIds,max_num_results:u.maxNumResults,ranking_options:u.ranking?{ranker:u.ranking.ranker,score_threshold:u.ranking.scoreThreshold}:void 0,filters:u.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.web_search_preview":{let u=await fr({value:a.args,schema:lee});o.push({type:"web_search_preview",search_context_size:u.searchContextSize,user_location:u.userLocation});break}case"openai.web_search":{let u=await fr({value:a.args,schema:iee});o.push({type:"web_search",filters:u.filters!=null?{allowed_domains:u.filters.allowedDomains}:void 0,external_web_access:u.externalWebAccess,search_context_size:u.searchContextSize,user_location:u.userLocation});break}case"openai.code_interpreter":{let u=await fr({value:a.args,schema:ZY});o.push({type:"code_interpreter",container:u.container==null?{type:"auto",file_ids:void 0}:typeof u.container=="string"?u.container:{type:"auto",file_ids:u.container.fileIds}});break}case"openai.image_generation":{let u=await fr({value:a.args,schema:YY});o.push({type:"image_generation",background:u.background,input_fidelity:u.inputFidelity,input_image_mask:u.inputImageMask?{file_id:u.inputImageMask.fileId,image_url:u.inputImageMask.imageUrl}:void 0,model:u.model,size:u.size,quality:u.quality,moderation:u.moderation,output_format:u.outputFormat,output_compression:u.outputCompression});break}}break}default:n.push({type:"unsupported-tool",tool:a});break}if(e==null)return{tools:o,toolChoice:void 0,toolWarnings:n};let i=e.type;switch(i){case"auto":case"none":case"required":return{tools:o,toolChoice:i,toolWarnings:n};case"tool":return{tools:o,toolChoice:e.toolName==="code_interpreter"||e.toolName==="file_search"||e.toolName==="image_generation"||e.toolName==="web_search_preview"||e.toolName==="web_search"?{type:e.toolName}:{type:"function",name:e.toolName},toolWarnings:n};default:{let a=i;throw new yt({functionality:`tool choice type: ${a}`})}}}s(wee,"prepareResponsesTools");var xee=class{static{s(this,"OpenAIResponsesLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({maxOutputTokens:t,temperature:e,stopSequences:r,topP:n,topK:o,presencePenalty:i,frequencyPenalty:a,seed:u,prompt:l,providerOptions:d,tools:p,toolChoice:f,responseFormat:h}){var y,g,m,_;let w=[],b=$ee(this.modelId);o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),u!=null&&w.push({type:"unsupported-setting",setting:"seed"}),i!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),a!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});let x=await At({provider:"openai",providerOptions:d,schema:bee});x?.conversation&&x?.previousResponseId&&w.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});let{input:k,warnings:R}=await hee({prompt:l,systemMessageMode:b.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(y=x?.store)!=null?y:!0,hasLocalShellTool:P("openai.local_shell")});w.push(...R);let O=(g=x?.strictJsonSchema)!=null?g:!1,C=x?.include;function $(oe){C==null?C=[oe]:C.includes(oe)||(C=[...C,oe])}s($,"addInclude");function P(oe){return p?.find(_e=>_e.type==="provider-defined"&&_e.id===oe)!=null}s(P,"hasOpenAITool");let N=typeof x?.logprobs=="number"?x?.logprobs:x?.logprobs===!0?wM:void 0;N&&$("message.output_text.logprobs");let D=(m=p?.find(oe=>oe.type==="provider-defined"&&(oe.id==="openai.web_search"||oe.id==="openai.web_search_preview")))==null?void 0:m.name;D&&$("web_search_call.action.sources"),P("openai.code_interpreter")&&$("code_interpreter_call.outputs");let K=x?.store;K===!1&&b.isReasoningModel&&$("reasoning.encrypted_content");let V={model:this.modelId,input:k,temperature:e,top_p:n,max_output_tokens:t,...(h?.type==="json"||x?.textVerbosity)&&{text:{...h?.type==="json"&&{format:h.schema!=null?{type:"json_schema",strict:O,name:(_=h.name)!=null?_:"response",description:h.description,schema:h.schema}:{type:"json_object"}},...x?.textVerbosity&&{verbosity:x.textVerbosity}}},conversation:x?.conversation,max_tool_calls:x?.maxToolCalls,metadata:x?.metadata,parallel_tool_calls:x?.parallelToolCalls,previous_response_id:x?.previousResponseId,store:K,user:x?.user,instructions:x?.instructions,service_tier:x?.serviceTier,include:C,prompt_cache_key:x?.promptCacheKey,prompt_cache_retention:x?.promptCacheRetention,safety_identifier:x?.safetyIdentifier,top_logprobs:N,truncation:x?.truncation,...b.isReasoningModel&&(x?.reasoningEffort!=null||x?.reasoningSummary!=null)&&{reasoning:{...x?.reasoningEffort!=null&&{effort:x.reasoningEffort},...x?.reasoningSummary!=null&&{summary:x.reasoningSummary}}}};b.isReasoningModel?(V.temperature!=null&&(V.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),V.top_p!=null&&(V.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(x?.reasoningEffort!=null&&w.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),x?.reasoningSummary!=null&&w.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),x?.serviceTier==="flex"&&!b.supportsFlexProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete V.service_tier),x?.serviceTier==="priority"&&!b.supportsPriorityProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete V.service_tier);let{tools:q,toolChoice:Q,toolWarnings:ee}=await wee({tools:p,toolChoice:f,strictJsonSchema:O});return{webSearchToolName:D,args:{...V,tools:q,tool_choice:Q},warnings:[...w,...ee],store:K}}async doGenerate(t){var e,r,n,o,i,a,u,l,d,p,f,h,y,g,m,_,w,b,x;let{args:k,warnings:R,webSearchToolName:O}=await this.getArgs(t),C=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:$,value:P,rawValue:N}=await Dt({url:C,headers:Nt(this.config.headers(),t.headers),body:k,failedResponseHandler:Xn,successfulResponseHandler:ir(vee),abortSignal:t.abortSignal,fetch:this.config.fetch});if(P.error)throw new _r({message:P.error.message,url:C,requestBodyValues:k,statusCode:400,responseHeaders:$,responseBody:N,isRetryable:!1});let D=[],K=[],V=!1;for(let ee of P.output)switch(ee.type){case"reasoning":{ee.summary.length===0&&ee.summary.push({type:"summary_text",text:""});for(let oe of ee.summary)D.push({type:"reasoning",text:oe.text,providerMetadata:{openai:{itemId:ee.id,reasoningEncryptedContent:(e=ee.encrypted_content)!=null?e:null}}});break}case"image_generation_call":{D.push({type:"tool-call",toolCallId:ee.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:ee.id,toolName:"image_generation",result:{result:ee.result},providerExecuted:!0});break}case"local_shell_call":{D.push({type:"tool-call",toolCallId:ee.call_id,toolName:"local_shell",input:JSON.stringify({action:ee.action}),providerMetadata:{openai:{itemId:ee.id}}});break}case"message":{for(let oe of ee.content){(n=(r=t.providerOptions)==null?void 0:r.openai)!=null&&n.logprobs&&oe.logprobs&&K.push(oe.logprobs),D.push({type:"text",text:oe.text,providerMetadata:{openai:{itemId:ee.id}}});for(let _e of oe.annotations)_e.type==="url_citation"?D.push({type:"source",sourceType:"url",id:(a=(i=(o=this.config).generateId)==null?void 0:i.call(o))!=null?a:mr(),url:_e.url,title:_e.title}):_e.type==="file_citation"&&D.push({type:"source",sourceType:"document",id:(d=(l=(u=this.config).generateId)==null?void 0:l.call(u))!=null?d:mr(),mediaType:"text/plain",title:(f=(p=_e.quote)!=null?p:_e.filename)!=null?f:"Document",filename:(h=_e.filename)!=null?h:_e.file_id,..._e.file_id?{providerMetadata:{openai:{fileId:_e.file_id}}}:{}})}break}case"function_call":{V=!0,D.push({type:"tool-call",toolCallId:ee.call_id,toolName:ee.name,input:ee.arguments,providerMetadata:{openai:{itemId:ee.id}}});break}case"web_search_call":{D.push({type:"tool-call",toolCallId:ee.id,toolName:O??"web_search",input:JSON.stringify({}),providerExecuted:!0}),D.push({type:"tool-result",toolCallId:ee.id,toolName:O??"web_search",result:fM(ee.action),providerExecuted:!0});break}case"computer_call":{D.push({type:"tool-call",toolCallId:ee.id,toolName:"computer_use",input:"",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:ee.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:ee.status||"completed"},providerExecuted:!0});break}case"file_search_call":{D.push({type:"tool-call",toolCallId:ee.id,toolName:"file_search",input:"{}",providerExecuted:!0}),D.push({type:"tool-result",toolCallId:ee.id,toolName:"file_search",result:{queries:ee.queries,results:(g=(y=ee.results)==null?void 0:y.map(oe=>({attributes:oe.attributes,fileId:oe.file_id,filename:oe.filename,score:oe.score,text:oe.text})))!=null?g:null},providerExecuted:!0});break}case"code_interpreter_call":{D.push({type:"tool-call",toolCallId:ee.id,toolName:"code_interpreter",input:JSON.stringify({code:ee.code,containerId:ee.container_id}),providerExecuted:!0}),D.push({type:"tool-result",toolCallId:ee.id,toolName:"code_interpreter",result:{outputs:ee.outputs},providerExecuted:!0});break}}let q={openai:{...P.id!=null?{responseId:P.id}:{}}};K.length>0&&(q.openai.logprobs=K),typeof P.service_tier=="string"&&(q.openai.serviceTier=P.service_tier);let Q=P.usage;return{content:D,finishReason:pM({finishReason:(m=P.incomplete_details)==null?void 0:m.reason,hasFunctionCall:V}),usage:{inputTokens:Q.input_tokens,outputTokens:Q.output_tokens,totalTokens:Q.input_tokens+Q.output_tokens,reasoningTokens:(w=(_=Q.output_tokens_details)==null?void 0:_.reasoning_tokens)!=null?w:void 0,cachedInputTokens:(x=(b=Q.input_tokens_details)==null?void 0:b.cached_tokens)!=null?x:void 0},request:{body:k},response:{id:P.id,timestamp:new Date(P.created_at*1e3),modelId:P.model,headers:$,body:N},providerMetadata:q,warnings:R}}async doStream(t){let{args:e,warnings:r,webSearchToolName:n,store:o}=await this.getArgs(t),{responseHeaders:i,value:a}=await Dt({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:Xn,successfulResponseHandler:Wn(yee),abortSignal:t.abortSignal,fetch:this.config.fetch}),u=this,l="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],f=null,h={},y=[],g=!1,m={},_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var x,k,R,O,C,$,P,N,D,K,V,q,Q,ee,oe,_e,Te,We,He,G,Oe,ge;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){l="error",b.enqueue({type:"error",error:w.error});return}let z=w.value;if(mM(z))z.item.type==="function_call"?(h[z.output_index]={toolName:z.item.name,toolCallId:z.item.call_id},b.enqueue({type:"tool-input-start",id:z.item.call_id,toolName:z.item.name})):z.item.type==="web_search_call"?(h[z.output_index]={toolName:n??"web_search",toolCallId:z.item.id},b.enqueue({type:"tool-input-start",id:z.item.id,toolName:n??"web_search",providerExecuted:!0}),b.enqueue({type:"tool-input-end",id:z.item.id}),b.enqueue({type:"tool-call",toolCallId:z.item.id,toolName:n??"web_search",input:JSON.stringify({}),providerExecuted:!0})):z.item.type==="computer_call"?(h[z.output_index]={toolName:"computer_use",toolCallId:z.item.id},b.enqueue({type:"tool-input-start",id:z.item.id,toolName:"computer_use",providerExecuted:!0})):z.item.type==="code_interpreter_call"?(h[z.output_index]={toolName:"code_interpreter",toolCallId:z.item.id,codeInterpreter:{containerId:z.item.container_id}},b.enqueue({type:"tool-input-start",id:z.item.id,toolName:"code_interpreter",providerExecuted:!0}),b.enqueue({type:"tool-input-delta",id:z.item.id,delta:`{"containerId":"${z.item.container_id}","code":"`})):z.item.type==="file_search_call"?b.enqueue({type:"tool-call",toolCallId:z.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):z.item.type==="image_generation_call"?b.enqueue({type:"tool-call",toolCallId:z.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):z.item.type==="message"?(y.splice(0,y.length),b.enqueue({type:"text-start",id:z.item.id,providerMetadata:{openai:{itemId:z.item.id}}})):mM(z)&&z.item.type==="reasoning"&&(m[z.item.id]={encryptedContent:z.item.encrypted_content,summaryParts:{0:"active"}},b.enqueue({type:"reasoning-start",id:`${z.item.id}:0`,providerMetadata:{openai:{itemId:z.item.id,reasoningEncryptedContent:(x=z.item.encrypted_content)!=null?x:null}}}));else if(Tee(z)){if(z.item.type==="message")b.enqueue({type:"text-end",id:z.item.id,providerMetadata:{openai:{itemId:z.item.id,...y.length>0&&{annotations:y}}}});else if(z.item.type==="function_call")h[z.output_index]=void 0,g=!0,b.enqueue({type:"tool-input-end",id:z.item.call_id}),b.enqueue({type:"tool-call",toolCallId:z.item.call_id,toolName:z.item.name,input:z.item.arguments,providerMetadata:{openai:{itemId:z.item.id}}});else if(z.item.type==="web_search_call")h[z.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:z.item.id,toolName:n??"web_search",result:fM(z.item.action),providerExecuted:!0});else if(z.item.type==="computer_call")h[z.output_index]=void 0,b.enqueue({type:"tool-input-end",id:z.item.id}),b.enqueue({type:"tool-call",toolCallId:z.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),b.enqueue({type:"tool-result",toolCallId:z.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:z.item.status||"completed"},providerExecuted:!0});else if(z.item.type==="file_search_call")h[z.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:z.item.id,toolName:"file_search",result:{queries:z.item.queries,results:(R=(k=z.item.results)==null?void 0:k.map(Ze=>({attributes:Ze.attributes,fileId:Ze.file_id,filename:Ze.filename,score:Ze.score,text:Ze.text})))!=null?R:null},providerExecuted:!0});else if(z.item.type==="code_interpreter_call")h[z.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:z.item.id,toolName:"code_interpreter",result:{outputs:z.item.outputs},providerExecuted:!0});else if(z.item.type==="image_generation_call")b.enqueue({type:"tool-result",toolCallId:z.item.id,toolName:"image_generation",result:{result:z.item.result},providerExecuted:!0});else if(z.item.type==="local_shell_call")h[z.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:z.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:z.item.action.command,timeoutMs:z.item.action.timeout_ms,user:z.item.action.user,workingDirectory:z.item.action.working_directory,env:z.item.action.env}}),providerMetadata:{openai:{itemId:z.item.id}}});else if(z.item.type==="reasoning"){let Ze=m[z.item.id],vt=Object.entries(Ze.summaryParts).filter(([wt,Lr])=>Lr==="active"||Lr==="can-conclude").map(([wt])=>wt);for(let wt of vt)b.enqueue({type:"reasoning-end",id:`${z.item.id}:${wt}`,providerMetadata:{openai:{itemId:z.item.id,reasoningEncryptedContent:(O=z.item.encrypted_content)!=null?O:null}}});delete m[z.item.id]}}else if(kee(z)){let Ze=h[z.output_index];Ze!=null&&b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:z.delta})}else if(Pee(z)){let Ze=h[z.output_index];Ze!=null&&b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:JSON.stringify(z.delta).slice(1,-1)})}else if(Aee(z)){let Ze=h[z.output_index];Ze!=null&&(b.enqueue({type:"tool-input-delta",id:Ze.toolCallId,delta:'"}'}),b.enqueue({type:"tool-input-end",id:Ze.toolCallId}),b.enqueue({type:"tool-call",toolCallId:Ze.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:z.code,containerId:Ze.codeInterpreter.containerId}),providerExecuted:!0}))}else if(Iee(z))f=z.response.id,b.enqueue({type:"response-metadata",id:z.response.id,timestamp:new Date(z.response.created_at*1e3),modelId:z.response.model});else if(See(z))b.enqueue({type:"text-delta",id:z.item_id,delta:z.delta}),($=(C=t.providerOptions)==null?void 0:C.openai)!=null&&$.logprobs&&z.logprobs&&p.push(z.logprobs);else if(z.type==="response.reasoning_summary_part.added"){if(z.summary_index>0){let Ze=m[z.item_id];Ze.summaryParts[z.summary_index]="active";for(let vt of Object.keys(Ze.summaryParts))Ze.summaryParts[vt]==="can-conclude"&&(b.enqueue({type:"reasoning-end",id:`${z.item_id}:${vt}`,providerMetadata:{openai:{itemId:z.item_id}}}),Ze.summaryParts[vt]="concluded");b.enqueue({type:"reasoning-start",id:`${z.item_id}:${z.summary_index}`,providerMetadata:{openai:{itemId:z.item_id,reasoningEncryptedContent:(N=(P=m[z.item_id])==null?void 0:P.encryptedContent)!=null?N:null}}})}}else z.type==="response.reasoning_summary_text.delta"?b.enqueue({type:"reasoning-delta",id:`${z.item_id}:${z.summary_index}`,delta:z.delta,providerMetadata:{openai:{itemId:z.item_id}}}):z.type==="response.reasoning_summary_part.done"?o?(b.enqueue({type:"reasoning-end",id:`${z.item_id}:${z.summary_index}`,providerMetadata:{openai:{itemId:z.item_id}}}),m[z.item_id].summaryParts[z.summary_index]="concluded"):m[z.item_id].summaryParts[z.summary_index]="can-conclude":Eee(z)?(l=pM({finishReason:(D=z.response.incomplete_details)==null?void 0:D.reason,hasFunctionCall:g}),d.inputTokens=z.response.usage.input_tokens,d.outputTokens=z.response.usage.output_tokens,d.totalTokens=z.response.usage.input_tokens+z.response.usage.output_tokens,d.reasoningTokens=(V=(K=z.response.usage.output_tokens_details)==null?void 0:K.reasoning_tokens)!=null?V:void 0,d.cachedInputTokens=(Q=(q=z.response.usage.input_tokens_details)==null?void 0:q.cached_tokens)!=null?Q:void 0,typeof z.response.service_tier=="string"&&(_=z.response.service_tier)):Cee(z)?(y.push(z.annotation),z.annotation.type==="url_citation"?b.enqueue({type:"source",sourceType:"url",id:(_e=(oe=(ee=u.config).generateId)==null?void 0:oe.call(ee))!=null?_e:mr(),url:z.annotation.url,title:z.annotation.title}):z.annotation.type==="file_citation"&&b.enqueue({type:"source",sourceType:"document",id:(He=(We=(Te=u.config).generateId)==null?void 0:We.call(Te))!=null?He:mr(),mediaType:"text/plain",title:(Oe=(G=z.annotation.quote)!=null?G:z.annotation.filename)!=null?Oe:"Document",filename:(ge=z.annotation.filename)!=null?ge:z.annotation.file_id,...z.annotation.file_id?{providerMetadata:{openai:{fileId:z.annotation.file_id}}}:{}})):Oee(z)&&b.enqueue({type:"error",error:z})},flush(w){let b={openai:{responseId:f}};p.length>0&&(b.openai.logprobs=p),_!==void 0&&(b.openai.serviceTier=_),w.enqueue({type:"finish",finishReason:l,usage:d,providerMetadata:b})}})),request:{body:e},response:{headers:i}}}};function See(t){return t.type==="response.output_text.delta"}s(See,"isTextDeltaChunk");function Tee(t){return t.type==="response.output_item.done"}s(Tee,"isResponseOutputItemDoneChunk");function Eee(t){return t.type==="response.completed"||t.type==="response.incomplete"}s(Eee,"isResponseFinishedChunk");function Iee(t){return t.type==="response.created"}s(Iee,"isResponseCreatedChunk");function kee(t){return t.type==="response.function_call_arguments.delta"}s(kee,"isResponseFunctionCallArgumentsDeltaChunk");function Pee(t){return t.type==="response.code_interpreter_call_code.delta"}s(Pee,"isResponseCodeInterpreterCallCodeDeltaChunk");function Aee(t){return t.type==="response.code_interpreter_call_code.done"}s(Aee,"isResponseCodeInterpreterCallCodeDoneChunk");function mM(t){return t.type==="response.output_item.added"}s(mM,"isResponseOutputItemAddedChunk");function Cee(t){return t.type==="response.output_text.annotation.added"}s(Cee,"isResponseAnnotationAddedChunk");function Oee(t){return t.type==="error"}s(Oee,"isErrorChunk");function $ee(t){let e=t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),r=t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini"),n={systemMessageMode:"system",supportsFlexProcessing:e,supportsPriorityProcessing:r};return t.startsWith("gpt-5-chat")?{...n,isReasoningModel:!1}:t.startsWith("o")||t.startsWith("gpt-5")||t.startsWith("codex-")||t.startsWith("computer-use")?{...n,isReasoningModel:!0,systemMessageMode:"developer"}:{...n,isReasoningModel:!1}}s($ee,"getResponsesModelConfig");function fM(t){var e;switch(t.type){case"search":return{action:{type:"search",query:(e=t.query)!=null?e:void 0},...t.sources!=null&&{sources:t.sources}};case"open_page":return{action:{type:"openPage",url:t.url}};case"find":return{action:{type:"find",url:t.url,pattern:t.pattern}}}}s(fM,"mapWebSearchOutput");var Ree=Pt(()=>ne(c.object({instructions:c.string().nullish(),speed:c.number().min(.25).max(4).default(1).nullish()}))),Nee=class{static{s(this,"OpenAISpeechModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:t,voice:e="alloy",outputFormat:r="mp3",speed:n,instructions:o,language:i,providerOptions:a}){let u=[],l=await At({provider:"openai",providerOptions:a,schema:Ree}),d={model:this.modelId,input:t,voice:e,response_format:"mp3",speed:n,instructions:o};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?d.response_format=r:u.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),l){let p={};for(let f in p){let h=p[f];h!==void 0&&(d[f]=h)}}return i&&u.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:d,warnings:u}}async doGenerate(t){var e,r,n;let o=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{requestBody:i,warnings:a}=await this.getArgs(t),{value:u,responseHeaders:l,rawValue:d}=await Dt({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),body:i,failedResponseHandler:Xn,successfulResponseHandler:Uj(),abortSignal:t.abortSignal,fetch:this.config.fetch});return{audio:u,warnings:a,request:{body:JSON.stringify(i)},response:{timestamp:o,modelId:this.modelId,headers:l,body:d}}}},Dee=Pt(()=>ne(c.object({text:c.string(),language:c.string().nullish(),duration:c.number().nullish(),words:c.array(c.object({word:c.string(),start:c.number(),end:c.number()})).nullish(),segments:c.array(c.object({id:c.number(),seek:c.number(),start:c.number(),end:c.number(),text:c.string(),tokens:c.array(c.number()),temperature:c.number(),avg_logprob:c.number(),compression_ratio:c.number(),no_speech_prob:c.number()})).nullish()}))),jee=Pt(()=>ne(c.object({include:c.array(c.string()).optional(),language:c.string().optional(),prompt:c.string().optional(),temperature:c.number().min(0).max(1).default(0).optional(),timestampGranularities:c.array(c.enum(["word","segment"])).default(["segment"]).optional()}))),hM={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},Mee=class{static{s(this,"OpenAITranscriptionModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:t,mediaType:e,providerOptions:r}){let n=[],o=await At({provider:"openai",providerOptions:r,schema:jee}),i=new FormData,a=t instanceof Uint8Array?new Blob([t]):new Blob([Vj(t)]);i.append("model",this.modelId);let u=Nj(e);if(i.append("file",new File([a],"audio",{type:e}),`audio.${u}`),o){let l={include:o.include,language:o.language,prompt:o.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:o.temperature,timestamp_granularities:o.timestampGranularities};for(let[d,p]of Object.entries(l))if(p!=null)if(Array.isArray(p))for(let f of p)i.append(`${d}[]`,String(f));else i.append(d,String(p))}return{formData:i,warnings:n}}async doGenerate(t){var e,r,n,o,i,a,u,l;let d=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{formData:p,warnings:f}=await this.getArgs(t),{value:h,responseHeaders:y,rawValue:g}=await jj({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:Nt(this.config.headers(),t.headers),formData:p,failedResponseHandler:Xn,successfulResponseHandler:ir(Dee),abortSignal:t.abortSignal,fetch:this.config.fetch}),m=h.language!=null&&h.language in hM?hM[h.language]:void 0;return{text:h.text,segments:(u=(a=(o=h.segments)==null?void 0:o.map(_=>({text:_.text,startSecond:_.start,endSecond:_.end})))!=null?a:(i=h.words)==null?void 0:i.map(_=>({text:_.word,startSecond:_.start,endSecond:_.end})))!=null?u:[],language:m,durationInSeconds:(l=h.duration)!=null?l:void 0,warnings:f,response:{timestamp:d,modelId:this.modelId,headers:y,body:g}}}},Uee="2.0.74";function zee(t={}){var e,r;let n=(e=Pa(Sf({settingValue:t.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?e:"https://api.openai.com/v1",o=(r=t.name)!=null?r:"openai",i=s(()=>Ki({Authorization:`Bearer ${Ia({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers},`ai-sdk/openai/${Uee}`),"getHeaders"),a=s(m=>new AY(m,{provider:`${o}.chat`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createChatModel"),u=s(m=>new MY(m,{provider:`${o}.completion`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createCompletionModel"),l=s(m=>new LY(m,{provider:`${o}.embedding`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createEmbeddingModel"),d=s(m=>new VY(m,{provider:`${o}.image`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createImageModel"),p=s(m=>new Mee(m,{provider:`${o}.transcription`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createTranscriptionModel"),f=s(m=>new Nee(m,{provider:`${o}.speech`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createSpeechModel"),h=s(m=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return y(m)},"createLanguageModel"),y=s(m=>new xee(m,{provider:`${o}.responses`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch,fileIdPrefixes:["file-"]}),"createResponsesModel"),g=s(function(m){return h(m)},"provider");return g.languageModel=h,g.chat=a,g.completion=u,g.responses=y,g.embedding=l,g.textEmbedding=l,g.textEmbeddingModel=l,g.image=d,g.imageModel=d,g.transcription=p,g.transcriptionModel=p,g.speech=f,g.speechModel=f,g.tools=fee,g}s(zee,"createOpenAI");var N0=zee();var xM=c.enum(["openai","anthropic","google"]),Lee={openai:{default:s(()=>N0("gpt-4o"),"default"),fast:s(()=>N0("gpt-4o-mini"),"fast"),envKey:"OPENAI_API_KEY"},anthropic:{default:s(()=>C0("claude-3-5-sonnet-latest"),"default"),fast:s(()=>C0("claude-3-5-haiku-latest"),"fast"),envKey:"ANTHROPIC_API_KEY"},google:{default:s(()=>O0("gemini-1.5-pro-latest"),"default"),fast:s(()=>O0("gemini-1.5-flash-latest"),"fast"),envKey:"GOOGLE_GENERATIVE_AI_API_KEY"}};function SM(t,e="default"){return Lee[t][e]()}s(SM,"getModel");function TM(){let t=[];return process.env.OPENAI_API_KEY&&t.push("openai"),process.env.ANTHROPIC_API_KEY&&t.push("anthropic"),process.env.GOOGLE_GENERATIVE_AI_API_KEY&&t.push("google"),t.length>0?t:["google"]}s(TM,"getAvailableProviders");var qee=[/ignore\s+(all\s+)?(previous|above|prior)\s+instructions/i,/disregard\s+(all\s+)?(previous|prior)\s+(instructions|context)/i,/you\s+are\s+now/i,/new\s+instructions:/i,/system:\s*/i,/\[INST\]/i,/<\/s>/i,/DROP\s+TABLE/i,/DELETE\s+FROM\s+\w+\s*;/i,/UPDATE\s+\w+\s+SET.*WHERE\s+1\s*=\s*1/i,/;\s*--/];function EM(t){for(let r of qee)if(r.test(t))return{isSafe:!1,reason:`Potential injection detected: ${r.source}`};return{isSafe:!0,sanitizedInput:[...t].filter(r=>{let n=r.charCodeAt(0);return n>=32&&n!==127}).join("").trim()}}s(EM,"checkPromptInjection");var Fee=new Set(["password","password_hash","two_factor_secret","two_factor_enabled","voice_sample_encrypted","voice_biometric_enabled","biometric_enabled","api_token","refresh_token","belvo_link_token","session_token"]),IM={cpf:s(t=>t?`***.***.***-${t.slice(-2)}`:"[n\xE3o informado]","cpf"),account_number:s(t=>t?`****${t.slice(-4)}`:"[n\xE3o informado]","account_number"),phone:s(t=>t?`(**) *****-${t.slice(-4)}`:"[n\xE3o informado]","phone")};function Yn(t){if(!t)return{};let e={};for(let[r,n]of Object.entries(t))if(!Fee.has(r.toLowerCase())){if(r.toLowerCase()in IM&&typeof n=="string"){e[r]=IM[r.toLowerCase()](n);continue}if(n&&typeof n=="object"){Array.isArray(n)?e[r]=n.map(o=>typeof o=="object"&&o!==null?Yn(o):o):e[r]=Yn(n);continue}e[r]=n}return e}s(Yn,"filterSensitiveData");function kM(t,e){let r=c.object({includeInactive:c.boolean().default(!1).describe("Incluir contas inativas")}),n=c.object({accountId:c.string().uuid().optional().describe("ID da conta (omitir para total)")});return{listAccounts:{description:"Lista todas as contas banc\xE1rias do usu\xE1rio.",parameters:r,execute:s(async o=>{let{includeInactive:i}=o,a=[H(se.userId,t)];i||a.push(H(se.isActive,!0));let u=await e.select({id:se.id,institutionName:se.institutionName,accountType:se.accountType,balance:se.balance,availableBalance:se.availableBalance,currency:se.currency,isActive:se.isActive,isPrimary:se.isPrimary,lastSync:se.lastSync}).from(se).where(Ee(...a)).orderBy(Rt(se.isPrimary)),l=u.reduce((d,p)=>d+Number(p.balance??0),0);return{accounts:u.map(Yn),totalBalance:l,count:u.length}},"execute")},getAccountBalance:{description:"Obt\xE9m saldo atual de uma conta espec\xEDfica ou total de todas as contas.",parameters:n,execute:s(async o=>{let{accountId:i}=o;if(i){let[d]=await e.select({id:se.id,institutionName:se.institutionName,balance:se.balance,availableBalance:se.availableBalance,currency:se.currency,lastSync:se.lastSync}).from(se).where(Ee(H(se.id,i),H(se.userId,t))).limit(1);if(!d)throw new Error("Conta n\xE3o encontrada");return Yn(d)}let a=await e.select({balance:se.balance,availableBalance:se.availableBalance,currency:se.currency}).from(se).where(Ee(H(se.userId,t),H(se.isActive,!0))),u=a.reduce((d,p)=>d+Number(p.balance??0),0),l=a.reduce((d,p)=>d+Number(p.availableBalance??0),0);return{totalBalance:u,totalAvailable:l,currency:"BRL",accountCount:a.length}},"execute")}}}s(kM,"createAccountTools");function PM(t,e){let r=c.object({includeSystem:c.boolean().default(!0).describe("Incluir categorias do sistema")}),n=c.object({name:c.string().min(1).max(50).describe("Nome da categoria"),color:c.string().regex(/^#[0-9A-Fa-f]{6}$/).default("#6B7280").describe("Cor em hexadecimal"),icon:c.string().default("circle").describe("Nome do \xEDcone")});return{listCategories:{description:"Lista todas as categorias de transa\xE7\xE3o dispon\xEDveis.",parameters:r,execute:s(async o=>{let{includeSystem:i}=o,a=Ni(H(De.userId,t),Nd(De.userId)),u=await e.select({id:De.id,name:De.name,color:De.color,icon:De.icon,isSystem:De.isSystem,parentId:De.parentId}).from(De).where(a);return i||(u=u.filter(l=>!l.isSystem)),{categories:u,count:u.length}},"execute")},createCategory:{description:"Cria uma nova categoria personalizada.",parameters:n,execute:s(async o=>{let{name:i,color:a,icon:u}=o,[l]=await e.insert(De).values({userId:t,name:i,color:a,icon:u,isSystem:!1}).returning();return{success:!0,category:l}},"execute")}}}s(PM,"createCategoryTools");function AM(t,e){let r=c.object({startDate:c.string().datetime().optional().describe("Data inicial no formato ISO (YYYY-MM-DD)"),endDate:c.string().datetime().optional().describe("Data final no formato ISO (YYYY-MM-DD)"),categoryId:c.string().uuid().optional().describe("ID da categoria para filtrar"),accountId:c.string().uuid().optional().describe("ID da conta para filtrar"),minAmount:c.number().optional().describe("Valor m\xEDnimo da transa\xE7\xE3o"),maxAmount:c.number().optional().describe("Valor m\xE1ximo da transa\xE7\xE3o"),searchTerm:c.string().optional().describe("Termo para buscar na descri\xE7\xE3o"),limit:c.number().min(1).max(100).default(20).describe("N\xFAmero m\xE1ximo de resultados"),offset:c.number().min(0).default(0).describe("Pular N resultados para pagina\xE7\xE3o")}),n=c.object({transactionId:c.string().uuid().describe("ID da transa\xE7\xE3o")}),o=c.object({amount:c.number().describe("Valor da transa\xE7\xE3o (positivo para receita, negativo para despesa)"),description:c.string().min(1).max(255).describe("Descri\xE7\xE3o da transa\xE7\xE3o"),categoryId:c.string().uuid().optional().describe("ID da categoria"),accountId:c.string().uuid().optional().describe("ID da conta banc\xE1ria"),transactionDate:c.string().datetime().optional().describe("Data da transa\xE7\xE3o (padr\xE3o: agora)"),merchantName:c.string().optional().describe("Nome do estabelecimento")}),i=c.object({transactionId:c.string().uuid().describe("ID da transa\xE7\xE3o a atualizar"),amount:c.number().optional().describe("Novo valor"),description:c.string().min(1).max(255).optional().describe("Nova descri\xE7\xE3o"),categoryId:c.string().uuid().optional().describe("Nova categoria"),transactionDate:c.string().datetime().optional().describe("Nova data"),merchantName:c.string().optional().describe("Novo estabelecimento")}),a=c.object({transactionId:c.string().uuid().describe("ID da transa\xE7\xE3o")}),u=c.object({startDate:c.string().datetime().describe("Data inicial"),endDate:c.string().datetime().describe("Data final")});return{listTransactions:{description:"Lista transa\xE7\xF5es do usu\xE1rio com filtros opcionais. Use para consultar hist\xF3rico, buscar por per\xEDodo ou categoria.",parameters:r,execute:s(async l=>{let{startDate:d,endDate:p,categoryId:f,accountId:h,minAmount:y,maxAmount:g,searchTerm:m,limit:_,offset:w}=l,b=[H(te.userId,t)];d&&b.push(ur(te.transactionDate,new Date(d))),p&&b.push(rr(te.transactionDate,new Date(p))),f&&b.push(H(te.categoryId,f)),h&&b.push(H(te.accountId,h)),y&&b.push(ur(te.amount,String(y))),g&&b.push(rr(te.amount,String(g))),m&&b.push(kr(te.description,`%${m}%`));let x=await e.select({id:te.id,amount:te.amount,description:te.description,merchantName:te.merchantName,transactionDate:te.transactionDate,status:te.status,createdAt:te.createdAt}).from(te).where(Ee(...b)).orderBy(Rt(te.transactionDate)).limit(_).offset(w);return{transactions:x.map(Yn),total:x.length,hasMore:x.length===_}},"execute")},getTransaction:{description:"Obt\xE9m detalhes de uma transa\xE7\xE3o espec\xEDfica pelo ID.",parameters:n,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.select().from(te).where(Ee(H(te.id,d),H(te.userId,t))).limit(1);if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return Yn(p)},"execute")},createTransaction:{description:"Cria uma nova transa\xE7\xE3o manual para o usu\xE1rio.",parameters:o,execute:s(async l=>{let{amount:d,description:p,categoryId:f,accountId:h,transactionDate:y,merchantName:g}=l,[m]=await e.insert(te).values({userId:t,amount:String(d),description:p,categoryId:f,accountId:h,transactionDate:y?new Date(y):new Date,merchantName:g,transactionType:d>=0?"credit":"debit",status:"posted",isManualEntry:!0}).returning();return{success:!0,transaction:Yn(m)}},"execute")},updateTransaction:{description:"Atualiza uma transa\xE7\xE3o existente do usu\xE1rio.",parameters:i,execute:s(async l=>{let{transactionId:d,...p}=l,f={updatedAt:new Date};p.amount!==void 0&&(f.amount=String(p.amount)),p.description!==void 0&&(f.description=p.description),p.categoryId!==void 0&&(f.categoryId=p.categoryId),p.transactionDate!==void 0&&(f.transactionDate=new Date(p.transactionDate)),p.merchantName!==void 0&&(f.merchantName=p.merchantName);let[h]=await e.update(te).set(f).where(Ee(H(te.id,d),H(te.userId,t))).returning();if(!h)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,transaction:Yn(h)}},"execute")},deleteTransaction:{description:"Deleta uma transa\xE7\xE3o. Use com cuidado, esta a\xE7\xE3o \xE9 irrevers\xEDvel.",parameters:a,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.delete(te).where(Ee(H(te.id,d),H(te.userId,t))).returning({id:te.id});if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,message:"Transa\xE7\xE3o deletada com sucesso."}},"execute")},getSpendingSummary:{description:"Obt\xE9m resumo de gastos por categoria em um per\xEDodo.",parameters:u,execute:s(async l=>{let{startDate:d,endDate:p}=l,f=await e.select({amount:te.amount,categoryId:te.categoryId}).from(te).where(Ee(H(te.userId,t),rr(te.amount,"0"),ur(te.transactionDate,new Date(d)),rr(te.transactionDate,new Date(p)))),h=[...new Set(f.map(b=>b.categoryId).filter(Boolean))],y=h.length?await e.select({id:De.id,name:De.name,color:De.color}).from(De).where(_s(De.id,h)):[],g=new Map(y.map(b=>[b.id,b])),m=f.reduce((b,x)=>{let k=x.categoryId??"uncategorized",R=g.get(x.categoryId??"");return b[k]||(b[k]={categoryId:k,categoryName:R?.name??"Sem categoria",color:R?.color??"#6B7280",total:0,count:0}),b[k].total+=Math.abs(Number(x.amount)),b[k].count+=1,b},{}),_=Object.values(m).sort((b,x)=>x.total-b.total),w=_.reduce((b,x)=>b+x.total,0);return{period:{startDate:d,endDate:p},grandTotal:w,categories:_}},"execute")}}}s(AM,"createTransactionTools");function CM(t,e){return{...AM(t,e),...kM(t,e),...PM(t,e)}}s(CM,"createAllTools");function Bee(t){let e=[],n=[/\b\d{3}\.\d{3}\.\d{3}-\d{2}\b/,/\b\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}\b/,/\b\d{4}[- ]?\d{4}[- ]?\d{4}[- ]?\d{4}\b/].some(i=>i.test(t));n&&e.push("Sensitive data detected in response");let o=/[]/i.test(t)||t.includes("R$");return{isValid:e.length===0,language:o?"pt-BR":"en",contentType:"text",sensitiveDataDetected:n,complianceIssues:e}}s(Bee,"validateBrazilianPortugueseContent");var _l=new Ce,Vee=c.object({messages:c.array(c.object({role:c.enum(["user","assistant","system","tool"]),content:c.string(),sensitiveDataRedacted:c.boolean().optional().default(!1),timestamp:c.string().datetime().optional(),sessionId:c.string().uuid().optional(),parts:c.array(c.object({type:c.literal("text"),text:c.string()})).optional()})).min(1,"At least one message is required").transform(t=>t.filter(e=>e.role!=="tool").map(e=>({...e,parts:e.parts||[{type:"text",text:e.content}]}))),provider:xM.optional().default("google"),tier:c.enum(["default","fast"]).optional().default("default")});_l.post("/chat",pe,Be("json",Vee),async t=>{let e=Date.now(),{messages:r,provider:n,tier:o}=t.req.valid("json"),i=t.get("auth");if(!i?.user)return t.json({error:"Unauthorized"},401);let a=i.user.id,u=crypto.randomUUID(),l=r[r.length-1],d=l?.role==="user"?l.content:null;if(d&&typeof d=="string"){let p=EM(d);if(!p.isSafe)return await mf({userId:a,sessionId:u,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:d.slice(0,100),outputSummary:"Blocked: injection detected",latencyMs:Date.now()-e,outcome:"blocked",errorMessage:p.reason}),t.json({error:"Invalid input detected"},400)}try{let p=SM(n,o),f=CM(a,i.db);return RD({model:p,system:UD,messages:u0(r),tools:f,maxSteps:5,onFinish:s(async({usage:y,finishReason:g,toolCalls:m})=>{let _=r,w=_[_.length-1],b=w?.role==="assistant"?w.content:g,x=typeof b=="string"?Bee(b):{isValid:!0,language:"pt-BR",contentType:"text",sensitiveDataDetected:!1,complianceIssues:[]},k=x.sensitiveDataDetected?" [LGPD Warning: Sensitive data detected]":x.language==="pt-BR"?" [PT-BR]":" [EN]";await mf({userId:a,sessionId:u,provider:n,model:`${n}/${o}`,actionType:m?.length?"tool_call":"chat",toolName:m?.map(R=>R.toolName).join(", "),inputSummary:typeof d=="string"?d.slice(0,100):"Multi-modal/Tool input",outputSummary:g+k,tokensUsed:y.totalTokens,latencyMs:Date.now()-e,outcome:x.isValid?"success":"error",errorMessage:x.complianceIssues.length>0?`Compliance issues: ${x.complianceIssues.join("; ")}`:void 0})},"onFinish")}).toDataStreamResponse()}catch(p){return await mf({userId:a,sessionId:u,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:typeof d=="string"?d.slice(0,100):"",outputSummary:"Error",latencyMs:Date.now()-e,outcome:"error",errorMessage:p instanceof Error?p.message:"Unknown error"}),t.json({error:"AI service error"},500)}});_l.get("/providers",pe,t=>t.json({available:TM(),default:"google"}));var BM=require("node:crypto");var RM=require("node:crypto");var OM={BRL:{symbol:"R$",decimalSeparator:",",thousandsSeparator:".",maxAmount:99999999999e-2,minAmount:.01}},Ef=new Set(["001","033","104","237","341","260","077","021","025","036","037","039","041","047","062","063","064","065","066","069","070","074","075","078","079","083","084","085","089","102","105","107","108","109","110","111","112","114","117","118","119","120","121","122","124","125","126","127","128","129","130","131","132","133","134","136","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320"]),Hee={CNPJ:{format:"XX.XXX.XXX/XXXX-XX",regex:/^\d{14}$/},CPF:{format:"XXX.XXX.XXX-XX",regex:/^\d{11}$/},EMAIL:{format:"email@example.com",regex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},PHONE:{format:"+55 (XX) XXXXX-XXXX",regex:/^\+?\d{10,15}$/},RANDOM_KEY:{format:"XXXX-XXXX-XXXX-XXXX-XXXX",regex:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i}};var Gee={SUSPICIOUS_DESCRIPTIONS:["test","teste","debug","xxx","fake","fraud","hack","stolen","lavagem","dinheiro negro"],HIGH_VALUE_TRANSACTION:5e4,FREQUENT_SMALL_TRANSACTIONS:{count:20,amount:1e3,window:1440*60*1e3},RAPID_SUCCESSION:{count:5,window:300*1e3}},TUe={amount:c.number().min(OM.BRL.minAmount,"Amount must be at least R$ 0,01").max(OM.BRL.maxAmount,"Amount exceeds maximum allowed").refine(t=>Number.isFinite(t)&&Number(t.toFixed(2))===t,"Amount must have at most 2 decimal places"),bankAccount:c.object({account:c.string().regex(/^\d{1,12}$/,"Account must be 1-12 digits").refine(t=>!/^0+$/.test(t),"Account cannot be all zeros"),accountDigit:c.string().regex(/^\d$/,"Account digit must be a single digit"),agency:c.string().regex(/^\d{1,6}$/,"Agency must be 1-6 digits").refine(t=>!/^0+$/.test(t),"Agency cannot be all zeros"),bankCode:c.string().refine(t=>Ef.has(t),"Invalid Brazilian bank code")}),financialInstitution:c.object({code:c.string().refine(t=>Ef.has(t),"Invalid bank code"),name:c.string().min(2,"Institution name must be at least 2 characters").max(100,"Institution name must be less than 100 characters")}),pixKey:c.object({key:c.string().min(1,"PIX key cannot be empty"),type:c.enum(["cpf","cnpj","email","phone","random"])}).refine(t=>Hee[t.type.toUpperCase()].regex.test(t.key.replace(/\D/g,"")),"Invalid PIX key format for the specified type"),transaction:c.object({account_id:c.string().uuid("Conta banc\xE1ria inv\xE1lida"),amount:c.number(),category_id:c.string().uuid().optional(),description:c.string().min(3,"Description must be at least 3 characters").max(200,"Description must be less than 200 characters").refine(t=>!Gee.SUSPICIOUS_DESCRIPTIONS.some(e=>t.toLowerCase().includes(e)),"Description contains suspicious content"),is_manual_entry:c.boolean().default(!0),merchant_name:c.string().max(120).optional(),notes:c.string().max(500).optional(),payment_method:c.enum(["cash","debit_card","credit_card","pix","boleto","transfer"]).optional(),status:c.enum(["pending","posted","failed","cancelled"]).default("posted"),tags:c.array(c.string()).max(10).optional(),transaction_date:c.string().refine(t=>{let e=new Date(t);return!Number.isNaN(e.getTime())&&e>=new Date("2020-01-01")&&e<=new Date(Date.now()+1440*60*1e3)},"Invalid date. Must be a valid date between 2020-01-01 and tomorrow"),transaction_type:c.enum(["debit","credit","transfer","pix","boleto"])})};function $M(t){let e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let r=0,n;for(let o=1;o<=9;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(11-o);if(n=r*10%11,(n===10||n===11)&&(n=0),n!==Number.parseInt(e.substring(9,10),10))return!1;r=0;for(let o=1;o<=10;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(12-o);return n=r*10%11,(n===10||n===11)&&(n=0),n===Number.parseInt(e.substring(10,11),10)}s($M,"validateCPF");var NM=["CHECKING","SAVINGS","INVESTMENT","SALARY","DIGITAL_WALLET"],Zee=["pending","manual","success","error"],Jee=c.object({account_holder_name:c.string().optional(),account_mask:c.string().min(7,"M\xE1scara da conta \xE9 obrigat\xF3ria."),account_number:c.string().optional(),account_type:c.enum(NM),balance:c.number(),belvo_account_id:c.string().optional(),currency:c.string().default("BRL"),institution_id:c.string().min(1,"ID da institui\xE7\xE3o \xE9 obrigat\xF3rio."),institution_name:c.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio."),is_active:c.boolean().optional(),is_primary:c.boolean().optional(),user_id:c.string().min(1,"Usu\xE1rio \xE9 obrigat\xF3rio.")}),Kee=c.object({account_holder_name:c.string().optional(),account_mask:c.string().optional(),account_number:c.string().optional(),account_type:c.enum(NM).optional(),balance:c.number().optional(),belvo_account_id:c.string().optional(),currency:c.string().optional(),institution_id:c.string().optional(),institution_name:c.string().optional(),is_active:c.boolean().optional(),is_primary:c.boolean().optional(),sync_error_message:c.string().optional(),sync_status:c.enum(Zee).optional()}),Wee=new Set(["user_id","institution_name","institution_id","account_type","account_mask","account_holder_name","account_number","belvo_account_id","balance","currency","is_primary","is_active","sync_status","sync_error_message"]),DM="manual_",jM=s(t=>{if(!t)return!1;let e=t.trim();return Ef.has(e)?!0:/^[0-9a-f-]{8,}$/i.test(e)},"isValidInstitutionId"),MM=s(t=>!t||t.toUpperCase()==="BRL","isValidCurrency"),UM=s(t=>!t||t.startsWith(DM)?!0:/^[a-z0-9_-]{6,}$/i.test(t),"isValidBelvoId"),bl=s(t=>t?/^\*{4}\s\d{4}$/.test(t):!1,"validateAccountMask"),wl=s(t=>/^\*{4}\d{4}$/.test(t)?`**** ${t.slice(-4)}`:t,"normalizeAccountMask"),zM=s(t=>t.map(e=>({field:e.path.join(".")||"root",message:e.message})),"collectZodErrors"),D0=s(t=>{let e={};return Object.entries(t).forEach(([r,n])=>{if(Wee.has(r)){if(typeof n=="string"){let o=n.trim();if(o==="")return;switch(r){case"currency":e.currency=o.toUpperCase();break;case"account_number":e.account_number=o.replace(/\s+/g,"");break;case"account_mask":e.account_mask=wl(o);break;default:e[r]=o}return}if(typeof n=="number"){e[r]=Number(n);return}e[r]=n}}),e},"sanitizeBankAccountData"),LM=s(()=>`${DM}${(0,RM.randomUUID)()}`,"generateManualAccountId"),qM=s(t=>{let e=[],r=Jee.safeParse(t);if(!r.success)return e.push(...zM(r.error.issues)),{errors:e,valid:!1};let n=r.data;return bl(n.account_mask)||e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),jM(n.institution_id)||e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),MM(n.currency)||e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas no momento."}),UM(n.belvo_account_id)||e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForInsert"),FM=s(t=>{let e=[],r=Kee.safeParse(t);if(!r.success)return e.push(...zM(r.error.issues)),{errors:e,valid:!1};let n=r.data;return n.account_mask&&!bl(n.account_mask)&&e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),n.institution_id&&!jM(n.institution_id)&&e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),n.currency&&!MM(n.currency)&&e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas."}),n.belvo_account_id&&!UM(n.belvo_account_id)&&e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),n.balance!==void 0&&Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForUpdate");var Qee=c.object({institutionName:c.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio"),accountType:c.enum(["checking","savings","investment","cash"],{error:"Tipo de conta \xE9 obrigat\xF3rio"}),balance:c.number().default(0),currency:c.string().default("BRL"),isPrimary:c.boolean().default(!1),isActive:c.boolean().default(!0),accountMask:c.string().optional(),institutionId:c.string().optional()}),Xee=c.object({institutionName:c.string().optional(),accountType:c.enum(["checking","savings","investment","cash"]).optional(),balance:c.number().optional(),currency:c.string().optional(),isPrimary:c.boolean().optional(),isActive:c.boolean().optional(),accountMask:c.string().optional()}),Yee=c.object({balance:c.number()}),ete=c.object({days:c.coerce.number().int().positive().default(30)}),tte={checking:"CHECKING",savings:"SAVINGS",investment:"INVESTMENT",cash:"DIGITAL_WALLET"},j0=s(t=>tte[t.toLowerCase()]||t.toUpperCase(),"normalizeAccountType"),rte=s(()=>`**** ${Math.floor(1e3+Math.random()*9e3)}`,"generateAccountMask"),No=new Ce;No.get("/",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(se).where(H(se.userId,e.id)).orderBy(Rt(se.createdAt));return t.json({data:o||[],meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});No.get("/total-balance",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({balance:se.balance,currency:se.currency}).from(se).where(Ee(H(se.userId,e.id),H(se.isActive,!0))),i={};return o&&o.forEach(a=>{let u=a.currency||"BRL";i[u]=(i[u]||0)+Number(a.balance||0)}),t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get total balance",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"TOTAL_BALANCE_ERROR",error:"Failed to calculate total balance"},500)}});No.get("/:id",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(se).where(Ee(H(se.id,n),H(se.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(i){return L.error("Failed to get bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_ERROR",error:"Failed to retrieve bank account"},500)}});No.get("/:id/balance-history",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Be("query",ete),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{days:o}=t.req.valid("query"),i=t.get("requestId");try{if(!n||n==="all")return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let[a]=await r.select({balance:se.balance}).from(se).where(Ee(H(se.id,n),H(se.userId,e.id))).limit(1);if(!a)return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let u=Number(a.balance||0),l=[];for(let d=0;d<o;d++){let p=new Date;p.setDate(p.getDate()-d),l.push({date:p.toISOString(),balance:u})}return t.json({data:l.reverse(),meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get balance history",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_HISTORY_ERROR",error:"Failed to retrieve balance history"},500)}});No.post("/",pe,xe({windowMs:60*1e3,max:10,message:"Too many account creation attempts, please try again later"}),Be("json",Qee),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=j0(n.accountType),a=n.accountMask?wl(n.accountMask):rte();if(!bl(a))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);let u=n.institutionId||(0,BM.randomUUID)(),l=LM(),d="manual",p=D0({user_id:e.id,institution_name:n.institutionName,institution_id:u,account_type:i,account_mask:a,balance:n.balance,currency:n.currency.toUpperCase(),is_primary:n.isPrimary,is_active:n.isActive,belvo_account_id:l,sync_status:d}),f=qM(p);if(!f.valid){let g=f.errors.length>0?f.errors.map(m=>m.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:g},400)}let[h]=await r.select({id:se.id}).from(se).where(Ee(H(se.userId,e.id),H(se.institutionId,u),H(se.accountMask,a))).limit(1);if(h)return t.json({code:"CONFLICT",error:"J\xE1 existe uma conta com a mesma institui\xE7\xE3o e final"},409);let[y]=await r.insert(se).values({userId:e.id,institutionName:n.institutionName,institutionId:u,accountType:i,accountMask:a,balance:String(n.balance),currency:n.currency.toUpperCase(),isPrimary:n.isPrimary,isActive:n.isActive,belvoAccountId:l,syncStatus:d}).returning();return L.info("Bank account created",{accountId:y.id,institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({data:y,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create bank account",{error:i instanceof Error?i.message:"Unknown error",institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_CREATE_ERROR",error:"Failed to create bank account"},500)}});No.put("/:id",pe,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Be("json",Xee),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:se.id}).from(se).where(Ee(H(se.id,n),H(se.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404);let u={};if(o.institutionName!==void 0&&(u.institutionName=o.institutionName),o.accountType!==void 0&&(u.accountType=j0(o.accountType)),o.balance!==void 0&&(u.balance=String(o.balance)),o.currency!==void 0&&(u.currency=o.currency.toUpperCase()),o.isPrimary!==void 0&&(u.isPrimary=o.isPrimary),o.isActive!==void 0&&(u.isActive=o.isActive),o.accountMask!==void 0){let f=wl(o.accountMask);if(!bl(f))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);u.accountMask=f}let l=D0({institution_name:o.institutionName,account_type:o.accountType?j0(o.accountType):void 0,balance:o.balance,currency:o.currency?.toUpperCase(),is_primary:o.isPrimary,is_active:o.isActive,account_mask:o.accountMask?wl(o.accountMask):void 0}),d=FM(l);if(!d.valid){let f=d.errors.length>0?d.errors.map(h=>h.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:f},400)}let[p]=await r.update(se).set(u).where(Ee(H(se.id,n),H(se.userId,e.id))).returning();return t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to update bank account",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BANK_ACCOUNT_UPDATE_ERROR",error:"Failed to update bank account"},500)}});No.patch("/:id/balance",pe,xe({windowMs:60*1e3,max:30,message:"Too many balance update attempts, please try again later"}),Be("json",Yee),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{balance:o}=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.update(se).set({balance:String(o)}).where(Ee(H(se.id,n),H(se.userId,e.id))).returning();return a?t.json({data:a,meta:{requestId:i,updatedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(a){return L.error("Failed to update balance",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_UPDATE_ERROR",error:"Failed to update balance"},500)}});No.delete("/:id",pe,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return await r.delete(se).where(Ee(H(se.id,n),H(se.userId,e.id))),L.info("Bank account deleted",{accountId:n,requestId:o,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})}catch(i){return L.error("Failed to delete bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_DELETE_ERROR",error:"Failed to delete bank account"},500)}});var M0=No;var If=new Ce,nte=c.object({accountType:c.string(),balance:c.number(),bankName:c.string(),currency:c.string(),id:c.string(),lastSync:c.string().datetime().optional()}),GUe=c.object({accounts:c.array(nte),currency:c.string(),total:c.number()});If.get("/accounts",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{L.info("Bank accounts accessed",{requestId:r,userId:e.id});let n={accounts:[],currency:"BRL",total:0};return t.json({data:n,meta:{note:"Placeholder implementation - Belvo integration pending",requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});If.post("/accounts/link",pe,xe({windowMs:60*1e3,max:5,message:"Too many link attempts, please try again later"}),Be("json",c.object({bankCode:c.string(),credentials:c.record(c.string(),c.any())})),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Bank account link attempt",{bankCode:r.bankCode,requestId:n,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{bankCode:r.bankCode,note:"Belvo integration is pending implementation"},error:"Bank account linking not yet implemented"},501)}catch(o){return L.error("Failed to link bank account",{bankCode:r.bankCode,error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_LINK_ERROR",error:"Failed to link bank account"},500)}});If.post("/accounts/sync",pe,xe({windowMs:60*1e3,max:10,message:"Too many sync requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{return L.info("Bank accounts sync attempt",{requestId:r,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{note:"Belvo integration is pending implementation"},error:"Bank account synchronization not yet implemented"},501)}catch(n){return L.error("Failed to sync bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_SYNC_ERROR",error:"Failed to sync bank accounts"},500)}});var U0=If;var qa=mo(require("crypto"),1),wE=require("events");var Pf=mo(require("crypto"),1);var bi=class{static{s(this,"CryptoProvider")}computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}},Aa=class extends Error{static{s(this,"CryptoProviderOnlySupportsAsyncError")}};var kf=class extends bi{static{s(this,"NodeCryptoProvider")}computeHMACSignature(e,r){return Pf.createHmac("sha256",r).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,r){return await this.computeHMACSignature(e,r)}async computeSHA256Async(e){return new Uint8Array(await Pf.createHash("sha256").update(e).digest())}};var L0=mo(require("http"),1),q0=mo(require("https"),1);var Tr=class t{static{s(this,"HttpClient")}getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,o,i,a,u,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(t.TIMEOUT_ERROR_CODE);return e.code=t.TIMEOUT_ERROR_CODE,e}};Tr.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Tr.TIMEOUT_ERROR_CODE="ETIMEDOUT";var wi=class{static{s(this,"HttpClientResponse")}constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var VM=L0.default||L0,HM=q0.default||q0,ote=new VM.Agent({keepAlive:!0}),ite=new HM.Agent({keepAlive:!0}),xl=class extends Tr{static{s(this,"NodeHttpClient")}constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,r,n,o,i,a,u,l){let d=u==="http",p=this._agent;return p||(p=d?ote:ite),new Promise((h,y)=>{let g=(d?VM:HM).request({host:e,port:r,path:n,method:o,agent:p,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});g.setTimeout(l,()=>{g.destroy(Tr.makeTimeoutError())}),g.on("response",m=>{h(new z0(m))}),g.on("error",m=>{y(m)}),g.once("socket",m=>{m.connecting?m.once(d?"connect":"secureConnect",()=>{g.write(a),g.end()}):(g.write(a),g.end())})})}},z0=class extends wi{static{s(this,"NodeHttpClientResponse")}constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,r)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",o=>{n+=o}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(o){r(o)}})})}};var oz=mo(nz(),1);var yE=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function iz(t){return t&&typeof t=="object"&&yE.some(e=>Object.prototype.hasOwnProperty.call(t,e))}s(iz,"isOptionsHash");function Ti(t,e){return oz.stringify(t,{serializeDate:s(r=>Math.floor(r.getTime()/1e3).toString(),"serializeDate"),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}s(Ti,"queryStringifyRequestData");var Vf=(()=>{let t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(o,i)=>{let a=n[i];return One(a)?encodeURIComponent(a):""})}})();function One(t){return["number","string","boolean"].includes(typeof t)}s(One,"isValidEncodeUriComponentType");function sz(t){let e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}s(sz,"extractUrlParams");function ja(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!iz(t[0]))return t.shift();let e=Object.keys(t[0]),r=e.filter(n=>yE.includes(n));return r.length>0&&r.length!==e.length&&Dl(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}s(ja,"getDataFromArgs");function Hf(t){let e={host:null,headers:{},settings:{},streaming:!1};if(t.length>0){let r=t[t.length-1];if(typeof r=="string")e.authenticator=Bf(t.pop());else if(iz(r)){let n=Object.assign({},t.pop()),o=Object.keys(n).filter(i=>!yE.includes(i));if(o.length&&Dl(`Invalid options found (${o.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Bf(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders),n.streaming&&(e.streaming=!0)}}return e}s(Hf,"getOptionsFromArgs");function az(t){let e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}s(az,"protoExtend");function Gf(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}s(Gf,"removeNullish");function cz(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[$ne(r)]=t[r],e),{}):t}s(cz,"normalizeHeaders");function $ne(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}s($ne,"normalizeHeader");function Nl(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}s(Nl,"callbackifyPromiseWithTimeout");function uz(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}s(uz,"pascalToCamelCase");function Dl(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}s(Dl,"emitWarning");function Rne(t){let e=typeof t;return(e==="function"||e==="object")&&!!t}s(Rne,"isObject");function lz(t){let e={},r=s((n,o)=>{Object.entries(n).forEach(([i,a])=>{let u=o?`${o}[${i}]`:i;if(Rne(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,u);e[u]=a}else e[u]=String(a)})},"step");return r(t,null),e}s(lz,"flattenAndStringify");function Zf(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}s(Zf,"validateInteger");function dz(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}s(dz,"determineProcessUserAgentProperties");function Bf(t){let e=s(r=>(r.headers.Authorization="Bearer "+t,Promise.resolve()),"authenticator");return e._apiKey=t,e}s(Bf,"createApiKeyAuthenticator");function pz(t){let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e),n=0;return t.forEach(o=>{r.set(o,n),n+=o.length}),r}s(pz,"concat");function Nne(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}s(Nne,"dateTimeReplacer");function mz(t){return JSON.stringify(t,Nne)}s(mz,"jsonStringifyRequestData");function Ma(t){return t&&t.startsWith("/v2")?"v2":"v1"}s(Ma,"getAPIMode");function Jf(t){return Array.isArray(t)?t.join(", "):String(t)}s(Jf,"parseHttpHeaderAsString");function fz(t){let e=Array.isArray(t)?t[0]:t;return Number(e)}s(fz,"parseHttpHeaderAsNumber");function hz(t){return Object.entries(t).map(([e,r])=>[e,Jf(r)])}s(hz,"parseHeadersForFetch");var Kf=class t extends Tr{static{s(this,"FetchHttpClient")}constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=t.makeFetchWithAbortTimeout(e):this._fetchFn=t.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,o)=>{let i,a=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Tr.makeTimeoutError())},o)}),u=e(r,n);return Promise.race([u,a]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(r,n,o)=>{let i=new AbortController,a=setTimeout(()=>{a=null,i.abort(Tr.makeTimeoutError())},o);try{return await e(r,Object.assign(Object.assign({},n),{signal:i.signal}))}catch(u){throw u.name==="AbortError"?Tr.makeTimeoutError():u}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,o,i,a,u,l){let d=u==="http",p=new URL(n,`${d?"http":"https"}://${e}`);p.port=r;let f=o=="POST"||o=="PUT"||o=="PATCH",h=a||(f?"":void 0),y=await this._fetchFn(p.toString(),{method:o,headers:hz(i),body:h},l);return new vE(y)}},vE=class t extends wi{static{s(this,"FetchHttpClientResponse")}constructor(e){super(e.status,t._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let r={};for(let n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}};var Wf=class extends bi{static{s(this,"SubtleCryptoProvider")}constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Aa("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){let n=new TextEncoder,o=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",o,n.encode(e)),a=new Uint8Array(i),u=new Array(a.length);for(let l=0;l<a.length;l++)u[l]=_E[a[l]];return u.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}},_E=new Array(256);for(let t=0;t<_E.length;t++)_E[t]=t.toString(16).padStart(2,"0");var Qf=class{static{s(this,"PlatformFunctions")}constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;let n=e.length,o=0;for(let i=0;i<n;++i)o|=e.charCodeAt(i)^r.charCodeAt(i);return o===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Kf(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new Wf(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var nh={};en(nh,{StripeAPIError:()=>Ua,StripeAuthenticationError:()=>za,StripeCardError:()=>Xf,StripeConnectionError:()=>Ul,StripeError:()=>Yt,StripeIdempotencyError:()=>Yf,StripeInvalidGrantError:()=>eh,StripeInvalidRequestError:()=>jl,StripePermissionError:()=>Ml,StripeRateLimitError:()=>La,StripeSignatureVerificationError:()=>Dn,StripeUnknownError:()=>th,TemporarySessionExpiredError:()=>rh,generateV1Error:()=>zl,generateV2Error:()=>bE});var zl=s(t=>{switch(t.type){case"card_error":return new Xf(t);case"invalid_request_error":return new jl(t);case"api_error":return new Ua(t);case"authentication_error":return new za(t);case"rate_limit_error":return new La(t);case"idempotency_error":return new Yf(t);case"invalid_grant":return new eh(t);default:return new th(t)}},"generateV1Error"),bE=s(t=>{switch(t.type){case"temporary_session_expired":return new rh(t)}switch(t.code){case"invalid_fields":return new jl(t)}return zl(t)},"generateV2Error"),Yt=class extends Error{static{s(this,"StripeError")}constructor(e={},r=null){var n;super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=(n=e.message)!==null&&n!==void 0?n:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};Yt.generate=zl;var Xf=class extends Yt{static{s(this,"StripeCardError")}constructor(e={}){super(e,"StripeCardError")}},jl=class extends Yt{static{s(this,"StripeInvalidRequestError")}constructor(e={}){super(e,"StripeInvalidRequestError")}},Ua=class extends Yt{static{s(this,"StripeAPIError")}constructor(e={}){super(e,"StripeAPIError")}},za=class extends Yt{static{s(this,"StripeAuthenticationError")}constructor(e={}){super(e,"StripeAuthenticationError")}},Ml=class extends Yt{static{s(this,"StripePermissionError")}constructor(e={}){super(e,"StripePermissionError")}},La=class extends Yt{static{s(this,"StripeRateLimitError")}constructor(e={}){super(e,"StripeRateLimitError")}},Ul=class extends Yt{static{s(this,"StripeConnectionError")}constructor(e={}){super(e,"StripeConnectionError")}},Dn=class extends Yt{static{s(this,"StripeSignatureVerificationError")}constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}},Yf=class extends Yt{static{s(this,"StripeIdempotencyError")}constructor(e={}){super(e,"StripeIdempotencyError")}},eh=class extends Yt{static{s(this,"StripeInvalidGrantError")}constructor(e={}){super(e,"StripeInvalidGrantError")}},th=class extends Yt{static{s(this,"StripeUnknownError")}constructor(e={}){super(e,"StripeUnknownError")}},rh=class extends Yt{static{s(this,"TemporarySessionExpiredError")}constructor(e={}){super(e,"TemporarySessionExpiredError")}};var gz=require("child_process");var xE=class extends Yt{static{s(this,"StreamProcessingError")}},oh=class extends Qf{static{s(this,"NodePlatformFunctions")}constructor(){super(),this._exec=gz.exec,this._UNAME_CACHE=null}uuid4(){return qa.randomUUID?qa.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,r)=>{try{this._exec("uname -a",(n,o)=>{if(n)return e(null);e(o)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,r){if(!e||!r)throw new Error("secureCompare must receive two arguments");if(e.length!==r.length)return!1;if(qa.timingSafeEqual){let n=new TextEncoder,o=n.encode(e),i=n.encode(r);return qa.timingSafeEqual(o,i)}return super.secureCompare(e,r)}createEmitter(){return new wE.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof wE.EventEmitter))return Promise.resolve(e);let r=[];return new Promise((n,o)=>{e.file.data.on("data",i=>{r.push(i)}).once("end",()=>{let i=Object.assign({},e);i.file.data=pz(r),n(i)}).on("error",i=>{o(new xE({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(e){return new xl(e)}createDefaultHttpClient(){return new xl}createNodeCryptoProvider(){return new kf}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var Dne=60,ih=class t{static{s(this,"RequestSender")}constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_normalizeStripeContext(e,r){return e?e.toString()||null:r?.toString()||null}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){let o=Date.now(),i=o-e.request_start_time;return Gf({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:i,request_start_time:e.request_start_time,request_end_time:o})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return o=>{let i=o.getHeaders(),a=s(()=>{let l=this._makeResponseEvent(e,o.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,r)},"streamCompleteCallback"),u=o.toStream(a);return this._addHeadersDirectlyToObject(u,i),n(null,u)}}_jsonResponseHandler(e,r,n,o){return i=>{let a=i.getHeaders(),u=this._getRequestId(a),l=i.getStatusCode(),d=this._makeResponseEvent(e,l,a);this._stripe._emitter.emit("response",d),i.toJSON().then(p=>{if(p.error){let f;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=a,p.error.statusCode=l,p.error.requestId=u,l===401?f=new za(p.error):l===403?f=new Ml(p.error):l===429?f=new La(p.error):r==="v2"?f=bE(p.error):f=zl(p.error),f}return p},p=>{throw new Ua({message:"Invalid JSON received from the Stripe API",exception:p,requestId:a["request-id"]})}).then(p=>{this._recordRequestMetrics(u,d.elapsed,n);let f=i.getRawResponse();this._addHeadersDirectlyToObject(f,a),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:f}),o(null,p)},p=>o(p,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,o){return o&&r===0&&Tr.CONNECTION_CLOSED_ERROR_CODES.includes(o.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){let n=this._stripe.getInitialNetworkRetryDelay(),o=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(n*Math.pow(2,e-1),o);return i*=.5*(1+Math.random()),i=Math.max(n,i),Number.isInteger(r)&&r<=Dne&&(i=Math.max(i,r)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){let o=this._getMaxNetworkRetries(r),i=s(()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`,"genKey");if(n==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(n==="v1"&&e==="POST"&&o>0)return i();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:o,method:i,userSuppliedHeaders:a,userSuppliedSettings:u,stripeAccount:l,stripeContext:d,apiMode:p}){let f={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":o,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,u,p)},h=i=="POST"||i=="PUT"||i=="PATCH";return(h||r)&&(h||Dl(`${i} method had non-zero contentLength but no payload is expected for this verb`),f["Content-Length"]=r),Object.assign(Gf(f),cz(a))}_getUserAgentString(e){let r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Dl("Request metrics buffer is full, dropping telemetry message.");else{let o={request_id:e,request_duration_ms:r};n&&n.length>0&&(o.usage=n),this._stripe._prevRequestMetrics.push(o)}}_rawRequest(e,r,n,o,i){return new Promise((u,l)=>{let d;try{let g=e.toUpperCase();if(g!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let m=[].slice.call([n,o]),_=ja(m),w=g==="POST"?Object.assign({},_):null,b=Hf(m),x=b.headers,k=b.authenticator;d={requestMethod:g,requestPath:r,bodyData:w,queryData:{},authenticator:k,headers:x,host:b.host,streaming:!!b.streaming,settings:{},usage:i||["raw_request"]}}catch(g){l(g);return}function p(g,m){g?l(g):u(m)}s(p,"requestCallback");let{headers:f,settings:h}=d,y=d.authenticator;this._request(d.requestMethod,d.host,r,d.bodyData,y,{headers:f,settings:h,streaming:d.streaming},d.usage,p)})}_request(e,r,n,o,i,a,u=[],l,d=null){var p;let f;i=(p=i??this._stripe._authenticator)!==null&&p!==void 0?p:null;let h=Ma(n),y=s((_,w,b,x,k)=>setTimeout(_,this._getSleepTimeInMS(x,k),w,b,x+1),"retryRequest"),g=s((_,w,b)=>{let x=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),k={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},w),body:f,protocol:this._stripe.getApiField("protocol")};i(k).then(()=>{let R=this._stripe.getApiField("httpClient").makeRequest(k.host,k.port,k.path,k.method,k.headers,k.body,k.protocol,x),O=Date.now(),C=Gf({api_version:_,account:Jf(w["Stripe-Account"]),idempotency_key:Jf(w["Idempotency-Key"]),method:e,path:n,request_start_time:O}),$=b||0,P=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",C),R.then(N=>t._shouldRetry(N,$,P)?y(g,_,w,$,fz(N.getHeaders()["retry-after"])):a.streaming&&N.getStatusCode()<400?this._streamingResponseHandler(C,u,l)(N):this._jsonResponseHandler(C,h,u,l)(N)).catch(N=>{if(t._shouldRetry(null,$,P,N))return y(g,_,w,$,null);{let D=N.code&&N.code===Tr.TIMEOUT_ERROR_CODE;return l(new Ul({message:D?`Request aborted due to timeout being reached (${x}ms)`:t._generateConnectionErrorMessage($),detail:N}))}})}).catch(R=>{throw new Yt({message:"Unable to authenticate the request",exception:R})})},"makeRequest"),m=s((_,w)=>{if(_)return l(_);f=w,this._stripe.getClientUserAgent(b=>{var x,k,R;let O=this._stripe.getApiField("version"),C=this._makeHeaders({contentType:h=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(f).length,apiVersion:O,clientUserAgent:b,method:e,userSuppliedHeaders:(x=a.headers)!==null&&x!==void 0?x:null,userSuppliedSettings:(k=a.settings)!==null&&k!==void 0?k:{},stripeAccount:(R=a.stripeAccount)!==null&&R!==void 0?R:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(a.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:h});g(O,C,0)})},"prepareAndMakeRequest");if(d)d(e,o,a.headers,m);else{let _;h=="v2"?_=o?mz(o):"":_=Ti(o||{},h),m(null,_)}}};var sh=class{static{s(this,"V1Iterator")}constructor(e,r,n,o){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=o}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=vz(this.requestArgs);if(this.index<e.data.length){let n=r?e.data.length-1-this.index:this.index,o=e.data[n];return this.index+=1,{value:o,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}},TE=class extends sh{static{s(this,"V1ListIterator")}getNextPage(e){let r=vz(this.requestArgs),n=zne(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}},EE=class extends sh{static{s(this,"V1SearchIterator")}getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},IE=class{static{s(this,"V2ListIterator")}constructor(e,r,n,o){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=o}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}},yz=s((t,e,r,n)=>{let o=Ma(r.fullPath||r.path);return o!=="v2"&&r.methodType==="search"?SE(new EE(n,e,r,t)):o!=="v2"&&r.methodType==="list"?SE(new TE(n,e,r,t)):o==="v2"&&r.methodType==="list"?SE(new IE(n,e,r,t)):null},"makeAutoPaginationMethods"),SE=s(t=>{let e=Lne((...o)=>t.next(...o)),r=qne(e),n={autoPagingEach:e,autoPagingToArray:r,next:s(()=>t.next(),"next"),return:s(()=>({}),"return"),[jne()]:()=>n};return n},"makeAutoPaginationMethodsFromIterator");function jne(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}s(jne,"getAsyncIteratorSymbol");function Mne(t){if(t.length<2)return null;let e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}s(Mne,"getDoneCallback");function Une(t){if(t.length===0)return;let e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return s(function(n,o){let i=e(n);o(i)},"_onItem")}s(Une,"getItemCallback");function zne(t,e){let r=e?0:t.data.length-1,n=t.data[r],o=n&&n.id;if(!o)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return o}s(zne,"getLastId");function Lne(t){return s(function(){let r=[].slice.call(arguments),n=Une(r),o=Mne(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let i=Fne(t,n);return Nl(i,o)},"autoPagingEach")}s(Lne,"makeAutoPagingEach");function qne(t){return s(function(r,n){let o=r&&r.limit;if(!o)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(o>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((a,u)=>{let l=[];t(d=>{if(l.push(d),l.length>=o)return!1}).then(()=>{a(l)}).catch(u)});return Nl(i,n)},"autoPagingToArray")}s(qne,"makeAutoPagingToArray");function Fne(t,e){return new Promise((r,n)=>{function o(i){if(i.done){r();return}let a=i.value;return new Promise(u=>{e(a,u)}).then(u=>u===!1?o({done:!0,value:void 0}):t().then(o))}s(o,"handleIteration"),t().then(o).catch(n)})}s(Fne,"wrapAsyncIteratorWithCallback");function vz(t){let e=[].slice.call(t);return!!ja(e).ending_before}s(vz,"isReverseIteration");function _z(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){let r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=sz(t.fullPath||this.createResourcePathWithSymbols(t.path||""));let n=Nl(this._makeRequest(e,t,{}),r);return Object.assign(n,yz(this,e,t,n)),n}}s(_z,"stripeMethod");T.extend=az;T.method=_z;T.MAX_BUFFERED_REQUEST_METRICS=100;function T(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Vf(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Vf(this.path),this.initialize(...arguments)}s(T,"StripeResource");T.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){let r=[this.basePath(e),this.path(e)];if(typeof t=="function"){let n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;let o=(e.method||"GET").toUpperCase(),i=e.usage||[],a=e.urlParams||[],u=e.encode||(C=>C),l=!!e.fullPath,d=Vf(l?e.fullPath:e.path||""),p=l?e.fullPath:this.createResourcePathWithSymbols(e.path),f=[].slice.call(t),h=a.reduce((C,$)=>{let P=f.shift();if(typeof P!="string")throw new Error(`Stripe: Argument "${$}" must be a string, but got: ${P} (on API request to \`${o} ${p}\`)`);return C[$]=P,C},{}),y=ja(f),g=u(Object.assign({},y,r)),m=Hf(f),_=m.host||e.host,w=!!e.streaming||!!m.streaming;if(f.filter(C=>C!=null).length)throw new Error(`Stripe: Unknown arguments (${f}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${p}\`)`);let b=l?d(h):this.createFullPath(d,h),x=Object.assign(m.headers,e.headers);e.validator&&e.validator(g,{headers:x});let k=e.method==="GET"||e.method==="DELETE";return{requestMethod:o,requestPath:b,bodyData:k?null:g,queryData:k?g:{},authenticator:(n=m.authenticator)!==null&&n!==void 0?n:null,headers:x,host:_??null,streaming:w,settings:m.settings,usage:i}},_makeRequest(t,e,r){return new Promise((n,o)=>{var i;let a;try{a=this._getRequestOpts(t,e,r)}catch(h){o(h);return}function u(h,y){h?o(h):n(e.transformResponseData?e.transformResponseData(y):y)}s(u,"requestCallback");let l=Object.keys(a.queryData).length===0,d=[a.requestPath,l?"":"?",Ti(a.queryData,Ma(a.requestPath))].join(""),{headers:p,settings:f}=a;this._stripe._requestSender._request(a.requestMethod,a.host,d,a.bodyData,a.authenticator,{headers:p,settings:f,streaming:a.streaming},a.usage,u,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};var Ll=class t{static{s(this,"StripeContext")}constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new t([...this._segments,e])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new t(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return e?new t(e.split("/")):new t([])}};function bz(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,f,h,y,g,m){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,f,h,y||e.DEFAULT_TOLERANCE,g,m)}catch(w){throw w instanceof Aa&&(w.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),w}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,f,h,y,g,m){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,f,h,y||e.DEFAULT_TOLERANCE,g,m),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:s(function(p){let f=d(p),h=f.signature||f.cryptoProvider.computeHMACSignature(f.payloadString,f.secret);return f.generateHeaderString(h)},"generateTestHeaderString"),generateTestHeaderStringAsync:s(async function(p){let f=d(p),h=f.signature||await f.cryptoProvider.computeHMACSignatureAsync(f.payloadString,f.secret);return f.generateHeaderString(h)},"generateTestHeaderStringAsync")},r={EXPECTED_SCHEME:"v1",verifyHeader(p,f,h,y,g,m){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:x}=o(p,f,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=g.computeHMACSignature(n(w,b),h);return i(w,_,b,R,y,x,k,m),!0},async verifyHeaderAsync(p,f,h,y,g,m){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:x}=o(p,f,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=await g.computeHMACSignatureAsync(n(w,b),h);return i(w,_,b,R,y,x,k,m)}};function n(p,f){return`${f.timestamp}.${p}`}s(n,"makeHMACContent");function o(p,f,h){if(!p)throw new Dn(f,p,{message:"No webhook payload was provided."});let y=typeof p!="string"&&!(p instanceof Uint8Array),g=new TextDecoder("utf8"),m=p instanceof Uint8Array?g.decode(p):p;if(Array.isArray(f))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(f==null||f=="")throw new Dn(f,p,{message:"No stripe-signature header value was provided."});let _=f instanceof Uint8Array?g.decode(f):f,w=a(_,h);if(!w||w.timestamp===-1)throw new Dn(_,m,{message:"Unable to extract timestamp and signatures from header"});if(!w.signatures.length)throw new Dn(_,m,{message:"No signatures found with expected scheme"});return{decodedPayload:m,decodedHeader:_,details:w,suspectPayloadType:y}}s(o,"parseEventDetails");function i(p,f,h,y,g,m,_,w){let b=!!h.signatures.filter(t.secureCompare.bind(t,y)).length,x=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,k=_?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!b)throw m?new Dn(f,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+x+`
`+k}):new Dn(f,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+x+`
`+k});let R=Math.floor((typeof w=="number"?w:Date.now())/1e3)-h.timestamp;if(g>0&&R>g)throw new Dn(f,p,{message:"Timestamp outside the tolerance zone"});return!0}s(i,"validateComputedSignature");function a(p,f){return typeof p!="string"?null:p.split(",").reduce((h,y)=>{let g=y.split("=");return g[0]==="t"&&(h.timestamp=parseInt(g[1],10)),g[0]===f&&h.signatures.push(g[1]),h},{timestamp:-1,signatures:[]})}s(a,"parseHeader");let u=null;function l(){return u||(u=t.createDefaultCryptoProvider()),u}s(l,"getCryptoProvider");function d(p){if(!p)throw new Yt({message:"Options are required"});let f=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),h=p.scheme||r.EXPECTED_SCHEME,y=p.cryptoProvider||l(),g=`${f}.${p.payload}`,m=s(_=>`t=${f},${h}=${_}`,"generateHeaderString");return Object.assign(Object.assign({},p),{timestamp:f,scheme:h,cryptoProvider:y,payloadString:g,generateHeaderString:m})}return s(d,"prepareOptions"),e.signature=r,e}s(bz,"createWebhooks");var kE="2025-11-17.clover";var Qa={};en(Qa,{Account:()=>LE,AccountLinks:()=>iq,AccountSessions:()=>sq,Accounts:()=>LE,ApplePayDomains:()=>aq,ApplicationFees:()=>cq,Apps:()=>foe,Balance:()=>uq,BalanceSettings:()=>dq,BalanceTransactions:()=>mq,Billing:()=>hoe,BillingPortal:()=>goe,Charges:()=>fq,Checkout:()=>yoe,Climate:()=>voe,ConfirmationTokens:()=>hq,CountrySpecs:()=>yq,Coupons:()=>vq,CreditNotes:()=>_q,CustomerSessions:()=>bq,Customers:()=>wq,Disputes:()=>xq,Entitlements:()=>_oe,EphemeralKeys:()=>Tq,Events:()=>Iq,ExchangeRates:()=>Pq,FileLinks:()=>Aq,Files:()=>Oq,FinancialConnections:()=>boe,Forwarding:()=>woe,Identity:()=>xoe,InvoiceItems:()=>$q,InvoicePayments:()=>Nq,InvoiceRenderingTemplates:()=>Dq,Invoices:()=>jq,Issuing:()=>Soe,Mandates:()=>Mq,OAuth:()=>zq,PaymentAttemptRecords:()=>qq,PaymentIntents:()=>Fq,PaymentLinks:()=>Bq,PaymentMethodConfigurations:()=>Vq,PaymentMethodDomains:()=>Hq,PaymentMethods:()=>Gq,PaymentRecords:()=>Zq,Payouts:()=>Jq,Plans:()=>Kq,Prices:()=>Wq,Products:()=>Qq,PromotionCodes:()=>Xq,Quotes:()=>Yq,Radar:()=>Toe,Refunds:()=>e4,Reporting:()=>Eoe,Reviews:()=>t4,SetupAttempts:()=>r4,SetupIntents:()=>n4,ShippingRates:()=>o4,Sigma:()=>Ioe,Sources:()=>i4,SubscriptionItems:()=>s4,SubscriptionSchedules:()=>a4,Subscriptions:()=>c4,Tax:()=>koe,TaxCodes:()=>l4,TaxIds:()=>d4,TaxRates:()=>p4,Terminal:()=>Poe,TestHelpers:()=>Aoe,Tokens:()=>f4,Topups:()=>h4,Transfers:()=>g4,Treasury:()=>Coe,V2:()=>Ooe,WebhookEndpoints:()=>y4});function Bne(t,e){for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=r[0].toLowerCase()+r.substring(1),o=new e[r](t);this[n]=o}}s(Bne,"ResourceNamespace");function Ft(t,e){return function(r){return new Bne(r,e)}}s(Ft,"resourceNamespace");var ts=T.method,wz=T.extend({retrieve:ts({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ts({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ts({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ts({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var xz=T.method,Sz=T.extend({retrieve:xz({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:xz({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var Fa=T.method,Tz=T.extend({create:Fa({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:Fa({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:Fa({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})});var Vne=T.method,Ez=T.extend({find:Vne({method:"GET",fullPath:"/v1/tax/associations/find"})});var ql=T.method,Iz=T.extend({retrieve:ql({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ql({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ql({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ql({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ql({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var rs=T.method,kz=T.extend({create:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:rs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var PE=T.method,Pz=T.extend({create:PE({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:PE({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:PE({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var ah=T.method,Az=T.extend({create:ah({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:ah({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:ah({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:ah({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var ch=T.method,Cz=T.extend({create:ch({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:ch({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:ch({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:ch({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var Fl=T.method,Oz=T.extend({deliverCard:Fl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Fl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Fl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Fl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:Fl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})});var uh=T.method,$z=T.extend({create:uh({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:uh({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:uh({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:uh({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var Bl=T.method,Rz=T.extend({create:Bl({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Bl({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Bl({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Bl({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Bl({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var Hne=T.method,Nz=T.extend({create:Hne({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var Gne=T.method,Dz=T.extend({create:Gne({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var Zne=T.method,jz=T.extend({retrieve:Zne({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})});var Mz=T.method,Uz=T.extend({retrieve:Mz({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Mz({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})});var Ba=T.method,zz=T.extend({create:Ba({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:Ba({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:Ba({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})});var AE=T.method,Lz=T.extend({create:AE({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:AE({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:AE({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var Jne=T.method,qz=T.extend({fundCashBalance:Jne({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var CE=T.method,Fz=T.extend({create:CE({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:CE({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:CE({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var Vl=T.method,Bz=T.extend({create:Vl({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Vl({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Vl({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Vl({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Vl({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var Vz=T.method,Hz=T.extend({retrieve:Vz({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Vz({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var Ei=T.method,Gz=T.extend({create:Ei({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Ei({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Ei({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Ei({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Ei({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Ei({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Ei({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Ei({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})});var OE=T.method,Zz=T.extend({retrieve(...t){return OE({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:s(r=>this.addFetchRelatedObjectIfNeeded(r),"transformResponseData")}).apply(this,t)},list(...t){return OE({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:s(r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))}),"transformResponseData")}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:s(()=>OE({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeContext:t.context}]),"fetchRelatedObject")})}});var lh=T.method,Jz=T.extend({create:lh({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:lh({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:lh({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:lh({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var ns=T.method,Kz=T.extend({create:ns({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ns({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ns({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ns({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ns({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ns({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ns({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var $E=T.method,Wz=T.extend({fail:$E({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:$E({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:$E({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var dh=T.method,Qz=T.extend({create:dh({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:dh({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:dh({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:dh({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var Hl=T.method,Xz=T.extend({create:Hl({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:Hl({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:Hl({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:Hl({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:Hl({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var Kne=T.method,Yz=T.extend({create:Kne({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var Wne=T.method,eL=T.extend({create:Wne({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})});var Qne=T.method,tL=T.extend({create:Qne({method:"POST",fullPath:"/v2/billing/meter_event_session"})});var Xne=T.method,rL=T.extend({create:Xne({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})});var Yne=T.method,nL=T.extend({create:Yne({method:"POST",fullPath:"/v1/billing/meter_events"})});var eoe=T.method,oL=T.extend({create:eoe({method:"POST",fullPath:"/v2/billing/meter_events"})});var os=T.method,iL=T.extend({create:os({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:os({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:os({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:os({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:os({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:os({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:os({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var toe=T.method,sL=T.extend({create:toe({method:"POST",fullPath:"/v1/terminal/onboarding_links"})});var Gl=T.method,aL=T.extend({create:Gl({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Gl({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Gl({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Gl({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Gl({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var ph=T.method,cL=T.extend({update:ph({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:ph({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ph({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ph({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var mh=T.method,uL=T.extend({create:mh({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:mh({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:mh({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:mh({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var fh=T.method,lL=T.extend({update:fh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:fh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:fh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:fh({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var hh=T.method,dL=T.extend({create:hh({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:hh({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:hh({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:hh({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var gh=T.method,pL=T.extend({create:gh({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:gh({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:gh({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:gh({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var RE=T.method,mL=T.extend({activate:RE({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:RE({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:RE({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var fL=T.method,hL=T.extend({retrieve:fL({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:fL({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var gL=T.method,yL=T.extend({retrieve:gL({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:gL({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var cn=T.method,vL=T.extend({create:cn({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:cn({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:cn({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:cn({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:cn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var NE=T.method,_L=T.extend({presentPaymentMethod:NE({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:NE({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:NE({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})});var roe=T.method,bL=T.extend({create:roe({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var wL=T.method,xL=T.extend({retrieve:wL({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:wL({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var noe=T.method,SL=T.extend({create:noe({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var TL=T.method,EL=T.extend({retrieve:TL({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:TL({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var ooe=T.method,IL=T.extend({expire:ooe({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var yh=T.method,kL=T.extend({create:yh({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:yh({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:yh({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:yh({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var DE=T.method,PL=T.extend({create:DE({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:DE({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:DE({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var AL=T.method,CL=T.extend({retrieve:AL({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:AL({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var jE=T.method,OL=T.extend({create:jE({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:jE({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:jE({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var $L=T.method,RL=T.extend({retrieve:$L({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:$L({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var vh=T.method,NL=T.extend({create:vh({method:"POST",fullPath:"/v1/apps/secrets"}),list:vh({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:vh({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:vh({method:"GET",fullPath:"/v1/apps/secrets/find"})});var ioe=T.method,DL=T.extend({create:ioe({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var Va=T.method,jL=T.extend({create:Va({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Va({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Va({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Va({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Va({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Va({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var ML=T.method,UL=T.extend({create:ML({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:ML({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var zL=T.method,LL=T.extend({retrieve:zL({method:"GET",fullPath:"/v1/tax/settings"}),update:zL({method:"POST",fullPath:"/v1/tax/settings"})});var qL=T.method,FL=T.extend({retrieve:qL({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:qL({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var Zl=T.method,BL=T.extend({create:Zl({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Zl({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Zl({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Zl({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Zl({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var ME=T.method,VL=T.extend({retrieve:ME({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:ME({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:ME({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var HL=T.method,GL=T.extend({retrieve:HL({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:HL({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var ZL=T.method,JL=T.extend({retrieve:ZL({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:ZL({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var UE=T.method,KL=T.extend({retrieve:UE({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:UE({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:UE({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var _h=T.method,WL=T.extend({retrieve:_h({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:_h({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:_h({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:_h({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var zE=T.method,QL=T.extend({createForceCapture:zE({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:zE({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:zE({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var XL=T.method,YL=T.extend({retrieve:XL({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:XL({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var bh=T.method,eq=T.extend({create:bh({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:bh({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:bh({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:bh({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var Jl=T.method,tq=T.extend({create:Jl({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:Jl({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:Jl({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:Jl({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:Jl({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var rq=T.method,nq=T.extend({retrieve:rq({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:rq({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var Ha=T.method,oq=T.extend({create:Ha({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Ha({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Ha({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Ha({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Ha({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Ha({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var er=T.method,LE=T.extend({create:er({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?er({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),er({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:er({method:"POST",fullPath:"/v1/accounts/{account}"}),list:er({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:er({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:er({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:er({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:er({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:er({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:er({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:er({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:er({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:er({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:er({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:er({method:"GET",fullPath:"/v1/account"}),retrieveCapability:er({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:er({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:er({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:er({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:er({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:er({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var soe=T.method,iq=T.extend({create:soe({method:"POST",fullPath:"/v1/account_links"})});var aoe=T.method,sq=T.extend({create:aoe({method:"POST",fullPath:"/v1/account_sessions"})});var wh=T.method,aq=T.extend({create:wh({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:wh({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:wh({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:wh({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var Ga=T.method,cq=T.extend({retrieve:Ga({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Ga({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Ga({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Ga({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Ga({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Ga({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var coe=T.method,uq=T.extend({retrieve:coe({method:"GET",fullPath:"/v1/balance"})});var lq=T.method,dq=T.extend({retrieve:lq({method:"GET",fullPath:"/v1/balance_settings"}),update:lq({method:"POST",fullPath:"/v1/balance_settings"})});var pq=T.method,mq=T.extend({retrieve:pq({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:pq({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var Za=T.method,fq=T.extend({create:Za({method:"POST",fullPath:"/v1/charges"}),retrieve:Za({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Za({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Za({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Za({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Za({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var uoe=T.method,hq=T.extend({retrieve:uoe({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var gq=T.method,yq=T.extend({retrieve:gq({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:gq({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var Kl=T.method,vq=T.extend({create:Kl({method:"POST",fullPath:"/v1/coupons"}),retrieve:Kl({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Kl({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Kl({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Kl({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var Ii=T.method,_q=T.extend({create:Ii({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Ii({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Ii({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Ii({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Ii({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Ii({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Ii({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Ii({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var loe=T.method,bq=T.extend({create:loe({method:"POST",fullPath:"/v1/customer_sessions"})});var Tt=T.method,wq=T.extend({create:Tt({method:"POST",fullPath:"/v1/customers"}),retrieve:Tt({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Tt({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Tt({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Tt({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Tt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Tt({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Tt({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Tt({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Tt({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Tt({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Tt({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Tt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Tt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Tt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Tt({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Tt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Tt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Tt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Tt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Tt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Tt({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Tt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Tt({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Tt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Tt({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Tt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Tt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var xh=T.method,xq=T.extend({retrieve:xh({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:xh({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:xh({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:xh({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var Sq=T.method,Tq=T.extend({create:Sq({method:"POST",fullPath:"/v1/ephemeral_keys",validator:s((t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")},"validator")}),del:Sq({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var Eq=T.method,Iq=T.extend({retrieve:Eq({method:"GET",fullPath:"/v1/events/{id}"}),list:Eq({method:"GET",fullPath:"/v1/events",methodType:"list"})});var kq=T.method,Pq=T.extend({retrieve:kq({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:kq({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var Sh=T.method,Aq=T.extend({create:Sh({method:"POST",fullPath:"/v1/file_links"}),retrieve:Sh({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Sh({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Sh({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var doe=s((t,e,r)=>{let n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;let o=new TextEncoder,i=new Uint8Array(0),a=o.encode(`\r
`);function u(p){let f=i,h=p instanceof Uint8Array?p:new Uint8Array(o.encode(p));i=new Uint8Array(f.length+h.length+2),i.set(f),i.set(h,f.length),i.set(a,i.length-2)}s(u,"push");function l(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}s(l,"q");let d=lz(e);for(let p in d){if(!Object.prototype.hasOwnProperty.call(d,p))continue;let f=d[p];if(u(`--${n}`),Object.prototype.hasOwnProperty.call(f,"data")){let h=f;u(`Content-Disposition: form-data; name=${l(p)}; filename=${l(h.name||"blob")}`),u(`Content-Type: ${h.type||"application/octet-stream"}`),u(""),u(h.data)}else u(`Content-Disposition: form-data; name=${l(p)}`),u(""),u(f)}return u(`--${n}--`),i},"multipartDataGenerator");function Cq(t,e,r,n){if(e=e||{},t!=="POST")return n(null,Ti(e));this._stripe._platformFunctions.tryBufferData(e).then(o=>{let i=doe(t,o,r);return n(null,i)}).catch(o=>n(o,null))}s(Cq,"multipartRequestDataProcessor");var qE=T.method,Oq=T.extend({create:qE({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:qE({method:"GET",fullPath:"/v1/files/{file}"}),list:qE({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:Cq});var Wl=T.method,$q=T.extend({create:Wl({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Wl({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Wl({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Wl({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Wl({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var Rq=T.method,Nq=T.extend({retrieve:Rq({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:Rq({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})});var Th=T.method,Dq=T.extend({retrieve:Th({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Th({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Th({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Th({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})});var wr=T.method,jq=T.extend({create:wr({method:"POST",fullPath:"/v1/invoices"}),retrieve:wr({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:wr({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:wr({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:wr({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:wr({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:wr({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:wr({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:wr({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var poe=T.method,Mq=T.extend({retrieve:poe({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var Uq=T.method,FE="connect.stripe.com",zq=T.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${FE}/${r}?${Ti(t)}`},token:Uq({method:"POST",path:"oauth/token",host:FE}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),Uq({method:"POST",path:"oauth/deauthorize",host:FE}).apply(this,[t,...e])}});var Lq=T.method,qq=T.extend({retrieve:Lq({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:Lq({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})});var vn=T.method,Fq=T.extend({create:vn({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:vn({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:vn({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:vn({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:vn({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:vn({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var Ql=T.method,Bq=T.extend({create:Ql({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Ql({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Ql({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Ql({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Ql({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var Eh=T.method,Vq=T.extend({create:Eh({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Eh({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Eh({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Eh({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var Xl=T.method,Hq=T.extend({create:Xl({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Xl({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Xl({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Xl({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Xl({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var Ja=T.method,Gq=T.extend({create:Ja({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ja({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ja({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ja({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ja({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ja({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var ki=T.method,Zq=T.extend({retrieve:ki({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:ki({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:ki({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})});var Ka=T.method,Jq=T.extend({create:Ka({method:"POST",fullPath:"/v1/payouts"}),retrieve:Ka({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Ka({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Ka({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Ka({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Ka({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var Yl=T.method,Kq=T.extend({create:Yl({method:"POST",fullPath:"/v1/plans"}),retrieve:Yl({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Yl({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Yl({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Yl({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var ed=T.method,Wq=T.extend({create:ed({method:"POST",fullPath:"/v1/prices"}),retrieve:ed({method:"GET",fullPath:"/v1/prices/{price}"}),update:ed({method:"POST",fullPath:"/v1/prices/{price}"}),list:ed({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:ed({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var no=T.method,Qq=T.extend({create:no({method:"POST",fullPath:"/v1/products"}),retrieve:no({method:"GET",fullPath:"/v1/products/{id}"}),update:no({method:"POST",fullPath:"/v1/products/{id}"}),list:no({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:no({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:no({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:no({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:no({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:no({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:no({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Ih=T.method,Xq=T.extend({create:Ih({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Ih({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Ih({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Ih({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var oo=T.method,Yq=T.extend({create:oo({method:"POST",fullPath:"/v1/quotes"}),retrieve:oo({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:oo({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:oo({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:oo({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:oo({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:oo({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:oo({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:oo({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:oo({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var td=T.method,e4=T.extend({create:td({method:"POST",fullPath:"/v1/refunds"}),retrieve:td({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:td({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:td({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:td({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var BE=T.method,t4=T.extend({retrieve:BE({method:"GET",fullPath:"/v1/reviews/{review}"}),list:BE({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:BE({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var moe=T.method,r4=T.extend({list:moe({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var is=T.method,n4=T.extend({create:is({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:is({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:is({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:is({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:is({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:is({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:is({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var kh=T.method,o4=T.extend({create:kh({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:kh({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:kh({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:kh({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var rd=T.method,i4=T.extend({create:rd({method:"POST",fullPath:"/v1/sources"}),retrieve:rd({method:"GET",fullPath:"/v1/sources/{source}"}),update:rd({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:rd({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:rd({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var nd=T.method,s4=T.extend({create:nd({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:nd({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:nd({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:nd({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:nd({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})});var Wa=T.method,a4=T.extend({create:Wa({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:Wa({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:Wa({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var jo=T.method,c4=T.extend({create:jo({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:jo({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:jo({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:jo({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:jo({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:jo({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:jo({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:jo({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:jo({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var u4=T.method,l4=T.extend({retrieve:u4({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:u4({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var Ph=T.method,d4=T.extend({create:Ph({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Ph({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Ph({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Ph({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var Ah=T.method,p4=T.extend({create:Ah({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Ah({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Ah({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Ah({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var m4=T.method,f4=T.extend({create:m4({method:"POST",fullPath:"/v1/tokens"}),retrieve:m4({method:"GET",fullPath:"/v1/tokens/{token}"})});var od=T.method,h4=T.extend({create:od({method:"POST",fullPath:"/v1/topups"}),retrieve:od({method:"GET",fullPath:"/v1/topups/{topup}"}),update:od({method:"POST",fullPath:"/v1/topups/{topup}"}),list:od({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:od({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var Pi=T.method,g4=T.extend({create:Pi({method:"POST",fullPath:"/v1/transfers"}),retrieve:Pi({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Pi({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Pi({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Pi({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Pi({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Pi({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Pi({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var id=T.method,y4=T.extend({create:id({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:id({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:id({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:id({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:id({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var foe=Ft("apps",{Secrets:NL}),hoe=Ft("billing",{Alerts:Tz,CreditBalanceSummary:jz,CreditBalanceTransactions:Uz,CreditGrants:zz,MeterEventAdjustments:Yz,MeterEvents:nL,Meters:iL}),goe=Ft("billingPortal",{Configurations:$z,Sessions:DL}),yoe=Ft("checkout",{Sessions:jL}),voe=Ft("climate",{Orders:aL,Products:yL,Suppliers:FL}),_oe=Ft("entitlements",{ActiveEntitlements:Sz,Features:Jz}),boe=Ft("financialConnections",{Accounts:wz,Sessions:UL,Transactions:JL}),woe=Ft("forwarding",{Requests:OL}),xoe=Ft("identity",{VerificationReports:nq,VerificationSessions:oq}),Soe=Ft("issuing",{Authorizations:Iz,Cardholders:Az,Cards:Cz,Disputes:Bz,PersonalizationDesigns:pL,PhysicalBundles:hL,Tokens:VL,Transactions:KL}),Toe=Ft("radar",{EarlyFraudWarnings:Hz,ValueListItems:eq,ValueLists:tq}),Eoe=Ft("reporting",{ReportRuns:PL,ReportTypes:CL}),Ioe=Ft("sigma",{ScheduledQueryRuns:RL}),koe=Ft("tax",{Associations:Ez,Calculations:Pz,Registrations:kL,Settings:LL,Transactions:WL}),Poe=Ft("terminal",{Configurations:Rz,ConnectionTokens:Dz,Locations:Xz,OnboardingLinks:sL,Readers:vL}),Aoe=Ft("testHelpers",{ConfirmationTokens:Nz,Customers:qz,Refunds:IL,TestClocks:BL,Issuing:Ft("issuing",{Authorizations:kz,Cards:Oz,PersonalizationDesigns:mL,Transactions:QL}),Terminal:Ft("terminal",{Readers:_L}),Treasury:Ft("treasury",{InboundTransfers:Wz,OutboundPayments:cL,OutboundTransfers:lL,ReceivedCredits:bL,ReceivedDebits:SL})}),Coe=Ft("treasury",{CreditReversals:Lz,DebitReversals:Fz,FinancialAccounts:Kz,InboundTransfers:Qz,OutboundPayments:uL,OutboundTransfers:dL,ReceivedCredits:xL,ReceivedDebits:EL,TransactionEntries:GL,Transactions:YL}),Ooe=Ft("v2",{Billing:Ft("billing",{MeterEventAdjustments:eL,MeterEventSession:tL,MeterEventStream:rL,MeterEvents:oL}),Core:Ft("core",{EventDestinations:Gz,Events:Zz})});var v4="api.stripe.com",_4="443",b4="/v1/",w4=kE,x4=8e4,S4=5,T4=.5,$oe=["name","version","url","partner_id"],E4=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Roe=s(t=>new ih(t,T.MAX_BUFFERED_REQUEST_METRICS),"defaultRequestSenderFactory");function I4(t,e=Roe){r.PACKAGE_VERSION="20.0.0",r.API_VERSION=kE,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},dz()),r.StripeResource=T,r.StripeContext=Ll,r.resources=Qa,r.HttpClient=Tr,r.HttpClientResponse=wi,r.CryptoProvider=bi,r.webhooks=bz(t);function r(n,o={}){if(!(this instanceof r))return new r(n,o);let i=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=i.httpAgent||null;this._api={host:i.host||v4,port:i.port||_4,protocol:i.protocol||"https",basePath:b4,version:i.apiVersion||w4,timeout:Zf("timeout",i.timeout,x4),maxNetworkRetries:Zf("maxNetworkRetries",i.maxNetworkRetries,2),agent:a,httpClient:i.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};let u=i.typescript||!1;u!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=u),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(n,i.authenticator),this.errors=nh,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=r.StripeResource}return s(r,"Stripe"),r.errors=nh,r.createNodeHttpClient=t.createNodeHttpClient,r.createFetchHttpClient=t.createFetchHttpClient,r.createNodeCryptoProvider=t.createNodeCryptoProvider,r.createSubtleCryptoProvider=t.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,o,i,a){return this._requestSender._rawRequest(n,o,i,a)},_setAuthenticator(n,o){if(n&&o)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!o)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?Bf(n):o},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=$oe.reduce((o,i)=>(typeof n[i]=="string"&&(o=o||{},o[i]=n[i]),o),{})},_setApiField(n,o){this._api[n]=o},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:s(n=>{switch(n){case"DEFAULT_HOST":return v4;case"DEFAULT_PORT":return _4;case"DEFAULT_BASE_PATH":return b4;case"DEFAULT_API_VERSION":return w4;case"DEFAULT_TIMEOUT":return x4;case"MAX_NETWORK_RETRY_DELAY_SEC":return S4;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return T4}return r[n]},"getConstant"),getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,o,i){let a=Zf(n,o,i);this._setApiField(n,a)},getMaxNetworkRetryDelay(){return S4},getInitialNetworkRetryDelay(){return T4},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,o){this._platformFunctions.getUname().then(i=>{var a;let u={};for(let d in n)Object.prototype.hasOwnProperty.call(n,d)&&(u[d]=encodeURIComponent((a=n[d])!==null&&a!==void 0?a:"null"));u.uname=encodeURIComponent(i||"UNKNOWN");let l=this.getApiField("httpClient");l&&(u.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(u.application=this._appInfo),o(JSON.stringify(u))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let n in Qa)Object.prototype.hasOwnProperty.call(Qa,n)&&(this[uz(n)]=new Qa[n](this))},_getPropsFromConfig(n){if(!n)return{};let o=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:n};if(Object.keys(n).filter(u=>!E4.includes(u)).length>0)throw new Error(`Config object may only contain the following: ${E4.join(", ")}`);return n},parseEventNotification(n,o,i,a,u,l){let d=this.webhooks.constructEvent(n,o,i,a,u,l);return d.context&&(d.context=Ll.parse(d.context)),d.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${d.id}`,void 0,{stripeContext:d.context},["fetch_event"]),d.fetchRelatedObject=()=>d.related_object?this._requestSender._rawRequest("GET",d.related_object.url,void 0,{stripeContext:d.context},["fetch_related_object"]):Promise.resolve(null),d}},r}s(I4,"createStripe");var Noe=I4(new oh),k4=Noe;function Doe(){let t=process.env.STRIPE_SECRET_KEY;if(!t)throw new Error("STRIPE_SECRET_KEY environment variable is not set. Configure Stripe credentials.");return t}s(Doe,"getStripeSecretKey");var joe={apiVersion:"2025-11-17.clover",typescript:!0,appInfo:{name:"AegisWallet",version:"1.0.0",url:"https://aegiswallet.com.br"}},VE=null;function un(){return VE||(VE=new k4(Doe(),joe)),VE}s(un,"getStripeClient");var Ch=class t{static{s(this,"StripeCustomerService")}static async createCustomer(e,r,n){let o=un();try{let i=await o.customers.create({email:r,name:n,metadata:{clerkUserId:e}});return L.info("Stripe customer created",{clerkUserId:e,stripeCustomerId:i.id}),i.id}catch(i){throw L.error("Failed to create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao criar cliente no Stripe")}}static async getOrCreateCustomer(e,r,n){let o=un();try{let i=await o.customers.search({query:`metadata['clerkUserId']:'${e}'`,limit:1});if(i.data.length>0)return i.data[0].id;let a=await o.customers.list({email:r,limit:1});return a.data.length>0?(await o.customers.update(a.data[0].id,{metadata:{clerkUserId:e}}),a.data[0].id):await t.createCustomer(e,r,n)}catch(i){throw L.error("Failed to get/create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao processar cliente no Stripe")}}static async updateCustomer(e,r){let n=un();try{await n.customers.update(e,r)}catch(o){throw L.error("Failed to update Stripe customer",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async deleteCustomer(e){let r=un();try{let n=await r.subscriptions.list({customer:e,status:"active"});for(let o of n.data)await r.subscriptions.cancel(o.id);await r.customers.del(e),L.info("Stripe customer deleted",{stripeCustomerId:e})}catch(n){throw L.error("Failed to delete Stripe customer",{stripeCustomerId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}};var Moe=c.object({STRIPE_SECRET_KEY:c.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_PUBLISHABLE_KEY:c.string().min(1,"STRIPE_PUBLISHABLE_KEY is required"),STRIPE_WEBHOOK_SECRET:c.string().min(1,"STRIPE_WEBHOOK_SECRET is required"),STRIPE_SUCCESS_URL:c.string().url("STRIPE_SUCCESS_URL must be a valid URL"),STRIPE_CANCEL_URL:c.string().url("STRIPE_CANCEL_URL must be a valid URL"),STRIPE_PORTAL_RETURN_URL:c.string().url("STRIPE_PORTAL_RETURN_URL must be a valid URL"),STRIPE_PRICE_BASIC_MONTHLY:c.string().min(1,"STRIPE_PRICE_BASIC_MONTHLY is required"),STRIPE_PRICE_ADVANCED_MONTHLY:c.string().min(1,"STRIPE_PRICE_ADVANCED_MONTHLY is required")}),io;try{io=Moe.parse(process.env)}catch{io=process.env}var ss={secretKey:io?.STRIPE_SECRET_KEY,publishableKey:io?.STRIPE_PUBLISHABLE_KEY,webhookSecret:io?.STRIPE_WEBHOOK_SECRET,successUrl:io?.STRIPE_SUCCESS_URL,cancelUrl:io?.STRIPE_CANCEL_URL,portalReturnUrl:io?.STRIPE_PORTAL_RETURN_URL},P4={BASIC_MONTHLY:io?.STRIPE_PRICE_BASIC_MONTHLY,ADVANCED_MONTHLY:io?.STRIPE_PRICE_ADVANCED_MONTHLY},Uoe=[{id:"free",name:"Gratuito",priceCents:0,features:["Dashboard b\xE1sico","1 conta banc\xE1ria","Transa\xE7\xF5es limitadas"],aiModels:[]},{id:"basic",name:"B\xE1sico",priceCents:5900,features:["Chat IA (Gemini Flash)","3 contas banc\xE1rias","Automa\xE7\xF5es b\xE1sicas"],aiModels:["gemini-flash"]},{id:"advanced",name:"Avan\xE7ado",priceCents:11900,features:["Todas as IAs","Contas ilimitadas","API access","Suporte priorit\xE1rio"],aiModels:["gpt-4o","claude-sonnet","gemini-pro","gemini-flash"]}],Xa=s(t=>Uoe.find(e=>e.id===t),"getPlanById"),sd=s(t=>t===P4.BASIC_MONTHLY?Xa("basic"):t===P4.ADVANCED_MONTHLY?Xa("advanced"):null,"getPlanByStripePrice"),A4=s(t=>{let e=Xa(t);return e?e.aiModels.length>0:!1},"canAccessAI"),C4=s(t=>{let e=Xa(t);return e?e.aiModels:[]},"getAllowedModels");var Mo=class{static{s(this,"StripeSubscriptionService")}static async createCheckoutSession(e,r,n,o,i){let a=un(),u=pr();try{let[l]=await u.select().from(J).where(H(J.id,e)).limit(1);if(!l?.email)throw new Error("Usu\xE1rio n\xE3o encontrado ou sem email");let d=await Ch.getOrCreateCustomer(e,l.email,l.fullName||void 0),p=i||ss.successUrl?.replace(/\/billing\/success$/,"")||"https://app.aegiswallet.com.br",f=n||`${p}/billing/success`,h=o||`${p}/billing/cancel`,y=await a.checkout.sessions.create({customer:d,mode:"subscription",payment_method_types:["card"],line_items:[{price:r,quantity:1}],success_url:f,cancel_url:h,metadata:{clerkUserId:e},allow_promotion_codes:!0});if(!y.url)throw new Error("Stripe n\xE3o retornou URL de checkout v\xE1lida");return{sessionId:y.id,checkoutUrl:y.url}}catch(l){throw L.error("Failed to create checkout session",{userId:e,priceId:r,requestOrigin:i,error:l instanceof Error?l.message:"Unknown error"}),l}}static async createPortalSession(e,r){let n=un();try{return{portalUrl:(await n.billingPortal.sessions.create({customer:e,return_url:r||ss.portalReturnUrl||"https://app.aegiswallet.com.br/settings/billing"})).url}}catch(o){throw L.error("Failed to create portal session",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async getSubscription(e){let r=pr();try{let n=await r.select({subscription:tt,plan:Or}).from(tt).leftJoin(Or,H(tt.planId,Or.id)).where(H(tt.userId,e)).limit(1);if(n.length===0)return L.info("No subscription found for user",{userId:e}),null;let{subscription:o,plan:i}=n[0];return o?(L.info("Retrieved subscription for user",{userId:e,subscriptionId:o.id,status:o.status,planId:o.planId}),{subscription:o,plan:i||null}):(L.warn("Subscription record is null despite query success",{userId:e}),null)}catch(n){throw L.error("Failed to get subscription",{userId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}static async syncSubscriptionFromStripe(e){let r=un(),n=pr();try{let i=await r.subscriptions.retrieve(e),a=typeof i.customer=="string"?i.customer:i.customer.id,[u]=await n.select().from(tt).where(H(tt.stripeCustomerId,a)).limit(1);if(!u)return L.warn("Subscription sync skipped: User not found for customer",{customerId:a,stripeSubscriptionId:e}),null;let l=i.items.data[0]?.price?.id;if(!l)throw L.error("No price ID found in subscription",{stripeSubscriptionId:e,items:i.items.data.length}),new Error("Pre\xE7o n\xE3o encontrado na assinatura do Stripe");let d=sd(l),p=d?d.id:"free",f=i.status,h=f==="incomplete"||f==="incomplete_expired"||f==="paused"?"canceled":f,y=i.items.data[0];if(!y)throw L.error("No subscription items found",{stripeSubscriptionId:e}),new Error("Item da assinatura n\xE3o encontrado");let g=y.current_period_start,m=y.current_period_end;if(!(g&&m))throw L.error("Missing billing period dates",{stripeSubscriptionId:e,periodStart:g,periodEnd:m}),new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let _={stripeSubscriptionId:i.id,planId:p,status:h,currentPeriodStart:new Date(g*1e3),currentPeriodEnd:new Date(m*1e3)},[w]=await n.update(tt).set({..._,cancelAtPeriodEnd:i.cancel_at_period_end,canceledAt:i.canceled_at?new Date(i.canceled_at*1e3):null,trialStart:i.trial_start?new Date(i.trial_start*1e3):null,trialEnd:i.trial_end?new Date(i.trial_end*1e3):null,updatedAt:new Date}).where(H(tt.id,u.id)).returning();return L.info("Subscription synced from Stripe",{userId:u.userId,subscriptionId:i.id,status:h,planId:p,previousStatus:u.status,previousPlanId:u.planId}),w}catch(o){throw L.error("Failed to sync subscription",{stripeSubscriptionId:e,error:o instanceof Error?o.message:"Unknown error",stack:o instanceof Error?o.stack:void 0}),o}}static async cancelSubscription(e,r=!1){let n=un(),o=pr();try{let[i]=await o.select().from(tt).where(H(tt.userId,e)).limit(1);if(!i?.stripeSubscriptionId)throw new Error("Assinatura n\xE3o encontrada");return r?await n.subscriptions.cancel(i.stripeSubscriptionId):await n.subscriptions.update(i.stripeSubscriptionId,{cancel_at_period_end:!0}),!0}catch(i){throw L.error("Failed to cancel subscription",{userId:e,error:i instanceof Error?i.message:"Unknown error"}),i}}};var O4=new Ce,zoe=c.object({priceId:c.string().min(1),successUrl:c.string().url().optional(),cancelUrl:c.string().url().optional()});O4.post("/",pe,xe({windowMs:6e4,max:30}),Be("json",zoe),async t=>{let{user:e}=t.get("auth"),{priceId:r,successUrl:n,cancelUrl:o}=t.req.valid("json"),i=t.get("requestId");if(!e?.id)return L.warn("Checkout request missing user authentication",{requestId:i}),t.json({error:"Usu\xE1rio n\xE3o autenticado"},401);if(!e?.email)return L.warn("Checkout request missing user email",{requestId:i,userId:e.id}),t.json({error:"Email do usu\xE1rio n\xE3o encontrado"},400);try{let a=t.req.header("origin")||t.req.header("referer")?.replace(/\/$/,""),u=await Mo.createCheckoutSession(e.id,r,n,o,a);return L.info("Checkout session created successfully",{userId:e.id,priceId:r,requestOrigin:a,sessionId:u.sessionId}),t.json({data:u,meta:{requestId:i}})}catch(a){let u=a instanceof Error?a.message:"Unknown error";return L.error("Checkout creation failed",{userId:e.id,priceId:r,error:u,requestId:i}),u.includes("Usu\xE1rio n\xE3o encontrado")?t.json({error:"Usu\xE1rio n\xE3o encontrado"},404):u.includes("plano")||u.includes("price")?t.json({error:"Plano inv\xE1lido ou n\xE3o encontrado"},400):u.includes("Stripe")?t.json({error:"Servi\xE7o de pagamento temporariamente indispon\xEDvel"},503):t.json({error:"Falha ao criar checkout"},500)}});var $4=O4;var HE=new Ce,Loe=c.object({limit:c.coerce.number().min(1).max(100).default(10),offset:c.coerce.number().min(0).default(0),status:c.enum(["draft","open","paid","void","uncollectible"]).optional()});HE.get("/",pe,xe({windowMs:6e4,max:30}),Be("query",Loe),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n,status:o}=t.req.valid("query"),i=t.get("requestId");try{let a=[],[u]=[{count:0}];return t.json({data:{invoices:a,total:Number(u?.count||0),hasMore:!1},meta:{requestId:i}})}catch(a){return L.error("Failed to fetch invoices",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:i}),t.json({error:"Falha ao buscar faturas"},500)}});HE.get("/:id/pdf",pe,xe({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{L.info("Invoice PDF download requested",{userId:e.id,invoiceId:r,requestId:n});let o=new Blob(["Mock PDF content"],{type:"application/pdf"});return new Response(o,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="fatura-${r}.pdf"`}})}catch(o){return L.error("Failed to download invoice PDF",{userId:e.id,invoiceId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao baixar fatura"},500)}});var R4=HE;var N4=new Ce,qoe=c.object({limit:c.coerce.number().min(1).max(100).default(10),offset:c.coerce.number().min(0).default(0)});N4.get("/",pe,xe({windowMs:6e4,max:30}),Be("query",qoe),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n}=t.req.valid("query"),o=t.get("requestId"),i=pr();try{let a=await i.select().from(nr).where(H(nr.userId,e.id)).orderBy(Rt(nr.createdAt)).limit(r).offset(n),[u]=await i.select({count:M`count(*)`}).from(nr).where(H(nr.userId,e.id));return t.json({data:{payments:a,total:Number(u.count)},meta:{requestId:o}})}catch(a){return L.error("Failed to fetch payment history",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:o}),t.json({error:"Falha ao buscar hist\xF3rico de pagamentos"},500)}});var D4=N4;var ad=new Ce,Foe=c.object({type:c.enum(["card","pix","bank_account"]),isDefault:c.boolean().optional(),cardNumber:c.string().optional(),expiryMonth:c.number().min(1).max(12).optional(),expiryYear:c.number().min(new Date().getFullYear()).optional(),cvc:c.string().optional(),pixKey:c.string().optional(),pixKeyType:c.enum(["cpf","cnpj","phone","email","random"]).optional(),bankCode:c.string().optional(),accountNumber:c.string().optional(),accountType:c.enum(["checking","savings"]).optional(),accountHolderName:c.string().optional(),documentNumber:c.string().optional()}),Boe=c.object({isDefault:c.boolean()});ad.get("/",pe,xe({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=[];return t.json({data:{paymentMethods:n,hasMore:!1,total:0},meta:{requestId:r}})}catch(n){return L.error("Failed to fetch payment methods",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar m\xE9todos de pagamento"},500)}});ad.post("/",pe,xe({windowMs:6e4,max:10}),Be("json",Foe),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Payment method addition requested",{userId:e.id,type:r.type,requestId:n}),t.json({data:{paymentMethod:{id:"pm_mock_id",type:r.type,isDefault:r.isDefault,createdAt:new Date().toISOString()}},meta:{requestId:n}})}catch(o){return L.error("Failed to add payment method",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao adicionar m\xE9todo de pagamento"},500)}});ad.put("/:id",pe,xe({windowMs:6e4,max:20}),Be("json",Boe),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.req.valid("json"),o=t.get("requestId");try{return L.info("Payment method update requested",{userId:e.id,paymentMethodId:r,data:n,requestId:o}),t.json({data:{paymentMethod:{id:r,isDefault:n.isDefault}},meta:{requestId:o}})}catch(i){return L.error("Failed to update payment method",{userId:e.id,paymentMethodId:r,error:i instanceof Error?i.message:"Unknown error",requestId:o}),t.json({error:"Falha ao atualizar m\xE9todo de pagamento"},500)}});ad.delete("/:id",pe,xe({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{return L.info("Payment method deletion requested",{userId:e.id,paymentMethodId:r,requestId:n}),t.json({data:{success:!0},meta:{requestId:n}})}catch(o){return L.error("Failed to remove payment method",{userId:e.id,paymentMethodId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao remover m\xE9todo de pagamento"},500)}});var j4=ad;var M4=new Ce;M4.get("/",async t=>{let e=t.get("requestId"),r=pr();try{let o=(await r.select().from(Or).where(H(Or.isActive,!0)).orderBy(Vo(Or.displayOrder))).map(i=>({...i,priceFormatted:new Intl.NumberFormat("pt-BR",{style:"currency",currency:i.currency}).format(i.priceCents/100)}));return t.json({data:{plans:o},meta:{requestId:e}})}catch(n){return L.error("Failed to fetch plans",{error:n instanceof Error?n.message:"Unknown error",requestId:e}),t.json({error:"Falha ao buscar planos"},500)}});var U4=M4;var z4=new Ce,Voe=c.object({returnUrl:c.string().url().optional()});z4.post("/",pe,xe({windowMs:6e4,max:10}),Be("json",Voe),async t=>{let{user:e}=t.get("auth"),{returnUrl:r}=t.req.valid("json"),n=t.get("requestId");try{let o=await Mo.getSubscription(e.id);if(!o?.subscription?.stripeCustomerId)return t.json({error:"Assinatura n\xE3o encontrada"},400);let i=await Mo.createPortalSession(o.subscription.stripeCustomerId,r);return L.info("Portal session created",{userId:e.id}),t.json({data:i,meta:{requestId:n}})}catch(o){return L.error("Portal creation failed",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao criar portal"},500)}});var L4=z4;var q4=new Ce;q4.get("/",pe,xe({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=await Mo.getSubscription(e.id),o=n?.plan||Xa("free"),i=o?.id||"free",a=A4(i),u=C4(i);return t.json({data:{subscription:n?.subscription||null,plan:o,canAccessAI:a,allowedModels:u},meta:{requestId:r}})}catch(n){return L.error("Failed to get subscription",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar assinatura"},500)}});var F4=q4;var so=class{static{s(this,"StripeWebhookService")}static constructEvent(e,r){let n=un();if(!ss.webhookSecret)throw L.error("Webhook secret not configured",{hasConfig:!!ss.webhookSecret}),new Error("STRIPE_WEBHOOK_SECRET n\xE3o est\xE1 configurado. Verifique as vari\xE1veis de ambiente.");try{let o=n.webhooks.constructEvent(e,r,ss.webhookSecret);return L.info("Webhook event constructed successfully",{type:o.type,id:o.id}),o}catch(o){let i=o instanceof Error?o.message:"Unknown error";throw L.error("Failed to construct webhook event",{error:i,signatureLength:r?.length}),new Error(`Falha ao validar webhook: ${i}`)}}static async handleCheckoutSessionCompleted(e){let r=pr(),n=e.metadata?.clerkUserId,o=typeof e.customer=="string"?e.customer:e.customer?.id,i=typeof e.subscription=="string"?e.subscription:e.subscription?.id;if(!(n&&o&&i))throw L.warn("Checkout session missing required metadata",{sessionId:e.id,hasClerkUserId:!!n,hasCustomerId:!!o,hasSubscriptionId:!!i}),new Error("Checkout session incompleto - metadados obrigat\xF3rios n\xE3o encontrados");try{let[a]=await r.select().from(tt).where(H(tt.stripeSubscriptionId,i)).limit(1);if(a){L.info("Checkout session already processed",{sessionId:e.id,subscriptionId:i,existingStatus:a.status});return}let l=await un().subscriptions.retrieve(i),d=l.items.data[0]?.price?.id;if(!d)throw new Error("Price ID n\xE3o encontrado na assinatura do Stripe");let p=sd(d),f=p?p.id:"free",h=l.items.data[0];if(!h)throw new Error("Item da assinatura n\xE3o encontrado");let y=h.current_period_start,g=h.current_period_end;if(!(y&&g))throw new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let m=l.status,_=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m;await r.update(tt).set({stripeCustomerId:o,stripeSubscriptionId:i,planId:f,status:_,currentPeriodStart:new Date(y*1e3),currentPeriodEnd:new Date(g*1e3),updatedAt:new Date}).where(H(tt.userId,n)),L.info("Checkout session completed successfully",{clerkUserId:n,sessionId:e.id,subscriptionId:i,status:_,planId:f})}catch(a){let u=a instanceof Error?a.message:"Unknown error";throw L.error("Failed to process checkout session completion",{sessionId:e.id,clerkUserId:n,error:u}),a}}static async handleSubscriptionCreated(e){}static async handleSubscriptionUpdated(e){let r=pr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(tt).where(H(tt.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription update webhook subscription not found",{customerId:n,subscriptionId:e.id});return}let i=e.items.data[0]?.price?.id;if(!i){L.error("No price ID found in subscription update",{subscriptionId:e.id});return}let a=sd(i),u=a?a.id:"free",l=e.items.data[0];if(!l){L.error("No subscription items found in update",{subscriptionId:e.id});return}let d=l.current_period_start,p=l.current_period_end,f=e.status,h=f==="incomplete"||f==="incomplete_expired"||f==="paused"?"canceled":f;await r.update(tt).set({stripeSubscriptionId:e.id,planId:u,status:h,currentPeriodStart:new Date(d*1e3),currentPeriodEnd:new Date(p*1e3),cancelAtPeriodEnd:e.cancel_at_period_end,canceledAt:e.canceled_at?new Date(e.canceled_at*1e3):null,updatedAt:new Date}).where(H(tt.id,o.id)),L.info("Subscription updated webhook processed successfully",{subscriptionId:e.id,previousStatus:o.status,newStatus:h,previousPlanId:o.planId,newPlanId:u})}static async handleSubscriptionDeleted(e){let r=pr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(tt).where(H(tt.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription delete webhook subscription not found",{customerId:n,subscriptionId:e.id});return}await r.update(tt).set({status:"canceled",canceledAt:new Date,updatedAt:new Date}).where(H(tt.stripeCustomerId,n)),L.info("Subscription deleted webhook processed successfully",{subscriptionId:e.id,userId:o.userId,previousStatus:o.status})}static async handleInvoicePaid(e){let r=pr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice paid webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(tt).where(H(tt.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice paid webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(nr).where(H(nr.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(nr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_paid,currency:n.currency,status:"succeeded",description:n.description||"Assinatura AegisWallet",receiptUrl:n.hosted_invoice_url,invoicePdf:n.invoice_pdf}),L.info("Invoice paid webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_paid,currency:n.currency})}catch(u){let l=u instanceof Error?u.message:"Unknown error";throw L.error("Failed to process invoice payment",{invoiceId:n.id,userId:i.userId,error:l}),u}}static async handleInvoicePaymentFailed(e){let r=pr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice payment failed webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(tt).where(H(tt.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice payment failed webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(nr).where(H(nr.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment failure already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(nr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_due,currency:n.currency,status:"failed",description:n.description||"Falha no pagamento",failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message}),L.warn("Invoice payment failed webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_due,currency:n.currency,failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message})}catch(u){let l=u instanceof Error?u.message:"Unknown error";throw L.error("Failed to process invoice payment failure",{invoiceId:n.id,userId:i.userId,error:l}),u}}};var B4=new Ce;B4.post("/",async t=>{let e=t.req.header("stripe-signature"),r=await t.req.text();if(!e)return t.json({error:"Missing stripe-signature header"},400);try{let n=so.constructEvent(r,e);switch(L.info("Stripe webhook received",{type:n.type,id:n.id}),n.type){case"checkout.session.completed":await so.handleCheckoutSessionCompleted(n.data.object);break;case"customer.subscription.created":await so.handleSubscriptionCreated(n.data.object);break;case"customer.subscription.updated":await so.handleSubscriptionUpdated(n.data.object);break;case"customer.subscription.deleted":await so.handleSubscriptionDeleted(n.data.object);break;case"invoice.paid":await so.handleInvoicePaid(n.data.object);break;case"invoice.payment_failed":await so.handleInvoicePaymentFailed(n.data.object);break;default:L.info("Unhandled webhook event type",{type:n.type})}return t.json({received:!0})}catch(n){return L.error("Webhook processing failed",{error:n instanceof Error?n.message:"Unknown error"}),t.json({error:"Webhook handler failed"},400)}});var V4=B4;var Uo=new Ce;Uo.route("/checkout",$4);Uo.route("/subscription",F4);Uo.route("/portal",L4);Uo.route("/plans",U4);Uo.route("/webhook",V4);Uo.route("/payment-history",D4);Uo.route("/payment-methods",j4);Uo.route("/invoices",R4);var GE=Uo;var ZE=new Ce,Hoe=c.object({categoryId:c.string().optional(),endDate:c.string().datetime().optional(),limit:c.coerce.number().min(1).max(100).default(20),offset:c.coerce.number().min(0).default(0),query:c.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:c.string().datetime().optional()}),Goe=c.object({accountId:c.string().optional(),categoryId:c.string().optional(),endDate:c.string().datetime().optional(),limit:c.coerce.number().min(1).max(100).default(20),offset:c.coerce.number().min(0).default(0),query:c.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:c.string().datetime().optional()});ZE.get("/events/search",pe,xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Be("query",Hoe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(ut.userId,e.id),kr(ut.title,`%${n.query}%`)];n.categoryId&&i.push(H(ut.categoryId,n.categoryId)),n.startDate&&i.push(ur(ut.startDate,new Date(n.startDate))),n.endDate&&i.push(rr(ut.endDate,new Date(n.endDate)));let a=await r.select().from(ut).where(Ee(...i)).orderBy(Rt(ut.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar events searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar events",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar eventos"},500)}});ZE.get("/transactions/search",pe,xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Be("query",Goe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(te.userId,e.id),kr(te.description,`%${n.query}%`)];n.accountId&&i.push(H(te.accountId,n.accountId)),n.categoryId&&i.push(H(te.categoryId,n.categoryId)),n.startDate&&i.push(ur(te.transactionDate,new Date(n.startDate))),n.endDate&&i.push(rr(te.transactionDate,new Date(n.endDate)));let a=await r.select().from(te).where(Ee(...i)).orderBy(Rt(te.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar transactions searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar transa\xE7\xF5es"},500)}});var JE=ZE;var KE=class{constructor(e){this.db=e}static{s(this,"ComplianceService")}async getUserConsents(e){try{return await this.db.select().from(Et).where(H(Et.userId,e)).orderBy(Rt(Et.createdAt))}catch(r){throw L.error("Failed to get user consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos: ${r instanceof Error?r.message:"Unknown error"}`)}}async getConsentTemplates(){try{return await this.db.select().from(Gr).where(H(Gr.isActive,!0)).orderBy(Gr.consentType)}catch(e){throw L.error("Failed to get consent templates",{error:e instanceof Error?e.message:"Unknown error"}),new Error(`Erro ao buscar templates de consentimento: ${e instanceof Error?e.message:"Unknown error"}`)}}async grantConsent(e,r,n,o,i){try{let[a]=await this.db.select().from(Gr).where(Ee(H(Gr.consentType,r),H(Gr.isActive,!0))).limit(1);if(!a)throw new Error(`Template de consentimento n\xE3o encontrado: ${r}`);let u=await this.generateHash(a.fullTextPt),[l]=await this.db.select().from(Et).where(Ee(H(Et.userId,e),H(Et.consentType,r))).limit(1);if(l){let[p]=await this.db.update(Et).set({granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:u,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).where(H(Et.id,l.id)).returning();return p}let[d]=await this.db.insert(Et).values({userId:e,consentType:r,purpose:a.descriptionPt,legalBasis:"consent",granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:u,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).returning();return d}catch(a){throw L.error("Failed to grant consent",{error:a instanceof Error?a.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao conceder consentimento: ${a instanceof Error?a.message:"Unknown error"}`)}}async revokeConsent(e,r){try{await this.db.update(Et).set({granted:!1,revokedAt:new Date}).where(Ee(H(Et.userId,e),H(Et.consentType,r)))}catch(n){throw L.error("Failed to revoke consent",{error:n instanceof Error?n.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao revogar consentimento: ${n instanceof Error?n.message:"Unknown error"}`)}}async checkRequiredConsents(e,r){try{return(await this.db.select().from(Et).where(Ee(H(Et.userId,e),_s(Et.consentType,r),H(Et.granted,!0)))).length===r.length}catch(n){return L.error("Failed to check required consents",{error:n instanceof Error?n.message:"Unknown error",userId:e}),!1}}async getMissingMandatoryConsents(e){try{let n=(await this.db.select().from(Gr).where(Ee(H(Gr.isMandatory,!0),H(Gr.isActive,!0)))).map(a=>a.consentType),i=(await this.db.select().from(Et).where(Ee(H(Et.userId,e),H(Et.granted,!0)))).map(a=>a.consentType);return n.filter(a=>!i.includes(a))}catch(r){throw L.error("Failed to get missing mandatory consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos obrigat\xF3rios faltantes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createExportRequest(e,r,n,o,i,a){try{let[u]=await this.db.insert(Sn).values({userId:e,requestType:r,format:n,status:"pending",dateFrom:o??null,dateTo:i??null,requestedVia:"app",ipAddress:a??null}).returning();return await this.logAuditEvent(e,"data_export_requested","data_export_requests",u.id,{requestType:r,format:n}),u}catch(u){throw L.error("Failed to create export request",{error:u instanceof Error?u.message:"Unknown error",userId:e}),new Error(`Erro ao criar solicita\xE7\xE3o de exporta\xE7\xE3o: ${u instanceof Error?u.message:"Unknown error"}`)}}async getExportRequests(e){try{return await this.db.select().from(Sn).where(H(Sn.userId,e)).orderBy(Rt(Sn.createdAt))}catch(r){throw L.error("Failed to get export requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exporta\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async createDeletionRequest(e,r,n,o,i){try{let[a]=await this.db.select({legalHold:$r.legalHold}).from($r).where(Ee(H($r.userId,e),H($r.legalHold,!0))).limit(1);if(a?.legalHold)throw new Error("Seus dados est\xE3o em reten\xE7\xE3o legal e n\xE3o podem ser exclu\xEDdos no momento");let u=new Date;u.setDate(u.getDate()+15);let[l]=await this.db.insert($r).values({userId:e,requestType:r,scope:n??{},reason:o??null,status:"pending",reviewDeadline:u,ipAddress:i??null}).returning();return await this.logAuditEvent(e,"data_deletion_requested","data_deletion_requests",l.id,{requestType:r}),l}catch(a){throw L.error("Failed to create deletion request",{error:a instanceof Error?a.message:"Unknown error",userId:e}),a}}async getDeletionRequests(e){try{return await this.db.select().from($r).where(H($r.userId,e)).orderBy(Rt($r.createdAt))}catch(r){throw L.error("Failed to get deletion requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exclus\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionLimits(e){try{return await this.db.select().from(Sr).where(H(Sr.userId,e))}catch(r){throw L.error("Failed to get transaction limits",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar limites de transa\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async checkTransactionLimit(e,r,n){try{let[o]=await this.db.select().from(Sr).where(Ee(H(Sr.userId,e),H(Sr.limitType,r),H(Sr.isActive,!0))).limit(1);if(!o)return{allowed:!0};let i=Number(o.dailyLimit),a=Number(o.currentDailyUsed??0),u=o.transactionLimit?Number(o.transactionLimit):null,l=i-a;return u&&n>u?{allowed:!1,reason:`Valor excede limite por transa\xE7\xE3o de R$ ${u.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:n>l?{allowed:!1,reason:`Valor excede saldo di\xE1rio dispon\xEDvel de R$ ${l.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:{allowed:!0,limit:i,used:a,requested:n,remaining:l}}catch(o){throw L.error("Failed to check transaction limit",{error:o instanceof Error?o.message:"Unknown error",limitType:r,userId:e}),new Error(`Erro ao verificar limite de transa\xE7\xE3o: ${o instanceof Error?o.message:"Unknown error"}`)}}async updateLimitUsage(e,r,n){try{await this.db.update(Sr).set({currentDailyUsed:M`${Sr.currentDailyUsed} + ${n}`}).where(Ee(H(Sr.userId,e),H(Sr.limitType,r)))}catch(o){throw L.error("Failed to update limit usage",{error:o instanceof Error?o.message:"Unknown error",userId:e,limitType:r,amount:n}),new Error(`Erro ao atualizar uso de limite: ${o instanceof Error?o.message:"Unknown error"}`)}}async logAuditEvent(e,r,n,o,i){try{let a=new Date;a.setFullYear(a.getFullYear()+5),await this.db.insert(Zr).values({userId:e,eventType:r,resourceType:n,resourceId:o??null,description:i?.action??null,metadata:i??{},previousState:null,newState:null,ipAddress:null,userAgent:null,sessionId:null,retentionUntil:a})}catch(a){L.error("Failed to log audit event",{error:a instanceof Error?a.message:"Unknown error",eventType:r,userId:e})}}async getAuditHistory(e,r){try{let n=[H(Zr.userId,e)];return r?.eventType&&n.push(H(Zr.eventType,r.eventType)),r?.startDate&&n.push(ur(Zr.createdAt,r.startDate)),r?.endDate&&n.push(rr(Zr.createdAt,r.endDate)),await this.db.select().from(Zr).where(n.length>1?Ee(...n):n[0]).orderBy(Rt(Zr.createdAt)).limit(r?.limit??100)}catch(n){throw L.error("Failed to get audit history",{error:n instanceof Error?n.message:"Unknown error",userId:e}),new Error(`Erro ao buscar hist\xF3rico de auditoria: ${n instanceof Error?n.message:"Unknown error"}`)}}async generateHash(e){let n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}};function Xr(t){return new KE(t)}s(Xr,"createComplianceService");var ln=new Ce,Zoe=c.object({collectionMethod:c.enum(["explicit_form","voice_command","terms_acceptance","settings_toggle"]).default("explicit_form"),consentType:c.enum(["data_processing","marketing","analytics","third_party","voice_data","biometric","financial_data","location"])}),Joe=c.object({dateFrom:c.string().optional(),dateTo:c.string().optional(),format:c.enum(["json","csv","pdf"]).default("json"),requestType:c.enum(["full_data","full_export","transactions","profile","consents","audit_logs"]).default("full_export")}),Koe=c.object({reason:c.string().optional(),requestType:c.enum(["full_account","full_deletion","specific_data","anonymization"]),scope:c.record(c.string(),c.unknown()).optional()}),Woe=c.object({amount:c.number().positive("Valor deve ser positivo"),limitType:c.enum(["pix_daily","pix_daytime","pix_transaction","boleto_daily","transfer_daily","withdrawal_daily"])});ln.get("/consent-templates",pe,async t=>{let{db:e}=t.get("auth"),r=t.get("requestId");try{let o=await Xr(e).getConsentTemplates();return t.json({data:o,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get consent templates",{error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({code:"CONSENT_TEMPLATES_ERROR",error:"Erro ao buscar modelos de consentimento"},500)}});ln.get("/consents",pe,xe({windowMs:6e4,max:30,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await Xr(r).getUserConsents(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONSENTS_ERROR",error:"Erro ao buscar consentimentos"},500)}});ln.get("/consents/missing",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await Xr(r).getMissingMandatoryConsents(e.id);return t.json({data:{hasMissing:i.length>0,missingConsents:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get missing consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"MISSING_CONSENTS_ERROR",error:"Erro ao verificar consentimentos"},500)}});ln.post("/consents",pe,xe({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),Be("json",Zoe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),a=t.req.header("user-agent"),l=await Xr(r).grantConsent(e.id,n.consentType,n.collectionMethod,i,a);return L.info("Consent granted",{consentType:n.consentType,requestId:o,userId:e.id}),t.json({data:l,meta:{requestId:o,grantedAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to grant consent",{consentType:n.consentType,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_GRANT_ERROR",error:"Erro ao registrar consentimento"},500)}});ln.delete("/consents/:type",pe,xe({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("type"),o=t.get("requestId");try{return await Xr(r).revokeConsent(e.id,n),L.info("Consent revoked",{consentType:n,requestId:o,userId:e.id}),t.json({data:{success:!0,message:"Consentimento revogado com sucesso"},meta:{requestId:o,revokedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to revoke consent",{consentType:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_REVOKE_ERROR",error:"Erro ao revogar consentimento"},500)}});ln.get("/export-requests",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await Xr(r).getExportRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get export requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"EXPORT_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});ln.post("/export-requests",pe,xe({windowMs:36e5,max:5,message:"Limite de solicita\xE7\xF5es atingido"}),Be("json",Joe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),u=await Xr(r).createExportRequest(e.id,n.requestType,n.format,n.dateFrom,n.dateTo,i);return L.info("Export request created",{format:n.format,requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:u,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to create export request",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"EXPORT_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});ln.get("/deletion-requests",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await Xr(r).getDeletionRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get deletion requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"DELETION_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});ln.post("/deletion-requests",pe,xe({windowMs:864e5,max:3,message:"Limite di\xE1rio atingido"}),Be("json",Koe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),u=await Xr(r).createDeletionRequest(e.id,n.requestType,n.scope,n.reason,i);return L.info("Deletion request created",{requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:u,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){let a=i instanceof Error?i.message:"Unknown error";return L.error("Failed to create deletion request",{error:a,requestId:o,userId:e.id}),a.includes("reten\xE7\xE3o legal")?t.json({code:"LEGAL_HOLD",error:a},403):t.json({code:"DELETION_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});ln.get("/limits",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await Xr(r).getTransactionLimits(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get transaction limits",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"LIMITS_ERROR",error:"Erro ao buscar limites"},500)}});ln.post("/limits/check",pe,xe({windowMs:6e4,max:60,message:"Muitas verifica\xE7\xF5es"}),Be("json",Woe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let a=await Xr(r).checkTransactionLimit(e.id,n.limitType,n.amount);return t.json({data:a,meta:{requestId:o,checkedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to check transaction limit",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",limitType:n.limitType,requestId:o,userId:e.id}),t.json({code:"LIMIT_CHECK_ERROR",error:"Erro ao verificar limite"},500)}});ln.get("/audit",pe,xe({windowMs:6e4,max:10,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=Number(t.req.query("limit"))||50,i=t.req.query("eventType"),u=await Xr(r).getAuditHistory(e.id,{limit:o,eventType:i||void 0});return t.json({data:u,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get audit history",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"AUDIT_ERROR",error:"Erro ao buscar hist\xF3rico"},500)}});var WE=ln;var Qoe=/^\d{10,11}$/,Oh=s(t=>t?t.replace(/\D/g,""):t??void 0,"normalizeDigits"),H4=s(t=>({...t,cpf:t.cpf?Oh(t.cpf):t.cpf,email:t.email?.trim().toLowerCase(),phone:t.phone?Oh(t.phone):t.phone}),"sanitizeContactFields"),ao=new Ce,Xoe=c.object({cpf:c.string().optional(),email:c.string().email().optional(),isFavorite:c.boolean().default(!1),name:c.string().min(1,"Nome \xE9 obrigat\xF3rio"),notes:c.string().optional(),phone:c.string().optional()}),Yoe=c.object({cpf:c.string().optional().refine(t=>!t||$M(Oh(t)??""),"CPF inv\xE1lido"),email:c.string().email().optional(),id:c.string().uuid(),isFavorite:c.boolean().optional(),name:c.string().optional(),notes:c.string().optional(),phone:c.string().optional().refine(t=>!t||Qoe.test(Oh(t)??""),"Telefone inv\xE1lido")}),eie=c.object({isFavorite:c.boolean().optional(),limit:c.number().min(1).max(100).default(50),offset:c.number().default(0),search:c.string().optional()}),tie=c.object({limit:c.number().min(1).max(20).default(10),query:c.string().min(1,"Query de busca \xE9 obrigat\xF3ria")});ao.get("/",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Be("query",eie),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H($e.userId,e.id)];if(n.search){let l=`%${n.search}%`,d=Ni(kr($e.name,l),kr($e.email,l),kr($e.phone,l));d&&i.push(d)}n.isFavorite!==void 0&&i.push(H($e.isFavorite,n.isFavorite));let[{total:a}]=await r.select({total:Mk()}).from($e).where(Ee(...i)),u=await r.select().from($e).where(Ee(...i)).orderBy(Rt($e.isFavorite),Vo($e.name)).limit(n.limit).offset(n.offset);return t.json({data:{contacts:u,hasMore:a>n.offset+n.limit,total:a},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACTS_ERROR",error:"Failed to retrieve contacts"},500)}});ao.get("/:id",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from($e).where(Ee(H($e.id,n),H($e.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to get contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_ERROR",error:"Failed to retrieve contact"},500)}});ao.post("/",pe,xe({windowMs:60*1e3,max:20,message:"Too many creation attempts, please try again later"}),Be("json",Xoe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=H4(n),[a]=await r.insert($e).values({userId:e.id,name:i.name,email:i.email??null,phone:i.phone??null,cpf:i.cpf??null,notes:i.notes??null,isFavorite:i.isFavorite??!1,createdAt:new Date,updatedAt:new Date}).returning();return L.info("Contact created",{contactId:a.id,contactName:n.name,requestId:o,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return i instanceof Error&&i.message.includes("unique constraint")?t.json({code:"CONFLICT",error:"Email ou telefone j\xE1 cadastrado para este usu\xE1rio"},409):(L.error("Failed to create contact",{contactName:n.name,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_CREATE_ERROR",error:"Failed to create contact"},500))}});ao.put("/:id",pe,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Be("json",Yoe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let{id:a,...u}=o,l=H4(u),d={updatedAt:new Date};l.name!==void 0&&(d.name=l.name),l.email!==void 0&&(d.email=l.email??null),l.phone!==void 0&&(d.phone=l.phone??null),l.cpf!==void 0&&(d.cpf=l.cpf??null),l.notes!==void 0&&(d.notes=l.notes??null),l.isFavorite!==void 0&&(d.isFavorite=l.isFavorite);let[p]=await r.update($e).set(d).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return p?(L.info("Contact updated",{contactId:n,requestId:i,updatedFields:Object.keys(u).filter(f=>f!=="updatedAt"),userId:e.id}),t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(a){return L.error("Failed to update contact",{contactId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"CONTACT_UPDATE_ERROR",error:"Failed to update contact"},500)}});ao.delete("/:id",pe,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.delete($e).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return i?(L.info("Contact deleted",{contactId:n,requestId:o,userId:e.id}),t.json({data:{id:n,success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to delete contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_DELETE_ERROR",error:"Failed to delete contact"},500)}});ao.get("/search",pe,xe({windowMs:60*1e3,max:20,message:"Too many search attempts, please try again later"}),Be("query",tie),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=`%${n.query}%`,a=await r.select({id:$e.id,name:$e.name,email:$e.email,phone:$e.phone,isFavorite:$e.isFavorite}).from($e).where(Ee(H($e.userId,e.id),Ni(kr($e.name,i),kr($e.email,i),kr($e.phone,i)))).orderBy(Rt($e.isFavorite),Vo($e.name)).limit(n.limit);return L.info("Contacts searched",{requestId:o,resultsCount:a.length,searchQuery:n.query,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,searchQuery:n.query,userId:e.id}),t.json({code:"CONTACT_SEARCH_ERROR",error:"Failed to search contacts"},500)}});ao.get("/favorites",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from($e).where(Ee(H($e.userId,e.id),H($e.isFavorite,!0))).orderBy(Vo($e.name));return L.info("Favorite contacts retrieved",{favoritesCount:o.length,requestId:n,userId:e.id}),t.json({data:o,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get favorite contacts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"FAVORITES_ERROR",error:"Failed to retrieve favorite contacts"},500)}});ao.post("/:id/favorite",pe,xe({windowMs:60*1e3,max:30,message:"Too many toggle attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select({isFavorite:$e.isFavorite}).from($e).where(Ee(H($e.id,n),H($e.userId,e.id))).limit(1);if(!i)return t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404);let[a]=await r.update($e).set({isFavorite:!i.isFavorite,updatedAt:new Date}).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return L.info("Contact favorite status toggled",{contactId:n,newStatus:!i.isFavorite,previousStatus:i.isFavorite,requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to toggle favorite status",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"FAVORITE_TOGGLE_ERROR",error:"Failed to toggle favorite status"},500)}});ao.get("/stats",pe,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({isFavorite:$e.isFavorite,email:$e.email,phone:$e.phone}).from($e).where(H($e.userId,e.id)),i=o.length,a=o.filter(d=>d.isFavorite).length,u=o.filter(d=>d.email).length,l=o.filter(d=>d.phone).length;return t.json({data:{contactsWithEmail:u,contactsWithPhone:l,favoriteContacts:a,favoritePercentage:i>0?a/i*100:0,totalContacts:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get contact statistics",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONTACT_STATS_ERROR",error:"Failed to retrieve contact statistics"},500)}});var QE=ao;var co=new Ce,cd={code:"NOT_IMPLEMENTED",error:"Google Calendar sync is temporarily unavailable during migration. Please check back later.",message:"Esta funcionalidade est\xE1 temporariamente indispon\xEDvel durante a migra\xE7\xE3o do sistema."},zo=xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3});co.get("/sync/status",pe,zo,async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");return L.info("Google Calendar status requested (not implemented)",{requestId:r,userId:e.id}),t.json({data:{googleEmail:null,isConnected:!1,isEnabled:!1,lastSyncAt:null,migrationNotice:"Google Calendar sync is being migrated to new infrastructure"},meta:{requestId:r,retrievedAt:new Date().toISOString()}},200)});co.get("/sync/settings",pe,zo,async t=>{let e=t.get("requestId");return t.json({data:null,meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});co.get("/sync/history",pe,zo,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});co.put("/sync/settings",pe,zo,async t=>{let e=t.get("requestId");return t.json({...cd,meta:{requestId:e}},501)});co.post("/sync/full",pe,zo,async t=>{let e=t.get("requestId");return t.json({...cd,meta:{requestId:e}},501)});co.post("/sync/incremental",pe,zo,async t=>{let e=t.get("requestId");return t.json({...cd,meta:{requestId:e}},501)});co.post("/sync/event",pe,zo,async t=>{let e=t.get("requestId");return t.json({...cd,meta:{requestId:e}},501)});co.post("/sync/channel/renew",pe,zo,async t=>{let e=t.get("requestId");return t.json({...cd,meta:{requestId:e}},501)});co.get("/sync/conflicts",pe,zo,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});var XE=co;var ud=new Ce,m8e=c.object({services:c.object({database:c.enum(["connected","disconnected","error"]),api:c.enum(["operational","degraded","down"]),auth:c.enum(["operational","degraded","down"])}),status:c.enum(["ok","error"]),timestamp:c.string(),uptime:c.number(),version:c.string()});async function G4(t){let e=Date.now();try{let r="error";try{r="connected"}catch(i){L.error("Database health check failed",{error:i}),r="error"}let n=r==="connected",o={services:{database:r,api:n?"operational":"down",auth:n?"operational":"down"},status:n?"ok":"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"};return L.info("Health check completed",{databaseStatus:r,duration:Date.now()-e,status:o.status}),t.json(o)}catch(r){return L.error("Health check error",{duration:Date.now()-e,error:r instanceof Error?r.message:"Unknown error"}),t.json({services:{database:"error",api:"down",auth:"down"},status:"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"},500)}}s(G4,"healthCheckHandler");ud.get("/",G4);ud.get("/health",G4);ud.get("/ping",t=>t.json({message:"pong",timestamp:new Date().toISOString(),version:"v1"}));ud.get("/auth",async t=>{let e=t.get("auth");return t.json({authenticated:!!e,services:{database:"connected",api:"operational",auth:"operational"},status:"ok",timestamp:new Date().toISOString(),user:e?{id:e.user.id,email:e.user.email}:null,version:"1.0.0"})});var YE=ud;var rie=c.object({limit:c.coerce.number().int().min(1).max(100).default(50),offset:c.coerce.number().int().min(0).default(0),categoryId:c.string().optional(),accountId:c.string().optional(),type:c.enum(["transfer","debit","credit","pix","boleto"]).optional(),status:c.enum(["cancelled","failed","pending","posted"]).optional(),startDate:c.string().optional(),endDate:c.string().optional(),search:c.string().optional()}),Z4=c.object({amount:c.number(),categoryId:c.string().optional(),description:c.string(),transactionType:c.enum(["transfer","debit","credit","pix","boleto"]),status:c.enum(["cancelled","failed","pending","posted"]).default("pending"),transactionDate:c.string().optional(),accountId:c.string().optional(),paymentMethod:c.string().optional(),merchantName:c.string().optional(),notes:c.string().optional(),tags:c.array(c.string()).optional()}),nie=c.object({period:c.enum(["week","month","quarter","year"]).default("month"),accountId:c.string().optional()}),Ya=new Ce;Ya.get("/",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Be("query",rie),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(te.userId,e.id)];n.categoryId&&i.push(H(te.categoryId,n.categoryId)),n.accountId&&i.push(H(te.accountId,n.accountId)),n.type&&i.push(H(te.transactionType,n.type)),n.status&&i.push(H(te.status,n.status)),n.startDate&&i.push(ur(te.transactionDate,new Date(n.startDate))),n.endDate&&i.push(rr(te.transactionDate,new Date(n.endDate))),n.search&&i.push(kr(te.description,`%${n.search}%`));let a=await r.select().from(te).where(Ee(...i)).orderBy(Rt(te.createdAt)).limit(n.limit).offset(n.offset);return t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString(),total:a.length}})}catch(i){return L.error("Failed to get transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"TRANSACTIONS_ERROR",error:"Failed to retrieve transactions"},500)}});Ya.get("/statistics",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Be("query",nie),async t=>{let{user:e,db:r}=t.get("auth"),{period:n}=t.req.valid("query"),o=t.get("requestId");try{let i=new Date,a=new Date;switch(n){case"week":a.setDate(i.getDate()-7);break;case"month":a.setMonth(i.getMonth()-1);break;case"quarter":a.setMonth(i.getMonth()-3);break;case"year":a.setFullYear(i.getFullYear()-1);break}let u=await r.select().from(te).where(Ee(H(te.userId,e.id),ur(te.transactionDate,a),rr(te.transactionDate,i))),l=u.reduce((f,h)=>f+Number(h.amount),0),d=u.filter(f=>Number(f.amount)<0).reduce((f,h)=>f+Math.abs(Number(h.amount)),0),p=u.filter(f=>Number(f.amount)>0).reduce((f,h)=>f+Number(h.amount),0);return t.json({data:{balance:l,expenses:d,income:p,period:n,transactionsCount:u.length},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get transaction statistics",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"STATISTICS_ERROR",error:"Failed to retrieve statistics"},500)}});Ya.post("/",pe,xe({windowMs:60*1e3,max:10,message:"Too many transaction creation attempts, please try again later"}),Be("json",Z4),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=new Date,[a]=await r.insert(te).values({userId:e.id,amount:n.amount.toString(),description:n.description,transactionType:n.transactionType,status:n.status,transactionDate:n.transactionDate?new Date(n.transactionDate):i,categoryId:n.categoryId,accountId:n.accountId,paymentMethod:n.paymentMethod,merchantName:n.merchantName,notes:n.notes,tags:n.tags,isManualEntry:!0}).returning();return L.info("Transaction created",{amount:n.amount,requestId:o,transactionId:a.id,type:n.transactionType,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create transaction",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",requestId:o,type:n.transactionType,userId:e.id}),t.json({code:"TRANSACTION_CREATE_ERROR",error:"Failed to create transaction"},500)}});Ya.put("/:id",pe,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Be("json",Z4.partial()),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:te.id}).from(te).where(Ee(H(te.id,n),H(te.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada"},404);let u={updatedAt:new Date};o.description!==void 0&&(u.description=o.description),o.amount!==void 0&&(u.amount=o.amount.toString()),o.transactionType!==void 0&&(u.transactionType=o.transactionType),o.status!==void 0&&(u.status=o.status),o.categoryId!==void 0&&(u.categoryId=o.categoryId),o.accountId!==void 0&&(u.accountId=o.accountId),o.paymentMethod!==void 0&&(u.paymentMethod=o.paymentMethod),o.merchantName!==void 0&&(u.merchantName=o.merchantName),o.notes!==void 0&&(u.notes=o.notes),o.tags!==void 0&&(u.tags=o.tags);let[l]=await r.update(te).set(u).where(Ee(H(te.id,n),H(te.userId,e.id))).returning();return L.info("Transaction updated",{requestId:i,transactionId:n,userId:e.id}),t.json({data:l,meta:{updatedAt:new Date().toISOString(),requestId:i}})}catch(a){return L.error("Failed to update transaction",{error:a instanceof Error?a.message:"Unknown error",requestId:i,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_UPDATE_ERROR",error:"Failed to update transaction"},500)}});Ya.delete("/:id",pe,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return(await r.delete(te).where(Ee(H(te.id,n),H(te.userId,e.id))).returning()).length===0?t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada ou permiss\xE3o negada"},404):(L.info("Transaction deleted",{requestId:o,transactionId:n,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}}))}catch(i){return L.error("Failed to delete transaction",{error:i instanceof Error?i.message:"Unknown error",requestId:o,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_DELETE_ERROR",error:"Failed to delete transaction"},500)}});var eI=Ya;var oie=c.object({full_name:c.string().optional(),phone:c.string().optional(),cpf:c.string().optional(),birth_date:c.string().optional(),profile_image_url:c.string().url().optional()}),iie=c.record(c.string(),c.any()),sie=c.object({period_start:c.string(),period_end:c.string()}),J4=["theme","notificationsEmail","notificationsPush","notificationsSms","autoCategorize","budgetAlerts","voiceFeedback","accessibilityHighContrast","accessibilityLargeText","accessibilityScreenReader"],as=new Ce;as.get("/me",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select().from(J).where(H(J.id,e.id)).limit(1);return t.json({data:o||null,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user profile",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"PROFILE_ERROR",error:"Failed to retrieve profile"},500)}});as.put("/me",pe,xe({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Be("json",oie),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i={updatedAt:new Date};n.full_name&&(i.fullName=n.full_name),n.phone&&(i.phone=n.phone),n.cpf&&(i.cpf=n.cpf),n.birth_date&&(i.birthDate=n.birth_date),n.profile_image_url&&(i.profileImageUrl=n.profile_image_url);let[a]=await r.update(J).set(i).where(H(J.id,e.id)).returning();return L.info("User profile updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user profile",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PROFILE_UPDATE_ERROR",error:"Failed to update profile"},500)}});as.put("/me/preferences",pe,xe({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Be("json",iie),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let[i]=await r.select({id:Hr.id}).from(Hr).where(H(Hr.userId,e.id)).limit(1),a;if(i){let u={updatedAt:new Date};for(let l of J4)n[l]!==void 0&&(u[l]=n[l]);[a]=await r.update(Hr).set(u).where(H(Hr.id,i.id)).returning()}else{let u={userId:e.id,createdAt:new Date,updatedAt:new Date};for(let l of J4)n[l]!==void 0&&(u[l]=n[l]);[a]=await r.insert(Hr).values(u).returning()}return L.info("User preferences updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user preferences",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PREFERENCES_UPDATE_ERROR",error:"Failed to update preferences"},500)}});as.post("/me/last-login",pe,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{return await r.update(J).set({lastLogin:new Date}).where(H(J.id,e.id)),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(o){return L.warn("Failed to update last login",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}});as.get("/me/status",pe,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select({isActive:J.isActive,lastLogin:J.lastLogin}).from(J).where(H(J.id,e.id)).limit(1);return o?t.json({data:{isActive:o.isActive,lastLogin:o.lastLogin?.toISOString()||null},meta:{requestId:n,retrievedAt:new Date().toISOString()}}):t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to check user status",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}});as.get("/me/financial-summary",pe,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Be("query",sie),async t=>{let{user:e,db:r}=t.get("auth"),{period_start:n,period_end:o}=t.req.valid("query"),i=t.get("requestId");try{let u=(await r.select({amount:ut.amount,isIncome:ut.isIncome}).from(ut).where(Ee(H(ut.userId,e.id),ur(ut.createdAt,new Date(n)),rr(ut.createdAt,new Date(o))))).reduce((l,d)=>{let p=Number(d.amount);return d.isIncome?(l.income+=p,l.balance+=p):(l.expenses+=p,l.balance-=p),l},{income:0,expenses:0,balance:0});return t.json({data:u,meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get financial summary",{error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"FINANCIAL_SUMMARY_ERROR",error:"Failed to retrieve financial summary"},500)}});var tI=as;function aie(t){let e=t.toLowerCase().trim(),r={},n=[{intent:"check_balance",patterns:["saldo","quanto tenho","quanto dinheiro","verificar saldo"]},{intent:"transfer_money",patterns:["transferir","pagar","enviar dinheiro","mandar dinheiro"],entityExtractor:s(o=>cie(o,r),"entityExtractor")},{intent:"pay_bill",patterns:["conta","boleto","pagar conta","pagar boleto"],entityExtractor:s(()=>uie(e,r),"entityExtractor")},{intent:"transaction_history",patterns:["extrato","transa\xE7\xF5es","historico","compras"]},{intent:"pix_transfer",patterns:["pix","fazer pix"],entityExtractor:s(o=>lie(o,r),"entityExtractor")}];for(let{intent:o,patterns:i,entityExtractor:a}of n)if(i.some(u=>e.includes(u)))return a&&a(t),{intent:o,entities:r,confidence:.9};return{intent:"unknown",entities:r,confidence:.3}}s(aie,"detectIntentAndEntities");function cie(t,e){let r=t.match(/r?\$?\s*(\d+(?:,\d{1,2})?)/i);if(r){let o=Number.parseFloat(r[1].replace(",","."));e.amount=o,e.currency="BRL"}let n=t.match(/(?:para|para o|para a)\s+([a-z-\s]{2,30})/i);n&&(e.recipient=n[1].trim())}s(cie,"extractTransferEntities");function uie(t,e){t.includes("luz")?e.billType="electricity":t.includes("\xE1gua")?e.billType="water":t.includes("telefone")?e.billType="phone":t.includes("internet")&&(e.billType="internet")}s(uie,"extractBillEntities");function lie(t,e){let r=t.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/),n=t.match(/\(?(\d{2})?\)?\s?(\d{4,5})-?(\d{4})/),o=t.match(/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/);r?(e.pixKey=r[1],e.pixKeyType="EMAIL"):n?(e.pixKey=n[0],e.pixKeyType="PHONE"):o&&(e.pixKey=o[0],e.pixKeyType="CPF")}s(lie,"extractPixEntities");function die(t,e){switch(t){case"check_balance":return"Verificando seu saldo...";case"transfer_money":return e.amount&&e.recipient?`Preparando transfer\xEAncia de R$ ${e.amount} para ${e.recipient}`:"Entendi que quer transferir dinheiro. Para quem e quanto?";case"pay_bill":return"Buscando suas contas a pagar...";case"transaction_history":return"Mostrando seu hist\xF3rico de transa\xE7\xF5es...";case"pix_transfer":return"Preparando transfer\xEAncia PIX...";default:return"N\xE3o entendi o comando. Pode repetir?"}}s(die,"generateResponse");async function K4(t){let{commandText:e,sessionId:r,language:n,requireConfirmation:o,userId:i}=t,a=e??"";await new Promise(y=>setTimeout(y,300));let{intent:u,entities:l,confidence:d}=aie(a),p=d<.8||(o??!1),f=die(u,l);return{confidence:d,entities:l,intent:u,language:n??"pt-BR",processedAt:new Date().toISOString(),requiresConfirmation:p,response:f,sessionId:r}}s(K4,"processVoiceCommand");function W4(){return{commands:[{description:"Verificar saldo da conta",examples:["Qual \xE9 o meu saldo?","Quanto dinheiro eu tenho?","Mostrar meu saldo"],name:"check_balance"},{description:"Transferir dinheiro para outra conta",examples:["Transferir R$ 100 para Jo\xE3o","Pagar 50 reais para Maria","Enviar R$ 200 para o email teste@email.com"],name:"transfer_money"},{description:"Pagar contas e boletos",examples:["Pagar conta de luz","Pagar boleto do cart\xE3o","Quitar conta de telefone"],name:"pay_bill"},{description:"Fazer transfer\xEAncia PIX",examples:["Fazer PIX para o CPF 123.456.789-00","Enviar PIX para o telefone 11999999999","Transferir por PIX para maria@email.com"],name:"pix_transfer"},{description:"Ver hist\xF3rico de transa\xE7\xF5es",examples:["Mostrar minhas transa\xE7\xF5es","Ver extrato do m\xEAs","Hist\xF3rico de compras"],name:"transaction_history"}],language:"pt-BR"}}s(W4,"getAvailableCommands");var rI=new Ce,pie=c.object({commandText:c.string().min(1).max(1e3).optional(),sessionId:c.string().uuid(),audioData:c.string().optional(),language:c.string().default("pt-BR"),requireConfirmation:c.boolean().default(!1)}).refine(t=>t.audioData||t.commandText,{message:"Dados de \xE1udio ou texto do comando s\xE3o obrigat\xF3rios",path:["audioData"]}),L8e=c.object({commands:c.array(c.object({description:c.string(),examples:c.array(c.string()),name:c.string()})),language:c.string()});rI.post("/process",pe,xe({windowMs:60*1e3,max:30,message:"Too many voice commands, please try again later"}),Be("json",pie),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId"),{commandText:o,sessionId:i,audioData:a,language:u,requireConfirmation:l}=r,d=o??"";try{L.audit("Voice command processing started",{commandLength:d.length,component:"voice.processCommand",requestId:n,userId:e.id});let p=await K4({audioData:a,commandText:d,userId:e.id,context:{user:e},language:u,requireConfirmation:l,sessionId:i});return L.audit("Voice command processing completed",{command:d,requestId:n,result:p,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({data:p,meta:{processedAt:new Date().toISOString(),requestId:n}})}catch(p){return L.audit("Voice command processing failed",{command:d,error:p instanceof Error?p.message:"Unknown error",requestId:n,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({code:"VOICE_PROCESSING_ERROR",details:{command:d.substring(0,50)},error:"Failed to process voice command"},500)}});rI.get("/commands",pe,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=W4();return L.info("Voice commands list accessed",{requestId:r,userId:e.id}),t.json({data:n,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get voice commands",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"COMMANDS_RETRIEVAL_ERROR",error:"Failed to retrieve voice commands"},500)}});var nI=rI;var Ht=new Ce;Ht.use("*",TI());Ht.use("*",RI);Ht.use("*",async(t,e)=>{let r=crypto.randomUUID();t.set("requestId",r),await e()});zA(Ht);UA(Ht);Ht.route("/api/v1",YE);Ht.route("/api/v1/voice",nI);Ht.route("/api/v1/banking",U0);Ht.route("/api/v1/contacts",QE);Ht.route("/api/v1/bank-accounts",M0);Ht.route("/api/v1/users",tI);Ht.route("/api/v1/transactions",eI);Ht.route("/api/v1/calendar",JE);Ht.route("/api/v1/google-calendar",XE);Ht.route("/api/v1/compliance",WE);Ht.route("/api/v1/billing",GE);Ht.route("/api/v1/ai",_l);Ht.route("/api/v1/agent",kT);Ht.route("/cron",OI);IC(Ht);Ht.notFound(t=>{let e=t.get("requestId");return L.warn("Route not found",{ip:t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown",method:t.req.method,path:t.req.path,requestId:e,userAgent:t.req.header("User-Agent")||"unknown"}),t.json({error:"Not Found",message:`Route ${t.req.method} ${t.req.path} not found`,requestId:e,timestamp:new Date().toISOString()},404)});Ht.onError((t,e)=>{let r=e.get("requestId");return L.error("Unhandled error",{error:t.message,method:e.req.method,path:e.req.path,requestId:r,stack:t.stack}),e.json({error:"Internal server error",requestId:r,timestamp:new Date().toISOString()},500)});var Q4=Ht;console.log("[Vercel] Loading AegisWallet API...");console.log("[Vercel] App loaded successfully");var mie={runtime:"nodejs",maxDuration:30},fie=$h(Q4);0&&(module.exports={config});
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
