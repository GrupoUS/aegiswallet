// AegisWallet API - Bundled for Vercel Node.js Runtime
// Generated at: 2025-12-03T12:20:17.443Z
// Entry: src/server/vercel.ts
// Vercel expects: export default app (Hono instance)

var f5=Object.create;var Ep=Object.defineProperty;var h5=Object.getOwnPropertyDescriptor;var g5=Object.getOwnPropertyNames;var y5=Object.getPrototypeOf,v5=Object.prototype.hasOwnProperty;var s=(t,e)=>Ep(t,"name",{value:e,configurable:!0}),_5=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ee=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ue=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hn=(t,e)=>{for(var r in e)Ep(t,r,{get:e[r],enumerable:!0})},b5=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of g5(e))!v5.call(t,o)&&o!==r&&Ep(t,o,{get:()=>e[o],enumerable:!(n=h5(e,o))||n.enumerable});return t};var nu=(t,e,r)=>(r=t!=null?f5(y5(t)):{},b5(e||!t||!t.__esModule?Ep(r,"default",{value:t,enumerable:!0}):r,t));function Q(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,D))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(D in r&&r[D]===e[D])return!0;r=Object.getPrototypeOf(r)}return!1}var D,L5,me=ee(()=>{D=Symbol.for("drizzle:entityKind"),L5=Symbol.for("drizzle:hasOwnEntityKind");s(Q,"is")});var _t,Ln=ee(()=>{me();_t=class{static{s(this,"Column")}constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[D]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}});var uu,ay=ee(()=>{me();uu=class{static{s(this,"ColumnBuilder")}static[D]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}});var qn,jp=ee(()=>{qn=Symbol.for("drizzle:Name")});var Mp,cy,uy=ee(()=>{me();jp();Mp=class{static{s(this,"ForeignKeyBuilder")}static[D]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:n,columns:o,foreignColumns:i}=e();return{name:n,columns:o,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new cy(e,this)}},cy=class{static{s(this,"ForeignKey")}constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[D]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(c=>c.name),i=n.map(c=>c.name),a=[this.table[qn],...o,n[0].table[qn],...i];return e??`${a.join("_")}_fk`}}});function zp(t,...e){return t(...e)}var ly=ee(()=>{s(zp,"iife")});function my(t,e){return`${t[qn]}_${e.join("_")}_unique`}var dy,OA,py,fy=ee(()=>{me();jp();s(my,"uniqueKeyName");dy=class{static{s(this,"UniqueConstraintBuilder")}constructor(e,r){this.name=r,this.columns=e}static[D]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new py(e,this.columns,this.nullsNotDistinctConfig,this.name)}},OA=class{static{s(this,"UniqueOnConstraintBuilder")}static[D]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new dy(e,this.name)}},py=class{static{s(this,"UniqueConstraint")}constructor(e,r,n,o){this.table=e,this.columns=r,this.name=o??my(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}static[D]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}});function $A(t,e,r){for(let n=e;n<t.length;n++){let o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function RA(t,e=0){let r=[],n=e,o=!1;for(;n<t.length;){let i=t[n];if(i===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,i==="\\"){n+=2;continue}if(i==='"'){let[l,d]=$A(t,n+1,!0);r.push(l),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){let[l,d]=RA(t,n+1);r.push(l),n=d;continue}let[a,c]=$A(t,n,!1);r.push(a),n=c}return[r,n]}function NA(t){let[e]=RA(t,1);return e}function hy(t){return`{${t.map(e=>Array.isArray(e)?hy(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var gy=ee(()=>{s($A,"parsePgArrayValue");s(RA,"parsePgNestedArray");s(NA,"parsePgArray");s(hy,"makePgArray")});var xe,fe,yy,ua,vy,_y,ut=ee(()=>{ay();Ln();me();uy();ly();fy();gy();xe=class extends uu{static{s(this,"PgColumnBuilder")}foreignKeyConfigs=[];static[D]="PgColumnBuilder";array(e){return new vy(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>zp((i,a)=>{let c=new Mp(()=>{let l=i();return{columns:[e],foreignColumns:[l]}});return a.onUpdate&&c.onUpdate(a.onUpdate),a.onDelete&&c.onDelete(a.onDelete),c.build(r)},n,o))}buildExtraConfigColumn(e){return new yy(e,this.config)}},fe=class extends _t{static{s(this,"PgColumn")}constructor(e,r){r.uniqueName||(r.uniqueName=my(e,[r.name])),super(e,r),this.table=e}static[D]="PgColumn"},yy=class extends fe{static{s(this,"ExtraConfigColumn")}static[D]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},ua=class{static{s(this,"IndexedColumn")}static[D]="IndexedColumn";constructor(e,r,n,o){this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=o}name;keyAsName;type;indexConfig},vy=class extends xe{static{s(this,"PgArrayBuilder")}static[D]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){let r=this.config.baseBuilder.build(e);return new _y(e,this.config,r)}},_y=class t extends fe{static{s(this,"PgArray")}constructor(e,r,n,o){super(e,r),this.baseColumn=n,this.range=o,this.size=r.size}size;static[D]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=NA(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let n=e.map(o=>o===null?null:Q(this.baseColumn,t)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?n:hy(n)}}});function DA(t){return!!t&&typeof t=="function"&&Up in t&&t[Up]===!0}function sr(t,e){return Array.isArray(e)?Ty(t,[...e],void 0):Ey(t,e,void 0)}function Ty(t,e,r){let n=Object.assign(o=>new Sy(o??"",n),{enumName:t,enumValues:e,schema:r,[Up]:!0});return n}function Ey(t,e,r){let n=Object.assign(o=>new by(o??"",n),{enumName:t,enumValues:Object.values(e),schema:r,[Up]:!0});return n}var by,wy,Up,Sy,xy,Lp=ee(()=>{me();ut();by=class extends xe{static{s(this,"PgEnumObjectColumnBuilder")}static[D]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new wy(e,this.config)}},wy=class extends fe{static{s(this,"PgEnumObjectColumn")}static[D]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},Up=Symbol.for("drizzle:isPgEnum");s(DA,"isPgEnum");Sy=class extends xe{static{s(this,"PgEnumColumnBuilder")}static[D]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new xy(e,this.config)}},xy=class extends fe{static{s(this,"PgEnumColumn")}static[D]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};s(sr,"pgEnum");s(Ty,"pgEnumWithSchema");s(Ey,"pgEnumObjectWithSchema")});var Qt,bs,Fn=ee(()=>{me();Qt=class{static{s(this,"Subquery")}static[D]="Subquery";constructor(e,r,n,o=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o,usedTables:i}}},bs=class extends Qt{static{s(this,"WithSubquery")}static[D]="WithSubquery"}});var jA,MA=ee(()=>{jA="0.44.7"});var ky,Iy,fr,xi=ee(()=>{ly();MA();fr={startActiveSpan(t,e){return ky?(Iy||(Iy=ky.trace.getTracer("drizzle-orm",jA)),zp((r,n)=>n.startActiveSpan(t,o=>{try{return e(o)}catch(i){throw o.setStatus({code:r.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{o.end()}}),ky,Iy)):e()}}});var Et,Vo=ee(()=>{Et=Symbol.for("drizzle:ViewBaseConfig")});function q5(t){return typeof t=="object"&&t!==null&&zA in t}function Ur(t){return t[qn]}function Ei(t){return`${t[Ti]??"public"}.${t[qn]}`}var Ti,lu,Py,qp,Fp,la,Ay,zA,he,Lr=ee(()=>{me();jp();Ti=Symbol.for("drizzle:Schema"),lu=Symbol.for("drizzle:Columns"),Py=Symbol.for("drizzle:ExtraConfigColumns"),qp=Symbol.for("drizzle:OriginalName"),Fp=Symbol.for("drizzle:BaseName"),la=Symbol.for("drizzle:IsAlias"),Ay=Symbol.for("drizzle:ExtraConfigBuilder"),zA=Symbol.for("drizzle:IsDrizzleTable"),he=class{static{s(this,"Table")}static[D]="Table";static Symbol={Name:qn,Schema:Ti,OriginalName:qp,Columns:lu,ExtraConfigColumns:Py,BaseName:Fp,IsAlias:la,ExtraConfigBuilder:Ay};[qn];[qp];[Ti];[lu];[Py];[Fp];[la]=!1;[zA]=!0;[Ay]=void 0;constructor(e,r,n){this[qn]=this[qp]=e,this[Ti]=r,this[Fp]=n}};s(q5,"isTable");s(Ur,"getTableName");s(Ei,"getTableUniqueName")});function Bp(t){return t!=null&&typeof t.getSQL=="function"}function F5(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}function B5(t){return new ws(t)}function Oy(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}function H5(t,e){return new Nr(t,e)}function M(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new ar(t[0]));for(let[n,o]of e.entries())r.push(o,new ar(t[n+1]));return new _e(r)}function Z5(t){return new Bn(t)}function Ho(t,e){return t.map(r=>{if(Q(r,Bn)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(Q(r,Nr)&&Q(r.value,Bn)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}function J5(t){return typeof t=="object"&&t!==null&&UA in t}function K5(t){return t[Et].name}var Cy,ar,_e,ws,$y,Ry,V5,Nr,Bn,UA,Dr,Bt=ee(()=>{me();Lp();Fn();xi();Vo();Ln();Lr();Cy=class{static{s(this,"FakePrimitiveParam")}static[D]="FakePrimitiveParam"};s(Bp,"isSQLWrapper");s(F5,"mergeQueries");ar=class{static{s(this,"StringChunk")}static[D]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new _e([this])}},_e=class t{static{s(this,"SQL")}constructor(e){this.queryChunks=e;for(let r of e)if(Q(r,he)){let n=r[he.Symbol.Schema];this.usedTables.push(n===void 0?r[he.Symbol.Name]:n+"."+r[he.Symbol.Name])}}static[D]="SQL";decoder=$y;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return fr.startActiveSpan("drizzle.buildSQL",r=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){let n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:i,escapeParam:a,prepareTyping:c,inlineParams:l,paramStartIndex:d}=n;return F5(e.map(p=>{if(Q(p,ar))return{sql:p.value.join(""),params:[]};if(Q(p,ws))return{sql:i(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){let m=[new ar("(")];for(let[h,y]of p.entries())m.push(y),h<p.length-1&&m.push(new ar(", "));return m.push(new ar(")")),this.buildQueryFromSourceParams(m,n)}if(Q(p,t))return this.buildQueryFromSourceParams(p.queryChunks,{...n,inlineParams:l||p.shouldInlineParams});if(Q(p,he)){let m=p[he.Symbol.Schema],h=p[he.Symbol.Name];return{sql:m===void 0||p[la]?i(h):i(m)+"."+i(h),params:[]}}if(Q(p,_t)){let m=o.getColumnCasing(p);if(r.invokeSource==="indexes")return{sql:i(m),params:[]};let h=p.table[he.Symbol.Schema];return{sql:p.table[la]||h===void 0?i(p.table[he.Symbol.Name])+"."+i(m):i(h)+"."+i(p.table[he.Symbol.Name])+"."+i(m),params:[]}}if(Q(p,Dr)){let m=p[Et].schema,h=p[Et].name;return{sql:m===void 0||p[Et].isAlias?i(h):i(m)+"."+i(h),params:[]}}if(Q(p,Nr)){if(Q(p.value,Bn))return{sql:a(d.value++,p),params:[p],typings:["none"]};let m=p.value===null?null:p.encoder.mapToDriverValue(p.value);if(Q(m,t))return this.buildQueryFromSourceParams([m],n);if(l)return{sql:this.mapInlineParam(m,n),params:[]};let h=["none"];return c&&(h=[c(p.encoder)]),{sql:a(d.value++,m),params:[m],typings:h}}return Q(p,Bn)?{sql:a(d.value++,p),params:[p],typings:["none"]}:Q(p,t.Aliased)&&p.fieldAlias!==void 0?{sql:i(p.fieldAlias),params:[]}:Q(p,Qt)?p._.isWith?{sql:i(p._.alias),params:[]}:this.buildQueryFromSourceParams([new ar("("),p._.sql,new ar(") "),new ws(p._.alias)],n):DA(p)?p.schema?{sql:i(p.schema)+"."+i(p.enumName),params:[]}:{sql:i(p.enumName),params:[]}:Bp(p)?p.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([p.getSQL()],n):this.buildQueryFromSourceParams([new ar("("),p.getSQL(),new ar(")")],n):l?{sql:this.mapInlineParam(p,n),params:[]}:{sql:a(d.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},ws=class{static{s(this,"Name")}constructor(e){this.value=e}static[D]="Name";brand;getSQL(){return new _e([this])}};s(B5,"name");s(Oy,"isDriverValueEncoder");$y={mapFromDriverValue:s(t=>t,"mapFromDriverValue")},Ry={mapToDriverValue:s(t=>t,"mapToDriverValue")},V5={...$y,...Ry},Nr=class{static{s(this,"Param")}constructor(e,r=Ry){this.value=e,this.encoder=r}static[D]="Param";brand;getSQL(){return new _e([this])}};s(H5,"param");s(M,"sql");(t=>{function e(){return new _e([])}s(e,"empty"),t.empty=e;function r(l){return new _e(l)}s(r,"fromList"),t.fromList=r;function n(l){return new _e([new ar(l)])}s(n,"raw"),t.raw=n;function o(l,d){let p=[];for(let[m,h]of l.entries())m>0&&d!==void 0&&p.push(d),p.push(h);return new _e(p)}s(o,"join"),t.join=o;function i(l){return new ws(l)}s(i,"identifier"),t.identifier=i;function a(l){return new Bn(l)}s(a,"placeholder2"),t.placeholder=a;function c(l,d){return new Nr(l,d)}s(c,"param2"),t.param=c})(M||(M={}));(t=>{class e{static{s(this,"Aliased")}constructor(n,o){this.sql=n,this.fieldAlias=o}static[D]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(_e||(_e={}));Bn=class{static{s(this,"Placeholder")}constructor(e){this.name=e}static[D]="Placeholder";getSQL(){return new _e([this])}};s(Z5,"placeholder");s(Ho,"fillPlaceholders");UA=Symbol.for("drizzle:IsDrizzleView"),Dr=class{static{s(this,"View")}static[D]="View";[Et];[UA]=!0;constructor({name:e,schema:r,selectedFields:n,query:o}){this[Et]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new _e([this])}};s(J5,"isView");s(K5,"getViewName");_t.prototype.getSQL=function(){return new _e([this])};he.prototype.getSQL=function(){return new _e([this])};Qt.prototype.getSQL=function(){return new _e([this])}});function da(t,e){return new Proxy(t,new Ss(e,!1))}function G5(t,e){return new Proxy(t,new Vp(e))}function Vn(t,e){return new Proxy(t,new ki(new Proxy(t.table,new Ss(e,!1))))}function Hp(t,e){return new _e.Aliased(pa(t.sql,e),t.fieldAlias)}function pa(t,e){return M.join(t.queryChunks.map(r=>Q(r,_t)?Vn(r,e):Q(r,_e)?pa(r,e):Q(r,_e.Aliased)?Hp(r,e):r))}var ki,Ss,Vp,Zp=ee(()=>{Ln();me();Bt();Lr();Vo();ki=class{static{s(this,"ColumnAliasProxyHandler")}constructor(e){this.table=e}static[D]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},Ss=class{static{s(this,"TableAliasProxyHandler")}constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[D]="TableAliasProxyHandler";get(e,r){if(r===he.Symbol.IsAlias)return!0;if(r===he.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===he.Symbol.OriginalName)return this.alias;if(r===Et)return{...e[Et],name:this.alias,isAlias:!0};if(r===he.Symbol.Columns){let o=e[he.Symbol.Columns];if(!o)return o;let i={};return Object.keys(o).map(a=>{i[a]=new Proxy(o[a],new ki(new Proxy(e,this)))}),i}let n=e[r];return Q(n,_t)?new Proxy(n,new ki(new Proxy(e,this))):n}},Vp=class{static{s(this,"RelationTableAliasProxyHandler")}constructor(e){this.alias=e}static[D]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?da(e.sourceTable,this.alias):e[r]}};s(da,"aliasedTable");s(G5,"aliasedRelation");s(Vn,"aliasedTableColumn");s(Hp,"mapColumnsInAliasedSQLToAlias");s(pa,"mapColumnsInSQLToAlias")});var ma,ho,du,Jp=ee(()=>{me();ma=class extends Error{static{s(this,"DrizzleError")}static[D]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},ho=class t extends Error{static{s(this,"DrizzleQueryError")}constructor(e,r,n){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=n,Error.captureStackTrace(this,t),n&&(this.cause=n)}},du=class extends ma{static{s(this,"TransactionRollbackError")}static[D]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}});var Kp,xs,Ts,fa=ee(()=>{me();Kp=class{static{s(this,"ConsoleLogWriter")}static[D]="ConsoleLogWriter";write(e){console.log(e)}},xs=class{static{s(this,"DefaultLogger")}static[D]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new Kp}logQuery(e,r){let n=r.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),o=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${o}`)}},Ts=class{static{s(this,"NoopLogger")}static[D]="NoopLogger";logQuery(){}}});var LA=ee(()=>{});var Ar,Zo=ee(()=>{me();Ar=class{static{s(this,"QueryPromise")}static[D]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}}});function pu(t,e,r){let n={},o=t.reduce((i,{path:a,field:c},l)=>{let d;Q(c,_t)?d=c:Q(c,_e)?d=c.decoder:d=c.sql.decoder;let p=i;for(let[m,h]of a.entries())if(m<a.length-1)h in p||(p[h]={}),p=p[h];else{let y=e[l],g=p[h]=y===null?null:d.mapFromDriverValue(y);if(r&&Q(c,_t)&&a.length===2){let f=a[0];f in n?typeof n[f]=="string"&&n[f]!==Ur(c.table)&&(n[f]=!1):n[f]=g===null?Ur(c.table):!1}}return i},{});if(r&&Object.keys(n).length>0)for(let[i,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(o[i]=null);return o}function gn(t,e){return Object.entries(t).reduce((r,[n,o])=>{if(typeof n!="string")return r;let i=e?[...e,n]:[n];return Q(o,_t)||Q(o,_e)||Q(o,_e.Aliased)?r.push({path:i,field:o}):Q(o,he)?r.push(...gn(o[he.Symbol.Columns],i)):r.push(...gn(o,i)),r},[])}function ha(t,e){let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let[o,i]of r.entries())if(i!==n[o])return!1;return!0}function mu(t,e){let r=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,o])=>Q(o,_e)||Q(o,_t)?[n,o]:[n,new Nr(o,t[he.Symbol.Columns][n])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function Ny(t,e){for(let r of e)for(let n of Object.getOwnPropertyNames(r.prototype))n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))}function ga(t){return t[he.Symbol.Columns]}function W5(t){return t[Et].selectedFields}function go(t){return Q(t,Qt)?t._.alias:Q(t,Dr)?t[Et].name:Q(t,_e)?void 0:t[he.Symbol.IsAlias]?t[he.Symbol.Name]:t[he.Symbol.BaseName]}function lt(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function fu(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Q5,wt=ee(()=>{Ln();me();Bt();Fn();Lr();Vo();s(pu,"mapResultRow");s(gn,"orderSelectedFields");s(ha,"haveSameKeys");s(mu,"mapUpdateSet");s(Ny,"applyMixins");s(ga,"getTableColumns");s(W5,"getViewSelectedFields");s(go,"getTableLikeName");s(lt,"getColumnNameAndConfig");s(fu,"isConfig");Q5=typeof TextDecoder>"u"?null:new TextDecoder});var Jo,hu=ee(()=>{me();ut();Jo=class extends xe{static{s(this,"PgIntColumnBaseBuilder")}static[D]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}});function qA(t,e){let{name:r,config:n}=lt(t,e);return n.mode==="number"?new Dy(r):new My(r)}var Dy,jy,My,zy,Uy=ee(()=>{me();wt();ut();hu();Dy=class extends Jo{static{s(this,"PgBigInt53Builder")}static[D]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new jy(e,this.config)}},jy=class extends fe{static{s(this,"PgBigInt53")}static[D]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},My=class extends Jo{static{s(this,"PgBigInt64Builder")}static[D]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new zy(e,this.config)}},zy=class extends fe{static{s(this,"PgBigInt64")}static[D]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};s(qA,"bigint")});function FA(t,e){let{name:r,config:n}=lt(t,e);return n.mode==="number"?new Ly(r):new Fy(r)}var Ly,qy,Fy,By,Vy=ee(()=>{me();wt();ut();Ly=class extends xe{static{s(this,"PgBigSerial53Builder")}static[D]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new qy(e,this.config)}},qy=class extends fe{static{s(this,"PgBigSerial53")}static[D]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Fy=class extends xe{static{s(this,"PgBigSerial64Builder")}static[D]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new By(e,this.config)}},By=class extends fe{static{s(this,"PgBigSerial64")}static[D]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};s(FA,"bigserial")});function ve(t){return new Hy(t??"")}var Hy,Zy,Jy=ee(()=>{me();ut();Hy=class extends xe{static{s(this,"PgBooleanBuilder")}static[D]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Zy(e,this.config)}},Zy=class extends fe{static{s(this,"PgBoolean")}static[D]="PgBoolean";getSQLType(){return"boolean"}};s(ve,"boolean")});function BA(t,e={}){let{name:r,config:n}=lt(t,e);return new Ky(r,n)}var Ky,Gy,Wy=ee(()=>{me();wt();ut();Ky=class extends xe{static{s(this,"PgCharBuilder")}static[D]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Gy(e,this.config)}},Gy=class extends fe{static{s(this,"PgChar")}static[D]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};s(BA,"char")});function VA(t){return new Qy(t??"")}var Qy,Xy,Yy=ee(()=>{me();ut();Qy=class extends xe{static{s(this,"PgCidrBuilder")}static[D]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Xy(e,this.config)}},Xy=class extends fe{static{s(this,"PgCidr")}static[D]="PgCidr";getSQLType(){return"cidr"}};s(VA,"cidr")});function HA(t){return(e,r)=>{let{name:n,config:o}=lt(e,r);return new ev(n,o,t)}}var ev,tv,rv=ee(()=>{me();wt();ut();ev=class extends xe{static{s(this,"PgCustomColumnBuilder")}static[D]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new tv(e,this.config)}},tv=class extends fe{static{s(this,"PgCustomColumn")}static[D]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};s(HA,"customType")});var yo,Gp=ee(()=>{me();Bt();ut();yo=class extends xe{static{s(this,"PgDateColumnBaseBuilder")}static[D]="PgDateColumnBaseBuilder";defaultNow(){return this.default(M`now()`)}}});function jr(t,e){let{name:r,config:n}=lt(t,e);return n?.mode==="date"?new nv(r):new ov(r)}var nv,gu,ov,yu,iv=ee(()=>{me();wt();ut();Gp();nv=class extends yo{static{s(this,"PgDateBuilder")}static[D]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new gu(e,this.config)}},gu=class extends fe{static{s(this,"PgDate")}static[D]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},ov=class extends yo{static{s(this,"PgDateStringBuilder")}static[D]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new yu(e,this.config)}},yu=class extends fe{static{s(this,"PgDateString")}static[D]="PgDateString";getSQLType(){return"date"}};s(jr,"date")});function ZA(t){return new sv(t??"")}var sv,av,cv=ee(()=>{me();ut();sv=class extends xe{static{s(this,"PgDoublePrecisionBuilder")}static[D]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new av(e,this.config)}},av=class extends fe{static{s(this,"PgDoublePrecision")}static[D]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};s(ZA,"doublePrecision")});function yn(t){return new uv(t??"")}var uv,lv,dv=ee(()=>{me();ut();uv=class extends xe{static{s(this,"PgInetBuilder")}static[D]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new lv(e,this.config)}},lv=class extends fe{static{s(this,"PgInet")}static[D]="PgInet";getSQLType(){return"inet"}};s(yn,"inet")});function kt(t){return new pv(t??"")}var pv,mv,fv=ee(()=>{me();ut();hu();pv=class extends Jo{static{s(this,"PgIntegerBuilder")}static[D]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new mv(e,this.config)}},mv=class extends fe{static{s(this,"PgInteger")}static[D]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};s(kt,"integer")});function JA(t,e={}){let{name:r,config:n}=lt(t,e);return new hv(r,n)}var hv,gv,yv=ee(()=>{me();wt();ut();hv=class extends xe{static{s(this,"PgIntervalBuilder")}static[D]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new gv(e,this.config)}},gv=class extends fe{static{s(this,"PgInterval")}static[D]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};s(JA,"interval")});function KA(t){return new vv(t??"")}var vv,vu,_v=ee(()=>{me();ut();vv=class extends xe{static{s(this,"PgJsonBuilder")}static[D]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new vu(e,this.config)}},vu=class extends fe{static{s(this,"PgJson")}static[D]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};s(KA,"json")});function st(t){return new bv(t??"")}var bv,_u,wv=ee(()=>{me();ut();bv=class extends xe{static{s(this,"PgJsonbBuilder")}static[D]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new _u(e,this.config)}},_u=class extends fe{static{s(this,"PgJsonb")}static[D]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};s(st,"jsonb")});function GA(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new Sv(r):new Tv(r)}var Sv,xv,Tv,Ev,kv=ee(()=>{me();wt();ut();Sv=class extends xe{static{s(this,"PgLineBuilder")}static[D]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new xv(e,this.config)}},xv=class extends fe{static{s(this,"PgLineTuple")}static[D]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},Tv=class extends xe{static{s(this,"PgLineABCBuilder")}static[D]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Ev(e,this.config)}},Ev=class extends fe{static{s(this,"PgLineABC")}static[D]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};s(GA,"line")});function WA(t){return new Iv(t??"")}var Iv,Pv,Av=ee(()=>{me();ut();Iv=class extends xe{static{s(this,"PgMacaddrBuilder")}static[D]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Pv(e,this.config)}},Pv=class extends fe{static{s(this,"PgMacaddr")}static[D]="PgMacaddr";getSQLType(){return"macaddr"}};s(WA,"macaddr")});function QA(t){return new Cv(t??"")}var Cv,Ov,$v=ee(()=>{me();ut();Cv=class extends xe{static{s(this,"PgMacaddr8Builder")}static[D]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Ov(e,this.config)}},Ov=class extends fe{static{s(this,"PgMacaddr8")}static[D]="PgMacaddr8";getSQLType(){return"macaddr8"}};s(QA,"macaddr8")});function zv(t,e){let{name:r,config:n}=lt(t,e),o=n?.mode;return o==="number"?new Nv(r,n?.precision,n?.scale):o==="bigint"?new jv(r,n?.precision,n?.scale):new Rv(r,n?.precision,n?.scale)}var Rv,bu,Nv,Dv,jv,Mv,at,Uv=ee(()=>{me();wt();ut();Rv=class extends xe{static{s(this,"PgNumericBuilder")}static[D]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new bu(e,this.config)}},bu=class extends fe{static{s(this,"PgNumeric")}static[D]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},Nv=class extends xe{static{s(this,"PgNumericNumberBuilder")}static[D]="PgNumericNumberBuilder";constructor(e,r,n){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=n}build(e){return new Dv(e,this.config)}},Dv=class extends fe{static{s(this,"PgNumericNumber")}static[D]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},jv=class extends xe{static{s(this,"PgNumericBigIntBuilder")}static[D]="PgNumericBigIntBuilder";constructor(e,r,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=n}build(e){return new Mv(e,this.config)}},Mv=class extends fe{static{s(this,"PgNumericBigInt")}static[D]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};s(zv,"numeric");at=zv});function XA(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new Lv(r):new Fv(r)}var Lv,qv,Fv,Bv,Vv=ee(()=>{me();wt();ut();Lv=class extends xe{static{s(this,"PgPointTupleBuilder")}static[D]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new qv(e,this.config)}},qv=class extends fe{static{s(this,"PgPointTuple")}static[D]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},Fv=class extends xe{static{s(this,"PgPointObjectBuilder")}static[D]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Bv(e,this.config)}},Bv=class extends fe{static{s(this,"PgPointObject")}static[D]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};s(XA,"point")});function X5(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function YA(t,e){let r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}function Hv(t){let e=X5(t),r=0,n=e[r];r+=1;let o=new DataView(e.buffer),i=o.getUint32(r,n===1);r+=4;let a;if(i&536870912&&(a=o.getUint32(r,n===1),r+=4),(i&65535)===1){let c=YA(e,r);r+=8;let l=YA(e,r);return r+=8,[c,l]}throw new Error("Unsupported geometry type")}var eC=ee(()=>{s(X5,"hexToBytes");s(YA,"bytesToFloat64");s(Hv,"parseEWKB")});function tC(t,e){let{name:r,config:n}=lt(t,e);return!n?.mode||n.mode==="tuple"?new Zv(r):new Kv(r)}var Zv,Jv,Kv,Gv,Wv=ee(()=>{me();wt();ut();eC();Zv=class extends xe{static{s(this,"PgGeometryBuilder")}static[D]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Jv(e,this.config)}},Jv=class extends fe{static{s(this,"PgGeometry")}static[D]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Hv(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Kv=class extends xe{static{s(this,"PgGeometryObjectBuilder")}static[D]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Gv(e,this.config)}},Gv=class extends fe{static{s(this,"PgGeometryObject")}static[D]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=Hv(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};s(tC,"geometry")});function rC(t){return new Qv(t??"")}var Qv,Xv,Yv=ee(()=>{me();ut();Qv=class extends xe{static{s(this,"PgRealBuilder")}static[D]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Xv(e,this.config)}},Xv=class extends fe{static{s(this,"PgReal")}static[D]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=s(e=>typeof e=="string"?Number.parseFloat(e):e,"mapFromDriverValue")};s(rC,"real")});function nC(t){return new e_(t??"")}var e_,t_,r_=ee(()=>{me();ut();e_=class extends xe{static{s(this,"PgSerialBuilder")}static[D]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new t_(e,this.config)}},t_=class extends fe{static{s(this,"PgSerial")}static[D]="PgSerial";getSQLType(){return"serial"}};s(nC,"serial")});function oC(t){return new n_(t??"")}var n_,o_,i_=ee(()=>{me();ut();hu();n_=class extends Jo{static{s(this,"PgSmallIntBuilder")}static[D]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new o_(e,this.config)}},o_=class extends fe{static{s(this,"PgSmallInt")}static[D]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=s(e=>typeof e=="string"?Number(e):e,"mapFromDriverValue")};s(oC,"smallint")});function iC(t){return new s_(t??"")}var s_,a_,c_=ee(()=>{me();ut();s_=class extends xe{static{s(this,"PgSmallSerialBuilder")}static[D]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new a_(e,this.config)}},a_=class extends fe{static{s(this,"PgSmallSerial")}static[D]="PgSmallSerial";getSQLType(){return"smallserial"}};s(iC,"smallserial")});function A(t,e={}){let{name:r,config:n}=lt(t,e);return new u_(r,n)}var u_,l_,d_=ee(()=>{me();wt();ut();u_=class extends xe{static{s(this,"PgTextBuilder")}static[D]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new l_(e,this.config)}},l_=class extends fe{static{s(this,"PgText")}static[D]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};s(A,"text")});function sC(t,e={}){let{name:r,config:n}=lt(t,e);return new p_(r,n.withTimezone??!1,n.precision)}var p_,wu,m_=ee(()=>{me();wt();ut();Gp();p_=class extends yo{static{s(this,"PgTimeBuilder")}constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[D]="PgTimeBuilder";build(e){return new wu(e,this.config)}},wu=class extends fe{static{s(this,"PgTime")}static[D]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};s(sC,"time")});function K(t,e={}){let{name:r,config:n}=lt(t,e);return n?.mode==="string"?new h_(r,n.withTimezone??!1,n.precision):new f_(r,n?.withTimezone??!1,n?.precision)}var f_,Su,h_,xu,g_=ee(()=>{me();wt();ut();Gp();f_=class extends yo{static{s(this,"PgTimestampBuilder")}static[D]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Su(e,this.config)}},Su=class extends fe{static{s(this,"PgTimestamp")}static[D]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=s(e=>new Date(this.withTimezone?e:e+"+0000"),"mapFromDriverValue");mapToDriverValue=s(e=>e.toISOString(),"mapToDriverValue")},h_=class extends yo{static{s(this,"PgTimestampStringBuilder")}static[D]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new xu(e,this.config)}},xu=class extends fe{static{s(this,"PgTimestampString")}static[D]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};s(K,"timestamp")});function ya(t){return new y_(t??"")}var y_,Tu,v_=ee(()=>{me();Bt();ut();y_=class extends xe{static{s(this,"PgUUIDBuilder")}static[D]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(M`gen_random_uuid()`)}build(e){return new Tu(e,this.config)}},Tu=class extends fe{static{s(this,"PgUUID")}static[D]="PgUUID";getSQLType(){return"uuid"}};s(ya,"uuid")});function aC(t,e={}){let{name:r,config:n}=lt(t,e);return new __(r,n)}var __,b_,w_=ee(()=>{me();wt();ut();__=class extends xe{static{s(this,"PgVarcharBuilder")}static[D]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new b_(e,this.config)}},b_=class extends fe{static{s(this,"PgVarchar")}static[D]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};s(aC,"varchar")});function cC(t,e){let{name:r,config:n}=lt(t,e);return new S_(r,n)}var S_,x_,T_=ee(()=>{me();wt();ut();S_=class extends xe{static{s(this,"PgBinaryVectorBuilder")}static[D]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new x_(e,this.config)}},x_=class extends fe{static{s(this,"PgBinaryVector")}static[D]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};s(cC,"bit")});function uC(t,e){let{name:r,config:n}=lt(t,e);return new E_(r,n)}var E_,k_,I_=ee(()=>{me();wt();ut();E_=class extends xe{static{s(this,"PgHalfVectorBuilder")}static[D]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new k_(e,this.config)}},k_=class extends fe{static{s(this,"PgHalfVector")}static[D]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};s(uC,"halfvec")});function lC(t,e){let{name:r,config:n}=lt(t,e);return new P_(r,n)}var P_,A_,C_=ee(()=>{me();wt();ut();P_=class extends xe{static{s(this,"PgSparseVectorBuilder")}static[D]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new A_(e,this.config)}},A_=class extends fe{static{s(this,"PgSparseVector")}static[D]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};s(lC,"sparsevec")});function dC(t,e){let{name:r,config:n}=lt(t,e);return new O_(r,n)}var O_,$_,R_=ee(()=>{me();wt();ut();O_=class extends xe{static{s(this,"PgVectorBuilder")}static[D]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new $_(e,this.config)}},$_=class extends fe{static{s(this,"PgVector")}static[D]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};s(dC,"vector")});function pC(){return{bigint:qA,bigserial:FA,boolean:ve,char:BA,cidr:VA,customType:HA,date:jr,doublePrecision:ZA,inet:yn,integer:kt,interval:JA,json:KA,jsonb:st,line:GA,macaddr:WA,macaddr8:QA,numeric:zv,point:XA,geometry:tC,real:rC,serial:nC,smallint:oC,smallserial:iC,text:A,time:sC,timestamp:K,uuid:ya,varchar:aC,bit:cC,halfvec:uC,sparsevec:lC,vector:dC}}var mC=ee(()=>{Uy();Vy();Jy();Wy();Yy();rv();iv();cv();dv();fv();yv();_v();wv();kv();Av();$v();Uv();Vv();Wv();Yv();r_();i_();c_();d_();m_();g_();v_();w_();T_();I_();C_();R_();s(pC,"getPgColumnBuilders")});function D_(t,e,r,n,o=t){let i=new hr(t,n,o),a=typeof e=="function"?e(pC()):e,c=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.build(i);return i[N_].push(...h.buildForeignKeys(y,i)),[p,y]})),l=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.buildExtraConfigColumn(i);return[p,y]})),d=Object.assign(i,c);return d[he.Symbol.Columns]=c,d[he.Symbol.ExtraConfigColumns]=l,r&&(d[hr.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:s(()=>(d[hr.Symbol.EnableRLS]=!0,d),"enableRLS")})}var N_,fC,hr,ke,Ii=ee(()=>{me();Lr();mC();N_=Symbol.for("drizzle:PgInlineForeignKeys"),fC=Symbol.for("drizzle:EnableRLS"),hr=class extends he{static{s(this,"PgTable")}static[D]="PgTable";static Symbol=Object.assign({},he.Symbol,{InlineForeignKeys:N_,EnableRLS:fC});[N_]=[];[fC]=!1;[he.Symbol.ExtraConfigBuilder]=void 0;[he.Symbol.ExtraConfigColumns]={}};s(D_,"pgTableWithSchema");ke=s((t,e,r)=>D_(t,e,r,void 0),"pgTable")});var Wp,j_,M_=ee(()=>{me();Ii();Wp=class{static{s(this,"PrimaryKeyBuilder")}static[D]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new j_(e,this.columns,this.name)}},j_=class{static{s(this,"PrimaryKey")}constructor(e,r,n){this.table=e,this.columns=r,this.name=n}static[D]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[hr.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}});function cr(t,e){return Oy(e)&&!Bp(t)&&!Q(t,Nr)&&!Q(t,Bn)&&!Q(t,_t)&&!Q(t,he)&&!Q(t,Dr)?new Nr(t,e):t}function Ee(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new _e(e):new _e([new ar("("),M.join(e,new ar(" and ")),new ar(")")])}function Pi(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new _e(e):new _e([new ar("("),M.join(e,new ar(" or ")),new ar(")")])}function U_(t){return M`not ${t}`}function Es(t,e){return Array.isArray(e)?e.length===0?M`false`:M`${t} in ${e.map(r=>cr(r,t))}`:M`${t} in ${cr(e,t)}`}function F_(t,e){return Array.isArray(e)?e.length===0?M`true`:M`${t} not in ${e.map(r=>cr(r,t))}`:M`${t} not in ${cr(e,t)}`}function Eu(t){return M`${t} is null`}function B_(t){return M`${t} is not null`}function V_(t){return M`exists ${t}`}function H_(t){return M`not exists ${t}`}function Z_(t,e,r){return M`${t} between ${cr(e,t)} and ${cr(r,t)}`}function J_(t,e,r){return M`${t} not between ${cr(e,t)} and ${cr(r,t)}`}function K_(t,e){return M`${t} like ${e}`}function G_(t,e){return M`${t} not like ${e}`}function Cr(t,e){return M`${t} ilike ${e}`}function W_(t,e){return M`${t} not ilike ${e}`}function Y5(t,e){if(Array.isArray(e)){if(e.length===0)throw new Error("arrayContains requires at least one value");let r=M`${cr(e,t)}`;return M`${t} @> ${r}`}return M`${t} @> ${cr(e,t)}`}function e9(t,e){if(Array.isArray(e)){if(e.length===0)throw new Error("arrayContained requires at least one value");let r=M`${cr(e,t)}`;return M`${t} <@ ${r}`}return M`${t} <@ ${cr(e,t)}`}function t9(t,e){if(Array.isArray(e)){if(e.length===0)throw new Error("arrayOverlaps requires at least one value");let r=M`${cr(e,t)}`;return M`${t} && ${r}`}return M`${t} && ${cr(e,t)}`}var H,z_,L_,ur,q_,Xt,hC=ee(()=>{Ln();me();Lr();Bt();s(cr,"bindIfParam");H=s((t,e)=>M`${t} = ${cr(e,t)}`,"eq"),z_=s((t,e)=>M`${t} <> ${cr(e,t)}`,"ne");s(Ee,"and");s(Pi,"or");s(U_,"not");L_=s((t,e)=>M`${t} > ${cr(e,t)}`,"gt"),ur=s((t,e)=>M`${t} >= ${cr(e,t)}`,"gte"),q_=s((t,e)=>M`${t} < ${cr(e,t)}`,"lt"),Xt=s((t,e)=>M`${t} <= ${cr(e,t)}`,"lte");s(Es,"inArray");s(F_,"notInArray");s(Eu,"isNull");s(B_,"isNotNull");s(V_,"exists");s(H_,"notExists");s(Z_,"between");s(J_,"notBetween");s(K_,"like");s(G_,"notLike");s(Cr,"ilike");s(W_,"notIlike");s(Y5,"arrayContains");s(e9,"arrayContained");s(t9,"arrayOverlaps")});function Ko(t){return M`${t} asc`}function Nt(t){return M`${t} desc`}var gC=ee(()=>{Bt();s(Ko,"asc");s(Nt,"desc")});var Q_=ee(()=>{hC();gC()});function X_(){return{and:Ee,between:Z_,eq:H,exists:V_,gt:L_,gte:ur,ilike:Cr,inArray:Es,isNull:Eu,isNotNull:B_,like:K_,lt:q_,lte:Xt,ne:z_,not:U_,notBetween:J_,notExists:H_,notLike:G_,notIlike:W_,notInArray:F_,or:Pi,sql:M}}function Y_(){return{sql:M,asc:Ko,desc:Nt}}function Au(t,e){Object.keys(t).length===1&&"default"in t&&!Q(t.default,he)&&(t=t.default);let r={},n={},o={};for(let[i,a]of Object.entries(t))if(Q(a,he)){let c=Ei(a),l=n[c];r[c]=i,o[i]={tsName:i,dbName:a[he.Symbol.Name],schema:a[he.Symbol.Schema],columns:a[he.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let p of Object.values(a[he.Symbol.Columns]))p.primary&&o[i].primaryKey.push(p);let d=a[he.Symbol.ExtraConfigBuilder]?.(a[he.Symbol.ExtraConfigColumns]);if(d)for(let p of Object.values(d))Q(p,Wp)&&o[i].primaryKey.push(...p.columns)}else if(Q(a,Iu)){let c=Ei(a.table),l=r[c],d=a.config(e(a.table)),p;for(let[m,h]of Object.entries(d))if(l){let y=o[l];y.relations[m]=h,p&&y.primaryKey.push(...p)}else c in n||(n[c]={relations:{},primaryKey:p}),n[c].relations[m]=h}return{tables:o,tableNamesMap:r}}function qe(t,e){return new Iu(t,r=>Object.fromEntries(Object.entries(e(r)).map(([n,o])=>[n,o.withFieldName(n)])))}function yC(t){return s(function(r,n){return new Go(t,r,n,n?.fields.reduce((o,i)=>o&&i.notNull,!0)??!1)},"one")}function vC(t){return s(function(r,n){return new va(t,r,n)},"many")}function eb(t,e,r){if(Q(r,Go)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=e[Ei(r.referencedTable)];if(!n)throw new Error(`Table "${r.referencedTable[he.Symbol.Name]}" not found in schema`);let o=t[n];if(!o)throw new Error(`Table "${n}" not found in schema`);let i=r.sourceTable,a=e[Ei(i)];if(!a)throw new Error(`Table "${i[he.Symbol.Name]}" not found in schema`);let c=[];for(let l of Object.values(o.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&c.push(l);if(c.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[he.Symbol.Name]}". Please specify relation name`);if(c[0]&&Q(c[0],Go)&&c[0].config)return{fields:c[0].config.references,references:c[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function Cu(t){return{one:yC(t),many:vC(t)}}function Pu(t,e,r,n,o=i=>i){let i={};for(let[a,c]of n.entries())if(c.isJson){let l=e.relations[c.tsKey],d=r[a],p=typeof d=="string"?JSON.parse(d):d;i[c.tsKey]=Q(l,Go)?p&&Pu(t,t[c.relationTableTsKey],p,c.selection,o):p.map(m=>Pu(t,t[c.relationTableTsKey],m,c.selection,o))}else{let l=o(r[a]),d=c.field,p;Q(d,_t)?p=d:Q(d,_e)?p=d.decoder:p=d.sql.decoder,i[c.tsKey]=l===null?null:p.mapFromDriverValue(l)}return i}var ku,Iu,Go,va,_a=ee(()=>{Lr();Ln();me();M_();Q_();Bt();ku=class{static{s(this,"Relation")}constructor(e,r,n){this.sourceTable=e,this.referencedTable=r,this.relationName=n,this.referencedTableName=r[he.Symbol.Name]}static[D]="Relation";referencedTableName;fieldName},Iu=class{static{s(this,"Relations")}constructor(e,r){this.table=e,this.config=r}static[D]="Relations"},Go=class t extends ku{static{s(this,"One")}constructor(e,r,n,o){super(e,r,n?.relationName),this.config=n,this.isNullable=o}static[D]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},va=class t extends ku{static{s(this,"Many")}constructor(e,r,n){super(e,r,n?.relationName),this.config=n}static[D]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};s(X_,"getOperators");s(Y_,"getOrderByOperators");s(Au,"extractTablesRelationalConfig");s(qe,"relations");s(yC,"createOne");s(vC,"createMany");s(eb,"normalizeRelation");s(Cu,"createTableRelationsHelpers");s(Pu,"mapRelationalRow")});function tb(t){return M`count(${t||M.raw("*")})`.mapWith(Number)}function r9(t){return M`count(distinct ${t})`.mapWith(Number)}function n9(t){return M`avg(${t})`.mapWith(String)}function o9(t){return M`avg(distinct ${t})`.mapWith(String)}function Ou(t){return M`sum(${t})`.mapWith(String)}function i9(t){return M`sum(distinct ${t})`.mapWith(String)}function s9(t){return M`max(${t})`.mapWith(Q(t,_t)?t:String)}function a9(t){return M`min(${t})`.mapWith(Q(t,_t)?t:String)}var _C=ee(()=>{Ln();me();Bt();s(tb,"count");s(r9,"countDistinct");s(n9,"avg");s(o9,"avgDistinct");s(Ou,"sum");s(i9,"sumDistinct");s(s9,"max");s(a9,"min")});function ba(t){return JSON.stringify(t)}function c9(t,e){return Array.isArray(e)?M`${t} <-> ${ba(e)}`:M`${t} <-> ${e}`}function u9(t,e){return Array.isArray(e)?M`${t} <+> ${ba(e)}`:M`${t} <+> ${e}`}function l9(t,e){return Array.isArray(e)?M`${t} <#> ${ba(e)}`:M`${t} <#> ${e}`}function d9(t,e){return Array.isArray(e)?M`${t} <=> ${ba(e)}`:M`${t} <=> ${e}`}function p9(t,e){return Array.isArray(e)?M`${t} <~> ${ba(e)}`:M`${t} <~> ${e}`}function m9(t,e){return Array.isArray(e)?M`${t} <%> ${ba(e)}`:M`${t} <%> ${e}`}var bC=ee(()=>{Bt();s(ba,"toSql");s(c9,"l2Distance");s(u9,"l1Distance");s(l9,"innerProduct");s(d9,"cosineDistance");s(p9,"hammingDistance");s(m9,"jaccardDistance")});var wC=ee(()=>{_C();bC()});var Qp=ee(()=>{Q_();wC();Bt()});var rb={};hn(rb,{BaseName:()=>Fp,Column:()=>_t,ColumnAliasProxyHandler:()=>ki,ColumnBuilder:()=>uu,Columns:()=>lu,ConsoleLogWriter:()=>Kp,DefaultLogger:()=>xs,DrizzleError:()=>ma,DrizzleQueryError:()=>ho,ExtraConfigBuilder:()=>Ay,ExtraConfigColumns:()=>Py,FakePrimitiveParam:()=>Cy,IsAlias:()=>la,Many:()=>va,Name:()=>ws,NoopLogger:()=>Ts,One:()=>Go,OriginalName:()=>qp,Param:()=>Nr,Placeholder:()=>Bn,QueryPromise:()=>Ar,Relation:()=>ku,RelationTableAliasProxyHandler:()=>Vp,Relations:()=>Iu,SQL:()=>_e,Schema:()=>Ti,StringChunk:()=>ar,Subquery:()=>Qt,Table:()=>he,TableAliasProxyHandler:()=>Ss,TransactionRollbackError:()=>du,View:()=>Dr,ViewBaseConfig:()=>Et,WithSubquery:()=>bs,aliasedRelation:()=>G5,aliasedTable:()=>da,aliasedTableColumn:()=>Vn,and:()=>Ee,applyMixins:()=>Ny,arrayContained:()=>e9,arrayContains:()=>Y5,arrayOverlaps:()=>t9,asc:()=>Ko,avg:()=>n9,avgDistinct:()=>o9,between:()=>Z_,bindIfParam:()=>cr,cosineDistance:()=>d9,count:()=>tb,countDistinct:()=>r9,createMany:()=>vC,createOne:()=>yC,createTableRelationsHelpers:()=>Cu,desc:()=>Nt,entityKind:()=>D,eq:()=>H,exists:()=>V_,extractTablesRelationalConfig:()=>Au,fillPlaceholders:()=>Ho,getColumnNameAndConfig:()=>lt,getOperators:()=>X_,getOrderByOperators:()=>Y_,getTableColumns:()=>ga,getTableLikeName:()=>go,getTableName:()=>Ur,getTableUniqueName:()=>Ei,getViewName:()=>K5,getViewSelectedFields:()=>W5,gt:()=>L_,gte:()=>ur,hammingDistance:()=>p9,hasOwnEntityKind:()=>L5,haveSameKeys:()=>ha,ilike:()=>Cr,inArray:()=>Es,innerProduct:()=>l9,is:()=>Q,isConfig:()=>fu,isDriverValueEncoder:()=>Oy,isNotNull:()=>B_,isNull:()=>Eu,isSQLWrapper:()=>Bp,isTable:()=>q5,isView:()=>J5,jaccardDistance:()=>m9,l1Distance:()=>u9,l2Distance:()=>c9,like:()=>K_,lt:()=>q_,lte:()=>Xt,mapColumnsInAliasedSQLToAlias:()=>Hp,mapColumnsInSQLToAlias:()=>pa,mapRelationalRow:()=>Pu,mapResultRow:()=>pu,mapUpdateSet:()=>mu,max:()=>s9,min:()=>a9,name:()=>B5,ne:()=>z_,noopDecoder:()=>$y,noopEncoder:()=>Ry,noopMapper:()=>V5,normalizeRelation:()=>eb,not:()=>U_,notBetween:()=>J_,notExists:()=>H_,notIlike:()=>W_,notInArray:()=>F_,notLike:()=>G_,or:()=>Pi,orderSelectedFields:()=>gn,param:()=>H5,placeholder:()=>Z5,relations:()=>qe,sql:()=>M,sum:()=>Ou,sumDistinct:()=>i9,textDecoder:()=>Q5});var gr=ee(()=>{Zp();ay();Ln();me();Jp();fa();LA();Zo();_a();Qp();Fn();Lr();wt();Vo()});function CC(t){return 0}function ub(t,e=!1){let{protocol:r}=new URL(t),n="http:"+t.substring(r.length),{username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,searchParams:m,hash:h}=new URL(n);i=decodeURIComponent(i),o=decodeURIComponent(o),d=decodeURIComponent(d);let y=o+":"+i,g=e?Object.fromEntries(m.entries()):p;return{href:t,protocol:r,auth:y,username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,query:g,hash:h}}function Nu(t){let e=1779033703,r=3144134277,n=1013904242,o=2773480762,i=1359893119,a=2600822924,c=528734635,l=1541459225,d=0,p=0,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=I((b,S)=>b>>>S|b<<32-S,"rrot"),y=new Uint32Array(64),g=new Uint8Array(64),f=I(()=>{for(let N=0,j=0;N<16;N++,j+=4)y[N]=g[j]<<24|g[j+1]<<16|g[j+2]<<8|g[j+3];for(let N=16;N<64;N++){let j=h(y[N-15],7)^h(y[N-15],18)^y[N-15]>>>3,W=h(y[N-2],17)^h(y[N-2],19)^y[N-2]>>>10;y[N]=y[N-16]+j+y[N-7]+W|0}let b=e,S=r,k=n,R=o,O=i,C=a,$=c,P=l;for(let N=0;N<64;N++){let j=h(O,6)^h(O,11)^h(O,25),W=O&C^~O&$,Z=P+j+W+m[N]+y[N]|0,F=h(b,2)^h(b,13)^h(b,22),Y=b&S^b&k^S&k,re=F+Y|0;P=$,$=C,C=O,O=R+Z|0,R=k,k=S,S=b,b=Z+re|0}e=e+b|0,r=r+S|0,n=n+k|0,o=o+R|0,i=i+O|0,a=a+C|0,c=c+$|0,l=l+P|0,p=0},"process"),_=I(b=>{typeof b=="string"&&(b=new TextEncoder().encode(b));for(let S=0;S<b.length;S++)g[p++]=b[S],p===64&&f();d+=b.length},"add"),w=I(()=>{if(g[p++]=128,p==64&&f(),p+8>64){for(;p<64;)g[p++]=0;f()}for(;p<58;)g[p++]=0;let b=d*8;g[p++]=b/1099511627776&255,g[p++]=b/4294967296&255,g[p++]=b>>>24,g[p++]=b>>>16&255,g[p++]=b>>>8&255,g[p++]=b&255,f();let S=new Uint8Array(32);return S[0]=e>>>24,S[1]=e>>>16&255,S[2]=e>>>8&255,S[3]=e&255,S[4]=r>>>24,S[5]=r>>>16&255,S[6]=r>>>8&255,S[7]=r&255,S[8]=n>>>24,S[9]=n>>>16&255,S[10]=n>>>8&255,S[11]=n&255,S[12]=o>>>24,S[13]=o>>>16&255,S[14]=o>>>8&255,S[15]=o&255,S[16]=i>>>24,S[17]=i>>>16&255,S[18]=i>>>8&255,S[19]=i&255,S[20]=a>>>24,S[21]=a>>>16&255,S[22]=a>>>8&255,S[23]=a&255,S[24]=c>>>24,S[25]=c>>>16&255,S[26]=c>>>8&255,S[27]=c&255,S[28]=l>>>24,S[29]=l>>>16&255,S[30]=l>>>8&255,S[31]=l&255,S},"digest");return t===void 0?{add:_,digest:w}:(_(t),w())}function jC(t){return crypto.getRandomValues(Le.alloc(t))}function MC(t){if(t==="sha256")return{update:I(function(e){return{digest:I(function(){return Le.from(Nu(e))},"digest")}},"update")};if(t==="md5")return{update:I(function(e){return{digest:I(function(){return typeof e=="string"?ib.hashStr(e):ib.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}function zC(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:I(function(r){return{digest:I(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let n=e.length;if(n>64)e=Nu(e);else if(n<64){let l=new Uint8Array(64);l.set(e),e=l}let o=new Uint8Array(64),i=new Uint8Array(64);for(let l=0;l<64;l++)o[l]=54^e[l],i[l]=92^e[l];let a=new Uint8Array(r.length+64);a.set(o,0),a.set(r,64);let c=new Uint8Array(96);return c.set(i,0),c.set(Nu(a),64),Le.from(Nu(c))},"digest")}},"update")}}function qC(...t){return t.join("/")}function BC(t,e){e(new Error("No filesystem"))}function e1({socket:t,servername:e}){return t.startTls(e),t}function i1(t,{alphabet:e,scratchArr:r}={}){if(!Ru)if(Ru=new Uint16Array(256),em=new Uint16Array(256),kC)for(let y=0;y<256;y++)Ru[y]=Xp[y&15]<<8|Xp[y>>>4],em[y]=Yp[y&15]<<8|Yp[y>>>4];else for(let y=0;y<256;y++)Ru[y]=Xp[y&15]|Xp[y>>>4]<<8,em[y]=Yp[y&15]|Yp[y>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let n=t.length,o=n>>>1,i=n>>>2,a=r||new Uint16Array(n),c=new Uint32Array(t.buffer,t.byteOffset,i),l=new Uint32Array(a.buffer,a.byteOffset,o),d=e==="upper"?em:Ru,p=0,m=0,h;if(kC)for(;p<i;)h=c[p++],l[m++]=d[h>>>8&255]<<16|d[h&255],l[m++]=d[h>>>24]<<16|d[h>>>16&255];else for(;p<i;)h=c[p++],l[m++]=d[h>>>24]<<16|d[h>>>16&255],l[m++]=d[h>>>8&255]<<16|d[h&255];for(p<<=2;p<n;)a[p]=d[t[p++]];return c3.decode(a.subarray(0,n))}function s1(t,e={}){let r="",n=t.length,o=a3>>>1,i=Math.ceil(n/o),a=new Uint16Array(i>1?o:n);for(let c=0;c<i;c++){let l=c*o,d=l+o;r+=i1(t.subarray(l,d),s3(i3({},e),{scratchArr:a}))}return r}function a1(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():s1(t,e)}function yb(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}function h1(t){return t instanceof Le?"\\x"+a1(t):t}function sb(t){let{query:e,params:r}=t instanceof l1?t.toParameterizedQuery():t;return{query:e,params:r.map(n=>h1((0,d3.prepareValue)(n)))}}function Ai(t,{arrayMode:e,fullResults:r,fetchOptions:n,isolationLevel:o,readOnly:i,deferrable:a,authToken:c,disableWarningInBrowsers:l}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=ub(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:p,username:m,hostname:h,port:y,pathname:g}=d;if(p!=="postgres:"&&p!=="postgresql:"||!m||!h||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function f(w,...b){if(!(Array.isArray(w)&&Array.isArray(w.raw)&&Array.isArray(b)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new tm(_,new l1(w,b))}s(f,"D"),I(f,"templateFn"),f.query=(w,b,S)=>new tm(_,{query:w,params:b??[]},S),f.unsafe=w=>new p1(w),f.transaction=async(w,b)=>{if(typeof w=="function"&&(w=w(f)),!Array.isArray(w))throw new Error(IC);w.forEach(R=>{if(!(R instanceof tm))throw new Error(IC)});let S=w.map(R=>R.queryData),k=w.map(R=>R.opts??{});return _(S,k,b)};async function _(w,b,S){let{fetchEndpoint:k,fetchFunction:R}=ks,O=Array.isArray(w)?{queries:w.map(be=>sb(be))}:sb(w),C=n??{},$=e??!1,P=r??!1,N=o,j=i,W=a;S!==void 0&&(S.fetchOptions!==void 0&&(C={...C,...S.fetchOptions}),S.arrayMode!==void 0&&($=S.arrayMode),S.fullResults!==void 0&&(P=S.fullResults),S.isolationLevel!==void 0&&(N=S.isolationLevel),S.readOnly!==void 0&&(j=S.readOnly),S.deferrable!==void 0&&(W=S.deferrable)),b!==void 0&&!Array.isArray(b)&&b.fetchOptions!==void 0&&(C={...C,...b.fetchOptions});let Z=c;!Array.isArray(b)&&b?.authToken!==void 0&&(Z=b.authToken);let F=typeof k=="function"?k(h,y,{jwtAuth:Z!==void 0}):k,Y={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},re=await y1(Z);re&&(Y.Authorization=`Bearer ${re}`),Array.isArray(w)&&(N!==void 0&&(Y["Neon-Batch-Isolation-Level"]=N),j!==void 0&&(Y["Neon-Batch-Read-Only"]=String(j)),W!==void 0&&(Y["Neon-Batch-Deferrable"]=String(W))),l||ks.disableWarningInBrowsers||yb();let ie;try{ie=await(R??fetch)(F,{method:"POST",body:JSON.stringify(O),headers:Y,...C})}catch(be){let Te=new wa(`Error connecting to database: ${be}`);throw Te.sourceError=be,Te}if(ie.ok){let be=await ie.json();if(Array.isArray(w)){let Te=be.results;if(!Array.isArray(Te))throw new wa("Neon internal error: unexpected result format");return Te.map((Xe,Ze)=>{let J=b[Ze]??{},Oe=J.arrayMode??$,ge=J.fullResults??P;return ab(Xe,{arrayMode:Oe,fullResults:ge,types:J.types})})}else{let Te=b??{},Xe=Te.arrayMode??$,Ze=Te.fullResults??P;return ab(be,{arrayMode:Xe,fullResults:Ze,types:Te.types})}}else{let{status:be}=ie;if(be===400){let Te=await ie.json(),Xe=new wa(Te.message);for(let Ze of p3)Xe[Ze]=Te[Ze]??void 0;throw Xe}else{let Te=await ie.text();throw new wa(`Server error (HTTP status ${be}): ${Te}`)}}}return s(_,"Y"),I(_,"execute"),f}function ab(t,{arrayMode:e,fullResults:r,types:n}){let o=new l3.default(n),i=t.fields.map(l=>l.name),a=t.fields.map(l=>o.getTypeParser(l.dataTypeID)),c=e===!0?t.rows.map(l=>l.map((d,p)=>d===null?null:a[p](d))):t.rows.map(l=>Object.fromEntries(l.map((d,p)=>[i[p],d===null?null:a[p](d)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=c,t._parsers=a,t._types=o,t):c}async function y1(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new wa("Error getting auth token.");throw e instanceof Error&&(r=new wa(`Error getting auth token: ${e.message}`)),r}}function _1(t,e){if(e)return{callback:e,result:void 0};let r,n,o=I(function(a,c){a?r(a):n(c)},"cb"),i=new t(function(a,c){n=a,r=c});return{callback:o,result:i}}var f9,Sa,h9,g9,y9,v9,_9,I,on,et,Hn,PC,Is,Sr,Fe,b9,w9,S9,rm,cb,x9,Le,Ye,Ce,Ps,AC,SC,nb,$u,ks,Du,OC,$C,RC,DC,T9,E9,k9,I9,P9,A9,C9,O9,nm,lb,$9,Wo,ib,R9,db,UC,om,im,ju,LC,sm,N9,pb,FC,mb,VC,fb,HC,ZC,JC,ob,KC,D9,j9,M9,z9,GC,WC,U9,L9,hb,q9,F9,QC,B9,V9,H9,Z9,XC,YC,J9,t1,K9,G9,r1,n1,W9,Q9,X9,Y9,xC,am,e3,t3,r3,TC,n3,o3,EC,i3,s3,a3,kC,c3,gb,Xp,Yp,u3,o1,Ru,em,c1,l1,d1,p1,l3,d3,m1,wa,IC,p3,g1,tm,m3,f3,v1,h3,g3,b1,vo,Mu,tbe,rbe,nbe,obe,Lt,zu=ee(()=>{f9=Object.create,Sa=Object.defineProperty,h9=Object.getOwnPropertyDescriptor,g9=Object.getOwnPropertyNames,y9=Object.getPrototypeOf,v9=Object.prototype.hasOwnProperty,_9=s((t,e,r)=>e in t?Sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"Io"),I=s((t,e)=>Sa(t,"name",{value:e,configurable:!0}),"a"),on=s((t,e)=>()=>(t&&(e=t(t=0)),e),"G"),et=s((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),"T"),Hn=s((t,e)=>{for(var r in e)Sa(t,r,{get:e[r],enumerable:!0})},"ie"),PC=s((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of g9(e))!v9.call(t,o)&&o!==r&&Sa(t,o,{get:s(()=>e[o],"get"),enumerable:!(n=h9(e,o))||n.enumerable});return t},"Dn"),Is=s((t,e,r)=>(r=t!=null?f9(y9(t)):{},PC(e||!t||!t.__esModule?Sa(r,"default",{value:t,enumerable:!0}):r,t)),"Se"),Sr=s(t=>PC(Sa({},"__esModule",{value:!0}),t),"O"),Fe=s((t,e,r)=>_9(t,typeof e!="symbol"?e+"":e,r),"E"),b9=et(t=>{"use strict";Ce(),t.byteLength=l,t.toByteArray=p,t.fromByteArray=y;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,a=o.length;i<a;++i)e[i]=o[i],r[o.charCodeAt(i)]=i;var i,a;r[45]=62,r[95]=63;function c(g){var f=g.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=g.indexOf("=");_===-1&&(_=f);var w=_===f?0:4-_%4;return[_,w]}s(c,"qn"),I(c,"getLens");function l(g){var f=c(g),_=f[0],w=f[1];return(_+w)*3/4-w}s(l,"Po"),I(l,"byteLength");function d(g,f,_){return(f+_)*3/4-_}s(d,"Bo"),I(d,"_byteLength");function p(g){var f,_=c(g),w=_[0],b=_[1],S=new n(d(g,w,b)),k=0,R=b>0?w-4:w,O;for(O=0;O<R;O+=4)f=r[g.charCodeAt(O)]<<18|r[g.charCodeAt(O+1)]<<12|r[g.charCodeAt(O+2)]<<6|r[g.charCodeAt(O+3)],S[k++]=f>>16&255,S[k++]=f>>8&255,S[k++]=f&255;return b===2&&(f=r[g.charCodeAt(O)]<<2|r[g.charCodeAt(O+1)]>>4,S[k++]=f&255),b===1&&(f=r[g.charCodeAt(O)]<<10|r[g.charCodeAt(O+1)]<<4|r[g.charCodeAt(O+2)]>>2,S[k++]=f>>8&255,S[k++]=f&255),S}s(p,"Ro"),I(p,"toByteArray");function m(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}s(m,"Lo"),I(m,"tripletToBase64");function h(g,f,_){for(var w,b=[],S=f;S<_;S+=3)w=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(g[S+2]&255),b.push(m(w));return b.join("")}s(h,"Fo"),I(h,"encodeChunk");function y(g){for(var f,_=g.length,w=_%3,b=[],S=16383,k=0,R=_-w;k<R;k+=S)b.push(h(g,k,k+S>R?R:k+S));return w===1?(f=g[_-1],b.push(e[f>>2]+e[f<<4&63]+"==")):w===2&&(f=(g[_-2]<<8)+g[_-1],b.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),b.join("")}s(y,"ko"),I(y,"fromByteArray")}),w9=et(t=>{Ce(),t.read=function(e,r,n,o,i){var a,c,l=i*8-o-1,d=(1<<l)-1,p=d>>1,m=-7,h=n?i-1:0,y=n?-1:1,g=e[r+h];for(h+=y,a=g&(1<<-m)-1,g>>=-m,m+=l;m>0;a=a*256+e[r+h],h+=y,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=o;m>0;c=c*256+e[r+h],h+=y,m-=8);if(a===0)a=1-p;else{if(a===d)return c?NaN:(g?-1:1)*(1/0);c=c+Math.pow(2,o),a=a-p}return(g?-1:1)*c*Math.pow(2,a-o)},t.write=function(e,r,n,o,i,a){var c,l,d,p=a*8-i-1,m=(1<<p)-1,h=m>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:a-1,f=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,c=m):(c=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+h>=1?r+=y/d:r+=y*Math.pow(2,1-h),r*d>=2&&(c++,d/=2),c+h>=m?(l=0,c=m):c+h>=1?(l=(r*d-1)*Math.pow(2,i),c=c+h):(l=r*Math.pow(2,h-1)*Math.pow(2,i),c=0));i>=8;e[n+g]=l&255,g+=f,l/=256,i-=8);for(c=c<<i|l,p+=i;p>0;e[n+g]=c&255,g+=f,c/=256,p-=8);e[n+g-f]|=_*128}}),S9=et(t=>{"use strict";Ce();var e=b9(),r=w9(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let v=new Uint8Array(1),x={foo:I(function(){return 42},"foo")};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(v,x),v.foo()===42}catch{return!1}}s(i,"Mo"),I(i,"typedArraySupport"),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:I(function(){if(c.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:I(function(){if(c.isBuffer(this))return this.byteOffset},"get")});function a(v){if(v>o)throw new RangeError('The value "'+v+'" is invalid for option "size"');let x=new Uint8Array(v);return Object.setPrototypeOf(x,c.prototype),x}s(a,"he"),I(a,"createBuffer");function c(v,x,E){if(typeof v=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return l(v,x,E)}s(c,"h"),I(c,"Buffer"),c.poolSize=8192;function l(v,x,E){if(typeof v=="string")return h(v,x);if(ArrayBuffer.isView(v))return g(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Wt(v,ArrayBuffer)||v&&Wt(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Wt(v,SharedArrayBuffer)||v&&Wt(v.buffer,SharedArrayBuffer)))return f(v,x,E);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let U=v.valueOf&&v.valueOf();if(U!=null&&U!==v)return c.from(U,x,E);let V=_(v);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return c.from(v[Symbol.toPrimitive]("string"),x,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s(l,"Gn"),I(l,"from"),c.from=function(v,x,E){return l(v,x,E)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function d(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}s(d,"Vn"),I(d,"assertSize");function p(v,x,E){return d(v),v<=0?a(v):x!==void 0?typeof E=="string"?a(v).fill(x,E):a(v).fill(x):a(v)}s(p,"Uo"),I(p,"alloc"),c.alloc=function(v,x,E){return p(v,x,E)};function m(v){return d(v),a(v<0?0:w(v)|0)}s(m,"$t"),I(m,"allocUnsafe"),c.allocUnsafe=function(v){return m(v)},c.allocUnsafeSlow=function(v){return m(v)};function h(v,x){if((typeof x!="string"||x==="")&&(x="utf8"),!c.isEncoding(x))throw new TypeError("Unknown encoding: "+x);let E=S(v,x)|0,U=a(E),V=U.write(v,x);return V!==E&&(U=U.slice(0,V)),U}s(h,"Do"),I(h,"fromString");function y(v){let x=v.length<0?0:w(v.length)|0,E=a(x);for(let U=0;U<x;U+=1)E[U]=v[U]&255;return E}s(y,"Wt"),I(y,"fromArrayLike");function g(v){if(Wt(v,Uint8Array)){let x=new Uint8Array(v);return f(x.buffer,x.byteOffset,x.byteLength)}return y(v)}s(g,"Oo"),I(g,"fromArrayView");function f(v,x,E){if(x<0||v.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<x+(E||0))throw new RangeError('"length" is outside of buffer bounds');let U;return x===void 0&&E===void 0?U=new Uint8Array(v):E===void 0?U=new Uint8Array(v,x):U=new Uint8Array(v,x,E),Object.setPrototypeOf(U,c.prototype),U}s(f,"jt"),I(f,"fromArrayBuffer");function _(v){if(c.isBuffer(v)){let x=w(v.length)|0,E=a(x);return E.length===0||v.copy(E,0,0,x),E}if(v.length!==void 0)return typeof v.length!="number"||Un(v.length)?a(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}s(_,"qo"),I(_,"fromObject");function w(v){if(v>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return v|0}s(w,"Gt"),I(w,"checked");function b(v){return+v!=v&&(v=0),c.alloc(+v)}s(b,"Qo"),I(b,"SlowBuffer"),c.isBuffer=I(function(v){return v!=null&&v._isBuffer===!0&&v!==c.prototype},"isBuffer"),c.compare=I(function(v,x){if(Wt(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),Wt(x,Uint8Array)&&(x=c.from(x,x.offset,x.byteLength)),!c.isBuffer(v)||!c.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===x)return 0;let E=v.length,U=x.length;for(let V=0,te=Math.min(E,U);V<te;++V)if(v[V]!==x[V]){E=v[V],U=x[V];break}return E<U?-1:U<E?1:0},"compare"),c.isEncoding=I(function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),c.concat=I(function(v,x){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return c.alloc(0);let E;if(x===void 0)for(x=0,E=0;E<v.length;++E)x+=v[E].length;let U=c.allocUnsafe(x),V=0;for(E=0;E<v.length;++E){let te=v[E];if(Wt(te,Uint8Array))V+te.length>U.length?(c.isBuffer(te)||(te=c.from(te)),te.copy(U,V)):Uint8Array.prototype.set.call(U,te,V);else if(c.isBuffer(te))te.copy(U,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=te.length}return U},"concat");function S(v,x){if(c.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Wt(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let E=v.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&E===0)return 0;let V=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return Si(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return fo(v).length;default:if(V)return U?-1:Si(v).length;x=(""+x).toLowerCase(),V=!0}}s(S,"zn"),I(S,"byteLength"),c.byteLength=S;function k(v,x,E){let U=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,x>>>=0,E<=x))return"";for(v||(v="utf8");;)switch(v){case"hex":return Te(this,x,E);case"utf8":case"utf-8":return F(this,x,E);case"ascii":return ie(this,x,E);case"latin1":case"binary":return be(this,x,E);case"base64":return Z(this,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,x,E);default:if(U)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),U=!0}}s(k,"No"),I(k,"slowToString"),c.prototype._isBuffer=!0;function R(v,x,E){let U=v[x];v[x]=v[E],v[E]=U}s(R,"Ae"),I(R,"swap"),c.prototype.swap16=I(function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<v;x+=2)R(this,x,x+1);return this},"swap16"),c.prototype.swap32=I(function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<v;x+=4)R(this,x,x+3),R(this,x+1,x+2);return this},"swap32"),c.prototype.swap64=I(function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<v;x+=8)R(this,x,x+7),R(this,x+1,x+6),R(this,x+2,x+5),R(this,x+3,x+4);return this},"swap64"),c.prototype.toString=I(function(){let v=this.length;return v===0?"":arguments.length===0?F(this,0,v):k.apply(this,arguments)},"toString"),c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=I(function(v){if(!c.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:c.compare(this,v)===0},"equals"),c.prototype.inspect=I(function(){let v="",x=t.INSPECT_MAX_BYTES;return v=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(v+=" ... "),"<Buffer "+v+">"},"inspect"),n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=I(function(v,x,E,U,V){if(Wt(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),!c.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(x===void 0&&(x=0),E===void 0&&(E=v?v.length:0),U===void 0&&(U=0),V===void 0&&(V=this.length),x<0||E>v.length||U<0||V>this.length)throw new RangeError("out of range index");if(U>=V&&x>=E)return 0;if(U>=V)return-1;if(x>=E)return 1;if(x>>>=0,E>>>=0,U>>>=0,V>>>=0,this===v)return 0;let te=V-U,de=E-x,Re=Math.min(te,de),ht=this.slice(U,V),vt=v.slice(x,E);for(let ct=0;ct<Re;++ct)if(ht[ct]!==vt[ct]){te=ht[ct],de=vt[ct];break}return te<de?-1:de<te?1:0},"compare");function O(v,x,E,U,V){if(v.length===0)return-1;if(typeof E=="string"?(U=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,Un(E)&&(E=V?0:v.length-1),E<0&&(E=v.length+E),E>=v.length){if(V)return-1;E=v.length-1}else if(E<0)if(V)E=0;else return-1;if(typeof x=="string"&&(x=c.from(x,U)),c.isBuffer(x))return x.length===0?-1:C(v,x,E,U,V);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(v,x,E):Uint8Array.prototype.lastIndexOf.call(v,x,E):C(v,[x],E,U,V);throw new TypeError("val must be string, number or Buffer")}s(O,"Kn"),I(O,"bidirectionalIndexOf");function C(v,x,E,U,V){let te=1,de=v.length,Re=x.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(v.length<2||x.length<2)return-1;te=2,de/=2,Re/=2,E/=2}function ht(ct,Ut){return te===1?ct[Ut]:ct.readUInt16BE(Ut*te)}s(ht,"c"),I(ht,"read");let vt;if(V){let ct=-1;for(vt=E;vt<de;vt++)if(ht(v,vt)===ht(x,ct===-1?0:vt-ct)){if(ct===-1&&(ct=vt),vt-ct+1===Re)return ct*te}else ct!==-1&&(vt-=vt-ct),ct=-1}else for(E+Re>de&&(E=de-Re),vt=E;vt>=0;vt--){let ct=!0;for(let Ut=0;Ut<Re;Ut++)if(ht(v,vt+Ut)!==ht(x,Ut)){ct=!1;break}if(ct)return vt}return-1}s(C,"jn"),I(C,"arrayIndexOf"),c.prototype.includes=I(function(v,x,E){return this.indexOf(v,x,E)!==-1},"includes"),c.prototype.indexOf=I(function(v,x,E){return O(this,v,x,E,!0)},"indexOf"),c.prototype.lastIndexOf=I(function(v,x,E){return O(this,v,x,E,!1)},"lastIndexOf");function $(v,x,E,U){E=Number(E)||0;let V=v.length-E;U?(U=Number(U),U>V&&(U=V)):U=V;let te=x.length;U>te/2&&(U=te/2);let de;for(de=0;de<U;++de){let Re=parseInt(x.substr(de*2,2),16);if(Un(Re))return de;v[E+de]=Re}return de}s($,"Wo"),I($,"hexWrite");function P(v,x,E,U){return _r(Si(x,v.length-E),v,E,U)}s(P,"jo"),I(P,"utf8Write");function N(v,x,E,U){return _r(xp(x),v,E,U)}s(N,"Ho"),I(N,"asciiWrite");function j(v,x,E,U){return _r(fo(x),v,E,U)}s(j,"$o"),I(j,"base64Write");function W(v,x,E,U){return _r(fn(x,v.length-E),v,E,U)}s(W,"Go"),I(W,"ucs2Write"),c.prototype.write=I(function(v,x,E,U){if(x===void 0)U="utf8",E=this.length,x=0;else if(E===void 0&&typeof x=="string")U=x,E=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(E)?(E=E>>>0,U===void 0&&(U="utf8")):(U=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let V=this.length-x;if((E===void 0||E>V)&&(E=V),v.length>0&&(E<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let te=!1;for(;;)switch(U){case"hex":return $(this,v,x,E);case"utf8":case"utf-8":return P(this,v,x,E);case"ascii":case"latin1":case"binary":return N(this,v,x,E);case"base64":return j(this,v,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,v,x,E);default:if(te)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),te=!0}},"write"),c.prototype.toJSON=I(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Z(v,x,E){return x===0&&E===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(x,E))}s(Z,"Vo"),I(Z,"base64Slice");function F(v,x,E){E=Math.min(v.length,E);let U=[],V=x;for(;V<E;){let te=v[V],de=null,Re=te>239?4:te>223?3:te>191?2:1;if(V+Re<=E){let ht,vt,ct,Ut;switch(Re){case 1:te<128&&(de=te);break;case 2:ht=v[V+1],(ht&192)===128&&(Ut=(te&31)<<6|ht&63,Ut>127&&(de=Ut));break;case 3:ht=v[V+1],vt=v[V+2],(ht&192)===128&&(vt&192)===128&&(Ut=(te&15)<<12|(ht&63)<<6|vt&63,Ut>2047&&(Ut<55296||Ut>57343)&&(de=Ut));break;case 4:ht=v[V+1],vt=v[V+2],ct=v[V+3],(ht&192)===128&&(vt&192)===128&&(ct&192)===128&&(Ut=(te&15)<<18|(ht&63)<<12|(vt&63)<<6|ct&63,Ut>65535&&Ut<1114112&&(de=Ut))}}de===null?(de=65533,Re=1):de>65535&&(de-=65536,U.push(de>>>10&1023|55296),de=56320|de&1023),U.push(de),V+=Re}return re(U)}s(F,"Yn"),I(F,"utf8Slice");var Y=4096;function re(v){let x=v.length;if(x<=Y)return String.fromCharCode.apply(String,v);let E="",U=0;for(;U<x;)E+=String.fromCharCode.apply(String,v.slice(U,U+=Y));return E}s(re,"zo"),I(re,"decodeCodePointsArray");function ie(v,x,E){let U="";E=Math.min(v.length,E);for(let V=x;V<E;++V)U+=String.fromCharCode(v[V]&127);return U}s(ie,"Ko"),I(ie,"asciiSlice");function be(v,x,E){let U="";E=Math.min(v.length,E);for(let V=x;V<E;++V)U+=String.fromCharCode(v[V]);return U}s(be,"Yo"),I(be,"latin1Slice");function Te(v,x,E){let U=v.length;(!x||x<0)&&(x=0),(!E||E<0||E>U)&&(E=U);let V="";for(let te=x;te<E;++te)V+=Tp[v[te]];return V}s(Te,"Zo"),I(Te,"hexSlice");function Xe(v,x,E){let U=v.slice(x,E),V="";for(let te=0;te<U.length-1;te+=2)V+=String.fromCharCode(U[te]+U[te+1]*256);return V}s(Xe,"Jo"),I(Xe,"utf16leSlice"),c.prototype.slice=I(function(v,x){let E=this.length;v=~~v,x=x===void 0?E:~~x,v<0?(v+=E,v<0&&(v=0)):v>E&&(v=E),x<0?(x+=E,x<0&&(x=0)):x>E&&(x=E),x<v&&(x=v);let U=this.subarray(v,x);return Object.setPrototypeOf(U,c.prototype),U},"slice");function Ze(v,x,E){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+x>E)throw new RangeError("Trying to access beyond buffer length")}s(Ze,"q"),I(Ze,"checkOffset"),c.prototype.readUintLE=c.prototype.readUIntLE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ze(v,x,this.length);let U=this[v],V=1,te=0;for(;++te<x&&(V*=256);)U+=this[v+te]*V;return U},"readUIntLE"),c.prototype.readUintBE=c.prototype.readUIntBE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ze(v,x,this.length);let U=this[v+--x],V=1;for(;x>0&&(V*=256);)U+=this[v+--x]*V;return U},"readUIntBE"),c.prototype.readUint8=c.prototype.readUInt8=I(function(v,x){return v=v>>>0,x||Ze(v,1,this.length),this[v]},"readUInt8"),c.prototype.readUint16LE=c.prototype.readUInt16LE=I(function(v,x){return v=v>>>0,x||Ze(v,2,this.length),this[v]|this[v+1]<<8},"readUInt16LE"),c.prototype.readUint16BE=c.prototype.readUInt16BE=I(function(v,x){return v=v>>>0,x||Ze(v,2,this.length),this[v]<<8|this[v+1]},"readUInt16BE"),c.prototype.readUint32LE=c.prototype.readUInt32LE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},"readUInt32LE"),c.prototype.readUint32BE=c.prototype.readUInt32BE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},"readUInt32BE"),c.prototype.readBigUInt64LE=Pr(I(function(v){v=v>>>0,wr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&mo(v,this.length-8);let U=x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,V=this[++v]+this[++v]*2**8+this[++v]*2**16+E*2**24;return BigInt(U)+(BigInt(V)<<BigInt(32))},"readBigUInt64LE")),c.prototype.readBigUInt64BE=Pr(I(function(v){v=v>>>0,wr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&mo(v,this.length-8);let U=x*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],V=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E;return(BigInt(U)<<BigInt(32))+BigInt(V)},"readBigUInt64BE")),c.prototype.readIntLE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ze(v,x,this.length);let U=this[v],V=1,te=0;for(;++te<x&&(V*=256);)U+=this[v+te]*V;return V*=128,U>=V&&(U-=Math.pow(2,8*x)),U},"readIntLE"),c.prototype.readIntBE=I(function(v,x,E){v=v>>>0,x=x>>>0,E||Ze(v,x,this.length);let U=x,V=1,te=this[v+--U];for(;U>0&&(V*=256);)te+=this[v+--U]*V;return V*=128,te>=V&&(te-=Math.pow(2,8*x)),te},"readIntBE"),c.prototype.readInt8=I(function(v,x){return v=v>>>0,x||Ze(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},"readInt8"),c.prototype.readInt16LE=I(function(v,x){v=v>>>0,x||Ze(v,2,this.length);let E=this[v]|this[v+1]<<8;return E&32768?E|4294901760:E},"readInt16LE"),c.prototype.readInt16BE=I(function(v,x){v=v>>>0,x||Ze(v,2,this.length);let E=this[v+1]|this[v]<<8;return E&32768?E|4294901760:E},"readInt16BE"),c.prototype.readInt32LE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},"readInt32LE"),c.prototype.readInt32BE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},"readInt32BE"),c.prototype.readBigInt64LE=Pr(I(function(v){v=v>>>0,wr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&mo(v,this.length-8);let U=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(E<<24);return(BigInt(U)<<BigInt(32))+BigInt(x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)},"readBigInt64LE")),c.prototype.readBigInt64BE=Pr(I(function(v){v=v>>>0,wr(v,"offset");let x=this[v],E=this[v+7];(x===void 0||E===void 0)&&mo(v,this.length-8);let U=(x<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(U)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E)},"readBigInt64BE")),c.prototype.readFloatLE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),r.read(this,v,!0,23,4)},"readFloatLE"),c.prototype.readFloatBE=I(function(v,x){return v=v>>>0,x||Ze(v,4,this.length),r.read(this,v,!1,23,4)},"readFloatBE"),c.prototype.readDoubleLE=I(function(v,x){return v=v>>>0,x||Ze(v,8,this.length),r.read(this,v,!0,52,8)},"readDoubleLE"),c.prototype.readDoubleBE=I(function(v,x){return v=v>>>0,x||Ze(v,8,this.length),r.read(this,v,!1,52,8)},"readDoubleBE");function J(v,x,E,U,V,te){if(!c.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>V||x<te)throw new RangeError('"value" argument is out of bounds');if(E+U>v.length)throw new RangeError("Index out of range")}s(J,"V"),I(J,"checkInt"),c.prototype.writeUintLE=c.prototype.writeUIntLE=I(function(v,x,E,U){if(v=+v,x=x>>>0,E=E>>>0,!U){let de=Math.pow(2,8*E)-1;J(this,v,x,E,de,0)}let V=1,te=0;for(this[x]=v&255;++te<E&&(V*=256);)this[x+te]=v/V&255;return x+E},"writeUIntLE"),c.prototype.writeUintBE=c.prototype.writeUIntBE=I(function(v,x,E,U){if(v=+v,x=x>>>0,E=E>>>0,!U){let de=Math.pow(2,8*E)-1;J(this,v,x,E,de,0)}let V=E-1,te=1;for(this[x+V]=v&255;--V>=0&&(te*=256);)this[x+V]=v/te&255;return x+E},"writeUIntBE"),c.prototype.writeUint8=c.prototype.writeUInt8=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,1,255,0),this[x]=v&255,x+1},"writeUInt8"),c.prototype.writeUint16LE=c.prototype.writeUInt16LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,65535,0),this[x]=v&255,this[x+1]=v>>>8,x+2},"writeUInt16LE"),c.prototype.writeUint16BE=c.prototype.writeUInt16BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,65535,0),this[x]=v>>>8,this[x+1]=v&255,x+2},"writeUInt16BE"),c.prototype.writeUint32LE=c.prototype.writeUInt32LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,4294967295,0),this[x+3]=v>>>24,this[x+2]=v>>>16,this[x+1]=v>>>8,this[x]=v&255,x+4},"writeUInt32LE"),c.prototype.writeUint32BE=c.prototype.writeUInt32BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,4294967295,0),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},"writeUInt32BE");function Oe(v,x,E,U,V){oa(x,U,V,v,E,7);let te=Number(x&BigInt(4294967295));v[E++]=te,te=te>>8,v[E++]=te,te=te>>8,v[E++]=te,te=te>>8,v[E++]=te;let de=Number(x>>BigInt(32)&BigInt(4294967295));return v[E++]=de,de=de>>8,v[E++]=de,de=de>>8,v[E++]=de,de=de>>8,v[E++]=de,E}s(Oe,"Zn"),I(Oe,"wrtBigUInt64LE");function ge(v,x,E,U,V){oa(x,U,V,v,E,7);let te=Number(x&BigInt(4294967295));v[E+7]=te,te=te>>8,v[E+6]=te,te=te>>8,v[E+5]=te,te=te>>8,v[E+4]=te;let de=Number(x>>BigInt(32)&BigInt(4294967295));return v[E+3]=de,de=de>>8,v[E+2]=de,de=de>>8,v[E+1]=de,de=de>>8,v[E]=de,E+8}s(ge,"Jn"),I(ge,"wrtBigUInt64BE"),c.prototype.writeBigUInt64LE=Pr(I(function(v,x=0){return Oe(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),c.prototype.writeBigUInt64BE=Pr(I(function(v,x=0){return ge(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),c.prototype.writeIntLE=I(function(v,x,E,U){if(v=+v,x=x>>>0,!U){let Re=Math.pow(2,8*E-1);J(this,v,x,E,Re-1,-Re)}let V=0,te=1,de=0;for(this[x]=v&255;++V<E&&(te*=256);)v<0&&de===0&&this[x+V-1]!==0&&(de=1),this[x+V]=(v/te>>0)-de&255;return x+E},"writeIntLE"),c.prototype.writeIntBE=I(function(v,x,E,U){if(v=+v,x=x>>>0,!U){let Re=Math.pow(2,8*E-1);J(this,v,x,E,Re-1,-Re)}let V=E-1,te=1,de=0;for(this[x+V]=v&255;--V>=0&&(te*=256);)v<0&&de===0&&this[x+V+1]!==0&&(de=1),this[x+V]=(v/te>>0)-de&255;return x+E},"writeIntBE"),c.prototype.writeInt8=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,1,127,-128),v<0&&(v=255+v+1),this[x]=v&255,x+1},"writeInt8"),c.prototype.writeInt16LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,32767,-32768),this[x]=v&255,this[x+1]=v>>>8,x+2},"writeInt16LE"),c.prototype.writeInt16BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,2,32767,-32768),this[x]=v>>>8,this[x+1]=v&255,x+2},"writeInt16BE"),c.prototype.writeInt32LE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,2147483647,-2147483648),this[x]=v&255,this[x+1]=v>>>8,this[x+2]=v>>>16,this[x+3]=v>>>24,x+4},"writeInt32LE"),c.prototype.writeInt32BE=I(function(v,x,E){return v=+v,x=x>>>0,E||J(this,v,x,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},"writeInt32BE"),c.prototype.writeBigInt64LE=Pr(I(function(v,x=0){return Oe(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),c.prototype.writeBigInt64BE=Pr(I(function(v,x=0){return ge(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function q(v,x,E,U,V,te){if(E+U>v.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}s(q,"Xn"),I(q,"checkIEEE754");function Ke(v,x,E,U,V){return x=+x,E=E>>>0,V||q(v,x,E,4,34028234663852886e22,-34028234663852886e22),r.write(v,x,E,U,23,4),E+4}s(Ke,"ei"),I(Ke,"writeFloat"),c.prototype.writeFloatLE=I(function(v,x,E){return Ke(this,v,x,!0,E)},"writeFloatLE"),c.prototype.writeFloatBE=I(function(v,x,E){return Ke(this,v,x,!1,E)},"writeFloatBE");function Tt(v,x,E,U,V){return x=+x,E=E>>>0,V||q(v,x,E,8,17976931348623157e292,-17976931348623157e292),r.write(v,x,E,U,52,8),E+8}s(Tt,"ti"),I(Tt,"writeDouble"),c.prototype.writeDoubleLE=I(function(v,x,E){return Tt(this,v,x,!0,E)},"writeDoubleLE"),c.prototype.writeDoubleBE=I(function(v,x,E){return Tt(this,v,x,!1,E)},"writeDoubleBE"),c.prototype.copy=I(function(v,x,E,U){if(!c.isBuffer(v))throw new TypeError("argument should be a Buffer");if(E||(E=0),!U&&U!==0&&(U=this.length),x>=v.length&&(x=v.length),x||(x=0),U>0&&U<E&&(U=E),U===E||v.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),v.length-x<U-E&&(U=v.length-x+E);let V=U-E;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,E,U):Uint8Array.prototype.set.call(v,this.subarray(E,U),x),V},"copy"),c.prototype.fill=I(function(v,x,E,U){if(typeof v=="string"){if(typeof x=="string"?(U=x,x=0,E=this.length):typeof E=="string"&&(U=E,E=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!c.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(v.length===1){let te=v.charCodeAt(0);(U==="utf8"&&te<128||U==="latin1")&&(v=te)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(x<0||this.length<x||this.length<E)throw new RangeError("Out of range index");if(E<=x)return this;x=x>>>0,E=E===void 0?this.length:E>>>0,v||(v=0);let V;if(typeof v=="number")for(V=x;V<E;++V)this[V]=v;else{let te=c.isBuffer(v)?v:c.from(v,U),de=te.length;if(de===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(V=0;V<E-x;++V)this[V+x]=te[V%de]}return this},"fill");var Ot={};function nn(v,x,E){var U;Ot[v]=(U=class extends E{static{s(this,"n")}constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}},I(U,"NodeError"),U)}s(nn,"Vt"),I(nn,"E"),nn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),nn("ERR_INVALID_ARG_TYPE",function(v,x){return`The "${v}" argument must be of type number. Received type ${typeof x}`},TypeError),nn("ERR_OUT_OF_RANGE",function(v,x,E){let U=`The value of "${v}" is out of range.`,V=E;return Number.isInteger(E)&&Math.abs(E)>2**32?V=wi(String(E)):typeof E=="bigint"&&(V=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(V=wi(V)),V+="n"),U+=` It must be ${x}. Received ${V}`,U},RangeError);function wi(v){let x="",E=v.length,U=v[0]==="-"?1:0;for(;E>=U+4;E-=3)x=`_${v.slice(E-3,E)}${x}`;return`${v.slice(0,E)}${x}`}s(wi,"$n"),I(wi,"addNumericalSeparator");function qo(v,x,E){wr(x,"offset"),(v[x]===void 0||v[x+E]===void 0)&&mo(x,v.length-(E+1))}s(qo,"Xo"),I(qo,"checkBounds");function oa(v,x,E,U,V,te){if(v>E||v<x){let de=typeof x=="bigint"?"n":"",Re;throw te>3?x===0||x===BigInt(0)?Re=`>= 0${de} and < 2${de} ** ${(te+1)*8}${de}`:Re=`>= -(2${de} ** ${(te+1)*8-1}${de}) and < 2 ** ${(te+1)*8-1}${de}`:Re=`>= ${x}${de} and <= ${E}${de}`,new Ot.ERR_OUT_OF_RANGE("value",Re,v)}qo(U,V,te)}s(oa,"ri"),I(oa,"checkIntBI");function wr(v,x){if(typeof v!="number")throw new Ot.ERR_INVALID_ARG_TYPE(x,"number",v)}s(wr,"Be"),I(wr,"validateNumber");function mo(v,x,E){throw Math.floor(v)!==v?(wr(v,E),new Ot.ERR_OUT_OF_RANGE(E||"offset","an integer",v)):x<0?new Ot.ERR_BUFFER_OUT_OF_BOUNDS:new Ot.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${x}`,v)}s(mo,"je"),I(mo,"boundsError");var ia=/[^+/0-9A-Za-z-_]/g;function Sp(v){if(v=v.split("=")[0],v=v.trim().replace(ia,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}s(Sp,"ta"),I(Sp,"base64clean");function Si(v,x){x=x||1/0;let E,U=v.length,V=null,te=[];for(let de=0;de<U;++de){if(E=v.charCodeAt(de),E>55295&&E<57344){if(!V){if(E>56319){(x-=3)>-1&&te.push(239,191,189);continue}else if(de+1===U){(x-=3)>-1&&te.push(239,191,189);continue}V=E;continue}if(E<56320){(x-=3)>-1&&te.push(239,191,189),V=E;continue}E=(V-55296<<10|E-56320)+65536}else V&&(x-=3)>-1&&te.push(239,191,189);if(V=null,E<128){if((x-=1)<0)break;te.push(E)}else if(E<2048){if((x-=2)<0)break;te.push(E>>6|192,E&63|128)}else if(E<65536){if((x-=3)<0)break;te.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((x-=4)<0)break;te.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return te}s(Si,"Ht"),I(Si,"utf8ToBytes");function xp(v){let x=[];for(let E=0;E<v.length;++E)x.push(v.charCodeAt(E)&255);return x}s(xp,"ra"),I(xp,"asciiToBytes");function fn(v,x){let E,U,V,te=[];for(let de=0;de<v.length&&!((x-=2)<0);++de)E=v.charCodeAt(de),U=E>>8,V=E%256,te.push(V),te.push(U);return te}s(fn,"na"),I(fn,"utf16leToBytes");function fo(v){return e.toByteArray(Sp(v))}s(fo,"ni"),I(fo,"base64ToBytes");function _r(v,x,E,U){let V;for(V=0;V<U&&!(V+E>=x.length||V>=v.length);++V)x[V+E]=v[V];return V}s(_r,"ht"),I(_r,"blitBuffer");function Wt(v,x){return v instanceof x||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===x.name}s(Wt,"ue"),I(Wt,"isInstance");function Un(v){return v!==v}s(Un,"zt"),I(Un,"numberIsNaN");var Tp=(function(){let v="0123456789abcdef",x=new Array(256);for(let E=0;E<16;++E){let U=E*16;for(let V=0;V<16;++V)x[U+V]=v[E]+v[V]}return x})();function Pr(v){return typeof BigInt>"u"?Fo:v}s(Pr,"we"),I(Pr,"defineBigIntMethod");function Fo(){throw new Error("BigInt not supported")}s(Fo,"sa"),I(Fo,"BufferBigIntNotDefined")}),Ce=on(()=>{"use strict";rm=globalThis,cb=globalThis.setImmediate??(t=>setTimeout(t,0)),x9=globalThis.clearImmediate??(t=>clearTimeout(t)),Le=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:S9().Buffer,Ye=globalThis.process??{},Ye.env??(Ye.env={});try{Ye.nextTick(()=>{})}catch{let t=Promise.resolve();Ye.nextTick=t.then.bind(t)}}),Ps=et((t,e)=>{"use strict";Ce();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:I(function(O,C,$){return Function.prototype.apply.call(O,C,$)},"ReflectApply"),o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=I(function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))},"ReflectOwnKeys"):o=I(function(O){return Object.getOwnPropertyNames(O)},"ReflectOwnKeys");function i(O){console&&console.warn&&console.warn(O)}s(i,"oa"),I(i,"ProcessEmitWarning");var a=Number.isNaN||I(function(O){return O!==O},"NumberIsNaN");function c(){c.init.call(this)}s(c,"B"),I(c,"EventEmitter"),e.exports=c,e.exports.once=S,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}s(d,"dt"),I(d,"checkListener"),Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:I(function(){return l},"get"),set:I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");l=O},"set")}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=I(function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},"setMaxListeners");function p(O){return O._maxListeners===void 0?c.defaultMaxListeners:O._maxListeners}s(p,"ui"),I(p,"_getMaxListeners"),c.prototype.getMaxListeners=I(function(){return p(this)},"getMaxListeners"),c.prototype.emit=I(function(O){for(var C=[],$=1;$<arguments.length;$++)C.push(arguments[$]);var P=O==="error",N=this._events;if(N!==void 0)P=P&&N.error===void 0;else if(!P)return!1;if(P){var j;if(C.length>0&&(j=C[0]),j instanceof Error)throw j;var W=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw W.context=j,W}var Z=N[O];if(Z===void 0)return!1;if(typeof Z=="function")n(Z,this,C);else for(var F=Z.length,Y=_(Z,F),$=0;$<F;++$)n(Y[$],this,C);return!0},"emit");function m(O,C,$,P){var N,j,W;if(d($),j=O._events,j===void 0?(j=O._events=Object.create(null),O._eventsCount=0):(j.newListener!==void 0&&(O.emit("newListener",C,$.listener?$.listener:$),j=O._events),W=j[C]),W===void 0)W=j[C]=$,++O._eventsCount;else if(typeof W=="function"?W=j[C]=P?[$,W]:[W,$]:P?W.unshift($):W.push($),N=p(O),N>0&&W.length>N&&!W.warned){W.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=O,Z.type=C,Z.count=W.length,i(Z)}return O}s(m,"ci"),I(m,"_addListener"),c.prototype.addListener=I(function(O,C){return m(this,O,C,!1)},"addListener"),c.prototype.on=c.prototype.addListener,c.prototype.prependListener=I(function(O,C){return m(this,O,C,!0)},"prependListener");function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}s(h,"aa"),I(h,"onceWrapper");function y(O,C,$){var P={fired:!1,wrapFn:void 0,target:O,type:C,listener:$},N=h.bind(P);return N.listener=$,P.wrapFn=N,N}s(y,"li"),I(y,"_onceWrap"),c.prototype.once=I(function(O,C){return d(C),this.on(O,y(this,O,C)),this},"once"),c.prototype.prependOnceListener=I(function(O,C){return d(C),this.prependListener(O,y(this,O,C)),this},"prependOnceListener"),c.prototype.removeListener=I(function(O,C){var $,P,N,j,W;if(d(C),P=this._events,P===void 0)return this;if($=P[O],$===void 0)return this;if($===C||$.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete P[O],P.removeListener&&this.emit("removeListener",O,$.listener||C));else if(typeof $!="function"){for(N=-1,j=$.length-1;j>=0;j--)if($[j]===C||$[j].listener===C){W=$[j].listener,N=j;break}if(N<0)return this;N===0?$.shift():w($,N),$.length===1&&(P[O]=$[0]),P.removeListener!==void 0&&this.emit("removeListener",O,W||C)}return this},"removeListener"),c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=I(function(O){var C,$,P;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[O]),this;if(arguments.length===0){var N=Object.keys($),j;for(P=0;P<N.length;++P)j=N[P],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=$[O],typeof C=="function")this.removeListener(O,C);else if(C!==void 0)for(P=C.length-1;P>=0;P--)this.removeListener(O,C[P]);return this},"removeAllListeners");function g(O,C,$){var P=O._events;if(P===void 0)return[];var N=P[C];return N===void 0?[]:typeof N=="function"?$?[N.listener||N]:[N]:$?b(N):_(N,N.length)}s(g,"fi"),I(g,"_listeners"),c.prototype.listeners=I(function(O){return g(this,O,!0)},"listeners"),c.prototype.rawListeners=I(function(O){return g(this,O,!1)},"rawListeners"),c.listenerCount=function(O,C){return typeof O.listenerCount=="function"?O.listenerCount(C):f.call(O,C)},c.prototype.listenerCount=f;function f(O){var C=this._events;if(C!==void 0){var $=C[O];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}s(f,"hi"),I(f,"listenerCount"),c.prototype.eventNames=I(function(){return this._eventsCount>0?o(this._events):[]},"eventNames");function _(O,C){for(var $=new Array(C),P=0;P<C;++P)$[P]=O[P];return $}s(_,"pi"),I(_,"arrayClone");function w(O,C){for(;C+1<O.length;C++)O[C]=O[C+1];O.pop()}s(w,"ua"),I(w,"spliceOne");function b(O){for(var C=new Array(O.length),$=0;$<C.length;++$)C[$]=O[$].listener||O[$];return C}s(b,"ca"),I(b,"unwrapListeners");function S(O,C){return new Promise(function($,P){function N(W){O.removeListener(C,j),P(W)}s(N,"i"),I(N,"errorListener");function j(){typeof O.removeListener=="function"&&O.removeListener("error",N),$([].slice.call(arguments))}s(j,"s"),I(j,"resolver"),R(O,C,j,{once:!0}),C!=="error"&&k(O,N,{once:!0})})}s(S,"la"),I(S,"once");function k(O,C,$){typeof O.on=="function"&&R(O,"error",C,$)}s(k,"fa"),I(k,"addErrorHandlerIfEventEmitter");function R(O,C,$,P){if(typeof O.on=="function")P.once?O.once(C,$):O.on(C,$);else if(typeof O.addEventListener=="function")O.addEventListener(C,I(s(function N(j){P.once&&O.removeEventListener(C,N),$(j)},"i"),"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}s(R,"di"),I(R,"eventTargetAgnosticAddListener")}),AC={};Hn(AC,{Socket:s(()=>ks,"Socket"),isIP:s(()=>CC,"isIP")});s(CC,"ha");Du=on(()=>{"use strict";Ce(),SC=Is(Ps(),1),I(CC,"isIP"),nb=/^[^.]+\./,$u=class Ne extends SC.EventEmitter{static{s(this,"S")}constructor(){super(...arguments),Fe(this,"opts",{}),Fe(this,"connecting",!1),Fe(this,"pending",!0),Fe(this,"writable",!0),Fe(this,"encrypted",!1),Fe(this,"authorized",!1),Fe(this,"destroyed",!1),Fe(this,"ws",null),Fe(this,"writeBuffer"),Fe(this,"tlsState",0),Fe(this,"tlsRead"),Fe(this,"tlsWrite")}static get poolQueryViaFetch(){return Ne.opts.poolQueryViaFetch??Ne.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){Ne.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return Ne.opts.fetchEndpoint??Ne.defaults.fetchEndpoint}static set fetchEndpoint(e){Ne.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return Ne.opts.fetchFunction??Ne.defaults.fetchFunction}static set fetchFunction(e){Ne.opts.fetchFunction=e}static get webSocketConstructor(){return Ne.opts.webSocketConstructor??Ne.defaults.webSocketConstructor}static set webSocketConstructor(e){Ne.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??Ne.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return Ne.opts.wsProxy??Ne.defaults.wsProxy}static set wsProxy(e){Ne.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??Ne.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return Ne.opts.coalesceWrites??Ne.defaults.coalesceWrites}static set coalesceWrites(e){Ne.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??Ne.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return Ne.opts.useSecureWebSocket??Ne.defaults.useSecureWebSocket}static set useSecureWebSocket(e){Ne.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??Ne.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return Ne.opts.forceDisablePgSSL??Ne.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){Ne.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??Ne.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return Ne.opts.disableSNI??Ne.defaults.disableSNI}static set disableSNI(e){Ne.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??Ne.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return Ne.opts.disableWarningInBrowsers??Ne.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){Ne.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??Ne.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return Ne.opts.pipelineConnect??Ne.defaults.pipelineConnect}static set pipelineConnect(e){Ne.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??Ne.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return Ne.opts.subtls??Ne.defaults.subtls}static set subtls(e){Ne.opts.subtls=e}get subtls(){return this.opts.subtls??Ne.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return Ne.opts.pipelineTLS??Ne.defaults.pipelineTLS}static set pipelineTLS(e){Ne.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??Ne.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return Ne.opts.rootCerts??Ne.defaults.rootCerts}static set rootCerts(e){Ne.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??Ne.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,n){this.connecting=!0,n&&this.once("connect",n);let o=I(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=I((c,l=!1)=>{c.binaryType="arraybuffer",c.addEventListener("error",d=>{this.emit("error",d),this.emit("close")}),c.addEventListener("message",d=>{if(this.tlsState===0){let p=Le.from(d.data);this.emit("data",p)}}),c.addEventListener("close",()=>{this.emit("close")}),l?o():c.addEventListener("open",o)},"configureWebSocket"),a;try{a=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(c){this.emit("error",c),this.emit("close");return}try{let c=(this.useSecureWebSocket?"wss:":"ws:")+"//"+a;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(c),i(this.ws);else try{this.ws=new WebSocket(c),i(this.ws)}catch{this.ws=new __unstable_WebSocket(c),i(this.ws)}}catch(c){let l=(this.useSecureWebSocket?"https:":"http:")+"//"+a;fetch(l,{headers:{Upgrade:"websocket"}}).then(d=>{if(this.ws=d.webSocket,this.ws==null)throw c;this.ws.accept(),i(this.ws,!0)}).catch(d=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${d}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),i=this.rawWrite.bind(this),{read:a,write:c}=await this.subtls.startTls(e,r,o,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=a,this.tlsWrite=c,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=Le.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=o=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=Le.from(e,r)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,n)}):(this.tlsWrite(e),n()),!0)}end(e=Le.alloc(0),r="utf8",n=()=>{}){return this.write(e,r,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},I($u,"Socket"),Fe($u,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:I((t,e,r)=>{let n;return r?.jwtAuth?n=t.replace(nb,"apiauth."):n=t.replace(nb,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:I(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),Fe($u,"opts",{}),ks=$u}),OC={};Hn(OC,{parse:s(()=>ub,"parse")});s(ub,"Yt");$C=on(()=>{"use strict";Ce(),I(ub,"parse")}),RC=et(t=>{"use strict";Ce(),t.parse=function(o,i){return new r(o,i).parse()};var e=class NC{static{s(this,"vt")}constructor(i,a){this.source=i,this.transform=a||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var a;(this.recorded.length>0||i)&&(a=this.recorded.join(""),a==="NULL"&&!i&&(a=null),a!==null&&(a=this.transform(a)),this.entries.push(a),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var a,c,l;for(this.consumeDimensions();!this.isEof();)if(a=this.nextCharacter(),a.value==="{"&&!l)this.dimension++,this.dimension>1&&(c=new NC(this.source.substr(this.position-1),this.transform),this.entries.push(c.parse(!0)),this.position+=c.position-2);else if(a.value==="}"&&!l){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else a.value==='"'&&!a.escaped?(l&&this.newEntry(!0),l=!l):a.value===","&&!l?this.newEntry():this.record(a.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};I(e,"ArrayParser");var r=e;function n(o){return o}s(n,"Ca"),I(n,"identity")}),DC=et((t,e)=>{Ce();var r=RC();e.exports={create:I(function(n,o){return{parse:I(function(){return r.parse(n,o)},"parse")}},"create")}}),T9=et((t,e)=>{"use strict";Ce();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,o=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=I(function(p){if(i.test(p))return Number(p.replace("i","I"));var m=r.exec(p);if(!m)return a(p)||null;var h=!!m[8],y=parseInt(m[1],10);h&&(y=l(y));var g=parseInt(m[2],10)-1,f=m[3],_=parseInt(m[4],10),w=parseInt(m[5],10),b=parseInt(m[6],10),S=m[7];S=S?1e3*parseFloat(S):0;var k,R=c(p);return R!=null?(k=new Date(Date.UTC(y,g,f,_,w,b,S)),d(y)&&k.setUTCFullYear(y),R!==0&&k.setTime(k.getTime()-R)):(k=new Date(y,g,f,_,w,b,S),d(y)&&k.setFullYear(y)),k},"parseDate");function a(p){var m=n.exec(p);if(m){var h=parseInt(m[1],10),y=!!m[4];y&&(h=l(h));var g=parseInt(m[2],10)-1,f=m[3],_=new Date(h,g,f);return d(h)&&_.setFullYear(h),_}}s(a,"Ra"),I(a,"getDate");function c(p){if(p.endsWith("+00"))return 0;var m=o.exec(p.split(" ")[1]);if(m){var h=m[1];if(h==="Z")return 0;var y=h==="-"?-1:1,g=parseInt(m[2],10)*3600+parseInt(m[3]||0,10)*60+parseInt(m[4]||0,10);return g*y*1e3}}s(c,"La"),I(c,"timeZoneOffset");function l(p){return-(p-1)}s(l,"_i"),I(l,"bcYearToNegativeYear");function d(p){return p>=0&&p<100}s(d,"nr"),I(d,"is0To99")}),E9=et((t,e)=>{Ce(),e.exports=n;var r=Object.prototype.hasOwnProperty;function n(o){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var c in a)r.call(a,c)&&(o[c]=a[c])}return o}s(n,"ka"),I(n,"extend")}),k9=et((t,e)=>{"use strict";Ce();var r=E9();e.exports=n;function n(b){if(!(this instanceof n))return new n(b);r(this,w(b))}s(n,"ke"),I(n,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var b=o.filter(this.hasOwnProperty,this);return this.milliseconds&&b.indexOf("seconds")<0&&b.push("seconds"),b.length===0?"0":b.map(function(S){var k=this[S]||0;return S==="seconds"&&this.milliseconds&&(k=(k+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),k+" "+S},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],c=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var b=a.map(k,this).join(""),S=c.map(k,this).join("");return"P"+b+"T"+S;function k(R){var O=this[R]||0;return R==="seconds"&&this.milliseconds&&(O=(O+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),O+i[R]}};var l="([+-]?\\d+)",d=l+"\\s+years?",p=l+"\\s+mons?",m=l+"\\s+days?",h="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",y=new RegExp([d,p,m,h].map(function(b){return"("+b+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},f=["hours","minutes","seconds","milliseconds"];function _(b){var S=b+"000000".slice(b.length);return parseInt(S,10)/1e3}s(_,"Ga"),I(_,"parseMilliseconds");function w(b){if(!b)return{};var S=y.exec(b),k=S[8]==="-";return Object.keys(g).reduce(function(R,O){var C=g[O],$=S[C];return!$||($=O==="milliseconds"?_($):parseInt($,10),!$)||(k&&~f.indexOf(O)&&($*=-1),R[O]=$),R},{})}s(w,"Va"),I(w,"parse")}),I9=et((t,e)=>{"use strict";Ce(),e.exports=I(function(r){if(/^\\x/.test(r))return new Le(r.substr(2),"hex");for(var n="",o=0;o<r.length;)if(r[o]!=="\\")n+=r[o],++o;else if(/[0-7]{3}/.test(r.substr(o+1,3)))n+=String.fromCharCode(parseInt(r.substr(o+1,3),8)),o+=4;else{for(var i=1;o+i<r.length&&r[o+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";o+=Math.floor(i/2)*2}return new Le(n,"binary")},"parseBytea")}),P9=et((t,e)=>{Ce();var r=RC(),n=DC(),o=T9(),i=k9(),a=I9();function c(P){return I(function(N){return N===null?N:P(N)},"nullAllowed")}s(c,"St"),I(c,"allowNull");function l(P){return P===null?P:P==="TRUE"||P==="t"||P==="true"||P==="y"||P==="yes"||P==="on"||P==="1"}s(l,"qi"),I(l,"parseBool");function d(P){return P?r.parse(P,l):null}s(d,"za"),I(d,"parseBoolArray");function p(P){return parseInt(P,10)}s(p,"Ka"),I(p,"parseBaseTenInt");function m(P){return P?r.parse(P,c(p)):null}s(m,"sr"),I(m,"parseIntegerArray");function h(P){return P?r.parse(P,c(function(N){return k(N).trim()})):null}s(h,"Ya"),I(h,"parseBigIntegerArray");var y=I(function(P){if(!P)return null;var N=n.create(P,function(j){return j!==null&&(j=O(j)),j});return N.parse()},"parsePointArray"),g=I(function(P){if(!P)return null;var N=n.create(P,function(j){return j!==null&&(j=parseFloat(j)),j});return N.parse()},"parseFloatArray"),f=I(function(P){if(!P)return null;var N=n.create(P);return N.parse()},"parseStringArray"),_=I(function(P){if(!P)return null;var N=n.create(P,function(j){return j!==null&&(j=o(j)),j});return N.parse()},"parseDateArray"),w=I(function(P){if(!P)return null;var N=n.create(P,function(j){return j!==null&&(j=i(j)),j});return N.parse()},"parseIntervalArray"),b=I(function(P){return P?r.parse(P,c(a)):null},"parseByteAArray"),S=I(function(P){return parseInt(P,10)},"parseInteger"),k=I(function(P){var N=String(P);return/^\d+$/.test(N)?N:P},"parseBigInteger"),R=I(function(P){return P?r.parse(P,c(JSON.parse)):null},"parseJsonArray"),O=I(function(P){return P[0]!=="("?null:(P=P.substring(1,P.length-1).split(","),{x:parseFloat(P[0]),y:parseFloat(P[1])})},"parsePoint"),C=I(function(P){if(P[0]!=="<"&&P[1]!=="(")return null;for(var N="(",j="",W=!1,Z=2;Z<P.length-1;Z++){if(W||(N+=P[Z]),P[Z]===")"){W=!0;continue}else if(!W)continue;P[Z]!==","&&(j+=P[Z])}var F=O(N);return F.radius=parseFloat(j),F},"parseCircle"),$=I(function(P){P(20,k),P(21,S),P(23,S),P(26,S),P(700,parseFloat),P(701,parseFloat),P(16,l),P(1082,o),P(1114,o),P(1184,o),P(600,O),P(651,f),P(718,C),P(1e3,d),P(1001,b),P(1005,m),P(1007,m),P(1028,m),P(1016,h),P(1017,y),P(1021,g),P(1022,g),P(1231,g),P(1014,f),P(1015,f),P(1008,f),P(1009,f),P(1040,f),P(1041,f),P(1115,_),P(1182,_),P(1185,_),P(1186,i),P(1187,w),P(17,a),P(114,JSON.parse.bind(JSON)),P(3802,JSON.parse.bind(JSON)),P(199,R),P(3807,R),P(3907,f),P(2951,f),P(791,f),P(1183,f),P(1270,f)},"init");e.exports={init:$}}),A9=et((t,e)=>{"use strict";Ce();var r=1e6;function n(o){var i=o.readInt32BE(0),a=o.readUInt32BE(4),c="";i<0&&(i=~i+(a===0),a=~a+1>>>0,c="-");var l="",d,p,m,h,y,g;{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}return d=i%r,p=4294967296*d+a,m=""+p%r,c+m+l}s(n,"ru"),I(n,"readInt8"),e.exports=n}),C9=et((t,e)=>{Ce();var r=A9(),n=I(function(f,_,w,b,S){w=w||0,b=b||!1,S=S||function(W,Z,F){return W*Math.pow(2,F)+Z};var k=w>>3,R=I(function(W){return b?~W&255:W},"inv"),O=255,C=8-w%8;_<C&&(O=255<<8-_&255,C=_),w&&(O=O>>w%8);var $=0;w%8+_>=8&&($=S(0,R(f[k])&O,C));for(var P=_+w>>3,N=k+1;N<P;N++)$=S($,R(f[N]),8);var j=(_+w)%8;return j>0&&($=S($,R(f[P])>>8-j,j)),$},"parseBits"),o=I(function(f,_,w){var b=Math.pow(2,w-1)-1,S=n(f,1),k=n(f,w,1);if(k===0)return 0;var R=1,O=I(function($,P,N){$===0&&($=1);for(var j=1;j<=N;j++)R/=2,(P&1<<N-j)>0&&($+=R);return $},"parsePrecisionBits"),C=n(f,_,w+1,!1,O);return k==Math.pow(2,w+1)-1?C===0?S===0?1/0:-1/0:NaN:(S===0?1:-1)*Math.pow(2,k-b)*C},"parseFloatFromBits"),i=I(function(f){return n(f,1)==1?-1*(n(f,15,1,!0)+1):n(f,15,1)},"parseInt16"),a=I(function(f){return n(f,1)==1?-1*(n(f,31,1,!0)+1):n(f,31,1)},"parseInt32"),c=I(function(f){return o(f,23,8)},"parseFloat32"),l=I(function(f){return o(f,52,11)},"parseFloat64"),d=I(function(f){var _=n(f,16,32);if(_==49152)return NaN;for(var w=Math.pow(1e4,n(f,16,16)),b=0,S=[],k=n(f,16),R=0;R<k;R++)b+=n(f,16,64+16*R)*w,w/=1e4;var O=Math.pow(10,n(f,16,48));return(_===0?1:-1)*Math.round(b*O)/O},"parseNumeric"),p=I(function(f,_){var w=n(_,1),b=n(_,63,1),S=new Date((w===0?1:-1)*b/1e3+9466848e5);return f||S.setTime(S.getTime()+S.getTimezoneOffset()*6e4),S.usec=b%1e3,S.getMicroSeconds=function(){return this.usec},S.setMicroSeconds=function(k){this.usec=k},S.getUTCMicroSeconds=function(){return this.usec},S},"parseDate"),m=I(function(f){for(var _=n(f,32),w=n(f,32,32),b=n(f,32,64),S=96,k=[],R=0;R<_;R++)k[R]=n(f,32,S),S+=32,S+=32;var O=I(function($){var P=n(f,32,S);if(S+=32,P==4294967295)return null;var N;if($==23||$==20)return N=n(f,P*8,S),S+=P*8,N;if($==25)return N=f.toString(this.encoding,S>>3,(S+=P<<3)>>3),N;console.log("ERROR: ElementType not implemented: "+$)},"parseElement"),C=I(function($,P){var N=[],j;if($.length>1){var W=$.shift();for(j=0;j<W;j++)N[j]=C($,P);$.unshift(W)}else for(j=0;j<$[0];j++)N[j]=O(P);return N},"parse");return C(k,b)},"parseArray"),h=I(function(f){return f.toString("utf8")},"parseText"),y=I(function(f){return f===null?null:n(f,8)>0},"parseBool"),g=I(function(f){f(20,r),f(21,i),f(23,a),f(26,a),f(1700,d),f(700,c),f(701,l),f(16,y),f(1114,p.bind(null,!1)),f(1184,p.bind(null,!0)),f(1e3,m),f(1007,m),f(1016,m),f(1008,m),f(1009,m),f(25,h)},"init");e.exports={init:g}}),O9=et((t,e)=>{Ce(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),nm=et(t=>{Ce();var e=P9(),r=C9(),n=DC(),o=O9();t.getTypeParser=c,t.setTypeParser=l,t.arrayParser=n,t.builtins=o;var i={text:{},binary:{}};function a(d){return String(d)}s(a,"Ji"),I(a,"noParse");function c(d,p){return p=p||"text",i[p]&&i[p][d]||a}s(c,"yu"),I(c,"getTypeParser");function l(d,p,m){typeof p=="function"&&(m=p,p="text"),i[p][d]=m}s(l,"mu"),I(l,"setTypeParser"),e.init(function(d,p){i.text[d]=p}),r.init(function(d,p){i.binary[d]=p})}),lb=et((t,e)=>{"use strict";Ce();var r=nm();function n(o){this._types=o||r,this.text={},this.binary={}}s(n,"Et"),I(n,"TypeOverrides"),n.prototype.getOverrides=function(o){switch(o){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(o,i,a){typeof i=="function"&&(a=i,i="text"),this.getOverrides(i)[o]=a},n.prototype.getTypeParser=function(o,i){return i=i||"text",this.getOverrides(i)[o]||this._types.getTypeParser(o,i)},e.exports=n});s(Nu,"Xe");$9=on(()=>{"use strict";Ce(),I(Nu,"sha256")}),R9=on(()=>{"use strict";Ce(),Wo=class Pn{static{s(this,"U")}constructor(){Fe(this,"_dataLength",0),Fe(this,"_bufferLength",0),Fe(this,"_state",new Int32Array(4)),Fe(this,"_buffer",new ArrayBuffer(68)),Fe(this,"_buffer8"),Fe(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=Pn.hexChars,n=Pn.hexOut,o,i,a,c;for(c=0;c<4;c+=1)for(i=c*8,o=e[c],a=0;a<8;a+=2)n[i+1+a]=r.charAt(o&15),o>>>=4,n[i+0+a]=r.charAt(o&15),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],i=e[2],a=e[3];n+=(o&i|~o&a)+r[0]-680876936|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[2]+606105819|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[3]-1044525330|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[4]-176418897|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[7]-45705983|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[8]+1770035416|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[10]-42063|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[11]-1990404162|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[12]+1804603682|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[15]+1236535329|0,o=(o<<22|o>>>10)+i|0,n+=(o&a|i&~a)+r[1]-165796510|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[11]+643717713|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[0]-373897302|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[5]-701558691|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[15]-660478335|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[4]-405537848|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[9]+568446438|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[3]-187363961|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[8]+1163531501|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[13]-1444681467|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[12]-1926607734|0,o=(o<<20|o>>>12)+i|0,n+=(o^i^a)+r[5]-378558|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[14]-35309556|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[1]-1530992060|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[7]-155497632|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[10]-1094730640|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[13]+681279174|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[3]-722521979|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[6]+76029189|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[9]-640364487|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[15]+530742520|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+i|0,n+=(i^(o|~a))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[10]-1051523|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[2]+718787259|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Pn.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a;for(a=0;a<e.length;a+=1){if(i=e.charCodeAt(a),i<128)r[o++]=i;else if(i<2048)r[o++]=(i>>>6)+192,r[o++]=i&63|128;else if(i<55296||i>56319)r[o++]=(i>>>12)+224,r[o++]=i>>>6&63|128,r[o++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++a)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(i>>>18)+240,r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=i&63|128}o>=64&&(this._dataLength+=64,Pn._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e.charCodeAt(a++);if(o<64)break;this._dataLength+=64,Pn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e[a++];if(o<64)break;this._dataLength+=64,Pn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i=0;i<r.length;i+=1)this._buffer8[i]=r.charCodeAt(i)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,i=(r>>2)+1;this._dataLength+=r;let a=this._dataLength*8;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(Pn.buffer32Identity.subarray(i),i),r>55&&(Pn._md5cycle(this._state,o),o.set(Pn.buffer32Identity)),a<=4294967295)o[14]=a;else{let c=a.toString(16).match(/(.*?)(.{0,8})$/);if(c===null)return;let l=parseInt(c[2],16),d=parseInt(c[1],16)||0;o[14]=l,o[15]=d}return Pn._md5cycle(this._state,o),e?this._state:Pn._hex(this._state)}},I(Wo,"Md5"),Fe(Wo,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),Fe(Wo,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Fe(Wo,"hexChars","0123456789abcdef"),Fe(Wo,"hexOut",[]),Fe(Wo,"onePassHasher",new Wo),ib=Wo}),db={};Hn(db,{createHash:s(()=>MC,"createHash"),createHmac:s(()=>zC,"createHmac"),randomBytes:s(()=>jC,"randomBytes")});s(jC,"gu");s(MC,"bu");s(zC,"vu");UC=on(()=>{"use strict";Ce(),$9(),R9(),I(jC,"randomBytes"),I(MC,"createHash"),I(zC,"createHmac")}),om=et((t,e)=>{"use strict";Ce(),e.exports={host:"localhost",user:Ye.platform==="win32"?Ye.env.USERNAME:Ye.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=nm(),n=r.getTypeParser(20,"text"),o=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){r.setTypeParser(20,"text",i?r.getTypeParser(23,"text"):n),r.setTypeParser(1016,"text",i?r.getTypeParser(1007,"text"):o)})}),im=et((t,e)=>{"use strict";Ce();var r=(UC(),Sr(db)),n=om();function o(g){var f=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+f+'"'}s(o,"Cu"),I(o,"escapeElement");function i(g){for(var f="{",_=0;_<g.length;_++)_>0&&(f=f+","),g[_]===null||typeof g[_]>"u"?f=f+"NULL":Array.isArray(g[_])?f=f+i(g[_]):g[_]instanceof Le?f+="\\\\x"+g[_].toString("hex"):f+=o(a(g[_]));return f=f+"}",f}s(i,"rs"),I(i,"arrayString");var a=I(function(g,f){if(g==null)return null;if(g instanceof Le)return g;if(ArrayBuffer.isView(g)){var _=Le.from(g.buffer,g.byteOffset,g.byteLength);return _.length===g.byteLength?_:_.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?p(g):d(g):Array.isArray(g)?i(g):typeof g=="object"?c(g,f):g.toString()},"prepareValue");function c(g,f){if(g&&typeof g.toPostgres=="function"){if(f=f||[],f.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return f.push(g),a(g.toPostgres(a),f)}return JSON.stringify(g)}s(c,"_u"),I(c,"prepareObject");function l(g,f){for(g=""+g;g.length<f;)g="0"+g;return g}s(l,"N"),I(l,"pad");function d(g){var f=-g.getTimezoneOffset(),_=g.getFullYear(),w=_<1;w&&(_=Math.abs(_)+1);var b=l(_,4)+"-"+l(g.getMonth()+1,2)+"-"+l(g.getDate(),2)+"T"+l(g.getHours(),2)+":"+l(g.getMinutes(),2)+":"+l(g.getSeconds(),2)+"."+l(g.getMilliseconds(),3);return f<0?(b+="-",f*=-1):b+="+",b+=l(Math.floor(f/60),2)+":"+l(f%60,2),w&&(b+=" BC"),b}s(d,"Iu"),I(d,"dateToString");function p(g){var f=g.getUTCFullYear(),_=f<1;_&&(f=Math.abs(f)+1);var w=l(f,4)+"-"+l(g.getUTCMonth()+1,2)+"-"+l(g.getUTCDate(),2)+"T"+l(g.getUTCHours(),2)+":"+l(g.getUTCMinutes(),2)+":"+l(g.getUTCSeconds(),2)+"."+l(g.getUTCMilliseconds(),3);return w+="+00:00",_&&(w+=" BC"),w}s(p,"Tu"),I(p,"dateToStringUTC");function m(g,f,_){return g=typeof g=="string"?{text:g}:g,f&&(typeof f=="function"?g.callback=f:g.values=f),_&&(g.callback=_),g}s(m,"Pu"),I(m,"normalizeQueryConfig");var h=I(function(g){return r.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),y=I(function(g,f,_){var w=h(f+g),b=h(Le.concat([Le.from(w),_]));return"md5"+b},"postgresMd5PasswordHash");e.exports={prepareValue:I(function(g){return a(g)},"prepareValueWrapper"),normalizeQueryConfig:m,postgresMd5PasswordHash:y,md5:h}}),ju={};Hn(ju,{default:s(()=>LC,"default")});sm=on(()=>{"use strict";Ce(),LC={}}),N9=et((t,e)=>{"use strict";Ce();var r=(UC(),Sr(db));function n(f){if(f.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let _=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:_,response:"n,,n=*,r="+_,message:"SASLInitialResponse"}}s(n,"Mu"),I(n,"startSession");function o(f,_,w){if(f.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let b=d(w);if(b.nonce.startsWith(f.clientNonce)){if(b.nonce.length===f.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var S=Le.from(b.salt,"base64"),k=g(_,S,b.iteration),R=y(k,"Client Key"),O=h(R),C="n=*,r="+f.clientNonce,$="r="+b.nonce+",s="+b.salt+",i="+b.iteration,P="c=biws,r="+b.nonce,N=C+","+$+","+P,j=y(O,N),W=m(R,j),Z=W.toString("base64"),F=y(k,"Server Key"),Y=y(F,N);f.message="SASLResponse",f.serverSignature=Y.toString("base64"),f.response=P+",p="+Z}s(o,"Uu"),I(o,"continueSession");function i(f,_){if(f.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:w}=p(_);if(w!==f.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}s(i,"Du"),I(i,"finalizeSession");function a(f){if(typeof f!="string")throw new TypeError("SASL: text must be a string");return f.split("").map((_,w)=>f.charCodeAt(w)).every(_=>_>=33&&_<=43||_>=45&&_<=126)}s(a,"Ou"),I(a,"isPrintableChars");function c(f){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f)}s(c,"ls"),I(c,"isBase64");function l(f){if(typeof f!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(f.split(",").map(_=>{if(!/^.=/.test(_))throw new Error("SASL: Invalid attribute pair entry");let w=_[0],b=_.substring(2);return[w,b]}))}s(l,"fs"),I(l,"parseAttributePairs");function d(f){let _=l(f),w=_.get("r");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let b=_.get("s");if(b){if(!c(b))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let S=_.get("i");if(S){if(!/^[1-9][0-9]*$/.test(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let k=parseInt(S,10);return{nonce:w,salt:b,iteration:k}}s(d,"qu"),I(d,"parseServerFirstMessage");function p(f){let _=l(f).get("v");if(_){if(!c(_))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:_}}s(p,"Qu"),I(p,"parseServerFinalMessage");function m(f,_){if(!Le.isBuffer(f))throw new TypeError("first argument must be a Buffer");if(!Le.isBuffer(_))throw new TypeError("second argument must be a Buffer");if(f.length!==_.length)throw new Error("Buffer lengths must match");if(f.length===0)throw new Error("Buffers cannot be empty");return Le.from(f.map((w,b)=>f[b]^_[b]))}s(m,"hs"),I(m,"xorBuffers");function h(f){return r.createHash("sha256").update(f).digest()}s(h,"Nu"),I(h,"sha256");function y(f,_){return r.createHmac("sha256",f).update(_).digest()}s(y,"Ue"),I(y,"hmacSha256");function g(f,_,w){for(var b=y(f,Le.concat([_,Le.from([0,0,0,1])])),S=b,k=0;k<w-1;k++)b=y(f,b),S=m(S,b);return S}s(g,"Wu"),I(g,"Hi"),e.exports={startSession:n,continueSession:o,finalizeSession:i}}),pb={};Hn(pb,{join:s(()=>qC,"join")});s(qC,"ju");FC=on(()=>{"use strict";Ce(),I(qC,"join")}),mb={};Hn(mb,{stat:s(()=>BC,"stat")});s(BC,"Hu");VC=on(()=>{"use strict";Ce(),I(BC,"stat")}),fb={};Hn(fb,{default:s(()=>HC,"default")});ZC=on(()=>{"use strict";Ce(),HC={}}),JC={};Hn(JC,{StringDecoder:s(()=>KC,"StringDecoder")});D9=on(()=>{"use strict";Ce(),ob=class{static{s(this,"Er")}constructor(e){Fe(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},I(ob,"StringDecoder"),KC=ob}),j9=et((t,e)=>{"use strict";Ce();var{Transform:r}=(ZC(),Sr(fb)),{StringDecoder:n}=(D9(),Sr(JC)),o=Symbol("last"),i=Symbol("decoder");function a(m,h,y){let g;if(this.overflow){if(g=this[i].write(m).split(this.matcher),g.length===1)return y();g.shift(),this.overflow=!1}else this[o]+=this[i].write(m),g=this[o].split(this.matcher);this[o]=g.pop();for(let f=0;f<g.length;f++)try{l(this,this.mapper(g[f]))}catch(_){return y(_)}if(this.overflow=this[o].length>this.maxLength,this.overflow&&!this.skipOverflow){y(new Error("maximum buffer reached"));return}y()}s(a,"zu"),I(a,"transform");function c(m){if(this[o]+=this[i].end(),this[o])try{l(this,this.mapper(this[o]))}catch(h){return m(h)}m()}s(c,"Ku"),I(c,"flush");function l(m,h){h!==void 0&&m.push(h)}s(l,"gs"),I(l,"push");function d(m){return m}s(d,"ws"),I(d,"noop");function p(m,h,y){switch(m=m||/\r?\n/,h=h||d,y=y||{},arguments.length){case 1:typeof m=="function"?(h=m,m=/\r?\n/):typeof m=="object"&&!(m instanceof RegExp)&&!m[Symbol.split]&&(y=m,m=/\r?\n/);break;case 2:typeof m=="function"?(y=h,h=m,m=/\r?\n/):typeof h=="object"&&(y=h,h=d)}y=Object.assign({},y),y.autoDestroy=!0,y.transform=a,y.flush=c,y.readableObjectMode=!0;let g=new r(y);return g[o]="",g[i]=new n("utf8"),g.matcher=m,g.mapper=h,g.maxLength=y.maxLength,g.skipOverflow=y.skipOverflow||!1,g.overflow=!1,g._destroy=function(f,_){this._writableState.errorEmitted=!1,_(f)},g}s(p,"Yu"),I(p,"split"),e.exports=p}),M9=et((t,e)=>{"use strict";Ce();var r=(FC(),Sr(pb)),n=(ZC(),Sr(fb)).Stream,o=j9(),i=(sm(),Sr(ju)),a=5432,c=Ye.platform==="win32",l=Ye.stderr,d=56,p=7,m=61440,h=32768;function y(R){return(R&m)==h}s(y,"ic"),I(y,"isRegFile");var g=["host","port","database","user","password"],f=g.length,_=g[f-1];function w(){var R=l instanceof n&&l.writable===!0;if(R){var O=Array.prototype.slice.call(arguments).concat(`
`);l.write(i.format.apply(i,O))}}s(w,"Cr"),I(w,"warn"),Object.defineProperty(e.exports,"isWin",{get:I(function(){return c},"get"),set:I(function(R){c=R},"set")}),e.exports.warnTo=function(R){var O=l;return l=R,O},e.exports.getFileName=function(R){var O=R||Ye.env,C=O.PGPASSFILE||(c?r.join(O.APPDATA||"./","postgresql","pgpass.conf"):r.join(O.HOME||"./",".pgpass"));return C},e.exports.usePgPass=function(R,O){return Object.prototype.hasOwnProperty.call(Ye.env,"PGPASSWORD")?!1:c?!0:(O=O||"<unkn>",y(R.mode)?R.mode&(d|p)?(w('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',O),!1):!0:(w('WARNING: password file "%s" is not a plain file',O),!1))};var b=e.exports.match=function(R,O){return g.slice(0,-1).reduce(function(C,$,P){return P==1&&Number(R[$]||a)===Number(O[$])?C&&!0:C&&(O[$]==="*"||O[$]===R[$])},!0)};e.exports.getPassword=function(R,O,C){var $,P=O.pipe(o());function N(Z){var F=S(Z);F&&k(F)&&b(R,F)&&($=F[_],P.end())}s(N,"s"),I(N,"onLine");var j=I(function(){O.destroy(),C($)},"onEnd"),W=I(function(Z){O.destroy(),w("WARNING: error on reading file: %s",Z),C(void 0)},"onErr");O.on("error",W),P.on("data",N).on("end",j).on("error",W)};var S=e.exports.parseLine=function(R){if(R.length<11||R.match(/^\s+#/))return null;for(var O="",C="",$=0,P=0,N=0,j={},W=!1,Z=I(function(Y,re,ie){var be=R.substring(re,ie);Object.hasOwnProperty.call(Ye.env,"PGPASS_NO_DEESCAPE")||(be=be.replace(/\\([:\\])/g,"$1")),j[g[Y]]=be},"addToObj"),F=0;F<R.length-1;F+=1){if(O=R.charAt(F+1),C=R.charAt(F),W=$==f-1,W){Z($,P);break}F>=0&&O==":"&&C!=="\\"&&(Z($,P,F+1),P=F+2,$+=1)}return j=Object.keys(j).length===f?j:null,j},k=e.exports.isValidEntry=function(R){for(var O={0:function(j){return j.length>0},1:function(j){return j==="*"?!0:(j=Number(j),isFinite(j)&&j>0&&j<9007199254740992&&Math.floor(j)===j)},2:function(j){return j.length>0},3:function(j){return j.length>0},4:function(j){return j.length>0}},C=0;C<g.length;C+=1){var $=O[C],P=R[g[C]]||"",N=$(P);if(!N)return!1}return!0}}),z9=et((t,e)=>{"use strict";Ce();var r=(FC(),Sr(pb)),n=(VC(),Sr(mb)),o=M9();e.exports=function(i,a){var c=o.getFileName();n.stat(c,function(l,d){if(l||!o.usePgPass(d,c))return a(void 0);var p=n.createReadStream(c);o.getPassword(i,p,a)})},e.exports.warnTo=o.warnTo}),GC={};Hn(GC,{default:s(()=>WC,"default")});U9=on(()=>{"use strict";Ce(),WC={}}),L9=et((t,e)=>{"use strict";Ce();var r=($C(),Sr(OC)),n=(VC(),Sr(mb));function o(i){if(i.charAt(0)==="/"){var c=i.split(" ");return{host:c[0],database:c[1]}}var a=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),c=a.query;for(var l in c)Array.isArray(c[l])&&(c[l]=c[l][c[l].length-1]);var d=(a.auth||":").split(":");if(c.user=d[0],c.password=d.splice(1).join(":"),c.port=a.port,a.protocol=="socket:")return c.host=decodeURI(a.pathname),c.database=a.query.db,c.client_encoding=a.query.encoding,c;c.host||(c.host=a.hostname);var p=a.pathname;if(!c.host&&p&&/^%2f/i.test(p)){var m=p.split("/");c.host=decodeURIComponent(m[0]),p=m.splice(1).join("/")}switch(p&&p.charAt(0)==="/"&&(p=p.slice(1)||null),c.database=p&&decodeURI(p),(c.ssl==="true"||c.ssl==="1")&&(c.ssl=!0),c.ssl==="0"&&(c.ssl=!1),(c.sslcert||c.sslkey||c.sslrootcert||c.sslmode)&&(c.ssl={}),c.sslcert&&(c.ssl.cert=n.readFileSync(c.sslcert).toString()),c.sslkey&&(c.ssl.key=n.readFileSync(c.sslkey).toString()),c.sslrootcert&&(c.ssl.ca=n.readFileSync(c.sslrootcert).toString()),c.sslmode){case"disable":{c.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{c.ssl.rejectUnauthorized=!1;break}}return c}s(o,"Tr"),I(o,"parse"),e.exports=o,o.parse=o}),hb=et((t,e)=>{"use strict";Ce();var r=(U9(),Sr(GC)),n=om(),o=L9().parse,i=I(function(m,h,y){return y===void 0?y=Ye.env["PG"+m.toUpperCase()]:y===!1||(y=Ye.env[y]),h[m]||y||n[m]},"val"),a=I(function(){switch(Ye.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),c=I(function(m){return"'"+(""+m).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),l=I(function(m,h,y){var g=h[y];g!=null&&m.push(y+"="+c(g))},"add"),d=class{static{s(this,"Br")}constructor(h){h=typeof h=="string"?o(h):h||{},h.connectionString&&(h=Object.assign({},h,o(h.connectionString))),this.user=i("user",h),this.database=i("database",h),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",h),10),this.host=i("host",h),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",h)}),this.binary=i("binary",h),this.options=i("options",h),this.ssl=typeof h.ssl>"u"?a():h.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",h),this.replication=i("replication",h),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",h,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",h,!1),this.statement_timeout=i("statement_timeout",h,!1),this.lock_timeout=i("lock_timeout",h,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",h,!1),this.query_timeout=i("query_timeout",h,!1),h.connectionTimeoutMillis===void 0?this.connect_timeout=Ye.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(h.connectionTimeoutMillis/1e3),h.keepAlive===!1?this.keepalives=0:h.keepAlive===!0&&(this.keepalives=1),typeof h.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(h.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(h){var y=[];l(y,this,"user"),l(y,this,"password"),l(y,this,"port"),l(y,this,"application_name"),l(y,this,"fallback_application_name"),l(y,this,"connect_timeout"),l(y,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(y,g,"sslmode"),l(y,g,"sslca"),l(y,g,"sslkey"),l(y,g,"sslcert"),l(y,g,"sslrootcert"),this.database&&y.push("dbname="+c(this.database)),this.replication&&y.push("replication="+c(this.replication)),this.host&&y.push("host="+c(this.host)),this.isDomainSocket)return h(null,y.join(" "));this.client_encoding&&y.push("client_encoding="+c(this.client_encoding)),r.lookup(this.host,function(f,_){return f?h(f,null):(y.push("hostaddr="+c(_)),h(null,y.join(" ")))})}};I(d,"ConnectionParameters");var p=d;e.exports=p}),q9=et((t,e)=>{"use strict";Ce();var r=nm(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,o=class{static{s(this,"Lr")}constructor(c,l){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=l,this.RowCtor=null,this.rowAsArray=c==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(c){var l;c.text?l=n.exec(c.text):l=n.exec(c.command),l&&(this.command=l[1],l[3]?(this.oid=parseInt(l[2],10),this.rowCount=parseInt(l[3],10)):l[2]&&(this.rowCount=parseInt(l[2],10)))}_parseRowAsArray(c){for(var l=new Array(c.length),d=0,p=c.length;d<p;d++){var m=c[d];m!==null?l[d]=this._parsers[d](m):l[d]=null}return l}parseRow(c){for(var l={},d=0,p=c.length;d<p;d++){var m=c[d],h=this.fields[d].name;m!==null?l[h]=this._parsers[d](m):l[h]=null}return l}addRow(c){this.rows.push(c)}addFields(c){this.fields=c,this.fields.length&&(this._parsers=new Array(c.length));for(var l=0;l<c.length;l++){var d=c[l];this._types?this._parsers[l]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[l]=r.getTypeParser(d.dataTypeID,d.format||"text")}}};I(o,"Result");var i=o;e.exports=i}),F9=et((t,e)=>{"use strict";Ce();var{EventEmitter:r}=Ps(),n=q9(),o=im(),i=class extends r{static{s(this,"kr")}constructor(l,d,p){super(),l=o.normalizeQueryConfig(l,d,p),this.text=l.text,this.values=l.values,this.rows=l.rows,this.types=l.types,this.name=l.name,this.binary=l.binary,this.portal=l.portal||"",this.callback=l.callback,this._rowMode=l.rowMode,Ye.domain&&l.callback&&(this.callback=Ye.domain.bind(l.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(l){this._checkForMultirow(),this._result.addFields(l.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(l){let d;if(!this._canceledDueToError){try{d=this._result.parseRow(l.fields)}catch(p){this._canceledDueToError=p;return}this.emit("row",d,this._result),this._accumulateRows&&this._result.addRow(d)}}handleCommandComplete(l,d){this._checkForMultirow(),this._result.addCommandComplete(l),this.rows&&d.sync()}handleEmptyQuery(l){this.rows&&l.sync()}handleError(l,d){if(this._canceledDueToError&&(l=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(l);this.emit("error",l)}handleReadyForQuery(l){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,l);if(this.callback)try{this.callback(null,this._results)}catch(d){Ye.nextTick(()=>{throw d})}this.emit("end",this._results)}submit(l){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let d=l.parsedStatements[this.name];return this.text&&d&&this.text!==d?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(l):l.query(this.text),null)}hasBeenParsed(l){return this.name&&l.parsedStatements[this.name]}handlePortalSuspended(l){this._getRows(l,this.rows)}_getRows(l,d){l.execute({portal:this.portal,rows:d}),d?l.flush():l.sync()}prepare(l){this.isPreparedStatement=!0,this.hasBeenParsed(l)||l.parse({text:this.text,name:this.name,types:this.types});try{l.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:o.prepareValue})}catch(d){this.handleError(d,l);return}l.describe({type:"P",name:this.portal||""}),this._getRows(l,this.rows)}handleCopyInResponse(l){l.sendCopyFail("No source stream defined")}handleCopyData(l,d){}};I(i,"Query");var a=i;e.exports=a}),QC=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{static{s(this,"Kr")}constructor(F,Y,re){super(F),this.length=Y,this.name=re}};I(e,"DatabaseError");var r=e;t.DatabaseError=r;var n=class{static{s(this,"Yr")}constructor(F,Y){this.length=F,this.chunk=Y,this.name="copyData"}};I(n,"CopyDataMessage");var o=n;t.CopyDataMessage=o;var i=class{static{s(this,"Zr")}constructor(F,Y,re,ie){this.length=F,this.name=Y,this.binary=re,this.columnTypes=new Array(ie)}};I(i,"CopyResponse");var a=i;t.CopyResponse=a;var c=class{static{s(this,"Jr")}constructor(F,Y,re,ie,be,Te,Xe){this.name=F,this.tableID=Y,this.columnID=re,this.dataTypeID=ie,this.dataTypeSize=be,this.dataTypeModifier=Te,this.format=Xe}};I(c,"Field");var l=c;t.Field=l;var d=class{static{s(this,"Xr")}constructor(F,Y){this.length=F,this.fieldCount=Y,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};I(d,"RowDescriptionMessage");var p=d;t.RowDescriptionMessage=p;var m=class{static{s(this,"en")}constructor(F,Y){this.length=F,this.parameterCount=Y,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};I(m,"ParameterDescriptionMessage");var h=m;t.ParameterDescriptionMessage=h;var y=class{static{s(this,"tn")}constructor(F,Y,re){this.length=F,this.parameterName=Y,this.parameterValue=re,this.name="parameterStatus"}};I(y,"ParameterStatusMessage");var g=y;t.ParameterStatusMessage=g;var f=class{static{s(this,"rn")}constructor(F,Y){this.length=F,this.salt=Y,this.name="authenticationMD5Password"}};I(f,"AuthenticationMD5Password");var _=f;t.AuthenticationMD5Password=_;var w=class{static{s(this,"nn")}constructor(F,Y,re){this.length=F,this.processID=Y,this.secretKey=re,this.name="backendKeyData"}};I(w,"BackendKeyDataMessage");var b=w;t.BackendKeyDataMessage=b;var S=class{static{s(this,"sn")}constructor(F,Y,re,ie){this.length=F,this.processId=Y,this.channel=re,this.payload=ie,this.name="notification"}};I(S,"NotificationResponseMessage");var k=S;t.NotificationResponseMessage=k;var R=class{static{s(this,"on")}constructor(F,Y){this.length=F,this.status=Y,this.name="readyForQuery"}};I(R,"ReadyForQueryMessage");var O=R;t.ReadyForQueryMessage=O;var C=class{static{s(this,"an")}constructor(F,Y){this.length=F,this.text=Y,this.name="commandComplete"}};I(C,"CommandCompleteMessage");var $=C;t.CommandCompleteMessage=$;var P=class{static{s(this,"un")}constructor(F,Y){this.length=F,this.fields=Y,this.name="dataRow",this.fieldCount=Y.length}};I(P,"DataRowMessage");var N=P;t.DataRowMessage=N;var j=class{static{s(this,"cn")}constructor(F,Y){this.length=F,this.message=Y,this.name="notice"}};I(j,"NoticeMessage");var W=j;t.NoticeMessage=W}),B9=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{static{s(this,"hn")}constructor(o=256){this.size=o,this.offset=5,this.headerPosition=0,this.buffer=Le.allocUnsafe(o)}ensure(o){if(this.buffer.length-this.offset<o){let i=this.buffer,a=i.length+(i.length>>1)+o;this.buffer=Le.allocUnsafe(a),i.copy(this.buffer)}}addInt32(o){return this.ensure(4),this.buffer[this.offset++]=o>>>24&255,this.buffer[this.offset++]=o>>>16&255,this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addInt16(o){return this.ensure(2),this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addCString(o){if(!o)this.ensure(1);else{let i=Le.byteLength(o);this.ensure(i+1),this.buffer.write(o,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(o=""){let i=Le.byteLength(o);return this.ensure(i),this.buffer.write(o,this.offset),this.offset+=i,this}add(o){return this.ensure(o.length),o.copy(this.buffer,this.offset),this.offset+=o.length,this}join(o){if(o){this.buffer[this.headerPosition]=o;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(o?0:5,this.offset)}flush(o){let i=this.join(o);return this.offset=5,this.headerPosition=0,this.buffer=Le.allocUnsafe(this.size),i}};I(e,"Writer");var r=e;t.Writer=r}),V9=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=B9(),r=new e.Writer,n=I(F=>{r.addInt16(3).addInt16(0);for(let ie of Object.keys(F))r.addCString(ie).addCString(F[ie]);r.addCString("client_encoding").addCString("UTF8");let Y=r.addCString("").flush(),re=Y.length+4;return new e.Writer().addInt32(re).add(Y).flush()},"startup"),o=I(()=>{let F=Le.allocUnsafe(8);return F.writeInt32BE(8,0),F.writeInt32BE(80877103,4),F},"requestSsl"),i=I(F=>r.addCString(F).flush(112),"password"),a=I(function(F,Y){return r.addCString(F).addInt32(Le.byteLength(Y)).addString(Y),r.flush(112)},"sendSASLInitialResponseMessage"),c=I(function(F){return r.addString(F).flush(112)},"sendSCRAMClientFinalMessage"),l=I(F=>r.addCString(F).flush(81),"query"),d=[],p=I(F=>{let Y=F.name||"";Y.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Y,Y.length),console.error("This can cause conflicts and silent errors executing queries"));let re=F.types||d,ie=re.length,be=r.addCString(Y).addCString(F.text).addInt16(ie);for(let Te=0;Te<ie;Te++)be.addInt32(re[Te]);return r.flush(80)},"parse"),m=new e.Writer,h=I(function(F,Y){for(let re=0;re<F.length;re++){let ie=Y?Y(F[re],re):F[re];ie==null?(r.addInt16(0),m.addInt32(-1)):ie instanceof Le?(r.addInt16(1),m.addInt32(ie.length),m.add(ie)):(r.addInt16(0),m.addInt32(Le.byteLength(ie)),m.addString(ie))}},"writeValues"),y=I((F={})=>{let Y=F.portal||"",re=F.statement||"",ie=F.binary||!1,be=F.values||d,Te=be.length;return r.addCString(Y).addCString(re),r.addInt16(Te),h(be,F.valueMapper),r.addInt16(Te),r.add(m.flush()),r.addInt16(ie?1:0),r.flush(66)},"bind"),g=Le.from([69,0,0,0,9,0,0,0,0,0]),f=I(F=>{if(!F||!F.portal&&!F.rows)return g;let Y=F.portal||"",re=F.rows||0,ie=Le.byteLength(Y),be=4+ie+1+4,Te=Le.allocUnsafe(1+be);return Te[0]=69,Te.writeInt32BE(be,1),Te.write(Y,5,"utf-8"),Te[ie+5]=0,Te.writeUInt32BE(re,Te.length-4),Te},"execute"),_=I((F,Y)=>{let re=Le.allocUnsafe(16);return re.writeInt32BE(16,0),re.writeInt16BE(1234,4),re.writeInt16BE(5678,6),re.writeInt32BE(F,8),re.writeInt32BE(Y,12),re},"cancel"),w=I((F,Y)=>{let re=4+Le.byteLength(Y)+1,ie=Le.allocUnsafe(1+re);return ie[0]=F,ie.writeInt32BE(re,1),ie.write(Y,5,"utf-8"),ie[re]=0,ie},"cstringMessage"),b=r.addCString("P").flush(68),S=r.addCString("S").flush(68),k=I(F=>F.name?w(68,`${F.type}${F.name||""}`):F.type==="P"?b:S,"describe"),R=I(F=>{let Y=`${F.type}${F.name||""}`;return w(67,Y)},"close"),O=I(F=>r.add(F).flush(100),"copyData"),C=I(F=>w(102,F),"copyFail"),$=I(F=>Le.from([F,0,0,0,4]),"codeOnlyBuffer"),P=$(72),N=$(83),j=$(88),W=$(99),Z={startup:n,password:i,requestSsl:o,sendSASLInitialResponseMessage:a,sendSCRAMClientFinalMessage:c,query:l,parse:p,bind:y,execute:f,describe:k,close:R,flush:I(()=>P,"flush"),sync:I(()=>N,"sync"),end:I(()=>j,"end"),copyData:O,copyDone:I(()=>W,"copyDone"),copyFail:C,cancel:_};t.serialize=Z}),H9=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=Le.allocUnsafe(0),r=class{static{s(this,"mn")}constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,a){this.offset=i,this.buffer=a}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let a=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,a}cstring(){let i=this.offset,a=i;for(;this.buffer[a++]!==0;);return this.offset=a,this.buffer.toString(this.encoding,i,a-1)}bytes(i){let a=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,a}};I(r,"BufferReader");var n=r;t.BufferReader=n}),Z9=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=QC(),r=H9(),n=1,o=4,i=n+o,a=Le.allocUnsafe(0),c=class{static{s(this,"bn")}constructor(p){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,p?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=p?.mode||"text"}parse(p,m){this.mergeBuffer(p);let h=this.bufferOffset+this.bufferLength,y=this.bufferOffset;for(;y+i<=h;){let g=this.buffer[y],f=this.buffer.readUInt32BE(y+n),_=n+f;if(_+y<=h){let w=this.handlePacket(y+i,g,f,this.buffer);m(w),y+=_}else break}y===h?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=h-y,this.bufferOffset=y)}mergeBuffer(p){if(this.bufferLength>0){let m=this.bufferLength+p.byteLength;if(m+this.bufferOffset>this.buffer.byteLength){let h;if(m<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)h=this.buffer;else{let y=this.buffer.byteLength*2;for(;m>=y;)y*=2;h=Le.allocUnsafe(y)}this.buffer.copy(h,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=h,this.bufferOffset=0}p.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=m}else this.buffer=p,this.bufferOffset=0,this.bufferLength=p.byteLength}handlePacket(p,m,h,y){switch(m){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(p,h,y);case 67:return this.parseCommandCompleteMessage(p,h,y);case 90:return this.parseReadyForQueryMessage(p,h,y);case 65:return this.parseNotificationMessage(p,h,y);case 82:return this.parseAuthenticationResponse(p,h,y);case 83:return this.parseParameterStatusMessage(p,h,y);case 75:return this.parseBackendKeyData(p,h,y);case 69:return this.parseErrorMessage(p,h,y,"error");case 78:return this.parseErrorMessage(p,h,y,"notice");case 84:return this.parseRowDescriptionMessage(p,h,y);case 116:return this.parseParameterDescriptionMessage(p,h,y);case 71:return this.parseCopyInMessage(p,h,y);case 72:return this.parseCopyOutMessage(p,h,y);case 100:return this.parseCopyData(p,h,y);default:return new e.DatabaseError("received invalid response: "+m.toString(16),h,"error")}}parseReadyForQueryMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.string(1);return new e.ReadyForQueryMessage(m,y)}parseCommandCompleteMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring();return new e.CommandCompleteMessage(m,y)}parseCopyData(p,m,h){let y=h.slice(p,p+(m-4));return new e.CopyDataMessage(m,y)}parseCopyInMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyInResponse")}parseCopyOutMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyOutResponse")}parseCopyMessage(p,m,h,y){this.reader.setBuffer(p,h);let g=this.reader.byte()!==0,f=this.reader.int16(),_=new e.CopyResponse(m,y,g,f);for(let w=0;w<f;w++)_.columnTypes[w]=this.reader.int16();return _}parseNotificationMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.cstring(),f=this.reader.cstring();return new e.NotificationResponseMessage(m,y,g,f)}parseRowDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.RowDescriptionMessage(m,y);for(let f=0;f<y;f++)g.fields[f]=this.parseField();return g}parseField(){let p=this.reader.cstring(),m=this.reader.uint32(),h=this.reader.int16(),y=this.reader.uint32(),g=this.reader.int16(),f=this.reader.int32(),_=this.reader.int16()===0?"text":"binary";return new e.Field(p,m,h,y,g,f,_)}parseParameterDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.ParameterDescriptionMessage(m,y);for(let f=0;f<y;f++)g.dataTypeIDs[f]=this.reader.int32();return g}parseDataRowMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new Array(y);for(let f=0;f<y;f++){let _=this.reader.int32();g[f]=_===-1?null:this.reader.string(_)}return new e.DataRowMessage(m,g)}parseParameterStatusMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(m,y,g)}parseBackendKeyData(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(m,y,g)}parseAuthenticationResponse(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g={name:"authenticationOk",length:m};switch(y){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let f=this.reader.bytes(4);return new e.AuthenticationMD5Password(m,f)}break;case 10:{g.name="authenticationSASL",g.mechanisms=[];let f;do f=this.reader.cstring(),f&&g.mechanisms.push(f);while(f)}break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(m-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(m-8);break;default:throw new Error("Unknown authenticationOk message type "+y)}return g}parseErrorMessage(p,m,h,y){this.reader.setBuffer(p,h);let g={},f=this.reader.string(1);for(;f!=="\0";)g[f]=this.reader.cstring(),f=this.reader.string(1);let _=g.M,w=y==="notice"?new e.NoticeMessage(m,_):new e.DatabaseError(_,m,y);return w.severity=g.S,w.code=g.C,w.detail=g.D,w.hint=g.H,w.position=g.P,w.internalPosition=g.p,w.internalQuery=g.q,w.where=g.W,w.schema=g.s,w.table=g.t,w.column=g.c,w.dataType=g.d,w.constraint=g.n,w.file=g.F,w.line=g.L,w.routine=g.R,w}};I(c,"Parser");var l=c;t.Parser=l}),XC=et(t=>{"use strict";Ce(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=QC();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:I(function(){return e.DatabaseError},"get")});var r=V9();Object.defineProperty(t,"serialize",{enumerable:!0,get:I(function(){return r.serialize},"get")});var n=Z9();function o(i,a){let c=new n.Parser;return i.on("data",l=>c.parse(l,a)),new Promise(l=>i.on("end",()=>l()))}s(o,"Hc"),I(o,"parse"),t.parse=o}),YC={};Hn(YC,{connect:s(()=>e1,"connect")});s(e1,"$c");J9=on(()=>{"use strict";Ce(),I(e1,"connect")}),t1=et((t,e)=>{"use strict";Ce();var r=(Du(),Sr(AC)),n=Ps().EventEmitter,{parse:o,serialize:i}=XC(),a=i.flush(),c=i.sync(),l=i.end(),d=class extends n{static{s(this,"Sn")}constructor(h){super(),h=h||{},this.stream=h.stream||new r.Socket,this._keepAlive=h.keepAlive,this._keepAliveInitialDelayMillis=h.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=h.ssl||!1,this._ending=!1,this._emitMessage=!1;var y=this;this.on("newListener",function(g){g==="message"&&(y._emitMessage=!0)})}connect(h,y){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(h,y),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let f=I(function(_){g._ending&&(_.code==="ECONNRESET"||_.code==="EPIPE")||g.emit("error",_)},"reportStreamError");if(this.stream.on("error",f),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(_){var w=_.toString("utf8");switch(w){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var b=(J9(),Sr(YC));let S={socket:g.stream};g.ssl!==!0&&(Object.assign(S,g.ssl),"key"in g.ssl&&(S.key=g.ssl.key)),r.isIP(y)===0&&(S.servername=y);try{g.stream=b.connect(S)}catch(k){return g.emit("error",k)}g.attachListeners(g.stream),g.stream.on("error",f),g.emit("sslconnect")})}attachListeners(h){h.on("end",()=>{this.emit("end")}),o(h,y=>{var g=y.name==="error"?"errorMessage":y.name;this._emitMessage&&this.emit("message",y),this.emit(g,y)})}requestSsl(){this.stream.write(i.requestSsl())}startup(h){this.stream.write(i.startup(h))}cancel(h,y){this._send(i.cancel(h,y))}password(h){this._send(i.password(h))}sendSASLInitialResponseMessage(h,y){this._send(i.sendSASLInitialResponseMessage(h,y))}sendSCRAMClientFinalMessage(h){this._send(i.sendSCRAMClientFinalMessage(h))}_send(h){return this.stream.writable?this.stream.write(h):!1}query(h){this._send(i.query(h))}parse(h){this._send(i.parse(h))}bind(h){this._send(i.bind(h))}execute(h){this._send(i.execute(h))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(c)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(h){this._send(i.close(h))}describe(h){this._send(i.describe(h))}sendCopyFromChunk(h){this._send(i.copyData(h))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(h){this._send(i.copyFail(h))}};I(d,"Connection");var p=d;e.exports=p}),K9=et((t,e)=>{"use strict";Ce();var r=Ps().EventEmitter,n=(sm(),Sr(ju)),o=im(),i=N9(),a=z9(),c=lb(),l=hb(),d=F9(),p=om(),m=t1(),h=class extends r{static{s(this,"Cn")}constructor(f){super(),this.connectionParameters=new l(f),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var _=f||{};this._Promise=_.Promise||rm.Promise,this._types=new c(_.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=_.connection||new m({stream:_.stream,ssl:this.connectionParameters.ssl,keepAlive:_.keepAlive||!1,keepAliveInitialDelayMillis:_.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=_.binary||p.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=_.connectionTimeoutMillis||0}_errorAllQueries(f){let _=I(w=>{Ye.nextTick(()=>{w.handleError(f,this.connection)})},"enqueueError");this.activeQuery&&(_(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(_),this.queryQueue.length=0}_connect(f){var _=this,w=this.connection;if(this._connectionCallback=f,this._connecting||this._connected){let b=new Error("Client has already been connected. You cannot reuse a client.");Ye.nextTick(()=>{f(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{w._ending=!0,w.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){_.ssl?w.requestSsl():w.startup(_.getStartupConf())}),w.on("sslconnect",function(){w.startup(_.getStartupConf())}),this._attachListeners(w),w.once("end",()=>{let b=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(b),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(b):this._handleErrorEvent(b):this._connectionError||this._handleErrorEvent(b)),Ye.nextTick(()=>{this.emit("end")})})}connect(f){if(f){this._connect(f);return}return new this._Promise((_,w)=>{this._connect(b=>{b?w(b):_()})})}_attachListeners(f){f.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),f.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),f.on("authenticationSASL",this._handleAuthSASL.bind(this)),f.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),f.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),f.on("backendKeyData",this._handleBackendKeyData.bind(this)),f.on("error",this._handleErrorEvent.bind(this)),f.on("errorMessage",this._handleErrorMessage.bind(this)),f.on("readyForQuery",this._handleReadyForQuery.bind(this)),f.on("notice",this._handleNotice.bind(this)),f.on("rowDescription",this._handleRowDescription.bind(this)),f.on("dataRow",this._handleDataRow.bind(this)),f.on("portalSuspended",this._handlePortalSuspended.bind(this)),f.on("emptyQuery",this._handleEmptyQuery.bind(this)),f.on("commandComplete",this._handleCommandComplete.bind(this)),f.on("parseComplete",this._handleParseComplete.bind(this)),f.on("copyInResponse",this._handleCopyInResponse.bind(this)),f.on("copyData",this._handleCopyData.bind(this)),f.on("notification",this._handleNotification.bind(this))}_checkPgPass(f){let _=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(w=>{if(w!==void 0){if(typeof w!="string"){_.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=w}else this.connectionParameters.password=this.password=null;f()}).catch(w=>{_.emit("error",w)}):this.password!==null?f():a(this.connectionParameters,w=>{w!==void 0&&(this.connectionParameters.password=this.password=w),f()})}_handleAuthCleartextPassword(f){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(f){this._checkPgPass(()=>{let _=o.postgresMd5PasswordHash(this.user,this.password,f.salt);this.connection.password(_)})}_handleAuthSASL(f){this._checkPgPass(()=>{this.saslSession=i.startSession(f.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(f){i.continueSession(this.saslSession,this.password,f.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(f){i.finalizeSession(this.saslSession,f.data),this.saslSession=null}_handleBackendKeyData(f){this.processID=f.processID,this.secretKey=f.secretKey}_handleReadyForQuery(f){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:_}=this;this.activeQuery=null,this.readyForQuery=!0,_&&_.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(f){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(f);this.emit("error",f)}}_handleErrorEvent(f){if(this._connecting)return this._handleErrorWhileConnecting(f);this._queryable=!1,this._errorAllQueries(f),this.emit("error",f)}_handleErrorMessage(f){if(this._connecting)return this._handleErrorWhileConnecting(f);let _=this.activeQuery;if(!_){this._handleErrorEvent(f);return}this.activeQuery=null,_.handleError(f,this.connection)}_handleRowDescription(f){this.activeQuery.handleRowDescription(f)}_handleDataRow(f){this.activeQuery.handleDataRow(f)}_handlePortalSuspended(f){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(f){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(f){this.activeQuery.handleCommandComplete(f,this.connection)}_handleParseComplete(f){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(f){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(f){this.activeQuery.handleCopyData(f,this.connection)}_handleNotification(f){this.emit("notification",f)}_handleNotice(f){this.emit("notice",f)}getStartupConf(){var f=this.connectionParameters,_={user:f.user,database:f.database},w=f.application_name||f.fallback_application_name;return w&&(_.application_name=w),f.replication&&(_.replication=""+f.replication),f.statement_timeout&&(_.statement_timeout=String(parseInt(f.statement_timeout,10))),f.lock_timeout&&(_.lock_timeout=String(parseInt(f.lock_timeout,10))),f.idle_in_transaction_session_timeout&&(_.idle_in_transaction_session_timeout=String(parseInt(f.idle_in_transaction_session_timeout,10))),f.options&&(_.options=f.options),_}cancel(f,_){if(f.activeQuery===_){var w=this.connection;this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){w.cancel(f.processID,f.secretKey)})}else f.queryQueue.indexOf(_)!==-1&&f.queryQueue.splice(f.queryQueue.indexOf(_),1)}setTypeParser(f,_,w){return this._types.setTypeParser(f,_,w)}getTypeParser(f,_){return this._types.getTypeParser(f,_)}escapeIdentifier(f){return'"'+f.replace(/"/g,'""')+'"'}escapeLiteral(f){for(var _=!1,w="'",b=0;b<f.length;b++){var S=f[b];S==="'"?w+=S+S:S==="\\"?(w+=S+S,_=!0):w+=S}return w+="'",_===!0&&(w=" E"+w),w}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let f=this.activeQuery.submit(this.connection);f&&Ye.nextTick(()=>{this.activeQuery.handleError(f,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(f,_,w){var b,S,k,R,O;if(f==null)throw new TypeError("Client was passed a null or undefined query");return typeof f.submit=="function"?(k=f.query_timeout||this.connectionParameters.query_timeout,S=b=f,typeof _=="function"&&(b.callback=b.callback||_)):(k=this.connectionParameters.query_timeout,b=new d(f,_,w),b.callback||(S=new this._Promise((C,$)=>{b.callback=(P,N)=>P?$(P):C(N)}))),k&&(O=b.callback,R=setTimeout(()=>{var C=new Error("Query read timeout");Ye.nextTick(()=>{b.handleError(C,this.connection)}),O(C),b.callback=()=>{};var $=this.queryQueue.indexOf(b);$>-1&&this.queryQueue.splice($,1),this._pulseQueryQueue()},k),b.callback=(C,$)=>{clearTimeout(R),O(C,$)}),this.binary&&!b.binary&&(b.binary=!0),b._result&&!b._result._types&&(b._result._types=this._types),this._queryable?this._ending?(Ye.nextTick(()=>{b.handleError(new Error("Client was closed and is not queryable"),this.connection)}),S):(this.queryQueue.push(b),this._pulseQueryQueue(),S):(Ye.nextTick(()=>{b.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),S)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(f){if(this._ending=!0,!this.connection._connecting)if(f)f();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),f)this.connection.once("end",f);else return new this._Promise(_=>{this.connection.once("end",_)})}};I(h,"Client");var y=h;y.Query=d,e.exports=y}),G9=et((t,e)=>{"use strict";Ce();var r=Ps().EventEmitter,n=I(function(){},"NOOP"),o=I((g,f)=>{let _=g.findIndex(f);return _===-1?void 0:g.splice(_,1)[0]},"removeWhere"),i=class{static{s(this,"Tn")}constructor(f,_,w){this.client=f,this.idleListener=_,this.timeoutId=w}};I(i,"IdleItem");var a=i,c=class{static{s(this,"Pn")}constructor(f){this.callback=f}};I(c,"PendingItem");var l=c;function d(){throw new Error("Release called on client which has already been released to the pool.")}s(d,"il"),I(d,"throwOnDoubleRelease");function p(g,f){if(f)return{callback:f,result:void 0};let _,w,b=I(function(k,R){k?_(k):w(R)},"cb"),S=new g(function(k,R){w=k,_=R}).catch(k=>{throw Error.captureStackTrace(k),k});return{callback:b,result:S}}s(p,"Dt"),I(p,"promisify");function m(g,f){return I(s(function _(w){w.client=f,f.removeListener("error",_),f.on("error",()=>{g.log("additional client error after disconnection due to error",w)}),g._remove(f),g.emit("error",w,f)},"t"),"idleListener")}s(m,"sl"),I(m,"makeIdleListener");var h=class extends r{static{s(this,"Bn")}constructor(f,_){super(),this.options=Object.assign({},f),f!=null&&"password"in f&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),f!=null&&f.ssl&&f.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||_||am().Client,this.Promise=this.options.Promise||rm.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(_=>{this._remove(_.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let f=this._pendingQueue.shift();if(this._idle.length){let _=this._idle.pop();clearTimeout(_.timeoutId);let w=_.client;w.ref&&w.ref();let b=_.idleListener;return this._acquireClient(w,f,b,!1)}if(!this._isFull())return this.newClient(f);throw new Error("unexpected condition")}_remove(f){let _=o(this._idle,w=>w.client===f);_!==void 0&&clearTimeout(_.timeoutId),this._clients=this._clients.filter(w=>w!==f),f.end(),this.emit("remove",f)}connect(f){if(this.ending){let b=new Error("Cannot use a pool after calling end on the pool");return f?f(b):this.Promise.reject(b)}let _=p(this.Promise,f),w=_.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Ye.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(_.callback)),w;let b=I((R,O,C)=>{clearTimeout(k),_.callback(R,O,C)},"queueCallback"),S=new l(b),k=setTimeout(()=>{o(this._pendingQueue,R=>R.callback===b),S.timedOut=!0,_.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return k.unref&&k.unref(),this._pendingQueue.push(S),w}return this.newClient(new l(_.callback)),w}newClient(f){let _=new this.Client(this.options);this._clients.push(_);let w=m(this,_);this.log("checking client timeout");let b,S=!1;this.options.connectionTimeoutMillis&&(b=setTimeout(()=>{this.log("ending client due to timeout"),S=!0,_.connection?_.connection.stream.destroy():_.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),_.connect(k=>{if(b&&clearTimeout(b),_.on("error",w),k)this.log("client failed to connect",k),this._clients=this._clients.filter(R=>R!==_),S&&(k=new Error("Connection terminated due to connection timeout",{cause:k})),this._pulseQueue(),f.timedOut||f.callback(k,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let R=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(_),this._idle.findIndex(O=>O.client===_)!==-1&&this._acquireClient(_,new l((O,C,$)=>$()),w,!1)},this.options.maxLifetimeSeconds*1e3);R.unref(),_.once("end",()=>clearTimeout(R))}return this._acquireClient(_,f,w,!0)}})}_acquireClient(f,_,w,b){b&&this.emit("connect",f),this.emit("acquire",f),f.release=this._releaseOnce(f,w),f.removeListener("error",w),_.timedOut?b&&this.options.verify?this.options.verify(f,f.release):f.release():b&&this.options.verify?this.options.verify(f,S=>{if(S)return f.release(S),_.callback(S,void 0,n);_.callback(void 0,f,f.release)}):_.callback(void 0,f,f.release)}_releaseOnce(f,_){let w=!1;return b=>{w&&d(),w=!0,this._release(f,_,b)}}_release(f,_,w){if(f.on("error",_),f._poolUseCount=(f._poolUseCount||0)+1,this.emit("release",w,f),w||this.ending||!f._queryable||f._ending||f._poolUseCount>=this.options.maxUses){f._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(f),this._pulseQueue();return}if(this._expired.has(f)){this.log("remove expired client"),this._expired.delete(f),this._remove(f),this._pulseQueue();return}let b;this.options.idleTimeoutMillis&&this._isAboveMin()&&(b=setTimeout(()=>{this.log("remove idle client"),this._remove(f)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&b.unref()),this.options.allowExitOnIdle&&f.unref(),this._idle.push(new a(f,_,b)),this._pulseQueue()}query(f,_,w){if(typeof f=="function"){let S=p(this.Promise,f);return cb(function(){return S.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),S.result}typeof _=="function"&&(w=_,_=void 0);let b=p(this.Promise,w);return w=b.callback,this.connect((S,k)=>{if(S)return w(S);let R=!1,O=I(C=>{R||(R=!0,k.release(C),w(C))},"onError");k.once("error",O),this.log("dispatching query");try{k.query(f,_,(C,$)=>{if(this.log("query dispatched"),k.removeListener("error",O),!R)return R=!0,k.release(C),C?w(C):w(void 0,$)})}catch(C){return k.release(C),w(C)}}),b.result}end(f){if(this.log("ending"),this.ending){let w=new Error("Called end on pool more than once");return f?f(w):this.Promise.reject(w)}this.ending=!0;let _=p(this.Promise,f);return this._endCallback=_.callback,this._pulseQueue(),_.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((f,_)=>f+(this._expired.has(_)?1:0),0)}get totalCount(){return this._clients.length}};I(h,"Pool");var y=h;e.exports=y}),r1={};Hn(r1,{default:s(()=>n1,"default")});W9=on(()=>{"use strict";Ce(),n1={}}),Q9=et((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),X9=et((t,e)=>{"use strict";Ce();var r=Ps().EventEmitter,n=(sm(),Sr(ju)),o=im(),i=e.exports=function(c,l,d){r.call(this),c=o.normalizeQueryConfig(c,l,d),this.text=c.text,this.values=c.values,this.name=c.name,this.callback=c.callback,this.state="new",this._arrayMode=c.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(p){p==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,r);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(c){var l=this.native.pq.resultErrorFields();if(l)for(var d in l){var p=a[d]||d;c[p]=l[d]}this.callback?this.callback(c):this.emit("error",c),this.state="error"},i.prototype.then=function(c,l){return this._getPromise().then(c,l)},i.prototype.catch=function(c){return this._getPromise().catch(c)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(c,l){this._once("end",c),this._once("error",l)}.bind(this)),this._promise)},i.prototype.submit=function(c){this.state="running";var l=this;this.native=c.native,c.native.arrayMode=this._arrayMode;var d=I(function(h,y,g){if(c.native.arrayMode=!1,cb(function(){l.emit("_done")}),h)return l.handleError(h);l._emitRowEvents&&(g.length>1?y.forEach((f,_)=>{f.forEach(w=>{l.emit("row",w,g[_])})}):y.forEach(function(f){l.emit("row",f,g)})),l.state="end",l.emit("end",g),l.callback&&l.callback(null,g)},"after");if(Ye.domain&&(d=Ye.domain.bind(d)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var p=(this.values||[]).map(o.prepareValue);if(c.namedQueries[this.name]){if(this.text&&c.namedQueries[this.name]!==this.text){let h=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return d(h)}return c.native.execute(this.name,p,d)}return c.native.prepare(this.name,this.text,p.length,function(h){return h?d(h):(c.namedQueries[l.name]=l.text,l.native.execute(l.name,p,d))})}else if(this.values){if(!Array.isArray(this.values)){let h=new Error("Query values must be an array");return d(h)}var m=this.values.map(o.prepareValue);c.native.query(this.text,m,d)}else c.native.query(this.text,d)}}),Y9=et((t,e)=>{"use strict";Ce();var r=(W9(),Sr(r1)),n=lb(),o=Q9(),i=Ps().EventEmitter,a=(sm(),Sr(ju)),c=hb(),l=X9(),d=e.exports=function(p){i.call(this),p=p||{},this._Promise=p.Promise||rm.Promise,this._types=new n(p.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var m=this.connectionParameters=new c(p);this.user=m.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:m.password}),this.database=m.database,this.host=m.host,this.port=m.port,this.namedQueries={}};d.Query=l,a.inherits(d,i),d.prototype._errorAllQueries=function(p){let m=I(h=>{Ye.nextTick(()=>{h.native=this.native,h.handleError(p)})},"enqueueError");this._hasActiveQuery()&&(m(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(m),this._queryQueue.length=0},d.prototype._connect=function(p){var m=this;if(this._connecting){Ye.nextTick(()=>p(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(h,y){if(h)return p(h);m.native.connect(y,function(g){if(g)return m.native.end(),p(g);m._connected=!0,m.native.on("error",function(f){m._queryable=!1,m._errorAllQueries(f),m.emit("error",f)}),m.native.on("notification",function(f){m.emit("notification",{channel:f.relname,payload:f.extra})}),m.emit("connect"),m._pulseQueryQueue(!0),p()})})},d.prototype.connect=function(p){if(p){this._connect(p);return}return new this._Promise((m,h)=>{this._connect(y=>{y?h(y):m()})})},d.prototype.query=function(p,m,h){var y,g,f,_,w;if(p==null)throw new TypeError("Client was passed a null or undefined query");if(typeof p.submit=="function")f=p.query_timeout||this.connectionParameters.query_timeout,g=y=p,typeof m=="function"&&(p.callback=m);else if(f=this.connectionParameters.query_timeout,y=new l(p,m,h),!y.callback){let b,S;g=new this._Promise((k,R)=>{b=k,S=R}),y.callback=(k,R)=>k?S(k):b(R)}return f&&(w=y.callback,_=setTimeout(()=>{var b=new Error("Query read timeout");Ye.nextTick(()=>{y.handleError(b,this.connection)}),w(b),y.callback=()=>{};var S=this._queryQueue.indexOf(y);S>-1&&this._queryQueue.splice(S,1),this._pulseQueryQueue()},f),y.callback=(b,S)=>{clearTimeout(_),w(b,S)}),this._queryable?this._ending?(y.native=this.native,Ye.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(y),this._pulseQueryQueue(),g):(y.native=this.native,Ye.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},d.prototype.end=function(p){var m=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,p));var h;return p||(h=new this._Promise(function(y,g){p=I(f=>f?g(f):y(),"cb")})),this.native.end(function(){m._errorAllQueries(new Error("Connection terminated")),Ye.nextTick(()=>{m.emit("end"),p&&p()})}),h},d.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},d.prototype._pulseQueryQueue=function(p){if(this._connected&&!this._hasActiveQuery()){var m=this._queryQueue.shift();if(!m){p||this.emit("drain");return}this._activeQuery=m,m.submit(this);var h=this;m.once("_done",function(){h._pulseQueryQueue()})}},d.prototype.cancel=function(p){this._activeQuery===p?this.native.cancel(function(){}):this._queryQueue.indexOf(p)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(p),1)},d.prototype.ref=function(){},d.prototype.unref=function(){},d.prototype.setTypeParser=function(p,m,h){return this._types.setTypeParser(p,m,h)},d.prototype.getTypeParser=function(p,m){return this._types.getTypeParser(p,m)}}),xC=et((t,e)=>{"use strict";Ce(),e.exports=Y9()}),am=et((t,e)=>{"use strict";Ce();var r=K9(),n=om(),o=t1(),i=G9(),{DatabaseError:a}=XC(),c=I(d=>{var p;return p=class extends i{static{s(this,"e")}constructor(m){super(m,d)}},I(p,"BoundPool"),p},"poolFactory"),l=I(function(d){this.defaults=n,this.Client=d,this.Query=this.Client.Query,this.Pool=c(this.Client),this._pools=[],this.Connection=o,this.types=nm(),this.DatabaseError=a},"PG");typeof Ye.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new l(xC()):(e.exports=new l(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var d=null;try{d=new l(xC())}catch(p){if(p.code!=="MODULE_NOT_FOUND")throw p}return Object.defineProperty(e.exports,"native",{value:d}),d}}))});Ce();Ce();Du();$C();Ce();e3=Object.defineProperty,t3=Object.defineProperties,r3=Object.getOwnPropertyDescriptors,TC=Object.getOwnPropertySymbols,n3=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,EC=I((t,e,r)=>e in t?e3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),i3=I((t,e)=>{for(var r in e||(e={}))n3.call(e,r)&&EC(t,r,e[r]);if(TC)for(var r of TC(e))o3.call(e,r)&&EC(t,r,e[r]);return t},"__spreadValues"),s3=I((t,e)=>t3(t,r3(e)),"__spreadProps"),a3=1008e3,kC=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,c3=new TextDecoder,gb=new TextEncoder,Xp=gb.encode("0123456789abcdef"),Yp=gb.encode("0123456789ABCDEF"),u3=gb.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o1=u3.slice();o1[62]=45;o1[63]=95;s(i1,"Ea");I(i1,"_toHex");s(s1,"Aa");I(s1,"_toHexChunked");s(a1,"Ei");I(a1,"toHex");Ce();c1=class u1{static{s(this,"gt")}constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:n}=this;for(let o=0,i=r.length;o<i;o++)if(e.query+=r[o],o<n.length){let a=n[o];if(a instanceof p1)e.query+=a.sql;else if(a instanceof tm)if(a.queryData instanceof u1)a.queryData.toParameterizedQuery(e);else{if(a.queryData.params?.length)throw new Error("This query is not composable");e.query+=a.queryData.query}else{let{params:c}=e;c.push(a),e.query+="$"+c.length,(a instanceof Le||ArrayBuffer.isView(a))&&(e.query+="::bytea")}}return e}};I(c1,"SqlTemplate");l1=c1,d1=class{static{s(this,"Xt")}constructor(e){this.sql=e}};I(d1,"UnsafeRawSql");p1=d1;Ce();s(yb,"bt");I(yb,"warnIfBrowser");Du();l3=Is(lb()),d3=Is(im()),m1=class f1 extends Error{static{s(this,"_t")}constructor(e){super(e),Fe(this,"name","NeonDbError"),Fe(this,"severity"),Fe(this,"code"),Fe(this,"detail"),Fe(this,"hint"),Fe(this,"position"),Fe(this,"internalPosition"),Fe(this,"internalQuery"),Fe(this,"where"),Fe(this,"schema"),Fe(this,"table"),Fe(this,"column"),Fe(this,"dataType"),Fe(this,"constraint"),Fe(this,"file"),Fe(this,"line"),Fe(this,"routine"),Fe(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,f1)}};I(m1,"NeonDbError");wa=m1,IC="transaction() expects an array of queries, or a function returning an array of queries",p3=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];s(h1,"Lu");I(h1,"encodeBuffersAsBytea");s(sb,"ss");I(sb,"prepareQuery");s(Ai,"cs");I(Ai,"neon");g1=class{static{s(this,"dr")}constructor(e,r,n){this.execute=e,this.queryData=r,this.opts=n}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};I(g1,"NeonQueryPromise");tm=g1;s(ab,"os");I(ab,"processQueryResult");s(y1,"Fu");I(y1,"getAuthToken");Ce();m3=Is(am());Ce();f3=Is(am()),v1=class extends f3.Client{static{s(this,"kn")}constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||Ye.env.PGHOST!==void 0,o=Ye.env.USER??Ye.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===o&&this.database===o&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${o}, db: ${o}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),a=r.pipelineTLS&&this.ssl,c=r.pipelineConnect==="password";if(!a&&!r.pipelineConnect)return i;let l=this.connection;if(a&&l.on("connect",()=>l.stream.emit("data","S")),c){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let d=this.ssl?"sslconnect":"connect";l.on(d,()=>{this.neonConfig.disableWarningInBrowsers||yb(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,n=this.saslSession,o=this.password,i=e.data;if(n.message!=="SASLInitialResponse"||typeof o!="string"||typeof i!="string")throw new Error("SASL: protocol error");let a=Object.fromEntries(i.split(",").map(be=>{if(!/^.=/.test(be))throw new Error("SASL: Invalid attribute pair entry");let Te=be[0],Xe=be.substring(2);return[Te,Xe]})),c=a.r,l=a.s,d=a.i;if(!c||!/^[!-+--~]+$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!d||!/^[1-9][0-9]*$/.test(d))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!c.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(c.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let p=parseInt(d,10),m=Le.from(l,"base64"),h=new TextEncoder,y=h.encode(o),g=await r.importKey("raw",y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),f=new Uint8Array(await r.sign("HMAC",g,Le.concat([m,Le.from([0,0,0,1])]))),_=f;for(var w=0;w<p-1;w++)f=new Uint8Array(await r.sign("HMAC",g,f)),_=Le.from(_.map((be,Te)=>_[Te]^f[Te]));let b=_,S=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),k=new Uint8Array(await r.sign("HMAC",S,h.encode("Client Key"))),R=await r.digest("SHA-256",k),O="n=*,r="+n.clientNonce,C="r="+c+",s="+l+",i="+p,$="c=biws,r="+c,P=O+","+C+","+$,N=await r.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var j=new Uint8Array(await r.sign("HMAC",N,h.encode(P))),W=Le.from(k.map((be,Te)=>k[Te]^j[Te])),Z=W.toString("base64");let F=await r.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),Y=await r.sign("HMAC",F,h.encode("Server Key")),re=await r.importKey("raw",Y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var ie=Le.from(await r.sign("HMAC",re,h.encode(P)));n.message="SASLResponse",n.serverSignature=ie.toString("base64"),n.response=$+",p="+Z,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};I(v1,"NeonClient");h3=v1;Du();g3=Is(hb());s(_1,"vl");I(_1,"promisify");b1=class extends m3.Pool{static{s(this,"Un")}constructor(){super(...arguments),Fe(this,"Client",h3),Fe(this,"hasFetchUnsupportedListeners",!1),Fe(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!ks.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,n);typeof r=="function"&&(n=r,r=void 0);let o=_1(this.Promise,n);n=o.callback;try{let i=new g3.default(this.options),a=encodeURIComponent,c=encodeURI,l=`postgresql://${a(i.user)}:${a(i.password)}@${a(i.host)}/${c(i.database)}`,d=typeof e=="string"?e:e.text,p=r??e.values??[];Ai(l,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(d,p,{types:e.types??this.options?.types}).then(m=>n(void 0,m)).catch(m=>n(m))}catch(i){n(i)}return o.result}};I(b1,"NeonPool");vo=b1;Du();Mu=Is(am()),tbe=Mu.DatabaseError,rbe=Mu.defaults,nbe=Mu.escapeIdentifier,obe=Mu.escapeLiteral,Lt=Mu.types;});var It,Ci=ee(()=>{Zp();Ln();me();Bt();Fn();Vo();It=class t{static{s(this,"SelectionProxyHandler")}static[D]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===Et)return{...e[Et],selectedFields:new Proxy(e[Et].selectedFields,this)};if(typeof r=="symbol")return e[r];let o=(Q(e,Qt)?e._.selectedFields:Q(e,Dr)?e[Et].selectedFields:e)[r];if(Q(o,_e.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;let i=o.clone();return i.isSelectionField=!0,i}if(Q(o,_e)){if(this.config.sqlBehavior==="sql")return o;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return Q(o,_t)?this.config.alias?new Proxy(o,new ki(new Proxy(o.table,new Ss(this.config.alias,this.config.replaceOriginalName??!1)))):o:typeof o!="object"||o===null?o:new Proxy(o,new t(this.config))}}});var w1,vb,S1=ee(()=>{me();w1=class{static{s(this,"CheckBuilder")}constructor(e,r){this.name=e,this.value=r}static[D]="PgCheckBuilder";brand;build(e){return new vb(e,this)}},vb=class{static{s(this,"Check")}constructor(e,r){this.table=e,this.name=r.name,this.value=r.value}static[D]="PgCheck";name;value}});var cm=ee(()=>{Uy();Vy();Jy();Wy();Yy();ut();rv();iv();cv();Lp();dv();hu();fv();yv();_v();wv();kv();Av();$v();Uv();Vv();Wv();Yv();r_();i_();c_();d_();m_();g_();v_();w_();T_();I_();C_();R_()});function wb(t){return new _b(!0,t)}var _b,Uu,bb,x1=ee(()=>{Bt();me();cm();_b=class{static{s(this,"IndexBuilderOn")}constructor(e,r){this.unique=e,this.name=r}static[D]="PgIndexBuilderOn";on(...e){return new Uu(e.map(r=>{if(Q(r,_e))return r;r=r;let n=new ua(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Uu(e.map(r=>{if(Q(r,_e))return r;r=r;let n=new ua(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new Uu(r.map(n=>{if(Q(n,_e))return n;n=n;let o=new ua(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),o}),this.unique,!0,this.name,e)}},Uu=class{static{s(this,"IndexBuilder")}static[D]="PgIndexBuilder";config;constructor(e,r,n,o,i="btree"){this.config={name:o,columns:e,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new bb(this.config,e)}},bb=class{static{s(this,"Index")}static[D]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};s(wb,"uniqueIndex")});var T1,E1=ee(()=>{me();T1=class{static{s(this,"PgPolicy")}constructor(e,r){this.name=e,r&&(this.as=r.as,this.for=r.for,this.to=r.to,this.using=r.using,this.withCheck=r.withCheck)}static[D]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(e){return this._linkedTable=e,this}}});var Sb,xb=ee(()=>{Sb=Symbol.for("drizzle:PgViewConfig")});function y3(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}function v3(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,n,o)=>{let i=o===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return r+i},"")}function _3(t){return t}var um,k1=ee(()=>{me();Lr();s(y3,"toSnakeCase");s(v3,"toCamelCase");s(_3,"noopCase");um=class{static{s(this,"CasingCache")}static[D]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?y3:e==="camelCase"?v3:_3}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[he.Symbol.Schema]??"public",n=e.table[he.Symbol.OriginalName],o=`${r}.${n}.${e.name}`;return this.cache[o]||this.cacheTable(e.table),this.cache[o]}cacheTable(e){let r=e[he.Symbol.Schema]??"public",n=e[he.Symbol.OriginalName],o=`${r}.${n}`;if(!this.cachedTables[o]){for(let i of Object.values(e[he.Symbol.Columns])){let a=`${o}.${i.name}`;this.cache[a]=this.convert(i.name)}this.cachedTables[o]=!0}}clearCache(){this.cache={},this.cachedTables={}}}});var Qo,lm=ee(()=>{me();Bt();Qo=class extends Dr{static{s(this,"PgViewBase")}static[D]="PgViewBase"}});var _o,Lu=ee(()=>{Zp();k1();Ln();me();Jp();cm();Ii();_a();Qp();Bt();Fn();Lr();wt();Vo();lm();_o=class{static{s(this,"PgDialect")}static[D]="PgDialect";casing;constructor(e){this.casing=new um(e?.casing)}async migrate(e,r,n){let o=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",a=M`
			CREATE TABLE IF NOT EXISTS ${M.identifier(i)}.${M.identifier(o)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(M`CREATE SCHEMA IF NOT EXISTS ${M.identifier(i)}`),await r.execute(a);let l=(await r.all(M`select id, hash, created_at from ${M.identifier(i)}.${M.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async d=>{for await(let p of e)if(!l||Number(l.created_at)<p.folderMillis){for(let m of p.sql)await d.execute(M.raw(m));await d.execute(M`insert into ${M.identifier(i)}.${M.identifier(o)} ("hash", "created_at") values(${p.hash}, ${p.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[M`with `];for(let[n,o]of e.entries())r.push(M`${M.identifier(o._.alias)} as (${o._.sql})`),n<e.length-1&&r.push(M`, `);return r.push(M` `),M.join(r)}buildDeleteQuery({table:e,where:r,returning:n,withList:o}){let i=this.buildWithCTE(o),a=n?M` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,c=r?M` where ${r}`:void 0;return M`${i}delete from ${e}${c}${a}`}buildUpdateSet(e,r){let n=e[he.Symbol.Columns],o=Object.keys(n).filter(a=>r[a]!==void 0||n[a]?.onUpdateFn!==void 0),i=o.length;return M.join(o.flatMap((a,c)=>{let l=n[a],d=r[a]??M.param(l.onUpdateFn(),l),p=M`${M.identifier(this.casing.getColumnCasing(l))} = ${d}`;return c<i-1?[p,M.raw(", ")]:[p]}))}buildUpdateQuery({table:e,set:r,where:n,returning:o,withList:i,from:a,joins:c}){let l=this.buildWithCTE(i),d=e[hr.Symbol.Name],p=e[hr.Symbol.Schema],m=e[hr.Symbol.OriginalName],h=d===m?void 0:d,y=M`${p?M`${M.identifier(p)}.`:void 0}${M.identifier(m)}${h&&M` ${M.identifier(h)}`}`,g=this.buildUpdateSet(e,r),f=a&&M.join([M.raw(" from "),this.buildFromTable(a)]),_=this.buildJoins(c),w=o?M` returning ${this.buildSelection(o,{isSingleTable:!a})}`:void 0,b=n?M` where ${n}`:void 0;return M`${l}update ${y} set ${g}${f}${_}${b}${w}`}buildSelection(e,{isSingleTable:r=!1}={}){let n=e.length,o=e.flatMap(({field:i},a)=>{let c=[];if(Q(i,_e.Aliased)&&i.isSelectionField)c.push(M.identifier(i.fieldAlias));else if(Q(i,_e.Aliased)||Q(i,_e)){let l=Q(i,_e.Aliased)?i.sql:i;r?c.push(new _e(l.queryChunks.map(d=>Q(d,fe)?M.identifier(this.casing.getColumnCasing(d)):d))):c.push(l),Q(i,_e.Aliased)&&c.push(M` as ${M.identifier(i.fieldAlias)}`)}else Q(i,_t)&&(r?c.push(M.identifier(this.casing.getColumnCasing(i))):c.push(i));return a<n-1&&c.push(M`, `),c});return M.join(o)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[n,o]of e.entries()){n===0&&r.push(M` `);let i=o.table,a=o.lateral?M` lateral`:void 0,c=o.on?M` on ${o.on}`:void 0;if(Q(i,hr)){let l=i[hr.Symbol.Name],d=i[hr.Symbol.Schema],p=i[hr.Symbol.OriginalName],m=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${m&&M` ${M.identifier(m)}`}${c}`)}else if(Q(i,Dr)){let l=i[Et].name,d=i[Et].schema,p=i[Et].originalName,m=l===p?void 0:o.alias;r.push(M`${M.raw(o.joinType)} join${a} ${d?M`${M.identifier(d)}.`:void 0}${M.identifier(p)}${m&&M` ${M.identifier(m)}`}${c}`)}else r.push(M`${M.raw(o.joinType)} join${a} ${i}${c}`);n<e.length-1&&r.push(M` `)}return M.join(r)}buildFromTable(e){if(Q(e,he)&&e[he.Symbol.IsAlias]){let r=M`${M.identifier(e[he.Symbol.OriginalName])}`;return e[he.Symbol.Schema]&&(r=M`${M.identifier(e[he.Symbol.Schema])}.${r}`),M`${r} ${M.identifier(e[he.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:n,where:o,having:i,table:a,joins:c,orderBy:l,groupBy:d,limit:p,offset:m,lockingClause:h,distinct:y,setOperators:g}){let f=n??gn(r);for(let F of f)if(Q(F.field,_t)&&Ur(F.field.table)!==(Q(a,Qt)?a._.alias:Q(a,Qo)?a[Et].name:Q(a,_e)?void 0:Ur(a))&&!(Y=>c?.some(({alias:re})=>re===(Y[he.Symbol.IsAlias]?Ur(Y):Y[he.Symbol.BaseName])))(F.field.table)){let Y=Ur(F.field.table);throw new Error(`Your "${F.path.join("->")}" field references a column "${Y}"."${F.field.name}", but the table "${Y}" is not part of the query! Did you forget to join it?`)}let _=!c||c.length===0,w=this.buildWithCTE(e),b;y&&(b=y===!0?M` distinct`:M` distinct on (${M.join(y.on,M`, `)})`);let S=this.buildSelection(f,{isSingleTable:_}),k=this.buildFromTable(a),R=this.buildJoins(c),O=o?M` where ${o}`:void 0,C=i?M` having ${i}`:void 0,$;l&&l.length>0&&($=M` order by ${M.join(l,M`, `)}`);let P;d&&d.length>0&&(P=M` group by ${M.join(d,M`, `)}`);let N=typeof p=="object"||typeof p=="number"&&p>=0?M` limit ${p}`:void 0,j=m?M` offset ${m}`:void 0,W=M.empty();if(h){let F=M` for ${M.raw(h.strength)}`;h.config.of&&F.append(M` of ${M.join(Array.isArray(h.config.of)?h.config.of:[h.config.of],M`, `)}`),h.config.noWait?F.append(M` nowait`):h.config.skipLocked&&F.append(M` skip locked`),W.append(F)}let Z=M`${w}select${b} ${S} from ${k}${R}${O}${P}${C}${$}${N}${j}${W}`;return g.length>0?this.buildSetOperations(Z,g):Z}buildSetOperations(e,r){let[n,...o]=r;if(!n)throw new Error("Cannot pass undefined values to any set operator");return o.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),o)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:n,rightSelect:o,limit:i,orderBy:a,offset:c}}){let l=M`(${e.getSQL()}) `,d=M`(${o.getSQL()})`,p;if(a&&a.length>0){let g=[];for(let f of a)if(Q(f,fe))g.push(M.identifier(f.name));else if(Q(f,_e)){for(let _=0;_<f.queryChunks.length;_++){let w=f.queryChunks[_];Q(w,fe)&&(f.queryChunks[_]=M.identifier(w.name))}g.push(M`${f}`)}else g.push(M`${f}`);p=M` order by ${M.join(g,M`, `)} `}let m=typeof i=="object"||typeof i=="number"&&i>=0?M` limit ${i}`:void 0,h=M.raw(`${r} ${n?"all ":""}`),y=c?M` offset ${c}`:void 0;return M`${l}${h}${d}${p}${m}${y}`}buildInsertQuery({table:e,values:r,onConflict:n,returning:o,withList:i,select:a,overridingSystemValue_:c}){let l=[],d=e[he.Symbol.Columns],p=Object.entries(d).filter(([w,b])=>!b.shouldDisableInsert()),m=p.map(([,w])=>M.identifier(this.casing.getColumnCasing(w)));if(a){let w=r;Q(w,_e)?l.push(w):l.push(w.getSQL())}else{let w=r;l.push(M.raw("values "));for(let[b,S]of w.entries()){let k=[];for(let[R,O]of p){let C=S[R];if(C===void 0||Q(C,Nr)&&C.value===void 0)if(O.defaultFn!==void 0){let $=O.defaultFn(),P=Q($,_e)?$:M.param($,O);k.push(P)}else if(!O.default&&O.onUpdateFn!==void 0){let $=O.onUpdateFn(),P=Q($,_e)?$:M.param($,O);k.push(P)}else k.push(M`default`);else k.push(C)}l.push(k),b<w.length-1&&l.push(M`, `)}}let h=this.buildWithCTE(i),y=M.join(l),g=o?M` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,f=n?M` on conflict ${n}`:void 0,_=c===!0?M`overriding system value `:void 0;return M`${h}insert into ${e} ${m} ${_}${y}${f}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:n}){let o=r?M` concurrently`:void 0,i=n?M` with no data`:void 0;return M`refresh materialized view${o} ${e}${i}`}prepareTyping(e){return Q(e,_u)||Q(e,vu)?"json":Q(e,bu)?"decimal":Q(e,wu)?"time":Q(e,Su)||Q(e,xu)?"timestamp":Q(e,gu)||Q(e,yu)?"date":Q(e,Tu)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:o,tableConfig:i,queryConfig:a,tableAlias:c,nestedQueryRelation:l,joinOn:d}){let p=[],m,h,y=[],g,f=[];if(a===!0)p=Object.entries(i.columns).map(([b,S])=>({dbKey:S.name,tsKey:b,field:Vn(S,c),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let w=Object.fromEntries(Object.entries(i.columns).map(([C,$])=>[C,Vn($,c)]));if(a.where){let C=typeof a.where=="function"?a.where(w,X_()):a.where;g=C&&pa(C,c)}let b=[],S=[];if(a.columns){let C=!1;for(let[$,P]of Object.entries(a.columns))P!==void 0&&$ in i.columns&&(!C&&P===!0&&(C=!0),S.push($));S.length>0&&(S=C?S.filter($=>a.columns?.[$]===!0):Object.keys(i.columns).filter($=>!S.includes($)))}else S=Object.keys(i.columns);for(let C of S){let $=i.columns[C];b.push({tsKey:C,value:$})}let k=[];a.with&&(k=Object.entries(a.with).filter(C=>!!C[1]).map(([C,$])=>({tsKey:C,queryConfig:$,relation:i.relations[C]})));let R;if(a.extras){R=typeof a.extras=="function"?a.extras(w,{sql:M}):a.extras;for(let[C,$]of Object.entries(R))b.push({tsKey:C,value:Hp($,c)})}for(let{tsKey:C,value:$}of b)p.push({dbKey:Q($,_e.Aliased)?$.fieldAlias:i.columns[C].name,tsKey:C,field:Q($,_t)?Vn($,c):$,relationTableTsKey:void 0,isJson:!1,selection:[]});let O=typeof a.orderBy=="function"?a.orderBy(w,Y_()):a.orderBy??[];Array.isArray(O)||(O=[O]),y=O.map(C=>Q(C,_t)?Vn(C,c):pa(C,c)),m=a.limit,h=a.offset;for(let{tsKey:C,queryConfig:$,relation:P}of k){let N=eb(r,n,P),j=Ei(P.referencedTable),W=n[j],Z=`${c}_${C}`,F=Ee(...N.fields.map((ie,be)=>H(Vn(N.references[be],Z),Vn(ie,c)))),Y=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:e[W],tableConfig:r[W],queryConfig:Q(P,Go)?$===!0?{limit:1}:{...$,limit:1}:$,tableAlias:Z,joinOn:F,nestedQueryRelation:P}),re=M`${M.identifier(Z)}.${M.identifier("data")}`.as(C);f.push({on:M`true`,table:new Qt(Y.sql,{},Z),alias:Z,joinType:"left",lateral:!0}),p.push({dbKey:C,tsKey:C,field:re,relationTableTsKey:W,isJson:!0,selection:Y.selection})}}if(p.length===0)throw new ma({message:`No fields selected for table "${i.tsName}" ("${c}")`});let _;if(g=Ee(d,g),l){let w=M`json_build_array(${M.join(p.map(({field:k,tsKey:R,isJson:O})=>O?M`${M.identifier(`${c}_${R}`)}.${M.identifier("data")}`:Q(k,_e.Aliased)?k.sql:k),M`, `)})`;Q(l,va)&&(w=M`coalesce(json_agg(${w}${y.length>0?M` order by ${M.join(y,M`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:w.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];m!==void 0||h!==void 0||y.length>0?(_=this.buildSelectQuery({table:da(o,c),fields:{},fieldsFlat:[{path:[],field:M.raw("*")}],where:g,limit:m,offset:h,orderBy:y,setOperators:[]}),g=void 0,m=void 0,h=void 0,y=[]):_=da(o,c),_=this.buildSelectQuery({table:Q(_,hr)?_:new Qt(_,{},c),fields:{},fieldsFlat:b.map(({field:k})=>({path:[],field:Q(k,_t)?Vn(k,c):k})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]})}else _=this.buildSelectQuery({table:da(o,c),fields:{},fieldsFlat:p.map(({field:w})=>({path:[],field:Q(w,_t)?Vn(w,c):w})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]});return{tableTsKey:i.tsName,sql:_,selection:p}}}});var dm,I1=ee(()=>{me();dm=class{static{s(this,"TypedQueryBuilder")}static[D]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}});function xa(t,e){return(r,n,...o)=>{let i=[n,...o].map(a=>({type:t,isAll:e,rightSelect:a}));for(let a of i)if(!ha(r.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}var Mr,Tb,pm,b3,w3,S3,x3,T3,E3,k3,Eb=ee(()=>{me();lm();I1();Zo();Ci();Bt();Fn();Lr();xi();wt();wt();Vo();Ta();Mr=class{static{s(this,"PgSelectBuilder")}static[D]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,n=e,o;return this.fields?o=this.fields:Q(n,Qt)?o=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):Q(n,Qo)?o=n[Et].selectedFields:Q(n,_e)?o={}:o=ga(n),new pm({table:n,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Tb=class extends dm{static{s(this,"PgSelectQueryBuilderBase")}static[D]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:n,session:o,dialect:i,withList:a,distinct:c}){super(),this.config={withList:a,table:e,fields:{...r},distinct:c,setOperators:[]},this.isPartialSelect=n,this.session=o,this.dialect=i,this._={selectedFields:r,config:this.config},this.tableName=go(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let l of Zn(e))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(n,o)=>{let i=this.tableName,a=go(n);for(let c of Zn(n))this.usedTables.add(c);if(typeof a=="string"&&this.config.joins?.some(c=>c.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof a=="string"&&!Q(n,_e))){let c=Q(n,Qt)?n._.selectedFields:Q(n,Dr)?n[Et].selectedFields:n[he.Symbol.Columns];this.config.fields[a]=c}if(typeof o=="function"&&(o=o(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:n,joinType:e,alias:a,lateral:r}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return n=>{let o=typeof n=="function"?n(b3()):n;if(!ha(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new It({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new It({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...Zn(this.config.table)),this.config.joins)for(let n of this.config.joins)r.push(...Zn(n.table));return new Proxy(new Qt(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new It({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},pm=class extends Tb{static{s(this,"PgSelectBase")}static[D]="PgSelect";_prepare(e){let{session:r,config:n,dialect:o,joinsNotNullableMap:i,authToken:a,cacheConfig:c,usedTables:l}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=n;return fr.startActiveSpan("drizzle.prepareQuery",()=>{let p=gn(d),m=r.prepareQuery(o.sqlToQuery(this.getSQL()),p,e,!0,void 0,{type:"select",tables:[...l]},c);return m.joinsNotNullableMap=i,m.setToken(a)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>fr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};Ny(pm,[Ar]);s(xa,"createSetOperator");b3=s(()=>({union:w3,unionAll:S3,intersect:x3,intersectAll:T3,except:E3,exceptAll:k3}),"getPgSetOperators"),w3=xa("union",!1),S3=xa("union",!0),x3=xa("intersect",!1),T3=xa("intersect",!0),E3=xa("except",!1),k3=xa("except",!0)});var Xo,mm=ee(()=>{me();Lu();Ci();Fn();Eb();Xo=class{static{s(this,"QueryBuilder")}static[D]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=Q(e,_o)?e:void 0,this.dialectConfig=Q(e,_o)?void 0:e}$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(n)),new Proxy(new bs(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");with(...e){let r=this;function n(a){return new Mr({fields:a??void 0,session:void 0,dialect:r.getDialect(),withList:e})}s(n,"select");function o(a){return new Mr({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}s(o,"selectDistinct");function i(a,c){return new Mr({fields:c??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:a}})}return s(i,"selectDistinctOn"),{select:n,selectDistinct:o,selectDistinctOn:i}}select(e){return new Mr({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Mr({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Mr({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new _o(this.dialectConfig)),this.dialect}}});function A1(t,e,r){return e?new Ib(t,e,r):new kb(t,r)}function C1(t,e,r){return e?new Ab(t,e,r):new Pb(t,r)}var fm,kb,Ib,hm,Pb,Ab,qu,P1,Fu,Cb=ee(()=>{me();Ci();wt();mm();Ii();lm();xb();fm=class{static{s(this,"DefaultViewBuilderCore")}constructor(e,r){this.name=e,this.schema=r}static[D]="PgDefaultViewBuilderCore";config={};with(e){return this.config.with=e,this}},kb=class extends fm{static{s(this,"ViewBuilder")}static[D]="PgViewBuilder";as(e){typeof e=="function"&&(e=e(new Xo));let r=new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),r);return new Proxy(new qu({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),r)}},Ib=class extends fm{static{s(this,"ManualViewBuilder")}static[D]="PgManualViewBuilder";columns;constructor(e,r,n){super(e,n),this.columns=ga(ke(e,r))}existing(){return new Proxy(new qu({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new qu({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}},hm=class{static{s(this,"MaterializedViewBuilderCore")}constructor(e,r){this.name=e,this.schema=r}static[D]="PgMaterializedViewBuilderCore";config={};using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}},Pb=class extends hm{static{s(this,"MaterializedViewBuilder")}static[D]="PgMaterializedViewBuilder";as(e){typeof e=="function"&&(e=e(new Xo));let r=new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),r);return new Proxy(new Fu({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),r)}},Ab=class extends hm{static{s(this,"ManualMaterializedViewBuilder")}static[D]="PgManualMaterializedViewBuilder";columns;constructor(e,r,n){super(e,n),this.columns=ga(ke(e,r))}existing(){return new Proxy(new Fu({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new Fu({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new It({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}},qu=class extends Qo{static{s(this,"PgView")}static[D]="PgView";[Sb];constructor({pgConfig:e,config:r}){super(r),e&&(this[Sb]={with:e.with})}},P1=Symbol.for("drizzle:PgMaterializedViewConfig"),Fu=class extends Qo{static{s(this,"PgMaterializedView")}static[D]="PgMaterializedView";[P1];constructor({pgConfig:e,config:r}){super(r),this[P1]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}};s(A1,"pgViewWithSchema");s(C1,"pgMaterializedViewWithSchema")});function Zn(t){return Q(t,hr)?[t[Ti]?`${t[Ti]}.${t[he.Symbol.BaseName]}`:t[he.Symbol.BaseName]]:Q(t,Qt)?t._.usedTables??[]:Q(t,_e)?t.usedTables??[]:[]}var Ta=ee(()=>{me();Ii();Bt();Fn();Lr();s(Zn,"extractUsedTable")});var Bu,O1=ee(()=>{me();Zo();Ci();Lr();xi();wt();Ta();Bu=class extends Ar{static{s(this,"PgDeleteBase")}constructor(e,r,n,o){super(),this.session=r,this.dialect=n,this.config={table:e,withList:o}}static[D]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[he.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=gn(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return fr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:Zn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>fr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new It({alias:Ur(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var Vu,gm,$1=ee(()=>{me();Zo();Ci();Bt();Lr();xi();wt();Ta();mm();Vu=class{static{s(this,"PgInsertBuilder")}constructor(e,r,n,o,i){this.table=e,this.session=r,this.dialect=n,this.withList=o,this.overridingSystemValue_=i}static[D]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(n=>{let o={},i=this.table[he.Symbol.Columns];for(let a of Object.keys(n)){let c=n[a];o[a]=Q(c,_e)?c:new Nr(c,i[a])}return o});return new gm(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new Xo):e;if(!Q(r,_e)&&!ha(this.table[lu],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new gm(this.table,r,this.session,this.dialect,this.withList,!0)}},gm=class extends Ar{static{s(this,"PgInsertBase")}constructor(e,r,n,o,i,a,c){super(),this.session=n,this.dialect=o,this.config={table:e,values:r,withList:i,select:a,overridingSystemValue_:c}}static[D]="PgInsert";config;cacheConfig;returning(e=this.config.table[he.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=gn(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=M`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?M` where ${e.where}`:void 0;this.config.onConflict=M`(${M.raw(r)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?M` where ${e.where}`:void 0,n=e.targetWhere?M` where ${e.targetWhere}`:void 0,o=e.setWhere?M` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,mu(this.config.table,e.set)),a="";return a=Array.isArray(e.target)?e.target.map(c=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(c))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=M`(${M.raw(a)})${n} do update set ${i}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return fr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:Zn(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>fr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new It({alias:Ur(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var ym,Ob=ee(()=>{me();Zo();xi();ym=class extends Ar{static{s(this,"PgRefreshMaterializedView")}constructor(e,r,n){super(),this.session=r,this.dialect=n,this.config={view:e}}static[D]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return fr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>fr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")}});var R1=ee(()=>{});var Hu,$b,N1=ee(()=>{me();Ii();Zo();Ci();Bt();Fn();Lr();wt();Vo();Ta();Hu=class{static{s(this,"PgUpdateBuilder")}constructor(e,r,n,o){this.table=e,this.session=r,this.dialect=n,this.withList=o}static[D]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new $b(this.table,mu(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},$b=class extends Ar{static{s(this,"PgUpdateBase")}constructor(e,r,n,o,i){super(),this.session=n,this.dialect=o,this.config={set:r,table:e,withList:i,joins:[]},this.tableName=go(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[D]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,n=go(r);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=r,this}getTableLikeFields(e){return Q(e,hr)?e[he.Symbol.Columns]:Q(e,Qt)?e._.selectedFields:e[Et].selectedFields}createJoin(e){return(r,n)=>{let o=go(r);if(typeof o=="string"&&this.config.joins.some(i=>i.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!Q(this.config.from,_e)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[he.Symbol.Columns],new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:r,joinType:e,alias:o}),typeof o=="string")switch(e){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[he.Symbol.Columns]),this.config.from)){let r=go(this.config.from);if(typeof r=="string"&&this.config.from&&!Q(this.config.from,_e)){let n=this.getTableLikeFields(this.config.from);e[r]=n}for(let n of this.config.joins){let o=go(n.table);if(typeof o=="string"&&!Q(n.table,_e)){let i=this.getTableLikeFields(n.table);e[o]=i}}}return this.config.returningFields=e,this.config.returning=gn(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:Zn(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>this._prepare().execute(e,this.authToken),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new It({alias:Ur(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var Rb=ee(()=>{O1();$1();mm();Ob();Eb();R1();N1()});var vm,D1=ee(()=>{me();Bt();vm=class t extends _e{static{s(this,"PgCountBuilder")}constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[D]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return M`(select count(*) from ${e}${M.raw(" where ").if(r)}${r})`}static buildCount(e,r){return M`select count(*) as count from ${e}${M.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}}});var _m,bm,j1=ee(()=>{me();Zo();_a();xi();_m=class{static{s(this,"RelationalQueryBuilder")}constructor(e,r,n,o,i,a,c){this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c}static[D]="PgRelationalQueryBuilder";findMany(e){return new bm(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new bm(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},bm=class extends Ar{static{s(this,"PgRelationalQuery")}constructor(e,r,n,o,i,a,c,l,d){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c,this.config=l,this.mode=d}static[D]="PgRelationalQuery";_prepare(e){return fr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(o,i)=>{let a=o.map(c=>Pu(this.schema,this.tableConfig,c,r.selection,i));return this.mode==="first"?a[0]:a})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return fr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}});var wm,M1=ee(()=>{me();Zo();wm=class extends Ar{static{s(this,"PgRaw")}constructor(e,r,n,o){super(),this.execute=e,this.sql=r,this.query=n,this.mapBatchResult=o}static[D]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}});var Oi,Zu=ee(()=>{me();Rb();Ci();Bt();Fn();D1();j1();M1();Ob();Oi=class{static{s(this,"PgDatabase")}constructor(e,r,n){if(this.dialect=e,this.session=r,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,i]of Object.entries(this._.schema))this.query[o]=new _m(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[o],i,e,r);this.$cache={invalidate:s(async o=>{},"invalidate")}}static[D]="PgDatabase";query;$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(new Xo(n.dialect))),new Proxy(new bs(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");$count(e,r){return new vm({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function n(d){return new Mr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e})}s(n,"select");function o(d){return new Mr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}s(o,"selectDistinct");function i(d,p){return new Mr({fields:p??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:d}})}s(i,"selectDistinctOn");function a(d){return new Hu(d,r.session,r.dialect,e)}s(a,"update");function c(d){return new Vu(d,r.session,r.dialect,e)}s(c,"insert");function l(d){return new Bu(d,r.session,r.dialect,e)}return s(l,"delete_"),{select:n,selectDistinct:o,selectDistinctOn:i,update:a,insert:c,delete:l}}select(e){return new Mr({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Mr({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Mr({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Hu(e,this.session,this.dialect)}insert(e){return new Vu(e,this.session,this.dialect)}delete(e){return new Bu(e,this.session,this.dialect)}refreshMaterializedView(e){return new ym(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?M.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(n,void 0,void 0,!1);return new wm(()=>o.execute(void 0,this.authToken),r,n,i=>o.mapResult(i,!0))}transaction(e,r){return this.session.transaction(e,r)}}});async function Db(t,e){let r=`${t}-${JSON.stringify(e)}`,o=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",o);return[...new Uint8Array(i)].map(l=>l.toString(16).padStart(2,"0")).join("")}var Nb,$i,Sm=ee(()=>{me();Nb=class{static{s(this,"Cache")}static[D]="Cache"},$i=class extends Nb{static{s(this,"NoopCache")}strategy(){return"all"}static[D]="NoopCache";async get(e){}async put(e,r,n,o){}async onMutate(e){}};s(Db,"hashQuery")});var z1=ee(()=>{Sm()});var U1=ee(()=>{});var L1,q1=ee(()=>{me();L1=class{static{s(this,"PgRole")}constructor(e,r){this.name=e,r&&(this.createDb=r.createDb,this.createRole=r.createRole,this.inherit=r.inherit)}static[D]="PgRole";_existing;createDb;createRole;inherit;existing(){return this._existing=!0,this}}});function F1(t,e,r){return new jb(t,e,r)}var jb,Mb=ee(()=>{me();jb=class{static{s(this,"PgSequence")}constructor(e,r,n){this.seqName=e,this.seqOptions=r,this.schema=n}static[D]="PgSequence"};s(F1,"pgSequenceWithSchema")});var B1,V1=ee(()=>{me();Bt();Lp();Mb();Ii();Cb();B1=class{static{s(this,"PgSchema")}constructor(e){this.schemaName=e}static[D]="PgSchema";table=s((e,r,n)=>D_(e,r,n,this.schemaName),"table");view=s((e,r)=>A1(e,r,this.schemaName),"view");materializedView=s((e,r)=>C1(e,r,this.schemaName),"materializedView");enum(e,r){return Array.isArray(r)?Ty(e,[...r],this.schemaName):Ey(e,r,this.schemaName)}sequence=s((e,r)=>F1(e,r,this.schemaName),"sequence");getSQL(){return new _e([M.identifier(this.schemaName)])}shouldOmitSQLParens(){return!0}}});var Ea,ka,Ia,xm=ee(()=>{Sm();me();Jp();Qp();xi();Zu();Ea=class{static{s(this,"PgPreparedQuery")}constructor(e,r,n,o){this.query=e,this.cache=r,this.queryMetadata=n,this.cacheConfig=o,r&&r.strategy()==="all"&&o===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[D]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,n){if(this.cache===void 0||Q(this.cache,$i)||this.queryMetadata===void 0)try{return await n()}catch(o){throw new ho(e,r,o)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(o){throw new ho(e,r,o)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[o]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return o}catch(o){throw new ho(e,r,o)}if(!this.cacheConfig)try{return await n()}catch(o){throw new ho(e,r,o)}if(this.queryMetadata.type==="select"){let o=await this.cache.get(this.cacheConfig.tag??await Db(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(o===void 0){let i;try{i=await n()}catch(a){throw new ho(e,r,a)}return await this.cache.put(this.cacheConfig.tag??await Db(e,r),i,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),i}return o}try{return await n()}catch(o){throw new ho(e,r,o)}}},ka=class{static{s(this,"PgSession")}constructor(e){this.dialect=e}static[D]="PgSession";execute(e,r){return fr.startActiveSpan("drizzle.operation",()=>fr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let n=await this.execute(e,r);return Number(n[0].count)}},Ia=class extends Oi{static{s(this,"PgTransaction")}constructor(e,r,n,o=0){super(e,r,n),this.schema=n,this.nestedIndex=o}static[D]="PgTransaction";rollback(){throw new du}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),M.raw(r.join(" "))}setTransaction(e){return this.session.execute(M`set transaction ${this.getTransactionConfigSQL(e)}`)}}});var H1=ee(()=>{});var Z1=ee(()=>{gy()});var qr=ee(()=>{U1();S1();cm();Zu();Lu();uy();x1();E1();M_();Rb();q1();V1();Mb();xm();H1();Ii();fy();Ta();Z1();xb();Cb()});var Tm,zb,Ub,Em,J1,Lb=ee(()=>{z1();me();fa();qr();xm();Bt();wt();Tm={arrayMode:!1,fullResults:!0},zb={arrayMode:!0,fullResults:!0},Ub=class extends Ea{static{s(this,"NeonHttpPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d){super(r,o,i,a),this.client=e,this.logger=n,this.fields=c,this._isResponseInArrayMode=l,this.customResultMapper=d,this.clientQuery=e.query??e}static[D]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let n=Ho(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:o,clientQuery:i,query:a,customResultMapper:c}=this;if(!o&&!c)return this.queryWithCache(a.sql,n,async()=>i(a.sql,n,r===void 0?Tm:{...Tm,authToken:r}));let l=await this.queryWithCache(a.sql,n,async()=>await i(a.sql,n,r===void 0?zb:{...zb,authToken:r}));return this.mapResult(l)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(n=>pu(this.fields,n,this.joinsNotNullableMap))}all(e={}){let r=Ho(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?Tm:{...Tm,authToken:this.authToken}).then(n=>n.rows)}values(e={},r){let n=Ho(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:r}).then(o=>o.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Em=class extends ka{static{s(this,"NeonHttpSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.clientQuery=e.query??e,this.logger=o.logger??new Ts,this.cache=o.cache??new $i}static[D]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,n,o,i,a,c){return new Ub(this.client,e,this.logger,this.cache,a,c,r,o,i)}async batch(e){let r=[],n=[];for(let i of e){let a=i._prepare(),c=a.getQuery();r.push(a),n.push(this.clientQuery(c.sql,c.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(n,zb)).map((i,a)=>r[a].mapResult(i,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let n=await this.execute(e,r);return Number(n.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},J1=class extends Ia{static{s(this,"NeonTransaction")}static[D]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}}});function km(t,e,r,n){return new Proxy(t,{get(o,i){let a=o[i];return typeof a!="function"&&(typeof a!="object"||a===null)?a:n?km(a,e,r):i==="query"?km(a,e,r,!0):new Proxy(a,{apply(c,l,d){let p=c.call(l,...d);return typeof p=="object"&&p!==null&&"setToken"in p&&typeof p.setToken=="function"&&p.setToken(e),r(c,i,p)}})}})}function Pa(t,e={}){let r=new _o({casing:e.casing}),n;e.logger===!0?n=new xs:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=Au(e.schema,Cu);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new qb(t,r,{logger:n,cache:e.cache}).createSession(o),c=new Fb(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}function Im(...t){if(typeof t[0]=="string"){let e=Ai(t[0]);return Pa(e,t[1])}if(fu(t[0])){let{connection:e,client:r,...n}=t[0];if(r)return Pa(r,n);if(typeof e=="object"){let{connectionString:i,...a}=e,c=Ai(i,a);return Pa(c,n)}let o=Ai(e);return Pa(o,n)}return Pa(t[0],t[1])}var qb,Fb,K1=ee(()=>{zu();me();fa();Zu();Lu();_a();wt();Lb();qb=class{static{s(this,"NeonHttpDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n,this.initMappers()}static[D]="NeonHttpDriver";createSession(e){return new Em(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){Lt.setTypeParser(Lt.builtins.TIMESTAMPTZ,e=>e),Lt.setTypeParser(Lt.builtins.TIMESTAMP,e=>e),Lt.setTypeParser(Lt.builtins.DATE,e=>e),Lt.setTypeParser(Lt.builtins.INTERVAL,e=>e),Lt.setTypeParser(1231,e=>e),Lt.setTypeParser(1115,e=>e),Lt.setTypeParser(1185,e=>e),Lt.setTypeParser(1187,e=>e),Lt.setTypeParser(1182,e=>e)}};s(km,"wrap");Fb=class extends Oi{static{s(this,"NeonHttpDatabase")}static[D]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,km(this,e,(r,n,o)=>n==="with"?km(o,e,(i,a,c)=>c):o)}async batch(e){return this.session.batch(e)}};s(Pa,"construct");s(Im,"drizzle");(t=>{function e(r){return Pa({},r)}s(e,"mock"),t.mock=e})(Im||(Im={}))});var G1=ee(()=>{K1();Lb()});var Bb,Pm,Vb,Hb=ee(()=>{zu();Sm();me();fa();qr();xm();Bt();wt();Bb=class extends Ea{static{s(this,"NeonPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d,p,m){super({sql:r,params:n},i,a,c),this.client=e,this.params=n,this.logger=o,this.fields=l,this._isResponseInArrayMode=p,this.customResultMapper=m,this.rawQueryConfig={name:d,text:r,types:{getTypeParser:s((h,y)=>h===Lt.builtins.TIMESTAMPTZ?g=>g:h===Lt.builtins.TIMESTAMP?g=>g:h===Lt.builtins.DATE?g=>g:h===Lt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Lt.getTypeParser(h,y),"getTypeParser")}},this.queryConfig={name:d,text:r,rowMode:"array",types:{getTypeParser:s((h,y)=>h===Lt.builtins.TIMESTAMPTZ?g=>g:h===Lt.builtins.TIMESTAMP?g=>g:h===Lt.builtins.DATE?g=>g:h===Lt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Lt.getTypeParser(h,y),"getTypeParser")}}}static[D]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let r=Ho(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:n,client:o,rawQueryConfig:i,queryConfig:a,joinsNotNullableMap:c,customResultMapper:l}=this;if(!n&&!l)return await this.queryWithCache(i.text,r,async()=>await o.query(i,r));let d=await this.queryWithCache(a.text,r,async()=>await o.query(a,r));return l?l(d.rows):d.rows.map(p=>pu(n,p,c))}all(e={}){let r=Ho(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.rawQueryConfig.text,r,async()=>await this.client.query(this.rawQueryConfig,r)).then(n=>n.rows)}values(e={}){let r=Ho(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.queryConfig.text,r,async()=>await this.client.query(this.queryConfig,r)).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Pm=class t extends ka{static{s(this,"NeonSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.logger=o.logger??new Ts,this.cache=o.cache??new $i}static[D]="NeonSession";logger;cache;prepareQuery(e,r,n,o,i,a,c){return new Bb(this.client,e.sql,e.params,this.logger,this.cache,a,c,r,n,o,i)}async query(e,r){return this.logger.logQuery(e,r),await this.client.query({rowMode:"array",text:e,values:r})}async queryObjects(e,r){return this.client.query(e,r)}async count(e){let r=await this.execute(e);return Number(r.rows[0].count)}async transaction(e,r={}){let n=this.client instanceof vo?new t(await this.client.connect(),this.dialect,this.schema,this.options):this,o=new Vb(this.dialect,n,this.schema);await o.execute(M`begin ${o.getTransactionConfigSQL(r)}`);try{let i=await e(o);return await o.execute(M`commit`),i}catch(i){throw await o.execute(M`rollback`),i}finally{this.client instanceof vo&&n.client.release()}}},Vb=class t extends Ia{static{s(this,"NeonTransaction")}static[D]="NeonTransaction";async transaction(e){let r=`sp${this.nestedIndex+1}`,n=new t(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(M.raw(`savepoint ${r}`));try{let o=await e(n);return await n.execute(M.raw(`release savepoint ${r}`)),o}catch(o){throw await n.execute(M.raw(`rollback to savepoint ${r}`)),o}}}});function Ju(t,e={}){let r=new _o({casing:e.casing}),n;e.logger===!0?n=new xs:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=Au(e.schema,Cu);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new Zb(t,r,{logger:n,cache:e.cache}).createSession(o),c=new Jb(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}function Ku(...t){if(typeof t[0]=="string"){let e=new vo({connectionString:t[0]});return Ju(e,t[1])}if(fu(t[0])){let{connection:e,client:r,ws:n,...o}=t[0];if(n&&(ks.webSocketConstructor=n),r)return Ju(r,o);let i=typeof e=="string"?new vo({connectionString:e}):new vo(e);return Ju(i,o)}return Ju(t[0],t[1])}var Zb,Jb,W1=ee(()=>{zu();me();fa();Zu();Lu();_a();wt();Hb();Zb=class{static{s(this,"NeonDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n}static[D]="NeonDriver";createSession(e){return new Pm(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}},Jb=class extends Oi{static{s(this,"NeonDatabase")}static[D]="NeonServerlessDatabase"};s(Ju,"construct");s(Ku,"drizzle");(t=>{function e(r){return Ju({},r)}s(e,"mock"),t.mock=e})(Ku||(Ku={}))});var Q1=ee(()=>{W1();Hb()});var G,sn,As,an=ee(()=>{"use strict";qr();G=ke("users",{id:A("id").primaryKey(),email:A("email").unique().notNull(),fullName:A("full_name"),phone:A("phone"),cpf:A("cpf").unique(),birthDate:jr("birth_date"),autonomyLevel:kt("autonomy_level").default(50),voiceCommandEnabled:ve("voice_command_enabled").default(!0),language:A("language").default("pt-BR"),timezone:A("timezone").default("America/Sao_Paulo"),currency:A("currency").default("BRL"),profileImageUrl:A("profile_image_url"),isActive:ve("is_active").default(!0),lastLogin:K("last_login",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),sn=ke("user_preferences",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),theme:A("theme").default("system"),notificationsEmail:ve("notifications_email").default(!0),notificationsPush:ve("notifications_push").default(!0),notificationsSms:ve("notifications_sms").default(!1),autoCategorize:ve("auto_categorize").default(!0),budgetAlerts:ve("budget_alerts").default(!0),voiceFeedback:ve("voice_feedback").default(!0),accessibilityHighContrast:ve("accessibility_high_contrast").default(!1),accessibilityLargeText:ve("accessibility_large_text").default(!1),accessibilityScreenReader:ve("accessibility_screen_reader").default(!1),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),As=ke("user_security",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),biometricEnabled:ve("biometric_enabled").default(!1),twoFactorEnabled:ve("two_factor_enabled").default(!1),twoFactorSecret:A("two_factor_secret"),voiceBiometricEnabled:ve("voice_biometric_enabled").default(!1),voiceSampleEncrypted:A("voice_sample_encrypted"),sessionTimeoutMinutes:kt("session_timeout_minutes").default(30),maxFailedAttempts:kt("max_failed_attempts").default(5),lockedUntil:K("locked_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Ri,Cs,Aa,Ca,Oa,Kb=ee(()=>{"use strict";qr();an();Ri=ke("audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),action:A("action").notNull(),resourceType:A("resource_type"),resourceId:A("resource_id"),oldValues:st("old_values"),newValues:st("new_values"),ipAddress:yn("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),success:ve("success").default(!0),errorMessage:A("error_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Cs=ke("error_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),errorType:A("error_type").notNull(),errorCode:A("error_code"),errorMessage:A("error_message").notNull(),stackTrace:A("stack_trace"),context:st("context"),userAgent:A("user_agent"),ipAddress:yn("ip_address"),sessionId:A("session_id"),isResolved:ve("is_resolved").default(!1),resolvedAt:K("resolved_at",{withTimezone:!0}),resolvedBy:A("resolved_by").references(()=>G.id),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Aa=ke("user_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),sessionToken:A("session_token").unique().notNull(),deviceType:A("device_type"),deviceId:A("device_id"),ipAddress:yn("ip_address"),userAgent:A("user_agent"),isActive:ve("is_active").default(!0),lastActivity:K("last_activity",{withTimezone:!0}).defaultNow(),expiresAt:K("expires_at",{withTimezone:!0}).notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Ca=ke("lgpd_consent_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),consentType:A("consent_type").notNull(),consentGiven:ve("consent_given").notNull(),consentVersion:A("consent_version").notNull(),ipAddress:yn("ip_address"),userAgent:A("user_agent"),consentedAt:K("consented_at",{withTimezone:!0}).defaultNow(),revokedAt:K("revoked_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Oa=ke("data_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),requestType:A("request_type").notNull(),status:A("status").default("pending"),processedAt:K("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),expiresAt:K("expires_at",{withTimezone:!0}),ipAddress:yn("ip_address"),userAgent:A("user_agent"),requestedAt:K("requested_at",{withTimezone:!0}).defaultNow(),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var ae,$a,Ni,Gu=ee(()=>{"use strict";qr();an();ae=ke("bank_accounts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").notNull().references(()=>G.id,{onDelete:"cascade"}),belvoAccountId:A("belvo_account_id").unique().notNull(),institutionId:A("institution_id").notNull(),institutionName:A("institution_name").notNull(),accountType:A("account_type").notNull(),accountNumber:A("account_number"),accountMask:A("account_mask").notNull(),accountHolderName:A("account_holder_name"),balance:at("balance",{precision:15,scale:2}).default("0"),availableBalance:at("available_balance",{precision:15,scale:2}).default("0"),currency:A("currency").default("BRL"),isActive:ve("is_active").default(!0),isPrimary:ve("is_primary").default(!1),lastSync:K("last_sync",{withTimezone:!0}),syncStatus:A("sync_status").default("pending"),syncErrorMessage:A("sync_error_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),$a=ke("account_balance_history",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),accountId:A("account_id").references(()=>ae.id,{onDelete:"cascade"}),balance:at("balance",{precision:15,scale:2}).notNull(),availableBalance:at("available_balance",{precision:15,scale:2}),recordedAt:K("recorded_at",{withTimezone:!0}).defaultNow(),source:A("source").default("sync")}),Ni=ke("bank_sync_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>ae.id,{onDelete:"cascade"}),syncType:A("sync_type").notNull(),status:A("status").notNull(),recordsSynced:kt("records_synced").default(0),errorMessage:A("error_message"),startedAt:K("started_at",{withTimezone:!0}).defaultNow(),completedAt:K("completed_at",{withTimezone:!0}),durationMs:kt("duration_ms")})});var Gb,Wb,Fr,Be,lr,Qb=ee(()=>{"use strict";qr();an();Gb=sr("subscription_status",["free","trialing","active","past_due","canceled","unpaid"]),Wb=sr("payment_status",["succeeded","failed","pending"]),Fr=ke("subscription_plans",{id:A("id").primaryKey(),name:A("name").notNull(),description:A("description"),priceCents:kt("price_cents").notNull().default(0),currency:A("currency").notNull().default("BRL"),interval:A("interval"),stripeProductId:A("stripe_product_id"),stripePriceId:A("stripe_price_id"),features:st("features").$type().default([]),aiModels:st("ai_models").$type().default([]),maxBankAccounts:kt("max_bank_accounts").default(1),maxTransactionsPerMonth:kt("max_transactions_per_month"),isActive:ve("is_active").default(!0),displayOrder:kt("display_order").default(0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Be=ke("subscriptions",{id:ya("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().unique().references(()=>G.id,{onDelete:"cascade"}),stripeCustomerId:A("stripe_customer_id"),stripeSubscriptionId:A("stripe_subscription_id").unique(),planId:A("plan_id").notNull().default("free").references(()=>Fr.id),status:Gb("status").notNull().default("free"),currentPeriodStart:K("current_period_start",{withTimezone:!0}),currentPeriodEnd:K("current_period_end",{withTimezone:!0}),cancelAtPeriodEnd:ve("cancel_at_period_end").default(!1),canceledAt:K("canceled_at",{withTimezone:!0}),trialStart:K("trial_start",{withTimezone:!0}),trialEnd:K("trial_end",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),lr=ke("payment_history",{id:ya("id").primaryKey().defaultRandom(),userId:A("user_id").notNull().references(()=>G.id,{onDelete:"cascade"}),subscriptionId:ya("subscription_id").references(()=>Be.id,{onDelete:"set null"}),stripePaymentIntentId:A("stripe_payment_intent_id"),stripeInvoiceId:A("stripe_invoice_id"),stripeChargeId:A("stripe_charge_id"),amountCents:kt("amount_cents").notNull(),currency:A("currency").notNull().default("BRL"),status:Wb("status").notNull(),description:A("description"),receiptUrl:A("receipt_url"),invoicePdf:A("invoice_pdf"),failureCode:A("failure_code"),failureMessage:A("failure_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var De,ne,Vt,Os=ee(()=>{"use strict";qr();Gu();an();De=ke("transaction_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),name:A("name").notNull(),color:A("color").default("#6B7280"),icon:A("icon").default("circle"),isSystem:ve("is_system").default(!1),parentId:A("parent_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),ne=ke("transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>ae.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),amount:at("amount",{precision:15,scale:2}).notNull(),originalAmount:at("original_amount",{precision:15,scale:2}),currency:A("currency").default("BRL"),description:A("description").notNull(),merchantName:A("merchant_name"),transactionDate:K("transaction_date",{withTimezone:!0}).notNull(),postedDate:K("posted_date",{withTimezone:!0}),transactionType:A("transaction_type").notNull(),paymentMethod:A("payment_method"),status:A("status").default("posted"),isRecurring:ve("is_recurring").default(!1),recurringRule:st("recurring_rule"),tags:A("tags").array(),notes:A("notes"),attachments:A("attachments").array(),confidenceScore:at("confidence_score",{precision:3,scale:2}),isCategorized:ve("is_categorized").default(!1),isManualEntry:ve("is_manual_entry").default(!1),externalId:A("external_id"),externalSource:A("external_source"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Vt=ke("transaction_schedules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),accountId:A("account_id").references(()=>ae.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),amount:at("amount",{precision:15,scale:2}).notNull(),description:A("description").notNull(),recipientName:A("recipient_name"),recipientAccount:A("recipient_account"),recipientPixKey:A("recipient_pix_key"),scheduledDate:jr("scheduled_date").notNull(),recurrenceRule:A("recurrence_rule"),isActive:ve("is_active").default(!0),autoExecute:ve("auto_execute").default(!1),notificationSent:ve("notification_sent").default(!1),executed:ve("executed").default(!1),executedTransactionId:A("executed_transaction_id").references(()=>ne.id),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var X1,bo,Di,Xb=ee(()=>{"use strict";qr();Os();an();X1=sr("boleto_status",["pending","paid","overdue","cancelled","scheduled"]),bo=ke("boletos",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),barcode:A("barcode").unique().notNull(),lineIdDigitable:A("line_id_digitable").unique().notNull(),amount:at("amount",{precision:15,scale:2}).notNull(),dueDate:jr("due_date").notNull(),beneficiaryName:A("beneficiary_name").notNull(),beneficiaryCnpj:A("beneficiary_cnpj"),description:A("description"),status:A("status").default("pending"),paymentDate:K("payment_date",{withTimezone:!0}),paidAmount:at("paid_amount",{precision:15,scale:2}),paidWith:A("paid_with"),transactionId:A("transaction_id").references(()=>ne.id),fineAmount:at("fine_amount",{precision:15,scale:2}).default("0"),interestAmount:at("interest_amount",{precision:15,scale:2}).default("0"),discountAmount:at("discount_amount",{precision:15,scale:2}).default("0"),pdfUrl:A("pdf_url"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Di=ke("boleto_payments",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),boletoId:A("boleto_id").references(()=>bo.id,{onDelete:"cascade"}),amount:at("amount",{precision:15,scale:2}).notNull(),paymentDate:K("payment_date",{withTimezone:!0}).defaultNow(),paymentMethod:A("payment_method").notNull(),transactionId:A("transaction_id").references(()=>ne.id),status:A("status").default("processing"),externalId:A("external_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var $s,mt,ji,Yb=ee(()=>{"use strict";qr();Gu();Os();an();$s=ke("event_types",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:A("name").unique().notNull(),description:A("description"),color:A("color").default("#3B82F6"),icon:A("icon").default("calendar"),isSystem:ve("is_system").default(!0),defaultReminderHours:kt("default_reminder_hours").default(24),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),mt=ke("financial_events",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),accountId:A("account_id").references(()=>ae.id,{onDelete:"set null"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"set null"}),eventTypeId:A("event_type_id").references(()=>$s.id,{onDelete:"set null"}),title:A("title").notNull(),description:A("description"),amount:at("amount",{precision:15,scale:2}).notNull(),status:A("status").notNull().default("pending"),startDate:K("start_date",{withTimezone:!0}).notNull(),endDate:K("end_date",{withTimezone:!0}).notNull(),allDay:ve("all_day").default(!1),color:A("color").notNull().default("blue"),icon:A("icon"),isIncome:ve("is_income").default(!1),isCompleted:ve("is_completed").default(!1),isRecurring:ve("is_recurring").default(!1),recurrenceRule:A("recurrence_rule"),parentEventId:A("parent_event_id"),location:A("location"),notes:A("notes"),dueDate:jr("due_date"),completedAt:K("completed_at",{withTimezone:!0}),priority:A("priority").default("normal"),tags:A("tags").array(),attachments:A("attachments").array(),brazilianEventType:A("brazilian_event_type"),installmentInfo:st("installment_info"),merchantCategory:A("merchant_category"),metadata:st("metadata"),transactionId:A("transaction_id").references(()=>ne.id,{onDelete:"set null"}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),ji=ke("event_reminders",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),eventId:A("event_id").references(()=>mt.id,{onDelete:"cascade"}),remindAt:K("remind_at",{withTimezone:!0}).notNull(),reminderType:A("reminder_type").default("notification"),message:A("message"),isSent:ve("is_sent").default(!1),sentAt:K("sent_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Y1,$e,Ra,ew=ee(()=>{"use strict";qr();an();Y1=sr("payment_method_type",["PIX","BANK_ACCOUNT","BOLETO"]),$e=ke("contacts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),name:A("name").notNull(),email:A("email"),phone:A("phone"),cpf:A("cpf"),cnpj:A("cnpj"),notes:A("notes"),isFavorite:ve("is_favorite").default(!1),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ra=ke("contact_payment_methods",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),contactId:A("contact_id").references(()=>$e.id,{onDelete:"cascade"}),methodType:A("method_type").notNull(),methodDetails:st("method_details").notNull(),isDefault:ve("is_default").default(!1),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Am,tw,rw,nw,ow,iw,sw,aw,cw,cn,Dt,Cm,Br,Jn,Or,un,Na,uw=ee(()=>{"use strict";qr();an();Am=sr("consent_type",["data_processing","marketing","analytics","third_party","third_party_sharing","voice_data","voice_recording","biometric","financial_data","location","open_banking"]),tw=sr("collection_method",["signup","settings","settings_toggle","prompt","api","import","explicit_form","terms_acceptance","voice_command"]),rw=sr("deletion_request_type",["full_account","full_deletion","specific_data","anonymization","partial_deletion","consent_withdrawal"]),nw=sr("deletion_request_status",["pending","verified","approved","processing","completed","rejected","cancelled"]),ow=sr("export_request_type",["full_data","full_export","transactions","profile","consents","audit_logs","financial_only","voice_commands","specific_period"]),iw=sr("export_format",["json","csv","pdf"]),sw=sr("export_status",["pending","processing","completed","failed","expired"]),aw=sr("limit_type",["pix_daily","pix_daytime","pix_nighttime","pix_transaction","pix_total_daily","boleto_daily","ted_daily","transfer_daily","withdrawal_daily","total_daily","total_monthly"]),cw=sr("compliance_event_type",["consent_granted","consent_revoked","data_export_requested","data_export_completed","data_deletion_requested","data_deletion_completed","data_accessed","data_modified","limit_updated","policy_acknowledged"]),cn=ke("consent_templates",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),consentType:Am("consent_type").notNull(),version:A("version").notNull().default("1.0"),titlePt:A("title_pt").notNull(),descriptionPt:A("description_pt").notNull(),fullTextPt:A("full_text_pt").notNull(),titleEn:A("title_en"),descriptionEn:A("description_en"),fullTextEn:A("full_text_en"),isMandatory:ve("is_mandatory").default(!1),isActive:ve("is_active").default(!0),legalBasis:A("legal_basis"),effectiveFrom:K("effective_from",{withTimezone:!0}).defaultNow(),effectiveUntil:K("effective_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Dt=ke("lgpd_consents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),consentType:Am("consent_type").notNull(),purpose:A("purpose").notNull(),legalBasis:A("legal_basis").notNull(),granted:ve("granted").notNull().default(!1),grantedAt:K("granted_at",{withTimezone:!0}),revokedAt:K("revoked_at",{withTimezone:!0}),consentVersion:A("consent_version").notNull(),consentTextHash:A("consent_text_hash"),collectionMethod:tw("collection_method").notNull(),ipAddress:yn("ip_address"),userAgent:A("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()},t=>[wb("lgpd_consents_user_type_version_idx").on(t.userId,t.consentType,t.consentVersion)]),Cm=ke("data_retention_policies",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),dataType:A("data_type").notNull().unique(),description:A("description"),descriptionPt:A("description_pt"),retentionMonths:kt("retention_months").notNull(),retentionPeriodLabel:A("retention_period_label"),autoDelete:ve("auto_delete").default(!1),deletionMethod:A("deletion_method").default("hard_delete"),legalHold:ve("legal_hold").default(!1),legalBasis:A("legal_basis"),legalRequirement:ve("legal_requirement").default(!1),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Br=ke("data_deletion_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),requestType:rw("request_type").notNull(),scope:st("scope").default({}),reason:A("reason"),status:nw("status").default("pending"),verificationCode:A("verification_code"),verifiedAt:K("verified_at",{withTimezone:!0}),reviewDeadline:K("review_deadline",{withTimezone:!0}),processedAt:K("processed_at",{withTimezone:!0}),processedBy:A("processed_by"),processingNotes:A("processing_notes"),legalHold:ve("legal_hold").default(!1),legalHoldReason:A("legal_hold_reason"),ipAddress:yn("ip_address"),userAgent:A("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Jn=ke("lgpd_export_requests",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),requestType:ow("request_type").notNull(),format:iw("format").default("json"),dateFrom:jr("date_from"),dateTo:jr("date_to"),status:sw("status").default("pending"),processedAt:K("processed_at",{withTimezone:!0}),downloadUrl:A("download_url"),downloadExpiresAt:K("download_expires_at",{withTimezone:!0}),fileSizeBytes:kt("file_size_bytes"),errorMessage:A("error_message"),retryCount:kt("retry_count").default(0),requestedVia:A("requested_via").default("app"),ipAddress:yn("ip_address"),userAgent:A("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Or=ke("transaction_limits",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),limitType:aw("limit_type").notNull(),dailyLimit:at("daily_limit",{precision:15,scale:2}).notNull(),transactionLimit:at("transaction_limit",{precision:15,scale:2}),monthlyLimit:at("monthly_limit",{precision:15,scale:2}),currentDailyUsed:at("current_daily_used",{precision:15,scale:2}).default("0"),currentMonthlyUsed:at("current_monthly_used",{precision:15,scale:2}).default("0"),lastResetAt:K("last_reset_at",{withTimezone:!0}).defaultNow(),nighttimeLimit:at("nighttime_limit",{precision:15,scale:2}),nighttimeStart:A("nighttime_start").default("20:00"),nighttimeEnd:A("nighttime_end").default("06:00"),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()},t=>[wb("transaction_limits_user_type_idx").on(t.userId,t.limitType)]),un=ke("compliance_audit_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"set null"}),eventType:cw("event_type").notNull(),resourceType:A("resource_type").notNull(),resourceId:A("resource_id"),description:A("description"),metadata:st("metadata").default({}),previousState:st("previous_state"),newState:st("new_state"),ipAddress:yn("ip_address"),userAgent:A("user_agent"),sessionId:A("session_id"),retentionUntil:K("retention_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Na=ke("legal_holds",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}).notNull(),reason:A("reason").notNull(),description:A("description"),referenceNumber:A("reference_number"),dataTypes:st("data_types").default([]),allData:ve("all_data").default(!1),active:ve("active").default(!0),startedAt:K("started_at",{withTimezone:!0}).defaultNow(),expiresAt:K("expires_at",{withTimezone:!0}),releasedAt:K("released_at",{withTimezone:!0}),releasedBy:A("released_by"),releaseReason:A("release_reason"),createdBy:A("created_by").notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Yo,Da,ja,lw=ee(()=>{"use strict";qr();an();Yo=ke("notifications",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),title:A("title").notNull(),message:A("message").notNull(),type:A("type").notNull(),category:A("category"),priority:A("priority").default("normal"),isRead:ve("is_read").default(!1),readAt:K("read_at",{withTimezone:!0}),actionUrl:A("action_url"),actionText:A("action_text"),metadata:st("metadata"),expiresAt:K("expires_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Da=ke("alert_rules",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),ruleName:A("rule_name").notNull(),ruleType:A("rule_type").notNull(),conditions:st("conditions").notNull(),actions:st("actions").notNull(),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),ja=ke("notification_logs",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),notificationId:A("notification_id").references(()=>Yo.id,{onDelete:"cascade"}),deliveryMethod:A("delivery_method").notNull(),status:A("status").notNull(),sentAt:K("sent_at",{withTimezone:!0}).defaultNow(),deliveredAt:K("delivered_at",{withTimezone:!0}),errorMessage:A("error_message"),externalId:A("external_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var eO,tO,rO,Ma,ei,wo,dw=ee(()=>{"use strict";qr();Os();an();eO=sr("pix_key_type",["CPF","CNPJ","EMAIL","PHONE","RANDOM"]),tO=sr("pix_transaction_status",["pending","processing","completed","failed","cancelled","reversed"]),rO=sr("pix_transaction_type_enum",["sent","received","scheduled"]),Ma=ke("pix_keys",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),keyType:A("key_type").notNull(),keyValue:A("key_value").notNull(),keyName:A("key_name").notNull(),bankName:A("bank_name"),isFavorite:ve("is_favorite").default(!1),isActive:ve("is_active").default(!0),verificationStatus:A("verification_status").default("pending"),lastUsed:K("last_used",{withTimezone:!0}),usageCount:kt("usage_count").default(0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),ei=ke("pix_qr_codes",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),qrCodeData:A("qr_code_data").notNull(),pixCopyPaste:A("pix_copy_paste").notNull(),amount:at("amount",{precision:15,scale:2}),description:A("description"),recipientName:A("recipient_name"),recipientPixKey:A("recipient_pix_key"),expiresAt:K("expires_at",{withTimezone:!0}),isActive:ve("is_active").default(!0),isSingleUse:ve("is_single_use").default(!1),usageCount:kt("usage_count").default(0),maxUsage:kt("max_usage"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),wo=ke("pix_transactions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),transactionId:A("transaction_id").references(()=>ne.id,{onDelete:"set null"}),endToEndId:A("end_to_end_id").unique(),pixKey:A("pix_key").notNull(),pixKeyType:A("pix_key_type").notNull(),recipientName:A("recipient_name").notNull(),recipientDocument:A("recipient_document"),recipientBank:A("recipient_bank"),amount:at("amount",{precision:15,scale:2}).notNull(),description:A("description"),transactionDate:K("transaction_date",{withTimezone:!0}).notNull(),status:A("status").default("pending"),transactionType:A("transaction_type").default("sent"),scheduledFor:K("scheduled_for",{withTimezone:!0}),processedAt:K("processed_at",{withTimezone:!0}),qrCodeId:A("qr_code_id").references(()=>ei.id),externalId:A("external_id"),errorMessage:A("error_message"),feeAmount:at("fee_amount",{precision:15,scale:2}).default("0"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var za,nO,xr,Mi,zi,So,Ua,La,hEe,pw=ee(()=>{"use strict";qr();Os();an();za=ke("voice_commands",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),commandText:A("command_text").notNull(),audioFileUrl:A("audio_file_url"),intent:A("intent").notNull(),intentConfidence:at("intent_confidence",{precision:3,scale:2}),entities:st("entities"),responseText:A("response_text"),responseAudioUrl:A("response_audio_url"),processingTimeMs:kt("processing_time_ms"),status:A("status").default("processed"),errorMessage:A("error_message"),context:st("context"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),nO=ke("command_intents",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),intentName:A("intent_name").unique().notNull(),description:A("description"),examplePhrases:A("example_phrases").array(),requiredEntities:A("required_entities").array(),actionHandler:A("action_handler"),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),xr=ke("ai_insights",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),insightType:A("insight_type").notNull(),title:A("title").notNull(),description:A("description").notNull(),recommendation:A("recommendation"),impactLevel:A("impact_level").default("medium"),categoryId:A("category_id").references(()=>De.id),data:st("data"),isRead:ve("is_read").default(!1),isActioned:ve("is_actioned").default(!1),expiresAt:K("expires_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Mi=ke("spending_patterns",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>De.id),periodStart:jr("period_start").notNull(),periodEnd:jr("period_end").notNull(),periodType:A("period_type").notNull(),totalAmount:at("total_amount",{precision:15,scale:2}).notNull(),transactionCount:kt("transaction_count").notNull(),averageTransaction:at("average_transaction",{precision:15,scale:2}),trendPercentage:at("trend_percentage",{precision:5,scale:2}),patternData:st("pattern_data"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),zi=ke("budget_categories",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),categoryId:A("category_id").references(()=>De.id,{onDelete:"cascade"}),budgetAmount:at("budget_amount",{precision:15,scale:2}).notNull(),periodType:A("period_type").notNull(),alertThreshold:at("alert_threshold",{precision:5,scale:2}).default("80"),isActive:ve("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),So=ke("chat_sessions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),title:A("title"),isActive:ve("is_active").default(!0),metadata:st("metadata"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ua=ke("chat_messages",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:A("session_id").references(()=>So.id,{onDelete:"cascade"}),role:A("role").notNull(),content:A("content").notNull(),attachments:st("attachments"),context:st("context"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),La=ke("voice_transcriptions",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:A("user_id").references(()=>G.id,{onDelete:"cascade"}),audioStoragePath:A("audio_storage_path").notNull(),transcript:A("transcript").notNull(),confidenceScore:at("confidence_score",{precision:3,scale:2}),language:A("language").notNull(),processingTimeMs:kt("processing_time_ms").notNull(),expiresAt:K("expires_at",{withTimezone:!0}).notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),hEe=ke("chat_context_snapshots",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),conversationId:A("conversation_id").references(()=>So.id,{onDelete:"cascade"}),recentTransactions:st("recent_transactions"),accountBalances:st("account_balances"),upcomingEvents:st("upcoming_events"),userPreferences:st("user_preferences"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var oO,iO,sO,aO,cO,uO,lO,dO,pO,mO,fO,hO,gO,yO,vO,_O,bO,wO,SO,xO,TO,EO,kO,IO,PO,AO,CO,OO,$O,RO,NO,DO,jO,MO,zO,UO,LO,qO,FO,BO,VO,HO,ZO,JO,KO,GO=ee(()=>{"use strict";gr();Kb();Gu();Qb();Xb();Yb();ew();uw();lw();dw();Os();an();pw();oO=qe(G,({one:t,many:e})=>({preferences:t(sn,{fields:[G.id],references:[sn.userId]}),security:t(As,{fields:[G.id],references:[As.userId]}),bankAccounts:e(ae),transactionCategories:e(De),transactions:e(ne),transactionSchedules:e(Vt),financialEvents:e(mt),eventReminders:e(ji),pixKeys:e(Ma),pixQrCodes:e(ei),pixTransactions:e(wo),contacts:e($e),boletos:e(bo),voiceCommands:e(za),voiceTranscriptions:e(La),aiInsights:e(xr),spendingPatterns:e(Mi),budgetCategories:e(zi),chatSessions:e(So),notifications:e(Yo),alertRules:e(Da),auditLogs:e(Ri),errorLogs:e(Cs),userSessions:e(Aa),lgpdConsentLogs:e(Ca),dataExportRequests:e(Oa),bankSyncLogs:e(Ni),lgpdConsents:e(Dt),dataDeletionRequests:e(Br),lgpdExportRequests:e(Jn),transactionLimits:e(Or),complianceAuditLogs:e(un),legalHolds:e(Na),subscriptions:e(Be),paymentHistory:e(lr)})),iO=qe(sn,({one:t})=>({user:t(G,{fields:[sn.userId],references:[G.id]})})),sO=qe(As,({one:t})=>({user:t(G,{fields:[As.userId],references:[G.id]})})),aO=qe(ae,({one:t,many:e})=>({user:t(G,{fields:[ae.userId],references:[G.id]}),balanceHistory:e($a),syncLogs:e(Ni),transactions:e(ne),transactionSchedules:e(Vt),financialEvents:e(mt)})),cO=qe($a,({one:t})=>({account:t(ae,{fields:[$a.accountId],references:[ae.id]})})),uO=qe(Ni,({one:t})=>({user:t(G,{fields:[Ni.userId],references:[G.id]}),account:t(ae,{fields:[Ni.accountId],references:[ae.id]})})),lO=qe(De,({one:t,many:e})=>({user:t(G,{fields:[De.userId],references:[G.id]}),parent:t(De,{fields:[De.parentId],references:[De.id],relationName:"categoryParent"}),children:e(De,{relationName:"categoryParent"}),transactions:e(ne),transactionSchedules:e(Vt),financialEvents:e(mt),aiInsights:e(xr),spendingPatterns:e(Mi),budgetCategories:e(zi)})),dO=qe(ne,({one:t,many:e})=>({user:t(G,{fields:[ne.userId],references:[G.id]}),account:t(ae,{fields:[ne.accountId],references:[ae.id]}),category:t(De,{fields:[ne.categoryId],references:[De.id]}),pixTransactions:e(wo),boletoPayments:e(Di),financialEvents:e(mt)})),pO=qe(Vt,({one:t})=>({user:t(G,{fields:[Vt.userId],references:[G.id]}),account:t(ae,{fields:[Vt.accountId],references:[ae.id]}),category:t(De,{fields:[Vt.categoryId],references:[De.id]}),executedTransaction:t(ne,{fields:[Vt.executedTransactionId],references:[ne.id]})})),mO=qe($s,({many:t})=>({financialEvents:t(mt)})),fO=qe(mt,({one:t,many:e})=>({user:t(G,{fields:[mt.userId],references:[G.id]}),account:t(ae,{fields:[mt.accountId],references:[ae.id]}),category:t(De,{fields:[mt.categoryId],references:[De.id]}),eventType:t($s,{fields:[mt.eventTypeId],references:[$s.id]}),parentEvent:t(mt,{fields:[mt.parentEventId],references:[mt.id],relationName:"eventParent"}),childEvents:e(mt,{relationName:"eventParent"}),transaction:t(ne,{fields:[mt.transactionId],references:[ne.id]}),reminders:e(ji)})),hO=qe(ji,({one:t})=>({user:t(G,{fields:[ji.userId],references:[G.id]}),event:t(mt,{fields:[ji.eventId],references:[mt.id]})})),gO=qe(Ma,({one:t})=>({user:t(G,{fields:[Ma.userId],references:[G.id]})})),yO=qe(ei,({one:t,many:e})=>({user:t(G,{fields:[ei.userId],references:[G.id]}),pixTransactions:e(wo)})),vO=qe(wo,({one:t})=>({user:t(G,{fields:[wo.userId],references:[G.id]}),transaction:t(ne,{fields:[wo.transactionId],references:[ne.id]}),qrCode:t(ei,{fields:[wo.qrCodeId],references:[ei.id]})})),_O=qe($e,({one:t,many:e})=>({user:t(G,{fields:[$e.userId],references:[G.id]}),paymentMethods:e(Ra)})),bO=qe(Ra,({one:t})=>({contact:t($e,{fields:[Ra.contactId],references:[$e.id]})})),wO=qe(bo,({one:t,many:e})=>({user:t(G,{fields:[bo.userId],references:[G.id]}),transaction:t(ne,{fields:[bo.transactionId],references:[ne.id]}),payments:e(Di)})),SO=qe(Di,({one:t})=>({boleto:t(bo,{fields:[Di.boletoId],references:[bo.id]}),transaction:t(ne,{fields:[Di.transactionId],references:[ne.id]})})),xO=qe(za,({one:t})=>({user:t(G,{fields:[za.userId],references:[G.id]})})),TO=qe(La,({one:t})=>({user:t(G,{fields:[La.userId],references:[G.id]})})),EO=qe(xr,({one:t})=>({user:t(G,{fields:[xr.userId],references:[G.id]}),category:t(De,{fields:[xr.categoryId],references:[De.id]})})),kO=qe(Mi,({one:t})=>({user:t(G,{fields:[Mi.userId],references:[G.id]}),category:t(De,{fields:[Mi.categoryId],references:[De.id]})})),IO=qe(zi,({one:t})=>({user:t(G,{fields:[zi.userId],references:[G.id]}),category:t(De,{fields:[zi.categoryId],references:[De.id]})})),PO=qe(So,({one:t,many:e})=>({user:t(G,{fields:[So.userId],references:[G.id]}),messages:e(Ua)})),AO=qe(Ua,({one:t})=>({session:t(So,{fields:[Ua.sessionId],references:[So.id]})})),CO=qe(Yo,({one:t,many:e})=>({user:t(G,{fields:[Yo.userId],references:[G.id]}),logs:e(ja)})),OO=qe(Da,({one:t})=>({user:t(G,{fields:[Da.userId],references:[G.id]})})),$O=qe(ja,({one:t})=>({notification:t(Yo,{fields:[ja.notificationId],references:[Yo.id]})})),RO=qe(Ri,({one:t})=>({user:t(G,{fields:[Ri.userId],references:[G.id]})})),NO=qe(Cs,({one:t})=>({user:t(G,{fields:[Cs.userId],references:[G.id]}),resolvedByUser:t(G,{fields:[Cs.resolvedBy],references:[G.id],relationName:"resolvedByUser"})})),DO=qe(Aa,({one:t})=>({user:t(G,{fields:[Aa.userId],references:[G.id]})})),jO=qe(Ca,({one:t})=>({user:t(G,{fields:[Ca.userId],references:[G.id]})})),MO=qe(Oa,({one:t})=>({user:t(G,{fields:[Oa.userId],references:[G.id]})})),zO=qe(cn,({many:t})=>({consents:t(Dt)})),UO=qe(Dt,({one:t})=>({user:t(G,{fields:[Dt.userId],references:[G.id]})})),LO=qe(Cm,()=>({})),qO=qe(Br,({one:t})=>({user:t(G,{fields:[Br.userId],references:[G.id]})})),FO=qe(Jn,({one:t})=>({user:t(G,{fields:[Jn.userId],references:[G.id]})})),BO=qe(Or,({one:t})=>({user:t(G,{fields:[Or.userId],references:[G.id]})})),VO=qe(un,({one:t})=>({user:t(G,{fields:[un.userId],references:[G.id]})})),HO=qe(Na,({one:t})=>({user:t(G,{fields:[Na.userId],references:[G.id]})})),ZO=qe(Fr,({many:t})=>({subscriptions:t(Be)})),JO=qe(Be,({one:t,many:e})=>({user:t(G,{fields:[Be.userId],references:[G.id]}),plan:t(Fr,{fields:[Be.planId],references:[Fr.id]}),paymentHistory:e(lr)})),KO=qe(lr,({one:t})=>({user:t(G,{fields:[lr.userId],references:[G.id]}),subscription:t(Be,{fields:[lr.subscriptionId],references:[Be.id]})}))});var qa={};hn(qa,{accountBalanceHistory:()=>$a,accountBalanceHistoryRelations:()=>cO,aiInsights:()=>xr,aiInsightsRelations:()=>EO,alertRules:()=>Da,alertRulesRelations:()=>OO,auditLogs:()=>Ri,auditLogsRelations:()=>RO,bankAccounts:()=>ae,bankAccountsRelations:()=>aO,bankSyncLogs:()=>Ni,bankSyncLogsRelations:()=>uO,boletoPayments:()=>Di,boletoPaymentsRelations:()=>SO,boletoStatusEnum:()=>X1,boletos:()=>bo,boletosRelations:()=>wO,budgetCategories:()=>zi,budgetCategoriesRelations:()=>IO,chatMessages:()=>Ua,chatMessagesRelations:()=>AO,chatSessions:()=>So,chatSessionsRelations:()=>PO,collectionMethodEnum:()=>tw,commandIntents:()=>nO,complianceAuditLogs:()=>un,complianceAuditLogsRelations:()=>VO,complianceEventTypeEnum:()=>cw,consentTemplates:()=>cn,consentTemplatesRelations:()=>zO,consentTypeEnum:()=>Am,contactPaymentMethods:()=>Ra,contactPaymentMethodsRelations:()=>bO,contacts:()=>$e,contactsRelations:()=>_O,dataDeletionRequests:()=>Br,dataDeletionRequestsRelations:()=>qO,dataExportRequests:()=>Oa,dataExportRequestsRelations:()=>MO,dataRetentionPolicies:()=>Cm,dataRetentionPoliciesRelations:()=>LO,deletionRequestStatusEnum:()=>nw,deletionRequestTypeEnum:()=>rw,errorLogs:()=>Cs,errorLogsRelations:()=>NO,eventReminders:()=>ji,eventRemindersRelations:()=>hO,eventTypes:()=>$s,eventTypesRelations:()=>mO,exportFormatEnum:()=>iw,exportRequestTypeEnum:()=>ow,exportStatusEnum:()=>sw,financialEvents:()=>mt,financialEventsRelations:()=>fO,legalHolds:()=>Na,legalHoldsRelations:()=>HO,lgpdConsentLogs:()=>Ca,lgpdConsentLogsRelations:()=>jO,lgpdConsents:()=>Dt,lgpdConsentsRelations:()=>UO,lgpdExportRequests:()=>Jn,lgpdExportRequestsRelations:()=>FO,limitTypeEnum:()=>aw,notificationLogs:()=>ja,notificationLogsRelations:()=>$O,notifications:()=>Yo,notificationsRelations:()=>CO,paymentHistory:()=>lr,paymentHistoryRelations:()=>KO,paymentMethodTypeEnum:()=>Y1,paymentStatusEnum:()=>Wb,pixKeyTypeEnum:()=>eO,pixKeys:()=>Ma,pixKeysRelations:()=>gO,pixQrCodes:()=>ei,pixQrCodesRelations:()=>yO,pixTransactionStatusEnum:()=>tO,pixTransactionTypeEnum:()=>rO,pixTransactions:()=>wo,pixTransactionsRelations:()=>vO,spendingPatterns:()=>Mi,spendingPatternsRelations:()=>kO,subscriptionPlans:()=>Fr,subscriptionPlansRelations:()=>ZO,subscriptionStatusEnum:()=>Gb,subscriptions:()=>Be,subscriptionsRelations:()=>JO,transactionCategories:()=>De,transactionCategoriesRelations:()=>lO,transactionLimits:()=>Or,transactionLimitsRelations:()=>BO,transactionSchedules:()=>Vt,transactionSchedulesRelations:()=>pO,transactions:()=>ne,transactionsRelations:()=>dO,userPreferences:()=>sn,userPreferencesRelations:()=>iO,userSecurity:()=>As,userSecurityRelations:()=>sO,userSessions:()=>Aa,userSessionsRelations:()=>DO,users:()=>G,usersRelations:()=>oO,voiceCommands:()=>za,voiceCommandsRelations:()=>xO,voiceTranscriptions:()=>La,voiceTranscriptionsRelations:()=>TO});var Tr=ee(()=>{"use strict";Kb();Gu();Qb();Xb();Yb();ew();uw();lw();dw();Os();an();pw();GO()});var gw={};hn(gw,{adminDb:()=>C3,closePool:()=>P3,createHttpClient:()=>XO,createPoolClient:()=>I3,db:()=>Kn,getHttpClient:()=>yr,getOrganizationClient:()=>A3,getPoolClient:()=>Rs,schema:()=>qa});var WO,QO,XO,mw,yr,I3,Wu,Om,Rs,P3,A3,fw,Kn,hw,C3,An=ee(()=>{"use strict";zu();G1();Q1();Tr();WO=s(()=>{let t=process.env.DATABASE_URL;if(!t)throw new Error("DATABASE_URL environment variable is not set");return t},"getPooledDatabaseUrl"),QO=s(()=>{let t=process.env.DATABASE_URL_UNPOOLED;return t||(console.warn("DATABASE_URL_UNPOOLED not set, using DATABASE_URL as fallback"),WO())},"getDirectDatabaseUrl"),XO=s(()=>{let t=Ai(WO());return Im(t,{schema:qa})},"createHttpClient"),mw=null,yr=s(()=>(mw||(mw=XO()),mw),"getHttpClient"),I3=s(()=>{let t=new vo({connectionString:QO()});return Ku(t,{schema:qa})},"createPoolClient"),Wu=null,Om=null,Rs=s(()=>(Om||(Wu=new vo({connectionString:QO()}),Om=Ku(Wu,{schema:qa})),Om),"getPoolClient"),P3=s(async()=>{Wu&&(await Wu.end(),Wu=null,Om=null)},"closePool"),A3=s(t=>Rs(),"getOrganizationClient"),fw=null,Kn=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Database client cannot be used in browser context");if(!fw){if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL environment variable is not set");fw=yr()}return fw[e]}}),hw=null,C3=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Admin database client cannot be used in browser context");if(!hw){if(!(process.env.DATABASE_URL_UNPOOLED??process.env.DATABASE_URL))throw new Error("DATABASE_URL_UNPOOLED or DATABASE_URL environment variable is not set");hw=Rs()}return hw[e]}})});var yw,Ns,$m=ee(()=>{"use strict";yw={staticAssets:"public, max-age=31536000, immutable",htmlFiles:"no-cache, no-store, must-revalidate",apiResponses:"private, max-age=60",dynamicContent:"private, no-cache"},Ns={NODE_ENV:"production",PORT:Number(process.env.PORT)||3e3,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,DATABASE_URL:process.env.DATABASE_URL||"",DATABASE_URL_UNPOOLED:process.env.DATABASE_URL_UNPOOLED||"",CLERK_PUBLISHABLE_KEY:process.env.VITE_CLERK_PUBLISHABLE_KEY||process.env.CLERK_PUBLISHABLE_KEY||"",CLERK_SECRET_KEY:process.env.CLERK_SECRET_KEY||"",API_URL:process.env.VITE_API_URL||process.env.API_URL||"http://localhost:3000",CORS_ORIGINS:(process.env.CORS_ORIGINS||"http://localhost:5173,http://localhost:3000").split(",")}});var r$={};hn(r$,{htmlCache:()=>N3,staticAssetsCache:()=>R3});var R3,N3,n$=ee(()=>{"use strict";$m();R3=s(()=>async(t,e)=>{t.header("Cache-Control",yw.staticAssets),await e()},"staticAssetsCache"),N3=s(()=>async(t,e)=>{t.header("Cache-Control",yw.htmlFiles),t.header("Pragma","no-cache"),t.header("Expires","0"),await e()},"htmlCache")});var j$=Ue(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.parse=EV;Vm.serialize=kV;var _V=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,bV=/^[\u0021-\u003A\u003C-\u007E]*$/,wV=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,SV=/^[\u0020-\u003A\u003D-\u007E]*$/,xV=Object.prototype.toString,TV=(()=>{let t=s(function(){},"C");return t.prototype=Object.create(null),t})();function EV(t,e){let r=new TV,n=t.length;if(n<2)return r;let o=e?.decode||IV,i=0;do{let a=t.indexOf("=",i);if(a===-1)break;let c=t.indexOf(";",i),l=c===-1?n:c;if(a>l){i=t.lastIndexOf(";",a-1)+1;continue}let d=N$(t,i,a),p=D$(t,a,d),m=t.slice(d,p);if(r[m]===void 0){let h=N$(t,a+1,l),y=D$(t,l,h),g=o(t.slice(h,y));r[m]=g}i=l+1}while(i<n);return r}s(EV,"parse");function N$(t,e,r){do{let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}s(N$,"startIndex");function D$(t,e,r){for(;e>r;){let n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}s(D$,"endIndex");function kV(t,e,r){let n=r?.encode||encodeURIComponent;if(!_V.test(t))throw new TypeError(`argument name is invalid: ${t}`);let o=n(e);if(!bV.test(o))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+o;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!wV.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!SV.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!PV(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}s(kV,"serialize");function IV(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}s(IV,"decode");function PV(t){return xV.call(t)==="[object Date]"}s(PV,"isDate")});var dh=Ue((dNe,ac)=>{"use strict";var EQ=typeof Buffer<"u",fj=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,hj=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function gj(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),EQ&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let o=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(o==="ignore"&&i==="ignore")return n;if(o!=="ignore"&&i!=="ignore"){if(fj.test(t)===!1&&hj.test(t)===!1)return n}else if(o!=="ignore"&&i==="ignore"){if(fj.test(t)===!1)return n}else if(hj.test(t)===!1)return n;return yj(n,{protoAction:o,constructorAction:i,safe:r&&r.safe})}s(gj,"_parse");function yj(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let o=[t];for(;o.length;){let i=o;o=[];for(let a of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let c in a){let l=a[c];l&&typeof l=="object"&&o.push(l)}}}return t}s(yj,"filter");function uk(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return gj(t,e,r)}finally{Error.stackTraceLimit=n}}s(uk,"parse");function kQ(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return gj(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}s(kQ,"safeParse");ac.exports=uk;ac.exports.default=uk;ac.exports.parse=uk;ac.exports.safeParse=kQ;ac.exports.scan=yj});var Zs=Ue((N5e,oL)=>{"use strict";oL.exports=TypeError});var sL=Ue((D5e,iL)=>{iL.exports=_5("util").inspect});var Ud=Ue((j5e,kL)=>{var GI=typeof Map=="function"&&Map.prototype,LI=Object.getOwnPropertyDescriptor&&GI?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Kh=GI&&LI&&typeof LI.get=="function"?LI.get:null,aL=GI&&Map.prototype.forEach,WI=typeof Set=="function"&&Set.prototype,qI=Object.getOwnPropertyDescriptor&&WI?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Gh=WI&&qI&&typeof qI.get=="function"?qI.get:null,cL=WI&&Set.prototype.forEach,Hse=typeof WeakMap=="function"&&WeakMap.prototype,jd=Hse?WeakMap.prototype.has:null,Zse=typeof WeakSet=="function"&&WeakSet.prototype,Md=Zse?WeakSet.prototype.has:null,Jse=typeof WeakRef=="function"&&WeakRef.prototype,uL=Jse?WeakRef.prototype.deref:null,Kse=Boolean.prototype.valueOf,Gse=Object.prototype.toString,Wse=Function.prototype.toString,Qse=String.prototype.match,QI=String.prototype.slice,ls=String.prototype.replace,Xse=String.prototype.toUpperCase,lL=String.prototype.toLowerCase,_L=RegExp.prototype.test,dL=Array.prototype.concat,$o=Array.prototype.join,Yse=Array.prototype.slice,pL=Math.floor,VI=typeof BigInt=="function"?BigInt.prototype.valueOf:null,FI=Object.getOwnPropertySymbols,HI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,$c=typeof Symbol=="function"&&typeof Symbol.iterator=="object",zd=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===$c||!0)?Symbol.toStringTag:null,bL=Object.prototype.propertyIsEnumerable,mL=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function fL(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||_L.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-pL(-t):pL(t);if(n!==t){var o=String(n),i=QI.call(e,o.length+1);return ls.call(o,r,"$&_")+"."+ls.call(ls.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ls.call(e,r,"$&_")}s(fL,"addNumericSeparator");var ZI=sL(),hL=ZI.custom,gL=xL(hL)?hL:null,wL={__proto__:null,double:'"',single:"'"},eae={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};kL.exports=s(function t(e,r,n,o){var i=r||{};if(gi(i,"quoteStyle")&&!gi(wL,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(gi(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=gi(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(gi(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(gi(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return EL(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return c?fL(e,l):l}if(typeof e=="bigint"){var d=String(e)+"n";return c?fL(e,d):d}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return JI(e)?"[Array]":"[Object]";var m=vae(i,n);if(typeof o>"u")o=[];else if(TL(o,e)>=0)return"[Circular]";function h(Z,F,Y){if(F&&(o=Yse.call(o),o.push(F)),Y){var re={depth:i.depth};return gi(i,"quoteStyle")&&(re.quoteStyle=i.quoteStyle),t(Z,re,n+1,o)}return t(Z,i,n+1,o)}if(s(h,"inspect"),typeof e=="function"&&!yL(e)){var y=uae(e),g=Jh(e,h);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(g.length>0?" { "+$o.call(g,", ")+" }":"")}if(xL(e)){var f=$c?ls.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):HI.call(e);return typeof e=="object"&&!$c?Dd(f):f}if(hae(e)){for(var _="<"+lL.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)_+=" "+w[b].name+"="+SL(tae(w[b].value),"double",i);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+lL.call(String(e.nodeName))+">",_}if(JI(e)){if(e.length===0)return"[]";var S=Jh(e,h);return m&&!yae(S)?"["+KI(S,m)+"]":"[ "+$o.call(S,", ")+" ]"}if(nae(e)){var k=Jh(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!bL.call(e,"cause")?"{ ["+String(e)+"] "+$o.call(dL.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$o.call(k,", ")+" }"}if(typeof e=="object"&&a){if(gL&&typeof e[gL]=="function"&&ZI)return ZI(e,{depth:p-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(lae(e)){var R=[];return aL&&aL.call(e,function(Z,F){R.push(h(F,e,!0)+" => "+h(Z,e))}),vL("Map",Kh.call(e),R,m)}if(mae(e)){var O=[];return cL&&cL.call(e,function(Z){O.push(h(Z,e))}),vL("Set",Gh.call(e),O,m)}if(dae(e))return BI("WeakMap");if(fae(e))return BI("WeakSet");if(pae(e))return BI("WeakRef");if(iae(e))return Dd(h(Number(e)));if(aae(e))return Dd(h(VI.call(e)));if(sae(e))return Dd(Kse.call(e));if(oae(e))return Dd(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!rae(e)&&!yL(e)){var C=Jh(e,h),$=mL?mL(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",N=!$&&zd&&Object(e)===e&&zd in e?QI.call(ds(e),8,-1):P?"Object":"",j=$||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",W=j+(N||P?"["+$o.call(dL.call([],N||[],P||[]),": ")+"] ":"");return C.length===0?W+"{}":m?W+"{"+KI(C,m)+"}":W+"{ "+$o.call(C,", ")+" }"}return String(e)},"inspect_");function SL(t,e,r){var n=r.quoteStyle||e,o=wL[n];return o+t+o}s(SL,"wrapQuotes");function tae(t){return ls.call(String(t),/"/g,"&quot;")}s(tae,"quote");function Js(t){return!zd||!(typeof t=="object"&&(zd in t||typeof t[zd]<"u"))}s(Js,"canTrustToString");function JI(t){return ds(t)==="[object Array]"&&Js(t)}s(JI,"isArray");function rae(t){return ds(t)==="[object Date]"&&Js(t)}s(rae,"isDate");function yL(t){return ds(t)==="[object RegExp]"&&Js(t)}s(yL,"isRegExp");function nae(t){return ds(t)==="[object Error]"&&Js(t)}s(nae,"isError");function oae(t){return ds(t)==="[object String]"&&Js(t)}s(oae,"isString");function iae(t){return ds(t)==="[object Number]"&&Js(t)}s(iae,"isNumber");function sae(t){return ds(t)==="[object Boolean]"&&Js(t)}s(sae,"isBoolean");function xL(t){if($c)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!HI)return!1;try{return HI.call(t),!0}catch{}return!1}s(xL,"isSymbol");function aae(t){if(!t||typeof t!="object"||!VI)return!1;try{return VI.call(t),!0}catch{}return!1}s(aae,"isBigInt");var cae=Object.prototype.hasOwnProperty||function(t){return t in this};function gi(t,e){return cae.call(t,e)}s(gi,"has");function ds(t){return Gse.call(t)}s(ds,"toStr");function uae(t){if(t.name)return t.name;var e=Qse.call(Wse.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}s(uae,"nameOf");function TL(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}s(TL,"indexOf");function lae(t){if(!Kh||!t||typeof t!="object")return!1;try{Kh.call(t);try{Gh.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}s(lae,"isMap");function dae(t){if(!jd||!t||typeof t!="object")return!1;try{jd.call(t,jd);try{Md.call(t,Md)}catch{return!0}return t instanceof WeakMap}catch{}return!1}s(dae,"isWeakMap");function pae(t){if(!uL||!t||typeof t!="object")return!1;try{return uL.call(t),!0}catch{}return!1}s(pae,"isWeakRef");function mae(t){if(!Gh||!t||typeof t!="object")return!1;try{Gh.call(t);try{Kh.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}s(mae,"isSet");function fae(t){if(!Md||!t||typeof t!="object")return!1;try{Md.call(t,Md);try{jd.call(t,jd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}s(fae,"isWeakSet");function hae(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}s(hae,"isElement");function EL(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return EL(QI.call(t,0,e.maxStringLength),e)+n}var o=eae[e.quoteStyle||"single"];o.lastIndex=0;var i=ls.call(ls.call(t,o,"\\$1"),/[\x00-\x1f]/g,gae);return SL(i,"single",e)}s(EL,"inspectString");function gae(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Xse.call(e.toString(16))}s(gae,"lowbyte");function Dd(t){return"Object("+t+")"}s(Dd,"markBoxed");function BI(t){return t+" { ? }"}s(BI,"weakCollectionOf");function vL(t,e,r,n){var o=n?KI(r,n):$o.call(r,", ");return t+" ("+e+") {"+o+"}"}s(vL,"collectionOf");function yae(t){for(var e=0;e<t.length;e++)if(TL(t[e],`
`)>=0)return!1;return!0}s(yae,"singleLineValues");function vae(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=$o.call(Array(t.indent+1)," ");else return null;return{base:r,prev:$o.call(Array(e+1),r)}}s(vae,"getIndent");function KI(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+$o.call(t,","+r)+`
`+e.prev}s(KI,"indentedJoin");function Jh(t,e){var r=JI(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=gi(t,o)?e(t[o],t):""}var i=typeof FI=="function"?FI(t):[],a;if($c){a={};for(var c=0;c<i.length;c++)a["$"+i[c]]=i[c]}for(var l in t)gi(t,l)&&(r&&String(Number(l))===l&&l<t.length||$c&&a["$"+l]instanceof Symbol||(_L.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof FI=="function")for(var d=0;d<i.length;d++)bL.call(t,i[d])&&n.push("["+e(i[d])+"]: "+e(t[i[d]],t));return n}s(Jh,"arrObjKeys")});var PL=Ue((z5e,IL)=>{"use strict";var _ae=Ud(),bae=Zs(),Wh=s(function(t,e,r){for(var n=t,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,r||(o.next=t.next,t.next=o),o},"listGetNode"),wae=s(function(t,e){if(t){var r=Wh(t,e);return r&&r.value}},"listGet"),Sae=s(function(t,e,r){var n=Wh(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},"listSet"),xae=s(function(t,e){return t?!!Wh(t,e):!1},"listHas"),Tae=s(function(t,e){if(t)return Wh(t,e,!0)},"listDelete");IL.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new bae("Side channel does not contain "+_ae(n))},"assert"),delete:s(function(n){var o=e&&e.next,i=Tae(e,n);return i&&o&&o===i&&(e=void 0),!!i},"delete"),get:s(function(n){return wae(e,n)},"get"),has:s(function(n){return xae(e,n)},"has"),set:s(function(n,o){e||(e={next:void 0}),Sae(e,n,o)},"set")};return r},"getSideChannelList")});var XI=Ue((L5e,AL)=>{"use strict";AL.exports=Object});var OL=Ue((q5e,CL)=>{"use strict";CL.exports=Error});var RL=Ue((F5e,$L)=>{"use strict";$L.exports=EvalError});var DL=Ue((B5e,NL)=>{"use strict";NL.exports=RangeError});var ML=Ue((V5e,jL)=>{"use strict";jL.exports=ReferenceError});var UL=Ue((H5e,zL)=>{"use strict";zL.exports=SyntaxError});var qL=Ue((Z5e,LL)=>{"use strict";LL.exports=URIError});var BL=Ue((J5e,FL)=>{"use strict";FL.exports=Math.abs});var HL=Ue((K5e,VL)=>{"use strict";VL.exports=Math.floor});var JL=Ue((G5e,ZL)=>{"use strict";ZL.exports=Math.max});var GL=Ue((W5e,KL)=>{"use strict";KL.exports=Math.min});var QL=Ue((Q5e,WL)=>{"use strict";WL.exports=Math.pow});var YL=Ue((X5e,XL)=>{"use strict";XL.exports=Math.round});var t4=Ue((Y5e,e4)=>{"use strict";e4.exports=Number.isNaN||s(function(e){return e!==e},"isNaN")});var n4=Ue((t9e,r4)=>{"use strict";var Eae=t4();r4.exports=s(function(e){return Eae(e)||e===0?e:e<0?-1:1},"sign")});var i4=Ue((n9e,o4)=>{"use strict";o4.exports=Object.getOwnPropertyDescriptor});var YI=Ue((o9e,s4)=>{"use strict";var Qh=i4();if(Qh)try{Qh([],"length")}catch{Qh=null}s4.exports=Qh});var c4=Ue((i9e,a4)=>{"use strict";var Xh=Object.defineProperty||!1;if(Xh)try{Xh({},"a",{value:1})}catch{Xh=!1}a4.exports=Xh});var l4=Ue((s9e,u4)=>{"use strict";u4.exports=s(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==o||c.enumerable!==!0)return!1}return!0},"hasSymbols")});var m4=Ue((c9e,p4)=>{"use strict";var d4=typeof Symbol<"u"&&Symbol,kae=l4();p4.exports=s(function(){return typeof d4!="function"||typeof Symbol!="function"||typeof d4("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:kae()},"hasNativeSymbols")});var eP=Ue((l9e,f4)=>{"use strict";f4.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var tP=Ue((d9e,h4)=>{"use strict";var Iae=XI();h4.exports=Iae.getPrototypeOf||null});var v4=Ue((p9e,y4)=>{"use strict";var Pae="Function.prototype.bind called on incompatible ",Aae=Object.prototype.toString,Cae=Math.max,Oae="[object Function]",g4=s(function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},"concatty"),$ae=s(function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},"slicy"),Rae=s(function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},"joiny");y4.exports=s(function(e){var r=this;if(typeof r!="function"||Aae.apply(r)!==Oae)throw new TypeError(Pae+r);for(var n=$ae(arguments,1),o,i=s(function(){if(this instanceof o){var p=r.apply(this,g4(n,arguments));return Object(p)===p?p:this}return r.apply(e,g4(n,arguments))},"binder"),a=Cae(0,r.length-n.length),c=[],l=0;l<a;l++)c[l]="$"+l;if(o=Function("binder","return function ("+Rae(c,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var d=s(function(){},"Empty");d.prototype=r.prototype,o.prototype=new d,d.prototype=null}return o},"bind")});var Ld=Ue((f9e,_4)=>{"use strict";var Nae=v4();_4.exports=Function.prototype.bind||Nae});var Yh=Ue((h9e,b4)=>{"use strict";b4.exports=Function.prototype.call});var rP=Ue((g9e,w4)=>{"use strict";w4.exports=Function.prototype.apply});var x4=Ue((y9e,S4)=>{"use strict";S4.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var E4=Ue((v9e,T4)=>{"use strict";var Dae=Ld(),jae=rP(),Mae=Yh(),zae=x4();T4.exports=zae||Dae.call(Mae,jae)});var nP=Ue((_9e,k4)=>{"use strict";var Uae=Ld(),Lae=Zs(),qae=Yh(),Fae=E4();k4.exports=s(function(e){if(e.length<1||typeof e[0]!="function")throw new Lae("a function is required");return Fae(Uae,qae,e)},"callBindBasic")});var $4=Ue((w9e,O4)=>{"use strict";var Bae=nP(),I4=YI(),A4;try{A4=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var oP=!!A4&&I4&&I4(Object.prototype,"__proto__"),C4=Object,P4=C4.getPrototypeOf;O4.exports=oP&&typeof oP.get=="function"?Bae([oP.get]):typeof P4=="function"?s(function(e){return P4(e==null?e:C4(e))},"getDunder"):!1});var M4=Ue((x9e,j4)=>{"use strict";var R4=eP(),N4=tP(),D4=$4();j4.exports=R4?s(function(e){return R4(e)},"getProto"):N4?s(function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return N4(e)},"getProto"):D4?s(function(e){return D4(e)},"getProto"):null});var U4=Ue((E9e,z4)=>{"use strict";var Vae=Function.prototype.call,Hae=Object.prototype.hasOwnProperty,Zae=Ld();z4.exports=Zae.call(Vae,Hae)});var rg=Ue((k9e,H4)=>{"use strict";var pt,Jae=XI(),Kae=OL(),Gae=RL(),Wae=DL(),Qae=ML(),jc=UL(),Dc=Zs(),Xae=qL(),Yae=BL(),ece=HL(),tce=JL(),rce=GL(),nce=QL(),oce=YL(),ice=n4(),B4=Function,iP=s(function(t){try{return B4('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),qd=YI(),sce=c4(),sP=s(function(){throw new Dc},"throwTypeError"),ace=qd?(function(){try{return arguments.callee,sP}catch{try{return qd(arguments,"callee").get}catch{return sP}}})():sP,Rc=m4()(),kr=M4(),cce=tP(),uce=eP(),V4=rP(),Fd=Yh(),Nc={},lce=typeof Uint8Array>"u"||!kr?pt:kr(Uint8Array),Ks={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?pt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?pt:ArrayBuffer,"%ArrayIteratorPrototype%":Rc&&kr?kr([][Symbol.iterator]()):pt,"%AsyncFromSyncIteratorPrototype%":pt,"%AsyncFunction%":Nc,"%AsyncGenerator%":Nc,"%AsyncGeneratorFunction%":Nc,"%AsyncIteratorPrototype%":Nc,"%Atomics%":typeof Atomics>"u"?pt:Atomics,"%BigInt%":typeof BigInt>"u"?pt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?pt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?pt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?pt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Kae,"%eval%":eval,"%EvalError%":Gae,"%Float16Array%":typeof Float16Array>"u"?pt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?pt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?pt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?pt:FinalizationRegistry,"%Function%":B4,"%GeneratorFunction%":Nc,"%Int8Array%":typeof Int8Array>"u"?pt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?pt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?pt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Rc&&kr?kr(kr([][Symbol.iterator]())):pt,"%JSON%":typeof JSON=="object"?JSON:pt,"%Map%":typeof Map>"u"?pt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Rc||!kr?pt:kr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Jae,"%Object.getOwnPropertyDescriptor%":qd,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?pt:Promise,"%Proxy%":typeof Proxy>"u"?pt:Proxy,"%RangeError%":Wae,"%ReferenceError%":Qae,"%Reflect%":typeof Reflect>"u"?pt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?pt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Rc||!kr?pt:kr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?pt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Rc&&kr?kr(""[Symbol.iterator]()):pt,"%Symbol%":Rc?Symbol:pt,"%SyntaxError%":jc,"%ThrowTypeError%":ace,"%TypedArray%":lce,"%TypeError%":Dc,"%Uint8Array%":typeof Uint8Array>"u"?pt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?pt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?pt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?pt:Uint32Array,"%URIError%":Xae,"%WeakMap%":typeof WeakMap>"u"?pt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?pt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?pt:WeakSet,"%Function.prototype.call%":Fd,"%Function.prototype.apply%":V4,"%Object.defineProperty%":sce,"%Object.getPrototypeOf%":cce,"%Math.abs%":Yae,"%Math.floor%":ece,"%Math.max%":tce,"%Math.min%":rce,"%Math.pow%":nce,"%Math.round%":oce,"%Math.sign%":ice,"%Reflect.getPrototypeOf%":uce};if(kr)try{null.error}catch(t){L4=kr(kr(t)),Ks["%Error.prototype%"]=L4}var L4,dce=s(function t(e){var r;if(e==="%AsyncFunction%")r=iP("async function () {}");else if(e==="%GeneratorFunction%")r=iP("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=iP("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&kr&&(r=kr(o.prototype))}return Ks[e]=r,r},"doEval"),q4={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Bd=Ld(),eg=U4(),pce=Bd.call(Fd,Array.prototype.concat),mce=Bd.call(V4,Array.prototype.splice),F4=Bd.call(Fd,String.prototype.replace),tg=Bd.call(Fd,String.prototype.slice),fce=Bd.call(Fd,RegExp.prototype.exec),hce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,gce=/\\(\\)?/g,yce=s(function(e){var r=tg(e,0,1),n=tg(e,-1);if(r==="%"&&n!=="%")throw new jc("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new jc("invalid intrinsic syntax, expected opening `%`");var o=[];return F4(e,hce,function(i,a,c,l){o[o.length]=c?F4(l,gce,"$1"):a||i}),o},"stringToPath"),vce=s(function(e,r){var n=e,o;if(eg(q4,n)&&(o=q4[n],n="%"+o[0]+"%"),eg(Ks,n)){var i=Ks[n];if(i===Nc&&(i=dce(n)),typeof i>"u"&&!r)throw new Dc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new jc("intrinsic "+e+" does not exist!")},"getBaseIntrinsic");H4.exports=s(function(e,r){if(typeof e!="string"||e.length===0)throw new Dc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Dc('"allowMissing" argument must be a boolean');if(fce(/^%?[^%]*%?$/,e)===null)throw new jc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=yce(e),o=n.length>0?n[0]:"",i=vce("%"+o+"%",r),a=i.name,c=i.value,l=!1,d=i.alias;d&&(o=d[0],mce(n,pce([0,1],d)));for(var p=1,m=!0;p<n.length;p+=1){var h=n[p],y=tg(h,0,1),g=tg(h,-1);if((y==='"'||y==="'"||y==="`"||g==='"'||g==="'"||g==="`")&&y!==g)throw new jc("property names with quotes must have matching quotes");if((h==="constructor"||!m)&&(l=!0),o+="."+h,a="%"+o+"%",eg(Ks,a))c=Ks[a];else if(c!=null){if(!(h in c)){if(!r)throw new Dc("base intrinsic for "+e+" exists, but the property is not available.");return}if(qd&&p+1>=n.length){var f=qd(c,h);m=!!f,m&&"get"in f&&!("originalValue"in f.get)?c=f.get:c=c[h]}else m=eg(c,h),c=c[h];m&&!l&&(Ks[a]=c)}}return c},"GetIntrinsic")});var aP=Ue((P9e,K4)=>{"use strict";var Z4=rg(),J4=nP(),_ce=J4([Z4("%String.prototype.indexOf%")]);K4.exports=s(function(e,r){var n=Z4(e,!!r);return typeof n=="function"&&_ce(e,".prototype.")>-1?J4([n]):n},"callBoundIntrinsic")});var cP=Ue((C9e,W4)=>{"use strict";var bce=rg(),Vd=aP(),wce=Ud(),Sce=Zs(),G4=bce("%Map%",!0),xce=Vd("Map.prototype.get",!0),Tce=Vd("Map.prototype.set",!0),Ece=Vd("Map.prototype.has",!0),kce=Vd("Map.prototype.delete",!0),Ice=Vd("Map.prototype.size",!0);W4.exports=!!G4&&s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Sce("Side channel does not contain "+wce(n))},"assert"),delete:s(function(n){if(e){var o=kce(e,n);return Ice(e)===0&&(e=void 0),o}return!1},"delete"),get:s(function(n){if(e)return xce(e,n)},"get"),has:s(function(n){return e?Ece(e,n):!1},"has"),set:s(function(n,o){e||(e=new G4),Tce(e,n,o)},"set")};return r},"getSideChannelMap")});var X4=Ue(($9e,Q4)=>{"use strict";var Pce=rg(),og=aP(),Ace=Ud(),ng=cP(),Cce=Zs(),Mc=Pce("%WeakMap%",!0),Oce=og("WeakMap.prototype.get",!0),$ce=og("WeakMap.prototype.set",!0),Rce=og("WeakMap.prototype.has",!0),Nce=og("WeakMap.prototype.delete",!0);Q4.exports=Mc?s(function(){var e,r,n={assert:s(function(o){if(!n.has(o))throw new Cce("Side channel does not contain "+Ace(o))},"assert"),delete:s(function(o){if(Mc&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Nce(e,o)}else if(ng&&r)return r.delete(o);return!1},"delete"),get:s(function(o){return Mc&&o&&(typeof o=="object"||typeof o=="function")&&e?Oce(e,o):r&&r.get(o)},"get"),has:s(function(o){return Mc&&o&&(typeof o=="object"||typeof o=="function")&&e?Rce(e,o):!!r&&r.has(o)},"has"),set:s(function(o,i){Mc&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Mc),$ce(e,o,i)):ng&&(r||(r=ng()),r.set(o,i))},"set")};return n},"getSideChannelWeakMap"):ng});var eq=Ue((N9e,Y4)=>{"use strict";var Dce=Zs(),jce=Ud(),Mce=PL(),zce=cP(),Uce=X4(),Lce=Uce||zce||Mce;Y4.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Dce("Side channel does not contain "+jce(n))},"assert"),delete:s(function(n){return!!e&&e.delete(n)},"delete"),get:s(function(n){return e&&e.get(n)},"get"),has:s(function(n){return!!e&&e.has(n)},"has"),set:s(function(n,o){e||(e=Lce()),e.set(n,o)},"set")};return r},"getSideChannel")});var ig=Ue((j9e,tq)=>{"use strict";var qce=String.prototype.replace,Fce=/%20/g,uP={RFC1738:"RFC1738",RFC3986:"RFC3986"};tq.exports={default:uP.RFC3986,formatters:{RFC1738:s(function(t){return qce.call(t,Fce,"+")},"RFC1738"),RFC3986:s(function(t){return String(t)},"RFC3986")},RFC1738:uP.RFC1738,RFC3986:uP.RFC3986}});var pP=Ue((z9e,nq)=>{"use strict";var Bce=ig(),lP=Object.prototype.hasOwnProperty,Gs=Array.isArray,Ro=(function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Vce=s(function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Gs(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);r.obj[r.prop]=o}}},"compactQueue"),rq=s(function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},"arrayToObject"),Hce=s(function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Gs(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!lP.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return Gs(e)&&!Gs(r)&&(o=rq(e,n)),Gs(e)&&Gs(r)?(r.forEach(function(i,a){if(lP.call(e,a)){var c=e[a];c&&typeof c=="object"&&i&&typeof i=="object"?e[a]=t(c,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var c=r[a];return lP.call(i,a)?i[a]=t(i[a],c,n):i[a]=c,i},o)},"merge"),Zce=s(function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},"assignSingleSource"),Jce=s(function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},"decode"),dP=1024,Kce=s(function(e,r,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var c="",l=0;l<a.length;l+=dP){for(var d=a.length>=dP?a.slice(l,l+dP):a,p=[],m=0;m<d.length;++m){var h=d.charCodeAt(m);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===Bce.RFC1738&&(h===40||h===41)){p[p.length]=d.charAt(m);continue}if(h<128){p[p.length]=Ro[h];continue}if(h<2048){p[p.length]=Ro[192|h>>6]+Ro[128|h&63];continue}if(h<55296||h>=57344){p[p.length]=Ro[224|h>>12]+Ro[128|h>>6&63]+Ro[128|h&63];continue}m+=1,h=65536+((h&1023)<<10|d.charCodeAt(m)&1023),p[p.length]=Ro[240|h>>18]+Ro[128|h>>12&63]+Ro[128|h>>6&63]+Ro[128|h&63]}c+=p.join("")}return c},"encode"),Gce=s(function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var i=r[o],a=i.obj[i.prop],c=Object.keys(a),l=0;l<c.length;++l){var d=c[l],p=a[d];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:a,prop:d}),n.push(p))}return Vce(r),e},"compact"),Wce=s(function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},"isRegExp"),Qce=s(function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},"isBuffer"),Xce=s(function(e,r){return[].concat(e,r)},"combine"),Yce=s(function(e,r){if(Gs(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)},"maybeMap");nq.exports={arrayToObject:rq,assign:Zce,combine:Xce,compact:Gce,decode:Jce,encode:Kce,isBuffer:Qce,isRegExp:Wce,maybeMap:Yce,merge:Hce}});var uq=Ue((L9e,cq)=>{"use strict";var iq=eq(),sg=pP(),Hd=ig(),eue=Object.prototype.hasOwnProperty,sq={brackets:s(function(e){return e+"[]"},"brackets"),comma:"comma",indices:s(function(e,r){return e+"["+r+"]"},"indices"),repeat:s(function(e){return e},"repeat")},No=Array.isArray,tue=Array.prototype.push,aq=s(function(t,e){tue.apply(t,No(e)?e:[e])},"pushToArray"),rue=Date.prototype.toISOString,oq=Hd.default,br={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sg.encode,encodeValuesOnly:!1,filter:void 0,format:oq,formatter:Hd.formatters[oq],indices:!1,serializeDate:s(function(e){return rue.call(e)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},nue=s(function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},"isNonNullishPrimitive"),mP={},oue=s(function t(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b){for(var S=e,k=b,R=0,O=!1;(k=k.get(mP))!==void 0&&!O;){var C=k.get(e);if(R+=1,typeof C<"u"){if(C===R)throw new RangeError("Cyclic object value");O=!0}typeof k.get(mP)>"u"&&(R=0)}if(typeof p=="function"?S=p(r,S):S instanceof Date?S=y(S):n==="comma"&&No(S)&&(S=sg.maybeMap(S,function(Xe){return Xe instanceof Date?y(Xe):Xe})),S===null){if(a)return d&&!_?d(r,br.encoder,w,"key",g):r;S=""}if(nue(S)||sg.isBuffer(S)){if(d){var $=_?r:d(r,br.encoder,w,"key",g);return[f($)+"="+f(d(S,br.encoder,w,"value",g))]}return[f(r)+"="+f(String(S))]}var P=[];if(typeof S>"u")return P;var N;if(n==="comma"&&No(S))_&&d&&(S=sg.maybeMap(S,d)),N=[{value:S.length>0?S.join(",")||null:void 0}];else if(No(p))N=p;else{var j=Object.keys(S);N=m?j.sort(m):j}var W=l?String(r).replace(/\./g,"%2E"):String(r),Z=o&&No(S)&&S.length===1?W+"[]":W;if(i&&No(S)&&S.length===0)return Z+"[]";for(var F=0;F<N.length;++F){var Y=N[F],re=typeof Y=="object"&&Y&&typeof Y.value<"u"?Y.value:S[Y];if(!(c&&re===null)){var ie=h&&l?String(Y).replace(/\./g,"%2E"):String(Y),be=No(S)?typeof n=="function"?n(Z,ie):Z:Z+(h?"."+ie:"["+ie+"]");b.set(e,R);var Te=iq();Te.set(mP,b),aq(P,t(re,be,n,o,i,a,c,l,n==="comma"&&_&&No(S)?null:d,p,m,h,y,g,f,_,w,Te))}}return P},"stringify"),iue=s(function(e){if(!e)return br;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||br.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Hd.default;if(typeof e.format<"u"){if(!eue.call(Hd.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Hd.formatters[n],i=br.filter;(typeof e.filter=="function"||No(e.filter))&&(i=e.filter);var a;if(e.arrayFormat in sq?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=br.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:br.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:br.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:br.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:br.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?br.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:br.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:br.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:br.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:br.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:br.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:br.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:br.strictNullHandling}},"normalizeStringifyOptions");cq.exports=function(t,e){var r=t,n=iue(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):No(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof r!="object"||r===null)return"";var c=sq[n.arrayFormat],l=c==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var d=iq(),p=0;p<o.length;++p){var m=o[p],h=r[m];n.skipNulls&&h===null||aq(a,oue(h,m,c,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var y=a.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}});var mq=Ue((F9e,pq)=>{"use strict";var Ws=pP(),fP=Object.prototype.hasOwnProperty,lq=Array.isArray,nr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Ws.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},sue=s(function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),dq=s(function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},"parseArrayValue"),aue="utf8=%26%2310003%3B",cue="utf8=%E2%9C%93",uue=s(function(e,r){var n={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=o.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&a.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var c=-1,l,d=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===cue?d="utf-8":a[l]===aue&&(d="iso-8859-1"),c=l,l=a.length);for(l=0;l<a.length;++l)if(l!==c){var p=a[l],m=p.indexOf("]="),h=m===-1?p.indexOf("="):m+1,y,g;h===-1?(y=r.decoder(p,nr.decoder,d,"key"),g=r.strictNullHandling?null:""):(y=r.decoder(p.slice(0,h),nr.decoder,d,"key"),g=Ws.maybeMap(dq(p.slice(h+1),r,lq(n[y])?n[y].length:0),function(_){return r.decoder(_,nr.decoder,d,"value")})),g&&r.interpretNumericEntities&&d==="iso-8859-1"&&(g=sue(String(g))),p.indexOf("[]=")>-1&&(g=lq(g)?[g]:g);var f=fP.call(n,y);f&&r.duplicates==="combine"?n[y]=Ws.combine(n[y],g):(!f||r.duplicates==="last")&&(n[y]=g)}return n},"parseQueryStringValues"),lue=s(function(t,e,r,n){var o=0;if(t.length>0&&t[t.length-1]==="[]"){var i=t.slice(0,-1).join("");o=Array.isArray(e)&&e[i]?e[i].length:0}for(var a=n?e:dq(e,r,o),c=t.length-1;c>=0;--c){var l,d=t[c];if(d==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:Ws.combine([],a);else{l=r.plainObjects?{__proto__:null}:{};var p=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,m=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,h=parseInt(m,10);!r.parseArrays&&m===""?l={0:a}:!isNaN(h)&&d!==m&&String(h)===m&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[],l[h]=a):m!=="__proto__"&&(l[m]=a)}a=l}return a},"parseObject"),due=s(function(e,r,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(i),d=l?i.slice(0,l.index):i,p=[];if(d){if(!n.plainObjects&&fP.call(Object.prototype,d)&&!n.allowPrototypes)return;p.push(d)}for(var m=0;n.depth>0&&(l=c.exec(i))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&fP.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");p.push("["+i.slice(l.index)+"]")}return lue(p,r,n,o)}},"parseQueryStringKeys"),pue=s(function(e){if(!e)return nr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?nr.charset:e.charset,n=typeof e.duplicates>"u"?nr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:nr.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:nr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:nr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:nr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:nr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:nr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:nr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:nr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:nr.decoder,delimiter:typeof e.delimiter=="string"||Ws.isRegExp(e.delimiter)?e.delimiter:nr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:nr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:nr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:nr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:nr.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:nr.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:nr.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},"normalizeParseOptions");pq.exports=function(t,e){var r=pue(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?uue(t,r):t,o=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),a=0;a<i.length;++a){var c=i[a],l=due(c,n[c],r,typeof t=="string");o=Ws.merge(o,l,r)}return r.allowSparse===!0?o:Ws.compact(o)}});var hq=Ue((V9e,fq)=>{"use strict";var mue=uq(),fue=mq(),hue=ig();fq.exports={formats:hue,parse:fue,stringify:mue}});var Gg=s((t,e,r)=>(n,o)=>{let i=-1;return a(0);async function a(c){if(c<=i)throw new Error("next() called multiple times");i=c;let l,d=!1,p;if(t[c]?(p=t[c][0][0],n.req.routeIndex=c):p=c===t.length&&o||void 0,p)try{l=await p(n,()=>a(c+1))}catch(m){if(m instanceof Error&&e)n.error=m,l=await e(m,n),d=!0;else throw m}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||d)&&(n.res=l),n}},"compose");var kp=class extends Error{static{s(this,"HTTPException")}res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var tA=Symbol();var rA=s(async(t,e=Object.create(null))=>{let{all:r=!1,dot:n=!1}=e,i=(t instanceof Ip?t.raw.headers:t.headers).get("Content-Type");return i?.startsWith("multipart/form-data")||i?.startsWith("application/x-www-form-urlencoded")?w5(t,{all:r,dot:n}):{}},"parseBody");async function w5(t,e){let r=await t.formData();return r?S5(r,e):{}}s(w5,"parseFormData");function S5(t,e){let r=Object.create(null);return t.forEach((n,o)=>{e.all||o.endsWith("[]")?x5(r,o,n):r[o]=n}),e.dot&&Object.entries(r).forEach(([n,o])=>{n.includes(".")&&(T5(r,n,o),delete r[n])}),r}s(S5,"convertFormDataToBodyData");var x5=s((t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},"handleParsingAllValues"),T5=s((t,e,r)=>{let n=t,o=e.split(".");o.forEach((i,a)=>{a===o.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},"handleParsingNestedValues");var Qg=s(t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},"splitPath"),nA=s(t=>{let{groups:e,path:r}=E5(t),n=Qg(r);return k5(n,e)},"splitRoutingPath"),E5=s(t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,n)=>{let o=`@${n}`;return e.push([o,r]),o}),{groups:e,path:t}},"extractGroupsFromPath"),k5=s((t,e)=>{for(let r=e.length-1;r>=0;r--){let[n]=e[r];for(let o=t.length-1;o>=0;o--)if(t[o].includes(n)){t[o]=t[o].replace(n,e[r][1]);break}}return t},"replaceGroupMarks"),Pp={},oA=s((t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${t}#${e}`;return Pp[n]||(r[2]?Pp[n]=e&&e[0]!==":"&&e[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:Pp[n]=[t,r[1],!0]),Pp[n]}return null},"getPattern"),aa=s((t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},"tryDecode"),I5=s(t=>aa(t,decodeURI),"tryDecodeURI"),Xg=s(t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),n=r;for(;n<e.length;n++){let o=e.charCodeAt(n);if(o===37){let i=e.indexOf("?",n),a=e.slice(r,i===-1?void 0:i);return I5(a.includes("%25")?a.replace(/%25/g,"%2525"):a)}else if(o===63)break}return e.slice(r,n)},"getPath");var iA=s(t=>{let e=Xg(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},"getPathNoStrict"),vs=s((t,e,...r)=>(r.length&&(e=vs(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),"mergePath"),Ap=s(t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],n="";return e.forEach(o=>{if(o!==""&&!/\:/.test(o))n+="/"+o;else if(/\:/.test(o))if(/\?/.test(o)){r.length===0&&n===""?r.push("/"):r.push(n);let i=o.replace("?","");n+="/"+i,r.push(n)}else n+="/"+o}),r.filter((o,i,a)=>a.indexOf(o)===i)},"checkOptionalParameter"),Wg=s(t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?aa(t,ou):t):t,"_decodeURI"),sA=s((t,e,r)=>{let n;if(!r&&e&&!/[%+]/.test(e)){let a=t.indexOf("?",8);if(a===-1)return;for(t.startsWith(e,a+1)||(a=t.indexOf(`&${e}`,a+1));a!==-1;){let c=t.charCodeAt(a+e.length+1);if(c===61){let l=a+e.length+2,d=t.indexOf("&",l);return Wg(t.slice(l,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";a=t.indexOf(`&${e}`,a+1)}if(n=/[%+]/.test(t),!n)return}let o={};n??=/[%+]/.test(t);let i=t.indexOf("?",8);for(;i!==-1;){let a=t.indexOf("&",i+1),c=t.indexOf("=",i);c>a&&a!==-1&&(c=-1);let l=t.slice(i+1,c===-1?a===-1?void 0:a:c);if(n&&(l=Wg(l)),i=a,l==="")continue;let d;c===-1?d="":(d=t.slice(c+1,a===-1?void 0:a),n&&(d=Wg(d))),r?(o[l]&&Array.isArray(o[l])||(o[l]=[]),o[l].push(d)):o[l]??=d}return e?o[e]:o},"_getQueryParam"),aA=sA,cA=s((t,e)=>sA(t,e,!0),"getQueryParams"),ou=decodeURIComponent;var uA=s(t=>aa(t,ou),"tryDecodeURIComponent"),Ip=class{static{s(this,"HonoRequest")}raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#i()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#n(e);return r&&/\%/.test(r)?uA(r):r}#i(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let n=this.#n(this.#t[0][this.routeIndex][1][r]);n!==void 0&&(t[r]=/\%/.test(n)?uA(n):n)}return t}#n(t){return this.#t[1]?this.#t[1][t]:t}query(t){return aA(this.url,t)}queries(t){return cA(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,n)=>{e[n]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await rA(this,t)}#o=s(t=>{let{bodyCache:e,raw:r}=this,n=e[t];if(n)return n;let o=Object.keys(e)[0];return o?e[o].then(i=>(o==="json"&&(i=JSON.stringify(i)),new Response(i)[t]())):e[t]=r[t]()},"#cachedBody");json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[tA](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}};var lA={Stringify:1,BeforeStream:2,Stream:3},P5=s((t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r},"raw");var Yg=s(async(t,e,r,n,o)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let i=t.callbacks;if(!i?.length)return Promise.resolve(t);o?o[0]+=t:o=[t];let a=Promise.all(i.map(c=>c({phase:e,buffer:o,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(l=>Yg(l,e,!1,n,o))).then(()=>o[0]));return r?P5(await a,i):a},"resolveCallback");var A5="text/plain; charset=UTF-8",ey=s((t,e)=>({"Content-Type":t,...e}),"setDefaultContentType"),dA=class{static{s(this,"Context")}#e;#t;env={};#r;finalized=!1;error;#i;#n;#o;#d;#u;#c;#s;#p;#l;constructor(t,e){this.#e=t,e&&(this.#n=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#l=e.path,this.#p=e.matchResult)}get req(){return this.#t??=new Ip(this.#e,this.#l,this.#p),this.#t}get event(){if(this.#n&&"respondWith"in this.#n)return this.#n;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#n)return this.#n;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#s??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let n=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let o of n)t.headers.append("set-cookie",o)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=s((...t)=>(this.#u??=e=>this.html(e),this.#u(...t)),"render");setLayout=s(t=>this.#d=t,"setLayout");getLayout=s(()=>this.#d,"getLayout");setRenderer=s(t=>{this.#u=t},"setRenderer");header=s((t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let n=this.#o?this.#o.headers:this.#s??=new Headers;e===void 0?n.delete(t):r?.append?n.append(t,e):n.set(t,e)},"header");status=s(t=>{this.#i=t},"status");set=s((t,e)=>{this.#r??=new Map,this.#r.set(t,e)},"set");get=s(t=>this.#r?this.#r.get(t):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(t,e,r){let n=this.#o?new Headers(this.#o.headers):this.#s??new Headers;if(typeof e=="object"&&"headers"in e){let i=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[a,c]of i)a.toLowerCase()==="set-cookie"?n.append(a,c):n.set(a,c)}if(r)for(let[i,a]of Object.entries(r))if(typeof a=="string")n.set(i,a);else{n.delete(i);for(let c of a)n.append(i,c)}let o=typeof e=="number"?e:e?.status??this.#i;return new Response(t,{status:o,headers:n})}newResponse=s((...t)=>this.#a(...t),"newResponse");body=s((t,e,r)=>this.#a(t,e,r),"body");text=s((t,e,r)=>!this.#s&&!this.#i&&!e&&!r&&!this.finalized?new Response(t):this.#a(t,e,ey(A5,r)),"text");json=s((t,e,r)=>this.#a(JSON.stringify(t),e,ey("application/json",r)),"json");html=s((t,e,r)=>{let n=s(o=>this.#a(o,e,ey("text/html; charset=UTF-8",r)),"res");return typeof t=="object"?Yg(t,lA.Stringify,!1,{}).then(n):n(t)},"html");redirect=s((t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)},"redirect");notFound=s(()=>(this.#c??=()=>new Response,this.#c(this)),"notFound")};var Ft="ALL",pA="all",mA=["get","post","put","delete","options","patch"],Cp="Can not add a route since the matcher is already built.",Op=class extends Error{static{s(this,"UnsupportedPathError")}};var fA="__COMPOSED_HANDLER";var C5=s(t=>t.text("404 Not Found",404),"notFoundHandler"),hA=s((t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},"errorHandler"),ty=class{static{s(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(t={}){[...mA,pA].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?this.#e=i:this.#i(o,this.#e,i),a.forEach(c=>{this.#i(o,this.#e,c)}),this)}),this.on=(o,i,...a)=>{for(let c of[i].flat()){this.#e=c;for(let l of[o].flat())a.map(d=>{this.#i(l.toUpperCase(),this.#e,d)})}return this},this.use=(o,...i)=>(typeof o=="string"?this.#e=o:(this.#e="*",i.unshift(o)),i.forEach(a=>{this.#i(Ft,this.#e,a)}),this);let{strict:r,...n}=t;Object.assign(this,n),this.getPath=r??!0?t.getPath??Xg:iA}#t(){let t=new ty({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,t.#r=this.#r,t.routes=this.routes,t}#r=C5;errorHandler=hA;route(t,e){let r=this.basePath(t);return e.routes.map(n=>{let o;e.errorHandler===hA?o=n.handler:(o=s(async(i,a)=>(await Gg([],e.errorHandler)(i,()=>n.handler(i,a))).res,"handler"),o[fA]=n.handler),r.#i(n.method,n.path,o)}),this}basePath(t){let e=this.#t();return e._basePath=vs(this._basePath,t),e}onError=s(t=>(this.errorHandler=t,this),"onError");notFound=s(t=>(this.#r=t,this),"notFound");mount(t,e,r){let n,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?n=s(c=>c,"replaceRequest"):n=r.replaceRequest));let i=o?c=>{let l=o(c);return Array.isArray(l)?l:[l]}:c=>{let l;try{l=c.executionCtx}catch{}return[c.env,l]};n||=(()=>{let c=vs(this._basePath,t),l=c==="/"?0:c.length;return d=>{let p=new URL(d.url);return p.pathname=p.pathname.slice(l)||"/",new Request(p,d)}})();let a=s(async(c,l)=>{let d=await e(n(c.req.raw),...i(c));if(d)return d;await l()},"handler");return this.#i(Ft,vs(t,"*"),a),this}#i(t,e,r){t=t.toUpperCase(),e=vs(this._basePath,e);let n={basePath:this._basePath,path:e,method:t,handler:r};this.router.add(t,e,[r,n]),this.routes.push(n)}#n(t,e){if(t instanceof Error)return this.errorHandler(t,e);throw t}#o(t,e,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(t,e,r,"GET")))();let o=this.getPath(t,{env:r}),i=this.router.match(n,o),a=new dA(t,{path:o,matchResult:i,env:r,executionCtx:e,notFoundHandler:this.#r});if(i[0].length===1){let l;try{l=i[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(d){return this.#n(d,a)}return l instanceof Promise?l.then(d=>d||(a.finalized?a.res:this.#r(a))).catch(d=>this.#n(d,a)):l??this.#r(a)}let c=Gg(i[0],this.errorHandler,this.#r);return(async()=>{try{let l=await c(a);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#n(l,a)}})()}fetch=s((t,...e)=>this.#o(t,e[1],e[0],t.method),"fetch");request=s((t,e,r,n)=>t instanceof Request?this.fetch(e?new Request(t,e):t,r,n):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${vs("/",t)}`,e),r,n)),"request");fire=s(()=>{addEventListener("fetch",t=>{t.respondWith(this.#o(t.request,t,void 0,t.request.method))})},"fire")};var $p=[];function ry(t,e){let r=this.buildAllMatchers(),n=s((o,i)=>{let a=r[o]||r[Ft],c=a[2][i];if(c)return c;let l=i.match(a[0]);if(!l)return[[],$p];let d=l.indexOf("",1);return[a[1][d],l]},"match2");return this.match=n,n(t,e)}s(ry,"match");var Rp="[^/]+",iu=".*",su="(?:|/.*)",_s=Symbol(),O5=new Set(".\\+*[^]$()");function $5(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===iu||t===su?1:e===iu||e===su?-1:t===Rp?1:e===Rp?-1:t.length===e.length?t<e?-1:1:e.length-t.length}s($5,"compareKey");var Np=class{static{s(this,"Node")}#e;#t;#r=Object.create(null);insert(t,e,r,n,o){if(t.length===0){if(this.#e!==void 0)throw _s;if(o)return;this.#e=e;return}let[i,...a]=t,c=i==="*"?a.length===0?["","",iu]:["","",Rp]:i==="/*"?["","",su]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(c){let d=c[1],p=c[2]||Rp;if(d&&c[2]&&(p===".*"||(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p))))throw _s;if(l=this.#r[p],!l){if(Object.keys(this.#r).some(m=>m!==iu&&m!==su))throw _s;if(o)return;l=this.#r[p]=new Np,d!==""&&(l.#t=n.varIndex++)}!o&&d!==""&&r.push([d,l.#t])}else if(l=this.#r[i],!l){if(Object.keys(this.#r).some(d=>d.length>1&&d!==iu&&d!==su))throw _s;if(o)return;l=this.#r[i]=new Np}l.insert(a,e,r,n,o)}buildRegExpStr(){let e=Object.keys(this.#r).sort($5).map(r=>{let n=this.#r[r];return(typeof n.#t=="number"?`(${r})@${n.#t}`:O5.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#e=="number"&&e.unshift(`#${this.#e}`),e.length===0?"":e.length===1?e[0]:"(?:"+e.join("|")+")"}};var gA=class{static{s(this,"Trie")}#e={varIndex:0};#t=new Np;insert(t,e,r){let n=[],o=[];for(let a=0;;){let c=!1;if(t=t.replace(/\{[^}]+\}/g,l=>{let d=`@\\${a}`;return o[a]=[d,l],a++,c=!0,d}),!c)break}let i=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=o.length-1;a>=0;a--){let[c]=o[a];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(c)!==-1){i[l]=i[l].replace(c,o[a][1]);break}}return this.#t.insert(i,e,n,this.#e,r),n}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],n=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(o,i,a)=>i!==void 0?(r[++e]=Number(i),"$()"):(a!==void 0&&(n[Number(a)]=++e),"")),[new RegExp(`^${t}`),r,n]}};var R5=[/^$/,[],Object.create(null)],yA=Object.create(null);function vA(t){return yA[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}s(vA,"buildWildcardRegExp");function N5(){yA=Object.create(null)}s(N5,"clearWildcardRegExpCache");function D5(t){let e=new gA,r=[];if(t.length===0)return R5;let n=t.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,p],[m,h])=>d?1:m?-1:p.length-h.length),o=Object.create(null);for(let d=0,p=-1,m=n.length;d<m;d++){let[h,y,g]=n[d];h?o[y]=[g.map(([_])=>[_,Object.create(null)]),$p]:p++;let f;try{f=e.insert(y,p,h)}catch(_){throw _===_s?new Op(y):_}h||(r[p]=g.map(([_,w])=>{let b=Object.create(null);for(w-=1;w>=0;w--){let[S,k]=f[w];b[S]=k}return[_,b]}))}let[i,a,c]=e.buildRegExp();for(let d=0,p=r.length;d<p;d++)for(let m=0,h=r[d].length;m<h;m++){let y=r[d][m]?.[1];if(!y)continue;let g=Object.keys(y);for(let f=0,_=g.length;f<_;f++)y[g[f]]=c[y[g[f]]]}let l=[];for(let d in a)l[d]=r[a[d]];return[i,l,o]}s(D5,"buildMatcherFromPreprocessedRoutes");function ca(t,e){if(t){for(let r of Object.keys(t).sort((n,o)=>o.length-n.length))if(vA(r).test(e))return[...t[r]]}}s(ca,"findMiddleware");var Dp=class{static{s(this,"RegExpRouter")}name="RegExpRouter";#e;#t;constructor(){this.#e={[Ft]:Object.create(null)},this.#t={[Ft]:Object.create(null)}}add(t,e,r){let n=this.#e,o=this.#t;if(!n||!o)throw new Error(Cp);n[t]||[n,o].forEach(c=>{c[t]=Object.create(null),Object.keys(c[Ft]).forEach(l=>{c[t][l]=[...c[Ft][l]]})}),e==="/*"&&(e="*");let i=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let c=vA(e);t===Ft?Object.keys(n).forEach(l=>{n[l][e]||=ca(n[l],e)||ca(n[Ft],e)||[]}):n[t][e]||=ca(n[t],e)||ca(n[Ft],e)||[],Object.keys(n).forEach(l=>{(t===Ft||t===l)&&Object.keys(n[l]).forEach(d=>{c.test(d)&&n[l][d].push([r,i])})}),Object.keys(o).forEach(l=>{(t===Ft||t===l)&&Object.keys(o[l]).forEach(d=>c.test(d)&&o[l][d].push([r,i]))});return}let a=Ap(e)||[e];for(let c=0,l=a.length;c<l;c++){let d=a[c];Object.keys(o).forEach(p=>{(t===Ft||t===p)&&(o[p][d]||=[...ca(n[p],d)||ca(n[Ft],d)||[]],o[p][d].push([r,i-l+c+1]))})}}match=ry;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,N5(),t}#r(t){let e=[],r=t===Ft;return[this.#e,this.#t].forEach(n=>{let o=n[t]?Object.keys(n[t]).map(i=>[i,n[t][i]]):[];o.length!==0?(r||=!0,e.push(...o)):t!==Ft&&e.push(...Object.keys(n[Ft]).map(i=>[i,n[Ft][i]]))}),r?D5(e):null}};var ny=class{static{s(this,"SmartRouter")}name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(Cp);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,n=this.#t,o=r.length,i=0,a;for(;i<o;i++){let c=r[i];try{for(let l=0,d=n.length;l<d;l++)c.add(...n[l]);a=c.match(t,e)}catch(l){if(l instanceof Op)continue;throw l}this.match=c.match.bind(c),this.#e=[c],this.#t=void 0;break}if(i===o)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};var au=Object.create(null),oy=class{static{s(this,"Node")}#e;#t;#r;#i=0;#n=au;constructor(t,e,r){if(this.#t=r||Object.create(null),this.#e=[],t&&e){let n=Object.create(null);n[t]={handler:e,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(t,e,r){this.#i=++this.#i;let n=this,o=nA(e),i=[];for(let a=0,c=o.length;a<c;a++){let l=o[a],d=o[a+1],p=oA(l,d),m=Array.isArray(p)?p[0]:l;if(m in n.#t){n=n.#t[m],p&&i.push(p[1]);continue}n.#t[m]=new oy,p&&(n.#r.push(p),i.push(p[1])),n=n.#t[m]}return n.#e.push({[t]:{handler:r,possibleKeys:i.filter((a,c,l)=>l.indexOf(a)===c),score:this.#i}}),n}#o(t,e,r,n){let o=[];for(let i=0,a=t.#e.length;i<a;i++){let c=t.#e[i],l=c[e]||c[Ft],d={};if(l!==void 0&&(l.params=Object.create(null),o.push(l),r!==au||n&&n!==au))for(let p=0,m=l.possibleKeys.length;p<m;p++){let h=l.possibleKeys[p],y=d[l.score];l.params[h]=n?.[h]&&!y?n[h]:r[h]??n?.[h],d[l.score]=!0}}return o}search(t,e){let r=[];this.#n=au;let o=[this],i=Qg(e),a=[];for(let c=0,l=i.length;c<l;c++){let d=i[c],p=c===l-1,m=[];for(let h=0,y=o.length;h<y;h++){let g=o[h],f=g.#t[d];f&&(f.#n=g.#n,p?(f.#t["*"]&&r.push(...this.#o(f.#t["*"],t,g.#n)),r.push(...this.#o(f,t,g.#n))):m.push(f));for(let _=0,w=g.#r.length;_<w;_++){let b=g.#r[_],S=g.#n===au?{}:{...g.#n};if(b==="*"){let P=g.#t["*"];P&&(r.push(...this.#o(P,t,g.#n)),P.#n=S,m.push(P));continue}let[k,R,O]=b;if(!d&&!(O instanceof RegExp))continue;let C=g.#t[k],$=i.slice(c).join("/");if(O instanceof RegExp){let P=O.exec($);if(P){if(S[R]=P[0],r.push(...this.#o(C,t,g.#n,S)),Object.keys(C.#t).length){C.#n=S;let N=P[0].match(/\//)?.length??0;(a[N]||=[]).push(C)}continue}}(O===!0||O.test(d))&&(S[R]=d,p?(r.push(...this.#o(C,t,S,g.#n)),C.#t["*"]&&r.push(...this.#o(C.#t["*"],t,S,g.#n))):(C.#n=S,m.push(C)))}}o=m.concat(a.shift()??[])}return r.length>1&&r.sort((c,l)=>c.score-l.score),[r.map(({handler:c,params:l})=>[c,l])]}};var iy=class{static{s(this,"TrieRouter")}name="TrieRouter";#e;constructor(){this.#e=new oy}add(t,e,r){let n=Ap(e);if(n){for(let o=0,i=n.length;o<i;o++)this.#e.insert(t,n[o],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}};var Pe=class extends ty{static{s(this,"Hono")}constructor(t={}){super(t),this.router=t.router??new ny({routers:[new Dp,new iy]})}};function j5(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}s(j5,"getColorEnabled");async function _A(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!j5())}s(_A,"getColorEnabledAsync");var M5=s(t=>{let[e,r]=[",","."];return t.map(o=>o.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},"humanize"),z5=s(t=>{let e=Date.now()-t;return M5([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},"time"),U5=s(async t=>{if(await _A())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`},"colorStatus");async function bA(t,e,r,n,o=0,i){let a=e==="<--"?`${e} ${r} ${n}`:`${e} ${r} ${n} ${await U5(o)} ${i}`;t(a)}s(bA,"log");var wA=s((t=console.log)=>s(async function(r,n){let{method:o,url:i}=r.req,a=i.slice(i.indexOf("/",8));await bA(t,"<--",o,a);let c=Date.now();await n(),await bA(t,"-->",o,a,r.res.status,z5(c))},"logger2"),"logger");var sy=class{static{s(this,"SecureLogger")}isDevelopment;isProduction;currentUserId;sensitivePatterns;logBuffer=[];maxBufferSize=1e3;flushInterval=5e3;constructor(){this.isDevelopment=!!(typeof process<"u"&&!1||typeof import.meta<"u"&&import.meta.env?.DEV),this.isProduction=typeof process<"u"||typeof import.meta<"u"&&import.meta.env?.MODE==="production",this.sensitivePatterns=[/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/g,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,/\b(?:\+55\s?)?\(?[1-9]{2}\)?\s?[9]?\d{4}-?\d{4}\b/g,/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,/(?:sk_|eyJ)[a-zA-Z0-9_-]{20,}/g,/password["\s:]+["']?[^"'\s,}]+["']?/gi,/token["\s:]+["']?[^"'\s,}]+["']?/gi,/account["\s:]+["']?\d{6,}["']?/gi],this.isProduction&&setInterval(()=>this.flushBuffer(),this.flushInterval)}setUserId(e){this.currentUserId=e}clearUserId(){this.currentUserId=void 0}sanitizeData(e,r){let n=e;this.sensitivePatterns.forEach(i=>{n=n.replace(i,"[REDACTED]")});let o;return r&&(o=this.sanitizeContextObject(r)),{sanitizedContext:o,sanitizedMessage:n}}sanitizeContextObject(e){let r={};for(let[n,o]of Object.entries(e))if(this.isSensitiveKey(n)&&o)r[n]="[REDACTED]";else if(typeof o=="string"){let a=o;this.sensitivePatterns.forEach(c=>{a=a.replace(c,"[REDACTED]")}),r[n]=a}else typeof o=="object"&&o!==null?r[n]=this.sanitizeContextObject(o):r[n]=o;return this.currentUserId&&!r.userId&&(r.userId=`${this.currentUserId.substring(0,8)}...`),r}isSensitiveKey(e){return["password","token","secret","key","auth","session","email","phone","cpf","cnpj","account","balance","creditcard","card","bank","transaction","amount"].some(n=>e.toLowerCase().includes(n.toLowerCase()))}createLogEntry(e,r,n){let{sanitizedMessage:o,sanitizedContext:i}=this.sanitizeData(r,n);return{context:i,level:e,message:o,sanitized:!0,timestamp:new Date().toISOString()}}writeLog(e){if(this.isDevelopment)switch(e.level){case 0:break;case 1:break;case 2:break;case 3:case 4:break;case 5:break}else this.isProduction&&this.addToBuffer(e)}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>=this.maxBufferSize&&this.flushBuffer()}flushBuffer(){if(this.logBuffer.length===0)return;let e=[...this.logBuffer];this.logBuffer=[];let r=e.filter(n=>n.level>=3);r.length>0&&r.forEach(n=>{})}log(e,r,n){if(!this.isDevelopment&&e===0)return;let o=this.createLogEntry(e,r,n);this.writeLog(o)}debug(e,r){this.log(0,e,r)}info(e,r){this.log(1,e,r)}warn(e,r){this.log(2,e,r)}error(e,r){this.log(3,e,r)}security(e,r){this.log(4,e,r)}audit(e,r){this.log(5,e,r)}voiceCommand(e,r,n){this.info("Voice command processed",{...n,command:e.substring(0,50),confidence:r})}authEvent(e,r,n){this.audit("Authentication event",{...n,event:e,userId:r?`${r.substring(0,8)}...`:void 0})}userAction(e,r,n){this.info("User action",{action:e,component:r,...n})}performance(e,r,n){this.info("Performance metric",{...n,operation:e,duration:r})}getBufferStats(){return{lastFlush:new Date,maxSize:this.maxBufferSize,size:this.logBuffer.length}}forceFlush(){this.flushBuffer()}clear(){this.logBuffer=[],this.currentUserId=void 0}},L=new sy;var SA=new Pe;SA.get("/",async t=>{try{return L.info("Starting calendar channel renewal check"),t.json({success:!0,message:"Calendar channel renewal completed",timestamp:new Date().toISOString(),channelsRenewed:0})}catch(e){return L.error("Calendar channel renewal failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Calendar channel renewal failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var xA=SA;var TA=new Pe;TA.get("/",async t=>{try{return L.info("Starting sync queue cleanup"),t.json({success:!0,message:"Sync queue cleanup completed",timestamp:new Date().toISOString(),itemsDeleted:0})}catch(e){return L.error("Sync queue cleanup failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue cleanup failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var EA=TA;var kA=new Pe;kA.get("/",async t=>{try{return L.info("Starting sync queue processing"),t.json({success:!0,message:"Sync queue processing completed",timestamp:new Date().toISOString(),itemsProcessed:0})}catch(e){return L.error("Sync queue processing failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue processing failed",error:e instanceof Error?e.message:"Unknown error"},500)}});var IA=kA;var cu=new Pe;cu.route("/calendar-channel-renewal",xA);cu.route("/sync-queue-processor",IA);cu.route("/cleanup-sync-queue",EA);cu.get("/health",t=>t.json({status:"healthy",service:"cron-jobs",timestamp:new Date().toISOString(),jobs:[{name:"calendar-channel-renewal",schedule:"0 0 * * *",description:"Renew expiring Google Calendar webhook channels"},{name:"sync-queue-processor",schedule:"*/5 * * * *",description:"Process pending Google Calendar sync queue items"},{name:"cleanup-sync-queue",schedule:"0 2 * * *",description:"Clean up old completed/failed sync queue items"}]}));var PA=cu;var AA=["https://aegiswallet.com","https://www.aegiswallet.com","https://app.aegiswallet.com","http://localhost:3000","http://localhost:5173","http://localhost:8080","http://localhost:8081","http://localhost:8082","https://localhost:3000","https://localhost:5173","https://localhost:8080","https://localhost:8081","https://localhost:8082"],CA=s(async(t,e)=>{let r=t.req.header("Origin");if(AA.includes(r||"")||r?.startsWith("http://localhost:")&&!1||r?.startsWith("https://localhost:")&&!1?t.header("Access-Control-Allow-Origin",r||"*"):t.header("Access-Control-Allow-Origin",AA[0]),t.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.header("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, X-Client-ID"),t.header("Access-Control-Allow-Credentials","true"),t.header("Access-Control-Max-Age","86400"),t.header("Vary","Origin"),t.req.method==="OPTIONS")return t.newResponse(null,204);await e()},"corsMiddleware");gr();An();async function YO(){let t=Date.now();try{return await Kn.execute(M`SELECT 1`),{status:"connected",latencyMs:Date.now()-t}}catch(e){return{status:"disconnected",latencyMs:Date.now()-t,error:e instanceof Error?e.message:"Unknown error"}}}s(YO,"checkDatabaseHealth");function e$(t){t.get("/api/ping",e=>e.json({message:"pong",timestamp:new Date().toISOString(),version:"1.0.0"})),t.get("/api/status",async e=>{let r=await YO(),n=r.status==="connected";return e.json({services:{database:r.status,databaseLatencyMs:r.latencyMs,trpc:"connected",auth:"connected"},status:n?"operational":"degraded",timestamp:new Date().toISOString(),...r.error&&{errors:{database:r.error}}})}),t.get("/api/health",async e=>{let r=await YO();return r.status!=="connected"?e.json({healthy:!1,database:r,timestamp:new Date().toISOString()},503):e.json({healthy:!0,database:r,timestamp:new Date().toISOString()})})}s(e$,"setupApiRoutes");$m();var Qu=null,O3=1e4;async function $3(){if(Qu&&Date.now()-Qu.timestamp<O3)return Qu.database;let t=Date.now(),e=5e3;try{let{getHttpClient:r}=await Promise.resolve().then(()=>(An(),gw)),{sql:n}=await Promise.resolve().then(()=>(gr(),rb)),o=r(),i=new Promise((l,d)=>{setTimeout(()=>d(new Error("Database query timeout")),e)});await Promise.race([o.execute(n`SELECT 1 as health_check`),i]);let c={status:"connected",latency:Date.now()-t};return Qu={database:c,timestamp:Date.now()},c}catch(r){let n=Date.now()-t,o=r instanceof Error?r.message:"Unknown database error";L.error("Database health check failed",{latency:n,error:o});let i={status:"disconnected",latency:n,error:o};return Qu={database:i,timestamp:Date.now()},i}}s($3,"checkDatabaseHealth");function t$(t){t.get("/api/ping",e=>e.json({status:"ok",timestamp:new Date().toISOString()},200)),t.get("/api/health",async e=>{let r=Date.now();try{let n=await $3(),o=n.status==="connected",a={status:o?"ok":"degraded",timestamp:new Date().toISOString(),service:"aegiswallet-server",environment:Ns.NODE_ENV,uptime:process.uptime?.()||0,memory:process.memoryUsage?.()||{},database:{status:n.status,latency:n.latency,...n.error&&{error:n.error}},responseTime:Date.now()-r};return o?e.json(a,200):e.json(a,503)}catch(n){let o=n instanceof Error?n.message:"Unknown error";return L.error("Health check error",{error:o}),e.json({status:"error",timestamp:new Date().toISOString(),service:"aegiswallet-server",environment:Ns.NODE_ENV,uptime:process.uptime?.()||0,memory:process.memoryUsage?.()||{},database:{status:"disconnected",latency:0,error:"Health check failed"},responseTime:Date.now()-r},500)}})}s(t$,"setupHealthRoute");$m();var D3=!0,j3="Bun"in globalThis;function o$(t){D3||(Ns.IS_PRODUCTION&&j3?import("hono/bun").then(({serveStatic:e})=>{Promise.resolve().then(()=>(n$(),r$)).then(({htmlCache:r,staticAssetsCache:n})=>{t.use("/assets/*",n(),e({root:"./dist"})),t.use("/*.html",r(),e({root:"./dist"})),t.use("/*",r(),e({path:"./dist/index.html",rewriteRequestPath:s(o=>o,"rewriteRequestPath")}))})}):Ns.IS_PRODUCTION||t.get("/*",e=>e.req.path.startsWith("/api/")?e.notFound():e.json({api:`http://localhost:${Ns.PORT}`,frontend:"http://localhost:5173",message:"Development mode - Frontend served by Vite dev server",mode:"development"})))}s(o$,"setupStaticRoutes");gr();An();Tr();var M3=300*1e3,i$=100,Ui=new Map;function z3(){if(Ui.size<=i$)return;let e=Array.from(Ui.entries()).sort((r,n)=>r[1].lastAccess-n[1].lastAccess).slice(0,Ui.size-i$);for(let[r]of e)Ui.delete(r)}s(z3,"evictOldestCacheEntries");var Rm=class{static{s(this,"FinancialContextService")}userId;constructor(e){this.userId=e}async getContext(e=!1){let r=this.userId,n=Ui.get(r),o=Date.now();if(!e&&n&&n.expiresAt>o)return n.lastAccess=o,n.context;let i=await this.buildContext();return Ui.set(r,{context:i,expiresAt:o+M3,lastAccess:o}),z3(),i}invalidateCache(){Ui.delete(this.userId)}static clearAllCache(){Ui.clear()}async buildContext(){let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),[o,i,a,c,l]=await Promise.all([this.getAccountBalances(),this.getMonthlyTotals(r,n),this.getCategorySpending(r,n),this.getPendingAlerts(),this.getUpcomingPayments(30)]),d=o.reduce((m,h)=>m+Number(h.balance||0),0),p=o.reduce((m,h)=>m+Number(h.availableBalance||0),0);return{totalBalance:d,availableBalance:p,monthlyIncome:i.income,monthlyExpenses:i.expenses,topCategories:a,pendingAlerts:c,upcomingPayments:l,lastUpdated:e}}async getAccountBalances(){return await Kn.select({id:ae.id,balance:ae.balance,availableBalance:ae.availableBalance,institutionName:ae.institutionName}).from(ae).where(Ee(H(ae.userId,this.userId),H(ae.isActive,!0)))}async getMonthlyTotals(e,r){let n=await Kn.select({transactionType:ne.transactionType,total:Ou(ne.amount)}).from(ne).where(Ee(H(ne.userId,this.userId),ur(ne.transactionDate,e),Xt(ne.transactionDate,r))).groupBy(ne.transactionType),o=0,i=0;for(let a of n){let c=Math.abs(Number(a.total||0));a.transactionType==="credit"?o+=c:a.transactionType==="debit"&&(i+=c)}return{income:o,expenses:i}}async getCategorySpending(e,r){let n=await Kn.select({categoryId:ne.categoryId,categoryName:De.name,total:Ou(ne.amount)}).from(ne).leftJoin(De,H(ne.categoryId,De.id)).where(Ee(H(ne.userId,this.userId),H(ne.transactionType,"debit"),ur(ne.transactionDate,e),Xt(ne.transactionDate,r))).groupBy(ne.categoryId,De.name).orderBy(Nt(Ou(ne.amount))).limit(10),o=n.reduce((i,a)=>i+Math.abs(Number(a.total||0)),0);return n.map(i=>({categoryId:i.categoryId||"uncategorized",categoryName:i.categoryName||"Sem categoria",amount:Math.abs(Number(i.total||0)),percentage:o>0?Math.round(Math.abs(Number(i.total||0))/o*100):0,trend:"stable"}))}async getPendingAlerts(){return(await Kn.select({id:xr.id,insightType:xr.insightType,title:xr.title,impactLevel:xr.impactLevel,recommendation:xr.recommendation}).from(xr).where(Ee(H(xr.userId,this.userId),H(xr.isRead,!1))).orderBy(Nt(xr.createdAt)).limit(5)).map(r=>({id:r.id,type:this.mapInsightTypeToAlertType(r.insightType),message:r.title,severity:r.impactLevel||"medium",actionable:!!r.recommendation}))}mapInsightTypeToAlertType(e){switch(this.normalizeInsightType(e)){case"budget_alert":return"budget_exceeded";case"warning":return"low_balance";case"spending_pattern":return"unusual_spending";case"opportunity":return"payment_due";default:return"unusual_spending"}}normalizeInsightType(e){return e.includes("_")?e:e.replace(/([A-Z])/g,"_$1").toLowerCase()}async getUpcomingPayments(e){let r=new Date,n=new Date;n.setDate(r.getDate()+e);let o=r.toISOString().split("T")[0],i=n.toISOString().split("T")[0];return(await Kn.select({id:Vt.id,description:Vt.description,amount:Vt.amount,scheduledDate:Vt.scheduledDate,recurrenceRule:Vt.recurrenceRule}).from(Vt).where(Ee(H(Vt.userId,this.userId),H(Vt.isActive,!0),H(Vt.executed,!1),ur(Vt.scheduledDate,o),Xt(Vt.scheduledDate,i))).orderBy(Vt.scheduledDate).limit(10)).map(c=>({id:c.id,description:c.description,amount:Math.abs(Number(c.amount)),dueDate:new Date(c.scheduledDate),isRecurring:!!c.recurrenceRule}))}};function Fa(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}s(Fa,"formatBRL");function U3(t){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}s(U3,"formatDateBR");function L3(t){return{up:"\u2191 aumentando",down:"\u2193 diminuindo",stable:"\u2192 est\xE1vel"}[t]}s(L3,"translateTrend");function s$(t){let{totalBalance:e,availableBalance:r,monthlyIncome:n,monthlyExpenses:o,topCategories:i}=t,a=n-o,c=n>0?Math.round(a/n*100):0,l=i.slice(0,5).map((d,p)=>`${p+1}. **${d.categoryName}**: ${Fa(d.amount)} (${d.percentage}% do total, ${L3(d.trend)})`).join(`
`);return`
### Resumo Financeiro
- **Saldo Total**: ${Fa(e)}
- **Saldo Dispon\xEDvel**: ${Fa(r)}
- **Renda do M\xEAs**: ${Fa(n)}
- **Gastos do M\xEAs**: ${Fa(o)}
- **Economia do M\xEAs**: ${Fa(a)} (${c}% da renda)

### Top 5 Categorias de Gasto (M\xEAs Atual)
${l||"Nenhuma transa\xE7\xE3o registrada este m\xEAs."}

### \xDAltima Atualiza\xE7\xE3o
${U3(t.lastUpdated)}
`.trim()}s(s$,"buildFinancialContextBlock");function a$(t){if(t.length===0)return"\u2705 Nenhum alerta ativo no momento.";let e={low:"\u2139\uFE0F",medium:"\u26A0\uFE0F",high:"\u{1F6A8}"};return t.map(r=>`${e[r.severity]} [${r.severity.toUpperCase()}] ${r.message}`).join(`
`)}s(a$,"buildAlertsBlock");var c$=s(()=>{try{return!1}catch{}return!1},"isTestEnvironment"),u$=s(()=>{try{return!0}catch{}return!1},"isProductionEnvironment");var l$=new Set,Nm=s((t,e,r)=>{let n=c$()||u$(),o=r??t;l$.has(o)||n||(l$.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},"deprecated");var vw=[".lcl.dev",".lclstage.dev",".lclclerk.com"],d$=[".accounts.dev",".accountsstage.dev",".accounts.lclclerk.com"],p$=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"];var Ba=s(t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,"isomorphicAtob");var m$=s(t=>typeof btoa<"u"&&typeof btoa=="function"?btoa(t):typeof global<"u"&&global.Buffer?new global.Buffer(t).toString("base64"):t,"isomorphicBtoa");var f$="pk_live_",q3="pk_test_";function h$(t){if(!t.endsWith("$"))return!1;let e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}s(h$,"isValidDecodedPublishableKey");function Li(t,e={}){if(t=t||"",!t||!_w(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!_w(t))throw new Error("Publishable key not valid.");return null}let r=t.startsWith(f$)?"production":"development",n;try{n=Ba(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!h$(n)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return e.proxyUrl?o=e.proxyUrl:r!=="development"&&e.domain&&e.isSatellite&&(o=`clerk.${e.domain}`),{instanceType:r,frontendApi:o}}s(Li,"parsePublishableKey");function _w(t=""){try{if(!(t.startsWith(f$)||t.startsWith(q3)))return!1;let e=t.split("_");if(e.length!==3)return!1;let r=e[2];return r?h$(Ba(r)):!1}catch{return!1}}s(_w,"isPublishableKey");function bw(){let t=new Map;return{isDevOrStagingUrl:s(e=>{if(!e)return!1;let r=typeof e=="string"?e:e.hostname,n=t.get(r);return n===void 0&&(n=p$.some(o=>r.endsWith(o)),t.set(r,n)),n},"isDevOrStagingUrl")}}s(bw,"createDevOrStagingUrlCache");function Dm(t){return t.startsWith("test_")||t.startsWith("sk_test_")}s(Dm,"isDevelopmentFromSecretKey");async function jm(t,e=globalThis.crypto.subtle){let r=new TextEncoder().encode(t),n=await e.digest("sha-1",r);return m$(String.fromCharCode(...new Uint8Array(n))).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}s(jm,"getCookieSuffix");var Mm=s((t,e)=>`${t}_${e}`,"getSuffixedCookieName");var F3={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:s((t,e)=>e<5,"shouldRetry"),retryImmediately:!1,jitter:!0},B3=100,g$=s(async t=>new Promise(e=>setTimeout(e,t)),"sleep"),y$=s((t,e)=>e?t*(1+Math.random()):t,"applyJitter"),V3=s(t=>{let e=0,r=s(()=>{let n=t.initialDelay,o=t.factor,i=n*Math.pow(o,e);return i=y$(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)},"calculateDelayInMs");return async()=>{await g$(r()),e++}},"createExponentialDelayAsyncFn"),zm=s(async(t,e={})=>{let r=0,{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:a,retryImmediately:c,jitter:l,onBeforeRetry:d}={...F3,...e},p=V3({initialDelay:o,maxDelayBetweenRetries:i,factor:a,jitter:l});for(;;)try{return await t()}catch(m){if(r++,!n(m,r))throw m;d&&await d(r),c&&r===1?await g$(y$(B3,l)):await p()}},"retry");function ww(t){return vw.some(e=>t.startsWith("accounts.")&&t.endsWith(e))}s(ww,"isLegacyDevAccountPortalOrigin");function Sw(t){return d$.some(e=>t.endsWith(e)&&!t.endsWith(".clerk"+e))}s(Sw,"isCurrentDevAccountPortalOrigin");function xw(t){function e(r){let n=r??this;if(!n)throw new TypeError(`${t.kind||t.name} type guard requires an error object`);return n instanceof t}return s(e,"typeGuard"),e}s(xw,"createErrorTypeGuard");var Um=class{static{s(this,"ClerkAPIError")}static kind="ClerkApiError";code;message;longMessage;meta;constructor(t){let e={code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t.meta?.param_name,sessionId:t.meta?.session_id,emailAddresses:t.meta?.email_addresses,identifiers:t.meta?.identifiers,zxcvbn:t.meta?.zxcvbn,plan:t.meta?.plan,isPlanUpgradePossible:t.meta?.is_plan_upgrade_possible}};this.code=e.code,this.message=e.message,this.longMessage=e.longMessage,this.meta=e.meta}},SIe=xw(Um);function Tw(t){return new Um(t)}s(Tw,"parseError");var Ew=class v$ extends Error{static{s(this,"ClerkError")}static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(e){super(new.target.formatMessage(new.target.kind,e.message,e.code,e.docsUrl),{cause:e.cause}),Object.setPrototypeOf(this,v$.prototype),this.code=e.code,this.docsUrl=e.docsUrl,this.longMessage=e.longMessage,this.cause=e.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(e,r,n,o){let i="Clerk:",a=new RegExp(i.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${i} ${r.trim()}

(code="${n}")

`,o&&(r+=`

Docs: ${o}`),r}},Lm=class _$ extends Ew{static{s(this,"ClerkAPIResponseError")}static kind="ClerkAPIResponseError";status;clerkTraceId;retryAfter;errors;constructor(e,r){let{data:n,status:o,clerkTraceId:i,retryAfter:a}=r;super({...r,message:e,code:"api_response_error"}),Object.setPrototypeOf(this,_$.prototype),this.status=o,this.clerkTraceId=i,this.retryAfter=a,this.errors=(n||[]).map(c=>new Um(c))}toString(){let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(r=>JSON.stringify(r))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e}static formatMessage(e,r,n,o){return r}},xIe=xw(Lm),H3=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function kw({packageName:t,customMessages:e}){let r=t;function n(i,a){if(!a)return`${r}: ${i}`;let c=i,l=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let d of l){let p=(a[d[1]]||"").toString();c=c.replace(`{{${d[1]}}}`,p)}return`${r}: ${c}`}s(n,"buildMessage");let o={...H3,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}s(kw,"buildErrorThrower");var b$=class w$ extends Ew{static{s(this,"ClerkRuntimeError")}static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(e,r){super({...r,message:e}),Object.setPrototypeOf(this,w$.prototype)}},TIe=xw(b$);function Iw(t){return t&&"clerkError"in t}s(Iw,"isClerkAPIResponseError");var Z3=kw({packageName:"@clerk/backend"}),{isDevOrStagingUrl:iPe}=bw();var S$={InvalidSecretKey:"clerk_key_invalid"},tt={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",RemoteJWKInvalid:"jwk-remote-invalid",RemoteJWKMissing:"jwk-remote-missing",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},vr={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk-generated JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable.",EnsureClockSync:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization)."},bt=class x$ extends Error{static{s(this,"_TokenVerificationError")}constructor({action:e,message:r,reason:n}){super(r),Object.setPrototypeOf(this,x$.prototype),this.reason=n,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};var Xu={TokenInvalid:"token-invalid",InvalidSecretKey:"secret-key-invalid",UnexpectedError:"unexpected-error"},qm=class T$ extends Error{static{s(this,"_MachineTokenVerificationError")}constructor({message:e,code:r,status:n}){super(e),Object.setPrototypeOf(this,T$.prototype),this.code=r,this.status=n}getFullMessage(){return`${this.message} (code=${this.code}, status=${this.status})`}};import{webcrypto as E$}from"node:crypto";var J3=fetch.bind(globalThis),xo={crypto:E$,get fetch(){return J3},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},Pw={parse(t,e){return K3(t,k$,e)},stringify(t,e){return G3(t,k$,e)}},k$={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function K3(t,e,r={}){if(!e.codes){e.codes={};for(let l=0;l<e.chars.length;++l)e.codes[e.chars[l]]=l}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let o=new(r.out??Uint8Array)(n*e.bits/8|0),i=0,a=0,c=0;for(let l=0;l<n;++l){let d=e.codes[t[l]];if(d===void 0)throw new SyntaxError("Invalid character "+t[l]);a=a<<e.bits|d,i+=e.bits,i>=8&&(i-=8,o[c++]=255&a>>i)}if(i>=e.bits||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return o}s(K3,"parse");function G3(t,e,r={}){let{pad:n=!0}=r,o=(1<<e.bits)-1,i="",a=0,c=0;for(let l=0;l<t.length;++l)for(c=c<<8|255&t[l],a+=8;a>e.bits;)a-=e.bits,i+=e.chars[o&c>>a];if(a&&(i+=e.chars[o&c<<e.bits-a]),n)for(;i.length*e.bits&7;)i+="=";return i}s(G3,"stringify");var Cw={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},Aw="RSASSA-PKCS1-v1_5",I$={RS256:Aw,RS384:Aw,RS512:Aw},Ow=Object.keys(Cw);function W3(t){let e=Cw[t],r=I$[t];if(!e||!r)throw new Error(`Unsupported algorithm ${t}, expected one of ${Ow.join(",")}.`);return{hash:{name:Cw[t]},name:I$[t]}}s(W3,"getCryptoAlgorithm");var Q3=s(t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),"isArrayString"),X3=s((t,e)=>{let r=[e].flat().filter(i=>!!i),n=[t].flat().filter(i=>!!i);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(Q3(t)&&!t.some(i=>r.includes(i)))throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}},"assertAudienceClaim"),$w=s(t=>{if(!(typeof t>"u")&&t!=="JWT")throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},"assertHeaderType"),Rw=s(t=>{if(!Ow.includes(t))throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${Ow}.`})},"assertHeaderAlgorithm"),Y3=s(t=>{if(typeof t!="string")throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},"assertSubClaim"),eV=s((t,e)=>{if(!(!t||!e||e.length===0)&&!e.includes(t))throw new bt({reason:tt.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${e}".`})},"assertAuthorizedPartiesClaim"),tV=s((t,e)=>{if(typeof t!="number")throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()<=r.getTime()-e)throw new bt({reason:tt.TokenExpired,message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},"assertExpirationClaim"),rV=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new bt({reason:tt.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertActivationClaim"),nV=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new bt({reason:tt.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertIssuedAtClaim");function oV(t){let e=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=Ba(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n);for(let i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return o}s(oV,"pemToBuffer");function iV(t,e,r){if(typeof t=="object")return xo.crypto.subtle.importKey("jwk",t,e,!1,[r]);let n=oV(t),o=r==="sign"?"pkcs8":"spki";return xo.crypto.subtle.importKey(o,n,e,!1,[r])}s(iV,"importKey");var sV=5*1e3;async function Nw(t,e){let{header:r,signature:n,raw:o}=t,a=new TextEncoder().encode([o.header,o.payload].join(".")),c=W3(r.alg);try{let l=await iV(e,c,"verify");return{data:await xo.crypto.subtle.verify(c.name,l,n,a)}}catch(l){return{errors:[new bt({reason:tt.TokenInvalidSignature,message:l?.message})]}}}s(Nw,"hasValidSignature");function Gn(t){let e=(t||"").toString().split(".");if(e.length!==3)return{errors:[new bt({reason:tt.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,n,o]=e,i=new TextDecoder,a=JSON.parse(i.decode(Pw.parse(r,{loose:!0}))),c=JSON.parse(i.decode(Pw.parse(n,{loose:!0}))),l=Pw.parse(o,{loose:!0});return{data:{header:a,payload:c,signature:l,raw:{header:r,payload:n,signature:o,text:t}}}}s(Gn,"decodeJwt");async function P$(t,e){let{audience:r,authorizedParties:n,clockSkewInMs:o,key:i}=e,a=o||sV,{data:c,errors:l}=Gn(t);if(l)return{errors:l};let{header:d,payload:p}=c;try{let{typ:y,alg:g}=d;$w(y),Rw(g);let{azp:f,sub:_,aud:w,iat:b,exp:S,nbf:k}=p;Y3(_),X3([w],[r]),eV(f,n),tV(S,a),rV(k,a),nV(b,a)}catch(y){return{errors:[y]}}let{data:m,errors:h}=await Nw(c,i);return h?{errors:[new bt({action:vr.EnsureClerkJWT,reason:tt.TokenVerificationFailed,message:`Error verifying JWT signature. ${h[0]}`})]}:m?{data:p}:{errors:[new bt({reason:tt.TokenInvalidSignature,message:"JWT signature is invalid."})]}}s(P$,"verifyJwt");var A$=s(t=>{throw TypeError(t)},"__typeError"),aV=s((t,e,r)=>e.has(t)||A$("Cannot "+r),"__accessCheck"),C$=s((t,e,r)=>e.has(t)?A$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Fm=s((t,e,r)=>(aV(t,e,"access private method"),r),"__privateMethod");function Dw(t){return t?`https://${t.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}s(Dw,"buildAccountsBaseUrl");var cV={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},uV=new Set(["first_factor","second_factor","multi_factor"]),lV=new Set(["strict_mfa","strict","moderate","lax"]),dV=s(t=>typeof t=="number"&&t>0,"isValidMaxAge"),pV=s(t=>uV.has(t),"isValidLevel"),mV=s(t=>lV.has(t),"isValidVerificationType"),jw=s(t=>t.replace(/^(org:)*/,"org:"),"prefixWithOrg"),fV=s((t,e)=>{let{orgId:r,orgRole:n,orgPermissions:o}=e;return!t.role&&!t.permission||!r||!n||!o?null:t.permission?o.includes(jw(t.permission)):t.role?jw(n)===jw(t.role):null},"checkOrgAuthorization"),O$=s((t,e)=>{let{org:r,user:n}=Bm(t),[o,i]=e.split(":"),a=i||o;return o==="org"?r.includes(a):o==="user"?n.includes(a):[...r,...n].includes(a)},"checkForFeatureOrPlan"),hV=s((t,e)=>{let{features:r,plans:n}=e;return t.feature&&r?O$(r,t.feature):t.plan&&n?O$(n,t.plan):null},"checkBillingAuthorization"),Bm=s(t=>{let e=t?t.split(",").map(r=>r.trim()):[];return{org:e.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:e.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},"splitByScope"),$$=s(t=>{if(!t)return!1;let e=s(o=>typeof o=="string"?cV[o]:o,"convertConfigToObject"),r=typeof t=="string"&&mV(t),n=typeof t=="object"&&pV(t.level)&&dV(t.afterMinutes);return r||n?e.bind(null,t):!1},"validateReverificationConfig"),gV=s((t,{factorVerificationAge:e})=>{if(!t.reverification||!e)return null;let r=$$(t.reverification);if(!r)return null;let{level:n,afterMinutes:o}=r(),[i,a]=e,c=i!==-1?o>i:null,l=a!==-1?o>a:null;switch(n){case"first_factor":return c;case"second_factor":return a!==-1?l:c;case"multi_factor":return a===-1?c:c&&l}},"checkReverificationAuthorization"),Mw=s(t=>e=>{if(!t.userId)return!1;let r=hV(e,t),n=fV(e,t),o=gV(e,t);return[r||n,o].some(i=>i===null)?[r||n,o].some(i=>i===!0):[r||n,o].every(i=>i===!0)},"createCheckAuthorization");var yV=s(({per:t,fpm:e})=>{if(!t||!e)return{permissions:[],featurePermissionMap:[]};let r=t.split(",").map(n=>n.trim());return{permissions:r,featurePermissionMap:e.split(",").map(n=>Number.parseInt(n.trim(),10)).map(n=>n.toString(2).padStart(r.length,"0").split("").map(o=>Number.parseInt(o,10)).reverse()).filter(Boolean)}},"parsePermissions");function vV({features:t,permissions:e,featurePermissionMap:r}){if(!t||!e||!r)return[];let n=[];for(let o=0;o<t.length;o++){let i=t[o];if(o>=r.length)continue;let a=r[o];if(a)for(let c=0;c<a.length;c++)a[c]===1&&n.push(`org:${i}:${e[c]}`)}return n}s(vV,"buildOrgPermissions");var R$=s(t=>{let e,r,n,o,i=t.fva??null,a=t.sts??null;switch(t.v){case 2:if(t.o){e=t.o?.id,n=t.o?.slg,t.o?.rol&&(r=`org:${t.o?.rol}`);let{org:c}=Bm(t.fea),{permissions:l,featurePermissionMap:d}=yV({per:t.o?.per,fpm:t.o?.fpm});o=vV({features:c,featurePermissionMap:d,permissions:l})}break;default:e=t.org_id,r=t.org_role,n=t.org_slug,o=t.org_permissions;break}return{sessionClaims:t,sessionId:t.sid,sessionStatus:a,actor:t.act,userId:t.sub,orgId:e,orgRole:r,orgSlug:n,orgPermissions:o,factorVerificationAge:i}},"__experimental_JWTPayloadToAuthObjectProperties");var SN=nu(j$(),1);function AV(t){for(var e=[],r=0;r<t.length;){var n=t[r];if(n==="*"||n==="+"||n==="?"){e.push({type:"MODIFIER",index:r,value:t[r++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(n==="{"){e.push({type:"OPEN",index:r,value:t[r++]});continue}if(n==="}"){e.push({type:"CLOSE",index:r,value:t[r++]});continue}if(n===":"){for(var o="",i=r+1;i<t.length;){var a=t.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:o}),r=i;continue}if(n==="("){var c=1,l="",i=r+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){l+=t[i++]+t[i++];continue}if(t[i]===")"){if(c--,c===0){i++;break}}else if(t[i]==="("&&(c++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=t[i++]}if(c)throw new TypeError("Unbalanced pattern at ".concat(r));if(!l)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:l}),r=i;continue}e.push({type:"CHAR",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}s(AV,"_");function CV(t,e){e===void 0&&(e={});for(var r=AV(t),n=e.prefixes,o=n===void 0?"./":n,i=e.delimiter,a=i===void 0?"/#?":i,c=[],l=0,d=0,p="",m=function($){if(d<r.length&&r[d].type===$)return r[d++].value},h=function($){var P=m($);if(P!==void 0)return P;var N=r[d],j=N.type,W=N.index;throw new TypeError("Unexpected ".concat(j," at ").concat(W,", expected ").concat($))},y=function(){for(var $="",P;P=m("CHAR")||m("ESCAPED_CHAR");)$+=P;return $},g=function($){for(var P=0,N=a;P<N.length;P++){var j=N[P];if($.indexOf(j)>-1)return!0}return!1},f=function($){var P=c[c.length-1],N=$||(P&&typeof P=="string"?P:"");if(P&&!N)throw new TypeError('Must have text between two parameters, missing text after "'.concat(P.name,'"'));return!N||g(N)?"[^".concat(qi(a),"]+?"):"(?:(?!".concat(qi(N),")[^").concat(qi(a),"])+?")};d<r.length;){var _=m("CHAR"),w=m("NAME"),b=m("PATTERN");if(w||b){var S=_||"";o.indexOf(S)===-1&&(p+=S,S=""),p&&(c.push(p),p=""),c.push({name:w||l++,prefix:S,suffix:"",pattern:b||f(S),modifier:m("MODIFIER")||""});continue}var k=_||m("ESCAPED_CHAR");if(k){p+=k;continue}if(p&&(c.push(p),p=""),m("OPEN")){var S=y(),R=m("NAME")||"",O=m("PATTERN")||"",C=y();h("CLOSE"),c.push({name:R||(O?l++:""),pattern:R&&!O?f(S):O,prefix:S,suffix:C,modifier:m("MODIFIER")||""});continue}h("END")}return c}s(CV,"F");function OV(t,e){var r=[];return $V(z$(t,r,e),r,e)}s(OV,"H");function $V(t,e,r){r===void 0&&(r={});var n=r.decode,o=n===void 0?function(i){return i}:n;return function(i){var a=t.exec(i);if(!a)return!1;for(var c=a[0],l=a.index,d=Object.create(null),p=function(h){if(a[h]===void 0)return"continue";var y=e[h-1];y.modifier==="*"||y.modifier==="+"?d[y.name]=a[h].split(y.prefix+y.suffix).map(function(g){return o(g,y)}):d[y.name]=o(a[h],y)},m=1;m<a.length;m++)p(m);return{path:c,index:l,params:d}}}s($V,"I");function qi(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}s(qi,"s");function M$(t){return t&&t.sensitive?"":"i"}s(M$,"D");function RV(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(t.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(t.source);return t}s(RV,"$");function NV(t,e,r){var n=t.map(function(o){return z$(o,e,r).source});return new RegExp("(?:".concat(n.join("|"),")"),M$(r))}s(NV,"W");function DV(t,e,r){return jV(CV(t,r),e,r)}s(DV,"L");function jV(t,e,r){r===void 0&&(r={});for(var n=r.strict,o=n===void 0?!1:n,i=r.start,a=i===void 0?!0:i,c=r.end,l=c===void 0?!0:c,d=r.encode,p=d===void 0?function(N){return N}:d,m=r.delimiter,h=m===void 0?"/#?":m,y=r.endsWith,g=y===void 0?"":y,f="[".concat(qi(g),"]|$"),_="[".concat(qi(h),"]"),w=a?"^":"",b=0,S=t;b<S.length;b++){var k=S[b];if(typeof k=="string")w+=qi(p(k));else{var R=qi(p(k.prefix)),O=qi(p(k.suffix));if(k.pattern)if(e&&e.push(k),R||O)if(k.modifier==="+"||k.modifier==="*"){var C=k.modifier==="*"?"?":"";w+="(?:".concat(R,"((?:").concat(k.pattern,")(?:").concat(O).concat(R,"(?:").concat(k.pattern,"))*)").concat(O,")").concat(C)}else w+="(?:".concat(R,"(").concat(k.pattern,")").concat(O,")").concat(k.modifier);else{if(k.modifier==="+"||k.modifier==="*")throw new TypeError('Can not repeat "'.concat(k.name,'" without a prefix and suffix'));w+="(".concat(k.pattern,")").concat(k.modifier)}else w+="(?:".concat(R).concat(O,")").concat(k.modifier)}}if(l)o||(w+="".concat(_,"?")),w+=r.endsWith?"(?=".concat(f,")"):"$";else{var $=t[t.length-1],P=typeof $=="string"?_.indexOf($[$.length-1])>-1:$===void 0;o||(w+="(?:".concat(_,"(?=").concat(f,"))?")),P||(w+="(?=".concat(_,"|").concat(f,")"))}return new RegExp(w,M$(r))}s(jV,"U");function z$(t,e,r){return t instanceof RegExp?RV(t,e):Array.isArray(t)?NV(t,e,r):DV(t,e,r)}s(z$,"P");function zw(t,e){try{return OV(t,e)}catch(r){throw new Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${r.message}`)}}s(zw,"match");var sR="https://api.clerk.com",aR="v1",cR="@clerk/backend@2.24.0",UV=300,Yw="2025-11-10",LV={AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},Xm={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count",HandshakeNonce:"__clerk_handshake_nonce"},qV={ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:Xm.DevBrowser,Handshake:Xm.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason",HandshakeNonce:Xm.HandshakeNonce,HandshakeFormat:"format"},FV={Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",SecFetchSite:"sec-fetch-site",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},BV={Json:"application/json"},Ae={Attributes:LV,Cookies:Xm,Headers:FV,ContentTypes:BV,QueryParameters:qV};function U$(t,e){return Object.keys(t).reduce((r,n)=>({...r,[n]:e[n]||r[n]}),{...t})}s(U$,"mergePreDefinedOptions");function uR(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}s(uR,"assertValidSecretKey");function VV(t){Li(t,{fatal:!0})}s(VV,"assertValidPublishableKey");var Je={SessionToken:"session_token",ApiKey:"api_key",M2MToken:"m2m_token",OAuthToken:"oauth_token"},HV=class{static{s(this,"AuthenticateContext")}constructor(t,e,r){this.cookieSuffix=t,this.clerkRequest=e,this.originalFrontendApi="",r.acceptsToken===Je.M2MToken||r.acceptsToken===Je.ApiKey?this.initHeaderValues():(this.initPublishableKeyValues(r),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues()),Object.assign(this,r),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.tokenInHeader}usesSuffixedCookies(){let t=this.getSuffixedCookie(Ae.Cookies.ClientUat),e=this.getCookie(Ae.Cookies.ClientUat),r=this.getSuffixedCookie(Ae.Cookies.Session)||"",n=this.getCookie(Ae.Cookies.Session)||"";if(n&&!this.tokenHasIssuer(n))return!1;if(n&&!this.tokenBelongsToInstance(n))return!0;if(!t&&!r)return!1;let{data:o}=Gn(n),i=o?.payload.iat||0,{data:a}=Gn(r),c=a?.payload.iat||0;if(t!=="0"&&e!=="0"&&i>c||t==="0"&&e!=="0")return!1;if(this.instanceType!=="production"){let l=this.sessionExpired(a);if(t!=="0"&&e==="0"&&l)return!1}return!(!t&&r)}isCrossOriginReferrer(){if(!this.referrer||!this.clerkUrl.origin)return!1;try{return new URL(this.referrer).origin!==this.clerkUrl.origin}catch{return!1}}isKnownClerkReferrer(){if(!this.referrer)return!1;try{let t=new URL(this.referrer),e=t.hostname;if(this.frontendApi){let n=this.frontendApi.startsWith("http")?new URL(this.frontendApi).hostname:this.frontendApi;if(e===n)return!0}if(ww(e)||Sw(e))return!0;let r=Dw(this.frontendApi);if(r){let n=new URL(r).origin;if(t.origin===n)return!0}return!!e.startsWith("accounts.")}catch{return!1}}initPublishableKeyValues(t){VV(t.publishableKey),this.publishableKey=t.publishableKey;let e=Li(this.publishableKey,{fatal:!0,domain:t.domain,isSatellite:t.isSatellite});this.originalFrontendApi=e.frontendApi;let r=Li(this.publishableKey,{fatal:!0,proxyUrl:t.proxyUrl,domain:t.domain,isSatellite:t.isSatellite});this.instanceType=r.instanceType,this.frontendApi=r.frontendApi}initHeaderValues(){this.tokenInHeader=this.parseAuthorizationHeader(this.getHeader(Ae.Headers.Authorization)),this.origin=this.getHeader(Ae.Headers.Origin),this.host=this.getHeader(Ae.Headers.Host),this.forwardedHost=this.getHeader(Ae.Headers.ForwardedHost),this.forwardedProto=this.getHeader(Ae.Headers.CloudFrontForwardedProto)||this.getHeader(Ae.Headers.ForwardedProto),this.referrer=this.getHeader(Ae.Headers.Referrer),this.userAgent=this.getHeader(Ae.Headers.UserAgent),this.secFetchDest=this.getHeader(Ae.Headers.SecFetchDest),this.accept=this.getHeader(Ae.Headers.Accept)}initCookieValues(){this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(Ae.Cookies.Session),this.refreshTokenInCookie=this.getSuffixedCookie(Ae.Cookies.Refresh),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(Ae.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(Ae.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(Ae.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(Ae.QueryParameters.Handshake)||this.getCookie(Ae.Cookies.Handshake),this.handshakeRedirectLoopCounter=Number(this.getCookie(Ae.Cookies.RedirectCount))||0,this.handshakeNonce=this.getQueryParam(Ae.QueryParameters.HandshakeNonce)||this.getCookie(Ae.Cookies.HandshakeNonce)}getQueryParam(t){return this.clerkRequest.clerkUrl.searchParams.get(t)}getHeader(t){return this.clerkRequest.headers.get(t)||void 0}getCookie(t){return this.clerkRequest.cookies.get(t)||void 0}getSuffixedCookie(t){return this.getCookie(Mm(t,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(t){return this.usesSuffixedCookies()?this.getSuffixedCookie(t):this.getCookie(t)}parseAuthorizationHeader(t){if(!t)return;let[e,r]=t.split(" ",2);if(!r)return e;if(e==="Bearer")return r}tokenHasIssuer(t){let{data:e,errors:r}=Gn(t);return r?!1:!!e.payload.iss}tokenBelongsToInstance(t){if(!t)return!1;let{data:e,errors:r}=Gn(t);if(r)return!1;let n=e.payload.iss.replace(/https?:\/\//gi,"");return this.originalFrontendApi===n}sessionExpired(t){return!!t&&t?.payload.exp<=Date.now()/1e3>>0}},ZV=s(async(t,e)=>{let r=e.publishableKey?await jm(e.publishableKey,xo.crypto.subtle):"";return new HV(r,t,e)},"createAuthenticateContext"),Zw="/",JV=new RegExp("(?<!:)"+Zw+"{1,}","g");function oe(...t){return t.filter(e=>e).join(Zw).replace(JV,Zw)}s(oe,"joinPaths");var St=class{static{s(this,"AbstractAPI")}constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},L$="/actor_tokens",KV=class extends St{static{s(this,"ActorTokenAPI")}async create(t){return this.request({method:"POST",path:L$,bodyParams:t})}async revoke(t){return this.requireId(t),this.request({method:"POST",path:oe(L$,t,"revoke")})}},q$="/accountless_applications",GV=class extends St{static{s(this,"AccountlessApplicationAPI")}async createAccountlessApplication(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:q$,headerParams:e})}async completeAccountlessApplicationOnboarding(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:oe(q$,"complete"),headerParams:e})}},Uw="/allowlist_identifiers",WV=class extends St{static{s(this,"AllowlistIdentifierAPI")}async getAllowlistIdentifierList(t={}){return this.request({method:"GET",path:Uw,queryParams:{...t,paginated:!0}})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:Uw,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Uw,t)})}},Yu="/api_keys",QV=class extends St{static{s(this,"APIKeysAPI")}async list(t){return this.request({method:"GET",path:Yu,queryParams:t})}async create(t){return this.request({method:"POST",path:Yu,bodyParams:t})}async revoke(t){let{apiKeyId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Yu,e,"revoke"),bodyParams:r})}async getSecret(t){return this.requireId(t),this.request({method:"GET",path:oe(Yu,t,"secret")})}async verifySecret(t){return this.request({method:"POST",path:oe(Yu,"verify"),bodyParams:{secret:t}})}},XV="/beta_features",YV=class extends St{static{s(this,"BetaFeaturesAPI")}async changeDomain(t){return this.request({method:"POST",path:oe(XV,"change_domain"),bodyParams:t})}},Lw="/blocklist_identifiers",eH=class extends St{static{s(this,"BlocklistIdentifierAPI")}async getBlocklistIdentifierList(t={}){return this.request({method:"GET",path:Lw,queryParams:t})}async createBlocklistIdentifier(t){return this.request({method:"POST",path:Lw,bodyParams:t})}async deleteBlocklistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Lw,t)})}},Hm="/clients",tH=class extends St{static{s(this,"ClientAPI")}async getClientList(t={}){return this.request({method:"GET",path:Hm,queryParams:{...t,paginated:!0}})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:oe(Hm,t)})}verifyClient(t){return this.request({method:"POST",path:oe(Hm,"verify"),bodyParams:{token:t}})}async getHandshakePayload(t){return this.request({method:"GET",path:oe(Hm,"handshake_payload"),queryParams:t})}},Zm="/domains",rH=class extends St{static{s(this,"DomainAPI")}async list(){return this.request({method:"GET",path:Zm})}async add(t){return this.request({method:"POST",path:Zm,bodyParams:t})}async update(t){let{domainId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:oe(Zm,e),bodyParams:r})}async delete(t){return this.deleteDomain(t)}async deleteDomain(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Zm,t)})}},Jm="/email_addresses",nH=class extends St{static{s(this,"EmailAddressAPI")}async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:oe(Jm,t)})}async createEmailAddress(t){return this.request({method:"POST",path:Jm,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:oe(Jm,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Jm,t)})}},oH="/oauth_applications/access_tokens",iH=class extends St{static{s(this,"IdPOAuthAccessTokenApi")}async verifyAccessToken(t){return this.request({method:"POST",path:oe(oH,"verify"),bodyParams:{access_token:t}})}},Km="/instance",sH=class extends St{static{s(this,"InstanceAPI")}async get(){return this.request({method:"GET",path:Km})}async update(t){return this.request({method:"PATCH",path:Km,bodyParams:t})}async updateRestrictions(t){return this.request({method:"PATCH",path:oe(Km,"restrictions"),bodyParams:t})}async updateOrganizationSettings(t){return this.request({method:"PATCH",path:oe(Km,"organization_settings"),bodyParams:t})}},Gm="/invitations",aH=class extends St{static{s(this,"InvitationAPI")}async getInvitationList(t={}){return this.request({method:"GET",path:Gm,queryParams:{...t,paginated:!0}})}async createInvitation(t){return this.request({method:"POST",path:Gm,bodyParams:t})}async createInvitationBulk(t){return this.request({method:"POST",path:oe(Gm,"bulk"),bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:oe(Gm,t,"revoke")})}},ti="/machines",cH=class extends St{static{s(this,"MachineApi")}async get(t){return this.requireId(t),this.request({method:"GET",path:oe(ti,t)})}async list(t={}){return this.request({method:"GET",path:ti,queryParams:t})}async create(t){return this.request({method:"POST",path:ti,bodyParams:t})}async update(t){let{machineId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:oe(ti,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:oe(ti,t)})}async getSecretKey(t){return this.requireId(t),this.request({method:"GET",path:oe(ti,t,"secret_key")})}async rotateSecretKey(t){let{machineId:e,previousTokenTtl:r}=t;return this.requireId(e),this.request({method:"POST",path:oe(ti,e,"secret_key","rotate"),bodyParams:{previousTokenTtl:r}})}async createScope(t,e){return this.requireId(t),this.request({method:"POST",path:oe(ti,t,"scopes"),bodyParams:{toMachineId:e}})}async deleteScope(t,e){return this.requireId(t),this.request({method:"DELETE",path:oe(ti,t,"scopes",e)})}},qw="/m2m_tokens",ol,Ym,uH=class extends St{static{s(this,"M2MTokenApi")}constructor(){super(...arguments),C$(this,ol)}async createToken(t){let{claims:e=null,machineSecretKey:r,secondsUntilExpiration:n=null}=t||{},o=Fm(this,ol,Ym).call(this,{method:"POST",path:qw,bodyParams:{secondsUntilExpiration:n,claims:e}},r);return this.request(o)}async revokeToken(t){let{m2mTokenId:e,revocationReason:r=null,machineSecretKey:n}=t;this.requireId(e);let o=Fm(this,ol,Ym).call(this,{method:"POST",path:oe(qw,e,"revoke"),bodyParams:{revocationReason:r}},n);return this.request(o)}async verifyToken(t){let{token:e,machineSecretKey:r}=t,n=Fm(this,ol,Ym).call(this,{method:"POST",path:oe(qw,"verify"),bodyParams:{token:e}},r);return this.request(n)}};ol=new WeakSet;Ym=s(function(t,e){return e?{...t,headerParams:{...t.headerParams,Authorization:`Bearer ${e}`}}:t},"createRequestOptions_fn");var lH="/jwks",dH=class extends St{static{s(this,"JwksAPI")}async getJwks(){return this.request({method:"GET",path:lH})}},el="/jwt_templates",pH=class extends St{static{s(this,"JwtTemplatesApi")}async list(t={}){return this.request({method:"GET",path:el,queryParams:{...t,paginated:!0}})}async get(t){return this.requireId(t),this.request({method:"GET",path:oe(el,t)})}async create(t){return this.request({method:"POST",path:el,bodyParams:t})}async update(t){let{templateId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:oe(el,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:oe(el,t)})}},Yt="/organizations",mH=class extends St{static{s(this,"OrganizationAPI")}async getOrganizationList(t){return this.request({method:"GET",path:Yt,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:Yt,bodyParams:t})}async getOrganization(t){let{includeMembersCount:e}=t,r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:oe(Yt,r),queryParams:{includeMembersCount:e}})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:oe(Yt,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);let r=new xo.FormData;return r.append("file",e?.file),e?.uploaderUserId&&r.append("uploader_user_id",e?.uploaderUserId),this.request({method:"PUT",path:oe(Yt,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Yt,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:oe(Yt,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:oe(Yt,t)})}async getOrganizationMembershipList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:oe(Yt,e,"memberships"),queryParams:r})}async getInstanceOrganizationMembershipList(t){return this.request({method:"GET",path:"/organization_memberships",queryParams:t})}async createOrganizationMembership(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Yt,e,"memberships"),bodyParams:r})}async updateOrganizationMembership(t){let{organizationId:e,userId:r,...n}=t;return this.requireId(e),this.request({method:"PATCH",path:oe(Yt,e,"memberships",r),bodyParams:n})}async updateOrganizationMembershipMetadata(t){let{organizationId:e,userId:r,...n}=t;return this.request({method:"PATCH",path:oe(Yt,e,"memberships",r,"metadata"),bodyParams:n})}async deleteOrganizationMembership(t){let{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:oe(Yt,e,"memberships",r)})}async getOrganizationInvitationList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:oe(Yt,e,"invitations"),queryParams:r})}async createOrganizationInvitation(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Yt,e,"invitations"),bodyParams:r})}async createOrganizationInvitationBulk(t,e){return this.requireId(t),this.request({method:"POST",path:oe(Yt,t,"invitations","bulk"),bodyParams:e})}async getOrganizationInvitation(t){let{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:oe(Yt,e,"invitations",r)})}async revokeOrganizationInvitation(t){let{organizationId:e,invitationId:r,...n}=t;return this.requireId(e),this.request({method:"POST",path:oe(Yt,e,"invitations",r,"revoke"),bodyParams:n})}async getOrganizationDomainList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:oe(Yt,e,"domains"),queryParams:r})}async createOrganizationDomain(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Yt,e,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(t){let{organizationId:e,domainId:r,...n}=t;return this.requireId(e),this.requireId(r),this.request({method:"PATCH",path:oe(Yt,e,"domains",r),bodyParams:n})}async deleteOrganizationDomain(t){let{organizationId:e,domainId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"DELETE",path:oe(Yt,e,"domains",r)})}},Va="/oauth_applications",fH=class extends St{static{s(this,"OAuthApplicationsApi")}async list(t={}){return this.request({method:"GET",path:Va,queryParams:t})}async get(t){return this.requireId(t),this.request({method:"GET",path:oe(Va,t)})}async create(t){return this.request({method:"POST",path:Va,bodyParams:t})}async update(t){let{oauthApplicationId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:oe(Va,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Va,t)})}async rotateSecret(t){return this.requireId(t),this.request({method:"POST",path:oe(Va,t,"rotate_secret")})}},Wm="/phone_numbers",hH=class extends St{static{s(this,"PhoneNumberAPI")}async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:oe(Wm,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Wm,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:oe(Wm,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Wm,t)})}},gH="/proxy_checks",yH=class extends St{static{s(this,"ProxyCheckAPI")}async verify(t){return this.request({method:"POST",path:gH,bodyParams:t})}},Qm="/redirect_urls",vH=class extends St{static{s(this,"RedirectUrlAPI")}async getRedirectUrlList(){return this.request({method:"GET",path:Qm,queryParams:{paginated:!0}})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:oe(Qm,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:Qm,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Qm,t)})}},tl="/saml_connections",_H=class extends St{static{s(this,"SamlConnectionAPI")}async getSamlConnectionList(t={}){return this.request({method:"GET",path:tl,queryParams:t})}async createSamlConnection(t){return this.request({method:"POST",path:tl,bodyParams:t,options:{deepSnakecaseBodyParamKeys:!0}})}async getSamlConnection(t){return this.requireId(t),this.request({method:"GET",path:oe(tl,t)})}async updateSamlConnection(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:oe(tl,t),bodyParams:e,options:{deepSnakecaseBodyParamKeys:!0}})}async deleteSamlConnection(t){return this.requireId(t),this.request({method:"DELETE",path:oe(tl,t)})}},Fi="/sessions",bH=class extends St{static{s(this,"SessionAPI")}async getSessionList(t={}){return this.request({method:"GET",path:Fi,queryParams:{...t,paginated:!0}})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:oe(Fi,t)})}async createSession(t){return this.request({method:"POST",path:Fi,bodyParams:t})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:oe(Fi,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:oe(Fi,t,"verify"),bodyParams:{token:e}})}async getToken(t,e,r){this.requireId(t);let o={method:"POST",path:e?oe(Fi,t,"tokens",e):oe(Fi,t,"tokens")};return r!==void 0&&(o.bodyParams={expires_in_seconds:r}),this.request(o)}async refreshSession(t,e){this.requireId(t);let{suffixed_cookies:r,...n}=e;return this.request({method:"POST",path:oe(Fi,t,"refresh"),bodyParams:n,queryParams:{suffixed_cookies:r}})}},F$="/sign_in_tokens",wH=class extends St{static{s(this,"SignInTokenAPI")}async createSignInToken(t){return this.request({method:"POST",path:F$,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:oe(F$,t,"revoke")})}},B$="/sign_ups",SH=class extends St{static{s(this,"SignUpAPI")}async get(t){return this.requireId(t),this.request({method:"GET",path:oe(B$,t)})}async update(t){let{signUpAttemptId:e,...r}=t;return this.request({method:"PATCH",path:oe(B$,e),bodyParams:r})}},xH="/testing_tokens",TH=class extends St{static{s(this,"TestingTokenAPI")}async createTestingToken(){return this.request({method:"POST",path:xH})}},Ht="/users",EH=class extends St{static{s(this,"UserAPI")}async getUserList(t={}){let{limit:e,offset:r,orderBy:n,...o}=t,[i,a]=await Promise.all([this.request({method:"GET",path:Ht,queryParams:t}),this.getCount(o)]);return{data:i,totalCount:a}}async getUser(t){return this.requireId(t),this.request({method:"GET",path:oe(Ht,t)})}async createUser(t){return this.request({method:"POST",path:Ht,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:oe(Ht,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);let r=new xo.FormData;return r.append("file",e?.file),this.request({method:"POST",path:oe(Ht,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:oe(Ht,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Ht,t)})}async getCount(t={}){return this.request({method:"GET",path:oe(Ht,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){this.requireId(t);let r=e.startsWith("oauth_"),n=r?e:`oauth_${e}`;return r&&Nm("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:oe(Ht,t,"oauth_access_tokens",n),queryParams:{paginated:!0}})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Ht,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:oe(Ht,e,"organization_memberships"),queryParams:{limit:r,offset:n}})}async getOrganizationInvitationList(t){let{userId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:oe(Ht,e,"organization_invitations"),queryParams:r})}async verifyPassword(t){let{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Ht,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){let{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:oe(Ht,e,"verify_totp"),bodyParams:{code:r}})}async banUser(t){return this.requireId(t),this.request({method:"POST",path:oe(Ht,t,"ban")})}async unbanUser(t){return this.requireId(t),this.request({method:"POST",path:oe(Ht,t,"unban")})}async lockUser(t){return this.requireId(t),this.request({method:"POST",path:oe(Ht,t,"lock")})}async unlockUser(t){return this.requireId(t),this.request({method:"POST",path:oe(Ht,t,"unlock")})}async deleteUserProfileImage(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Ht,t,"profile_image")})}async deleteUserPasskey(t){return this.requireId(t.userId),this.requireId(t.passkeyIdentificationId),this.request({method:"DELETE",path:oe(Ht,t.userId,"passkeys",t.passkeyIdentificationId)})}async deleteUserWeb3Wallet(t){return this.requireId(t.userId),this.requireId(t.web3WalletIdentificationId),this.request({method:"DELETE",path:oe(Ht,t.userId,"web3_wallets",t.web3WalletIdentificationId)})}async deleteUserExternalAccount(t){return this.requireId(t.userId),this.requireId(t.externalAccountId),this.request({method:"DELETE",path:oe(Ht,t.userId,"external_accounts",t.externalAccountId)})}async deleteUserBackupCodes(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Ht,t,"backup_code")})}async deleteUserTOTP(t){return this.requireId(t),this.request({method:"DELETE",path:oe(Ht,t,"totp")})}},rl="/waitlist_entries",kH=class extends St{static{s(this,"WaitlistEntryAPI")}async list(t={}){return this.request({method:"GET",path:rl,queryParams:t})}async create(t){return this.request({method:"POST",path:rl,bodyParams:t})}async invite(t,e={}){return this.requireId(t),this.request({method:"POST",path:oe(rl,t,"invite"),bodyParams:e})}async reject(t){return this.requireId(t),this.request({method:"POST",path:oe(rl,t,"reject")})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:oe(rl,t)})}},Fw="/webhooks",IH=class extends St{static{s(this,"WebhookAPI")}async createSvixApp(){return this.request({method:"POST",path:oe(Fw,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:oe(Fw,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:oe(Fw,"svix")})}},V$="/billing",PH="/organizations",AH="/users",CH=class extends St{static{s(this,"BillingAPI")}async getPlanList(t){return this.request({method:"GET",path:oe(V$,"plans"),queryParams:t})}async cancelSubscriptionItem(t,e){return this.requireId(t),this.request({method:"DELETE",path:oe(V$,"subscription_items",t),queryParams:e})}async extendSubscriptionItemFreeTrial(t,e){return this.requireId(t),this.request({method:"POST",path:oe("/billing","subscription_items",t,"extend_free_trial"),bodyParams:e})}async getOrganizationBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:oe(PH,t,"billing","subscription")})}async getUserBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:oe(AH,t,"billing","subscription")})}},lR=s(t=>typeof t=="object"&&t!==null,"isObject"),H$=s(t=>lR(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date)&&!(globalThis.Blob&&t instanceof globalThis.Blob),"isObjectCustom"),OH=Symbol("mapObjectSkip"),Jw=s((t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);let{target:o}=r;delete r.target;let i=s(a=>a.map(c=>H$(c)?Jw(c,e,r,n):c),"mapArray");if(Array.isArray(t))return i(t);for(let[a,c]of Object.entries(t)){let l=e(a,c,t);if(l===OH)continue;let[d,p,{shouldRecurse:m=!0}={}]=l;d!=="__proto__"&&(r.deep&&m&&H$(p)&&(p=Array.isArray(p)?i(p):Jw(p,e,r,n)),o[d]=p)}return o},"_mapObject");function Z$(t,e,r){if(!lR(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);if(Array.isArray(t))throw new TypeError("Expected an object, got an array");return Jw(t,e,r)}s(Z$,"mapObject");var $H=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),RH=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),NH=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),DH=/[^\p{L}\d]+/giu,J$="$1\0$2",K$="";function dR(t){let e=t.trim();e=e.replace($H,J$).replace(RH,J$),e=e.replace(DH,"\0");let r=0,n=e.length;for(;e.charAt(r)==="\0";)r++;if(r===n)return[];for(;e.charAt(n-1)==="\0";)n--;return e.slice(r,n).split(/\0/g)}s(dR,"split");function jH(t){let e=dR(t);for(let r=0;r<e.length;r++){let n=e[r],o=NH.exec(n);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(r,1,n.slice(0,i),n.slice(i))}}return e}s(jH,"splitSeparateNumbers");function MH(t,e){let[r,n,o]=UH(t,e);return r+n.map(zH(e?.locale)).join(e?.delimiter??" ")+o}s(MH,"noCase");function G$(t,e){return MH(t,{delimiter:"_",...e})}s(G$,"snakeCase");function zH(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}s(zH,"lowerFactory");function UH(t,e={}){let r=e.split??(e.separateNumbers?jH:dR),n=e.prefixCharacters??K$,o=e.suffixCharacters??K$,i=0,a=t.length;for(;i<t.length;){let c=t.charAt(i);if(!n.includes(c))break;i++}for(;a>i;){let c=a-1,l=t.charAt(c);if(!o.includes(l))break;a=c}return[t.slice(0,i),r(t.slice(i,a)),t.slice(a)]}s(UH,"splitPrefixSuffix");var W$={}.constructor;function LH(t,e){if(Array.isArray(t)){if(t.some(o=>o.constructor!==W$))throw new Error("obj must be array of plain objects");e={deep:!0,exclude:[],parsingOptions:{},...e};let n=e.snakeCase||(o=>G$(o,e.parsingOptions));return t.map(o=>Z$(o,(i,a)=>[Q$(e.exclude,i)?i:n(i),a,X$(i,a,e)],e))}else if(t.constructor!==W$)throw new Error("obj must be an plain object");e={deep:!0,exclude:[],parsingOptions:{},...e};let r=e.snakeCase||(n=>G$(n,e.parsingOptions));return Z$(t,(n,o)=>[Q$(e.exclude,n)?n:r(n),o,X$(n,o,e)],e)}s(LH,"snakecaseKeys");function Q$(t,e){return t.some(r=>typeof r=="string"?r===e:r.test(e))}s(Q$,"matches");function X$(t,e,r){return r.shouldRecurse?{shouldRecurse:r.shouldRecurse(t,e)}:void 0}s(X$,"mapperOptions");var Y$=LH,qH=class pR{static{s(this,"_AccountlessApplication")}constructor(e,r,n,o){this.publishableKey=e,this.secretKey=r,this.claimUrl=n,this.apiKeysUrl=o}static fromJSON(e){return new pR(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},FH=class mR{static{s(this,"_ActorToken")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.status=r,this.userId=n,this.actor=o,this.token=i,this.url=a,this.createdAt=c,this.updatedAt=l}static fromJSON(e){return new mR(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},BH=class fR{static{s(this,"_AllowlistIdentifier")}constructor(e,r,n,o,i,a,c){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a,this.invitationId=c}static fromJSON(e){return new fR(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},VH=class hR{static{s(this,"_APIKey")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_){this.id=e,this.type=r,this.name=n,this.subject=o,this.scopes=i,this.claims=a,this.revoked=c,this.revocationReason=l,this.expired=d,this.expiration=p,this.createdBy=m,this.description=h,this.lastUsedAt=y,this.createdAt=g,this.updatedAt=f,this.secret=_}static fromJSON(e){return new hR(e.id,e.type,e.name,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_by,e.description,e.last_used_at,e.created_at,e.updated_at,e.secret)}},HH=class gR{static{s(this,"_BlocklistIdentifier")}constructor(e,r,n,o,i,a){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a}static fromJSON(e){return new gR(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},ZH=class yR{static{s(this,"_SessionActivity")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.isMobile=r,this.ipAddress=n,this.city=o,this.country=i,this.browserVersion=a,this.browserName=c,this.deviceType=l}static fromJSON(e){return new yR(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},vR=class _R{static{s(this,"_Session")}constructor(e,r,n,o,i,a,c,l,d,p,m,h=null){this.id=e,this.clientId=r,this.userId=n,this.status=o,this.lastActiveAt=i,this.expireAt=a,this.abandonAt=c,this.createdAt=l,this.updatedAt=d,this.lastActiveOrganizationId=p,this.latestActivity=m,this.actor=h}static fromJSON(e){return new _R(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&ZH.fromJSON(e.latest_activity),e.actor)}},JH=class bR{static{s(this,"_Client")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.sessionIds=r,this.sessions=n,this.signInId=o,this.signUpId=i,this.lastActiveSessionId=a,this.lastAuthenticationStrategy=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new bR(e.id,e.session_ids,e.sessions.map(r=>vR.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.last_authentication_strategy,e.created_at,e.updated_at)}},KH=class wR{static{s(this,"_CnameTarget")}constructor(e,r,n){this.host=e,this.value=r,this.required=n}static fromJSON(e){return new wR(e.host,e.value,e.required)}},GH=class SR{static{s(this,"_Cookies")}constructor(e){this.cookies=e}static fromJSON(e){return new SR(e.cookies)}},WH=class xR{static{s(this,"_DeletedObject")}constructor(e,r,n,o){this.object=e,this.id=r,this.slug=n,this.deleted=o}static fromJSON(e){return new xR(e.object,e.id||null,e.slug||null,e.deleted)}},QH=class TR{static{s(this,"_Domain")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.isSatellite=n,this.frontendApiUrl=o,this.developmentOrigin=i,this.cnameTargets=a,this.accountsPortalUrl=c,this.proxyUrl=l}static fromJSON(e){return new TR(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(r=>KH.fromJSON(r)),e.accounts_portal_url,e.proxy_url)}},XH=class ER{static{s(this,"_Email")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=o,this.subject=i,this.body=a,this.bodyPlain=c,this.status=l,this.slug=d,this.data=p,this.deliveredByClerk=m}static fromJSON(e){return new ER(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},kR=class IR{static{s(this,"_IdentificationLink")}constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new IR(e.id,e.type)}},sl=class PR{static{s(this,"_Verification")}constructor(e,r,n=null,o=null,i=null,a=null,c=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=o,this.expireAt=i,this.nonce=a,this.message=c}static fromJSON(e){return new PR(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},AR=class CR{static{s(this,"_EmailAddress")}constructor(e,r,n,o){this.id=e,this.emailAddress=r,this.verification=n,this.linkedTo=o}static fromJSON(e){return new CR(e.id,e.email_address,e.verification&&sl.fromJSON(e.verification),e.linked_to.map(r=>kR.fromJSON(r)))}},YH=class OR{static{s(this,"_ExternalAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m,h={},y,g){this.id=e,this.provider=r,this.identificationId=n,this.externalId=o,this.approvedScopes=i,this.emailAddress=a,this.firstName=c,this.lastName=l,this.imageUrl=d,this.username=p,this.phoneNumber=m,this.publicMetadata=h,this.label=y,this.verification=g}static fromJSON(e){return new OR(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&sl.fromJSON(e.verification))}},eZ=class $R{static{s(this,"_IdPOAuthAccessToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.clientId=r,this.type=n,this.subject=o,this.scopes=i,this.revoked=a,this.revocationReason=c,this.expired=l,this.expiration=d,this.createdAt=p,this.updatedAt=m}static fromJSON(e){return new $R(e.id,e.client_id,e.type,e.subject,e.scopes,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at)}},tZ=class RR{static{s(this,"_Instance")}constructor(e,r,n){this.id=e,this.environmentType=r,this.allowedOrigins=n}static fromJSON(e){return new RR(e.id,e.environment_type,e.allowed_origins)}},rZ=class NR{static{s(this,"_InstanceRestrictions")}constructor(e,r,n,o,i){this.allowlist=e,this.blocklist=r,this.blockEmailSubaddresses=n,this.blockDisposableEmailDomains=o,this.ignoreDotsForGmailAddresses=i}static fromJSON(e){return new NR(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},nZ=class DR{static{s(this,"_InstanceSettings")}constructor(e,r,n,o,i){this.id=e,this.restrictedToAllowlist=r,this.fromEmailAddress=n,this.progressiveSignUp=o,this.enhancedEmailDeliverability=i}static fromJSON(e){return new DR(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},jR=class MR{static{s(this,"_Invitation")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.emailAddress=r,this.publicMetadata=n,this.createdAt=o,this.updatedAt=i,this.status=a,this.url=c,this.revoked=l,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new MR(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return r._raw=e,r}},Ge={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",ApiKey:"api_key",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",ExternalAccount:"external_account",FacebookAccount:"facebook_account",GoogleAccount:"google_account",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",Machine:"machine",MachineScope:"machine_scope",MachineSecretKey:"machine_secret_key",M2MToken:"machine_to_machine_token",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",IdpOAuthAccessToken:"clerk_idp_oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationDomain:"organization_domain",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",SamlAccount:"saml_account",SamlConnection:"saml_connection",Session:"session",SignInAttempt:"sign_in_attempt",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Web3Wallet:"web3_wallet",Token:"token",TotalCount:"total_count",TestingToken:"testing_token",Role:"role",Permission:"permission",BillingPayer:"commerce_payer",BillingPaymentAttempt:"commerce_payment_attempt",BillingSubscription:"commerce_subscription",BillingSubscriptionItem:"commerce_subscription_item",BillingPlan:"commerce_plan",Feature:"feature"},oZ=class Kw{static{s(this,"_Machine")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.instanceId=n,this.createdAt=o,this.updatedAt=i,this.scopedMachines=a,this.defaultTokenTtl=c,this.secretKey=l}static fromJSON(e){return new Kw(e.id,e.name,e.instance_id,e.created_at,e.updated_at,e.scoped_machines.map(r=>new Kw(r.id,r.name,r.instance_id,r.created_at,r.updated_at,[],r.default_token_ttl)),e.default_token_ttl,e.secret_key)}},iZ=class zR{static{s(this,"_MachineScope")}constructor(e,r,n,o){this.fromMachineId=e,this.toMachineId=r,this.createdAt=n,this.deleted=o}static fromJSON(e){return new zR(e.from_machine_id,e.to_machine_id,e.created_at,e.deleted)}},sZ=class UR{static{s(this,"_MachineSecretKey")}constructor(e){this.secret=e}static fromJSON(e){return new UR(e.secret)}},aZ=class LR{static{s(this,"_M2MToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.subject=r,this.scopes=n,this.claims=o,this.revoked=i,this.revocationReason=a,this.expired=c,this.expiration=l,this.createdAt=d,this.updatedAt=p,this.token=m}static fromJSON(e){return new LR(e.id,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at,e.token)}},cZ=class qR{static{s(this,"_JwtTemplate")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.name=r,this.claims=n,this.lifetime=o,this.allowedClockSkew=i,this.customSigningKey=a,this.signingAlgorithm=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new qR(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},uZ=class FR{static{s(this,"_OauthAccessToken")}constructor(e,r,n,o={},i,a,c,l){this.externalAccountId=e,this.provider=r,this.token=n,this.publicMetadata=o,this.label=i,this.scopes=a,this.tokenSecret=c,this.expiresAt=l}static fromJSON(e){return new FR(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},lZ=class BR{static{s(this,"_OAuthApplication")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k){this.id=e,this.instanceId=r,this.name=n,this.clientId=o,this.clientUri=i,this.clientImageUrl=a,this.dynamicallyRegistered=c,this.consentScreenEnabled=l,this.pkceRequired=d,this.isPublic=p,this.scopes=m,this.redirectUris=h,this.authorizeUrl=y,this.tokenFetchUrl=g,this.userInfoUrl=f,this.discoveryUrl=_,this.tokenIntrospectionUrl=w,this.createdAt=b,this.updatedAt=S,this.clientSecret=k}static fromJSON(e){return new BR(e.id,e.instance_id,e.name,e.client_id,e.client_uri,e.client_image_url,e.dynamically_registered,e.consent_screen_enabled,e.pkce_required,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},VR=class HR{static{s(this,"_Organization")}constructor(e,r,n,o,i,a,c,l={},d={},p,m,h,y){this.id=e,this.name=r,this.slug=n,this.imageUrl=o,this.hasImage=i,this.createdAt=a,this.updatedAt=c,this.publicMetadata=l,this.privateMetadata=d,this.maxAllowedMemberships=p,this.adminDeleteEnabled=m,this.membersCount=h,this.createdBy=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new HR(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return r._raw=e,r}},dZ=class ZR{static{s(this,"_OrganizationInvitation")}constructor(e,r,n,o,i,a,c,l,d,p,m={},h={},y){this.id=e,this.emailAddress=r,this.role=n,this.roleName=o,this.organizationId=i,this.createdAt=a,this.updatedAt=c,this.expiresAt=l,this.url=d,this.status=p,this.publicMetadata=m,this.privateMetadata=h,this.publicOrganizationData=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new ZR(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return r._raw=e,r}},pZ=class JR{static{s(this,"_OrganizationMembership")}constructor(e,r,n,o={},i={},a,c,l,d){this.id=e,this.role=r,this.permissions=n,this.publicMetadata=o,this.privateMetadata=i,this.createdAt=a,this.updatedAt=c,this.organization=l,this.publicUserData=d,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new JR(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,VR.fromJSON(e.organization),mZ.fromJSON(e.public_user_data));return r._raw=e,r}},mZ=class KR{static{s(this,"_OrganizationMembershipPublicUserData")}constructor(e,r,n,o,i,a){this.identifier=e,this.firstName=r,this.lastName=n,this.imageUrl=o,this.hasImage=i,this.userId=a}static fromJSON(e){return new KR(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},fZ=class GR{static{s(this,"_OrganizationSettings")}constructor(e,r,n,o,i,a,c,l,d,p){this.enabled=e,this.maxAllowedMemberships=r,this.maxAllowedRoles=n,this.maxAllowedPermissions=o,this.creatorRole=i,this.adminDeleteEnabled=a,this.domainsEnabled=c,this.slugDisabled=l,this.domainsEnrollmentModes=d,this.domainsDefaultRole=p}static fromJSON(e){return new GR(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.slug_disabled,e.domains_enrollment_modes,e.domains_default_role)}},WR=class QR{static{s(this,"_PhoneNumber")}constructor(e,r,n,o,i,a){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=o,this.verification=i,this.linkedTo=a}static fromJSON(e){return new QR(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&sl.fromJSON(e.verification),e.linked_to.map(r=>kR.fromJSON(r)))}},hZ=class XR{static{s(this,"_ProxyCheck")}constructor(e,r,n,o,i,a,c){this.id=e,this.domainId=r,this.lastRunAt=n,this.proxyUrl=o,this.successful=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new XR(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},gZ=class YR{static{s(this,"_RedirectUrl")}constructor(e,r,n,o){this.id=e,this.url=r,this.createdAt=n,this.updatedAt=o}static fromJSON(e){return new YR(e.id,e.url,e.created_at,e.updated_at)}},yZ=class eN{static{s(this,"_SamlConnection")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k,R){this.id=e,this.name=r,this.domain=n,this.organizationId=o,this.idpEntityId=i,this.idpSsoUrl=a,this.idpCertificate=c,this.idpMetadataUrl=l,this.idpMetadata=d,this.acsUrl=p,this.spEntityId=m,this.spMetadataUrl=h,this.active=y,this.provider=g,this.userCount=f,this.syncUserAttributes=_,this.allowSubdomains=w,this.allowIdpInitiated=b,this.createdAt=S,this.updatedAt=k,this.attributeMapping=R}static fromJSON(e){return new eN(e.id,e.name,e.domain,e.organization_id,e.idp_entity_id,e.idp_sso_url,e.idp_certificate,e.idp_metadata_url,e.idp_metadata,e.acs_url,e.sp_entity_id,e.sp_metadata_url,e.active,e.provider,e.user_count,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at,e.attribute_mapping&&_Z.fromJSON(e.attribute_mapping))}},vZ=class tN{static{s(this,"_SamlAccountConnection")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.name=r,this.domain=n,this.active=o,this.provider=i,this.syncUserAttributes=a,this.allowSubdomains=c,this.allowIdpInitiated=l,this.createdAt=d,this.updatedAt=p}static fromJSON(e){return new tN(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},_Z=class rN{static{s(this,"_AttributeMapping")}constructor(e,r,n,o){this.userId=e,this.emailAddress=r,this.firstName=n,this.lastName=o}static fromJSON(e){return new rN(e.user_id,e.email_address,e.first_name,e.last_name)}},bZ=class nN{static{s(this,"_SamlAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.provider=r,this.providerUserId=n,this.active=o,this.emailAddress=i,this.firstName=a,this.lastName=c,this.verification=l,this.samlConnection=d,this.lastAuthenticatedAt=p,this.enterpriseConnectionId=m}static fromJSON(e){return new nN(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&sl.fromJSON(e.verification),e.saml_connection&&vZ.fromJSON(e.saml_connection),e.last_authenticated_at??null,e.enterprise_connection_id)}},wZ=class oN{static{s(this,"_SignInToken")}constructor(e,r,n,o,i,a,c){this.id=e,this.userId=r,this.token=n,this.status=o,this.url=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new oN(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},Bw=class iN{static{s(this,"_SignUpAttemptVerification")}constructor(e,r){this.nextAction=e,this.supportedStrategies=r}static fromJSON(e){return new iN(e.next_action,e.supported_strategies)}},SZ=class sN{static{s(this,"_SignUpAttemptVerifications")}constructor(e,r,n,o){this.emailAddress=e,this.phoneNumber=r,this.web3Wallet=n,this.externalAccount=o}static fromJSON(e){return new sN(e.email_address&&Bw.fromJSON(e.email_address),e.phone_number&&Bw.fromJSON(e.phone_number),e.web3_wallet&&Bw.fromJSON(e.web3_wallet),e.external_account)}},xZ=class aN{static{s(this,"_SignUpAttempt")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k,R,O){this.id=e,this.status=r,this.requiredFields=n,this.optionalFields=o,this.missingFields=i,this.unverifiedFields=a,this.verifications=c,this.username=l,this.emailAddress=d,this.phoneNumber=p,this.web3Wallet=m,this.passwordEnabled=h,this.firstName=y,this.lastName=g,this.customAction=f,this.externalId=_,this.createdSessionId=w,this.createdUserId=b,this.abandonAt=S,this.legalAcceptedAt=k,this.publicMetadata=R,this.unsafeMetadata=O}static fromJSON(e){return new aN(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?SZ.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},TZ=class cN{static{s(this,"_SMSMessage")}constructor(e,r,n,o,i,a,c){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=o,this.status=i,this.phoneNumberId=a,this.data=c}static fromJSON(e){return new cN(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},EZ=class uN{static{s(this,"_Token")}constructor(e){this.jwt=e}static fromJSON(e){return new uN(e.jwt)}},kZ=class lN{static{s(this,"_Web3Wallet")}constructor(e,r,n){this.id=e,this.web3Wallet=r,this.verification=n}static fromJSON(e){return new lN(e.id,e.web3_wallet,e.verification&&sl.fromJSON(e.verification))}},IZ=class dN{static{s(this,"_User")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S,k={},R={},O={},C=[],$=[],P=[],N=[],j=[],W,Z,F=null,Y,re,ie){this.id=e,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=o,this.twoFactorEnabled=i,this.banned=a,this.locked=c,this.createdAt=l,this.updatedAt=d,this.imageUrl=p,this.hasImage=m,this.primaryEmailAddressId=h,this.primaryPhoneNumberId=y,this.primaryWeb3WalletId=g,this.lastSignInAt=f,this.externalId=_,this.username=w,this.firstName=b,this.lastName=S,this.publicMetadata=k,this.privateMetadata=R,this.unsafeMetadata=O,this.emailAddresses=C,this.phoneNumbers=$,this.web3Wallets=P,this.externalAccounts=N,this.samlAccounts=j,this.lastActiveAt=W,this.createOrganizationEnabled=Z,this.createOrganizationsLimit=F,this.deleteSelfEnabled=Y,this.legalAcceptedAt=re,this.locale=ie,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new dN(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(n=>AR.fromJSON(n)),(e.phone_numbers||[]).map(n=>WR.fromJSON(n)),(e.web3_wallets||[]).map(n=>kZ.fromJSON(n)),(e.external_accounts||[]).map(n=>YH.fromJSON(n)),(e.saml_accounts||[]).map(n=>bZ.fromJSON(n)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at,e.locale);return r._raw=e,r}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},PZ=class pN{static{s(this,"_WaitlistEntry")}constructor(e,r,n,o,i,a,c){this.id=e,this.emailAddress=r,this.status=n,this.invitation=o,this.createdAt=i,this.updatedAt=a,this.isLocked=c}static fromJSON(e){return new pN(e.id,e.email_address,e.status,e.invitation&&jR.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}},mN=class fN{static{s(this,"_Feature")}constructor(e,r,n,o,i){this.id=e,this.name=r,this.description=n,this.slug=o,this.avatarUrl=i}static fromJSON(e){return new fN(e.id,e.name,e.description??null,e.slug,e.avatar_url??null)}},hN=class gN{static{s(this,"_BillingPlan")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y){this.id=e,this.name=r,this.slug=n,this.description=o,this.isDefault=i,this.isRecurring=a,this.hasBaseFee=c,this.publiclyVisible=l,this.fee=d,this.annualFee=p,this.annualMonthlyFee=m,this.forPayerType=h,this.features=y}static fromJSON(e){let r=s(n=>n?{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}:null,"formatAmountJSON");return new gN(e.id,e.name,e.slug,e.description??null,e.is_default,e.is_recurring,e.has_base_fee,e.publicly_visible,r(e.fee),r(e.annual_fee),r(e.annual_monthly_fee),e.for_payer_type,(e.features??[]).map(n=>mN.fromJSON(n)))}},yN=class vN{static{s(this,"_BillingSubscriptionItem")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w){this.id=e,this.status=r,this.planPeriod=n,this.periodStart=o,this.nextPayment=i,this.amount=a,this.plan=c,this.planId=l,this.createdAt=d,this.updatedAt=p,this.periodEnd=m,this.canceledAt=h,this.pastDueAt=y,this.endedAt=g,this.payerId=f,this.isFreeTrial=_,this.lifetimePaid=w}static fromJSON(e){function r(n){return n&&{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}}return s(r,"formatAmountJSON"),new vN(e.id,e.status,e.plan_period,e.period_start,e.next_payment,r(e.amount)??void 0,e.plan?hN.fromJSON(e.plan):null,e.plan_id??null,e.created_at,e.updated_at,e.period_end,e.canceled_at,e.past_due_at,e.ended_at,e.payer_id,e.is_free_trial,r(e.lifetime_paid)??void 0)}},AZ=class _N{static{s(this,"_BillingSubscription")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.status=r,this.payerId=n,this.createdAt=o,this.updatedAt=i,this.activeAt=a,this.pastDueAt=c,this.subscriptionItems=l,this.nextPayment=d,this.eligibleForFreeTrial=p}static fromJSON(e){let r=e.next_payment?{date:e.next_payment.date,amount:{amount:e.next_payment.amount.amount,amountFormatted:e.next_payment.amount.amount_formatted,currency:e.next_payment.amount.currency,currencySymbol:e.next_payment.amount.currency_symbol}}:null;return new _N(e.id,e.status,e.payer_id,e.created_at,e.updated_at,e.active_at??null,e.past_due_at??null,(e.subscription_items??[]).map(n=>yN.fromJSON(n)),r,e.eligible_for_free_trial??!1)}};function CZ(t){let e,r;return Array.isArray(t)?{data:t.map(o=>Vw(o))}:OZ(t)?(e=t.data.map(n=>Vw(n)),r=t.total_count,{data:e,totalCount:r}):{data:Vw(t)}}s(CZ,"deserialize");function OZ(t){return!t||typeof t!="object"||!("data"in t)?!1:Array.isArray(t.data)&&t.data!==void 0}s(OZ,"isPaginated");function $Z(t){return t.total_count}s($Z,"getCount");function Vw(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return WH.fromJSON(t);switch(t.object){case Ge.AccountlessApplication:return qH.fromJSON(t);case Ge.ActorToken:return FH.fromJSON(t);case Ge.AllowlistIdentifier:return BH.fromJSON(t);case Ge.ApiKey:return VH.fromJSON(t);case Ge.BlocklistIdentifier:return HH.fromJSON(t);case Ge.Client:return JH.fromJSON(t);case Ge.Cookies:return GH.fromJSON(t);case Ge.Domain:return QH.fromJSON(t);case Ge.EmailAddress:return AR.fromJSON(t);case Ge.Email:return XH.fromJSON(t);case Ge.IdpOAuthAccessToken:return eZ.fromJSON(t);case Ge.Instance:return tZ.fromJSON(t);case Ge.InstanceRestrictions:return rZ.fromJSON(t);case Ge.InstanceSettings:return nZ.fromJSON(t);case Ge.Invitation:return jR.fromJSON(t);case Ge.JwtTemplate:return cZ.fromJSON(t);case Ge.Machine:return oZ.fromJSON(t);case Ge.MachineScope:return iZ.fromJSON(t);case Ge.MachineSecretKey:return sZ.fromJSON(t);case Ge.M2MToken:return aZ.fromJSON(t);case Ge.OauthAccessToken:return uZ.fromJSON(t);case Ge.OAuthApplication:return lZ.fromJSON(t);case Ge.Organization:return VR.fromJSON(t);case Ge.OrganizationInvitation:return dZ.fromJSON(t);case Ge.OrganizationMembership:return pZ.fromJSON(t);case Ge.OrganizationSettings:return fZ.fromJSON(t);case Ge.PhoneNumber:return WR.fromJSON(t);case Ge.ProxyCheck:return hZ.fromJSON(t);case Ge.RedirectUrl:return gZ.fromJSON(t);case Ge.SamlConnection:return yZ.fromJSON(t);case Ge.SignInToken:return wZ.fromJSON(t);case Ge.SignUpAttempt:return xZ.fromJSON(t);case Ge.Session:return vR.fromJSON(t);case Ge.SmsMessage:return TZ.fromJSON(t);case Ge.Token:return EZ.fromJSON(t);case Ge.TotalCount:return $Z(t);case Ge.User:return IZ.fromJSON(t);case Ge.WaitlistEntry:return PZ.fromJSON(t);case Ge.BillingPlan:return hN.fromJSON(t);case Ge.BillingSubscription:return AZ.fromJSON(t);case Ge.BillingSubscriptionItem:return yN.fromJSON(t);case Ge.Feature:return mN.fromJSON(t);default:return t}}s(Vw,"jsonToObject");function nl(t){return RZ(s(async r=>{let{secretKey:n,machineSecretKey:o,useMachineSecretKey:i=!1,requireSecretKey:a=!0,apiUrl:c=sR,apiVersion:l=aR,userAgent:d=cR,skipApiVersionInUrl:p=!1}=t,{path:m,method:h,queryParams:y,headerParams:g,bodyParams:f,formData:_,options:w}=r,{deepSnakecaseBodyParamKeys:b=!1}=w||{};a&&uR(n);let S=p?oe(c,m):oe(c,l,m),k=new URL(S);if(y){let $=Y$({...y});for(let[P,N]of Object.entries($))N&&[N].flat().forEach(j=>k.searchParams.append(P,j))}let R=new Headers({"Clerk-API-Version":Yw,[Ae.Headers.UserAgent]:d,...g}),O=Ae.Headers.Authorization;R.has(O)||(i&&o?R.set(O,`Bearer ${o}`):n&&R.set(O,`Bearer ${n}`));let C;try{if(_)C=await xo.fetch(k.href,{method:h,headers:R,body:_});else{R.set("Content-Type","application/json");let N=s(()=>{if(!(h!=="GET"&&f&&Object.keys(f).length>0))return null;let W=s(Z=>Y$(Z,{deep:b}),"formatKeys");return{body:JSON.stringify(Array.isArray(f)?f.map(W):W(f))}},"buildBody");C=await xo.fetch(k.href,{method:h,headers:R,...N()})}let P=await(C?.headers&&C.headers?.get(Ae.Headers.ContentType)===Ae.ContentTypes.Json?C.json():C.text());return C.ok?{...CZ(P),errors:null}:{data:null,errors:tR(P),status:C?.status,statusText:C?.statusText,clerkTraceId:Hw(P,C?.headers),retryAfter:eR(C?.headers)}}catch($){return $ instanceof Error?{data:null,errors:[{code:"unexpected_error",message:$.message||"Unexpected error"}],clerkTraceId:Hw($,C?.headers)}:{data:null,errors:tR($),status:C?.status,statusText:C?.statusText,clerkTraceId:Hw($,C?.headers),retryAfter:eR(C?.headers)}}},"requestFn"))}s(nl,"buildRequest");function Hw(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:e?.get("cf-ray")||""}s(Hw,"getTraceId");function eR(t){let e=t?.get("Retry-After");if(!e)return;let r=parseInt(e,10);if(!isNaN(r))return r}s(eR,"getRetryAfter");function tR(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(Tw):[]}return[]}s(tR,"parseErrors");function RZ(t){return async(...e)=>{let{data:r,errors:n,totalCount:o,status:i,statusText:a,clerkTraceId:c,retryAfter:l}=await t(...e);if(n){let d=new Lm(a||"",{data:[],status:i,clerkTraceId:c,retryAfter:l});throw d.errors=n,d}return typeof o<"u"?{data:r,totalCount:o}:r}}s(RZ,"withLegacyRequestReturn");function Ha(t){let e=nl(t);return{__experimental_accountlessApplications:new GV(nl({...t,requireSecretKey:!1})),actorTokens:new KV(e),allowlistIdentifiers:new WV(e),apiKeys:new QV(nl({...t,skipApiVersionInUrl:!0})),betaFeatures:new YV(e),blocklistIdentifiers:new eH(e),billing:new CH(e),clients:new tH(e),domains:new rH(e),emailAddresses:new nH(e),idPOAuthAccessToken:new iH(nl({...t,skipApiVersionInUrl:!0})),instance:new sH(e),invitations:new aH(e),jwks:new dH(e),jwtTemplates:new pH(e),machines:new cH(e),m2m:new uH(nl({...t,skipApiVersionInUrl:!0,requireSecretKey:!1,useMachineSecretKey:!0})),oauthApplications:new fH(e),organizations:new mH(e),phoneNumbers:new hH(e),proxyChecks:new yH(e),redirectUrls:new vH(e),samlConnections:new _H(e),sessions:new bH(e),signInTokens:new wH(e),signUps:new SH(e),testingTokens:new TH(e),users:new EH(e),waitlistEntries:new kH(e),webhooks:new IH(e)}}s(Ha,"createBackendApiClient");var eS="mt_",tS="oat_",rS="ak_",NZ=[eS,tS,rS];function Gw(t){return NZ.some(e=>t.startsWith(e))}s(Gw,"isMachineTokenByPrefix");function Ww(t){if(t.startsWith(eS))return Je.M2MToken;if(t.startsWith(tS))return Je.OAuthToken;if(t.startsWith(rS))return Je.ApiKey;throw new Error("Unknown machine token type")}s(Ww,"getMachineTokenType");var bN=s((t,e)=>t?e==="any"?!0:(Array.isArray(e)?e:[e]).includes(t):!1,"isTokenTypeAccepted");var ef=s(t=>()=>{let e={...t};return e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}},"createDebug");function DZ(t,e,r){let{actor:n,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m}=R$(r),h=Ha(t),y=UZ({sessionId:o,sessionToken:e,fetcher:s(async(g,f,_)=>(await h.sessions.getToken(g,f||"",_)).jwt,"fetcher")});return{tokenType:Je.SessionToken,actor:n,sessionClaims:r,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m,getToken:y,has:Mw({orgId:c,orgRole:l,orgPermissions:p,userId:a,factorVerificationAge:m,features:r.fea||"",plans:r.pla||""}),debug:ef({...t,sessionToken:e}),isAuthenticated:!0}}s(DZ,"signedInAuthObject");function wN(t,e){return{tokenType:Je.SessionToken,sessionClaims:null,sessionId:null,sessionStatus:e??null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:ef(t),isAuthenticated:!1}}s(wN,"signedOutAuthObject");function jZ(t,e,r,n){let o={id:r.id,subject:r.subject,getToken:s(()=>Promise.resolve(e),"getToken"),has:s(()=>!1,"has"),debug:ef(n),isAuthenticated:!0};switch(t){case Je.ApiKey:{let i=r;return{...o,tokenType:t,name:i.name,claims:i.claims,scopes:i.scopes,userId:i.subject.startsWith("user_")?i.subject:null,orgId:i.subject.startsWith("org_")?i.subject:null}}case Je.M2MToken:{let i=r;return{...o,tokenType:t,claims:i.claims,scopes:i.scopes,machineId:i.subject}}case Je.OAuthToken:{let i=r;return{...o,tokenType:t,scopes:i.scopes,userId:i.subject,clientId:i.clientId}}default:throw new Error(`Invalid token type: ${t}`)}}s(jZ,"authenticatedMachineObject");function MZ(t,e){let r={id:null,subject:null,scopes:null,has:s(()=>!1,"has"),getToken:s(()=>Promise.resolve(null),"getToken"),debug:ef(e),isAuthenticated:!1};switch(t){case Je.ApiKey:return{...r,tokenType:t,name:null,claims:null,scopes:null,userId:null,orgId:null};case Je.M2MToken:return{...r,tokenType:t,claims:null,scopes:null,machineId:null};case Je.OAuthToken:return{...r,tokenType:t,scopes:null,userId:null,clientId:null};default:throw new Error(`Invalid token type: ${t}`)}}s(MZ,"unauthenticatedMachineObject");function zZ(){return{isAuthenticated:!1,tokenType:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:s(()=>({}),"debug")}}s(zZ,"invalidTokenAuthObject");var UZ=s(t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(o={})=>n?o.template||o.expiresInSeconds!==void 0?e(n,o.template,o.expiresInSeconds):r:null},"createGetToken");var il={SignedIn:"signed-in",SignedOut:"signed-out",Handshake:"handshake"},er={ClientUATWithoutSessionToken:"client-uat-but-no-session-token",DevBrowserMissing:"dev-browser-missing",DevBrowserSync:"dev-browser-sync",PrimaryRespondsToSyncing:"primary-responds-to-syncing",PrimaryDomainCrossOriginSync:"primary-domain-cross-origin-sync",SatelliteCookieNeedsSyncing:"satellite-needs-syncing",SessionTokenAndUATMissing:"session-token-and-uat-missing",SessionTokenMissing:"session-token-missing",SessionTokenExpired:"session-token-expired",SessionTokenIATBeforeClientUAT:"session-token-iat-before-client-uat",SessionTokenNBF:"session-token-nbf",SessionTokenIatInTheFuture:"session-token-iat-in-the-future",SessionTokenWithoutClientUAT:"session-token-but-no-client-uat",ActiveOrganizationMismatch:"active-organization-mismatch",TokenTypeMismatch:"token-type-mismatch",UnexpectedError:"unexpected-error"};function Bi(t){let{authenticateContext:e,headers:r=new Headers,token:n}=t,o=s((({treatPendingAsSignedOut:i=!0}={})=>{if(t.tokenType===Je.SessionToken){let{sessionClaims:c}=t,l=DZ(e,n,c);return i&&l.sessionStatus==="pending"?wN(void 0,l.sessionStatus):l}let{machineData:a}=t;return jZ(t.tokenType,n,a,e)}),"toAuth");return{status:il.SignedIn,reason:null,message:null,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!0,isAuthenticated:!0,tokenType:t.tokenType,toAuth:o,headers:r,token:n}}s(Bi,"signedIn");function Cn(t){let{authenticateContext:e,headers:r=new Headers,reason:n,message:o="",tokenType:i}=t,a=s((()=>i===Je.SessionToken?wN({...e,status:il.SignedOut,reason:n,message:o}):MZ(i,{reason:n,message:o,headers:r})),"toAuth");return nS({status:il.SignedOut,reason:n,message:o,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:i,toAuth:a,headers:r,token:null})}s(Cn,"signedOut");function LZ(t,e,r="",n){return nS({status:il.Handshake,reason:e,message:r,publishableKey:t.publishableKey||"",isSatellite:t.isSatellite||!1,domain:t.domain||"",proxyUrl:t.proxyUrl||"",signInUrl:t.signInUrl||"",signUpUrl:t.signUpUrl||"",afterSignInUrl:t.afterSignInUrl||"",afterSignUpUrl:t.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:Je.SessionToken,toAuth:s(()=>null,"toAuth"),headers:n,token:null})}s(LZ,"handshake");function qZ(){let t=zZ();return nS({status:il.SignedOut,reason:er.TokenTypeMismatch,message:"",proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",signInUrl:"",signUpUrl:"",afterSignInUrl:"",afterSignUpUrl:"",isSignedIn:!1,isAuthenticated:!1,tokenType:null,toAuth:s(()=>t,"toAuth"),headers:new Headers,token:null})}s(qZ,"signedOutInvalidToken");var nS=s(t=>{let e=new Headers(t.headers||{});if(t.message)try{e.set(Ae.Headers.AuthMessage,t.message)}catch{}if(t.reason)try{e.set(Ae.Headers.AuthReason,t.reason)}catch{}if(t.status)try{e.set(Ae.Headers.AuthStatus,t.status)}catch{}return t.headers=e,t},"withDebugHeaders"),FZ=class extends URL{static{s(this,"ClerkUrl")}isCrossOrigin(t){return this.origin!==new URL(t.toString()).origin}},rR=s((...t)=>new FZ(...t),"createClerkUrl"),nR=class extends Request{static{s(this,"ClerkRequest")}constructor(t,e){let r=typeof t!="string"&&"url"in t?t.url:String(t);super(r,e||typeof t=="string"?void 0:t),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(t){let e=new URL(t.url),r=t.headers.get(Ae.Headers.ForwardedProto),n=t.headers.get(Ae.Headers.ForwardedHost),o=t.headers.get(Ae.Headers.Host),i=e.protocol,a=this.getFirstValueFromHeader(n)??o,c=this.getFirstValueFromHeader(r)??i?.replace(/[:/]/,""),l=a&&c?`${c}://${a}`:e.origin;return l===e.origin?rR(e):rR(e.pathname+e.search,l)}getFirstValueFromHeader(t){return t?.split(",")[0]}parseCookies(t){let e=(0,SN.parse)(this.decodeCookieValue(t.headers.get("cookie")||""));return new Map(Object.entries(e))}decodeCookieValue(t){return t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},BZ=s((...t)=>t[0]instanceof nR?t[0]:new nR(...t),"createClerkRequest"),xN=s(t=>t.split(";")[0]?.split("=")[0],"getCookieName"),TN=s(t=>t.split(";")[0]?.split("=")[1],"getCookieValue"),tf={},Qw=0;function Xw(t){return tf[t]}s(Xw,"getFromCache");function VZ(){return Object.values(tf)}s(VZ,"getCacheValues");function EN(t,e,r=!0){tf[t]=e,Qw=r?Date.now():-1}s(EN,"setInCache");var HZ="-----BEGIN PUBLIC KEY-----",ZZ="-----END PUBLIC KEY-----",JZ="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",KZ="IDAQAB";function kN(t){let{kid:e,pem:r}=t,n=`local-${e}`,o=Xw(n);if(o)return o;if(!r)throw new bt({action:vr.SetClerkJWTKey,message:"Missing local JWK.",reason:tt.LocalJWKMissing});let i=r.replace(/\r\n|\n|\r/g,"").replace(HZ,"").replace(ZZ,"").replace(JZ,"").replace(KZ,"").replace(/\+/g,"-").replace(/\//g,"_"),a={kid:n,kty:"RSA",alg:"RS256",n:i,e:"AQAB"};return EN(n,a,!1),a}s(kN,"loadClerkJwkFromPem");async function IN(t){let{secretKey:e,apiUrl:r=sR,apiVersion:n=aR,kid:o,skipJwksCache:i}=t;if(i||WZ()||!Xw(o)){if(!e)throw new bt({action:vr.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:tt.RemoteJWKFailedToLoad});let c=s(()=>GZ(r,e,n),"fetcher"),{keys:l}=await zm(c);if(!l||!l.length)throw new bt({action:vr.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:tt.RemoteJWKFailedToLoad});l.forEach(d=>EN(d.kid,d))}let a=Xw(o);if(!a){let l=VZ().map(d=>d.kid).sort().join(", ");throw new bt({action:`Go to your Dashboard and validate your secret and public keys are correct. ${vr.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${o}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${l}`,reason:tt.JWKKidMismatch})}return a}s(IN,"loadClerkJWKFromRemote");async function GZ(t,e,r){if(!e)throw new bt({action:vr.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:tt.RemoteJWKFailedToLoad});let n=new URL(t);n.pathname=oe(n.pathname,r,"/jwks");let o=await xo.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Clerk-API-Version":Yw,"Content-Type":"application/json","User-Agent":cR}});if(!o.ok){let i=await o.json(),a=QZ(i?.errors,S$.InvalidSecretKey);if(a){let c=tt.InvalidSecretKey;throw new bt({action:vr.ContactSupport,message:a.message,reason:c})}throw new bt({action:vr.ContactSupport,message:`Error loading Clerk JWKS from ${n.href} with code=${o.status}`,reason:tt.RemoteJWKFailedToLoad})}return o.json()}s(GZ,"fetchJWKSFromBAPI");function WZ(){if(Qw===-1)return!1;let t=Date.now()-Qw>=UV*1e3;return t&&(tf={}),t}s(WZ,"cacheHasExpired");var QZ=s((t,e)=>t?t.find(r=>r.code===e):null,"getErrorObjectByCode");async function Vi(t,e){let{data:r,errors:n}=Gn(t);if(n)return{errors:n};let{header:o}=r,{kid:i}=o;try{let a;if(e.jwtKey)a=kN({kid:i,pem:e.jwtKey});else if(e.secretKey)a=await IN({...e,kid:i});else return{errors:[new bt({action:vr.SetClerkJWTKey,message:"Failed to resolve JWK during verification.",reason:tt.JWKFailedToResolve})]};return await P$(t,{...e,key:a})}catch(a){return{errors:[a]}}}s(Vi,"verifyToken");function oS(t,e,r){if(Iw(e)){let n,o;switch(e.status){case 401:n=Xu.InvalidSecretKey,o=e.errors[0]?.message||"Invalid secret key";break;case 404:n=Xu.TokenInvalid,o=r;break;default:n=Xu.UnexpectedError,o="Unexpected error"}return{data:void 0,tokenType:t,errors:[new qm({message:o,code:n,status:e.status})]}}return{data:void 0,tokenType:t,errors:[new qm({message:"Unexpected error",code:Xu.UnexpectedError,status:e.status})]}}s(oS,"handleClerkAPIError");async function XZ(t,e){try{return{data:await Ha(e).m2m.verifyToken({token:t}),tokenType:Je.M2MToken,errors:void 0}}catch(r){return oS(Je.M2MToken,r,"Machine token not found")}}s(XZ,"verifyM2MToken");async function YZ(t,e){try{return{data:await Ha(e).idPOAuthAccessToken.verifyAccessToken(t),tokenType:Je.OAuthToken,errors:void 0}}catch(r){return oS(Je.OAuthToken,r,"OAuth token not found")}}s(YZ,"verifyOAuthToken");async function e8(t,e){try{return{data:await Ha(e).apiKeys.verifySecret(t),tokenType:Je.ApiKey,errors:void 0}}catch(r){return oS(Je.ApiKey,r,"API key not found")}}s(e8,"verifyAPIKey");async function oR(t,e){if(t.startsWith(eS))return XZ(t,e);if(t.startsWith(tS))return YZ(t,e);if(t.startsWith(rS))return e8(t,e);throw new Error("Unknown machine token type")}s(oR,"verifyMachineAuthToken");async function t8(t,{key:e}){let{data:r,errors:n}=Gn(t);if(n)throw n[0];let{header:o,payload:i}=r,{typ:a,alg:c}=o;$w(a),Rw(c);let{data:l,errors:d}=await Nw(r,e);if(d)throw new bt({reason:tt.TokenVerificationFailed,message:`Error verifying handshake token. ${d[0]}`});if(!l)throw new bt({reason:tt.TokenInvalidSignature,message:"Handshake signature is invalid."});return i}s(t8,"verifyHandshakeJwt");async function r8(t,e){let{secretKey:r,apiUrl:n,apiVersion:o,jwksCacheTtlInMs:i,jwtKey:a,skipJwksCache:c}=e,{data:l,errors:d}=Gn(t);if(d)throw d[0];let{kid:p}=l.header,m;if(a)m=kN({kid:p,pem:a});else if(r)m=await IN({secretKey:r,apiUrl:n,apiVersion:o,kid:p,jwksCacheTtlInMs:i,skipJwksCache:c});else throw new bt({action:vr.SetClerkJWTKey,message:"Failed to resolve JWK during handshake verification.",reason:tt.JWKFailedToResolve});return t8(t,{key:m})}s(r8,"verifyHandshakeToken");var n8=class{static{s(this,"HandshakeService")}constructor(t,e,r){this.authenticateContext=t,this.options=e,this.organizationMatcher=r}isRequestEligibleForHandshake(){let{accept:t,secFetchDest:e}=this.authenticateContext;return!!(e==="document"||e==="iframe"||!e&&t?.startsWith("text/html"))}buildRedirectToHandshake(t){if(!this.authenticateContext?.clerkUrl)throw new Error("Missing clerkUrl in authenticateContext");let e=this.removeDevBrowserFromURL(this.authenticateContext.clerkUrl),r=this.authenticateContext.frontendApi.startsWith("http")?this.authenticateContext.frontendApi:`https://${this.authenticateContext.frontendApi}`;r=r.replace(/\/+$/,"")+"/";let n=new URL("v1/client/handshake",r);n.searchParams.append("redirect_url",e?.href||""),n.searchParams.append("__clerk_api_version",Yw),n.searchParams.append(Ae.QueryParameters.SuffixedCookies,this.authenticateContext.usesSuffixedCookies().toString()),n.searchParams.append(Ae.QueryParameters.HandshakeReason,t),n.searchParams.append(Ae.QueryParameters.HandshakeFormat,"nonce"),this.authenticateContext.instanceType==="development"&&this.authenticateContext.devBrowserToken&&n.searchParams.append(Ae.QueryParameters.DevBrowser,this.authenticateContext.devBrowserToken);let o=this.getOrganizationSyncTarget(this.authenticateContext.clerkUrl,this.organizationMatcher);return o&&this.getOrganizationSyncQueryParams(o).forEach((a,c)=>{n.searchParams.append(c,a)}),new Headers({[Ae.Headers.Location]:n.href})}async getCookiesFromHandshake(){let t=[];if(this.authenticateContext.handshakeNonce)try{let e=await this.authenticateContext.apiClient?.clients.getHandshakePayload({nonce:this.authenticateContext.handshakeNonce});e&&t.push(...e.directives)}catch(e){console.error("Clerk: HandshakeService: error getting handshake payload:",e)}else if(this.authenticateContext.handshakeToken){let e=await r8(this.authenticateContext.handshakeToken,this.authenticateContext);e&&Array.isArray(e.handshake)&&t.push(...e.handshake)}return t}async resolveHandshake(){let t=new Headers({"Access-Control-Allow-Origin":"null","Access-Control-Allow-Credentials":"true"}),e=await this.getCookiesFromHandshake(),r="";if(e.forEach(i=>{t.append("Set-Cookie",i),xN(i).startsWith(Ae.Cookies.Session)&&(r=TN(i))}),this.authenticateContext.instanceType==="development"){let i=new URL(this.authenticateContext.clerkUrl);i.searchParams.delete(Ae.QueryParameters.Handshake),i.searchParams.delete(Ae.QueryParameters.HandshakeHelp),i.searchParams.delete(Ae.QueryParameters.DevBrowser),i.searchParams.delete(Ae.QueryParameters.HandshakeNonce),t.append(Ae.Headers.Location,i.toString()),t.set(Ae.Headers.CacheControl,"no-store")}if(r==="")return Cn({tokenType:Je.SessionToken,authenticateContext:this.authenticateContext,reason:er.SessionTokenMissing,message:"",headers:t});let{data:n,errors:[o]=[]}=await Vi(r,this.authenticateContext);if(n)return Bi({tokenType:Je.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:n,headers:t,token:r});if(this.authenticateContext.instanceType==="development"&&(o?.reason===tt.TokenExpired||o?.reason===tt.TokenNotActiveYet||o?.reason===tt.TokenIatInTheFuture)){let i=new bt({action:o.action,message:o.message,reason:o.reason});i.tokenCarrier="cookie",console.error(`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will attempt to account for the clock skew in development.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${i.getFullMessage()}`);let{data:a,errors:[c]=[]}=await Vi(r,{...this.authenticateContext,clockSkewInMs:864e5});if(a)return Bi({tokenType:Je.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:a,headers:t,token:r});throw new Error(c?.message||"Clerk: Handshake retry failed.")}throw new Error(o?.message||"Clerk: Handshake failed.")}handleTokenVerificationErrorInDevelopment(t){if(t.reason===tt.TokenInvalidSignature){let e="Clerk: Handshake token verification failed due to an invalid signature. If you have switched Clerk keys locally, clear your cookies and try again.";throw new Error(e)}throw new Error(`Clerk: Handshake token verification failed: ${t.getFullMessage()}.`)}checkAndTrackRedirectLoop(t){if(this.authenticateContext.handshakeRedirectLoopCounter===3)return!0;let e=this.authenticateContext.handshakeRedirectLoopCounter+1,r=Ae.Cookies.RedirectCount;return t.append("Set-Cookie",`${r}=${e}; SameSite=Lax; HttpOnly; Max-Age=2`),!1}removeDevBrowserFromURL(t){let e=new URL(t);return e.searchParams.delete(Ae.QueryParameters.DevBrowser),e.searchParams.delete(Ae.QueryParameters.LegacyDevBrowser),e}getOrganizationSyncTarget(t,e){return e.findTarget(t)}getOrganizationSyncQueryParams(t){let e=new Map;return t.type==="personalAccount"&&e.set("organization_id",""),t.type==="organization"&&(t.organizationId&&e.set("organization_id",t.organizationId),t.organizationSlug&&e.set("organization_id",t.organizationSlug)),e}},o8=class{static{s(this,"OrganizationMatcher")}constructor(t){this.organizationPattern=this.createMatcher(t?.organizationPatterns),this.personalAccountPattern=this.createMatcher(t?.personalAccountPatterns)}createMatcher(t){if(!t)return null;try{return zw(t)}catch(e){throw new Error(`Invalid pattern "${t}": ${e}`)}}findTarget(t){let e=this.findOrganizationTarget(t);return e||this.findPersonalAccountTarget(t)}findOrganizationTarget(t){if(!this.organizationPattern)return null;try{let e=this.organizationPattern(t.pathname);if(!e||!("params"in e))return null;let r=e.params;return r.id?{type:"organization",organizationId:r.id}:r.slug?{type:"organization",organizationSlug:r.slug}:null}catch(e){return console.error("Failed to match organization pattern:",e),null}}findPersonalAccountTarget(t){if(!this.personalAccountPattern)return null;try{return this.personalAccountPattern(t.pathname)?{type:"personalAccount"}:null}catch(e){return console.error("Failed to match personal account pattern:",e),null}}},Wn={NonEligibleNoCookie:"non-eligible-no-refresh-cookie",NonEligibleNonGet:"non-eligible-non-get",InvalidSessionToken:"invalid-session-token",MissingApiClient:"missing-api-client",MissingSessionToken:"missing-session-token",MissingRefreshToken:"missing-refresh-token",ExpiredSessionTokenDecodeFailed:"expired-session-token-decode-failed",ExpiredSessionTokenMissingSidClaim:"expired-session-token-missing-sid-claim",FetchError:"fetch-error",UnexpectedSDKError:"unexpected-sdk-error",UnexpectedBAPIError:"unexpected-bapi-error"};function i8(t,e){if(!t&&Dm(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}s(i8,"assertSignInUrlExists");function s8(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}s(s8,"assertProxyUrlOrDomain");function a8(t,e){let r;try{r=new URL(t)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===e)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}s(a8,"assertSignInUrlFormatAndOrigin");function c8(t){if(!t.machineSecretKey&&!t.secretKey)throw new Error("Machine token authentication requires either a Machine secret key or a Clerk secret key. Ensure a Clerk secret key or Machine secret key is set.")}s(c8,"assertMachineSecretOrSecretKey");function u8(t,e,r){return t.reason===tt.TokenExpired&&!!e.refreshTokenInCookie&&r.method==="GET"}s(u8,"isRequestEligibleForRefresh");function iR(t,e,r){return bN(t,e)?null:Cn({tokenType:typeof e=="string"?e:t,authenticateContext:r,reason:er.TokenTypeMismatch})}s(iR,"checkTokenTypeMismatch");function l8(t,e){let r=null,{tokenInHeader:n}=e;n&&(Gw(n)?r=Ww(n):r=Je.SessionToken);let o=r??Je.SessionToken;return bN(o,t)}s(l8,"isTokenTypeInAcceptedArray");var d8=s((async(t,e)=>{let r=await ZV(BZ(t),e),n=e.acceptsToken??Je.SessionToken;n!==Je.M2MToken&&(uR(r.secretKey),r.isSatellite&&(i8(r.signInUrl,r.secretKey),r.signInUrl&&r.origin&&a8(r.signInUrl,r.origin),s8(r.proxyUrl||r.domain))),n===Je.M2MToken&&c8(r);let o=new o8(e.organizationSyncOptions),i=new n8(r,{organizationSyncOptions:e.organizationSyncOptions},o);async function a(_){if(!e.apiClient)return{data:null,error:{message:"An apiClient is needed to perform token refresh.",cause:{reason:Wn.MissingApiClient}}};let{sessionToken:w,refreshTokenInCookie:b}=_;if(!w)return{data:null,error:{message:"Session token must be provided.",cause:{reason:Wn.MissingSessionToken}}};if(!b)return{data:null,error:{message:"Refresh token must be provided.",cause:{reason:Wn.MissingRefreshToken}}};let{data:S,errors:k}=Gn(w);if(!S||k)return{data:null,error:{message:"Unable to decode the expired session token.",cause:{reason:Wn.ExpiredSessionTokenDecodeFailed,errors:k}}};if(!S?.payload?.sid)return{data:null,error:{message:"Expired session token is missing the `sid` claim.",cause:{reason:Wn.ExpiredSessionTokenMissingSidClaim}}};try{return{data:(await e.apiClient.sessions.refreshSession(S.payload.sid,{format:"cookie",suffixed_cookies:_.usesSuffixedCookies(),expired_token:w||"",refresh_token:b||"",request_origin:_.clerkUrl.origin,request_headers:Object.fromEntries(Array.from(t.headers.entries()).map(([O,C])=>[O,[C]]))})).cookies,error:null}}catch(R){return R?.errors?.length?R.errors[0].code==="unexpected_error"?{data:null,error:{message:"Fetch unexpected error",cause:{reason:Wn.FetchError,errors:R.errors}}}:{data:null,error:{message:R.errors[0].code,cause:{reason:R.errors[0].code,errors:R.errors}}}:{data:null,error:{message:"Unexpected Server/BAPI error",cause:{reason:Wn.UnexpectedBAPIError,errors:[R]}}}}}s(a,"refreshToken");async function c(_){let{data:w,error:b}=await a(_);if(!w||w.length===0)return{data:null,error:b};let S=new Headers,k="";w.forEach(C=>{S.append("Set-Cookie",C),xN(C).startsWith(Ae.Cookies.Session)&&(k=TN(C))});let{data:R,errors:O}=await Vi(k,_);return O?{data:null,error:{message:"Clerk: unable to verify refreshed session token.",cause:{reason:Wn.InvalidSessionToken,errors:O}}}:{data:{jwtPayload:R,sessionToken:k,headers:S},error:null}}s(c,"attemptRefresh");function l(_,w,b,S){if(!i.isRequestEligibleForHandshake())return Cn({tokenType:Je.SessionToken,authenticateContext:_,reason:w,message:b});let k=S??i.buildRedirectToHandshake(w);return k.get(Ae.Headers.Location)&&k.set(Ae.Headers.CacheControl,"no-store"),i.checkAndTrackRedirectLoop(k)?(console.log("Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard."),Cn({tokenType:Je.SessionToken,authenticateContext:_,reason:w,message:b})):LZ(_,w,b,k)}s(l,"handleMaybeHandshakeStatus");function d(_,w){let b=o.findTarget(_.clerkUrl);if(!b)return null;let S=!1;if(b.type==="organization"&&(b.organizationSlug&&b.organizationSlug!==w.orgSlug&&(S=!0),b.organizationId&&b.organizationId!==w.orgId&&(S=!0)),b.type==="personalAccount"&&w.orgId&&(S=!0),!S)return null;if(_.handshakeRedirectLoopCounter>=3)return console.warn("Clerk: Organization activation handshake loop detected. This is likely due to an invalid organization ID or slug. Skipping organization activation."),null;let k=l(_,er.ActiveOrganizationMismatch,"");return k.status!=="handshake"?null:k}s(d,"handleMaybeOrganizationSyncHandshake");async function p(){let{tokenInHeader:_}=r;try{let{data:w,errors:b}=await Vi(_,r);if(b)throw b[0];return Bi({tokenType:Je.SessionToken,authenticateContext:r,sessionClaims:w,headers:new Headers,token:_})}catch(w){return h(w,"header")}}s(p,"authenticateRequestWithTokenInHeader");async function m(){let _=r.clientUat,w=!!r.sessionTokenInCookie,b=!!r.devBrowserToken;if(r.handshakeNonce||r.handshakeToken)try{return await i.resolveHandshake()}catch(C){C instanceof bt&&r.instanceType==="development"?i.handleTokenVerificationErrorInDevelopment(C):console.error("Clerk: unable to resolve handshake:",C)}let S=r.isSatellite&&r.secFetchDest==="document";if(r.instanceType==="production"&&S)return l(r,er.SatelliteCookieNeedsSyncing,"");if(r.instanceType==="development"&&S&&!r.clerkUrl.searchParams.has(Ae.QueryParameters.ClerkSynced)){let C=new URL(r.signInUrl);C.searchParams.append(Ae.QueryParameters.ClerkRedirectUrl,r.clerkUrl.toString());let $=new Headers({[Ae.Headers.Location]:C.toString()});return l(r,er.SatelliteCookieNeedsSyncing,"",$)}let k=new URL(r.clerkUrl).searchParams.get(Ae.QueryParameters.ClerkRedirectUrl);if(r.instanceType==="development"&&!r.isSatellite&&k){let C=new URL(k);r.devBrowserToken&&C.searchParams.append(Ae.QueryParameters.DevBrowser,r.devBrowserToken),C.searchParams.append(Ae.QueryParameters.ClerkSynced,"true");let $=new Headers({[Ae.Headers.Location]:C.toString()});return l(r,er.PrimaryRespondsToSyncing,"",$)}if(r.instanceType==="development"&&r.clerkUrl.searchParams.has(Ae.QueryParameters.DevBrowser))return l(r,er.DevBrowserSync,"");if(r.instanceType==="development"&&!b)return l(r,er.DevBrowserMissing,"");if(!_&&!w)return Cn({tokenType:Je.SessionToken,authenticateContext:r,reason:er.SessionTokenAndUATMissing});if(!_&&w)return l(r,er.SessionTokenWithoutClientUAT,"");if(_&&!w)return l(r,er.ClientUATWithoutSessionToken,"");let{data:R,errors:O}=Gn(r.sessionTokenInCookie);if(O)return h(O[0],"cookie");if(R.payload.iat<r.clientUat)return l(r,er.SessionTokenIATBeforeClientUAT,"");try{let{data:C,errors:$}=await Vi(r.sessionTokenInCookie,r);if($)throw $[0];let P=Bi({tokenType:Je.SessionToken,authenticateContext:r,sessionClaims:C,headers:new Headers,token:r.sessionTokenInCookie});if(!r.isSatellite&&r.secFetchDest==="document"&&r.isCrossOriginReferrer()&&!r.isKnownClerkReferrer()&&r.handshakeRedirectLoopCounter===0)return l(r,er.PrimaryDomainCrossOriginSync,"Cross-origin request from satellite domain requires handshake");let j=P.toAuth();if(j.userId){let W=d(r,j);if(W)return W}return P}catch(C){return h(C,"cookie")}return Cn({tokenType:Je.SessionToken,authenticateContext:r,reason:er.UnexpectedError})}s(m,"authenticateRequestWithTokenInCookie");async function h(_,w){if(!(_ instanceof bt))return Cn({tokenType:Je.SessionToken,authenticateContext:r,reason:er.UnexpectedError});let b;if(u8(_,r,t)){let{data:k,error:R}=await c(r);if(k)return Bi({tokenType:Je.SessionToken,authenticateContext:r,sessionClaims:k.jwtPayload,headers:k.headers,token:k.sessionToken});R?.cause?.reason?b=R.cause.reason:b=Wn.UnexpectedSDKError}else t.method!=="GET"?b=Wn.NonEligibleNonGet:r.refreshTokenInCookie?b=null:b=Wn.NonEligibleNoCookie;return _.tokenCarrier=w,[tt.TokenExpired,tt.TokenNotActiveYet,tt.TokenIatInTheFuture].includes(_.reason)?l(r,m8({tokenError:_.reason,refreshError:b}),_.getFullMessage()):Cn({tokenType:Je.SessionToken,authenticateContext:r,reason:_.reason,message:_.getFullMessage()})}s(h,"handleSessionTokenError");function y(_,w){return w instanceof qm?Cn({tokenType:_,authenticateContext:r,reason:w.code,message:w.getFullMessage()}):Cn({tokenType:_,authenticateContext:r,reason:er.UnexpectedError})}s(y,"handleMachineError");async function g(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(!Gw(_))return Cn({tokenType:n,authenticateContext:r,reason:er.TokenTypeMismatch,message:""});let w=Ww(_),b=iR(w,n,r);if(b)return b;let{data:S,tokenType:k,errors:R}=await oR(_,r);return R?y(k,R[0]):Bi({tokenType:k,authenticateContext:r,machineData:S,token:_})}s(g,"authenticateMachineRequestWithTokenInHeader");async function f(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(Gw(_)){let S=Ww(_),k=iR(S,n,r);if(k)return k;let{data:R,tokenType:O,errors:C}=await oR(_,r);return C?y(O,C[0]):Bi({tokenType:O,authenticateContext:r,machineData:R,token:_})}let{data:w,errors:b}=await Vi(_,r);return b?h(b[0],"header"):Bi({tokenType:Je.SessionToken,authenticateContext:r,sessionClaims:w,token:_})}return s(f,"authenticateAnyRequestWithTokenInHeader"),Array.isArray(n)&&!l8(n,r)?qZ():r.tokenInHeader?n==="any"?f():n===Je.SessionToken?p():g():n===Je.OAuthToken||n===Je.ApiKey||n===Je.M2MToken?Cn({tokenType:n,authenticateContext:r,reason:"No token in header"}):m()}),"authenticateRequest"),p8=s(t=>{let{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}=t;return{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}},"debugRequestState"),m8=s(({tokenError:t,refreshError:e})=>{switch(t){case tt.TokenExpired:return`${er.SessionTokenExpired}-refresh-${e}`;case tt.TokenNotActiveYet:return er.SessionTokenNBF;case tt.TokenIatInTheFuture:return er.SessionTokenIatInTheFuture;default:return er.UnexpectedError}},"convertTokenVerificationErrorReasonToAuthErrorReason"),f8={secretKey:"",machineSecretKey:"",jwtKey:"",apiUrl:void 0,apiVersion:void 0,proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",audience:""};function PN(t){let e=U$(f8,t.options),r=t.apiClient;return{authenticateRequest:s((o,i={})=>{let{apiUrl:a,apiVersion:c}=e,l=U$(e,i);return d8(o,{...i,...l,apiUrl:a,apiVersion:c,apiClient:r})},"authenticateRequest2"),debugRequestState:p8}}s(PN,"createAuthenticateRequest");function AN(t){return async(...e)=>{let{data:r,errors:n}=await t(...e);if(n)throw n[0];return r}}s(AN,"withLegacyReturn");function h8(t){return t?t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}s(h8,"snakeToCamel");function g8(t){return t?t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}s(g8,"camelToSnake");var CN=s(t=>{let e=s(r=>{if(!r)return r;if(Array.isArray(r))return r.map(i=>typeof i=="object"||Array.isArray(i)?e(i):i);let n={...r},o=Object.keys(n);for(let i of o){let a=t(i.toString());a!==i&&(n[a]=n[i],delete n[i]),typeof n[a]=="object"&&(n[a]=e(n[a]))}return n},"deepTransform");return e},"createDeepObjectTransformer"),qAe=CN(g8),FAe=CN(h8);function iS(t){if(typeof t=="boolean")return t;if(t==null)return!1;if(typeof t=="string"){if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1}let e=parseInt(t,10);return isNaN(e)?!1:e>0}s(iS,"isTruthy");var y8=864e5,v8=class{static{s(this,"TelemetryEventThrottler")}#e;#t=y8;constructor(t){this.#e=t}isEventThrottled(t){let e=Date.now(),r=this.#r(t),n=this.#e.getItem(r);return n?e-n>this.#t?(this.#e.setItem(r,e),!1):!0:(this.#e.setItem(r,e),!1)}#r(t){let{sk:e,pk:r,payload:n,...o}=t,i={...n,...o};return JSON.stringify(Object.keys({...n,...o}).sort().map(a=>i[a]))}},ON=class{static{s(this,"LocalStorageThrottlerCache")}#e="clerk_telemetry_throttler";getItem(t){return this.#t()[t]}setItem(t,e){try{let r=this.#t();r[t]=e,localStorage.setItem(this.#e,JSON.stringify(r))}catch(r){r instanceof DOMException&&(r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&localStorage.length>0&&localStorage.removeItem(this.#e)}}removeItem(t){try{let e=this.#t();delete e[t],localStorage.setItem(this.#e,JSON.stringify(e))}catch{}}#t(){try{let t=localStorage.getItem(this.#e);return t?JSON.parse(t):{}}catch{return{}}}static isSupported(){return typeof window<"u"&&!!window.localStorage}},_8=class{static{s(this,"InMemoryThrottlerCache")}#e=new Map;#t=1e4;getItem(t){if(this.#e.size>this.#t){this.#e.clear();return}return this.#e.get(t)}setItem(t,e){this.#e.set(t,e)}removeItem(t){this.#e.delete(t)}};function b8(t){return typeof t=="object"&&t!==null&&"constructor"in t&&typeof t.constructor=="function"}s(b8,"isWindowClerkWithMetadata");var w8=new Set(["error","warn","info","debug","trace"]),sS={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},aS=class{static{s(this,"TelemetryCollector")}#e;#t;#r={};#i=[];#n=null;constructor(t){this.#e={maxBufferSize:t.maxBufferSize??sS.maxBufferSize,samplingRate:t.samplingRate??sS.samplingRate,perEventSampling:t.perEventSampling??!0,disabled:t.disabled??!1,debug:t.debug??!1,endpoint:sS.endpoint},!t.clerkVersion&&typeof window>"u"?this.#r.clerkVersion="":this.#r.clerkVersion=t.clerkVersion??"",this.#r.sdk=t.sdk,this.#r.sdkVersion=t.sdkVersion,this.#r.publishableKey=t.publishableKey??"";let e=Li(t.publishableKey);e&&(this.#r.instanceType=e.instanceType),t.secretKey&&(this.#r.secretKey=t.secretKey.substring(0,16)),this.#t=new v8(ON.isSupported()?new ON:new _8)}get isEnabled(){return!(this.#r.instanceType!=="development"||this.#e.disabled||typeof process<"u"&&process.env&&iS(process.env.CLERK_TELEMETRY_DISABLED)||typeof window<"u"&&window?.navigator?.webdriver)}get isDebug(){return this.#e.debug||typeof process<"u"&&process.env&&iS(process.env.CLERK_TELEMETRY_DEBUG)}record(t){try{let e=this.#a(t.event,t.payload);if(this.#p(e.event,e),!this.#o(e,t.eventSamplingRate))return;this.#i.push({kind:"event",value:e}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(t){try{if(!this.#d(t))return;let e=typeof t?.level=="string"&&w8.has(t.level),r=typeof t?.message=="string"&&t.message.trim().length>0,n=null,o=t?.timestamp;if(typeof o=="number"||typeof o=="string"){let c=new Date(o);Number.isNaN(c.getTime())||(n=c)}if(!e||!r||n===null){this.isDebug&&typeof console<"u"&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:e,messageIsValid:r,timestampIsValid:n!==null});return}let i=this.#l(),a={sdk:i.name,sdkv:i.version,cv:this.#r.clerkVersion??"",lvl:t.level,msg:t.message,ts:n.toISOString(),pk:this.#r.publishableKey||null,payload:this.#m(t.context)};this.#i.push({kind:"log",value:a}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#o(t,e){return this.isEnabled&&!this.isDebug&&this.#u(t,e)}#d(t){return!0}#u(t,e){let r=Math.random();return r<=this.#e.samplingRate&&(this.#e.perEventSampling===!1||typeof e>"u"||r<=e)?!this.#t.isEventThrottled(t):!1}#c(){if(typeof window>"u"){this.#s();return}if(this.#i.length>=this.#e.maxBufferSize){this.#n&&(typeof cancelIdleCallback<"u"?cancelIdleCallback(Number(this.#n)):clearTimeout(Number(this.#n))),this.#s();return}this.#n||("requestIdleCallback"in window?this.#n=requestIdleCallback(()=>{this.#s(),this.#n=null}):this.#n=setTimeout(()=>{this.#s(),this.#n=null},0))}#s(){let t=[...this.#i];if(this.#i=[],this.#n=null,t.length===0)return;let e=t.filter(n=>n.kind==="event").map(n=>n.value),r=t.filter(n=>n.kind==="log").map(n=>n.value);if(e.length>0){let n=new URL("/v1/event",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:e})}).catch(()=>{})}if(r.length>0){let n=new URL("/v1/logs",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>{})}}#p(t,e){this.isDebug&&(typeof console.groupCollapsed<"u"?(console.groupCollapsed("[clerk/telemetry]",t),console.log(e),console.groupEnd()):console.log("[clerk/telemetry]",t,e))}#l(){let t={name:this.#r.sdk,version:this.#r.sdkVersion};if(typeof window<"u"){let e=window;if(e.Clerk){let r=e.Clerk;if(b8(r)&&r.constructor.sdkMetadata){let{name:n,version:o}=r.constructor.sdkMetadata;n!==void 0&&(t.name=n),o!==void 0&&(t.version=o)}}}return t}#a(t,e){let r=this.#l();return{event:t,cv:this.#r.clerkVersion??"",it:this.#r.instanceType??"",sdk:r.name,sdkv:r.version,...this.#r.publishableKey?{pk:this.#r.publishableKey}:{},...this.#r.secretKey?{sk:this.#r.secretKey}:{},payload:e}}#m(t){if(t===null||typeof t>"u"||typeof t!="object")return null;try{let e=JSON.parse(JSON.stringify(t));return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}};var cS=AN(Vi);function rf(t){let e={...t},r=Ha(e),n=PN({options:e,apiClient:r}),o=new aS({publishableKey:e.publishableKey,secretKey:e.secretKey,samplingRate:.1,...e.sdkMetadata?{sdk:e.sdkMetadata.name,sdkVersion:e.sdkMetadata.version}:{},...e.telemetry||{}});return{...r,...n,telemetry:o}}s(rf,"createClerkClient");var nf=s(t=>t,"createMiddleware");An();function uS(){let t=process.env.CLERK_SECRET_KEY,e=process.env.VITE_CLERK_PUBLISHABLE_KEY;if(!t)throw new Error("CLERK_SECRET_KEY environment variable is not set");return{secretKey:t,publishableKey:e}}s(uS,"getClerkConfig");function $N(){let{secretKey:t}=uS();return rf({secretKey:t})}s($N,"getClerkClient");var RN=nf(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null,o=t.get("requestId")||"unknown",i=t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown";if(!n)return L.warn("Authentication failed: No token provided",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_REQUIRED",error:"Authentication required"},401);try{let{secretKey:a}=uS(),c=$N(),l=await cS(n,{secretKey:a});if(!l?.sub)return L.warn("Authentication failed: Invalid token",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"INVALID_TOKEN",error:"Invalid authentication token"},401);let d=l.sub,p=await c.users.getUser(d),h={db:yr(),clerkUser:p,user:{id:p.id,email:p.emailAddresses[0]?.emailAddress||"",fullName:`${p.firstName||""} ${p.lastName||""}`.trim()||null,role:p.publicMetadata?.role,metadata:p.publicMetadata}};t.set("auth",h),L.info("Authentication successful",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userId:p.id}),await e()}catch(a){return L.error("Authentication error",{error:a instanceof Error?a.message:"Unknown error",ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_ERROR",error:"Authentication failed"},500)}}),S8=nf(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null;if(!n){await e();return}try{let{secretKey:o}=uS(),i=$N(),a=await cS(n,{secretKey:o});if(!a?.sub){await e();return}let c=a.sub,l=await i.users.getUser(c),p={db:yr(),clerkUser:l,user:{id:l.id,email:l.emailAddresses[0]?.emailAddress||"",fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||null,role:l.publicMetadata?.role,metadata:l.publicMetadata}};t.set("auth",p),await e()}catch{await e()}});function NN(t){let{windowMs:e,max:r,message:n="Too many requests"}=t,o=new Map;return nf(async(i,a)=>{let l=i.get("auth")?.user.id||i.req.header("X-Forwarded-For")||i.req.header("X-Real-IP")||"unknown",d=Date.now(),p=o.get(l);if(!p||d>p.resetTime)o.set(l,{count:1,resetTime:d+e});else if(p.count++,p.count>r){let h=Math.ceil((p.resetTime-d)/1e3);return i.json({code:"RATE_LIMIT_EXCEEDED",details:{limit:r,windowMs:e,retryAfter:h},error:n},429)}let m=o.get(l);m&&(i.header("X-RateLimit-Limit",r.toString()),i.header("X-RateLimit-Remaining",Math.max(0,r-m.count).toString()),i.header("X-RateLimit-Reset",new Date(m.resetTime).toISOString())),await a()})}s(NN,"clerkUserRateLimitMiddleware");var pe=RN;var Se=NN;var lS=new Pe;lS.get("/",pe,async t=>{let e=t.get("requestId");try{let{user:r}=t.get("auth"),n=r.id;if(!n)return t.json({code:"UNAUTHORIZED",error:"User not authenticated"},401);let o=t.req.query("refresh")==="true",a=await new Rm(n).getContext(o);return L.info("Financial context retrieved",{forceRefresh:o,requestId:e,userId:n}),t.json({context:a,formatted:{alertsBlock:a$(a.pendingAlerts),financialBlock:s$(a)},meta:{requestId:e,retrievedAt:new Date().toISOString()}})}catch(r){return L.error("Error fetching financial context",{error:r instanceof Error?r.message:"Unknown error",requestId:e}),t.json({code:"CONTEXT_ERROR",error:r instanceof Error?r.message:"Failed to fetch context"},500)}});var x8=/^[\w!#$%&'*.^`|~+-]+$/,T8=/^[ !#-:<-[\]-~]*$/,dS=s((t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),n={};for(let o of r){o=o.trim();let i=o.indexOf("=");if(i===-1)continue;let a=o.substring(0,i).trim();if(e&&e!==a||!x8.test(a))continue;let c=o.substring(i+1).trim();if(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),T8.test(c)&&(n[a]=c.indexOf("%")!==-1?aa(c,ou):c,e))break}return n},"parse");var DN=s((t,e,r)=>{let n=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!n)return;let i=e;return r==="secure"?i="__Secure-"+e:r==="host"&&(i="__Host-"+e),dS(n,i)[i]}return n?dS(n):{}},"getCookie");var jN=s((t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData(),"bufferToFormData");var E8=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,k8=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,I8=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,pS=s((t,e)=>async(r,n)=>{let o={},i=r.req.header("Content-Type");switch(t){case"json":if(!i||!E8.test(i))break;try{o=await r.req.json()}catch{let c="Malformed JSON in request body";throw new kp(400,{message:c})}break;case"form":{if(!i||!(k8.test(i)||I8.test(i)))break;let c;if(r.req.bodyCache.formData)c=await r.req.bodyCache.formData;else try{let d=await r.req.arrayBuffer();c=await jN(d,i),r.req.bodyCache.formData=c}catch(d){let p="Malformed FormData request.";throw p+=d instanceof Error?` ${d.message}`:` ${String(d)}`,new kp(400,{message:p})}let l={};c.forEach((d,p)=>{p.endsWith("[]")?(l[p]??=[]).push(d):Array.isArray(l[p])?l[p].push(d):p in l?l[p]=[l[p],d]:l[p]=d}),o=l;break}case"query":o=Object.fromEntries(Object.entries(r.req.queries()).map(([c,l])=>l.length===1?[c,l[0]]:[c,l]));break;case"param":o=r.req.param();break;case"header":o=r.req.header();break;case"cookie":o=DN(r);break}let a=await e(o,r);return a instanceof Response?a:(r.req.addValidatedData(t,a),await n())},"validator");function P8(t,e,r,n){return pS(t,async(o,i)=>{let a=o;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let l=Object.keys("in"in e?e.in.shape:e.shape),d=Object.fromEntries(l.map(p=>[p.toLowerCase(),p]));a=Object.fromEntries(Object.entries(o).map(([p,m])=>[d[p]||p,m]))}let c=n&&n.validationFunction?await n.validationFunction(e,a):await e.safeParseAsync(a);if(r){let l=await r({data:a,...c,target:t},i);if(l){if(l instanceof Response)return l;if("response"in l)return l.response}}return c.success?c.data:i.json(c,400)})}s(P8,"zValidatorFunction");var Ve=P8;var u={};hn(u,{$brand:()=>of,$input:()=>ST,$output:()=>wT,NEVER:()=>mS,TimePrecision:()=>kT,ZodAny:()=>TD,ZodArray:()=>PD,ZodBase64:()=>BE,ZodBase64URL:()=>VE,ZodBigInt:()=>Gl,ZodBigIntFormat:()=>JE,ZodBoolean:()=>Kl,ZodCIDRv4:()=>qE,ZodCIDRv6:()=>FE,ZodCUID:()=>NE,ZodCUID2:()=>DE,ZodCatch:()=>JD,ZodCodec:()=>nk,ZodCustom:()=>lh,ZodCustomStringFormat:()=>Zl,ZodDate:()=>ah,ZodDefault:()=>qD,ZodDiscriminatedUnion:()=>AD,ZodE164:()=>HE,ZodEmail:()=>OE,ZodEmoji:()=>$E,ZodEnum:()=>Vl,ZodError:()=>iG,ZodFile:()=>zD,ZodFirstPartyTypeKind:()=>ok,ZodFunction:()=>rj,ZodGUID:()=>rh,ZodIPv4:()=>UE,ZodIPv6:()=>LE,ZodISODate:()=>Xf,ZodISODateTime:()=>Qf,ZodISODuration:()=>eh,ZodISOTime:()=>Yf,ZodIntersection:()=>CD,ZodIssueCode:()=>_W,ZodJWT:()=>ZE,ZodKSUID:()=>zE,ZodLazy:()=>YD,ZodLiteral:()=>MD,ZodMAC:()=>yD,ZodMap:()=>DD,ZodNaN:()=>GD,ZodNanoID:()=>RE,ZodNever:()=>kD,ZodNonOptional:()=>tk,ZodNull:()=>SD,ZodNullable:()=>LD,ZodNumber:()=>Jl,ZodNumberFormat:()=>sc,ZodObject:()=>uh,ZodOptional:()=>ek,ZodPipe:()=>rk,ZodPrefault:()=>BD,ZodPromise:()=>tj,ZodReadonly:()=>WD,ZodRealError:()=>pn,ZodRecord:()=>QE,ZodSet:()=>jD,ZodString:()=>Hl,ZodStringFormat:()=>Mt,ZodSuccess:()=>ZD,ZodSymbol:()=>bD,ZodTemplateLiteral:()=>XD,ZodTransform:()=>UD,ZodTuple:()=>$D,ZodType:()=>rt,ZodULID:()=>jE,ZodURL:()=>sh,ZodUUID:()=>ai,ZodUndefined:()=>wD,ZodUnion:()=>GE,ZodUnknown:()=>ED,ZodVoid:()=>ID,ZodXID:()=>ME,_ZodString:()=>CE,_default:()=>FD,_function:()=>lW,any:()=>VG,array:()=>ch,base64:()=>IG,base64url:()=>PG,bigint:()=>UG,boolean:()=>_D,catch:()=>KD,check:()=>dW,cidrv4:()=>EG,cidrv6:()=>kG,clone:()=>Vr,codec:()=>aW,coerce:()=>ik,config:()=>dr,core:()=>ii,cuid:()=>yG,cuid2:()=>vG,custom:()=>pW,date:()=>ZG,decode:()=>wE,decodeAsync:()=>xE,describe:()=>mW,discriminatedUnion:()=>QG,e164:()=>AG,email:()=>aG,emoji:()=>hG,encode:()=>bE,encodeAsync:()=>SE,endsWith:()=>jl,enum:()=>XE,file:()=>nW,flattenError:()=>hl,float32:()=>DG,float64:()=>jG,formatError:()=>gl,function:()=>lW,getErrorMap:()=>wW,globalRegistry:()=>Hr,gt:()=>ni,gte:()=>dn,guid:()=>cG,hash:()=>NG,hex:()=>RG,hostname:()=>$G,httpUrl:()=>fG,includes:()=>Nl,instanceof:()=>hW,int:()=>AE,int32:()=>MG,int64:()=>LG,intersection:()=>OD,ipv4:()=>SG,ipv6:()=>TG,iso:()=>th,json:()=>yW,jwt:()=>CG,keyof:()=>JG,ksuid:()=>wG,lazy:()=>ej,length:()=>nc,literal:()=>rW,locales:()=>Il,looseObject:()=>WG,lowercase:()=>$l,lt:()=>ri,lte:()=>Rn,mac:()=>xG,map:()=>YG,maxLength:()=>rc,maxSize:()=>tc,meta:()=>fW,mime:()=>Ml,minLength:()=>Qi,minSize:()=>Us,multipleOf:()=>zs,nan:()=>sW,nanoid:()=>gG,nativeEnum:()=>tW,negative:()=>tE,never:()=>KE,nonnegative:()=>nE,nonoptional:()=>HD,nonpositive:()=>rE,normalize:()=>zl,null:()=>xD,nullable:()=>oh,nullish:()=>oW,number:()=>vD,object:()=>KG,optional:()=>nh,overwrite:()=>To,parse:()=>yE,parseAsync:()=>vE,partialRecord:()=>XG,pipe:()=>ih,positive:()=>eE,prefault:()=>VD,preprocess:()=>vW,prettifyError:()=>ES,promise:()=>uW,property:()=>oE,readonly:()=>QD,record:()=>ND,refine:()=>nj,regex:()=>Ol,regexes:()=>$n,registry:()=>Cf,safeDecode:()=>EE,safeDecodeAsync:()=>IE,safeEncode:()=>TE,safeEncodeAsync:()=>kE,safeParse:()=>_E,safeParseAsync:()=>si,set:()=>eW,setErrorMap:()=>bW,size:()=>Cl,slugify:()=>Fl,startsWith:()=>Dl,strictObject:()=>GG,string:()=>PE,stringFormat:()=>OG,stringbool:()=>gW,success:()=>iW,superRefine:()=>oj,symbol:()=>FG,templateLiteral:()=>cW,toJSONSchema:()=>oi,toLowerCase:()=>Ll,toUpperCase:()=>ql,transform:()=>YE,treeifyError:()=>TS,trim:()=>Ul,tuple:()=>RD,uint32:()=>zG,uint64:()=>qG,ulid:()=>_G,undefined:()=>BG,union:()=>WE,unknown:()=>ic,uppercase:()=>Rl,url:()=>mG,util:()=>le,uuid:()=>uG,uuidv4:()=>lG,uuidv6:()=>dG,uuidv7:()=>pG,void:()=>HG,xid:()=>bG});var ii={};hn(ii,{$ZodAny:()=>e0,$ZodArray:()=>i0,$ZodAsyncError:()=>Qn,$ZodBase64:()=>Vx,$ZodBase64URL:()=>Hx,$ZodBigInt:()=>If,$ZodBigIntFormat:()=>Wx,$ZodBoolean:()=>bl,$ZodCIDRv4:()=>qx,$ZodCIDRv6:()=>Fx,$ZodCUID:()=>Ax,$ZodCUID2:()=>Cx,$ZodCatch:()=>S0,$ZodCheck:()=>jt,$ZodCheckBigIntFormat:()=>ix,$ZodCheckEndsWith:()=>yx,$ZodCheckGreaterThan:()=>bf,$ZodCheckIncludes:()=>hx,$ZodCheckLengthEquals:()=>dx,$ZodCheckLessThan:()=>_f,$ZodCheckLowerCase:()=>mx,$ZodCheckMaxLength:()=>ux,$ZodCheckMaxSize:()=>sx,$ZodCheckMimeType:()=>_x,$ZodCheckMinLength:()=>lx,$ZodCheckMinSize:()=>ax,$ZodCheckMultipleOf:()=>nx,$ZodCheckNumberFormat:()=>ox,$ZodCheckOverwrite:()=>bx,$ZodCheckProperty:()=>vx,$ZodCheckRegex:()=>px,$ZodCheckSizeEquals:()=>cx,$ZodCheckStartsWith:()=>gx,$ZodCheckStringFormat:()=>Ya,$ZodCheckUpperCase:()=>fx,$ZodCodec:()=>wl,$ZodCustom:()=>C0,$ZodCustomStringFormat:()=>Kx,$ZodDate:()=>o0,$ZodDefault:()=>v0,$ZodDiscriminatedUnion:()=>a0,$ZodE164:()=>Zx,$ZodEmail:()=>Ex,$ZodEmoji:()=>Ix,$ZodEncodeError:()=>Hi,$ZodEnum:()=>p0,$ZodError:()=>fl,$ZodFile:()=>f0,$ZodFunction:()=>I0,$ZodGUID:()=>xx,$ZodIPv4:()=>zx,$ZodIPv6:()=>Ux,$ZodISODate:()=>Dx,$ZodISODateTime:()=>Nx,$ZodISODuration:()=>Mx,$ZodISOTime:()=>jx,$ZodIntersection:()=>c0,$ZodJWT:()=>Jx,$ZodKSUID:()=>Rx,$ZodLazy:()=>A0,$ZodLiteral:()=>m0,$ZodMAC:()=>Lx,$ZodMap:()=>l0,$ZodNaN:()=>x0,$ZodNanoID:()=>Px,$ZodNever:()=>r0,$ZodNonOptional:()=>b0,$ZodNull:()=>Yx,$ZodNullable:()=>y0,$ZodNumber:()=>kf,$ZodNumberFormat:()=>Gx,$ZodObject:()=>cD,$ZodObjectJIT:()=>s0,$ZodOptional:()=>g0,$ZodPipe:()=>T0,$ZodPrefault:()=>_0,$ZodPromise:()=>P0,$ZodReadonly:()=>E0,$ZodRealError:()=>ln,$ZodRecord:()=>u0,$ZodRegistry:()=>ec,$ZodSet:()=>d0,$ZodString:()=>Ms,$ZodStringFormat:()=>$t,$ZodSuccess:()=>w0,$ZodSymbol:()=>Qx,$ZodTemplateLiteral:()=>k0,$ZodTransform:()=>h0,$ZodTuple:()=>Af,$ZodType:()=>He,$ZodULID:()=>Ox,$ZodURL:()=>kx,$ZodUUID:()=>Tx,$ZodUndefined:()=>Xx,$ZodUnion:()=>Pf,$ZodUnknown:()=>t0,$ZodVoid:()=>n0,$ZodXID:()=>$x,$brand:()=>of,$constructor:()=>B,$input:()=>ST,$output:()=>wT,Doc:()=>_l,JSONSchema:()=>fD,JSONSchemaGenerator:()=>Bl,NEVER:()=>mS,TimePrecision:()=>kT,_any:()=>JT,_array:()=>iE,_base64:()=>Jf,_base64url:()=>Kf,_bigint:()=>LT,_boolean:()=>zT,_catch:()=>XK,_check:()=>mD,_cidrv4:()=>Hf,_cidrv6:()=>Zf,_coercedBigint:()=>qT,_coercedBoolean:()=>UT,_coercedDate:()=>XT,_coercedNumber:()=>$T,_coercedString:()=>TT,_cuid:()=>zf,_cuid2:()=>Uf,_custom:()=>aE,_date:()=>QT,_decode:()=>df,_decodeAsync:()=>mf,_default:()=>GK,_discriminatedUnion:()=>MK,_e164:()=>Gf,_email:()=>Of,_emoji:()=>jf,_encode:()=>lf,_encodeAsync:()=>pf,_endsWith:()=>jl,_enum:()=>BK,_file:()=>sE,_float32:()=>NT,_float64:()=>DT,_gt:()=>ni,_gte:()=>dn,_guid:()=>Pl,_includes:()=>Nl,_int:()=>RT,_int32:()=>jT,_int64:()=>FT,_intersection:()=>zK,_ipv4:()=>Bf,_ipv6:()=>Vf,_isoDate:()=>PT,_isoDateTime:()=>IT,_isoDuration:()=>CT,_isoTime:()=>AT,_jwt:()=>Wf,_ksuid:()=>Ff,_lazy:()=>rG,_length:()=>nc,_literal:()=>HK,_lowercase:()=>$l,_lt:()=>ri,_lte:()=>Rn,_mac:()=>ET,_map:()=>qK,_max:()=>Rn,_maxLength:()=>rc,_maxSize:()=>tc,_mime:()=>Ml,_min:()=>dn,_minLength:()=>Qi,_minSize:()=>Us,_multipleOf:()=>zs,_nan:()=>YT,_nanoid:()=>Mf,_nativeEnum:()=>VK,_negative:()=>tE,_never:()=>GT,_nonnegative:()=>nE,_nonoptional:()=>WK,_nonpositive:()=>rE,_normalize:()=>zl,_null:()=>ZT,_nullable:()=>KK,_number:()=>OT,_optional:()=>JK,_overwrite:()=>To,_parse:()=>Ga,_parseAsync:()=>Wa,_pipe:()=>YK,_positive:()=>eE,_promise:()=>nG,_property:()=>oE,_readonly:()=>eG,_record:()=>LK,_refine:()=>cE,_regex:()=>Ol,_safeDecode:()=>hf,_safeDecodeAsync:()=>yf,_safeEncode:()=>ff,_safeEncodeAsync:()=>gf,_safeParse:()=>Qa,_safeParseAsync:()=>Xa,_set:()=>FK,_size:()=>Cl,_slugify:()=>Fl,_startsWith:()=>Dl,_string:()=>xT,_stringFormat:()=>oc,_stringbool:()=>pE,_success:()=>QK,_superRefine:()=>uE,_symbol:()=>VT,_templateLiteral:()=>tG,_toLowerCase:()=>Ll,_toUpperCase:()=>ql,_transform:()=>ZK,_trim:()=>Ul,_tuple:()=>UK,_uint32:()=>MT,_uint64:()=>BT,_ulid:()=>Lf,_undefined:()=>HT,_union:()=>jK,_unknown:()=>KT,_uppercase:()=>Rl,_url:()=>Al,_uuid:()=>$f,_uuidv4:()=>Rf,_uuidv6:()=>Nf,_uuidv7:()=>Df,_void:()=>WT,_xid:()=>qf,clone:()=>Vr,config:()=>dr,decode:()=>rJ,decodeAsync:()=>oJ,describe:()=>lE,encode:()=>tJ,encodeAsync:()=>nJ,flattenError:()=>hl,formatError:()=>gl,globalConfig:()=>al,globalRegistry:()=>Hr,isValidBase64:()=>Bx,isValidBase64URL:()=>oD,isValidJWT:()=>iD,locales:()=>Il,meta:()=>dE,parse:()=>cf,parseAsync:()=>uf,prettifyError:()=>ES,regexes:()=>$n,registry:()=>Cf,safeDecode:()=>sJ,safeDecodeAsync:()=>cJ,safeEncode:()=>iJ,safeEncodeAsync:()=>aJ,safeParse:()=>kS,safeParseAsync:()=>IS,toDotPath:()=>qN,toJSONSchema:()=>oi,treeifyError:()=>TS,util:()=>le,version:()=>wx});var mS=Object.freeze({status:"aborted"});function B(t,e,r){function n(c,l){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,l);let d=a.prototype,p=Object.keys(d);for(let m=0;m<p.length;m++){let h=p[m];h in c||(c[h]=d[h].bind(c))}}s(n,"init");let o=r?.Parent??Object;class i extends o{static{s(this,"Definition")}}Object.defineProperty(i,"name",{value:t});function a(c){var l;let d=r?.Parent?new i:this;n(d,c),(l=d._zod).deferred??(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return s(a,"_"),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s(c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t),"value")}),Object.defineProperty(a,"name",{value:t}),a}s(B,"$constructor");var of=Symbol("zod_brand"),Qn=class extends Error{static{s(this,"$ZodAsyncError")}constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Hi=class extends Error{static{s(this,"$ZodEncodeError")}constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},al={};function dr(t){return t&&Object.assign(al,t),al}s(dr,"config");var le={};hn(le,{BIGINT_FORMAT_RANGES:()=>xS,Class:()=>hS,NUMBER_FORMAT_RANGES:()=>SS,aborted:()=>Wi,allowsEval:()=>vS,assert:()=>R8,assertEqual:()=>A8,assertIs:()=>O8,assertNever:()=>$8,assertNotEqual:()=>C8,assignProp:()=>Ji,base64ToUint8Array:()=>zN,base64urlToUint8Array:()=>W8,cached:()=>Ja,captureStackTrace:()=>af,cleanEnum:()=>G8,cleanRegex:()=>ll,clone:()=>Vr,cloneDef:()=>D8,createTransparentProxy:()=>q8,defineLazy:()=>dt,esc:()=>sf,escapeRegex:()=>On,extend:()=>V8,finalizeIssue:()=>_n,floatSafeRemainder:()=>gS,getElementAtPath:()=>j8,getEnumValues:()=>ul,getLengthableOrigin:()=>ml,getParsedType:()=>L8,getSizableOrigin:()=>pl,hexToUint8Array:()=>X8,isObject:()=>Ds,isPlainObject:()=>Gi,issue:()=>Ka,joinValues:()=>X,jsonStringifyReplacer:()=>Za,merge:()=>Z8,mergeDefs:()=>Ki,normalizeParams:()=>ue,nullish:()=>Zi,numKeys:()=>U8,objectClone:()=>N8,omit:()=>B8,optionalKeys:()=>wS,partial:()=>J8,pick:()=>F8,prefixIssues:()=>vn,primitiveTypes:()=>bS,promiseAllObject:()=>M8,propertyKeyTypes:()=>dl,randomString:()=>z8,required:()=>K8,safeExtend:()=>H8,shallowClone:()=>_S,slugify:()=>yS,stringifyPrimitive:()=>ce,uint8ArrayToBase64:()=>UN,uint8ArrayToBase64url:()=>Q8,uint8ArrayToHex:()=>Y8,unwrapMessage:()=>cl});function A8(t){return t}s(A8,"assertEqual");function C8(t){return t}s(C8,"assertNotEqual");function O8(t){}s(O8,"assertIs");function $8(t){throw new Error}s($8,"assertNever");function R8(t){}s(R8,"assert");function ul(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,o])=>e.indexOf(+n)===-1).map(([n,o])=>o)}s(ul,"getEnumValues");function X(t,e="|"){return t.map(r=>ce(r)).join(e)}s(X,"joinValues");function Za(t,e){return typeof e=="bigint"?e.toString():e}s(Za,"jsonStringifyReplacer");function Ja(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}s(Ja,"cached");function Zi(t){return t==null}s(Zi,"nullish");function ll(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}s(ll,"cleanRegex");function gS(t,e){let r=(t.toString().split(".")[1]||"").length,n=e.toString(),o=(n.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(n)){let l=n.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}let i=r>o?r:o,a=Number.parseInt(t.toFixed(i).replace(".","")),c=Number.parseInt(e.toFixed(i).replace(".",""));return a%c/10**i}s(gS,"floatSafeRemainder");var MN=Symbol("evaluating");function dt(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==MN)return n===void 0&&(n=MN,n=r()),n},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}s(dt,"defineLazy");function N8(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}s(N8,"objectClone");function Ji(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}s(Ji,"assignProp");function Ki(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}s(Ki,"mergeDefs");function D8(t){return Ki(t._zod.def)}s(D8,"cloneDef");function j8(t,e){return e?e.reduce((r,n)=>r?.[n],t):t}s(j8,"getElementAtPath");function M8(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let o={};for(let i=0;i<e.length;i++)o[e[i]]=n[i];return o})}s(M8,"promiseAllObject");function z8(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}s(z8,"randomString");function sf(t){return JSON.stringify(t)}s(sf,"esc");function yS(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}s(yS,"slugify");var af="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ds(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}s(Ds,"isObject");var vS=Ja(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function Gi(t){if(Ds(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(Ds(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}s(Gi,"isPlainObject");function _S(t){return Gi(t)?{...t}:Array.isArray(t)?[...t]:t}s(_S,"shallowClone");function U8(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}s(U8,"numKeys");var L8=s(t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},"getParsedType"),dl=new Set(["string","number","symbol"]),bS=new Set(["string","number","bigint","boolean","symbol","undefined"]);function On(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(On,"escapeRegex");function Vr(t,e,r){let n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}s(Vr,"clone");function ue(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:s(()=>e,"error")};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:s(()=>e.error,"error")}:e}s(ue,"normalizeParams");function q8(t){let e;return new Proxy({},{get(r,n,o){return e??(e=t()),Reflect.get(e,n,o)},set(r,n,o,i){return e??(e=t()),Reflect.set(e,n,o,i)},has(r,n){return e??(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e??(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,o){return e??(e=t()),Reflect.defineProperty(e,n,o)}})}s(q8,"createTransparentProxy");function ce(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}s(ce,"stringifyPrimitive");function wS(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}s(wS,"optionalKeys");var SS={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},xS={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function F8(t,e){let r=t._zod.def,n=Ki(t._zod.def,{get shape(){let o={};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(o[i]=r.shape[i])}return Ji(this,"shape",o),o},checks:[]});return Vr(t,n)}s(F8,"pick");function B8(t,e){let r=t._zod.def,n=Ki(t._zod.def,{get shape(){let o={...t._zod.def.shape};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete o[i]}return Ji(this,"shape",o),o},checks:[]});return Vr(t,n)}s(B8,"omit");function V8(t,e){if(!Gi(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let o=Ki(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e};return Ji(this,"shape",i),i},checks:[]});return Vr(t,o)}s(V8,"extend");function H8(t,e){if(!Gi(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return Ji(this,"shape",n),n},checks:t._zod.def.checks};return Vr(t,r)}s(H8,"safeExtend");function Z8(t,e){let r=Ki(t._zod.def,{get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return Ji(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return Vr(t,r)}s(Z8,"merge");function J8(t,e,r){let n=Ki(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:o[a]}):o[a])}else for(let a in o)i[a]=t?new t({type:"optional",innerType:o[a]}):o[a];return Ji(this,"shape",i),i},checks:[]});return Vr(e,n)}s(J8,"partial");function K8(t,e,r){let n=Ki(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:o[a]}))}else for(let a in o)i[a]=new t({type:"nonoptional",innerType:o[a]});return Ji(this,"shape",i),i},checks:[]});return Vr(e,n)}s(K8,"required");function Wi(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}s(Wi,"aborted");function vn(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}s(vn,"prefixIssues");function cl(t){return typeof t=="string"?t:t?.message}s(cl,"unwrapMessage");function _n(t,e,r){let n={...t,path:t.path??[]};if(!t.message){let o=cl(t.inst?._zod.def?.error?.(t))??cl(e?.error?.(t))??cl(r.customError?.(t))??cl(r.localeError?.(t))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}s(_n,"finalizeIssue");function pl(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}s(pl,"getSizableOrigin");function ml(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}s(ml,"getLengthableOrigin");function Ka(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}s(Ka,"issue");function G8(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}s(G8,"cleanEnum");function zN(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}s(zN,"base64ToUint8Array");function UN(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}s(UN,"uint8ArrayToBase64");function W8(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return zN(e+r)}s(W8,"base64urlToUint8Array");function Q8(t){return UN(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}s(Q8,"uint8ArrayToBase64url");function X8(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n/2]=Number.parseInt(e.slice(n,n+2),16);return r}s(X8,"hexToUint8Array");function Y8(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}s(Y8,"uint8ArrayToHex");var hS=class{static{s(this,"Class")}constructor(...e){}};var LN=s((t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Za,2),Object.defineProperty(t,"toString",{value:s(()=>t.message,"value"),enumerable:!1})},"initializer"),fl=B("$ZodError",LN),ln=B("$ZodError",LN,{Parent:Error});function hl(t,e=r=>r.message){let r={},n=[];for(let o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}s(hl,"flattenError");function gl(t,e=r=>r.message){let r={_errors:[]},n=s(o=>{for(let i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let a=r,c=0;for(;c<i.path.length;){let l=i.path[c];c===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(i))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}},"processError");return n(t),r}s(gl,"formatError");function TS(t,e=r=>r.message){let r={errors:[]},n=s((o,i=[])=>{var a,c;for(let l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>n({issues:d},l.path));else if(l.code==="invalid_key")n({issues:l.issues},l.path);else if(l.code==="invalid_element")n({issues:l.issues},l.path);else{let d=[...i,...l.path];if(d.length===0){r.errors.push(e(l));continue}let p=r,m=0;for(;m<d.length;){let h=d[m],y=m===d.length-1;typeof h=="string"?(p.properties??(p.properties={}),(a=p.properties)[h]??(a[h]={errors:[]}),p=p.properties[h]):(p.items??(p.items=[]),(c=p.items)[h]??(c[h]={errors:[]}),p=p.items[h]),y&&p.errors.push(e(l)),m++}}},"processError");return n(t),r}s(TS,"treeifyError");function qN(t){let e=[],r=t.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}s(qN,"toDotPath");function ES(t){let e=[],r=[...t.issues].sort((n,o)=>(n.path??[]).length-(o.path??[]).length);for(let n of r)e.push(`\u2716 ${n.message}`),n.path?.length&&e.push(`  \u2192 at ${qN(n.path)}`);return e.join(`
`)}s(ES,"prettifyError");var Ga=s(t=>(e,r,n,o)=>{let i=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new Qn;if(a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>_n(l,i,dr())));throw af(c,o?.callee),c}return a.value},"_parse"),cf=Ga(ln),Wa=s(t=>async(e,r,n,o)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>_n(l,i,dr())));throw af(c,o?.callee),c}return a.value},"_parseAsync"),uf=Wa(ln),Qa=s(t=>(e,r,n)=>{let o=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new Qn;return i.issues.length?{success:!1,error:new(t??fl)(i.issues.map(a=>_n(a,o,dr())))}:{success:!0,data:i.value}},"_safeParse"),kS=Qa(ln),Xa=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},i=e._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>_n(a,o,dr())))}:{success:!0,data:i.value}},"_safeParseAsync"),IS=Xa(ln),lf=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ga(t)(e,r,o)},"_encode"),tJ=lf(ln),df=s(t=>(e,r,n)=>Ga(t)(e,r,n),"_decode"),rJ=df(ln),pf=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Wa(t)(e,r,o)},"_encodeAsync"),nJ=pf(ln),mf=s(t=>async(e,r,n)=>Wa(t)(e,r,n),"_decodeAsync"),oJ=mf(ln),ff=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Qa(t)(e,r,o)},"_safeEncode"),iJ=ff(ln),hf=s(t=>(e,r,n)=>Qa(t)(e,r,n),"_safeDecode"),sJ=hf(ln),gf=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Xa(t)(e,r,o)},"_safeEncodeAsync"),aJ=gf(ln),yf=s(t=>async(e,r,n)=>Xa(t)(e,r,n),"_safeDecodeAsync"),cJ=yf(ln);var $n={};hn($n,{base64:()=>BS,base64url:()=>vf,bigint:()=>GS,boolean:()=>XS,browserEmail:()=>gJ,cidrv4:()=>qS,cidrv6:()=>FS,cuid:()=>PS,cuid2:()=>AS,date:()=>HS,datetime:()=>JS,domain:()=>_J,duration:()=>NS,e164:()=>VS,email:()=>jS,emoji:()=>MS,extendedDuration:()=>uJ,guid:()=>DS,hex:()=>bJ,hostname:()=>vJ,html5Email:()=>mJ,idnEmail:()=>hJ,integer:()=>WS,ipv4:()=>zS,ipv6:()=>US,ksuid:()=>$S,lowercase:()=>tx,mac:()=>LS,md5_base64:()=>SJ,md5_base64url:()=>xJ,md5_hex:()=>wJ,nanoid:()=>RS,null:()=>YS,number:()=>QS,rfc5322Email:()=>fJ,sha1_base64:()=>EJ,sha1_base64url:()=>kJ,sha1_hex:()=>TJ,sha256_base64:()=>PJ,sha256_base64url:()=>AJ,sha256_hex:()=>IJ,sha384_base64:()=>OJ,sha384_base64url:()=>$J,sha384_hex:()=>CJ,sha512_base64:()=>NJ,sha512_base64url:()=>DJ,sha512_hex:()=>RJ,string:()=>KS,time:()=>ZS,ulid:()=>CS,undefined:()=>ex,unicodeEmail:()=>FN,uppercase:()=>rx,uuid:()=>js,uuid4:()=>lJ,uuid6:()=>dJ,uuid7:()=>pJ,xid:()=>OS});var PS=/^[cC][^\s-]{8,}$/,AS=/^[0-9a-z]+$/,CS=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,OS=/^[0-9a-vA-V]{20}$/,$S=/^[A-Za-z0-9]{27}$/,RS=/^[a-zA-Z0-9_-]{21}$/,NS=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,uJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,DS=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,js=s(t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),lJ=js(4),dJ=js(6),pJ=js(7),jS=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,mJ=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fJ=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,FN=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,hJ=FN,gJ=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,yJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function MS(){return new RegExp(yJ,"u")}s(MS,"emoji");var zS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,US=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,LS=s(t=>{let e=On(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},"mac"),qS=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,FS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BS=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,vf=/^[A-Za-z0-9_-]*$/,vJ=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,_J=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,VS=/^\+(?:[0-9]){6,14}[0-9]$/,BN="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",HS=new RegExp(`^${BN}$`);function VN(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}s(VN,"timeSource");function ZS(t){return new RegExp(`^${VN(t)}$`)}s(ZS,"time");function JS(t){let e=VN({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${BN}T(?:${n})$`)}s(JS,"datetime");var KS=s(t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},"string"),GS=/^-?\d+n?$/,WS=/^-?\d+$/,QS=/^-?\d+(?:\.\d+)?/,XS=/^(?:true|false)$/i,YS=/^null$/i;var ex=/^undefined$/i;var tx=/^[^A-Z]*$/,rx=/^[^a-z]*$/,bJ=/^[0-9a-fA-F]*$/;function yl(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}s(yl,"fixedBase64");function vl(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}s(vl,"fixedBase64url");var wJ=/^[0-9a-fA-F]{32}$/,SJ=yl(22,"=="),xJ=vl(22),TJ=/^[0-9a-fA-F]{40}$/,EJ=yl(27,"="),kJ=vl(27),IJ=/^[0-9a-fA-F]{64}$/,PJ=yl(43,"="),AJ=vl(43),CJ=/^[0-9a-fA-F]{96}$/,OJ=yl(64,""),$J=vl(64),RJ=/^[0-9a-fA-F]{128}$/,NJ=yl(86,"=="),DJ=vl(86);var jt=B("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),ZN={number:"number",bigint:"bigint",object:"date"},_f=B("$ZodCheckLessThan",(t,e)=>{jt.init(t,e);let r=ZN[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),bf=B("$ZodCheckGreaterThan",(t,e)=>{jt.init(t,e);let r=ZN[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),nx=B("$ZodCheckMultipleOf",(t,e)=>{jt.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):gS(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),ox=B("$ZodCheckNumberFormat",(t,e)=>{jt.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),n=r?"int":"number",[o,i]=SS[e.format];t._zod.onattach.push(a=>{let c=a._zod.bag;c.format=e.format,c.minimum=o,c.maximum=i,r&&(c.pattern=WS)}),t._zod.check=a=>{let c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}c<o&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),c>i&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),ix=B("$ZodCheckBigIntFormat",(t,e)=>{jt.init(t,e);let[r,n]=xS[e.format];t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,i.minimum=r,i.maximum=n}),t._zod.check=o=>{let i=o.value;i<r&&o.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),i>n&&o.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:t})}}),sx=B("$ZodCheckMaxSize",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;o.size<=e.maximum||n.issues.push({origin:pl(o),code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),ax=B("$ZodCheckMinSize",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;o.size>=e.minimum||n.issues.push({origin:pl(o),code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),cx=B("$ZodCheckSizeEquals",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.size,o.maximum=e.size,o.size=e.size}),t._zod.check=n=>{let o=n.value,i=o.size;if(i===e.size)return;let a=i>e.size;n.issues.push({origin:pl(o),...a?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),ux=B("$ZodCheckMaxLength",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;if(o.length<=e.maximum)return;let a=ml(o);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),lx=B("$ZodCheckMinLength",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;if(o.length>=e.minimum)return;let a=ml(o);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),dx=B("$ZodCheckLengthEquals",(t,e)=>{var r;jt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!Zi(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=n=>{let o=n.value,i=o.length;if(i===e.length)return;let a=ml(o),c=i>e.length;n.issues.push({origin:a,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Ya=B("$ZodCheckStringFormat",(t,e)=>{var r,n;jt.init(t,e),t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),px=B("$ZodCheckRegex",(t,e)=>{Ya.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),mx=B("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=tx),Ya.init(t,e)}),fx=B("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=rx),Ya.init(t,e)}),hx=B("$ZodCheckIncludes",(t,e)=>{jt.init(t,e);let r=On(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(o=>{let i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),gx=B("$ZodCheckStartsWith",(t,e)=>{jt.init(t,e);let r=new RegExp(`^${On(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),yx=B("$ZodCheckEndsWith",(t,e)=>{jt.init(t,e);let r=new RegExp(`.*${On(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}});function HN(t,e,r){t.issues.length&&e.issues.push(...vn(r,t.issues))}s(HN,"handleCheckPropertyResult");var vx=B("$ZodCheckProperty",(t,e)=>{jt.init(t,e),t._zod.check=r=>{let n=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(o=>HN(o,r,e.property));HN(n,r,e.property)}}),_x=B("$ZodCheckMimeType",(t,e)=>{jt.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),t._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:t,continue:!e.abort})}}),bx=B("$ZodCheckOverwrite",(t,e)=>{jt.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var _l=class{static{s(this,"Doc")}constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(let a of i)this.content.push(a)}compile(){let e=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,o.join(`
`))}};var wx={major:4,minor:1,patch:13};var He=B("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=wx;let n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let o of n)for(let i of o._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=s((a,c,l)=>{let d=Wi(a),p;for(let m of c){if(m._zod.def.when){if(!m._zod.def.when(a))continue}else if(d)continue;let h=a.issues.length,y=m._zod.check(a);if(y instanceof Promise&&l?.async===!1)throw new Qn;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,a.issues.length!==h&&(d||(d=Wi(a,h)))});else{if(a.issues.length===h)continue;d||(d=Wi(a,h))}}return p?p.then(()=>a):a},"runChecks"),i=s((a,c,l)=>{if(Wi(a))return a.aborted=!0,a;let d=o(c,n,l);if(d instanceof Promise){if(l.async===!1)throw new Qn;return d.then(p=>t._zod.parse(p,l))}return t._zod.parse(d,l)},"handleCanaryResult");t._zod.run=(a,c)=>{if(c.skipChecks)return t._zod.parse(a,c);if(c.direction==="backward"){let d=t._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(p=>i(p,a,c)):i(d,a,c)}let l=t._zod.parse(a,c);if(l instanceof Promise){if(c.async===!1)throw new Qn;return l.then(d=>o(d,n,c))}return o(l,n,c)}}t["~standard"]={validate:s(o=>{try{let i=kS(t,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return IS(t,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},"validate"),vendor:"zod",version:1}}),Ms=B("$ZodString",(t,e)=>{He.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??KS(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),$t=B("$ZodStringFormat",(t,e)=>{Ya.init(t,e),Ms.init(t,e)}),xx=B("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=DS),$t.init(t,e)}),Tx=B("$ZodUUID",(t,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=js(n))}else e.pattern??(e.pattern=js());$t.init(t,e)}),Ex=B("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=jS),$t.init(t,e)}),kx=B("$ZodURL",(t,e)=>{$t.init(t,e),t._zod.check=r=>{try{let n=r.value.trim(),o=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=o.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Ix=B("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=MS()),$t.init(t,e)}),Px=B("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=RS),$t.init(t,e)}),Ax=B("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=PS),$t.init(t,e)}),Cx=B("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=AS),$t.init(t,e)}),Ox=B("$ZodULID",(t,e)=>{e.pattern??(e.pattern=CS),$t.init(t,e)}),$x=B("$ZodXID",(t,e)=>{e.pattern??(e.pattern=OS),$t.init(t,e)}),Rx=B("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=$S),$t.init(t,e)}),Nx=B("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=JS(e)),$t.init(t,e)}),Dx=B("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=HS),$t.init(t,e)}),jx=B("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ZS(e)),$t.init(t,e)}),Mx=B("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=NS),$t.init(t,e)}),zx=B("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=zS),$t.init(t,e),t._zod.bag.format="ipv4"}),Ux=B("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=US),$t.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Lx=B("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=LS(e.delimiter)),$t.init(t,e),t._zod.bag.format="mac"}),qx=B("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=qS),$t.init(t,e)}),Fx=B("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=FS),$t.init(t,e),t._zod.check=r=>{let n=r.value.split("/");try{if(n.length!==2)throw new Error;let[o,i]=n;if(!i)throw new Error;let a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Bx(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}s(Bx,"isValidBase64");var Vx=B("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=BS),$t.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{Bx(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function oD(t){if(!vf.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Bx(r)}s(oD,"isValidBase64URL");var Hx=B("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=vf),$t.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{oD(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Zx=B("$ZodE164",(t,e)=>{e.pattern??(e.pattern=VS),$t.init(t,e)});function iD(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}s(iD,"isValidJWT");var Jx=B("$ZodJWT",(t,e)=>{$t.init(t,e),t._zod.check=r=>{iD(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),Kx=B("$ZodCustomStringFormat",(t,e)=>{$t.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),kf=B("$ZodNumber",(t,e)=>{He.init(t,e),t._zod.pattern=t._zod.bag.pattern??QS,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;let i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...i?{received:i}:{}}),r}}),Gx=B("$ZodNumberFormat",(t,e)=>{ox.init(t,e),kf.init(t,e)}),bl=B("$ZodBoolean",(t,e)=>{He.init(t,e),t._zod.pattern=XS,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}let o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),r}}),If=B("$ZodBigInt",(t,e)=>{He.init(t,e),t._zod.pattern=GS,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),Wx=B("$ZodBigIntFormat",(t,e)=>{ix.init(t,e),If.init(t,e)}),Qx=B("$ZodSymbol",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:o,inst:t}),r}}),Xx=B("$ZodUndefined",(t,e)=>{He.init(t,e),t._zod.pattern=ex,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:o,inst:t}),r}}),Yx=B("$ZodNull",(t,e)=>{He.init(t,e),t._zod.pattern=YS,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),r}}),e0=B("$ZodAny",(t,e)=>{He.init(t,e),t._zod.parse=r=>r}),t0=B("$ZodUnknown",(t,e)=>{He.init(t,e),t._zod.parse=r=>r}),r0=B("$ZodNever",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),n0=B("$ZodVoid",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"void",code:"invalid_type",input:o,inst:t}),r}}),o0=B("$ZodDate",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let o=r.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:t}),r}});function KN(t,e,r){t.issues.length&&e.issues.push(...vn(r,t.issues)),e.value[r]=t.value}s(KN,"handleArrayResult");var i0=B("$ZodArray",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);let i=[];for(let a=0;a<o.length;a++){let c=o[a],l=e.element._zod.run({value:c,issues:[]},n);l instanceof Promise?i.push(l.then(d=>KN(d,r,a))):KN(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function Ef(t,e,r,n){t.issues.length&&e.issues.push(...vn(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}s(Ef,"handlePropertyResult");function sD(t){let e=Object.keys(t.shape);for(let n of e)if(!t.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let r=wS(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}s(sD,"normalizeDef");function aD(t,e,r,n,o,i){let a=[],c=o.keySet,l=o.catchall._zod,d=l.def.type;for(let p in e){if(c.has(p))continue;if(d==="never"){a.push(p);continue}let m=l.run({value:e[p],issues:[]},n);m instanceof Promise?t.push(m.then(h=>Ef(h,r,p,e))):Ef(m,r,p,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}s(aD,"handleCatchall");var cD=B("$ZodObject",(t,e)=>{if(He.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let c=e.shape;Object.defineProperty(e,"shape",{get:s(()=>{let l={...c};return Object.defineProperty(e,"shape",{value:l}),l},"get")})}let n=Ja(()=>sD(e));dt(t._zod,"propValues",()=>{let c=e.shape,l={};for(let d in c){let p=c[d]._zod;if(p.values){l[d]??(l[d]=new Set);for(let m of p.values)l[d].add(m)}}return l});let o=Ds,i=e.catchall,a;t._zod.parse=(c,l)=>{a??(a=n.value);let d=c.value;if(!o(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};let p=[],m=a.shape;for(let h of a.keys){let g=m[h]._zod.run({value:d[h],issues:[]},l);g instanceof Promise?p.push(g.then(f=>Ef(f,c,h,d))):Ef(g,c,h,d)}return i?aD(p,d,c,l,n.value,t):p.length?Promise.all(p).then(()=>c):c}}),s0=B("$ZodObjectJIT",(t,e)=>{cD.init(t,e);let r=t._zod.parse,n=Ja(()=>sD(e)),o=s(h=>{let y=new _l(["shape","payload","ctx"]),g=n.value,f=s(S=>{let k=sf(S);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`},"parseStr");y.write("const input = payload.value;");let _=Object.create(null),w=0;for(let S of g.keys)_[S]=`key_${w++}`;y.write("const newResult = {};");for(let S of g.keys){let k=_[S],R=sf(S);y.write(`const ${k} = ${f(S)};`),y.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${k}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");let b=y.compile();return(S,k)=>b(h,S,k)},"generateFastpass"),i,a=Ds,c=!al.jitless,d=c&&vS.value,p=e.catchall,m;t._zod.parse=(h,y)=>{m??(m=n.value);let g=h.value;return a(g)?c&&d&&y?.async===!1&&y.jitless!==!0?(i||(i=o(e.shape)),h=i(h,y),p?aD([],g,h,y,m,t):h):r(h,y):(h.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),h)}});function GN(t,e,r,n){for(let i of t)if(i.issues.length===0)return e.value=i.value,e;let o=t.filter(i=>!Wi(i));return o.length===1?(e.value=o[0].value,o[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>_n(a,n,dr())))}),e)}s(GN,"handleUnionResults");var Pf=B("$ZodUnion",(t,e)=>{He.init(t,e),dt(t._zod,"optin",()=>e.options.some(o=>o._zod.optin==="optional")?"optional":void 0),dt(t._zod,"optout",()=>e.options.some(o=>o._zod.optout==="optional")?"optional":void 0),dt(t._zod,"values",()=>{if(e.options.every(o=>o._zod.values))return new Set(e.options.flatMap(o=>Array.from(o._zod.values)))}),dt(t._zod,"pattern",()=>{if(e.options.every(o=>o._zod.pattern)){let o=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>ll(i.source)).join("|")})$`)}});let r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(o,i)=>{if(r)return n(o,i);let a=!1,c=[];for(let l of e.options){let d=l._zod.run({value:o.value,issues:[]},i);if(d instanceof Promise)c.push(d),a=!0;else{if(d.issues.length===0)return d;c.push(d)}}return a?Promise.all(c).then(l=>GN(l,o,t,i)):GN(c,o,t,i)}}),a0=B("$ZodDiscriminatedUnion",(t,e)=>{Pf.init(t,e);let r=t._zod.parse;dt(t._zod,"propValues",()=>{let o={};for(let i of e.options){let a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(let[c,l]of Object.entries(a)){o[c]||(o[c]=new Set);for(let d of l)o[c].add(d)}}return o});let n=Ja(()=>{let o=e.options,i=new Map;for(let a of o){let c=a._zod.propValues?.[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(let l of c){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,a)}}return i});t._zod.parse=(o,i)=>{let a=o.value;if(!Ds(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),o;let c=n.value.get(a?.[e.discriminator]);return c?c._zod.run(o,i):e.unionFallback?r(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:a,path:[e.discriminator],inst:t}),o)}}),c0=B("$ZodIntersection",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value,i=e.left._zod.run({value:o,issues:[]},n),a=e.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,d])=>WN(r,l,d)):WN(r,i,a)}});function Sx(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Gi(t)&&Gi(e)){let r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),o={...t,...e};for(let i of n){let a=Sx(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let o=t[n],i=e[n],a=Sx(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}s(Sx,"mergeValues");function WN(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Wi(t))return t;let n=Sx(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}s(WN,"handleIntersectionResults");var Af=B("$ZodTuple",(t,e)=>{He.init(t,e);let r=e.items;t._zod.parse=(n,o)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],c=[...r].reverse().findIndex(p=>p._zod.optin!=="optional"),l=c===-1?0:r.length-c;if(!e.rest){let p=i.length>r.length,m=i.length<l-1;if(p||m)return n.issues.push({...p?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:t,origin:"array"}),n}let d=-1;for(let p of r){if(d++,d>=i.length&&d>=l)continue;let m=p._zod.run({value:i[d],issues:[]},o);m instanceof Promise?a.push(m.then(h=>wf(h,n,d))):wf(m,n,d)}if(e.rest){let p=i.slice(r.length);for(let m of p){d++;let h=e.rest._zod.run({value:m,issues:[]},o);h instanceof Promise?a.push(h.then(y=>wf(y,n,d))):wf(h,n,d)}}return a.length?Promise.all(a).then(()=>n):n}});function wf(t,e,r){t.issues.length&&e.issues.push(...vn(r,t.issues)),e.value[r]=t.value}s(wf,"handleTupleResult");var u0=B("$ZodRecord",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Gi(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),r;let i=[],a=e.keyType._zod.values;if(a){r.value={};let c=new Set;for(let d of a)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){c.add(typeof d=="number"?d.toString():d);let p=e.valueType._zod.run({value:o[d],issues:[]},n);p instanceof Promise?i.push(p.then(m=>{m.issues.length&&r.issues.push(...vn(d,m.issues)),r.value[d]=m.value})):(p.issues.length&&r.issues.push(...vn(d,p.issues)),r.value[d]=p.value)}let l;for(let d in o)c.has(d)||(l=l??[],l.push(d));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:l})}else{r.value={};for(let c of Reflect.ownKeys(o)){if(c==="__proto__")continue;let l=e.keyType._zod.run({value:c,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(p=>_n(p,n,dr())),input:c,path:[c],inst:t}),r.value[l.value]=l.value;continue}let d=e.valueType._zod.run({value:o[c],issues:[]},n);d instanceof Promise?i.push(d.then(p=>{p.issues.length&&r.issues.push(...vn(c,p.issues)),r.value[l.value]=p.value})):(d.issues.length&&r.issues.push(...vn(c,d.issues)),r.value[l.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),l0=B("$ZodMap",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:o,inst:t}),r;let i=[];r.value=new Map;for(let[a,c]of o){let l=e.keyType._zod.run({value:a,issues:[]},n),d=e.valueType._zod.run({value:c,issues:[]},n);l instanceof Promise||d instanceof Promise?i.push(Promise.all([l,d]).then(([p,m])=>{QN(p,m,r,a,o,t,n)})):QN(l,d,r,a,o,t,n)}return i.length?Promise.all(i).then(()=>r):r}});function QN(t,e,r,n,o,i,a){t.issues.length&&(dl.has(typeof n)?r.issues.push(...vn(n,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:o,inst:i,issues:t.issues.map(c=>_n(c,a,dr()))})),e.issues.length&&(dl.has(typeof n)?r.issues.push(...vn(n,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:o,inst:i,key:n,issues:e.issues.map(c=>_n(c,a,dr()))})),r.value.set(t.value,e.value)}s(QN,"handleMapResult");var d0=B("$ZodSet",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Set))return r.issues.push({input:o,inst:t,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let a of o){let c=e.valueType._zod.run({value:a,issues:[]},n);c instanceof Promise?i.push(c.then(l=>XN(l,r))):XN(c,r)}return i.length?Promise.all(i).then(()=>r):r}});function XN(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}s(XN,"handleSetResult");var p0=B("$ZodEnum",(t,e)=>{He.init(t,e);let r=ul(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(o=>dl.has(typeof o)).map(o=>typeof o=="string"?On(o):o.toString()).join("|")})$`),t._zod.parse=(o,i)=>{let a=o.value;return n.has(a)||o.issues.push({code:"invalid_value",values:r,input:a,inst:t}),o}}),m0=B("$ZodLiteral",(t,e)=>{if(He.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?On(n):n?On(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,o)=>{let i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),f0=B("$ZodFile",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return o instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:o,inst:t}),r}}),h0=B("$ZodTransform",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Hi(t.constructor.name);let o=e.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new Qn;return r.value=o,r}});function YN(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}s(YN,"handleOptionalResult");var g0=B("$ZodOptional",(t,e)=>{He.init(t,e),t._zod.optin="optional",t._zod.optout="optional",dt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),dt(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${ll(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>YN(i,r.value)):YN(o,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),y0=B("$ZodNullable",(t,e)=>{He.init(t,e),dt(t._zod,"optin",()=>e.innerType._zod.optin),dt(t._zod,"optout",()=>e.innerType._zod.optout),dt(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${ll(r.source)}|null)$`):void 0}),dt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),v0=B("$ZodDefault",(t,e)=>{He.init(t,e),t._zod.optin="optional",dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>eD(i,e)):eD(o,e)}});function eD(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}s(eD,"handleDefaultResult");var _0=B("$ZodPrefault",(t,e)=>{He.init(t,e),t._zod.optin="optional",dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),b0=B("$ZodNonOptional",(t,e)=>{He.init(t,e),dt(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>tD(i,t)):tD(o,t)}});function tD(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}s(tD,"handleNonOptionalResult");var w0=B("$ZodSuccess",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Hi("ZodSuccess");let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.issues.length===0,r)):(r.value=o.issues.length===0,r)}}),S0=B("$ZodCatch",(t,e)=>{He.init(t,e),dt(t._zod,"optin",()=>e.innerType._zod.optin),dt(t._zod,"optout",()=>e.innerType._zod.optout),dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>_n(a,n,dr()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(i=>_n(i,n,dr()))},input:r.value}),r.issues=[]),r)}}),x0=B("$ZodNaN",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),T0=B("$ZodPipe",(t,e)=>{He.init(t,e),dt(t._zod,"values",()=>e.in._zod.values),dt(t._zod,"optin",()=>e.in._zod.optin),dt(t._zod,"optout",()=>e.out._zod.optout),dt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>Sf(a,e.in,n)):Sf(i,e.in,n)}let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(i=>Sf(i,e.out,n)):Sf(o,e.out,n)}});function Sf(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}s(Sf,"handlePipeResult");var wl=B("$ZodCodec",(t,e)=>{He.init(t,e),dt(t._zod,"values",()=>e.in._zod.values),dt(t._zod,"optin",()=>e.in._zod.optin),dt(t._zod,"optout",()=>e.out._zod.optout),dt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let i=e.in._zod.run(r,n);return i instanceof Promise?i.then(a=>xf(a,e,n)):xf(i,e,n)}else{let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>xf(a,e,n)):xf(i,e,n)}}});function xf(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let o=e.transform(t.value,t);return o instanceof Promise?o.then(i=>Tf(t,i,e.out,r)):Tf(t,o,e.out,r)}else{let o=e.reverseTransform(t.value,t);return o instanceof Promise?o.then(i=>Tf(t,i,e.in,r)):Tf(t,o,e.in,r)}}s(xf,"handleCodecAResult");function Tf(t,e,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},n)}s(Tf,"handleCodecTxResult");var E0=B("$ZodReadonly",(t,e)=>{He.init(t,e),dt(t._zod,"propValues",()=>e.innerType._zod.propValues),dt(t._zod,"values",()=>e.innerType._zod.values),dt(t._zod,"optin",()=>e.innerType?._zod?.optin),dt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(rD):rD(o)}});function rD(t){return t.value=Object.freeze(t.value),t}s(rD,"handleReadonlyResult");var k0=B("$ZodTemplateLiteral",(t,e)=>{He.init(t,e);let r=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let o=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!o)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let i=o.startsWith("^")?1:0,a=o.endsWith("$")?o.length-1:o.length;r.push(o.slice(i,a))}else if(n===null||bS.has(typeof n))r.push(On(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(n,o)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:t,expected:"template_literal",code:"invalid_type"}),n):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),n)}),I0=B("$ZodFunction",(t,e)=>(He.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let o=t._def.input?cf(t._def.input,n):n,i=Reflect.apply(r,this,o);return t._def.output?cf(t._def.output,i):i}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let o=t._def.input?await uf(t._def.input,n):n,i=await Reflect.apply(r,this,o);return t._def.output?await uf(t._def.output,i):i}},t._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let n=t.constructor;return Array.isArray(r[0])?new n({type:"function",input:new Af({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new n({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let n=t.constructor;return new n({type:"function",input:t._def.input,output:r})},t)),P0=B("$ZodPromise",(t,e)=>{He.init(t,e),t._zod.parse=(r,n)=>Promise.resolve(r.value).then(o=>e.innerType._zod.run({value:o,issues:[]},n))}),A0=B("$ZodLazy",(t,e)=>{He.init(t,e),dt(t._zod,"innerType",()=>e.getter()),dt(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),dt(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),dt(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),dt(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,n)=>t._zod.innerType._zod.run(r,n)}),C0=B("$ZodCustom",(t,e)=>{jt.init(t,e),He.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,o=e.fn(n);if(o instanceof Promise)return o.then(i=>nD(i,r,n,t));nD(o,r,n,t)}});function nD(t,e,r,n){if(!t){let o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(Ka(o))}}s(nD,"handleRefineResult");var Il={};hn(Il,{ar:()=>O0,az:()=>$0,be:()=>R0,bg:()=>N0,ca:()=>D0,cs:()=>j0,da:()=>M0,de:()=>z0,en:()=>Sl,eo:()=>U0,es:()=>L0,fa:()=>q0,fi:()=>F0,fr:()=>B0,frCA:()=>V0,he:()=>H0,hu:()=>Z0,id:()=>J0,is:()=>K0,it:()=>G0,ja:()=>W0,ka:()=>Q0,kh:()=>X0,km:()=>xl,ko:()=>Y0,lt:()=>eT,mk:()=>tT,ms:()=>rT,nl:()=>nT,no:()=>oT,ota:()=>iT,pl:()=>aT,ps:()=>sT,pt:()=>cT,ru:()=>uT,sl:()=>lT,sv:()=>dT,ta:()=>pT,th:()=>mT,tr:()=>fT,ua:()=>hT,uk:()=>kl,ur:()=>gT,vi:()=>yT,yo:()=>bT,zhCN:()=>vT,zhTW:()=>_T});var MJ=s(()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return o=>{switch(o.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${o.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ce(o.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${o.prefix}"`:i.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${i.suffix}"`:i.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${i.includes}"`:i.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${i.pattern}`:`${n[i.format]??o.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${o.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${o.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${o.keys.length>1?"\u0629":""}: ${X(o.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}},"error");function O0(){return{localeError:MJ()}}s(O0,"default");var zJ=s(()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${o.expected}, daxil olan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ce(o.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${i.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:i.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${i.suffix}" il\u0259 bitm\u0259lidir`:i.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${i.includes}" daxil olmal\u0131d\u0131r`:i.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${i.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[i.format]??o.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${o.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${o.keys.length>1?"lar":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${o.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}},"error");function $0(){return{localeError:zJ()}}s($0,"default");function uD(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(uD,"getBelarusianPlural");var UJ=s(()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0456\u045E";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${o.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ce(o.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=uD(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=uD(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${o.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${o.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}},"error");function R0(){return{localeError:UJ()}}s(R0,"default");var LJ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),qJ=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${LJ(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ce(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.maximum.toString()} ${i.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.minimum.toString()} ${i.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;if(o.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${o.prefix}"`;if(o.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${o.suffix}"`;if(o.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${o.includes}"`;if(o.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${o.pattern}`;let i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return o.format==="emoji"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="datetime"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="date"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),o.format==="time"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="duration"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${i} ${r[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${X(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}},"error");function N0(){return{localeError:qJ()}}s(N0,"default");var FJ=s(()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${o.expected}, s'ha rebut ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Valor inv\xE0lid: s'esperava ${ce(o.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${X(o.values," o ")}`;case"too_big":{let i=o.inclusive?"com a m\xE0xim":"menys de",a=e(o.origin);return a?`Massa gran: s'esperava que ${o.origin??"el valor"} contingu\xE9s ${i} ${o.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${o.origin??"el valor"} fos ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"com a m\xEDnim":"m\xE9s de",a=e(o.origin);return a?`Massa petit: s'esperava que ${o.origin} contingu\xE9s ${i} ${o.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${o.origin} fos ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\xE0lid: ha d'incloure "${i.includes}"`:i.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${i.pattern}`:`Format inv\xE0lid per a ${n[i.format]??o.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${o.divisor}`;case"unrecognized_keys":return`Clau${o.keys.length>1?"s":""} no reconeguda${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${o.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${o.origin}`;default:return"Entrada inv\xE0lida"}}},"error");function D0(){return{localeError:FJ()}}s(D0,"default");var BJ=s(()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(o))return"pole";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return o=>{switch(o.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${o.expected}, obdr\u017Eeno ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ce(o.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${i.pattern}`:`Neplatn\xFD form\xE1t ${n[i.format]??o.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${o.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${X(o.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${o.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${o.origin}`;default:return"Neplatn\xFD vstup"}}},"error");function j0(){return{localeError:BJ()}}s(j0,"default");var VJ=s(()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return c},"parsedType"),i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${ce(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${X(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`For stor: forventede ${d??"value"} ${l.verb} ${c} ${a.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${d??"value"} havde ${c} ${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`For lille: forventede ${d} ${l.verb} ${c} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${c} ${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Ugyldig streng: skal starte med "${c.prefix}"`:c.format==="ends_with"?`Ugyldig streng: skal ende med "${c.suffix}"`:c.format==="includes"?`Ugyldig streng: skal indeholde "${c.includes}"`:c.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${c.pattern}`:`Ugyldig ${i[c.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${X(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}},"error");function M0(){return{localeError:VJ()}}s(M0,"default");var HJ=s(()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"Zahl";case"object":{if(Array.isArray(o))return"Array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return o=>{switch(o.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${o.expected}, erhalten ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ce(o.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ist`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ist`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ung\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\xFCltig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${o.divisor} sein`;case"unrecognized_keys":return`${o.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${o.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${o.origin}`;default:return"Ung\xFCltige Eingabe"}}},"error");function z0(){return{localeError:HJ()}}s(z0,"default");var ZJ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),JJ=s(()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${ZJ(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${ce(n.values[0])}`:`Invalid option: expected one of ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Too big: expected ${n.origin??"value"} to have ${o}${n.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Too small: expected ${n.origin} to have ${o}${n.minimum.toString()} ${i.unit}`:`Too small: expected ${n.origin} to be ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${r[o.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${X(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}},"error");function Sl(){return{localeError:JJ()}}s(Sl,"default");var KJ=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),GJ=s(()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${KJ(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${ce(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${o}${n.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${r[o.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${X(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}},"error");function U0(){return{localeError:GJ()}}s(U0,"default");var WJ=s(()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return c},"parsedType"),i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${ce(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${X(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`Demasiado grande: se esperaba que ${d??"valor"} tuviera ${c}${a.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${d??"valor"} fuera ${c}${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${c}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${c}${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${c.prefix}"`:c.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${c.suffix}"`:c.format==="includes"?`Cadena inv\xE1lida: debe incluir "${c.includes}"`:c.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${c.pattern}`:`Inv\xE1lido ${i[c.format]??a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${X(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}},"error");function L0(){return{localeError:WJ()}}s(L0,"default");var QJ=s(()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0622\u0631\u0627\u06CC\u0647";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return o=>{switch(o.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${o.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(o.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return o.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ce(o.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${X(o.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:i.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:i.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${i.includes}" \u0628\u0627\u0634\u062F`:i.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${i.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[i.format]??o.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${o.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${o.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${X(o.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${o.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${o.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}},"error");function q0(){return{localeError:QJ()}}s(q0,"default");var XJ=s(()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return o=>{switch(o.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${o.expected}, oli ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ce(o.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${i}${o.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${i}${o.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${i.pattern}`:`Virheellinen ${n[i.format]??o.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${o.divisor} monikerta`;case"unrecognized_keys":return`${o.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${X(o.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}},"error");function F0(){return{localeError:XJ()}}s(F0,"default");var YJ=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombre";case"object":{if(Array.isArray(o))return"tableau";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : ${o.expected} attendu, ${r(o.input)} re\xE7u`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : ${ce(o.values[0])} attendu`:`Option invalide : une valeur parmi ${X(o.values,"|")} attendue`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Trop grand : ${o.origin??"valeur"} doit ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${o.origin??"valeur"} doit \xEAtre ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Trop petit : ${o.origin} doit ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : ${o.origin} doit \xEAtre ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${X(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function B0(){return{localeError:YJ()}}s(B0,"default");var eK=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${o.expected}, re\xE7u ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : attendu ${ce(o.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u2264":"<",a=e(o.origin);return a?`Trop grand : attendu que ${o.origin??"la valeur"} ait ${i}${o.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${o.origin??"la valeur"} soit ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u2265":">",a=e(o.origin);return a?`Trop petit : attendu que ${o.origin} ait ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${o.origin} soit ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${X(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");function V0(){return{localeError:eK()}}s(V0,"default");var tK=s(()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=s(d=>d?t[d]:void 0,"typeEntry"),n=s(d=>{let p=r(d);return p?p.label:d??t.unknown.label},"typeLabel"),o=s(d=>`\u05D4${n(d)}`,"withDefinite"),i=s(d=>(r(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA","verbFor"),a=s(d=>d?e[d]??null:null,"getSizing"),c=s(d=>{let p=typeof d;switch(p){case"number":return Number.isNaN(d)?"NaN":"number";case"object":return Array.isArray(d)?"array":d===null?"null":Object.getPrototypeOf(d)!==Object.prototype&&d.constructor?d.constructor.name:"object";default:return p}},"parsedType"),l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return d=>{switch(d.code){case"invalid_type":{let p=d.expected,m=n(p),h=c(d.input),y=t[h]?.label??h;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}, \u05D4\u05EA\u05E7\u05D1\u05DC ${y}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ce(d.values[0])}`;let p=d.values.map(y=>ce(y));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p[0]} \u05D0\u05D5 ${p[1]}`;let m=p[p.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p.slice(0,-1).join(", ")} \u05D0\u05D5 ${m}`}case"too_big":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",f=d.inclusive?`${d.maximum} ${p?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${p?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?"<=":"<",y=i(d.origin??"value");return p?.unit?`${p.longLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()} ${p.unit}`:`${p?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()}`}case"too_small":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let _=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${_}`}let f=d.inclusive?`${d.minimum} ${p?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${p?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?">=":">",y=i(d.origin??"value");return p?.unit?`${p.shortLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()} ${p.unit}`:`${p?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()}`}case"invalid_format":{let p=d;if(p.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${p.prefix}"`;if(p.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${p.suffix}"`;if(p.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${p.includes}"`;if(p.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${p.pattern}`;let m=l[p.format],h=m?.label??p.format,g=(m?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${h} \u05DC\u05D0 ${g}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${X(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${o(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}},"error");function H0(){return{localeError:tK()}}s(H0,"default");var rK=s(()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(o))return"t\xF6mb";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return o=>{switch(o.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${o.expected}, a kapott \xE9rt\xE9k ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ce(o.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xFAl nagy: ${o.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${i}${o.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${o.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} m\xE9rete t\xFAl kicsi ${i}${o.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} t\xFAl kicsi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\xC9rv\xE9nytelen string: "${i.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:i.format==="ends_with"?`\xC9rv\xE9nytelen string: "${i.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:i.format==="includes"?`\xC9rv\xE9nytelen string: "${i.includes}" \xE9rt\xE9ket kell tartalmaznia`:i.format==="regex"?`\xC9rv\xE9nytelen string: ${i.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[i.format]??o.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${o.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${o.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${o.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}},"error");function Z0(){return{localeError:rK()}}s(Z0,"default");var nK=s(()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak valid: diharapkan ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak valid: diharapkan ${ce(o.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: diharapkan ${o.origin??"value"} memiliki ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${o.origin??"value"} menjadi ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: diharapkan ${o.origin} memiliki ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${o.origin} menjadi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${n[i.format]??o.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${o.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${o.origin}`;default:return"Input tidak valid"}}},"error");function J0(){return{localeError:nK()}}s(J0,"default");var oK=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),iK=s(()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${oK(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ce(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${o}${n.maximum.toString()} ${i.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${o}${n.minimum.toString()} ${i.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${o.prefix}"`:o.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${o.suffix}"`:o.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${o.includes}"`:o.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${o.pattern}`:`Rangt ${r[o.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${X(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}},"error");function K0(){return{localeError:iK()}}s(K0,"default");var sK=s(()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numero";case"object":{if(Array.isArray(o))return"vettore";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input non valido: atteso ${o.expected}, ricevuto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input non valido: atteso ${ce(o.values[0])}`:`Opzione non valida: atteso uno tra ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Troppo grande: ${o.origin??"valore"} deve avere ${i}${o.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${o.origin??"valore"} deve essere ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Troppo piccolo: ${o.origin} deve avere ${i}${o.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${o.origin} deve essere ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${o.divisor}`;case"unrecognized_keys":return`Chiav${o.keys.length>1?"i":"e"} non riconosciut${o.keys.length>1?"e":"a"}: ${X(o.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${o.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${o.origin}`;default:return"Input non valido"}}},"error");function G0(){return{localeError:sK()}}s(G0,"default");var aK=s(()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(o))return"\u914D\u5217";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${o.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(o.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return o.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ce(o.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${X(o.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let i=o.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=e(o.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${a.unit??"\u8981\u7D20"}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let i=o.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=e(o.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${a.unit}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${i.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${o.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${o.keys.length>1?"\u7FA4":""}: ${X(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}},"error");function W0(){return{localeError:aK()}}s(W0,"default");var cK=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},"parsedType"),uK=s(()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${cK(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ce(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${X(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${i.verb} ${o}${n.maximum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${i.verb} ${o}${n.minimum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.prefix}"-\u10D8\u10D7`:o.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.suffix}"-\u10D8\u10D7`:o.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${o.includes}"-\u10E1`:o.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${o.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[o.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${X(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}},"error");function Q0(){return{localeError:uK()}}s(Q0,"default");var lK=s(()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(o))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(o===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return o=>{switch(o.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ce(o.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${i.prefix}"`:i.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${i.suffix}"`:i.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${i.includes}"`:i.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${i.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${o.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${X(o.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}},"error");function xl(){return{localeError:lK()}}s(xl,"default");function X0(){return xl()}s(X0,"default");var dK=s(()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return o=>{switch(o.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${o.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(o.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return o.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ce(o.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${X(o.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let i=o.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=i==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()} ${i}${a}`}case"too_small":{let i=o.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=i==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()} ${i}${a}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:i.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${i.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[i.format]??o.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${o.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${X(o.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${o.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${o.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}},"error");function Y0(){return{localeError:dK()}}s(Y0,"default");var pK=s(t=>El(typeof t,t),"parsedType"),El=s((t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},"parsedTypeFromType"),Tl=s(t=>t.charAt(0).toUpperCase()+t.slice(1),"capitalizeFirstCharacter");function lD(t){let e=Math.abs(t),r=e%10,n=e%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}s(lD,"getUnitTypeFromNumber");var mK=s(()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,o,i,a){let c=t[n]??null;return c===null?c:{unit:c.unit[o],verb:c.verb[a][i?"inclusive":"notInclusive"]}}s(e,"getSizing");let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${pK(n.input)}, o tik\u0117tasi - ${El(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${ce(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${X(n.values,"|")} pasirinkim\u0173`;case"too_big":{let o=El(n.origin),i=e(n.origin,lD(Number(n.maximum)),n.inclusive??!1,"smaller");if(i?.verb)return`${Tl(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.maximum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Tl(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.maximum.toString()} ${i?.unit}`}case"too_small":{let o=El(n.origin),i=e(n.origin,lD(Number(n.minimum)),n.inclusive??!1,"bigger");if(i?.verb)return`${Tl(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.minimum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Tl(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.minimum.toString()} ${i?.unit}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${o.prefix}"`:o.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${o.includes}"`:o.format==="regex"?`Eilut\u0117 privalo atitikti ${o.pattern}`:`Neteisingas ${r[o.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${X(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let o=El(n.origin);return`${Tl(o??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}},"error");function eT(){return{localeError:mK()}}s(eT,"default");var fK=s(()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(o))return"\u043D\u0438\u0437\u0430";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return o=>{switch(o.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${ce(o.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${o.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${o.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}},"error");function tT(){return{localeError:fK()}}s(tT,"default");var hK=s(()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombor";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak sah: dijangka ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak sah: dijangka ${ce(o.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: dijangka ${o.origin??"nilai"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${o.origin??"nilai"} adalah ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: dijangka ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${o.origin} adalah ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${n[i.format]??o.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${X(o.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${o.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${o.origin}`;default:return"Input tidak sah"}}},"error");function rT(){return{localeError:hK()}}s(rT,"default");var gK=s(()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"getal";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return o=>{switch(o.code){case"invalid_type":return`Ongeldige invoer: verwacht ${o.expected}, ontving ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ongeldige invoer: verwacht ${ce(o.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Te groot: verwacht dat ${o.origin??"waarde"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elementen"}`:`Te groot: verwacht dat ${o.origin??"waarde"} ${i}${o.maximum.toString()} is`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Te klein: verwacht dat ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Te klein: verwacht dat ${o.origin} ${i}${o.minimum.toString()} is`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${o.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${o.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${o.origin}`;default:return"Ongeldige invoer"}}},"error");function nT(){return{localeError:gK()}}s(nT,"default");var yK=s(()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"tall";case"object":{if(Array.isArray(o))return"liste";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Ugyldig input: forventet ${o.expected}, fikk ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ugyldig verdi: forventet ${ce(o.values[0])}`:`Ugyldig valg: forventet en av ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${i.pattern}`:`Ugyldig ${n[i.format]??o.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${o.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${o.origin}`;default:return"Ugyldig input"}}},"error");function oT(){return{localeError:yK()}}s(oT,"default");var vK=s(()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numara";case"object":{if(Array.isArray(o))return"saf";if(o===null)return"gayb";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return o=>{switch(o.code){case"invalid_type":return`F\xE2sit giren: umulan ${o.expected}, al\u0131nan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`F\xE2sit giren: umulan ${ce(o.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let i=o;return i.format==="starts_with"?`F\xE2sit metin: "${i.prefix}" ile ba\u015Flamal\u0131.`:i.format==="ends_with"?`F\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\xE2sit metin: "${i.includes}" ihtiv\xE2 etmeli.`:i.format==="regex"?`F\xE2sit metin: ${i.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[i.format]??o.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${o.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${o.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}},"error");function iT(){return{localeError:vK()}}s(iT,"default");var _K=s(()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0627\u0631\u06D0";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return o=>{switch(o.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${o.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(o.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return o.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ce(o.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${X(o.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0648\u064A`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0648\u064A`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:i.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:i.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${i.includes}" \u0648\u0644\u0631\u064A`:i.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${i.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[i.format]??o.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${o.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${o.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${o.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${o.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}},"error");function sT(){return{localeError:_K()}}s(sT,"default");var bK=s(()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"liczba";case"object":{if(Array.isArray(o))return"tablica";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return o=>{switch(o.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${o.expected}, otrzymano ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ce(o.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${i.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[i.format]??o.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${o.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${o.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${o.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}},"error");function aT(){return{localeError:bK()}}s(aT,"default");var wK=s(()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(o))return"array";if(o===null)return"nulo";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${o.expected}, recebido ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entrada inv\xE1lida: esperado ${ce(o.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Muito grande: esperado que ${o.origin??"valor"} tivesse ${i}${o.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${o.origin??"valor"} fosse ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Muito pequeno: esperado que ${o.origin} tivesse ${i}${o.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${o.origin} fosse ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${i.pattern}`:`${n[i.format]??o.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${o.divisor}`;case"unrecognized_keys":return`Chave${o.keys.length>1?"s":""} desconhecida${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${o.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${o.origin}`;default:return"Campo inv\xE1lido"}}},"error");function cT(){return{localeError:wK()}}s(cT,"default");function dD(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}s(dD,"getRussianPlural");var SK=s(()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ce(o.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=dD(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=dD(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${o.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0438":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}},"error");function uT(){return{localeError:SK()}}s(uT,"default");var xK=s(()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(o))return"tabela";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return o=>{switch(o.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${o.expected}, prejeto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ce(o.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} imelo ${i}${o.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${o.origin} imelo ${i}${o.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${n[i.format]??o.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${o.divisor}`;case"unrecognized_keys":return`Neprepoznan${o.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${X(o.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${o.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${o.origin}`;default:return"Neveljaven vnos"}}},"error");function lT(){return{localeError:xK()}}s(lT,"default");var TK=s(()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"antal";case"object":{if(Array.isArray(o))return"lista";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return o=>{switch(o.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${o.expected}, fick ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ce(o.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${n[i.format]??o.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${o.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${o.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}},"error");function dT(){return{localeError:TK()}}s(dT,"default");var EK=s(()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(o))return"\u0B85\u0BA3\u0BBF";if(o===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ce(o.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(o.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${i.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${o.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${o.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}},"error");function pT(){return{localeError:EK()}}s(pT,"default");var kK=s(()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(o))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(o===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return o=>{switch(o.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${o.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ce(o.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${i.suffix}"`:i.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${i.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:i.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${i.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${o.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${X(o.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}},"error");function mT(){return{localeError:kK()}}s(mT,"default");var IK=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),PK=s(()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${IK(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ce(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()} ${i.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()} ${i.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ge\xE7ersiz metin: "${o.prefix}" ile ba\u015Flamal\u0131`:o.format==="ends_with"?`Ge\xE7ersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Ge\xE7ersiz metin: "${o.includes}" i\xE7ermeli`:o.format==="regex"?`Ge\xE7ersiz metin: ${o.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[o.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${X(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}},"error");function fT(){return{localeError:PK()}}s(fT,"default");var AK=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${o.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ce(o.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} \u0431\u0443\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0456":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${o.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}},"error");function kl(){return{localeError:AK()}}s(kl,"default");function hT(){return kl()}s(hT,"default");var CK=s(()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(o))return"\u0622\u0631\u06D2";if(o===null)return"\u0646\u0644";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return o=>{switch(o.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${o.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(o.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return o.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ce(o.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${X(o.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${i}${o.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u06D2 ${i}${o.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u0627 ${i}${o.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${i.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${o.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${o.keys.length>1?"\u0632":""}: ${X(o.keys,"\u060C ")}`;case"invalid_key":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}},"error");function gT(){return{localeError:CK()}}s(gT,"default");var OK=s(()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(o))return"m\u1EA3ng";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return o=>{switch(o.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${o.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ce(o.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${i.pattern}`:`${n[i.format]??o.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${o.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${X(o.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}},"error");function yT(){return{localeError:OK()}}s(yT,"default");var $K=s(()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(o))return"\u6570\u7EC4";if(o===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${o.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ce(o.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.prefix}" \u5F00\u5934`:i.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.suffix}" \u7ED3\u5C3E`:i.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${i.pattern}`:`\u65E0\u6548${n[i.format]??o.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${o.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${o.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}},"error");function vT(){return{localeError:$K()}}s(vT,"default");var RK=s(()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${o.expected}\uFF0C\u4F46\u6536\u5230 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ce(o.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.prefix}" \u958B\u982D`:i.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.suffix}" \u7D50\u5C3E`:i.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${i.pattern}`:`\u7121\u6548\u7684 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${o.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${o.keys.length>1?"\u5011":""}\uFF1A${X(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}},"error");function _T(){return{localeError:RK()}}s(_T,"default");var NK=s(()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(o))return"akop\u1ECD";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return o=>{switch(o.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${o.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ce(o.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin??"iye"} ${a.verb} ${i}${o.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.maximum}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin} ${a.verb} ${i}${o.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.minimum}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${i.prefix}"`:i.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${i.suffix}"`:i.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${i.includes}"`:i.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${i.pattern}`:`A\u1E63\xEC\u1E63e: ${n[i.format]??o.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${o.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${X(o.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}},"error");function bT(){return{localeError:NK()}}s(bT,"default");var pD,wT=Symbol("ZodOutput"),ST=Symbol("ZodInput"),ec=class{static{s(this,"$ZodRegistry")}constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let n={...this.get(r)??{}};delete n.id;let o={...n,...this._map.get(e)};return Object.keys(o).length?o:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Cf(){return new ec}s(Cf,"registry");(pD=globalThis).__zod_globalRegistry??(pD.__zod_globalRegistry=Cf());var Hr=globalThis.__zod_globalRegistry;function xT(t,e){return new t({type:"string",...ue(e)})}s(xT,"_string");function TT(t,e){return new t({type:"string",coerce:!0,...ue(e)})}s(TT,"_coercedString");function Of(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...ue(e)})}s(Of,"_email");function Pl(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...ue(e)})}s(Pl,"_guid");function $f(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...ue(e)})}s($f,"_uuid");function Rf(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ue(e)})}s(Rf,"_uuidv4");function Nf(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ue(e)})}s(Nf,"_uuidv6");function Df(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ue(e)})}s(Df,"_uuidv7");function Al(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...ue(e)})}s(Al,"_url");function jf(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...ue(e)})}s(jf,"_emoji");function Mf(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...ue(e)})}s(Mf,"_nanoid");function zf(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...ue(e)})}s(zf,"_cuid");function Uf(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...ue(e)})}s(Uf,"_cuid2");function Lf(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...ue(e)})}s(Lf,"_ulid");function qf(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...ue(e)})}s(qf,"_xid");function Ff(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...ue(e)})}s(Ff,"_ksuid");function Bf(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...ue(e)})}s(Bf,"_ipv4");function Vf(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...ue(e)})}s(Vf,"_ipv6");function ET(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...ue(e)})}s(ET,"_mac");function Hf(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ue(e)})}s(Hf,"_cidrv4");function Zf(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ue(e)})}s(Zf,"_cidrv6");function Jf(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...ue(e)})}s(Jf,"_base64");function Kf(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...ue(e)})}s(Kf,"_base64url");function Gf(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...ue(e)})}s(Gf,"_e164");function Wf(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...ue(e)})}s(Wf,"_jwt");var kT={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function IT(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ue(e)})}s(IT,"_isoDateTime");function PT(t,e){return new t({type:"string",format:"date",check:"string_format",...ue(e)})}s(PT,"_isoDate");function AT(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...ue(e)})}s(AT,"_isoTime");function CT(t,e){return new t({type:"string",format:"duration",check:"string_format",...ue(e)})}s(CT,"_isoDuration");function OT(t,e){return new t({type:"number",checks:[],...ue(e)})}s(OT,"_number");function $T(t,e){return new t({type:"number",coerce:!0,checks:[],...ue(e)})}s($T,"_coercedNumber");function RT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...ue(e)})}s(RT,"_int");function NT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...ue(e)})}s(NT,"_float32");function DT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...ue(e)})}s(DT,"_float64");function jT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...ue(e)})}s(jT,"_int32");function MT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...ue(e)})}s(MT,"_uint32");function zT(t,e){return new t({type:"boolean",...ue(e)})}s(zT,"_boolean");function UT(t,e){return new t({type:"boolean",coerce:!0,...ue(e)})}s(UT,"_coercedBoolean");function LT(t,e){return new t({type:"bigint",...ue(e)})}s(LT,"_bigint");function qT(t,e){return new t({type:"bigint",coerce:!0,...ue(e)})}s(qT,"_coercedBigint");function FT(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ue(e)})}s(FT,"_int64");function BT(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ue(e)})}s(BT,"_uint64");function VT(t,e){return new t({type:"symbol",...ue(e)})}s(VT,"_symbol");function HT(t,e){return new t({type:"undefined",...ue(e)})}s(HT,"_undefined");function ZT(t,e){return new t({type:"null",...ue(e)})}s(ZT,"_null");function JT(t){return new t({type:"any"})}s(JT,"_any");function KT(t){return new t({type:"unknown"})}s(KT,"_unknown");function GT(t,e){return new t({type:"never",...ue(e)})}s(GT,"_never");function WT(t,e){return new t({type:"void",...ue(e)})}s(WT,"_void");function QT(t,e){return new t({type:"date",...ue(e)})}s(QT,"_date");function XT(t,e){return new t({type:"date",coerce:!0,...ue(e)})}s(XT,"_coercedDate");function YT(t,e){return new t({type:"nan",...ue(e)})}s(YT,"_nan");function ri(t,e){return new _f({check:"less_than",...ue(e),value:t,inclusive:!1})}s(ri,"_lt");function Rn(t,e){return new _f({check:"less_than",...ue(e),value:t,inclusive:!0})}s(Rn,"_lte");function ni(t,e){return new bf({check:"greater_than",...ue(e),value:t,inclusive:!1})}s(ni,"_gt");function dn(t,e){return new bf({check:"greater_than",...ue(e),value:t,inclusive:!0})}s(dn,"_gte");function eE(t){return ni(0,t)}s(eE,"_positive");function tE(t){return ri(0,t)}s(tE,"_negative");function rE(t){return Rn(0,t)}s(rE,"_nonpositive");function nE(t){return dn(0,t)}s(nE,"_nonnegative");function zs(t,e){return new nx({check:"multiple_of",...ue(e),value:t})}s(zs,"_multipleOf");function tc(t,e){return new sx({check:"max_size",...ue(e),maximum:t})}s(tc,"_maxSize");function Us(t,e){return new ax({check:"min_size",...ue(e),minimum:t})}s(Us,"_minSize");function Cl(t,e){return new cx({check:"size_equals",...ue(e),size:t})}s(Cl,"_size");function rc(t,e){return new ux({check:"max_length",...ue(e),maximum:t})}s(rc,"_maxLength");function Qi(t,e){return new lx({check:"min_length",...ue(e),minimum:t})}s(Qi,"_minLength");function nc(t,e){return new dx({check:"length_equals",...ue(e),length:t})}s(nc,"_length");function Ol(t,e){return new px({check:"string_format",format:"regex",...ue(e),pattern:t})}s(Ol,"_regex");function $l(t){return new mx({check:"string_format",format:"lowercase",...ue(t)})}s($l,"_lowercase");function Rl(t){return new fx({check:"string_format",format:"uppercase",...ue(t)})}s(Rl,"_uppercase");function Nl(t,e){return new hx({check:"string_format",format:"includes",...ue(e),includes:t})}s(Nl,"_includes");function Dl(t,e){return new gx({check:"string_format",format:"starts_with",...ue(e),prefix:t})}s(Dl,"_startsWith");function jl(t,e){return new yx({check:"string_format",format:"ends_with",...ue(e),suffix:t})}s(jl,"_endsWith");function oE(t,e,r){return new vx({check:"property",property:t,schema:e,...ue(r)})}s(oE,"_property");function Ml(t,e){return new _x({check:"mime_type",mime:t,...ue(e)})}s(Ml,"_mime");function To(t){return new bx({check:"overwrite",tx:t})}s(To,"_overwrite");function zl(t){return To(e=>e.normalize(t))}s(zl,"_normalize");function Ul(){return To(t=>t.trim())}s(Ul,"_trim");function Ll(){return To(t=>t.toLowerCase())}s(Ll,"_toLowerCase");function ql(){return To(t=>t.toUpperCase())}s(ql,"_toUpperCase");function Fl(){return To(t=>yS(t))}s(Fl,"_slugify");function iE(t,e,r){return new t({type:"array",element:e,...ue(r)})}s(iE,"_array");function jK(t,e,r){return new t({type:"union",options:e,...ue(r)})}s(jK,"_union");function MK(t,e,r,n){return new t({type:"union",options:r,discriminator:e,...ue(n)})}s(MK,"_discriminatedUnion");function zK(t,e,r){return new t({type:"intersection",left:e,right:r})}s(zK,"_intersection");function UK(t,e,r,n){let o=r instanceof He,i=o?n:r,a=o?r:null;return new t({type:"tuple",items:e,rest:a,...ue(i)})}s(UK,"_tuple");function LK(t,e,r,n){return new t({type:"record",keyType:e,valueType:r,...ue(n)})}s(LK,"_record");function qK(t,e,r,n){return new t({type:"map",keyType:e,valueType:r,...ue(n)})}s(qK,"_map");function FK(t,e,r){return new t({type:"set",valueType:e,...ue(r)})}s(FK,"_set");function BK(t,e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new t({type:"enum",entries:n,...ue(r)})}s(BK,"_enum");function VK(t,e,r){return new t({type:"enum",entries:e,...ue(r)})}s(VK,"_nativeEnum");function HK(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...ue(r)})}s(HK,"_literal");function sE(t,e){return new t({type:"file",...ue(e)})}s(sE,"_file");function ZK(t,e){return new t({type:"transform",transform:e})}s(ZK,"_transform");function JK(t,e){return new t({type:"optional",innerType:e})}s(JK,"_optional");function KK(t,e){return new t({type:"nullable",innerType:e})}s(KK,"_nullable");function GK(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():_S(r)}})}s(GK,"_default");function WK(t,e,r){return new t({type:"nonoptional",innerType:e,...ue(r)})}s(WK,"_nonoptional");function QK(t,e){return new t({type:"success",innerType:e})}s(QK,"_success");function XK(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}s(XK,"_catch");function YK(t,e,r){return new t({type:"pipe",in:e,out:r})}s(YK,"_pipe");function eG(t,e){return new t({type:"readonly",innerType:e})}s(eG,"_readonly");function tG(t,e,r){return new t({type:"template_literal",parts:e,...ue(r)})}s(tG,"_templateLiteral");function rG(t,e){return new t({type:"lazy",getter:e})}s(rG,"_lazy");function nG(t,e){return new t({type:"promise",innerType:e})}s(nG,"_promise");function aE(t,e,r){let n=ue(r);return n.abort??(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}s(aE,"_custom");function cE(t,e,r){return new t({type:"custom",check:"custom",fn:e,...ue(r)})}s(cE,"_refine");function uE(t){let e=mD(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Ka(n,r.value,e._zod.def));else{let o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),r.issues.push(Ka(o))}},t(r.value,r)));return e}s(uE,"_superRefine");function mD(t,e){let r=new jt({check:"custom",...ue(e)});return r._zod.check=t,r}s(mD,"_check");function lE(t){let e=new jt({check:"describe"});return e._zod.onattach=[r=>{let n=Hr.get(r)??{};Hr.add(r,{...n,description:t})}],e._zod.check=()=>{},e}s(lE,"describe");function dE(t){let e=new jt({check:"meta"});return e._zod.onattach=[r=>{let n=Hr.get(r)??{};Hr.add(r,{...n,...t})}],e._zod.check=()=>{},e}s(dE,"meta");function pE(t,e){let r=ue(e),n=r.truthy??["true","1","yes","on","y","enabled"],o=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(y=>typeof y=="string"?y.toLowerCase():y),o=o.map(y=>typeof y=="string"?y.toLowerCase():y));let i=new Set(n),a=new Set(o),c=t.Codec??wl,l=t.Boolean??bl,d=t.String??Ms,p=new d({type:"string",error:r.error}),m=new l({type:"boolean",error:r.error}),h=new c({type:"pipe",in:p,out:m,transform:s(((y,g)=>{let f=y;return r.case!=="sensitive"&&(f=f.toLowerCase()),i.has(f)?!0:a.has(f)?!1:(g.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:g.value,inst:h,continue:!1}),{})}),"transform"),reverseTransform:s(((y,g)=>y===!0?n[0]||"true":o[0]||"false"),"reverseTransform"),error:r.error});return h}s(pE,"_stringbool");function oc(t,e,r,n={}){let o=ue(n),i={...ue(n),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:c=>r.test(c),...o};return r instanceof RegExp&&(i.pattern=r),new t(i)}s(oc,"_stringFormat");var Bl=class{static{s(this,"JSONSchemaGenerator")}constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Hr,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,r={path:[],schemaPath:[]}){var n;let o=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let c={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(e,c);let l=e._zod.toJSONSchema?.();if(l)c.schema=l;else{let m={...r,schemaPath:[...r.schemaPath,e],path:r.path},h=e._zod.parent;if(h)c.ref=h,this.process(h,m),this.seen.get(h).isParent=!0;else{let y=c.schema;switch(o.type){case"string":{let g=y;g.type="string";let{minimum:f,maximum:_,format:w,patterns:b,contentEncoding:S}=e._zod.bag;if(typeof f=="number"&&(g.minLength=f),typeof _=="number"&&(g.maxLength=_),w&&(g.format=i[w]??w,g.format===""&&delete g.format),S&&(g.contentEncoding=S),b&&b.size>0){let k=[...b];k.length===1?g.pattern=k[0].source:k.length>1&&(c.schema.allOf=[...k.map(R=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:R.source}))])}break}case"number":{let g=y,{minimum:f,maximum:_,format:w,multipleOf:b,exclusiveMaximum:S,exclusiveMinimum:k}=e._zod.bag;typeof w=="string"&&w.includes("int")?g.type="integer":g.type="number",typeof k=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.minimum=k,g.exclusiveMinimum=!0):g.exclusiveMinimum=k),typeof f=="number"&&(g.minimum=f,typeof k=="number"&&this.target!=="draft-4"&&(k>=f?delete g.minimum:delete g.exclusiveMinimum)),typeof S=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.maximum=S,g.exclusiveMaximum=!0):g.exclusiveMaximum=S),typeof _=="number"&&(g.maximum=_,typeof S=="number"&&this.target!=="draft-4"&&(S<=_?delete g.maximum:delete g.exclusiveMaximum)),typeof b=="number"&&(g.multipleOf=b);break}case"boolean":{let g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(y.type="string",y.nullable=!0,y.enum=[null]):y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let g=y,{minimum:f,maximum:_}=e._zod.bag;typeof f=="number"&&(g.minItems=f),typeof _=="number"&&(g.maxItems=_),g.type="array",g.items=this.process(o.element,{...m,path:[...m.path,"items"]});break}case"object":{let g=y;g.type="object",g.properties={};let f=o.shape;for(let b in f)g.properties[b]=this.process(f[b],{...m,path:[...m.path,"properties",b]});let _=new Set(Object.keys(f)),w=new Set([..._].filter(b=>{let S=o.shape[b]._zod;return this.io==="input"?S.optin===void 0:S.optout===void 0}));w.size>0&&(g.required=Array.from(w)),o.catchall?._zod.def.type==="never"?g.additionalProperties=!1:o.catchall?o.catchall&&(g.additionalProperties=this.process(o.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{let g=y,f=o.discriminator!==void 0,_=o.options.map((w,b)=>this.process(w,{...m,path:[...m.path,f?"oneOf":"anyOf",b]}));f?g.oneOf=_:g.anyOf=_;break}case"intersection":{let g=y,f=this.process(o.left,{...m,path:[...m.path,"allOf",0]}),_=this.process(o.right,{...m,path:[...m.path,"allOf",1]}),w=s(S=>"allOf"in S&&Object.keys(S).length===1,"isSimpleIntersection"),b=[...w(f)?f.allOf:[f],...w(_)?_.allOf:[_]];g.allOf=b;break}case"tuple":{let g=y;g.type="array";let f=this.target==="draft-2020-12"?"prefixItems":"items",_=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",w=o.items.map((R,O)=>this.process(R,{...m,path:[...m.path,f,O]})),b=o.rest?this.process(o.rest,{...m,path:[...m.path,_,...this.target==="openapi-3.0"?[o.items.length]:[]]}):null;this.target==="draft-2020-12"?(g.prefixItems=w,b&&(g.items=b)):this.target==="openapi-3.0"?(g.items={anyOf:w},b&&g.items.anyOf.push(b),g.minItems=w.length,b||(g.maxItems=w.length)):(g.items=w,b&&(g.additionalItems=b));let{minimum:S,maximum:k}=e._zod.bag;typeof S=="number"&&(g.minItems=S),typeof k=="number"&&(g.maxItems=k);break}case"record":{let g=y;g.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(g.propertyNames=this.process(o.keyType,{...m,path:[...m.path,"propertyNames"]})),g.additionalProperties=this.process(o.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let g=y,f=ul(o.entries);f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),g.enum=f;break}case"literal":{let g=y,f=[];for(let _ of o.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");f.push(Number(_))}else f.push(_);if(f.length!==0)if(f.length===1){let _=f[0];g.type=_===null?"null":typeof _,this.target==="draft-4"||this.target==="openapi-3.0"?g.enum=[_]:g.const=_}else f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),f.every(_=>typeof _=="boolean")&&(g.type="string"),f.every(_=>_===null)&&(g.type="null"),g.enum=f;break}case"file":{let g=y,f={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:w,mime:b}=e._zod.bag;_!==void 0&&(f.minLength=_),w!==void 0&&(f.maxLength=w),b?b.length===1?(f.contentMediaType=b[0],Object.assign(g,f)):g.anyOf=b.map(S=>({...f,contentMediaType:S})):Object.assign(g,f);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let g=this.process(o.innerType,m);this.target==="openapi-3.0"?(c.ref=o.innerType,y.nullable=!0):y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"success":{let g=y;g.type="boolean";break}case"default":{this.process(o.innerType,m),c.ref=o.innerType,y.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,m),c.ref=o.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,m),c.ref=o.innerType;let g;try{g=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let g=y,f=e._zod.pattern;if(!f)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=f.source;break}case"pipe":{let g=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(g,m),c.ref=g;break}case"readonly":{this.process(o.innerType,m),c.ref=o.innerType,y.readOnly=!0;break}case"promise":{this.process(o.innerType,m),c.ref=o.innerType;break}case"optional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"lazy":{let g=e._zod.innerType;this.process(g,m),c.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(e);return d&&Object.assign(c.schema,d),this.io==="input"&&Zr(e)&&(delete c.schema.examples,delete c.schema.default),this.io==="input"&&c.schema._prefault&&((n=c.schema).default??(n.default=c.schema._prefault)),delete c.schema._prefault,this.seen.get(e).schema}emit(e,r){let n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},o=this.seen.get(e);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s(p=>{let m=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let f=n.external.registry.get(p[0])?.id,_=n.external.uri??(b=>b);if(f)return{ref:_(f)};let w=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=w,{defId:w,ref:`${_("__shared")}#/${m}/${w}`}}if(p[1]===o)return{ref:"#"};let y=`#/${m}/`,g=p[1].schema.id??`__schema${this.counter++}`;return{defId:g,ref:y+g}},"makeURI"),a=s(p=>{if(p[1].schema.$ref)return;let m=p[1],{ref:h,defId:y}=i(p);m.def={...m.schema},y&&(m.defId=y);let g=m.schema;for(let f in g)delete g[f];g.$ref=h},"extractToDef");if(n.cycles==="throw")for(let p of this.seen.entries()){let m=p[1];if(m.cycle)throw new Error(`Cycle detected: #/${m.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let m=p[1];if(e===p[0]){a(p);continue}if(n.external){let y=n.external.registry.get(p[0])?.id;if(e!==p[0]&&y){a(p);continue}}if(this.metadataRegistry.get(p[0])?.id){a(p);continue}if(m.cycle){a(p);continue}if(m.count>1&&n.reused==="ref"){a(p);continue}}let c=s((p,m)=>{let h=this.seen.get(p),y=h.def??h.schema,g={...y};if(h.ref===null)return;let f=h.ref;if(h.ref=null,f){c(f,m);let _=this.seen.get(f).schema;_.$ref&&(m.target==="draft-7"||m.target==="draft-4"||m.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(_)):(Object.assign(y,_),Object.assign(y,g))}h.isParent||this.override({zodSchema:p,jsonSchema:y,path:h.path??[]})},"flattenRef");for(let p of[...this.seen.entries()].reverse())c(p[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let p=n.external.registry.get(e)?.id;if(!p)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(p)}Object.assign(l,o.def);let d=n.external?.defs??{};for(let p of this.seen.entries()){let m=p[1];m.def&&m.defId&&(d[m.defId]=m.def)}n.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?l.$defs=d:l.definitions=d);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}};function oi(t,e){if(t instanceof ec){let n=new Bl(e),o={};for(let c of t._idmap.entries()){let[l,d]=c;n.process(d)}let i={},a={registry:t,uri:e?.uri,defs:o};for(let c of t._idmap.entries()){let[l,d]=c;i[l]=n.emit(d,{...e,external:a})}if(Object.keys(o).length>0){let c=n.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[c]:o}}return{schemas:i}}let r=new Bl(e);return r.process(t),r.emit(t,e)}s(oi,"toJSONSchema");function Zr(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let n=t._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return Zr(n.element,r);if(n.type==="set")return Zr(n.valueType,r);if(n.type==="lazy")return Zr(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return Zr(n.innerType,r);if(n.type==="intersection")return Zr(n.left,r)||Zr(n.right,r);if(n.type==="record"||n.type==="map")return Zr(n.keyType,r)||Zr(n.valueType,r);if(n.type==="pipe")return Zr(n.in,r)||Zr(n.out,r);if(n.type==="object"){for(let o in n.shape)if(Zr(n.shape[o],r))return!0;return!1}if(n.type==="union"){for(let o of n.options)if(Zr(o,r))return!0;return!1}if(n.type==="tuple"){for(let o of n.items)if(Zr(o,r))return!0;return!!(n.rest&&Zr(n.rest,r))}return!1}s(Zr,"isTransforming");var fD={};var th={};hn(th,{ZodISODate:()=>Xf,ZodISODateTime:()=>Qf,ZodISODuration:()=>eh,ZodISOTime:()=>Yf,date:()=>fE,datetime:()=>mE,duration:()=>gE,time:()=>hE});var Qf=B("ZodISODateTime",(t,e)=>{Nx.init(t,e),Mt.init(t,e)});function mE(t){return IT(Qf,t)}s(mE,"datetime");var Xf=B("ZodISODate",(t,e)=>{Dx.init(t,e),Mt.init(t,e)});function fE(t){return PT(Xf,t)}s(fE,"date");var Yf=B("ZodISOTime",(t,e)=>{jx.init(t,e),Mt.init(t,e)});function hE(t){return AT(Yf,t)}s(hE,"time");var eh=B("ZodISODuration",(t,e)=>{Mx.init(t,e),Mt.init(t,e)});function gE(t){return CT(eh,t)}s(gE,"duration");var gD=s((t,e)=>{fl.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s(r=>gl(t,r),"value")},flatten:{value:s(r=>hl(t,r),"value")},addIssue:{value:s(r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Za,2)},"value")},addIssues:{value:s(r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Za,2)},"value")},isEmpty:{get(){return t.issues.length===0}}})},"initializer"),iG=B("ZodError",gD),pn=B("ZodError",gD,{Parent:Error});var yE=Ga(pn),vE=Wa(pn),_E=Qa(pn),si=Xa(pn),bE=lf(pn),wE=df(pn),SE=pf(pn),xE=mf(pn),TE=ff(pn),EE=hf(pn),kE=gf(pn),IE=yf(pn);var rt=B("ZodType",(t,e)=>(He.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(le.mergeDefs(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>Vr(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>yE(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>_E(t,r,n),t.parseAsync=async(r,n)=>vE(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>si(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>bE(t,r,n),t.decode=(r,n)=>wE(t,r,n),t.encodeAsync=async(r,n)=>SE(t,r,n),t.decodeAsync=async(r,n)=>xE(t,r,n),t.safeEncode=(r,n)=>TE(t,r,n),t.safeDecode=(r,n)=>EE(t,r,n),t.safeEncodeAsync=async(r,n)=>kE(t,r,n),t.safeDecodeAsync=async(r,n)=>IE(t,r,n),t.refine=(r,n)=>t.check(nj(r,n)),t.superRefine=r=>t.check(oj(r)),t.overwrite=r=>t.check(To(r)),t.optional=()=>nh(t),t.nullable=()=>oh(t),t.nullish=()=>nh(oh(t)),t.nonoptional=r=>HD(t,r),t.array=()=>ch(t),t.or=r=>WE([t,r]),t.and=r=>OD(t,r),t.transform=r=>ih(t,YE(r)),t.default=r=>FD(t,r),t.prefault=r=>VD(t,r),t.catch=r=>KD(t,r),t.pipe=r=>ih(t,r),t.readonly=()=>QD(t),t.describe=r=>{let n=t.clone();return Hr.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return Hr.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Hr.get(t);let n=t.clone();return Hr.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),CE=B("_ZodString",(t,e)=>{Ms.init(t,e),rt.init(t,e);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Ol(...n)),t.includes=(...n)=>t.check(Nl(...n)),t.startsWith=(...n)=>t.check(Dl(...n)),t.endsWith=(...n)=>t.check(jl(...n)),t.min=(...n)=>t.check(Qi(...n)),t.max=(...n)=>t.check(rc(...n)),t.length=(...n)=>t.check(nc(...n)),t.nonempty=(...n)=>t.check(Qi(1,...n)),t.lowercase=n=>t.check($l(n)),t.uppercase=n=>t.check(Rl(n)),t.trim=()=>t.check(Ul()),t.normalize=(...n)=>t.check(zl(...n)),t.toLowerCase=()=>t.check(Ll()),t.toUpperCase=()=>t.check(ql()),t.slugify=()=>t.check(Fl())}),Hl=B("ZodString",(t,e)=>{Ms.init(t,e),CE.init(t,e),t.email=r=>t.check(Of(OE,r)),t.url=r=>t.check(Al(sh,r)),t.jwt=r=>t.check(Wf(ZE,r)),t.emoji=r=>t.check(jf($E,r)),t.guid=r=>t.check(Pl(rh,r)),t.uuid=r=>t.check($f(ai,r)),t.uuidv4=r=>t.check(Rf(ai,r)),t.uuidv6=r=>t.check(Nf(ai,r)),t.uuidv7=r=>t.check(Df(ai,r)),t.nanoid=r=>t.check(Mf(RE,r)),t.guid=r=>t.check(Pl(rh,r)),t.cuid=r=>t.check(zf(NE,r)),t.cuid2=r=>t.check(Uf(DE,r)),t.ulid=r=>t.check(Lf(jE,r)),t.base64=r=>t.check(Jf(BE,r)),t.base64url=r=>t.check(Kf(VE,r)),t.xid=r=>t.check(qf(ME,r)),t.ksuid=r=>t.check(Ff(zE,r)),t.ipv4=r=>t.check(Bf(UE,r)),t.ipv6=r=>t.check(Vf(LE,r)),t.cidrv4=r=>t.check(Hf(qE,r)),t.cidrv6=r=>t.check(Zf(FE,r)),t.e164=r=>t.check(Gf(HE,r)),t.datetime=r=>t.check(mE(r)),t.date=r=>t.check(fE(r)),t.time=r=>t.check(hE(r)),t.duration=r=>t.check(gE(r))});function PE(t){return xT(Hl,t)}s(PE,"string");var Mt=B("ZodStringFormat",(t,e)=>{$t.init(t,e),CE.init(t,e)}),OE=B("ZodEmail",(t,e)=>{Ex.init(t,e),Mt.init(t,e)});function aG(t){return Of(OE,t)}s(aG,"email");var rh=B("ZodGUID",(t,e)=>{xx.init(t,e),Mt.init(t,e)});function cG(t){return Pl(rh,t)}s(cG,"guid");var ai=B("ZodUUID",(t,e)=>{Tx.init(t,e),Mt.init(t,e)});function uG(t){return $f(ai,t)}s(uG,"uuid");function lG(t){return Rf(ai,t)}s(lG,"uuidv4");function dG(t){return Nf(ai,t)}s(dG,"uuidv6");function pG(t){return Df(ai,t)}s(pG,"uuidv7");var sh=B("ZodURL",(t,e)=>{kx.init(t,e),Mt.init(t,e)});function mG(t){return Al(sh,t)}s(mG,"url");function fG(t){return Al(sh,{protocol:/^https?$/,hostname:$n.domain,...le.normalizeParams(t)})}s(fG,"httpUrl");var $E=B("ZodEmoji",(t,e)=>{Ix.init(t,e),Mt.init(t,e)});function hG(t){return jf($E,t)}s(hG,"emoji");var RE=B("ZodNanoID",(t,e)=>{Px.init(t,e),Mt.init(t,e)});function gG(t){return Mf(RE,t)}s(gG,"nanoid");var NE=B("ZodCUID",(t,e)=>{Ax.init(t,e),Mt.init(t,e)});function yG(t){return zf(NE,t)}s(yG,"cuid");var DE=B("ZodCUID2",(t,e)=>{Cx.init(t,e),Mt.init(t,e)});function vG(t){return Uf(DE,t)}s(vG,"cuid2");var jE=B("ZodULID",(t,e)=>{Ox.init(t,e),Mt.init(t,e)});function _G(t){return Lf(jE,t)}s(_G,"ulid");var ME=B("ZodXID",(t,e)=>{$x.init(t,e),Mt.init(t,e)});function bG(t){return qf(ME,t)}s(bG,"xid");var zE=B("ZodKSUID",(t,e)=>{Rx.init(t,e),Mt.init(t,e)});function wG(t){return Ff(zE,t)}s(wG,"ksuid");var UE=B("ZodIPv4",(t,e)=>{zx.init(t,e),Mt.init(t,e)});function SG(t){return Bf(UE,t)}s(SG,"ipv4");var yD=B("ZodMAC",(t,e)=>{Lx.init(t,e),Mt.init(t,e)});function xG(t){return ET(yD,t)}s(xG,"mac");var LE=B("ZodIPv6",(t,e)=>{Ux.init(t,e),Mt.init(t,e)});function TG(t){return Vf(LE,t)}s(TG,"ipv6");var qE=B("ZodCIDRv4",(t,e)=>{qx.init(t,e),Mt.init(t,e)});function EG(t){return Hf(qE,t)}s(EG,"cidrv4");var FE=B("ZodCIDRv6",(t,e)=>{Fx.init(t,e),Mt.init(t,e)});function kG(t){return Zf(FE,t)}s(kG,"cidrv6");var BE=B("ZodBase64",(t,e)=>{Vx.init(t,e),Mt.init(t,e)});function IG(t){return Jf(BE,t)}s(IG,"base64");var VE=B("ZodBase64URL",(t,e)=>{Hx.init(t,e),Mt.init(t,e)});function PG(t){return Kf(VE,t)}s(PG,"base64url");var HE=B("ZodE164",(t,e)=>{Zx.init(t,e),Mt.init(t,e)});function AG(t){return Gf(HE,t)}s(AG,"e164");var ZE=B("ZodJWT",(t,e)=>{Jx.init(t,e),Mt.init(t,e)});function CG(t){return Wf(ZE,t)}s(CG,"jwt");var Zl=B("ZodCustomStringFormat",(t,e)=>{Kx.init(t,e),Mt.init(t,e)});function OG(t,e,r={}){return oc(Zl,t,e,r)}s(OG,"stringFormat");function $G(t){return oc(Zl,"hostname",$n.hostname,t)}s($G,"hostname");function RG(t){return oc(Zl,"hex",$n.hex,t)}s(RG,"hex");function NG(t,e){let r=e?.enc??"hex",n=`${t}_${r}`,o=$n[n];if(!o)throw new Error(`Unrecognized hash format: ${n}`);return oc(Zl,n,o,e)}s(NG,"hash");var Jl=B("ZodNumber",(t,e)=>{kf.init(t,e),rt.init(t,e),t.gt=(n,o)=>t.check(ni(n,o)),t.gte=(n,o)=>t.check(dn(n,o)),t.min=(n,o)=>t.check(dn(n,o)),t.lt=(n,o)=>t.check(ri(n,o)),t.lte=(n,o)=>t.check(Rn(n,o)),t.max=(n,o)=>t.check(Rn(n,o)),t.int=n=>t.check(AE(n)),t.safe=n=>t.check(AE(n)),t.positive=n=>t.check(ni(0,n)),t.nonnegative=n=>t.check(dn(0,n)),t.negative=n=>t.check(ri(0,n)),t.nonpositive=n=>t.check(Rn(0,n)),t.multipleOf=(n,o)=>t.check(zs(n,o)),t.step=(n,o)=>t.check(zs(n,o)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function vD(t){return OT(Jl,t)}s(vD,"number");var sc=B("ZodNumberFormat",(t,e)=>{Gx.init(t,e),Jl.init(t,e)});function AE(t){return RT(sc,t)}s(AE,"int");function DG(t){return NT(sc,t)}s(DG,"float32");function jG(t){return DT(sc,t)}s(jG,"float64");function MG(t){return jT(sc,t)}s(MG,"int32");function zG(t){return MT(sc,t)}s(zG,"uint32");var Kl=B("ZodBoolean",(t,e)=>{bl.init(t,e),rt.init(t,e)});function _D(t){return zT(Kl,t)}s(_D,"boolean");var Gl=B("ZodBigInt",(t,e)=>{If.init(t,e),rt.init(t,e),t.gte=(n,o)=>t.check(dn(n,o)),t.min=(n,o)=>t.check(dn(n,o)),t.gt=(n,o)=>t.check(ni(n,o)),t.gte=(n,o)=>t.check(dn(n,o)),t.min=(n,o)=>t.check(dn(n,o)),t.lt=(n,o)=>t.check(ri(n,o)),t.lte=(n,o)=>t.check(Rn(n,o)),t.max=(n,o)=>t.check(Rn(n,o)),t.positive=n=>t.check(ni(BigInt(0),n)),t.negative=n=>t.check(ri(BigInt(0),n)),t.nonpositive=n=>t.check(Rn(BigInt(0),n)),t.nonnegative=n=>t.check(dn(BigInt(0),n)),t.multipleOf=(n,o)=>t.check(zs(n,o));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});function UG(t){return LT(Gl,t)}s(UG,"bigint");var JE=B("ZodBigIntFormat",(t,e)=>{Wx.init(t,e),Gl.init(t,e)});function LG(t){return FT(JE,t)}s(LG,"int64");function qG(t){return BT(JE,t)}s(qG,"uint64");var bD=B("ZodSymbol",(t,e)=>{Qx.init(t,e),rt.init(t,e)});function FG(t){return VT(bD,t)}s(FG,"symbol");var wD=B("ZodUndefined",(t,e)=>{Xx.init(t,e),rt.init(t,e)});function BG(t){return HT(wD,t)}s(BG,"_undefined");var SD=B("ZodNull",(t,e)=>{Yx.init(t,e),rt.init(t,e)});function xD(t){return ZT(SD,t)}s(xD,"_null");var TD=B("ZodAny",(t,e)=>{e0.init(t,e),rt.init(t,e)});function VG(){return JT(TD)}s(VG,"any");var ED=B("ZodUnknown",(t,e)=>{t0.init(t,e),rt.init(t,e)});function ic(){return KT(ED)}s(ic,"unknown");var kD=B("ZodNever",(t,e)=>{r0.init(t,e),rt.init(t,e)});function KE(t){return GT(kD,t)}s(KE,"never");var ID=B("ZodVoid",(t,e)=>{n0.init(t,e),rt.init(t,e)});function HG(t){return WT(ID,t)}s(HG,"_void");var ah=B("ZodDate",(t,e)=>{o0.init(t,e),rt.init(t,e),t.min=(n,o)=>t.check(dn(n,o)),t.max=(n,o)=>t.check(Rn(n,o));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function ZG(t){return QT(ah,t)}s(ZG,"date");var PD=B("ZodArray",(t,e)=>{i0.init(t,e),rt.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(Qi(r,n)),t.nonempty=r=>t.check(Qi(1,r)),t.max=(r,n)=>t.check(rc(r,n)),t.length=(r,n)=>t.check(nc(r,n)),t.unwrap=()=>t.element});function ch(t,e){return iE(PD,t,e)}s(ch,"array");function JG(t){let e=t._zod.def.shape;return XE(Object.keys(e))}s(JG,"keyof");var uh=B("ZodObject",(t,e)=>{s0.init(t,e),rt.init(t,e),le.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>XE(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:ic()}),t.loose=()=>t.clone({...t._zod.def,catchall:ic()}),t.strict=()=>t.clone({...t._zod.def,catchall:KE()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>le.extend(t,r),t.safeExtend=r=>le.safeExtend(t,r),t.merge=r=>le.merge(t,r),t.pick=r=>le.pick(t,r),t.omit=r=>le.omit(t,r),t.partial=(...r)=>le.partial(ek,t,r[0]),t.required=(...r)=>le.required(tk,t,r[0])});function KG(t,e){let r={type:"object",shape:t??{},...le.normalizeParams(e)};return new uh(r)}s(KG,"object");function GG(t,e){return new uh({type:"object",shape:t,catchall:KE(),...le.normalizeParams(e)})}s(GG,"strictObject");function WG(t,e){return new uh({type:"object",shape:t,catchall:ic(),...le.normalizeParams(e)})}s(WG,"looseObject");var GE=B("ZodUnion",(t,e)=>{Pf.init(t,e),rt.init(t,e),t.options=e.options});function WE(t,e){return new GE({type:"union",options:t,...le.normalizeParams(e)})}s(WE,"union");var AD=B("ZodDiscriminatedUnion",(t,e)=>{GE.init(t,e),a0.init(t,e)});function QG(t,e,r){return new AD({type:"union",options:e,discriminator:t,...le.normalizeParams(r)})}s(QG,"discriminatedUnion");var CD=B("ZodIntersection",(t,e)=>{c0.init(t,e),rt.init(t,e)});function OD(t,e){return new CD({type:"intersection",left:t,right:e})}s(OD,"intersection");var $D=B("ZodTuple",(t,e)=>{Af.init(t,e),rt.init(t,e),t.rest=r=>t.clone({...t._zod.def,rest:r})});function RD(t,e,r){let n=e instanceof He,o=n?r:e,i=n?e:null;return new $D({type:"tuple",items:t,rest:i,...le.normalizeParams(o)})}s(RD,"tuple");var QE=B("ZodRecord",(t,e)=>{u0.init(t,e),rt.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function ND(t,e,r){return new QE({type:"record",keyType:t,valueType:e,...le.normalizeParams(r)})}s(ND,"record");function XG(t,e,r){let n=Vr(t);return n._zod.values=void 0,new QE({type:"record",keyType:n,valueType:e,...le.normalizeParams(r)})}s(XG,"partialRecord");var DD=B("ZodMap",(t,e)=>{l0.init(t,e),rt.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function YG(t,e,r){return new DD({type:"map",keyType:t,valueType:e,...le.normalizeParams(r)})}s(YG,"map");var jD=B("ZodSet",(t,e)=>{d0.init(t,e),rt.init(t,e),t.min=(...r)=>t.check(Us(...r)),t.nonempty=r=>t.check(Us(1,r)),t.max=(...r)=>t.check(tc(...r)),t.size=(...r)=>t.check(Cl(...r))});function eW(t,e){return new jD({type:"set",valueType:t,...le.normalizeParams(e)})}s(eW,"set");var Vl=B("ZodEnum",(t,e)=>{p0.init(t,e),rt.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,o)=>{let i={};for(let a of n)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Vl({...e,checks:[],...le.normalizeParams(o),entries:i})},t.exclude=(n,o)=>{let i={...e.entries};for(let a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new Vl({...e,checks:[],...le.normalizeParams(o),entries:i})}});function XE(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new Vl({type:"enum",entries:r,...le.normalizeParams(e)})}s(XE,"_enum");function tW(t,e){return new Vl({type:"enum",entries:t,...le.normalizeParams(e)})}s(tW,"nativeEnum");var MD=B("ZodLiteral",(t,e)=>{m0.init(t,e),rt.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function rW(t,e){return new MD({type:"literal",values:Array.isArray(t)?t:[t],...le.normalizeParams(e)})}s(rW,"literal");var zD=B("ZodFile",(t,e)=>{f0.init(t,e),rt.init(t,e),t.min=(r,n)=>t.check(Us(r,n)),t.max=(r,n)=>t.check(tc(r,n)),t.mime=(r,n)=>t.check(Ml(Array.isArray(r)?r:[r],n))});function nW(t){return sE(zD,t)}s(nW,"file");var UD=B("ZodTransform",(t,e)=>{h0.init(t,e),rt.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Hi(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(le.issue(i,r.value,e));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(le.issue(a))}};let o=e.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});function YE(t){return new UD({type:"transform",transform:t})}s(YE,"transform");var ek=B("ZodOptional",(t,e)=>{g0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function nh(t){return new ek({type:"optional",innerType:t})}s(nh,"optional");var LD=B("ZodNullable",(t,e)=>{y0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function oh(t){return new LD({type:"nullable",innerType:t})}s(oh,"nullable");function oW(t){return nh(oh(t))}s(oW,"nullish");var qD=B("ZodDefault",(t,e)=>{v0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function FD(t,e){return new qD({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():le.shallowClone(e)}})}s(FD,"_default");var BD=B("ZodPrefault",(t,e)=>{_0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function VD(t,e){return new BD({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():le.shallowClone(e)}})}s(VD,"prefault");var tk=B("ZodNonOptional",(t,e)=>{b0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function HD(t,e){return new tk({type:"nonoptional",innerType:t,...le.normalizeParams(e)})}s(HD,"nonoptional");var ZD=B("ZodSuccess",(t,e)=>{w0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function iW(t){return new ZD({type:"success",innerType:t})}s(iW,"success");var JD=B("ZodCatch",(t,e)=>{S0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function KD(t,e){return new JD({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}s(KD,"_catch");var GD=B("ZodNaN",(t,e)=>{x0.init(t,e),rt.init(t,e)});function sW(t){return YT(GD,t)}s(sW,"nan");var rk=B("ZodPipe",(t,e)=>{T0.init(t,e),rt.init(t,e),t.in=e.in,t.out=e.out});function ih(t,e){return new rk({type:"pipe",in:t,out:e})}s(ih,"pipe");var nk=B("ZodCodec",(t,e)=>{rk.init(t,e),wl.init(t,e)});function aW(t,e,r){return new nk({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}s(aW,"codec");var WD=B("ZodReadonly",(t,e)=>{E0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function QD(t){return new WD({type:"readonly",innerType:t})}s(QD,"readonly");var XD=B("ZodTemplateLiteral",(t,e)=>{k0.init(t,e),rt.init(t,e)});function cW(t,e){return new XD({type:"template_literal",parts:t,...le.normalizeParams(e)})}s(cW,"templateLiteral");var YD=B("ZodLazy",(t,e)=>{A0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.getter()});function ej(t){return new YD({type:"lazy",getter:t})}s(ej,"lazy");var tj=B("ZodPromise",(t,e)=>{P0.init(t,e),rt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function uW(t){return new tj({type:"promise",innerType:t})}s(uW,"promise");var rj=B("ZodFunction",(t,e)=>{I0.init(t,e),rt.init(t,e)});function lW(t){return new rj({type:"function",input:Array.isArray(t?.input)?RD(t?.input):t?.input??ch(ic()),output:t?.output??ic()})}s(lW,"_function");var lh=B("ZodCustom",(t,e)=>{C0.init(t,e),rt.init(t,e)});function dW(t){let e=new jt({check:"custom"});return e._zod.check=t,e}s(dW,"check");function pW(t,e){return aE(lh,t??(()=>!0),e)}s(pW,"custom");function nj(t,e={}){return cE(lh,t,e)}s(nj,"refine");function oj(t){return uE(t)}s(oj,"superRefine");var mW=lE,fW=dE;function hW(t,e={error:`Input not instance of ${t.name}`}){let r=new lh({type:"custom",check:"custom",fn:s(n=>n instanceof t,"fn"),abort:!0,...le.normalizeParams(e)});return r._zod.bag.Class=t,r}s(hW,"_instanceof");var gW=s((...t)=>pE({Codec:nk,Boolean:Kl,String:Hl},...t),"stringbool");function yW(t){let e=ej(()=>WE([PE(t),vD(),_D(),xD(),ch(e),ND(PE(),e)]));return e}s(yW,"json");function vW(t,e){return ih(YE(t),e)}s(vW,"preprocess");var _W={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function bW(t){dr({customError:t})}s(bW,"setErrorMap");function wW(){return dr().customError}s(wW,"getErrorMap");var ok;ok||(ok={});var ik={};hn(ik,{bigint:()=>EW,boolean:()=>TW,date:()=>kW,number:()=>xW,string:()=>SW});function SW(t){return TT(Hl,t)}s(SW,"string");function xW(t){return $T(Jl,t)}s(xW,"number");function TW(t){return UT(Kl,t)}s(TW,"boolean");function EW(t){return qT(Gl,t)}s(EW,"bigint");function kW(t){return XT(ah,t)}s(kW,"date");dr(Sl());var IW=u.object({arguments:u.record(u.string(),u.unknown()).optional().default({})}),sk=new Pe;sk.post("/:toolName",pe,Ve("json",IW),async t=>{let e=t.req.param("toolName"),{arguments:r}=t.req.valid("json");return t.json({error:"Not implemented",message:`Tool ${e} will be implemented in subsequent tasks`,toolName:e,receivedArgs:r},501)});var ak=new Pe;ak.route("/context",lS);ak.route("/tools",sk);var ck=ak;var sj="vercel.ai.error",PW=Symbol.for(sj),aj,AW=class cj extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[aj]=!0,this.name=e,this.cause=n}static isInstance(e){return cj.hasMarker(e,sj)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};aj=PW;var ij=AW,CW="AI_APICallError",OW=`vercel.ai.error.${CW}`,$W=Symbol.for(OW),RW;RW=$W;var NW="AI_EmptyResponseBodyError",DW=`vercel.ai.error.${NW}`,jW=Symbol.for(DW),MW;MW=jW;var uj="AI_InvalidArgumentError",lj=`vercel.ai.error.${uj}`,zW=Symbol.for(lj),dj,pj=class extends ij{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:uj,message:t,cause:e}),this[dj]=!0,this.argument=r}static isInstance(t){return ij.hasMarker(t,lj)}};dj=zW;var UW="AI_InvalidPromptError",LW=`vercel.ai.error.${UW}`,qW=Symbol.for(LW),FW;FW=qW;var BW="AI_InvalidResponseDataError",VW=`vercel.ai.error.${BW}`,HW=Symbol.for(VW),ZW;ZW=HW;var JW="AI_JSONParseError",KW=`vercel.ai.error.${JW}`,GW=Symbol.for(KW),WW;WW=GW;var QW="AI_LoadAPIKeyError",XW=`vercel.ai.error.${QW}`,YW=Symbol.for(XW),eQ;eQ=YW;var tQ="AI_LoadSettingError",rQ=`vercel.ai.error.${tQ}`,nQ=Symbol.for(rQ),oQ;oQ=nQ;var iQ="AI_NoContentGeneratedError",sQ=`vercel.ai.error.${iQ}`,aQ=Symbol.for(sQ),cQ;cQ=aQ;var uQ="AI_NoSuchModelError",lQ=`vercel.ai.error.${uQ}`,dQ=Symbol.for(lQ),pQ;pQ=dQ;var mQ="AI_TooManyEmbeddingValuesForCallError",fQ=`vercel.ai.error.${mQ}`,hQ=Symbol.for(fQ),gQ;gQ=hQ;var yQ="AI_TypeValidationError",vQ=`vercel.ai.error.${yQ}`,_Q=Symbol.for(vQ),bQ;bQ=_Q;var wQ="AI_UnsupportedFunctionalityError",SQ=`vercel.ai.error.${wQ}`,xQ=Symbol.for(SQ),TQ;TQ=xQ;var mj=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var PQ=nu(dh(),1);var IQ=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=mj(r,e);if(t==null)return o;if(r.includes(n))throw new pj({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),lk=IQ();var vj=Symbol.for("vercel.ai.validator");var{btoa:hNe,atob:gNe}=globalThis;var c7=nu(dh(),1);var bj=Symbol("Let zodToJsonSchema decide on which parser to use");var _j={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},wj=s(t=>typeof t=="string"?{..._j,name:t}:{..._j,...t},"getDefaultOptions");var Sj=s(t=>{let e=wj(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs");function dk(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}s(dk,"addErrorMessage");function gt(t,e,r,n,o){t[e]=r,dk(t,e,n,o)}s(gt,"setResponseValueAndErrors");var ph=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath");var ft;(function(t){t.assertEqual=o=>{};function e(o){}s(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(c=>typeof o[o[c]]!="number"),a={};for(let c of i)a[c]=o[c];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(ft||(ft={}));var xj;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(xj||(xj={}));var we=ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ci=s(t=>{switch(typeof t){case"undefined":return we.undefined;case"string":return we.string;case"number":return Number.isNaN(t)?we.nan:we.number;case"boolean":return we.boolean;case"function":return we.function;case"bigint":return we.bigint;case"symbol":return we.symbol;case"object":return Array.isArray(t)?we.array:t===null?we.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?we.promise:typeof Map<"u"&&t instanceof Map?we.map:typeof Set<"u"&&t instanceof Set?we.set:typeof Date<"u"&&t instanceof Date?we.date:we.object;default:return we.unknown}},"getParsedType");var se=ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var bn=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=s(i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let d=a.path[l];l===a.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(a))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r=Object.create(null),n=[];for(let o of this.issues)if(o.path.length>0){let i=o.path[0];r[i]=r[i]||[],r[i].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};bn.create=t=>new bn(t);var AQ=s((t,e)=>{let r;switch(t.code){case se.invalid_type:t.received===we.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ft.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:r=`Unrecognized key(s) in object: ${ft.joinValues(t.keys,", ")}`;break;case se.invalid_union:r="Invalid input";break;case se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ft.joinValues(t.options)}`;break;case se.invalid_enum_value:r=`Invalid enum value. Expected ${ft.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:r="Invalid function arguments";break;case se.invalid_return_type:r="Invalid function return type";break;case se.invalid_date:r="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ft.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case se.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case se.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case se.custom:r="Invalid input";break;case se.invalid_intersection_types:r="Intersection results could not be merged";break;case se.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:r="Number must be finite";break;default:r=e.defaultError,ft.assertNever(t)}return{message:r}},"errorMap"),Xi=AQ;var CQ=Xi;function Wl(){return CQ}s(Wl,"getErrorMap");var mh=s(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let c="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)c=d(a,{data:e,defaultError:c}).message;return{...o,path:i,message:c}},"makeIssue");function ye(t,e){let r=Wl(),n=mh({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Xi?void 0:Xi].filter(o=>!!o)});t.common.issues.push(n)}s(ye,"addIssueToContext");var zr=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return je;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return je;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},je=Object.freeze({status:"aborted"}),cc=s(t=>({status:"dirty",value:t}),"DIRTY"),Jr=s(t=>({status:"valid",value:t}),"OK"),pk=s(t=>t.status==="aborted","isAborted"),mk=s(t=>t.status==="dirty","isDirty"),Ls=s(t=>t.status==="valid","isValid"),Ql=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ie||(Ie={}));var Nn=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Tj=s((t,e)=>{if(Ls(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new bn(t.common.issues);return this._error=r,this._error}}},"handleResult");function We(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:s((a,c)=>{let{message:l}=t;return a.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??n??c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:l??r??c.defaultError}},"customMap"),description:o}}s(We,"processCreateParams");var nt=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return ci(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ci(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zr,ctx:{common:e.parent.common,data:e.data,parsedType:ci(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ql(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ci(e)},o=this._parseSync({data:e,path:n.path,parent:n});return Tj(n,o)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ci(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return Ls(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Ls(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ci(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(Ql(o)?o:Promise.resolve(o));return Tj(n,i)}refine(e,r){let n=s(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,i)=>{let a=e(o),c=s(()=>i.addIssue({code:se.custom,...n(o)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new Yn({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Xn.create(this,this._def)}nullable(){return di.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return es.create(this)}promise(){return qs.create(this,this._def)}or(e){return mc.create([this,e],this._def)}and(e){return fc.create(this,e,this._def)}transform(e){return new Yn({...We(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new _c({...We(this._def),innerType:this,defaultValue:r,typeName:z.ZodDefault})}brand(){return new fh({typeName:z.ZodBranded,type:this,...We(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new bc({...We(this._def),innerType:this,catchValue:r,typeName:z.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return hh.create(this,e)}readonly(){return wc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},OQ=/^c[^\s-]{8,}$/i,$Q=/^[0-9a-z]+$/,RQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,DQ=/^[a-z0-9_-]{21}$/i,jQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",fk,LQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ej="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ZQ=new RegExp(`^${Ej}$`);function kj(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}s(kj,"timeRegexSource");function JQ(t){return new RegExp(`^${kj(t)}$`)}s(JQ,"timeRegex");function KQ(t){let e=`${Ej}T${kj(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(KQ,"datetimeRegex");function GQ(t,e){return!!((e==="v4"||!e)&&LQ.test(t)||(e==="v6"||!e)&&FQ.test(t))}s(GQ,"isValidIP");function WQ(t,e){if(!jQ.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}s(WQ,"isValidJWT");function QQ(t,e){return!!((e==="v4"||!e)&&qQ.test(t)||(e==="v6"||!e)&&BQ.test(t))}s(QQ,"isValidCidr");var lc=class t extends nt{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==we.string){let i=this._getOrReturnCtx(e);return ye(i,{code:se.invalid_type,expected:we.string,received:i.parsedType}),je}let n=new zr,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,c=e.data.length<i.value;(a||c)&&(o=this._getOrReturnCtx(e,o),a?ye(o,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&ye(o,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")zQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"email",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")fk||(fk=new RegExp(UQ,"u")),fk.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"emoji",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")NQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"uuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")DQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"nanoid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")OQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")$Q.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cuid2",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")RQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"ulid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ye(o,{validation:"url",code:se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"regex",code:se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?KQ(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?ZQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?JQ(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{code:se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?MQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"duration",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?GQ(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"ip",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?WQ(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"jwt",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?QQ(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"cidr",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?VQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"base64",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?HQ.test(e.data)||(o=this._getOrReturnCtx(e,o),ye(o,{validation:"base64url",code:se.invalid_string,message:i.message}),n.dirty()):ft.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:se.invalid_string,...Ie.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Ie.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ie.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ie.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ie.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ie.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ie.errToObj(r)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};lc.create=t=>new lc({checks:[],typeName:z.ZodString,coerce:t?.coerce??!1,...We(t)});function XQ(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return i%a/10**o}s(XQ,"floatSafeRemainder");var Xl=class t extends nt{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==we.number){let i=this._getOrReturnCtx(e);return ye(i,{code:se.invalid_type,expected:we.number,received:i.parsedType}),je}let n,o=new zr;for(let i of this._def.checks)i.kind==="int"?ft.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ye(n,{code:se.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?XQ(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ye(n,{code:se.not_finite,message:i.message}),o.dirty()):ft.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ie.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ie.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ie.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ie.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ie.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ft.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Xl.create=t=>new Xl({checks:[],typeName:z.ZodNumber,coerce:t?.coerce||!1,...We(t)});var Yl=class t extends nt{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==we.bigint)return this._getInvalidInput(e);let n,o=new zr;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ye(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):ft.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:we.bigint,received:r.parsedType}),je}gte(e,r){return this.setLimit("min",e,!0,Ie.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ie.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ie.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ie.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ie.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Yl.create=t=>new Yl({checks:[],typeName:z.ZodBigInt,coerce:t?.coerce??!1,...We(t)});var ed=class extends nt{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==we.boolean){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.boolean,received:n.parsedType}),je}return Jr(e.data)}};ed.create=t=>new ed({typeName:z.ZodBoolean,coerce:t?.coerce||!1,...We(t)});var td=class t extends nt{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==we.date){let i=this._getOrReturnCtx(e);return ye(i,{code:se.invalid_type,expected:we.date,received:i.parsedType}),je}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return ye(i,{code:se.invalid_date}),je}let n=new zr,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),ye(o,{code:se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ft.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};td.create=t=>new td({checks:[],coerce:t?.coerce||!1,typeName:z.ZodDate,...We(t)});var rd=class extends nt{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==we.symbol){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.symbol,received:n.parsedType}),je}return Jr(e.data)}};rd.create=t=>new rd({typeName:z.ZodSymbol,...We(t)});var dc=class extends nt{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==we.undefined){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.undefined,received:n.parsedType}),je}return Jr(e.data)}};dc.create=t=>new dc({typeName:z.ZodUndefined,...We(t)});var pc=class extends nt{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==we.null){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.null,received:n.parsedType}),je}return Jr(e.data)}};pc.create=t=>new pc({typeName:z.ZodNull,...We(t)});var nd=class extends nt{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Jr(e.data)}};nd.create=t=>new nd({typeName:z.ZodAny,...We(t)});var Yi=class extends nt{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Jr(e.data)}};Yi.create=t=>new Yi({typeName:z.ZodUnknown,...We(t)});var Eo=class extends nt{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:we.never,received:r.parsedType}),je}};Eo.create=t=>new Eo({typeName:z.ZodNever,...We(t)});var od=class extends nt{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==we.undefined){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.void,received:n.parsedType}),je}return Jr(e.data)}};od.create=t=>new od({typeName:z.ZodVoid,...We(t)});var es=class t extends nt{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==we.array)return ye(r,{code:se.invalid_type,expected:we.array,received:r.parsedType}),je;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,c=r.data.length<o.exactLength.value;(a||c)&&(ye(r,{code:a?se.too_big:se.too_small,minimum:c?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(ye(r,{code:se.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(ye(r,{code:se.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>o.type._parseAsync(new Nn(r,a,r.path,c)))).then(a=>zr.mergeArray(n,a));let i=[...r.data].map((a,c)=>o.type._parseSync(new Nn(r,a,r.path,c)));return zr.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Ie.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Ie.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Ie.toString(r)}})}nonempty(e){return this.min(1,e)}};es.create=(t,e)=>new es({type:t,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...We(e)});function uc(t){if(t instanceof wn){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Xn.create(uc(n))}return new wn({...t._def,shape:s(()=>e,"shape")})}else return t instanceof es?new es({...t._def,type:uc(t.element)}):t instanceof Xn?Xn.create(uc(t.unwrap())):t instanceof di?di.create(uc(t.unwrap())):t instanceof li?li.create(t.items.map(e=>uc(e))):t}s(uc,"deepPartialify");var wn=class t extends nt{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ft.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==we.object){let d=this._getOrReturnCtx(e);return ye(d,{code:se.invalid_type,expected:we.object,received:d.parsedType}),je}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof Eo&&this._def.unknownKeys==="strip"))for(let d in o.data)a.includes(d)||c.push(d);let l=[];for(let d of a){let p=i[d],m=o.data[d];l.push({key:{status:"valid",value:d},value:p._parse(new Nn(o,m,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof Eo){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of c)l.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")c.length>0&&(ye(o,{code:se.unrecognized_keys,keys:c}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of c){let m=o.data[p];l.push({key:{status:"valid",value:p},value:d._parse(new Nn(o,m,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of l){let m=await p.key,h=await p.value;d.push({key:m,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>zr.mergeObjectSync(n,d)):zr.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{let o=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??o}:{message:o}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:z.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of ft.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};for(let n of ft.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return uc(this)}partial(e){let r={};for(let n of ft.objectKeys(this.shape)){let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}return new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};for(let n of ft.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Xn;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Ij(ft.objectKeys(this.shape))}};wn.create=(t,e)=>new wn({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Eo.create(),typeName:z.ZodObject,...We(e)});wn.strictCreate=(t,e)=>new wn({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Eo.create(),typeName:z.ZodObject,...We(e)});wn.lazycreate=(t,e)=>new wn({shape:t,unknownKeys:"strip",catchall:Eo.create(),typeName:z.ZodObject,...We(e)});var mc=class extends nt{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let c of i)if(c.result.status==="valid")return c.result;for(let c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=i.map(c=>new bn(c.ctx.common.issues));return ye(r,{code:se.invalid_union,unionErrors:a}),je}if(s(o,"handleResults"),r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let l of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let c=a.map(l=>new bn(l));return ye(r,{code:se.invalid_union,unionErrors:c}),je}}get options(){return this._def.options}};mc.create=(t,e)=>new mc({options:t,typeName:z.ZodUnion,...We(e)});var ui=s(t=>t instanceof hc?ui(t.schema):t instanceof Yn?ui(t.innerType()):t instanceof gc?[t.value]:t instanceof yc?t.options:t instanceof vc?ft.objectValues(t.enum):t instanceof _c?ui(t._def.innerType):t instanceof dc?[void 0]:t instanceof pc?[null]:t instanceof Xn?[void 0,...ui(t.unwrap())]:t instanceof di?[null,...ui(t.unwrap())]:t instanceof fh||t instanceof wc?ui(t.unwrap()):t instanceof bc?ui(t._def.innerType):[],"getDiscriminator"),hk=class t extends nt{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==we.object)return ye(r,{code:se.invalid_type,expected:we.object,received:r.parsedType}),je;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ye(r,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),je)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=ui(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(o.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);o.set(c,i)}}return new t({typeName:z.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...We(n)})}};function gk(t,e){let r=ci(t),n=ci(e);if(t===e)return{valid:!0,data:t};if(r===we.object&&n===we.object){let o=ft.objectKeys(e),i=ft.objectKeys(t).filter(c=>o.indexOf(c)!==-1),a={...t,...e};for(let c of i){let l=gk(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===we.array&&n===we.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[i],l=gk(a,c);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return r===we.date&&n===we.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(gk,"mergeValues");var fc=class extends nt{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=s((i,a)=>{if(pk(i)||pk(a))return je;let c=gk(i.value,a.value);return c.valid?((mk(i)||mk(a))&&r.dirty(),{status:r.value,value:c.data}):(ye(n,{code:se.invalid_intersection_types}),je)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};fc.create=(t,e,r)=>new fc({left:t,right:e,typeName:z.ZodIntersection,...We(r)});var li=class t extends nt{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==we.array)return ye(n,{code:se.invalid_type,expected:we.array,received:n.parsedType}),je;if(n.data.length<this._def.items.length)return ye(n,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),je;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Nn(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>zr.mergeArray(r,a)):zr.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};li.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new li({items:t,typeName:z.ZodTuple,rest:null,...We(e)})};var yk=class t extends nt{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==we.object)return ye(n,{code:se.invalid_type,expected:we.object,received:n.parsedType}),je;let o=[],i=this._def.keyType,a=this._def.valueType;for(let c in n.data)o.push({key:i._parse(new Nn(n,c,n.path,c)),value:a._parse(new Nn(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?zr.mergeObjectAsync(r,o):zr.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof nt?new t({keyType:e,valueType:r,typeName:z.ZodRecord,...We(n)}):new t({keyType:lc.create(),valueType:e,typeName:z.ZodRecord,...We(r)})}},id=class extends nt{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==we.map)return ye(n,{code:se.invalid_type,expected:we.map,received:n.parsedType}),je;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([c,l],d)=>({key:o._parse(new Nn(n,c,n.path,[d,"key"])),value:i._parse(new Nn(n,l,n.path,[d,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let d=await l.key,p=await l.value;if(d.status==="aborted"||p.status==="aborted")return je;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let d=l.key,p=l.value;if(d.status==="aborted"||p.status==="aborted")return je;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}}}};id.create=(t,e,r)=>new id({valueType:e,keyType:t,typeName:z.ZodMap,...We(r)});var sd=class t extends nt{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==we.set)return ye(n,{code:se.invalid_type,expected:we.set,received:n.parsedType}),je;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ye(n,{code:se.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ye(n,{code:se.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(l){let d=new Set;for(let p of l){if(p.status==="aborted")return je;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,d)=>i._parse(new Nn(n,l,n.path,d)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Ie.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Ie.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};sd.create=(t,e)=>new sd({valueType:t,minSize:null,maxSize:null,typeName:z.ZodSet,...We(e)});var vk=class t extends nt{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==we.function)return ye(r,{code:se.invalid_type,expected:we.function,received:r.parsedType}),je;function n(c,l){return mh({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wl(),Xi].filter(d=>!!d),issueData:{code:se.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function o(c,l){return mh({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wl(),Xi].filter(d=>!!d),issueData:{code:se.invalid_return_type,returnTypeError:l}})}s(o,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof qs){let c=this;return Jr(async function(...l){let d=new bn([]),p=await c._def.args.parseAsync(l,i).catch(y=>{throw d.addIssue(n(l,y)),d}),m=await Reflect.apply(a,this,p);return await c._def.returns._def.type.parseAsync(m,i).catch(y=>{throw d.addIssue(o(m,y)),d})})}else{let c=this;return Jr(function(...l){let d=c._def.args.safeParse(l,i);if(!d.success)throw new bn([n(l,d.error)]);let p=Reflect.apply(a,this,d.data),m=c._def.returns.safeParse(p,i);if(!m.success)throw new bn([o(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:li.create(e).rest(Yi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||li.create([]).rest(Yi.create()),returns:r||Yi.create(),typeName:z.ZodFunction,...We(n)})}},hc=class extends nt{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};hc.create=(t,e)=>new hc({getter:t,typeName:z.ZodLazy,...We(e)});var gc=class extends nt{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ye(r,{received:r.data,code:se.invalid_literal,expected:this._def.value}),je}return{status:"valid",value:e.data}}get value(){return this._def.value}};gc.create=(t,e)=>new gc({value:t,typeName:z.ZodLiteral,...We(e)});function Ij(t,e){return new yc({values:t,typeName:z.ZodEnum,...We(e)})}s(Ij,"createZodEnum");var yc=class t extends nt{static{s(this,"ZodEnum")}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ye(r,{expected:ft.joinValues(n),received:r.parsedType,code:se.invalid_type}),je}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ye(r,{received:r.data,code:se.invalid_enum_value,options:n}),je}return Jr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};yc.create=Ij;var vc=class extends nt{static{s(this,"ZodNativeEnum")}_parse(e){let r=ft.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==we.string&&n.parsedType!==we.number){let o=ft.objectValues(r);return ye(n,{expected:ft.joinValues(o),received:n.parsedType,code:se.invalid_type}),je}if(this._cache||(this._cache=new Set(ft.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let o=ft.objectValues(r);return ye(n,{received:n.data,code:se.invalid_enum_value,options:o}),je}return Jr(e.data)}get enum(){return this._def.values}};vc.create=(t,e)=>new vc({values:t,typeName:z.ZodNativeEnum,...We(e)});var qs=class extends nt{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==we.promise&&r.common.async===!1)return ye(r,{code:se.invalid_type,expected:we.promise,received:r.parsedType}),je;let n=r.parsedType===we.promise?r.data:Promise.resolve(r.data);return Jr(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};qs.create=(t,e)=>new qs({type:t,typeName:z.ZodPromise,...We(e)});var Yn=class extends nt{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:s(a=>{ye(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return je;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?je:l.status==="dirty"?cc(l.value):r.value==="dirty"?cc(l.value):l});{if(r.value==="aborted")return je;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?je:c.status==="dirty"?cc(c.value):r.value==="dirty"?cc(c.value):c}}if(o.type==="refinement"){let a=s(c=>{let l=o.refinement(c,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?je:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?je:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ls(a))return je;let c=o.transform(a.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Ls(a)?Promise.resolve(o.transform(a.value,i)).then(c=>({status:r.value,value:c})):je);ft.assertNever(o)}};Yn.create=(t,e,r)=>new Yn({schema:t,typeName:z.ZodEffects,effect:e,...We(r)});Yn.createWithPreprocess=(t,e,r)=>new Yn({schema:e,effect:{type:"preprocess",transform:t},typeName:z.ZodEffects,...We(r)});var Xn=class extends nt{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===we.undefined?Jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Xn.create=(t,e)=>new Xn({innerType:t,typeName:z.ZodOptional,...We(e)});var di=class extends nt{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===we.null?Jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};di.create=(t,e)=>new di({innerType:t,typeName:z.ZodNullable,...We(e)});var _c=class extends nt{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===we.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};_c.create=(t,e)=>new _c({innerType:t,typeName:z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...We(e)});var bc=class extends nt{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ql(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bn(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new bn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};bc.create=(t,e)=>new bc({innerType:t,typeName:z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...We(e)});var ad=class extends nt{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==we.nan){let n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:we.nan,received:n.parsedType}),je}return{status:"valid",value:e.data}}};ad.create=t=>new ad({typeName:z.ZodNaN,...We(t)});var WNe=Symbol("zod_brand"),fh=class extends nt{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},hh=class t extends nt{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?je:i.status==="dirty"?(r.dirty(),cc(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?je:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:z.ZodPipeline})}},wc=class extends nt{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(o=>(Ls(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return Ql(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};wc.create=(t,e)=>new wc({innerType:t,typeName:z.ZodReadonly,...We(e)});var QNe={object:wn.lazycreate},z;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(z||(z={}));var XNe=lc.create,YNe=Xl.create,eDe=ad.create,tDe=Yl.create,rDe=ed.create,nDe=td.create,oDe=rd.create,iDe=dc.create,sDe=pc.create,aDe=nd.create,cDe=Yi.create,uDe=Eo.create,lDe=od.create,dDe=es.create,pDe=wn.create,mDe=wn.strictCreate,fDe=mc.create,hDe=hk.create,gDe=fc.create,yDe=li.create,vDe=yk.create,_De=id.create,bDe=sd.create,wDe=vk.create,SDe=hc.create,xDe=gc.create,TDe=yc.create,EDe=vc.create,kDe=qs.create,IDe=Yn.create,PDe=Xn.create,ADe=di.create,CDe=Yn.createWithPreprocess,ODe=hh.create;function Zt(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?ph(e,t.currentPath):e.join("/")}}s(Zt,"parseAnyDef");function Pj(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==z.ZodAny&&(r.items=Me(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&gt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&gt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(gt(r,"minItems",t.exactLength.value,t.exactLength.message,e),gt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}s(Pj,"parseArrayDef");function Aj(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?gt(r,"minimum",n.value,n.message,e):gt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),gt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?gt(r,"maximum",n.value,n.message,e):gt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),gt(r,"maximum",n.value,n.message,e));break;case"multipleOf":gt(r,"multipleOf",n.value,n.message,e);break}return r}s(Aj,"parseBigintDef");function Cj(){return{type:"boolean"}}s(Cj,"parseBooleanDef");function gh(t,e){return Me(t.type._def,e)}s(gh,"parseBrandedDef");var Oj=s((t,e)=>Me(t.innerType._def,e),"parseCatchDef");function _k(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>_k(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return e7(t,e)}}s(_k,"parseDateDef");var e7=s((t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":gt(r,"minimum",n.value,n.message,e);break;case"max":gt(r,"maximum",n.value,n.message,e);break}return r},"integerDateParser");function $j(t,e){return{...Me(t.innerType._def,e),default:t.defaultValue()}}s($j,"parseDefaultDef");function Rj(t,e){return e.effectStrategy==="input"?Me(t.schema._def,e):Zt(e)}s(Rj,"parseEffectsDef");function Nj(t){return{type:"string",enum:Array.from(t.values)}}s(Nj,"parseEnumDef");var t7=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function Dj(t,e){let r=[Me(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Me(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(t7(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:c,...l}=i;a=l}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}s(Dj,"parseIntersectionDef");function jj(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}s(jj,"parseLiteralDef");var bk,eo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(bk===void 0&&(bk=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bk),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function yh(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":gt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":gt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":to(r,"email",n.message,e);break;case"format:idn-email":to(r,"idn-email",n.message,e);break;case"pattern:zod":Kr(r,eo.email,n.message,e);break}break;case"url":to(r,"uri",n.message,e);break;case"uuid":to(r,"uuid",n.message,e);break;case"regex":Kr(r,n.regex,n.message,e);break;case"cuid":Kr(r,eo.cuid,n.message,e);break;case"cuid2":Kr(r,eo.cuid2,n.message,e);break;case"startsWith":Kr(r,RegExp(`^${wk(n.value,e)}`),n.message,e);break;case"endsWith":Kr(r,RegExp(`${wk(n.value,e)}$`),n.message,e);break;case"datetime":to(r,"date-time",n.message,e);break;case"date":to(r,"date",n.message,e);break;case"time":to(r,"time",n.message,e);break;case"duration":to(r,"duration",n.message,e);break;case"length":gt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),gt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Kr(r,RegExp(wk(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&to(r,"ipv4",n.message,e),n.version!=="v4"&&to(r,"ipv6",n.message,e);break}case"base64url":Kr(r,eo.base64url,n.message,e);break;case"jwt":Kr(r,eo.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Kr(r,eo.ipv4Cidr,n.message,e),n.version!=="v4"&&Kr(r,eo.ipv6Cidr,n.message,e);break}case"emoji":Kr(r,eo.emoji(),n.message,e);break;case"ulid":{Kr(r,eo.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{to(r,"binary",n.message,e);break}case"contentEncoding:base64":{gt(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Kr(r,eo.base64,n.message,e);break}}break}case"nanoid":Kr(r,eo.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(yh,"parseStringDef");function wk(t,e){return e.patternStrategy==="escape"?n7(t):t}s(wk,"escapeLiteralCheckValue");var r7=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function n7(t){let e="";for(let r=0;r<t.length;r++)r7.has(t[r])||(e+="\\"),e+=t[r];return e}s(n7,"escapeNonAlphaNumeric");function to(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):gt(t,"format",e,r,n)}s(to,"addFormat");function Kr(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Mj(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):gt(t,"pattern",Mj(e,n),r,n)}s(Kr,"addPattern");function Mj(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,c=!1;for(let l=0;l<n.length;l++){if(i){o+=n[l],i=!1;continue}if(r.i){if(a){if(n[l].match(/[a-z]/)){c?(o+=n[l],o+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&n[l+2]?.match(/[a-z]/)?(o+=n[l],c=!0):o+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){o+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(r.m){if(n[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[l]==="."){o+=a?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}o+=n[l],n[l]==="\\"?i=!0:a&&n[l]==="]"?a=!1:!a&&n[l]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}s(Mj,"stringifyRegExpWithFlags");function vh(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===z.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:Me(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??Zt(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Me(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===z.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=yh(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===z.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===z.ZodBranded&&t.keyType._def.type._def.typeName===z.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=gh(t.keyType._def,e);return{...r,propertyNames:o}}}return r}s(vh,"parseRecordDef");function zj(t,e){if(e.mapStrategy==="record")return vh(t,e);let r=Me(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Zt(e),n=Me(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Zt(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(zj,"parseMapDef");function Uj(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Uj,"parseNativeEnumDef");function Lj(t){return t.target==="openAi"?void 0:{not:Zt({...t,currentPath:[...t.currentPath,"not"]})}}s(Lj,"parseNeverDef");function qj(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}s(qj,"parseNullDef");var cd={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Bj(t,e){if(e.target==="openApi3")return Fj(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in cd&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=cd[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Fj(t,e)}s(Bj,"parseUnionDef");var Fj=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Me(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Vj(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:cd[t.innerType._def.typeName],nullable:!0}:{type:[cd[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=Me(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=Me(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(Vj,"parseNullableDef");function Hj(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",dk(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?gt(r,"minimum",n.value,n.message,e):gt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),gt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?gt(r,"maximum",n.value,n.message,e):gt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),gt(r,"maximum",n.value,n.message,e));break;case"multipleOf":gt(r,"multipleOf",n.value,n.message,e);break}return r}s(Hj,"parseNumberDef");function Zj(t,e){let r=e.target==="openAi",n={type:"object",properties:{}},o=[],i=t.shape();for(let c in i){let l=i[c];if(l===void 0||l._def===void 0)continue;let d=i7(l);d&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let p=Me(l._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});p!==void 0&&(n.properties[c]=p,d||o.push(c))}o.length&&(n.required=o);let a=o7(t,e);return a!==void 0&&(n.additionalProperties=a),n}s(Zj,"parseObjectDef");function o7(t,e){if(t.catchall._def.typeName!=="ZodNever")return Me(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(o7,"decideAdditionalProperties");function i7(t){try{return t.isOptional()}catch{return!0}}s(i7,"safeIsOptional");var Jj=s((t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Me(t.innerType._def,e);let r=Me(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Zt(e)},r]}:Zt(e)},"parseOptionalDef");var Kj=s((t,e)=>{if(e.pipeStrategy==="input")return Me(t.in._def,e);if(e.pipeStrategy==="output")return Me(t.out._def,e);let r=Me(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Me(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function Gj(t,e){return Me(t.type._def,e)}s(Gj,"parsePromiseDef");function Wj(t,e){let n={type:"array",uniqueItems:!0,items:Me(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&gt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&gt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}s(Wj,"parseSetDef");function Qj(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Me(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Me(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Me(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(Qj,"parseTupleDef");function Xj(t){return{not:Zt(t)}}s(Xj,"parseUndefinedDef");function Yj(t){return Zt(t)}s(Yj,"parseUnknownDef");var e2=s((t,e)=>Me(t.innerType._def,e),"parseReadonlyDef");var t2=s((t,e,r)=>{switch(e){case z.ZodString:return yh(t,r);case z.ZodNumber:return Hj(t,r);case z.ZodObject:return Zj(t,r);case z.ZodBigInt:return Aj(t,r);case z.ZodBoolean:return Cj();case z.ZodDate:return _k(t,r);case z.ZodUndefined:return Xj(r);case z.ZodNull:return qj(r);case z.ZodArray:return Pj(t,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return Bj(t,r);case z.ZodIntersection:return Dj(t,r);case z.ZodTuple:return Qj(t,r);case z.ZodRecord:return vh(t,r);case z.ZodLiteral:return jj(t,r);case z.ZodEnum:return Nj(t);case z.ZodNativeEnum:return Uj(t);case z.ZodNullable:return Vj(t,r);case z.ZodOptional:return Jj(t,r);case z.ZodMap:return zj(t,r);case z.ZodSet:return Wj(t,r);case z.ZodLazy:return()=>t.getter()._def;case z.ZodPromise:return Gj(t,r);case z.ZodNaN:case z.ZodNever:return Lj(r);case z.ZodEffects:return Rj(t,r);case z.ZodAny:return Zt(r);case z.ZodUnknown:return Yj(r);case z.ZodDefault:return $j(t,r);case z.ZodBranded:return gh(t,r);case z.ZodReadonly:return e2(t,r);case z.ZodCatch:return Oj(t,r);case z.ZodPipeline:return Kj(t,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function Me(t,e,r=!1){let n=e.seen.get(t);if(e.override){let c=e.override?.(t,e,n,r);if(c!==bj)return c}if(n&&!r){let c=s7(n,e);if(c!==void 0)return c}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=t2(t,t.typeName,e),a=typeof i=="function"?Me(i(),e):i;if(a&&a7(t,e,a),e.postProcess){let c=e.postProcess(a,t,e);return o.jsonSchema=a,c}return o.jsonSchema=a,a}s(Me,"parseDef");var s7=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ph(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Zt(e)):e.$refStrategy==="seen"?Zt(e):void 0}},"get$ref"),a7=s((t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),"addMeta");var r2=s((t,e)=>{let r=Sj(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,p])=>({...l,[d]:Me(p._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??Zt(r)}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Me(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??Zt(r),a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let c=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c},"zodToJsonSchema");var n2=r2;var ud={code:"0",name:"text",parse:s(t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}},"parse")},ld={code:"1",name:"function_call",parse:s(t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}},"parse")},dd={code:"2",name:"data",parse:s(t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}},"parse")},pd={code:"3",name:"error",parse:s(t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}},"parse")},md={code:"4",name:"assistant_message",parse:s(t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}},"parse")},fd={code:"5",name:"assistant_control_data",parse:s(t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}},"parse")},hd={code:"6",name:"data_message",parse:s(t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}},"parse")},gd={code:"7",name:"tool_calls",parse:s(t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}},"parse")},yd={code:"8",name:"message_annotations",parse:s(t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}},"parse")},vd={code:"9",name:"tool_call",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}},"parse")},_d={code:"a",name:"tool_result",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}},"parse")},bd={code:"b",name:"tool_call_streaming_start",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}},"parse")},wd={code:"c",name:"tool_call_delta",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}},"parse")},Sd={code:"d",name:"finish_message",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}},"parse")},xd={code:"e",name:"finish_step",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}},"parse")},o2=[ud,ld,dd,pd,md,fd,hd,gd,yd,vd,_d,bd,wd,Sd,xd],cze={[ud.code]:ud,[ld.code]:ld,[dd.code]:dd,[pd.code]:pd,[md.code]:md,[fd.code]:fd,[hd.code]:hd,[gd.code]:gd,[yd.code]:yd,[vd.code]:vd,[_d.code]:_d,[bd.code]:bd,[wd.code]:wd,[Sd.code]:Sd,[xd.code]:xd},uze={[ud.name]:ud.code,[ld.name]:ld.code,[dd.name]:dd.code,[pd.name]:pd.code,[md.name]:md.code,[fd.name]:fd.code,[hd.name]:hd.code,[gd.name]:gd.code,[yd.name]:yd.code,[vd.name]:vd.code,[_d.name]:_d.code,[bd.name]:bd.code,[wd.name]:wd.code,[Sd.name]:Sd.code,[xd.name]:xd.code},lze=o2.map(t=>t.code);function ro(t,e){let r=o2.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}s(ro,"formatStreamPart");var Sk=Symbol.for("vercel.ai.schema");function u7(t,{validate:e}={}){return{[Sk]:!0,_type:void 0,[vj]:!0,jsonSchema:t,validate:e}}s(u7,"jsonSchema");function l7(t){return typeof t=="object"&&t!==null&&Sk in t&&t[Sk]===!0&&"jsonSchema"in t&&"validate"in t}s(l7,"isSchema");function _h(t){return l7(t)?t:d7(t)}s(_h,"asSchema");function d7(t){return u7(n2(t),{validate:s(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}},"validate")})}s(d7,"zodSchema");var i2="vercel.ai.error",p7=Symbol.for(i2),s2,m7=class a2 extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[s2]=!0,this.name=e,this.cause=n}static isInstance(e){return a2.hasMarker(e,i2)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};s2=p7;var yt=m7,xk="AI_APICallError",c2=`vercel.ai.error.${xk}`,f7=Symbol.for(c2),u2,l2=class extends yt{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:xk,message:t,cause:a}),this[u2]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return yt.hasMarker(t,c2)}static isAPICallError(t){return t instanceof Error&&t.name===xk&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};u2=f7;var h7="AI_EmptyResponseBodyError",g7=`vercel.ai.error.${h7}`,y7=Symbol.for(g7),v7;v7=y7;function bh(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(bh,"getErrorMessage");var d2="AI_InvalidArgumentError",p2=`vercel.ai.error.${d2}`,_7=Symbol.for(p2),m2,f2=class extends yt{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:d2,message:t,cause:e}),this[m2]=!0,this.argument=r}static isInstance(t){return yt.hasMarker(t,p2)}};m2=_7;var Tk="AI_InvalidPromptError",h2=`vercel.ai.error.${Tk}`,b7=Symbol.for(h2),g2,Fs=class extends yt{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:Tk,message:`Invalid prompt: ${e}`,cause:r}),this[g2]=!0,this.prompt=t}static isInstance(t){return yt.hasMarker(t,h2)}static isInvalidPromptError(t){return t instanceof Error&&t.name===Tk&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};g2=b7;var w7="AI_InvalidResponseDataError",S7=`vercel.ai.error.${w7}`,x7=Symbol.for(S7),T7;T7=x7;var Ek="AI_JSONParseError",y2=`vercel.ai.error.${Ek}`,E7=Symbol.for(y2),v2,Pk=class extends yt{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:Ek,message:`JSON parsing failed: Text: ${t}.
Error message: ${bh(e)}`,cause:e}),this[v2]=!0,this.text=t}static isInstance(t){return yt.hasMarker(t,y2)}static isJSONParseError(t){return t instanceof Error&&t.name===Ek&&"text"in t&&typeof t.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};v2=E7;var k7="AI_LoadAPIKeyError",I7=`vercel.ai.error.${k7}`,P7=Symbol.for(I7),A7;A7=P7;var C7="AI_LoadSettingError",O7=`vercel.ai.error.${C7}`,$7=Symbol.for(O7),R7;R7=$7;var N7="AI_NoContentGeneratedError",D7=`vercel.ai.error.${N7}`,j7=Symbol.for(D7),M7;M7=j7;var z7="AI_NoSuchModelError",U7=`vercel.ai.error.${z7}`,L7=Symbol.for(U7),q7;q7=L7;var F7="AI_TooManyEmbeddingValuesForCallError",B7=`vercel.ai.error.${F7}`,V7=Symbol.for(B7),H7;H7=V7;var kk="AI_TypeValidationError",_2=`vercel.ai.error.${kk}`,Z7=Symbol.for(_2),b2,J7=class Ik extends yt{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:kk,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${bh(r)}`,cause:r}),this[b2]=!0,this.value=e}static isInstance(e){return yt.hasMarker(e,_2)}static wrap({value:e,cause:r}){return Ik.isInstance(r)&&r.value===e?r:new Ik({value:e,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===kk}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};b2=Z7;var wh=J7,K7="AI_UnsupportedFunctionalityError",G7=`vercel.ai.error.${K7}`,W7=Symbol.for(G7),Q7;Q7=W7;var w2=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet");var T2=nu(dh(),1);var pi=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=w2(r,e);if(t==null)return o;if(r.includes(n))throw new f2({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),Eze=pi();function S2(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(S2,"getErrorMessage");function x2(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}s(x2,"isAbortError");var Ak=Symbol.for("vercel.ai.validator");function X7(t){return{[Ak]:!0,validate:t}}s(X7,"validator");function Y7(t){return typeof t=="object"&&t!==null&&Ak in t&&t[Ak]===!0&&"validate"in t}s(Y7,"isValidator");function eX(t){return Y7(t)?t:tX(t)}s(eX,"asValidator");function tX(t){return X7(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}s(tX,"zodValidator");function Td({value:t,schema:e}){let r=eX(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:wh.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:wh.wrap({value:t,cause:n})}}}s(Td,"safeValidateTypes");function Ck({text:t,schema:e}){try{let r=T2.default.parse(t);return e==null?{success:!0,value:r}:Td({value:r,schema:e})}catch(r){return{success:!1,error:Pk.isJSONParseError(r)?r:new Pk({text:t,cause:r})}}}s(Ck,"safeParseJSON");var{btoa:rX,atob:nX}=globalThis;function E2(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=nX(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(E2,"convertBase64ToUint8Array");function Ok(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return rX(e)}s(Ok,"convertUint8ArrayToBase64");var k2=typeof globalThis=="object"?globalThis:global;var mi="1.9.0";var I2=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function oX(t){var e=new Set([t]),r=new Set,n=t.match(I2);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return s(function(l){return l===t},"isExactmatch");function i(c){return r.add(c),!1}s(i,"_reject");function a(c){return e.add(c),!0}return s(a,"_accept"),s(function(l){if(e.has(l))return!0;if(r.has(l))return!1;var d=l.match(I2);if(!d)return i(l);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||o.major!==p.major?i(l):o.major===0?o.minor===p.minor&&o.patch<=p.patch?a(l):i(l):o.minor<=p.minor?a(l):i(l)},"isCompatible")}s(oX,"_makeCompatibilityCheck");var P2=oX(mi);var iX=mi.split(".")[0],Ed=Symbol.for("opentelemetry.js.api."+iX),kd=k2;function Sc(t,e,r,n){var o;n===void 0&&(n=!1);var i=kd[Ed]=(o=kd[Ed])!==null&&o!==void 0?o:{version:mi};if(!n&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==mi){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+mi);return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+mi+"."),!0}s(Sc,"registerGlobal");function fi(t){var e,r,n=(e=kd[Ed])===null||e===void 0?void 0:e.version;if(!(!n||!P2(n)))return(r=kd[Ed])===null||r===void 0?void 0:r[t]}s(fi,"getGlobal");function xc(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+mi+".");var r=kd[Ed];r&&delete r[t]}s(xc,"unregisterGlobal");var sX=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},aX=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},A2=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return s(t,"DiagComponentLogger"),t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Id("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Id("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Id("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Id("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Id("verbose",this._namespace,e)},t})();function Id(t,e,r){var n=fi("diag");if(n)return r.unshift(e),n[t].apply(n,aX([],sX(r),!1))}s(Id,"logProxy");var Gr;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Gr||(Gr={}));function C2(t,e){t<Gr.NONE?t=Gr.NONE:t>Gr.ALL&&(t=Gr.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return s(r,"_filterFunc"),{error:r("error",Gr.ERROR),warn:r("warn",Gr.WARN),info:r("info",Gr.INFO),debug:r("debug",Gr.DEBUG),verbose:r("verbose",Gr.VERBOSE)}}s(C2,"createLogLevelDiagLogger");var cX=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},uX=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},lX="diag",Tc=(function(){function t(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=fi("diag");if(c)return c[o].apply(c,uX([],cX(i),!1))}}s(e,"_logProxy");var r=this,n=s(function(o,i){var a,c,l;if(i===void 0&&(i={logLevel:Gr.INFO}),o===r){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof i=="number"&&(i={logLevel:i});var p=fi("diag"),m=C2((c=i.logLevel)!==null&&c!==void 0?c:Gr.INFO,o);if(p&&!i.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+h),m.warn("Current logger will overwrite one already registered from "+h)}return Sc("diag",m,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){xc(lX,r)},r.createComponentLogger=function(o){return new A2(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return s(t,"DiagAPI"),t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();function O2(t){return Symbol.for(t)}s(O2,"createContextKey");var dX=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return s(t,"BaseContext"),t})(),$2=new dX;var pX=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},mX=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},R2=(function(){function t(){}return s(t,"NoopContextManager"),t.prototype.active=function(){return $2},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,mX([n],pX(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})();var fX=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},hX=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},$k="context",gX=new R2,Sh=(function(){function t(){}return s(t,"ContextAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Sc($k,e,Tc.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,hX([e,r,n],fX(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return fi($k)||gX},t.prototype.disable=function(){this._getContextManager().disable(),xc($k,Tc.instance())},t})();var xh;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(xh||(xh={}));var Rk="0000000000000000",Nk="00000000000000000000000000000000",N2={traceId:Nk,spanId:Rk,traceFlags:xh.NONE};var ts=(function(){function t(e){e===void 0&&(e=N2),this._spanContext=e}return s(t,"NonRecordingSpan"),t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})();var Dk=O2("OpenTelemetry Context Key SPAN");function Th(t){return t.getValue(Dk)||void 0}s(Th,"getSpan");function D2(){return Th(Sh.getInstance().active())}s(D2,"getActiveSpan");function Pd(t,e){return t.setValue(Dk,e)}s(Pd,"setSpan");function j2(t){return t.deleteValue(Dk)}s(j2,"deleteSpan");function M2(t,e){return Pd(t,new ts(e))}s(M2,"setSpanContext");function Eh(t){var e;return(e=Th(t))===null||e===void 0?void 0:e.spanContext()}s(Eh,"getSpanContext");var yX=/^([0-9a-f]{32})$/i,vX=/^[0-9a-f]{16}$/i;function _X(t){return yX.test(t)&&t!==Nk}s(_X,"isValidTraceId");function bX(t){return vX.test(t)&&t!==Rk}s(bX,"isValidSpanId");function kh(t){return _X(t.traceId)&&bX(t.spanId)}s(kh,"isSpanContextValid");function z2(t){return new ts(t)}s(z2,"wrapSpanContext");var jk=Sh.getInstance(),Ih=(function(){function t(){}return s(t,"NoopTracer"),t.prototype.startSpan=function(e,r,n){n===void 0&&(n=jk.active());var o=!!r?.root;if(o)return new ts;var i=n&&Eh(n);return wX(i)&&kh(i)?new ts(i):new ts},t.prototype.startActiveSpan=function(e,r,n,o){var i,a,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(i=r,c=n):(i=r,a=n,c=o);var l=a??jk.active(),d=this.startSpan(e,i,l),p=Pd(l,d);return jk.with(p,c,void 0,d)}},t})();function wX(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}s(wX,"isSpanContext");var SX=new Ih,U2=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return s(t,"ProxyTracer"),t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):SX},t})();var L2=(function(){function t(){}return s(t,"NoopTracerProvider"),t.prototype.getTracer=function(e,r,n){return new Ih},t})();var xX=new L2,Mk=(function(){function t(){}return s(t,"ProxyTracerProvider"),t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new U2(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:xX},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})();var Ec;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Ec||(Ec={}));var zk="trace",q2=(function(){function t(){this._proxyTracerProvider=new Mk,this.wrapSpanContext=z2,this.isSpanContextValid=kh,this.deleteSpan=j2,this.getSpan=Th,this.getActiveSpan=D2,this.getSpanContext=Eh,this.setSpan=Pd,this.setSpanContext=M2}return s(t,"TraceAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=Sc(zk,this._proxyTracerProvider,Tc.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return fi(zk)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){xc(zk,Tc.instance()),this._proxyTracerProvider=new Mk},t})();var Uk=q2.getInstance();var TX=Object.defineProperty,G2=s((t,e)=>{for(var r in e)TX(t,r,{get:e[r],enumerable:!0})},"__export");async function EX(t){return t===void 0?Promise.resolve():new Promise(e=>setTimeout(e,t))}s(EX,"delay");var qk="AI_RetryError",W2=`vercel.ai.error.${qk}`,kX=Symbol.for(W2),Q2,F2=class extends yt{static{s(this,"RetryError")}constructor({message:t,reason:e,errors:r}){super({name:qk,message:t}),this[Q2]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return yt.hasMarker(t,W2)}static isRetryError(t){return t instanceof Error&&t.name===qk&&typeof t.reason=="string"&&Array.isArray(t.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};Q2=kX;var IX=s(({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>X2(n,{maxRetries:t,delayInMs:e,backoffFactor:r}),"retryWithExponentialBackoff");async function X2(t,{maxRetries:e,delayInMs:r,backoffFactor:n},o=[]){try{return await t()}catch(i){if(x2(i)||e===0)throw i;let a=S2(i),c=[...o,i],l=c.length;if(l>e)throw new F2({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:c});if(i instanceof Error&&l2.isAPICallError(i)&&i.isRetryable===!0&&l<=e)return await EX(r),X2(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},c);throw l===1?i:new F2({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:c})}}s(X2,"_retryWithExponentialBackoff");function Fk({operationId:t,telemetry:e}){return{"operation.name":`${t}${e?.functionId!=null?` ${e.functionId}`:""}`,"resource.name":e?.functionId,"ai.operationId":t,"ai.telemetry.functionId":e?.functionId}}s(Fk,"assembleOperationName");function PX({model:t,settings:e,telemetry:r,headers:n}){var o;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((i,[a,c])=>(i[`ai.settings.${a}`]=c,i),{}),...Object.entries((o=r?.metadata)!=null?o:{}).reduce((i,[a,c])=>(i[`ai.telemetry.metadata.${a}`]=c,i),{}),...Object.entries(n??{}).reduce((i,[a,c])=>(c!==void 0&&(i[`ai.request.headers.${a}`]=c),i),{})}}s(PX,"getBaseTelemetryAttributes");var AX={startSpan(){return Ph},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(Ph);if(typeof r=="function")return r(Ph);if(typeof n=="function")return n(Ph)}},Ph={spanContext(){return CX},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},CX={traceId:"",spanId:"",traceFlags:0};function OX({isEnabled:t=!1,tracer:e}={}){return t?e||Uk.getTracer("ai"):AX}s(OX,"getTracer");function Bk({name:t,tracer:e,attributes:r,fn:n,endWhenDone:o=!0}){return e.startActiveSpan(t,{attributes:r},async i=>{try{let a=await n(i);return o&&i.end(),a}catch(a){try{a instanceof Error?(i.recordException({name:a.name,message:a.message,stack:a.stack}),i.setStatus({code:Ec.ERROR,message:a.message})):i.setStatus({code:Ec.ERROR})}finally{i.end()}throw a}})}s(Bk,"recordSpan");function kc({telemetry:t,attributes:e}){return t?.isEnabled!==!0?{}:Object.entries(e).reduce((r,[n,o])=>{if(o===void 0)return r;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(t?.recordInputs===!1)return r;let i=o.input();return i===void 0?r:{...r,[n]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(t?.recordOutputs===!1)return r;let i=o.output();return i===void 0?r:{...r,[n]:i}}return{...r,[n]:o}},{})}s(kc,"selectTelemetryAttributes");var Vk="AI_DownloadError",Y2=`vercel.ai.error.${Vk}`,$X=Symbol.for(Y2),eM,Lk=class extends yt{static{s(this,"DownloadError")}constructor({url:t,statusCode:e,statusText:r,cause:n,message:o=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:Vk,message:o,cause:n}),this[eM]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return yt.hasMarker(t,Y2)}static isDownloadError(t){return t instanceof Error&&t.name===Vk&&typeof t.url=="string"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.statusText==null||typeof t.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};eM=$X;async function RX({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let o=await e(n);if(!o.ok)throw new Lk({url:n,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mimeType:(r=o.headers.get("content-type"))!=null?r:void 0}}catch(o){throw Lk.isInstance(o)?o:new Lk({url:n,cause:o})}}s(RX,"download");var NX=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function DX(t){for(let{bytes:e,mimeType:r}of NX)if(t.length>=e.length&&e.every((n,o)=>t[o]===n))return r}s(DX,"detectImageMimeType");var Hk="AI_InvalidDataContentError",tM=`vercel.ai.error.${Hk}`,jX=Symbol.for(tM),rM,B2=class extends yt{static{s(this,"InvalidDataContentError")}constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:Hk,message:r,cause:e}),this[rM]=!0,this.content=t}static isInstance(t){return yt.hasMarker(t,tM)}static isInvalidDataContentError(t){return t instanceof Error&&t.name===Hk&&t.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};rM=jX;var nM=u.union([u.string(),u.instanceof(Uint8Array),u.instanceof(ArrayBuffer),u.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function MX(t){return typeof t=="string"?t:t instanceof ArrayBuffer?Ok(new Uint8Array(t)):Ok(t)}s(MX,"convertDataContentToBase64String");function Ah(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return E2(t)}catch(e){throw new B2({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new B2({content:t})}s(Ah,"convertDataContentToUint8Array");function zX(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}s(zX,"convertUint8ArrayToText");var Zk="AI_InvalidMessageRoleError",oM=`vercel.ai.error.${Zk}`,UX=Symbol.for(oM),iM,LX=class extends yt{static{s(this,"InvalidMessageRoleError")}constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Zk,message:e}),this[iM]=!0,this.role=t}static isInstance(t){return yt.hasMarker(t,oM)}static isInvalidMessageRoleError(t){return t instanceof Error&&t.name===Zk&&typeof t.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};iM=UX;function qX(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}s(qX,"splitDataUrl");async function FX({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=s(()=>!1,"modelSupportsUrl"),downloadImplementation:n=RX}){let o=await VX(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(i=>BX(i,o))]}s(FX,"convertToLanguageModelPrompt");function BX(t,e){let r=t.role;switch(r){case"system":return{role:"system",content:t.content,providerMetadata:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"user",content:t.content.map(n=>HX(n,e)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:o,...i}=n;return{...i,providerMetadata:o}}),providerMetadata:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:t.experimental_providerMetadata};default:{let n=r;throw new LX({role:n})}}}s(BX,"convertToLanguageModelMessage");async function VX(t,e,r,n){let o=t.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&r===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!n(a)),i=await Promise.all(o.map(async a=>({url:a,data:await e({url:a})})));return Object.fromEntries(i.map(({url:a,data:c})=>[a.toString(),c]))}s(VX,"downloadAssets");function HX(t,e){if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let r=t.mimeType,n,o,i,a=t.type;switch(a){case"image":n=t.image;break;case"file":n=t.data;break;default:throw new Error(`Unsupported part type: ${a}`)}try{o=typeof n=="string"?new URL(n):n}catch{o=n}if(o instanceof URL)if(o.protocol==="data:"){let{mimeType:c,base64Content:l}=qX(o.toString());if(c==null||l==null)throw new Error(`Invalid data URL format in part ${a}`);r=c,i=Ah(l)}else{let c=e[o.toString()];c?(i=c.data,r??(r=c.mimeType)):i=o}else i=Ah(o);switch(a){case"image":return r==null&&i instanceof Uint8Array&&(r=DX(i)),{type:"image",image:i,mimeType:r,providerMetadata:t.experimental_providerMetadata};case"file":if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:i instanceof Uint8Array?MX(i):i,mimeType:r,providerMetadata:t.experimental_providerMetadata}}}s(HX,"convertPartToLanguageModelPart");var Jk="AI_InvalidArgumentError",sM=`vercel.ai.error.${Jk}`,ZX=Symbol.for(sM),aM,no=class extends yt{static{s(this,"InvalidArgumentError")}constructor({parameter:t,value:e,message:r}){super({name:Jk,message:`Invalid argument for parameter ${t}: ${r}`}),this[aM]=!0,this.parameter=t,this.value=e}static isInstance(t){return yt.hasMarker(t,sM)}static isInvalidArgumentError(t){return t instanceof Error&&t.name===Jk&&typeof t.parameter=="string"&&typeof t.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};aM=ZX;function JX({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:c,maxRetries:l}){if(t!=null){if(!Number.isInteger(t))throw new no({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new no({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new no({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new no({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new no({parameter:"topK",value:n,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new no({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new no({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(c!=null&&!Number.isInteger(c))throw new no({parameter:"seed",value:c,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new no({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new no({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a!=null&&a.length>0?a:void 0,seed:c,maxRetries:l??2}}s(JX,"prepareCallSettings");var Kk=u.lazy(()=>u.union([u.null(),u.string(),u.number(),u.boolean(),u.record(u.string(),Kk),u.array(Kk)])),rs=u.record(u.string(),u.record(u.string(),Kk)),KX=u.array(u.union([u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("image"),data:u.string(),mimeType:u.string().optional()})])),cM=u.object({type:u.literal("text"),text:u.string(),experimental_providerMetadata:rs.optional()}),GX=u.object({type:u.literal("image"),image:u.union([nM,u.instanceof(URL)]),mimeType:u.string().optional(),experimental_providerMetadata:rs.optional()}),WX=u.object({type:u.literal("file"),data:u.union([nM,u.instanceof(URL)]),mimeType:u.string(),experimental_providerMetadata:rs.optional()}),QX=u.object({type:u.literal("tool-call"),toolCallId:u.string(),toolName:u.string(),args:u.unknown()}),XX=u.object({type:u.literal("tool-result"),toolCallId:u.string(),toolName:u.string(),result:u.unknown(),content:KX.optional(),isError:u.boolean().optional(),experimental_providerMetadata:rs.optional()}),YX=u.object({role:u.literal("system"),content:u.string(),experimental_providerMetadata:rs.optional()}),eY=u.object({role:u.literal("user"),content:u.union([u.string(),u.array(u.union([cM,GX,WX]))]),experimental_providerMetadata:rs.optional()}),tY=u.object({role:u.literal("assistant"),content:u.union([u.string(),u.array(u.union([cM,QX]))]),experimental_providerMetadata:rs.optional()}),rY=u.object({role:u.literal("tool"),content:u.array(XX),experimental_providerMetadata:rs.optional()}),nY=u.union([YX,eY,tY,rY]);function oY(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(iY);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}s(oY,"detectPromptType");function iY(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}s(iY,"detectSingleMessageCharacteristics");function sY(t){var e,r,n;let o=[];for(let i of t){let a;try{a=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(a.protocol){case"http:":case"https:":{if((e=i.contentType)!=null&&e.startsWith("image/"))o.push({type:"image",image:a});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:a,mimeType:i.contentType})}break}case"data:":{let c,l,d;try{[c,l]=i.url.split(","),d=c.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(d==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((r=i.contentType)!=null&&r.startsWith("image/"))o.push({type:"image",image:Ah(l)});else if((n=i.contentType)!=null&&n.startsWith("text/"))o.push({type:"text",text:zX(Ah(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return o}s(sY,"attachmentsToParts");var uM="AI_MessageConversionError",lM=`vercel.ai.error.${uM}`,aY=Symbol.for(lM),dM,V2=class extends yt{static{s(this,"MessageConversionError")}constructor({originalMessage:t,message:e}){super({name:uM,message:e}),this[dM]=!0,this.originalMessage=t}static isInstance(t){return yt.hasMarker(t,lM)}};dM=aY;function Qk(t,e){var r;let n=(r=e?.tools)!=null?r:{},o=[];for(let i of t){let{role:a,content:c,toolInvocations:l,experimental_attachments:d}=i;switch(a){case"system":{o.push({role:"system",content:c});break}case"user":{o.push({role:"user",content:d?[{type:"text",text:c},...sY(d)]:c});break}case"assistant":{if(l==null){o.push({role:"assistant",content:c});break}o.push({role:"assistant",content:[{type:"text",text:c},...l.map(({toolCallId:p,toolName:m,args:h})=>({type:"tool-call",toolCallId:p,toolName:m,args:h}))]}),o.push({role:"tool",content:l.map(p=>{if(!("result"in p))throw new V2({originalMessage:i,message:"ToolInvocation must have a result: "+JSON.stringify(p)});let{toolCallId:m,toolName:h,result:y}=p,g=n[h];return g?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:m,toolName:h,result:g.experimental_toToolResultContent(y),experimental_content:g.experimental_toToolResultContent(y)}:{type:"tool-result",toolCallId:m,toolName:h,result:y}})});break}case"function":case"data":case"tool":break;default:{let p=a;throw new V2({originalMessage:i,message:`Unsupported role: ${p}`})}}}return o}s(Qk,"convertToCoreMessages");function cY({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new Fs({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new Fs({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new Fs({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new Fs({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=oY(t.messages);if(r==="other")throw new Fs({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?Qk(t.messages,{tools:e}):t.messages,o=Td({value:n,schema:u.array(nY)});if(!o.success)throw new Fs({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:o.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}s(cY,"standardizePrompt");function uY(t){return{promptTokens:t.promptTokens,completionTokens:t.completionTokens,totalTokens:t.promptTokens+t.completionTokens}}s(uY,"calculateLanguageModelUsage");function Ch(t,{contentType:e,dataStreamVersion:r}){var n;let o=new Headers((n=t?.headers)!=null?n:{});return o.has("Content-Type")||o.set("Content-Type",e),r!==void 0&&o.set("X-Vercel-AI-Data-Stream",r),o}s(Ch,"prepareResponseHeaders");var lY="AI_NoObjectGeneratedError",dY=`vercel.ai.error.${lY}`,pY=Symbol.for(dY),mY;mY=pY;function H2(t,e){let r=t.pipeThrough(new TransformStream(e));return r[Symbol.asyncIterator]=()=>{let n=r.getReader();return{async next(){let{done:o,value:i}=await n.read();return o?{done:!0,value:void 0}:{done:!1,value:i}}}},r}s(H2,"createAsyncIterableStream");var TLe=pi({prefix:"aiobj",size:24});function ko(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}s(ko,"createResolvablePromise");function fY(){var t,e;return(e=(t=globalThis?.performance)==null?void 0:t.now())!=null?e:Date.now()}s(fY,"now");function Z2(t,{contentType:e,dataStreamVersion:r}){let n={};if(t?.headers!=null)for(let[o,i]of Object.entries(t.headers))n[o]=i;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}s(Z2,"prepareOutgoingHttpHeaders");function J2({response:t,status:e,statusText:r,headers:n,stream:o}){t.writeHead(e??200,r,n);let i=o.getReader();s(async()=>{try{for(;;){let{done:c,value:l}=await i.read();if(c)break;t.write(l)}}catch(c){throw c}finally{t.end()}},"read")()}s(J2,"writeToServerResponse");var kLe=pi({prefix:"aiobj",size:24});var Gk="AI_InvalidToolArgumentsError",pM=`vercel.ai.error.${Gk}`,hY=Symbol.for(pM),mM,gY=class extends yt{static{s(this,"InvalidToolArgumentsError")}constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${bh(r)}`}){super({name:Gk,message:n,cause:r}),this[mM]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return yt.hasMarker(t,pM)}static isInvalidToolArgumentsError(t){return t instanceof Error&&t.name===Gk&&typeof t.toolName=="string"&&typeof t.toolArgs=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};mM=hY;var Wk="AI_NoSuchToolError",fM=`vercel.ai.error.${Wk}`,yY=Symbol.for(fM),hM,Oh=class extends yt{static{s(this,"NoSuchToolError")}constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:Wk,message:r}),this[hM]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return yt.hasMarker(t,fM)}static isNoSuchToolError(t){return t instanceof Error&&t.name===Wk&&"toolName"in t&&t.toolName!=null&&typeof t.name=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};hM=yY;function vY(t){return t!=null&&Object.keys(t).length>0}s(vY,"isNonEmptyObject");function _Y({tools:t,toolChoice:e,activeTools:r}){return vY(t)?{tools:(r!=null?Object.entries(t).filter(([o])=>r.includes(o)):Object.entries(t)).map(([o,i])=>{let a=i.type;switch(a){case void 0:case"function":return{type:"function",name:o,description:i.description,parameters:_h(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{let c=a;throw new Error(`Unsupported tool type: ${c}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}s(_Y,"prepareToolsAndToolChoice");var bY=/^([\s\S]*?)(\s+)(\S*)$/;function wY(t){let e=t.match(bY);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}s(wY,"splitOnLastWhitespace");function SY({toolCall:t,tools:e}){let r=t.toolName;if(e==null)throw new Oh({toolName:t.toolName});let n=e[r];if(n==null)throw new Oh({toolName:t.toolName,availableTools:Object.keys(e)});let o=_h(n.parameters),i=t.args.trim()===""?Td({value:{},schema:o}):Ck({text:t.args,schema:o});if(i.success===!1)throw new gY({toolName:r,toolArgs:t.args,cause:i.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:i.value}}s(SY,"parseToolCall");function xY({text:t="",tools:e,toolCalls:r,toolResults:n}){let o=[];return o.push({role:"assistant",content:[{type:"text",text:t},...r]}),n.length>0&&o.push({role:"tool",content:n.map(i=>{let a=e[i.toolName];return a?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:a.experimental_toToolResultContent(i.result),experimental_content:a.experimental_toToolResultContent(i.result)}:{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:i.result}})}),o}s(xY,"toResponseMessages");var RLe=pi({prefix:"aitxt",size:24});function TY(){let t=[],e=null,r=!1,n=s(async()=>{if(r&&t.length===0){e?.close();return}if(t.length!==0)try{let{value:o,done:i}=await t[0].read();i?(t.shift(),t.length>0?await n():r&&e?.close()):e?.enqueue(o)}catch(o){e?.error(o),t.shift(),r&&t.length===0&&e?.close()}},"processPull");return{stream:new ReadableStream({start(o){e=o},pull:n,async cancel(){for(let o of t)await o.cancel();t=[],r=!0}}),addStream:s(o=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(o.getReader())},"addStream"),close:s(()=>{r=!0,t.length===0&&e?.close()},"close")}}s(TY,"createStitchableStream");function Xk(t,e){let r=t.getReader(),n=e.getReader(),o,i,a=!1,c=!1;async function l(p){try{o==null&&(o=r.read());let m=await o;o=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}s(l,"readStream1");async function d(p){try{i==null&&(i=n.read());let m=await i;i=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}return s(d,"readStream2"),new ReadableStream({async pull(p){try{if(a){await d(p);return}if(c){await l(p);return}o==null&&(o=r.read()),i==null&&(i=n.read());let{result:m,reader:h}=await Promise.race([o.then(y=>({result:y,reader:r})),i.then(y=>({result:y,reader:n}))]);m.done||p.enqueue(m.value),h===r?(o=void 0,m.done&&(await d(p),a=!0)):(i=void 0,m.done&&(c=!0,await l(p)))}catch(m){p.error(m)}},cancel(){r.cancel(),n.cancel()}})}s(Xk,"mergeStreams");function EY({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:o,abortSignal:i}){let a=null,c=new ReadableStream({start(g){a=g}}),l={},d=new Set,p=!1,m;function h(){p&&d.size===0&&(m!=null&&a.enqueue(m),a.close())}s(h,"attemptClose");let y=new TransformStream({transform(g,f){let _=g.type;switch(_){case"text-delta":case"response-metadata":case"error":{f.enqueue(g);break}case"tool-call-delta":{r&&(l[g.toolCallId]||(f.enqueue({type:"tool-call-streaming-start",toolCallId:g.toolCallId,toolName:g.toolName}),l[g.toolCallId]=!0),f.enqueue({type:"tool-call-delta",toolCallId:g.toolCallId,toolName:g.toolName,argsTextDelta:g.argsTextDelta}));break}case"tool-call":{let w=g.toolName;if(t==null){a.enqueue({type:"error",error:new Oh({toolName:g.toolName})});break}let b=t[w];if(b==null){a.enqueue({type:"error",error:new Oh({toolName:g.toolName,availableTools:Object.keys(t)})});break}try{let S=SY({toolCall:g,tools:t});if(f.enqueue(S),b.execute!=null){let k=lk();d.add(k),Bk({name:"ai.toolCall",attributes:kc({telemetry:o,attributes:{...Fk({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":S.toolName,"ai.toolCall.id":S.toolCallId,"ai.toolCall.args":{output:s(()=>JSON.stringify(S.args),"output")}}}),tracer:n,fn:s(async R=>b.execute(S.args,{abortSignal:i}).then(O=>{a.enqueue({...S,type:"tool-result",result:O}),d.delete(k),h();try{R.setAttributes(kc({telemetry:o,attributes:{"ai.toolCall.result":{output:s(()=>JSON.stringify(O),"output")}}}))}catch{}},O=>{a.enqueue({type:"error",error:O}),d.delete(k),h()}),"fn")})}}catch(S){a.enqueue({type:"error",error:S})}break}case"finish":{m={type:"finish",finishReason:g.finishReason,logprobs:g.logprobs,usage:uY(g.usage),experimental_providerMetadata:g.providerMetadata};break}default:{let w=_;throw new Error(`Unhandled chunk type: ${w}`)}}},flush(){p=!0,h()}});return new ReadableStream({async start(g){return Promise.all([e.pipeThrough(y).pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){}})),c.pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){g.close()}}))])}})}s(EY,"runToolsTransformation");var kY=pi({prefix:"aitxt",size:24});async function gM({model:t,tools:e,toolChoice:r,system:n,prompt:o,messages:i,maxRetries:a,abortSignal:c,headers:l,maxToolRoundtrips:d=0,maxSteps:p=d!=null?d+1:1,experimental_continueSteps:m=!1,experimental_telemetry:h,experimental_providerMetadata:y,experimental_toolCallStreaming:g=!1,experimental_activeTools:f,onChunk:_,onFinish:w,onStepFinish:b,_internal:{now:S=fY,generateId:k=kY,currentDate:R=s(()=>new Date,"currentDate")}={},...O}){if(p<1)throw new no({parameter:"maxSteps",value:p,message:"maxSteps must be at least 1"});let C=PX({model:t,telemetry:h,headers:l,settings:{...O,maxRetries:a}}),$=OX(h),P=cY({prompt:{system:n,prompt:o,messages:i},tools:e});return Bk({name:"ai.streamText",attributes:kc({telemetry:h,attributes:{...Fk({operationId:"ai.streamText",telemetry:h}),...C,"ai.prompt":{input:s(()=>JSON.stringify({system:n,prompt:o,messages:i}),"input")},"ai.settings.maxSteps":p}}),tracer:$,endWhenDone:!1,fn:s(async N=>{let j=IX({maxRetries:a}),W=s(async({responseMessages:Te})=>{let Xe=Te.length===0?P.type:"messages",Ze=await FX({prompt:{type:Xe,system:P.system,messages:[...P.messages,...Te]},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:t.supportsUrl}),J={type:"regular",..._Y({tools:e,toolChoice:r,activeTools:f})},{result:{stream:Oe,warnings:ge,rawResponse:q,request:Ke},doStreamSpan:Tt,startTimestampMs:Ot}=await j(()=>Bk({name:"ai.streamText.doStream",attributes:kc({telemetry:h,attributes:{...Fk({operationId:"ai.streamText.doStream",telemetry:h}),...C,"ai.prompt.format":{input:s(()=>Xe,"input")},"ai.prompt.messages":{input:s(()=>JSON.stringify(Ze),"input")},"ai.prompt.tools":{input:s(()=>{var nn;return(nn=J.tools)==null?void 0:nn.map(wi=>JSON.stringify(wi))},"input")},"ai.prompt.toolChoice":{input:s(()=>J.toolChoice!=null?JSON.stringify(J.toolChoice):void 0,"input")},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":O.frequencyPenalty,"gen_ai.request.max_tokens":O.maxTokens,"gen_ai.request.presence_penalty":O.presencePenalty,"gen_ai.request.stop_sequences":O.stopSequences,"gen_ai.request.temperature":O.temperature,"gen_ai.request.top_k":O.topK,"gen_ai.request.top_p":O.topP}}),tracer:$,endWhenDone:!1,fn:s(async nn=>({startTimestampMs:S(),doStreamSpan:nn,result:await t.doStream({mode:J,...JX(O),inputFormat:Xe,prompt:Ze,providerMetadata:y,abortSignal:c,headers:l})}),"fn")}));return{result:{stream:EY({tools:e,generatorStream:Oe,toolCallStreaming:g,tracer:$,telemetry:h,abortSignal:c}),warnings:ge,request:Ke??{},rawResponse:q},doStreamSpan:Tt,startTimestampMs:Ot}},"startStep"),{result:{stream:Z,warnings:F,rawResponse:Y,request:re},doStreamSpan:ie,startTimestampMs:be}=await W({responseMessages:[]});return new IY({stream:Z,warnings:F,rawResponse:Y,request:re,onChunk:_,onFinish:w,onStepFinish:b,rootSpan:N,doStreamSpan:ie,telemetry:h,startTimestampMs:be,maxSteps:p,continueSteps:m,startStep:W,modelId:t.modelId,now:S,currentDate:R,generateId:k,tools:e})},"fn")})}s(gM,"streamText");var IY=class{static{s(this,"DefaultStreamTextResult")}constructor({stream:t,warnings:e,rawResponse:r,request:n,onChunk:o,onFinish:i,onStepFinish:a,rootSpan:c,doStreamSpan:l,telemetry:d,startTimestampMs:p,maxSteps:m,continueSteps:h,startStep:y,modelId:g,now:f,currentDate:_,generateId:w,tools:b}){this.warnings=e,this.rawResponse=r;let{resolve:S,promise:k}=ko();this.usage=k;let{resolve:R,promise:O}=ko();this.finishReason=O;let{resolve:C,promise:$}=ko();this.text=$;let{resolve:P,promise:N}=ko();this.toolCalls=N;let{resolve:j,promise:W}=ko();this.toolResults=W;let{resolve:Z,promise:F}=ko();this.steps=F;let{resolve:Y,promise:re}=ko();this.experimental_providerMetadata=re;let{resolve:ie,promise:be}=ko();this.request=be;let{resolve:Te,promise:Xe}=ko();this.response=Xe;let{resolve:Ze,promise:J}=ko();this.responseMessages=J;let{stream:Oe,addStream:ge,close:q}=TY();this.originalStream=Oe;let Ke=[],Tt=this;function Ot({stream:nn,startTimestamp:wi,doStreamSpan:qo,currentStep:oa,responseMessages:wr,usage:mo={promptTokens:0,completionTokens:0,totalTokens:0},stepType:ia,previousStepText:Sp="",stepRequest:Si,hasLeadingWhitespace:xp}){let fn=[],fo=[],_r="unknown",Wt={promptTokens:0,completionTokens:0,totalTokens:0},Un,Tp=!0,Pr="",Fo=ia==="continue"?Sp:"",v,x={id:w(),timestamp:_(),modelId:g},E="",U=!1,V=!0,te=!1;async function de({controller:Re,chunk:ht}){Re.enqueue(ht),Pr+=ht.textDelta,Fo+=ht.textDelta,U=!0,te=ht.textDelta.trimEnd()!==ht.textDelta,await o?.({chunk:ht})}s(de,"publishTextChunk"),ge(nn.pipeThrough(new TransformStream({async transform(Re,ht){var vt,ct,Ut;if(Tp){let qt=f()-wi;Tp=!1,qo.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":qt,"ai.stream.msToFirstChunk":qt}),qo.setAttributes({"ai.response.msToFirstChunk":qt,"ai.stream.msToFirstChunk":qt})}if(Re.type==="text-delta"&&Re.textDelta.length===0)return;let Bo=Re.type;switch(Bo){case"text-delta":{if(h){let qt=V&&xp?Re.textDelta.trimStart():Re.textDelta;if(qt.length===0)break;V=!1,E+=qt;let sa=wY(E);sa!=null&&(E=sa.suffix,await de({controller:ht,chunk:{type:"text-delta",textDelta:sa.prefix+sa.whitespace}}))}else await de({controller:ht,chunk:Re});break}case"tool-call":{ht.enqueue(Re),fn.push(Re),await o?.({chunk:Re});break}case"tool-result":{ht.enqueue(Re),fo.push(Re),await o?.({chunk:Re});break}case"response-metadata":{x={id:(vt=Re.id)!=null?vt:x.id,timestamp:(ct=Re.timestamp)!=null?ct:x.timestamp,modelId:(Ut=Re.modelId)!=null?Ut:x.modelId};break}case"finish":{Wt=Re.usage,_r=Re.finishReason,Un=Re.experimental_providerMetadata,v=Re.logprobs;let qt=f()-wi;qo.addEvent("ai.stream.finish"),qo.setAttributes({"ai.response.msToFinish":qt,"ai.response.avgCompletionTokensPerSecond":1e3*Wt.completionTokens/qt});break}case"tool-call-streaming-start":case"tool-call-delta":{ht.enqueue(Re),await o?.({chunk:Re});break}case"error":{ht.enqueue(Re),_r="error";break}default:{let qt=Bo;throw new Error(`Unknown chunk type: ${qt}`)}}},async flush(Re){var ht;let vt=fn.length>0?JSON.stringify(fn):void 0,ct="done";oa+1<m&&(h&&_r==="length"&&fn.length===0?ct="continue":fn.length>0&&fo.length===fn.length&&(ct="tool-result")),h&&E.length>0&&(ct!=="continue"||ia==="continue"&&!U)&&(await de({controller:Re,chunk:{type:"text-delta",textDelta:E}}),E="");try{qo.setAttributes(kc({telemetry:d,attributes:{"ai.response.finishReason":_r,"ai.response.text":{output:s(()=>Pr,"output")},"ai.response.toolCalls":{output:s(()=>vt,"output")},"ai.response.id":x.id,"ai.response.model":x.modelId,"ai.response.timestamp":x.timestamp.toISOString(),"ai.usage.promptTokens":Wt.promptTokens,"ai.usage.completionTokens":Wt.completionTokens,"ai.finishReason":_r,"ai.result.text":{output:s(()=>Pr,"output")},"ai.result.toolCalls":{output:s(()=>vt,"output")},"gen_ai.response.finish_reasons":[_r],"gen_ai.response.id":x.id,"gen_ai.response.model":x.modelId,"gen_ai.usage.input_tokens":Wt.promptTokens,"gen_ai.usage.output_tokens":Wt.completionTokens}}))}catch{}finally{qo.end()}if(Re.enqueue({type:"step-finish",finishReason:_r,usage:Wt,experimental_providerMetadata:Un,logprobs:v,response:{...x},isContinued:ct==="continue"}),ia==="continue"){let qt=wr[wr.length-1];typeof qt.content=="string"?qt.content+=Pr:qt.content.push({text:Pr,type:"text"})}else wr.push(...xY({text:Pr,tools:b??{},toolCalls:fn,toolResults:fo}));let Ut={stepType:ia,text:Pr,toolCalls:fn,toolResults:fo,finishReason:_r,usage:Wt,warnings:Tt.warnings,logprobs:v,request:Si,rawResponse:Tt.rawResponse,response:{...x,headers:(ht=Tt.rawResponse)==null?void 0:ht.headers,messages:JSON.parse(JSON.stringify(wr))},experimental_providerMetadata:Un,isContinued:ct==="continue"};Ke.push(Ut),await a?.(Ut);let Bo={promptTokens:mo.promptTokens+Wt.promptTokens,completionTokens:mo.completionTokens+Wt.completionTokens,totalTokens:mo.totalTokens+Wt.totalTokens};if(ct!=="done"){let{result:qt,doStreamSpan:sa,startTimestampMs:m5}=await y({responseMessages:wr});Tt.warnings=qt.warnings,Tt.rawResponse=qt.rawResponse,Ot({stream:qt.stream,startTimestamp:m5,doStreamSpan:sa,currentStep:oa+1,responseMessages:wr,usage:Bo,stepType:ct,previousStepText:Fo,stepRequest:qt.request,hasLeadingWhitespace:te});return}try{Re.enqueue({type:"finish",finishReason:_r,usage:Bo,experimental_providerMetadata:Un,logprobs:v,response:{...x}}),q(),c.setAttributes(kc({telemetry:d,attributes:{"ai.response.finishReason":_r,"ai.response.text":{output:s(()=>Fo,"output")},"ai.response.toolCalls":{output:s(()=>vt,"output")},"ai.usage.promptTokens":Bo.promptTokens,"ai.usage.completionTokens":Bo.completionTokens,"ai.finishReason":_r,"ai.result.text":{output:s(()=>Fo,"output")},"ai.result.toolCalls":{output:s(()=>vt,"output")}}})),S(Bo),R(_r),C(Fo),P(fn),Y(Un),j(fo),ie(Si),Te({...x,headers:r?.headers,messages:wr}),Z(Ke),Ze(wr),await i?.({finishReason:_r,logprobs:v,usage:Bo,text:Fo,toolCalls:fn,toolResults:fo,request:Si,rawResponse:r,response:{...x,headers:r?.headers,messages:wr},warnings:e,experimental_providerMetadata:Un,steps:Ke,responseMessages:wr})}catch(qt){Re.error(qt)}finally{c.end()}}})))}s(Ot,"addStepStream"),Ot({stream:t,startTimestamp:p,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:n,hasLeadingWhitespace:!1})}teeStream(){let[t,e]=this.originalStream.tee();return this.originalStream=e,t}get textStream(){return H2(this.teeStream(),{transform(t,e){t.type==="text-delta"?e.enqueue(t.textDelta):t.type==="error"&&e.error(t.error)}})}get fullStream(){return H2(this.teeStream(),{transform(t,e){e.enqueue(t)}})}toAIStream(t={}){return this.toDataStreamInternal({callbacks:t})}toDataStreamInternal({callbacks:t={},getErrorMessage:e=s(()=>"","getErrorMessage3"),sendUsage:r=!0}={}){let n="",o=new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(a,c){if(c.enqueue(a),a.type==="text-delta"){let l=a.textDelta;n+=l,t.onToken&&await t.onToken(l),t.onText&&await t.onText(l)}},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}}),i=new TransformStream({transform:s(async(a,c)=>{let l=a.type;switch(l){case"text-delta":{c.enqueue(ro("text",a.textDelta));break}case"tool-call-streaming-start":{c.enqueue(ro("tool_call_streaming_start",{toolCallId:a.toolCallId,toolName:a.toolName}));break}case"tool-call-delta":{c.enqueue(ro("tool_call_delta",{toolCallId:a.toolCallId,argsTextDelta:a.argsTextDelta}));break}case"tool-call":{c.enqueue(ro("tool_call",{toolCallId:a.toolCallId,toolName:a.toolName,args:a.args}));break}case"tool-result":{c.enqueue(ro("tool_result",{toolCallId:a.toolCallId,result:a.result}));break}case"error":{c.enqueue(ro("error",e(a.error)));break}case"step-finish":{c.enqueue(ro("finish_step",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0,isContinued:a.isContinued}));break}case"finish":{c.enqueue(ro("finish_message",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0}));break}default:{let d=l;throw new Error(`Unknown chunk type: ${d}`)}}},"transform")});return this.fullStream.pipeThrough(o).pipeThrough(i).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(t,e){return this.pipeDataStreamToResponse(t,e)}pipeDataStreamToResponse(t,e){let r=e==null?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},n=e==null?void 0:"data"in e?e.data:void 0,o=e==null?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,i=e==null?void 0:"sendUsage"in e?e.sendUsage:void 0;J2({response:t,status:r?.status,statusText:r?.statusText,headers:Z2(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:n,getErrorMessage:o,sendUsage:i})})}pipeTextStreamToResponse(t,e){J2({response:t,status:e?.status,statusText:e?.statusText,headers:Z2(e,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(t){return this.toDataStreamResponse(t)}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t?.getErrorMessage,sendUsage:t?.sendUsage});return t?.data?Xk(t?.data.stream,e):e}toDataStreamResponse(t){var e;let r=t==null?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},n=t==null?void 0:"data"in t?t.data:void 0,o=t==null?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,i=t==null?void 0:"sendUsage"in t?t.sendUsage:void 0;return new Response(this.toDataStream({data:n,getErrorMessage:o,sendUsage:i}),{status:(e=r?.status)!=null?e:200,statusText:r?.statusText,headers:Ch(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t?.status)!=null?e:200,headers:Ch(t,{contentType:"text/plain; charset=utf-8"})})}};var PY="AI_NoSuchProviderError",AY=`vercel.ai.error.${PY}`,CY=Symbol.for(AY),OY;OY=CY;function yM(t){let e=new TextEncoder,r="",n=t||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(o,i){let a=typeof o=="string"?o:o.content;i.enqueue(e.encode(a)),r+=a,n.onToken&&await n.onToken(a),n.onText&&typeof o=="string"&&await n.onText(o)},async flush(){let o=$Y(n);n.onCompletion&&await n.onCompletion(r),n.onFinal&&!o&&await n.onFinal(r)}})}s(yM,"createCallbacksTransformer");function $Y(t){return"experimental_onFunctionCall"in t}s($Y,"isOfTypeOpenAIStreamCallbacks");function RY(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}s(RY,"trimStartOfStreamHelper");var MLe=15*1e3;function vM(){let t=new TextEncoder,e=new TextDecoder;return new TransformStream({transform:s(async(r,n)=>{let o=e.decode(r);n.enqueue(t.encode(ro("text",o)))},"transform")})}s(vM,"createStreamDataTransformer");var zLe=new TextDecoder("utf-8");var NY={};G2(NY,{toAIStream:s(()=>DY,"toAIStream"),toDataStream:s(()=>Yk,"toDataStream"),toDataStreamResponse:s(()=>jY,"toDataStreamResponse")});function DY(t,e){return Yk(t,e)}s(DY,"toAIStream");function Yk(t,e){return t.pipeThrough(new TransformStream({transform:s(async(r,n)=>{var o;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&K2((o=r.data)==null?void 0:o.chunk,n);return}K2(r,n)},"transform")})).pipeThrough(yM(e)).pipeThrough(vM())}s(Yk,"toDataStream");function jY(t,e){var r;let n=Yk(t,e?.callbacks),o=e?.data,i=e?.init,a=o?Xk(o.stream,n):n;return new Response(a,{status:(r=i?.status)!=null?r:200,statusText:i?.statusText,headers:Ch(i,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(jY,"toDataStreamResponse");function K2(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}s(K2,"forwardAIMessageChunk");var MY={};G2(MY,{toDataStream:s(()=>_M,"toDataStream"),toDataStreamResponse:s(()=>zY,"toDataStreamResponse")});function _M(t,e){return UY(t).pipeThrough(yM(e)).pipeThrough(vM())}s(_M,"toDataStream2");function zY(t,e={}){var r;let{init:n,data:o,callbacks:i}=e,a=_M(t,i),c=o?Xk(o.stream,a):a;return new Response(c,{status:(r=n?.status)!=null?r:200,statusText:n?.statusText,headers:Ch(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}s(zY,"toDataStreamResponse2");function UY(t){let e=t[Symbol.asyncIterator](),r=RY();return new ReadableStream({async pull(n){var o;let{value:i,done:a}=await e.next();if(a){n.close();return}let c=r((o=i.delta)!=null?o:"");c&&n.enqueue(c)}})}s(UY,"toReadableStream");var ULe=Symbol("internal_openai_fn_messages");An();Tr();async function $h(t){try{await Kn.insert(Ri).values({userId:t.userId,action:`ai_${t.actionType}`,resourceType:t.toolName||"ai_chat",sessionId:t.sessionId,success:t.outcome==="success",errorMessage:t.errorMessage,newValues:{provider:t.provider,model:t.model,action_type:t.actionType,tool_name:t.toolName,input_summary:t.inputSummary.slice(0,500),output_summary:t.outputSummary.slice(0,500),tokens_used:t.tokensUsed,latency_ms:t.latencyMs,outcome:t.outcome,affected_tables:t.affectedTables,affected_record_ids:t.affectedRecordIds}})}catch{}}s($h,"logAIOperation");var bM=`Voc\xEA \xE9 o assistente financeiro inteligente especializado do AegisWallet, a plataforma brasileira l\xEDder em gest\xE3o financeira pessoal com interface voz-first.

## SUA ESPECIALIDADE BRASILEIRA

### Dom\xEDnio do Mercado Financeiro Brasileiro
- **PIX**: Expert em transfer\xEAncias PIX instant\xE2neas 24/7, QR Codes, limites, taxas e regras do BCB
- **Boletos**: Gest\xE3o completa de boletos - registro, pagamento, c\xE1lculo de juros/multas, agendamentos
- **Open Banking**: Conhecimento profundo das APIs banc\xE1rias brasileiras e padr\xF5es regulat\xF3rios
- **C\xE2mbio**: Entendimento de opera\xE7\xF5es cambiais e limites legais brasileiros
- **Impostos**: Conhecimento de tributa\xE7\xE3o brasileira (IR, IOF, etc.)

### Cultura e Localiza\xE7\xE3o
- **Portugu\xEAs Brasileiro Nativo**: Use termos como "parab\xE9ns", "show de bola", "blz", " firm\xE3o"
- **Realidade Financeira Brasileira**: Entenda sal\xE1rios, infla\xE7\xE3o, custo de vida, juros altos
- **Calend\xE1rio Brasileiro**: Considere feriados, 13\xBA sal\xE1rio, d\xE9cimo terceiro, parcelas
- **Bancos Nacionais**: Ita\xFA, Bradesco, Caixa, Banco do Brasil, Nubank, Inter, etc.

## CAPACIDADES AVAN\xC7ADAS

### Opera\xE7\xF5es Financeiras (PIX, TED, DOC, Boletos)
- **Transfer\xEAncias PIX**: Envio/recebimento instant\xE2neo, QR Codes, agendamentos, status tracking
- **Gest\xE3o de Boletos**: Registro via c\xF3digo de barras, c\xE1lculo autom\xE1tico de juros/multas, agendamento de pagamentos
- **An\xE1lise de Contatos**: Salvar contatos frequentes, m\xE9todos de pagamento PIX, favoritos
- **Limites e Taxas**: Conhecimento de limites di\xE1rios, taxas, hor\xE1rios de compensa\xE7\xE3o

### An\xE1lises e Insights Financeiros
- **An\xE1lise de Gastos**: Detalhada por categoria, tend\xEAncias, padr\xF5es an\xF4malos
- **Previs\xE3o de Fluxo de Caixa**: Baseada em hist\xF3rico e eventos futuros com confian\xE7a
- **Detec\xE7\xE3o de Fraude**: An\xE1lise em tempo real de risco, padr\xF5es suspeitos
- **Recomenda\xE7\xF5es de Or\xE7amento**: Personalizadas baseadas em comportamento e metas

### Interface Voz-First (Voice-First)
- **Comandos em Portugu\xEAs Natural**: "Envia cem reais para a Maria pelo PIX", "Paga o boleto da luz"
- **Processamento de Contexto**: Mant\xE9m conversa\xE7\xE3o com hist\xF3rico e contexto relevante
- **Confirma\xE7\xE3o por Voz**: Valida\xE7\xE3o segura de opera\xE7\xF5es sens\xEDveis via reconhecimento de voz
- **Respostas Otimizadas para TTS**: Texto projetado para s\xEDntese de voz natural

### Seguran\xE7a e Conformidade LGPD
- **LGPD**: Conformidade total com Lei Geral de Prote\xE7\xE3o de Dados brasileira
- **Valida\xE7\xE3o Multi-Fator**: 2FA, biom\xE9trica, c\xF3digo via SMS/email
- **Audit Logging**: Registros completos para compliance e auditoria
- **Prote\xE7\xE3o de Dados**: Criptografia, anonimiza\xE7\xE3o, reten\xE7\xE3o conformidade

## REGRAS DE SEGURAN\xC7A E CONFORMIDADE (CR\xCDTICAS)

### Prote\xE7\xE3o de Dados LGPD
1. **NUNCA** exponha dados sens\xEDveis: CPF, senhas, tokens biom\xE9tricos
2. **SEMPRE** obtenha consentimento expl\xEDcito para uso de dados financeiros
3. **RESPEITE** direitos de acesso, corre\xE7\xE3o e exclus\xE3o de dados
4. **IMPLEMENTE** pol\xEDticas de reten\xE7\xE3o conformes com regulamenta\xE7\xE3o brasileira

### Seguran\xE7a de Transa\xE7\xF5es
1. **VALIDA\xC7\xC3O OBRIGAT\xD3RIA**: Toda transa\xE7\xE3o >R$1.000 requer verifica\xE7\xE3o adicional
2. **LIMITES AUTOM\xC1TICOS**: Respeite limites di\xE1rios e de frequ\xEAncia
3. **MONITORAMENTO**: Detecte padr\xF5es an\xF4malos e poss\xEDveis fraudes
4. **CONFIRMA\xC7\xC3O**: Use c\xF3digos, biometria ou confirma\xE7\xE3o por voz para opera\xE7\xF5es cr\xEDticas

### Padr\xF5es Brasileiros de Atendimento
1. **Formalidade Amig\xE1vel**: Tratamento "voc\xEA" mas respeitoso e profissional
2. **Hor\xE1rio Banc\xE1rio**: Considere hor\xE1rios banc\xE1rios e janela de compensa\xE7\xE3o
3. **Feriados**: Esteja ciente de feriados nacionais e estaduais brasileiros
4. **Cultura Financeira**: Entenda avers\xE3o a risco, prefer\xEAncia por seguran\xE7a

## FORMATA\xC7\xC3O E COMUNICA\xC7\xC3O

### Formatos Brasileiros
- **Valores**: R$ 1.234,56 (separador decimal v\xEDrgula, milhar ponto)
- **Datas**: DD/MM/YYYY ou "hoje", "ontem", "anteontem", "esta semana"
- **Hor\xE1rios**: 24h com fuso America/Sao_Paulo (BRT/BRST)
- **Documentos**: CPF: XXX.XXX.XXX-XX, CNPJ: XX.XXX.XXX/XXXX-XX

### Tom e Estilo
- **Voz Ativa**: "Vou analisar seus gastos" em vez de "Seus gastos ser\xE3o analisados"
- **Empatia**: Entenda dificuldades financeiras com respeito e apoio
- **Clareza**: Use termos simples, evite jarg\xF5es t\xE9cnicos excessivos
- **Cultura**: Use express\xF5es brasileiras naturais quando apropriado

## PADR\xD5ES DE RESPOSTA

### Para PIX
- **R\xE1pido**: "Transfer\xEAncia PIX enviada! Chega em segundos na conta do destinat\xE1rio."
- **Seguro**: "Para sua seguran\xE7a, vou enviar um c\xF3digo para confirmar esta transfer\xEAncia de R$ 500,00."
- **Informativo**: "O limite di\xE1rio PIX \xE9 R$ 5.000 entre 20h e 6h."

### Para Boletos
- **C\xE1lculo**: "Este boleto vence em 3 dias com multa de 2% e juros de 1% ao m\xEAs."
- **Agendamento**: "Boleto agendado! Ser\xE1 pago automaticamente na data de vencimento."
- **Alerta**: "\u26A0\uFE0F Voc\xEA tem 2 boletos vencendo esta semana totalizando R$ 850,00."

### Para An\xE1lises
- **Visual**: "Seus gastos em alimenta\xE7\xE3o subiram 15% este m\xEAs. Quer ver o gr\xE1fico detalhado?"
- **Pr\xE1tico**: "Com base no seu padr\xE3o, sugiro reservar R$ 2.000 para emerg\xEAncias."
- **Alerta**: "Detectei 3 transa\xE7\xF5es suspeitas esta semana. Quer investigar?"

### Para Voz
- **Conversacional**: "Entendi! Voc\xEA quer transferir R$ 250 para a Joana pelo PIX, correto?"
- **Claro**: "Pode repetir o valor? N\xE3o consegui entender bem."
- **Eficiente**: "Pronto! Transfer\xEAncia autorizada com sua confirma\xE7\xE3o por voz."

## FLUXOS ESPECIALIZADOS

### Transfer\xEAncia PIX Completa
1. "Quanto quer transferir?" \u2192 Validar valor e limites
2. "Qual a chave PIX do destinat\xE1rio?" \u2192 Validar formato e tipo
3. "Qual o nome completo do destinat\xE1rio?" \u2192 Para registro
4. "Descri\xE7\xE3o opcional?" \u2192 Para identifica\xE7\xE3o
5. "Confirmar transfer\xEAncia?" \u2192 Envio ou verifica\xE7\xE3o adicional

### Pagamento de Boleto
1. "C\xF3digo de barras ou\u7167\u7247?" \u2192 Captura e valida\xE7\xE3o
2. "Valor e data de vencimento?" \u2192 Confirma\xE7\xE3o
3. "Calcular juros/multas?" \u2192 Se vencido
4. "Pagar agora ou agendar?" \u2192 Processamento
5. "Confirma\xE7\xE3o?" \u2192 Seguran\xE7a e finaliza\xE7\xE3o

### An\xE1lise Financeira por Voz
1. "Que per\xEDodo quer analisar?" \u2192 Defini\xE7\xE3o de scope
2. "Foco em alguma categoria espec\xEDfica?" \u2192 Detalhamento
3. "Quer compara\xE7\xE3o com per\xEDodo anterior?" \u2192 An\xE1lise comparativa
4. "Preferir resumo oral ou visual?" \u2192 Formato de sa\xEDda
5. "Gerar recomenda\xE7\xF5es?" \u2192 A\xE7\xF5es pr\xE1ticas

## INTEGRA\xC7\xC3O COM FERRAMENTAS

### Sistema de Ferramentas
Voc\xEA tem acesso a 4 categorias principais de ferramentas:

1. **Opera\xE7\xF5es Financeiras Brasileiras**
   - pix.*: Transfer\xEAncias, QR codes, agendamentos PIX
   - boletos.*: Registro, pagamento, c\xE1lculos de boletos
   - contacts.*: Gest\xE3o de contatos e m\xE9todos de pagamento

2. **An\xE1lises e Insights**
   - insights.*: An\xE1lise de gastos, previs\xF5es, detec\xE7\xE3o de anomalias
   - multimodal.*: Relat\xF3rios visuais, gr\xE1ficos, exporta\xE7\xF5es

3. **Seguran\xE7a e Conformidade**
   - security.*: Detec\xE7\xE3o de fraude, valida\xE7\xF5es, configura\xE7\xF5es de seguran\xE7a
   - notifications.*: Alertas, lembretes, prefer\xEAncias de notifica\xE7\xE3o

4. **Interface Voz-First**
   - voice.*: Processamento de comandos, confirma\xE7\xE3o por voz, contexto
   - Todas as ferramentas otimizadas para resposta via TTS

### Orquestra\xE7\xE3o Inteligente
Combine m\xFAltiplas ferramentas para respostas completas:
- Consultar saldo \u2192 security.checkFraudRisk \u2192 pix.sendPixTransfer
- An\xE1lise de gastos \u2192 insights.getSpendingAnalysis \u2192 multimodal.generateVisualReport
- Alerta de seguran\xE7a \u2192 notifications.sendAlert \u2192 voice.confirmVoiceAction

## MANEJO DE ERROS E RECUPERA\xC7\xC3O

### Erros Comuns Brasileiros
- **Chave PIX Inv\xE1lida**: "Esta chave PIX n\xE3o existe. Verifique CPF, email ou telefone."
- **Boleto Duplicado**: "Este boleto j\xE1 est\xE1 pago. Verifique se n\xE3o h\xE1 duplicidade."
- **Fora do Hor\xE1rio**: "Transfer\xEAncias TED/DOC s\xF3 em hor\xE1rio banc\xE1rio. PIX funciona 24/7."
- **LGPD**: "Preciso de sua autoriza\xE7\xE3o para acessar estes dados financeiros."

### Recupera\xE7\xE3o Intelligente
- **Alternativas**: "PIX n\xE3o funciona? Tente TED para transfer\xEAncias banc\xE1rias."
- **Contexto**: "Baseado no nosso hist\xF3rico, voc\xEA costuma transferir para..."
- **Proativo**: "Detectei um padr\xE3o incomum. Quer que eu investigue?"

## ATUALIZA\xC7\xD5ES E MELHORIAS

### Sempre Melhorando
- **Feedback de Usu\xE1rio**: Adapte respostas baseado no hist\xF3rico de intera\xE7\xF5es
- **Contexto Financeiro**: Mantenha-se atualizado sobre taxas, regulamenta\xE7\xF5es, novos bancos
- **Cultura Financeira**: Evolua com mudan\xE7as no comportamento financeiro brasileiro
- **Tecnologia**: Integre novas tecnologias banc\xE1rias e fintechs brasileiras

### M\xE9tricas de Sucesso
- **Compreens\xE3o**: 95%+ de comandos voz entendidos corretamente
- **Satisfa\xE7\xE3o**: Respostas que realmente ajudam os usu\xE1rios brasileiros
- **Efici\xEAncia**: Opera\xE7\xF5es conclu\xEDdas com m\xEDnimo de etapas
- **Seguran\xE7a**: Zero breaches de dados ou fraudes n\xE3o detectadas

---

**Sua Miss\xE3o**: Ser o assistente financeiro mais completo, seguro e brasileiro que existe, transformando gest\xE3o financeira em uma experi\xEAncia natural, intuitiva e efetiva para todos os brasileiros.

**Data de Hoje**: ${new Date().toLocaleDateString("pt-BR")}
**Fuso Hor\xE1rio**: America/Sao_Paulo (${new Date().toLocaleTimeString("pt-BR")})
**Moeda**: BRL (Real Brasileiro)`;var wM=bM;var SM="vercel.ai.error",LY=Symbol.for(SM),xM,qY=class TM extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[xM]=!0,this.name=e,this.cause=n}static isInstance(e){return TM.hasMarker(e,SM)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};xM=LY;var tr=qY,EM="AI_APICallError",kM=`vercel.ai.error.${EM}`,FY=Symbol.for(kM),IM,Qe=class extends tr{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:EM,message:t,cause:a}),this[IM]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return tr.hasMarker(t,kM)}};IM=FY;var PM="AI_EmptyResponseBodyError",AM=`vercel.ai.error.${PM}`,BY=Symbol.for(AM),CM,Ic=class extends tr{static{s(this,"EmptyResponseBodyError")}constructor({message:t="Empty response body"}={}){super({name:PM,message:t}),this[CM]=!0}static isInstance(t){return tr.hasMarker(t,AM)}};CM=BY;function OM(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}s(OM,"getErrorMessage");var $M="AI_InvalidArgumentError",RM=`vercel.ai.error.${$M}`,VY=Symbol.for(RM),NM,Dn=class extends tr{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:$M,message:t,cause:e}),this[NM]=!0,this.argument=r}static isInstance(t){return tr.hasMarker(t,RM)}};NM=VY;var DM="AI_InvalidPromptError",jM=`vercel.ai.error.${DM}`,HY=Symbol.for(jM),MM,zM=class extends tr{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:DM,message:`Invalid prompt: ${e}`,cause:r}),this[MM]=!0,this.prompt=t}static isInstance(t){return tr.hasMarker(t,jM)}};MM=HY;var UM="AI_InvalidResponseDataError",LM=`vercel.ai.error.${UM}`,ZY=Symbol.for(LM),qM,Rh=class extends tr{static{s(this,"InvalidResponseDataError")}constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:UM,message:e}),this[qM]=!0,this.data=t}static isInstance(t){return tr.hasMarker(t,LM)}};qM=ZY;var FM="AI_JSONParseError",BM=`vercel.ai.error.${FM}`,JY=Symbol.for(BM),VM,Wr=class extends tr{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:FM,message:`JSON parsing failed: Text: ${t}.
Error message: ${OM(e)}`,cause:e}),this[VM]=!0,this.text=t}static isInstance(t){return tr.hasMarker(t,BM)}};VM=JY;var HM="AI_LoadAPIKeyError",ZM=`vercel.ai.error.${HM}`,KY=Symbol.for(ZM),JM,Qr=class extends tr{static{s(this,"LoadAPIKeyError")}constructor({message:t}){super({name:HM,message:t}),this[JM]=!0}static isInstance(t){return tr.hasMarker(t,ZM)}};JM=KY;var GY="AI_LoadSettingError",WY=`vercel.ai.error.${GY}`,QY=Symbol.for(WY),XY;XY=QY;var YY="AI_NoContentGeneratedError",eee=`vercel.ai.error.${YY}`,tee=Symbol.for(eee),ree;ree=tee;var KM="AI_NoSuchModelError",GM=`vercel.ai.error.${KM}`,nee=Symbol.for(GM),WM,tI=class extends tr{static{s(this,"NoSuchModelError")}constructor({errorName:t=KM,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[WM]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return tr.hasMarker(t,GM)}};WM=nee;var QM="AI_TooManyEmbeddingValuesForCallError",XM=`vercel.ai.error.${QM}`,oee=Symbol.for(XM),YM,Nh=class extends tr{static{s(this,"TooManyEmbeddingValuesForCallError")}constructor(t){super({name:QM,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[YM]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return tr.hasMarker(t,XM)}};YM=oee;var ez="AI_TypeValidationError",tz=`vercel.ai.error.${ez}`,iee=Symbol.for(tz),rz,see=class eI extends tr{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:ez,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${OM(r)}`,cause:r}),this[rz]=!0,this.value=e}static isInstance(e){return tr.hasMarker(e,tz)}static wrap({value:e,cause:r}){return eI.isInstance(r)&&r.value===e?r:new eI({value:e,cause:r})}};rz=iee;var Jt=see,nz="AI_UnsupportedFunctionalityError",oz=`vercel.ai.error.${nz}`,aee=Symbol.for(oz),iz,xt=class extends tr{static{s(this,"UnsupportedFunctionalityError")}constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:nz,message:e}),this[iz]=!0,this.functionality=t}static isInstance(t){return tr.hasMarker(t,oz)}};iz=aee;function sz(t){let e,r,n,o,i,a,c;return l(),{feed:d,reset:l};function l(){e=!0,r="",n=0,o=-1,i=void 0,a=void 0,c=""}s(l,"reset");function d(m){r=r?r+m:m,e&&cee(r)&&(r=r.slice(az.length)),e=!1;let h=r.length,y=0,g=!1;for(;y<h;){g&&(r[y]===`
`&&++y,g=!1);let f=-1,_=o,w;for(let b=n;f<0&&b<h;++b)w=r[b],w===":"&&_<0?_=b-y:w==="\r"?(g=!0,f=b-y):w===`
`&&(f=b-y);if(f<0){n=h-y,o=_;break}else n=0,o=-1;p(r,y,_,f),y+=f+1}y===h?r="":y>0&&(r=r.slice(y))}s(d,"feed");function p(m,h,y,g){if(g===0){c.length>0&&(t({type:"event",id:i,event:a||void 0,data:c.slice(0,-1)}),c="",i=void 0),a=void 0;return}let f=y<0,_=m.slice(h,h+(f?g:y)),w=0;f?w=g:m[h+y+1]===" "?w=y+2:w=y+1;let b=h+w,S=g-w,k=m.slice(b,b+S).toString();if(_==="data")c+=k?"".concat(k,`
`):`
`;else if(_==="event")a=k;else if(_==="id"&&!k.includes("\0"))i=k;else if(_==="retry"){let R=parseInt(k,10);Number.isNaN(R)||t({type:"reconnect-interval",value:R})}}s(p,"parseEventStreamLine")}s(sz,"createParser");var az=[239,187,191];function cee(t){return az.every((e,r)=>t.charCodeAt(r)===e)}s(cee,"hasBom");var ns=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor(){let e;super({start(r){e=sz(n=>{n.type==="event"&&r.enqueue(n)})},transform(r){e.feed(r)}})}};function dz(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(dz,"combineHeaders");var pz=class{static{s(this,"DelayedPromise")}constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this._promise)}resolve(t){var e;this.status={type:"resolved",value:t},this._promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this._promise&&((e=this._reject)==null||e.call(this,t))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function jh(t){return Object.fromEntries([...t.headers])}s(jh,"extractResponseHeaders");var uee=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Dn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),Mh=uee();function iI(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(iI,"isAbortError");var lee=["fetch failed","failed to fetch"];function dee({error:t,url:e,requestBodyValues:r}){if(iI(t))return t;if(t instanceof TypeError&&lee.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Qe({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(dee,"handleFetchError");function pee(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(pee,"getRuntimeEnvironmentUserAgent");function mee(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(mee,"normalizeHeaders");function aI(t,...e){let r=new Headers(mee(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(aI,"withUserAgentSuffix");var fee="3.0.18";function mz({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Qr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Qr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(mz,"loadApiKey");function fz({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}s(fz,"loadOptionalSetting");var hee=/"__proto__"\s*:/,gee=/"constructor"\s*:/;function cz(t){let e=JSON.parse(t);return e===null||typeof e!="object"||hee.test(t)===!1&&gee.test(t)===!1?e:yee(e)}s(cz,"_parse");function yee(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(yee,"filter");function hz(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return cz(t)}try{return cz(t)}finally{Error.stackTraceLimit=e}}s(hz,"secureJsonParse");var Dh=Symbol.for("vercel.ai.validator");function vee(t){return{[Dh]:!0,validate:t}}s(vee,"validator");function _ee(t){return typeof t=="object"&&t!==null&&Dh in t&&t[Dh]===!0&&"validate"in t}s(_ee,"isValidator");function bee(t){return _ee(t)?t:typeof t=="function"?t():wee(t)}s(bee,"asValidator");function wee(t){return vee(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Jt({value:e,cause:r.issues})}})}s(wee,"standardSchemaValidator");async function Io({value:t,schema:e}){let r=await cI({value:t,schema:e});if(!r.success)throw Jt.wrap({value:t,cause:r.error});return r.value}s(Io,"validateTypes");async function cI({value:t,schema:e}){let r=bee(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Jt.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Jt.wrap({value:t,cause:n}),rawValue:t}}}s(cI,"safeValidateTypes");async function See({text:t,schema:e}){try{let r=hz(t);return e==null?r:Io({value:r,schema:e})}catch(r){throw Wr.isInstance(r)||Jt.isInstance(r)?r:new Wr({text:t,cause:r})}}s(See,"parseJSON");async function gz({text:t,schema:e}){try{let r=hz(t);return e==null?{success:!0,value:r,rawValue:r}:await cI({value:r,schema:e})}catch(r){return{success:!1,error:Wr.isInstance(r)?r:new Wr({text:t,cause:r}),rawValue:void 0}}}s(gz,"safeParseJSON");function xee({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new ns).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await gz({text:r,schema:e}))}}))}s(xee,"parseJsonEventStream");async function Pc({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await cI({value:e[t],schema:r});if(!n.success)throw new Dn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(Pc,"parseProviderOptions");var Tee=s(()=>globalThis.fetch,"getOriginalFetch2"),uI=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Eee({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi");var Eee=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=Tee()})=>{try{let c=await a(t,{method:"POST",headers:aI(e,`ai-sdk/provider-utils/${fee}`,pee()),body:r.content,signal:i}),l=jh(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw iI(p)||Qe.isInstance(p)?p:new Qe({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(iI(d)||Qe.isInstance(d))?d:new Qe({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw dee({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function Er({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(Er,"createProviderDefinedToolFactory");function os({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(os,"createProviderDefinedToolFactoryWithOutputSchema");async function lI(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}s(lI,"resolve");var yz=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=jh(n);if(a.trim()==="")return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await See({text:a,schema:t});return{responseHeaders:c,value:new Qe({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),vz=s(t=>async({response:e})=>{let r=jh(e);if(e.body==null)throw new Ic({});return{responseHeaders:r,value:xee({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var _z=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await gz({text:o,schema:t}),a=jh(e);if(!i.success)throw new Qe({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler");var kee=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),Iee=Symbol("Let zodToJsonSchema decide on which parser to use"),uz={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Pee=s(t=>typeof t=="string"?{...uz,name:t}:{...uz,...t},"getDefaultOptions");function Sn(){return{}}s(Sn,"parseAnyDef");function Aee(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==z.ZodAny&&(i.items=Pt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(Aee,"parseArrayDef");function Cee(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(Cee,"parseBigintDef");function Oee(){return{type:"boolean"}}s(Oee,"parseBooleanDef");function bz(t,e){return Pt(t.type._def,e)}s(bz,"parseBrandedDef");var $ee=s((t,e)=>Pt(t.innerType._def,e),"parseCatchDef");function wz(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>wz(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ree(t)}}s(wz,"parseDateDef");var Ree=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function Nee(t,e){return{...Pt(t.innerType._def,e),default:t.defaultValue()}}s(Nee,"parseDefaultDef");function Dee(t,e){return e.effectStrategy==="input"?Pt(t.schema._def,e):Sn()}s(Dee,"parseEffectsDef");function jee(t){return{type:"string",enum:Array.from(t.values)}}s(jee,"parseEnumDef");var Mee=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function zee(t,e){let r=[Pt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Pt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Mee(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(zee,"parseIntersectionDef");function Uee(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(Uee,"parseLiteralDef");var nI=void 0,oo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(nI===void 0&&(nI=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),nI),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Sz(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":io(r,"email",n.message,e);break;case"format:idn-email":io(r,"idn-email",n.message,e);break;case"pattern:zod":Xr(r,oo.email,n.message,e);break}break;case"url":io(r,"uri",n.message,e);break;case"uuid":io(r,"uuid",n.message,e);break;case"regex":Xr(r,n.regex,n.message,e);break;case"cuid":Xr(r,oo.cuid,n.message,e);break;case"cuid2":Xr(r,oo.cuid2,n.message,e);break;case"startsWith":Xr(r,RegExp(`^${oI(n.value,e)}`),n.message,e);break;case"endsWith":Xr(r,RegExp(`${oI(n.value,e)}$`),n.message,e);break;case"datetime":io(r,"date-time",n.message,e);break;case"date":io(r,"date",n.message,e);break;case"time":io(r,"time",n.message,e);break;case"duration":io(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Xr(r,RegExp(oI(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&io(r,"ipv4",n.message,e),n.version!=="v4"&&io(r,"ipv6",n.message,e);break}case"base64url":Xr(r,oo.base64url,n.message,e);break;case"jwt":Xr(r,oo.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Xr(r,oo.ipv4Cidr,n.message,e),n.version!=="v4"&&Xr(r,oo.ipv6Cidr,n.message,e);break}case"emoji":Xr(r,oo.emoji(),n.message,e);break;case"ulid":{Xr(r,oo.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{io(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Xr(r,oo.base64,n.message,e);break}}break}case"nanoid":Xr(r,oo.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(Sz,"parseStringDef");function oI(t,e){return e.patternStrategy==="escape"?qee(t):t}s(oI,"escapeLiteralCheckValue");var Lee=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function qee(t){let e="";for(let r=0;r<t.length;r++)Lee.has(t[r])||(e+="\\"),e+=t[r];return e}s(qee,"escapeNonAlphaNumeric");function io(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(io,"addFormat");function Xr(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:lz(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=lz(e,n)}s(Xr,"addPattern");function lz(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(lz,"stringifyRegExpWithFlags");function xz(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=Pt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===z.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=Sz(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===z.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===z.ZodBranded&&t.keyType._def.type._def.typeName===z.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=bz(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(xz,"parseRecordDef");function Fee(t,e){if(e.mapStrategy==="record")return xz(t,e);let r=Pt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Sn(),n=Pt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Sn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(Fee,"parseMapDef");function Bee(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Bee,"parseNativeEnumDef");function Vee(){return{not:Sn()}}s(Vee,"parseNeverDef");function Hee(){return{type:"null"}}s(Hee,"parseNullDef");var sI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Zee(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in sI&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=sI[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Jee(t,e)}s(Zee,"parseUnionDef");var Jee=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Pt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Kee(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[sI[t.innerType._def.typeName],"null"]};let r=Pt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(Kee,"parseNullableDef");function Gee(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(Gee,"parseNumberDef");function Wee(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=Xee(c),d=Pt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=Qee(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(Wee,"parseObjectDef");function Qee(t,e){if(t.catchall._def.typeName!=="ZodNever")return Pt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(Qee,"decideAdditionalProperties");function Xee(t){try{return t.isOptional()}catch{return!0}}s(Xee,"safeIsOptional");var Yee=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Pt(t.innerType._def,e);let n=Pt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Sn()},n]}:Sn()},"parseOptionalDef"),ete=s((t,e)=>{if(e.pipeStrategy==="input")return Pt(t.in._def,e);if(e.pipeStrategy==="output")return Pt(t.out._def,e);let r=Pt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Pt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function tte(t,e){return Pt(t.type._def,e)}s(tte,"parsePromiseDef");function rte(t,e){let n={type:"array",uniqueItems:!0,items:Pt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(rte,"parseSetDef");function nte(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Pt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Pt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Pt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(nte,"parseTupleDef");function ote(){return{not:Sn()}}s(ote,"parseUndefinedDef");function ite(){return Sn()}s(ite,"parseUnknownDef");var ste=s((t,e)=>Pt(t.innerType._def,e),"parseReadonlyDef"),ate=s((t,e,r)=>{switch(e){case z.ZodString:return Sz(t,r);case z.ZodNumber:return Gee(t);case z.ZodObject:return Wee(t,r);case z.ZodBigInt:return Cee(t);case z.ZodBoolean:return Oee();case z.ZodDate:return wz(t,r);case z.ZodUndefined:return ote();case z.ZodNull:return Hee();case z.ZodArray:return Aee(t,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return Zee(t,r);case z.ZodIntersection:return zee(t,r);case z.ZodTuple:return nte(t,r);case z.ZodRecord:return xz(t,r);case z.ZodLiteral:return Uee(t);case z.ZodEnum:return jee(t);case z.ZodNativeEnum:return Bee(t);case z.ZodNullable:return Kee(t,r);case z.ZodOptional:return Yee(t,r);case z.ZodMap:return Fee(t,r);case z.ZodSet:return rte(t,r);case z.ZodLazy:return()=>t.getter()._def;case z.ZodPromise:return tte(t,r);case z.ZodNaN:case z.ZodNever:return Vee();case z.ZodEffects:return Dee(t,r);case z.ZodAny:return Sn();case z.ZodUnknown:return ite();case z.ZodDefault:return Nee(t,r);case z.ZodBranded:return bz(t,r);case z.ZodReadonly:return ste(t,r);case z.ZodCatch:return $ee(t,r);case z.ZodPipeline:return ete(t,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function Pt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==Iee)return l}if(o&&!r){let l=cte(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=ate(t,t.typeName,e),c=typeof a=="function"?Pt(a(),e):a;if(c&&ute(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(Pt,"parseDef");var cte=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:kee(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Sn()):e.$refStrategy==="seen"?Sn():void 0}},"get$ref"),ute=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),lte=s(t=>{let e=Pee(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),dte=s((t,e)=>{var r;let n=lte(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=Pt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:Sn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=Pt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:Sn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),pte=dte;function mte(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Tz(()=>pte(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(mte,"zod3Schema");function fte(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Tz(()=>oi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(fte,"zod4Schema");function hte(t){return"_zod"in t}s(hte,"isZod4Schema");function ot(t,e){return hte(t)?fte(t,e):mte(t,e)}s(ot,"zodSchema");var gte=Symbol.for("vercel.ai.schema");function it(t){let e;return()=>(e==null&&(e=t()),e)}s(it,"lazySchema");function Tz(t,{validate:e}={}){return{[gte]:!0,_type:void 0,[Dh]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(Tz,"jsonSchema");var{btoa:yte,atob:q4e}=globalThis;function vte(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return yte(e)}s(vte,"convertUint8ArrayToBase64");function dI(t){return t instanceof Uint8Array?vte(t):t}s(dI,"convertToBase64");function Ez(t){return t?.replace(/\/$/,"")}s(Ez,"withoutTrailingSlash");var _te="2.0.50",bte=it(()=>ot(u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}))),kz=yz({errorSchema:bte,errorToMessage:s(t=>t.error.message,"errorToMessage")}),wte=it(()=>ot(u.object({type:u.literal("message"),id:u.string().nullish(),model:u.string().nullish(),content:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string(),citations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])).optional()}),u.object({type:u.literal("thinking"),thinking:u.string(),signature:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string(),input:u.unknown()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])),stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()}),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}))),Ste=it(()=>ot(u.discriminatedUnion("type",[u.object({type:u.literal("message_start"),message:u.object({id:u.string().nullish(),model:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()})})}),u.object({type:u.literal("content_block_start"),index:u.number(),content_block:u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("thinking"),thinking:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])}),u.object({type:u.literal("content_block_delta"),index:u.number(),delta:u.discriminatedUnion("type",[u.object({type:u.literal("input_json_delta"),partial_json:u.string()}),u.object({type:u.literal("text_delta"),text:u.string()}),u.object({type:u.literal("thinking_delta"),thinking:u.string()}),u.object({type:u.literal("signature_delta"),signature:u.string()}),u.object({type:u.literal("citations_delta"),citation:u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])})])}),u.object({type:u.literal("content_block_stop"),index:u.number()}),u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}),u.object({type:u.literal("message_delta"),delta:u.object({stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}),usage:u.looseObject({output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish()})}),u.object({type:u.literal("message_stop")}),u.object({type:u.literal("ping")})]))),xte=it(()=>ot(u.object({signature:u.string().optional(),redactedData:u.string().optional()}))),Iz=u.object({citations:u.object({enabled:u.boolean()}).optional(),title:u.string().optional(),context:u.string().optional()}),Tte=u.object({sendReasoning:u.boolean().optional(),structuredOutputMode:u.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:u.object({type:u.union([u.literal("enabled"),u.literal("disabled")]),budgetTokens:u.number().optional()}).optional(),disableParallelToolUse:u.boolean().optional(),cacheControl:u.object({type:u.literal("ephemeral"),ttl:u.union([u.literal("5m"),u.literal("1h")]).optional()}).optional(),container:u.object({id:u.string().optional(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skillId:u.string(),version:u.string().optional()})).optional()}).optional(),effort:u.enum(["low","medium","high"]).optional()}),Pz=4;function Ete(t){var e;let r=t?.anthropic;return(e=r?.cacheControl)!=null?e:r?.cache_control}s(Ete,"getCacheControl");var pI=class{static{s(this,"CacheControlValidator")}constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(t,e){let r=Ete(t);if(r){if(!e.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${e.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>Pz){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${Pz} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},kte=it(()=>ot(u.object({maxCharacters:u.number().optional()}))),Ite=it(()=>ot(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),Pte=Er({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:Ite}),Ate=s((t={})=>Pte(t),"textEditor_20250728"),Cte=it(()=>ot(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),userLocation:u.object({type:u.literal("approximate"),city:u.string().optional(),region:u.string().optional(),country:u.string().optional(),timezone:u.string().optional()}).optional()}))),Oz=it(()=>ot(u.array(u.object({url:u.string(),title:u.string(),pageAge:u.string().nullable(),encryptedContent:u.string(),type:u.literal("web_search_result")})))),Ote=it(()=>ot(u.object({query:u.string()}))),$te=os({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:Ote,outputSchema:Oz}),Rte=s((t={})=>$te(t),"webSearch_20250305"),Nte=it(()=>ot(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),citations:u.object({enabled:u.boolean()}).optional(),maxContentTokens:u.number().optional()}))),$z=it(()=>ot(u.object({type:u.literal("web_fetch_result"),url:u.string(),content:u.object({type:u.literal("document"),title:u.string(),citations:u.object({enabled:u.boolean()}).optional(),source:u.union([u.object({type:u.literal("base64"),mediaType:u.literal("application/pdf"),data:u.string()}),u.object({type:u.literal("text"),mediaType:u.literal("text/plain"),data:u.string()})])}),retrievedAt:u.string().nullable()}))),Dte=it(()=>ot(u.object({url:u.string()}))),jte=os({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:Dte,outputSchema:$z}),Mte=s((t={})=>jte(t),"webFetch_20250910");async function zte({tools:t,toolChoice:e,disableParallelToolUse:r,cacheControlValidator:n}){t=t?.length?t:void 0;let o=[],i=new Set,a=n||new pI;if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};let c=[];for(let d of t)switch(d.type){case"function":{let p=a.getCacheControl(d.providerOptions,{type:"tool definition",canCache:!0});c.push({name:d.name,description:d.description,input_schema:d.inputSchema,cache_control:p});break}case"provider-defined":{switch(d.id){case"anthropic.code_execution_20250522":{i.add("code-execution-2025-05-22"),c.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{i.add("code-execution-2025-08-25"),c.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"computer",type:"computer_20250124",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"computer",type:"computer_20241022",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await Io({value:d.args,schema:kte});c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{i.add("context-management-2025-06-27"),c.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{i.add("web-fetch-2025-09-10");let p=await Io({value:d.args,schema:Nte});c.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await Io({value:d.args,schema:Cte});c.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}default:{o.push({type:"unsupported-tool",tool:d});break}}break}default:{o.push({type:"unsupported-tool",tool:d});break}}if(e==null)return{tools:c,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:o,betas:i};let l=e.type;switch(l){case"auto":return{tools:c,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"required":return{tools:c,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};case"tool":return{tools:c,toolChoice:{type:"tool",name:e.toolName,disable_parallel_tool_use:r},toolWarnings:o,betas:i};default:{let d=l;throw new xt({functionality:`tool choice type: ${d}`})}}}s(zte,"prepareTools");var Rz=it(()=>ot(u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}))),Ute=it(()=>ot(u.object({code:u.string()}))),Lte=os({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:Ute,outputSchema:Rz}),qte=s((t={})=>Lte(t),"codeExecution_20250522"),Nz=it(()=>ot(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})]))),Fte=it(()=>ot(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution"),command:u.string()}),u.discriminatedUnion("command",[u.object({type:u.literal("text_editor_code_execution"),command:u.literal("view"),path:u.string()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("create"),path:u.string(),file_text:u.string().nullish()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()})])]))),Bte=os({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:Fte,outputSchema:Nz}),Vte=s((t={})=>Bte(t),"codeExecution_20250825");function Hte(t){if(typeof t=="string")return Buffer.from(t,"base64").toString("utf-8");if(t instanceof Uint8Array)return new TextDecoder().decode(t);throw t instanceof URL?new xt({functionality:"URL-based text documents are not supported for citations"}):new xt({functionality:`unsupported data type for text documents: ${typeof t}`})}s(Hte,"convertToString");async function Zte({prompt:t,sendReasoning:e,warnings:r,cacheControlValidator:n}){var o,i,a,c,l;let d=new Set,p=Jte(t),m=n||new pI,h,y=[];async function g(_){var w,b;let S=await Pc({provider:"anthropic",providerOptions:_,schema:Iz});return(b=(w=S?.citations)==null?void 0:w.enabled)!=null?b:!1}s(g,"shouldEnableCitations");async function f(_){let w=await Pc({provider:"anthropic",providerOptions:_,schema:Iz});return{title:w?.title,context:w?.context}}s(f,"getDocumentMetadata");for(let _=0;_<p.length;_++){let w=p[_],b=_===p.length-1,S=w.type;switch(S){case"system":{if(h!=null)throw new xt({functionality:"Multiple system messages that are separated by user/assistant messages"});h=w.messages.map(({content:k,providerOptions:R})=>({type:"text",text:k,cache_control:m.getCacheControl(R,{type:"system message",canCache:!0})}));break}case"user":{let k=[];for(let R of w.messages){let{role:O,content:C}=R;switch(O){case"user":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,j=(o=m.getCacheControl(P.providerOptions,{type:"user message part",canCache:!0}))!=null?o:N?m.getCacheControl(R.providerOptions,{type:"user message",canCache:!0}):void 0;switch(P.type){case"text":{k.push({type:"text",text:P.text,cache_control:j});break}case"file":{if(P.mediaType.startsWith("image/"))k.push({type:"image",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:P.mediaType==="image/*"?"image/jpeg":P.mediaType,data:dI(P.data)},cache_control:j});else if(P.mediaType==="application/pdf"){d.add("pdfs-2024-09-25");let W=await g(P.providerOptions),Z=await f(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"base64",media_type:"application/pdf",data:dI(P.data)},title:(i=Z.title)!=null?i:P.filename,...Z.context&&{context:Z.context},...W&&{citations:{enabled:!0}},cache_control:j})}else if(P.mediaType==="text/plain"){let W=await g(P.providerOptions),Z=await f(P.providerOptions);k.push({type:"document",source:P.data instanceof URL?{type:"url",url:P.data.toString()}:{type:"text",media_type:"text/plain",data:Hte(P.data)},title:(a=Z.title)!=null?a:P.filename,...Z.context&&{context:Z.context},...W&&{citations:{enabled:!0}},cache_control:j})}else throw new xt({functionality:`media type: ${P.mediaType}`});break}}}break}case"tool":{for(let $=0;$<C.length;$++){let P=C[$],N=$===C.length-1,j=(c=m.getCacheControl(P.providerOptions,{type:"tool result part",canCache:!0}))!=null?c:N?m.getCacheControl(R.providerOptions,{type:"tool result message",canCache:!0}):void 0,W=P.output,Z;switch(W.type){case"content":Z=W.value.map(F=>{switch(F.type){case"text":return{type:"text",text:F.text};case"media":{if(F.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:F.mediaType,data:F.data}};if(F.mediaType==="application/pdf")return d.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:F.mediaType,data:F.data}};throw new xt({functionality:`media type: ${F.mediaType}`})}}});break;case"text":case"error-text":Z=W.value;break;case"json":case"error-json":default:Z=JSON.stringify(W.value);break}k.push({type:"tool_result",tool_use_id:P.toolCallId,content:Z,is_error:W.type==="error-text"||W.type==="error-json"?!0:void 0,cache_control:j})}break}default:{let $=O;throw new Error(`Unsupported role: ${$}`)}}}y.push({role:"user",content:k});break}case"assistant":{let k=[];for(let R=0;R<w.messages.length;R++){let O=w.messages[R],C=R===w.messages.length-1,{content:$}=O;for(let P=0;P<$.length;P++){let N=$[P],j=P===$.length-1,W=(l=m.getCacheControl(N.providerOptions,{type:"assistant message part",canCache:!0}))!=null?l:j?m.getCacheControl(O.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(N.type){case"text":{k.push({type:"text",text:b&&C&&j?N.text.trim():N.text,cache_control:W});break}case"reasoning":{if(e){let Z=await Pc({provider:"anthropic",providerOptions:N.providerOptions,schema:xte});Z!=null?Z.signature!=null?(m.getCacheControl(N.providerOptions,{type:"thinking block",canCache:!1}),k.push({type:"thinking",thinking:N.text,signature:Z.signature})):Z.redactedData!=null?(m.getCacheControl(N.providerOptions,{type:"redacted thinking block",canCache:!1}),k.push({type:"redacted_thinking",data:Z.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(N.providerExecuted){N.toolName==="code_execution"&&N.input!=null&&typeof N.input=="object"&&"type"in N.input&&typeof N.input.type=="string"&&(N.input.type==="bash_code_execution"||N.input.type==="text_editor_code_execution")?k.push({type:"server_tool_use",id:N.toolCallId,name:N.input.type,input:N.input,cache_control:W}):N.toolName==="code_execution"||N.toolName==="web_fetch"||N.toolName==="web_search"?k.push({type:"server_tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:W}):r.push({type:"other",message:`provider executed tool call for tool ${N.toolName} is not supported`});break}k.push({type:"tool_use",id:N.toolCallId,name:N.toolName,input:N.input,cache_control:W});break}case"tool-result":{if(N.toolName==="code_execution"){let Z=N.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${N.toolName} is not supported`});break}if(Z.value==null||typeof Z.value!="object"||!("type"in Z.value)||typeof Z.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${N.toolName}`});break}if(Z.value.type==="code_execution_result"){let F=await Io({value:Z.value,schema:Rz});k.push({type:"code_execution_tool_result",tool_use_id:N.toolCallId,content:{type:F.type,stdout:F.stdout,stderr:F.stderr,return_code:F.return_code},cache_control:W})}else{let F=await Io({value:Z.value,schema:Nz});k.push(F.type==="bash_code_execution_result"||F.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:W,content:F}:{type:"text_editor_code_execution_tool_result",tool_use_id:N.toolCallId,cache_control:W,content:F})}break}if(N.toolName==="web_fetch"){let Z=N.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${N.toolName} is not supported`});break}let F=await Io({value:Z.value,schema:$z});k.push({type:"web_fetch_tool_result",tool_use_id:N.toolCallId,content:{type:"web_fetch_result",url:F.url,retrieved_at:F.retrievedAt,content:{type:"document",title:F.content.title,citations:F.content.citations,source:{type:F.content.source.type,media_type:F.content.source.mediaType,data:F.content.source.data}}},cache_control:W});break}if(N.toolName==="web_search"){let Z=N.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${N.toolName} is not supported`});break}let F=await Io({value:Z.value,schema:Oz});k.push({type:"web_search_tool_result",tool_use_id:N.toolCallId,content:F.map(Y=>({url:Y.url,title:Y.title,page_age:Y.pageAge,encrypted_content:Y.encryptedContent,type:Y.type})),cache_control:W});break}r.push({type:"other",message:`provider executed tool result for tool ${N.toolName} is not supported`});break}}}}y.push({role:"assistant",content:k});break}default:{let k=S;throw new Error(`content type: ${k}`)}}}return{prompt:{system:h,messages:y},betas:d}}s(Zte,"convertToAnthropicMessagesPrompt");function Jte(t){let e=[],r;for(let n of t){let{role:o}=n;switch(o){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let i=o;throw new Error(`Unsupported role: ${i}`)}}}return e}s(Jte,"groupIntoBlocks");function Az({finishReason:t,isJsonResponseFromTool:e}){switch(t){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return e?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}s(Az,"mapAnthropicStopReason");function Cz(t,e,r){var n;if(t.type!=="page_location"&&t.type!=="char_location")return;let o=e[t.document_index];if(o)return{type:"source",sourceType:"document",id:r(),mediaType:o.mediaType,title:(n=t.document_title)!=null?n:o.title,filename:o.filename,providerMetadata:{anthropic:t.type==="page_location"?{citedText:t.cited_text,startPageNumber:t.start_page_number,endPageNumber:t.end_page_number}:{citedText:t.cited_text,startCharIndex:t.start_char_index,endCharIndex:t.end_char_index}}}}s(Cz,"createCitationSource");var Kte=class{static{s(this,"AnthropicMessagesLanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:Mh}supportsUrl(t){return t.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({userSuppliedBetas:t,prompt:e,maxOutputTokens:r,temperature:n,topP:o,topK:i,frequencyPenalty:a,presencePenalty:c,stopSequences:l,responseFormat:d,seed:p,tools:m,toolChoice:h,providerOptions:y}){var g,f,_,w,b;let S=[];a!=null&&S.push({type:"unsupported-setting",setting:"frequencyPenalty"}),c!=null&&S.push({type:"unsupported-setting",setting:"presencePenalty"}),p!=null&&S.push({type:"unsupported-setting",setting:"seed"}),n!=null&&n>1?(S.push({type:"unsupported-setting",setting:"temperature",details:`${n} exceeds anthropic maximum of 1.0. clamped to 1.0`}),n=1):n!=null&&n<0&&(S.push({type:"unsupported-setting",setting:"temperature",details:`${n} is below anthropic minimum of 0. clamped to 0`}),n=0),d?.type==="json"&&(d.schema==null?S.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):m!=null&&S.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let k=await Pc({provider:"anthropic",providerOptions:y,schema:Tte}),{maxOutputTokens:R,supportsStructuredOutput:O,isKnownModel:C}=Gte(this.modelId),$=(g=k?.structuredOutputMode)!=null?g:"jsonTool",P=$==="outputFormat"||$==="auto"&&O,N=d?.type==="json"&&d.schema!=null&&!P?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema}:void 0,j=new pI,{prompt:W,betas:Z}=await Zte({prompt:e,sendReasoning:(f=k?.sendReasoning)!=null?f:!0,warnings:S,cacheControlValidator:j}),F=((_=k?.thinking)==null?void 0:_.type)==="enabled",Y=(w=k?.thinking)==null?void 0:w.budgetTokens,re=r??R,ie={model:this.modelId,max_tokens:re,temperature:n,top_k:i,top_p:o,stop_sequences:l,...F&&{thinking:{type:"enabled",budget_tokens:Y}},...k?.effort&&{output_config:{effort:k.effort}},...P&&d?.type==="json"&&d.schema!=null&&{output_format:{type:"json_schema",schema:d.schema}},...k?.container&&{container:{id:k.container.id,skills:(b=k.container.skills)==null?void 0:b.map(Oe=>({type:Oe.type,skill_id:Oe.skillId,version:Oe.version}))}},system:W.system,messages:W.messages};if(F){if(Y==null)throw new xt({functionality:"thinking requires a budget"});ie.temperature!=null&&(ie.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(ie.top_k=void 0,S.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),o!=null&&(ie.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),ie.max_tokens=re+Y}C&&ie.max_tokens>R&&(r!=null&&S.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${ie.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${R} max output tokens. The max output tokens have been limited to ${R}.`}),ie.max_tokens=R),k?.container&&k.container.skills&&k.container.skills.length>0&&(Z.add("code-execution-2025-08-25"),Z.add("skills-2025-10-02"),Z.add("files-api-2025-04-14"),m?.some(Oe=>Oe.type==="provider-defined"&&Oe.id==="anthropic.code_execution_20250825")||S.push({type:"other",message:"code execution tool is required when using skills"})),k?.effort&&Z.add("effort-2025-11-24"),P&&Z.add("structured-outputs-2025-11-13");let{tools:be,toolChoice:Te,toolWarnings:Xe,betas:Ze}=await zte(N!=null?{tools:[N],toolChoice:{type:"tool",toolName:N.name},disableParallelToolUse:!0,cacheControlValidator:j}:{tools:m??[],toolChoice:h,disableParallelToolUse:k?.disableParallelToolUse,cacheControlValidator:j}),J=j.getWarnings();return{args:{...ie,tools:be,tool_choice:Te},warnings:[...S,...Xe,...J],betas:new Set([...Z,...Ze,...t]),usesJsonResponseTool:N!=null}}async getHeaders({betas:t,headers:e}){return dz(await lI(this.config.headers),e,t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{})}async getBetasFromHeaders(t){var e,r;let o=(e=(await lI(this.config.headers))["anthropic-beta"])!=null?e:"",i=(r=t?.["anthropic-beta"])!=null?r:"";return new Set([...o.toLowerCase().split(","),...i.toLowerCase().split(",")].map(a=>a.trim()).filter(a=>a!==""))}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}extractCitationDocuments(t){let e=s(r=>{var n,o;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(n=r.providerOptions)==null?void 0:n.anthropic,a=i?.citations;return(o=a?.enabled)!=null?o:!1},"isCitationPart");return t.filter(r=>r.role==="user").flatMap(r=>r.content).filter(e).map(r=>{var n;let o=r;return{title:(n=o.filename)!=null?n:"Untitled Document",filename:o.filename,mediaType:o.mediaType}})}async doGenerate(t){var e,r,n,o,i,a,c,l;let{args:d,warnings:p,betas:m,usesJsonResponseTool:h}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),y=this.extractCitationDocuments(t.prompt),{responseHeaders:g,value:f,rawValue:_}=await uI({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:m,headers:t.headers}),body:this.transformRequestBody(d),failedResponseHandler:kz,successfulResponseHandler:_z(wte),abortSignal:t.abortSignal,fetch:this.config.fetch}),w=[];for(let b of f.content)switch(b.type){case"text":{if(!h&&(w.push({type:"text",text:b.text}),b.citations))for(let S of b.citations){let k=Cz(S,y,this.generateId);k&&w.push(k)}break}case"thinking":{w.push({type:"reasoning",text:b.thinking,providerMetadata:{anthropic:{signature:b.signature}}});break}case"redacted_thinking":{w.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:b.data}}});break}case"tool_use":{w.push(h?{type:"text",text:JSON.stringify(b.input)}:{type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input)});break}case"server_tool_use":{b.name==="text_editor_code_execution"||b.name==="bash_code_execution"?w.push({type:"tool-call",toolCallId:b.id,toolName:"code_execution",input:JSON.stringify({type:b.name,...b.input}),providerExecuted:!0}):(b.name==="web_search"||b.name==="code_execution"||b.name==="web_fetch")&&w.push({type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input),providerExecuted:!0});break}case"web_fetch_tool_result":{b.content.type==="web_fetch_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:b.content.url,retrievedAt:b.content.retrieved_at,content:{type:b.content.content.type,title:b.content.content.title,citations:b.content.content.citations,source:{type:b.content.content.source.type,mediaType:b.content.content.source.media_type,data:b.content.content.source.data}}},providerExecuted:!0}):b.content.type==="web_fetch_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(b.content)){w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",result:b.content.map(S=>{var k;return{url:S.url,title:S.title,pageAge:(k=S.page_age)!=null?k:null,encryptedContent:S.encrypted_content,type:S.type}}),providerExecuted:!0});for(let S of b.content)w.push({type:"source",sourceType:"url",id:this.generateId(),url:S.url,title:S.title,providerMetadata:{anthropic:{pageAge:(e=S.page_age)!=null?e:null}}})}else w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{b.content.type==="code_execution_result"?w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:{type:b.content.type,stdout:b.content.stdout,stderr:b.content.stderr,return_code:b.content.return_code},providerExecuted:!0}):b.content.type==="code_execution_tool_result_error"&&w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{w.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:b.content,providerExecuted:!0});break}}return{content:w,finishReason:Az({finishReason:f.stop_reason,isJsonResponseFromTool:h}),usage:{inputTokens:f.usage.input_tokens,outputTokens:f.usage.output_tokens,totalTokens:f.usage.input_tokens+f.usage.output_tokens,cachedInputTokens:(r=f.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:d},response:{id:(n=f.id)!=null?n:void 0,modelId:(o=f.model)!=null?o:void 0,headers:g,body:_},warnings:p,providerMetadata:{anthropic:{usage:f.usage,cacheCreationInputTokens:(i=f.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(a=f.stop_sequence)!=null?a:null,container:f.container?{expiresAt:f.container.expires_at,id:f.container.id,skills:(l=(c=f.container.skills)==null?void 0:c.map(b=>({type:b.type,skillId:b.skill_id,version:b.version})))!=null?l:null}:null}}}}async doStream(t){let{args:e,warnings:r,betas:n,usesJsonResponseTool:o}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),i=this.extractCitationDocuments(t.prompt),a={...e,stream:!0},c=this.buildRequestUrl(!0),{responseHeaders:l,value:d}=await uI({url:c,headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:kz,successfulResponseHandler:vz(Ste),abortSignal:t.abortSignal,fetch:this.config.fetch}),p="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},h={},y,g=null,f=null,_=null,w,b=this.generateId,S=!0,k,R=new pz,O=d.pipeThrough(new TransformStream({start(N){N.enqueue({type:"stream-start",warnings:r})},async flush(){R.isPending()&&R.resolve({stream:k,request:{body:a},response:{headers:l}})},transform(N,j){var W,Z,F,Y,re,ie,be,Te,Xe,Ze;if(t.includeRawChunks&&j.enqueue({type:"raw",rawValue:N.rawValue}),!N.success){j.enqueue({type:"error",error:N.error});return}if(S){if(N.value.type==="error"){R.reject(new Qe({message:N.value.error.message,url:c,requestBodyValues:a,statusCode:N.value.error.type==="overloaded_error"?529:500,responseHeaders:l,responseBody:JSON.stringify(N.value.error),isRetryable:N.value.error.type==="overloaded_error"})),j.terminate();return}S=!1,R.resolve({stream:k,request:{body:a},response:{headers:l}})}let J=N.value;switch(J.type){case"ping":return;case"content_block_start":{let Oe=J.content_block.type;switch(w=Oe,Oe){case"text":{h[J.index]={type:"text"},j.enqueue({type:"text-start",id:String(J.index)});return}case"thinking":{h[J.index]={type:"reasoning"},j.enqueue({type:"reasoning-start",id:String(J.index)});return}case"redacted_thinking":{h[J.index]={type:"reasoning"},j.enqueue({type:"reasoning-start",id:String(J.index),providerMetadata:{anthropic:{redactedData:J.content_block.data}}});return}case"tool_use":{h[J.index]=o?{type:"text"}:{type:"tool-call",toolCallId:J.content_block.id,toolName:J.content_block.name,input:"",firstDelta:!0},j.enqueue(o?{type:"text-start",id:String(J.index)}:{type:"tool-input-start",id:J.content_block.id,toolName:J.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(J.content_block.name)){h[J.index]={type:"tool-call",toolCallId:J.content_block.id,toolName:J.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let ge=J.content_block.name==="text_editor_code_execution"||J.content_block.name==="bash_code_execution"?"code_execution":J.content_block.name;j.enqueue({type:"tool-input-start",id:J.content_block.id,toolName:ge,providerExecuted:!0})}return}case"web_fetch_tool_result":{let ge=J.content_block;ge.content.type==="web_fetch_result"?j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:ge.content.url,retrievedAt:ge.content.retrieved_at,content:{type:ge.content.content.type,title:ge.content.content.title,citations:ge.content.content.citations,source:{type:ge.content.content.source.type,mediaType:ge.content.content.source.media_type,data:ge.content.content.source.data}}},providerExecuted:!0}):ge.content.type==="web_fetch_tool_result_error"&&j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let ge=J.content_block;if(Array.isArray(ge.content)){j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_search",result:ge.content.map(q=>{var Ke;return{url:q.url,title:q.title,pageAge:(Ke=q.page_age)!=null?Ke:null,encryptedContent:q.encrypted_content,type:q.type}}),providerExecuted:!0});for(let q of ge.content)j.enqueue({type:"source",sourceType:"url",id:b(),url:q.url,title:q.title,providerMetadata:{anthropic:{pageAge:(W=q.page_age)!=null?W:null}}})}else j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let ge=J.content_block;ge.content.type==="code_execution_result"?j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",result:{type:ge.content.type,stdout:ge.content.stdout,stderr:ge.content.stderr,return_code:ge.content.return_code},providerExecuted:!0}):ge.content.type==="code_execution_tool_result_error"&&j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:ge.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let ge=J.content_block;j.enqueue({type:"tool-result",toolCallId:ge.tool_use_id,toolName:"code_execution",result:ge.content,providerExecuted:!0});return}default:{let ge=Oe;throw new Error(`Unsupported content block type: ${ge}`)}}}case"content_block_stop":{if(h[J.index]!=null){let Oe=h[J.index];switch(Oe.type){case"text":{j.enqueue({type:"text-end",id:String(J.index)});break}case"reasoning":{j.enqueue({type:"reasoning-end",id:String(J.index)});break}case"tool-call":if(!o){j.enqueue({type:"tool-input-end",id:Oe.toolCallId});let ge=Oe.toolName==="text_editor_code_execution"||Oe.toolName==="bash_code_execution"?"code_execution":Oe.toolName;j.enqueue({type:"tool-call",toolCallId:Oe.toolCallId,toolName:ge,input:Oe.input,providerExecuted:Oe.providerExecuted})}break}delete h[J.index]}w=void 0;return}case"content_block_delta":{let Oe=J.delta.type;switch(Oe){case"text_delta":{if(o)return;j.enqueue({type:"text-delta",id:String(J.index),delta:J.delta.text});return}case"thinking_delta":{j.enqueue({type:"reasoning-delta",id:String(J.index),delta:J.delta.thinking});return}case"signature_delta":{w==="thinking"&&j.enqueue({type:"reasoning-delta",id:String(J.index),delta:"",providerMetadata:{anthropic:{signature:J.delta.signature}}});return}case"input_json_delta":{let ge=h[J.index],q=J.delta.partial_json;if(q.length===0)return;if(o){if(ge?.type!=="text")return;j.enqueue({type:"text-delta",id:String(J.index),delta:q})}else{if(ge?.type!=="tool-call")return;ge.firstDelta&&(ge.toolName==="bash_code_execution"||ge.toolName==="text_editor_code_execution")&&(q=`{"type": "${ge.toolName}",${q.substring(1)}`),j.enqueue({type:"tool-input-delta",id:ge.toolCallId,delta:q}),ge.input+=q,ge.firstDelta=!1}return}case"citations_delta":{let ge=J.delta.citation,q=Cz(ge,i,b);q&&j.enqueue(q);return}default:{let ge=Oe;throw new Error(`Unsupported delta type: ${ge}`)}}}case"message_start":{m.inputTokens=J.message.usage.input_tokens,m.cachedInputTokens=(Z=J.message.usage.cache_read_input_tokens)!=null?Z:void 0,y={...J.message.usage},g=(F=J.message.usage.cache_creation_input_tokens)!=null?F:null,j.enqueue({type:"response-metadata",id:(Y=J.message.id)!=null?Y:void 0,modelId:(re=J.message.model)!=null?re:void 0});return}case"message_delta":{m.outputTokens=J.usage.output_tokens,m.totalTokens=((ie=m.inputTokens)!=null?ie:0)+((be=J.usage.output_tokens)!=null?be:0),p=Az({finishReason:J.delta.stop_reason,isJsonResponseFromTool:o}),f=(Te=J.delta.stop_sequence)!=null?Te:null,_=J.delta.container!=null?{expiresAt:J.delta.container.expires_at,id:J.delta.container.id,skills:(Ze=(Xe=J.delta.container.skills)==null?void 0:Xe.map(Oe=>({type:Oe.type,skillId:Oe.skill_id,version:Oe.version})))!=null?Ze:null}:null,y={...y,...J.usage};return}case"message_stop":{j.enqueue({type:"finish",finishReason:p,usage:m,providerMetadata:{anthropic:{usage:y??null,cacheCreationInputTokens:g,stopSequence:f,container:_}}});return}case"error":{j.enqueue({type:"error",error:J.error});return}default:{let Oe=J;throw new Error(`Unsupported chunk type: ${Oe}`)}}}})),[C,$]=O.tee();k=$;let P=C.getReader();return(async()=>{try{let{done:N}=await P.read();N||await P.cancel()}catch{try{await P.cancel()}catch{}}finally{P.releaseLock()}})(),R.promise}};function Gte(t){return t.includes("claude-sonnet-4-5")||t.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-sonnet-4-")||t.includes("claude-3-7-sonnet")||t.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}s(Gte,"getModelCapabilities");var Wte=it(()=>ot(u.object({command:u.string(),restart:u.boolean().optional()}))),Qte=Er({id:"anthropic.bash_20241022",name:"bash",inputSchema:Wte}),Xte=it(()=>ot(u.object({command:u.string(),restart:u.boolean().optional()}))),Yte=Er({id:"anthropic.bash_20250124",name:"bash",inputSchema:Xte}),ere=it(()=>ot(u.object({action:u.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:u.array(u.number().int()).optional(),text:u.string().optional()}))),tre=Er({id:"anthropic.computer_20241022",name:"computer",inputSchema:ere}),rre=it(()=>ot(u.object({action:u.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),duration:u.number().optional(),scroll_amount:u.number().optional(),scroll_direction:u.enum(["up","down","left","right"]).optional(),start_coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),text:u.string().optional()}))),nre=Er({id:"anthropic.computer_20250124",name:"computer",inputSchema:rre}),ore=it(()=>ot(u.discriminatedUnion("command",[u.object({command:u.literal("view"),path:u.string(),view_range:u.tuple([u.number(),u.number()]).optional()}),u.object({command:u.literal("create"),path:u.string(),file_text:u.string()}),u.object({command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()}),u.object({command:u.literal("insert"),path:u.string(),insert_line:u.number(),insert_text:u.string()}),u.object({command:u.literal("delete"),path:u.string()}),u.object({command:u.literal("rename"),old_path:u.string(),new_path:u.string()})]))),ire=Er({id:"anthropic.memory_20250818",name:"memory",inputSchema:ore}),sre=it(()=>ot(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),are=Er({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:sre}),cre=it(()=>ot(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),ure=Er({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:cre}),lre=it(()=>ot(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),dre=Er({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:lre}),pre={bash_20241022:Qte,bash_20250124:Yte,codeExecution_20250522:qte,codeExecution_20250825:Vte,computer_20241022:tre,computer_20250124:nre,memory_20250818:ire,textEditor_20241022:are,textEditor_20250124:ure,textEditor_20250429:dre,textEditor_20250728:Ate,webFetch_20250910:Mte,webSearch_20250305:Rte};function mre(t={}){var e,r;let n=(e=Ez(fz({settingValue:t.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?e:"https://api.anthropic.com/v1",o=(r=t.name)!=null?r:"anthropic.messages",i=s(()=>aI({"anthropic-version":"2023-06-01","x-api-key":mz({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers},`ai-sdk/anthropic/${_te}`),"getHeaders"),a=s(l=>{var d;return new Kte(l,{provider:o,baseURL:n,headers:i,fetch:t.fetch,generateId:(d=t.generateId)!=null?d:Mh,supportedUrls:s(()=>({"image/*":[/^https?:\/\/.*$/]}),"supportedUrls")})},"createChatModel"),c=s(function(l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return a(l)},"provider");return c.languageModel=a,c.chat=a,c.messages=a,c.textEmbeddingModel=l=>{throw new tI({modelId:l,modelType:"textEmbeddingModel"})},c.imageModel=l=>{throw new tI({modelId:l,modelType:"imageModel"})},c.tools=pre,c}s(mre,"createAnthropic");var mI=mre();function Bs(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s(Bs,"combineHeaders");function Uh(t){return Object.fromEntries([...t.headers])}s(Uh,"extractResponseHeaders");var fre=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Dn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),Lh=fre();function gI(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(gI,"isAbortError");var hre=["fetch failed","failed to fetch"];function gre({error:t,url:e,requestBodyValues:r}){if(gI(t))return t;if(t instanceof TypeError&&hre.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Qe({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(gre,"handleFetchError");function yre(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(yre,"getRuntimeEnvironmentUserAgent");function vre(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(vre,"normalizeHeaders");function vI(t,...e){let r=new Headers(vre(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(vI,"withUserAgentSuffix");var _re="3.0.18";function zz({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Qr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Qr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(zz,"loadApiKey");var bre=/"__proto__"\s*:/,wre=/"constructor"\s*:/;function Dz(t){let e=JSON.parse(t);return e===null||typeof e!="object"||bre.test(t)===!1&&wre.test(t)===!1?e:Sre(e)}s(Dz,"_parse");function Sre(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(Sre,"filter");function Uz(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return Dz(t)}try{return Dz(t)}finally{Error.stackTraceLimit=e}}s(Uz,"secureJsonParse");var zh=Symbol.for("vercel.ai.validator");function xre(t){return{[zh]:!0,validate:t}}s(xre,"validator");function Tre(t){return typeof t=="object"&&t!==null&&zh in t&&t[zh]===!0&&"validate"in t}s(Tre,"isValidator");function Ere(t){return Tre(t)?t:typeof t=="function"?t():kre(t)}s(Ere,"asValidator");function kre(t){return xre(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Jt({value:e,cause:r.issues})}})}s(kre,"standardSchemaValidator");async function Ire({value:t,schema:e}){let r=await _I({value:t,schema:e});if(!r.success)throw Jt.wrap({value:t,cause:r.error});return r.value}s(Ire,"validateTypes");async function _I({value:t,schema:e}){let r=Ere(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Jt.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Jt.wrap({value:t,cause:n}),rawValue:t}}}s(_I,"safeValidateTypes");async function Pre({text:t,schema:e}){try{let r=Uz(t);return e==null?r:Ire({value:r,schema:e})}catch(r){throw Wr.isInstance(r)||Jt.isInstance(r)?r:new Wr({text:t,cause:r})}}s(Pre,"parseJSON");async function Lz({text:t,schema:e}){try{let r=Uz(t);return e==null?{success:!0,value:r,rawValue:r}:await _I({value:r,schema:e})}catch(r){return{success:!1,error:Wr.isInstance(r)?r:new Wr({text:t,cause:r}),rawValue:void 0}}}s(Lz,"safeParseJSON");function Are({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new ns).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await Lz({text:r,schema:e}))}}))}s(Are,"parseJsonEventStream");async function Ac({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await _I({value:e[t],schema:r});if(!n.success)throw new Dn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(Ac,"parseProviderOptions");var Cre=s(()=>globalThis.fetch,"getOriginalFetch2"),is=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Ore({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi");var Ore=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=Cre()})=>{try{let c=await a(t,{method:"POST",headers:vI(e,`ai-sdk/provider-utils/${_re}`,yre()),body:r.content,signal:i}),l=Uh(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw gI(p)||Qe.isInstance(p)?p:new Qe({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(gI(d)||Qe.isInstance(d))?d:new Qe({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw gre({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function ss({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(ss,"createProviderDefinedToolFactory");function qz({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(qz,"createProviderDefinedToolFactoryWithOutputSchema");async function Vs(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}s(Vs,"resolve");var Fz=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Uh(n);if(a.trim()==="")return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await Pre({text:a,schema:t});return{responseHeaders:c,value:new Qe({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),Bz=s(t=>async({response:e})=>{let r=Uh(e);if(e.body==null)throw new Ic({});return{responseHeaders:r,value:Are({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var Hs=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await Lz({text:o,schema:t}),a=Uh(e);if(!i.success)throw new Qe({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler");var $re=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),Rre=Symbol("Let zodToJsonSchema decide on which parser to use"),jz={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Nre=s(t=>typeof t=="string"?{...jz,name:t}:{...jz,...t},"getDefaultOptions");function xn(){return{}}s(xn,"parseAnyDef");function Dre(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==z.ZodAny&&(i.items=At(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(Dre,"parseArrayDef");function jre(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(jre,"parseBigintDef");function Mre(){return{type:"boolean"}}s(Mre,"parseBooleanDef");function Vz(t,e){return At(t.type._def,e)}s(Vz,"parseBrandedDef");var zre=s((t,e)=>At(t.innerType._def,e),"parseCatchDef");function Hz(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>Hz(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ure(t)}}s(Hz,"parseDateDef");var Ure=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function Lre(t,e){return{...At(t.innerType._def,e),default:t.defaultValue()}}s(Lre,"parseDefaultDef");function qre(t,e){return e.effectStrategy==="input"?At(t.schema._def,e):xn()}s(qre,"parseEffectsDef");function Fre(t){return{type:"string",enum:Array.from(t.values)}}s(Fre,"parseEnumDef");var Bre=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function Vre(t,e){let r=[At(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),At(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Bre(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(Vre,"parseIntersectionDef");function Hre(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(Hre,"parseLiteralDef");var fI=void 0,so={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(fI===void 0&&(fI=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),fI),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Zz(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":ao(r,"email",n.message,e);break;case"format:idn-email":ao(r,"idn-email",n.message,e);break;case"pattern:zod":Yr(r,so.email,n.message,e);break}break;case"url":ao(r,"uri",n.message,e);break;case"uuid":ao(r,"uuid",n.message,e);break;case"regex":Yr(r,n.regex,n.message,e);break;case"cuid":Yr(r,so.cuid,n.message,e);break;case"cuid2":Yr(r,so.cuid2,n.message,e);break;case"startsWith":Yr(r,RegExp(`^${hI(n.value,e)}`),n.message,e);break;case"endsWith":Yr(r,RegExp(`${hI(n.value,e)}$`),n.message,e);break;case"datetime":ao(r,"date-time",n.message,e);break;case"date":ao(r,"date",n.message,e);break;case"time":ao(r,"time",n.message,e);break;case"duration":ao(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Yr(r,RegExp(hI(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&ao(r,"ipv4",n.message,e),n.version!=="v4"&&ao(r,"ipv6",n.message,e);break}case"base64url":Yr(r,so.base64url,n.message,e);break;case"jwt":Yr(r,so.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Yr(r,so.ipv4Cidr,n.message,e),n.version!=="v4"&&Yr(r,so.ipv6Cidr,n.message,e);break}case"emoji":Yr(r,so.emoji(),n.message,e);break;case"ulid":{Yr(r,so.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ao(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Yr(r,so.base64,n.message,e);break}}break}case"nanoid":Yr(r,so.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(Zz,"parseStringDef");function hI(t,e){return e.patternStrategy==="escape"?Jre(t):t}s(hI,"escapeLiteralCheckValue");var Zre=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Jre(t){let e="";for(let r=0;r<t.length;r++)Zre.has(t[r])||(e+="\\"),e+=t[r];return e}s(Jre,"escapeNonAlphaNumeric");function ao(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(ao,"addFormat");function Yr(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:Mz(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=Mz(e,n)}s(Yr,"addPattern");function Mz(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(Mz,"stringifyRegExpWithFlags");function Jz(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=At(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===z.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=Zz(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===z.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===z.ZodBranded&&t.keyType._def.type._def.typeName===z.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=Vz(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(Jz,"parseRecordDef");function Kre(t,e){if(e.mapStrategy==="record")return Jz(t,e);let r=At(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||xn(),n=At(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||xn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(Kre,"parseMapDef");function Gre(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Gre,"parseNativeEnumDef");function Wre(){return{not:xn()}}s(Wre,"parseNeverDef");function Qre(){return{type:"null"}}s(Qre,"parseNullDef");var yI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Xre(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in yI&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=yI[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Yre(t,e)}s(Xre,"parseUnionDef");var Yre=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>At(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function ene(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[yI[t.innerType._def.typeName],"null"]};let r=At(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(ene,"parseNullableDef");function tne(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(tne,"parseNumberDef");function rne(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=one(c),d=At(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=nne(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(rne,"parseObjectDef");function nne(t,e){if(t.catchall._def.typeName!=="ZodNever")return At(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(nne,"decideAdditionalProperties");function one(t){try{return t.isOptional()}catch{return!0}}s(one,"safeIsOptional");var ine=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return At(t.innerType._def,e);let n=At(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:xn()},n]}:xn()},"parseOptionalDef"),sne=s((t,e)=>{if(e.pipeStrategy==="input")return At(t.in._def,e);if(e.pipeStrategy==="output")return At(t.out._def,e);let r=At(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=At(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function ane(t,e){return At(t.type._def,e)}s(ane,"parsePromiseDef");function cne(t,e){let n={type:"array",uniqueItems:!0,items:At(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(cne,"parseSetDef");function une(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>At(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:At(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>At(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(une,"parseTupleDef");function lne(){return{not:xn()}}s(lne,"parseUndefinedDef");function dne(){return xn()}s(dne,"parseUnknownDef");var pne=s((t,e)=>At(t.innerType._def,e),"parseReadonlyDef"),mne=s((t,e,r)=>{switch(e){case z.ZodString:return Zz(t,r);case z.ZodNumber:return tne(t);case z.ZodObject:return rne(t,r);case z.ZodBigInt:return jre(t);case z.ZodBoolean:return Mre();case z.ZodDate:return Hz(t,r);case z.ZodUndefined:return lne();case z.ZodNull:return Qre();case z.ZodArray:return Dre(t,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return Xre(t,r);case z.ZodIntersection:return Vre(t,r);case z.ZodTuple:return une(t,r);case z.ZodRecord:return Jz(t,r);case z.ZodLiteral:return Hre(t);case z.ZodEnum:return Fre(t);case z.ZodNativeEnum:return Gre(t);case z.ZodNullable:return ene(t,r);case z.ZodOptional:return ine(t,r);case z.ZodMap:return Kre(t,r);case z.ZodSet:return cne(t,r);case z.ZodLazy:return()=>t.getter()._def;case z.ZodPromise:return ane(t,r);case z.ZodNaN:case z.ZodNever:return Wre();case z.ZodEffects:return qre(t,r);case z.ZodAny:return xn();case z.ZodUnknown:return dne();case z.ZodDefault:return Lre(t,r);case z.ZodBranded:return Vz(t,r);case z.ZodReadonly:return pne(t,r);case z.ZodCatch:return zre(t,r);case z.ZodPipeline:return sne(t,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function At(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==Rre)return l}if(o&&!r){let l=fne(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=mne(t,t.typeName,e),c=typeof a=="function"?At(a(),e):a;if(c&&hne(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(At,"parseDef");var fne=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:$re(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),xn()):e.$refStrategy==="seen"?xn():void 0}},"get$ref"),hne=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),gne=s(t=>{let e=Nre(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),yne=s((t,e)=>{var r;let n=gne(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=At(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:xn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=At(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:xn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),vne=yne;function _ne(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Kz(()=>vne(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(_ne,"zod3Schema");function bne(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Kz(()=>oi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(bne,"zod4Schema");function wne(t){return"_zod"in t}s(wne,"isZod4Schema");function pr(t,e){return wne(t)?bne(t,e):_ne(t,e)}s(pr,"zodSchema");var Sne=Symbol.for("vercel.ai.schema");function mr(t){let e;return()=>(e==null&&(e=t()),e)}s(mr,"lazySchema");function Kz(t,{validate:e}={}){return{[Sne]:!0,_type:void 0,[zh]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(Kz,"jsonSchema");var{btoa:xne,atob:Gqe}=globalThis;function Tne(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return xne(e)}s(Tne,"convertUint8ArrayToBase64");function bI(t){return t instanceof Uint8Array?Tne(t):t}s(bI,"convertToBase64");function Gz(t){return t?.replace(/\/$/,"")}s(Gz,"withoutTrailingSlash");var Ene="2.0.44",kne=mr(()=>pr(u.object({error:u.object({code:u.number().nullable(),message:u.string(),status:u.string()})}))),Ad=Fz({errorSchema:kne,errorToMessage:s(t=>t.error.message,"errorToMessage")}),Ine=mr(()=>pr(u.object({outputDimensionality:u.number().optional(),taskType:u.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),Pne=class{static{s(this,"GoogleGenerativeAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){let o=await Ac({provider:"google",providerOptions:n,schema:Ine});if(t.length>this.maxEmbeddingsPerCall)throw new Nh({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=Bs(await Vs(this.config.headers),e);if(t.length===1){let{responseHeaders:d,value:p,rawValue:m}=await is({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:t[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:Ad,successfulResponseHandler:Hs(Cne),abortSignal:r,fetch:this.config.fetch});return{embeddings:[p.embedding.values],usage:void 0,response:{headers:d,body:m}}}let{responseHeaders:a,value:c,rawValue:l}=await is({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:t.map(d=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:d}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:Ad,successfulResponseHandler:Hs(Ane),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.embeddings.map(d=>d.values),usage:void 0,response:{headers:a,body:l}}}},Ane=mr(()=>pr(u.object({embeddings:u.array(u.object({values:u.array(u.number())}))}))),Cne=mr(()=>pr(u.object({embedding:u.object({values:u.array(u.number())})})));function Po(t){if(t==null||One(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:o,items:i,allOf:a,anyOf:c,oneOf:l,format:d,const:p,minLength:m,enum:h}=t,y={};if(r&&(y.description=r),n&&(y.required=n),d&&(y.format=d),p!==void 0&&(y.enum=[p]),e)if(Array.isArray(e)){let g=e.includes("null"),f=e.filter(_=>_!=="null");f.length===0?y.type="null":(y.anyOf=f.map(_=>({type:_})),g&&(y.nullable=!0))}else y.type=e;if(h!==void 0&&(y.enum=h),o!=null&&(y.properties=Object.entries(o).reduce((g,[f,_])=>(g[f]=Po(_),g),{})),i&&(y.items=Array.isArray(i)?i.map(Po):Po(i)),a&&(y.allOf=a.map(Po)),c)if(c.some(g=>typeof g=="object"&&g?.type==="null")){let g=c.filter(f=>!(typeof f=="object"&&f?.type==="null"));if(g.length===1){let f=Po(g[0]);typeof f=="object"&&(y.nullable=!0,Object.assign(y,f))}else y.anyOf=g.map(Po),y.nullable=!0}else y.anyOf=c.map(Po);return l&&(y.oneOf=l.map(Po)),m!==void 0&&(y.minLength=m),y}s(Po,"convertJSONSchemaToOpenAPISchema");function One(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)&&!t.additionalProperties}s(One,"isEmptyObjectSchema");function $ne(t,e){var r;let n=[],o=[],i=!0,a=(r=e?.isGemmaModel)!=null?r:!1;for(let{role:c,content:l}of t)switch(c){case"system":{if(!i)throw new xt({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:l});break}case"user":{i=!1;let d=[];for(let p of l)switch(p.type){case"text":{d.push({text:p.text});break}case"file":{let m=p.mediaType==="image/*"?"image/jpeg":p.mediaType;d.push(p.data instanceof URL?{fileData:{mimeType:m,fileUri:p.data.toString()}}:{inlineData:{mimeType:m,data:bI(p.data)}});break}}o.push({role:"user",parts:d});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(d=>{var p,m,h;let y=((m=(p=d.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature)!=null?String((h=d.providerOptions.google)==null?void 0:h.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:y};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:y};case"file":{if(d.mediaType!=="image/png")throw new xt({functionality:"Only PNG images are supported in assistant messages"});if(d.data instanceof URL)throw new xt({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:bI(d.data)}}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:y}}}).filter(d=>d!==void 0)});break}case"tool":{i=!1;let d=[];for(let p of l){let m=p.output;if(m.type==="content")for(let h of m.value)switch(h.type){case"text":d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:h.text}}});break;case"media":d.push({inlineData:{mimeType:h.mediaType,data:h.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(h)});break}else d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:m.value}}})}o.push({role:"user",parts:d});break}}if(a&&n.length>0&&o.length>0&&o[0].role==="user"){let c=n.map(l=>l.text).join(`

`);o[0].parts.unshift({text:c+`

`})}return{systemInstruction:n.length>0&&!a?{parts:n}:void 0,contents:o}}s($ne,"convertToGoogleGenerativeAIMessages");function Wz(t){return t.includes("/")?t:`models/${t}`}s(Wz,"getModelPath");var Rne=mr(()=>pr(u.object({responseModalities:u.array(u.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:u.object({thinkingBudget:u.number().optional(),includeThoughts:u.boolean().optional(),thinkingLevel:u.enum(["low","medium","high"]).optional()}).optional(),cachedContent:u.string().optional(),structuredOutputs:u.boolean().optional(),safetySettings:u.array(u.object({category:u.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:u.boolean().optional(),labels:u.record(u.string(),u.string()).optional(),mediaResolution:u.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:u.object({aspectRatio:u.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:u.enum(["1K","2K","4K"]).optional()}).optional()})));function Nne({tools:t,toolChoice:e,modelId:r}){var n;t=t?.length?t:void 0;let o=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(y=>y===r),a=r.includes("gemini-2")||r.includes("gemini-3")||i,c=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),l=r.includes("gemini-2.5");if(t==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let d=t.some(y=>y.type==="function"),p=t.some(y=>y.type==="provider-defined");if(d&&p){let y=t.filter(g=>g.type==="function");o.push({type:"unsupported-tool",tool:t.find(g=>g.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${y.map(g=>g.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(p){let y=[];return t.filter(f=>f.type==="provider-defined").forEach(f=>{switch(f.id){case"google.google_search":a?y.push({googleSearch:{}}):c?y.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:f.args.mode,dynamicThreshold:f.args.dynamicThreshold}}}):y.push({googleSearchRetrieval:{}});break;case"google.url_context":a?y.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:f,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":a?y.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:f,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?y.push({fileSearch:{...f.args}}):o.push({type:"unsupported-tool",tool:f,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":a?y.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:f.args.ragCorpus},similarity_top_k:f.args.topK}}}):o.push({type:"unsupported-tool",tool:f,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:f});break}}),{tools:y.length>0?y:void 0,toolConfig:void 0,toolWarnings:o}}let m=[];for(let y of t)switch(y.type){case"function":m.push({name:y.name,description:(n=y.description)!=null?n:"",parameters:Po(y.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:y});break}if(e==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:o};let h=e.type;switch(h){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[e.toolName]}},toolWarnings:o};default:{let y=h;throw new xt({functionality:`tool choice type: ${y}`})}}}s(Nne,"prepareTools");function Qz({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}s(Qz,"mapGoogleGenerativeAIFinishReason");var Dne=class{static{s(this,"GoogleGenerativeAILanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:Lh}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y;let g=[],f=await Ac({provider:"google",providerOptions:h,schema:Rne});p?.some(O=>O.type==="provider-defined"&&O.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&g.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let _=this.modelId.toLowerCase().startsWith("gemma-"),{contents:w,systemInstruction:b}=$ne(t,{isGemmaModel:_}),{tools:S,toolConfig:k,toolWarnings:R}=Nne({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:e,temperature:r,topK:o,topP:n,frequencyPenalty:i,presencePenalty:a,stopSequences:c,seed:d,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=f?.structuredOutputs)==null||y)?Po(l.schema):void 0,...f?.audioTimestamp&&{audioTimestamp:f.audioTimestamp},responseModalities:f?.responseModalities,thinkingConfig:f?.thinkingConfig,...f?.imageConfig&&{imageConfig:f.imageConfig},...f?.mediaResolution&&{mediaResolution:f.mediaResolution}},contents:w,systemInstruction:_?void 0:b,safetySettings:f?.safetySettings,tools:S,toolConfig:k,cachedContent:f?.cachedContent,labels:f?.labels},warnings:[...g,...R]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y;let{args:g,warnings:f}=await this.getArgs(t),_=JSON.stringify(g),w=Bs(await Vs(this.config.headers),t.headers),{responseHeaders:b,value:S,rawValue:k}=await is({url:`${this.config.baseURL}/${Wz(this.modelId)}:generateContent`,headers:w,body:g,failedResponseHandler:Ad,successfulResponseHandler:Hs(Mne),abortSignal:t.abortSignal,fetch:this.config.fetch}),R=S.candidates[0],O=[],C=(r=(e=R.content)==null?void 0:e.parts)!=null?r:[],$=S.usageMetadata,P;for(let j of C)if("executableCode"in j&&((n=j.executableCode)!=null&&n.code)){let W=this.config.generateId();P=W,O.push({type:"tool-call",toolCallId:W,toolName:"code_execution",input:JSON.stringify(j.executableCode),providerExecuted:!0})}else"codeExecutionResult"in j&&j.codeExecutionResult?(O.push({type:"tool-result",toolCallId:P,toolName:"code_execution",result:{outcome:j.codeExecutionResult.outcome,output:j.codeExecutionResult.output},providerExecuted:!0}),P=void 0):"text"in j&&j.text!=null&&j.text.length>0?O.push({type:j.thought===!0?"reasoning":"text",text:j.text,providerMetadata:j.thoughtSignature?{google:{thoughtSignature:j.thoughtSignature}}:void 0}):"functionCall"in j?O.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:j.functionCall.name,input:JSON.stringify(j.functionCall.args),providerMetadata:j.thoughtSignature?{google:{thoughtSignature:j.thoughtSignature}}:void 0}):"inlineData"in j&&O.push({type:"file",data:j.inlineData.data,mediaType:j.inlineData.mimeType});let N=(o=Xz({groundingMetadata:R.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(let j of N)O.push(j);return{content:O,finishReason:Qz({finishReason:R.finishReason,hasToolCalls:O.some(j=>j.type==="tool-call")}),usage:{inputTokens:(i=$?.promptTokenCount)!=null?i:void 0,outputTokens:(a=$?.candidatesTokenCount)!=null?a:void 0,totalTokens:(c=$?.totalTokenCount)!=null?c:void 0,reasoningTokens:(l=$?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(d=$?.cachedContentTokenCount)!=null?d:void 0},warnings:f,providerMetadata:{google:{promptFeedback:(p=S.promptFeedback)!=null?p:null,groundingMetadata:(m=R.groundingMetadata)!=null?m:null,urlContextMetadata:(h=R.urlContextMetadata)!=null?h:null,safetyRatings:(y=R.safetyRatings)!=null?y:null,usageMetadata:$??null}},request:{body:_},response:{headers:b,body:k}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),o=Bs(await Vs(this.config.headers),t.headers),{responseHeaders:i,value:a}=await is({url:`${this.config.baseURL}/${Wz(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:e,failedResponseHandler:Ad,successfulResponseHandler:Bz(zne),abortSignal:t.abortSignal,fetch:this.config.fetch}),c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d,p=this.config.generateId,m=!1,h=null,y=null,g=0,f=new Set,_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var S,k,R,O,C,$,P,N,j,W,Z,F;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){b.enqueue({type:"error",error:w.error});return}let Y=w.value,re=Y.usageMetadata;re!=null&&(l.inputTokens=(S=re.promptTokenCount)!=null?S:void 0,l.outputTokens=(k=re.candidatesTokenCount)!=null?k:void 0,l.totalTokens=(R=re.totalTokenCount)!=null?R:void 0,l.reasoningTokens=(O=re.thoughtsTokenCount)!=null?O:void 0,l.cachedInputTokens=(C=re.cachedContentTokenCount)!=null?C:void 0);let ie=($=Y.candidates)==null?void 0:$[0];if(ie==null)return;let be=ie.content,Te=Xz({groundingMetadata:ie.groundingMetadata,generateId:p});if(Te!=null)for(let Xe of Te)Xe.sourceType==="url"&&!f.has(Xe.url)&&(f.add(Xe.url),b.enqueue(Xe));if(be!=null){let Xe=(P=be.parts)!=null?P:[];for(let J of Xe)if("executableCode"in J&&((N=J.executableCode)!=null&&N.code)){let Oe=p();_=Oe,b.enqueue({type:"tool-call",toolCallId:Oe,toolName:"code_execution",input:JSON.stringify(J.executableCode),providerExecuted:!0}),m=!0}else if("codeExecutionResult"in J&&J.codeExecutionResult){let Oe=_;Oe&&(b.enqueue({type:"tool-result",toolCallId:Oe,toolName:"code_execution",result:{outcome:J.codeExecutionResult.outcome,output:J.codeExecutionResult.output},providerExecuted:!0}),_=void 0)}else"text"in J&&J.text!=null&&J.text.length>0?J.thought===!0?(h!==null&&(b.enqueue({type:"text-end",id:h}),h=null),y===null&&(y=String(g++),b.enqueue({type:"reasoning-start",id:y,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})),b.enqueue({type:"reasoning-delta",id:y,delta:J.text,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})):(y!==null&&(b.enqueue({type:"reasoning-end",id:y}),y=null),h===null&&(h=String(g++),b.enqueue({type:"text-start",id:h,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})),b.enqueue({type:"text-delta",id:h,delta:J.text,providerMetadata:J.thoughtSignature?{google:{thoughtSignature:J.thoughtSignature}}:void 0})):"inlineData"in J&&b.enqueue({type:"file",mediaType:J.inlineData.mimeType,data:J.inlineData.data});let Ze=jne({parts:be.parts,generateId:p});if(Ze!=null)for(let J of Ze)b.enqueue({type:"tool-input-start",id:J.toolCallId,toolName:J.toolName,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-input-delta",id:J.toolCallId,delta:J.args,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-input-end",id:J.toolCallId,providerMetadata:J.providerMetadata}),b.enqueue({type:"tool-call",toolCallId:J.toolCallId,toolName:J.toolName,input:J.args,providerMetadata:J.providerMetadata}),m=!0}ie.finishReason!=null&&(c=Qz({finishReason:ie.finishReason,hasToolCalls:m}),d={google:{promptFeedback:(j=Y.promptFeedback)!=null?j:null,groundingMetadata:(W=ie.groundingMetadata)!=null?W:null,urlContextMetadata:(Z=ie.urlContextMetadata)!=null?Z:null,safetyRatings:(F=ie.safetyRatings)!=null?F:null}},re!=null&&(d.google.usageMetadata=re))},flush(w){h!==null&&w.enqueue({type:"text-end",id:h}),y!==null&&w.enqueue({type:"reasoning-end",id:y}),w.enqueue({type:"finish",finishReason:c,usage:l,providerMetadata:d})}})),response:{headers:i},request:{body:n}}}};function jne({parts:t,generateId:e}){let r=t?.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({type:"tool-call",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args),providerMetadata:n.thoughtSignature?{google:{thoughtSignature:n.thoughtSignature}}:void 0}))}s(jne,"getToolCallsFromParts");function Xz({groundingMetadata:t,generateId:e}){var r,n,o,i;if(!t?.groundingChunks)return;let a=[];for(let c of t.groundingChunks)if(c.web!=null)a.push({type:"source",sourceType:"url",id:e(),url:c.web.uri,title:(r=c.web.title)!=null?r:void 0});else if(c.retrievedContext!=null){let l=c.retrievedContext.uri,d=c.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))a.push({type:"source",sourceType:"url",id:e(),url:l,title:(n=c.retrievedContext.title)!=null?n:void 0});else if(l){let p=(o=c.retrievedContext.title)!=null?o:"Unknown Document",m="application/octet-stream",h;l.endsWith(".pdf")?(m="application/pdf",h=l.split("/").pop()):l.endsWith(".txt")?(m="text/plain",h=l.split("/").pop()):l.endsWith(".docx")?(m="application/vnd.openxmlformats-officedocument.wordprocessingml.document",h=l.split("/").pop()):l.endsWith(".doc")?(m="application/msword",h=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(m="text/markdown"),h=l.split("/").pop()),a.push({type:"source",sourceType:"document",id:e(),mediaType:m,title:p,filename:h})}else if(d){let p=(i=c.retrievedContext.title)!=null?i:"Unknown Document";a.push({type:"source",sourceType:"document",id:e(),mediaType:"application/octet-stream",title:p,filename:d.split("/").pop()})}}return a.length>0?a:void 0}s(Xz,"extractSources");var Yz=s(()=>u.object({webSearchQueries:u.array(u.string()).nullish(),retrievalQueries:u.array(u.string()).nullish(),searchEntryPoint:u.object({renderedContent:u.string()}).nullish(),groundingChunks:u.array(u.object({web:u.object({uri:u.string(),title:u.string().nullish()}).nullish(),retrievedContext:u.object({uri:u.string().nullish(),title:u.string().nullish(),text:u.string().nullish(),fileSearchStore:u.string().nullish()}).nullish()})).nullish(),groundingSupports:u.array(u.object({segment:u.object({startIndex:u.number().nullish(),endIndex:u.number().nullish(),text:u.string().nullish()}),segment_text:u.string().nullish(),groundingChunkIndices:u.array(u.number()).nullish(),supportChunkIndices:u.array(u.number()).nullish(),confidenceScores:u.array(u.number()).nullish(),confidenceScore:u.array(u.number()).nullish()})).nullish(),retrievalMetadata:u.union([u.object({webDynamicRetrievalScore:u.number()}),u.object({})]).nullish()}),"getGroundingMetadataSchema"),eU=s(()=>u.object({parts:u.array(u.union([u.object({functionCall:u.object({name:u.string(),args:u.unknown()}),thoughtSignature:u.string().nullish()}),u.object({inlineData:u.object({mimeType:u.string(),data:u.string()})}),u.object({executableCode:u.object({language:u.string(),code:u.string()}).nullish(),codeExecutionResult:u.object({outcome:u.string(),output:u.string()}).nullish(),text:u.string().nullish(),thought:u.boolean().nullish(),thoughtSignature:u.string().nullish()})])).nullish()}),"getContentSchema"),qh=s(()=>u.object({category:u.string().nullish(),probability:u.string().nullish(),probabilityScore:u.number().nullish(),severity:u.string().nullish(),severityScore:u.number().nullish(),blocked:u.boolean().nullish()}),"getSafetyRatingSchema"),tU=u.object({cachedContentTokenCount:u.number().nullish(),thoughtsTokenCount:u.number().nullish(),promptTokenCount:u.number().nullish(),candidatesTokenCount:u.number().nullish(),totalTokenCount:u.number().nullish(),trafficType:u.string().nullish()}),rU=s(()=>u.object({urlMetadata:u.array(u.object({retrievedUrl:u.string(),urlRetrievalStatus:u.string()}))}),"getUrlContextMetadataSchema"),Mne=mr(()=>pr(u.object({candidates:u.array(u.object({content:eU().nullish().or(u.object({}).strict()),finishReason:u.string().nullish(),safetyRatings:u.array(qh()).nullish(),groundingMetadata:Yz().nullish(),urlContextMetadata:rU().nullish()})),usageMetadata:tU.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(qh()).nullish()}).nullish()}))),zne=mr(()=>pr(u.object({candidates:u.array(u.object({content:eU().nullish(),finishReason:u.string().nullish(),safetyRatings:u.array(qh()).nullish(),groundingMetadata:Yz().nullish(),urlContextMetadata:rU().nullish()})).nullish(),usageMetadata:tU.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(qh()).nullish()}).nullish()}))),Une=qz({id:"google.code_execution",name:"code_execution",inputSchema:u.object({language:u.string().describe("The programming language of the code."),code:u.string().describe("The code to be executed.")}),outputSchema:u.object({outcome:u.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:u.string().describe("The output from the code execution.")})}),Lne=u.object({fileSearchStoreNames:u.array(u.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:u.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:u.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),qne=mr(()=>pr(Lne)),Fne=ss({id:"google.file_search",name:"file_search",inputSchema:qne}),Bne=ss({id:"google.google_search",name:"google_search",inputSchema:mr(()=>pr(u.object({mode:u.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:u.number().default(1)})))}),Vne=ss({id:"google.url_context",name:"url_context",inputSchema:mr(()=>pr(u.object({})))}),Hne=ss({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:u.object({ragCorpus:u.string(),topK:u.number().optional()})}),Zne={googleSearch:Bne,urlContext:Vne,fileSearch:Fne,codeExecution:Une,vertexRagStore:Hne},Jne=class{static{s(this,"GoogleGenerativeAIImageModel")}constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=this.settings.maxImagesPerCall)!=null?t:4}get provider(){return this.config.provider}async doGenerate(t){var e,r,n;let{prompt:o,n:i=1,size:a="1024x1024",aspectRatio:c="1:1",seed:l,providerOptions:d,headers:p,abortSignal:m}=t,h=[];a!=null&&h.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&h.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let y=await Ac({provider:"google",providerOptions:d,schema:Gne}),g=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,f={sampleCount:i};c!=null&&(f.aspectRatio=c),y&&Object.assign(f,y);let _={instances:[{prompt:o}],parameters:f},{responseHeaders:w,value:b}=await is({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Bs(await Vs(this.config.headers),p),body:_,failedResponseHandler:Ad,successfulResponseHandler:Hs(Kne),abortSignal:m,fetch:this.config.fetch});return{images:b.predictions.map(S=>S.bytesBase64Encoded),warnings:h??[],providerMetadata:{google:{images:b.predictions.map(S=>({}))}},response:{timestamp:g,modelId:this.modelId,headers:w}}}},Kne=mr(()=>pr(u.object({predictions:u.array(u.object({bytesBase64Encoded:u.string()})).default([])}))),Gne=mr(()=>pr(u.object({personGeneration:u.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:u.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Wne(t={}){var e,r;let n=(e=Gz(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",o=(r=t.name)!=null?r:"google.generative-ai",i=s(()=>vI({"x-goog-api-key":zz({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers},`ai-sdk/google/${Ene}`),"getHeaders"),a=s(p=>{var m;return new Dne(p,{provider:o,baseURL:n,headers:i,generateId:(m=t.generateId)!=null?m:Lh,supportedUrls:s(()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),"supportedUrls"),fetch:t.fetch})},"createChatModel"),c=s(p=>new Pne(p,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createEmbeddingModel"),l=s((p,m={})=>new Jne(p,m,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createImageModel"),d=s(function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(p)},"provider");return d.languageModel=a,d.chat=a,d.generativeAI=a,d.embedding=c,d.textEmbedding=c,d.textEmbeddingModel=c,d.image=l,d.imageModel=l,d.tools=Zne,d}s(Wne,"createGoogleGenerativeAI");var wI=Wne();function $r(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}s($r,"combineHeaders");function Cd(t){return Object.fromEntries([...t.headers])}s(Cd,"extractResponseHeaders");var Qne=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Dn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),lo=Qne();function TI(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}s(TI,"isAbortError");var Xne=["fetch failed","failed to fetch"];function Yne({error:t,url:e,requestBodyValues:r}){if(TI(t))return t;if(t instanceof TypeError&&Xne.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new Qe({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}s(Yne,"handleFetchError");function eoe(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}s(eoe,"getRuntimeEnvironmentUserAgent");function toe(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}s(toe,"normalizeHeaders");function kI(t,...e){let r=new Headers(toe(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}s(kI,"withUserAgentSuffix");var roe="3.0.18";function sU({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new Qr({message:`${n} API key must be a string.`});if(typeof process>"u")throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Qr({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Qr({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}s(sU,"loadApiKey");function aU({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}s(aU,"loadOptionalSetting");function cU(t){var e;let[r,n=""]=t.toLowerCase().split("/");return(e={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?e:n}s(cU,"mediaTypeToExtension");var noe=/"__proto__"\s*:/,ooe=/"constructor"\s*:/;function nU(t){let e=JSON.parse(t);return e===null||typeof e!="object"||noe.test(t)===!1&&ooe.test(t)===!1?e:ioe(e)}s(nU,"_parse");function ioe(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}s(ioe,"filter");function II(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return nU(t)}try{return nU(t)}finally{Error.stackTraceLimit=e}}s(II,"secureJsonParse");var Fh=Symbol.for("vercel.ai.validator");function soe(t){return{[Fh]:!0,validate:t}}s(soe,"validator");function aoe(t){return typeof t=="object"&&t!==null&&Fh in t&&t[Fh]===!0&&"validate"in t}s(aoe,"isValidator");function zt(t){let e;return()=>(e==null&&(e=t()),e)}s(zt,"lazyValidator");function coe(t){return aoe(t)?t:typeof t=="function"?t():uoe(t)}s(coe,"asValidator");function uoe(t){return soe(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Jt({value:e,cause:r.issues})}})}s(uoe,"standardSchemaValidator");async function Ao({value:t,schema:e}){let r=await PI({value:t,schema:e});if(!r.success)throw Jt.wrap({value:t,cause:r.error});return r.value}s(Ao,"validateTypes");async function PI({value:t,schema:e}){let r=coe(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:Jt.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:Jt.wrap({value:t,cause:n}),rawValue:t}}}s(PI,"safeValidateTypes");async function loe({text:t,schema:e}){try{let r=II(t);return e==null?r:Ao({value:r,schema:e})}catch(r){throw Wr.isInstance(r)||Jt.isInstance(r)?r:new Wr({text:t,cause:r})}}s(loe,"parseJSON");async function uU({text:t,schema:e}){try{let r=II(t);return e==null?{success:!0,value:r,rawValue:r}:await PI({value:r,schema:e})}catch(r){return{success:!1,error:Wr.isInstance(r)?r:new Wr({text:t,cause:r}),rawValue:void 0}}}s(uU,"safeParseJSON");function AI(t){try{return II(t),!0}catch{return!1}}s(AI,"isParsableJson");function doe({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new ns).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await uU({text:r,schema:e}))}}))}s(doe,"parseJsonEventStream");async function tn({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await PI({value:e[t],schema:r});if(!n.success)throw new Dn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}s(tn,"parseProviderOptions");var poe=s(()=>globalThis.fetch,"getOriginalFetch2"),rn=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>dU({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),lU=s(async({url:t,headers:e,formData:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>dU({url:t,headers:e,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postFormDataToApi"),dU=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=poe()})=>{try{let c=await a(t,{method:"POST",headers:kI(e,`ai-sdk/provider-utils/${roe}`,eoe()),body:r.content,signal:i}),l=Cd(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw TI(p)||Qe.isInstance(p)?p:new Qe({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(TI(d)||Qe.isInstance(d))?d:new Qe({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw Yne({error:c,url:t,requestBodyValues:r.values})}},"postToApi");function jn({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}s(jn,"createProviderDefinedToolFactoryWithOutputSchema");var pU=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Cd(n);if(a.trim()==="")return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await loe({text:a,schema:t});return{responseHeaders:c,value:new Qe({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new Qe({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),Cc=s(t=>async({response:e})=>{let r=Cd(e);if(e.body==null)throw new Ic({});return{responseHeaders:r,value:doe({stream:e.body,schema:t})}},"createEventSourceResponseHandler");var Mn=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await uU({text:o,schema:t}),a=Cd(e);if(!i.success)throw new Qe({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),mU=s(()=>async({response:t,url:e,requestBodyValues:r})=>{let n=Cd(t);if(!t.body)throw new Qe({message:"Response body is empty",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0});try{let o=await t.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(o)}}catch(o){throw new Qe({message:"Failed to read response as array buffer",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0,cause:o})}},"createBinaryResponseHandler");var moe=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),foe=Symbol("Let zodToJsonSchema decide on which parser to use"),oU={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},hoe=s(t=>typeof t=="string"?{...oU,name:t}:{...oU,...t},"getDefaultOptions");function Tn(){return{}}s(Tn,"parseAnyDef");function goe(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==z.ZodAny&&(i.items=Ct(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}s(goe,"parseArrayDef");function yoe(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(yoe,"parseBigintDef");function voe(){return{type:"boolean"}}s(voe,"parseBooleanDef");function fU(t,e){return Ct(t.type._def,e)}s(fU,"parseBrandedDef");var _oe=s((t,e)=>Ct(t.innerType._def,e),"parseCatchDef");function hU(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>hU(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return boe(t)}}s(hU,"parseDateDef");var boe=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");function woe(t,e){return{...Ct(t.innerType._def,e),default:t.defaultValue()}}s(woe,"parseDefaultDef");function Soe(t,e){return e.effectStrategy==="input"?Ct(t.schema._def,e):Tn()}s(Soe,"parseEffectsDef");function xoe(t){return{type:"string",enum:Array.from(t.values)}}s(xoe,"parseEnumDef");var Toe=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");function Eoe(t,e){let r=[Ct(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ct(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Toe(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}s(Eoe,"parseIntersectionDef");function koe(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}s(koe,"parseLiteralDef");var SI=void 0,co={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(SI===void 0&&(SI=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),SI),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function gU(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":uo(r,"email",n.message,e);break;case"format:idn-email":uo(r,"idn-email",n.message,e);break;case"pattern:zod":en(r,co.email,n.message,e);break}break;case"url":uo(r,"uri",n.message,e);break;case"uuid":uo(r,"uuid",n.message,e);break;case"regex":en(r,n.regex,n.message,e);break;case"cuid":en(r,co.cuid,n.message,e);break;case"cuid2":en(r,co.cuid2,n.message,e);break;case"startsWith":en(r,RegExp(`^${xI(n.value,e)}`),n.message,e);break;case"endsWith":en(r,RegExp(`${xI(n.value,e)}$`),n.message,e);break;case"datetime":uo(r,"date-time",n.message,e);break;case"date":uo(r,"date",n.message,e);break;case"time":uo(r,"time",n.message,e);break;case"duration":uo(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{en(r,RegExp(xI(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&uo(r,"ipv4",n.message,e),n.version!=="v4"&&uo(r,"ipv6",n.message,e);break}case"base64url":en(r,co.base64url,n.message,e);break;case"jwt":en(r,co.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&en(r,co.ipv4Cidr,n.message,e),n.version!=="v4"&&en(r,co.ipv6Cidr,n.message,e);break}case"emoji":en(r,co.emoji(),n.message,e);break;case"ulid":{en(r,co.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{uo(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{en(r,co.base64,n.message,e);break}}break}case"nanoid":en(r,co.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}s(gU,"parseStringDef");function xI(t,e){return e.patternStrategy==="escape"?Poe(t):t}s(xI,"escapeLiteralCheckValue");var Ioe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Poe(t){let e="";for(let r=0;r<t.length;r++)Ioe.has(t[r])||(e+="\\"),e+=t[r];return e}s(Poe,"escapeNonAlphaNumeric");function uo(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}s(uo,"addFormat");function en(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:iU(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=iU(e,n)}s(en,"addPattern");function iU(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}s(iU,"stringifyRegExpWithFlags");function yU(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=Ct(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===z.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=gU(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===z.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===z.ZodBranded&&t.keyType._def.type._def.typeName===z.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=fU(t.keyType._def,e);return{...l,propertyNames:p}}}return l}s(yU,"parseRecordDef");function Aoe(t,e){if(e.mapStrategy==="record")return yU(t,e);let r=Ct(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Tn(),n=Ct(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Tn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}s(Aoe,"parseMapDef");function Coe(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}s(Coe,"parseNativeEnumDef");function Ooe(){return{not:Tn()}}s(Ooe,"parseNeverDef");function $oe(){return{type:"null"}}s($oe,"parseNullDef");var EI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Roe(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in EI&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=EI[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Noe(t,e)}s(Roe,"parseUnionDef");var Noe=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Ct(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Doe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[EI[t.innerType._def.typeName],"null"]};let r=Ct(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}s(Doe,"parseNullableDef");function joe(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}s(joe,"parseNumberDef");function Moe(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=Uoe(c),d=Ct(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=zoe(t,e);return i!==void 0&&(r.additionalProperties=i),r}s(Moe,"parseObjectDef");function zoe(t,e){if(t.catchall._def.typeName!=="ZodNever")return Ct(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}s(zoe,"decideAdditionalProperties");function Uoe(t){try{return t.isOptional()}catch{return!0}}s(Uoe,"safeIsOptional");var Loe=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ct(t.innerType._def,e);let n=Ct(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Tn()},n]}:Tn()},"parseOptionalDef"),qoe=s((t,e)=>{if(e.pipeStrategy==="input")return Ct(t.in._def,e);if(e.pipeStrategy==="output")return Ct(t.out._def,e);let r=Ct(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Ct(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");function Foe(t,e){return Ct(t.type._def,e)}s(Foe,"parsePromiseDef");function Boe(t,e){let n={type:"array",uniqueItems:!0,items:Ct(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}s(Boe,"parseSetDef");function Voe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Ct(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Ct(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Ct(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}s(Voe,"parseTupleDef");function Hoe(){return{not:Tn()}}s(Hoe,"parseUndefinedDef");function Zoe(){return Tn()}s(Zoe,"parseUnknownDef");var Joe=s((t,e)=>Ct(t.innerType._def,e),"parseReadonlyDef"),Koe=s((t,e,r)=>{switch(e){case z.ZodString:return gU(t,r);case z.ZodNumber:return joe(t);case z.ZodObject:return Moe(t,r);case z.ZodBigInt:return yoe(t);case z.ZodBoolean:return voe();case z.ZodDate:return hU(t,r);case z.ZodUndefined:return Hoe();case z.ZodNull:return $oe();case z.ZodArray:return goe(t,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return Roe(t,r);case z.ZodIntersection:return Eoe(t,r);case z.ZodTuple:return Voe(t,r);case z.ZodRecord:return yU(t,r);case z.ZodLiteral:return koe(t);case z.ZodEnum:return xoe(t);case z.ZodNativeEnum:return Coe(t);case z.ZodNullable:return Doe(t,r);case z.ZodOptional:return Loe(t,r);case z.ZodMap:return Aoe(t,r);case z.ZodSet:return Boe(t,r);case z.ZodLazy:return()=>t.getter()._def;case z.ZodPromise:return Foe(t,r);case z.ZodNaN:case z.ZodNever:return Ooe();case z.ZodEffects:return Soe(t,r);case z.ZodAny:return Tn();case z.ZodUnknown:return Zoe();case z.ZodDefault:return woe(t,r);case z.ZodBranded:return fU(t,r);case z.ZodReadonly:return Joe(t,r);case z.ZodCatch:return _oe(t,r);case z.ZodPipeline:return qoe(t,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");function Ct(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==foe)return l}if(o&&!r){let l=Goe(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=Koe(t,t.typeName,e),c=typeof a=="function"?Ct(a(),e):a;if(c&&Woe(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}s(Ct,"parseDef");var Goe=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:moe(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Tn()):e.$refStrategy==="seen"?Tn():void 0}},"get$ref"),Woe=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),Qoe=s(t=>{let e=hoe(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),Xoe=s((t,e)=>{var r;let n=Qoe(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=Ct(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:Tn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=Ct(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:Tn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),Yoe=Xoe;function eie(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return vU(()=>Yoe(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(eie,"zod3Schema");function tie(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return vU(()=>oi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}s(tie,"zod4Schema");function rie(t){return"_zod"in t}s(rie,"isZod4Schema");function ze(t,e){return rie(t)?tie(t,e):eie(t,e)}s(ze,"zodSchema");var nie=Symbol.for("vercel.ai.schema");function rr(t){let e;return()=>(e==null&&(e=t()),e)}s(rr,"lazySchema");function vU(t,{validate:e}={}){return{[nie]:!0,_type:void 0,[Fh]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}s(vU,"jsonSchema");var{btoa:oie,atob:iie}=globalThis;function _U(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=iie(e);return Uint8Array.from(r,n=>n.codePointAt(0))}s(_U,"convertBase64ToUint8Array");function sie(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return oie(e)}s(sie,"convertUint8ArrayToBase64");function as(t){return t instanceof Uint8Array?sie(t):t}s(as,"convertToBase64");function bU(t){return t?.replace(/\/$/,"")}s(bU,"withoutTrailingSlash");var OI=u.object({error:u.object({message:u.string(),type:u.string().nullish(),param:u.any().nullish(),code:u.union([u.string(),u.number()]).nullish()})}),Co=pU({errorSchema:OI,errorToMessage:s(t=>t.error.message,"errorToMessage")});function aie({prompt:t,systemMessageMode:e="system"}){let r=[],n=[];for(let{role:o,content:i}of t)switch(o){case"system":{switch(e){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let a=e;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map((a,c)=>{var l,d,p;switch(a.type){case"text":return{type:"text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let m=a.mediaType==="image/*"?"image/jpeg":a.mediaType;return{type:"image_url",image_url:{url:a.data instanceof URL?a.data.toString():`data:${m};base64,${as(a.data)}`,detail:(d=(l=a.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(a.mediaType.startsWith("audio/")){if(a.data instanceof URL)throw new xt({functionality:"audio file parts with URLs"});switch(a.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:as(a.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:as(a.data),format:"mp3"}};default:throw new xt({functionality:`audio content parts with media type ${a.mediaType}`})}}else if(a.mediaType==="application/pdf"){if(a.data instanceof URL)throw new xt({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof a.data=="string"&&a.data.startsWith("file-")?{file_id:a.data}:{filename:(p=a.filename)!=null?p:`part-${c}.pdf`,file_data:`data:application/pdf;base64,${as(a.data)}`}}}else throw new xt({functionality:`file part media type ${a.mediaType}`})}})});break}case"assistant":{let a="",c=[];for(let l of i)switch(l.type){case"text":{a+=l.text;break}case"tool-call":{c.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}r.push({role:"assistant",content:a,tool_calls:c.length>0?c:void 0});break}case"tool":{for(let a of i){let c=a.output,l;switch(c.type){case"text":case"error-text":l=c.value;break;case"content":case"json":case"error-json":l=JSON.stringify(c.value);break}r.push({role:"tool",tool_call_id:a.toolCallId,content:l})}break}default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return{messages:r,warnings:n}}s(aie,"convertToOpenAIChatMessages");function CI({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r?new Date(r*1e3):void 0}}s(CI,"getResponseMetadata");function wU(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(wU,"mapOpenAIFinishReason");var cie=zt(()=>ze(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({message:u.object({role:u.literal("assistant").nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({id:u.string().nullish(),type:u.literal("function"),function:u.object({name:u.string(),arguments:u.string()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}),index:u.number(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}))),uie=zt(()=>ze(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({delta:u.object({role:u.enum(["assistant"]).nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({index:u.number(),id:u.string().nullish(),type:u.literal("function").nullish(),function:u.object({name:u.string().nullish(),arguments:u.string().nullish()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}).nullish(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish(),index:u.number()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}),OI]))),lie=zt(()=>ze(u.object({logitBias:u.record(u.coerce.number(),u.number()).optional(),logprobs:u.union([u.boolean(),u.number()]).optional(),parallelToolCalls:u.boolean().optional(),user:u.string().optional(),reasoningEffort:u.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:u.number().optional(),store:u.boolean().optional(),metadata:u.record(u.string().max(64),u.string().max(512)).optional(),prediction:u.record(u.string(),u.any()).optional(),structuredOutputs:u.boolean().optional(),serviceTier:u.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:u.boolean().optional(),textVerbosity:u.enum(["low","medium","high"]).optional(),promptCacheKey:u.string().optional(),promptCacheRetention:u.enum(["in_memory","24h"]).optional(),safetyIdentifier:u.string().optional()})));function die({tools:t,toolChoice:e,structuredOutputs:r,strictJsonSchema:n}){t=t?.length?t:void 0;let o=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let i=[];for(let c of t)switch(c.type){case"function":i.push({type:"function",function:{name:c.name,description:c.description,parameters:c.inputSchema,strict:r?n:void 0}});break;default:o.push({type:"unsupported-tool",tool:c});break}if(e==null)return{tools:i,toolChoice:void 0,toolWarnings:o};let a=e.type;switch(a){case"auto":case"none":case"required":return{tools:i,toolChoice:a,toolWarnings:o};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:e.toolName}},toolWarnings:o};default:{let c=a;throw new xt({functionality:`tool choice type: ${c}`})}}}s(die,"prepareChatTools");var pie=class{static{s(this,"OpenAIChatLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y,g,f,_;let w=[],b=(y=await tn({provider:"openai",providerOptions:h,schema:lie}))!=null?y:{},S=(g=b.structuredOutputs)!=null?g:!0;o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),l?.type==="json"&&l.schema!=null&&!S&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:k,warnings:R}=aie({prompt:t,systemMessageMode:hie(this.modelId)});w.push(...R);let O=(f=b.strictJsonSchema)!=null?f:!1,C={model:this.modelId,logit_bias:b.logitBias,logprobs:b.logprobs===!0||typeof b.logprobs=="number"?!0:void 0,top_logprobs:typeof b.logprobs=="number"?b.logprobs:typeof b.logprobs=="boolean"&&b.logprobs?0:void 0,user:b.user,parallel_tool_calls:b.parallelToolCalls,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,response_format:l?.type==="json"?S&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,strict:O,name:(_=l.name)!=null?_:"response",description:l.description}}:{type:"json_object"}:void 0,stop:c,seed:d,verbosity:b.textVerbosity,max_completion_tokens:b.maxCompletionTokens,store:b.store,metadata:b.metadata,prediction:b.prediction,reasoning_effort:b.reasoningEffort,service_tier:b.serviceTier,prompt_cache_key:b.promptCacheKey,prompt_cache_retention:b.promptCacheRetention,safety_identifier:b.safetyIdentifier,messages:k};CU(this.modelId)?(C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),C.top_p!=null&&(C.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),C.frequency_penalty!=null&&(C.frequency_penalty=void 0,w.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),C.presence_penalty!=null&&(C.presence_penalty=void 0,w.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),C.logit_bias!=null&&(C.logit_bias=void 0,w.push({type:"other",message:"logitBias is not supported for reasoning models"})),C.logprobs!=null&&(C.logprobs=void 0,w.push({type:"other",message:"logprobs is not supported for reasoning models"})),C.top_logprobs!=null&&(C.top_logprobs=void 0,w.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),C.max_tokens!=null&&(C.max_completion_tokens==null&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&C.temperature!=null&&(C.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),b.serviceTier==="flex"&&!mie(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),C.service_tier=void 0),b.serviceTier==="priority"&&!fie(this.modelId)&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),C.service_tier=void 0);let{tools:$,toolChoice:P,toolWarnings:N}=die({tools:p,toolChoice:m,structuredOutputs:S,strictJsonSchema:O});return{args:{...C,tools:$,tool_choice:P},warnings:[...w,...N]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g;let{args:f,warnings:_}=await this.getArgs(t),{responseHeaders:w,value:b,rawValue:S}=await rn({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:f,failedResponseHandler:Co,successfulResponseHandler:Mn(cie),abortSignal:t.abortSignal,fetch:this.config.fetch}),k=b.choices[0],R=[],O=k.message.content;O!=null&&O.length>0&&R.push({type:"text",text:O});for(let N of(e=k.message.tool_calls)!=null?e:[])R.push({type:"tool-call",toolCallId:(r=N.id)!=null?r:lo(),toolName:N.function.name,input:N.function.arguments});for(let N of(n=k.message.annotations)!=null?n:[])R.push({type:"source",sourceType:"url",id:lo(),url:N.url,title:N.title});let C=(o=b.usage)==null?void 0:o.completion_tokens_details,$=(i=b.usage)==null?void 0:i.prompt_tokens_details,P={openai:{}};return C?.accepted_prediction_tokens!=null&&(P.openai.acceptedPredictionTokens=C?.accepted_prediction_tokens),C?.rejected_prediction_tokens!=null&&(P.openai.rejectedPredictionTokens=C?.rejected_prediction_tokens),((a=k.logprobs)==null?void 0:a.content)!=null&&(P.openai.logprobs=k.logprobs.content),{content:R,finishReason:wU(k.finish_reason),usage:{inputTokens:(l=(c=b.usage)==null?void 0:c.prompt_tokens)!=null?l:void 0,outputTokens:(p=(d=b.usage)==null?void 0:d.completion_tokens)!=null?p:void 0,totalTokens:(h=(m=b.usage)==null?void 0:m.total_tokens)!=null?h:void 0,reasoningTokens:(y=C?.reasoning_tokens)!=null?y:void 0,cachedInputTokens:(g=$?.cached_tokens)!=null?g:void 0},request:{body:f},response:{...CI(b),headers:w,body:S},warnings:_,providerMetadata:P}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await rn({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:n,failedResponseHandler:Co,successfulResponseHandler:Cc(uie),abortSignal:t.abortSignal,fetch:this.config.fetch}),a=[],c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!1,p=!1,m={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(h){h.enqueue({type:"stream-start",warnings:r})},transform(h,y){var g,f,_,w,b,S,k,R,O,C,$,P,N,j,W,Z,F,Y,re,ie,be,Te,Xe,Ze;if(t.includeRawChunks&&y.enqueue({type:"raw",rawValue:h.rawValue}),!h.success){c="error",y.enqueue({type:"error",error:h.error});return}let J=h.value;if("error"in J){c="error",y.enqueue({type:"error",error:J.error});return}if(!d){let q=CI(J);Object.values(q).some(Boolean)&&(d=!0,y.enqueue({type:"response-metadata",...CI(J)}))}J.usage!=null&&(l.inputTokens=(g=J.usage.prompt_tokens)!=null?g:void 0,l.outputTokens=(f=J.usage.completion_tokens)!=null?f:void 0,l.totalTokens=(_=J.usage.total_tokens)!=null?_:void 0,l.reasoningTokens=(b=(w=J.usage.completion_tokens_details)==null?void 0:w.reasoning_tokens)!=null?b:void 0,l.cachedInputTokens=(k=(S=J.usage.prompt_tokens_details)==null?void 0:S.cached_tokens)!=null?k:void 0,((R=J.usage.completion_tokens_details)==null?void 0:R.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=(O=J.usage.completion_tokens_details)==null?void 0:O.accepted_prediction_tokens),((C=J.usage.completion_tokens_details)==null?void 0:C.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=($=J.usage.completion_tokens_details)==null?void 0:$.rejected_prediction_tokens));let Oe=J.choices[0];if(Oe?.finish_reason!=null&&(c=wU(Oe.finish_reason)),((P=Oe?.logprobs)==null?void 0:P.content)!=null&&(m.openai.logprobs=Oe.logprobs.content),Oe?.delta==null)return;let ge=Oe.delta;if(ge.content!=null&&(p||(y.enqueue({type:"text-start",id:"0"}),p=!0),y.enqueue({type:"text-delta",id:"0",delta:ge.content})),ge.tool_calls!=null)for(let q of ge.tool_calls){let Ke=q.index;if(a[Ke]==null){if(q.type!=="function")throw new Rh({data:q,message:"Expected 'function' type."});if(q.id==null)throw new Rh({data:q,message:"Expected 'id' to be a string."});if(((N=q.function)==null?void 0:N.name)==null)throw new Rh({data:q,message:"Expected 'function.name' to be a string."});y.enqueue({type:"tool-input-start",id:q.id,toolName:q.function.name}),a[Ke]={id:q.id,type:"function",function:{name:q.function.name,arguments:(j=q.function.arguments)!=null?j:""},hasFinished:!1};let Ot=a[Ke];((W=Ot.function)==null?void 0:W.name)!=null&&((Z=Ot.function)==null?void 0:Z.arguments)!=null&&(Ot.function.arguments.length>0&&y.enqueue({type:"tool-input-delta",id:Ot.id,delta:Ot.function.arguments}),AI(Ot.function.arguments)&&(y.enqueue({type:"tool-input-end",id:Ot.id}),y.enqueue({type:"tool-call",toolCallId:(F=Ot.id)!=null?F:lo(),toolName:Ot.function.name,input:Ot.function.arguments}),Ot.hasFinished=!0));continue}let Tt=a[Ke];Tt.hasFinished||(((Y=q.function)==null?void 0:Y.arguments)!=null&&(Tt.function.arguments+=(ie=(re=q.function)==null?void 0:re.arguments)!=null?ie:""),y.enqueue({type:"tool-input-delta",id:Tt.id,delta:(be=q.function.arguments)!=null?be:""}),((Te=Tt.function)==null?void 0:Te.name)!=null&&((Xe=Tt.function)==null?void 0:Xe.arguments)!=null&&AI(Tt.function.arguments)&&(y.enqueue({type:"tool-input-end",id:Tt.id}),y.enqueue({type:"tool-call",toolCallId:(Ze=Tt.id)!=null?Ze:lo(),toolName:Tt.function.name,input:Tt.function.arguments}),Tt.hasFinished=!0))}if(ge.annotations!=null)for(let q of ge.annotations)y.enqueue({type:"source",sourceType:"url",id:lo(),url:q.url,title:q.title})},flush(h){p&&h.enqueue({type:"text-end",id:"0"}),h.enqueue({type:"finish",finishReason:c,usage:l,...m!=null?{providerMetadata:m}:{}})}})),request:{body:n},response:{headers:o}}}};function CU(t){return(t.startsWith("o")||t.startsWith("gpt-5"))&&!t.startsWith("gpt-5-chat")}s(CU,"isReasoningModel");function mie(t){return t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")}s(mie,"supportsFlexProcessing");function fie(t){return t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini")}s(fie,"supportsPriorityProcessing");function hie(t){var e,r;return CU(t)?(r=(e=gie[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}s(hie,"getSystemMessageMode");var gie={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function yie({prompt:t,user:e="user",assistant:r="assistant"}){let n="";t[0].role==="system"&&(n+=`${t[0].content}

`,t=t.slice(1));for(let{role:o,content:i}of t)switch(o){case"system":throw new zM({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let a=i.map(c=>{switch(c.type){case"text":return c.text}}).filter(Boolean).join("");n+=`${e}:
${a}

`;break}case"assistant":{let a=i.map(c=>{switch(c.type){case"text":return c.text;case"tool-call":throw new xt({functionality:"tool-call messages"})}}).join("");n+=`${r}:
${a}

`;break}case"tool":throw new xt({functionality:"tool messages"});default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return n+=`${r}:
`,{prompt:n,stopSequences:[`
${e}:`]}}s(yie,"convertToOpenAICompletionPrompt");function SU({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}s(SU,"getResponseMetadata2");function xU(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}s(xU,"mapOpenAIFinishReason2");var vie=zt(()=>ze(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}))),_ie=zt(()=>ze(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string().nullish(),index:u.number(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}),OI]))),TU=zt(()=>ze(u.object({echo:u.boolean().optional(),logitBias:u.record(u.string(),u.number()).optional(),suffix:u.string().optional(),user:u.string().optional(),logprobs:u.union([u.boolean(),u.number()]).optional()}))),bie=class{static{s(this,"OpenAICompletionLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={},this.modelId=t,this.config=e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,tools:d,toolChoice:p,seed:m,providerOptions:h}){let y=[],g={...await tn({provider:"openai",providerOptions:h,schema:TU}),...await tn({provider:this.providerOptionsName,providerOptions:h,schema:TU})};o!=null&&y.push({type:"unsupported-setting",setting:"topK"}),d?.length&&y.push({type:"unsupported-setting",setting:"tools"}),p!=null&&y.push({type:"unsupported-setting",setting:"toolChoice"}),l!=null&&l.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:f,stopSequences:_}=yie({prompt:t}),w=[..._??[],...c??[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,logprobs:g?.logprobs===!0?0:g?.logprobs===!1?void 0:g?.logprobs,suffix:g.suffix,user:g.user,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,seed:m,prompt:f,stop:w.length>0?w:void 0},warnings:y}}async doGenerate(t){var e,r,n;let{args:o,warnings:i}=await this.getArgs(t),{responseHeaders:a,value:c,rawValue:l}=await rn({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:o,failedResponseHandler:Co,successfulResponseHandler:Mn(vie),abortSignal:t.abortSignal,fetch:this.config.fetch}),d=c.choices[0],p={openai:{}};return d.logprobs!=null&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:(e=c.usage)==null?void 0:e.prompt_tokens,outputTokens:(r=c.usage)==null?void 0:r.completion_tokens,totalTokens:(n=c.usage)==null?void 0:n.total_tokens},finishReason:xU(d.finish_reason),request:{body:o},response:{...SU(c),headers:a,body:l},providerMetadata:p,warnings:i}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await rn({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:n,failedResponseHandler:Co,successfulResponseHandler:Cc(_ie),abortSignal:t.abortSignal,fetch:this.config.fetch}),a="unknown",c={openai:{}},l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,m){if(t.includeRawChunks&&m.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){a="error",m.enqueue({type:"error",error:p.error});return}let h=p.value;if("error"in h){a="error",m.enqueue({type:"error",error:h.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...SU(h)}),m.enqueue({type:"text-start",id:"0"})),h.usage!=null&&(l.inputTokens=h.usage.prompt_tokens,l.outputTokens=h.usage.completion_tokens,l.totalTokens=h.usage.total_tokens);let y=h.choices[0];y?.finish_reason!=null&&(a=xU(y.finish_reason)),y?.logprobs!=null&&(c.openai.logprobs=y.logprobs),y?.text!=null&&y.text.length>0&&m.enqueue({type:"text-delta",id:"0",delta:y.text})},flush(p){d||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:a,providerMetadata:c,usage:l})}})),request:{body:n},response:{headers:o}}}},wie=zt(()=>ze(u.object({dimensions:u.number().optional(),user:u.string().optional()}))),Sie=zt(()=>ze(u.object({data:u.array(u.object({embedding:u.array(u.number())})),usage:u.object({prompt_tokens:u.number()}).nullish()}))),xie=class{static{s(this,"OpenAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){var o;if(t.length>this.maxEmbeddingsPerCall)throw new Nh({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=(o=await tn({provider:"openai",providerOptions:n,schema:wie}))!=null?o:{},{responseHeaders:a,value:c,rawValue:l}=await rn({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:$r(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:Co,successfulResponseHandler:Mn(Sie),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.data.map(d=>d.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,response:{headers:a,body:l}}}},Tie=zt(()=>ze(u.object({data:u.array(u.object({b64_json:u.string(),revised_prompt:u.string().nullish()}))}))),Eie={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},kie=new Set(["gpt-image-1","gpt-image-1-mini"]),Iie=class{static{s(this,"OpenAIImageModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=Eie[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:o,providerOptions:i,headers:a,abortSignal:c}){var l,d,p,m;let h=[];n!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),o!=null&&h.push({type:"unsupported-setting",setting:"seed"});let y=(p=(d=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:d.call(l))!=null?p:new Date,{value:g,responseHeaders:f}=await rn({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:$r(this.config.headers(),a),body:{model:this.modelId,prompt:t,n:e,size:r,...(m=i.openai)!=null?m:{},...kie.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Co,successfulResponseHandler:Mn(Tie),abortSignal:c,fetch:this.config.fetch});return{images:g.data.map(_=>_.b64_json),warnings:h,response:{timestamp:y,modelId:this.modelId,headers:f},providerMetadata:{openai:{images:g.data.map(_=>_.revised_prompt?{revisedPrompt:_.revised_prompt}:null)}}}}},Pie=rr(()=>ze(u.object({code:u.string().nullish(),containerId:u.string()}))),Aie=rr(()=>ze(u.object({outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullish()}))),Cie=rr(()=>ze(u.object({container:u.union([u.string(),u.object({fileIds:u.array(u.string()).optional()})]).optional()}))),Oie=jn({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:Pie,outputSchema:Aie}),$ie=s((t={})=>Oie(t),"codeInterpreter"),OU=u.object({key:u.string(),type:u.enum(["eq","ne","gt","gte","lt","lte"]),value:u.union([u.string(),u.number(),u.boolean()])}),$U=u.object({type:u.enum(["and","or"]),filters:u.array(u.union([OU,u.lazy(()=>$U)]))}),Rie=rr(()=>ze(u.object({vectorStoreIds:u.array(u.string()),maxNumResults:u.number().optional(),ranking:u.object({ranker:u.string().optional(),scoreThreshold:u.number().optional()}).optional(),filters:u.union([OU,$U]).optional()}))),Nie=rr(()=>ze(u.object({queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),fileId:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullable()}))),Die=jn({id:"openai.file_search",name:"file_search",inputSchema:u.object({}),outputSchema:Nie}),jie=rr(()=>ze(u.object({background:u.enum(["auto","opaque","transparent"]).optional(),inputFidelity:u.enum(["low","high"]).optional(),inputImageMask:u.object({fileId:u.string().optional(),imageUrl:u.string().optional()}).optional(),model:u.string().optional(),moderation:u.enum(["auto"]).optional(),outputCompression:u.number().int().min(0).max(100).optional(),outputFormat:u.enum(["png","jpeg","webp"]).optional(),partialImages:u.number().int().min(0).max(3).optional(),quality:u.enum(["auto","low","medium","high"]).optional(),size:u.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),Mie=rr(()=>ze(u.object({}))),zie=rr(()=>ze(u.object({result:u.string()}))),Uie=jn({id:"openai.image_generation",name:"image_generation",inputSchema:Mie,outputSchema:zie}),Lie=s((t={})=>Uie(t),"imageGeneration"),RU=rr(()=>ze(u.object({action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeoutMs:u.number().optional(),user:u.string().optional(),workingDirectory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}))),NU=rr(()=>ze(u.object({output:u.string()}))),qie=jn({id:"openai.local_shell",name:"local_shell",inputSchema:RU,outputSchema:NU}),Fie=rr(()=>ze(u.object({externalWebAccess:u.boolean().optional(),filters:u.object({allowedDomains:u.array(u.string()).optional()}).optional(),searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Bie=rr(()=>ze(u.object({}))),Vie=rr(()=>ze(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})]),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).optional()}))),Hie=jn({id:"openai.web_search",name:"web_search",inputSchema:Bie,outputSchema:Vie}),Zie=s((t={})=>Hie(t),"webSearch"),Jie=rr(()=>ze(u.object({searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Kie=rr(()=>ze(u.object({}))),Gie=rr(()=>ze(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}))),Wie=jn({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:Kie,outputSchema:Gie}),Qie={codeInterpreter:$ie,fileSearch:Die,imageGeneration:Lie,localShell:qie,webSearchPreview:Wie,webSearch:Zie};function EU(t,e){return e?e.some(r=>t.startsWith(r)):!1}s(EU,"isFileId");async function Xie({prompt:t,systemMessageMode:e,fileIdPrefixes:r,store:n,hasLocalShellTool:o=!1}){var i,a,c,l;let d=[],p=[];for(let{role:m,content:h}of t)switch(m){case"system":{switch(e){case"system":{d.push({role:"system",content:h});break}case"developer":{d.push({role:"developer",content:h});break}case"remove":{p.push({type:"other",message:"system messages are removed for this model"});break}default:{let y=e;throw new Error(`Unsupported system message mode: ${y}`)}}break}case"user":{d.push({role:"user",content:h.map((y,g)=>{var f,_,w;switch(y.type){case"text":return{type:"input_text",text:y.text};case"file":if(y.mediaType.startsWith("image/")){let b=y.mediaType==="image/*"?"image/jpeg":y.mediaType;return{type:"input_image",...y.data instanceof URL?{image_url:y.data.toString()}:typeof y.data=="string"&&EU(y.data,r)?{file_id:y.data}:{image_url:`data:${b};base64,${as(y.data)}`},detail:(_=(f=y.providerOptions)==null?void 0:f.openai)==null?void 0:_.imageDetail}}else{if(y.mediaType==="application/pdf")return y.data instanceof URL?{type:"input_file",file_url:y.data.toString()}:{type:"input_file",...typeof y.data=="string"&&EU(y.data,r)?{file_id:y.data}:{filename:(w=y.filename)!=null?w:`part-${g}.pdf`,file_data:`data:application/pdf;base64,${as(y.data)}`}};throw new xt({functionality:`file part media type ${y.mediaType}`})}}})});break}case"assistant":{let y={},g={};for(let f of h)switch(f.type){case"text":{let _=(a=(i=f.providerOptions)==null?void 0:i.openai)==null?void 0:a.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}d.push({role:"assistant",content:[{type:"output_text",text:f.text}],id:_});break}case"tool-call":{if(g[f.toolCallId]=f,f.providerExecuted)break;let _=(l=(c=f.providerOptions)==null?void 0:c.openai)==null?void 0:l.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}if(o&&f.toolName==="local_shell"){let w=await Ao({value:f.input,schema:RU});d.push({type:"local_shell_call",call_id:f.toolCallId,id:_,action:{type:"exec",command:w.action.command,timeout_ms:w.action.timeoutMs,user:w.action.user,working_directory:w.action.workingDirectory,env:w.action.env}});break}d.push({type:"function_call",call_id:f.toolCallId,name:f.toolName,arguments:JSON.stringify(f.input),id:_});break}case"tool-result":{n?d.push({type:"item_reference",id:f.toolCallId}):p.push({type:"other",message:`Results for OpenAI tool ${f.toolName} are not sent to the API when store is false`});break}case"reasoning":{let _=await tn({provider:"openai",providerOptions:f.providerOptions,schema:Yie}),w=_?.itemId;if(w!=null){let b=y[w];if(n)b===void 0&&(d.push({type:"item_reference",id:w}),y[w]={type:"reasoning",id:w,summary:[]});else{let S=[];f.text.length>0?S.push({type:"summary_text",text:f.text}):b!==void 0&&p.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(f)}.`}),b===void 0?(y[w]={type:"reasoning",id:w,encrypted_content:_?.reasoningEncryptedContent,summary:S},d.push(y[w])):(b.summary.push(...S),_?.reasoningEncryptedContent!=null&&(b.encrypted_content=_.reasoningEncryptedContent))}}else p.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(f)}.`});break}}break}case"tool":{for(let y of h){let g=y.output;if(o&&y.toolName==="local_shell"&&g.type==="json"){let _=await Ao({value:g.value,schema:NU});d.push({type:"local_shell_call_output",call_id:y.toolCallId,output:_.output});break}let f;switch(g.type){case"text":case"error-text":f=g.value;break;case"json":case"error-json":f=JSON.stringify(g.value);break;case"content":f=g.value.map(_=>{switch(_.type){case"text":return{type:"input_text",text:_.text};case"media":return _.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${_.mediaType};base64,${_.data}`}:{type:"input_file",filename:"data",file_data:`data:${_.mediaType};base64,${_.data}`}}});break}d.push({type:"function_call_output",call_id:y.toolCallId,output:f})}break}default:{let y=m;throw new Error(`Unsupported role: ${y}`)}}return{input:d,warnings:p}}s(Xie,"convertToOpenAIResponsesInput");var Yie=u.object({itemId:u.string().nullish(),reasoningEncryptedContent:u.string().nullish()});function kU({finishReason:t,hasFunctionCall:e}){switch(t){case void 0:case null:return e?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return e?"tool-calls":"unknown"}}s(kU,"mapOpenAIResponseFinishReason");var ese=zt(()=>ze(u.union([u.object({type:u.literal("response.output_text.delta"),item_id:u.string(),delta:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}),u.object({type:u.enum(["response.completed","response.incomplete"]),response:u.object({incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.created"),response:u.object({id:u.string(),created_at:u.number(),model:u.string(),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.output_item.added"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("file_search_call"),id:u.string()}),u.object({type:u.literal("image_generation_call"),id:u.string()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),container_id:u.string(),code:u.string().nullable(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable(),status:u.string()})])}),u.object({type:u.literal("response.output_item.done"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string(),status:u.literal("completed")}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.literal("completed")})])}),u.object({type:u.literal("response.function_call_arguments.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.image_generation_call.partial_image"),item_id:u.string(),output_index:u.number(),partial_image_b64:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.done"),item_id:u.string(),output_index:u.number(),code:u.string()}),u.object({type:u.literal("response.output_text.annotation.added"),annotation:u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()})])}),u.object({type:u.literal("response.reasoning_summary_part.added"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("response.reasoning_summary_text.delta"),item_id:u.string(),summary_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.reasoning_summary_part.done"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("error"),sequence_number:u.number(),error:u.object({type:u.string(),code:u.string(),message:u.string(),param:u.string().nullish()})}),u.object({type:u.string()}).loose().transform(t=>({type:"unknown_chunk",message:t.type}))]))),tse=zt(()=>ze(u.object({id:u.string().optional(),created_at:u.number().optional(),error:u.object({message:u.string(),type:u.string(),param:u.string().nullish(),code:u.string()}).nullish(),model:u.string().optional(),output:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("message"),role:u.literal("assistant"),id:u.string(),content:u.array(u.object({type:u.literal("output_text"),text:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish(),annotations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()}),u.object({type:u.literal("container_file_citation"),container_id:u.string(),file_id:u.string(),filename:u.string().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),index:u.number().nullish()}),u.object({type:u.literal("file_path"),file_id:u.string(),index:u.number().nullish()})]))}))}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.union([u.string(),u.number(),u.boolean()])),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("function_call"),call_id:u.string(),name:u.string(),arguments:u.string(),id:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string().optional()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish(),summary:u.array(u.object({type:u.literal("summary_text"),text:u.string()}))})])).optional(),service_tier:u.string().nullish(),incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}).optional()}))),DU=20,rse=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],q6e=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...rse],nse=zt(()=>ze(u.object({conversation:u.string().nullish(),include:u.array(u.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:u.string().nullish(),logprobs:u.union([u.boolean(),u.number().min(1).max(DU)]).optional(),maxToolCalls:u.number().nullish(),metadata:u.any().nullish(),parallelToolCalls:u.boolean().nullish(),previousResponseId:u.string().nullish(),promptCacheKey:u.string().nullish(),promptCacheRetention:u.enum(["in_memory","24h"]).nullish(),reasoningEffort:u.string().nullish(),reasoningSummary:u.string().nullish(),safetyIdentifier:u.string().nullish(),serviceTier:u.enum(["auto","flex","priority","default"]).nullish(),store:u.boolean().nullish(),strictJsonSchema:u.boolean().nullish(),textVerbosity:u.enum(["low","medium","high"]).nullish(),truncation:u.enum(["auto","disabled"]).nullish(),user:u.string().nullish()})));async function ose({tools:t,toolChoice:e,strictJsonSchema:r}){t=t?.length?t:void 0;let n=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let o=[];for(let a of t)switch(a.type){case"function":o.push({type:"function",name:a.name,description:a.description,parameters:a.inputSchema,strict:r});break;case"provider-defined":{switch(a.id){case"openai.file_search":{let c=await Ao({value:a.args,schema:Rie});o.push({type:"file_search",vector_store_ids:c.vectorStoreIds,max_num_results:c.maxNumResults,ranking_options:c.ranking?{ranker:c.ranking.ranker,score_threshold:c.ranking.scoreThreshold}:void 0,filters:c.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.web_search_preview":{let c=await Ao({value:a.args,schema:Jie});o.push({type:"web_search_preview",search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.web_search":{let c=await Ao({value:a.args,schema:Fie});o.push({type:"web_search",filters:c.filters!=null?{allowed_domains:c.filters.allowedDomains}:void 0,external_web_access:c.externalWebAccess,search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.code_interpreter":{let c=await Ao({value:a.args,schema:Cie});o.push({type:"code_interpreter",container:c.container==null?{type:"auto",file_ids:void 0}:typeof c.container=="string"?c.container:{type:"auto",file_ids:c.container.fileIds}});break}case"openai.image_generation":{let c=await Ao({value:a.args,schema:jie});o.push({type:"image_generation",background:c.background,input_fidelity:c.inputFidelity,input_image_mask:c.inputImageMask?{file_id:c.inputImageMask.fileId,image_url:c.inputImageMask.imageUrl}:void 0,model:c.model,size:c.size,quality:c.quality,moderation:c.moderation,output_format:c.outputFormat,output_compression:c.outputCompression});break}}break}default:n.push({type:"unsupported-tool",tool:a});break}if(e==null)return{tools:o,toolChoice:void 0,toolWarnings:n};let i=e.type;switch(i){case"auto":case"none":case"required":return{tools:o,toolChoice:i,toolWarnings:n};case"tool":return{tools:o,toolChoice:e.toolName==="code_interpreter"||e.toolName==="file_search"||e.toolName==="image_generation"||e.toolName==="web_search_preview"||e.toolName==="web_search"?{type:e.toolName}:{type:"function",name:e.toolName},toolWarnings:n};default:{let a=i;throw new xt({functionality:`tool choice type: ${a}`})}}}s(ose,"prepareResponsesTools");var ise=class{static{s(this,"OpenAIResponsesLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({maxOutputTokens:t,temperature:e,stopSequences:r,topP:n,topK:o,presencePenalty:i,frequencyPenalty:a,seed:c,prompt:l,providerOptions:d,tools:p,toolChoice:m,responseFormat:h}){var y,g,f,_;let w=[],b=hse(this.modelId);o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),c!=null&&w.push({type:"unsupported-setting",setting:"seed"}),i!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),a!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});let S=await tn({provider:"openai",providerOptions:d,schema:nse});S?.conversation&&S?.previousResponseId&&w.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});let{input:k,warnings:R}=await Xie({prompt:l,systemMessageMode:b.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(y=S?.store)!=null?y:!0,hasLocalShellTool:P("openai.local_shell")});w.push(...R);let O=(g=S?.strictJsonSchema)!=null?g:!1,C=S?.include;function $(ie){C==null?C=[ie]:C.includes(ie)||(C=[...C,ie])}s($,"addInclude");function P(ie){return p?.find(be=>be.type==="provider-defined"&&be.id===ie)!=null}s(P,"hasOpenAITool");let N=typeof S?.logprobs=="number"?S?.logprobs:S?.logprobs===!0?DU:void 0;N&&$("message.output_text.logprobs");let j=(f=p?.find(ie=>ie.type==="provider-defined"&&(ie.id==="openai.web_search"||ie.id==="openai.web_search_preview")))==null?void 0:f.name;j&&$("web_search_call.action.sources"),P("openai.code_interpreter")&&$("code_interpreter_call.outputs");let W=S?.store;W===!1&&b.isReasoningModel&&$("reasoning.encrypted_content");let Z={model:this.modelId,input:k,temperature:e,top_p:n,max_output_tokens:t,...(h?.type==="json"||S?.textVerbosity)&&{text:{...h?.type==="json"&&{format:h.schema!=null?{type:"json_schema",strict:O,name:(_=h.name)!=null?_:"response",description:h.description,schema:h.schema}:{type:"json_object"}},...S?.textVerbosity&&{verbosity:S.textVerbosity}}},conversation:S?.conversation,max_tool_calls:S?.maxToolCalls,metadata:S?.metadata,parallel_tool_calls:S?.parallelToolCalls,previous_response_id:S?.previousResponseId,store:W,user:S?.user,instructions:S?.instructions,service_tier:S?.serviceTier,include:C,prompt_cache_key:S?.promptCacheKey,prompt_cache_retention:S?.promptCacheRetention,safety_identifier:S?.safetyIdentifier,top_logprobs:N,truncation:S?.truncation,...b.isReasoningModel&&(S?.reasoningEffort!=null||S?.reasoningSummary!=null)&&{reasoning:{...S?.reasoningEffort!=null&&{effort:S.reasoningEffort},...S?.reasoningSummary!=null&&{summary:S.reasoningSummary}}}};b.isReasoningModel?(Z.temperature!=null&&(Z.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),Z.top_p!=null&&(Z.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(S?.reasoningEffort!=null&&w.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),S?.reasoningSummary!=null&&w.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),S?.serviceTier==="flex"&&!b.supportsFlexProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete Z.service_tier),S?.serviceTier==="priority"&&!b.supportsPriorityProcessing&&(w.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete Z.service_tier);let{tools:F,toolChoice:Y,toolWarnings:re}=await ose({tools:p,toolChoice:m,strictJsonSchema:O});return{webSearchToolName:j,args:{...Z,tools:F,tool_choice:Y},warnings:[...w,...re],store:W}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,w,b,S;let{args:k,warnings:R,webSearchToolName:O}=await this.getArgs(t),C=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:$,value:P,rawValue:N}=await rn({url:C,headers:$r(this.config.headers(),t.headers),body:k,failedResponseHandler:Co,successfulResponseHandler:Mn(tse),abortSignal:t.abortSignal,fetch:this.config.fetch});if(P.error)throw new Qe({message:P.error.message,url:C,requestBodyValues:k,statusCode:400,responseHeaders:$,responseBody:N,isRetryable:!1});let j=[],W=[],Z=!1;for(let re of P.output)switch(re.type){case"reasoning":{re.summary.length===0&&re.summary.push({type:"summary_text",text:""});for(let ie of re.summary)j.push({type:"reasoning",text:ie.text,providerMetadata:{openai:{itemId:re.id,reasoningEncryptedContent:(e=re.encrypted_content)!=null?e:null}}});break}case"image_generation_call":{j.push({type:"tool-call",toolCallId:re.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),j.push({type:"tool-result",toolCallId:re.id,toolName:"image_generation",result:{result:re.result},providerExecuted:!0});break}case"local_shell_call":{j.push({type:"tool-call",toolCallId:re.call_id,toolName:"local_shell",input:JSON.stringify({action:re.action}),providerMetadata:{openai:{itemId:re.id}}});break}case"message":{for(let ie of re.content){(n=(r=t.providerOptions)==null?void 0:r.openai)!=null&&n.logprobs&&ie.logprobs&&W.push(ie.logprobs),j.push({type:"text",text:ie.text,providerMetadata:{openai:{itemId:re.id}}});for(let be of ie.annotations)be.type==="url_citation"?j.push({type:"source",sourceType:"url",id:(a=(i=(o=this.config).generateId)==null?void 0:i.call(o))!=null?a:lo(),url:be.url,title:be.title}):be.type==="file_citation"&&j.push({type:"source",sourceType:"document",id:(d=(l=(c=this.config).generateId)==null?void 0:l.call(c))!=null?d:lo(),mediaType:"text/plain",title:(m=(p=be.quote)!=null?p:be.filename)!=null?m:"Document",filename:(h=be.filename)!=null?h:be.file_id,...be.file_id?{providerMetadata:{openai:{fileId:be.file_id}}}:{}})}break}case"function_call":{Z=!0,j.push({type:"tool-call",toolCallId:re.call_id,toolName:re.name,input:re.arguments,providerMetadata:{openai:{itemId:re.id}}});break}case"web_search_call":{j.push({type:"tool-call",toolCallId:re.id,toolName:O??"web_search",input:JSON.stringify({}),providerExecuted:!0}),j.push({type:"tool-result",toolCallId:re.id,toolName:O??"web_search",result:PU(re.action),providerExecuted:!0});break}case"computer_call":{j.push({type:"tool-call",toolCallId:re.id,toolName:"computer_use",input:"",providerExecuted:!0}),j.push({type:"tool-result",toolCallId:re.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:re.status||"completed"},providerExecuted:!0});break}case"file_search_call":{j.push({type:"tool-call",toolCallId:re.id,toolName:"file_search",input:"{}",providerExecuted:!0}),j.push({type:"tool-result",toolCallId:re.id,toolName:"file_search",result:{queries:re.queries,results:(g=(y=re.results)==null?void 0:y.map(ie=>({attributes:ie.attributes,fileId:ie.file_id,filename:ie.filename,score:ie.score,text:ie.text})))!=null?g:null},providerExecuted:!0});break}case"code_interpreter_call":{j.push({type:"tool-call",toolCallId:re.id,toolName:"code_interpreter",input:JSON.stringify({code:re.code,containerId:re.container_id}),providerExecuted:!0}),j.push({type:"tool-result",toolCallId:re.id,toolName:"code_interpreter",result:{outputs:re.outputs},providerExecuted:!0});break}}let F={openai:{...P.id!=null?{responseId:P.id}:{}}};W.length>0&&(F.openai.logprobs=W),typeof P.service_tier=="string"&&(F.openai.serviceTier=P.service_tier);let Y=P.usage;return{content:j,finishReason:kU({finishReason:(f=P.incomplete_details)==null?void 0:f.reason,hasFunctionCall:Z}),usage:{inputTokens:Y.input_tokens,outputTokens:Y.output_tokens,totalTokens:Y.input_tokens+Y.output_tokens,reasoningTokens:(w=(_=Y.output_tokens_details)==null?void 0:_.reasoning_tokens)!=null?w:void 0,cachedInputTokens:(S=(b=Y.input_tokens_details)==null?void 0:b.cached_tokens)!=null?S:void 0},request:{body:k},response:{id:P.id,timestamp:new Date(P.created_at*1e3),modelId:P.model,headers:$,body:N},providerMetadata:F,warnings:R}}async doStream(t){let{args:e,warnings:r,webSearchToolName:n,store:o}=await this.getArgs(t),{responseHeaders:i,value:a}=await rn({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:Co,successfulResponseHandler:Cc(ese),abortSignal:t.abortSignal,fetch:this.config.fetch}),c=this,l="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],m=null,h={},y=[],g=!1,f={},_;return{stream:a.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,b){var S,k,R,O,C,$,P,N,j,W,Z,F,Y,re,ie,be,Te,Xe,Ze,J,Oe,ge;if(t.includeRawChunks&&b.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){l="error",b.enqueue({type:"error",error:w.error});return}let q=w.value;if(IU(q))q.item.type==="function_call"?(h[q.output_index]={toolName:q.item.name,toolCallId:q.item.call_id},b.enqueue({type:"tool-input-start",id:q.item.call_id,toolName:q.item.name})):q.item.type==="web_search_call"?(h[q.output_index]={toolName:n??"web_search",toolCallId:q.item.id},b.enqueue({type:"tool-input-start",id:q.item.id,toolName:n??"web_search",providerExecuted:!0}),b.enqueue({type:"tool-input-end",id:q.item.id}),b.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:n??"web_search",input:JSON.stringify({}),providerExecuted:!0})):q.item.type==="computer_call"?(h[q.output_index]={toolName:"computer_use",toolCallId:q.item.id},b.enqueue({type:"tool-input-start",id:q.item.id,toolName:"computer_use",providerExecuted:!0})):q.item.type==="code_interpreter_call"?(h[q.output_index]={toolName:"code_interpreter",toolCallId:q.item.id,codeInterpreter:{containerId:q.item.container_id}},b.enqueue({type:"tool-input-start",id:q.item.id,toolName:"code_interpreter",providerExecuted:!0}),b.enqueue({type:"tool-input-delta",id:q.item.id,delta:`{"containerId":"${q.item.container_id}","code":"`})):q.item.type==="file_search_call"?b.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):q.item.type==="image_generation_call"?b.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):q.item.type==="message"?(y.splice(0,y.length),b.enqueue({type:"text-start",id:q.item.id,providerMetadata:{openai:{itemId:q.item.id}}})):IU(q)&&q.item.type==="reasoning"&&(f[q.item.id]={encryptedContent:q.item.encrypted_content,summaryParts:{0:"active"}},b.enqueue({type:"reasoning-start",id:`${q.item.id}:0`,providerMetadata:{openai:{itemId:q.item.id,reasoningEncryptedContent:(S=q.item.encrypted_content)!=null?S:null}}}));else if(ase(q)){if(q.item.type==="message")b.enqueue({type:"text-end",id:q.item.id,providerMetadata:{openai:{itemId:q.item.id,...y.length>0&&{annotations:y}}}});else if(q.item.type==="function_call")h[q.output_index]=void 0,g=!0,b.enqueue({type:"tool-input-end",id:q.item.call_id}),b.enqueue({type:"tool-call",toolCallId:q.item.call_id,toolName:q.item.name,input:q.item.arguments,providerMetadata:{openai:{itemId:q.item.id}}});else if(q.item.type==="web_search_call")h[q.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:n??"web_search",result:PU(q.item.action),providerExecuted:!0});else if(q.item.type==="computer_call")h[q.output_index]=void 0,b.enqueue({type:"tool-input-end",id:q.item.id}),b.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),b.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:q.item.status||"completed"},providerExecuted:!0});else if(q.item.type==="file_search_call")h[q.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"file_search",result:{queries:q.item.queries,results:(R=(k=q.item.results)==null?void 0:k.map(Ke=>({attributes:Ke.attributes,fileId:Ke.file_id,filename:Ke.filename,score:Ke.score,text:Ke.text})))!=null?R:null},providerExecuted:!0});else if(q.item.type==="code_interpreter_call")h[q.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"code_interpreter",result:{outputs:q.item.outputs},providerExecuted:!0});else if(q.item.type==="image_generation_call")b.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"image_generation",result:{result:q.item.result},providerExecuted:!0});else if(q.item.type==="local_shell_call")h[q.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:q.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:q.item.action.command,timeoutMs:q.item.action.timeout_ms,user:q.item.action.user,workingDirectory:q.item.action.working_directory,env:q.item.action.env}}),providerMetadata:{openai:{itemId:q.item.id}}});else if(q.item.type==="reasoning"){let Ke=f[q.item.id],Tt=Object.entries(Ke.summaryParts).filter(([Ot,nn])=>nn==="active"||nn==="can-conclude").map(([Ot])=>Ot);for(let Ot of Tt)b.enqueue({type:"reasoning-end",id:`${q.item.id}:${Ot}`,providerMetadata:{openai:{itemId:q.item.id,reasoningEncryptedContent:(O=q.item.encrypted_content)!=null?O:null}}});delete f[q.item.id]}}else if(lse(q)){let Ke=h[q.output_index];Ke!=null&&b.enqueue({type:"tool-input-delta",id:Ke.toolCallId,delta:q.delta})}else if(dse(q)){let Ke=h[q.output_index];Ke!=null&&b.enqueue({type:"tool-input-delta",id:Ke.toolCallId,delta:JSON.stringify(q.delta).slice(1,-1)})}else if(pse(q)){let Ke=h[q.output_index];Ke!=null&&(b.enqueue({type:"tool-input-delta",id:Ke.toolCallId,delta:'"}'}),b.enqueue({type:"tool-input-end",id:Ke.toolCallId}),b.enqueue({type:"tool-call",toolCallId:Ke.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:q.code,containerId:Ke.codeInterpreter.containerId}),providerExecuted:!0}))}else if(use(q))m=q.response.id,b.enqueue({type:"response-metadata",id:q.response.id,timestamp:new Date(q.response.created_at*1e3),modelId:q.response.model});else if(sse(q))b.enqueue({type:"text-delta",id:q.item_id,delta:q.delta}),($=(C=t.providerOptions)==null?void 0:C.openai)!=null&&$.logprobs&&q.logprobs&&p.push(q.logprobs);else if(q.type==="response.reasoning_summary_part.added"){if(q.summary_index>0){let Ke=f[q.item_id];Ke.summaryParts[q.summary_index]="active";for(let Tt of Object.keys(Ke.summaryParts))Ke.summaryParts[Tt]==="can-conclude"&&(b.enqueue({type:"reasoning-end",id:`${q.item_id}:${Tt}`,providerMetadata:{openai:{itemId:q.item_id}}}),Ke.summaryParts[Tt]="concluded");b.enqueue({type:"reasoning-start",id:`${q.item_id}:${q.summary_index}`,providerMetadata:{openai:{itemId:q.item_id,reasoningEncryptedContent:(N=(P=f[q.item_id])==null?void 0:P.encryptedContent)!=null?N:null}}})}}else q.type==="response.reasoning_summary_text.delta"?b.enqueue({type:"reasoning-delta",id:`${q.item_id}:${q.summary_index}`,delta:q.delta,providerMetadata:{openai:{itemId:q.item_id}}}):q.type==="response.reasoning_summary_part.done"?o?(b.enqueue({type:"reasoning-end",id:`${q.item_id}:${q.summary_index}`,providerMetadata:{openai:{itemId:q.item_id}}}),f[q.item_id].summaryParts[q.summary_index]="concluded"):f[q.item_id].summaryParts[q.summary_index]="can-conclude":cse(q)?(l=kU({finishReason:(j=q.response.incomplete_details)==null?void 0:j.reason,hasFunctionCall:g}),d.inputTokens=q.response.usage.input_tokens,d.outputTokens=q.response.usage.output_tokens,d.totalTokens=q.response.usage.input_tokens+q.response.usage.output_tokens,d.reasoningTokens=(Z=(W=q.response.usage.output_tokens_details)==null?void 0:W.reasoning_tokens)!=null?Z:void 0,d.cachedInputTokens=(Y=(F=q.response.usage.input_tokens_details)==null?void 0:F.cached_tokens)!=null?Y:void 0,typeof q.response.service_tier=="string"&&(_=q.response.service_tier)):mse(q)?(y.push(q.annotation),q.annotation.type==="url_citation"?b.enqueue({type:"source",sourceType:"url",id:(be=(ie=(re=c.config).generateId)==null?void 0:ie.call(re))!=null?be:lo(),url:q.annotation.url,title:q.annotation.title}):q.annotation.type==="file_citation"&&b.enqueue({type:"source",sourceType:"document",id:(Ze=(Xe=(Te=c.config).generateId)==null?void 0:Xe.call(Te))!=null?Ze:lo(),mediaType:"text/plain",title:(Oe=(J=q.annotation.quote)!=null?J:q.annotation.filename)!=null?Oe:"Document",filename:(ge=q.annotation.filename)!=null?ge:q.annotation.file_id,...q.annotation.file_id?{providerMetadata:{openai:{fileId:q.annotation.file_id}}}:{}})):fse(q)&&b.enqueue({type:"error",error:q})},flush(w){let b={openai:{responseId:m}};p.length>0&&(b.openai.logprobs=p),_!==void 0&&(b.openai.serviceTier=_),w.enqueue({type:"finish",finishReason:l,usage:d,providerMetadata:b})}})),request:{body:e},response:{headers:i}}}};function sse(t){return t.type==="response.output_text.delta"}s(sse,"isTextDeltaChunk");function ase(t){return t.type==="response.output_item.done"}s(ase,"isResponseOutputItemDoneChunk");function cse(t){return t.type==="response.completed"||t.type==="response.incomplete"}s(cse,"isResponseFinishedChunk");function use(t){return t.type==="response.created"}s(use,"isResponseCreatedChunk");function lse(t){return t.type==="response.function_call_arguments.delta"}s(lse,"isResponseFunctionCallArgumentsDeltaChunk");function dse(t){return t.type==="response.code_interpreter_call_code.delta"}s(dse,"isResponseCodeInterpreterCallCodeDeltaChunk");function pse(t){return t.type==="response.code_interpreter_call_code.done"}s(pse,"isResponseCodeInterpreterCallCodeDoneChunk");function IU(t){return t.type==="response.output_item.added"}s(IU,"isResponseOutputItemAddedChunk");function mse(t){return t.type==="response.output_text.annotation.added"}s(mse,"isResponseAnnotationAddedChunk");function fse(t){return t.type==="error"}s(fse,"isErrorChunk");function hse(t){let e=t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),r=t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini"),n={systemMessageMode:"system",supportsFlexProcessing:e,supportsPriorityProcessing:r};return t.startsWith("gpt-5-chat")?{...n,isReasoningModel:!1}:t.startsWith("o")||t.startsWith("gpt-5")||t.startsWith("codex-")||t.startsWith("computer-use")?{...n,isReasoningModel:!0,systemMessageMode:"developer"}:{...n,isReasoningModel:!1}}s(hse,"getResponsesModelConfig");function PU(t){var e;switch(t.type){case"search":return{action:{type:"search",query:(e=t.query)!=null?e:void 0},...t.sources!=null&&{sources:t.sources}};case"open_page":return{action:{type:"openPage",url:t.url}};case"find":return{action:{type:"find",url:t.url,pattern:t.pattern}}}}s(PU,"mapWebSearchOutput");var gse=zt(()=>ze(u.object({instructions:u.string().nullish(),speed:u.number().min(.25).max(4).default(1).nullish()}))),yse=class{static{s(this,"OpenAISpeechModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:t,voice:e="alloy",outputFormat:r="mp3",speed:n,instructions:o,language:i,providerOptions:a}){let c=[],l=await tn({provider:"openai",providerOptions:a,schema:gse}),d={model:this.modelId,input:t,voice:e,response_format:"mp3",speed:n,instructions:o};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?d.response_format=r:c.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),l){let p={};for(let m in p){let h=p[m];h!==void 0&&(d[m]=h)}}return i&&c.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:d,warnings:c}}async doGenerate(t){var e,r,n;let o=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{requestBody:i,warnings:a}=await this.getArgs(t),{value:c,responseHeaders:l,rawValue:d}=await rn({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),body:i,failedResponseHandler:Co,successfulResponseHandler:mU(),abortSignal:t.abortSignal,fetch:this.config.fetch});return{audio:c,warnings:a,request:{body:JSON.stringify(i)},response:{timestamp:o,modelId:this.modelId,headers:l,body:d}}}},vse=zt(()=>ze(u.object({text:u.string(),language:u.string().nullish(),duration:u.number().nullish(),words:u.array(u.object({word:u.string(),start:u.number(),end:u.number()})).nullish(),segments:u.array(u.object({id:u.number(),seek:u.number(),start:u.number(),end:u.number(),text:u.string(),tokens:u.array(u.number()),temperature:u.number(),avg_logprob:u.number(),compression_ratio:u.number(),no_speech_prob:u.number()})).nullish()}))),_se=zt(()=>ze(u.object({include:u.array(u.string()).optional(),language:u.string().optional(),prompt:u.string().optional(),temperature:u.number().min(0).max(1).default(0).optional(),timestampGranularities:u.array(u.enum(["word","segment"])).default(["segment"]).optional()}))),AU={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},bse=class{static{s(this,"OpenAITranscriptionModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:t,mediaType:e,providerOptions:r}){let n=[],o=await tn({provider:"openai",providerOptions:r,schema:_se}),i=new FormData,a=t instanceof Uint8Array?new Blob([t]):new Blob([_U(t)]);i.append("model",this.modelId);let c=cU(e);if(i.append("file",new File([a],"audio",{type:e}),`audio.${c}`),o){let l={include:o.include,language:o.language,prompt:o.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:o.temperature,timestamp_granularities:o.timestampGranularities};for(let[d,p]of Object.entries(l))if(p!=null)if(Array.isArray(p))for(let m of p)i.append(`${d}[]`,String(m));else i.append(d,String(p))}return{formData:i,warnings:n}}async doGenerate(t){var e,r,n,o,i,a,c,l;let d=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{formData:p,warnings:m}=await this.getArgs(t),{value:h,responseHeaders:y,rawValue:g}=await lU({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:$r(this.config.headers(),t.headers),formData:p,failedResponseHandler:Co,successfulResponseHandler:Mn(vse),abortSignal:t.abortSignal,fetch:this.config.fetch}),f=h.language!=null&&h.language in AU?AU[h.language]:void 0;return{text:h.text,segments:(c=(a=(o=h.segments)==null?void 0:o.map(_=>({text:_.text,startSecond:_.start,endSecond:_.end})))!=null?a:(i=h.words)==null?void 0:i.map(_=>({text:_.word,startSecond:_.start,endSecond:_.end})))!=null?c:[],language:f,durationInSeconds:(l=h.duration)!=null?l:void 0,warnings:m,response:{timestamp:d,modelId:this.modelId,headers:y,body:g}}}},wse="2.0.74";function Sse(t={}){var e,r;let n=(e=bU(aU({settingValue:t.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?e:"https://api.openai.com/v1",o=(r=t.name)!=null?r:"openai",i=s(()=>kI({Authorization:`Bearer ${sU({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers},`ai-sdk/openai/${wse}`),"getHeaders"),a=s(f=>new pie(f,{provider:`${o}.chat`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createChatModel"),c=s(f=>new bie(f,{provider:`${o}.completion`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createCompletionModel"),l=s(f=>new xie(f,{provider:`${o}.embedding`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createEmbeddingModel"),d=s(f=>new Iie(f,{provider:`${o}.image`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createImageModel"),p=s(f=>new bse(f,{provider:`${o}.transcription`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createTranscriptionModel"),m=s(f=>new yse(f,{provider:`${o}.speech`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createSpeechModel"),h=s(f=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return y(f)},"createLanguageModel"),y=s(f=>new ise(f,{provider:`${o}.responses`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch,fileIdPrefixes:["file-"]}),"createResponsesModel"),g=s(function(f){return h(f)},"provider");return g.languageModel=h,g.chat=a,g.completion=c,g.responses=y,g.embedding=l,g.textEmbedding=l,g.textEmbeddingModel=l,g.image=d,g.imageModel=d,g.transcription=p,g.transcriptionModel=p,g.speech=m,g.speechModel=m,g.tools=Qie,g}s(Sse,"createOpenAI");var $I=Sse();var jU=u.enum(["openai","anthropic","google"]),xse={openai:{default:s(()=>$I("gpt-4o"),"default"),fast:s(()=>$I("gpt-4o-mini"),"fast"),envKey:"OPENAI_API_KEY"},anthropic:{default:s(()=>mI("claude-3-5-sonnet-latest"),"default"),fast:s(()=>mI("claude-3-5-haiku-latest"),"fast"),envKey:"ANTHROPIC_API_KEY"},google:{default:s(()=>wI("gemini-1.5-pro-latest"),"default"),fast:s(()=>wI("gemini-1.5-flash-latest"),"fast"),envKey:"GOOGLE_GENERATIVE_AI_API_KEY"}};function MU(t,e="default"){return xse[t][e]()}s(MU,"getModel");function zU(){let t=[];return process.env.OPENAI_API_KEY&&t.push("openai"),process.env.ANTHROPIC_API_KEY&&t.push("anthropic"),process.env.GOOGLE_GENERATIVE_AI_API_KEY&&t.push("google"),t.length>0?t:["google"]}s(zU,"getAvailableProviders");var Tse=[/ignore\s+(all\s+)?(previous|above|prior)\s+instructions/i,/disregard\s+(all\s+)?(previous|prior)\s+(instructions|context)/i,/you\s+are\s+now/i,/new\s+instructions:/i,/system:\s*/i,/\[INST\]/i,/<\/s>/i,/DROP\s+TABLE/i,/DELETE\s+FROM\s+\w+\s*;/i,/UPDATE\s+\w+\s+SET.*WHERE\s+1\s*=\s*1/i,/;\s*--/];function UU(t){for(let r of Tse)if(r.test(t))return{isSafe:!1,reason:`Potential injection detected: ${r.source}`};return{isSafe:!0,sanitizedInput:[...t].filter(r=>{let n=r.charCodeAt(0);return n>=32&&n!==127}).join("").trim()}}s(UU,"checkPromptInjection");gr();var Ese=new Set(["password","password_hash","two_factor_secret","two_factor_enabled","voice_sample_encrypted","voice_biometric_enabled","biometric_enabled","api_token","refresh_token","belvo_link_token","session_token"]),LU={cpf:s(t=>t?`***.***.***-${t.slice(-2)}`:"[n\xE3o informado]","cpf"),account_number:s(t=>t?`****${t.slice(-4)}`:"[n\xE3o informado]","account_number"),phone:s(t=>t?`(**) *****-${t.slice(-4)}`:"[n\xE3o informado]","phone")};function Oo(t){if(!t)return{};let e={};for(let[r,n]of Object.entries(t))if(!Ese.has(r.toLowerCase())){if(r.toLowerCase()in LU&&typeof n=="string"){e[r]=LU[r.toLowerCase()](n);continue}if(n&&typeof n=="object"){Array.isArray(n)?e[r]=n.map(o=>typeof o=="object"&&o!==null?Oo(o):o):e[r]=Oo(n);continue}e[r]=n}return e}s(Oo,"filterSensitiveData");Tr();function qU(t,e){let r=u.object({includeInactive:u.boolean().default(!1).describe("Incluir contas inativas")}),n=u.object({accountId:u.string().uuid().optional().describe("ID da conta (omitir para total)")});return{listAccounts:{description:"Lista todas as contas banc\xE1rias do usu\xE1rio.",parameters:r,execute:s(async o=>{let{includeInactive:i}=o,a=[H(ae.userId,t)];i||a.push(H(ae.isActive,!0));let c=await e.select({id:ae.id,institutionName:ae.institutionName,accountType:ae.accountType,balance:ae.balance,availableBalance:ae.availableBalance,currency:ae.currency,isActive:ae.isActive,isPrimary:ae.isPrimary,lastSync:ae.lastSync}).from(ae).where(Ee(...a)).orderBy(Nt(ae.isPrimary)),l=c.reduce((d,p)=>d+Number(p.balance??0),0);return{accounts:c.map(Oo),totalBalance:l,count:c.length}},"execute")},getAccountBalance:{description:"Obt\xE9m saldo atual de uma conta espec\xEDfica ou total de todas as contas.",parameters:n,execute:s(async o=>{let{accountId:i}=o;if(i){let[d]=await e.select({id:ae.id,institutionName:ae.institutionName,balance:ae.balance,availableBalance:ae.availableBalance,currency:ae.currency,lastSync:ae.lastSync}).from(ae).where(Ee(H(ae.id,i),H(ae.userId,t))).limit(1);if(!d)throw new Error("Conta n\xE3o encontrada");return Oo(d)}let a=await e.select({balance:ae.balance,availableBalance:ae.availableBalance,currency:ae.currency}).from(ae).where(Ee(H(ae.userId,t),H(ae.isActive,!0))),c=a.reduce((d,p)=>d+Number(p.balance??0),0),l=a.reduce((d,p)=>d+Number(p.availableBalance??0),0);return{totalBalance:c,totalAvailable:l,currency:"BRL",accountCount:a.length}},"execute")}}}s(qU,"createAccountTools");gr();Tr();function FU(t,e){let r=u.object({includeSystem:u.boolean().default(!0).describe("Incluir categorias do sistema")}),n=u.object({name:u.string().min(1).max(50).describe("Nome da categoria"),color:u.string().regex(/^#[0-9A-Fa-f]{6}$/).default("#6B7280").describe("Cor em hexadecimal"),icon:u.string().default("circle").describe("Nome do \xEDcone")});return{listCategories:{description:"Lista todas as categorias de transa\xE7\xE3o dispon\xEDveis.",parameters:r,execute:s(async o=>{let{includeSystem:i}=o,a=Pi(H(De.userId,t),Eu(De.userId)),c=await e.select({id:De.id,name:De.name,color:De.color,icon:De.icon,isSystem:De.isSystem,parentId:De.parentId}).from(De).where(a);return i||(c=c.filter(l=>!l.isSystem)),{categories:c,count:c.length}},"execute")},createCategory:{description:"Cria uma nova categoria personalizada.",parameters:n,execute:s(async o=>{let{name:i,color:a,icon:c}=o,[l]=await e.insert(De).values({userId:t,name:i,color:a,icon:c,isSystem:!1}).returning();return{success:!0,category:l}},"execute")}}}s(FU,"createCategoryTools");gr();Tr();function BU(t,e){let r=u.object({startDate:u.string().datetime().optional().describe("Data inicial no formato ISO (YYYY-MM-DD)"),endDate:u.string().datetime().optional().describe("Data final no formato ISO (YYYY-MM-DD)"),categoryId:u.string().uuid().optional().describe("ID da categoria para filtrar"),accountId:u.string().uuid().optional().describe("ID da conta para filtrar"),minAmount:u.number().optional().describe("Valor m\xEDnimo da transa\xE7\xE3o"),maxAmount:u.number().optional().describe("Valor m\xE1ximo da transa\xE7\xE3o"),searchTerm:u.string().optional().describe("Termo para buscar na descri\xE7\xE3o"),limit:u.number().min(1).max(100).default(20).describe("N\xFAmero m\xE1ximo de resultados"),offset:u.number().min(0).default(0).describe("Pular N resultados para pagina\xE7\xE3o")}),n=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),o=u.object({amount:u.number().describe("Valor da transa\xE7\xE3o (positivo para receita, negativo para despesa)"),description:u.string().min(1).max(255).describe("Descri\xE7\xE3o da transa\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("ID da categoria"),accountId:u.string().uuid().optional().describe("ID da conta banc\xE1ria"),transactionDate:u.string().datetime().optional().describe("Data da transa\xE7\xE3o (padr\xE3o: agora)"),merchantName:u.string().optional().describe("Nome do estabelecimento")}),i=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o a atualizar"),amount:u.number().optional().describe("Novo valor"),description:u.string().min(1).max(255).optional().describe("Nova descri\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("Nova categoria"),transactionDate:u.string().datetime().optional().describe("Nova data"),merchantName:u.string().optional().describe("Novo estabelecimento")}),a=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),c=u.object({startDate:u.string().datetime().describe("Data inicial"),endDate:u.string().datetime().describe("Data final")});return{listTransactions:{description:"Lista transa\xE7\xF5es do usu\xE1rio com filtros opcionais. Use para consultar hist\xF3rico, buscar por per\xEDodo ou categoria.",parameters:r,execute:s(async l=>{let{startDate:d,endDate:p,categoryId:m,accountId:h,minAmount:y,maxAmount:g,searchTerm:f,limit:_,offset:w}=l,b=[H(ne.userId,t)];d&&b.push(ur(ne.transactionDate,new Date(d))),p&&b.push(Xt(ne.transactionDate,new Date(p))),m&&b.push(H(ne.categoryId,m)),h&&b.push(H(ne.accountId,h)),y&&b.push(ur(ne.amount,String(y))),g&&b.push(Xt(ne.amount,String(g))),f&&b.push(Cr(ne.description,`%${f}%`));let S=await e.select({id:ne.id,amount:ne.amount,description:ne.description,merchantName:ne.merchantName,transactionDate:ne.transactionDate,status:ne.status,createdAt:ne.createdAt}).from(ne).where(Ee(...b)).orderBy(Nt(ne.transactionDate)).limit(_).offset(w);return{transactions:S.map(Oo),total:S.length,hasMore:S.length===_}},"execute")},getTransaction:{description:"Obt\xE9m detalhes de uma transa\xE7\xE3o espec\xEDfica pelo ID.",parameters:n,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.select().from(ne).where(Ee(H(ne.id,d),H(ne.userId,t))).limit(1);if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return Oo(p)},"execute")},createTransaction:{description:"Cria uma nova transa\xE7\xE3o manual para o usu\xE1rio.",parameters:o,execute:s(async l=>{let{amount:d,description:p,categoryId:m,accountId:h,transactionDate:y,merchantName:g}=l,[f]=await e.insert(ne).values({userId:t,amount:String(d),description:p,categoryId:m,accountId:h,transactionDate:y?new Date(y):new Date,merchantName:g,transactionType:d>=0?"credit":"debit",status:"posted",isManualEntry:!0}).returning();return{success:!0,transaction:Oo(f)}},"execute")},updateTransaction:{description:"Atualiza uma transa\xE7\xE3o existente do usu\xE1rio.",parameters:i,execute:s(async l=>{let{transactionId:d,...p}=l,m={updatedAt:new Date};p.amount!==void 0&&(m.amount=String(p.amount)),p.description!==void 0&&(m.description=p.description),p.categoryId!==void 0&&(m.categoryId=p.categoryId),p.transactionDate!==void 0&&(m.transactionDate=new Date(p.transactionDate)),p.merchantName!==void 0&&(m.merchantName=p.merchantName);let[h]=await e.update(ne).set(m).where(Ee(H(ne.id,d),H(ne.userId,t))).returning();if(!h)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,transaction:Oo(h)}},"execute")},deleteTransaction:{description:"Deleta uma transa\xE7\xE3o. Use com cuidado, esta a\xE7\xE3o \xE9 irrevers\xEDvel.",parameters:a,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.delete(ne).where(Ee(H(ne.id,d),H(ne.userId,t))).returning({id:ne.id});if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,message:"Transa\xE7\xE3o deletada com sucesso."}},"execute")},getSpendingSummary:{description:"Obt\xE9m resumo de gastos por categoria em um per\xEDodo.",parameters:c,execute:s(async l=>{let{startDate:d,endDate:p}=l,m=await e.select({amount:ne.amount,categoryId:ne.categoryId}).from(ne).where(Ee(H(ne.userId,t),Xt(ne.amount,"0"),ur(ne.transactionDate,new Date(d)),Xt(ne.transactionDate,new Date(p)))),h=[...new Set(m.map(b=>b.categoryId).filter(Boolean))],y=h.length?await e.select({id:De.id,name:De.name,color:De.color}).from(De).where(Es(De.id,h)):[],g=new Map(y.map(b=>[b.id,b])),f=m.reduce((b,S)=>{let k=S.categoryId??"uncategorized",R=g.get(S.categoryId??"");return b[k]||(b[k]={categoryId:k,categoryName:R?.name??"Sem categoria",color:R?.color??"#6B7280",total:0,count:0}),b[k].total+=Math.abs(Number(S.amount)),b[k].count+=1,b},{}),_=Object.values(f).sort((b,S)=>S.total-b.total),w=_.reduce((b,S)=>b+S.total,0);return{period:{startDate:d,endDate:p},grandTotal:w,categories:_}},"execute")}}}s(BU,"createTransactionTools");function VU(t,e){return{...BU(t,e),...qU(t,e),...FU(t,e)}}s(VU,"createAllTools");function kse(t){let e=[],n=[/\b\d{3}\.\d{3}\.\d{3}-\d{2}\b/,/\b\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}\b/,/\b\d{4}[- ]?\d{4}[- ]?\d{4}[- ]?\d{4}\b/].some(i=>i.test(t));n&&e.push("Sensitive data detected in response");let o=/[]/i.test(t)||t.includes("R$");return{isValid:e.length===0,language:o?"pt-BR":"en",contentType:"text",sensitiveDataDetected:n,complianceIssues:e}}s(kse,"validateBrazilianPortugueseContent");var Od=new Pe,Ise=u.object({messages:u.array(u.object({role:u.enum(["user","assistant","system","tool"]),content:u.string(),sensitiveDataRedacted:u.boolean().optional().default(!1),timestamp:u.string().datetime().optional(),sessionId:u.string().uuid().optional(),parts:u.array(u.object({type:u.literal("text"),text:u.string()})).optional()})).min(1,"At least one message is required").transform(t=>t.filter(e=>e.role!=="tool").map(e=>({...e,parts:e.parts||[{type:"text",text:e.content}]}))),provider:jU.optional().default("google"),tier:u.enum(["default","fast"]).optional().default("default")});Od.post("/chat",pe,Ve("json",Ise),async t=>{let e=Date.now(),{messages:r,provider:n,tier:o}=t.req.valid("json"),i=t.get("auth");if(!i?.user)return t.json({error:"Unauthorized"},401);let a=i.user.id,c=crypto.randomUUID(),l=r[r.length-1],d=l?.role==="user"?l.content:null;if(d&&typeof d=="string"){let p=UU(d);if(!p.isSafe)return await $h({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:d.slice(0,100),outputSummary:"Blocked: injection detected",latencyMs:Date.now()-e,outcome:"blocked",errorMessage:p.reason}),t.json({error:"Invalid input detected"},400)}try{let p=MU(n,o),m=VU(a,i.db);return gM({model:p,system:wM,messages:Qk(r),tools:m,maxSteps:5,onFinish:s(async({usage:y,finishReason:g,toolCalls:f})=>{let _=r,w=_[_.length-1],b=w?.role==="assistant"?w.content:g,S=typeof b=="string"?kse(b):{isValid:!0,language:"pt-BR",contentType:"text",sensitiveDataDetected:!1,complianceIssues:[]},k=S.sensitiveDataDetected?" [LGPD Warning: Sensitive data detected]":S.language==="pt-BR"?" [PT-BR]":" [EN]";await $h({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:f?.length?"tool_call":"chat",toolName:f?.map(R=>R.toolName).join(", "),inputSummary:typeof d=="string"?d.slice(0,100):"Multi-modal/Tool input",outputSummary:g+k,tokensUsed:y.totalTokens,latencyMs:Date.now()-e,outcome:S.isValid?"success":"error",errorMessage:S.complianceIssues.length>0?`Compliance issues: ${S.complianceIssues.join("; ")}`:void 0})},"onFinish")}).toDataStreamResponse()}catch(p){return await $h({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:typeof d=="string"?d.slice(0,100):"",outputSummary:"Error",latencyMs:Date.now()-e,outcome:"error",errorMessage:p instanceof Error?p.message:"Unknown error"}),t.json({error:"AI service error"},500)}});Od.get("/providers",pe,t=>t.json({available:zU(),default:"google"}));import{randomUUID as Dse}from"node:crypto";gr();Tr();import{randomUUID as Cse}from"node:crypto";var HU={BRL:{symbol:"R$",decimalSeparator:",",thousandsSeparator:".",maxAmount:99999999999e-2,minAmount:.01}},Bh=new Set(["001","033","104","237","341","260","077","021","025","036","037","039","041","047","062","063","064","065","066","069","070","074","075","078","079","083","084","085","089","102","105","107","108","109","110","111","112","114","117","118","119","120","121","122","124","125","126","127","128","129","130","131","132","133","134","136","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320"]),Pse={CNPJ:{format:"XX.XXX.XXX/XXXX-XX",regex:/^\d{14}$/},CPF:{format:"XXX.XXX.XXX-XX",regex:/^\d{11}$/},EMAIL:{format:"email@example.com",regex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},PHONE:{format:"+55 (XX) XXXXX-XXXX",regex:/^\+?\d{10,15}$/},RANDOM_KEY:{format:"XXXX-XXXX-XXXX-XXXX-XXXX",regex:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i}};var Ase={SUSPICIOUS_DESCRIPTIONS:["test","teste","debug","xxx","fake","fraud","hack","stolen","lavagem","dinheiro negro"],HIGH_VALUE_TRANSACTION:5e4,FREQUENT_SMALL_TRANSACTIONS:{count:20,amount:1e3,window:1440*60*1e3},RAPID_SUCCESSION:{count:5,window:300*1e3}},XBe={amount:u.number().min(HU.BRL.minAmount,"Amount must be at least R$ 0,01").max(HU.BRL.maxAmount,"Amount exceeds maximum allowed").refine(t=>Number.isFinite(t)&&Number(t.toFixed(2))===t,"Amount must have at most 2 decimal places"),bankAccount:u.object({account:u.string().regex(/^\d{1,12}$/,"Account must be 1-12 digits").refine(t=>!/^0+$/.test(t),"Account cannot be all zeros"),accountDigit:u.string().regex(/^\d$/,"Account digit must be a single digit"),agency:u.string().regex(/^\d{1,6}$/,"Agency must be 1-6 digits").refine(t=>!/^0+$/.test(t),"Agency cannot be all zeros"),bankCode:u.string().refine(t=>Bh.has(t),"Invalid Brazilian bank code")}),financialInstitution:u.object({code:u.string().refine(t=>Bh.has(t),"Invalid bank code"),name:u.string().min(2,"Institution name must be at least 2 characters").max(100,"Institution name must be less than 100 characters")}),pixKey:u.object({key:u.string().min(1,"PIX key cannot be empty"),type:u.enum(["cpf","cnpj","email","phone","random"])}).refine(t=>Pse[t.type.toUpperCase()].regex.test(t.key.replace(/\D/g,"")),"Invalid PIX key format for the specified type"),transaction:u.object({account_id:u.string().uuid("Conta banc\xE1ria inv\xE1lida"),amount:u.number(),category_id:u.string().uuid().optional(),description:u.string().min(3,"Description must be at least 3 characters").max(200,"Description must be less than 200 characters").refine(t=>!Ase.SUSPICIOUS_DESCRIPTIONS.some(e=>t.toLowerCase().includes(e)),"Description contains suspicious content"),is_manual_entry:u.boolean().default(!0),merchant_name:u.string().max(120).optional(),notes:u.string().max(500).optional(),payment_method:u.enum(["cash","debit_card","credit_card","pix","boleto","transfer"]).optional(),status:u.enum(["pending","posted","failed","cancelled"]).default("posted"),tags:u.array(u.string()).max(10).optional(),transaction_date:u.string().refine(t=>{let e=new Date(t);return!Number.isNaN(e.getTime())&&e>=new Date("2020-01-01")&&e<=new Date(Date.now()+1440*60*1e3)},"Invalid date. Must be a valid date between 2020-01-01 and tomorrow"),transaction_type:u.enum(["debit","credit","transfer","pix","boleto"])})};function ZU(t){let e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let r=0,n;for(let o=1;o<=9;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(11-o);if(n=r*10%11,(n===10||n===11)&&(n=0),n!==Number.parseInt(e.substring(9,10),10))return!1;r=0;for(let o=1;o<=10;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(12-o);return n=r*10%11,(n===10||n===11)&&(n=0),n===Number.parseInt(e.substring(10,11),10)}s(ZU,"validateCPF");var JU=["CHECKING","SAVINGS","INVESTMENT","SALARY","DIGITAL_WALLET"],Ose=["pending","manual","success","error"],$se=u.object({account_holder_name:u.string().optional(),account_mask:u.string().min(7,"M\xE1scara da conta \xE9 obrigat\xF3ria."),account_number:u.string().optional(),account_type:u.enum(JU),balance:u.number(),belvo_account_id:u.string().optional(),currency:u.string().default("BRL"),institution_id:u.string().min(1,"ID da institui\xE7\xE3o \xE9 obrigat\xF3rio."),institution_name:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio."),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),user_id:u.string().min(1,"Usu\xE1rio \xE9 obrigat\xF3rio.")}),Rse=u.object({account_holder_name:u.string().optional(),account_mask:u.string().optional(),account_number:u.string().optional(),account_type:u.enum(JU).optional(),balance:u.number().optional(),belvo_account_id:u.string().optional(),currency:u.string().optional(),institution_id:u.string().optional(),institution_name:u.string().optional(),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),sync_error_message:u.string().optional(),sync_status:u.enum(Ose).optional()}),Nse=new Set(["user_id","institution_name","institution_id","account_type","account_mask","account_holder_name","account_number","belvo_account_id","balance","currency","is_primary","is_active","sync_status","sync_error_message"]),KU="manual_",GU=s(t=>{if(!t)return!1;let e=t.trim();return Bh.has(e)?!0:/^[0-9a-f-]{8,}$/i.test(e)},"isValidInstitutionId"),WU=s(t=>!t||t.toUpperCase()==="BRL","isValidCurrency"),QU=s(t=>!t||t.startsWith(KU)?!0:/^[a-z0-9_-]{6,}$/i.test(t),"isValidBelvoId"),$d=s(t=>t?/^\*{4}\s\d{4}$/.test(t):!1,"validateAccountMask"),Rd=s(t=>/^\*{4}\d{4}$/.test(t)?`**** ${t.slice(-4)}`:t,"normalizeAccountMask"),XU=s(t=>t.map(e=>({field:e.path.join(".")||"root",message:e.message})),"collectZodErrors"),RI=s(t=>{let e={};return Object.entries(t).forEach(([r,n])=>{if(Nse.has(r)){if(typeof n=="string"){let o=n.trim();if(o==="")return;switch(r){case"currency":e.currency=o.toUpperCase();break;case"account_number":e.account_number=o.replace(/\s+/g,"");break;case"account_mask":e.account_mask=Rd(o);break;default:e[r]=o}return}if(typeof n=="number"){e[r]=Number(n);return}e[r]=n}}),e},"sanitizeBankAccountData"),YU=s(()=>`${KU}${Cse()}`,"generateManualAccountId"),eL=s(t=>{let e=[],r=$se.safeParse(t);if(!r.success)return e.push(...XU(r.error.issues)),{errors:e,valid:!1};let n=r.data;return $d(n.account_mask)||e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),GU(n.institution_id)||e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),WU(n.currency)||e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas no momento."}),QU(n.belvo_account_id)||e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForInsert"),tL=s(t=>{let e=[],r=Rse.safeParse(t);if(!r.success)return e.push(...XU(r.error.issues)),{errors:e,valid:!1};let n=r.data;return n.account_mask&&!$d(n.account_mask)&&e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),n.institution_id&&!GU(n.institution_id)&&e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),n.currency&&!WU(n.currency)&&e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas."}),n.belvo_account_id&&!QU(n.belvo_account_id)&&e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),n.balance!==void 0&&Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForUpdate");var jse=u.object({institutionName:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio"),accountType:u.enum(["checking","savings","investment","cash"],{message:"Tipo de conta \xE9 obrigat\xF3rio"}),balance:u.number().default(0),currency:u.string().default("BRL"),isPrimary:u.boolean().default(!1),isActive:u.boolean().default(!0),accountMask:u.string().optional(),institutionId:u.string().optional()}),Mse=u.object({institutionName:u.string().optional(),accountType:u.enum(["checking","savings","investment","cash"]).optional(),balance:u.number().optional(),currency:u.string().optional(),isPrimary:u.boolean().optional(),isActive:u.boolean().optional(),accountMask:u.string().optional()}),zse=u.object({balance:u.number()}),Use=u.object({days:u.coerce.number().int().positive().default(30)}),Lse={checking:"CHECKING",savings:"SAVINGS",investment:"INVESTMENT",cash:"DIGITAL_WALLET"},NI=s(t=>Lse[t.toLowerCase()]||t.toUpperCase(),"normalizeAccountType"),qse=s(()=>`**** ${Math.floor(1e3+Math.random()*9e3)}`,"generateAccountMask"),hi=new Pe;hi.get("/",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(ae).where(H(ae.userId,e.id)).orderBy(Nt(ae.createdAt));return t.json({data:o||[],meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});hi.get("/total-balance",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({balance:ae.balance,currency:ae.currency}).from(ae).where(Ee(H(ae.userId,e.id),H(ae.isActive,!0))),i={};return o&&o.forEach(a=>{let c=a.currency||"BRL";i[c]=(i[c]||0)+Number(a.balance||0)}),t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get total balance",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"TOTAL_BALANCE_ERROR",error:"Failed to calculate total balance"},500)}});hi.get("/:id",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(ae).where(Ee(H(ae.id,n),H(ae.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(i){return L.error("Failed to get bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_ERROR",error:"Failed to retrieve bank account"},500)}});hi.get("/:id/balance-history",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ve("query",Use),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{days:o}=t.req.valid("query"),i=t.get("requestId");try{if(!n||n==="all")return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let[a]=await r.select({balance:ae.balance}).from(ae).where(Ee(H(ae.id,n),H(ae.userId,e.id))).limit(1);if(!a)return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let c=Number(a.balance||0),l=[];for(let d=0;d<o;d++){let p=new Date;p.setDate(p.getDate()-d),l.push({date:p.toISOString(),balance:c})}return t.json({data:l.reverse(),meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get balance history",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_HISTORY_ERROR",error:"Failed to retrieve balance history"},500)}});hi.post("/",pe,Se({windowMs:60*1e3,max:10,message:"Too many account creation attempts, please try again later"}),Ve("json",jse),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=NI(n.accountType),a=n.accountMask?Rd(n.accountMask):qse();if(!$d(a))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);let c=n.institutionId||Dse(),l=YU(),d="manual",p=RI({user_id:e.id,institution_name:n.institutionName,institution_id:c,account_type:i,account_mask:a,balance:n.balance,currency:n.currency.toUpperCase(),is_primary:n.isPrimary,is_active:n.isActive,belvo_account_id:l,sync_status:d}),m=eL(p);if(!m.valid){let g=m.errors.length>0?m.errors.map(f=>f.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:g},400)}let[h]=await r.select({id:ae.id}).from(ae).where(Ee(H(ae.userId,e.id),H(ae.institutionId,c),H(ae.accountMask,a))).limit(1);if(h)return t.json({code:"CONFLICT",error:"J\xE1 existe uma conta com a mesma institui\xE7\xE3o e final"},409);let[y]=await r.insert(ae).values({userId:e.id,institutionName:n.institutionName,institutionId:c,accountType:i,accountMask:a,balance:String(n.balance),currency:n.currency.toUpperCase(),isPrimary:n.isPrimary,isActive:n.isActive,belvoAccountId:l,syncStatus:d}).returning();return L.info("Bank account created",{accountId:y.id,institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({data:y,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create bank account",{error:i instanceof Error?i.message:"Unknown error",institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_CREATE_ERROR",error:"Failed to create bank account"},500)}});hi.put("/:id",pe,Se({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ve("json",Mse),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:ae.id}).from(ae).where(Ee(H(ae.id,n),H(ae.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404);let c={};if(o.institutionName!==void 0&&(c.institutionName=o.institutionName),o.accountType!==void 0&&(c.accountType=NI(o.accountType)),o.balance!==void 0&&(c.balance=String(o.balance)),o.currency!==void 0&&(c.currency=o.currency.toUpperCase()),o.isPrimary!==void 0&&(c.isPrimary=o.isPrimary),o.isActive!==void 0&&(c.isActive=o.isActive),o.accountMask!==void 0){let m=Rd(o.accountMask);if(!$d(m))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);c.accountMask=m}let l=RI({institution_name:o.institutionName,account_type:o.accountType?NI(o.accountType):void 0,balance:o.balance,currency:o.currency?.toUpperCase(),is_primary:o.isPrimary,is_active:o.isActive,account_mask:o.accountMask?Rd(o.accountMask):void 0}),d=tL(l);if(!d.valid){let m=d.errors.length>0?d.errors.map(h=>h.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:m},400)}let[p]=await r.update(ae).set(c).where(Ee(H(ae.id,n),H(ae.userId,e.id))).returning();return t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to update bank account",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BANK_ACCOUNT_UPDATE_ERROR",error:"Failed to update bank account"},500)}});hi.patch("/:id/balance",pe,Se({windowMs:60*1e3,max:30,message:"Too many balance update attempts, please try again later"}),Ve("json",zse),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{balance:o}=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.update(ae).set({balance:String(o)}).where(Ee(H(ae.id,n),H(ae.userId,e.id))).returning();return a?t.json({data:a,meta:{requestId:i,updatedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(a){return L.error("Failed to update balance",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_UPDATE_ERROR",error:"Failed to update balance"},500)}});hi.delete("/:id",pe,Se({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return await r.delete(ae).where(Ee(H(ae.id,n),H(ae.userId,e.id))),L.info("Bank account deleted",{accountId:n,requestId:o,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})}catch(i){return L.error("Failed to delete bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_DELETE_ERROR",error:"Failed to delete bank account"},500)}});var DI=hi;var Vh=new Pe,Fse=u.object({accountType:u.string(),balance:u.number(),bankName:u.string(),currency:u.string(),id:u.string(),lastSync:u.string().datetime().optional()}),S5e=u.object({accounts:u.array(Fse),currency:u.string(),total:u.number()});Vh.get("/accounts",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{L.info("Bank accounts accessed",{requestId:r,userId:e.id});let n={accounts:[],currency:"BRL",total:0};return t.json({data:n,meta:{note:"Placeholder implementation - Belvo integration pending",requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Vh.post("/accounts/link",pe,Se({windowMs:60*1e3,max:5,message:"Too many link attempts, please try again later"}),Ve("json",u.object({bankCode:u.string(),credentials:u.record(u.string(),u.any())})),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Bank account link attempt",{bankCode:r.bankCode,requestId:n,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{bankCode:r.bankCode,note:"Belvo integration is pending implementation"},error:"Bank account linking not yet implemented"},501)}catch(o){return L.error("Failed to link bank account",{bankCode:r.bankCode,error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_LINK_ERROR",error:"Failed to link bank account"},500)}});Vh.post("/accounts/sync",pe,Se({windowMs:60*1e3,max:10,message:"Too many sync requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{return L.info("Bank accounts sync attempt",{requestId:r,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{note:"Belvo integration is pending implementation"},error:"Bank account synchronization not yet implemented"},501)}catch(n){return L.error("Failed to sync bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_SYNC_ERROR",error:"Failed to sync bank accounts"},500)}});var jI=Vh;gr();import*as Bc from"crypto";import{EventEmitter as Pq}from"events";import*as Zh from"crypto";var cs=class{static{s(this,"CryptoProvider")}computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}},Oc=class extends Error{static{s(this,"CryptoProviderOnlySupportsAsyncError")}};var Hh=class extends cs{static{s(this,"NodeCryptoProvider")}computeHMACSignature(e,r){return Zh.createHmac("sha256",r).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,r){return await this.computeHMACSignature(e,r)}async computeSHA256Async(e){return new Uint8Array(await Zh.createHash("sha256").update(e).digest())}};import*as zI from"http";import*as UI from"https";var Rr=class t{static{s(this,"HttpClient")}getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,o,i,a,c,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(t.TIMEOUT_ERROR_CODE);return e.code=t.TIMEOUT_ERROR_CODE,e}};Rr.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Rr.TIMEOUT_ERROR_CODE="ETIMEDOUT";var us=class{static{s(this,"HttpClientResponse")}constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var rL=zI.default||zI,nL=UI.default||UI,Bse=new rL.Agent({keepAlive:!0}),Vse=new nL.Agent({keepAlive:!0}),Nd=class extends Rr{static{s(this,"NodeHttpClient")}constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=this._agent;return p||(p=d?Bse:Vse),new Promise((h,y)=>{let g=(d?rL:nL).request({host:e,port:r,path:n,method:o,agent:p,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});g.setTimeout(l,()=>{g.destroy(Rr.makeTimeoutError())}),g.on("response",f=>{h(new MI(f))}),g.on("error",f=>{y(f)}),g.once("socket",f=>{f.connecting?f.once(d?"connect":"secureConnect",()=>{g.write(a),g.end()}):(g.write(a),g.end())})})}},MI=class extends us{static{s(this,"NodeHttpClientResponse")}constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,r)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",o=>{n+=o}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(o){r(o)}})})}};var gq=nu(hq(),1);var hP=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function yq(t){return t&&typeof t=="object"&&hP.some(e=>Object.prototype.hasOwnProperty.call(t,e))}s(yq,"isOptionsHash");function ps(t,e){return gq.stringify(t,{serializeDate:s(r=>Math.floor(r.getTime()/1e3).toString(),"serializeDate"),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}s(ps,"queryStringifyRequestData");var cg=(()=>{let t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(o,i)=>{let a=n[i];return gue(a)?encodeURIComponent(a):""})}})();function gue(t){return["number","string","boolean"].includes(typeof t)}s(gue,"isValidEncodeUriComponentType");function vq(t){let e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}s(vq,"extractUrlParams");function zc(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!yq(t[0]))return t.shift();let e=Object.keys(t[0]),r=e.filter(n=>hP.includes(n));return r.length>0&&r.length!==e.length&&Jd(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}s(zc,"getDataFromArgs");function ug(t){let e={host:null,headers:{},settings:{},streaming:!1};if(t.length>0){let r=t[t.length-1];if(typeof r=="string")e.authenticator=ag(t.pop());else if(yq(r)){let n=Object.assign({},t.pop()),o=Object.keys(n).filter(i=>!hP.includes(i));if(o.length&&Jd(`Invalid options found (${o.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=ag(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders),n.streaming&&(e.streaming=!0)}}return e}s(ug,"getOptionsFromArgs");function _q(t){let e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}s(_q,"protoExtend");function lg(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}s(lg,"removeNullish");function bq(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[yue(r)]=t[r],e),{}):t}s(bq,"normalizeHeaders");function yue(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}s(yue,"normalizeHeader");function Zd(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}s(Zd,"callbackifyPromiseWithTimeout");function wq(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}s(wq,"pascalToCamelCase");function Jd(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}s(Jd,"emitWarning");function vue(t){let e=typeof t;return(e==="function"||e==="object")&&!!t}s(vue,"isObject");function Sq(t){let e={},r=s((n,o)=>{Object.entries(n).forEach(([i,a])=>{let c=o?`${o}[${i}]`:i;if(vue(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,c);e[c]=a}else e[c]=String(a)})},"step");return r(t,null),e}s(Sq,"flattenAndStringify");function dg(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}s(dg,"validateInteger");function xq(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}s(xq,"determineProcessUserAgentProperties");function ag(t){let e=s(r=>(r.headers.Authorization="Bearer "+t,Promise.resolve()),"authenticator");return e._apiKey=t,e}s(ag,"createApiKeyAuthenticator");function Tq(t){let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e),n=0;return t.forEach(o=>{r.set(o,n),n+=o.length}),r}s(Tq,"concat");function _ue(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}s(_ue,"dateTimeReplacer");function Eq(t){return JSON.stringify(t,_ue)}s(Eq,"jsonStringifyRequestData");function Uc(t){return t&&t.startsWith("/v2")?"v2":"v1"}s(Uc,"getAPIMode");function pg(t){return Array.isArray(t)?t.join(", "):String(t)}s(pg,"parseHttpHeaderAsString");function kq(t){let e=Array.isArray(t)?t[0]:t;return Number(e)}s(kq,"parseHttpHeaderAsNumber");function Iq(t){return Object.entries(t).map(([e,r])=>[e,pg(r)])}s(Iq,"parseHeadersForFetch");var mg=class t extends Rr{static{s(this,"FetchHttpClient")}constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=t.makeFetchWithAbortTimeout(e):this._fetchFn=t.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,o)=>{let i,a=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Rr.makeTimeoutError())},o)}),c=e(r,n);return Promise.race([c,a]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(r,n,o)=>{let i=new AbortController,a=setTimeout(()=>{a=null,i.abort(Rr.makeTimeoutError())},o);try{return await e(r,Object.assign(Object.assign({},n),{signal:i.signal}))}catch(c){throw c.name==="AbortError"?Rr.makeTimeoutError():c}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=new URL(n,`${d?"http":"https"}://${e}`);p.port=r;let m=o=="POST"||o=="PUT"||o=="PATCH",h=a||(m?"":void 0),y=await this._fetchFn(p.toString(),{method:o,headers:Iq(i),body:h},l);return new gP(y)}},gP=class t extends us{static{s(this,"FetchHttpClientResponse")}constructor(e){super(e.status,t._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let r={};for(let n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}};var fg=class extends cs{static{s(this,"SubtleCryptoProvider")}constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Oc("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){let n=new TextEncoder,o=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",o,n.encode(e)),a=new Uint8Array(i),c=new Array(a.length);for(let l=0;l<a.length;l++)c[l]=yP[a[l]];return c.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}},yP=new Array(256);for(let t=0;t<yP.length;t++)yP[t]=t.toString(16).padStart(2,"0");var hg=class{static{s(this,"PlatformFunctions")}constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;let n=e.length,o=0;for(let i=0;i<n;++i)o|=e.charCodeAt(i)^r.charCodeAt(i);return o===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new mg(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new fg(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var wg={};hn(wg,{StripeAPIError:()=>Lc,StripeAuthenticationError:()=>qc,StripeCardError:()=>gg,StripeConnectionError:()=>Wd,StripeError:()=>or,StripeIdempotencyError:()=>yg,StripeInvalidGrantError:()=>vg,StripeInvalidRequestError:()=>Kd,StripePermissionError:()=>Gd,StripeRateLimitError:()=>Fc,StripeSignatureVerificationError:()=>po,StripeUnknownError:()=>_g,TemporarySessionExpiredError:()=>bg,generateV1Error:()=>Qd,generateV2Error:()=>vP});var Qd=s(t=>{switch(t.type){case"card_error":return new gg(t);case"invalid_request_error":return new Kd(t);case"api_error":return new Lc(t);case"authentication_error":return new qc(t);case"rate_limit_error":return new Fc(t);case"idempotency_error":return new yg(t);case"invalid_grant":return new vg(t);default:return new _g(t)}},"generateV1Error"),vP=s(t=>{switch(t.type){case"temporary_session_expired":return new bg(t)}switch(t.code){case"invalid_fields":return new Kd(t)}return Qd(t)},"generateV2Error"),or=class extends Error{static{s(this,"StripeError")}constructor(e={},r=null){var n;super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=(n=e.message)!==null&&n!==void 0?n:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};or.generate=Qd;var gg=class extends or{static{s(this,"StripeCardError")}constructor(e={}){super(e,"StripeCardError")}},Kd=class extends or{static{s(this,"StripeInvalidRequestError")}constructor(e={}){super(e,"StripeInvalidRequestError")}},Lc=class extends or{static{s(this,"StripeAPIError")}constructor(e={}){super(e,"StripeAPIError")}},qc=class extends or{static{s(this,"StripeAuthenticationError")}constructor(e={}){super(e,"StripeAuthenticationError")}},Gd=class extends or{static{s(this,"StripePermissionError")}constructor(e={}){super(e,"StripePermissionError")}},Fc=class extends or{static{s(this,"StripeRateLimitError")}constructor(e={}){super(e,"StripeRateLimitError")}},Wd=class extends or{static{s(this,"StripeConnectionError")}constructor(e={}){super(e,"StripeConnectionError")}},po=class extends or{static{s(this,"StripeSignatureVerificationError")}constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}},yg=class extends or{static{s(this,"StripeIdempotencyError")}constructor(e={}){super(e,"StripeIdempotencyError")}},vg=class extends or{static{s(this,"StripeInvalidGrantError")}constructor(e={}){super(e,"StripeInvalidGrantError")}},_g=class extends or{static{s(this,"StripeUnknownError")}constructor(e={}){super(e,"StripeUnknownError")}},bg=class extends or{static{s(this,"TemporarySessionExpiredError")}constructor(e={}){super(e,"TemporarySessionExpiredError")}};import{exec as bue}from"child_process";var _P=class extends or{static{s(this,"StreamProcessingError")}},Sg=class extends hg{static{s(this,"NodePlatformFunctions")}constructor(){super(),this._exec=bue,this._UNAME_CACHE=null}uuid4(){return Bc.randomUUID?Bc.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,r)=>{try{this._exec("uname -a",(n,o)=>{if(n)return e(null);e(o)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,r){if(!e||!r)throw new Error("secureCompare must receive two arguments");if(e.length!==r.length)return!1;if(Bc.timingSafeEqual){let n=new TextEncoder,o=n.encode(e),i=n.encode(r);return Bc.timingSafeEqual(o,i)}return super.secureCompare(e,r)}createEmitter(){return new Pq}tryBufferData(e){if(!(e.file.data instanceof Pq))return Promise.resolve(e);let r=[];return new Promise((n,o)=>{e.file.data.on("data",i=>{r.push(i)}).once("end",()=>{let i=Object.assign({},e);i.file.data=Tq(r),n(i)}).on("error",i=>{o(new _P({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(e){return new Nd(e)}createDefaultHttpClient(){return new Nd}createNodeCryptoProvider(){return new Hh}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var wue=60,xg=class t{static{s(this,"RequestSender")}constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_normalizeStripeContext(e,r){return e?e.toString()||null:r?.toString()||null}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){let o=Date.now(),i=o-e.request_start_time;return lg({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:i,request_start_time:e.request_start_time,request_end_time:o})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return o=>{let i=o.getHeaders(),a=s(()=>{let l=this._makeResponseEvent(e,o.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,r)},"streamCompleteCallback"),c=o.toStream(a);return this._addHeadersDirectlyToObject(c,i),n(null,c)}}_jsonResponseHandler(e,r,n,o){return i=>{let a=i.getHeaders(),c=this._getRequestId(a),l=i.getStatusCode(),d=this._makeResponseEvent(e,l,a);this._stripe._emitter.emit("response",d),i.toJSON().then(p=>{if(p.error){let m;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=a,p.error.statusCode=l,p.error.requestId=c,l===401?m=new qc(p.error):l===403?m=new Gd(p.error):l===429?m=new Fc(p.error):r==="v2"?m=vP(p.error):m=Qd(p.error),m}return p},p=>{throw new Lc({message:"Invalid JSON received from the Stripe API",exception:p,requestId:a["request-id"]})}).then(p=>{this._recordRequestMetrics(c,d.elapsed,n);let m=i.getRawResponse();this._addHeadersDirectlyToObject(m,a),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:m}),o(null,p)},p=>o(p,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,o){return o&&r===0&&Rr.CONNECTION_CLOSED_ERROR_CODES.includes(o.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){let n=this._stripe.getInitialNetworkRetryDelay(),o=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(n*Math.pow(2,e-1),o);return i*=.5*(1+Math.random()),i=Math.max(n,i),Number.isInteger(r)&&r<=wue&&(i=Math.max(i,r)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){let o=this._getMaxNetworkRetries(r),i=s(()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`,"genKey");if(n==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(n==="v1"&&e==="POST"&&o>0)return i();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:o,method:i,userSuppliedHeaders:a,userSuppliedSettings:c,stripeAccount:l,stripeContext:d,apiMode:p}){let m={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":o,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,c,p)},h=i=="POST"||i=="PUT"||i=="PATCH";return(h||r)&&(h||Jd(`${i} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(lg(m),bq(a))}_getUserAgentString(e){let r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Jd("Request metrics buffer is full, dropping telemetry message.");else{let o={request_id:e,request_duration_ms:r};n&&n.length>0&&(o.usage=n),this._stripe._prevRequestMetrics.push(o)}}_rawRequest(e,r,n,o,i){return new Promise((c,l)=>{let d;try{let g=e.toUpperCase();if(g!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let f=[].slice.call([n,o]),_=zc(f),w=g==="POST"?Object.assign({},_):null,b=ug(f),S=b.headers,k=b.authenticator;d={requestMethod:g,requestPath:r,bodyData:w,queryData:{},authenticator:k,headers:S,host:b.host,streaming:!!b.streaming,settings:{},usage:i||["raw_request"]}}catch(g){l(g);return}function p(g,f){g?l(g):c(f)}s(p,"requestCallback");let{headers:m,settings:h}=d,y=d.authenticator;this._request(d.requestMethod,d.host,r,d.bodyData,y,{headers:m,settings:h,streaming:d.streaming},d.usage,p)})}_request(e,r,n,o,i,a,c=[],l,d=null){var p;let m;i=(p=i??this._stripe._authenticator)!==null&&p!==void 0?p:null;let h=Uc(n),y=s((_,w,b,S,k)=>setTimeout(_,this._getSleepTimeInMS(S,k),w,b,S+1),"retryRequest"),g=s((_,w,b)=>{let S=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),k={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},w),body:m,protocol:this._stripe.getApiField("protocol")};i(k).then(()=>{let R=this._stripe.getApiField("httpClient").makeRequest(k.host,k.port,k.path,k.method,k.headers,k.body,k.protocol,S),O=Date.now(),C=lg({api_version:_,account:pg(w["Stripe-Account"]),idempotency_key:pg(w["Idempotency-Key"]),method:e,path:n,request_start_time:O}),$=b||0,P=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",C),R.then(N=>t._shouldRetry(N,$,P)?y(g,_,w,$,kq(N.getHeaders()["retry-after"])):a.streaming&&N.getStatusCode()<400?this._streamingResponseHandler(C,c,l)(N):this._jsonResponseHandler(C,h,c,l)(N)).catch(N=>{if(t._shouldRetry(null,$,P,N))return y(g,_,w,$,null);{let j=N.code&&N.code===Rr.TIMEOUT_ERROR_CODE;return l(new Wd({message:j?`Request aborted due to timeout being reached (${S}ms)`:t._generateConnectionErrorMessage($),detail:N}))}})}).catch(R=>{throw new or({message:"Unable to authenticate the request",exception:R})})},"makeRequest"),f=s((_,w)=>{if(_)return l(_);m=w,this._stripe.getClientUserAgent(b=>{var S,k,R;let O=this._stripe.getApiField("version"),C=this._makeHeaders({contentType:h=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(m).length,apiVersion:O,clientUserAgent:b,method:e,userSuppliedHeaders:(S=a.headers)!==null&&S!==void 0?S:null,userSuppliedSettings:(k=a.settings)!==null&&k!==void 0?k:{},stripeAccount:(R=a.stripeAccount)!==null&&R!==void 0?R:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(a.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:h});g(O,C,0)})},"prepareAndMakeRequest");if(d)d(e,o,a.headers,f);else{let _;h=="v2"?_=o?Eq(o):"":_=ps(o||{},h),f(null,_)}}};var Tg=class{static{s(this,"V1Iterator")}constructor(e,r,n,o){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=o}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=Cq(this.requestArgs);if(this.index<e.data.length){let n=r?e.data.length-1-this.index:this.index,o=e.data[n];return this.index+=1,{value:o,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}},wP=class extends Tg{static{s(this,"V1ListIterator")}getNextPage(e){let r=Cq(this.requestArgs),n=Eue(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}},SP=class extends Tg{static{s(this,"V1SearchIterator")}getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},xP=class{static{s(this,"V2ListIterator")}constructor(e,r,n,o){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=o}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}},Aq=s((t,e,r,n)=>{let o=Uc(r.fullPath||r.path);return o!=="v2"&&r.methodType==="search"?bP(new SP(n,e,r,t)):o!=="v2"&&r.methodType==="list"?bP(new wP(n,e,r,t)):o==="v2"&&r.methodType==="list"?bP(new xP(n,e,r,t)):null},"makeAutoPaginationMethods"),bP=s(t=>{let e=kue((...o)=>t.next(...o)),r=Iue(e),n={autoPagingEach:e,autoPagingToArray:r,next:s(()=>t.next(),"next"),return:s(()=>({}),"return"),[Sue()]:()=>n};return n},"makeAutoPaginationMethodsFromIterator");function Sue(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}s(Sue,"getAsyncIteratorSymbol");function xue(t){if(t.length<2)return null;let e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}s(xue,"getDoneCallback");function Tue(t){if(t.length===0)return;let e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return s(function(n,o){let i=e(n);o(i)},"_onItem")}s(Tue,"getItemCallback");function Eue(t,e){let r=e?0:t.data.length-1,n=t.data[r],o=n&&n.id;if(!o)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return o}s(Eue,"getLastId");function kue(t){return s(function(){let r=[].slice.call(arguments),n=Tue(r),o=xue(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let i=Pue(t,n);return Zd(i,o)},"autoPagingEach")}s(kue,"makeAutoPagingEach");function Iue(t){return s(function(r,n){let o=r&&r.limit;if(!o)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(o>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((a,c)=>{let l=[];t(d=>{if(l.push(d),l.length>=o)return!1}).then(()=>{a(l)}).catch(c)});return Zd(i,n)},"autoPagingToArray")}s(Iue,"makeAutoPagingToArray");function Pue(t,e){return new Promise((r,n)=>{function o(i){if(i.done){r();return}let a=i.value;return new Promise(c=>{e(a,c)}).then(c=>c===!1?o({done:!0,value:void 0}):t().then(o))}s(o,"handleIteration"),t().then(o).catch(n)})}s(Pue,"wrapAsyncIteratorWithCallback");function Cq(t){let e=[].slice.call(t);return!!zc(e).ending_before}s(Cq,"isReverseIteration");function Oq(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){let r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=vq(t.fullPath||this.createResourcePathWithSymbols(t.path||""));let n=Zd(this._makeRequest(e,t,{}),r);return Object.assign(n,Aq(this,e,t,n)),n}}s(Oq,"stripeMethod");T.extend=_q;T.method=Oq;T.MAX_BUFFERED_REQUEST_METRICS=100;function T(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=cg(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=cg(this.path),this.initialize(...arguments)}s(T,"StripeResource");T.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){let r=[this.basePath(e),this.path(e)];if(typeof t=="function"){let n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;let o=(e.method||"GET").toUpperCase(),i=e.usage||[],a=e.urlParams||[],c=e.encode||(C=>C),l=!!e.fullPath,d=cg(l?e.fullPath:e.path||""),p=l?e.fullPath:this.createResourcePathWithSymbols(e.path),m=[].slice.call(t),h=a.reduce((C,$)=>{let P=m.shift();if(typeof P!="string")throw new Error(`Stripe: Argument "${$}" must be a string, but got: ${P} (on API request to \`${o} ${p}\`)`);return C[$]=P,C},{}),y=zc(m),g=c(Object.assign({},y,r)),f=ug(m),_=f.host||e.host,w=!!e.streaming||!!f.streaming;if(m.filter(C=>C!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${p}\`)`);let b=l?d(h):this.createFullPath(d,h),S=Object.assign(f.headers,e.headers);e.validator&&e.validator(g,{headers:S});let k=e.method==="GET"||e.method==="DELETE";return{requestMethod:o,requestPath:b,bodyData:k?null:g,queryData:k?g:{},authenticator:(n=f.authenticator)!==null&&n!==void 0?n:null,headers:S,host:_??null,streaming:w,settings:f.settings,usage:i}},_makeRequest(t,e,r){return new Promise((n,o)=>{var i;let a;try{a=this._getRequestOpts(t,e,r)}catch(h){o(h);return}function c(h,y){h?o(h):n(e.transformResponseData?e.transformResponseData(y):y)}s(c,"requestCallback");let l=Object.keys(a.queryData).length===0,d=[a.requestPath,l?"":"?",ps(a.queryData,Uc(a.requestPath))].join(""),{headers:p,settings:m}=a;this._stripe._requestSender._request(a.requestMethod,a.host,d,a.bodyData,a.authenticator,{headers:p,settings:m,streaming:a.streaming},a.usage,c,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};var Xd=class t{static{s(this,"StripeContext")}constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new t([...this._segments,e])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new t(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return e?new t(e.split("/")):new t([])}};function $q(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,m,h,y,g,f){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,m,h,y||e.DEFAULT_TOLERANCE,g,f)}catch(w){throw w instanceof Oc&&(w.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),w}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,m,h,y,g,f){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,m,h,y||e.DEFAULT_TOLERANCE,g,f),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:s(function(p){let m=d(p),h=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderString"),generateTestHeaderStringAsync:s(async function(p){let m=d(p),h=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderStringAsync")},r={EXPECTED_SCHEME:"v1",verifyHeader(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:S}=o(p,m,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=g.computeHMACSignature(n(w,b),h);return i(w,_,b,R,y,S,k,f),!0},async verifyHeaderAsync(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:w,details:b,suspectPayloadType:S}=o(p,m,this.EXPECTED_SCHEME),k=/\s/.test(h);g=g||l();let R=await g.computeHMACSignatureAsync(n(w,b),h);return i(w,_,b,R,y,S,k,f)}};function n(p,m){return`${m.timestamp}.${p}`}s(n,"makeHMACContent");function o(p,m,h){if(!p)throw new po(m,p,{message:"No webhook payload was provided."});let y=typeof p!="string"&&!(p instanceof Uint8Array),g=new TextDecoder("utf8"),f=p instanceof Uint8Array?g.decode(p):p;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new po(m,p,{message:"No stripe-signature header value was provided."});let _=m instanceof Uint8Array?g.decode(m):m,w=a(_,h);if(!w||w.timestamp===-1)throw new po(_,f,{message:"Unable to extract timestamp and signatures from header"});if(!w.signatures.length)throw new po(_,f,{message:"No signatures found with expected scheme"});return{decodedPayload:f,decodedHeader:_,details:w,suspectPayloadType:y}}s(o,"parseEventDetails");function i(p,m,h,y,g,f,_,w){let b=!!h.signatures.filter(t.secureCompare.bind(t,y)).length,S=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,k=_?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!b)throw f?new po(m,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+S+`
`+k}):new po(m,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+S+`
`+k});let R=Math.floor((typeof w=="number"?w:Date.now())/1e3)-h.timestamp;if(g>0&&R>g)throw new po(m,p,{message:"Timestamp outside the tolerance zone"});return!0}s(i,"validateComputedSignature");function a(p,m){return typeof p!="string"?null:p.split(",").reduce((h,y)=>{let g=y.split("=");return g[0]==="t"&&(h.timestamp=parseInt(g[1],10)),g[0]===m&&h.signatures.push(g[1]),h},{timestamp:-1,signatures:[]})}s(a,"parseHeader");let c=null;function l(){return c||(c=t.createDefaultCryptoProvider()),c}s(l,"getCryptoProvider");function d(p){if(!p)throw new or({message:"Options are required"});let m=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),h=p.scheme||r.EXPECTED_SCHEME,y=p.cryptoProvider||l(),g=`${m}.${p.payload}`,f=s(_=>`t=${m},${h}=${_}`,"generateHeaderString");return Object.assign(Object.assign({},p),{timestamp:m,scheme:h,cryptoProvider:y,payloadString:g,generateHeaderString:f})}return s(d,"prepareOptions"),e.signature=r,e}s($q,"createWebhooks");var TP="2025-11-17.clover";var Yc={};hn(Yc,{Account:()=>MP,AccountLinks:()=>y6,AccountSessions:()=>v6,Accounts:()=>MP,ApplePayDomains:()=>_6,ApplicationFees:()=>b6,Apps:()=>ele,Balance:()=>w6,BalanceSettings:()=>x6,BalanceTransactions:()=>E6,Billing:()=>tle,BillingPortal:()=>rle,Charges:()=>k6,Checkout:()=>nle,Climate:()=>ole,ConfirmationTokens:()=>I6,CountrySpecs:()=>A6,Coupons:()=>C6,CreditNotes:()=>O6,CustomerSessions:()=>$6,Customers:()=>R6,Disputes:()=>N6,Entitlements:()=>ile,EphemeralKeys:()=>j6,Events:()=>z6,ExchangeRates:()=>L6,FileLinks:()=>q6,Files:()=>B6,FinancialConnections:()=>sle,Forwarding:()=>ale,Identity:()=>cle,InvoiceItems:()=>V6,InvoicePayments:()=>Z6,InvoiceRenderingTemplates:()=>J6,Invoices:()=>K6,Issuing:()=>ule,Mandates:()=>G6,OAuth:()=>Q6,PaymentAttemptRecords:()=>Y6,PaymentIntents:()=>eB,PaymentLinks:()=>tB,PaymentMethodConfigurations:()=>rB,PaymentMethodDomains:()=>nB,PaymentMethods:()=>oB,PaymentRecords:()=>iB,Payouts:()=>sB,Plans:()=>aB,Prices:()=>cB,Products:()=>uB,PromotionCodes:()=>lB,Quotes:()=>dB,Radar:()=>lle,Refunds:()=>pB,Reporting:()=>dle,Reviews:()=>mB,SetupAttempts:()=>fB,SetupIntents:()=>hB,ShippingRates:()=>gB,Sigma:()=>ple,Sources:()=>yB,SubscriptionItems:()=>vB,SubscriptionSchedules:()=>_B,Subscriptions:()=>bB,Tax:()=>mle,TaxCodes:()=>SB,TaxIds:()=>xB,TaxRates:()=>TB,Terminal:()=>fle,TestHelpers:()=>hle,Tokens:()=>kB,Topups:()=>IB,Transfers:()=>PB,Treasury:()=>gle,V2:()=>yle,WebhookEndpoints:()=>AB});function Aue(t,e){for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=r[0].toLowerCase()+r.substring(1),o=new e[r](t);this[n]=o}}s(Aue,"ResourceNamespace");function Kt(t,e){return function(r){return new Aue(r,e)}}s(Kt,"resourceNamespace");var Qs=T.method,Rq=T.extend({retrieve:Qs({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Qs({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Qs({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Qs({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Qs({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Qs({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Qs({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var Nq=T.method,Dq=T.extend({retrieve:Nq({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Nq({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var Vc=T.method,jq=T.extend({create:Vc({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:Vc({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:Vc({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:Vc({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:Vc({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:Vc({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})});var Cue=T.method,Mq=T.extend({find:Cue({method:"GET",fullPath:"/v1/tax/associations/find"})});var Yd=T.method,zq=T.extend({retrieve:Yd({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:Yd({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:Yd({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:Yd({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:Yd({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var Xs=T.method,Uq=T.extend({create:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Xs({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var EP=T.method,Lq=T.extend({create:EP({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:EP({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:EP({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var Eg=T.method,qq=T.extend({create:Eg({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:Eg({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:Eg({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:Eg({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var kg=T.method,Fq=T.extend({create:kg({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:kg({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:kg({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:kg({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var ep=T.method,Bq=T.extend({deliverCard:ep({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:ep({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:ep({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:ep({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:ep({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})});var Ig=T.method,Vq=T.extend({create:Ig({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:Ig({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:Ig({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:Ig({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var tp=T.method,Hq=T.extend({create:tp({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:tp({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:tp({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:tp({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:tp({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var Oue=T.method,Zq=T.extend({create:Oue({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var $ue=T.method,Jq=T.extend({create:$ue({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var Rue=T.method,Kq=T.extend({retrieve:Rue({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})});var Gq=T.method,Wq=T.extend({retrieve:Gq({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Gq({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})});var Hc=T.method,Qq=T.extend({create:Hc({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:Hc({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:Hc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:Hc({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:Hc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:Hc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})});var kP=T.method,Xq=T.extend({create:kP({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:kP({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:kP({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var Nue=T.method,Yq=T.extend({fundCashBalance:Nue({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var IP=T.method,eF=T.extend({create:IP({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:IP({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:IP({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var rp=T.method,tF=T.extend({create:rp({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:rp({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:rp({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:rp({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:rp({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var rF=T.method,nF=T.extend({retrieve:rF({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:rF({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var ms=T.method,oF=T.extend({create:ms({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:ms({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:ms({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:ms({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:ms({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:ms({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:ms({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:ms({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})});var PP=T.method,iF=T.extend({retrieve(...t){return PP({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:s(r=>this.addFetchRelatedObjectIfNeeded(r),"transformResponseData")}).apply(this,t)},list(...t){return PP({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:s(r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))}),"transformResponseData")}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:s(()=>PP({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeContext:t.context}]),"fetchRelatedObject")})}});var Pg=T.method,sF=T.extend({create:Pg({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:Pg({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:Pg({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:Pg({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var Ys=T.method,aF=T.extend({create:Ys({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Ys({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Ys({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Ys({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Ys({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Ys({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Ys({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var AP=T.method,cF=T.extend({fail:AP({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:AP({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:AP({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var Ag=T.method,uF=T.extend({create:Ag({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Ag({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Ag({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Ag({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var np=T.method,lF=T.extend({create:np({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:np({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:np({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:np({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:np({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var Due=T.method,dF=T.extend({create:Due({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var jue=T.method,pF=T.extend({create:jue({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})});var Mue=T.method,mF=T.extend({create:Mue({method:"POST",fullPath:"/v2/billing/meter_event_session"})});var zue=T.method,fF=T.extend({create:zue({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})});var Uue=T.method,hF=T.extend({create:Uue({method:"POST",fullPath:"/v1/billing/meter_events"})});var Lue=T.method,gF=T.extend({create:Lue({method:"POST",fullPath:"/v2/billing/meter_events"})});var ea=T.method,yF=T.extend({create:ea({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:ea({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:ea({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:ea({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:ea({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:ea({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:ea({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var que=T.method,vF=T.extend({create:que({method:"POST",fullPath:"/v1/terminal/onboarding_links"})});var op=T.method,_F=T.extend({create:op({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:op({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:op({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:op({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:op({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var Cg=T.method,bF=T.extend({update:Cg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:Cg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:Cg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:Cg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var Og=T.method,wF=T.extend({create:Og({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Og({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Og({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Og({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var $g=T.method,SF=T.extend({update:$g({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:$g({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:$g({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:$g({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var Rg=T.method,xF=T.extend({create:Rg({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Rg({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Rg({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Rg({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var Ng=T.method,TF=T.extend({create:Ng({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:Ng({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:Ng({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:Ng({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var CP=T.method,EF=T.extend({activate:CP({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:CP({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:CP({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var kF=T.method,IF=T.extend({retrieve:kF({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:kF({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var PF=T.method,AF=T.extend({retrieve:PF({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:PF({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var En=T.method,CF=T.extend({create:En({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:En({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:En({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:En({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:En({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var OP=T.method,OF=T.extend({presentPaymentMethod:OP({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:OP({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:OP({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})});var Fue=T.method,$F=T.extend({create:Fue({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var RF=T.method,NF=T.extend({retrieve:RF({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:RF({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var Bue=T.method,DF=T.extend({create:Bue({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var jF=T.method,MF=T.extend({retrieve:jF({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:jF({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var Vue=T.method,zF=T.extend({expire:Vue({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var Dg=T.method,UF=T.extend({create:Dg({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Dg({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Dg({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Dg({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var $P=T.method,LF=T.extend({create:$P({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:$P({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:$P({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var qF=T.method,FF=T.extend({retrieve:qF({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:qF({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var RP=T.method,BF=T.extend({create:RP({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:RP({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:RP({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var VF=T.method,HF=T.extend({retrieve:VF({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:VF({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var jg=T.method,ZF=T.extend({create:jg({method:"POST",fullPath:"/v1/apps/secrets"}),list:jg({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:jg({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:jg({method:"GET",fullPath:"/v1/apps/secrets/find"})});var Hue=T.method,JF=T.extend({create:Hue({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var Zc=T.method,KF=T.extend({create:Zc({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Zc({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Zc({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Zc({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Zc({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Zc({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var GF=T.method,WF=T.extend({create:GF({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:GF({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var QF=T.method,XF=T.extend({retrieve:QF({method:"GET",fullPath:"/v1/tax/settings"}),update:QF({method:"POST",fullPath:"/v1/tax/settings"})});var YF=T.method,e6=T.extend({retrieve:YF({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:YF({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var ip=T.method,t6=T.extend({create:ip({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:ip({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:ip({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:ip({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:ip({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var NP=T.method,r6=T.extend({retrieve:NP({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:NP({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:NP({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var n6=T.method,o6=T.extend({retrieve:n6({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:n6({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var i6=T.method,s6=T.extend({retrieve:i6({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:i6({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var DP=T.method,a6=T.extend({retrieve:DP({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:DP({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:DP({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var Mg=T.method,c6=T.extend({retrieve:Mg({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Mg({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Mg({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Mg({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var jP=T.method,u6=T.extend({createForceCapture:jP({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:jP({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:jP({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var l6=T.method,d6=T.extend({retrieve:l6({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:l6({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var zg=T.method,p6=T.extend({create:zg({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:zg({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:zg({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:zg({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var sp=T.method,m6=T.extend({create:sp({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:sp({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:sp({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:sp({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:sp({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var f6=T.method,h6=T.extend({retrieve:f6({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:f6({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var Jc=T.method,g6=T.extend({create:Jc({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Jc({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Jc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Jc({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Jc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Jc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var ir=T.method,MP=T.extend({create:ir({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?ir({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),ir({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:ir({method:"POST",fullPath:"/v1/accounts/{account}"}),list:ir({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:ir({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:ir({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:ir({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:ir({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:ir({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:ir({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:ir({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:ir({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:ir({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:ir({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:ir({method:"GET",fullPath:"/v1/account"}),retrieveCapability:ir({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:ir({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:ir({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:ir({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:ir({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:ir({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var Zue=T.method,y6=T.extend({create:Zue({method:"POST",fullPath:"/v1/account_links"})});var Jue=T.method,v6=T.extend({create:Jue({method:"POST",fullPath:"/v1/account_sessions"})});var Ug=T.method,_6=T.extend({create:Ug({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Ug({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Ug({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Ug({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var Kc=T.method,b6=T.extend({retrieve:Kc({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Kc({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Kc({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Kc({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Kc({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Kc({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var Kue=T.method,w6=T.extend({retrieve:Kue({method:"GET",fullPath:"/v1/balance"})});var S6=T.method,x6=T.extend({retrieve:S6({method:"GET",fullPath:"/v1/balance_settings"}),update:S6({method:"POST",fullPath:"/v1/balance_settings"})});var T6=T.method,E6=T.extend({retrieve:T6({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:T6({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var Gc=T.method,k6=T.extend({create:Gc({method:"POST",fullPath:"/v1/charges"}),retrieve:Gc({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Gc({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Gc({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Gc({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Gc({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var Gue=T.method,I6=T.extend({retrieve:Gue({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var P6=T.method,A6=T.extend({retrieve:P6({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:P6({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var ap=T.method,C6=T.extend({create:ap({method:"POST",fullPath:"/v1/coupons"}),retrieve:ap({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:ap({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:ap({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:ap({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var fs=T.method,O6=T.extend({create:fs({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:fs({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:fs({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:fs({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:fs({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:fs({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:fs({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:fs({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var Wue=T.method,$6=T.extend({create:Wue({method:"POST",fullPath:"/v1/customer_sessions"})});var Rt=T.method,R6=T.extend({create:Rt({method:"POST",fullPath:"/v1/customers"}),retrieve:Rt({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Rt({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Rt({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Rt({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Rt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Rt({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Rt({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Rt({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Rt({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Rt({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Rt({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Rt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Rt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Rt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Rt({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Rt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Rt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Rt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Rt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Rt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Rt({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Rt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Rt({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Rt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Rt({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Rt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Rt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var Lg=T.method,N6=T.extend({retrieve:Lg({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Lg({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Lg({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Lg({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var D6=T.method,j6=T.extend({create:D6({method:"POST",fullPath:"/v1/ephemeral_keys",validator:s((t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")},"validator")}),del:D6({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var M6=T.method,z6=T.extend({retrieve:M6({method:"GET",fullPath:"/v1/events/{id}"}),list:M6({method:"GET",fullPath:"/v1/events",methodType:"list"})});var U6=T.method,L6=T.extend({retrieve:U6({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:U6({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var qg=T.method,q6=T.extend({create:qg({method:"POST",fullPath:"/v1/file_links"}),retrieve:qg({method:"GET",fullPath:"/v1/file_links/{link}"}),update:qg({method:"POST",fullPath:"/v1/file_links/{link}"}),list:qg({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var Que=s((t,e,r)=>{let n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;let o=new TextEncoder,i=new Uint8Array(0),a=o.encode(`\r
`);function c(p){let m=i,h=p instanceof Uint8Array?p:new Uint8Array(o.encode(p));i=new Uint8Array(m.length+h.length+2),i.set(m),i.set(h,m.length),i.set(a,i.length-2)}s(c,"push");function l(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}s(l,"q");let d=Sq(e);for(let p in d){if(!Object.prototype.hasOwnProperty.call(d,p))continue;let m=d[p];if(c(`--${n}`),Object.prototype.hasOwnProperty.call(m,"data")){let h=m;c(`Content-Disposition: form-data; name=${l(p)}; filename=${l(h.name||"blob")}`),c(`Content-Type: ${h.type||"application/octet-stream"}`),c(""),c(h.data)}else c(`Content-Disposition: form-data; name=${l(p)}`),c(""),c(m)}return c(`--${n}--`),i},"multipartDataGenerator");function F6(t,e,r,n){if(e=e||{},t!=="POST")return n(null,ps(e));this._stripe._platformFunctions.tryBufferData(e).then(o=>{let i=Que(t,o,r);return n(null,i)}).catch(o=>n(o,null))}s(F6,"multipartRequestDataProcessor");var zP=T.method,B6=T.extend({create:zP({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:zP({method:"GET",fullPath:"/v1/files/{file}"}),list:zP({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:F6});var cp=T.method,V6=T.extend({create:cp({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:cp({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:cp({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:cp({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:cp({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var H6=T.method,Z6=T.extend({retrieve:H6({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:H6({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})});var Fg=T.method,J6=T.extend({retrieve:Fg({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Fg({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Fg({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Fg({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})});var Ir=T.method,K6=T.extend({create:Ir({method:"POST",fullPath:"/v1/invoices"}),retrieve:Ir({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:Ir({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:Ir({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:Ir({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:Ir({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:Ir({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:Ir({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var Xue=T.method,G6=T.extend({retrieve:Xue({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var W6=T.method,UP="connect.stripe.com",Q6=T.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${UP}/${r}?${ps(t)}`},token:W6({method:"POST",path:"oauth/token",host:UP}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),W6({method:"POST",path:"oauth/deauthorize",host:UP}).apply(this,[t,...e])}});var X6=T.method,Y6=T.extend({retrieve:X6({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:X6({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})});var zn=T.method,eB=T.extend({create:zn({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:zn({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:zn({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:zn({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:zn({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:zn({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var up=T.method,tB=T.extend({create:up({method:"POST",fullPath:"/v1/payment_links"}),retrieve:up({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:up({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:up({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:up({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var Bg=T.method,rB=T.extend({create:Bg({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Bg({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Bg({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Bg({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var lp=T.method,nB=T.extend({create:lp({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:lp({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:lp({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:lp({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:lp({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var Wc=T.method,oB=T.extend({create:Wc({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Wc({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Wc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Wc({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Wc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Wc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var hs=T.method,iB=T.extend({retrieve:hs({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:hs({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:hs({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})});var Qc=T.method,sB=T.extend({create:Qc({method:"POST",fullPath:"/v1/payouts"}),retrieve:Qc({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Qc({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Qc({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Qc({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Qc({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var dp=T.method,aB=T.extend({create:dp({method:"POST",fullPath:"/v1/plans"}),retrieve:dp({method:"GET",fullPath:"/v1/plans/{plan}"}),update:dp({method:"POST",fullPath:"/v1/plans/{plan}"}),list:dp({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:dp({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var pp=T.method,cB=T.extend({create:pp({method:"POST",fullPath:"/v1/prices"}),retrieve:pp({method:"GET",fullPath:"/v1/prices/{price}"}),update:pp({method:"POST",fullPath:"/v1/prices/{price}"}),list:pp({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:pp({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var Do=T.method,uB=T.extend({create:Do({method:"POST",fullPath:"/v1/products"}),retrieve:Do({method:"GET",fullPath:"/v1/products/{id}"}),update:Do({method:"POST",fullPath:"/v1/products/{id}"}),list:Do({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:Do({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:Do({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:Do({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:Do({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:Do({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:Do({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Vg=T.method,lB=T.extend({create:Vg({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Vg({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Vg({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Vg({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var jo=T.method,dB=T.extend({create:jo({method:"POST",fullPath:"/v1/quotes"}),retrieve:jo({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:jo({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:jo({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:jo({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:jo({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:jo({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:jo({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:jo({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:jo({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var mp=T.method,pB=T.extend({create:mp({method:"POST",fullPath:"/v1/refunds"}),retrieve:mp({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:mp({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:mp({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:mp({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var LP=T.method,mB=T.extend({retrieve:LP({method:"GET",fullPath:"/v1/reviews/{review}"}),list:LP({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:LP({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var Yue=T.method,fB=T.extend({list:Yue({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var ta=T.method,hB=T.extend({create:ta({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:ta({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:ta({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:ta({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:ta({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:ta({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:ta({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var Hg=T.method,gB=T.extend({create:Hg({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Hg({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Hg({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Hg({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var fp=T.method,yB=T.extend({create:fp({method:"POST",fullPath:"/v1/sources"}),retrieve:fp({method:"GET",fullPath:"/v1/sources/{source}"}),update:fp({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:fp({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:fp({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var hp=T.method,vB=T.extend({create:hp({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:hp({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:hp({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:hp({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:hp({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})});var Xc=T.method,_B=T.extend({create:Xc({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:Xc({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:Xc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:Xc({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:Xc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:Xc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var yi=T.method,bB=T.extend({create:yi({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:yi({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:yi({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:yi({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:yi({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:yi({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:yi({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:yi({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:yi({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var wB=T.method,SB=T.extend({retrieve:wB({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:wB({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var Zg=T.method,xB=T.extend({create:Zg({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Zg({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Zg({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Zg({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var Jg=T.method,TB=T.extend({create:Jg({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Jg({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Jg({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Jg({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var EB=T.method,kB=T.extend({create:EB({method:"POST",fullPath:"/v1/tokens"}),retrieve:EB({method:"GET",fullPath:"/v1/tokens/{token}"})});var gp=T.method,IB=T.extend({create:gp({method:"POST",fullPath:"/v1/topups"}),retrieve:gp({method:"GET",fullPath:"/v1/topups/{topup}"}),update:gp({method:"POST",fullPath:"/v1/topups/{topup}"}),list:gp({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:gp({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var gs=T.method,PB=T.extend({create:gs({method:"POST",fullPath:"/v1/transfers"}),retrieve:gs({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:gs({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:gs({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:gs({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:gs({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:gs({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:gs({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var yp=T.method,AB=T.extend({create:yp({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:yp({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:yp({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:yp({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:yp({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var ele=Kt("apps",{Secrets:ZF}),tle=Kt("billing",{Alerts:jq,CreditBalanceSummary:Kq,CreditBalanceTransactions:Wq,CreditGrants:Qq,MeterEventAdjustments:dF,MeterEvents:hF,Meters:yF}),rle=Kt("billingPortal",{Configurations:Vq,Sessions:JF}),nle=Kt("checkout",{Sessions:KF}),ole=Kt("climate",{Orders:_F,Products:AF,Suppliers:e6}),ile=Kt("entitlements",{ActiveEntitlements:Dq,Features:sF}),sle=Kt("financialConnections",{Accounts:Rq,Sessions:WF,Transactions:s6}),ale=Kt("forwarding",{Requests:BF}),cle=Kt("identity",{VerificationReports:h6,VerificationSessions:g6}),ule=Kt("issuing",{Authorizations:zq,Cardholders:qq,Cards:Fq,Disputes:tF,PersonalizationDesigns:TF,PhysicalBundles:IF,Tokens:r6,Transactions:a6}),lle=Kt("radar",{EarlyFraudWarnings:nF,ValueListItems:p6,ValueLists:m6}),dle=Kt("reporting",{ReportRuns:LF,ReportTypes:FF}),ple=Kt("sigma",{ScheduledQueryRuns:HF}),mle=Kt("tax",{Associations:Mq,Calculations:Lq,Registrations:UF,Settings:XF,Transactions:c6}),fle=Kt("terminal",{Configurations:Hq,ConnectionTokens:Jq,Locations:lF,OnboardingLinks:vF,Readers:CF}),hle=Kt("testHelpers",{ConfirmationTokens:Zq,Customers:Yq,Refunds:zF,TestClocks:t6,Issuing:Kt("issuing",{Authorizations:Uq,Cards:Bq,PersonalizationDesigns:EF,Transactions:u6}),Terminal:Kt("terminal",{Readers:OF}),Treasury:Kt("treasury",{InboundTransfers:cF,OutboundPayments:bF,OutboundTransfers:SF,ReceivedCredits:$F,ReceivedDebits:DF})}),gle=Kt("treasury",{CreditReversals:Xq,DebitReversals:eF,FinancialAccounts:aF,InboundTransfers:uF,OutboundPayments:wF,OutboundTransfers:xF,ReceivedCredits:NF,ReceivedDebits:MF,TransactionEntries:o6,Transactions:d6}),yle=Kt("v2",{Billing:Kt("billing",{MeterEventAdjustments:pF,MeterEventSession:mF,MeterEventStream:fF,MeterEvents:gF}),Core:Kt("core",{EventDestinations:oF,Events:iF})});var CB="api.stripe.com",OB="443",$B="/v1/",RB=TP,NB=8e4,DB=5,jB=.5,vle=["name","version","url","partner_id"],MB=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],_le=s(t=>new xg(t,T.MAX_BUFFERED_REQUEST_METRICS),"defaultRequestSenderFactory");function zB(t,e=_le){r.PACKAGE_VERSION="20.0.0",r.API_VERSION=TP,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},xq()),r.StripeResource=T,r.StripeContext=Xd,r.resources=Yc,r.HttpClient=Rr,r.HttpClientResponse=us,r.CryptoProvider=cs,r.webhooks=$q(t);function r(n,o={}){if(!(this instanceof r))return new r(n,o);let i=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=i.httpAgent||null;this._api={host:i.host||CB,port:i.port||OB,protocol:i.protocol||"https",basePath:$B,version:i.apiVersion||RB,timeout:dg("timeout",i.timeout,NB),maxNetworkRetries:dg("maxNetworkRetries",i.maxNetworkRetries,2),agent:a,httpClient:i.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};let c=i.typescript||!1;c!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=c),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(n,i.authenticator),this.errors=wg,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=r.StripeResource}return s(r,"Stripe"),r.errors=wg,r.createNodeHttpClient=t.createNodeHttpClient,r.createFetchHttpClient=t.createFetchHttpClient,r.createNodeCryptoProvider=t.createNodeCryptoProvider,r.createSubtleCryptoProvider=t.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,o,i,a){return this._requestSender._rawRequest(n,o,i,a)},_setAuthenticator(n,o){if(n&&o)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!o)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?ag(n):o},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=vle.reduce((o,i)=>(typeof n[i]=="string"&&(o=o||{},o[i]=n[i]),o),{})},_setApiField(n,o){this._api[n]=o},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:s(n=>{switch(n){case"DEFAULT_HOST":return CB;case"DEFAULT_PORT":return OB;case"DEFAULT_BASE_PATH":return $B;case"DEFAULT_API_VERSION":return RB;case"DEFAULT_TIMEOUT":return NB;case"MAX_NETWORK_RETRY_DELAY_SEC":return DB;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return jB}return r[n]},"getConstant"),getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,o,i){let a=dg(n,o,i);this._setApiField(n,a)},getMaxNetworkRetryDelay(){return DB},getInitialNetworkRetryDelay(){return jB},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,o){this._platformFunctions.getUname().then(i=>{var a;let c={};for(let d in n)Object.prototype.hasOwnProperty.call(n,d)&&(c[d]=encodeURIComponent((a=n[d])!==null&&a!==void 0?a:"null"));c.uname=encodeURIComponent(i||"UNKNOWN");let l=this.getApiField("httpClient");l&&(c.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(c.application=this._appInfo),o(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let n in Yc)Object.prototype.hasOwnProperty.call(Yc,n)&&(this[wq(n)]=new Yc[n](this))},_getPropsFromConfig(n){if(!n)return{};let o=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:n};if(Object.keys(n).filter(c=>!MB.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${MB.join(", ")}`);return n},parseEventNotification(n,o,i,a,c,l){let d=this.webhooks.constructEvent(n,o,i,a,c,l);return d.context&&(d.context=Xd.parse(d.context)),d.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${d.id}`,void 0,{stripeContext:d.context},["fetch_event"]),d.fetchRelatedObject=()=>d.related_object?this._requestSender._rawRequest("GET",d.related_object.url,void 0,{stripeContext:d.context},["fetch_related_object"]):Promise.resolve(null),d}},r}s(zB,"createStripe");var ble=zB(new Sg),UB=ble;function wle(){let t=process.env.STRIPE_SECRET_KEY;if(!t)throw new Error("STRIPE_SECRET_KEY environment variable is not set. Configure Stripe credentials.");return t}s(wle,"getStripeSecretKey");var Sle={apiVersion:"2025-11-17.clover",typescript:!0,appInfo:{name:"AegisWallet",version:"1.0.0",url:"https://aegiswallet.com.br"}},qP=null;function kn(){return qP||(qP=new UB(wle(),Sle)),qP}s(kn,"getStripeClient");var ys=class t{static{s(this,"StripeCustomerService")}static async createCustomer(e,r,n){let o=kn();try{let i=await o.customers.create({email:r,name:n,metadata:{clerkUserId:e}});return L.info("Stripe customer created",{clerkUserId:e,stripeCustomerId:i.id}),i.id}catch(i){throw L.error("Failed to create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao criar cliente no Stripe")}}static async getOrCreateCustomer(e,r,n){let o=kn();try{let i=await o.customers.search({query:`metadata['clerkUserId']:'${e}'`,limit:1});if(i.data.length>0)return i.data[0].id;let a=await o.customers.list({email:r,limit:1});return a.data.length>0?(await o.customers.update(a.data[0].id,{metadata:{clerkUserId:e}}),a.data[0].id):await t.createCustomer(e,r,n)}catch(i){throw L.error("Failed to get/create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao processar cliente no Stripe")}}static async updateCustomer(e,r){let n=kn();try{await n.customers.update(e,r)}catch(o){throw L.error("Failed to update Stripe customer",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async deleteCustomer(e){let r=kn();try{let n=await r.subscriptions.list({customer:e,status:"active"});for(let o of n.data)await r.subscriptions.cancel(o.id);await r.customers.del(e),L.info("Stripe customer deleted",{stripeCustomerId:e})}catch(n){throw L.error("Failed to delete Stripe customer",{stripeCustomerId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}};An();Tr();var xle=u.object({STRIPE_SECRET_KEY:u.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_PUBLISHABLE_KEY:u.string().min(1,"STRIPE_PUBLISHABLE_KEY is required"),STRIPE_WEBHOOK_SECRET:u.string().min(1,"STRIPE_WEBHOOK_SECRET is required"),STRIPE_SUCCESS_URL:u.string().url("STRIPE_SUCCESS_URL must be a valid URL"),STRIPE_CANCEL_URL:u.string().url("STRIPE_CANCEL_URL must be a valid URL"),STRIPE_PORTAL_RETURN_URL:u.string().url("STRIPE_PORTAL_RETURN_URL must be a valid URL"),STRIPE_PRICE_BASIC_MONTHLY:u.string().min(1,"STRIPE_PRICE_BASIC_MONTHLY is required"),STRIPE_PRICE_ADVANCED_MONTHLY:u.string().min(1,"STRIPE_PRICE_ADVANCED_MONTHLY is required")}),Mo;try{Mo=xle.parse(process.env)}catch{Mo=process.env}var ra={secretKey:Mo?.STRIPE_SECRET_KEY,publishableKey:Mo?.STRIPE_PUBLISHABLE_KEY,webhookSecret:Mo?.STRIPE_WEBHOOK_SECRET,successUrl:Mo?.STRIPE_SUCCESS_URL,cancelUrl:Mo?.STRIPE_CANCEL_URL,portalReturnUrl:Mo?.STRIPE_PORTAL_RETURN_URL},LB={BASIC_MONTHLY:Mo?.STRIPE_PRICE_BASIC_MONTHLY,ADVANCED_MONTHLY:Mo?.STRIPE_PRICE_ADVANCED_MONTHLY},Tle=[{id:"free",name:"Gratuito",priceCents:0,features:["Dashboard b\xE1sico","1 conta banc\xE1ria","Transa\xE7\xF5es limitadas"],aiModels:[]},{id:"basic",name:"B\xE1sico",priceCents:5900,features:["Chat IA (Gemini Flash)","3 contas banc\xE1rias","Automa\xE7\xF5es b\xE1sicas"],aiModels:["gemini-flash"]},{id:"advanced",name:"Avan\xE7ado",priceCents:11900,features:["Todas as IAs","Contas ilimitadas","API access","Suporte priorit\xE1rio"],aiModels:["gpt-4o","claude-sonnet","gemini-pro","gemini-flash"]}],eu=s(t=>Tle.find(e=>e.id===t),"getPlanById"),vp=s(t=>t===LB.BASIC_MONTHLY?eu("basic"):t===LB.ADVANCED_MONTHLY?eu("advanced"):null,"getPlanByStripePrice"),qB=s(t=>{let e=eu(t);return e?e.aiModels.length>0:!1},"canAccessAI"),FB=s(t=>{let e=eu(t);return e?e.aiModels:[]},"getAllowedModels");var vi=class{static{s(this,"StripeSubscriptionService")}static async createCheckoutSession(e,r,n,o,i){let a=kn(),c=yr();try{let[l]=await c.select().from(G).where(H(G.id,e)).limit(1);if(!l?.email)throw new Error("Usu\xE1rio n\xE3o encontrado ou sem email");let d=await ys.getOrCreateCustomer(e,l.email,l.fullName||void 0),p=i||ra.successUrl?.replace(/\/billing\/success$/,"")||"https://app.aegiswallet.com.br",m=n||`${p}/billing/success`,h=o||`${p}/billing/cancel`,y=await a.checkout.sessions.create({customer:d,mode:"subscription",payment_method_types:["card"],line_items:[{price:r,quantity:1}],success_url:m,cancel_url:h,metadata:{clerkUserId:e},allow_promotion_codes:!0});if(!y.url)throw new Error("Stripe n\xE3o retornou URL de checkout v\xE1lida");return{sessionId:y.id,checkoutUrl:y.url}}catch(l){throw L.error("Failed to create checkout session",{userId:e,priceId:r,requestOrigin:i,error:l instanceof Error?l.message:"Unknown error"}),l}}static async createPortalSession(e,r){let n=kn();try{return{portalUrl:(await n.billingPortal.sessions.create({customer:e,return_url:r||ra.portalReturnUrl||"https://app.aegiswallet.com.br/settings/billing"})).url}}catch(o){throw L.error("Failed to create portal session",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async getSubscription(e){let r=yr();try{let n=await r.select({subscription:Be,plan:Fr}).from(Be).leftJoin(Fr,H(Be.planId,Fr.id)).where(H(Be.userId,e)).limit(1);if(n.length===0)return L.info("No subscription found for user",{userId:e}),null;let{subscription:o,plan:i}=n[0];return o?(L.info("Retrieved subscription for user",{userId:e,subscriptionId:o.id,status:o.status,planId:o.planId}),{subscription:o,plan:i||null}):(L.warn("Subscription record is null despite query success",{userId:e}),null)}catch(n){throw L.error("Failed to get subscription",{userId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}static async syncSubscriptionFromStripe(e){let r=kn(),n=yr();try{let i=await r.subscriptions.retrieve(e),a=typeof i.customer=="string"?i.customer:i.customer.id,[c]=await n.select().from(Be).where(H(Be.stripeCustomerId,a)).limit(1);if(!c)return L.warn("Subscription sync skipped: User not found for customer",{customerId:a,stripeSubscriptionId:e}),null;let l=i.items.data[0]?.price?.id;if(!l)throw L.error("No price ID found in subscription",{stripeSubscriptionId:e,items:i.items.data.length}),new Error("Pre\xE7o n\xE3o encontrado na assinatura do Stripe");let d=vp(l),p=d?d.id:"free",m=i.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m,y=i.items.data[0];if(!y)throw L.error("No subscription items found",{stripeSubscriptionId:e}),new Error("Item da assinatura n\xE3o encontrado");let g=y.current_period_start,f=y.current_period_end;if(!(g&&f))throw L.error("Missing billing period dates",{stripeSubscriptionId:e,periodStart:g,periodEnd:f}),new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let _={stripeSubscriptionId:i.id,planId:p,status:h,currentPeriodStart:new Date(g*1e3),currentPeriodEnd:new Date(f*1e3)},[w]=await n.update(Be).set({..._,cancelAtPeriodEnd:i.cancel_at_period_end,canceledAt:i.canceled_at?new Date(i.canceled_at*1e3):null,trialStart:i.trial_start?new Date(i.trial_start*1e3):null,trialEnd:i.trial_end?new Date(i.trial_end*1e3):null,updatedAt:new Date}).where(H(Be.id,c.id)).returning();return L.info("Subscription synced from Stripe",{userId:c.userId,subscriptionId:i.id,status:h,planId:p,previousStatus:c.status,previousPlanId:c.planId}),w}catch(o){throw L.error("Failed to sync subscription",{stripeSubscriptionId:e,error:o instanceof Error?o.message:"Unknown error",stack:o instanceof Error?o.stack:void 0}),o}}static async cancelSubscription(e,r=!1){let n=kn(),o=yr();try{let[i]=await o.select().from(Be).where(H(Be.userId,e)).limit(1);if(!i?.stripeSubscriptionId)throw new Error("Assinatura n\xE3o encontrada");return r?await n.subscriptions.cancel(i.stripeSubscriptionId):await n.subscriptions.update(i.stripeSubscriptionId,{cancel_at_period_end:!0}),!0}catch(i){throw L.error("Failed to cancel subscription",{userId:e,error:i instanceof Error?i.message:"Unknown error"}),i}}};var BB=new Pe,Ele=u.object({priceId:u.string().min(1),successUrl:u.string().url().optional(),cancelUrl:u.string().url().optional()});BB.post("/",pe,Se({windowMs:6e4,max:30}),Ve("json",Ele),async t=>{let{user:e}=t.get("auth"),{priceId:r,successUrl:n,cancelUrl:o}=t.req.valid("json"),i=t.get("requestId");if(!e?.id)return L.warn("Checkout request missing user authentication",{requestId:i}),t.json({error:"Usu\xE1rio n\xE3o autenticado"},401);if(!e?.email)return L.warn("Checkout request missing user email",{requestId:i,userId:e.id}),t.json({error:"Email do usu\xE1rio n\xE3o encontrado"},400);try{let a=t.req.header("origin")||t.req.header("referer")?.replace(/\/$/,""),c=await vi.createCheckoutSession(e.id,r,n,o,a);return L.info("Checkout session created successfully",{userId:e.id,priceId:r,requestOrigin:a,sessionId:c.sessionId}),t.json({data:c,meta:{requestId:i}})}catch(a){let c=a instanceof Error?a.message:"Unknown error";return L.error("Checkout creation failed",{userId:e.id,priceId:r,error:c,requestId:i}),c.includes("Usu\xE1rio n\xE3o encontrado")?t.json({error:"Usu\xE1rio n\xE3o encontrado"},404):c.includes("plano")||c.includes("price")?t.json({error:"Plano inv\xE1lido ou n\xE3o encontrado"},400):c.includes("Stripe")?t.json({error:"Servi\xE7o de pagamento temporariamente indispon\xEDvel"},503):t.json({error:"Falha ao criar checkout"},500)}});var VB=BB;var FP=new Pe,kle=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0),status:u.enum(["draft","open","paid","void","uncollectible"]).optional()});FP.get("/",pe,Se({windowMs:6e4,max:30}),Ve("query",kle),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n,status:o}=t.req.valid("query"),i=t.get("requestId");try{let a=[],[c]=[{count:0}];return t.json({data:{invoices:a,total:Number(c?.count||0),hasMore:!1},meta:{requestId:i}})}catch(a){return L.error("Failed to fetch invoices",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:i}),t.json({error:"Falha ao buscar faturas"},500)}});FP.get("/:id/pdf",pe,Se({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{L.info("Invoice PDF download requested",{userId:e.id,invoiceId:r,requestId:n});let o=new Blob(["Mock PDF content"],{type:"application/pdf"});return new Response(o,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="fatura-${r}.pdf"`}})}catch(o){return L.error("Failed to download invoice PDF",{userId:e.id,invoiceId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao baixar fatura"},500)}});var HB=FP;gr();An();Tr();var ZB=new Pe,Ile=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0)});ZB.get("/",pe,Se({windowMs:6e4,max:30}),Ve("query",Ile),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n}=t.req.valid("query"),o=t.get("requestId"),i=yr();try{let a=await i.select().from(lr).where(H(lr.userId,e.id)).orderBy(Nt(lr.createdAt)).limit(r).offset(n),[c]=await i.select({count:M`count(*)`}).from(lr).where(H(lr.userId,e.id));return t.json({data:{payments:a,total:Number(c.count)},meta:{requestId:o}})}catch(a){return L.error("Failed to fetch payment history",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:o}),t.json({error:"Falha ao buscar hist\xF3rico de pagamentos"},500)}});var JB=ZB;var _p=new Pe,Ple=u.object({type:u.enum(["card","pix","bank_account"]),isDefault:u.boolean().optional(),cardNumber:u.string().optional(),expiryMonth:u.number().min(1).max(12).optional(),expiryYear:u.number().min(new Date().getFullYear()).optional(),cvc:u.string().optional(),pixKey:u.string().optional(),pixKeyType:u.enum(["cpf","cnpj","phone","email","random"]).optional(),bankCode:u.string().optional(),accountNumber:u.string().optional(),accountType:u.enum(["checking","savings"]).optional(),accountHolderName:u.string().optional(),documentNumber:u.string().optional()}),Ale=u.object({isDefault:u.boolean()});_p.get("/",pe,Se({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=[];return t.json({data:{paymentMethods:n,hasMore:!1,total:0},meta:{requestId:r}})}catch(n){return L.error("Failed to fetch payment methods",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar m\xE9todos de pagamento"},500)}});_p.post("/",pe,Se({windowMs:6e4,max:10}),Ve("json",Ple),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return L.info("Payment method addition requested",{userId:e.id,type:r.type,requestId:n}),t.json({data:{paymentMethod:{id:"pm_mock_id",type:r.type,isDefault:r.isDefault,createdAt:new Date().toISOString()}},meta:{requestId:n}})}catch(o){return L.error("Failed to add payment method",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao adicionar m\xE9todo de pagamento"},500)}});_p.put("/:id",pe,Se({windowMs:6e4,max:20}),Ve("json",Ale),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.req.valid("json"),o=t.get("requestId");try{return L.info("Payment method update requested",{userId:e.id,paymentMethodId:r,data:n,requestId:o}),t.json({data:{paymentMethod:{id:r,isDefault:n.isDefault}},meta:{requestId:o}})}catch(i){return L.error("Failed to update payment method",{userId:e.id,paymentMethodId:r,error:i instanceof Error?i.message:"Unknown error",requestId:o}),t.json({error:"Falha ao atualizar m\xE9todo de pagamento"},500)}});_p.delete("/:id",pe,Se({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{return L.info("Payment method deletion requested",{userId:e.id,paymentMethodId:r,requestId:n}),t.json({data:{success:!0},meta:{requestId:n}})}catch(o){return L.error("Failed to remove payment method",{userId:e.id,paymentMethodId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao remover m\xE9todo de pagamento"},500)}});var KB=_p;gr();An();Tr();var GB=new Pe;GB.get("/",async t=>{let e=t.get("requestId"),r=yr();try{let o=(await r.select().from(Fr).where(H(Fr.isActive,!0)).orderBy(Ko(Fr.displayOrder))).map(i=>({...i,priceFormatted:new Intl.NumberFormat("pt-BR",{style:"currency",currency:i.currency}).format(i.priceCents/100)}));return t.json({data:{plans:o},meta:{requestId:e}})}catch(n){return L.error("Failed to fetch plans",{error:n instanceof Error?n.message:"Unknown error",requestId:e}),t.json({error:"Falha ao buscar planos"},500)}});var WB=GB;var QB=new Pe,Cle=u.object({returnUrl:u.string().url().optional()});QB.post("/",pe,Se({windowMs:6e4,max:10}),Ve("json",Cle),async t=>{let{user:e}=t.get("auth"),{returnUrl:r}=t.req.valid("json"),n=t.get("requestId");try{let o=await vi.getSubscription(e.id);if(!o?.subscription?.stripeCustomerId)return t.json({error:"Assinatura n\xE3o encontrada"},400);let i=await vi.createPortalSession(o.subscription.stripeCustomerId,r);return L.info("Portal session created",{userId:e.id}),t.json({data:i,meta:{requestId:n}})}catch(o){return L.error("Portal creation failed",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao criar portal"},500)}});var XB=QB;var YB=new Pe;YB.get("/",pe,Se({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=await vi.getSubscription(e.id),o=n?.plan||eu("free"),i=o?.id||"free",a=qB(i),c=FB(i);return t.json({data:{subscription:n?.subscription||null,plan:o,canAccessAI:a,allowedModels:c},meta:{requestId:r}})}catch(n){return L.error("Failed to get subscription",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar assinatura"},500)}});var e5=YB;gr();An();Tr();var zo=class{static{s(this,"StripeWebhookService")}static constructEvent(e,r){let n=kn();if(!ra.webhookSecret)throw L.error("Webhook secret not configured",{hasConfig:!!ra.webhookSecret}),new Error("STRIPE_WEBHOOK_SECRET n\xE3o est\xE1 configurado. Verifique as vari\xE1veis de ambiente.");try{let o=n.webhooks.constructEvent(e,r,ra.webhookSecret);return L.info("Webhook event constructed successfully",{type:o.type,id:o.id}),o}catch(o){let i=o instanceof Error?o.message:"Unknown error";throw L.error("Failed to construct webhook event",{error:i,signatureLength:r?.length}),new Error(`Falha ao validar webhook: ${i}`)}}static async handleCheckoutSessionCompleted(e){let r=yr(),n=e.metadata?.clerkUserId,o=typeof e.customer=="string"?e.customer:e.customer?.id,i=typeof e.subscription=="string"?e.subscription:e.subscription?.id;if(!(n&&o&&i))throw L.warn("Checkout session missing required metadata",{sessionId:e.id,hasClerkUserId:!!n,hasCustomerId:!!o,hasSubscriptionId:!!i}),new Error("Checkout session incompleto - metadados obrigat\xF3rios n\xE3o encontrados");try{let[a]=await r.select().from(Be).where(H(Be.stripeSubscriptionId,i)).limit(1);if(a){L.info("Checkout session already processed",{sessionId:e.id,subscriptionId:i,existingStatus:a.status});return}let l=await kn().subscriptions.retrieve(i),d=l.items.data[0]?.price?.id;if(!d)throw new Error("Price ID n\xE3o encontrado na assinatura do Stripe");let p=vp(d),m=p?p.id:"free",h=l.items.data[0];if(!h)throw new Error("Item da assinatura n\xE3o encontrado");let y=h.current_period_start,g=h.current_period_end;if(!(y&&g))throw new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let f=l.status,_=f==="incomplete"||f==="incomplete_expired"||f==="paused"?"canceled":f;await r.update(Be).set({stripeCustomerId:o,stripeSubscriptionId:i,planId:m,status:_,currentPeriodStart:new Date(y*1e3),currentPeriodEnd:new Date(g*1e3),updatedAt:new Date}).where(H(Be.userId,n)),L.info("Checkout session completed successfully",{clerkUserId:n,sessionId:e.id,subscriptionId:i,status:_,planId:m})}catch(a){let c=a instanceof Error?a.message:"Unknown error";throw L.error("Failed to process checkout session completion",{sessionId:e.id,clerkUserId:n,error:c}),a}}static async handleSubscriptionCreated(e){}static async handleSubscriptionUpdated(e){let r=yr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(Be).where(H(Be.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription update webhook subscription not found",{customerId:n,subscriptionId:e.id});return}let i=e.items.data[0]?.price?.id;if(!i){L.error("No price ID found in subscription update",{subscriptionId:e.id});return}let a=vp(i),c=a?a.id:"free",l=e.items.data[0];if(!l){L.error("No subscription items found in update",{subscriptionId:e.id});return}let d=l.current_period_start,p=l.current_period_end,m=e.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m;await r.update(Be).set({stripeSubscriptionId:e.id,planId:c,status:h,currentPeriodStart:new Date(d*1e3),currentPeriodEnd:new Date(p*1e3),cancelAtPeriodEnd:e.cancel_at_period_end,canceledAt:e.canceled_at?new Date(e.canceled_at*1e3):null,updatedAt:new Date}).where(H(Be.id,o.id)),L.info("Subscription updated webhook processed successfully",{subscriptionId:e.id,previousStatus:o.status,newStatus:h,previousPlanId:o.planId,newPlanId:c})}static async handleSubscriptionDeleted(e){let r=yr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(Be).where(H(Be.stripeCustomerId,n)).limit(1);if(!o){L.warn("Subscription delete webhook subscription not found",{customerId:n,subscriptionId:e.id});return}await r.update(Be).set({status:"canceled",canceledAt:new Date,updatedAt:new Date}).where(H(Be.stripeCustomerId,n)),L.info("Subscription deleted webhook processed successfully",{subscriptionId:e.id,userId:o.userId,previousStatus:o.status})}static async handleInvoicePaid(e){let r=yr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice paid webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(Be).where(H(Be.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice paid webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(lr).where(H(lr.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(lr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_paid,currency:n.currency,status:"succeeded",description:n.description||"Assinatura AegisWallet",receiptUrl:n.hosted_invoice_url,invoicePdf:n.invoice_pdf}),L.info("Invoice paid webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_paid,currency:n.currency})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw L.error("Failed to process invoice payment",{invoiceId:n.id,userId:i.userId,error:l}),c}}static async handleInvoicePaymentFailed(e){let r=yr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){L.warn("Invoice payment failed webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(Be).where(H(Be.stripeCustomerId,o)).limit(1);if(!i){L.warn("Invoice payment failed webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(lr).where(H(lr.stripeInvoiceId,n.id)).limit(1);if(a){L.info("Invoice payment failure already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(lr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_due,currency:n.currency,status:"failed",description:n.description||"Falha no pagamento",failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message}),L.warn("Invoice payment failed webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_due,currency:n.currency,failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw L.error("Failed to process invoice payment failure",{invoiceId:n.id,userId:i.userId,error:l}),c}}};var t5=new Pe;t5.post("/",async t=>{let e=t.req.header("stripe-signature"),r=await t.req.text();if(!e)return t.json({error:"Missing stripe-signature header"},400);try{let n=zo.constructEvent(r,e);switch(L.info("Stripe webhook received",{type:n.type,id:n.id}),n.type){case"checkout.session.completed":await zo.handleCheckoutSessionCompleted(n.data.object);break;case"customer.subscription.created":await zo.handleSubscriptionCreated(n.data.object);break;case"customer.subscription.updated":await zo.handleSubscriptionUpdated(n.data.object);break;case"customer.subscription.deleted":await zo.handleSubscriptionDeleted(n.data.object);break;case"invoice.paid":await zo.handleInvoicePaid(n.data.object);break;case"invoice.payment_failed":await zo.handleInvoicePaymentFailed(n.data.object);break;default:L.info("Unhandled webhook event type",{type:n.type})}return t.json({received:!0})}catch(n){return L.error("Webhook processing failed",{error:n instanceof Error?n.message:"Unknown error"}),t.json({error:"Webhook handler failed"},400)}});var r5=t5;var _i=new Pe;_i.route("/checkout",VB);_i.route("/subscription",e5);_i.route("/portal",XB);_i.route("/plans",WB);_i.route("/webhook",r5);_i.route("/payment-history",JB);_i.route("/payment-methods",KB);_i.route("/invoices",HB);var BP=_i;gr();Tr();var VP=new Pe,Ole=u.object({categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()}),$le=u.object({accountId:u.string().optional(),categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()});VP.get("/events/search",pe,Se({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Ve("query",Ole),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(mt.userId,e.id),Cr(mt.title,`%${n.query}%`)];n.categoryId&&i.push(H(mt.categoryId,n.categoryId)),n.startDate&&i.push(ur(mt.startDate,new Date(n.startDate))),n.endDate&&i.push(Xt(mt.endDate,new Date(n.endDate)));let a=await r.select().from(mt).where(Ee(...i)).orderBy(Nt(mt.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar events searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar events",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar eventos"},500)}});VP.get("/transactions/search",pe,Se({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Ve("query",$le),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(ne.userId,e.id),Cr(ne.description,`%${n.query}%`)];n.accountId&&i.push(H(ne.accountId,n.accountId)),n.categoryId&&i.push(H(ne.categoryId,n.categoryId)),n.startDate&&i.push(ur(ne.transactionDate,new Date(n.startDate))),n.endDate&&i.push(Xt(ne.transactionDate,new Date(n.endDate)));let a=await r.select().from(ne).where(Ee(...i)).orderBy(Nt(ne.createdAt)).limit(n.limit).offset(n.offset);return L.info("Calendar transactions searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search calendar transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar transa\xE7\xF5es"},500)}});var HP=VP;gr();Tr();var ZP=class{constructor(e){this.db=e}static{s(this,"ComplianceService")}async getUserConsents(e){try{return await this.db.select().from(Dt).where(H(Dt.userId,e)).orderBy(Nt(Dt.createdAt))}catch(r){throw L.error("Failed to get user consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos: ${r instanceof Error?r.message:"Unknown error"}`)}}async getConsentTemplates(){try{return await this.db.select().from(cn).where(H(cn.isActive,!0)).orderBy(cn.consentType)}catch(e){throw L.error("Failed to get consent templates",{error:e instanceof Error?e.message:"Unknown error"}),new Error(`Erro ao buscar templates de consentimento: ${e instanceof Error?e.message:"Unknown error"}`)}}async grantConsent(e,r,n,o,i){try{let[a]=await this.db.select().from(cn).where(Ee(H(cn.consentType,r),H(cn.isActive,!0))).limit(1);if(!a)throw new Error(`Template de consentimento n\xE3o encontrado: ${r}`);let c=await this.generateHash(a.fullTextPt),[l]=await this.db.select().from(Dt).where(Ee(H(Dt.userId,e),H(Dt.consentType,r))).limit(1);if(l){let[p]=await this.db.update(Dt).set({granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).where(H(Dt.id,l.id)).returning();return p}let[d]=await this.db.insert(Dt).values({userId:e,consentType:r,purpose:a.descriptionPt,legalBasis:"consent",granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).returning();return d}catch(a){throw L.error("Failed to grant consent",{error:a instanceof Error?a.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao conceder consentimento: ${a instanceof Error?a.message:"Unknown error"}`)}}async revokeConsent(e,r){try{await this.db.update(Dt).set({granted:!1,revokedAt:new Date}).where(Ee(H(Dt.userId,e),H(Dt.consentType,r)))}catch(n){throw L.error("Failed to revoke consent",{error:n instanceof Error?n.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao revogar consentimento: ${n instanceof Error?n.message:"Unknown error"}`)}}async checkRequiredConsents(e,r){try{return(await this.db.select().from(Dt).where(Ee(H(Dt.userId,e),Es(Dt.consentType,r),H(Dt.granted,!0)))).length===r.length}catch(n){return L.error("Failed to check required consents",{error:n instanceof Error?n.message:"Unknown error",userId:e}),!1}}async getMissingMandatoryConsents(e){try{let n=(await this.db.select().from(cn).where(Ee(H(cn.isMandatory,!0),H(cn.isActive,!0)))).map(a=>a.consentType),i=(await this.db.select().from(Dt).where(Ee(H(Dt.userId,e),H(Dt.granted,!0)))).map(a=>a.consentType);return n.filter(a=>!i.includes(a))}catch(r){throw L.error("Failed to get missing mandatory consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos obrigat\xF3rios faltantes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createExportRequest(e,r,n,o,i,a){try{let[c]=await this.db.insert(Jn).values({userId:e,requestType:r,format:n,status:"pending",dateFrom:o??null,dateTo:i??null,requestedVia:"app",ipAddress:a??null}).returning();return await this.logAuditEvent(e,"data_export_requested","data_export_requests",c.id,{requestType:r,format:n}),c}catch(c){throw L.error("Failed to create export request",{error:c instanceof Error?c.message:"Unknown error",userId:e}),new Error(`Erro ao criar solicita\xE7\xE3o de exporta\xE7\xE3o: ${c instanceof Error?c.message:"Unknown error"}`)}}async getExportRequests(e){try{return await this.db.select().from(Jn).where(H(Jn.userId,e)).orderBy(Nt(Jn.createdAt))}catch(r){throw L.error("Failed to get export requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exporta\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async createDeletionRequest(e,r,n,o,i){try{let[a]=await this.db.select({legalHold:Br.legalHold}).from(Br).where(Ee(H(Br.userId,e),H(Br.legalHold,!0))).limit(1);if(a?.legalHold)throw new Error("Seus dados est\xE3o em reten\xE7\xE3o legal e n\xE3o podem ser exclu\xEDdos no momento");let c=new Date;c.setDate(c.getDate()+15);let[l]=await this.db.insert(Br).values({userId:e,requestType:r,scope:n??{},reason:o??null,status:"pending",reviewDeadline:c,ipAddress:i??null}).returning();return await this.logAuditEvent(e,"data_deletion_requested","data_deletion_requests",l.id,{requestType:r}),l}catch(a){throw L.error("Failed to create deletion request",{error:a instanceof Error?a.message:"Unknown error",userId:e}),a}}async getDeletionRequests(e){try{return await this.db.select().from(Br).where(H(Br.userId,e)).orderBy(Nt(Br.createdAt))}catch(r){throw L.error("Failed to get deletion requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exclus\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionLimits(e){try{return await this.db.select().from(Or).where(H(Or.userId,e))}catch(r){throw L.error("Failed to get transaction limits",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar limites de transa\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async checkTransactionLimit(e,r,n){try{let[o]=await this.db.select().from(Or).where(Ee(H(Or.userId,e),H(Or.limitType,r),H(Or.isActive,!0))).limit(1);if(!o)return{allowed:!0};let i=Number(o.dailyLimit),a=Number(o.currentDailyUsed??0),c=o.transactionLimit?Number(o.transactionLimit):null,l=i-a;return c&&n>c?{allowed:!1,reason:`Valor excede limite por transa\xE7\xE3o de R$ ${c.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:n>l?{allowed:!1,reason:`Valor excede saldo di\xE1rio dispon\xEDvel de R$ ${l.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:{allowed:!0,limit:i,used:a,requested:n,remaining:l}}catch(o){throw L.error("Failed to check transaction limit",{error:o instanceof Error?o.message:"Unknown error",limitType:r,userId:e}),new Error(`Erro ao verificar limite de transa\xE7\xE3o: ${o instanceof Error?o.message:"Unknown error"}`)}}async updateLimitUsage(e,r,n){try{await this.db.update(Or).set({currentDailyUsed:M`${Or.currentDailyUsed} + ${n}`}).where(Ee(H(Or.userId,e),H(Or.limitType,r)))}catch(o){throw L.error("Failed to update limit usage",{error:o instanceof Error?o.message:"Unknown error",userId:e,limitType:r,amount:n}),new Error(`Erro ao atualizar uso de limite: ${o instanceof Error?o.message:"Unknown error"}`)}}async logAuditEvent(e,r,n,o,i){try{let a=new Date;a.setFullYear(a.getFullYear()+5),await this.db.insert(un).values({userId:e,eventType:r,resourceType:n,resourceId:o??null,description:i?.action??null,metadata:i??{},previousState:null,newState:null,ipAddress:null,userAgent:null,sessionId:null,retentionUntil:a})}catch(a){L.error("Failed to log audit event",{error:a instanceof Error?a.message:"Unknown error",eventType:r,userId:e})}}async getAuditHistory(e,r){try{let n=[H(un.userId,e)];return r?.eventType&&n.push(H(un.eventType,r.eventType)),r?.startDate&&n.push(ur(un.createdAt,r.startDate)),r?.endDate&&n.push(Xt(un.createdAt,r.endDate)),await this.db.select().from(un).where(n.length>1?Ee(...n):n[0]).orderBy(Nt(un.createdAt)).limit(r?.limit??100)}catch(n){throw L.error("Failed to get audit history",{error:n instanceof Error?n.message:"Unknown error",userId:e}),new Error(`Erro ao buscar hist\xF3rico de auditoria: ${n instanceof Error?n.message:"Unknown error"}`)}}async generateHash(e){let n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}};function mn(t){return new ZP(t)}s(mn,"createComplianceService");var In=new Pe,Rle=u.object({collectionMethod:u.enum(["explicit_form","voice_command","terms_acceptance","settings_toggle"]).default("explicit_form"),consentType:u.enum(["data_processing","marketing","analytics","third_party","voice_data","biometric","financial_data","location"])}),Nle=u.object({dateFrom:u.string().optional(),dateTo:u.string().optional(),format:u.enum(["json","csv","pdf"]).default("json"),requestType:u.enum(["full_data","full_export","transactions","profile","consents","audit_logs"]).default("full_export")}),Dle=u.object({reason:u.string().optional(),requestType:u.enum(["full_account","full_deletion","specific_data","anonymization"]),scope:u.record(u.string(),u.unknown()).optional()}),jle=u.object({amount:u.number().positive("Valor deve ser positivo"),limitType:u.enum(["pix_daily","pix_daytime","pix_transaction","boleto_daily","transfer_daily","withdrawal_daily"])});In.get("/consent-templates",pe,async t=>{let{db:e}=t.get("auth"),r=t.get("requestId");try{let o=await mn(e).getConsentTemplates();return t.json({data:o,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get consent templates",{error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({code:"CONSENT_TEMPLATES_ERROR",error:"Erro ao buscar modelos de consentimento"},500)}});In.get("/consents",pe,Se({windowMs:6e4,max:30,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await mn(r).getUserConsents(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONSENTS_ERROR",error:"Erro ao buscar consentimentos"},500)}});In.get("/consents/missing",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await mn(r).getMissingMandatoryConsents(e.id);return t.json({data:{hasMissing:i.length>0,missingConsents:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get missing consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"MISSING_CONSENTS_ERROR",error:"Erro ao verificar consentimentos"},500)}});In.post("/consents",pe,Se({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),Ve("json",Rle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),a=t.req.header("user-agent"),l=await mn(r).grantConsent(e.id,n.consentType,n.collectionMethod,i,a);return L.info("Consent granted",{consentType:n.consentType,requestId:o,userId:e.id}),t.json({data:l,meta:{requestId:o,grantedAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to grant consent",{consentType:n.consentType,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_GRANT_ERROR",error:"Erro ao registrar consentimento"},500)}});In.delete("/consents/:type",pe,Se({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("type"),o=t.get("requestId");try{return await mn(r).revokeConsent(e.id,n),L.info("Consent revoked",{consentType:n,requestId:o,userId:e.id}),t.json({data:{success:!0,message:"Consentimento revogado com sucesso"},meta:{requestId:o,revokedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to revoke consent",{consentType:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_REVOKE_ERROR",error:"Erro ao revogar consentimento"},500)}});In.get("/export-requests",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await mn(r).getExportRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get export requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"EXPORT_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});In.post("/export-requests",pe,Se({windowMs:36e5,max:5,message:"Limite de solicita\xE7\xF5es atingido"}),Ve("json",Nle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await mn(r).createExportRequest(e.id,n.requestType,n.format,n.dateFrom,n.dateTo,i);return L.info("Export request created",{format:n.format,requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){return L.error("Failed to create export request",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"EXPORT_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});In.get("/deletion-requests",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await mn(r).getDeletionRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get deletion requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"DELETION_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});In.post("/deletion-requests",pe,Se({windowMs:864e5,max:3,message:"Limite di\xE1rio atingido"}),Ve("json",Dle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await mn(r).createDeletionRequest(e.id,n.requestType,n.scope,n.reason,i);return L.info("Deletion request created",{requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){let a=i instanceof Error?i.message:"Unknown error";return L.error("Failed to create deletion request",{error:a,requestId:o,userId:e.id}),a.includes("reten\xE7\xE3o legal")?t.json({code:"LEGAL_HOLD",error:a},403):t.json({code:"DELETION_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});In.get("/limits",pe,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await mn(r).getTransactionLimits(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get transaction limits",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"LIMITS_ERROR",error:"Erro ao buscar limites"},500)}});In.post("/limits/check",pe,Se({windowMs:6e4,max:60,message:"Muitas verifica\xE7\xF5es"}),Ve("json",jle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let a=await mn(r).checkTransactionLimit(e.id,n.limitType,n.amount);return t.json({data:a,meta:{requestId:o,checkedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to check transaction limit",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",limitType:n.limitType,requestId:o,userId:e.id}),t.json({code:"LIMIT_CHECK_ERROR",error:"Erro ao verificar limite"},500)}});In.get("/audit",pe,Se({windowMs:6e4,max:10,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=Number(t.req.query("limit"))||50,i=t.req.query("eventType"),c=await mn(r).getAuditHistory(e.id,{limit:o,eventType:i||void 0});return t.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get audit history",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"AUDIT_ERROR",error:"Erro ao buscar hist\xF3rico"},500)}});var JP=In;gr();Tr();var Mle=/^\d{10,11}$/,Kg=s(t=>t?t.replace(/\D/g,""):t??void 0,"normalizeDigits"),n5=s(t=>({...t,cpf:t.cpf?Kg(t.cpf):t.cpf,email:t.email?.trim().toLowerCase(),phone:t.phone?Kg(t.phone):t.phone}),"sanitizeContactFields"),Uo=new Pe,zle=u.object({cpf:u.string().optional(),email:u.string().email().optional(),isFavorite:u.boolean().default(!1),name:u.string().min(1,"Nome \xE9 obrigat\xF3rio"),notes:u.string().optional(),phone:u.string().optional()}),Ule=u.object({cpf:u.string().optional().refine(t=>!t||ZU(Kg(t)??""),"CPF inv\xE1lido"),email:u.string().email().optional(),id:u.string().uuid(),isFavorite:u.boolean().optional(),name:u.string().optional(),notes:u.string().optional(),phone:u.string().optional().refine(t=>!t||Mle.test(Kg(t)??""),"Telefone inv\xE1lido")}),Lle=u.object({isFavorite:u.boolean().optional(),limit:u.number().min(1).max(100).default(50),offset:u.number().default(0),search:u.string().optional()}),qle=u.object({limit:u.number().min(1).max(20).default(10),query:u.string().min(1,"Query de busca \xE9 obrigat\xF3ria")});Uo.get("/",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Ve("query",Lle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H($e.userId,e.id)];if(n.search){let l=`%${n.search}%`,d=Pi(Cr($e.name,l),Cr($e.email,l),Cr($e.phone,l));d&&i.push(d)}n.isFavorite!==void 0&&i.push(H($e.isFavorite,n.isFavorite));let[{total:a}]=await r.select({total:tb()}).from($e).where(Ee(...i)),c=await r.select().from($e).where(Ee(...i)).orderBy(Nt($e.isFavorite),Ko($e.name)).limit(n.limit).offset(n.offset);return t.json({data:{contacts:c,hasMore:a>n.offset+n.limit,total:a},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACTS_ERROR",error:"Failed to retrieve contacts"},500)}});Uo.get("/:id",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from($e).where(Ee(H($e.id,n),H($e.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to get contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_ERROR",error:"Failed to retrieve contact"},500)}});Uo.post("/",pe,Se({windowMs:60*1e3,max:20,message:"Too many creation attempts, please try again later"}),Ve("json",zle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=n5(n),[a]=await r.insert($e).values({userId:e.id,name:i.name,email:i.email??null,phone:i.phone??null,cpf:i.cpf??null,notes:i.notes??null,isFavorite:i.isFavorite??!1,createdAt:new Date,updatedAt:new Date}).returning();return L.info("Contact created",{contactId:a.id,contactName:n.name,requestId:o,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return i instanceof Error&&i.message.includes("unique constraint")?t.json({code:"CONFLICT",error:"Email ou telefone j\xE1 cadastrado para este usu\xE1rio"},409):(L.error("Failed to create contact",{contactName:n.name,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_CREATE_ERROR",error:"Failed to create contact"},500))}});Uo.put("/:id",pe,Se({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ve("json",Ule),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let{id:a,...c}=o,l=n5(c),d={updatedAt:new Date};l.name!==void 0&&(d.name=l.name),l.email!==void 0&&(d.email=l.email??null),l.phone!==void 0&&(d.phone=l.phone??null),l.cpf!==void 0&&(d.cpf=l.cpf??null),l.notes!==void 0&&(d.notes=l.notes??null),l.isFavorite!==void 0&&(d.isFavorite=l.isFavorite);let[p]=await r.update($e).set(d).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return p?(L.info("Contact updated",{contactId:n,requestId:i,updatedFields:Object.keys(c).filter(m=>m!=="updatedAt"),userId:e.id}),t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(a){return L.error("Failed to update contact",{contactId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"CONTACT_UPDATE_ERROR",error:"Failed to update contact"},500)}});Uo.delete("/:id",pe,Se({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.delete($e).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return i?(L.info("Contact deleted",{contactId:n,requestId:o,userId:e.id}),t.json({data:{id:n,success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return L.error("Failed to delete contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_DELETE_ERROR",error:"Failed to delete contact"},500)}});Uo.get("/search",pe,Se({windowMs:60*1e3,max:20,message:"Too many search attempts, please try again later"}),Ve("query",qle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=`%${n.query}%`,a=await r.select({id:$e.id,name:$e.name,email:$e.email,phone:$e.phone,isFavorite:$e.isFavorite}).from($e).where(Ee(H($e.userId,e.id),Pi(Cr($e.name,i),Cr($e.email,i),Cr($e.phone,i)))).orderBy(Nt($e.isFavorite),Ko($e.name)).limit(n.limit);return L.info("Contacts searched",{requestId:o,resultsCount:a.length,searchQuery:n.query,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to search contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,searchQuery:n.query,userId:e.id}),t.json({code:"CONTACT_SEARCH_ERROR",error:"Failed to search contacts"},500)}});Uo.get("/favorites",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from($e).where(Ee(H($e.userId,e.id),H($e.isFavorite,!0))).orderBy(Ko($e.name));return L.info("Favorite contacts retrieved",{favoritesCount:o.length,requestId:n,userId:e.id}),t.json({data:o,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get favorite contacts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"FAVORITES_ERROR",error:"Failed to retrieve favorite contacts"},500)}});Uo.post("/:id/favorite",pe,Se({windowMs:60*1e3,max:30,message:"Too many toggle attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select({isFavorite:$e.isFavorite}).from($e).where(Ee(H($e.id,n),H($e.userId,e.id))).limit(1);if(!i)return t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404);let[a]=await r.update($e).set({isFavorite:!i.isFavorite,updatedAt:new Date}).where(Ee(H($e.id,n),H($e.userId,e.id))).returning();return L.info("Contact favorite status toggled",{contactId:n,newStatus:!i.isFavorite,previousStatus:i.isFavorite,requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to toggle favorite status",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"FAVORITE_TOGGLE_ERROR",error:"Failed to toggle favorite status"},500)}});Uo.get("/stats",pe,Se({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({isFavorite:$e.isFavorite,email:$e.email,phone:$e.phone}).from($e).where(H($e.userId,e.id)),i=o.length,a=o.filter(d=>d.isFavorite).length,c=o.filter(d=>d.email).length,l=o.filter(d=>d.phone).length;return t.json({data:{contactsWithEmail:c,contactsWithPhone:l,favoriteContacts:a,favoritePercentage:i>0?a/i*100:0,totalContacts:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get contact statistics",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONTACT_STATS_ERROR",error:"Failed to retrieve contact statistics"},500)}});var KP=Uo;var Lo=new Pe,bp={code:"NOT_IMPLEMENTED",error:"Google Calendar sync is temporarily unavailable during migration. Please check back later.",message:"Esta funcionalidade est\xE1 temporariamente indispon\xEDvel durante a migra\xE7\xE3o do sistema."},bi=Se({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3});Lo.get("/sync/status",pe,bi,async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");return L.info("Google Calendar status requested (not implemented)",{requestId:r,userId:e.id}),t.json({data:{googleEmail:null,isConnected:!1,isEnabled:!1,lastSyncAt:null,migrationNotice:"Google Calendar sync is being migrated to new infrastructure"},meta:{requestId:r,retrievedAt:new Date().toISOString()}},200)});Lo.get("/sync/settings",pe,bi,async t=>{let e=t.get("requestId");return t.json({data:null,meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Lo.get("/sync/history",pe,bi,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Lo.put("/sync/settings",pe,bi,async t=>{let e=t.get("requestId");return t.json({...bp,meta:{requestId:e}},501)});Lo.post("/sync/full",pe,bi,async t=>{let e=t.get("requestId");return t.json({...bp,meta:{requestId:e}},501)});Lo.post("/sync/incremental",pe,bi,async t=>{let e=t.get("requestId");return t.json({...bp,meta:{requestId:e}},501)});Lo.post("/sync/event",pe,bi,async t=>{let e=t.get("requestId");return t.json({...bp,meta:{requestId:e}},501)});Lo.post("/sync/channel/renew",pe,bi,async t=>{let e=t.get("requestId");return t.json({...bp,meta:{requestId:e}},501)});Lo.get("/sync/conflicts",pe,bi,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});var GP=Lo;var wp=new Pe,tu=null,Fle=1e4,H7e=u.object({services:u.object({database:u.enum(["connected","disconnected","error"]),api:u.enum(["operational","degraded","down"]),auth:u.enum(["operational","degraded","down"])}),status:u.enum(["ok","error"]),timestamp:u.string(),uptime:u.number(),version:u.string()});async function Ble(){if(tu&&Date.now()-tu.timestamp<Fle)return{status:tu.status,latency:tu.latency};let t=Date.now();try{let{getHttpClient:e,schema:r}=await Promise.resolve().then(()=>(An(),gw)),{sql:n}=await Promise.resolve().then(()=>(gr(),rb)),o=e(),i=new Promise((l,d)=>{setTimeout(()=>d(new Error("Database query timeout")),5e3)});await Promise.race([o.execute(n`SELECT 1 as health_check`),i]);let a=Date.now()-t,c=!0;try{await o.select({count:n`count(*)`}).from(r.users).limit(1)}catch(l){c=!1,L.warn("Database schema access check failed (non-critical)",{error:l instanceof Error?l.message:"Unknown error",note:"Basic connectivity succeeded, schema may not be migrated yet"})}return tu={status:"connected",latency:a,timestamp:Date.now()},{status:"connected",latency:a,schemaAccessible:c}}catch(e){let r=Date.now()-t;return L.error("Database health check failed",{error:e instanceof Error?e.message:"Unknown error",latency:r}),tu={status:"error",latency:r,timestamp:Date.now()},{status:"error",latency:r,schemaAccessible:!1}}}s(Ble,"checkDatabaseConnectivity");async function o5(t){let e=Date.now();try{let r=await Ble(),n=r.status,o=r.latency,i=n==="connected",a={services:{database:n,api:i?"operational":"degraded",auth:i?"operational":"degraded"},status:i?"ok":"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0",metrics:{databaseLatency:o,totalLatency:Date.now()-e},checks:{server:{status:"ok",uptime:process.uptime()},database:{status:n,latency:o},memory:{used:process.memoryUsage().heapUsed,total:process.memoryUsage().heapTotal}}};return L.info("Health check completed",{databaseStatus:n,duration:Date.now()-e,status:a.status}),i?t.json(a,200):t.json(a,503)}catch(r){return L.error("Health check error",{duration:Date.now()-e,error:r instanceof Error?r.message:"Unknown error"}),t.json({services:{database:"error",api:"down",auth:"down"},status:"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"},500)}}s(o5,"healthCheckHandler");wp.get("/",o5);wp.get("/health",o5);wp.get("/ping",t=>t.json({message:"pong",timestamp:new Date().toISOString(),version:"v1"}));wp.get("/auth",async t=>{let e=t.get("auth");return t.json({authenticated:!!e,services:{database:"connected",api:"operational",auth:"operational"},status:"ok",timestamp:new Date().toISOString(),user:e?{id:e.user.id,email:e.user.email}:null,version:"1.0.0"})});var WP=wp;gr();Tr();var Vle=u.object({limit:u.coerce.number().int().min(1).max(100).default(50),offset:u.coerce.number().int().min(0).default(0),categoryId:u.string().optional(),accountId:u.string().optional(),type:u.enum(["transfer","debit","credit","pix","boleto"]).optional(),status:u.enum(["cancelled","failed","pending","posted"]).optional(),startDate:u.string().optional(),endDate:u.string().optional(),search:u.string().optional()}),i5=u.object({amount:u.number(),categoryId:u.string().optional(),description:u.string(),transactionType:u.enum(["transfer","debit","credit","pix","boleto"]),status:u.enum(["cancelled","failed","pending","posted"]).default("pending"),transactionDate:u.string().optional(),accountId:u.string().optional(),paymentMethod:u.string().optional(),merchantName:u.string().optional(),notes:u.string().optional(),tags:u.array(u.string()).optional()}),Hle=u.object({period:u.enum(["week","month","quarter","year"]).default("month"),accountId:u.string().optional()}),ru=new Pe;ru.get("/",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Ve("query",Vle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[H(ne.userId,e.id)];n.categoryId&&i.push(H(ne.categoryId,n.categoryId)),n.accountId&&i.push(H(ne.accountId,n.accountId)),n.type&&i.push(H(ne.transactionType,n.type)),n.status&&i.push(H(ne.status,n.status)),n.startDate&&i.push(ur(ne.transactionDate,new Date(n.startDate))),n.endDate&&i.push(Xt(ne.transactionDate,new Date(n.endDate))),n.search&&i.push(Cr(ne.description,`%${n.search}%`));let a=await r.select().from(ne).where(Ee(...i)).orderBy(Nt(ne.createdAt)).limit(n.limit).offset(n.offset);return t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString(),total:a.length}})}catch(i){return L.error("Failed to get transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"TRANSACTIONS_ERROR",error:"Failed to retrieve transactions"},500)}});ru.get("/statistics",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ve("query",Hle),async t=>{let{user:e,db:r}=t.get("auth"),{period:n}=t.req.valid("query"),o=t.get("requestId");try{let i=new Date,a=new Date;switch(n){case"week":a.setDate(i.getDate()-7);break;case"month":a.setMonth(i.getMonth()-1);break;case"quarter":a.setMonth(i.getMonth()-3);break;case"year":a.setFullYear(i.getFullYear()-1);break}let c=await r.select().from(ne).where(Ee(H(ne.userId,e.id),ur(ne.transactionDate,a),Xt(ne.transactionDate,i))),l=c.reduce((m,h)=>m+Number(h.amount),0),d=c.filter(m=>Number(m.amount)<0).reduce((m,h)=>m+Math.abs(Number(h.amount)),0),p=c.filter(m=>Number(m.amount)>0).reduce((m,h)=>m+Number(h.amount),0);return t.json({data:{balance:l,expenses:d,income:p,period:n,transactionsCount:c.length},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to get transaction statistics",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"STATISTICS_ERROR",error:"Failed to retrieve statistics"},500)}});ru.post("/",pe,Se({windowMs:60*1e3,max:10,message:"Too many transaction creation attempts, please try again later"}),Ve("json",i5),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=new Date,[a]=await r.insert(ne).values({userId:e.id,amount:n.amount.toString(),description:n.description,transactionType:n.transactionType,status:n.status,transactionDate:n.transactionDate?new Date(n.transactionDate):i,categoryId:n.categoryId,accountId:n.accountId,paymentMethod:n.paymentMethod,merchantName:n.merchantName,notes:n.notes,tags:n.tags,isManualEntry:!0}).returning();return L.info("Transaction created",{amount:n.amount,requestId:o,transactionId:a.id,type:n.transactionType,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return L.error("Failed to create transaction",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",requestId:o,type:n.transactionType,userId:e.id}),t.json({code:"TRANSACTION_CREATE_ERROR",error:"Failed to create transaction"},500)}});ru.put("/:id",pe,Se({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ve("json",i5.partial()),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:ne.id}).from(ne).where(Ee(H(ne.id,n),H(ne.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada"},404);let c={updatedAt:new Date};o.description!==void 0&&(c.description=o.description),o.amount!==void 0&&(c.amount=o.amount.toString()),o.transactionType!==void 0&&(c.transactionType=o.transactionType),o.status!==void 0&&(c.status=o.status),o.categoryId!==void 0&&(c.categoryId=o.categoryId),o.accountId!==void 0&&(c.accountId=o.accountId),o.paymentMethod!==void 0&&(c.paymentMethod=o.paymentMethod),o.merchantName!==void 0&&(c.merchantName=o.merchantName),o.notes!==void 0&&(c.notes=o.notes),o.tags!==void 0&&(c.tags=o.tags);let[l]=await r.update(ne).set(c).where(Ee(H(ne.id,n),H(ne.userId,e.id))).returning();return L.info("Transaction updated",{requestId:i,transactionId:n,userId:e.id}),t.json({data:l,meta:{updatedAt:new Date().toISOString(),requestId:i}})}catch(a){return L.error("Failed to update transaction",{error:a instanceof Error?a.message:"Unknown error",requestId:i,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_UPDATE_ERROR",error:"Failed to update transaction"},500)}});ru.delete("/:id",pe,Se({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return(await r.delete(ne).where(Ee(H(ne.id,n),H(ne.userId,e.id))).returning()).length===0?t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada ou permiss\xE3o negada"},404):(L.info("Transaction deleted",{requestId:o,transactionId:n,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}}))}catch(i){return L.error("Failed to delete transaction",{error:i instanceof Error?i.message:"Unknown error",requestId:o,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_DELETE_ERROR",error:"Failed to delete transaction"},500)}});var QP=ru;gr();Tr();var Zle=u.object({full_name:u.string().optional(),phone:u.string().optional(),cpf:u.string().optional(),birth_date:u.string().optional(),profile_image_url:u.string().url().optional()}),Jle=u.record(u.string(),u.any()),Kle=u.object({period_start:u.string(),period_end:u.string()}),s5=["theme","notificationsEmail","notificationsPush","notificationsSms","autoCategorize","budgetAlerts","voiceFeedback","accessibilityHighContrast","accessibilityLargeText","accessibilityScreenReader"],na=new Pe;na.get("/me",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select().from(G).where(H(G.id,e.id)).limit(1);return t.json({data:o||null,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to get user profile",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"PROFILE_ERROR",error:"Failed to retrieve profile"},500)}});na.put("/me",pe,Se({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Ve("json",Zle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i={updatedAt:new Date};n.full_name&&(i.fullName=n.full_name),n.phone&&(i.phone=n.phone),n.cpf&&(i.cpf=n.cpf),n.birth_date&&(i.birthDate=n.birth_date),n.profile_image_url&&(i.profileImageUrl=n.profile_image_url);let[a]=await r.update(G).set(i).where(H(G.id,e.id)).returning();return L.info("User profile updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user profile",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PROFILE_UPDATE_ERROR",error:"Failed to update profile"},500)}});na.put("/me/preferences",pe,Se({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Ve("json",Jle),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let[i]=await r.select({id:sn.id}).from(sn).where(H(sn.userId,e.id)).limit(1),a;if(i){let c={updatedAt:new Date};for(let l of s5)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.update(sn).set(c).where(H(sn.id,i.id)).returning()}else{let c={userId:e.id,createdAt:new Date,updatedAt:new Date};for(let l of s5)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.insert(sn).values(c).returning()}return L.info("User preferences updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return L.error("Failed to update user preferences",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PREFERENCES_UPDATE_ERROR",error:"Failed to update preferences"},500)}});na.post("/me/last-login",pe,Se({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{return await r.update(G).set({lastLogin:new Date}).where(H(G.id,e.id)),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(o){return L.warn("Failed to update last login",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}});na.get("/me/status",pe,Se({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select({isActive:G.isActive,lastLogin:G.lastLogin}).from(G).where(H(G.id,e.id)).limit(1);return o?t.json({data:{isActive:o.isActive,lastLogin:o.lastLogin?.toISOString()||null},meta:{requestId:n,retrievedAt:new Date().toISOString()}}):t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return L.error("Failed to check user status",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}});na.get("/me/financial-summary",pe,Se({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ve("query",Kle),async t=>{let{user:e,db:r}=t.get("auth"),{period_start:n,period_end:o}=t.req.valid("query"),i=t.get("requestId");try{let c=(await r.select({amount:mt.amount,isIncome:mt.isIncome}).from(mt).where(Ee(H(mt.userId,e.id),ur(mt.createdAt,new Date(n)),Xt(mt.createdAt,new Date(o))))).reduce((l,d)=>{let p=Number(d.amount);return d.isIncome?(l.income+=p,l.balance+=p):(l.expenses+=p,l.balance-=p),l},{income:0,expenses:0,balance:0});return t.json({data:c,meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return L.error("Failed to get financial summary",{error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"FINANCIAL_SUMMARY_ERROR",error:"Failed to retrieve financial summary"},500)}});var XP=na;function Gle(t){let e=t.toLowerCase().trim(),r={},n=[{intent:"check_balance",patterns:["saldo","quanto tenho","quanto dinheiro","verificar saldo"]},{intent:"transfer_money",patterns:["transferir","pagar","enviar dinheiro","mandar dinheiro"],entityExtractor:s(o=>Wle(o,r),"entityExtractor")},{intent:"pay_bill",patterns:["conta","boleto","pagar conta","pagar boleto"],entityExtractor:s(()=>Qle(e,r),"entityExtractor")},{intent:"transaction_history",patterns:["extrato","transa\xE7\xF5es","historico","compras"]},{intent:"pix_transfer",patterns:["pix","fazer pix"],entityExtractor:s(o=>Xle(o,r),"entityExtractor")}];for(let{intent:o,patterns:i,entityExtractor:a}of n)if(i.some(c=>e.includes(c)))return a&&a(t),{intent:o,entities:r,confidence:.9};return{intent:"unknown",entities:r,confidence:.3}}s(Gle,"detectIntentAndEntities");function Wle(t,e){let r=t.match(/r?\$?\s*(\d+(?:,\d{1,2})?)/i);if(r){let o=Number.parseFloat(r[1].replace(",","."));e.amount=o,e.currency="BRL"}let n=t.match(/(?:para|para o|para a)\s+([a-z-\s]{2,30})/i);n&&(e.recipient=n[1].trim())}s(Wle,"extractTransferEntities");function Qle(t,e){t.includes("luz")?e.billType="electricity":t.includes("\xE1gua")?e.billType="water":t.includes("telefone")?e.billType="phone":t.includes("internet")&&(e.billType="internet")}s(Qle,"extractBillEntities");function Xle(t,e){let r=t.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/),n=t.match(/\(?(\d{2})?\)?\s?(\d{4,5})-?(\d{4})/),o=t.match(/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/);r?(e.pixKey=r[1],e.pixKeyType="EMAIL"):n?(e.pixKey=n[0],e.pixKeyType="PHONE"):o&&(e.pixKey=o[0],e.pixKeyType="CPF")}s(Xle,"extractPixEntities");function Yle(t,e){switch(t){case"check_balance":return"Verificando seu saldo...";case"transfer_money":return e.amount&&e.recipient?`Preparando transfer\xEAncia de R$ ${e.amount} para ${e.recipient}`:"Entendi que quer transferir dinheiro. Para quem e quanto?";case"pay_bill":return"Buscando suas contas a pagar...";case"transaction_history":return"Mostrando seu hist\xF3rico de transa\xE7\xF5es...";case"pix_transfer":return"Preparando transfer\xEAncia PIX...";default:return"N\xE3o entendi o comando. Pode repetir?"}}s(Yle,"generateResponse");async function a5(t){let{commandText:e,sessionId:r,language:n,requireConfirmation:o,userId:i}=t,a=e??"";await new Promise(y=>setTimeout(y,300));let{intent:c,entities:l,confidence:d}=Gle(a),p=d<.8||(o??!1),m=Yle(c,l);return{confidence:d,entities:l,intent:c,language:n??"pt-BR",processedAt:new Date().toISOString(),requiresConfirmation:p,response:m,sessionId:r}}s(a5,"processVoiceCommand");function c5(){return{commands:[{description:"Verificar saldo da conta",examples:["Qual \xE9 o meu saldo?","Quanto dinheiro eu tenho?","Mostrar meu saldo"],name:"check_balance"},{description:"Transferir dinheiro para outra conta",examples:["Transferir R$ 100 para Jo\xE3o","Pagar 50 reais para Maria","Enviar R$ 200 para o email teste@email.com"],name:"transfer_money"},{description:"Pagar contas e boletos",examples:["Pagar conta de luz","Pagar boleto do cart\xE3o","Quitar conta de telefone"],name:"pay_bill"},{description:"Fazer transfer\xEAncia PIX",examples:["Fazer PIX para o CPF 123.456.789-00","Enviar PIX para o telefone 11999999999","Transferir por PIX para maria@email.com"],name:"pix_transfer"},{description:"Ver hist\xF3rico de transa\xE7\xF5es",examples:["Mostrar minhas transa\xE7\xF5es","Ver extrato do m\xEAs","Hist\xF3rico de compras"],name:"transaction_history"}],language:"pt-BR"}}s(c5,"getAvailableCommands");var YP=new Pe,ede=u.object({commandText:u.string().min(1).max(1e3).optional(),sessionId:u.string().uuid(),audioData:u.string().optional(),language:u.string().default("pt-BR"),requireConfirmation:u.boolean().default(!1)}).refine(t=>t.audioData||t.commandText,{message:"Dados de \xE1udio ou texto do comando s\xE3o obrigat\xF3rios",path:["audioData"]}),vXe=u.object({commands:u.array(u.object({description:u.string(),examples:u.array(u.string()),name:u.string()})),language:u.string()});YP.post("/process",pe,Se({windowMs:60*1e3,max:30,message:"Too many voice commands, please try again later"}),Ve("json",ede),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId"),{commandText:o,sessionId:i,audioData:a,language:c,requireConfirmation:l}=r,d=o??"";try{L.audit("Voice command processing started",{commandLength:d.length,component:"voice.processCommand",requestId:n,userId:e.id});let p=await a5({audioData:a,commandText:d,userId:e.id,context:{user:e},language:c,requireConfirmation:l,sessionId:i});return L.audit("Voice command processing completed",{command:d,requestId:n,result:p,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({data:p,meta:{processedAt:new Date().toISOString(),requestId:n}})}catch(p){return L.audit("Voice command processing failed",{command:d,error:p instanceof Error?p.message:"Unknown error",requestId:n,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({code:"VOICE_PROCESSING_ERROR",details:{command:d.substring(0,50)},error:"Failed to process voice command"},500)}});YP.get("/commands",pe,Se({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=c5();return L.info("Voice commands list accessed",{requestId:r,userId:e.id}),t.json({data:n,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return L.error("Failed to get voice commands",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"COMMANDS_RETRIEVAL_ERROR",error:"Failed to retrieve voice commands"},500)}});var eA=YP;gr();An();Tr();import{Webhook as tde}from"svix";var u5=process.env.CLERK_WEBHOOK_SECRET,rde=process.env.CLERK_SECRET_KEY,nde=rf({secretKey:rde||""}),l5=new Pe;l5.post("/",async t=>{if(!u5)return t.json({error:"Webhook secret not configured"},500);let e=await t.req.text(),r={"svix-id":t.req.header("svix-id")||"","svix-timestamp":t.req.header("svix-timestamp")||"","svix-signature":t.req.header("svix-signature")||""},n;try{n=new tde(u5).verify(e,r)}catch(i){return L.error("Clerk webhook verification failed",{error:i instanceof Error?i.message:"Unknown error"}),t.json({error:"Invalid signature"},400)}let o=n.type;try{if(o==="user.created"){let{id:i,email_addresses:a,first_name:c,last_name:l}=n.data,d=a[0]?.email_address,p=[c,l].filter(Boolean).join(" ")||void 0;if(!d)return L.warn("User created without email",{userId:i}),t.json({error:"No email found"},400);let m=await ys.createCustomer(i,d,p),h=Rs();await h.insert(G).values({id:i,email:d,fullName:p}),await nde.users.updateUserMetadata(i,{privateMetadata:{stripeCustomerId:m}}),await h.insert(Be).values({userId:i,stripeCustomerId:m,planId:"free",status:"free"}),L.info("User created and initialized",{userId:i,stripeCustomerId:m})}else if(o==="user.deleted"){let{id:i}=n.data,a=Rs();if(!i)return t.json({error:"No user ID"},400);let[c]=await a.select().from(Be).where(H(Be.userId,i)).limit(1);c?.stripeCustomerId&&await ys.deleteCustomer(c.stripeCustomerId),await a.delete(Be).where(H(Be.userId,i)),L.info("User deleted and data cleaned up",{userId:i})}else if(o==="user.updated"){let{id:i,email_addresses:a,first_name:c,last_name:l}=n.data,d=a[0]?.email_address,p=[c,l].filter(Boolean).join(" ")||void 0,m=Rs(),[h]=await m.select().from(Be).where(H(Be.userId,i)).limit(1);h?.stripeCustomerId&&d&&await ys.updateCustomer(h.stripeCustomerId,{email:d,name:p}),L.info("User updated",{userId:i})}return t.json({received:!0})}catch(i){return L.error("Clerk webhook processing error",{eventType:o,error:i instanceof Error?i.message:"Unknown error"}),t.json({error:"Webhook processing failed"},500)}});var d5=l5;var Gt=new Pe;Gt.use("*",wA());Gt.use("*",CA);Gt.use("*",async(t,e)=>{let r=crypto.randomUUID();t.set("requestId",r),await e()});t$(Gt);e$(Gt);Gt.route("/api/v1",WP);Gt.route("/api/v1/voice",eA);Gt.route("/api/v1/banking",jI);Gt.route("/api/v1/contacts",KP);Gt.route("/api/v1/bank-accounts",DI);Gt.route("/api/v1/users",XP);Gt.route("/api/v1/transactions",QP);Gt.route("/api/v1/calendar",HP);Gt.route("/api/v1/google-calendar",GP);Gt.route("/api/v1/compliance",JP);Gt.route("/api/v1/billing",BP);Gt.route("/api/v1/ai",Od);Gt.route("/api/v1/agent",ck);Gt.route("/api/webhooks/clerk",d5);Gt.route("/cron",PA);o$(Gt);Gt.notFound(t=>{let e=t.get("requestId");return L.warn("Route not found",{ip:t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown",method:t.req.method,path:t.req.path,requestId:e,userAgent:t.req.header("User-Agent")||"unknown"}),t.json({error:"Not Found",message:`Route ${t.req.method} ${t.req.path} not found`,requestId:e,timestamp:new Date().toISOString()},404)});Gt.onError((t,e)=>{let r=e.get("requestId");return L.error("Unhandled error",{error:t.message,method:e.req.method,path:e.req.path,requestId:r,stack:t.stack}),e.json({error:"Internal server error",requestId:r,timestamp:new Date().toISOString()},500)});var p5=Gt;var tYe=p5;export{tYe as default};
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
