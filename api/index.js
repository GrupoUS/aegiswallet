// AegisWallet API - Bundled for Vercel Node.js Runtime
// Generated at: 2025-12-01T22:08:38.395Z
// Entry: src/server/vercel.ts

var zz=Object.create;var Xu=Object.defineProperty;var Mz=Object.getOwnPropertyDescriptor;var Uz=Object.getOwnPropertyNames;var qz=Object.getPrototypeOf,Lz=Object.prototype.hasOwnProperty;var a=(e,t)=>Xu(e,"name",{value:t,configurable:!0}),Fz=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var mt=(e,t)=>()=>(e&&(t=e(e=0)),t);var Te=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$r=(e,t)=>{for(var r in t)Xu(e,r,{get:t[r],enumerable:!0})},Bz=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Uz(t))!Lz.call(e,n)&&n!==r&&Xu(e,n,{get:()=>t[n],enumerable:!(o=Mz(t,n))||o.enumerable});return e};var Yu=(e,t,r)=>(r=e!=null?zz(qz(e)):{},Bz(t||!e||!e.__esModule?Xu(r,"default",{value:e,enumerable:!0}):r,e));var rt,ST,TT,ol,il,Wn=mt(()=>{rt="ALL",ST="all",TT=["get","post","put","delete","options","patch"],ol="Can not add a route since the matcher is already built.",il=class extends Error{static{a(this,"UnsupportedPathError")}}});var ns,Jm=mt(()=>{ns="__COMPOSED_HANDLER"});var bg,$s,Zl=mt(()=>{"use strict";bg={staticAssets:"public, max-age=31536000, immutable",htmlFiles:"no-cache, no-store, must-revalidate",apiResponses:"private, max-age=60",dynamicContent:"private, no-cache"},$s={NODE_ENV:"production",PORT:Number(process.env.PORT)||3e3,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,DATABASE_URL:process.env.DATABASE_URL||"",DATABASE_URL_UNPOOLED:process.env.DATABASE_URL_UNPOOLED||"",CLERK_PUBLISHABLE_KEY:process.env.VITE_CLERK_PUBLISHABLE_KEY||process.env.CLERK_PUBLISHABLE_KEY||"",CLERK_SECRET_KEY:process.env.CLERK_SECRET_KEY||"",API_URL:process.env.VITE_API_URL||process.env.API_URL||"http://localhost:3000",CORS_ORIGINS:(process.env.CORS_ORIGINS||"http://localhost:5173,http://localhost:3000").split(",")}});var J0,W0=mt(()=>{J0=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i});var wg,Q0,NM,xg,Sg=mt(()=>{wg=a((e,t=xg)=>{let r=/\.([a-zA-Z0-9]+?)$/,o=e.match(r);if(!o)return;let n=t[o[1]];return n&&n.startsWith("text")&&(n+="; charset=utf-8"),n},"getMimeType"),Q0=a(e=>{for(let t in xg)if(xg[t]===e)return t},"getExtension"),NM={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},xg=NM});var X0,Y0=mt(()=>{X0=a((...e)=>{let t=e.filter(n=>n!=="").join("/");t=t.replace(/(?<=\/)\/+/g,"");let r=t.split("/"),o=[];for(let n of r)n===".."&&o.length>0&&o.at(-1)!==".."?o.pop():n!=="."&&o.push(n);return o.join("/")||"."},"defaultJoin")});var eE,jM,DM,tE,rE=mt(()=>{W0();Sg();Y0();eE={br:".br",zstd:".zst",gzip:".gz"},jM=Object.keys(eE),DM="index.html",tE=a(e=>{let t=e.root??"./",r=e.path,o=e.join??X0;return async(n,i)=>{if(n.finalized)return i();let c;if(e.path)c=e.path;else try{if(c=decodeURIComponent(n.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(c))throw new Error}catch{return await e.onNotFound?.(n.req.path,n),i()}let u=o(t,!r&&e.rewriteRequestPath?e.rewriteRequestPath(c):c);e.isDir&&await e.isDir(u)&&(u=o(u,DM));let l=e.getContent,d=await l(u,n);if(d instanceof Response)return n.newResponse(d.body,d);if(d){let p=e.mimes&&wg(u,e.mimes)||wg(u);if(n.header("Content-Type",p||"application/octet-stream"),e.precompressed&&(!p||J0.test(p))){let m=new Set(n.req.header("Accept-Encoding")?.split(",").map(f=>f.trim()));for(let f of jM){if(!m.has(f))continue;let g=await l(u+eE[f],n);if(g){d=g,n.header("Content-Encoding",f),n.header("Vary","Accept-Encoding",{append:!0});break}}}return await e.onFound?.(u,n),n.body(d)}await e.onNotFound?.(u,n),await i()}},"serveStatic")});import{stat as zM}from"node:fs/promises";import{join as MM}from"node:path";var nE,oE=mt(()=>{rE();nE=a(e=>a(async function(r,o){return tE({...e,getContent:a(async c=>{let u=Bun.file(c);return await u.exists()?u:null},"getContent"),join:MM,isDir:a(async c=>{let u;try{u=(await zM(c)).isDirectory()}catch{}return u},"isDir")})(r,o)},"serveStatic2"),"serveStatic")});var iE=mt(()=>{});var aE,sE=mt(()=>{iE();aE=a((e,t)=>{for(let[r,o]of Object.entries(t)){let n=new RegExp("/:"+r+"(?:{[^/]+})?\\??");e=e.replace(n,o?`/${o}`:"")}return e},"replaceUrlParam")});var UM,cE,uE=mt(()=>{UM=1024,cE=a(({concurrency:e,interval:t}={})=>{if(e||=UM,e===1/0)return{run:a(async n=>n(),"run")};let r=new Set,o=a(async(n,i,c)=>{if(r.size>=e)return i||=new Promise(d=>c=d),setTimeout(()=>o(n,i,c)),i;let u={};r.add(u);let l=await n();return t?setTimeout(()=>r.delete(u),t):r.delete(u),c?(c(l),i):l},"run");return{run:o}},"createPool")});var lE,Tg,dE=mt(()=>{Jm();lE=a(e=>e.length>1,"isMiddleware"),Tg=a(e=>e[ns]?Tg(e[ns]):e,"findTargetHandler")});var pE,qM,LM,FM,BM,As,mE,Ig,Eg=mt(()=>{Wn();dE();pE=a(e=>e.split(/[\/\\]/).slice(0,-1).join("/"),"dirname"),qM=a(e=>e.replace(/(\\)/g,"/").replace(/\/$/g,""),"normalizePath"),LM=a((e,t)=>{e.length===0||t?e.push(".."):e.pop()},"handleParent"),FM=a((e,t)=>{e=e.replace(/^\.(?!.)/,""),e!==""&&t.push(e)},"handleNonDot"),BM=a((e,t)=>{let r=!1;for(let o of e)o===".."?(LM(t,r),r=!0):(FM(o,t),r=!1)},"handleSegments"),As=a((...e)=>{e=e.map(qM);let t=[];return BM(e.join("/").split("/"),t),(e[0][0]==="/"?"/":"")+t.join("/")},"joinPaths"),mE=a(e=>e.routes.reduce((t,{method:r,handler:o,path:n})=>{let i=Tg(o);return["GET",rt].includes(r)&&!lE(i)&&t.push({path:n}),t},[]),"filterStaticGenerateRoutes"),Ig=a(e=>e.split("/").some(t=>t.startsWith(":")||t.includes("*")),"isDynamicRoute")});var fE,Hl,ece,kg=mt(()=>{Eg();fE="HONO_SSG_CONTEXT",Hl="x-hono-disable-ssg",ece=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[Hl]:"true"}})}catch{return null}})()});var VM,ZM,HM,GM,KM,JM,WM,QM,XM,YM,eU,hE,tU,rU,gE,yE=mt(()=>{sE();uE();Sg();kg();Eg();VM=2,ZM="text/plain",HM="./static",GM=a((e,t,r,o)=>{let n=WM(r,o);return e.endsWith(`.${n}`)?As(t,e):e==="/"?As(t,`index.${n}`):e.endsWith("/")?As(t,e,`index.${n}`):As(t,`${e}.${n}`)},"generateFilePath"),KM=a(async e=>{let t=e.headers.get("Content-Type");try{return t?.includes("text")||t?.includes("json")?await e.text():await e.arrayBuffer()}catch(r){throw new Error(`Error processing response: ${r instanceof Error?r.message:"Unknown error"}`)}},"parseResponseContent"),JM={"text/html":"html","text/xml":"xml","application/xml":"xml","application/yaml":"yaml"},WM=a((e,t)=>{let r=t||JM;return e in r?r[e]:Q0(e)||"html"},"determineExtension"),QM=a(e=>Array.isArray(e)?async t=>{let r=t;for(let o of e){let n=await o(r);if(n===!1)return!1;n instanceof Request&&(r=n)}return r}:e,"combineBeforeRequestHooks"),XM=a(e=>Array.isArray(e)?async t=>{let r=t;for(let o of e){let n=await o(r);if(n===!1)return!1;n instanceof Response&&(r=n)}return r}:e,"combineAfterResponseHooks"),YM=a((e,t,r)=>Array.isArray(e)?async o=>{for(let n of e)await n(o,t,r)}:e,"combineAfterGenerateHooks"),eU=a(function*(e,t,r,o){let n="http://localhost",i=cE({concurrency:o});for(let c of mE(e)){let u=new URL(c.path,n).toString(),l=new Request(u);yield new Promise(async(d,p)=>{try{if(t){let f=await t(l);if(!f){d(void 0);return}l=f}if(await i.run(()=>e.fetch(l)),!l.ssgParams){if(Ig(c.path)){d(void 0);return}l.ssgParams=[{}]}let m={method:l.method,headers:l.headers};d((function*(){for(let f of l.ssgParams)yield new Promise(async(g,h)=>{try{let v=aE(c.path,f),x=await i.run(()=>e.request(v,m,{[fE]:!0}));if(x.headers.get(Hl)){g(void 0);return}if(r){let w=await r(x);if(!w){g(void 0);return}x=w}let S=x.headers.get("Content-Type")?.split(";")[0]||ZM,b=await KM(x);g({routePath:v,mimeType:S,content:b})}catch(v){h(v)}})})())}catch(m){p(m)}})}},"fetchRoutesContent"),hE=new Set,tU=a(async(e,t,r,o)=>{let n=await e;if(!n)return;let{routePath:i,content:c,mimeType:u}=n,l=GM(i,r,u,o),d=pE(l);return hE.has(d)||(await t.mkdir(d,{recursive:!0}),hE.add(d)),typeof c=="string"?await t.writeFile(l,c):c instanceof ArrayBuffer&&await t.writeFile(l,new Uint8Array(c)),l},"saveContentToFile"),rU={afterResponseHook:a(e=>e.status!==200?!1:e,"afterResponseHook")},gE=a(async(e,t,r)=>{let o,n=[],i=[],c=r?.plugins||[rU],u=[],l=[],d=[];r?.beforeRequestHook&&u.push(...Array.isArray(r.beforeRequestHook)?r.beforeRequestHook:[r.beforeRequestHook]),r?.afterResponseHook&&l.push(...Array.isArray(r.afterResponseHook)?r.afterResponseHook:[r.afterResponseHook]),r?.afterGenerateHook&&d.push(...Array.isArray(r.afterGenerateHook)?r.afterGenerateHook:[r.afterGenerateHook]);for(let p of c)p.beforeRequestHook&&u.push(...Array.isArray(p.beforeRequestHook)?p.beforeRequestHook:[p.beforeRequestHook]),p.afterResponseHook&&l.push(...Array.isArray(p.afterResponseHook)?p.afterResponseHook:[p.afterResponseHook]),p.afterGenerateHook&&d.push(...Array.isArray(p.afterGenerateHook)?p.afterGenerateHook:[p.afterGenerateHook]);try{let p=r?.dir??HM,m=r?.concurrency??VM,f=QM(u.length>0?u:[x=>x]),g=XM(l.length>0?l:[x=>x]),h=eU(e,f,g,m);for(let x of h)n.push(x.then(S=>{if(S)for(let b of S)i.push(tU(b,t,p,r?.extensionMap).catch(w=>w))}));await Promise.all(n);let v=[];for(let x of i){let S=await x;if(typeof S=="string")v.push(S);else if(S)throw S}o={success:!0,files:v}}catch(p){let m=p instanceof Error?p:new Error(String(p));o={success:!1,files:[],error:m}}return d.length>0&&await YM(d,t,r)(o,t,r),o},"toSSG")});var vE=mt(()=>{yE();kg()});var nU,Pg,_E,bE=mt(()=>{vE();({write:nU}=Bun),Pg={writeFile:a(async(e,t)=>{await nU(e,t)},"writeFile"),mkdir:a(async()=>{},"mkdir")},_E=a(async(e,t)=>gE(e,Pg,t),"toSSG")});var xE,wE,SE,TE=mt(()=>{xE=class{static{a(this,"WSContext")}#e;constructor(e){this.#e=e,this.raw=e.raw,this.url=e.url?new URL(e.url):null,this.protocol=e.protocol??null}send(e,t){this.#e.send(e,t??{})}raw;binaryType="arraybuffer";get readyState(){return this.#e.readyState}url;protocol;close(e,t){this.#e.close(e,t)}},wE=a(e=>new MessageEvent("message",{data:e}),"createWSMessageEvent"),SE=a(e=>(...t)=>{if(typeof t[0]=="function"){let[r,o]=t;return a(async function(i,c){let u=await r(i),l=await e(i,u,o);if(l)return l;await c()},"upgradeWebSocket")}else{let[r,o,n]=t;return(async()=>{let i=await e(r,o,n);if(!i)throw new Error("Failed to upgrade WebSocket");return i})()}},"defineWebSocketHelper")});var Gl,$g=mt(()=>{Gl=a(e=>"server"in e.env?e.env.server:e.env,"getBunServer")});var Ag,Cg,Og,IE,EE=mt(()=>{TE();$g();Ag=a(e=>new xE({send:a((t,r)=>{e.send(t,r?.compress)},"send"),raw:e,readyState:e.readyState,url:e.data.url,protocol:e.data.protocol,close(t,r){e.close(t,r)}}),"createWSContext"),Cg=SE((e,t)=>{let r=Gl(e);if(!r)throw new TypeError("env has to include the 2nd argument of fetch.");if(r.upgrade(e.req.raw,{data:{events:t,url:new URL(e.req.url),protocol:e.req.url}}))return new Response(null)}),Og={open(e){let t=e.data.events;t.onOpen&&t.onOpen(new Event("open"),Ag(e))},close(e,t,r){let o=e.data.events;o.onClose&&o.onClose(new CloseEvent("close",{code:t,reason:r}),Ag(e))},message(e,t){let r=e.data.events;if(r.onMessage){let o=typeof t=="string"?t:t.buffer;r.onMessage(wE(o),Ag(e))}}},IE=a(()=>({upgradeWebSocket:Cg,websocket:Og}),"createBunWebSocket")});var kE,PE=mt(()=>{$g();kE=a(e=>{let t=Gl(e);if(!t)throw new TypeError("env has to include the 2nd argument of fetch.");if(typeof t.requestIP!="function")throw new TypeError("server.requestIP is not a function.");let r=t.requestIP(e.req.raw);return r?{remote:{address:r.address,addressType:r.family==="IPv6"||r.family==="IPv4"?r.family:void 0,port:r.port}}:{remote:{}}},"getConnInfo")});var $E={};$r($E,{bunFileSystemModule:()=>Pg,createBunWebSocket:()=>IE,getConnInfo:()=>kE,serveStatic:()=>nE,toSSG:()=>_E,upgradeWebSocket:()=>Cg,websocket:()=>Og});var AE=mt(()=>{oE();bE();EE();PE()});var CE={};$r(CE,{htmlCache:()=>iU,staticAssetsCache:()=>oU});var oU,iU,OE=mt(()=>{"use strict";Zl();oU=a(()=>async(e,t)=>{e.header("Cache-Control",bg.staticAssets),await t()},"staticAssetsCache"),iU=a(()=>async(e,t)=>{e.header("Cache-Control",bg.htmlFiles),e.header("Pragma","no-cache"),e.header("Expires","0"),await t()},"htmlCache")});var rp=Te((Dme,aa)=>{"use strict";var hF=typeof Buffer<"u",bP=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,xP=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function wP(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),hF&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let o=JSON.parse(e,t);if(o===null||typeof o!="object")return o;let n=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(n==="ignore"&&i==="ignore")return o;if(n!=="ignore"&&i!=="ignore"){if(bP.test(e)===!1&&xP.test(e)===!1)return o}else if(n!=="ignore"&&i==="ignore"){if(bP.test(e)===!1)return o}else if(xP.test(e)===!1)return o;return SP(o,{protoAction:n,constructorAction:i,safe:r&&r.safe})}a(wP,"_parse");function SP(e,{protoAction:t="error",constructorAction:r="error",safe:o}={}){let n=[e];for(;n.length;){let i=n;n=[];for(let c of i){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(c,"__proto__")){if(o===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete c.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype")){if(o===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete c.constructor}for(let u in c){let l=c[u];l&&typeof l=="object"&&n.push(l)}}}return e}a(SP,"filter");function Ox(e,t,r){let o=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wP(e,t,r)}finally{Error.stackTraceLimit=o}}a(Ox,"parse");function gF(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wP(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}a(gF,"safeParse");aa.exports=Ox;aa.exports.default=Ox;aa.exports.parse=Ox;aa.exports.safeParse=gF;aa.exports.scan=SP});var Xo=Te((I0e,PO)=>{"use strict";PO.exports=TypeError});var AO=Te((E0e,$O)=>{$O.exports=Fz("util").inspect});var mu=Te((k0e,WO)=>{var tS=typeof Map=="function"&&Map.prototype,Hw=Object.getOwnPropertyDescriptor&&tS?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,zp=tS&&Hw&&typeof Hw.get=="function"?Hw.get:null,CO=tS&&Map.prototype.forEach,rS=typeof Set=="function"&&Set.prototype,Gw=Object.getOwnPropertyDescriptor&&rS?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Mp=rS&&Gw&&typeof Gw.get=="function"?Gw.get:null,OO=rS&&Set.prototype.forEach,h5=typeof WeakMap=="function"&&WeakMap.prototype,lu=h5?WeakMap.prototype.has:null,g5=typeof WeakSet=="function"&&WeakSet.prototype,du=g5?WeakSet.prototype.has:null,y5=typeof WeakRef=="function"&&WeakRef.prototype,RO=y5?WeakRef.prototype.deref:null,v5=Boolean.prototype.valueOf,_5=Object.prototype.toString,b5=Function.prototype.toString,x5=String.prototype.match,nS=String.prototype.slice,Io=String.prototype.replace,w5=String.prototype.toUpperCase,NO=String.prototype.toLowerCase,BO=RegExp.prototype.test,jO=Array.prototype.concat,gn=Array.prototype.join,S5=Array.prototype.slice,DO=Math.floor,Ww=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Kw=Object.getOwnPropertySymbols,Qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pu=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Aa||!0)?Symbol.toStringTag:null,VO=Object.prototype.propertyIsEnumerable,zO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function MO(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||BO.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var o=e<0?-DO(-e):DO(e);if(o!==e){var n=String(o),i=nS.call(t,n.length+1);return Io.call(n,r,"$&_")+"."+Io.call(Io.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Io.call(t,r,"$&_")}a(MO,"addNumericSeparator");var Xw=AO(),UO=Xw.custom,qO=GO(UO)?UO:null,ZO={__proto__:null,double:'"',single:"'"},T5={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};WO.exports=a(function e(t,r,o,n){var i=r||{};if(Zn(i,"quoteStyle")&&!Zn(ZO,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Zn(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=Zn(i,"customInspect")?i.customInspect:!0;if(typeof c!="boolean"&&c!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Zn(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Zn(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return JO(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return u?MO(t,l):l}if(typeof t=="bigint"){var d=String(t)+"n";return u?MO(t,d):d}var p=typeof i.depth>"u"?5:i.depth;if(typeof o>"u"&&(o=0),o>=p&&p>0&&typeof t=="object")return Yw(t)?"[Array]":"[Object]";var m=F5(i,o);if(typeof n>"u")n=[];else if(KO(n,t)>=0)return"[Circular]";function f(J,re,ve){if(re&&(n=S5.call(n),n.push(re)),ve){var ie={depth:i.depth};return Zn(i,"quoteStyle")&&(ie.quoteStyle=i.quoteStyle),e(J,ie,o+1,n)}return e(J,i,o+1,n)}if(a(f,"inspect"),typeof t=="function"&&!LO(t)){var g=R5(t),h=Dp(t,f);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(h.length>0?" { "+gn.call(h,", ")+" }":"")}if(GO(t)){var v=Aa?Io.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Qw.call(t);return typeof t=="object"&&!Aa?uu(v):v}if(U5(t)){for(var x="<"+NO.call(String(t.nodeName)),S=t.attributes||[],b=0;b<S.length;b++)x+=" "+S[b].name+"="+HO(I5(S[b].value),"double",i);return x+=">",t.childNodes&&t.childNodes.length&&(x+="..."),x+="</"+NO.call(String(t.nodeName))+">",x}if(Yw(t)){if(t.length===0)return"[]";var w=Dp(t,f);return m&&!L5(w)?"["+eS(w,m)+"]":"[ "+gn.call(w,", ")+" ]"}if(k5(t)){var P=Dp(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!VO.call(t,"cause")?"{ ["+String(t)+"] "+gn.call(jO.call("[cause]: "+f(t.cause),P),", ")+" }":P.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+gn.call(P,", ")+" }"}if(typeof t=="object"&&c){if(qO&&typeof t[qO]=="function"&&Xw)return Xw(t,{depth:p-o});if(c!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(N5(t)){var B=[];return CO&&CO.call(t,function(J,re){B.push(f(re,t,!0)+" => "+f(J,t))}),FO("Map",zp.call(t),B,m)}if(z5(t)){var V=[];return OO&&OO.call(t,function(J){V.push(f(J,t))}),FO("Set",Mp.call(t),V,m)}if(j5(t))return Jw("WeakMap");if(M5(t))return Jw("WeakSet");if(D5(t))return Jw("WeakRef");if($5(t))return uu(f(Number(t)));if(C5(t))return uu(f(Ww.call(t)));if(A5(t))return uu(v5.call(t));if(P5(t))return uu(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof global<"u"&&t===global)return"{ [object globalThis] }";if(!E5(t)&&!LO(t)){var C=Dp(t,f),L=zO?zO(t)===Object.prototype:t instanceof Object||t.constructor===Object,M=t instanceof Object?"":"null prototype",D=!L&&pu&&Object(t)===t&&pu in t?nS.call(Eo(t),8,-1):M?"Object":"",U=L||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",de=U+(D||M?"["+gn.call(jO.call([],D||[],M||[]),": ")+"] ":"");return C.length===0?de+"{}":m?de+"{"+eS(C,m)+"}":de+"{ "+gn.call(C,", ")+" }"}return String(t)},"inspect_");function HO(e,t,r){var o=r.quoteStyle||t,n=ZO[o];return n+e+n}a(HO,"wrapQuotes");function I5(e){return Io.call(String(e),/"/g,"&quot;")}a(I5,"quote");function Yo(e){return!pu||!(typeof e=="object"&&(pu in e||typeof e[pu]<"u"))}a(Yo,"canTrustToString");function Yw(e){return Eo(e)==="[object Array]"&&Yo(e)}a(Yw,"isArray");function E5(e){return Eo(e)==="[object Date]"&&Yo(e)}a(E5,"isDate");function LO(e){return Eo(e)==="[object RegExp]"&&Yo(e)}a(LO,"isRegExp");function k5(e){return Eo(e)==="[object Error]"&&Yo(e)}a(k5,"isError");function P5(e){return Eo(e)==="[object String]"&&Yo(e)}a(P5,"isString");function $5(e){return Eo(e)==="[object Number]"&&Yo(e)}a($5,"isNumber");function A5(e){return Eo(e)==="[object Boolean]"&&Yo(e)}a(A5,"isBoolean");function GO(e){if(Aa)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Qw)return!1;try{return Qw.call(e),!0}catch{}return!1}a(GO,"isSymbol");function C5(e){if(!e||typeof e!="object"||!Ww)return!1;try{return Ww.call(e),!0}catch{}return!1}a(C5,"isBigInt");var O5=Object.prototype.hasOwnProperty||function(e){return e in this};function Zn(e,t){return O5.call(e,t)}a(Zn,"has");function Eo(e){return _5.call(e)}a(Eo,"toStr");function R5(e){if(e.name)return e.name;var t=x5.call(b5.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}a(R5,"nameOf");function KO(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1}a(KO,"indexOf");function N5(e){if(!zp||!e||typeof e!="object")return!1;try{zp.call(e);try{Mp.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}a(N5,"isMap");function j5(e){if(!lu||!e||typeof e!="object")return!1;try{lu.call(e,lu);try{du.call(e,du)}catch{return!0}return e instanceof WeakMap}catch{}return!1}a(j5,"isWeakMap");function D5(e){if(!RO||!e||typeof e!="object")return!1;try{return RO.call(e),!0}catch{}return!1}a(D5,"isWeakRef");function z5(e){if(!Mp||!e||typeof e!="object")return!1;try{Mp.call(e);try{zp.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}a(z5,"isSet");function M5(e){if(!du||!e||typeof e!="object")return!1;try{du.call(e,du);try{lu.call(e,lu)}catch{return!0}return e instanceof WeakSet}catch{}return!1}a(M5,"isWeakSet");function U5(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}a(U5,"isElement");function JO(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,o="... "+r+" more character"+(r>1?"s":"");return JO(nS.call(e,0,t.maxStringLength),t)+o}var n=T5[t.quoteStyle||"single"];n.lastIndex=0;var i=Io.call(Io.call(e,n,"\\$1"),/[\x00-\x1f]/g,q5);return HO(i,"single",t)}a(JO,"inspectString");function q5(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w5.call(t.toString(16))}a(q5,"lowbyte");function uu(e){return"Object("+e+")"}a(uu,"markBoxed");function Jw(e){return e+" { ? }"}a(Jw,"weakCollectionOf");function FO(e,t,r,o){var n=o?eS(r,o):gn.call(r,", ");return e+" ("+t+") {"+n+"}"}a(FO,"collectionOf");function L5(e){for(var t=0;t<e.length;t++)if(KO(e[t],`
`)>=0)return!1;return!0}a(L5,"singleLineValues");function F5(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=gn.call(Array(e.indent+1)," ");else return null;return{base:r,prev:gn.call(Array(t+1),r)}}a(F5,"getIndent");function eS(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+gn.call(e,","+r)+`
`+t.prev}a(eS,"indentedJoin");function Dp(e,t){var r=Yw(e),o=[];if(r){o.length=e.length;for(var n=0;n<e.length;n++)o[n]=Zn(e,n)?t(e[n],e):""}var i=typeof Kw=="function"?Kw(e):[],c;if(Aa){c={};for(var u=0;u<i.length;u++)c["$"+i[u]]=i[u]}for(var l in e)Zn(e,l)&&(r&&String(Number(l))===l&&l<e.length||Aa&&c["$"+l]instanceof Symbol||(BO.call(/[^\w$]/,l)?o.push(t(l,e)+": "+t(e[l],e)):o.push(l+": "+t(e[l],e))));if(typeof Kw=="function")for(var d=0;d<i.length;d++)VO.call(e,i[d])&&o.push("["+t(i[d])+"]: "+t(e[i[d]],e));return o}a(Dp,"arrObjKeys")});var XO=Te(($0e,QO)=>{"use strict";var B5=mu(),V5=Xo(),Up=a(function(e,t,r){for(var o=e,n;(n=o.next)!=null;o=n)if(n.key===t)return o.next=n.next,r||(n.next=e.next,e.next=n),n},"listGetNode"),Z5=a(function(e,t){if(e){var r=Up(e,t);return r&&r.value}},"listGet"),H5=a(function(e,t,r){var o=Up(e,t);o?o.value=r:e.next={key:t,next:e.next,value:r}},"listSet"),G5=a(function(e,t){return e?!!Up(e,t):!1},"listHas"),K5=a(function(e,t){if(e)return Up(e,t,!0)},"listDelete");QO.exports=a(function(){var t,r={assert:a(function(o){if(!r.has(o))throw new V5("Side channel does not contain "+B5(o))},"assert"),delete:a(function(o){var n=t&&t.next,i=K5(t,o);return i&&n&&n===i&&(t=void 0),!!i},"delete"),get:a(function(o){return Z5(t,o)},"get"),has:a(function(o){return G5(t,o)},"has"),set:a(function(o,n){t||(t={next:void 0}),H5(t,o,n)},"set")};return r},"getSideChannelList")});var oS=Te((C0e,YO)=>{"use strict";YO.exports=Object});var tR=Te((O0e,eR)=>{"use strict";eR.exports=Error});var nR=Te((R0e,rR)=>{"use strict";rR.exports=EvalError});var iR=Te((N0e,oR)=>{"use strict";oR.exports=RangeError});var sR=Te((j0e,aR)=>{"use strict";aR.exports=ReferenceError});var uR=Te((D0e,cR)=>{"use strict";cR.exports=SyntaxError});var dR=Te((z0e,lR)=>{"use strict";lR.exports=URIError});var mR=Te((M0e,pR)=>{"use strict";pR.exports=Math.abs});var hR=Te((U0e,fR)=>{"use strict";fR.exports=Math.floor});var yR=Te((q0e,gR)=>{"use strict";gR.exports=Math.max});var _R=Te((L0e,vR)=>{"use strict";vR.exports=Math.min});var xR=Te((F0e,bR)=>{"use strict";bR.exports=Math.pow});var SR=Te((B0e,wR)=>{"use strict";wR.exports=Math.round});var IR=Te((V0e,TR)=>{"use strict";TR.exports=Number.isNaN||a(function(t){return t!==t},"isNaN")});var kR=Te((H0e,ER)=>{"use strict";var J5=IR();ER.exports=a(function(t){return J5(t)||t===0?t:t<0?-1:1},"sign")});var $R=Te((K0e,PR)=>{"use strict";PR.exports=Object.getOwnPropertyDescriptor});var iS=Te((J0e,AR)=>{"use strict";var qp=$R();if(qp)try{qp([],"length")}catch{qp=null}AR.exports=qp});var OR=Te((W0e,CR)=>{"use strict";var Lp=Object.defineProperty||!1;if(Lp)try{Lp({},"a",{value:1})}catch{Lp=!1}CR.exports=Lp});var NR=Te((Q0e,RR)=>{"use strict";RR.exports=a(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),o=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var c=Object.getOwnPropertySymbols(t);if(c.length!==1||c[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(t,r);if(u.value!==n||u.enumerable!==!0)return!1}return!0},"hasSymbols")});var zR=Te((Y0e,DR)=>{"use strict";var jR=typeof Symbol<"u"&&Symbol,W5=NR();DR.exports=a(function(){return typeof jR!="function"||typeof Symbol!="function"||typeof jR("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:W5()},"hasNativeSymbols")});var aS=Te((tEe,MR)=>{"use strict";MR.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var sS=Te((rEe,UR)=>{"use strict";var Q5=oS();UR.exports=Q5.getPrototypeOf||null});var FR=Te((nEe,LR)=>{"use strict";var X5="Function.prototype.bind called on incompatible ",Y5=Object.prototype.toString,eK=Math.max,tK="[object Function]",qR=a(function(t,r){for(var o=[],n=0;n<t.length;n+=1)o[n]=t[n];for(var i=0;i<r.length;i+=1)o[i+t.length]=r[i];return o},"concatty"),rK=a(function(t,r){for(var o=[],n=r||0,i=0;n<t.length;n+=1,i+=1)o[i]=t[n];return o},"slicy"),nK=a(function(e,t){for(var r="",o=0;o<e.length;o+=1)r+=e[o],o+1<e.length&&(r+=t);return r},"joiny");LR.exports=a(function(t){var r=this;if(typeof r!="function"||Y5.apply(r)!==tK)throw new TypeError(X5+r);for(var o=rK(arguments,1),n,i=a(function(){if(this instanceof n){var p=r.apply(this,qR(o,arguments));return Object(p)===p?p:this}return r.apply(t,qR(o,arguments))},"binder"),c=eK(0,r.length-o.length),u=[],l=0;l<c;l++)u[l]="$"+l;if(n=Function("binder","return function ("+nK(u,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var d=a(function(){},"Empty");d.prototype=r.prototype,n.prototype=new d,d.prototype=null}return n},"bind")});var fu=Te((iEe,BR)=>{"use strict";var oK=FR();BR.exports=Function.prototype.bind||oK});var Fp=Te((aEe,VR)=>{"use strict";VR.exports=Function.prototype.call});var cS=Te((sEe,ZR)=>{"use strict";ZR.exports=Function.prototype.apply});var GR=Te((cEe,HR)=>{"use strict";HR.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var JR=Te((uEe,KR)=>{"use strict";var iK=fu(),aK=cS(),sK=Fp(),cK=GR();KR.exports=cK||iK.call(sK,aK)});var uS=Te((lEe,WR)=>{"use strict";var uK=fu(),lK=Xo(),dK=Fp(),pK=JR();WR.exports=a(function(t){if(t.length<1||typeof t[0]!="function")throw new lK("a function is required");return pK(uK,dK,t)},"callBindBasic")});var rN=Te((pEe,tN)=>{"use strict";var mK=uS(),QR=iS(),YR;try{YR=[].__proto__===Array.prototype}catch(e){if(!e||typeof e!="object"||!("code"in e)||e.code!=="ERR_PROTO_ACCESS")throw e}var lS=!!YR&&QR&&QR(Object.prototype,"__proto__"),eN=Object,XR=eN.getPrototypeOf;tN.exports=lS&&typeof lS.get=="function"?mK([lS.get]):typeof XR=="function"?a(function(t){return XR(t==null?t:eN(t))},"getDunder"):!1});var sN=Te((fEe,aN)=>{"use strict";var nN=aS(),oN=sS(),iN=rN();aN.exports=nN?a(function(t){return nN(t)},"getProto"):oN?a(function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return oN(t)},"getProto"):iN?a(function(t){return iN(t)},"getProto"):null});var uN=Te((gEe,cN)=>{"use strict";var fK=Function.prototype.call,hK=Object.prototype.hasOwnProperty,gK=fu();cN.exports=gK.call(fK,hK)});var Zp=Te((yEe,hN)=>{"use strict";var De,yK=oS(),vK=tR(),_K=nR(),bK=iR(),xK=sR(),Na=uR(),Ra=Xo(),wK=dR(),SK=mR(),TK=hR(),IK=yR(),EK=_R(),kK=xR(),PK=SR(),$K=kR(),mN=Function,dS=a(function(e){try{return mN('"use strict"; return ('+e+").constructor;")()}catch{}},"getEvalledConstructor"),hu=iS(),AK=OR(),pS=a(function(){throw new Ra},"throwTypeError"),CK=hu?(function(){try{return arguments.callee,pS}catch{try{return hu(arguments,"callee").get}catch{return pS}}})():pS,Ca=zR()(),qt=sN(),OK=sS(),RK=aS(),fN=cS(),gu=Fp(),Oa={},NK=typeof Uint8Array>"u"||!qt?De:qt(Uint8Array),ei={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?De:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?De:ArrayBuffer,"%ArrayIteratorPrototype%":Ca&&qt?qt([][Symbol.iterator]()):De,"%AsyncFromSyncIteratorPrototype%":De,"%AsyncFunction%":Oa,"%AsyncGenerator%":Oa,"%AsyncGeneratorFunction%":Oa,"%AsyncIteratorPrototype%":Oa,"%Atomics%":typeof Atomics>"u"?De:Atomics,"%BigInt%":typeof BigInt>"u"?De:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?De:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?De:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?De:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":vK,"%eval%":eval,"%EvalError%":_K,"%Float16Array%":typeof Float16Array>"u"?De:Float16Array,"%Float32Array%":typeof Float32Array>"u"?De:Float32Array,"%Float64Array%":typeof Float64Array>"u"?De:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?De:FinalizationRegistry,"%Function%":mN,"%GeneratorFunction%":Oa,"%Int8Array%":typeof Int8Array>"u"?De:Int8Array,"%Int16Array%":typeof Int16Array>"u"?De:Int16Array,"%Int32Array%":typeof Int32Array>"u"?De:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ca&&qt?qt(qt([][Symbol.iterator]())):De,"%JSON%":typeof JSON=="object"?JSON:De,"%Map%":typeof Map>"u"?De:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ca||!qt?De:qt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":yK,"%Object.getOwnPropertyDescriptor%":hu,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?De:Promise,"%Proxy%":typeof Proxy>"u"?De:Proxy,"%RangeError%":bK,"%ReferenceError%":xK,"%Reflect%":typeof Reflect>"u"?De:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?De:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ca||!qt?De:qt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?De:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ca&&qt?qt(""[Symbol.iterator]()):De,"%Symbol%":Ca?Symbol:De,"%SyntaxError%":Na,"%ThrowTypeError%":CK,"%TypedArray%":NK,"%TypeError%":Ra,"%Uint8Array%":typeof Uint8Array>"u"?De:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?De:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?De:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?De:Uint32Array,"%URIError%":wK,"%WeakMap%":typeof WeakMap>"u"?De:WeakMap,"%WeakRef%":typeof WeakRef>"u"?De:WeakRef,"%WeakSet%":typeof WeakSet>"u"?De:WeakSet,"%Function.prototype.call%":gu,"%Function.prototype.apply%":fN,"%Object.defineProperty%":AK,"%Object.getPrototypeOf%":OK,"%Math.abs%":SK,"%Math.floor%":TK,"%Math.max%":IK,"%Math.min%":EK,"%Math.pow%":kK,"%Math.round%":PK,"%Math.sign%":$K,"%Reflect.getPrototypeOf%":RK};if(qt)try{null.error}catch(e){lN=qt(qt(e)),ei["%Error.prototype%"]=lN}var lN,jK=a(function e(t){var r;if(t==="%AsyncFunction%")r=dS("async function () {}");else if(t==="%GeneratorFunction%")r=dS("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=dS("async function* () {}");else if(t==="%AsyncGenerator%"){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&qt&&(r=qt(n.prototype))}return ei[t]=r,r},"doEval"),dN={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},yu=fu(),Bp=uN(),DK=yu.call(gu,Array.prototype.concat),zK=yu.call(fN,Array.prototype.splice),pN=yu.call(gu,String.prototype.replace),Vp=yu.call(gu,String.prototype.slice),MK=yu.call(gu,RegExp.prototype.exec),UK=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qK=/\\(\\)?/g,LK=a(function(t){var r=Vp(t,0,1),o=Vp(t,-1);if(r==="%"&&o!=="%")throw new Na("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&r!=="%")throw new Na("invalid intrinsic syntax, expected opening `%`");var n=[];return pN(t,UK,function(i,c,u,l){n[n.length]=u?pN(l,qK,"$1"):c||i}),n},"stringToPath"),FK=a(function(t,r){var o=t,n;if(Bp(dN,o)&&(n=dN[o],o="%"+n[0]+"%"),Bp(ei,o)){var i=ei[o];if(i===Oa&&(i=jK(o)),typeof i>"u"&&!r)throw new Ra("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:o,value:i}}throw new Na("intrinsic "+t+" does not exist!")},"getBaseIntrinsic");hN.exports=a(function(t,r){if(typeof t!="string"||t.length===0)throw new Ra("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ra('"allowMissing" argument must be a boolean');if(MK(/^%?[^%]*%?$/,t)===null)throw new Na("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=LK(t),n=o.length>0?o[0]:"",i=FK("%"+n+"%",r),c=i.name,u=i.value,l=!1,d=i.alias;d&&(n=d[0],zK(o,DK([0,1],d)));for(var p=1,m=!0;p<o.length;p+=1){var f=o[p],g=Vp(f,0,1),h=Vp(f,-1);if((g==='"'||g==="'"||g==="`"||h==='"'||h==="'"||h==="`")&&g!==h)throw new Na("property names with quotes must have matching quotes");if((f==="constructor"||!m)&&(l=!0),n+="."+f,c="%"+n+"%",Bp(ei,c))u=ei[c];else if(u!=null){if(!(f in u)){if(!r)throw new Ra("base intrinsic for "+t+" exists, but the property is not available.");return}if(hu&&p+1>=o.length){var v=hu(u,f);m=!!v,m&&"get"in v&&!("originalValue"in v.get)?u=v.get:u=u[f]}else m=Bp(u,f),u=u[f];m&&!l&&(ei[c]=u)}}return u},"GetIntrinsic")});var mS=Te((_Ee,vN)=>{"use strict";var gN=Zp(),yN=uS(),BK=yN([gN("%String.prototype.indexOf%")]);vN.exports=a(function(t,r){var o=gN(t,!!r);return typeof o=="function"&&BK(t,".prototype.")>-1?yN([o]):o},"callBoundIntrinsic")});var fS=Te((xEe,bN)=>{"use strict";var VK=Zp(),vu=mS(),ZK=mu(),HK=Xo(),_N=VK("%Map%",!0),GK=vu("Map.prototype.get",!0),KK=vu("Map.prototype.set",!0),JK=vu("Map.prototype.has",!0),WK=vu("Map.prototype.delete",!0),QK=vu("Map.prototype.size",!0);bN.exports=!!_N&&a(function(){var t,r={assert:a(function(o){if(!r.has(o))throw new HK("Side channel does not contain "+ZK(o))},"assert"),delete:a(function(o){if(t){var n=WK(t,o);return QK(t)===0&&(t=void 0),n}return!1},"delete"),get:a(function(o){if(t)return GK(t,o)},"get"),has:a(function(o){return t?JK(t,o):!1},"has"),set:a(function(o,n){t||(t=new _N),KK(t,o,n)},"set")};return r},"getSideChannelMap")});var wN=Te((SEe,xN)=>{"use strict";var XK=Zp(),Gp=mS(),YK=mu(),Hp=fS(),eJ=Xo(),ja=XK("%WeakMap%",!0),tJ=Gp("WeakMap.prototype.get",!0),rJ=Gp("WeakMap.prototype.set",!0),nJ=Gp("WeakMap.prototype.has",!0),oJ=Gp("WeakMap.prototype.delete",!0);xN.exports=ja?a(function(){var t,r,o={assert:a(function(n){if(!o.has(n))throw new eJ("Side channel does not contain "+YK(n))},"assert"),delete:a(function(n){if(ja&&n&&(typeof n=="object"||typeof n=="function")){if(t)return oJ(t,n)}else if(Hp&&r)return r.delete(n);return!1},"delete"),get:a(function(n){return ja&&n&&(typeof n=="object"||typeof n=="function")&&t?tJ(t,n):r&&r.get(n)},"get"),has:a(function(n){return ja&&n&&(typeof n=="object"||typeof n=="function")&&t?nJ(t,n):!!r&&r.has(n)},"has"),set:a(function(n,i){ja&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new ja),rJ(t,n,i)):Hp&&(r||(r=Hp()),r.set(n,i))},"set")};return o},"getSideChannelWeakMap"):Hp});var TN=Te((IEe,SN)=>{"use strict";var iJ=Xo(),aJ=mu(),sJ=XO(),cJ=fS(),uJ=wN(),lJ=uJ||cJ||sJ;SN.exports=a(function(){var t,r={assert:a(function(o){if(!r.has(o))throw new iJ("Side channel does not contain "+aJ(o))},"assert"),delete:a(function(o){return!!t&&t.delete(o)},"delete"),get:a(function(o){return t&&t.get(o)},"get"),has:a(function(o){return!!t&&t.has(o)},"has"),set:a(function(o,n){t||(t=lJ()),t.set(o,n)},"set")};return r},"getSideChannel")});var Kp=Te((kEe,IN)=>{"use strict";var dJ=String.prototype.replace,pJ=/%20/g,hS={RFC1738:"RFC1738",RFC3986:"RFC3986"};IN.exports={default:hS.RFC3986,formatters:{RFC1738:a(function(e){return dJ.call(e,pJ,"+")},"RFC1738"),RFC3986:a(function(e){return String(e)},"RFC3986")},RFC1738:hS.RFC1738,RFC3986:hS.RFC3986}});var vS=Te(($Ee,kN)=>{"use strict";var mJ=Kp(),gS=Object.prototype.hasOwnProperty,ti=Array.isArray,yn=(function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),fJ=a(function(t){for(;t.length>1;){var r=t.pop(),o=r.obj[r.prop];if(ti(o)){for(var n=[],i=0;i<o.length;++i)typeof o[i]<"u"&&n.push(o[i]);r.obj[r.prop]=n}}},"compactQueue"),EN=a(function(t,r){for(var o=r&&r.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)typeof t[n]<"u"&&(o[n]=t[n]);return o},"arrayToObject"),hJ=a(function e(t,r,o){if(!r)return t;if(typeof r!="object"&&typeof r!="function"){if(ti(t))t.push(r);else if(t&&typeof t=="object")(o&&(o.plainObjects||o.allowPrototypes)||!gS.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var n=t;return ti(t)&&!ti(r)&&(n=EN(t,o)),ti(t)&&ti(r)?(r.forEach(function(i,c){if(gS.call(t,c)){var u=t[c];u&&typeof u=="object"&&i&&typeof i=="object"?t[c]=e(u,i,o):t.push(i)}else t[c]=i}),t):Object.keys(r).reduce(function(i,c){var u=r[c];return gS.call(i,c)?i[c]=e(i[c],u,o):i[c]=u,i},n)},"merge"),gJ=a(function(t,r){return Object.keys(r).reduce(function(o,n){return o[n]=r[n],o},t)},"assignSingleSource"),yJ=a(function(e,t,r){var o=e.replace(/\+/g," ");if(r==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},"decode"),yS=1024,vJ=a(function(t,r,o,n,i){if(t.length===0)return t;var c=t;if(typeof t=="symbol"?c=Symbol.prototype.toString.call(t):typeof t!="string"&&(c=String(t)),o==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(g){return"%26%23"+parseInt(g.slice(2),16)+"%3B"});for(var u="",l=0;l<c.length;l+=yS){for(var d=c.length>=yS?c.slice(l,l+yS):c,p=[],m=0;m<d.length;++m){var f=d.charCodeAt(m);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===mJ.RFC1738&&(f===40||f===41)){p[p.length]=d.charAt(m);continue}if(f<128){p[p.length]=yn[f];continue}if(f<2048){p[p.length]=yn[192|f>>6]+yn[128|f&63];continue}if(f<55296||f>=57344){p[p.length]=yn[224|f>>12]+yn[128|f>>6&63]+yn[128|f&63];continue}m+=1,f=65536+((f&1023)<<10|d.charCodeAt(m)&1023),p[p.length]=yn[240|f>>18]+yn[128|f>>12&63]+yn[128|f>>6&63]+yn[128|f&63]}u+=p.join("")}return u},"encode"),_J=a(function(t){for(var r=[{obj:{o:t},prop:"o"}],o=[],n=0;n<r.length;++n)for(var i=r[n],c=i.obj[i.prop],u=Object.keys(c),l=0;l<u.length;++l){var d=u[l],p=c[d];typeof p=="object"&&p!==null&&o.indexOf(p)===-1&&(r.push({obj:c,prop:d}),o.push(p))}return fJ(r),t},"compact"),bJ=a(function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},"isRegExp"),xJ=a(function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},"isBuffer"),wJ=a(function(t,r){return[].concat(t,r)},"combine"),SJ=a(function(t,r){if(ti(t)){for(var o=[],n=0;n<t.length;n+=1)o.push(r(t[n]));return o}return r(t)},"maybeMap");kN.exports={arrayToObject:EN,assign:gJ,combine:wJ,compact:_J,decode:yJ,encode:vJ,isBuffer:xJ,isRegExp:bJ,maybeMap:SJ,merge:hJ}});var RN=Te((CEe,ON)=>{"use strict";var $N=TN(),Jp=vS(),_u=Kp(),TJ=Object.prototype.hasOwnProperty,AN={brackets:a(function(t){return t+"[]"},"brackets"),comma:"comma",indices:a(function(t,r){return t+"["+r+"]"},"indices"),repeat:a(function(t){return t},"repeat")},vn=Array.isArray,IJ=Array.prototype.push,CN=a(function(e,t){IJ.apply(e,vn(t)?t:[t])},"pushToArray"),EJ=Date.prototype.toISOString,PN=_u.default,Dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Jp.encode,encodeValuesOnly:!1,filter:void 0,format:PN,formatter:_u.formatters[PN],indices:!1,serializeDate:a(function(t){return EJ.call(t)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},kJ=a(function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},"isNonNullishPrimitive"),_S={},PJ=a(function e(t,r,o,n,i,c,u,l,d,p,m,f,g,h,v,x,S,b){for(var w=t,P=b,B=0,V=!1;(P=P.get(_S))!==void 0&&!V;){var C=P.get(t);if(B+=1,typeof C<"u"){if(C===B)throw new RangeError("Cyclic object value");V=!0}typeof P.get(_S)>"u"&&(B=0)}if(typeof p=="function"?w=p(r,w):w instanceof Date?w=g(w):o==="comma"&&vn(w)&&(w=Jp.maybeMap(w,function(We){return We instanceof Date?g(We):We})),w===null){if(c)return d&&!x?d(r,Dt.encoder,S,"key",h):r;w=""}if(kJ(w)||Jp.isBuffer(w)){if(d){var L=x?r:d(r,Dt.encoder,S,"key",h);return[v(L)+"="+v(d(w,Dt.encoder,S,"value",h))]}return[v(r)+"="+v(String(w))]}var M=[];if(typeof w>"u")return M;var D;if(o==="comma"&&vn(w))x&&d&&(w=Jp.maybeMap(w,d)),D=[{value:w.length>0?w.join(",")||null:void 0}];else if(vn(p))D=p;else{var U=Object.keys(w);D=m?U.sort(m):U}var de=l?String(r).replace(/\./g,"%2E"):String(r),J=n&&vn(w)&&w.length===1?de+"[]":de;if(i&&vn(w)&&w.length===0)return J+"[]";for(var re=0;re<D.length;++re){var ve=D[re],ie=typeof ve=="object"&&ve&&typeof ve.value<"u"?ve.value:w[ve];if(!(u&&ie===null)){var fe=f&&l?String(ve).replace(/\./g,"%2E"):String(ve),ze=vn(w)?typeof o=="function"?o(J,fe):J:J+(f?"."+fe:"["+fe+"]");b.set(t,B);var wt=$N();wt.set(_S,b),CN(M,e(ie,ze,o,n,i,c,u,l,o==="comma"&&x&&vn(w)?null:d,p,m,f,g,h,v,x,S,wt))}}return M},"stringify"),$J=a(function(t){if(!t)return Dt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||Dt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=_u.default;if(typeof t.format<"u"){if(!TJ.call(_u.formatters,t.format))throw new TypeError("Unknown format option provided.");o=t.format}var n=_u.formatters[o],i=Dt.filter;(typeof t.filter=="function"||vn(t.filter))&&(i=t.filter);var c;if(t.arrayFormat in AN?c=t.arrayFormat:"indices"in t?c=t.indices?"indices":"repeat":c=Dt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Dt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Dt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Dt.allowEmptyArrays,arrayFormat:c,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Dt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Dt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Dt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Dt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Dt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Dt.encodeValuesOnly,filter:i,format:o,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Dt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Dt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Dt.strictNullHandling}},"normalizeStringifyOptions");ON.exports=function(e,t){var r=e,o=$J(t),n,i;typeof o.filter=="function"?(i=o.filter,r=i("",r)):vn(o.filter)&&(i=o.filter,n=i);var c=[];if(typeof r!="object"||r===null)return"";var u=AN[o.arrayFormat],l=u==="comma"&&o.commaRoundTrip;n||(n=Object.keys(r)),o.sort&&n.sort(o.sort);for(var d=$N(),p=0;p<n.length;++p){var m=n[p],f=r[m];o.skipNulls&&f===null||CN(c,PJ(f,m,u,l,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,d))}var g=c.join(o.delimiter),h=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),g.length>0?h+g:""}});var zN=Te((REe,DN)=>{"use strict";var ri=vS(),bS=Object.prototype.hasOwnProperty,NN=Array.isArray,_t={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ri.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},AJ=a(function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),jN=a(function(e,t,r){if(e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return e},"parseArrayValue"),CJ="utf8=%26%2310003%3B",OJ="utf8=%E2%9C%93",RJ=a(function(t,r){var o={__proto__:null},n=r.ignoreQueryPrefix?t.replace(/^\?/,""):t;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,c=n.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&c.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var u=-1,l,d=r.charset;if(r.charsetSentinel)for(l=0;l<c.length;++l)c[l].indexOf("utf8=")===0&&(c[l]===OJ?d="utf-8":c[l]===CJ&&(d="iso-8859-1"),u=l,l=c.length);for(l=0;l<c.length;++l)if(l!==u){var p=c[l],m=p.indexOf("]="),f=m===-1?p.indexOf("="):m+1,g,h;f===-1?(g=r.decoder(p,_t.decoder,d,"key"),h=r.strictNullHandling?null:""):(g=r.decoder(p.slice(0,f),_t.decoder,d,"key"),h=ri.maybeMap(jN(p.slice(f+1),r,NN(o[g])?o[g].length:0),function(x){return r.decoder(x,_t.decoder,d,"value")})),h&&r.interpretNumericEntities&&d==="iso-8859-1"&&(h=AJ(String(h))),p.indexOf("[]=")>-1&&(h=NN(h)?[h]:h);var v=bS.call(o,g);v&&r.duplicates==="combine"?o[g]=ri.combine(o[g],h):(!v||r.duplicates==="last")&&(o[g]=h)}return o},"parseQueryStringValues"),NJ=a(function(e,t,r,o){var n=0;if(e.length>0&&e[e.length-1]==="[]"){var i=e.slice(0,-1).join("");n=Array.isArray(t)&&t[i]?t[i].length:0}for(var c=o?t:jN(t,r,n),u=e.length-1;u>=0;--u){var l,d=e[u];if(d==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(c===""||r.strictNullHandling&&c===null)?[]:ri.combine([],c);else{l=r.plainObjects?{__proto__:null}:{};var p=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,m=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,f=parseInt(m,10);!r.parseArrays&&m===""?l={0:c}:!isNaN(f)&&d!==m&&String(f)===m&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(l=[],l[f]=c):m!=="__proto__"&&(l[m]=c)}c=l}return c},"parseObject"),jJ=a(function(t,r,o,n){if(t){var i=o.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,c=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,l=o.depth>0&&c.exec(i),d=l?i.slice(0,l.index):i,p=[];if(d){if(!o.plainObjects&&bS.call(Object.prototype,d)&&!o.allowPrototypes)return;p.push(d)}for(var m=0;o.depth>0&&(l=u.exec(i))!==null&&m<o.depth;){if(m+=1,!o.plainObjects&&bS.call(Object.prototype,l[1].slice(1,-1))&&!o.allowPrototypes)return;p.push(l[1])}if(l){if(o.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");p.push("["+i.slice(l.index)+"]")}return NJ(p,r,o,n)}},"parseQueryStringKeys"),DJ=a(function(t){if(!t)return _t;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded<"u"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof t.charset>"u"?_t.charset:t.charset,o=typeof t.duplicates>"u"?_t.duplicates:t.duplicates;if(o!=="combine"&&o!=="first"&&o!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:_t.allowDots:!!t.allowDots;return{allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:_t.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:_t.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:_t.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:_t.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_t.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:_t.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:_t.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:_t.decoder,delimiter:typeof t.delimiter=="string"||ri.isRegExp(t.delimiter)?t.delimiter:_t.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:_t.depth,duplicates:o,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:_t.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:_t.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:_t.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:_t.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_t.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}},"normalizeParseOptions");DN.exports=function(e,t){var r=DJ(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?{__proto__:null}:{};for(var o=typeof e=="string"?RJ(e,r):e,n=r.plainObjects?{__proto__:null}:{},i=Object.keys(o),c=0;c<i.length;++c){var u=i[c],l=jJ(u,o[u],r,typeof e=="string");n=ri.merge(n,l,r)}return r.allowSparse===!0?n:ri.compact(n)}});var UN=Te((jEe,MN)=>{"use strict";var zJ=RN(),MJ=zN(),UJ=Kp();MN.exports={formats:UJ,parse:MJ,stringify:zJ}});var Fm=a(e=>t=>e.fetch(t),"handle");var Bm=a((e,t,r)=>(o,n)=>{let i=-1;return c(0);async function c(u){if(u<=i)throw new Error("next() called multiple times");i=u;let l,d=!1,p;if(e[u]?(p=e[u][0][0],o.req.routeIndex=u):p=u===e.length&&n||void 0,p)try{l=await p(o,()=>c(u+1))}catch(m){if(m instanceof Error&&t)o.error=m,l=await t(m,o),d=!0;else throw m}else o.finalized===!1&&r&&(l=await r(o));return l&&(o.finalized===!1||d)&&(o.res=l),o}},"compose");var el=class extends Error{static{a(this,"HTTPException")}res;status;constructor(e=500,t){super(t?.message,{cause:t?.cause}),this.res=t?.res,this.status=e}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var pT=Symbol();var mT=a(async(e,t=Object.create(null))=>{let{all:r=!1,dot:o=!1}=t,i=(e instanceof tl?e.raw.headers:e.headers).get("Content-Type");return i?.startsWith("multipart/form-data")||i?.startsWith("application/x-www-form-urlencoded")?Vz(e,{all:r,dot:o}):{}},"parseBody");async function Vz(e,t){let r=await e.formData();return r?Zz(r,t):{}}a(Vz,"parseFormData");function Zz(e,t){let r=Object.create(null);return e.forEach((o,n)=>{t.all||n.endsWith("[]")?Hz(r,n,o):r[n]=o}),t.dot&&Object.entries(r).forEach(([o,n])=>{o.includes(".")&&(Gz(r,o,n),delete r[o])}),r}a(Zz,"convertFormDataToBodyData");var Hz=a((e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},"handleParsingAllValues"),Gz=a((e,t,r)=>{let o=e,n=t.split(".");n.forEach((i,c)=>{c===n.length-1?o[i]=r:((!o[i]||typeof o[i]!="object"||Array.isArray(o[i])||o[i]instanceof File)&&(o[i]=Object.create(null)),o=o[i])})},"handleParsingNestedValues");var Zm=a(e=>{let t=e.split("/");return t[0]===""&&t.shift(),t},"splitPath"),fT=a(e=>{let{groups:t,path:r}=Kz(e),o=Zm(r);return Jz(o,t)},"splitRoutingPath"),Kz=a(e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(r,o)=>{let n=`@${o}`;return t.push([n,r]),n}),{groups:t,path:e}},"extractGroupsFromPath"),Jz=a((e,t)=>{for(let r=t.length-1;r>=0;r--){let[o]=t[r];for(let n=e.length-1;n>=0;n--)if(e[n].includes(o)){e[n]=e[n].replace(o,t[r][1]);break}}return e},"replaceGroupMarks"),rl={},hT=a((e,t)=>{if(e==="*")return"*";let r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let o=`${e}#${t}`;return rl[o]||(r[2]?rl[o]=t&&t[0]!==":"&&t[0]!=="*"?[o,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:rl[o]=[e,r[1],!0]),rl[o]}return null},"getPattern"),gi=a((e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},"tryDecode"),Wz=a(e=>gi(e,decodeURI),"tryDecodeURI"),Hm=a(e=>{let t=e.url,r=t.indexOf("/",t.indexOf(":")+4),o=r;for(;o<t.length;o++){let n=t.charCodeAt(o);if(n===37){let i=t.indexOf("?",o),c=t.slice(r,i===-1?void 0:i);return Wz(c.includes("%25")?c.replace(/%25/g,"%2525"):c)}else if(n===63)break}return t.slice(r,o)},"getPath");var gT=a(e=>{let t=Hm(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},"getPathNoStrict"),No=a((e,t,...r)=>(r.length&&(t=No(t,...r)),`${e?.[0]==="/"?"":"/"}${e}${t==="/"?"":`${e?.at(-1)==="/"?"":"/"}${t?.[0]==="/"?t.slice(1):t}`}`),"mergePath"),nl=a(e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;let t=e.split("/"),r=[],o="";return t.forEach(n=>{if(n!==""&&!/\:/.test(n))o+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){r.length===0&&o===""?r.push("/"):r.push(o);let i=n.replace("?","");o+="/"+i,r.push(o)}else o+="/"+n}),r.filter((n,i,c)=>c.indexOf(n)===i)},"checkOptionalParameter"),Vm=a(e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?gi(e,rs):e):e,"_decodeURI"),yT=a((e,t,r)=>{let o;if(!r&&t&&!/[%+]/.test(t)){let c=e.indexOf("?",8);if(c===-1)return;for(e.startsWith(t,c+1)||(c=e.indexOf(`&${t}`,c+1));c!==-1;){let u=e.charCodeAt(c+t.length+1);if(u===61){let l=c+t.length+2,d=e.indexOf("&",l);return Vm(e.slice(l,d===-1?void 0:d))}else if(u==38||isNaN(u))return"";c=e.indexOf(`&${t}`,c+1)}if(o=/[%+]/.test(e),!o)return}let n={};o??=/[%+]/.test(e);let i=e.indexOf("?",8);for(;i!==-1;){let c=e.indexOf("&",i+1),u=e.indexOf("=",i);u>c&&c!==-1&&(u=-1);let l=e.slice(i+1,u===-1?c===-1?void 0:c:u);if(o&&(l=Vm(l)),i=c,l==="")continue;let d;u===-1?d="":(d=e.slice(u+1,c===-1?void 0:c),o&&(d=Vm(d))),r?(n[l]&&Array.isArray(n[l])||(n[l]=[]),n[l].push(d)):n[l]??=d}return t?n[t]:n},"_getQueryParam"),vT=yT,_T=a((e,t)=>yT(e,t,!0),"getQueryParams"),rs=decodeURIComponent;var bT=a(e=>gi(e,rs),"tryDecodeURIComponent"),tl=class{static{a(this,"HonoRequest")}raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(e,t="/",r=[[]]){this.raw=e,this.path=t,this.#t=r,this.#e={}}param(e){return e?this.#r(e):this.#i()}#r(e){let t=this.#t[0][this.routeIndex][1][e],r=this.#o(t);return r&&/\%/.test(r)?bT(r):r}#i(){let e={},t=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of t){let o=this.#o(this.#t[0][this.routeIndex][1][r]);o!==void 0&&(e[r]=/\%/.test(o)?bT(o):o)}return e}#o(e){return this.#t[1]?this.#t[1][e]:e}query(e){return vT(this.url,e)}queries(e){return _T(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;let t={};return this.raw.headers.forEach((r,o)=>{t[o]=r}),t}async parseBody(e){return this.bodyCache.parsedBody??=await mT(this,e)}#n=a(e=>{let{bodyCache:t,raw:r}=this,o=t[e];if(o)return o;let n=Object.keys(t)[0];return n?t[n].then(i=>(n==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=r[e]()},"#cachedBody");json(){return this.#n("text").then(e=>JSON.parse(e))}text(){return this.#n("text")}arrayBuffer(){return this.#n("arrayBuffer")}blob(){return this.#n("blob")}formData(){return this.#n("formData")}addValidatedData(e,t){this.#e[e]=t}valid(e){return this.#e[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[pT](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,e]])=>e)}get routePath(){return this.#t[0].map(([[,e]])=>e)[this.routeIndex].path}};var xT={Stringify:1,BeforeStream:2,Stream:3},Qz=a((e,t)=>{let r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},"raw");var Gm=a(async(e,t,r,o,n)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let i=e.callbacks;if(!i?.length)return Promise.resolve(e);n?n[0]+=e:n=[e];let c=Promise.all(i.map(u=>u({phase:t,buffer:n,context:o}))).then(u=>Promise.all(u.filter(Boolean).map(l=>Gm(l,t,!1,o,n))).then(()=>n[0]));return r?Qz(await c,i):c},"resolveCallback");var Xz="text/plain; charset=UTF-8",Km=a((e,t)=>({"Content-Type":e,...t}),"setDefaultContentType"),wT=class{static{a(this,"Context")}#e;#t;env={};#r;finalized=!1;error;#i;#o;#n;#l;#c;#u;#s;#d;#p;constructor(e,t){this.#e=e,t&&(this.#o=t.executionCtx,this.env=t.env,this.#u=t.notFoundHandler,this.#p=t.path,this.#d=t.matchResult)}get req(){return this.#t??=new tl(this.#e,this.#p,this.#d),this.#t}get event(){if(this.#o&&"respondWith"in this.#o)return this.#o;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#o)return this.#o;throw Error("This context has no ExecutionContext")}get res(){return this.#n||=new Response(null,{headers:this.#s??=new Headers})}set res(e){if(this.#n&&e){e=new Response(e.body,e);for(let[t,r]of this.#n.headers.entries())if(t!=="content-type")if(t==="set-cookie"){let o=this.#n.headers.getSetCookie();e.headers.delete("set-cookie");for(let n of o)e.headers.append("set-cookie",n)}else e.headers.set(t,r)}this.#n=e,this.finalized=!0}render=a((...e)=>(this.#c??=t=>this.html(t),this.#c(...e)),"render");setLayout=a(e=>this.#l=e,"setLayout");getLayout=a(()=>this.#l,"getLayout");setRenderer=a(e=>{this.#c=e},"setRenderer");header=a((e,t,r)=>{this.finalized&&(this.#n=new Response(this.#n.body,this.#n));let o=this.#n?this.#n.headers:this.#s??=new Headers;t===void 0?o.delete(e):r?.append?o.append(e,t):o.set(e,t)},"header");status=a(e=>{this.#i=e},"status");set=a((e,t)=>{this.#r??=new Map,this.#r.set(e,t)},"set");get=a(e=>this.#r?this.#r.get(e):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(e,t,r){let o=this.#n?new Headers(this.#n.headers):this.#s??new Headers;if(typeof t=="object"&&"headers"in t){let i=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(let[c,u]of i)c.toLowerCase()==="set-cookie"?o.append(c,u):o.set(c,u)}if(r)for(let[i,c]of Object.entries(r))if(typeof c=="string")o.set(i,c);else{o.delete(i);for(let u of c)o.append(i,u)}let n=typeof t=="number"?t:t?.status??this.#i;return new Response(e,{status:n,headers:o})}newResponse=a((...e)=>this.#a(...e),"newResponse");body=a((e,t,r)=>this.#a(e,t,r),"body");text=a((e,t,r)=>!this.#s&&!this.#i&&!t&&!r&&!this.finalized?new Response(e):this.#a(e,t,Km(Xz,r)),"text");json=a((e,t,r)=>this.#a(JSON.stringify(e),t,Km("application/json",r)),"json");html=a((e,t,r)=>{let o=a(n=>this.#a(n,t,Km("text/html; charset=UTF-8",r)),"res");return typeof e=="object"?Gm(e,xT.Stringify,!1,{}).then(o):o(e)},"html");redirect=a((e,t)=>{let r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)},"redirect");notFound=a(()=>(this.#u??=()=>new Response,this.#u(this)),"notFound")};Wn();Jm();var Yz=a(e=>e.text("404 Not Found",404),"notFoundHandler"),IT=a((e,t)=>{if("getResponse"in e){let r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},"errorHandler"),Wm=class{static{a(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(e={}){[...TT,ST].forEach(n=>{this[n]=(i,...c)=>(typeof i=="string"?this.#e=i:this.#i(n,this.#e,i),c.forEach(u=>{this.#i(n,this.#e,u)}),this)}),this.on=(n,i,...c)=>{for(let u of[i].flat()){this.#e=u;for(let l of[n].flat())c.map(d=>{this.#i(l.toUpperCase(),this.#e,d)})}return this},this.use=(n,...i)=>(typeof n=="string"?this.#e=n:(this.#e="*",i.unshift(n)),i.forEach(c=>{this.#i(rt,this.#e,c)}),this);let{strict:r,...o}=e;Object.assign(this,o),this.getPath=r??!0?e.getPath??Hm:gT}#t(){let e=new Wm({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#r=this.#r,e.routes=this.routes,e}#r=Yz;errorHandler=IT;route(e,t){let r=this.basePath(e);return t.routes.map(o=>{let n;t.errorHandler===IT?n=o.handler:(n=a(async(i,c)=>(await Bm([],t.errorHandler)(i,()=>o.handler(i,c))).res,"handler"),n[ns]=o.handler),r.#i(o.method,o.path,n)}),this}basePath(e){let t=this.#t();return t._basePath=No(this._basePath,e),t}onError=a(e=>(this.errorHandler=e,this),"onError");notFound=a(e=>(this.#r=e,this),"notFound");mount(e,t,r){let o,n;r&&(typeof r=="function"?n=r:(n=r.optionHandler,r.replaceRequest===!1?o=a(u=>u,"replaceRequest"):o=r.replaceRequest));let i=n?u=>{let l=n(u);return Array.isArray(l)?l:[l]}:u=>{let l;try{l=u.executionCtx}catch{}return[u.env,l]};o||=(()=>{let u=No(this._basePath,e),l=u==="/"?0:u.length;return d=>{let p=new URL(d.url);return p.pathname=p.pathname.slice(l)||"/",new Request(p,d)}})();let c=a(async(u,l)=>{let d=await t(o(u.req.raw),...i(u));if(d)return d;await l()},"handler");return this.#i(rt,No(e,"*"),c),this}#i(e,t,r){e=e.toUpperCase(),t=No(this._basePath,t);let o={basePath:this._basePath,path:t,method:e,handler:r};this.router.add(e,t,[r,o]),this.routes.push(o)}#o(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#n(e,t,r,o){if(o==="HEAD")return(async()=>new Response(null,await this.#n(e,t,r,"GET")))();let n=this.getPath(e,{env:r}),i=this.router.match(o,n),c=new wT(e,{path:n,matchResult:i,env:r,executionCtx:t,notFoundHandler:this.#r});if(i[0].length===1){let l;try{l=i[0][0][0][0](c,async()=>{c.res=await this.#r(c)})}catch(d){return this.#o(d,c)}return l instanceof Promise?l.then(d=>d||(c.finalized?c.res:this.#r(c))).catch(d=>this.#o(d,c)):l??this.#r(c)}let u=Bm(i[0],this.errorHandler,this.#r);return(async()=>{try{let l=await u(c);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#o(l,c)}})()}fetch=a((e,...t)=>this.#n(e,t[1],t[0],e.method),"fetch");request=a((e,t,r,o)=>e instanceof Request?this.fetch(t?new Request(e,t):e,r,o):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${No("/",e)}`,t),r,o)),"request");fire=a(()=>{addEventListener("fetch",e=>{e.respondWith(this.#n(e.request,e,void 0,e.request.method))})},"fire")};Wn();Wn();var al=[];function Qm(e,t){let r=this.buildAllMatchers(),o=a((n,i)=>{let c=r[n]||r[rt],u=c[2][i];if(u)return u;let l=i.match(c[0]);if(!l)return[[],al];let d=l.indexOf("",1);return[c[1][d],l]},"match2");return this.match=o,o(e,t)}a(Qm,"match");var sl="[^/]+",os=".*",is="(?:|/.*)",jo=Symbol(),eM=new Set(".\\+*[^]$()");function tM(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===os||e===is?1:t===os||t===is?-1:e===sl?1:t===sl?-1:e.length===t.length?e<t?-1:1:t.length-e.length}a(tM,"compareKey");var cl=class{static{a(this,"Node")}#e;#t;#r=Object.create(null);insert(e,t,r,o,n){if(e.length===0){if(this.#e!==void 0)throw jo;if(n)return;this.#e=t;return}let[i,...c]=e,u=i==="*"?c.length===0?["","",os]:["","",sl]:i==="/*"?["","",is]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(u){let d=u[1],p=u[2]||sl;if(d&&u[2]&&(p===".*"||(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p))))throw jo;if(l=this.#r[p],!l){if(Object.keys(this.#r).some(m=>m!==os&&m!==is))throw jo;if(n)return;l=this.#r[p]=new cl,d!==""&&(l.#t=o.varIndex++)}!n&&d!==""&&r.push([d,l.#t])}else if(l=this.#r[i],!l){if(Object.keys(this.#r).some(d=>d.length>1&&d!==os&&d!==is))throw jo;if(n)return;l=this.#r[i]=new cl}l.insert(c,t,r,o,n)}buildRegExpStr(){let t=Object.keys(this.#r).sort(tM).map(r=>{let o=this.#r[r];return(typeof o.#t=="number"?`(${r})@${o.#t}`:eM.has(r)?`\\${r}`:r)+o.buildRegExpStr()});return typeof this.#e=="number"&&t.unshift(`#${this.#e}`),t.length===0?"":t.length===1?t[0]:"(?:"+t.join("|")+")"}};var ET=class{static{a(this,"Trie")}#e={varIndex:0};#t=new cl;insert(e,t,r){let o=[],n=[];for(let c=0;;){let u=!1;if(e=e.replace(/\{[^}]+\}/g,l=>{let d=`@\\${c}`;return n[c]=[d,l],c++,u=!0,d}),!u)break}let i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let c=n.length-1;c>=0;c--){let[u]=n[c];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(u)!==-1){i[l]=i[l].replace(u,n[c][1]);break}}return this.#t.insert(i,t,o,this.#e,r),o}buildRegExp(){let e=this.#t.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0,r=[],o=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,i,c)=>i!==void 0?(r[++t]=Number(i),"$()"):(c!==void 0&&(o[Number(c)]=++t),"")),[new RegExp(`^${e}`),r,o]}};var rM=[/^$/,[],Object.create(null)],kT=Object.create(null);function PT(e){return kT[e]??=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}a(PT,"buildWildcardRegExp");function nM(){kT=Object.create(null)}a(nM,"clearWildcardRegExpCache");function oM(e){let t=new ET,r=[];if(e.length===0)return rM;let o=e.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,p],[m,f])=>d?1:m?-1:p.length-f.length),n=Object.create(null);for(let d=0,p=-1,m=o.length;d<m;d++){let[f,g,h]=o[d];f?n[g]=[h.map(([x])=>[x,Object.create(null)]),al]:p++;let v;try{v=t.insert(g,p,f)}catch(x){throw x===jo?new il(g):x}f||(r[p]=h.map(([x,S])=>{let b=Object.create(null);for(S-=1;S>=0;S--){let[w,P]=v[S];b[w]=P}return[x,b]}))}let[i,c,u]=t.buildRegExp();for(let d=0,p=r.length;d<p;d++)for(let m=0,f=r[d].length;m<f;m++){let g=r[d][m]?.[1];if(!g)continue;let h=Object.keys(g);for(let v=0,x=h.length;v<x;v++)g[h[v]]=u[g[h[v]]]}let l=[];for(let d in c)l[d]=r[c[d]];return[i,l,n]}a(oM,"buildMatcherFromPreprocessedRoutes");function yi(e,t){if(e){for(let r of Object.keys(e).sort((o,n)=>n.length-o.length))if(PT(r).test(t))return[...e[r]]}}a(yi,"findMiddleware");var ul=class{static{a(this,"RegExpRouter")}name="RegExpRouter";#e;#t;constructor(){this.#e={[rt]:Object.create(null)},this.#t={[rt]:Object.create(null)}}add(e,t,r){let o=this.#e,n=this.#t;if(!o||!n)throw new Error(ol);o[e]||[o,n].forEach(u=>{u[e]=Object.create(null),Object.keys(u[rt]).forEach(l=>{u[e][l]=[...u[rt][l]]})}),t==="/*"&&(t="*");let i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let u=PT(t);e===rt?Object.keys(o).forEach(l=>{o[l][t]||=yi(o[l],t)||yi(o[rt],t)||[]}):o[e][t]||=yi(o[e],t)||yi(o[rt],t)||[],Object.keys(o).forEach(l=>{(e===rt||e===l)&&Object.keys(o[l]).forEach(d=>{u.test(d)&&o[l][d].push([r,i])})}),Object.keys(n).forEach(l=>{(e===rt||e===l)&&Object.keys(n[l]).forEach(d=>u.test(d)&&n[l][d].push([r,i]))});return}let c=nl(t)||[t];for(let u=0,l=c.length;u<l;u++){let d=c[u];Object.keys(n).forEach(p=>{(e===rt||e===p)&&(n[p][d]||=[...yi(o[p],d)||yi(o[rt],d)||[]],n[p][d].push([r,i-l+u+1]))})}}match=Qm;buildAllMatchers(){let e=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(t=>{e[t]||=this.#r(t)}),this.#e=this.#t=void 0,nM(),e}#r(e){let t=[],r=e===rt;return[this.#e,this.#t].forEach(o=>{let n=o[e]?Object.keys(o[e]).map(i=>[i,o[e][i]]):[];n.length!==0?(r||=!0,t.push(...n)):e!==rt&&t.push(...Object.keys(o[rt]).map(i=>[i,o[rt][i]]))}),r?oM(t):null}};Wn();Wn();var Xm=class{static{a(this,"SmartRouter")}name="SmartRouter";#e=[];#t=[];constructor(e){this.#e=e.routers}add(e,t,r){if(!this.#t)throw new Error(ol);this.#t.push([e,t,r])}match(e,t){if(!this.#t)throw new Error("Fatal error");let r=this.#e,o=this.#t,n=r.length,i=0,c;for(;i<n;i++){let u=r[i];try{for(let l=0,d=o.length;l<d;l++)u.add(...o[l]);c=u.match(e,t)}catch(l){if(l instanceof il)continue;throw l}this.match=u.match.bind(u),this.#e=[u],this.#t=void 0;break}if(i===n)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,c}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};Wn();var as=Object.create(null),Ym=class{static{a(this,"Node")}#e;#t;#r;#i=0;#o=as;constructor(e,t,r){if(this.#t=r||Object.create(null),this.#e=[],e&&t){let o=Object.create(null);o[e]={handler:t,possibleKeys:[],score:0},this.#e=[o]}this.#r=[]}insert(e,t,r){this.#i=++this.#i;let o=this,n=fT(t),i=[];for(let c=0,u=n.length;c<u;c++){let l=n[c],d=n[c+1],p=hT(l,d),m=Array.isArray(p)?p[0]:l;if(m in o.#t){o=o.#t[m],p&&i.push(p[1]);continue}o.#t[m]=new Ym,p&&(o.#r.push(p),i.push(p[1])),o=o.#t[m]}return o.#e.push({[e]:{handler:r,possibleKeys:i.filter((c,u,l)=>l.indexOf(c)===u),score:this.#i}}),o}#n(e,t,r,o){let n=[];for(let i=0,c=e.#e.length;i<c;i++){let u=e.#e[i],l=u[t]||u[rt],d={};if(l!==void 0&&(l.params=Object.create(null),n.push(l),r!==as||o&&o!==as))for(let p=0,m=l.possibleKeys.length;p<m;p++){let f=l.possibleKeys[p],g=d[l.score];l.params[f]=o?.[f]&&!g?o[f]:r[f]??o?.[f],d[l.score]=!0}}return n}search(e,t){let r=[];this.#o=as;let n=[this],i=Zm(t),c=[];for(let u=0,l=i.length;u<l;u++){let d=i[u],p=u===l-1,m=[];for(let f=0,g=n.length;f<g;f++){let h=n[f],v=h.#t[d];v&&(v.#o=h.#o,p?(v.#t["*"]&&r.push(...this.#n(v.#t["*"],e,h.#o)),r.push(...this.#n(v,e,h.#o))):m.push(v));for(let x=0,S=h.#r.length;x<S;x++){let b=h.#r[x],w=h.#o===as?{}:{...h.#o};if(b==="*"){let M=h.#t["*"];M&&(r.push(...this.#n(M,e,h.#o)),M.#o=w,m.push(M));continue}let[P,B,V]=b;if(!d&&!(V instanceof RegExp))continue;let C=h.#t[P],L=i.slice(u).join("/");if(V instanceof RegExp){let M=V.exec(L);if(M){if(w[B]=M[0],r.push(...this.#n(C,e,h.#o,w)),Object.keys(C.#t).length){C.#o=w;let D=M[0].match(/\//)?.length??0;(c[D]||=[]).push(C)}continue}}(V===!0||V.test(d))&&(w[B]=d,p?(r.push(...this.#n(C,e,w,h.#o)),C.#t["*"]&&r.push(...this.#n(C.#t["*"],e,w,h.#o))):(C.#o=w,m.push(C)))}}n=m.concat(c.shift()??[])}return r.length>1&&r.sort((u,l)=>u.score-l.score),[r.map(({handler:u,params:l})=>[u,l])]}};var ef=class{static{a(this,"TrieRouter")}name="TrieRouter";#e;constructor(){this.#e=new Ym}add(e,t,r){let o=nl(t);if(o){for(let n=0,i=o.length;n<i;n++)this.#e.insert(e,o[n],r);return}this.#e.insert(e,t,r)}match(e,t){return this.#e.search(e,t)}};var ge=class extends Wm{static{a(this,"Hono")}constructor(e={}){super(e),this.router=e.router??new Xm({routers:[new ul,new ef]})}};function iM(){let{process:e,Deno:t}=globalThis;return!(typeof t?.noColor=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in e?.env:!1)}a(iM,"getColorEnabled");async function $T(){let{navigator:e}=globalThis,t="cloudflare:workers";return!(e!==void 0&&e.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(t)).env??{})}catch{return!1}})():!iM())}a($T,"getColorEnabledAsync");var aM=a(e=>{let[t,r]=[",","."];return e.map(n=>n.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)).join(r)},"humanize"),sM=a(e=>{let t=Date.now()-e;return aM([t<1e3?t+"ms":Math.round(t/1e3)+"s"])},"time"),cM=a(async e=>{if(await $T())switch(e/100|0){case 5:return`\x1B[31m${e}\x1B[0m`;case 4:return`\x1B[33m${e}\x1B[0m`;case 3:return`\x1B[36m${e}\x1B[0m`;case 2:return`\x1B[32m${e}\x1B[0m`}return`${e}`},"colorStatus");async function AT(e,t,r,o,n=0,i){let c=t==="<--"?`${t} ${r} ${o}`:`${t} ${r} ${o} ${await cM(n)} ${i}`;e(c)}a(AT,"log");var CT=a((e=console.log)=>a(async function(r,o){let{method:n,url:i}=r.req,c=i.slice(i.indexOf("/",8));await AT(e,"<--",n,c);let u=Date.now();await o(),await AT(e,"-->",n,c,r.res.status,sM(u))},"logger2"),"logger");var tf=class{static{a(this,"SecureLogger")}isDevelopment;isProduction;currentUserId;sensitivePatterns;logBuffer=[];maxBufferSize=1e3;flushInterval=5e3;constructor(){this.isDevelopment=!!(typeof process<"u"&&!1||typeof import.meta<"u"&&import.meta.env?.DEV),this.isProduction=typeof process<"u"||typeof import.meta<"u"&&import.meta.env?.MODE==="production",this.sensitivePatterns=[/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/g,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,/\b(?:\+55\s?)?\(?[1-9]{2}\)?\s?[9]?\d{4}-?\d{4}\b/g,/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,/(?:sk_|eyJ)[a-zA-Z0-9_-]{20,}/g,/password["\s:]+["']?[^"'\s,}]+["']?/gi,/token["\s:]+["']?[^"'\s,}]+["']?/gi,/account["\s:]+["']?\d{6,}["']?/gi],this.isProduction&&setInterval(()=>this.flushBuffer(),this.flushInterval)}setUserId(t){this.currentUserId=t}clearUserId(){this.currentUserId=void 0}sanitizeData(t,r){let o=t;this.sensitivePatterns.forEach(i=>{o=o.replace(i,"[REDACTED]")});let n;return r&&(n=this.sanitizeContextObject(r)),{sanitizedContext:n,sanitizedMessage:o}}sanitizeContextObject(t){let r={};for(let[o,n]of Object.entries(t))if(this.isSensitiveKey(o)&&n)r[o]="[REDACTED]";else if(typeof n=="string"){let c=n;this.sensitivePatterns.forEach(u=>{c=c.replace(u,"[REDACTED]")}),r[o]=c}else typeof n=="object"&&n!==null?r[o]=this.sanitizeContextObject(n):r[o]=n;return this.currentUserId&&!r.userId&&(r.userId=`${this.currentUserId.substring(0,8)}...`),r}isSensitiveKey(t){return["password","token","secret","key","auth","session","email","phone","cpf","cnpj","account","balance","creditcard","card","bank","transaction","amount"].some(o=>t.toLowerCase().includes(o.toLowerCase()))}createLogEntry(t,r,o){let{sanitizedMessage:n,sanitizedContext:i}=this.sanitizeData(r,o);return{context:i,level:t,message:n,sanitized:!0,timestamp:new Date().toISOString()}}writeLog(t){if(this.isDevelopment)switch(t.level){case 0:break;case 1:break;case 2:break;case 3:case 4:break;case 5:break}else this.isProduction&&this.addToBuffer(t)}addToBuffer(t){this.logBuffer.push(t),this.logBuffer.length>=this.maxBufferSize&&this.flushBuffer()}flushBuffer(){if(this.logBuffer.length===0)return;let t=[...this.logBuffer];this.logBuffer=[];let r=t.filter(o=>o.level>=3);r.length>0&&r.forEach(o=>{})}log(t,r,o){if(!this.isDevelopment&&t===0)return;let n=this.createLogEntry(t,r,o);this.writeLog(n)}debug(t,r){this.log(0,t,r)}info(t,r){this.log(1,t,r)}warn(t,r){this.log(2,t,r)}error(t,r){this.log(3,t,r)}security(t,r){this.log(4,t,r)}audit(t,r){this.log(5,t,r)}voiceCommand(t,r,o){this.info("Voice command processed",{...o,command:t.substring(0,50),confidence:r})}authEvent(t,r,o){this.audit("Authentication event",{...o,event:t,userId:r?`${r.substring(0,8)}...`:void 0})}userAction(t,r,o){this.info("User action",{action:t,component:r,...o})}performance(t,r,o){this.info("Performance metric",{...o,operation:t,duration:r})}getBufferStats(){return{lastFlush:new Date,maxSize:this.maxBufferSize,size:this.logBuffer.length}}forceFlush(){this.flushBuffer()}clear(){this.logBuffer=[],this.currentUserId=void 0}},k=new tf;var OT=new ge;OT.get("/",async e=>{try{return k.info("Starting calendar channel renewal check"),e.json({success:!0,message:"Calendar channel renewal completed",timestamp:new Date().toISOString(),channelsRenewed:0})}catch(t){return k.error("Calendar channel renewal failed",{error:t instanceof Error?t.message:"Unknown error"}),e.json({success:!1,message:"Calendar channel renewal failed",error:t instanceof Error?t.message:"Unknown error"},500)}});var RT=OT;var NT=new ge;NT.get("/",async e=>{try{return k.info("Starting sync queue cleanup"),e.json({success:!0,message:"Sync queue cleanup completed",timestamp:new Date().toISOString(),itemsDeleted:0})}catch(t){return k.error("Sync queue cleanup failed",{error:t instanceof Error?t.message:"Unknown error"}),e.json({success:!1,message:"Sync queue cleanup failed",error:t instanceof Error?t.message:"Unknown error"},500)}});var jT=NT;var DT=new ge;DT.get("/",async e=>{try{return k.info("Starting sync queue processing"),e.json({success:!0,message:"Sync queue processing completed",timestamp:new Date().toISOString(),itemsProcessed:0})}catch(t){return k.error("Sync queue processing failed",{error:t instanceof Error?t.message:"Unknown error"}),e.json({success:!1,message:"Sync queue processing failed",error:t instanceof Error?t.message:"Unknown error"},500)}});var zT=DT;var ss=new ge;ss.route("/calendar-channel-renewal",RT);ss.route("/sync-queue-processor",zT);ss.route("/cleanup-sync-queue",jT);ss.get("/health",e=>e.json({status:"healthy",service:"cron-jobs",timestamp:new Date().toISOString(),jobs:[{name:"calendar-channel-renewal",schedule:"0 0 * * *",description:"Renew expiring Google Calendar webhook channels"},{name:"sync-queue-processor",schedule:"*/5 * * * *",description:"Process pending Google Calendar sync queue items"},{name:"cleanup-sync-queue",schedule:"0 2 * * *",description:"Clean up old completed/failed sync queue items"}]}));var MT=ss;var UT=["https://aegiswallet.com","https://www.aegiswallet.com","https://app.aegiswallet.com","http://localhost:3000","http://localhost:5173","http://localhost:8080","http://localhost:8081","http://localhost:8082","https://localhost:3000","https://localhost:5173","https://localhost:8080","https://localhost:8081","https://localhost:8082"],qT=a(async(e,t)=>{let r=e.req.header("Origin");if(UT.includes(r||"")||r?.startsWith("http://localhost:")&&!1||r?.startsWith("https://localhost:")&&!1?e.header("Access-Control-Allow-Origin",r||"*"):e.header("Access-Control-Allow-Origin",UT[0]),e.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),e.header("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, X-Client-ID"),e.header("Access-Control-Allow-Credentials","true"),e.header("Access-Control-Max-Age","86400"),e.header("Vary","Origin"),e.req.method==="OPTIONS")return e.newResponse(null,204);await t()},"corsMiddleware");var T=Symbol.for("drizzle:entityKind"),qQ=Symbol.for("drizzle:hasOwnEntityKind");function j(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,T))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(T in r&&r[T]===t[T])return!0;r=Object.getPrototypeOf(r)}return!1}a(j,"is");var Ge=class{static{a(this,"Column")}constructor(t,r){this.table=t,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[T]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var ll=class{static{a(this,"ColumnBuilder")}static[T]="ColumnBuilder";config;constructor(t,r,o){this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:o,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}};var zr=Symbol.for("drizzle:Name");var dl=class{static{a(this,"ForeignKeyBuilder")}static[T]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(t,r){this.reference=()=>{let{name:o,columns:n,foreignColumns:i}=t();return{name:o,columns:n,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new rf(t,this)}},rf=class{static{a(this,"ForeignKey")}constructor(t,r){this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[T]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:t,columns:r,foreignColumns:o}=this.reference(),n=r.map(u=>u.name),i=o.map(u=>u.name),c=[this.table[zr],...n,o[0].table[zr],...i];return t??`${c.join("_")}_fk`}};function pl(e,...t){return e(...t)}a(pl,"iife");function af(e,t){return`${e[zr]}_${t.join("_")}_unique`}a(af,"uniqueKeyName");var nf=class{static{a(this,"UniqueConstraintBuilder")}constructor(t,r){this.name=r,this.columns=t}static[T]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(t){return new of(t,this.columns,this.nullsNotDistinctConfig,this.name)}},LT=class{static{a(this,"UniqueOnConstraintBuilder")}static[T]="PgUniqueOnConstraintBuilder";name;constructor(t){this.name=t}on(...t){return new nf(t,this.name)}},of=class{static{a(this,"UniqueConstraint")}constructor(t,r,o,n){this.table=t,this.columns=r,this.name=n??af(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=o}static[T]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function FT(e,t,r){for(let o=t;o<e.length;o++){let n=e[o];if(n==="\\"){o++;continue}if(n==='"')return[e.slice(t,o).replace(/\\/g,""),o+1];if(!r&&(n===","||n==="}"))return[e.slice(t,o).replace(/\\/g,""),o]}return[e.slice(t).replace(/\\/g,""),e.length]}a(FT,"parsePgArrayValue");function BT(e,t=0){let r=[],o=t,n=!1;for(;o<e.length;){let i=e[o];if(i===","){(n||o===t)&&r.push(""),n=!0,o++;continue}if(n=!1,i==="\\"){o+=2;continue}if(i==='"'){let[l,d]=FT(e,o+1,!0);r.push(l),o=d;continue}if(i==="}")return[r,o+1];if(i==="{"){let[l,d]=BT(e,o+1);r.push(l),o=d;continue}let[c,u]=FT(e,o,!1);r.push(c),o=u}return[r,o]}a(BT,"parsePgNestedArray");function VT(e){let[t]=BT(e,1);return t}a(VT,"parsePgArray");function sf(e){return`{${e.map(t=>Array.isArray(t)?sf(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}a(sf,"makePgArray");var le=class extends ll{static{a(this,"PgColumnBuilder")}foreignKeyConfigs=[];static[T]="PgColumnBuilder";array(t){return new uf(this.config.name,this,t)}references(t,r={}){return this.foreignKeyConfigs.push({ref:t,actions:r}),this}unique(t,r){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,r){return this.foreignKeyConfigs.map(({ref:o,actions:n})=>pl((i,c)=>{let u=new dl(()=>{let l=i();return{columns:[t],foreignColumns:[l]}});return c.onUpdate&&u.onUpdate(c.onUpdate),c.onDelete&&u.onDelete(c.onDelete),u.build(r)},o,n))}buildExtraConfigColumn(t){return new cf(t,this.config)}},Y=class extends Ge{static{a(this,"PgColumn")}constructor(t,r){r.uniqueName||(r.uniqueName=af(t,[r.name])),super(t,r),this.table=t}static[T]="PgColumn"},cf=class extends Y{static{a(this,"ExtraConfigColumn")}static[T]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}},vi=class{static{a(this,"IndexedColumn")}static[T]="IndexedColumn";constructor(t,r,o,n){this.name=t,this.keyAsName=r,this.type=o,this.indexConfig=n}name;keyAsName;type;indexConfig},uf=class extends le{static{a(this,"PgArrayBuilder")}static[T]="PgArrayBuilder";constructor(t,r,o){super(t,"array","PgArray"),this.config.baseBuilder=r,this.config.size=o}build(t){let r=this.config.baseBuilder.build(t);return new lf(t,this.config,r)}},lf=class e extends Y{static{a(this,"PgArray")}constructor(t,r,o,n){super(t,r),this.baseColumn=o,this.range=n,this.size=r.size}size;static[T]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=VT(t)),t.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(t,r=!1){let o=t.map(n=>n===null?null:j(this.baseColumn,e)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n));return r?o:sf(o)}};var df=class extends le{static{a(this,"PgEnumObjectColumnBuilder")}static[T]="PgEnumObjectColumnBuilder";constructor(t,r){super(t,"string","PgEnumObjectColumn"),this.config.enum=r}build(t){return new pf(t,this.config)}},pf=class extends Y{static{a(this,"PgEnumObjectColumn")}static[T]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(t,r){super(t,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},ml=Symbol.for("drizzle:isPgEnum");function ZT(e){return!!e&&typeof e=="function"&&ml in e&&e[ml]===!0}a(ZT,"isPgEnum");var mf=class extends le{static{a(this,"PgEnumColumnBuilder")}static[T]="PgEnumColumnBuilder";constructor(t,r){super(t,"string","PgEnumColumn"),this.config.enum=r}build(t){return new ff(t,this.config)}},ff=class extends Y{static{a(this,"PgEnumColumn")}static[T]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(t,r){super(t,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};function Tt(e,t){return Array.isArray(t)?uM(e,[...t],void 0):lM(e,t,void 0)}a(Tt,"pgEnum");function uM(e,t,r){let o=Object.assign(n=>new mf(n??"",o),{enumName:e,enumValues:t,schema:r,[ml]:!0});return o}a(uM,"pgEnumWithSchema");function lM(e,t,r){let o=Object.assign(n=>new df(n??"",o),{enumName:e,enumValues:Object.values(t),schema:r,[ml]:!0});return o}a(lM,"pgEnumObjectWithSchema");var ht=class{static{a(this,"Subquery")}static[T]="Subquery";constructor(t,r,o,n=!1,i=[]){this._={brand:"Subquery",sql:t,selectedFields:r,alias:o,isWith:n,usedTables:i}}},_i=class extends ht{static{a(this,"WithSubquery")}static[T]="WithSubquery"};var HT="0.44.7";var hf,gf,$t={startActiveSpan(e,t){return hf?(gf||(gf=hf.trace.getTracer("drizzle-orm",HT)),pl((r,o)=>o.startActiveSpan(e,n=>{try{return t(n)}catch(i){throw n.setStatus({code:r.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{n.end()}}),hf,gf)):t()}};var nt=Symbol.for("drizzle:ViewBaseConfig");var Do=Symbol.for("drizzle:Schema"),fl=Symbol.for("drizzle:Columns"),GT=Symbol.for("drizzle:ExtraConfigColumns"),yf=Symbol.for("drizzle:OriginalName"),vf=Symbol.for("drizzle:BaseName"),cs=Symbol.for("drizzle:IsAlias"),KT=Symbol.for("drizzle:ExtraConfigBuilder"),dM=Symbol.for("drizzle:IsDrizzleTable"),te=class{static{a(this,"Table")}static[T]="Table";static Symbol={Name:zr,Schema:Do,OriginalName:yf,Columns:fl,ExtraConfigColumns:GT,BaseName:vf,IsAlias:cs,ExtraConfigBuilder:KT};[zr];[yf];[Do];[fl];[GT];[vf];[cs]=!1;[dM]=!0;[KT]=void 0;constructor(t,r,o){this[zr]=this[yf]=t,this[Do]=r,this[vf]=o}};function sr(e){return e[zr]}a(sr,"getTableName");function zo(e){return`${e[Do]??"public"}.${e[zr]}`}a(zo,"getTableUniqueName");var JT=class{static{a(this,"FakePrimitiveParam")}static[T]="FakePrimitiveParam"};function _f(e){return e!=null&&typeof e.getSQL=="function"}a(_f,"isSQLWrapper");function pM(e){let t={sql:"",params:[]};for(let r of e)t.sql+=r.sql,t.params.push(...r.params),r.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}a(pM,"mergeQueries");var At=class{static{a(this,"StringChunk")}static[T]="StringChunk";value;constructor(t){this.value=Array.isArray(t)?t:[t]}getSQL(){return new ce([this])}},ce=class e{static{a(this,"SQL")}constructor(t){this.queryChunks=t;for(let r of t)if(j(r,te)){let o=r[te.Symbol.Schema];this.usedTables.push(o===void 0?r[te.Symbol.Name]:o+"."+r[te.Symbol.Name])}}static[T]="SQL";decoder=QT;shouldInlineParams=!1;usedTables=[];append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return $t.startActiveSpan("drizzle.buildSQL",r=>{let o=this.buildQueryFromSourceParams(this.queryChunks,t);return r?.setAttributes({"drizzle.query.text":o.sql,"drizzle.query.params":JSON.stringify(o.params)}),o})}buildQueryFromSourceParams(t,r){let o=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:n,escapeName:i,escapeParam:c,prepareTyping:u,inlineParams:l,paramStartIndex:d}=o;return pM(t.map(p=>{if(j(p,At))return{sql:p.value.join(""),params:[]};if(j(p,us))return{sql:i(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){let m=[new At("(")];for(let[f,g]of p.entries())m.push(g),f<p.length-1&&m.push(new At(", "));return m.push(new At(")")),this.buildQueryFromSourceParams(m,o)}if(j(p,e))return this.buildQueryFromSourceParams(p.queryChunks,{...o,inlineParams:l||p.shouldInlineParams});if(j(p,te)){let m=p[te.Symbol.Schema],f=p[te.Symbol.Name];return{sql:m===void 0||p[cs]?i(f):i(m)+"."+i(f),params:[]}}if(j(p,Ge)){let m=n.getColumnCasing(p);if(r.invokeSource==="indexes")return{sql:i(m),params:[]};let f=p.table[te.Symbol.Schema];return{sql:p.table[cs]||f===void 0?i(p.table[te.Symbol.Name])+"."+i(m):i(f)+"."+i(p.table[te.Symbol.Name])+"."+i(m),params:[]}}if(j(p,Wt)){let m=p[nt].schema,f=p[nt].name;return{sql:m===void 0||p[nt].isAlias?i(f):i(m)+"."+i(f),params:[]}}if(j(p,cr)){if(j(p.value,kn))return{sql:c(d.value++,p),params:[p],typings:["none"]};let m=p.value===null?null:p.encoder.mapToDriverValue(p.value);if(j(m,e))return this.buildQueryFromSourceParams([m],o);if(l)return{sql:this.mapInlineParam(m,o),params:[]};let f=["none"];return u&&(f=[u(p.encoder)]),{sql:c(d.value++,m),params:[m],typings:f}}return j(p,kn)?{sql:c(d.value++,p),params:[p],typings:["none"]}:j(p,e.Aliased)&&p.fieldAlias!==void 0?{sql:i(p.fieldAlias),params:[]}:j(p,ht)?p._.isWith?{sql:i(p._.alias),params:[]}:this.buildQueryFromSourceParams([new At("("),p._.sql,new At(") "),new us(p._.alias)],o):ZT(p)?p.schema?{sql:i(p.schema)+"."+i(p.enumName),params:[]}:{sql:i(p.enumName),params:[]}:_f(p)?p.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([p.getSQL()],o):this.buildQueryFromSourceParams([new At("("),p.getSQL(),new At(")")],o):l?{sql:this.mapInlineParam(p,o),params:[]}:{sql:c(d.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){let o=t.toString();return r(o==="[object Object]"?JSON.stringify(t):o)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new e.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}},us=class{static{a(this,"Name")}constructor(t){this.value=t}static[T]="Name";brand;getSQL(){return new ce([this])}};function WT(e){return typeof e=="object"&&e!==null&&"mapToDriverValue"in e&&typeof e.mapToDriverValue=="function"}a(WT,"isDriverValueEncoder");var QT={mapFromDriverValue:a(e=>e,"mapFromDriverValue")},XT={mapToDriverValue:a(e=>e,"mapToDriverValue")},qX={...QT,...XT},cr=class{static{a(this,"Param")}constructor(t,r=XT){this.value=t,this.encoder=r}static[T]="Param";brand;getSQL(){return new ce([this])}};function I(e,...t){let r=[];(t.length>0||e.length>0&&e[0]!=="")&&r.push(new At(e[0]));for(let[o,n]of t.entries())r.push(n,new At(e[o+1]));return new ce(r)}a(I,"sql");(e=>{function t(){return new ce([])}a(t,"empty"),e.empty=t;function r(l){return new ce(l)}a(r,"fromList"),e.fromList=r;function o(l){return new ce([new At(l)])}a(o,"raw"),e.raw=o;function n(l,d){let p=[];for(let[m,f]of l.entries())m>0&&d!==void 0&&p.push(d),p.push(f);return new ce(p)}a(n,"join"),e.join=n;function i(l){return new us(l)}a(i,"identifier"),e.identifier=i;function c(l){return new kn(l)}a(c,"placeholder2"),e.placeholder=c;function u(l,d){return new cr(l,d)}a(u,"param2"),e.param=u})(I||(I={}));(e=>{class t{static{a(this,"Aliased")}constructor(o,n){this.sql=o,this.fieldAlias=n}static[T]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(ce||(ce={}));var kn=class{static{a(this,"Placeholder")}constructor(t){this.name=t}static[T]="Placeholder";getSQL(){return new ce([this])}};function Qn(e,t){return e.map(r=>{if(j(r,kn)){if(!(r.name in t))throw new Error(`No value for placeholder "${r.name}" was provided`);return t[r.name]}if(j(r,cr)&&j(r.value,kn)){if(!(r.value.name in t))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(t[r.value.name])}return r})}a(Qn,"fillPlaceholders");var mM=Symbol.for("drizzle:IsDrizzleView"),Wt=class{static{a(this,"View")}static[T]="View";[nt];[mM]=!0;constructor({name:t,schema:r,selectedFields:o,query:n}){this[nt]={name:t,originalName:t,schema:r,selectedFields:o,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new ce([this])}};Ge.prototype.getSQL=function(){return new ce([this])};te.prototype.getSQL=function(){return new ce([this])};ht.prototype.getSQL=function(){return new ce([this])};var Mo=class{static{a(this,"ColumnAliasProxyHandler")}constructor(t){this.table=t}static[T]="ColumnAliasProxyHandler";get(t,r){return r==="table"?this.table:t[r]}},bi=class{static{a(this,"TableAliasProxyHandler")}constructor(t,r){this.alias=t,this.replaceOriginalName=r}static[T]="TableAliasProxyHandler";get(t,r){if(r===te.Symbol.IsAlias)return!0;if(r===te.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===te.Symbol.OriginalName)return this.alias;if(r===nt)return{...t[nt],name:this.alias,isAlias:!0};if(r===te.Symbol.Columns){let n=t[te.Symbol.Columns];if(!n)return n;let i={};return Object.keys(n).map(c=>{i[c]=new Proxy(n[c],new Mo(new Proxy(t,this)))}),i}let o=t[r];return j(o,Ge)?new Proxy(o,new Mo(new Proxy(t,this))):o}},YT=class{static{a(this,"RelationTableAliasProxyHandler")}constructor(t){this.alias=t}static[T]="RelationTableAliasProxyHandler";get(t,r){return r==="sourceTable"?ls(t.sourceTable,this.alias):t[r]}};function ls(e,t){return new Proxy(e,new bi(t,!1))}a(ls,"aliasedTable");function Yr(e,t){return new Proxy(e,new Mo(new Proxy(e.table,new bi(t,!1))))}a(Yr,"aliasedTableColumn");function bf(e,t){return new ce.Aliased(ds(e.sql,t),e.fieldAlias)}a(bf,"mapColumnsInAliasedSQLToAlias");function ds(e,t){return I.join(e.queryChunks.map(r=>j(r,Ge)?Yr(r,t):j(r,ce)?ds(r,t):j(r,ce.Aliased)?bf(r,t):r))}a(ds,"mapColumnsInSQLToAlias");var ps=class extends Error{static{a(this,"DrizzleError")}static[T]="DrizzleError";constructor({message:t,cause:r}){super(t),this.name="DrizzleError",this.cause=r}},Pn=class e extends Error{static{a(this,"DrizzleQueryError")}constructor(t,r,o){super(`Failed query: ${t}
params: ${r}`),this.query=t,this.params=r,this.cause=o,Error.captureStackTrace(this,e),o&&(this.cause=o)}},hl=class extends ps{static{a(this,"TransactionRollbackError")}static[T]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var xf=class{static{a(this,"ConsoleLogWriter")}static[T]="ConsoleLogWriter";write(t){console.log(t)}},xi=class{static{a(this,"DefaultLogger")}static[T]="DefaultLogger";writer;constructor(t){this.writer=t?.writer??new xf}logQuery(t,r){let o=r.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),n=o.length?` -- params: [${o.join(", ")}]`:"";this.writer.write(`Query: ${t}${n}`)}},wi=class{static{a(this,"NoopLogger")}static[T]="NoopLogger";logQuery(){}};var Zt=class{static{a(this,"QueryPromise")}static[T]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(t){return this.then(void 0,t)}finally(t){return this.then(r=>(t?.(),r),r=>{throw t?.(),r})}then(t,r){return this.execute().then(t,r)}};function gl(e,t,r){let o={},n=e.reduce((i,{path:c,field:u},l)=>{let d;j(u,Ge)?d=u:j(u,ce)?d=u.decoder:d=u.sql.decoder;let p=i;for(let[m,f]of c.entries())if(m<c.length-1)f in p||(p[f]={}),p=p[f];else{let g=t[l],h=p[f]=g===null?null:d.mapFromDriverValue(g);if(r&&j(u,Ge)&&c.length===2){let v=c[0];v in o?typeof o[v]=="string"&&o[v]!==sr(u.table)&&(o[v]=!1):o[v]=h===null?sr(u.table):!1}}return i},{});if(r&&Object.keys(o).length>0)for(let[i,c]of Object.entries(o))typeof c=="string"&&!r[c]&&(n[i]=null);return n}a(gl,"mapResultRow");function Ar(e,t){return Object.entries(e).reduce((r,[o,n])=>{if(typeof o!="string")return r;let i=t?[...t,o]:[o];return j(n,Ge)||j(n,ce)||j(n,ce.Aliased)?r.push({path:i,field:n}):j(n,te)?r.push(...Ar(n[te.Symbol.Columns],i)):r.push(...Ar(n,i)),r},[])}a(Ar,"orderSelectedFields");function ms(e,t){let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let[n,i]of r.entries())if(i!==o[n])return!1;return!0}a(ms,"haveSameKeys");function yl(e,t){let r=Object.entries(t).filter(([,o])=>o!==void 0).map(([o,n])=>j(n,ce)||j(n,Ge)?[o,n]:[o,new cr(n,e[te.Symbol.Columns][o])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}a(yl,"mapUpdateSet");function eI(e,t){for(let r of t)for(let o of Object.getOwnPropertyNames(r.prototype))o!=="constructor"&&Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(r.prototype,o)||Object.create(null))}a(eI,"applyMixins");function tI(e){return e[te.Symbol.Columns]}a(tI,"getTableColumns");function $n(e){return j(e,ht)?e._.alias:j(e,Wt)?e[nt].name:j(e,ce)?void 0:e[te.Symbol.IsAlias]?e[te.Symbol.Name]:e[te.Symbol.BaseName]}a($n,"getTableLikeName");function Me(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}a(Me,"getColumnNameAndConfig");function vl(e){if(typeof e!="object"||e===null||e.constructor.name!=="Object")return!1;if("logger"in e){let t=typeof e.logger;return!(t!=="boolean"&&(t!=="object"||typeof e.logger.logQuery!="function")&&t!=="undefined")}if("schema"in e){let t=typeof e.schema;return!(t!=="object"&&t!=="undefined")}if("casing"in e){let t=typeof e.casing;return!(t!=="string"&&t!=="undefined")}if("mode"in e)return!(e.mode!=="default"||e.mode!=="planetscale"||e.mode!==void 0);if("connection"in e){let t=typeof e.connection;return!(t!=="string"&&t!=="object"&&t!=="undefined")}if("client"in e){let t=typeof e.client;return!(t!=="object"&&t!=="function"&&t!=="undefined")}return Object.keys(e).length===0}a(vl,"isConfig");var d7=typeof TextDecoder>"u"?null:new TextDecoder;var An=class extends le{static{a(this,"PgIntColumnBaseBuilder")}static[T]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(t){if(t){let{name:r,...o}=t;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:o}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){let{name:r,...o}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:o}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var wf=class extends An{static{a(this,"PgBigInt53Builder")}static[T]="PgBigInt53Builder";constructor(t){super(t,"number","PgBigInt53")}build(t){return new Sf(t,this.config)}},Sf=class extends Y{static{a(this,"PgBigInt53")}static[T]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}},Tf=class extends An{static{a(this,"PgBigInt64Builder")}static[T]="PgBigInt64Builder";constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new If(t,this.config)}},If=class extends Y{static{a(this,"PgBigInt64")}static[T]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}};function rI(e,t){let{name:r,config:o}=Me(e,t);return o.mode==="number"?new wf(r):new Tf(r)}a(rI,"bigint");var Ef=class extends le{static{a(this,"PgBigSerial53Builder")}static[T]="PgBigSerial53Builder";constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new kf(t,this.config)}},kf=class extends Y{static{a(this,"PgBigSerial53")}static[T]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}},Pf=class extends le{static{a(this,"PgBigSerial64Builder")}static[T]="PgBigSerial64Builder";constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new $f(t,this.config)}},$f=class extends Y{static{a(this,"PgBigSerial64")}static[T]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}};function nI(e,t){let{name:r,config:o}=Me(e,t);return o.mode==="number"?new Ef(r):new Pf(r)}a(nI,"bigserial");var Af=class extends le{static{a(this,"PgBooleanBuilder")}static[T]="PgBooleanBuilder";constructor(t){super(t,"boolean","PgBoolean")}build(t){return new Cf(t,this.config)}},Cf=class extends Y{static{a(this,"PgBoolean")}static[T]="PgBoolean";getSQLType(){return"boolean"}};function oe(e){return new Af(e??"")}a(oe,"boolean");var Of=class extends le{static{a(this,"PgCharBuilder")}static[T]="PgCharBuilder";constructor(t,r){super(t,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new Rf(t,this.config)}},Rf=class extends Y{static{a(this,"PgChar")}static[T]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function oI(e,t={}){let{name:r,config:o}=Me(e,t);return new Of(r,o)}a(oI,"char");var Nf=class extends le{static{a(this,"PgCidrBuilder")}static[T]="PgCidrBuilder";constructor(t){super(t,"string","PgCidr")}build(t){return new jf(t,this.config)}},jf=class extends Y{static{a(this,"PgCidr")}static[T]="PgCidr";getSQLType(){return"cidr"}};function iI(e){return new Nf(e??"")}a(iI,"cidr");var Df=class extends le{static{a(this,"PgCustomColumnBuilder")}static[T]="PgCustomColumnBuilder";constructor(t,r,o){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=o}build(t){return new zf(t,this.config)}},zf=class extends Y{static{a(this,"PgCustomColumn")}static[T]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(t,r){super(t,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}};function aI(e){return(t,r)=>{let{name:o,config:n}=Me(t,r);return new Df(o,n,e)}}a(aI,"customType");var en=class extends le{static{a(this,"PgDateColumnBaseBuilder")}static[T]="PgDateColumnBaseBuilder";defaultNow(){return this.default(I`now()`)}};var Mf=class extends en{static{a(this,"PgDateBuilder")}static[T]="PgDateBuilder";constructor(t){super(t,"date","PgDate")}build(t){return new fs(t,this.config)}},fs=class extends Y{static{a(this,"PgDate")}static[T]="PgDate";getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}},Uf=class extends en{static{a(this,"PgDateStringBuilder")}static[T]="PgDateStringBuilder";constructor(t){super(t,"string","PgDateString")}build(t){return new hs(t,this.config)}},hs=class extends Y{static{a(this,"PgDateString")}static[T]="PgDateString";getSQLType(){return"date"}};function Ht(e,t){let{name:r,config:o}=Me(e,t);return o?.mode==="date"?new Mf(r):new Uf(r)}a(Ht,"date");var qf=class extends le{static{a(this,"PgDoublePrecisionBuilder")}static[T]="PgDoublePrecisionBuilder";constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new Lf(t,this.config)}},Lf=class extends Y{static{a(this,"PgDoublePrecision")}static[T]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}};function sI(e){return new qf(e??"")}a(sI,"doublePrecision");var Ff=class extends le{static{a(this,"PgInetBuilder")}static[T]="PgInetBuilder";constructor(t){super(t,"string","PgInet")}build(t){return new Bf(t,this.config)}},Bf=class extends Y{static{a(this,"PgInet")}static[T]="PgInet";getSQLType(){return"inet"}};function _r(e){return new Ff(e??"")}a(_r,"inet");var Vf=class extends An{static{a(this,"PgIntegerBuilder")}static[T]="PgIntegerBuilder";constructor(t){super(t,"number","PgInteger")}build(t){return new Zf(t,this.config)}},Zf=class extends Y{static{a(this,"PgInteger")}static[T]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}};function Ze(e){return new Vf(e??"")}a(Ze,"integer");var Hf=class extends le{static{a(this,"PgIntervalBuilder")}static[T]="PgIntervalBuilder";constructor(t,r){super(t,"string","PgInterval"),this.config.intervalConfig=r}build(t){return new Gf(t,this.config)}},Gf=class extends Y{static{a(this,"PgInterval")}static[T]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let t=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${t}${r}`}};function cI(e,t={}){let{name:r,config:o}=Me(e,t);return new Hf(r,o)}a(cI,"interval");var Kf=class extends le{static{a(this,"PgJsonBuilder")}static[T]="PgJsonBuilder";constructor(t){super(t,"json","PgJson")}build(t){return new gs(t,this.config)}},gs=class extends Y{static{a(this,"PgJson")}static[T]="PgJson";constructor(t,r){super(t,r)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}};function uI(e){return new Kf(e??"")}a(uI,"json");var Jf=class extends le{static{a(this,"PgJsonbBuilder")}static[T]="PgJsonbBuilder";constructor(t){super(t,"json","PgJsonb")}build(t){return new ys(t,this.config)}},ys=class extends Y{static{a(this,"PgJsonb")}static[T]="PgJsonb";constructor(t,r){super(t,r)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}};function Re(e){return new Jf(e??"")}a(Re,"jsonb");var Wf=class extends le{static{a(this,"PgLineBuilder")}static[T]="PgLineBuilder";constructor(t){super(t,"array","PgLine")}build(t){return new Qf(t,this.config)}},Qf=class extends Y{static{a(this,"PgLineTuple")}static[T]="PgLine";getSQLType(){return"line"}mapFromDriverValue(t){let[r,o,n]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(o),Number.parseFloat(n)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}},Xf=class extends le{static{a(this,"PgLineABCBuilder")}static[T]="PgLineABCBuilder";constructor(t){super(t,"json","PgLineABC")}build(t){return new Yf(t,this.config)}},Yf=class extends Y{static{a(this,"PgLineABC")}static[T]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(t){let[r,o,n]=t.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(o),c:Number.parseFloat(n)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}};function lI(e,t){let{name:r,config:o}=Me(e,t);return!o?.mode||o.mode==="tuple"?new Wf(r):new Xf(r)}a(lI,"line");var eh=class extends le{static{a(this,"PgMacaddrBuilder")}static[T]="PgMacaddrBuilder";constructor(t){super(t,"string","PgMacaddr")}build(t){return new th(t,this.config)}},th=class extends Y{static{a(this,"PgMacaddr")}static[T]="PgMacaddr";getSQLType(){return"macaddr"}};function dI(e){return new eh(e??"")}a(dI,"macaddr");var rh=class extends le{static{a(this,"PgMacaddr8Builder")}static[T]="PgMacaddr8Builder";constructor(t){super(t,"string","PgMacaddr8")}build(t){return new nh(t,this.config)}},nh=class extends Y{static{a(this,"PgMacaddr8")}static[T]="PgMacaddr8";getSQLType(){return"macaddr8"}};function pI(e){return new rh(e??"")}a(pI,"macaddr8");var oh=class extends le{static{a(this,"PgNumericBuilder")}static[T]="PgNumericBuilder";constructor(t,r,o){super(t,"string","PgNumeric"),this.config.precision=r,this.config.scale=o}build(t){return new vs(t,this.config)}},vs=class extends Y{static{a(this,"PgNumeric")}static[T]="PgNumeric";precision;scale;constructor(t,r){super(t,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(t){return typeof t=="string"?t:String(t)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},ih=class extends le{static{a(this,"PgNumericNumberBuilder")}static[T]="PgNumericNumberBuilder";constructor(t,r,o){super(t,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=o}build(t){return new ah(t,this.config)}},ah=class extends Y{static{a(this,"PgNumericNumber")}static[T]="PgNumericNumber";precision;scale;constructor(t,r){super(t,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},sh=class extends le{static{a(this,"PgNumericBigIntBuilder")}static[T]="PgNumericBigIntBuilder";constructor(t,r,o){super(t,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=o}build(t){return new ch(t,this.config)}},ch=class extends Y{static{a(this,"PgNumericBigInt")}static[T]="PgNumericBigInt";precision;scale;constructor(t,r){super(t,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function uh(e,t){let{name:r,config:o}=Me(e,t),n=o?.mode;return n==="number"?new ih(r,o?.precision,o?.scale):n==="bigint"?new sh(r,o?.precision,o?.scale):new oh(r,o?.precision,o?.scale)}a(uh,"numeric");var Ne=uh;var lh=class extends le{static{a(this,"PgPointTupleBuilder")}static[T]="PgPointTupleBuilder";constructor(t){super(t,"array","PgPointTuple")}build(t){return new dh(t,this.config)}},dh=class extends Y{static{a(this,"PgPointTuple")}static[T]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){let[r,o]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(o)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}},ph=class extends le{static{a(this,"PgPointObjectBuilder")}static[T]="PgPointObjectBuilder";constructor(t){super(t,"json","PgPointObject")}build(t){return new mh(t,this.config)}},mh=class extends Y{static{a(this,"PgPointObject")}static[T]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){let[r,o]=t.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(o)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}};function mI(e,t){let{name:r,config:o}=Me(e,t);return!o?.mode||o.mode==="tuple"?new lh(r):new ph(r)}a(mI,"point");function fM(e){let t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}a(fM,"hexToBytes");function fI(e,t){let r=new ArrayBuffer(8),o=new DataView(r);for(let n=0;n<8;n++)o.setUint8(n,e[t+n]);return o.getFloat64(0,!0)}a(fI,"bytesToFloat64");function fh(e){let t=fM(e),r=0,o=t[r];r+=1;let n=new DataView(t.buffer),i=n.getUint32(r,o===1);r+=4;let c;if(i&536870912&&(c=n.getUint32(r,o===1),r+=4),(i&65535)===1){let u=fI(t,r);r+=8;let l=fI(t,r);return r+=8,[u,l]}throw new Error("Unsupported geometry type")}a(fh,"parseEWKB");var hh=class extends le{static{a(this,"PgGeometryBuilder")}static[T]="PgGeometryBuilder";constructor(t){super(t,"array","PgGeometry")}build(t){return new gh(t,this.config)}},gh=class extends Y{static{a(this,"PgGeometry")}static[T]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return fh(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}},yh=class extends le{static{a(this,"PgGeometryObjectBuilder")}static[T]="PgGeometryObjectBuilder";constructor(t){super(t,"json","PgGeometryObject")}build(t){return new vh(t,this.config)}},vh=class extends Y{static{a(this,"PgGeometryObject")}static[T]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){let r=fh(t);return{x:r[0],y:r[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}};function hI(e,t){let{name:r,config:o}=Me(e,t);return!o?.mode||o.mode==="tuple"?new hh(r):new yh(r)}a(hI,"geometry");var _h=class extends le{static{a(this,"PgRealBuilder")}static[T]="PgRealBuilder";constructor(t,r){super(t,"number","PgReal"),this.config.length=r}build(t){return new bh(t,this.config)}},bh=class extends Y{static{a(this,"PgReal")}static[T]="PgReal";constructor(t,r){super(t,r)}getSQLType(){return"real"}mapFromDriverValue=a(t=>typeof t=="string"?Number.parseFloat(t):t,"mapFromDriverValue")};function gI(e){return new _h(e??"")}a(gI,"real");var xh=class extends le{static{a(this,"PgSerialBuilder")}static[T]="PgSerialBuilder";constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new wh(t,this.config)}},wh=class extends Y{static{a(this,"PgSerial")}static[T]="PgSerial";getSQLType(){return"serial"}};function yI(e){return new xh(e??"")}a(yI,"serial");var Sh=class extends An{static{a(this,"PgSmallIntBuilder")}static[T]="PgSmallIntBuilder";constructor(t){super(t,"number","PgSmallInt")}build(t){return new Th(t,this.config)}},Th=class extends Y{static{a(this,"PgSmallInt")}static[T]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a(t=>typeof t=="string"?Number(t):t,"mapFromDriverValue")};function vI(e){return new Sh(e??"")}a(vI,"smallint");var Ih=class extends le{static{a(this,"PgSmallSerialBuilder")}static[T]="PgSmallSerialBuilder";constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Eh(t,this.config)}},Eh=class extends Y{static{a(this,"PgSmallSerial")}static[T]="PgSmallSerial";getSQLType(){return"smallserial"}};function _I(e){return new Ih(e??"")}a(_I,"smallserial");var kh=class extends le{static{a(this,"PgTextBuilder")}static[T]="PgTextBuilder";constructor(t,r){super(t,"string","PgText"),this.config.enumValues=r.enum}build(t){return new Ph(t,this.config)}},Ph=class extends Y{static{a(this,"PgText")}static[T]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function _(e,t={}){let{name:r,config:o}=Me(e,t);return new kh(r,o)}a(_,"text");var $h=class extends en{static{a(this,"PgTimeBuilder")}constructor(t,r,o){super(t,"string","PgTime"),this.withTimezone=r,this.precision=o,this.config.withTimezone=r,this.config.precision=o}static[T]="PgTimeBuilder";build(t){return new _s(t,this.config)}},_s=class extends Y{static{a(this,"PgTime")}static[T]="PgTime";withTimezone;precision;constructor(t,r){super(t,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function bI(e,t={}){let{name:r,config:o}=Me(e,t);return new $h(r,o.withTimezone??!1,o.precision)}a(bI,"time");var Ah=class extends en{static{a(this,"PgTimestampBuilder")}static[T]="PgTimestampBuilder";constructor(t,r,o){super(t,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=o}build(t){return new bs(t,this.config)}},bs=class extends Y{static{a(this,"PgTimestamp")}static[T]="PgTimestamp";withTimezone;precision;constructor(t,r){super(t,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a(t=>new Date(this.withTimezone?t:t+"+0000"),"mapFromDriverValue");mapToDriverValue=a(t=>t.toISOString(),"mapToDriverValue")},Ch=class extends en{static{a(this,"PgTimestampStringBuilder")}static[T]="PgTimestampStringBuilder";constructor(t,r,o){super(t,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=o}build(t){return new xs(t,this.config)}},xs=class extends Y{static{a(this,"PgTimestampString")}static[T]="PgTimestampString";withTimezone;precision;constructor(t,r){super(t,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function O(e,t={}){let{name:r,config:o}=Me(e,t);return o?.mode==="string"?new Ch(r,o.withTimezone??!1,o.precision):new Ah(r,o?.withTimezone??!1,o?.precision)}a(O,"timestamp");var Oh=class extends le{static{a(this,"PgUUIDBuilder")}static[T]="PgUUIDBuilder";constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(I`gen_random_uuid()`)}build(t){return new ws(t,this.config)}},ws=class extends Y{static{a(this,"PgUUID")}static[T]="PgUUID";getSQLType(){return"uuid"}};function Si(e){return new Oh(e??"")}a(Si,"uuid");var Rh=class extends le{static{a(this,"PgVarcharBuilder")}static[T]="PgVarcharBuilder";constructor(t,r){super(t,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new Nh(t,this.config)}},Nh=class extends Y{static{a(this,"PgVarchar")}static[T]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function xI(e,t={}){let{name:r,config:o}=Me(e,t);return new Rh(r,o)}a(xI,"varchar");var jh=class extends le{static{a(this,"PgBinaryVectorBuilder")}static[T]="PgBinaryVectorBuilder";constructor(t,r){super(t,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(t){return new Dh(t,this.config)}},Dh=class extends Y{static{a(this,"PgBinaryVector")}static[T]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function wI(e,t){let{name:r,config:o}=Me(e,t);return new jh(r,o)}a(wI,"bit");var zh=class extends le{static{a(this,"PgHalfVectorBuilder")}static[T]="PgHalfVectorBuilder";constructor(t,r){super(t,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(t){return new Mh(t,this.config)}},Mh=class extends Y{static{a(this,"PgHalfVector")}static[T]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function SI(e,t){let{name:r,config:o}=Me(e,t);return new zh(r,o)}a(SI,"halfvec");var Uh=class extends le{static{a(this,"PgSparseVectorBuilder")}static[T]="PgSparseVectorBuilder";constructor(t,r){super(t,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(t){return new qh(t,this.config)}},qh=class extends Y{static{a(this,"PgSparseVector")}static[T]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function TI(e,t){let{name:r,config:o}=Me(e,t);return new Uh(r,o)}a(TI,"sparsevec");var Lh=class extends le{static{a(this,"PgVectorBuilder")}static[T]="PgVectorBuilder";constructor(t,r){super(t,"array","PgVector"),this.config.dimensions=r.dimensions}build(t){return new Fh(t,this.config)}},Fh=class extends Y{static{a(this,"PgVector")}static[T]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function II(e,t){let{name:r,config:o}=Me(e,t);return new Lh(r,o)}a(II,"vector");function EI(){return{bigint:rI,bigserial:nI,boolean:oe,char:oI,cidr:iI,customType:aI,date:Ht,doublePrecision:sI,inet:_r,integer:Ze,interval:cI,json:uI,jsonb:Re,line:lI,macaddr:dI,macaddr8:pI,numeric:uh,point:mI,geometry:hI,real:gI,serial:yI,smallint:vI,smallserial:_I,text:_,time:bI,timestamp:O,uuid:Si,varchar:xI,bit:wI,halfvec:SI,sparsevec:TI,vector:II}}a(EI,"getPgColumnBuilders");var Bh=Symbol.for("drizzle:PgInlineForeignKeys"),kI=Symbol.for("drizzle:EnableRLS"),Ct=class extends te{static{a(this,"PgTable")}static[T]="PgTable";static Symbol=Object.assign({},te.Symbol,{InlineForeignKeys:Bh,EnableRLS:kI});[Bh]=[];[kI]=!1;[te.Symbol.ExtraConfigBuilder]=void 0;[te.Symbol.ExtraConfigColumns]={}};function hM(e,t,r,o,n=e){let i=new Ct(e,o,n),c=typeof t=="function"?t(EI()):t,u=Object.fromEntries(Object.entries(c).map(([p,m])=>{let f=m;f.setName(p);let g=f.build(i);return i[Bh].push(...f.buildForeignKeys(g,i)),[p,g]})),l=Object.fromEntries(Object.entries(c).map(([p,m])=>{let f=m;f.setName(p);let g=f.buildExtraConfigColumn(i);return[p,g]})),d=Object.assign(i,u);return d[te.Symbol.Columns]=u,d[te.Symbol.ExtraConfigColumns]=l,r&&(d[Ct.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:a(()=>(d[Ct.Symbol.EnableRLS]=!0,d),"enableRLS")})}a(hM,"pgTableWithSchema");var he=a((e,t,r)=>hM(e,t,r,void 0),"pgTable");var _l=class{static{a(this,"PrimaryKeyBuilder")}static[T]="PgPrimaryKeyBuilder";columns;name;constructor(t,r){this.columns=t,this.name=r}build(t){return new Vh(t,this.columns,this.name)}},Vh=class{static{a(this,"PrimaryKey")}constructor(t,r,o){this.table=t,this.columns=r,this.name=o}static[T]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Ct.Symbol.Name]}_${this.columns.map(t=>t.name).join("_")}_pk`}};function ur(e,t){return WT(t)&&!_f(e)&&!j(e,cr)&&!j(e,kn)&&!j(e,Ge)&&!j(e,te)&&!j(e,Wt)?new cr(e,t):e}a(ur,"bindIfParam");var A=a((e,t)=>I`${e} = ${ur(t,e)}`,"eq"),PI=a((e,t)=>I`${e} <> ${ur(t,e)}`,"ne");function pe(...e){let t=e.filter(r=>r!==void 0);if(t.length!==0)return t.length===1?new ce(t):new ce([new At("("),I.join(t,new At(" and ")),new At(")")])}a(pe,"and");function Uo(...e){let t=e.filter(r=>r!==void 0);if(t.length!==0)return t.length===1?new ce(t):new ce([new At("("),I.join(t,new At(" or ")),new At(")")])}a(Uo,"or");function $I(e){return I`not ${e}`}a($I,"not");var AI=a((e,t)=>I`${e} > ${ur(t,e)}`,"gt"),Ot=a((e,t)=>I`${e} >= ${ur(t,e)}`,"gte"),CI=a((e,t)=>I`${e} < ${ur(t,e)}`,"lt"),It=a((e,t)=>I`${e} <= ${ur(t,e)}`,"lte");function Ti(e,t){return Array.isArray(t)?t.length===0?I`false`:I`${e} in ${t.map(r=>ur(r,e))}`:I`${e} in ${ur(t,e)}`}a(Ti,"inArray");function OI(e,t){return Array.isArray(t)?t.length===0?I`true`:I`${e} not in ${t.map(r=>ur(r,e))}`:I`${e} not in ${ur(t,e)}`}a(OI,"notInArray");function bl(e){return I`${e} is null`}a(bl,"isNull");function RI(e){return I`${e} is not null`}a(RI,"isNotNull");function NI(e){return I`exists ${e}`}a(NI,"exists");function jI(e){return I`not exists ${e}`}a(jI,"notExists");function DI(e,t,r){return I`${e} between ${ur(t,e)} and ${ur(r,e)}`}a(DI,"between");function zI(e,t,r){return I`${e} not between ${ur(t,e)} and ${ur(r,e)}`}a(zI,"notBetween");function MI(e,t){return I`${e} like ${t}`}a(MI,"like");function UI(e,t){return I`${e} not like ${t}`}a(UI,"notLike");function Gt(e,t){return I`${e} ilike ${t}`}a(Gt,"ilike");function qI(e,t){return I`${e} not ilike ${t}`}a(qI,"notIlike");function Xn(e){return I`${e} asc`}a(Xn,"asc");function ot(e){return I`${e} desc`}a(ot,"desc");var xl=class{static{a(this,"Relation")}constructor(t,r,o){this.sourceTable=t,this.referencedTable=r,this.relationName=o,this.referencedTableName=r[te.Symbol.Name]}static[T]="Relation";referencedTableName;fieldName},wl=class{static{a(this,"Relations")}constructor(t,r){this.table=t,this.config=r}static[T]="Relations"},Yn=class e extends xl{static{a(this,"One")}constructor(t,r,o,n){super(t,r,o?.relationName),this.config=o,this.isNullable=n}static[T]="One";withFieldName(t){let r=new e(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=t,r}},Ss=class e extends xl{static{a(this,"Many")}constructor(t,r,o){super(t,r,o?.relationName),this.config=o}static[T]="Many";withFieldName(t){let r=new e(this.sourceTable,this.referencedTable,this.config);return r.fieldName=t,r}};function LI(){return{and:pe,between:DI,eq:A,exists:NI,gt:AI,gte:Ot,ilike:Gt,inArray:Ti,isNull:bl,isNotNull:RI,like:MI,lt:CI,lte:It,ne:PI,not:$I,notBetween:zI,notExists:jI,notLike:UI,notIlike:qI,notInArray:OI,or:Uo,sql:I}}a(LI,"getOperators");function FI(){return{sql:I,asc:Xn,desc:ot}}a(FI,"getOrderByOperators");function Tl(e,t){Object.keys(e).length===1&&"default"in e&&!j(e.default,te)&&(e=e.default);let r={},o={},n={};for(let[i,c]of Object.entries(e))if(j(c,te)){let u=zo(c),l=o[u];r[u]=i,n[i]={tsName:i,dbName:c[te.Symbol.Name],schema:c[te.Symbol.Schema],columns:c[te.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let p of Object.values(c[te.Symbol.Columns]))p.primary&&n[i].primaryKey.push(p);let d=c[te.Symbol.ExtraConfigBuilder]?.(c[te.Symbol.ExtraConfigColumns]);if(d)for(let p of Object.values(d))j(p,_l)&&n[i].primaryKey.push(...p.columns)}else if(j(c,wl)){let u=zo(c.table),l=r[u],d=c.config(t(c.table)),p;for(let[m,f]of Object.entries(d))if(l){let g=n[l];g.relations[m]=f,p&&g.primaryKey.push(...p)}else u in o||(o[u]={relations:{},primaryKey:p}),o[u].relations[m]=f}return{tables:n,tableNamesMap:r}}a(Tl,"extractTablesRelationalConfig");function Ie(e,t){return new wl(e,r=>Object.fromEntries(Object.entries(t(r)).map(([o,n])=>[o,n.withFieldName(o)])))}a(Ie,"relations");function gM(e){return a(function(r,o){return new Yn(e,r,o,o?.fields.reduce((n,i)=>n&&i.notNull,!0)??!1)},"one")}a(gM,"createOne");function yM(e){return a(function(r,o){return new Ss(e,r,o)},"many")}a(yM,"createMany");function BI(e,t,r){if(j(r,Yn)&&r.config)return{fields:r.config.fields,references:r.config.references};let o=t[zo(r.referencedTable)];if(!o)throw new Error(`Table "${r.referencedTable[te.Symbol.Name]}" not found in schema`);let n=e[o];if(!n)throw new Error(`Table "${o}" not found in schema`);let i=r.sourceTable,c=t[zo(i)];if(!c)throw new Error(`Table "${i[te.Symbol.Name]}" not found in schema`);let u=[];for(let l of Object.values(n.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&u.push(l);if(u.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${o}"`):new Error(`There are multiple relations between "${o}" and "${r.sourceTable[te.Symbol.Name]}". Please specify relation name`);if(u[0]&&j(u[0],Yn)&&u[0].config)return{fields:u[0].config.references,references:u[0].config.fields};throw new Error(`There is not enough information to infer relation "${c}.${r.fieldName}"`)}a(BI,"normalizeRelation");function Il(e){return{one:gM(e),many:yM(e)}}a(Il,"createTableRelationsHelpers");function Sl(e,t,r,o,n=i=>i){let i={};for(let[c,u]of o.entries())if(u.isJson){let l=t.relations[u.tsKey],d=r[c],p=typeof d=="string"?JSON.parse(d):d;i[u.tsKey]=j(l,Yn)?p&&Sl(e,e[u.relationTableTsKey],p,u.selection,n):p.map(m=>Sl(e,e[u.relationTableTsKey],m,u.selection,n))}else{let l=n(r[c]),d=u.field,p;j(d,Ge)?p=d:j(d,ce)?p=d.decoder:p=d.sql.decoder,i[u.tsKey]=l===null?null:p.mapFromDriverValue(l)}return i}a(Sl,"mapRelationalRow");function VI(e){return I`count(${e||I.raw("*")})`.mapWith(Number)}a(VI,"count");function El(e){return I`sum(${e})`.mapWith(String)}a(El,"sum");import{neon as $M,Pool as AM}from"@neondatabase/serverless";import{neon as eg,types as br}from"@neondatabase/serverless";var gt=class e{static{a(this,"SelectionProxyHandler")}static[T]="SelectionProxyHandler";config;constructor(t){this.config={...t}}get(t,r){if(r==="_")return{...t._,selectedFields:new Proxy(t._.selectedFields,this)};if(r===nt)return{...t[nt],selectedFields:new Proxy(t[nt].selectedFields,this)};if(typeof r=="symbol")return t[r];let n=(j(t,ht)?t._.selectedFields:j(t,Wt)?t[nt].selectedFields:t)[r];if(j(n,ce.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!n.isSelectionField)return n.sql;let i=n.clone();return i.isSelectionField=!0,i}if(j(n,ce)){if(this.config.sqlBehavior==="sql")return n;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return j(n,Ge)?this.config.alias?new Proxy(n,new Mo(new Proxy(n.table,new bi(this.config.alias,this.config.replaceOriginalName??!1)))):n:typeof n!="object"||n===null?n:new Proxy(n,new e(this.config))}};var Zh=class{static{a(this,"IndexBuilderOn")}constructor(t,r){this.unique=t,this.name=r}static[T]="PgIndexBuilderOn";on(...t){return new Ts(t.map(r=>{if(j(r,ce))return r;r=r;let o=new vi(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),o}),this.unique,!1,this.name)}onOnly(...t){return new Ts(t.map(r=>{if(j(r,ce))return r;r=r;let o=new vi(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,o}),this.unique,!0,this.name)}using(t,...r){return new Ts(r.map(o=>{if(j(o,ce))return o;o=o;let n=new vi(o.name,!!o.keyAsName,o.columnType,o.indexConfig);return o.indexConfig=JSON.parse(JSON.stringify(o.defaultConfig)),n}),this.unique,!0,this.name,t)}},Ts=class{static{a(this,"IndexBuilder")}static[T]="PgIndexBuilder";config;constructor(t,r,o,n,i="btree"){this.config={name:n,columns:t,unique:r,only:o,method:i}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new Hh(this.config,t)}},Hh=class{static{a(this,"Index")}static[T]="PgIndex";config;constructor(t,r){this.config={...t,table:r}}};function Gh(e){return new Zh(!0,e)}a(Gh,"uniqueIndex");function vM(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}a(vM,"toSnakeCase");function _M(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,o,n)=>{let i=n===0?o.toLowerCase():`${o[0].toUpperCase()}${o.slice(1)}`;return r+i},"")}a(_M,"toCamelCase");function bM(e){return e}a(bM,"noopCase");var kl=class{static{a(this,"CasingCache")}static[T]="CasingCache";cache={};cachedTables={};convert;constructor(t){this.convert=t==="snake_case"?vM:t==="camelCase"?_M:bM}getColumnCasing(t){if(!t.keyAsName)return t.name;let r=t.table[te.Symbol.Schema]??"public",o=t.table[te.Symbol.OriginalName],n=`${r}.${o}.${t.name}`;return this.cache[n]||this.cacheTable(t.table),this.cache[n]}cacheTable(t){let r=t[te.Symbol.Schema]??"public",o=t[te.Symbol.OriginalName],n=`${r}.${o}`;if(!this.cachedTables[n]){for(let i of Object.values(t[te.Symbol.Columns])){let c=`${n}.${i.name}`;this.cache[c]=this.convert(i.name)}this.cachedTables[n]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Ii=class extends Wt{static{a(this,"PgViewBase")}static[T]="PgViewBase"};var tn=class{static{a(this,"PgDialect")}static[T]="PgDialect";casing;constructor(t){this.casing=new kl(t?.casing)}async migrate(t,r,o){let n=typeof o=="string"?"__drizzle_migrations":o.migrationsTable??"__drizzle_migrations",i=typeof o=="string"?"drizzle":o.migrationsSchema??"drizzle",c=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(i)}.${I.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(I`CREATE SCHEMA IF NOT EXISTS ${I.identifier(i)}`),await r.execute(c);let l=(await r.all(I`select id, hash, created_at from ${I.identifier(i)}.${I.identifier(n)} order by created_at desc limit 1`))[0];await r.transaction(async d=>{for await(let p of t)if(!l||Number(l.created_at)<p.folderMillis){for(let m of p.sql)await d.execute(I.raw(m));await d.execute(I`insert into ${I.identifier(i)}.${I.identifier(n)} ("hash", "created_at") values(${p.hash}, ${p.folderMillis})`)}})}escapeName(t){return`"${t}"`}escapeParam(t){return`$${t+1}`}escapeString(t){return`'${t.replace(/'/g,"''")}'`}buildWithCTE(t){if(!t?.length)return;let r=[I`with `];for(let[o,n]of t.entries())r.push(I`${I.identifier(n._.alias)} as (${n._.sql})`),o<t.length-1&&r.push(I`, `);return r.push(I` `),I.join(r)}buildDeleteQuery({table:t,where:r,returning:o,withList:n}){let i=this.buildWithCTE(n),c=o?I` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,u=r?I` where ${r}`:void 0;return I`${i}delete from ${t}${u}${c}`}buildUpdateSet(t,r){let o=t[te.Symbol.Columns],n=Object.keys(o).filter(c=>r[c]!==void 0||o[c]?.onUpdateFn!==void 0),i=n.length;return I.join(n.flatMap((c,u)=>{let l=o[c],d=r[c]??I.param(l.onUpdateFn(),l),p=I`${I.identifier(this.casing.getColumnCasing(l))} = ${d}`;return u<i-1?[p,I.raw(", ")]:[p]}))}buildUpdateQuery({table:t,set:r,where:o,returning:n,withList:i,from:c,joins:u}){let l=this.buildWithCTE(i),d=t[Ct.Symbol.Name],p=t[Ct.Symbol.Schema],m=t[Ct.Symbol.OriginalName],f=d===m?void 0:d,g=I`${p?I`${I.identifier(p)}.`:void 0}${I.identifier(m)}${f&&I` ${I.identifier(f)}`}`,h=this.buildUpdateSet(t,r),v=c&&I.join([I.raw(" from "),this.buildFromTable(c)]),x=this.buildJoins(u),S=n?I` returning ${this.buildSelection(n,{isSingleTable:!c})}`:void 0,b=o?I` where ${o}`:void 0;return I`${l}update ${g} set ${h}${v}${x}${b}${S}`}buildSelection(t,{isSingleTable:r=!1}={}){let o=t.length,n=t.flatMap(({field:i},c)=>{let u=[];if(j(i,ce.Aliased)&&i.isSelectionField)u.push(I.identifier(i.fieldAlias));else if(j(i,ce.Aliased)||j(i,ce)){let l=j(i,ce.Aliased)?i.sql:i;r?u.push(new ce(l.queryChunks.map(d=>j(d,Y)?I.identifier(this.casing.getColumnCasing(d)):d))):u.push(l),j(i,ce.Aliased)&&u.push(I` as ${I.identifier(i.fieldAlias)}`)}else j(i,Ge)&&(r?u.push(I.identifier(this.casing.getColumnCasing(i))):u.push(i));return c<o-1&&u.push(I`, `),u});return I.join(n)}buildJoins(t){if(!t||t.length===0)return;let r=[];for(let[o,n]of t.entries()){o===0&&r.push(I` `);let i=n.table,c=n.lateral?I` lateral`:void 0,u=n.on?I` on ${n.on}`:void 0;if(j(i,Ct)){let l=i[Ct.Symbol.Name],d=i[Ct.Symbol.Schema],p=i[Ct.Symbol.OriginalName],m=l===p?void 0:n.alias;r.push(I`${I.raw(n.joinType)} join${c} ${d?I`${I.identifier(d)}.`:void 0}${I.identifier(p)}${m&&I` ${I.identifier(m)}`}${u}`)}else if(j(i,Wt)){let l=i[nt].name,d=i[nt].schema,p=i[nt].originalName,m=l===p?void 0:n.alias;r.push(I`${I.raw(n.joinType)} join${c} ${d?I`${I.identifier(d)}.`:void 0}${I.identifier(p)}${m&&I` ${I.identifier(m)}`}${u}`)}else r.push(I`${I.raw(n.joinType)} join${c} ${i}${u}`);o<t.length-1&&r.push(I` `)}return I.join(r)}buildFromTable(t){if(j(t,te)&&t[te.Symbol.IsAlias]){let r=I`${I.identifier(t[te.Symbol.OriginalName])}`;return t[te.Symbol.Schema]&&(r=I`${I.identifier(t[te.Symbol.Schema])}.${r}`),I`${r} ${I.identifier(t[te.Symbol.Name])}`}return t}buildSelectQuery({withList:t,fields:r,fieldsFlat:o,where:n,having:i,table:c,joins:u,orderBy:l,groupBy:d,limit:p,offset:m,lockingClause:f,distinct:g,setOperators:h}){let v=o??Ar(r);for(let re of v)if(j(re.field,Ge)&&sr(re.field.table)!==(j(c,ht)?c._.alias:j(c,Ii)?c[nt].name:j(c,ce)?void 0:sr(c))&&!(ve=>u?.some(({alias:ie})=>ie===(ve[te.Symbol.IsAlias]?sr(ve):ve[te.Symbol.BaseName])))(re.field.table)){let ve=sr(re.field.table);throw new Error(`Your "${re.path.join("->")}" field references a column "${ve}"."${re.field.name}", but the table "${ve}" is not part of the query! Did you forget to join it?`)}let x=!u||u.length===0,S=this.buildWithCTE(t),b;g&&(b=g===!0?I` distinct`:I` distinct on (${I.join(g.on,I`, `)})`);let w=this.buildSelection(v,{isSingleTable:x}),P=this.buildFromTable(c),B=this.buildJoins(u),V=n?I` where ${n}`:void 0,C=i?I` having ${i}`:void 0,L;l&&l.length>0&&(L=I` order by ${I.join(l,I`, `)}`);let M;d&&d.length>0&&(M=I` group by ${I.join(d,I`, `)}`);let D=typeof p=="object"||typeof p=="number"&&p>=0?I` limit ${p}`:void 0,U=m?I` offset ${m}`:void 0,de=I.empty();if(f){let re=I` for ${I.raw(f.strength)}`;f.config.of&&re.append(I` of ${I.join(Array.isArray(f.config.of)?f.config.of:[f.config.of],I`, `)}`),f.config.noWait?re.append(I` nowait`):f.config.skipLocked&&re.append(I` skip locked`),de.append(re)}let J=I`${S}select${b} ${w} from ${P}${B}${V}${M}${C}${L}${D}${U}${de}`;return h.length>0?this.buildSetOperations(J,h):J}buildSetOperations(t,r){let[o,...n]=r;if(!o)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:t,setOperator:o}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:t,setOperator:o}),n)}buildSetOperationQuery({leftSelect:t,setOperator:{type:r,isAll:o,rightSelect:n,limit:i,orderBy:c,offset:u}}){let l=I`(${t.getSQL()}) `,d=I`(${n.getSQL()})`,p;if(c&&c.length>0){let h=[];for(let v of c)if(j(v,Y))h.push(I.identifier(v.name));else if(j(v,ce)){for(let x=0;x<v.queryChunks.length;x++){let S=v.queryChunks[x];j(S,Y)&&(v.queryChunks[x]=I.identifier(S.name))}h.push(I`${v}`)}else h.push(I`${v}`);p=I` order by ${I.join(h,I`, `)} `}let m=typeof i=="object"||typeof i=="number"&&i>=0?I` limit ${i}`:void 0,f=I.raw(`${r} ${o?"all ":""}`),g=u?I` offset ${u}`:void 0;return I`${l}${f}${d}${p}${m}${g}`}buildInsertQuery({table:t,values:r,onConflict:o,returning:n,withList:i,select:c,overridingSystemValue_:u}){let l=[],d=t[te.Symbol.Columns],p=Object.entries(d).filter(([S,b])=>!b.shouldDisableInsert()),m=p.map(([,S])=>I.identifier(this.casing.getColumnCasing(S)));if(c){let S=r;j(S,ce)?l.push(S):l.push(S.getSQL())}else{let S=r;l.push(I.raw("values "));for(let[b,w]of S.entries()){let P=[];for(let[B,V]of p){let C=w[B];if(C===void 0||j(C,cr)&&C.value===void 0)if(V.defaultFn!==void 0){let L=V.defaultFn(),M=j(L,ce)?L:I.param(L,V);P.push(M)}else if(!V.default&&V.onUpdateFn!==void 0){let L=V.onUpdateFn(),M=j(L,ce)?L:I.param(L,V);P.push(M)}else P.push(I`default`);else P.push(C)}l.push(P),b<S.length-1&&l.push(I`, `)}}let f=this.buildWithCTE(i),g=I.join(l),h=n?I` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,v=o?I` on conflict ${o}`:void 0,x=u===!0?I`overriding system value `:void 0;return I`${f}insert into ${t} ${m} ${x}${g}${v}${h}`}buildRefreshMaterializedViewQuery({view:t,concurrently:r,withNoData:o}){let n=r?I` concurrently`:void 0,i=o?I` with no data`:void 0;return I`refresh materialized view${n} ${t}${i}`}prepareTyping(t){return j(t,ys)||j(t,gs)?"json":j(t,vs)?"decimal":j(t,_s)?"time":j(t,bs)||j(t,xs)?"timestamp":j(t,fs)||j(t,hs)?"date":j(t,ws)?"uuid":"none"}sqlToQuery(t,r){return t.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:o,table:n,tableConfig:i,queryConfig:c,tableAlias:u,nestedQueryRelation:l,joinOn:d}){let p=[],m,f,g=[],h,v=[];if(c===!0)p=Object.entries(i.columns).map(([b,w])=>({dbKey:w.name,tsKey:b,field:Yr(w,u),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let S=Object.fromEntries(Object.entries(i.columns).map(([C,L])=>[C,Yr(L,u)]));if(c.where){let C=typeof c.where=="function"?c.where(S,LI()):c.where;h=C&&ds(C,u)}let b=[],w=[];if(c.columns){let C=!1;for(let[L,M]of Object.entries(c.columns))M!==void 0&&L in i.columns&&(!C&&M===!0&&(C=!0),w.push(L));w.length>0&&(w=C?w.filter(L=>c.columns?.[L]===!0):Object.keys(i.columns).filter(L=>!w.includes(L)))}else w=Object.keys(i.columns);for(let C of w){let L=i.columns[C];b.push({tsKey:C,value:L})}let P=[];c.with&&(P=Object.entries(c.with).filter(C=>!!C[1]).map(([C,L])=>({tsKey:C,queryConfig:L,relation:i.relations[C]})));let B;if(c.extras){B=typeof c.extras=="function"?c.extras(S,{sql:I}):c.extras;for(let[C,L]of Object.entries(B))b.push({tsKey:C,value:bf(L,u)})}for(let{tsKey:C,value:L}of b)p.push({dbKey:j(L,ce.Aliased)?L.fieldAlias:i.columns[C].name,tsKey:C,field:j(L,Ge)?Yr(L,u):L,relationTableTsKey:void 0,isJson:!1,selection:[]});let V=typeof c.orderBy=="function"?c.orderBy(S,FI()):c.orderBy??[];Array.isArray(V)||(V=[V]),g=V.map(C=>j(C,Ge)?Yr(C,u):ds(C,u)),m=c.limit,f=c.offset;for(let{tsKey:C,queryConfig:L,relation:M}of P){let D=BI(r,o,M),U=zo(M.referencedTable),de=o[U],J=`${u}_${C}`,re=pe(...D.fields.map((fe,ze)=>A(Yr(D.references[ze],J),Yr(fe,u)))),ve=this.buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:o,table:t[de],tableConfig:r[de],queryConfig:j(M,Yn)?L===!0?{limit:1}:{...L,limit:1}:L,tableAlias:J,joinOn:re,nestedQueryRelation:M}),ie=I`${I.identifier(J)}.${I.identifier("data")}`.as(C);v.push({on:I`true`,table:new ht(ve.sql,{},J),alias:J,joinType:"left",lateral:!0}),p.push({dbKey:C,tsKey:C,field:ie,relationTableTsKey:de,isJson:!0,selection:ve.selection})}}if(p.length===0)throw new ps({message:`No fields selected for table "${i.tsName}" ("${u}")`});let x;if(h=pe(d,h),l){let S=I`json_build_array(${I.join(p.map(({field:P,tsKey:B,isJson:V})=>V?I`${I.identifier(`${u}_${B}`)}.${I.identifier("data")}`:j(P,ce.Aliased)?P.sql:P),I`, `)})`;j(l,Ss)&&(S=I`coalesce(json_agg(${S}${g.length>0?I` order by ${I.join(g,I`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:S.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];m!==void 0||f!==void 0||g.length>0?(x=this.buildSelectQuery({table:ls(n,u),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:h,limit:m,offset:f,orderBy:g,setOperators:[]}),h=void 0,m=void 0,f=void 0,g=[]):x=ls(n,u),x=this.buildSelectQuery({table:j(x,Ct)?x:new ht(x,{},u),fields:{},fieldsFlat:b.map(({field:P})=>({path:[],field:j(P,Ge)?Yr(P,u):P})),joins:v,where:h,limit:m,offset:f,orderBy:g,setOperators:[]})}else x=this.buildSelectQuery({table:ls(n,u),fields:{},fieldsFlat:p.map(({field:S})=>({path:[],field:j(S,Ge)?Yr(S,u):S})),joins:v,where:h,limit:m,offset:f,orderBy:g,setOperators:[]});return{tableTsKey:i.tsName,sql:x,selection:p}}};var Pl=class{static{a(this,"TypedQueryBuilder")}static[T]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Kt=class{static{a(this,"PgSelectBuilder")}static[T]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(t){this.fields=t.fields,this.session=t.session,this.dialect=t.dialect,t.withList&&(this.withList=t.withList),this.distinct=t.distinct}authToken;setToken(t){return this.authToken=t,this}from(t){let r=!!this.fields,o=t,n;return this.fields?n=this.fields:j(o,ht)?n=Object.fromEntries(Object.keys(o._.selectedFields).map(i=>[i,o[i]])):j(o,Ii)?n=o[nt].selectedFields:j(o,ce)?n={}:n=tI(o),new $l({table:o,fields:n,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Kh=class extends Pl{static{a(this,"PgSelectQueryBuilderBase")}static[T]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:t,fields:r,isPartialSelect:o,session:n,dialect:i,withList:c,distinct:u}){super(),this.config={withList:c,table:t,fields:{...r},distinct:u,setOperators:[]},this.isPartialSelect=o,this.session=n,this.dialect=i,this._={selectedFields:r,config:this.config},this.tableName=$n(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let l of Mr(t))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(t,r){return(o,n)=>{let i=this.tableName,c=$n(o);for(let u of Mr(o))this.usedTables.add(u);if(typeof c=="string"&&this.config.joins?.some(u=>u.alias===c))throw new Error(`Alias "${c}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof c=="string"&&!j(o,ce))){let u=j(o,ht)?o._.selectedFields:j(o,Wt)?o[nt].selectedFields:o[te.Symbol.Columns];this.config.fields[c]=u}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:o,joinType:t,alias:c,lateral:r}),typeof c=="string")switch(t){case"left":{this.joinsNotNullableMap[c]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[c]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[c]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([u])=>[u,!1])),this.joinsNotNullableMap[c]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(t,r){return o=>{let n=typeof o=="function"?o(xM()):o;if(!ms(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:t,isAll:r,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(t){return this.config.setOperators.push(...t),this}where(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=t,this}having(t){return typeof t=="function"&&(t=t(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=t,this}groupBy(...t){if(typeof t[0]=="function"){let r=t[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=t;return this}orderBy(...t){if(typeof t[0]=="function"){let r=t[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),o=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=o:this.config.orderBy=o}else{let r=t;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=t:this.config.limit=t,this}offset(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=t:this.config.offset=t,this}for(t,r={}){return this.config.lockingClause={strength:t,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(t){let r=[];if(r.push(...Mr(this.config.table)),this.config.joins)for(let o of this.config.joins)r.push(...Mr(o.table));return new Proxy(new ht(this.getSQL(),this.config.fields,t,!1,[...new Set(r)]),new gt({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(t){return this.cacheConfig=t===void 0?{config:{},enable:!0,autoInvalidate:!0}:t===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...t},this}},$l=class extends Kh{static{a(this,"PgSelectBase")}static[T]="PgSelect";_prepare(t){let{session:r,config:o,dialect:n,joinsNotNullableMap:i,authToken:c,cacheConfig:u,usedTables:l}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=o;return $t.startActiveSpan("drizzle.prepareQuery",()=>{let p=Ar(d),m=r.prepareQuery(n.sqlToQuery(this.getSQL()),p,t,!0,void 0,{type:"select",tables:[...l]},u);return m.joinsNotNullableMap=i,m.setToken(c)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=a(t=>$t.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)),"execute")};eI($l,[Zt]);function Ei(e,t){return(r,o,...n)=>{let i=[o,...n].map(c=>({type:e,isAll:t,rightSelect:c}));for(let c of i)if(!ms(r.getSelectedFields(),c.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}a(Ei,"createSetOperator");var xM=a(()=>({union:wM,unionAll:SM,intersect:TM,intersectAll:IM,except:EM,exceptAll:kM}),"getPgSetOperators"),wM=Ei("union",!1),SM=Ei("union",!0),TM=Ei("intersect",!1),IM=Ei("intersect",!0),EM=Ei("except",!1),kM=Ei("except",!0);var ki=class{static{a(this,"QueryBuilder")}static[T]="PgQueryBuilder";dialect;dialectConfig;constructor(t){this.dialect=j(t,tn)?t:void 0,this.dialectConfig=j(t,tn)?void 0:t}$with=a((t,r)=>{let o=this;return{as:a(i=>(typeof i=="function"&&(i=i(o)),new Proxy(new _i(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),t,!0),new gt({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");with(...t){let r=this;function o(c){return new Kt({fields:c??void 0,session:void 0,dialect:r.getDialect(),withList:t})}a(o,"select");function n(c){return new Kt({fields:c??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}a(n,"selectDistinct");function i(c,u){return new Kt({fields:u??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:c}})}return a(i,"selectDistinctOn"),{select:o,selectDistinct:n,selectDistinctOn:i}}select(t){return new Kt({fields:t??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(t){return new Kt({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(t,r){return new Kt({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:t}})}getDialect(){return this.dialect||(this.dialect=new tn(this.dialectConfig)),this.dialect}};function Mr(e){return j(e,Ct)?[e[Do]?`${e[Do]}.${e[te.Symbol.BaseName]}`:e[te.Symbol.BaseName]]:j(e,ht)?e._.usedTables??[]:j(e,ce)?e.usedTables??[]:[]}a(Mr,"extractUsedTable");var Is=class extends Zt{static{a(this,"PgDeleteBase")}constructor(t,r,o,n){super(),this.session=r,this.dialect=o,this.config={table:t,withList:n}}static[T]="PgDelete";config;cacheConfig;where(t){return this.config.where=t,this}returning(t=this.config.table[te.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=Ar(t),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return $t.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"delete",tables:Mr(this.config.table)},this.cacheConfig))}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=a(t=>$t.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gt({alias:sr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Es=class{static{a(this,"PgInsertBuilder")}constructor(t,r,o,n,i){this.table=t,this.session=r,this.dialect=o,this.withList=n,this.overridingSystemValue_=i}static[T]="PgInsertBuilder";authToken;setToken(t){return this.authToken=t,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(t){if(t=Array.isArray(t)?t:[t],t.length===0)throw new Error("values() must be called with at least one value");let r=t.map(o=>{let n={},i=this.table[te.Symbol.Columns];for(let c of Object.keys(o)){let u=o[c];n[c]=j(u,ce)?u:new cr(u,i[c])}return n});return new Al(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(t){let r=typeof t=="function"?t(new ki):t;if(!j(r,ce)&&!ms(this.table[fl],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Al(this.table,r,this.session,this.dialect,this.withList,!0)}},Al=class extends Zt{static{a(this,"PgInsertBase")}constructor(t,r,o,n,i,c,u){super(),this.session=o,this.dialect=n,this.config={table:t,values:r,withList:i,select:c,overridingSystemValue_:u}}static[T]="PgInsert";config;cacheConfig;returning(t=this.config.table[te.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=Ar(t),this}onConflictDoNothing(t={}){if(t.target===void 0)this.config.onConflict=I`do nothing`;else{let r="";r=Array.isArray(t.target)?t.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target));let o=t.where?I` where ${t.where}`:void 0;this.config.onConflict=I`(${I.raw(r)})${o} do nothing`}return this}onConflictDoUpdate(t){if(t.where&&(t.targetWhere||t.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=t.where?I` where ${t.where}`:void 0,o=t.targetWhere?I` where ${t.targetWhere}`:void 0,n=t.setWhere?I` where ${t.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,yl(this.config.table,t.set)),c="";return c=Array.isArray(t.target)?t.target.map(u=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(u))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target)),this.config.onConflict=I`(${I.raw(c)})${o} do update set ${i}${r}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return $t.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"insert",tables:Mr(this.config.table)},this.cacheConfig))}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=a(t=>$t.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gt({alias:sr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Cl=class extends Zt{static{a(this,"PgRefreshMaterializedView")}constructor(t,r,o){super(),this.session=r,this.dialect=o,this.config={view:t}}static[T]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return $t.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,t,!0))}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=a(t=>$t.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t,this.authToken)),"execute")};var ks=class{static{a(this,"PgUpdateBuilder")}constructor(t,r,o,n){this.table=t,this.session=r,this.dialect=o,this.withList=n}static[T]="PgUpdateBuilder";authToken;setToken(t){return this.authToken=t,this}set(t){return new Jh(this.table,yl(this.table,t),this.session,this.dialect,this.withList).setToken(this.authToken)}},Jh=class extends Zt{static{a(this,"PgUpdateBase")}constructor(t,r,o,n,i){super(),this.session=o,this.dialect=n,this.config={set:r,table:t,withList:i,joins:[]},this.tableName=$n(t),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[T]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(t){let r=t,o=$n(r);return typeof o=="string"&&(this.joinsNotNullableMap[o]=!0),this.config.from=r,this}getTableLikeFields(t){return j(t,Ct)?t[te.Symbol.Columns]:j(t,ht)?t._.selectedFields:t[nt].selectedFields}createJoin(t){return(r,o)=>{let n=$n(r);if(typeof n=="string"&&this.config.joins.some(i=>i.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof o=="function"){let i=this.config.from&&!j(this.config.from,ce)?this.getTableLikeFields(this.config.from):void 0;o=o(new Proxy(this.config.table[te.Symbol.Columns],new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:o,table:r,joinType:t,alias:n}),typeof n=="string")switch(t){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(t){return this.config.where=t,this}returning(t){if(!t&&(t=Object.assign({},this.config.table[te.Symbol.Columns]),this.config.from)){let r=$n(this.config.from);if(typeof r=="string"&&this.config.from&&!j(this.config.from,ce)){let o=this.getTableLikeFields(this.config.from);t[r]=o}for(let o of this.config.joins){let n=$n(o.table);if(typeof n=="string"&&!j(o.table,ce)){let i=this.getTableLikeFields(o.table);t[n]=i}}}return this.config.returningFields=t,this.config.returning=Ar(t),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"insert",tables:Mr(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=a(t=>this._prepare().execute(t,this.authToken),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gt({alias:sr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Ol=class e extends ce{static{a(this,"PgCountBuilder")}constructor(t){super(e.buildEmbeddedCount(t.source,t.filters).queryChunks),this.params=t,this.mapWith(Number),this.session=t.session,this.sql=e.buildCount(t.source,t.filters)}sql;token;static[T]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(t,r){return I`(select count(*) from ${t}${I.raw(" where ").if(r)}${r})`}static buildCount(t,r){return I`select count(*) as count from ${t}${I.raw(" where ").if(r)}${r};`}setToken(t){return this.token=t,this}then(t,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,r)}catch(t){return this.then(void 0,t)}finally(t){return this.then(r=>(t?.(),r),r=>{throw t?.(),r})}};var Rl=class{static{a(this,"RelationalQueryBuilder")}constructor(t,r,o,n,i,c,u){this.fullSchema=t,this.schema=r,this.tableNamesMap=o,this.table=n,this.tableConfig=i,this.dialect=c,this.session=u}static[T]="PgRelationalQueryBuilder";findMany(t){return new Nl(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t||{},"many")}findFirst(t){return new Nl(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t?{...t,limit:1}:{limit:1},"first")}},Nl=class extends Zt{static{a(this,"PgRelationalQuery")}constructor(t,r,o,n,i,c,u,l,d){super(),this.fullSchema=t,this.schema=r,this.tableNamesMap=o,this.table=n,this.tableConfig=i,this.dialect=c,this.session=u,this.config=l,this.mode=d}static[T]="PgRelationalQuery";_prepare(t){return $t.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:o}=this._toSQL();return this.session.prepareQuery(o,void 0,t,!0,(n,i)=>{let c=n.map(u=>Sl(this.schema,this.tableConfig,u,r.selection,i));return this.mode==="first"?c[0]:c})})}prepare(t){return this._prepare(t)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let t=this._getQuery(),r=this.dialect.sqlToQuery(t.sql);return{query:t,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(t){return this.authToken=t,this}execute(){return $t.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var jl=class extends Zt{static{a(this,"PgRaw")}constructor(t,r,o,n){super(),this.execute=t,this.sql=r,this.query=o,this.mapBatchResult=n}static[T]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(t,r){return r?this.mapBatchResult(t):t}_prepare(){return this}isResponseInArrayMode(){return!1}};var eo=class{static{a(this,"PgDatabase")}constructor(t,r,o){if(this.dialect=t,this.session=r,this._=o?{schema:o.schema,fullSchema:o.fullSchema,tableNamesMap:o.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[n,i]of Object.entries(this._.schema))this.query[n]=new Rl(o.fullSchema,this._.schema,this._.tableNamesMap,o.fullSchema[n],i,t,r);this.$cache={invalidate:a(async n=>{},"invalidate")}}static[T]="PgDatabase";query;$with=a((t,r)=>{let o=this;return{as:a(i=>(typeof i=="function"&&(i=i(new ki(o.dialect))),new Proxy(new _i(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),t,!0),new gt({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");$count(t,r){return new Ol({source:t,filters:r,session:this.session})}$cache;with(...t){let r=this;function o(d){return new Kt({fields:d??void 0,session:r.session,dialect:r.dialect,withList:t})}a(o,"select");function n(d){return new Kt({fields:d??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:!0})}a(n,"selectDistinct");function i(d,p){return new Kt({fields:p??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:{on:d}})}a(i,"selectDistinctOn");function c(d){return new ks(d,r.session,r.dialect,t)}a(c,"update");function u(d){return new Es(d,r.session,r.dialect,t)}a(u,"insert");function l(d){return new Is(d,r.session,r.dialect,t)}return a(l,"delete_"),{select:o,selectDistinct:n,selectDistinctOn:i,update:c,insert:u,delete:l}}select(t){return new Kt({fields:t??void 0,session:this.session,dialect:this.dialect})}selectDistinct(t){return new Kt({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(t,r){return new Kt({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:t}})}update(t){return new ks(t,this.session,this.dialect)}insert(t){return new Es(t,this.session,this.dialect)}delete(t){return new Is(t,this.session,this.dialect)}refreshMaterializedView(t){return new Cl(t,this.session,this.dialect)}authToken;execute(t){let r=typeof t=="string"?I.raw(t):t.getSQL(),o=this.dialect.sqlToQuery(r),n=this.session.prepareQuery(o,void 0,void 0,!1);return new jl(()=>n.execute(void 0,this.authToken),r,o,i=>n.mapResult(i,!0))}transaction(t,r){return this.session.transaction(t,r)}};var Wh=class{static{a(this,"Cache")}static[T]="Cache"},to=class extends Wh{static{a(this,"NoopCache")}strategy(){return"all"}static[T]="NoopCache";async get(t){}async put(t,r,o,n){}async onMutate(t){}};async function Qh(e,t){let r=`${e}-${JSON.stringify(t)}`,n=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",n);return[...new Uint8Array(i)].map(l=>l.toString(16).padStart(2,"0")).join("")}a(Qh,"hashQuery");var Pi=class{static{a(this,"PgPreparedQuery")}constructor(t,r,o,n){this.query=t,this.cache=r,this.queryMetadata=o,this.cacheConfig=n,r&&r.strategy()==="all"&&n===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(t,r){return t}setToken(t){return this.authToken=t,this}static[T]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(t,r,o){if(this.cache===void 0||j(this.cache,to)||this.queryMetadata===void 0)try{return await o()}catch(n){throw new Pn(t,r,n)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await o()}catch(n){throw new Pn(t,r,n)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[n]=await Promise.all([o(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return n}catch(n){throw new Pn(t,r,n)}if(!this.cacheConfig)try{return await o()}catch(n){throw new Pn(t,r,n)}if(this.queryMetadata.type==="select"){let n=await this.cache.get(this.cacheConfig.tag??await Qh(t,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(n===void 0){let i;try{i=await o()}catch(c){throw new Pn(t,r,c)}return await this.cache.put(this.cacheConfig.tag??await Qh(t,r),i,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),i}return n}try{return await o()}catch(n){throw new Pn(t,r,n)}}},$i=class{static{a(this,"PgSession")}constructor(t){this.dialect=t}static[T]="PgSession";execute(t,r){return $t.startActiveSpan("drizzle.operation",()=>$t.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(t){return this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1).all()}async count(t,r){let o=await this.execute(t,r);return Number(o[0].count)}},Ai=class extends eo{static{a(this,"PgTransaction")}constructor(t,r,o,n=0){super(t,r,o),this.schema=o,this.nestedIndex=n}static[T]="PgTransaction";rollback(){throw new hl}getTransactionConfigSQL(t){let r=[];return t.isolationLevel&&r.push(`isolation level ${t.isolationLevel}`),t.accessMode&&r.push(t.accessMode),typeof t.deferrable=="boolean"&&r.push(t.deferrable?"deferrable":"not deferrable"),I.raw(r.join(" "))}setTransaction(t){return this.session.execute(I`set transaction ${this.getTransactionConfigSQL(t)}`)}};var Dl={arrayMode:!1,fullResults:!0},Xh={arrayMode:!0,fullResults:!0},Yh=class extends Pi{static{a(this,"NeonHttpPreparedQuery")}constructor(t,r,o,n,i,c,u,l,d){super(r,n,i,c),this.client=t,this.logger=o,this.fields=u,this._isResponseInArrayMode=l,this.customResultMapper=d,this.clientQuery=t.query??t}static[T]="NeonHttpPreparedQuery";clientQuery;async execute(t={},r=this.authToken){let o=Qn(this.query.params,t);this.logger.logQuery(this.query.sql,o);let{fields:n,clientQuery:i,query:c,customResultMapper:u}=this;if(!n&&!u)return this.queryWithCache(c.sql,o,async()=>i(c.sql,o,r===void 0?Dl:{...Dl,authToken:r}));let l=await this.queryWithCache(c.sql,o,async()=>await i(c.sql,o,r===void 0?Xh:{...Xh,authToken:r}));return this.mapResult(l)}mapResult(t){if(!this.fields&&!this.customResultMapper)return t;let r=t.rows;return this.customResultMapper?this.customResultMapper(r):r.map(o=>gl(this.fields,o,this.joinsNotNullableMap))}all(t={}){let r=Qn(this.query.params,t);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?Dl:{...Dl,authToken:this.authToken}).then(o=>o.rows)}values(t={},r){let o=Qn(this.query.params,t);return this.logger.logQuery(this.query.sql,o),this.clientQuery(this.query.sql,o,{arrayMode:!0,fullResults:!0,authToken:r}).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},zl=class extends $i{static{a(this,"NeonHttpSession")}constructor(t,r,o,n={}){super(r),this.client=t,this.schema=o,this.options=n,this.clientQuery=t.query??t,this.logger=n.logger??new wi,this.cache=n.cache??new to}static[T]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(t,r,o,n,i,c,u){return new Yh(this.client,t,this.logger,this.cache,c,u,r,n,i)}async batch(t){let r=[],o=[];for(let i of t){let c=i._prepare(),u=c.getQuery();r.push(c),o.push(this.clientQuery(u.sql,u.params,{fullResults:!0,arrayMode:c.isResponseInArrayMode()}))}return(await this.client.transaction(o,Xh)).map((i,c)=>r[c].mapResult(i,!0))}async query(t,r){return this.logger.logQuery(t,r),await this.clientQuery(t,r,{arrayMode:!0,fullResults:!0})}async queryObjects(t,r){return this.clientQuery(t,r,{arrayMode:!1,fullResults:!0})}async count(t,r){let o=await this.execute(t,r);return Number(o.rows[0].count)}async transaction(t,r={}){throw new Error("No transactions support in neon-http driver")}},ZI=class extends Ai{static{a(this,"NeonTransaction")}static[T]="NeonHttpTransaction";async transaction(t){throw new Error("No transactions support in neon-http driver")}};var tg=class{static{a(this,"NeonHttpDriver")}constructor(t,r,o={}){this.client=t,this.dialect=r,this.options=o,this.initMappers()}static[T]="NeonHttpDriver";createSession(t){return new zl(this.client,this.dialect,t,{logger:this.options.logger,cache:this.options.cache})}initMappers(){br.setTypeParser(br.builtins.TIMESTAMPTZ,t=>t),br.setTypeParser(br.builtins.TIMESTAMP,t=>t),br.setTypeParser(br.builtins.DATE,t=>t),br.setTypeParser(br.builtins.INTERVAL,t=>t),br.setTypeParser(1231,t=>t),br.setTypeParser(1115,t=>t),br.setTypeParser(1185,t=>t),br.setTypeParser(1187,t=>t),br.setTypeParser(1182,t=>t)}};function Ml(e,t,r,o){return new Proxy(e,{get(n,i){let c=n[i];return typeof c!="function"&&(typeof c!="object"||c===null)?c:o?Ml(c,t,r):i==="query"?Ml(c,t,r,!0):new Proxy(c,{apply(u,l,d){let p=u.call(l,...d);return typeof p=="object"&&p!==null&&"setToken"in p&&typeof p.setToken=="function"&&p.setToken(t),r(u,i,p)}})}})}a(Ml,"wrap");var rg=class extends eo{static{a(this,"NeonHttpDatabase")}static[T]="NeonHttpDatabase";$withAuth(t){return this.authToken=t,Ml(this,t,(r,o,n)=>o==="with"?Ml(n,t,(i,c,u)=>u):n)}async batch(t){return this.session.batch(t)}};function Ci(e,t={}){let r=new tn({casing:t.casing}),o;t.logger===!0?o=new xi:t.logger!==!1&&(o=t.logger);let n;if(t.schema){let l=Tl(t.schema,Il);n={fullSchema:t.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let c=new tg(e,r,{logger:o,cache:t.cache}).createSession(n),u=new rg(r,c,n);return u.$client=e,u.$cache=t.cache,u.$cache&&(u.$cache.invalidate=t.cache?.onMutate),u}a(Ci,"construct");function Ul(...e){if(typeof e[0]=="string"){let t=eg(e[0]);return Ci(t,e[1])}if(vl(e[0])){let{connection:t,client:r,...o}=e[0];if(r)return Ci(r,o);if(typeof t=="object"){let{connectionString:i,...c}=t,u=eg(i,c);return Ci(u,o)}let n=eg(t);return Ci(n,o)}return Ci(e[0],e[1])}a(Ul,"drizzle");(e=>{function t(r){return Ci({},r)}a(t,"mock"),e.mock=t})(Ul||(Ul={}));import{neonConfig as PM,Pool as ig}from"@neondatabase/serverless";import{Pool as HI,types as rn}from"@neondatabase/serverless";var ng=class extends Pi{static{a(this,"NeonPreparedQuery")}constructor(t,r,o,n,i,c,u,l,d,p,m){super({sql:r,params:o},i,c,u),this.client=t,this.params=o,this.logger=n,this.fields=l,this._isResponseInArrayMode=p,this.customResultMapper=m,this.rawQueryConfig={name:d,text:r,types:{getTypeParser:a((f,g)=>f===rn.builtins.TIMESTAMPTZ?h=>h:f===rn.builtins.TIMESTAMP?h=>h:f===rn.builtins.DATE?h=>h:f===rn.builtins.INTERVAL?h=>h:f===1231?h=>h:f===1115?h=>h:f===1185?h=>h:f===1187?h=>h:f===1182?h=>h:rn.getTypeParser(f,g),"getTypeParser")}},this.queryConfig={name:d,text:r,rowMode:"array",types:{getTypeParser:a((f,g)=>f===rn.builtins.TIMESTAMPTZ?h=>h:f===rn.builtins.TIMESTAMP?h=>h:f===rn.builtins.DATE?h=>h:f===rn.builtins.INTERVAL?h=>h:f===1231?h=>h:f===1115?h=>h:f===1185?h=>h:f===1187?h=>h:f===1182?h=>h:rn.getTypeParser(f,g),"getTypeParser")}}}static[T]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(t={}){let r=Qn(this.params,t);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:o,client:n,rawQueryConfig:i,queryConfig:c,joinsNotNullableMap:u,customResultMapper:l}=this;if(!o&&!l)return await this.queryWithCache(i.text,r,async()=>await n.query(i,r));let d=await this.queryWithCache(c.text,r,async()=>await n.query(c,r));return l?l(d.rows):d.rows.map(p=>gl(o,p,u))}all(t={}){let r=Qn(this.params,t);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.rawQueryConfig.text,r,async()=>await this.client.query(this.rawQueryConfig,r)).then(o=>o.rows)}values(t={}){let r=Qn(this.params,t);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.queryConfig.text,r,async()=>await this.client.query(this.queryConfig,r)).then(o=>o.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},ql=class e extends $i{static{a(this,"NeonSession")}constructor(t,r,o,n={}){super(r),this.client=t,this.schema=o,this.options=n,this.logger=n.logger??new wi,this.cache=n.cache??new to}static[T]="NeonSession";logger;cache;prepareQuery(t,r,o,n,i,c,u){return new ng(this.client,t.sql,t.params,this.logger,this.cache,c,u,r,o,n,i)}async query(t,r){return this.logger.logQuery(t,r),await this.client.query({rowMode:"array",text:t,values:r})}async queryObjects(t,r){return this.client.query(t,r)}async count(t){let r=await this.execute(t);return Number(r.rows[0].count)}async transaction(t,r={}){let o=this.client instanceof HI?new e(await this.client.connect(),this.dialect,this.schema,this.options):this,n=new og(this.dialect,o,this.schema);await n.execute(I`begin ${n.getTransactionConfigSQL(r)}`);try{let i=await t(n);return await n.execute(I`commit`),i}catch(i){throw await n.execute(I`rollback`),i}finally{this.client instanceof HI&&o.client.release()}}},og=class e extends Ai{static{a(this,"NeonTransaction")}static[T]="NeonTransaction";async transaction(t){let r=`sp${this.nestedIndex+1}`,o=new e(this.dialect,this.session,this.schema,this.nestedIndex+1);await o.execute(I.raw(`savepoint ${r}`));try{let n=await t(o);return await o.execute(I.raw(`release savepoint ${r}`)),n}catch(n){throw await o.execute(I.raw(`rollback to savepoint ${r}`)),n}}};var ag=class{static{a(this,"NeonDriver")}constructor(t,r,o={}){this.client=t,this.dialect=r,this.options=o}static[T]="NeonDriver";createSession(t){return new ql(this.client,this.dialect,t,{logger:this.options.logger,cache:this.options.cache})}},sg=class extends eo{static{a(this,"NeonDatabase")}static[T]="NeonServerlessDatabase"};function Ps(e,t={}){let r=new tn({casing:t.casing}),o;t.logger===!0?o=new xi:t.logger!==!1&&(o=t.logger);let n;if(t.schema){let l=Tl(t.schema,Il);n={fullSchema:t.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let c=new ag(e,r,{logger:o,cache:t.cache}).createSession(n),u=new sg(r,c,n);return u.$client=e,u.$cache=t.cache,u.$cache&&(u.$cache.invalidate=t.cache?.onMutate),u}a(Ps,"construct");function Ll(...e){if(typeof e[0]=="string"){let t=new ig({connectionString:e[0]});return Ps(t,e[1])}if(vl(e[0])){let{connection:t,client:r,ws:o,...n}=e[0];if(o&&(PM.webSocketConstructor=o),r)return Ps(r,n);let i=typeof t=="string"?new ig({connectionString:t}):new ig(t);return Ps(i,n)}return Ps(e[0],e[1])}a(Ll,"drizzle");(e=>{function t(r){return Ps({},r)}a(t,"mock"),e.mock=t})(Ll||(Ll={}));var Vl={};$r(Vl,{accountBalanceHistory:()=>ji,accountBalanceHistoryRelations:()=>n0,aiInsights:()=>Mt,aiInsightsRelations:()=>b0,alertRules:()=>Mi,alertRulesRelations:()=>E0,auditLogs:()=>ro,auditLogsRelations:()=>P0,bankAccounts:()=>H,bankAccountsRelations:()=>r0,bankSyncLogs:()=>no,bankSyncLogsRelations:()=>o0,boletoPayments:()=>oo,boletoPaymentsRelations:()=>y0,boletoStatusEnum:()=>GI,boletos:()=>nn,boletosRelations:()=>g0,budgetCategories:()=>so,budgetCategoriesRelations:()=>w0,chatMessages:()=>Fi,chatMessagesRelations:()=>T0,chatSessions:()=>an,chatSessionsRelations:()=>S0,collectionMethodEnum:()=>lg,commandIntents:()=>XI,complianceAuditLogs:()=>pr,complianceAuditLogsRelations:()=>U0,complianceEventTypeEnum:()=>yg,consentTemplates:()=>dr,consentTemplatesRelations:()=>R0,consentTypeEnum:()=>Fl,contactPaymentMethods:()=>Di,contactPaymentMethodsRelations:()=>h0,contacts:()=>ye,contactsRelations:()=>f0,dataDeletionRequests:()=>Xt,dataDeletionRequestsRelations:()=>D0,dataExportRequests:()=>Ni,dataExportRequestsRelations:()=>O0,dataRetentionPolicies:()=>Bl,dataRetentionPoliciesRelations:()=>j0,deletionRequestStatusEnum:()=>pg,deletionRequestTypeEnum:()=>dg,errorLogs:()=>Lo,errorLogsRelations:()=>$0,eventReminders:()=>io,eventRemindersRelations:()=>l0,eventTypes:()=>Fo,eventTypesRelations:()=>c0,exportFormatEnum:()=>fg,exportRequestTypeEnum:()=>mg,exportStatusEnum:()=>hg,financialEvents:()=>Ue,financialEventsRelations:()=>u0,legalHolds:()=>zi,legalHoldsRelations:()=>q0,lgpdConsentLogs:()=>Ri,lgpdConsentLogsRelations:()=>C0,lgpdConsents:()=>Qe,lgpdConsentsRelations:()=>N0,lgpdExportRequests:()=>Ur,lgpdExportRequestsRelations:()=>z0,limitTypeEnum:()=>gg,notificationLogs:()=>Ui,notificationLogsRelations:()=>k0,notifications:()=>Cn,notificationsRelations:()=>I0,paymentHistory:()=>Et,paymentHistoryRelations:()=>B0,paymentMethodTypeEnum:()=>KI,paymentStatusEnum:()=>ug,pixKeyTypeEnum:()=>JI,pixKeys:()=>qi,pixKeysRelations:()=>d0,pixQrCodes:()=>On,pixQrCodesRelations:()=>p0,pixTransactionStatusEnum:()=>WI,pixTransactionTypeEnum:()=>QI,pixTransactions:()=>on,pixTransactionsRelations:()=>m0,spendingPatterns:()=>ao,spendingPatternsRelations:()=>x0,subscriptionPlans:()=>Qt,subscriptionPlansRelations:()=>L0,subscriptionStatusEnum:()=>cg,subscriptions:()=>Ce,subscriptionsRelations:()=>F0,transactionCategories:()=>_e,transactionCategoriesRelations:()=>i0,transactionLimits:()=>Ft,transactionLimitsRelations:()=>M0,transactionSchedules:()=>lt,transactionSchedulesRelations:()=>s0,transactions:()=>q,transactionsRelations:()=>a0,userPreferences:()=>lr,userPreferencesRelations:()=>e0,userSecurity:()=>qo,userSecurityRelations:()=>t0,userSessions:()=>Oi,userSessionsRelations:()=>A0,users:()=>R,usersRelations:()=>YI,voiceCommands:()=>Li,voiceCommandsRelations:()=>v0,voiceTranscriptions:()=>Bi,voiceTranscriptionsRelations:()=>_0});var R=he("users",{id:_("id").primaryKey(),email:_("email").unique().notNull(),fullName:_("full_name"),phone:_("phone"),cpf:_("cpf").unique(),birthDate:Ht("birth_date"),autonomyLevel:Ze("autonomy_level").default(50),voiceCommandEnabled:oe("voice_command_enabled").default(!0),language:_("language").default("pt-BR"),timezone:_("timezone").default("America/Sao_Paulo"),currency:_("currency").default("BRL"),profileImageUrl:_("profile_image_url"),isActive:oe("is_active").default(!0),lastLogin:O("last_login",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),lr=he("user_preferences",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),theme:_("theme").default("system"),notificationsEmail:oe("notifications_email").default(!0),notificationsPush:oe("notifications_push").default(!0),notificationsSms:oe("notifications_sms").default(!1),autoCategorize:oe("auto_categorize").default(!0),budgetAlerts:oe("budget_alerts").default(!0),voiceFeedback:oe("voice_feedback").default(!0),accessibilityHighContrast:oe("accessibility_high_contrast").default(!1),accessibilityLargeText:oe("accessibility_large_text").default(!1),accessibilityScreenReader:oe("accessibility_screen_reader").default(!1),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),qo=he("user_security",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),biometricEnabled:oe("biometric_enabled").default(!1),twoFactorEnabled:oe("two_factor_enabled").default(!1),twoFactorSecret:_("two_factor_secret"),voiceBiometricEnabled:oe("voice_biometric_enabled").default(!1),voiceSampleEncrypted:_("voice_sample_encrypted"),sessionTimeoutMinutes:Ze("session_timeout_minutes").default(30),maxFailedAttempts:Ze("max_failed_attempts").default(5),lockedUntil:O("locked_until",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var ro=he("audit_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),action:_("action").notNull(),resourceType:_("resource_type"),resourceId:_("resource_id"),oldValues:Re("old_values"),newValues:Re("new_values"),ipAddress:_r("ip_address"),userAgent:_("user_agent"),sessionId:_("session_id"),success:oe("success").default(!0),errorMessage:_("error_message"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Lo=he("error_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),errorType:_("error_type").notNull(),errorCode:_("error_code"),errorMessage:_("error_message").notNull(),stackTrace:_("stack_trace"),context:Re("context"),userAgent:_("user_agent"),ipAddress:_r("ip_address"),sessionId:_("session_id"),isResolved:oe("is_resolved").default(!1),resolvedAt:O("resolved_at",{withTimezone:!0}),resolvedBy:_("resolved_by").references(()=>R.id),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Oi=he("user_sessions",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),sessionToken:_("session_token").unique().notNull(),deviceType:_("device_type"),deviceId:_("device_id"),ipAddress:_r("ip_address"),userAgent:_("user_agent"),isActive:oe("is_active").default(!0),lastActivity:O("last_activity",{withTimezone:!0}).defaultNow(),expiresAt:O("expires_at",{withTimezone:!0}).notNull(),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Ri=he("lgpd_consent_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),consentType:_("consent_type").notNull(),consentGiven:oe("consent_given").notNull(),consentVersion:_("consent_version").notNull(),ipAddress:_r("ip_address"),userAgent:_("user_agent"),consentedAt:O("consented_at",{withTimezone:!0}).defaultNow(),revokedAt:O("revoked_at",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Ni=he("data_export_requests",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),requestType:_("request_type").notNull(),status:_("status").default("pending"),processedAt:O("processed_at",{withTimezone:!0}),downloadUrl:_("download_url"),expiresAt:O("expires_at",{withTimezone:!0}),ipAddress:_r("ip_address"),userAgent:_("user_agent"),requestedAt:O("requested_at",{withTimezone:!0}).defaultNow(),createdAt:O("created_at",{withTimezone:!0}).defaultNow()});var H=he("bank_accounts",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),belvoAccountId:_("belvo_account_id").unique().notNull(),institutionId:_("institution_id").notNull(),institutionName:_("institution_name").notNull(),accountType:_("account_type").notNull(),accountNumber:_("account_number"),accountMask:_("account_mask").notNull(),accountHolderName:_("account_holder_name"),balance:Ne("balance",{precision:15,scale:2}).default("0"),availableBalance:Ne("available_balance",{precision:15,scale:2}).default("0"),currency:_("currency").default("BRL"),isActive:oe("is_active").default(!0),isPrimary:oe("is_primary").default(!1),lastSync:O("last_sync",{withTimezone:!0}),syncStatus:_("sync_status").default("pending"),syncErrorMessage:_("sync_error_message"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),ji=he("account_balance_history",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),accountId:_("account_id").references(()=>H.id,{onDelete:"cascade"}),balance:Ne("balance",{precision:15,scale:2}).notNull(),availableBalance:Ne("available_balance",{precision:15,scale:2}),recordedAt:O("recorded_at",{withTimezone:!0}).defaultNow(),source:_("source").default("sync")}),no=he("bank_sync_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),accountId:_("account_id").references(()=>H.id,{onDelete:"cascade"}),syncType:_("sync_type").notNull(),status:_("status").notNull(),recordsSynced:Ze("records_synced").default(0),errorMessage:_("error_message"),startedAt:O("started_at",{withTimezone:!0}).defaultNow(),completedAt:O("completed_at",{withTimezone:!0}),durationMs:Ze("duration_ms")});var cg=Tt("subscription_status",["free","trialing","active","past_due","canceled","unpaid"]),ug=Tt("payment_status",["succeeded","failed","pending"]),Qt=he("subscription_plans",{id:_("id").primaryKey(),name:_("name").notNull(),description:_("description"),priceCents:Ze("price_cents").notNull().default(0),currency:_("currency").notNull().default("BRL"),interval:_("interval"),stripeProductId:_("stripe_product_id"),stripePriceId:_("stripe_price_id"),features:Re("features").$type().default([]),aiModels:Re("ai_models").$type().default([]),maxBankAccounts:Ze("max_bank_accounts").default(1),maxTransactionsPerMonth:Ze("max_transactions_per_month"),isActive:oe("is_active").default(!0),displayOrder:Ze("display_order").default(0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Ce=he("subscriptions",{id:Si("id").primaryKey().defaultRandom(),userId:_("user_id").notNull().unique().references(()=>R.id,{onDelete:"cascade"}),stripeCustomerId:_("stripe_customer_id"),stripeSubscriptionId:_("stripe_subscription_id").unique(),planId:_("plan_id").notNull().default("free").references(()=>Qt.id),status:cg("status").notNull().default("free"),currentPeriodStart:O("current_period_start",{withTimezone:!0}),currentPeriodEnd:O("current_period_end",{withTimezone:!0}),cancelAtPeriodEnd:oe("cancel_at_period_end").default(!1),canceledAt:O("canceled_at",{withTimezone:!0}),trialStart:O("trial_start",{withTimezone:!0}),trialEnd:O("trial_end",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Et=he("payment_history",{id:Si("id").primaryKey().defaultRandom(),userId:_("user_id").notNull().references(()=>R.id,{onDelete:"cascade"}),subscriptionId:Si("subscription_id").references(()=>Ce.id,{onDelete:"set null"}),stripePaymentIntentId:_("stripe_payment_intent_id"),stripeInvoiceId:_("stripe_invoice_id"),stripeChargeId:_("stripe_charge_id"),amountCents:Ze("amount_cents").notNull(),currency:_("currency").notNull().default("BRL"),status:ug("status").notNull(),description:_("description"),receiptUrl:_("receipt_url"),invoicePdf:_("invoice_pdf"),failureCode:_("failure_code"),failureMessage:_("failure_message"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()});var _e=he("transaction_categories",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),name:_("name").notNull(),color:_("color").default("#6B7280"),icon:_("icon").default("circle"),isSystem:oe("is_system").default(!1),parentId:_("parent_id"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),q=he("transactions",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),accountId:_("account_id").references(()=>H.id,{onDelete:"set null"}),categoryId:_("category_id").references(()=>_e.id,{onDelete:"set null"}),amount:Ne("amount",{precision:15,scale:2}).notNull(),originalAmount:Ne("original_amount",{precision:15,scale:2}),currency:_("currency").default("BRL"),description:_("description").notNull(),merchantName:_("merchant_name"),transactionDate:O("transaction_date",{withTimezone:!0}).notNull(),postedDate:O("posted_date",{withTimezone:!0}),transactionType:_("transaction_type").notNull(),paymentMethod:_("payment_method"),status:_("status").default("posted"),isRecurring:oe("is_recurring").default(!1),recurringRule:Re("recurring_rule"),tags:_("tags").array(),notes:_("notes"),attachments:_("attachments").array(),confidenceScore:Ne("confidence_score",{precision:3,scale:2}),isCategorized:oe("is_categorized").default(!1),isManualEntry:oe("is_manual_entry").default(!1),externalId:_("external_id"),externalSource:_("external_source"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),lt=he("transaction_schedules",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),accountId:_("account_id").references(()=>H.id,{onDelete:"set null"}),categoryId:_("category_id").references(()=>_e.id,{onDelete:"set null"}),amount:Ne("amount",{precision:15,scale:2}).notNull(),description:_("description").notNull(),recipientName:_("recipient_name"),recipientAccount:_("recipient_account"),recipientPixKey:_("recipient_pix_key"),scheduledDate:Ht("scheduled_date").notNull(),recurrenceRule:_("recurrence_rule"),isActive:oe("is_active").default(!0),autoExecute:oe("auto_execute").default(!1),notificationSent:oe("notification_sent").default(!1),executed:oe("executed").default(!1),executedTransactionId:_("executed_transaction_id").references(()=>q.id),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var GI=Tt("boleto_status",["pending","paid","overdue","cancelled","scheduled"]),nn=he("boletos",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),barcode:_("barcode").unique().notNull(),lineIdDigitable:_("line_id_digitable").unique().notNull(),amount:Ne("amount",{precision:15,scale:2}).notNull(),dueDate:Ht("due_date").notNull(),beneficiaryName:_("beneficiary_name").notNull(),beneficiaryCnpj:_("beneficiary_cnpj"),description:_("description"),status:_("status").default("pending"),paymentDate:O("payment_date",{withTimezone:!0}),paidAmount:Ne("paid_amount",{precision:15,scale:2}),paidWith:_("paid_with"),transactionId:_("transaction_id").references(()=>q.id),fineAmount:Ne("fine_amount",{precision:15,scale:2}).default("0"),interestAmount:Ne("interest_amount",{precision:15,scale:2}).default("0"),discountAmount:Ne("discount_amount",{precision:15,scale:2}).default("0"),pdfUrl:_("pdf_url"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),oo=he("boleto_payments",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),boletoId:_("boleto_id").references(()=>nn.id,{onDelete:"cascade"}),amount:Ne("amount",{precision:15,scale:2}).notNull(),paymentDate:O("payment_date",{withTimezone:!0}).defaultNow(),paymentMethod:_("payment_method").notNull(),transactionId:_("transaction_id").references(()=>q.id),status:_("status").default("processing"),externalId:_("external_id"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()});var Fo=he("event_types",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:_("name").unique().notNull(),description:_("description"),color:_("color").default("#3B82F6"),icon:_("icon").default("calendar"),isSystem:oe("is_system").default(!0),defaultReminderHours:Ze("default_reminder_hours").default(24),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Ue=he("financial_events",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),accountId:_("account_id").references(()=>H.id,{onDelete:"set null"}),categoryId:_("category_id").references(()=>_e.id,{onDelete:"set null"}),eventTypeId:_("event_type_id").references(()=>Fo.id,{onDelete:"set null"}),title:_("title").notNull(),description:_("description"),amount:Ne("amount",{precision:15,scale:2}).notNull(),status:_("status").notNull().default("pending"),startDate:O("start_date",{withTimezone:!0}).notNull(),endDate:O("end_date",{withTimezone:!0}).notNull(),allDay:oe("all_day").default(!1),color:_("color").notNull().default("blue"),icon:_("icon"),isIncome:oe("is_income").default(!1),isCompleted:oe("is_completed").default(!1),isRecurring:oe("is_recurring").default(!1),recurrenceRule:_("recurrence_rule"),parentEventId:_("parent_event_id"),location:_("location"),notes:_("notes"),dueDate:Ht("due_date"),completedAt:O("completed_at",{withTimezone:!0}),priority:_("priority").default("normal"),tags:_("tags").array(),attachments:_("attachments").array(),brazilianEventType:_("brazilian_event_type"),installmentInfo:Re("installment_info"),merchantCategory:_("merchant_category"),metadata:Re("metadata"),transactionId:_("transaction_id").references(()=>q.id,{onDelete:"set null"}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),io=he("event_reminders",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),eventId:_("event_id").references(()=>Ue.id,{onDelete:"cascade"}),remindAt:O("remind_at",{withTimezone:!0}).notNull(),reminderType:_("reminder_type").default("notification"),message:_("message"),isSent:oe("is_sent").default(!1),sentAt:O("sent_at",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var KI=Tt("payment_method_type",["PIX","BANK_ACCOUNT","BOLETO"]),ye=he("contacts",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),name:_("name").notNull(),email:_("email"),phone:_("phone"),cpf:_("cpf"),cnpj:_("cnpj"),notes:_("notes"),isFavorite:oe("is_favorite").default(!1),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Di=he("contact_payment_methods",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),contactId:_("contact_id").references(()=>ye.id,{onDelete:"cascade"}),methodType:_("method_type").notNull(),methodDetails:Re("method_details").notNull(),isDefault:oe("is_default").default(!1),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var Fl=Tt("consent_type",["data_processing","marketing","analytics","third_party","third_party_sharing","voice_data","voice_recording","biometric","financial_data","location","open_banking"]),lg=Tt("collection_method",["signup","settings","settings_toggle","prompt","api","import","explicit_form","terms_acceptance","voice_command"]),dg=Tt("deletion_request_type",["full_account","full_deletion","specific_data","anonymization","partial_deletion","consent_withdrawal"]),pg=Tt("deletion_request_status",["pending","verified","approved","processing","completed","rejected","cancelled"]),mg=Tt("export_request_type",["full_data","full_export","transactions","profile","consents","audit_logs","financial_only","voice_commands","specific_period"]),fg=Tt("export_format",["json","csv","pdf"]),hg=Tt("export_status",["pending","processing","completed","failed","expired"]),gg=Tt("limit_type",["pix_daily","pix_daytime","pix_nighttime","pix_transaction","pix_total_daily","boleto_daily","ted_daily","transfer_daily","withdrawal_daily","total_daily","total_monthly"]),yg=Tt("compliance_event_type",["consent_granted","consent_revoked","data_export_requested","data_export_completed","data_deletion_requested","data_deletion_completed","data_accessed","data_modified","limit_updated","policy_acknowledged"]),dr=he("consent_templates",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),consentType:Fl("consent_type").notNull(),version:_("version").notNull().default("1.0"),titlePt:_("title_pt").notNull(),descriptionPt:_("description_pt").notNull(),fullTextPt:_("full_text_pt").notNull(),titleEn:_("title_en"),descriptionEn:_("description_en"),fullTextEn:_("full_text_en"),isMandatory:oe("is_mandatory").default(!1),isActive:oe("is_active").default(!0),legalBasis:_("legal_basis"),effectiveFrom:O("effective_from",{withTimezone:!0}).defaultNow(),effectiveUntil:O("effective_until",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Qe=he("lgpd_consents",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),consentType:Fl("consent_type").notNull(),purpose:_("purpose").notNull(),legalBasis:_("legal_basis").notNull(),granted:oe("granted").notNull().default(!1),grantedAt:O("granted_at",{withTimezone:!0}),revokedAt:O("revoked_at",{withTimezone:!0}),consentVersion:_("consent_version").notNull(),consentTextHash:_("consent_text_hash"),collectionMethod:lg("collection_method").notNull(),ipAddress:_r("ip_address"),userAgent:_("user_agent"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()},e=>[Gh("lgpd_consents_user_type_version_idx").on(e.userId,e.consentType,e.consentVersion)]),Bl=he("data_retention_policies",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),dataType:_("data_type").notNull().unique(),description:_("description"),descriptionPt:_("description_pt"),retentionMonths:Ze("retention_months").notNull(),retentionPeriodLabel:_("retention_period_label"),autoDelete:oe("auto_delete").default(!1),deletionMethod:_("deletion_method").default("hard_delete"),legalHold:oe("legal_hold").default(!1),legalBasis:_("legal_basis"),legalRequirement:oe("legal_requirement").default(!1),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Xt=he("data_deletion_requests",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),requestType:dg("request_type").notNull(),scope:Re("scope").default({}),reason:_("reason"),status:pg("status").default("pending"),verificationCode:_("verification_code"),verifiedAt:O("verified_at",{withTimezone:!0}),reviewDeadline:O("review_deadline",{withTimezone:!0}),processedAt:O("processed_at",{withTimezone:!0}),processedBy:_("processed_by"),processingNotes:_("processing_notes"),legalHold:oe("legal_hold").default(!1),legalHoldReason:_("legal_hold_reason"),ipAddress:_r("ip_address"),userAgent:_("user_agent"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Ur=he("lgpd_export_requests",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),requestType:mg("request_type").notNull(),format:fg("format").default("json"),dateFrom:Ht("date_from"),dateTo:Ht("date_to"),status:hg("status").default("pending"),processedAt:O("processed_at",{withTimezone:!0}),downloadUrl:_("download_url"),downloadExpiresAt:O("download_expires_at",{withTimezone:!0}),fileSizeBytes:Ze("file_size_bytes"),errorMessage:_("error_message"),retryCount:Ze("retry_count").default(0),requestedVia:_("requested_via").default("app"),ipAddress:_r("ip_address"),userAgent:_("user_agent"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Ft=he("transaction_limits",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),limitType:gg("limit_type").notNull(),dailyLimit:Ne("daily_limit",{precision:15,scale:2}).notNull(),transactionLimit:Ne("transaction_limit",{precision:15,scale:2}),monthlyLimit:Ne("monthly_limit",{precision:15,scale:2}),currentDailyUsed:Ne("current_daily_used",{precision:15,scale:2}).default("0"),currentMonthlyUsed:Ne("current_monthly_used",{precision:15,scale:2}).default("0"),lastResetAt:O("last_reset_at",{withTimezone:!0}).defaultNow(),nighttimeLimit:Ne("nighttime_limit",{precision:15,scale:2}),nighttimeStart:_("nighttime_start").default("20:00"),nighttimeEnd:_("nighttime_end").default("06:00"),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()},e=>[Gh("transaction_limits_user_type_idx").on(e.userId,e.limitType)]),pr=he("compliance_audit_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"set null"}),eventType:yg("event_type").notNull(),resourceType:_("resource_type").notNull(),resourceId:_("resource_id"),description:_("description"),metadata:Re("metadata").default({}),previousState:Re("previous_state"),newState:Re("new_state"),ipAddress:_r("ip_address"),userAgent:_("user_agent"),sessionId:_("session_id"),retentionUntil:O("retention_until",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),zi=he("legal_holds",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}).notNull(),reason:_("reason").notNull(),description:_("description"),referenceNumber:_("reference_number"),dataTypes:Re("data_types").default([]),allData:oe("all_data").default(!1),active:oe("active").default(!0),startedAt:O("started_at",{withTimezone:!0}).defaultNow(),expiresAt:O("expires_at",{withTimezone:!0}),releasedAt:O("released_at",{withTimezone:!0}),releasedBy:_("released_by"),releaseReason:_("release_reason"),createdBy:_("created_by").notNull(),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var Cn=he("notifications",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),title:_("title").notNull(),message:_("message").notNull(),type:_("type").notNull(),category:_("category"),priority:_("priority").default("normal"),isRead:oe("is_read").default(!1),readAt:O("read_at",{withTimezone:!0}),actionUrl:_("action_url"),actionText:_("action_text"),metadata:Re("metadata"),expiresAt:O("expires_at",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Mi=he("alert_rules",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),ruleName:_("rule_name").notNull(),ruleType:_("rule_type").notNull(),conditions:Re("conditions").notNull(),actions:Re("actions").notNull(),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Ui=he("notification_logs",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),notificationId:_("notification_id").references(()=>Cn.id,{onDelete:"cascade"}),deliveryMethod:_("delivery_method").notNull(),status:_("status").notNull(),sentAt:O("sent_at",{withTimezone:!0}).defaultNow(),deliveredAt:O("delivered_at",{withTimezone:!0}),errorMessage:_("error_message"),externalId:_("external_id"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()});var JI=Tt("pix_key_type",["CPF","CNPJ","EMAIL","PHONE","RANDOM"]),WI=Tt("pix_transaction_status",["pending","processing","completed","failed","cancelled","reversed"]),QI=Tt("pix_transaction_type_enum",["sent","received","scheduled"]),qi=he("pix_keys",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),keyType:_("key_type").notNull(),keyValue:_("key_value").notNull(),keyName:_("key_name").notNull(),bankName:_("bank_name"),isFavorite:oe("is_favorite").default(!1),isActive:oe("is_active").default(!0),verificationStatus:_("verification_status").default("pending"),lastUsed:O("last_used",{withTimezone:!0}),usageCount:Ze("usage_count").default(0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),On=he("pix_qr_codes",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),qrCodeData:_("qr_code_data").notNull(),pixCopyPaste:_("pix_copy_paste").notNull(),amount:Ne("amount",{precision:15,scale:2}),description:_("description"),recipientName:_("recipient_name"),recipientPixKey:_("recipient_pix_key"),expiresAt:O("expires_at",{withTimezone:!0}),isActive:oe("is_active").default(!0),isSingleUse:oe("is_single_use").default(!1),usageCount:Ze("usage_count").default(0),maxUsage:Ze("max_usage"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),on=he("pix_transactions",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),transactionId:_("transaction_id").references(()=>q.id,{onDelete:"set null"}),endToEndId:_("end_to_end_id").unique(),pixKey:_("pix_key").notNull(),pixKeyType:_("pix_key_type").notNull(),recipientName:_("recipient_name").notNull(),recipientDocument:_("recipient_document"),recipientBank:_("recipient_bank"),amount:Ne("amount",{precision:15,scale:2}).notNull(),description:_("description"),transactionDate:O("transaction_date",{withTimezone:!0}).notNull(),status:_("status").default("pending"),transactionType:_("transaction_type").default("sent"),scheduledFor:O("scheduled_for",{withTimezone:!0}),processedAt:O("processed_at",{withTimezone:!0}),qrCodeId:_("qr_code_id").references(()=>On.id),externalId:_("external_id"),errorMessage:_("error_message"),feeAmount:Ne("fee_amount",{precision:15,scale:2}).default("0"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()});var Li=he("voice_commands",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),commandText:_("command_text").notNull(),audioFileUrl:_("audio_file_url"),intent:_("intent").notNull(),intentConfidence:Ne("intent_confidence",{precision:3,scale:2}),entities:Re("entities"),responseText:_("response_text"),responseAudioUrl:_("response_audio_url"),processingTimeMs:Ze("processing_time_ms"),status:_("status").default("processed"),errorMessage:_("error_message"),context:Re("context"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),XI=he("command_intents",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),intentName:_("intent_name").unique().notNull(),description:_("description"),examplePhrases:_("example_phrases").array(),requiredEntities:_("required_entities").array(),actionHandler:_("action_handler"),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Mt=he("ai_insights",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),insightType:_("insight_type").notNull(),title:_("title").notNull(),description:_("description").notNull(),recommendation:_("recommendation"),impactLevel:_("impact_level").default("medium"),categoryId:_("category_id").references(()=>_e.id),data:Re("data"),isRead:oe("is_read").default(!1),isActioned:oe("is_actioned").default(!1),expiresAt:O("expires_at",{withTimezone:!0}),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),ao=he("spending_patterns",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),categoryId:_("category_id").references(()=>_e.id),periodStart:Ht("period_start").notNull(),periodEnd:Ht("period_end").notNull(),periodType:_("period_type").notNull(),totalAmount:Ne("total_amount",{precision:15,scale:2}).notNull(),transactionCount:Ze("transaction_count").notNull(),averageTransaction:Ne("average_transaction",{precision:15,scale:2}),trendPercentage:Ne("trend_percentage",{precision:5,scale:2}),patternData:Re("pattern_data"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),so=he("budget_categories",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),categoryId:_("category_id").references(()=>_e.id,{onDelete:"cascade"}),budgetAmount:Ne("budget_amount",{precision:15,scale:2}).notNull(),periodType:_("period_type").notNull(),alertThreshold:Ne("alert_threshold",{precision:5,scale:2}).default("80"),isActive:oe("is_active").default(!0),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),an=he("chat_sessions",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),title:_("title"),isActive:oe("is_active").default(!0),metadata:Re("metadata"),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Fi=he("chat_messages",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:_("session_id").references(()=>an.id,{onDelete:"cascade"}),role:_("role").notNull(),content:_("content").notNull(),attachments:Re("attachments"),context:Re("context"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()}),Bi=he("voice_transcriptions",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:_("user_id").references(()=>R.id,{onDelete:"cascade"}),audioStoragePath:_("audio_storage_path").notNull(),transcript:_("transcript").notNull(),confidenceScore:Ne("confidence_score",{precision:3,scale:2}),language:_("language").notNull(),processingTimeMs:Ze("processing_time_ms").notNull(),expiresAt:O("expires_at",{withTimezone:!0}).notNull(),createdAt:O("created_at",{withTimezone:!0}).defaultNow(),updatedAt:O("updated_at",{withTimezone:!0}).defaultNow()}),Oae=he("chat_context_snapshots",{id:_("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),conversationId:_("conversation_id").references(()=>an.id,{onDelete:"cascade"}),recentTransactions:Re("recent_transactions"),accountBalances:Re("account_balances"),upcomingEvents:Re("upcoming_events"),userPreferences:Re("user_preferences"),createdAt:O("created_at",{withTimezone:!0}).defaultNow()});var YI=Ie(R,({one:e,many:t})=>({preferences:e(lr,{fields:[R.id],references:[lr.userId]}),security:e(qo,{fields:[R.id],references:[qo.userId]}),bankAccounts:t(H),transactionCategories:t(_e),transactions:t(q),transactionSchedules:t(lt),financialEvents:t(Ue),eventReminders:t(io),pixKeys:t(qi),pixQrCodes:t(On),pixTransactions:t(on),contacts:t(ye),boletos:t(nn),voiceCommands:t(Li),voiceTranscriptions:t(Bi),aiInsights:t(Mt),spendingPatterns:t(ao),budgetCategories:t(so),chatSessions:t(an),notifications:t(Cn),alertRules:t(Mi),auditLogs:t(ro),errorLogs:t(Lo),userSessions:t(Oi),lgpdConsentLogs:t(Ri),dataExportRequests:t(Ni),bankSyncLogs:t(no),lgpdConsents:t(Qe),dataDeletionRequests:t(Xt),lgpdExportRequests:t(Ur),transactionLimits:t(Ft),complianceAuditLogs:t(pr),legalHolds:t(zi),subscriptions:t(Ce),paymentHistory:t(Et)})),e0=Ie(lr,({one:e})=>({user:e(R,{fields:[lr.userId],references:[R.id]})})),t0=Ie(qo,({one:e})=>({user:e(R,{fields:[qo.userId],references:[R.id]})})),r0=Ie(H,({one:e,many:t})=>({user:e(R,{fields:[H.userId],references:[R.id]}),balanceHistory:t(ji),syncLogs:t(no),transactions:t(q),transactionSchedules:t(lt),financialEvents:t(Ue)})),n0=Ie(ji,({one:e})=>({account:e(H,{fields:[ji.accountId],references:[H.id]})})),o0=Ie(no,({one:e})=>({user:e(R,{fields:[no.userId],references:[R.id]}),account:e(H,{fields:[no.accountId],references:[H.id]})})),i0=Ie(_e,({one:e,many:t})=>({user:e(R,{fields:[_e.userId],references:[R.id]}),parent:e(_e,{fields:[_e.parentId],references:[_e.id],relationName:"categoryParent"}),children:t(_e,{relationName:"categoryParent"}),transactions:t(q),transactionSchedules:t(lt),financialEvents:t(Ue),aiInsights:t(Mt),spendingPatterns:t(ao),budgetCategories:t(so)})),a0=Ie(q,({one:e,many:t})=>({user:e(R,{fields:[q.userId],references:[R.id]}),account:e(H,{fields:[q.accountId],references:[H.id]}),category:e(_e,{fields:[q.categoryId],references:[_e.id]}),pixTransactions:t(on),boletoPayments:t(oo),financialEvents:t(Ue)})),s0=Ie(lt,({one:e})=>({user:e(R,{fields:[lt.userId],references:[R.id]}),account:e(H,{fields:[lt.accountId],references:[H.id]}),category:e(_e,{fields:[lt.categoryId],references:[_e.id]}),executedTransaction:e(q,{fields:[lt.executedTransactionId],references:[q.id]})})),c0=Ie(Fo,({many:e})=>({financialEvents:e(Ue)})),u0=Ie(Ue,({one:e,many:t})=>({user:e(R,{fields:[Ue.userId],references:[R.id]}),account:e(H,{fields:[Ue.accountId],references:[H.id]}),category:e(_e,{fields:[Ue.categoryId],references:[_e.id]}),eventType:e(Fo,{fields:[Ue.eventTypeId],references:[Fo.id]}),parentEvent:e(Ue,{fields:[Ue.parentEventId],references:[Ue.id],relationName:"eventParent"}),childEvents:t(Ue,{relationName:"eventParent"}),transaction:e(q,{fields:[Ue.transactionId],references:[q.id]}),reminders:t(io)})),l0=Ie(io,({one:e})=>({user:e(R,{fields:[io.userId],references:[R.id]}),event:e(Ue,{fields:[io.eventId],references:[Ue.id]})})),d0=Ie(qi,({one:e})=>({user:e(R,{fields:[qi.userId],references:[R.id]})})),p0=Ie(On,({one:e,many:t})=>({user:e(R,{fields:[On.userId],references:[R.id]}),pixTransactions:t(on)})),m0=Ie(on,({one:e})=>({user:e(R,{fields:[on.userId],references:[R.id]}),transaction:e(q,{fields:[on.transactionId],references:[q.id]}),qrCode:e(On,{fields:[on.qrCodeId],references:[On.id]})})),f0=Ie(ye,({one:e,many:t})=>({user:e(R,{fields:[ye.userId],references:[R.id]}),paymentMethods:t(Di)})),h0=Ie(Di,({one:e})=>({contact:e(ye,{fields:[Di.contactId],references:[ye.id]})})),g0=Ie(nn,({one:e,many:t})=>({user:e(R,{fields:[nn.userId],references:[R.id]}),transaction:e(q,{fields:[nn.transactionId],references:[q.id]}),payments:t(oo)})),y0=Ie(oo,({one:e})=>({boleto:e(nn,{fields:[oo.boletoId],references:[nn.id]}),transaction:e(q,{fields:[oo.transactionId],references:[q.id]})})),v0=Ie(Li,({one:e})=>({user:e(R,{fields:[Li.userId],references:[R.id]})})),_0=Ie(Bi,({one:e})=>({user:e(R,{fields:[Bi.userId],references:[R.id]})})),b0=Ie(Mt,({one:e})=>({user:e(R,{fields:[Mt.userId],references:[R.id]}),category:e(_e,{fields:[Mt.categoryId],references:[_e.id]})})),x0=Ie(ao,({one:e})=>({user:e(R,{fields:[ao.userId],references:[R.id]}),category:e(_e,{fields:[ao.categoryId],references:[_e.id]})})),w0=Ie(so,({one:e})=>({user:e(R,{fields:[so.userId],references:[R.id]}),category:e(_e,{fields:[so.categoryId],references:[_e.id]})})),S0=Ie(an,({one:e,many:t})=>({user:e(R,{fields:[an.userId],references:[R.id]}),messages:t(Fi)})),T0=Ie(Fi,({one:e})=>({session:e(an,{fields:[Fi.sessionId],references:[an.id]})})),I0=Ie(Cn,({one:e,many:t})=>({user:e(R,{fields:[Cn.userId],references:[R.id]}),logs:t(Ui)})),E0=Ie(Mi,({one:e})=>({user:e(R,{fields:[Mi.userId],references:[R.id]})})),k0=Ie(Ui,({one:e})=>({notification:e(Cn,{fields:[Ui.notificationId],references:[Cn.id]})})),P0=Ie(ro,({one:e})=>({user:e(R,{fields:[ro.userId],references:[R.id]})})),$0=Ie(Lo,({one:e})=>({user:e(R,{fields:[Lo.userId],references:[R.id]}),resolvedByUser:e(R,{fields:[Lo.resolvedBy],references:[R.id],relationName:"resolvedByUser"})})),A0=Ie(Oi,({one:e})=>({user:e(R,{fields:[Oi.userId],references:[R.id]})})),C0=Ie(Ri,({one:e})=>({user:e(R,{fields:[Ri.userId],references:[R.id]})})),O0=Ie(Ni,({one:e})=>({user:e(R,{fields:[Ni.userId],references:[R.id]})})),R0=Ie(dr,({many:e})=>({consents:e(Qe)})),N0=Ie(Qe,({one:e})=>({user:e(R,{fields:[Qe.userId],references:[R.id]})})),j0=Ie(Bl,()=>({})),D0=Ie(Xt,({one:e})=>({user:e(R,{fields:[Xt.userId],references:[R.id]})})),z0=Ie(Ur,({one:e})=>({user:e(R,{fields:[Ur.userId],references:[R.id]})})),M0=Ie(Ft,({one:e})=>({user:e(R,{fields:[Ft.userId],references:[R.id]})})),U0=Ie(pr,({one:e})=>({user:e(R,{fields:[pr.userId],references:[R.id]})})),q0=Ie(zi,({one:e})=>({user:e(R,{fields:[zi.userId],references:[R.id]})})),L0=Ie(Qt,({many:e})=>({subscriptions:e(Ce)})),F0=Ie(Ce,({one:e,many:t})=>({user:e(R,{fields:[Ce.userId],references:[R.id]}),plan:e(Qt,{fields:[Ce.planId],references:[Qt.id]}),paymentHistory:t(Et)})),B0=Ie(Et,({one:e})=>({user:e(R,{fields:[Et.userId],references:[R.id]}),subscription:e(Ce,{fields:[Et.subscriptionId],references:[Ce.id]})}));var Z0=a(()=>{let e=process.env.DATABASE_URL;if(!e)throw new Error("DATABASE_URL environment variable is not set");return e},"getPooledDatabaseUrl"),CM=a(()=>{let e=process.env.DATABASE_URL_UNPOOLED;return e||(console.warn("DATABASE_URL_UNPOOLED not set, using DATABASE_URL as fallback"),Z0())},"getDirectDatabaseUrl"),OM=a(()=>{let e=$M(Z0());return Ul(e,{schema:Vl})},"createHttpClient"),vg=null,Rt=a(()=>(vg||(vg=OM()),vg),"getHttpClient");var V0=null,_g=null,RM=a(()=>(_g||(V0=new AM({connectionString:CM()}),_g=Ll(V0,{schema:Vl})),_g),"getPoolClient");var sn=typeof window>"u"&&process.env.DATABASE_URL?Rt():null,lse=typeof window>"u"&&process.env.DATABASE_URL_UNPOOLED?RM():null;async function H0(){let e=Date.now();try{return await sn.execute(I`SELECT 1`),{status:"connected",latencyMs:Date.now()-e}}catch(t){return{status:"disconnected",latencyMs:Date.now()-e,error:t instanceof Error?t.message:"Unknown error"}}}a(H0,"checkDatabaseHealth");function G0(e){e.get("/api/ping",t=>t.json({message:"pong",timestamp:new Date().toISOString(),version:"1.0.0"})),e.get("/api/status",async t=>{let r=await H0(),o=r.status==="connected";return t.json({services:{database:r.status,databaseLatencyMs:r.latencyMs,trpc:"connected",auth:"connected"},status:o?"operational":"degraded",timestamp:new Date().toISOString(),...r.error&&{errors:{database:r.error}}})}),e.get("/api/health",async t=>{let r=await H0();return r.status!=="connected"?t.json({healthy:!1,database:r,timestamp:new Date().toISOString()},503):t.json({healthy:!0,database:r,timestamp:new Date().toISOString()})})}a(G0,"setupApiRoutes");Zl();function K0(e){e.get("/api/health",t=>t.json({environment:$s.NODE_ENV,memory:process.memoryUsage?.()||{},service:"aegiswallet-server",status:"ok",timestamp:new Date().toISOString(),uptime:process.uptime?.()||0}))}a(K0,"setupHealthRoute");Zl();var aU=process.env.VERCEL==="1"||process.env.VERCEL==="true";function RE(e){aU||($s.IS_PRODUCTION?Promise.resolve().then(()=>(AE(),$E)).then(({serveStatic:t})=>{Promise.resolve().then(()=>(OE(),CE)).then(({htmlCache:r,staticAssetsCache:o})=>{e.use("/assets/*",o(),t({root:"./dist"})),e.use("/*.html",r(),t({root:"./dist"})),e.use("/*",r(),t({path:"./dist/index.html",rewriteRequestPath:a(n=>n,"rewriteRequestPath")}))})}):e.get("/*",t=>t.req.path.startsWith("/api/")?t.notFound():t.json({api:`http://localhost:${$s.PORT}`,frontend:"http://localhost:5173",message:"Development mode - Frontend served by Vite dev server",mode:"development"})))}a(RE,"setupStaticRoutes");var sU=300*1e3,NE=100,co=new Map;function cU(){if(co.size<=NE)return;let t=Array.from(co.entries()).sort((r,o)=>r[1].lastAccess-o[1].lastAccess).slice(0,co.size-NE);for(let[r]of t)co.delete(r)}a(cU,"evictOldestCacheEntries");var Kl=class{static{a(this,"FinancialContextService")}userId;constructor(t){this.userId=t}async getContext(t=!1){let r=this.userId,o=co.get(r),n=Date.now();if(!t&&o&&o.expiresAt>n)return o.lastAccess=n,o.context;let i=await this.buildContext();return co.set(r,{context:i,expiresAt:n+sU,lastAccess:n}),cU(),i}invalidateCache(){co.delete(this.userId)}static clearAllCache(){co.clear()}async buildContext(){let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0),[n,i,c,u,l]=await Promise.all([this.getAccountBalances(),this.getMonthlyTotals(r,o),this.getCategorySpending(r,o),this.getPendingAlerts(),this.getUpcomingPayments(30)]),d=n.reduce((m,f)=>m+Number(f.balance||0),0),p=n.reduce((m,f)=>m+Number(f.availableBalance||0),0);return{totalBalance:d,availableBalance:p,monthlyIncome:i.income,monthlyExpenses:i.expenses,topCategories:c,pendingAlerts:u,upcomingPayments:l,lastUpdated:t}}async getAccountBalances(){return await sn.select({id:H.id,balance:H.balance,availableBalance:H.availableBalance,institutionName:H.institutionName}).from(H).where(pe(A(H.userId,this.userId),A(H.isActive,!0)))}async getMonthlyTotals(t,r){let o=await sn.select({transactionType:q.transactionType,total:El(q.amount)}).from(q).where(pe(A(q.userId,this.userId),Ot(q.transactionDate,t),It(q.transactionDate,r))).groupBy(q.transactionType),n=0,i=0;for(let c of o){let u=Math.abs(Number(c.total||0));c.transactionType==="credit"?n+=u:c.transactionType==="debit"&&(i+=u)}return{income:n,expenses:i}}async getCategorySpending(t,r){let o=await sn.select({categoryId:q.categoryId,categoryName:_e.name,total:El(q.amount)}).from(q).leftJoin(_e,A(q.categoryId,_e.id)).where(pe(A(q.userId,this.userId),A(q.transactionType,"debit"),Ot(q.transactionDate,t),It(q.transactionDate,r))).groupBy(q.categoryId,_e.name).orderBy(ot(El(q.amount))).limit(10),n=o.reduce((i,c)=>i+Math.abs(Number(c.total||0)),0);return o.map(i=>({categoryId:i.categoryId||"uncategorized",categoryName:i.categoryName||"Sem categoria",amount:Math.abs(Number(i.total||0)),percentage:n>0?Math.round(Math.abs(Number(i.total||0))/n*100):0,trend:"stable"}))}async getPendingAlerts(){return(await sn.select({id:Mt.id,insightType:Mt.insightType,title:Mt.title,impactLevel:Mt.impactLevel,recommendation:Mt.recommendation}).from(Mt).where(pe(A(Mt.userId,this.userId),A(Mt.isRead,!1))).orderBy(ot(Mt.createdAt)).limit(5)).map(r=>({id:r.id,type:this.mapInsightTypeToAlertType(r.insightType),message:r.title,severity:r.impactLevel||"medium",actionable:!!r.recommendation}))}mapInsightTypeToAlertType(t){switch(this.normalizeInsightType(t)){case"budget_alert":return"budget_exceeded";case"warning":return"low_balance";case"spending_pattern":return"unusual_spending";case"opportunity":return"payment_due";default:return"unusual_spending"}}normalizeInsightType(t){return t.includes("_")?t:t.replace(/([A-Z])/g,"_$1").toLowerCase()}async getUpcomingPayments(t){let r=new Date,o=new Date;o.setDate(r.getDate()+t);let n=r.toISOString().split("T")[0],i=o.toISOString().split("T")[0];return(await sn.select({id:lt.id,description:lt.description,amount:lt.amount,scheduledDate:lt.scheduledDate,recurrenceRule:lt.recurrenceRule}).from(lt).where(pe(A(lt.userId,this.userId),A(lt.isActive,!0),A(lt.executed,!1),Ot(lt.scheduledDate,n),It(lt.scheduledDate,i))).orderBy(lt.scheduledDate).limit(10)).map(u=>({id:u.id,description:u.description,amount:Math.abs(Number(u.amount)),dueDate:new Date(u.scheduledDate),isRecurring:!!u.recurrenceRule}))}};function Vi(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}a(Vi,"formatBRL");function uU(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}a(uU,"formatDateBR");function lU(e){return{up:"\u2191 aumentando",down:"\u2193 diminuindo",stable:"\u2192 est\xE1vel"}[e]}a(lU,"translateTrend");function jE(e){let{totalBalance:t,availableBalance:r,monthlyIncome:o,monthlyExpenses:n,topCategories:i}=e,c=o-n,u=o>0?Math.round(c/o*100):0,l=i.slice(0,5).map((d,p)=>`${p+1}. **${d.categoryName}**: ${Vi(d.amount)} (${d.percentage}% do total, ${lU(d.trend)})`).join(`
`);return`
### Resumo Financeiro
- **Saldo Total**: ${Vi(t)}
- **Saldo Dispon\xEDvel**: ${Vi(r)}
- **Renda do M\xEAs**: ${Vi(o)}
- **Gastos do M\xEAs**: ${Vi(n)}
- **Economia do M\xEAs**: ${Vi(c)} (${u}% da renda)

### Top 5 Categorias de Gasto (M\xEAs Atual)
${l||"Nenhuma transa\xE7\xE3o registrada este m\xEAs."}

### \xDAltima Atualiza\xE7\xE3o
${uU(e.lastUpdated)}
`.trim()}a(jE,"buildFinancialContextBlock");function DE(e){if(e.length===0)return"\u2705 Nenhum alerta ativo no momento.";let t={low:"\u2139\uFE0F",medium:"\u26A0\uFE0F",high:"\u{1F6A8}"};return e.map(r=>`${t[r.severity]} [${r.severity.toUpperCase()}] ${r.message}`).join(`
`)}a(DE,"buildAlertsBlock");import{createClerkClient as dU,verifyToken as zE}from"@clerk/backend";var Jl=a(e=>e,"createMiddleware");function Rg(){let e=process.env.CLERK_SECRET_KEY,t=process.env.VITE_CLERK_PUBLISHABLE_KEY;if(!e)throw new Error("CLERK_SECRET_KEY environment variable is not set");return{secretKey:e,publishableKey:t}}a(Rg,"getClerkConfig");function ME(){let{secretKey:e}=Rg();return dU({secretKey:e})}a(ME,"getClerkClient");var UE=Jl(async(e,t)=>{let r=e.req.header("Authorization"),o=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null,n=e.get("requestId")||"unknown",i=e.req.header("X-Forwarded-For")||e.req.header("X-Real-IP")||"unknown";if(!o)return k.warn("Authentication failed: No token provided",{ip:i,method:e.req.method,path:e.req.path,requestId:n,userAgent:e.req.header("User-Agent")}),e.json({code:"AUTH_REQUIRED",error:"Authentication required"},401);try{let{secretKey:c}=Rg(),u=ME(),l=await zE(o,{secretKey:c});if(!l?.sub)return k.warn("Authentication failed: Invalid token",{ip:i,method:e.req.method,path:e.req.path,requestId:n,userAgent:e.req.header("User-Agent")}),e.json({code:"INVALID_TOKEN",error:"Invalid authentication token"},401);let d=l.sub,p=await u.users.getUser(d),f={db:Rt(),clerkUser:p,user:{id:p.id,email:p.emailAddresses[0]?.emailAddress||"",fullName:`${p.firstName||""} ${p.lastName||""}`.trim()||null,role:p.publicMetadata?.role,metadata:p.publicMetadata}};e.set("auth",f),k.info("Authentication successful",{ip:i,method:e.req.method,path:e.req.path,requestId:n,userId:p.id}),await t()}catch(c){return k.error("Authentication error",{error:c instanceof Error?c.message:"Unknown error",ip:i,method:e.req.method,path:e.req.path,requestId:n,userAgent:e.req.header("User-Agent")}),e.json({code:"AUTH_ERROR",error:"Authentication failed"},500)}}),pU=Jl(async(e,t)=>{let r=e.req.header("Authorization"),o=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null;if(!o){await t();return}try{let{secretKey:n}=Rg(),i=ME(),c=await zE(o,{secretKey:n});if(!c?.sub){await t();return}let u=c.sub,l=await i.users.getUser(u),p={db:Rt(),clerkUser:l,user:{id:l.id,email:l.emailAddresses[0]?.emailAddress||"",fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||null,role:l.publicMetadata?.role,metadata:l.publicMetadata}};e.set("auth",p),await t()}catch{await t()}});function qE(e){let{windowMs:t,max:r,message:o="Too many requests"}=e,n=new Map;return Jl(async(i,c)=>{let l=i.get("auth")?.user.id||i.req.header("X-Forwarded-For")||i.req.header("X-Real-IP")||"unknown",d=Date.now(),p=n.get(l);if(!p||d>p.resetTime)n.set(l,{count:1,resetTime:d+t});else if(p.count++,p.count>r){let f=Math.ceil((p.resetTime-d)/1e3);return i.json({code:"RATE_LIMIT_EXCEEDED",details:{limit:r,windowMs:t,retryAfter:f},error:o},429)}let m=n.get(l);m&&(i.header("X-RateLimit-Limit",r.toString()),i.header("X-RateLimit-Remaining",Math.max(0,r-m.count).toString()),i.header("X-RateLimit-Reset",new Date(m.resetTime).toISOString())),await c()})}a(qE,"clerkUserRateLimitMiddleware");var X=UE;var ue=qE;var Ng=new ge;Ng.get("/",X,async e=>{let t=e.get("requestId");try{let{user:r}=e.get("auth"),o=r.id;if(!o)return e.json({code:"UNAUTHORIZED",error:"User not authenticated"},401);let n=e.req.query("refresh")==="true",c=await new Kl(o).getContext(n);return k.info("Financial context retrieved",{forceRefresh:n,requestId:t,userId:o}),e.json({context:c,formatted:{alertsBlock:DE(c.pendingAlerts),financialBlock:jE(c)},meta:{requestId:t,retrievedAt:new Date().toISOString()}})}catch(r){return k.error("Error fetching financial context",{error:r instanceof Error?r.message:"Unknown error",requestId:t}),e.json({code:"CONTEXT_ERROR",error:r instanceof Error?r.message:"Failed to fetch context"},500)}});var mU=/^[\w!#$%&'*.^`|~+-]+$/,fU=/^[ !#-:<-[\]-~]*$/,jg=a((e,t)=>{if(t&&e.indexOf(t)===-1)return{};let r=e.trim().split(";"),o={};for(let n of r){n=n.trim();let i=n.indexOf("=");if(i===-1)continue;let c=n.substring(0,i).trim();if(t&&t!==c||!mU.test(c))continue;let u=n.substring(i+1).trim();if(u.startsWith('"')&&u.endsWith('"')&&(u=u.slice(1,-1)),fU.test(u)&&(o[c]=u.indexOf("%")!==-1?gi(u,rs):u,t))break}return o},"parse");var LE=a((e,t,r)=>{let o=e.req.raw.headers.get("Cookie");if(typeof t=="string"){if(!o)return;let i=t;return r==="secure"?i="__Secure-"+t:r==="host"&&(i="__Host-"+t),jg(o,i)[i]}return o?jg(o):{}},"getCookie");var FE=a((e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),"bufferToFormData");var hU=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,gU=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,yU=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Dg=a((e,t)=>async(r,o)=>{let n={},i=r.req.header("Content-Type");switch(e){case"json":if(!i||!hU.test(i))break;try{n=await r.req.json()}catch{let u="Malformed JSON in request body";throw new el(400,{message:u})}break;case"form":{if(!i||!(gU.test(i)||yU.test(i)))break;let u;if(r.req.bodyCache.formData)u=await r.req.bodyCache.formData;else try{let d=await r.req.arrayBuffer();u=await FE(d,i),r.req.bodyCache.formData=u}catch(d){let p="Malformed FormData request.";throw p+=d instanceof Error?` ${d.message}`:` ${String(d)}`,new el(400,{message:p})}let l={};u.forEach((d,p)=>{p.endsWith("[]")?(l[p]??=[]).push(d):Array.isArray(l[p])?l[p].push(d):p in l?l[p]=[l[p],d]:l[p]=d}),n=l;break}case"query":n=Object.fromEntries(Object.entries(r.req.queries()).map(([u,l])=>l.length===1?[u,l[0]]:[u,l]));break;case"param":n=r.req.param();break;case"header":n=r.req.header();break;case"cookie":n=LE(r);break}let c=await t(n,r);return c instanceof Response?c:(r.req.addValidatedData(e,c),await o())},"validator");function vU(e,t,r,o){return Dg(e,async(n,i)=>{let c=n;if(e==="header"&&"_def"in t||e==="header"&&"_zod"in t){let l=Object.keys("in"in t?t.in.shape:t.shape),d=Object.fromEntries(l.map(p=>[p.toLowerCase(),p]));c=Object.fromEntries(Object.entries(n).map(([p,m])=>[d[p]||p,m]))}let u=o&&o.validationFunction?await o.validationFunction(t,c):await t.safeParseAsync(c);if(r){let l=await r({data:c,...u,target:e},i);if(l){if(l instanceof Response)return l;if("response"in l)return l.response}}return u.success?u.data:i.json(u,400)})}a(vU,"zValidatorFunction");var Ee=vU;var s={};$r(s,{$brand:()=>Wl,$input:()=>H_,$output:()=>Z_,NEVER:()=>zg,TimePrecision:()=>W_,ZodAny:()=>Ak,ZodArray:()=>Nk,ZodBase64:()=>mx,ZodBase64URL:()=>fx,ZodBigInt:()=>xc,ZodBigIntFormat:()=>yx,ZodBoolean:()=>bc,ZodCIDRv4:()=>dx,ZodCIDRv6:()=>px,ZodCUID:()=>ox,ZodCUID2:()=>ix,ZodCatch:()=>Yk,ZodCodec:()=>kx,ZodCustom:()=>tp,ZodCustomStringFormat:()=>vc,ZodDate:()=>Xd,ZodDefault:()=>Gk,ZodDiscriminatedUnion:()=>jk,ZodE164:()=>hx,ZodEmail:()=>tx,ZodEmoji:()=>rx,ZodEnum:()=>gc,ZodError:()=>JL,ZodFile:()=>Vk,ZodFirstPartyTypeKind:()=>Se,ZodFunction:()=>cP,ZodGUID:()=>Gd,ZodIPv4:()=>ux,ZodIPv6:()=>lx,ZodISODate:()=>Bd,ZodISODateTime:()=>Fd,ZodISODuration:()=>Zd,ZodISOTime:()=>Vd,ZodIntersection:()=>Dk,ZodIssueCode:()=>u2,ZodJWT:()=>gx,ZodKSUID:()=>cx,ZodLazy:()=>iP,ZodLiteral:()=>Bk,ZodMAC:()=>Sk,ZodMap:()=>Lk,ZodNaN:()=>tP,ZodNanoID:()=>nx,ZodNever:()=>Ok,ZodNonOptional:()=>Ix,ZodNull:()=>Pk,ZodNullable:()=>Hk,ZodNumber:()=>_c,ZodNumberFormat:()=>ia,ZodObject:()=>ep,ZodOptional:()=>Tx,ZodPipe:()=>Ex,ZodPrefault:()=>Jk,ZodPromise:()=>sP,ZodReadonly:()=>rP,ZodRealError:()=>hr,ZodRecord:()=>xx,ZodSet:()=>Fk,ZodString:()=>yc,ZodStringFormat:()=>Ye,ZodSuccess:()=>Xk,ZodSymbol:()=>Ek,ZodTemplateLiteral:()=>oP,ZodTransform:()=>Zk,ZodTuple:()=>Mk,ZodType:()=>$e,ZodULID:()=>ax,ZodURL:()=>Qd,ZodUUID:()=>Dn,ZodUndefined:()=>kk,ZodUnion:()=>_x,ZodUnknown:()=>Ck,ZodVoid:()=>Rk,ZodXID:()=>sx,_ZodString:()=>ex,_default:()=>Kk,_function:()=>e2,any:()=>N4,array:()=>Yd,base64:()=>y4,base64url:()=>v4,bigint:()=>$4,boolean:()=>Ik,catch:()=>eP,check:()=>t2,cidrv4:()=>h4,cidrv6:()=>g4,clone:()=>Yt,codec:()=>Q4,coerce:()=>Px,config:()=>kt,core:()=>jn,cuid:()=>s4,cuid2:()=>c4,custom:()=>r2,date:()=>D4,decode:()=>Zb,decodeAsync:()=>Gb,describe:()=>n2,discriminatedUnion:()=>L4,e164:()=>_4,email:()=>QL,emoji:()=>i4,encode:()=>Vb,encodeAsync:()=>Hb,endsWith:()=>ac,enum:()=>wx,file:()=>G4,flattenError:()=>Us,float32:()=>I4,float64:()=>E4,formatError:()=>qs,function:()=>e2,getErrorMap:()=>d2,globalRegistry:()=>er,gt:()=>Nn,gte:()=>fr,guid:()=>XL,hash:()=>T4,hex:()=>S4,hostname:()=>w4,httpUrl:()=>o4,includes:()=>oc,instanceof:()=>i2,int:()=>Yb,int32:()=>k4,int64:()=>A4,intersection:()=>zk,ipv4:()=>p4,ipv6:()=>f4,iso:()=>Hd,json:()=>s2,jwt:()=>b4,keyof:()=>z4,ksuid:()=>d4,lazy:()=>aP,length:()=>ra,literal:()=>H4,locales:()=>Qs,looseObject:()=>q4,lowercase:()=>rc,lt:()=>Rn,lte:()=>Rr,mac:()=>m4,map:()=>B4,maxLength:()=>ta,maxSize:()=>ea,meta:()=>o2,mime:()=>sc,minLength:()=>go,minSize:()=>Go,multipleOf:()=>Ho,nan:()=>W4,nanoid:()=>a4,nativeEnum:()=>Z4,negative:()=>Ib,never:()=>vx,nonnegative:()=>kb,nonoptional:()=>Qk,nonpositive:()=>Eb,normalize:()=>cc,null:()=>$k,nullable:()=>Jd,nullish:()=>K4,number:()=>Tk,object:()=>M4,optional:()=>Kd,overwrite:()=>cn,parse:()=>Lb,parseAsync:()=>Fb,partialRecord:()=>F4,pipe:()=>Wd,positive:()=>Tb,prefault:()=>Wk,preprocess:()=>c2,prettifyError:()=>Jg,promise:()=>Y4,property:()=>Pb,readonly:()=>nP,record:()=>qk,refine:()=>uP,regex:()=>tc,regexes:()=>Or,registry:()=>xd,safeDecode:()=>Jb,safeDecodeAsync:()=>Qb,safeEncode:()=>Kb,safeEncodeAsync:()=>Wb,safeParse:()=>Bb,safeParseAsync:()=>hc,set:()=>V4,setErrorMap:()=>l2,size:()=>ec,slugify:()=>pc,startsWith:()=>ic,strictObject:()=>U4,string:()=>Xb,stringFormat:()=>x4,stringbool:()=>a2,success:()=>J4,superRefine:()=>lP,symbol:()=>O4,templateLiteral:()=>X4,toJSONSchema:()=>fc,toLowerCase:()=>lc,toUpperCase:()=>dc,transform:()=>Sx,treeifyError:()=>Kg,trim:()=>uc,tuple:()=>Uk,uint32:()=>P4,uint64:()=>C4,ulid:()=>u4,undefined:()=>R4,union:()=>bx,unknown:()=>oa,uppercase:()=>nc,url:()=>n4,util:()=>Q,uuid:()=>YL,uuidv4:()=>e4,uuidv6:()=>t4,uuidv7:()=>r4,void:()=>j4,xid:()=>l4});var jn={};$r(jn,{$ZodAny:()=>Tv,$ZodArray:()=>$v,$ZodAsyncError:()=>qr,$ZodBase64:()=>fv,$ZodBase64URL:()=>hv,$ZodBigInt:()=>vd,$ZodBigIntFormat:()=>bv,$ZodBoolean:()=>Vs,$ZodCIDRv4:()=>dv,$ZodCIDRv6:()=>pv,$ZodCUID:()=>Yy,$ZodCUID2:()=>ev,$ZodCatch:()=>Hv,$ZodCheck:()=>Xe,$ZodCheckBigIntFormat:()=>$y,$ZodCheckEndsWith:()=>Ly,$ZodCheckGreaterThan:()=>dd,$ZodCheckIncludes:()=>Uy,$ZodCheckLengthEquals:()=>jy,$ZodCheckLessThan:()=>ld,$ZodCheckLowerCase:()=>zy,$ZodCheckMaxLength:()=>Ry,$ZodCheckMaxSize:()=>Ay,$ZodCheckMimeType:()=>By,$ZodCheckMinLength:()=>Ny,$ZodCheckMinSize:()=>Cy,$ZodCheckMultipleOf:()=>ky,$ZodCheckNumberFormat:()=>Py,$ZodCheckOverwrite:()=>Vy,$ZodCheckProperty:()=>Fy,$ZodCheckRegex:()=>Dy,$ZodCheckSizeEquals:()=>Oy,$ZodCheckStartsWith:()=>qy,$ZodCheckStringFormat:()=>Xi,$ZodCheckUpperCase:()=>My,$ZodCodec:()=>Zs,$ZodCustom:()=>e_,$ZodCustomStringFormat:()=>vv,$ZodDate:()=>Pv,$ZodDefault:()=>Fv,$ZodDiscriminatedUnion:()=>Cv,$ZodE164:()=>gv,$ZodEmail:()=>Jy,$ZodEmoji:()=>Qy,$ZodEncodeError:()=>uo,$ZodEnum:()=>Dv,$ZodError:()=>Ms,$ZodFile:()=>Mv,$ZodFunction:()=>Qv,$ZodGUID:()=>Gy,$ZodIPv4:()=>cv,$ZodIPv6:()=>uv,$ZodISODate:()=>iv,$ZodISODateTime:()=>ov,$ZodISODuration:()=>sv,$ZodISOTime:()=>av,$ZodIntersection:()=>Ov,$ZodJWT:()=>yv,$ZodKSUID:()=>nv,$ZodLazy:()=>Yv,$ZodLiteral:()=>zv,$ZodMAC:()=>lv,$ZodMap:()=>Nv,$ZodNaN:()=>Gv,$ZodNanoID:()=>Xy,$ZodNever:()=>Ev,$ZodNonOptional:()=>Vv,$ZodNull:()=>Sv,$ZodNullable:()=>Lv,$ZodNumber:()=>yd,$ZodNumberFormat:()=>_v,$ZodObject:()=>fk,$ZodObjectJIT:()=>Av,$ZodOptional:()=>qv,$ZodPipe:()=>Kv,$ZodPrefault:()=>Bv,$ZodPromise:()=>Xv,$ZodReadonly:()=>Jv,$ZodRealError:()=>mr,$ZodRecord:()=>Rv,$ZodRegistry:()=>Yi,$ZodSet:()=>jv,$ZodString:()=>Zo,$ZodStringFormat:()=>Ke,$ZodSuccess:()=>Zv,$ZodSymbol:()=>xv,$ZodTemplateLiteral:()=>Wv,$ZodTransform:()=>Uv,$ZodTuple:()=>bd,$ZodType:()=>ke,$ZodULID:()=>tv,$ZodURL:()=>Wy,$ZodUUID:()=>Ky,$ZodUndefined:()=>wv,$ZodUnion:()=>_d,$ZodUnknown:()=>Iv,$ZodVoid:()=>kv,$ZodXID:()=>rv,$brand:()=>Wl,$constructor:()=>$,$input:()=>H_,$output:()=>Z_,Doc:()=>Bs,JSONSchema:()=>bk,JSONSchemaGenerator:()=>mc,NEVER:()=>zg,TimePrecision:()=>W_,_any:()=>yb,_array:()=>$b,_base64:()=>Md,_base64url:()=>Ud,_bigint:()=>lb,_boolean:()=>cb,_catch:()=>FL,_check:()=>_k,_cidrv4:()=>Dd,_cidrv6:()=>zd,_coercedBigint:()=>db,_coercedBoolean:()=>ub,_coercedDate:()=>wb,_coercedNumber:()=>rb,_coercedString:()=>K_,_cuid:()=>$d,_cuid2:()=>Ad,_custom:()=>Cb,_date:()=>xb,_decode:()=>rd,_decodeAsync:()=>od,_default:()=>UL,_discriminatedUnion:()=>kL,_e164:()=>qd,_email:()=>wd,_emoji:()=>kd,_encode:()=>td,_encodeAsync:()=>nd,_endsWith:()=>ac,_enum:()=>RL,_file:()=>Ab,_float32:()=>ob,_float64:()=>ib,_gt:()=>Nn,_gte:()=>fr,_guid:()=>Xs,_includes:()=>oc,_int:()=>nb,_int32:()=>ab,_int64:()=>pb,_intersection:()=>PL,_ipv4:()=>Nd,_ipv6:()=>jd,_isoDate:()=>X_,_isoDateTime:()=>Q_,_isoDuration:()=>eb,_isoTime:()=>Y_,_jwt:()=>Ld,_ksuid:()=>Rd,_lazy:()=>HL,_length:()=>ra,_literal:()=>jL,_lowercase:()=>rc,_lt:()=>Rn,_lte:()=>Rr,_mac:()=>J_,_map:()=>CL,_max:()=>Rr,_maxLength:()=>ta,_maxSize:()=>ea,_mime:()=>sc,_min:()=>fr,_minLength:()=>go,_minSize:()=>Go,_multipleOf:()=>Ho,_nan:()=>Sb,_nanoid:()=>Pd,_nativeEnum:()=>NL,_negative:()=>Ib,_never:()=>_b,_nonnegative:()=>kb,_nonoptional:()=>qL,_nonpositive:()=>Eb,_normalize:()=>cc,_null:()=>gb,_nullable:()=>ML,_number:()=>tb,_optional:()=>zL,_overwrite:()=>cn,_parse:()=>Ki,_parseAsync:()=>Ji,_pipe:()=>BL,_positive:()=>Tb,_promise:()=>GL,_property:()=>Pb,_readonly:()=>VL,_record:()=>AL,_refine:()=>Ob,_regex:()=>tc,_safeDecode:()=>ad,_safeDecodeAsync:()=>cd,_safeEncode:()=>id,_safeEncodeAsync:()=>sd,_safeParse:()=>Wi,_safeParseAsync:()=>Qi,_set:()=>OL,_size:()=>ec,_slugify:()=>pc,_startsWith:()=>ic,_string:()=>G_,_stringFormat:()=>na,_stringbool:()=>Db,_success:()=>LL,_superRefine:()=>Rb,_symbol:()=>fb,_templateLiteral:()=>ZL,_toLowerCase:()=>lc,_toUpperCase:()=>dc,_transform:()=>DL,_trim:()=>uc,_tuple:()=>$L,_uint32:()=>sb,_uint64:()=>mb,_ulid:()=>Cd,_undefined:()=>hb,_union:()=>EL,_unknown:()=>vb,_uppercase:()=>nc,_url:()=>Ys,_uuid:()=>Sd,_uuidv4:()=>Td,_uuidv6:()=>Id,_uuidv7:()=>Ed,_void:()=>bb,_xid:()=>Od,clone:()=>Yt,config:()=>kt,decode:()=>HU,decodeAsync:()=>KU,describe:()=>Nb,encode:()=>ZU,encodeAsync:()=>GU,flattenError:()=>Us,formatError:()=>qs,globalConfig:()=>Cs,globalRegistry:()=>er,isValidBase64:()=>mv,isValidBase64URL:()=>lk,isValidJWT:()=>dk,locales:()=>Qs,meta:()=>jb,parse:()=>Yl,parseAsync:()=>ed,prettifyError:()=>Jg,regexes:()=>Or,registry:()=>xd,safeDecode:()=>WU,safeDecodeAsync:()=>XU,safeEncode:()=>JU,safeEncodeAsync:()=>QU,safeParse:()=>Wg,safeParseAsync:()=>Qg,toDotPath:()=>GE,toJSONSchema:()=>fc,treeifyError:()=>Kg,util:()=>Q,version:()=>Zy});var zg=Object.freeze({status:"aborted"});function $(e,t,r){function o(u,l){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:l,constr:c,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),t(u,l);let d=c.prototype,p=Object.keys(d);for(let m=0;m<p.length;m++){let f=p[m];f in u||(u[f]=d[f].bind(u))}}a(o,"init");let n=r?.Parent??Object;class i extends n{static{a(this,"Definition")}}Object.defineProperty(i,"name",{value:e});function c(u){var l;let d=r?.Parent?new i:this;o(d,u),(l=d._zod).deferred??(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return a(c,"_"),Object.defineProperty(c,"init",{value:o}),Object.defineProperty(c,Symbol.hasInstance,{value:a(u=>r?.Parent&&u instanceof r.Parent?!0:u?._zod?.traits?.has(e),"value")}),Object.defineProperty(c,"name",{value:e}),c}a($,"$constructor");var Wl=Symbol("zod_brand"),qr=class extends Error{static{a(this,"$ZodAsyncError")}constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},uo=class extends Error{static{a(this,"$ZodEncodeError")}constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Cs={};function kt(e){return e&&Object.assign(Cs,e),Cs}a(kt,"config");var Q={};$r(Q,{BIGINT_FORMAT_RANGES:()=>Gg,Class:()=>Ug,NUMBER_FORMAT_RANGES:()=>Hg,aborted:()=>ho,allowsEval:()=>Fg,assert:()=>SU,assertEqual:()=>_U,assertIs:()=>xU,assertNever:()=>wU,assertNotEqual:()=>bU,assignProp:()=>po,base64ToUint8Array:()=>VE,base64urlToUint8Array:()=>qU,cached:()=>Hi,captureStackTrace:()=>Xl,cleanEnum:()=>UU,cleanRegex:()=>Ns,clone:()=>Yt,cloneDef:()=>IU,createTransparentProxy:()=>CU,defineLazy:()=>je,esc:()=>Ql,escapeRegex:()=>Cr,extend:()=>NU,finalizeIssue:()=>wr,floatSafeRemainder:()=>qg,getElementAtPath:()=>EU,getEnumValues:()=>Rs,getLengthableOrigin:()=>zs,getParsedType:()=>AU,getSizableOrigin:()=>Ds,hexToUint8Array:()=>FU,isObject:()=>Bo,isPlainObject:()=>fo,issue:()=>Gi,joinValues:()=>N,jsonStringifyReplacer:()=>Zi,merge:()=>DU,mergeDefs:()=>mo,normalizeParams:()=>W,nullish:()=>lo,numKeys:()=>$U,objectClone:()=>TU,omit:()=>RU,optionalKeys:()=>Zg,partial:()=>zU,pick:()=>OU,prefixIssues:()=>xr,primitiveTypes:()=>Vg,promiseAllObject:()=>kU,propertyKeyTypes:()=>js,randomString:()=>PU,required:()=>MU,safeExtend:()=>jU,shallowClone:()=>Bg,slugify:()=>Lg,stringifyPrimitive:()=>G,uint8ArrayToBase64:()=>ZE,uint8ArrayToBase64url:()=>LU,uint8ArrayToHex:()=>BU,unwrapMessage:()=>Os});function _U(e){return e}a(_U,"assertEqual");function bU(e){return e}a(bU,"assertNotEqual");function xU(e){}a(xU,"assertIs");function wU(e){throw new Error}a(wU,"assertNever");function SU(e){}a(SU,"assert");function Rs(e){let t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,n])=>t.indexOf(+o)===-1).map(([o,n])=>n)}a(Rs,"getEnumValues");function N(e,t="|"){return e.map(r=>G(r)).join(t)}a(N,"joinValues");function Zi(e,t){return typeof t=="bigint"?t.toString():t}a(Zi,"jsonStringifyReplacer");function Hi(e){return{get value(){{let r=e();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}a(Hi,"cached");function lo(e){return e==null}a(lo,"nullish");function Ns(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}a(Ns,"cleanRegex");function qg(e,t){let r=(e.toString().split(".")[1]||"").length,o=t.toString(),n=(o.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(o)){let l=o.match(/\d?e-(\d?)/);l?.[1]&&(n=Number.parseInt(l[1]))}let i=r>n?r:n,c=Number.parseInt(e.toFixed(i).replace(".","")),u=Number.parseInt(t.toFixed(i).replace(".",""));return c%u/10**i}a(qg,"floatSafeRemainder");var BE=Symbol("evaluating");function je(e,t,r){let o;Object.defineProperty(e,t,{get(){if(o!==BE)return o===void 0&&(o=BE,o=r()),o},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}a(je,"defineLazy");function TU(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}a(TU,"objectClone");function po(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}a(po,"assignProp");function mo(...e){let t={};for(let r of e){let o=Object.getOwnPropertyDescriptors(r);Object.assign(t,o)}return Object.defineProperties({},t)}a(mo,"mergeDefs");function IU(e){return mo(e._zod.def)}a(IU,"cloneDef");function EU(e,t){return t?t.reduce((r,o)=>r?.[o],e):e}a(EU,"getElementAtPath");function kU(e){let t=Object.keys(e),r=t.map(o=>e[o]);return Promise.all(r).then(o=>{let n={};for(let i=0;i<t.length;i++)n[t[i]]=o[i];return n})}a(kU,"promiseAllObject");function PU(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}a(PU,"randomString");function Ql(e){return JSON.stringify(e)}a(Ql,"esc");function Lg(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}a(Lg,"slugify");var Xl="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Bo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}a(Bo,"isObject");var Fg=Hi(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function fo(e){if(Bo(e)===!1)return!1;let t=e.constructor;if(t===void 0||typeof t!="function")return!0;let r=t.prototype;return!(Bo(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}a(fo,"isPlainObject");function Bg(e){return fo(e)?{...e}:Array.isArray(e)?[...e]:e}a(Bg,"shallowClone");function $U(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}a($U,"numKeys");var AU=a(e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},"getParsedType"),js=new Set(["string","number","symbol"]),Vg=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Cr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(Cr,"escapeRegex");function Yt(e,t,r){let o=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(o._zod.parent=e),o}a(Yt,"clone");function W(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:a(()=>t,"error")};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:a(()=>t.error,"error")}:t}a(W,"normalizeParams");function CU(e){let t;return new Proxy({},{get(r,o,n){return t??(t=e()),Reflect.get(t,o,n)},set(r,o,n,i){return t??(t=e()),Reflect.set(t,o,n,i)},has(r,o){return t??(t=e()),Reflect.has(t,o)},deleteProperty(r,o){return t??(t=e()),Reflect.deleteProperty(t,o)},ownKeys(r){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,o){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,o)},defineProperty(r,o,n){return t??(t=e()),Reflect.defineProperty(t,o,n)}})}a(CU,"createTransparentProxy");function G(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}a(G,"stringifyPrimitive");function Zg(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}a(Zg,"optionalKeys");var Hg={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Gg={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function OU(e,t){let r=e._zod.def,o=mo(e._zod.def,{get shape(){let n={};for(let i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=r.shape[i])}return po(this,"shape",n),n},checks:[]});return Yt(e,o)}a(OU,"pick");function RU(e,t){let r=e._zod.def,o=mo(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return po(this,"shape",n),n},checks:[]});return Yt(e,o)}a(RU,"omit");function NU(e,t){if(!fo(t))throw new Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=mo(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return po(this,"shape",i),i},checks:[]});return Yt(e,n)}a(NU,"extend");function jU(e,t){if(!fo(t))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let o={...e._zod.def.shape,...t};return po(this,"shape",o),o},checks:e._zod.def.checks};return Yt(e,r)}a(jU,"safeExtend");function DU(e,t){let r=mo(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t._zod.def.shape};return po(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return Yt(e,r)}a(DU,"merge");function zU(e,t,r){let o=mo(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let c in r){if(!(c in n))throw new Error(`Unrecognized key: "${c}"`);r[c]&&(i[c]=e?new e({type:"optional",innerType:n[c]}):n[c])}else for(let c in n)i[c]=e?new e({type:"optional",innerType:n[c]}):n[c];return po(this,"shape",i),i},checks:[]});return Yt(t,o)}a(zU,"partial");function MU(e,t,r){let o=mo(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let c in r){if(!(c in i))throw new Error(`Unrecognized key: "${c}"`);r[c]&&(i[c]=new e({type:"nonoptional",innerType:n[c]}))}else for(let c in n)i[c]=new e({type:"nonoptional",innerType:n[c]});return po(this,"shape",i),i},checks:[]});return Yt(t,o)}a(MU,"required");function ho(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}a(ho,"aborted");function xr(e,t){return t.map(r=>{var o;return(o=r).path??(o.path=[]),r.path.unshift(e),r})}a(xr,"prefixIssues");function Os(e){return typeof e=="string"?e:e?.message}a(Os,"unwrapMessage");function wr(e,t,r){let o={...e,path:e.path??[]};if(!e.message){let n=Os(e.inst?._zod.def?.error?.(e))??Os(t?.error?.(e))??Os(r.customError?.(e))??Os(r.localeError?.(e))??"Invalid input";o.message=n}return delete o.inst,delete o.continue,t?.reportInput||delete o.input,o}a(wr,"finalizeIssue");function Ds(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}a(Ds,"getSizableOrigin");function zs(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}a(zs,"getLengthableOrigin");function Gi(...e){let[t,r,o]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:o}:{...t}}a(Gi,"issue");function UU(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}a(UU,"cleanEnum");function VE(e){let t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}a(VE,"base64ToUint8Array");function ZE(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}a(ZE,"uint8ArrayToBase64");function qU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return VE(t+r)}a(qU,"base64urlToUint8Array");function LU(e){return ZE(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}a(LU,"uint8ArrayToBase64url");function FU(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=Number.parseInt(t.slice(o,o+2),16);return r}a(FU,"hexToUint8Array");function BU(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}a(BU,"uint8ArrayToHex");var Ug=class{static{a(this,"Class")}constructor(...t){}};var HE=a((e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Zi,2),Object.defineProperty(e,"toString",{value:a(()=>e.message,"value"),enumerable:!1})},"initializer"),Ms=$("$ZodError",HE),mr=$("$ZodError",HE,{Parent:Error});function Us(e,t=r=>r.message){let r={},o=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):o.push(t(n));return{formErrors:o,fieldErrors:r}}a(Us,"flattenError");function qs(e,t=r=>r.message){let r={_errors:[]},o=a(n=>{for(let i of n.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(c=>o({issues:c}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let c=r,u=0;for(;u<i.path.length;){let l=i.path[u];u===i.path.length-1?(c[l]=c[l]||{_errors:[]},c[l]._errors.push(t(i))):c[l]=c[l]||{_errors:[]},c=c[l],u++}}},"processError");return o(e),r}a(qs,"formatError");function Kg(e,t=r=>r.message){let r={errors:[]},o=a((n,i=[])=>{var c,u;for(let l of n.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>o({issues:d},l.path));else if(l.code==="invalid_key")o({issues:l.issues},l.path);else if(l.code==="invalid_element")o({issues:l.issues},l.path);else{let d=[...i,...l.path];if(d.length===0){r.errors.push(t(l));continue}let p=r,m=0;for(;m<d.length;){let f=d[m],g=m===d.length-1;typeof f=="string"?(p.properties??(p.properties={}),(c=p.properties)[f]??(c[f]={errors:[]}),p=p.properties[f]):(p.items??(p.items=[]),(u=p.items)[f]??(u[f]={errors:[]}),p=p.items[f]),g&&p.errors.push(t(l)),m++}}},"processError");return o(e),r}a(Kg,"treeifyError");function GE(e){let t=[],r=e.map(o=>typeof o=="object"?o.key:o);for(let o of r)typeof o=="number"?t.push(`[${o}]`):typeof o=="symbol"?t.push(`[${JSON.stringify(String(o))}]`):/[^\w$]/.test(o)?t.push(`[${JSON.stringify(o)}]`):(t.length&&t.push("."),t.push(o));return t.join("")}a(GE,"toDotPath");function Jg(e){let t=[],r=[...e.issues].sort((o,n)=>(o.path??[]).length-(n.path??[]).length);for(let o of r)t.push(`\u2716 ${o.message}`),o.path?.length&&t.push(`  \u2192 at ${GE(o.path)}`);return t.join(`
`)}a(Jg,"prettifyError");var Ki=a(e=>(t,r,o,n)=>{let i=o?Object.assign(o,{async:!1}):{async:!1},c=t._zod.run({value:r,issues:[]},i);if(c instanceof Promise)throw new qr;if(c.issues.length){let u=new(n?.Err??e)(c.issues.map(l=>wr(l,i,kt())));throw Xl(u,n?.callee),u}return c.value},"_parse"),Yl=Ki(mr),Ji=a(e=>async(t,r,o,n)=>{let i=o?Object.assign(o,{async:!0}):{async:!0},c=t._zod.run({value:r,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){let u=new(n?.Err??e)(c.issues.map(l=>wr(l,i,kt())));throw Xl(u,n?.callee),u}return c.value},"_parseAsync"),ed=Ji(mr),Wi=a(e=>(t,r,o)=>{let n=o?{...o,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new qr;return i.issues.length?{success:!1,error:new(e??Ms)(i.issues.map(c=>wr(c,n,kt())))}:{success:!0,data:i.value}},"_safeParse"),Wg=Wi(mr),Qi=a(e=>async(t,r,o)=>{let n=o?Object.assign(o,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(c=>wr(c,n,kt())))}:{success:!0,data:i.value}},"_safeParseAsync"),Qg=Qi(mr),td=a(e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ki(e)(t,r,n)},"_encode"),ZU=td(mr),rd=a(e=>(t,r,o)=>Ki(e)(t,r,o),"_decode"),HU=rd(mr),nd=a(e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ji(e)(t,r,n)},"_encodeAsync"),GU=nd(mr),od=a(e=>async(t,r,o)=>Ji(e)(t,r,o),"_decodeAsync"),KU=od(mr),id=a(e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Wi(e)(t,r,n)},"_safeEncode"),JU=id(mr),ad=a(e=>(t,r,o)=>Wi(e)(t,r,o),"_safeDecode"),WU=ad(mr),sd=a(e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Qi(e)(t,r,n)},"_safeEncodeAsync"),QU=sd(mr),cd=a(e=>async(t,r,o)=>Qi(e)(t,r,o),"_safeDecodeAsync"),XU=cd(mr);var Or={};$r(Or,{base64:()=>my,base64url:()=>ud,bigint:()=>_y,boolean:()=>wy,browserEmail:()=>aq,cidrv4:()=>dy,cidrv6:()=>py,cuid:()=>Xg,cuid2:()=>Yg,date:()=>hy,datetime:()=>yy,domain:()=>uq,duration:()=>oy,e164:()=>fy,email:()=>ay,emoji:()=>sy,extendedDuration:()=>YU,guid:()=>iy,hex:()=>lq,hostname:()=>cq,html5Email:()=>nq,idnEmail:()=>iq,integer:()=>by,ipv4:()=>cy,ipv6:()=>uy,ksuid:()=>ry,lowercase:()=>Iy,mac:()=>ly,md5_base64:()=>pq,md5_base64url:()=>mq,md5_hex:()=>dq,nanoid:()=>ny,null:()=>Sy,number:()=>xy,rfc5322Email:()=>oq,sha1_base64:()=>hq,sha1_base64url:()=>gq,sha1_hex:()=>fq,sha256_base64:()=>vq,sha256_base64url:()=>_q,sha256_hex:()=>yq,sha384_base64:()=>xq,sha384_base64url:()=>wq,sha384_hex:()=>bq,sha512_base64:()=>Tq,sha512_base64url:()=>Iq,sha512_hex:()=>Sq,string:()=>vy,time:()=>gy,ulid:()=>ey,undefined:()=>Ty,unicodeEmail:()=>KE,uppercase:()=>Ey,uuid:()=>Vo,uuid4:()=>eq,uuid6:()=>tq,uuid7:()=>rq,xid:()=>ty});var Xg=/^[cC][^\s-]{8,}$/,Yg=/^[0-9a-z]+$/,ey=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ty=/^[0-9a-vA-V]{20}$/,ry=/^[A-Za-z0-9]{27}$/,ny=/^[a-zA-Z0-9_-]{21}$/,oy=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,YU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iy=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vo=a(e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),eq=Vo(4),tq=Vo(6),rq=Vo(7),ay=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,nq=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,oq=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,KE=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,iq=KE,aq=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function sy(){return new RegExp(sq,"u")}a(sy,"emoji");var cy=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uy=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ly=a(e=>{let t=Cr(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},"mac"),dy=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,py=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,my=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ud=/^[A-Za-z0-9_-]*$/,cq=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,uq=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,fy=/^\+(?:[0-9]){6,14}[0-9]$/,JE="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hy=new RegExp(`^${JE}$`);function WE(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}a(WE,"timeSource");function gy(e){return new RegExp(`^${WE(e)}$`)}a(gy,"time");function yy(e){let t=WE({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let o=`${t}(?:${r.join("|")})`;return new RegExp(`^${JE}T(?:${o})$`)}a(yy,"datetime");var vy=a(e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},"string"),_y=/^-?\d+n?$/,by=/^-?\d+$/,xy=/^-?\d+(?:\.\d+)?/,wy=/^(?:true|false)$/i,Sy=/^null$/i;var Ty=/^undefined$/i;var Iy=/^[^A-Z]*$/,Ey=/^[^a-z]*$/,lq=/^[0-9a-fA-F]*$/;function Ls(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}a(Ls,"fixedBase64");function Fs(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}a(Fs,"fixedBase64url");var dq=/^[0-9a-fA-F]{32}$/,pq=Ls(22,"=="),mq=Fs(22),fq=/^[0-9a-fA-F]{40}$/,hq=Ls(27,"="),gq=Fs(27),yq=/^[0-9a-fA-F]{64}$/,vq=Ls(43,"="),_q=Fs(43),bq=/^[0-9a-fA-F]{96}$/,xq=Ls(64,""),wq=Fs(64),Sq=/^[0-9a-fA-F]{128}$/,Tq=Ls(86,"=="),Iq=Fs(86);var Xe=$("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),XE={number:"number",bigint:"bigint",object:"date"},ld=$("$ZodCheckLessThan",(e,t)=>{Xe.init(e,t);let r=XE[typeof t.value];e._zod.onattach.push(o=>{let n=o._zod.bag,i=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:r,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),dd=$("$ZodCheckGreaterThan",(e,t)=>{Xe.init(e,t);let r=XE[typeof t.value];e._zod.onattach.push(o=>{let n=o._zod.bag,i=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:r,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ky=$("$ZodCheckMultipleOf",(e,t)=>{Xe.init(e,t),e._zod.onattach.push(r=>{var o;(o=r._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):qg(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Py=$("$ZodCheckNumberFormat",(e,t)=>{Xe.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),o=r?"int":"number",[n,i]=Hg[t.format];e._zod.onattach.push(c=>{let u=c._zod.bag;u.format=t.format,u.minimum=n,u.maximum=i,r&&(u.pattern=by)}),e._zod.check=c=>{let u=c.value;if(r){if(!Number.isInteger(u)){c.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?c.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):c.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}u<n&&c.issues.push({origin:"number",input:u,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),u>i&&c.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:e})}}),$y=$("$ZodCheckBigIntFormat",(e,t)=>{Xe.init(e,t);let[r,o]=Gg[t.format];e._zod.onattach.push(n=>{let i=n._zod.bag;i.format=t.format,i.minimum=r,i.maximum=o}),e._zod.check=n=>{let i=n.value;i<r&&n.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),i>o&&n.issues.push({origin:"bigint",input:i,code:"too_big",maximum:o,inst:e})}}),Ay=$("$ZodCheckMaxSize",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.size!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{let n=o.value;n.size<=t.maximum||o.issues.push({origin:Ds(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Cy=$("$ZodCheckMinSize",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.size!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{let n=o.value;n.size>=t.minimum||o.issues.push({origin:Ds(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Oy=$("$ZodCheckSizeEquals",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.size!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag;n.minimum=t.size,n.maximum=t.size,n.size=t.size}),e._zod.check=o=>{let n=o.value,i=n.size;if(i===t.size)return;let c=i>t.size;o.issues.push({origin:Ds(n),...c?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),Ry=$("$ZodCheckMaxLength",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{let n=o.value;if(n.length<=t.maximum)return;let c=zs(n);o.issues.push({origin:c,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Ny=$("$ZodCheckMinLength",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{let n=o.value;if(n.length>=t.minimum)return;let c=zs(n);o.issues.push({origin:c,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),jy=$("$ZodCheckLengthEquals",(e,t)=>{var r;Xe.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!lo(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=o=>{let n=o.value,i=n.length;if(i===t.length)return;let c=zs(n),u=i>t.length;o.issues.push({origin:c,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),Xi=$("$ZodCheckStringFormat",(e,t)=>{var r,o;Xe.init(e,t),e._zod.onattach.push(n=>{let i=n._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),Dy=$("$ZodCheckRegex",(e,t)=>{Xi.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),zy=$("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Iy),Xi.init(e,t)}),My=$("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Ey),Xi.init(e,t)}),Uy=$("$ZodCheckIncludes",(e,t)=>{Xe.init(e,t);let r=Cr(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=o,e._zod.onattach.push(n=>{let i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(o)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),qy=$("$ZodCheckStartsWith",(e,t)=>{Xe.init(e,t);let r=new RegExp(`^${Cr(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(o=>{let n=o._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),Ly=$("$ZodCheckEndsWith",(e,t)=>{Xe.init(e,t);let r=new RegExp(`.*${Cr(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(o=>{let n=o._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}});function QE(e,t,r){e.issues.length&&t.issues.push(...xr(r,e.issues))}a(QE,"handleCheckPropertyResult");var Fy=$("$ZodCheckProperty",(e,t)=>{Xe.init(e,t),e._zod.check=r=>{let o=t.schema._zod.run({value:r.value[t.property],issues:[]},{});if(o instanceof Promise)return o.then(n=>QE(n,r,t.property));QE(o,r,t.property)}}),By=$("$ZodCheckMimeType",(e,t)=>{Xe.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(o=>{o._zod.bag.mime=t.mime}),e._zod.check=o=>{r.has(o.value.type)||o.issues.push({code:"invalid_value",values:t.mime,input:o.value.type,inst:e,continue:!t.abort})}}),Vy=$("$ZodCheckOverwrite",(e,t)=>{Xe.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});var Bs=class{static{a(this,"Doc")}constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let o=t.split(`
`).filter(c=>c),n=Math.min(...o.map(c=>c.length-c.trimStart().length)),i=o.map(c=>c.slice(n)).map(c=>" ".repeat(this.indent*2)+c);for(let c of i)this.content.push(c)}compile(){let t=Function,r=this?.args,n=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...r,n.join(`
`))}};var Zy={major:4,minor:1,patch:13};var ke=$("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Zy;let o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(let n of o)for(let i of n._zod.onattach)i(e);if(o.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let n=a((c,u,l)=>{let d=ho(c),p;for(let m of u){if(m._zod.def.when){if(!m._zod.def.when(c))continue}else if(d)continue;let f=c.issues.length,g=m._zod.check(c);if(g instanceof Promise&&l?.async===!1)throw new qr;if(p||g instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await g,c.issues.length!==f&&(d||(d=ho(c,f)))});else{if(c.issues.length===f)continue;d||(d=ho(c,f))}}return p?p.then(()=>c):c},"runChecks"),i=a((c,u,l)=>{if(ho(c))return c.aborted=!0,c;let d=n(u,o,l);if(d instanceof Promise){if(l.async===!1)throw new qr;return d.then(p=>e._zod.parse(p,l))}return e._zod.parse(d,l)},"handleCanaryResult");e._zod.run=(c,u)=>{if(u.skipChecks)return e._zod.parse(c,u);if(u.direction==="backward"){let d=e._zod.parse({value:c.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(p=>i(p,c,u)):i(d,c,u)}let l=e._zod.parse(c,u);if(l instanceof Promise){if(u.async===!1)throw new qr;return l.then(d=>n(d,o,u))}return n(l,o,u)}}e["~standard"]={validate:a(n=>{try{let i=Wg(e,n);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Qg(e,n).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},"validate"),vendor:"zod",version:1}}),Zo=$("$ZodString",(e,t)=>{ke.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??vy(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ke=$("$ZodStringFormat",(e,t)=>{Xi.init(e,t),Zo.init(e,t)}),Gy=$("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=iy),Ke.init(e,t)}),Ky=$("$ZodUUID",(e,t)=>{if(t.version){let o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Vo(o))}else t.pattern??(t.pattern=Vo());Ke.init(e,t)}),Jy=$("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=ay),Ke.init(e,t)}),Wy=$("$ZodURL",(e,t)=>{Ke.init(e,t),e._zod.check=r=>{try{let o=r.value.trim(),n=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=n.href:r.value=o;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Qy=$("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=sy()),Ke.init(e,t)}),Xy=$("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ny),Ke.init(e,t)}),Yy=$("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Xg),Ke.init(e,t)}),ev=$("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Yg),Ke.init(e,t)}),tv=$("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ey),Ke.init(e,t)}),rv=$("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ty),Ke.init(e,t)}),nv=$("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ry),Ke.init(e,t)}),ov=$("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=yy(t)),Ke.init(e,t)}),iv=$("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=hy),Ke.init(e,t)}),av=$("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=gy(t)),Ke.init(e,t)}),sv=$("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=oy),Ke.init(e,t)}),cv=$("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=cy),Ke.init(e,t),e._zod.bag.format="ipv4"}),uv=$("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=uy),Ke.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),lv=$("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=ly(t.delimiter)),Ke.init(e,t),e._zod.bag.format="mac"}),dv=$("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=dy),Ke.init(e,t)}),pv=$("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=py),Ke.init(e,t),e._zod.check=r=>{let o=r.value.split("/");try{if(o.length!==2)throw new Error;let[n,i]=o;if(!i)throw new Error;let c=Number(i);if(`${c}`!==i)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function mv(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}a(mv,"isValidBase64");var fv=$("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=my),Ke.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{mv(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function lk(e){if(!ud.test(e))return!1;let t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return mv(r)}a(lk,"isValidBase64URL");var hv=$("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ud),Ke.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{lk(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),gv=$("$ZodE164",(e,t)=>{t.pattern??(t.pattern=fy),Ke.init(e,t)});function dk(e,t=null){try{let r=e.split(".");if(r.length!==3)return!1;let[o]=r;if(!o)return!1;let n=JSON.parse(atob(o));return!("typ"in n&&n?.typ!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}}a(dk,"isValidJWT");var yv=$("$ZodJWT",(e,t)=>{Ke.init(e,t),e._zod.check=r=>{dk(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),vv=$("$ZodCustomStringFormat",(e,t)=>{Ke.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),yd=$("$ZodNumber",(e,t)=>{ke.init(e,t),e._zod.pattern=e._zod.bag.pattern??xy,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}let n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;let i=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...i?{received:i}:{}}),r}}),_v=$("$ZodNumberFormat",(e,t)=>{Py.init(e,t),yd.init(e,t)}),Vs=$("$ZodBoolean",(e,t)=>{ke.init(e,t),e._zod.pattern=wy,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=!!r.value}catch{}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),r}}),vd=$("$ZodBigInt",(e,t)=>{ke.init(e,t),e._zod.pattern=_y,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),bv=$("$ZodBigIntFormat",(e,t)=>{$y.init(e,t),vd.init(e,t)}),xv=$("$ZodSymbol",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),r}}),wv=$("$ZodUndefined",(e,t)=>{ke.init(e,t),e._zod.pattern=Ty,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,o)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),r}}),Sv=$("$ZodNull",(e,t)=>{ke.init(e,t),e._zod.pattern=Sy,e._zod.values=new Set([null]),e._zod.parse=(r,o)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),r}}),Tv=$("$ZodAny",(e,t)=>{ke.init(e,t),e._zod.parse=r=>r}),Iv=$("$ZodUnknown",(e,t)=>{ke.init(e,t),e._zod.parse=r=>r}),Ev=$("$ZodNever",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),kv=$("$ZodVoid",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),r}}),Pv=$("$ZodDate",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}let n=r.value,i=n instanceof Date;return i&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...i?{received:"Invalid Date"}:{},inst:e}),r}});function ek(e,t,r){e.issues.length&&t.issues.push(...xr(r,e.issues)),t.value[r]=e.value}a(ek,"handleArrayResult");var $v=$("$ZodArray",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let i=[];for(let c=0;c<n.length;c++){let u=n[c],l=t.element._zod.run({value:u,issues:[]},o);l instanceof Promise?i.push(l.then(d=>ek(d,r,c))):ek(l,r,c)}return i.length?Promise.all(i).then(()=>r):r}});function gd(e,t,r,o){e.issues.length&&t.issues.push(...xr(r,e.issues)),e.value===void 0?r in o&&(t.value[r]=void 0):t.value[r]=e.value}a(gd,"handlePropertyResult");function pk(e){let t=Object.keys(e.shape);for(let o of t)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);let r=Zg(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}a(pk,"normalizeDef");function mk(e,t,r,o,n,i){let c=[],u=n.keySet,l=n.catchall._zod,d=l.def.type;for(let p in t){if(u.has(p))continue;if(d==="never"){c.push(p);continue}let m=l.run({value:t[p],issues:[]},o);m instanceof Promise?e.push(m.then(f=>gd(f,r,p,t))):gd(m,r,p,t)}return c.length&&r.issues.push({code:"unrecognized_keys",keys:c,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}a(mk,"handleCatchall");var fk=$("$ZodObject",(e,t)=>{if(ke.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){let u=t.shape;Object.defineProperty(t,"shape",{get:a(()=>{let l={...u};return Object.defineProperty(t,"shape",{value:l}),l},"get")})}let o=Hi(()=>pk(t));je(e._zod,"propValues",()=>{let u=t.shape,l={};for(let d in u){let p=u[d]._zod;if(p.values){l[d]??(l[d]=new Set);for(let m of p.values)l[d].add(m)}}return l});let n=Bo,i=t.catchall,c;e._zod.parse=(u,l)=>{c??(c=o.value);let d=u.value;if(!n(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;u.value={};let p=[],m=c.shape;for(let f of c.keys){let h=m[f]._zod.run({value:d[f],issues:[]},l);h instanceof Promise?p.push(h.then(v=>gd(v,u,f,d))):gd(h,u,f,d)}return i?mk(p,d,u,l,o.value,e):p.length?Promise.all(p).then(()=>u):u}}),Av=$("$ZodObjectJIT",(e,t)=>{fk.init(e,t);let r=e._zod.parse,o=Hi(()=>pk(t)),n=a(f=>{let g=new Bs(["shape","payload","ctx"]),h=o.value,v=a(w=>{let P=Ql(w);return`shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`},"parseStr");g.write("const input = payload.value;");let x=Object.create(null),S=0;for(let w of h.keys)x[w]=`key_${S++}`;g.write("const newResult = {};");for(let w of h.keys){let P=x[w],B=Ql(w);g.write(`const ${P} = ${v(w)};`),g.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${B}, ...iss.path] : [${B}]
          })));
        }
        
        
        if (${P}.value === undefined) {
          if (${B} in input) {
            newResult[${B}] = undefined;
          }
        } else {
          newResult[${B}] = ${P}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");let b=g.compile();return(w,P)=>b(f,w,P)},"generateFastpass"),i,c=Bo,u=!Cs.jitless,d=u&&Fg.value,p=t.catchall,m;e._zod.parse=(f,g)=>{m??(m=o.value);let h=f.value;return c(h)?u&&d&&g?.async===!1&&g.jitless!==!0?(i||(i=n(t.shape)),f=i(f,g),p?mk([],h,f,g,m,e):f):r(f,g):(f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f)}});function tk(e,t,r,o){for(let i of e)if(i.issues.length===0)return t.value=i.value,t;let n=e.filter(i=>!ho(i));return n.length===1?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(c=>wr(c,o,kt())))}),t)}a(tk,"handleUnionResults");var _d=$("$ZodUnion",(e,t)=>{ke.init(e,t),je(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),je(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),je(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),je(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){let n=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>Ns(i.source)).join("|")})$`)}});let r=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(n,i)=>{if(r)return o(n,i);let c=!1,u=[];for(let l of t.options){let d=l._zod.run({value:n.value,issues:[]},i);if(d instanceof Promise)u.push(d),c=!0;else{if(d.issues.length===0)return d;u.push(d)}}return c?Promise.all(u).then(l=>tk(l,n,e,i)):tk(u,n,e,i)}}),Cv=$("$ZodDiscriminatedUnion",(e,t)=>{_d.init(e,t);let r=e._zod.parse;je(e._zod,"propValues",()=>{let n={};for(let i of t.options){let c=i._zod.propValues;if(!c||Object.keys(c).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let[u,l]of Object.entries(c)){n[u]||(n[u]=new Set);for(let d of l)n[u].add(d)}}return n});let o=Hi(()=>{let n=t.options,i=new Map;for(let c of n){let u=c._zod.propValues?.[t.discriminator];if(!u||u.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(c)}"`);for(let l of u){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,c)}}return i});e._zod.parse=(n,i)=>{let c=n.value;if(!Bo(c))return n.issues.push({code:"invalid_type",expected:"object",input:c,inst:e}),n;let u=o.value.get(c?.[t.discriminator]);return u?u._zod.run(n,i):t.unionFallback?r(n,i):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:c,path:[t.discriminator],inst:e}),n)}}),Ov=$("$ZodIntersection",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value,i=t.left._zod.run({value:n,issues:[]},o),c=t.right._zod.run({value:n,issues:[]},o);return i instanceof Promise||c instanceof Promise?Promise.all([i,c]).then(([l,d])=>rk(r,l,d)):rk(r,i,c)}});function Hy(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(fo(e)&&fo(t)){let r=Object.keys(t),o=Object.keys(e).filter(i=>r.indexOf(i)!==-1),n={...e,...t};for(let i of o){let c=Hy(e[i],t[i]);if(!c.valid)return{valid:!1,mergeErrorPath:[i,...c.mergeErrorPath]};n[i]=c.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let o=0;o<e.length;o++){let n=e[o],i=t[o],c=Hy(n,i);if(!c.valid)return{valid:!1,mergeErrorPath:[o,...c.mergeErrorPath]};r.push(c.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}a(Hy,"mergeValues");function rk(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),ho(e))return e;let o=Hy(t.value,r.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}a(rk,"handleIntersectionResults");var bd=$("$ZodTuple",(e,t)=>{ke.init(e,t);let r=t.items;e._zod.parse=(o,n)=>{let i=o.value;if(!Array.isArray(i))return o.issues.push({input:i,inst:e,expected:"tuple",code:"invalid_type"}),o;o.value=[];let c=[],u=[...r].reverse().findIndex(p=>p._zod.optin!=="optional"),l=u===-1?0:r.length-u;if(!t.rest){let p=i.length>r.length,m=i.length<l-1;if(p||m)return o.issues.push({...p?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:e,origin:"array"}),o}let d=-1;for(let p of r){if(d++,d>=i.length&&d>=l)continue;let m=p._zod.run({value:i[d],issues:[]},n);m instanceof Promise?c.push(m.then(f=>pd(f,o,d))):pd(m,o,d)}if(t.rest){let p=i.slice(r.length);for(let m of p){d++;let f=t.rest._zod.run({value:m,issues:[]},n);f instanceof Promise?c.push(f.then(g=>pd(g,o,d))):pd(f,o,d)}}return c.length?Promise.all(c).then(()=>o):o}});function pd(e,t,r){e.issues.length&&t.issues.push(...xr(r,e.issues)),t.value[r]=e.value}a(pd,"handleTupleResult");var Rv=$("$ZodRecord",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!fo(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),r;let i=[],c=t.keyType._zod.values;if(c){r.value={};let u=new Set;for(let d of c)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){u.add(typeof d=="number"?d.toString():d);let p=t.valueType._zod.run({value:n[d],issues:[]},o);p instanceof Promise?i.push(p.then(m=>{m.issues.length&&r.issues.push(...xr(d,m.issues)),r.value[d]=m.value})):(p.issues.length&&r.issues.push(...xr(d,p.issues)),r.value[d]=p.value)}let l;for(let d in n)u.has(d)||(l=l??[],l.push(d));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:l})}else{r.value={};for(let u of Reflect.ownKeys(n)){if(u==="__proto__")continue;let l=t.keyType._zod.run({value:u,issues:[]},o);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(p=>wr(p,o,kt())),input:u,path:[u],inst:e}),r.value[l.value]=l.value;continue}let d=t.valueType._zod.run({value:n[u],issues:[]},o);d instanceof Promise?i.push(d.then(p=>{p.issues.length&&r.issues.push(...xr(u,p.issues)),r.value[l.value]=p.value})):(d.issues.length&&r.issues.push(...xr(u,d.issues)),r.value[l.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Nv=$("$ZodMap",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:e}),r;let i=[];r.value=new Map;for(let[c,u]of n){let l=t.keyType._zod.run({value:c,issues:[]},o),d=t.valueType._zod.run({value:u,issues:[]},o);l instanceof Promise||d instanceof Promise?i.push(Promise.all([l,d]).then(([p,m])=>{nk(p,m,r,c,n,e,o)})):nk(l,d,r,c,n,e,o)}return i.length?Promise.all(i).then(()=>r):r}});function nk(e,t,r,o,n,i,c){e.issues.length&&(js.has(typeof o)?r.issues.push(...xr(o,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:i,issues:e.issues.map(u=>wr(u,c,kt()))})),t.issues.length&&(js.has(typeof o)?r.issues.push(...xr(o,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:i,key:o,issues:t.issues.map(u=>wr(u,c,kt()))})),r.value.set(e.value,t.value)}a(nk,"handleMapResult");var jv=$("$ZodSet",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:e,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let c of n){let u=t.valueType._zod.run({value:c,issues:[]},o);u instanceof Promise?i.push(u.then(l=>ok(l,r))):ok(u,r)}return i.length?Promise.all(i).then(()=>r):r}});function ok(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}a(ok,"handleSetResult");var Dv=$("$ZodEnum",(e,t)=>{ke.init(e,t);let r=Rs(t.entries),o=new Set(r);e._zod.values=o,e._zod.pattern=new RegExp(`^(${r.filter(n=>js.has(typeof n)).map(n=>typeof n=="string"?Cr(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{let c=n.value;return o.has(c)||n.issues.push({code:"invalid_value",values:r,input:c,inst:e}),n}}),zv=$("$ZodLiteral",(e,t)=>{if(ke.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(o=>typeof o=="string"?Cr(o):o?Cr(o.toString()):String(o)).join("|")})$`),e._zod.parse=(o,n)=>{let i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),o}}),Mv=$("$ZodFile",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return n instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),r}}),Uv=$("$ZodTransform",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new uo(e.constructor.name);let n=t.transform(r.value,r);if(o.async)return(n instanceof Promise?n:Promise.resolve(n)).then(c=>(r.value=c,r));if(n instanceof Promise)throw new qr;return r.value=n,r}});function ik(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}a(ik,"handleOptionalResult");var qv=$("$ZodOptional",(e,t)=>{ke.init(e,t),e._zod.optin="optional",e._zod.optout="optional",je(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),je(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ns(r.source)})?$`):void 0}),e._zod.parse=(r,o)=>{if(t.innerType._zod.optin==="optional"){let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>ik(i,r.value)):ik(n,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,o)}}),Lv=$("$ZodNullable",(e,t)=>{ke.init(e,t),je(e._zod,"optin",()=>t.innerType._zod.optin),je(e._zod,"optout",()=>t.innerType._zod.optout),je(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ns(r.source)}|null)$`):void 0}),je(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,o)=>r.value===null?r:t.innerType._zod.run(r,o)}),Fv=$("$ZodDefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",je(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);if(r.value===void 0)return r.value=t.defaultValue,r;let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>ak(i,t)):ak(n,t)}});function ak(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}a(ak,"handleDefaultResult");var Bv=$("$ZodPrefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",je(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>(o.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,o))}),Vv=$("$ZodNonOptional",(e,t)=>{ke.init(e,t),je(e._zod,"values",()=>{let r=t.innerType._zod.values;return r?new Set([...r].filter(o=>o!==void 0)):void 0}),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>sk(i,e)):sk(n,e)}});function sk(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}a(sk,"handleNonOptionalResult");var Zv=$("$ZodSuccess",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new uo("ZodSuccess");let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.issues.length===0,r)):(r.value=n.issues.length===0,r)}}),Hv=$("$ZodCatch",(e,t)=>{ke.init(e,t),je(e._zod,"optin",()=>t.innerType._zod.optin),je(e._zod,"optout",()=>t.innerType._zod.optout),je(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(c=>wr(c,o,kt()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(i=>wr(i,o,kt()))},input:r.value}),r.issues=[]),r)}}),Gv=$("$ZodNaN",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:e,expected:"nan",code:"invalid_type"}),r)}),Kv=$("$ZodPipe",(e,t)=>{ke.init(e,t),je(e._zod,"values",()=>t.in._zod.values),je(e._zod,"optin",()=>t.in._zod.optin),je(e._zod,"optout",()=>t.out._zod.optout),je(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if(o.direction==="backward"){let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(c=>md(c,t.in,o)):md(i,t.in,o)}let n=t.in._zod.run(r,o);return n instanceof Promise?n.then(i=>md(i,t.out,o)):md(n,t.out,o)}});function md(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}a(md,"handlePipeResult");var Zs=$("$ZodCodec",(e,t)=>{ke.init(e,t),je(e._zod,"values",()=>t.in._zod.values),je(e._zod,"optin",()=>t.in._zod.optin),je(e._zod,"optout",()=>t.out._zod.optout),je(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if((o.direction||"forward")==="forward"){let i=t.in._zod.run(r,o);return i instanceof Promise?i.then(c=>fd(c,t,o)):fd(i,t,o)}else{let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(c=>fd(c,t,o)):fd(i,t,o)}}});function fd(e,t,r){if(e.issues.length)return e.aborted=!0,e;if((r.direction||"forward")==="forward"){let n=t.transform(e.value,e);return n instanceof Promise?n.then(i=>hd(e,i,t.out,r)):hd(e,n,t.out,r)}else{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(i=>hd(e,i,t.in,r)):hd(e,n,t.in,r)}}a(fd,"handleCodecAResult");function hd(e,t,r,o){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},o)}a(hd,"handleCodecTxResult");var Jv=$("$ZodReadonly",(e,t)=>{ke.init(e,t),je(e._zod,"propValues",()=>t.innerType._zod.propValues),je(e._zod,"values",()=>t.innerType._zod.values),je(e._zod,"optin",()=>t.innerType?._zod?.optin),je(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(ck):ck(n)}});function ck(e){return e.value=Object.freeze(e.value),e}a(ck,"handleReadonlyResult");var Wv=$("$ZodTemplateLiteral",(e,t)=>{ke.init(e,t);let r=[];for(let o of t.parts)if(typeof o=="object"&&o!==null){if(!o._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...o._zod.traits].shift()}`);let n=o._zod.pattern instanceof RegExp?o._zod.pattern.source:o._zod.pattern;if(!n)throw new Error(`Invalid template literal part: ${o._zod.traits}`);let i=n.startsWith("^")?1:0,c=n.endsWith("$")?n.length-1:n.length;r.push(n.slice(i,c))}else if(o===null||Vg.has(typeof o))r.push(Cr(`${o}`));else throw new Error(`Invalid template literal part: ${o}`);e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(o,n)=>typeof o.value!="string"?(o.issues.push({input:o.value,inst:e,expected:"template_literal",code:"invalid_type"}),o):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(o.value)||o.issues.push({input:o.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),o)}),Qv=$("$ZodFunction",(e,t)=>(ke.init(e,t),e._def=t,e._zod.def=t,e.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...o){let n=e._def.input?Yl(e._def.input,o):o,i=Reflect.apply(r,this,n);return e._def.output?Yl(e._def.output,i):i}},e.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...o){let n=e._def.input?await ed(e._def.input,o):o,i=await Reflect.apply(r,this,n);return e._def.output?await ed(e._def.output,i):i}},e._zod.parse=(r,o)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:e}),r):(e._def.output&&e._def.output._zod.def.type==="promise"?r.value=e.implementAsync(r.value):r.value=e.implement(r.value),r),e.input=(...r)=>{let o=e.constructor;return Array.isArray(r[0])?new o({type:"function",input:new bd({type:"tuple",items:r[0],rest:r[1]}),output:e._def.output}):new o({type:"function",input:r[0],output:e._def.output})},e.output=r=>{let o=e.constructor;return new o({type:"function",input:e._def.input,output:r})},e)),Xv=$("$ZodPromise",(e,t)=>{ke.init(e,t),e._zod.parse=(r,o)=>Promise.resolve(r.value).then(n=>t.innerType._zod.run({value:n,issues:[]},o))}),Yv=$("$ZodLazy",(e,t)=>{ke.init(e,t),je(e._zod,"innerType",()=>t.getter()),je(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),je(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),je(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),je(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(r,o)=>e._zod.innerType._zod.run(r,o)}),e_=$("$ZodCustom",(e,t)=>{Xe.init(e,t),ke.init(e,t),e._zod.parse=(r,o)=>r,e._zod.check=r=>{let o=r.value,n=t.fn(o);if(n instanceof Promise)return n.then(i=>uk(i,r,o,e));uk(n,r,o,e)}});function uk(e,t,r,o){if(!e){let n={code:"custom",input:r,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(n.params=o._zod.def.params),t.issues.push(Gi(n))}}a(uk,"handleRefineResult");var Qs={};$r(Qs,{ar:()=>t_,az:()=>r_,be:()=>n_,bg:()=>o_,ca:()=>i_,cs:()=>a_,da:()=>s_,de:()=>c_,en:()=>Hs,eo:()=>u_,es:()=>l_,fa:()=>d_,fi:()=>p_,fr:()=>m_,frCA:()=>f_,he:()=>h_,hu:()=>g_,id:()=>y_,is:()=>v_,it:()=>__,ja:()=>b_,ka:()=>x_,kh:()=>w_,km:()=>Gs,ko:()=>S_,lt:()=>T_,mk:()=>I_,ms:()=>E_,nl:()=>k_,no:()=>P_,ota:()=>$_,pl:()=>C_,ps:()=>A_,pt:()=>O_,ru:()=>R_,sl:()=>N_,sv:()=>j_,ta:()=>D_,th:()=>z_,tr:()=>M_,ua:()=>U_,uk:()=>Ws,ur:()=>q_,vi:()=>L_,yo:()=>V_,zhCN:()=>F_,zhTW:()=>B_});var kq=a(()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return n=>{switch(n.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${n.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${G(n.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${n.maximum.toString()} ${c.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${n.minimum.toString()} ${c.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${n.prefix}"`:i.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${i.suffix}"`:i.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${i.includes}"`:i.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${i.pattern}`:`${o[i.format]??n.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${n.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${n.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${n.keys.length>1?"\u0629":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}},"error");function t_(){return{localeError:kq()}}a(t_,"default");var Pq=a(()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${n.expected}, daxil olan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${G(n.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${i}${n.maximum.toString()} ${c.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${i}${n.minimum.toString()} ${c.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${i.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:i.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${i.suffix}" il\u0259 bitm\u0259lidir`:i.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${i.includes}" daxil olmal\u0131d\u0131r`:i.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${i.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${o[i.format]??n.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${n.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${n.keys.length>1?"lar":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${n.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}},"error");function r_(){return{localeError:Pq()}}a(r_,"default");function hk(e,t,r,o){let n=Math.abs(e),i=n%10,c=n%100;return c>=11&&c<=19?o:i===1?t:i>=2&&i<=4?r:o}a(hk,"getBelarusianPlural");var $q=a(()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0456\u045E";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${n.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${G(n.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);if(c){let u=Number(n.maximum),l=hk(u,c.unit.one,c.unit.few,c.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${c.verb} ${i}${n.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);if(c){let u=Number(n.minimum),l=hk(u,c.unit.one,c.unit.few,c.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${c.verb} ${i}${n.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${o[i.format]??n.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${n.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${n.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}},"error");function n_(){return{localeError:$q()}}a(n_,"default");var Aq=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(e))return"\u043C\u0430\u0441\u0438\u0432";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},"parsedType"),Cq=a(()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Aq(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${G(o.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${N(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${o.maximum.toString()} ${i.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${o.minimum.toString()} ${i.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;if(n.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${n.prefix}"`;if(n.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${n.suffix}"`;if(n.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${n.includes}"`;if(n.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${n.pattern}`;let i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return n.format==="emoji"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="datetime"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="date"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),n.format==="time"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="duration"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${i} ${r[n.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${o.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u043E\u0432\u0435":""}: ${N(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}},"error");function o_(){return{localeError:Cq()}}a(o_,"default");var Oq=a(()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${n.expected}, s'ha rebut ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Valor inv\xE0lid: s'esperava ${G(n.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${N(n.values," o ")}`;case"too_big":{let i=n.inclusive?"com a m\xE0xim":"menys de",c=t(n.origin);return c?`Massa gran: s'esperava que ${n.origin??"el valor"} contingu\xE9s ${i} ${n.maximum.toString()} ${c.unit??"elements"}`:`Massa gran: s'esperava que ${n.origin??"el valor"} fos ${i} ${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?"com a m\xEDnim":"m\xE9s de",c=t(n.origin);return c?`Massa petit: s'esperava que ${n.origin} contingu\xE9s ${i} ${n.minimum.toString()} ${c.unit}`:`Massa petit: s'esperava que ${n.origin} fos ${i} ${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\xE0lid: ha d'incloure "${i.includes}"`:i.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${i.pattern}`:`Format inv\xE0lid per a ${o[i.format]??n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${n.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${n.origin}`;default:return"Entrada inv\xE0lida"}}},"error");function i_(){return{localeError:Oq()}}a(i_,"default");var Rq=a(()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(n))return"pole";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return n=>{switch(n.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${n.expected}, obdr\u017Eeno ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${G(n.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${i}${n.maximum.toString()} ${c.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${i}${n.minimum.toString()} ${c.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${i.pattern}`:`Neplatn\xFD form\xE1t ${o[i.format]??n.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${N(n.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${n.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${n.origin}`;default:return"Neplatn\xFD vstup"}}},"error");function a_(){return{localeError:Rq()}}a(a_,"default");var Nq=a(()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(c){return e[c]??null}a(r,"getSizing");function o(c){return t[c]??c}a(o,"getTypeName");let n=a(c=>{let u=typeof c;switch(u){case"number":return Number.isNaN(c)?"NaN":"tal";case"object":return Array.isArray(c)?"liste":c===null?"null":Object.getPrototypeOf(c)!==Object.prototype&&c.constructor?c.constructor.name:"objekt"}return u},"parsedType"),i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Ugyldigt input: forventede ${o(c.expected)}, fik ${o(n(c.input))}`;case"invalid_value":return c.values.length===1?`Ugyldig v\xE6rdi: forventede ${G(c.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${N(c.values,"|")}`;case"too_big":{let u=c.inclusive?"<=":"<",l=r(c.origin),d=o(c.origin);return l?`For stor: forventede ${d??"value"} ${l.verb} ${u} ${c.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${d??"value"} havde ${u} ${c.maximum.toString()}`}case"too_small":{let u=c.inclusive?">=":">",l=r(c.origin),d=o(c.origin);return l?`For lille: forventede ${d} ${l.verb} ${u} ${c.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${u} ${c.minimum.toString()}`}case"invalid_format":{let u=c;return u.format==="starts_with"?`Ugyldig streng: skal starte med "${u.prefix}"`:u.format==="ends_with"?`Ugyldig streng: skal ende med "${u.suffix}"`:u.format==="includes"?`Ugyldig streng: skal indeholde "${u.includes}"`:u.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${u.pattern}`:`Ugyldig ${i[u.format]??c.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${c.divisor}`;case"unrecognized_keys":return`${c.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${N(c.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${c.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${c.origin}`;default:return"Ugyldigt input"}}},"error");function s_(){return{localeError:Nq()}}a(s_,"default");var jq=a(()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"Zahl";case"object":{if(Array.isArray(n))return"Array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return n=>{switch(n.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${n.expected}, erhalten ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ung\xFCltige Eingabe: erwartet ${G(n.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${i}${n.maximum.toString()} ${c.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${i}${n.maximum.toString()} ist`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Zu klein: erwartet, dass ${n.origin} ${i}${n.minimum.toString()} ${c.unit} hat`:`Zu klein: erwartet, dass ${n.origin} ${i}${n.minimum.toString()} ist`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ung\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\xFCltig: ${o[i.format]??n.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${n.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${n.origin}`;default:return"Ung\xFCltige Eingabe"}}},"error");function c_(){return{localeError:jq()}}a(c_,"default");var Dq=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},"parsedType"),zq=a(()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Invalid input: expected ${o.expected}, received ${Dq(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${G(o.values[0])}`:`Invalid option: expected one of ${N(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`Too big: expected ${o.origin??"value"} to have ${n}${o.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${o.origin??"value"} to be ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`Too small: expected ${o.origin} to have ${n}${o.minimum.toString()} ${i.unit}`:`Too small: expected ${o.origin} to be ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`Invalid string: must start with "${n.prefix}"`:n.format==="ends_with"?`Invalid string: must end with "${n.suffix}"`:n.format==="includes"?`Invalid string: must include "${n.includes}"`:n.format==="regex"?`Invalid string: must match pattern ${n.pattern}`:`Invalid ${r[n.format]??o.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${o.divisor}`;case"unrecognized_keys":return`Unrecognized key${o.keys.length>1?"s":""}: ${N(o.keys,", ")}`;case"invalid_key":return`Invalid key in ${o.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${o.origin}`;default:return"Invalid input"}}},"error");function Hs(){return{localeError:zq()}}a(Hs,"default");var Mq=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":{if(Array.isArray(e))return"tabelo";if(e===null)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},"parsedType"),Uq=a(()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return o=>{switch(o.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${o.expected}, ricevi\u011Dis ${Mq(o.input)}`;case"invalid_value":return o.values.length===1?`Nevalida enigo: atendi\u011Dis ${G(o.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${N(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`Tro granda: atendi\u011Dis ke ${o.origin??"valoro"} havu ${n}${o.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${o.origin??"valoro"} havu ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`Tro malgranda: atendi\u011Dis ke ${o.origin} havu ${n}${o.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\u011Dis ke ${o.origin} estu ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${n.prefix}"`:n.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${n.suffix}"`:n.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${n.includes}"`:n.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${n.pattern}`:`Nevalida ${r[n.format]??o.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${o.divisor}`;case"unrecognized_keys":return`Nekonata${o.keys.length>1?"j":""} \u015Dlosilo${o.keys.length>1?"j":""}: ${N(o.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${o.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${o.origin}`;default:return"Nevalida enigo"}}},"error");function u_(){return{localeError:Uq()}}a(u_,"default");var qq=a(()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(c){return e[c]??null}a(r,"getSizing");function o(c){return t[c]??c}a(o,"getTypeName");let n=a(c=>{let u=typeof c;switch(u){case"number":return Number.isNaN(c)?"NaN":"number";case"object":return Array.isArray(c)?"array":c===null?"null":Object.getPrototypeOf(c)!==Object.prototype?c.constructor.name:"object"}return u},"parsedType"),i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return c=>{switch(c.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${o(c.expected)}, recibido ${o(n(c.input))}`;case"invalid_value":return c.values.length===1?`Entrada inv\xE1lida: se esperaba ${G(c.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${N(c.values,"|")}`;case"too_big":{let u=c.inclusive?"<=":"<",l=r(c.origin),d=o(c.origin);return l?`Demasiado grande: se esperaba que ${d??"valor"} tuviera ${u}${c.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${d??"valor"} fuera ${u}${c.maximum.toString()}`}case"too_small":{let u=c.inclusive?">=":">",l=r(c.origin),d=o(c.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${u}${c.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${u}${c.minimum.toString()}`}case"invalid_format":{let u=c;return u.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${u.prefix}"`:u.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${u.suffix}"`:u.format==="includes"?`Cadena inv\xE1lida: debe incluir "${u.includes}"`:u.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${u.pattern}`:`Inv\xE1lido ${i[u.format]??c.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${c.divisor}`;case"unrecognized_keys":return`Llave${c.keys.length>1?"s":""} desconocida${c.keys.length>1?"s":""}: ${N(c.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${o(c.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${o(c.origin)}`;default:return"Entrada inv\xE1lida"}}},"error");function l_(){return{localeError:qq()}}a(l_,"default");var Lq=a(()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0622\u0631\u0627\u06CC\u0647";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return n=>{switch(n.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${n.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(n.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return n.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${G(n.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${N(n.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${n.maximum.toString()} ${c.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${n.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${i}${n.minimum.toString()} ${c.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${i}${n.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:i.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:i.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${i.includes}" \u0628\u0627\u0634\u062F`:i.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${i.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${o[i.format]??n.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${n.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${n.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${N(n.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${n.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${n.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}},"error");function d_(){return{localeError:Lq()}}a(d_,"default");var Fq=a(()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return n=>{switch(n.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${n.expected}, oli ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${G(n.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Liian suuri: ${c.subject} t\xE4ytyy olla ${i}${n.maximum.toString()} ${c.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Liian pieni: ${c.subject} t\xE4ytyy olla ${i}${n.minimum.toString()} ${c.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${i.pattern}`:`Virheellinen ${o[i.format]??n.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${N(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}},"error");function p_(){return{localeError:Fq()}}a(p_,"default");var Bq=a(()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"nombre";case"object":{if(Array.isArray(n))return"tableau";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : ${n.expected} attendu, ${r(n.input)} re\xE7u`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : ${G(n.values[0])} attendu`:`Option invalide : une valeur parmi ${N(n.values,"|")} attendue`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Trop grand : ${n.origin??"valeur"} doit ${c.verb} ${i}${n.maximum.toString()} ${c.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${n.origin??"valeur"} doit \xEAtre ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Trop petit : ${n.origin} doit ${c.verb} ${i}${n.minimum.toString()} ${c.unit}`:`Trop petit : ${n.origin} doit \xEAtre ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${i.pattern}`:`${o[i.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}},"error");function m_(){return{localeError:Bq()}}a(m_,"default");var Vq=a(()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${n.expected}, re\xE7u ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : attendu ${G(n.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"\u2264":"<",c=t(n.origin);return c?`Trop grand : attendu que ${n.origin??"la valeur"} ait ${i}${n.maximum.toString()} ${c.unit}`:`Trop grand : attendu que ${n.origin??"la valeur"} soit ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?"\u2265":">",c=t(n.origin);return c?`Trop petit : attendu que ${n.origin} ait ${i}${n.minimum.toString()} ${c.unit}`:`Trop petit : attendu que ${n.origin} soit ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${o[i.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}},"error");function f_(){return{localeError:Vq()}}a(f_,"default");var Zq=a(()=>{let e={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},t={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=a(d=>d?e[d]:void 0,"typeEntry"),o=a(d=>{let p=r(d);return p?p.label:d??e.unknown.label},"typeLabel"),n=a(d=>`\u05D4${o(d)}`,"withDefinite"),i=a(d=>(r(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA","verbFor"),c=a(d=>d?t[d]??null:null,"getSizing"),u=a(d=>{let p=typeof d;switch(p){case"number":return Number.isNaN(d)?"NaN":"number";case"object":return Array.isArray(d)?"array":d===null?"null":Object.getPrototypeOf(d)!==Object.prototype&&d.constructor?d.constructor.name:"object";default:return p}},"parsedType"),l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return d=>{switch(d.code){case"invalid_type":{let p=d.expected,m=o(p),f=u(d.input),g=e[f]?.label??f;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}, \u05D4\u05EA\u05E7\u05D1\u05DC ${g}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${G(d.values[0])}`;let p=d.values.map(g=>G(g));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p[0]} \u05D0\u05D5 ${p[1]}`;let m=p[p.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p.slice(0,-1).join(", ")} \u05D0\u05D5 ${m}`}case"too_big":{let p=c(d.origin),m=n(d.origin??"value");if(d.origin==="string")return`${p?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let h=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(d.origin==="array"||d.origin==="set"){let h=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",v=d.inclusive?`${d.maximum} ${p?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${p?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${v}`.trim()}let f=d.inclusive?"<=":"<",g=i(d.origin??"value");return p?.unit?`${p.longLabel} \u05DE\u05D3\u05D9: ${m} ${g} ${f}${d.maximum.toString()} ${p.unit}`:`${p?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${m} ${g} ${f}${d.maximum.toString()}`}case"too_small":{let p=c(d.origin),m=n(d.origin??"value");if(d.origin==="string")return`${p?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let h=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(d.origin==="array"||d.origin==="set"){let h=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let x=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${x}`}let v=d.inclusive?`${d.minimum} ${p?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${p?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${v}`.trim()}let f=d.inclusive?">=":">",g=i(d.origin??"value");return p?.unit?`${p.shortLabel} \u05DE\u05D3\u05D9: ${m} ${g} ${f}${d.minimum.toString()} ${p.unit}`:`${p?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${m} ${g} ${f}${d.minimum.toString()}`}case"invalid_format":{let p=d;if(p.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${p.prefix}"`;if(p.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${p.suffix}"`;if(p.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${p.includes}"`;if(p.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${p.pattern}`;let m=l[p.format],f=m?.label??p.format,h=(m?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${f} \u05DC\u05D0 ${h}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${N(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${n(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}},"error");function h_(){return{localeError:Zq()}}a(h_,"default");var Hq=a(()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(n))return"t\xF6mb";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return n=>{switch(n.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${n.expected}, a kapott \xE9rt\xE9k ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${G(n.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`T\xFAl nagy: ${n.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${i}${n.maximum.toString()} ${c.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${n.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} m\xE9rete t\xFAl kicsi ${i}${n.minimum.toString()} ${c.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} t\xFAl kicsi ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\xC9rv\xE9nytelen string: "${i.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:i.format==="ends_with"?`\xC9rv\xE9nytelen string: "${i.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:i.format==="includes"?`\xC9rv\xE9nytelen string: "${i.includes}" \xE9rt\xE9ket kell tartalmaznia`:i.format==="regex"?`\xC9rv\xE9nytelen string: ${i.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${o[i.format]??n.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${n.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${n.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${n.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}},"error");function g_(){return{localeError:Hq()}}a(g_,"default");var Gq=a(()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak valid: diharapkan ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak valid: diharapkan ${G(n.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Terlalu besar: diharapkan ${n.origin??"value"} memiliki ${i}${n.maximum.toString()} ${c.unit??"elemen"}`:`Terlalu besar: diharapkan ${n.origin??"value"} menjadi ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Terlalu kecil: diharapkan ${n.origin} memiliki ${i}${n.minimum.toString()} ${c.unit}`:`Terlalu kecil: diharapkan ${n.origin} menjadi ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${o[i.format]??n.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`;default:return"Input tidak valid"}}},"error");function y_(){return{localeError:Gq()}}a(y_,"default");var Kq=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(e))return"fylki";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},"parsedType"),Jq=a(()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return o=>{switch(o.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Kq(o.input)} \xFEar sem \xE1 a\xF0 vera ${o.expected}`;case"invalid_value":return o.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${G(o.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${N(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin??"gildi"} hafi ${n}${o.maximum.toString()} ${i.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin??"gildi"} s\xE9 ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin} hafi ${n}${o.minimum.toString()} ${i.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin} s\xE9 ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${n.prefix}"`:n.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${n.suffix}"`:n.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${n.includes}"`:n.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${n.pattern}`:`Rangt ${r[n.format]??o.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${o.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${o.keys.length>1?"ir lyklar":"ur lykill"}: ${N(o.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${o.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${o.origin}`;default:return"Rangt gildi"}}},"error");function v_(){return{localeError:Jq()}}a(v_,"default");var Wq=a(()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"numero";case"object":{if(Array.isArray(n))return"vettore";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input non valido: atteso ${n.expected}, ricevuto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input non valido: atteso ${G(n.values[0])}`:`Opzione non valida: atteso uno tra ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Troppo grande: ${n.origin??"valore"} deve avere ${i}${n.maximum.toString()} ${c.unit??"elementi"}`:`Troppo grande: ${n.origin??"valore"} deve essere ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Troppo piccolo: ${n.origin} deve avere ${i}${n.minimum.toString()} ${c.unit}`:`Troppo piccolo: ${n.origin} deve essere ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${o[i.format]??n.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${N(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`;default:return"Input non valido"}}},"error");function __(){return{localeError:Wq()}}a(__,"default");var Qq=a(()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(n))return"\u914D\u5217";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${n.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(n.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return n.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${G(n.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${N(n.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let i=n.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",c=t(n.origin);return c?`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${c.unit??"\u8981\u7D20"}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let i=n.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",c=t(n.origin);return c?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${c.unit}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${i.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${o[i.format]??n.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${n.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${n.keys.length>1?"\u7FA4":""}: ${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}},"error");function b_(){return{localeError:Qq()}}a(b_,"default");var Xq=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(e))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[t]??t},"parsedType"),Yq=a(()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return o=>{switch(o.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${Xq(o.input)}`;case"invalid_value":return o.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G(o.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${N(o.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${i.verb} ${n}${o.maximum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin} ${i.verb} ${n}${o.minimum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin} \u10D8\u10E7\u10DD\u10E1 ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.prefix}"-\u10D8\u10D7`:n.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.suffix}"-\u10D8\u10D7`:n.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${n.includes}"-\u10E1`:n.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${n.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[n.format]??o.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${o.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${o.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${N(o.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${o.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${o.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}},"error");function x_(){return{localeError:Yq()}}a(x_,"default");var eL=a(()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(n))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(n===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return n=>{switch(n.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${G(n.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${n.maximum.toString()} ${c.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${i} ${n.minimum.toString()} ${c.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${i} ${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${i.prefix}"`:i.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${i.suffix}"`:i.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${i.includes}"`:i.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${i.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${n.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${N(n.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}},"error");function Gs(){return{localeError:eL()}}a(Gs,"default");function w_(){return Gs()}a(w_,"default");var tL=a(()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return n=>{switch(n.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${n.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(n.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return n.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${G(n.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${N(n.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let i=n.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",c=i==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",u=t(n.origin),l=u?.unit??"\uC694\uC18C";return u?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()}${l} ${i}${c}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()} ${i}${c}`}case"too_small":{let i=n.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",c=i==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",u=t(n.origin),l=u?.unit??"\uC694\uC18C";return u?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()}${l} ${i}${c}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()} ${i}${c}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:i.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${i.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${o[i.format]??n.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${n.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${N(n.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${n.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${n.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}},"error");function S_(){return{localeError:tL()}}a(S_,"default");var rL=a(e=>Js(typeof e,e),"parsedType"),Js=a((e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return t===void 0?"ne\u017Einomas objektas":t===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return e},"parsedTypeFromType"),Ks=a(e=>e.charAt(0).toUpperCase()+e.slice(1),"capitalizeFirstCharacter");function gk(e){let t=Math.abs(e),r=t%10,o=t%100;return o>=11&&o<=19||r===0?"many":r===1?"one":"few"}a(gk,"getUnitTypeFromNumber");var nL=a(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(o,n,i,c){let u=e[o]??null;return u===null?u:{unit:u.unit[n],verb:u.verb[c][i?"inclusive":"notInclusive"]}}a(t,"getSizing");let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return o=>{switch(o.code){case"invalid_type":return`Gautas tipas ${rL(o.input)}, o tik\u0117tasi - ${Js(o.expected)}`;case"invalid_value":return o.values.length===1?`Privalo b\u016Bti ${G(o.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${N(o.values,"|")} pasirinkim\u0173`;case"too_big":{let n=Js(o.origin),i=t(o.origin,gk(Number(o.maximum)),o.inclusive??!1,"smaller");if(i?.verb)return`${Ks(n??o.origin??"reik\u0161m\u0117")} ${i.verb} ${o.maximum.toString()} ${i.unit??"element\u0173"}`;let c=o.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Ks(n??o.origin??"reik\u0161m\u0117")} turi b\u016Bti ${c} ${o.maximum.toString()} ${i?.unit}`}case"too_small":{let n=Js(o.origin),i=t(o.origin,gk(Number(o.minimum)),o.inclusive??!1,"bigger");if(i?.verb)return`${Ks(n??o.origin??"reik\u0161m\u0117")} ${i.verb} ${o.minimum.toString()} ${i.unit??"element\u0173"}`;let c=o.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Ks(n??o.origin??"reik\u0161m\u0117")} turi b\u016Bti ${c} ${o.minimum.toString()} ${i?.unit}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${n.prefix}"`:n.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${n.suffix}"`:n.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${n.includes}"`:n.format==="regex"?`Eilut\u0117 privalo atitikti ${n.pattern}`:`Neteisingas ${r[n.format]??o.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${o.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${o.keys.length>1?"i":"as"} rakt${o.keys.length>1?"ai":"as"}: ${N(o.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let n=Js(o.origin);return`${Ks(n??o.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}},"error");function T_(){return{localeError:nL()}}a(T_,"default");var oL=a(()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(n))return"\u043D\u0438\u0437\u0430";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return n=>{switch(n.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${G(n.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${i}${n.maximum.toString()} ${c.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0438\u043C\u0430 ${i}${n.minimum.toString()} ${c.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${i.pattern}`:`Invalid ${o[i.format]??n.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${n.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${n.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}},"error");function I_(){return{localeError:oL()}}a(I_,"default");var iL=a(()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"nombor";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak sah: dijangka ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak sah: dijangka ${G(n.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Terlalu besar: dijangka ${n.origin??"nilai"} ${c.verb} ${i}${n.maximum.toString()} ${c.unit??"elemen"}`:`Terlalu besar: dijangka ${n.origin??"nilai"} adalah ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Terlalu kecil: dijangka ${n.origin} ${c.verb} ${i}${n.minimum.toString()} ${c.unit}`:`Terlalu kecil: dijangka ${n.origin} adalah ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${o[i.format]??n.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`;default:return"Input tidak sah"}}},"error");function E_(){return{localeError:iL()}}a(E_,"default");var aL=a(()=>{let e={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"getal";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return n=>{switch(n.code){case"invalid_type":return`Ongeldige invoer: verwacht ${n.expected}, ontving ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ongeldige invoer: verwacht ${G(n.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Te groot: verwacht dat ${n.origin??"waarde"} ${c.verb} ${i}${n.maximum.toString()} ${c.unit??"elementen"}`:`Te groot: verwacht dat ${n.origin??"waarde"} ${i}${n.maximum.toString()} is`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Te klein: verwacht dat ${n.origin} ${c.verb} ${i}${n.minimum.toString()} ${c.unit}`:`Te klein: verwacht dat ${n.origin} ${i}${n.minimum.toString()} is`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${o[i.format]??n.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`;default:return"Ongeldige invoer"}}},"error");function k_(){return{localeError:aL()}}a(k_,"default");var sL=a(()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"tall";case"object":{if(Array.isArray(n))return"liste";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Ugyldig input: forventet ${n.expected}, fikk ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ugyldig verdi: forventet ${G(n.values[0])}`:`Ugyldig valg: forventet en av ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${i}${n.maximum.toString()} ${c.unit??"elementer"}`:`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`For lite(n): forventet ${n.origin} til \xE5 ha ${i}${n.minimum.toString()} ${c.unit}`:`For lite(n): forventet ${n.origin} til \xE5 ha ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${i.pattern}`:`Ugyldig ${o[i.format]??n.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${n.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`;default:return"Ugyldig input"}}},"error");function P_(){return{localeError:sL()}}a(P_,"default");var cL=a(()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"numara";case"object":{if(Array.isArray(n))return"saf";if(n===null)return"gayb";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return n=>{switch(n.code){case"invalid_type":return`F\xE2sit giren: umulan ${n.expected}, al\u0131nan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`F\xE2sit giren: umulan ${G(n.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${i}${n.maximum.toString()} ${c.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${i}${n.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${i}${n.minimum.toString()} ${c.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${i}${n.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let i=n;return i.format==="starts_with"?`F\xE2sit metin: "${i.prefix}" ile ba\u015Flamal\u0131.`:i.format==="ends_with"?`F\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\xE2sit metin: "${i.includes}" ihtiv\xE2 etmeli.`:i.format==="regex"?`F\xE2sit metin: ${i.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${o[i.format]??n.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${n.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${n.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}},"error");function $_(){return{localeError:cL()}}a($_,"default");var uL=a(()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0627\u0631\u06D0";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return n=>{switch(n.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${n.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(n.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return n.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${G(n.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${N(n.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${n.maximum.toString()} ${c.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${n.maximum.toString()} \u0648\u064A`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${i}${n.minimum.toString()} ${c.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${i}${n.minimum.toString()} \u0648\u064A`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:i.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:i.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${i.includes}" \u0648\u0644\u0631\u064A`:i.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${i.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${o[i.format]??n.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${n.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${n.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${n.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${n.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}},"error");function A_(){return{localeError:uL()}}a(A_,"default");var lL=a(()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"liczba";case"object":{if(Array.isArray(n))return"tablica";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return n=>{switch(n.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${n.expected}, otrzymano ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${G(n.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${n.maximum.toString()} ${c.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${n.minimum.toString()} ${c.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${i.pattern}`:`Nieprawid\u0142ow(y/a/e) ${o[i.format]??n.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${n.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${n.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}},"error");function C_(){return{localeError:lL()}}a(C_,"default");var dL=a(()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(n))return"array";if(n===null)return"nulo";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${n.expected}, recebido ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: esperado ${G(n.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Muito grande: esperado que ${n.origin??"valor"} tivesse ${i}${n.maximum.toString()} ${c.unit??"elementos"}`:`Muito grande: esperado que ${n.origin??"valor"} fosse ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Muito pequeno: esperado que ${n.origin} tivesse ${i}${n.minimum.toString()} ${c.unit}`:`Muito pequeno: esperado que ${n.origin} fosse ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${i.pattern}`:`${o[i.format]??n.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${n.origin}`;default:return"Campo inv\xE1lido"}}},"error");function O_(){return{localeError:dL()}}a(O_,"default");function yk(e,t,r,o){let n=Math.abs(e),i=n%10,c=n%100;return c>=11&&c<=19?o:i===1?t:i>=2&&i<=4?r:o}a(yk,"getRussianPlural");var pL=a(()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${G(n.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);if(c){let u=Number(n.maximum),l=yk(u,c.unit.one,c.unit.few,c.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${n.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);if(c){let u=Number(n.minimum),l=yk(u,c.unit.one,c.unit.few,c.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${n.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${n.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0438":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}},"error");function R_(){return{localeError:pL()}}a(R_,"default");var mL=a(()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(n))return"tabela";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return n=>{switch(n.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${n.expected}, prejeto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${G(n.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} imelo ${i}${n.maximum.toString()} ${c.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Premajhno: pri\u010Dakovano, da bo ${n.origin} imelo ${i}${n.minimum.toString()} ${c.unit}`:`Premajhno: pri\u010Dakovano, da bo ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${o[i.format]??n.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${N(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${n.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`;default:return"Neveljaven vnos"}}},"error");function N_(){return{localeError:mL()}}a(N_,"default");var fL=a(()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"antal";case"object":{if(Array.isArray(n))return"lista";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return n=>{switch(n.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${n.expected}, fick ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${G(n.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`F\xF6r stor(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${i}${n.maximum.toString()} ${c.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${n.origin??"v\xE4rdet"} att ha ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${i}${n.minimum.toString()} ${c.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${o[i.format]??n.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${n.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${n.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}},"error");function j_(){return{localeError:fL()}}a(j_,"default");var hL=a(()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(n))return"\u0B85\u0BA3\u0BBF";if(n===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${G(n.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${N(n.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${n.maximum.toString()} ${c.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${n.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${i}${n.minimum.toString()} ${c.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${i}${n.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${i.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${n.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${n.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}},"error");function D_(){return{localeError:hL()}}a(D_,"default");var gL=a(()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(n))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(n===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return n=>{switch(n.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${n.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${G(n.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",c=t(n.origin);return c?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${n.maximum.toString()} ${c.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",c=t(n.origin);return c?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${n.minimum.toString()} ${c.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${i.suffix}"`:i.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${i.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:i.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${i.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${o[i.format]??n.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${n.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${N(n.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}},"error");function z_(){return{localeError:gL()}}a(z_,"default");var yL=a(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},"parsedType"),vL=a(()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(o){return e[o]??null}a(t,"getSizing");let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return o=>{switch(o.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${o.expected}, al\u0131nan ${yL(o.input)}`;case"invalid_value":return o.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${G(o.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${N(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",i=t(o.origin);return i?`\xC7ok b\xFCy\xFCk: beklenen ${o.origin??"de\u011Fer"} ${n}${o.maximum.toString()} ${i.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${o.origin??"de\u011Fer"} ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",i=t(o.origin);return i?`\xC7ok k\xFC\xE7\xFCk: beklenen ${o.origin} ${n}${o.minimum.toString()} ${i.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${o.origin} ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`Ge\xE7ersiz metin: "${n.prefix}" ile ba\u015Flamal\u0131`:n.format==="ends_with"?`Ge\xE7ersiz metin: "${n.suffix}" ile bitmeli`:n.format==="includes"?`Ge\xE7ersiz metin: "${n.includes}" i\xE7ermeli`:n.format==="regex"?`Ge\xE7ersiz metin: ${n.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[n.format]??o.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${o.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${o.keys.length>1?"lar":""}: ${N(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${o.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}},"error");function M_(){return{localeError:vL()}}a(M_,"default");var _L=a(()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${n.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${G(n.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${c.verb} ${i}${n.maximum.toString()} ${c.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} ${c.verb} ${i}${n.minimum.toString()} ${c.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} \u0431\u0443\u0434\u0435 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0456":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${n.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}},"error");function Ws(){return{localeError:_L()}}a(Ws,"default");function U_(){return Ws()}a(U_,"default");var bL=a(()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(n))return"\u0622\u0631\u06D2";if(n===null)return"\u0646\u0644";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return n=>{switch(n.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${n.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(n.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return n.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${G(n.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${N(n.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${i}${n.maximum.toString()} ${c.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${i}${n.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u06D2 ${i}${n.minimum.toString()} ${c.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u0627 ${i}${n.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${i.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${n.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${n.keys.length>1?"\u0632":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}},"error");function q_(){return{localeError:bL()}}a(q_,"default");var xL=a(()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(n))return"m\u1EA3ng";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return n=>{switch(n.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${n.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${G(n.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${c.verb} ${i}${n.maximum.toString()} ${c.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${c.verb} ${i}${n.minimum.toString()} ${c.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${i.pattern}`:`${o[i.format]??n.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${n.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${N(n.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}},"error");function L_(){return{localeError:xL()}}a(L_,"default");var wL=a(()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(n))return"\u6570\u7EC4";if(n===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${n.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${G(n.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${i}${n.maximum.toString()} ${c.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${i}${n.minimum.toString()} ${c.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.prefix}" \u5F00\u5934`:i.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.suffix}" \u7ED3\u5C3E`:i.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${i.pattern}`:`\u65E0\u6548${o[i.format]??n.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${n.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${n.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}},"error");function F_(){return{localeError:wL()}}a(F_,"default");var SL=a(()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${n.expected}\uFF0C\u4F46\u6536\u5230 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${G(n.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${i}${n.maximum.toString()} ${c.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${i}${n.minimum.toString()} ${c.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.prefix}" \u958B\u982D`:i.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.suffix}" \u7D50\u5C3E`:i.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${i.pattern}`:`\u7121\u6548\u7684 ${o[i.format]??n.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${n.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${n.keys.length>1?"\u5011":""}\uFF1A${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}},"error");function B_(){return{localeError:SL()}}a(B_,"default");var TL=a(()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(n){return e[n]??null}a(t,"getSizing");let r=a(n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(n))return"akop\u1ECD";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},"parsedType"),o={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return n=>{switch(n.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${n.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${G(n.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${N(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",c=t(n.origin);return c?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin??"iye"} ${c.verb} ${i}${n.maximum} ${c.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${n.maximum}`}case"too_small":{let i=n.inclusive?">=":">",c=t(n.origin);return c?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin} ${c.verb} ${i}${n.minimum} ${c.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${n.minimum}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${i.prefix}"`:i.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${i.suffix}"`:i.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${i.includes}"`:i.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${i.pattern}`:`A\u1E63\xEC\u1E63e: ${o[i.format]??n.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${n.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${N(n.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}},"error");function V_(){return{localeError:TL()}}a(V_,"default");var vk,Z_=Symbol("ZodOutput"),H_=Symbol("ZodInput"),Yi=class{static{a(this,"$ZodRegistry")}constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){let o=r[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){let r=t._zod.parent;if(r){let o={...this.get(r)??{}};delete o.id;let n={...o,...this._map.get(t)};return Object.keys(n).length?n:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};function xd(){return new Yi}a(xd,"registry");(vk=globalThis).__zod_globalRegistry??(vk.__zod_globalRegistry=xd());var er=globalThis.__zod_globalRegistry;function G_(e,t){return new e({type:"string",...W(t)})}a(G_,"_string");function K_(e,t){return new e({type:"string",coerce:!0,...W(t)})}a(K_,"_coercedString");function wd(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...W(t)})}a(wd,"_email");function Xs(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...W(t)})}a(Xs,"_guid");function Sd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...W(t)})}a(Sd,"_uuid");function Td(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(t)})}a(Td,"_uuidv4");function Id(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(t)})}a(Id,"_uuidv6");function Ed(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(t)})}a(Ed,"_uuidv7");function Ys(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...W(t)})}a(Ys,"_url");function kd(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...W(t)})}a(kd,"_emoji");function Pd(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(t)})}a(Pd,"_nanoid");function $d(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...W(t)})}a($d,"_cuid");function Ad(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(t)})}a(Ad,"_cuid2");function Cd(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...W(t)})}a(Cd,"_ulid");function Od(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...W(t)})}a(Od,"_xid");function Rd(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(t)})}a(Rd,"_ksuid");function Nd(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(t)})}a(Nd,"_ipv4");function jd(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(t)})}a(jd,"_ipv6");function J_(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...W(t)})}a(J_,"_mac");function Dd(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(t)})}a(Dd,"_cidrv4");function zd(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(t)})}a(zd,"_cidrv6");function Md(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...W(t)})}a(Md,"_base64");function Ud(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...W(t)})}a(Ud,"_base64url");function qd(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...W(t)})}a(qd,"_e164");function Ld(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...W(t)})}a(Ld,"_jwt");var W_={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Q_(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(t)})}a(Q_,"_isoDateTime");function X_(e,t){return new e({type:"string",format:"date",check:"string_format",...W(t)})}a(X_,"_isoDate");function Y_(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...W(t)})}a(Y_,"_isoTime");function eb(e,t){return new e({type:"string",format:"duration",check:"string_format",...W(t)})}a(eb,"_isoDuration");function tb(e,t){return new e({type:"number",checks:[],...W(t)})}a(tb,"_number");function rb(e,t){return new e({type:"number",coerce:!0,checks:[],...W(t)})}a(rb,"_coercedNumber");function nb(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...W(t)})}a(nb,"_int");function ob(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...W(t)})}a(ob,"_float32");function ib(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...W(t)})}a(ib,"_float64");function ab(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...W(t)})}a(ab,"_int32");function sb(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...W(t)})}a(sb,"_uint32");function cb(e,t){return new e({type:"boolean",...W(t)})}a(cb,"_boolean");function ub(e,t){return new e({type:"boolean",coerce:!0,...W(t)})}a(ub,"_coercedBoolean");function lb(e,t){return new e({type:"bigint",...W(t)})}a(lb,"_bigint");function db(e,t){return new e({type:"bigint",coerce:!0,...W(t)})}a(db,"_coercedBigint");function pb(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...W(t)})}a(pb,"_int64");function mb(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...W(t)})}a(mb,"_uint64");function fb(e,t){return new e({type:"symbol",...W(t)})}a(fb,"_symbol");function hb(e,t){return new e({type:"undefined",...W(t)})}a(hb,"_undefined");function gb(e,t){return new e({type:"null",...W(t)})}a(gb,"_null");function yb(e){return new e({type:"any"})}a(yb,"_any");function vb(e){return new e({type:"unknown"})}a(vb,"_unknown");function _b(e,t){return new e({type:"never",...W(t)})}a(_b,"_never");function bb(e,t){return new e({type:"void",...W(t)})}a(bb,"_void");function xb(e,t){return new e({type:"date",...W(t)})}a(xb,"_date");function wb(e,t){return new e({type:"date",coerce:!0,...W(t)})}a(wb,"_coercedDate");function Sb(e,t){return new e({type:"nan",...W(t)})}a(Sb,"_nan");function Rn(e,t){return new ld({check:"less_than",...W(t),value:e,inclusive:!1})}a(Rn,"_lt");function Rr(e,t){return new ld({check:"less_than",...W(t),value:e,inclusive:!0})}a(Rr,"_lte");function Nn(e,t){return new dd({check:"greater_than",...W(t),value:e,inclusive:!1})}a(Nn,"_gt");function fr(e,t){return new dd({check:"greater_than",...W(t),value:e,inclusive:!0})}a(fr,"_gte");function Tb(e){return Nn(0,e)}a(Tb,"_positive");function Ib(e){return Rn(0,e)}a(Ib,"_negative");function Eb(e){return Rr(0,e)}a(Eb,"_nonpositive");function kb(e){return fr(0,e)}a(kb,"_nonnegative");function Ho(e,t){return new ky({check:"multiple_of",...W(t),value:e})}a(Ho,"_multipleOf");function ea(e,t){return new Ay({check:"max_size",...W(t),maximum:e})}a(ea,"_maxSize");function Go(e,t){return new Cy({check:"min_size",...W(t),minimum:e})}a(Go,"_minSize");function ec(e,t){return new Oy({check:"size_equals",...W(t),size:e})}a(ec,"_size");function ta(e,t){return new Ry({check:"max_length",...W(t),maximum:e})}a(ta,"_maxLength");function go(e,t){return new Ny({check:"min_length",...W(t),minimum:e})}a(go,"_minLength");function ra(e,t){return new jy({check:"length_equals",...W(t),length:e})}a(ra,"_length");function tc(e,t){return new Dy({check:"string_format",format:"regex",...W(t),pattern:e})}a(tc,"_regex");function rc(e){return new zy({check:"string_format",format:"lowercase",...W(e)})}a(rc,"_lowercase");function nc(e){return new My({check:"string_format",format:"uppercase",...W(e)})}a(nc,"_uppercase");function oc(e,t){return new Uy({check:"string_format",format:"includes",...W(t),includes:e})}a(oc,"_includes");function ic(e,t){return new qy({check:"string_format",format:"starts_with",...W(t),prefix:e})}a(ic,"_startsWith");function ac(e,t){return new Ly({check:"string_format",format:"ends_with",...W(t),suffix:e})}a(ac,"_endsWith");function Pb(e,t,r){return new Fy({check:"property",property:e,schema:t,...W(r)})}a(Pb,"_property");function sc(e,t){return new By({check:"mime_type",mime:e,...W(t)})}a(sc,"_mime");function cn(e){return new Vy({check:"overwrite",tx:e})}a(cn,"_overwrite");function cc(e){return cn(t=>t.normalize(e))}a(cc,"_normalize");function uc(){return cn(e=>e.trim())}a(uc,"_trim");function lc(){return cn(e=>e.toLowerCase())}a(lc,"_toLowerCase");function dc(){return cn(e=>e.toUpperCase())}a(dc,"_toUpperCase");function pc(){return cn(e=>Lg(e))}a(pc,"_slugify");function $b(e,t,r){return new e({type:"array",element:t,...W(r)})}a($b,"_array");function EL(e,t,r){return new e({type:"union",options:t,...W(r)})}a(EL,"_union");function kL(e,t,r,o){return new e({type:"union",options:r,discriminator:t,...W(o)})}a(kL,"_discriminatedUnion");function PL(e,t,r){return new e({type:"intersection",left:t,right:r})}a(PL,"_intersection");function $L(e,t,r,o){let n=r instanceof ke,i=n?o:r,c=n?r:null;return new e({type:"tuple",items:t,rest:c,...W(i)})}a($L,"_tuple");function AL(e,t,r,o){return new e({type:"record",keyType:t,valueType:r,...W(o)})}a(AL,"_record");function CL(e,t,r,o){return new e({type:"map",keyType:t,valueType:r,...W(o)})}a(CL,"_map");function OL(e,t,r){return new e({type:"set",valueType:t,...W(r)})}a(OL,"_set");function RL(e,t,r){let o=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new e({type:"enum",entries:o,...W(r)})}a(RL,"_enum");function NL(e,t,r){return new e({type:"enum",entries:t,...W(r)})}a(NL,"_nativeEnum");function jL(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...W(r)})}a(jL,"_literal");function Ab(e,t){return new e({type:"file",...W(t)})}a(Ab,"_file");function DL(e,t){return new e({type:"transform",transform:t})}a(DL,"_transform");function zL(e,t){return new e({type:"optional",innerType:t})}a(zL,"_optional");function ML(e,t){return new e({type:"nullable",innerType:t})}a(ML,"_nullable");function UL(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():Bg(r)}})}a(UL,"_default");function qL(e,t,r){return new e({type:"nonoptional",innerType:t,...W(r)})}a(qL,"_nonoptional");function LL(e,t){return new e({type:"success",innerType:t})}a(LL,"_success");function FL(e,t,r){return new e({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}a(FL,"_catch");function BL(e,t,r){return new e({type:"pipe",in:t,out:r})}a(BL,"_pipe");function VL(e,t){return new e({type:"readonly",innerType:t})}a(VL,"_readonly");function ZL(e,t,r){return new e({type:"template_literal",parts:t,...W(r)})}a(ZL,"_templateLiteral");function HL(e,t){return new e({type:"lazy",getter:t})}a(HL,"_lazy");function GL(e,t){return new e({type:"promise",innerType:t})}a(GL,"_promise");function Cb(e,t,r){let o=W(r);return o.abort??(o.abort=!0),new e({type:"custom",check:"custom",fn:t,...o})}a(Cb,"_custom");function Ob(e,t,r){return new e({type:"custom",check:"custom",fn:t,...W(r)})}a(Ob,"_refine");function Rb(e){let t=_k(r=>(r.addIssue=o=>{if(typeof o=="string")r.issues.push(Gi(o,r.value,t._zod.def));else{let n=o;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(Gi(n))}},e(r.value,r)));return t}a(Rb,"_superRefine");function _k(e,t){let r=new Xe({check:"custom",...W(t)});return r._zod.check=e,r}a(_k,"_check");function Nb(e){let t=new Xe({check:"describe"});return t._zod.onattach=[r=>{let o=er.get(r)??{};er.add(r,{...o,description:e})}],t._zod.check=()=>{},t}a(Nb,"describe");function jb(e){let t=new Xe({check:"meta"});return t._zod.onattach=[r=>{let o=er.get(r)??{};er.add(r,{...o,...e})}],t._zod.check=()=>{},t}a(jb,"meta");function Db(e,t){let r=W(t),o=r.truthy??["true","1","yes","on","y","enabled"],n=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(o=o.map(g=>typeof g=="string"?g.toLowerCase():g),n=n.map(g=>typeof g=="string"?g.toLowerCase():g));let i=new Set(o),c=new Set(n),u=e.Codec??Zs,l=e.Boolean??Vs,d=e.String??Zo,p=new d({type:"string",error:r.error}),m=new l({type:"boolean",error:r.error}),f=new u({type:"pipe",in:p,out:m,transform:a(((g,h)=>{let v=g;return r.case!=="sensitive"&&(v=v.toLowerCase()),i.has(v)?!0:c.has(v)?!1:(h.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...c],input:h.value,inst:f,continue:!1}),{})}),"transform"),reverseTransform:a(((g,h)=>g===!0?o[0]||"true":n[0]||"false"),"reverseTransform"),error:r.error});return f}a(Db,"_stringbool");function na(e,t,r,o={}){let n=W(o),i={...W(o),check:"string_format",type:"string",format:t,fn:typeof r=="function"?r:u=>r.test(u),...n};return r instanceof RegExp&&(i.pattern=r),new e(i)}a(na,"_stringFormat");var mc=class{static{a(this,"JSONSchemaGenerator")}constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??er,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var o;let n=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},c=this.seen.get(t);if(c)return c.count++,r.schemaPath.includes(t)&&(c.cycle=r.path),c.schema;let u={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,u);let l=t._zod.toJSONSchema?.();if(l)u.schema=l;else{let m={...r,schemaPath:[...r.schemaPath,t],path:r.path},f=t._zod.parent;if(f)u.ref=f,this.process(f,m),this.seen.get(f).isParent=!0;else{let g=u.schema;switch(n.type){case"string":{let h=g;h.type="string";let{minimum:v,maximum:x,format:S,patterns:b,contentEncoding:w}=t._zod.bag;if(typeof v=="number"&&(h.minLength=v),typeof x=="number"&&(h.maxLength=x),S&&(h.format=i[S]??S,h.format===""&&delete h.format),w&&(h.contentEncoding=w),b&&b.size>0){let P=[...b];P.length===1?h.pattern=P[0].source:P.length>1&&(u.schema.allOf=[...P.map(B=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:B.source}))])}break}case"number":{let h=g,{minimum:v,maximum:x,format:S,multipleOf:b,exclusiveMaximum:w,exclusiveMinimum:P}=t._zod.bag;typeof S=="string"&&S.includes("int")?h.type="integer":h.type="number",typeof P=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(h.minimum=P,h.exclusiveMinimum=!0):h.exclusiveMinimum=P),typeof v=="number"&&(h.minimum=v,typeof P=="number"&&this.target!=="draft-4"&&(P>=v?delete h.minimum:delete h.exclusiveMinimum)),typeof w=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(h.maximum=w,h.exclusiveMaximum=!0):h.exclusiveMaximum=w),typeof x=="number"&&(h.maximum=x,typeof w=="number"&&this.target!=="draft-4"&&(w<=x?delete h.maximum:delete h.exclusiveMaximum)),typeof b=="number"&&(h.multipleOf=b);break}case"boolean":{let h=g;h.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(g.type="string",g.nullable=!0,g.enum=[null]):g.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{g.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let h=g,{minimum:v,maximum:x}=t._zod.bag;typeof v=="number"&&(h.minItems=v),typeof x=="number"&&(h.maxItems=x),h.type="array",h.items=this.process(n.element,{...m,path:[...m.path,"items"]});break}case"object":{let h=g;h.type="object",h.properties={};let v=n.shape;for(let b in v)h.properties[b]=this.process(v[b],{...m,path:[...m.path,"properties",b]});let x=new Set(Object.keys(v)),S=new Set([...x].filter(b=>{let w=n.shape[b]._zod;return this.io==="input"?w.optin===void 0:w.optout===void 0}));S.size>0&&(h.required=Array.from(S)),n.catchall?._zod.def.type==="never"?h.additionalProperties=!1:n.catchall?n.catchall&&(h.additionalProperties=this.process(n.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(h.additionalProperties=!1);break}case"union":{let h=g,v=n.discriminator!==void 0,x=n.options.map((S,b)=>this.process(S,{...m,path:[...m.path,v?"oneOf":"anyOf",b]}));v?h.oneOf=x:h.anyOf=x;break}case"intersection":{let h=g,v=this.process(n.left,{...m,path:[...m.path,"allOf",0]}),x=this.process(n.right,{...m,path:[...m.path,"allOf",1]}),S=a(w=>"allOf"in w&&Object.keys(w).length===1,"isSimpleIntersection"),b=[...S(v)?v.allOf:[v],...S(x)?x.allOf:[x]];h.allOf=b;break}case"tuple":{let h=g;h.type="array";let v=this.target==="draft-2020-12"?"prefixItems":"items",x=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",S=n.items.map((B,V)=>this.process(B,{...m,path:[...m.path,v,V]})),b=n.rest?this.process(n.rest,{...m,path:[...m.path,x,...this.target==="openapi-3.0"?[n.items.length]:[]]}):null;this.target==="draft-2020-12"?(h.prefixItems=S,b&&(h.items=b)):this.target==="openapi-3.0"?(h.items={anyOf:S},b&&h.items.anyOf.push(b),h.minItems=S.length,b||(h.maxItems=S.length)):(h.items=S,b&&(h.additionalItems=b));let{minimum:w,maximum:P}=t._zod.bag;typeof w=="number"&&(h.minItems=w),typeof P=="number"&&(h.maxItems=P);break}case"record":{let h=g;h.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(h.propertyNames=this.process(n.keyType,{...m,path:[...m.path,"propertyNames"]})),h.additionalProperties=this.process(n.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let h=g,v=Rs(n.entries);v.every(x=>typeof x=="number")&&(h.type="number"),v.every(x=>typeof x=="string")&&(h.type="string"),h.enum=v;break}case"literal":{let h=g,v=[];for(let x of n.values)if(x===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof x=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");v.push(Number(x))}else v.push(x);if(v.length!==0)if(v.length===1){let x=v[0];h.type=x===null?"null":typeof x,this.target==="draft-4"||this.target==="openapi-3.0"?h.enum=[x]:h.const=x}else v.every(x=>typeof x=="number")&&(h.type="number"),v.every(x=>typeof x=="string")&&(h.type="string"),v.every(x=>typeof x=="boolean")&&(h.type="string"),v.every(x=>x===null)&&(h.type="null"),h.enum=v;break}case"file":{let h=g,v={type:"string",format:"binary",contentEncoding:"binary"},{minimum:x,maximum:S,mime:b}=t._zod.bag;x!==void 0&&(v.minLength=x),S!==void 0&&(v.maxLength=S),b?b.length===1?(v.contentMediaType=b[0],Object.assign(h,v)):h.anyOf=b.map(w=>({...v,contentMediaType:w})):Object.assign(h,v);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let h=this.process(n.innerType,m);this.target==="openapi-3.0"?(u.ref=n.innerType,g.nullable=!0):g.anyOf=[h,{type:"null"}];break}case"nonoptional":{this.process(n.innerType,m),u.ref=n.innerType;break}case"success":{let h=g;h.type="boolean";break}case"default":{this.process(n.innerType,m),u.ref=n.innerType,g.default=JSON.parse(JSON.stringify(n.defaultValue));break}case"prefault":{this.process(n.innerType,m),u.ref=n.innerType,this.io==="input"&&(g._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break}case"catch":{this.process(n.innerType,m),u.ref=n.innerType;let h;try{h=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}g.default=h;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let h=g,v=t._zod.pattern;if(!v)throw new Error("Pattern not found in template literal");h.type="string",h.pattern=v.source;break}case"pipe":{let h=this.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;this.process(h,m),u.ref=h;break}case"readonly":{this.process(n.innerType,m),u.ref=n.innerType,g.readOnly=!0;break}case"promise":{this.process(n.innerType,m),u.ref=n.innerType;break}case"optional":{this.process(n.innerType,m),u.ref=n.innerType;break}case"lazy":{let h=t._zod.innerType;this.process(h,m),u.ref=h;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(t);return d&&Object.assign(u.schema,d),this.io==="input"&&tr(t)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((o=u.schema).default??(o.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(t).schema}emit(t,r){let o={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},n=this.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=a(p=>{let m=this.target==="draft-2020-12"?"$defs":"definitions";if(o.external){let v=o.external.registry.get(p[0])?.id,x=o.external.uri??(b=>b);if(v)return{ref:x(v)};let S=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=S,{defId:S,ref:`${x("__shared")}#/${m}/${S}`}}if(p[1]===n)return{ref:"#"};let g=`#/${m}/`,h=p[1].schema.id??`__schema${this.counter++}`;return{defId:h,ref:g+h}},"makeURI"),c=a(p=>{if(p[1].schema.$ref)return;let m=p[1],{ref:f,defId:g}=i(p);m.def={...m.schema},g&&(m.defId=g);let h=m.schema;for(let v in h)delete h[v];h.$ref=f},"extractToDef");if(o.cycles==="throw")for(let p of this.seen.entries()){let m=p[1];if(m.cycle)throw new Error(`Cycle detected: #/${m.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let m=p[1];if(t===p[0]){c(p);continue}if(o.external){let g=o.external.registry.get(p[0])?.id;if(t!==p[0]&&g){c(p);continue}}if(this.metadataRegistry.get(p[0])?.id){c(p);continue}if(m.cycle){c(p);continue}if(m.count>1&&o.reused==="ref"){c(p);continue}}let u=a((p,m)=>{let f=this.seen.get(p),g=f.def??f.schema,h={...g};if(f.ref===null)return;let v=f.ref;if(f.ref=null,v){u(v,m);let x=this.seen.get(v).schema;x.$ref&&(m.target==="draft-7"||m.target==="draft-4"||m.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(x)):(Object.assign(g,x),Object.assign(g,h))}f.isParent||this.override({zodSchema:p,jsonSchema:g,path:f.path??[]})},"flattenRef");for(let p of[...this.seen.entries()].reverse())u(p[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),o.external?.uri){let p=o.external.registry.get(t)?.id;if(!p)throw new Error("Schema is missing an `id` property");l.$id=o.external.uri(p)}Object.assign(l,n.def);let d=o.external?.defs??{};for(let p of this.seen.entries()){let m=p[1];m.def&&m.defId&&(d[m.defId]=m.def)}o.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?l.$defs=d:l.definitions=d);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}};function fc(e,t){if(e instanceof Yi){let o=new mc(t),n={};for(let u of e._idmap.entries()){let[l,d]=u;o.process(d)}let i={},c={registry:e,uri:t?.uri,defs:n};for(let u of e._idmap.entries()){let[l,d]=u;i[l]=o.emit(d,{...t,external:c})}if(Object.keys(n).length>0){let u=o.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[u]:n}}return{schemas:i}}let r=new mc(t);return r.process(e),r.emit(e,t)}a(fc,"toJSONSchema");function tr(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return tr(o.element,r);if(o.type==="set")return tr(o.valueType,r);if(o.type==="lazy")return tr(o.getter(),r);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return tr(o.innerType,r);if(o.type==="intersection")return tr(o.left,r)||tr(o.right,r);if(o.type==="record"||o.type==="map")return tr(o.keyType,r)||tr(o.valueType,r);if(o.type==="pipe")return tr(o.in,r)||tr(o.out,r);if(o.type==="object"){for(let n in o.shape)if(tr(o.shape[n],r))return!0;return!1}if(o.type==="union"){for(let n of o.options)if(tr(n,r))return!0;return!1}if(o.type==="tuple"){for(let n of o.items)if(tr(n,r))return!0;return!!(o.rest&&tr(o.rest,r))}return!1}a(tr,"isTransforming");var bk={};var Hd={};$r(Hd,{ZodISODate:()=>Bd,ZodISODateTime:()=>Fd,ZodISODuration:()=>Zd,ZodISOTime:()=>Vd,date:()=>Mb,datetime:()=>zb,duration:()=>qb,time:()=>Ub});var Fd=$("ZodISODateTime",(e,t)=>{ov.init(e,t),Ye.init(e,t)});function zb(e){return Q_(Fd,e)}a(zb,"datetime");var Bd=$("ZodISODate",(e,t)=>{iv.init(e,t),Ye.init(e,t)});function Mb(e){return X_(Bd,e)}a(Mb,"date");var Vd=$("ZodISOTime",(e,t)=>{av.init(e,t),Ye.init(e,t)});function Ub(e){return Y_(Vd,e)}a(Ub,"time");var Zd=$("ZodISODuration",(e,t)=>{sv.init(e,t),Ye.init(e,t)});function qb(e){return eb(Zd,e)}a(qb,"duration");var wk=a((e,t)=>{Ms.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:a(r=>qs(e,r),"value")},flatten:{value:a(r=>Us(e,r),"value")},addIssue:{value:a(r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Zi,2)},"value")},addIssues:{value:a(r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Zi,2)},"value")},isEmpty:{get(){return e.issues.length===0}}})},"initializer"),JL=$("ZodError",wk),hr=$("ZodError",wk,{Parent:Error});var Lb=Ki(hr),Fb=Ji(hr),Bb=Wi(hr),hc=Qi(hr),Vb=td(hr),Zb=rd(hr),Hb=nd(hr),Gb=od(hr),Kb=id(hr),Jb=ad(hr),Wb=sd(hr),Qb=cd(hr);var $e=$("ZodType",(e,t)=>(ke.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Q.mergeDefs(t,{checks:[...t.checks??[],...r.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(r,o)=>Yt(e,r,o),e.brand=()=>e,e.register=((r,o)=>(r.add(e,o),e)),e.parse=(r,o)=>Lb(e,r,o,{callee:e.parse}),e.safeParse=(r,o)=>Bb(e,r,o),e.parseAsync=async(r,o)=>Fb(e,r,o,{callee:e.parseAsync}),e.safeParseAsync=async(r,o)=>hc(e,r,o),e.spa=e.safeParseAsync,e.encode=(r,o)=>Vb(e,r,o),e.decode=(r,o)=>Zb(e,r,o),e.encodeAsync=async(r,o)=>Hb(e,r,o),e.decodeAsync=async(r,o)=>Gb(e,r,o),e.safeEncode=(r,o)=>Kb(e,r,o),e.safeDecode=(r,o)=>Jb(e,r,o),e.safeEncodeAsync=async(r,o)=>Wb(e,r,o),e.safeDecodeAsync=async(r,o)=>Qb(e,r,o),e.refine=(r,o)=>e.check(uP(r,o)),e.superRefine=r=>e.check(lP(r)),e.overwrite=r=>e.check(cn(r)),e.optional=()=>Kd(e),e.nullable=()=>Jd(e),e.nullish=()=>Kd(Jd(e)),e.nonoptional=r=>Qk(e,r),e.array=()=>Yd(e),e.or=r=>bx([e,r]),e.and=r=>zk(e,r),e.transform=r=>Wd(e,Sx(r)),e.default=r=>Kk(e,r),e.prefault=r=>Wk(e,r),e.catch=r=>eP(e,r),e.pipe=r=>Wd(e,r),e.readonly=()=>nP(e),e.describe=r=>{let o=e.clone();return er.add(o,{description:r}),o},Object.defineProperty(e,"description",{get(){return er.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return er.get(e);let o=e.clone();return er.add(o,r[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ex=$("_ZodString",(e,t)=>{Zo.init(e,t),$e.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...o)=>e.check(tc(...o)),e.includes=(...o)=>e.check(oc(...o)),e.startsWith=(...o)=>e.check(ic(...o)),e.endsWith=(...o)=>e.check(ac(...o)),e.min=(...o)=>e.check(go(...o)),e.max=(...o)=>e.check(ta(...o)),e.length=(...o)=>e.check(ra(...o)),e.nonempty=(...o)=>e.check(go(1,...o)),e.lowercase=o=>e.check(rc(o)),e.uppercase=o=>e.check(nc(o)),e.trim=()=>e.check(uc()),e.normalize=(...o)=>e.check(cc(...o)),e.toLowerCase=()=>e.check(lc()),e.toUpperCase=()=>e.check(dc()),e.slugify=()=>e.check(pc())}),yc=$("ZodString",(e,t)=>{Zo.init(e,t),ex.init(e,t),e.email=r=>e.check(wd(tx,r)),e.url=r=>e.check(Ys(Qd,r)),e.jwt=r=>e.check(Ld(gx,r)),e.emoji=r=>e.check(kd(rx,r)),e.guid=r=>e.check(Xs(Gd,r)),e.uuid=r=>e.check(Sd(Dn,r)),e.uuidv4=r=>e.check(Td(Dn,r)),e.uuidv6=r=>e.check(Id(Dn,r)),e.uuidv7=r=>e.check(Ed(Dn,r)),e.nanoid=r=>e.check(Pd(nx,r)),e.guid=r=>e.check(Xs(Gd,r)),e.cuid=r=>e.check($d(ox,r)),e.cuid2=r=>e.check(Ad(ix,r)),e.ulid=r=>e.check(Cd(ax,r)),e.base64=r=>e.check(Md(mx,r)),e.base64url=r=>e.check(Ud(fx,r)),e.xid=r=>e.check(Od(sx,r)),e.ksuid=r=>e.check(Rd(cx,r)),e.ipv4=r=>e.check(Nd(ux,r)),e.ipv6=r=>e.check(jd(lx,r)),e.cidrv4=r=>e.check(Dd(dx,r)),e.cidrv6=r=>e.check(zd(px,r)),e.e164=r=>e.check(qd(hx,r)),e.datetime=r=>e.check(zb(r)),e.date=r=>e.check(Mb(r)),e.time=r=>e.check(Ub(r)),e.duration=r=>e.check(qb(r))});function Xb(e){return G_(yc,e)}a(Xb,"string");var Ye=$("ZodStringFormat",(e,t)=>{Ke.init(e,t),ex.init(e,t)}),tx=$("ZodEmail",(e,t)=>{Jy.init(e,t),Ye.init(e,t)});function QL(e){return wd(tx,e)}a(QL,"email");var Gd=$("ZodGUID",(e,t)=>{Gy.init(e,t),Ye.init(e,t)});function XL(e){return Xs(Gd,e)}a(XL,"guid");var Dn=$("ZodUUID",(e,t)=>{Ky.init(e,t),Ye.init(e,t)});function YL(e){return Sd(Dn,e)}a(YL,"uuid");function e4(e){return Td(Dn,e)}a(e4,"uuidv4");function t4(e){return Id(Dn,e)}a(t4,"uuidv6");function r4(e){return Ed(Dn,e)}a(r4,"uuidv7");var Qd=$("ZodURL",(e,t)=>{Wy.init(e,t),Ye.init(e,t)});function n4(e){return Ys(Qd,e)}a(n4,"url");function o4(e){return Ys(Qd,{protocol:/^https?$/,hostname:Or.domain,...Q.normalizeParams(e)})}a(o4,"httpUrl");var rx=$("ZodEmoji",(e,t)=>{Qy.init(e,t),Ye.init(e,t)});function i4(e){return kd(rx,e)}a(i4,"emoji");var nx=$("ZodNanoID",(e,t)=>{Xy.init(e,t),Ye.init(e,t)});function a4(e){return Pd(nx,e)}a(a4,"nanoid");var ox=$("ZodCUID",(e,t)=>{Yy.init(e,t),Ye.init(e,t)});function s4(e){return $d(ox,e)}a(s4,"cuid");var ix=$("ZodCUID2",(e,t)=>{ev.init(e,t),Ye.init(e,t)});function c4(e){return Ad(ix,e)}a(c4,"cuid2");var ax=$("ZodULID",(e,t)=>{tv.init(e,t),Ye.init(e,t)});function u4(e){return Cd(ax,e)}a(u4,"ulid");var sx=$("ZodXID",(e,t)=>{rv.init(e,t),Ye.init(e,t)});function l4(e){return Od(sx,e)}a(l4,"xid");var cx=$("ZodKSUID",(e,t)=>{nv.init(e,t),Ye.init(e,t)});function d4(e){return Rd(cx,e)}a(d4,"ksuid");var ux=$("ZodIPv4",(e,t)=>{cv.init(e,t),Ye.init(e,t)});function p4(e){return Nd(ux,e)}a(p4,"ipv4");var Sk=$("ZodMAC",(e,t)=>{lv.init(e,t),Ye.init(e,t)});function m4(e){return J_(Sk,e)}a(m4,"mac");var lx=$("ZodIPv6",(e,t)=>{uv.init(e,t),Ye.init(e,t)});function f4(e){return jd(lx,e)}a(f4,"ipv6");var dx=$("ZodCIDRv4",(e,t)=>{dv.init(e,t),Ye.init(e,t)});function h4(e){return Dd(dx,e)}a(h4,"cidrv4");var px=$("ZodCIDRv6",(e,t)=>{pv.init(e,t),Ye.init(e,t)});function g4(e){return zd(px,e)}a(g4,"cidrv6");var mx=$("ZodBase64",(e,t)=>{fv.init(e,t),Ye.init(e,t)});function y4(e){return Md(mx,e)}a(y4,"base64");var fx=$("ZodBase64URL",(e,t)=>{hv.init(e,t),Ye.init(e,t)});function v4(e){return Ud(fx,e)}a(v4,"base64url");var hx=$("ZodE164",(e,t)=>{gv.init(e,t),Ye.init(e,t)});function _4(e){return qd(hx,e)}a(_4,"e164");var gx=$("ZodJWT",(e,t)=>{yv.init(e,t),Ye.init(e,t)});function b4(e){return Ld(gx,e)}a(b4,"jwt");var vc=$("ZodCustomStringFormat",(e,t)=>{vv.init(e,t),Ye.init(e,t)});function x4(e,t,r={}){return na(vc,e,t,r)}a(x4,"stringFormat");function w4(e){return na(vc,"hostname",Or.hostname,e)}a(w4,"hostname");function S4(e){return na(vc,"hex",Or.hex,e)}a(S4,"hex");function T4(e,t){let r=t?.enc??"hex",o=`${e}_${r}`,n=Or[o];if(!n)throw new Error(`Unrecognized hash format: ${o}`);return na(vc,o,n,t)}a(T4,"hash");var _c=$("ZodNumber",(e,t)=>{yd.init(e,t),$e.init(e,t),e.gt=(o,n)=>e.check(Nn(o,n)),e.gte=(o,n)=>e.check(fr(o,n)),e.min=(o,n)=>e.check(fr(o,n)),e.lt=(o,n)=>e.check(Rn(o,n)),e.lte=(o,n)=>e.check(Rr(o,n)),e.max=(o,n)=>e.check(Rr(o,n)),e.int=o=>e.check(Yb(o)),e.safe=o=>e.check(Yb(o)),e.positive=o=>e.check(Nn(0,o)),e.nonnegative=o=>e.check(fr(0,o)),e.negative=o=>e.check(Rn(0,o)),e.nonpositive=o=>e.check(Rr(0,o)),e.multipleOf=(o,n)=>e.check(Ho(o,n)),e.step=(o,n)=>e.check(Ho(o,n)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Tk(e){return tb(_c,e)}a(Tk,"number");var ia=$("ZodNumberFormat",(e,t)=>{_v.init(e,t),_c.init(e,t)});function Yb(e){return nb(ia,e)}a(Yb,"int");function I4(e){return ob(ia,e)}a(I4,"float32");function E4(e){return ib(ia,e)}a(E4,"float64");function k4(e){return ab(ia,e)}a(k4,"int32");function P4(e){return sb(ia,e)}a(P4,"uint32");var bc=$("ZodBoolean",(e,t)=>{Vs.init(e,t),$e.init(e,t)});function Ik(e){return cb(bc,e)}a(Ik,"boolean");var xc=$("ZodBigInt",(e,t)=>{vd.init(e,t),$e.init(e,t),e.gte=(o,n)=>e.check(fr(o,n)),e.min=(o,n)=>e.check(fr(o,n)),e.gt=(o,n)=>e.check(Nn(o,n)),e.gte=(o,n)=>e.check(fr(o,n)),e.min=(o,n)=>e.check(fr(o,n)),e.lt=(o,n)=>e.check(Rn(o,n)),e.lte=(o,n)=>e.check(Rr(o,n)),e.max=(o,n)=>e.check(Rr(o,n)),e.positive=o=>e.check(Nn(BigInt(0),o)),e.negative=o=>e.check(Rn(BigInt(0),o)),e.nonpositive=o=>e.check(Rr(BigInt(0),o)),e.nonnegative=o=>e.check(fr(BigInt(0),o)),e.multipleOf=(o,n)=>e.check(Ho(o,n));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function $4(e){return lb(xc,e)}a($4,"bigint");var yx=$("ZodBigIntFormat",(e,t)=>{bv.init(e,t),xc.init(e,t)});function A4(e){return pb(yx,e)}a(A4,"int64");function C4(e){return mb(yx,e)}a(C4,"uint64");var Ek=$("ZodSymbol",(e,t)=>{xv.init(e,t),$e.init(e,t)});function O4(e){return fb(Ek,e)}a(O4,"symbol");var kk=$("ZodUndefined",(e,t)=>{wv.init(e,t),$e.init(e,t)});function R4(e){return hb(kk,e)}a(R4,"_undefined");var Pk=$("ZodNull",(e,t)=>{Sv.init(e,t),$e.init(e,t)});function $k(e){return gb(Pk,e)}a($k,"_null");var Ak=$("ZodAny",(e,t)=>{Tv.init(e,t),$e.init(e,t)});function N4(){return yb(Ak)}a(N4,"any");var Ck=$("ZodUnknown",(e,t)=>{Iv.init(e,t),$e.init(e,t)});function oa(){return vb(Ck)}a(oa,"unknown");var Ok=$("ZodNever",(e,t)=>{Ev.init(e,t),$e.init(e,t)});function vx(e){return _b(Ok,e)}a(vx,"never");var Rk=$("ZodVoid",(e,t)=>{kv.init(e,t),$e.init(e,t)});function j4(e){return bb(Rk,e)}a(j4,"_void");var Xd=$("ZodDate",(e,t)=>{Pv.init(e,t),$e.init(e,t),e.min=(o,n)=>e.check(fr(o,n)),e.max=(o,n)=>e.check(Rr(o,n));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function D4(e){return xb(Xd,e)}a(D4,"date");var Nk=$("ZodArray",(e,t)=>{$v.init(e,t),$e.init(e,t),e.element=t.element,e.min=(r,o)=>e.check(go(r,o)),e.nonempty=r=>e.check(go(1,r)),e.max=(r,o)=>e.check(ta(r,o)),e.length=(r,o)=>e.check(ra(r,o)),e.unwrap=()=>e.element});function Yd(e,t){return $b(Nk,e,t)}a(Yd,"array");function z4(e){let t=e._zod.def.shape;return wx(Object.keys(t))}a(z4,"keyof");var ep=$("ZodObject",(e,t)=>{Av.init(e,t),$e.init(e,t),Q.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>wx(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:oa()}),e.loose=()=>e.clone({...e._zod.def,catchall:oa()}),e.strict=()=>e.clone({...e._zod.def,catchall:vx()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Q.extend(e,r),e.safeExtend=r=>Q.safeExtend(e,r),e.merge=r=>Q.merge(e,r),e.pick=r=>Q.pick(e,r),e.omit=r=>Q.omit(e,r),e.partial=(...r)=>Q.partial(Tx,e,r[0]),e.required=(...r)=>Q.required(Ix,e,r[0])});function M4(e,t){let r={type:"object",shape:e??{},...Q.normalizeParams(t)};return new ep(r)}a(M4,"object");function U4(e,t){return new ep({type:"object",shape:e,catchall:vx(),...Q.normalizeParams(t)})}a(U4,"strictObject");function q4(e,t){return new ep({type:"object",shape:e,catchall:oa(),...Q.normalizeParams(t)})}a(q4,"looseObject");var _x=$("ZodUnion",(e,t)=>{_d.init(e,t),$e.init(e,t),e.options=t.options});function bx(e,t){return new _x({type:"union",options:e,...Q.normalizeParams(t)})}a(bx,"union");var jk=$("ZodDiscriminatedUnion",(e,t)=>{_x.init(e,t),Cv.init(e,t)});function L4(e,t,r){return new jk({type:"union",options:t,discriminator:e,...Q.normalizeParams(r)})}a(L4,"discriminatedUnion");var Dk=$("ZodIntersection",(e,t)=>{Ov.init(e,t),$e.init(e,t)});function zk(e,t){return new Dk({type:"intersection",left:e,right:t})}a(zk,"intersection");var Mk=$("ZodTuple",(e,t)=>{bd.init(e,t),$e.init(e,t),e.rest=r=>e.clone({...e._zod.def,rest:r})});function Uk(e,t,r){let o=t instanceof ke,n=o?r:t,i=o?t:null;return new Mk({type:"tuple",items:e,rest:i,...Q.normalizeParams(n)})}a(Uk,"tuple");var xx=$("ZodRecord",(e,t)=>{Rv.init(e,t),$e.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function qk(e,t,r){return new xx({type:"record",keyType:e,valueType:t,...Q.normalizeParams(r)})}a(qk,"record");function F4(e,t,r){let o=Yt(e);return o._zod.values=void 0,new xx({type:"record",keyType:o,valueType:t,...Q.normalizeParams(r)})}a(F4,"partialRecord");var Lk=$("ZodMap",(e,t)=>{Nv.init(e,t),$e.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function B4(e,t,r){return new Lk({type:"map",keyType:e,valueType:t,...Q.normalizeParams(r)})}a(B4,"map");var Fk=$("ZodSet",(e,t)=>{jv.init(e,t),$e.init(e,t),e.min=(...r)=>e.check(Go(...r)),e.nonempty=r=>e.check(Go(1,r)),e.max=(...r)=>e.check(ea(...r)),e.size=(...r)=>e.check(ec(...r))});function V4(e,t){return new Fk({type:"set",valueType:e,...Q.normalizeParams(t)})}a(V4,"set");var gc=$("ZodEnum",(e,t)=>{Dv.init(e,t),$e.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(o,n)=>{let i={};for(let c of o)if(r.has(c))i[c]=t.entries[c];else throw new Error(`Key ${c} not found in enum`);return new gc({...t,checks:[],...Q.normalizeParams(n),entries:i})},e.exclude=(o,n)=>{let i={...t.entries};for(let c of o)if(r.has(c))delete i[c];else throw new Error(`Key ${c} not found in enum`);return new gc({...t,checks:[],...Q.normalizeParams(n),entries:i})}});function wx(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new gc({type:"enum",entries:r,...Q.normalizeParams(t)})}a(wx,"_enum");function Z4(e,t){return new gc({type:"enum",entries:e,...Q.normalizeParams(t)})}a(Z4,"nativeEnum");var Bk=$("ZodLiteral",(e,t)=>{zv.init(e,t),$e.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function H4(e,t){return new Bk({type:"literal",values:Array.isArray(e)?e:[e],...Q.normalizeParams(t)})}a(H4,"literal");var Vk=$("ZodFile",(e,t)=>{Mv.init(e,t),$e.init(e,t),e.min=(r,o)=>e.check(Go(r,o)),e.max=(r,o)=>e.check(ea(r,o)),e.mime=(r,o)=>e.check(sc(Array.isArray(r)?r:[r],o))});function G4(e){return Ab(Vk,e)}a(G4,"file");var Zk=$("ZodTransform",(e,t)=>{Uv.init(e,t),$e.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new uo(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Q.issue(i,r.value,t));else{let c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=e),r.issues.push(Q.issue(c))}};let n=t.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function Sx(e){return new Zk({type:"transform",transform:e})}a(Sx,"transform");var Tx=$("ZodOptional",(e,t)=>{qv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Kd(e){return new Tx({type:"optional",innerType:e})}a(Kd,"optional");var Hk=$("ZodNullable",(e,t)=>{Lv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Jd(e){return new Hk({type:"nullable",innerType:e})}a(Jd,"nullable");function K4(e){return Kd(Jd(e))}a(K4,"nullish");var Gk=$("ZodDefault",(e,t)=>{Fv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Kk(e,t){return new Gk({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Q.shallowClone(t)}})}a(Kk,"_default");var Jk=$("ZodPrefault",(e,t)=>{Bv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Wk(e,t){return new Jk({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Q.shallowClone(t)}})}a(Wk,"prefault");var Ix=$("ZodNonOptional",(e,t)=>{Vv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qk(e,t){return new Ix({type:"nonoptional",innerType:e,...Q.normalizeParams(t)})}a(Qk,"nonoptional");var Xk=$("ZodSuccess",(e,t)=>{Zv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function J4(e){return new Xk({type:"success",innerType:e})}a(J4,"success");var Yk=$("ZodCatch",(e,t)=>{Hv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function eP(e,t){return new Yk({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}a(eP,"_catch");var tP=$("ZodNaN",(e,t)=>{Gv.init(e,t),$e.init(e,t)});function W4(e){return Sb(tP,e)}a(W4,"nan");var Ex=$("ZodPipe",(e,t)=>{Kv.init(e,t),$e.init(e,t),e.in=t.in,e.out=t.out});function Wd(e,t){return new Ex({type:"pipe",in:e,out:t})}a(Wd,"pipe");var kx=$("ZodCodec",(e,t)=>{Ex.init(e,t),Zs.init(e,t)});function Q4(e,t,r){return new kx({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}a(Q4,"codec");var rP=$("ZodReadonly",(e,t)=>{Jv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nP(e){return new rP({type:"readonly",innerType:e})}a(nP,"readonly");var oP=$("ZodTemplateLiteral",(e,t)=>{Wv.init(e,t),$e.init(e,t)});function X4(e,t){return new oP({type:"template_literal",parts:e,...Q.normalizeParams(t)})}a(X4,"templateLiteral");var iP=$("ZodLazy",(e,t)=>{Yv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.getter()});function aP(e){return new iP({type:"lazy",getter:e})}a(aP,"lazy");var sP=$("ZodPromise",(e,t)=>{Xv.init(e,t),$e.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Y4(e){return new sP({type:"promise",innerType:e})}a(Y4,"promise");var cP=$("ZodFunction",(e,t)=>{Qv.init(e,t),$e.init(e,t)});function e2(e){return new cP({type:"function",input:Array.isArray(e?.input)?Uk(e?.input):e?.input??Yd(oa()),output:e?.output??oa()})}a(e2,"_function");var tp=$("ZodCustom",(e,t)=>{e_.init(e,t),$e.init(e,t)});function t2(e){let t=new Xe({check:"custom"});return t._zod.check=e,t}a(t2,"check");function r2(e,t){return Cb(tp,e??(()=>!0),t)}a(r2,"custom");function uP(e,t={}){return Ob(tp,e,t)}a(uP,"refine");function lP(e){return Rb(e)}a(lP,"superRefine");var n2=Nb,o2=jb;function i2(e,t={error:`Input not instance of ${e.name}`}){let r=new tp({type:"custom",check:"custom",fn:a(o=>o instanceof e,"fn"),abort:!0,...Q.normalizeParams(t)});return r._zod.bag.Class=e,r}a(i2,"_instanceof");var a2=a((...e)=>Db({Codec:kx,Boolean:bc,String:yc},...e),"stringbool");function s2(e){let t=aP(()=>bx([Xb(e),Tk(),Ik(),$k(),Yd(t),qk(Xb(),t)]));return t}a(s2,"json");function c2(e,t){return Wd(Sx(e),t)}a(c2,"preprocess");var u2={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function l2(e){kt({customError:e})}a(l2,"setErrorMap");function d2(){return kt().customError}a(d2,"getErrorMap");var Se;Se||(Se={});var Px={};$r(Px,{bigint:()=>h2,boolean:()=>f2,date:()=>g2,number:()=>m2,string:()=>p2});function p2(e){return K_(yc,e)}a(p2,"string");function m2(e){return rb(_c,e)}a(m2,"number");function f2(e){return ub(bc,e)}a(f2,"boolean");function h2(e){return db(xc,e)}a(h2,"bigint");function g2(e){return wb(Xd,e)}a(g2,"date");kt(Hs());var y2=s.object({arguments:s.record(s.string(),s.unknown()).optional().default({})}),$x=new ge;$x.post("/:toolName",X,Ee("json",y2),async e=>{let t=e.req.param("toolName"),{arguments:r}=e.req.valid("json");return e.json({error:"Not implemented",message:`Tool ${t} will be implemented in subsequent tasks`,toolName:t,receivedArgs:r},501)});var Ax=new ge;Ax.route("/context",Ng);Ax.route("/tools",$x);var Cx=Ax;var pP="vercel.ai.error",v2=Symbol.for(pP),mP,_2=class fP extends Error{static{a(this,"_AISDKError")}constructor({name:t,message:r,cause:o}){super(r),this[mP]=!0,this.name=t,this.cause=o}static isInstance(t){return fP.hasMarker(t,pP)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}toJSON(){return{name:this.name,message:this.message}}};mP=v2;var dP=_2,b2="AI_APICallError",x2=`vercel.ai.error.${b2}`,w2=Symbol.for(x2),S2;S2=w2;var T2="AI_EmptyResponseBodyError",I2=`vercel.ai.error.${T2}`,E2=Symbol.for(I2),k2;k2=E2;var hP="AI_InvalidArgumentError",gP=`vercel.ai.error.${hP}`,P2=Symbol.for(gP),yP,vP=class extends dP{static{a(this,"InvalidArgumentError")}constructor({message:e,cause:t,argument:r}){super({name:hP,message:e,cause:t}),this[yP]=!0,this.argument=r}static isInstance(e){return dP.hasMarker(e,gP)}};yP=P2;var $2="AI_InvalidPromptError",A2=`vercel.ai.error.${$2}`,C2=Symbol.for(A2),O2;O2=C2;var R2="AI_InvalidResponseDataError",N2=`vercel.ai.error.${R2}`,j2=Symbol.for(N2),D2;D2=j2;var z2="AI_JSONParseError",M2=`vercel.ai.error.${z2}`,U2=Symbol.for(M2),q2;q2=U2;var L2="AI_LoadAPIKeyError",F2=`vercel.ai.error.${L2}`,B2=Symbol.for(F2),V2;V2=B2;var Z2="AI_LoadSettingError",H2=`vercel.ai.error.${Z2}`,G2=Symbol.for(H2),K2;K2=G2;var J2="AI_NoContentGeneratedError",W2=`vercel.ai.error.${J2}`,Q2=Symbol.for(W2),X2;X2=Q2;var Y2="AI_NoSuchModelError",eF=`vercel.ai.error.${Y2}`,tF=Symbol.for(eF),rF;rF=tF;var nF="AI_TooManyEmbeddingValuesForCallError",oF=`vercel.ai.error.${nF}`,iF=Symbol.for(oF),aF;aF=iF;var sF="AI_TypeValidationError",cF=`vercel.ai.error.${sF}`,uF=Symbol.for(cF),lF;lF=uF;var dF="AI_UnsupportedFunctionalityError",pF=`vercel.ai.error.${dF}`,mF=Symbol.for(pF),fF;fF=mF;var _P=a((e,t=21)=>(r=t)=>{let o="",n=r|0;for(;n--;)o+=e[Math.random()*e.length|0];return o},"customAlphabet");var vF=Yu(rp(),1);var yF=a(({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=_P(r,t);if(e==null)return n;if(r.includes(o))throw new vP({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return i=>`${e}${o}${n(i)}`},"createIdGenerator"),Rx=yF();var TP=Symbol.for("vercel.ai.validator");var{btoa:qme,atob:Lme}=globalThis;var kF=Yu(rp(),1);var EP=Symbol("Let zodToJsonSchema decide on which parser to use");var IP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},kP=a(e=>typeof e=="string"?{...IP,name:e}:{...IP,...e},"getDefaultOptions");var PP=a(e=>{let t=kP(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},"getRefs");function Nx(e,t,r,o){o?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}a(Nx,"addErrorMessage");function Le(e,t,r,o,n){e[t]=r,Nx(e,t,o,n)}a(Le,"setResponseValueAndErrors");var np=a((e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},"getRelativePath");function dt(e){if(e.target!=="openAi")return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?np(t,e.currentPath):t.join("/")}}a(dt,"parseAnyDef");function $P(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==Se.ZodAny&&(r.items=xe(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Le(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Le(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Le(r,"minItems",e.exactLength.value,e.exactLength.message,t),Le(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}a($P,"parseArrayDef");function AP(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let o of e.checks)switch(o.kind){case"min":t.target==="jsonSchema7"?o.inclusive?Le(r,"minimum",o.value,o.message,t):Le(r,"exclusiveMinimum",o.value,o.message,t):(o.inclusive||(r.exclusiveMinimum=!0),Le(r,"minimum",o.value,o.message,t));break;case"max":t.target==="jsonSchema7"?o.inclusive?Le(r,"maximum",o.value,o.message,t):Le(r,"exclusiveMaximum",o.value,o.message,t):(o.inclusive||(r.exclusiveMaximum=!0),Le(r,"maximum",o.value,o.message,t));break;case"multipleOf":Le(r,"multipleOf",o.value,o.message,t);break}return r}a(AP,"parseBigintDef");function CP(){return{type:"boolean"}}a(CP,"parseBooleanDef");function op(e,t){return xe(e.type._def,t)}a(op,"parseBrandedDef");var OP=a((e,t)=>xe(e.innerType._def,t),"parseCatchDef");function jx(e,t,r){let o=r??t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>jx(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return _F(e,t)}}a(jx,"parseDateDef");var _F=a((e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let o of e.checks)switch(o.kind){case"min":Le(r,"minimum",o.value,o.message,t);break;case"max":Le(r,"maximum",o.value,o.message,t);break}return r},"integerDateParser");function RP(e,t){return{...xe(e.innerType._def,t),default:e.defaultValue()}}a(RP,"parseDefaultDef");function NP(e,t){return t.effectStrategy==="input"?xe(e.schema._def,t):dt(t)}a(NP,"parseEffectsDef");function jP(e){return{type:"string",enum:Array.from(e.values)}}a(jP,"parseEnumDef");var bF=a(e=>"type"in e&&e.type==="string"?!1:"allOf"in e,"isJsonSchema7AllOfType");function DP(e,t){let r=[xe(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),xe(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i),o=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,n=[];return r.forEach(i=>{if(bF(i))n.push(...i.allOf),i.unevaluatedProperties===void 0&&(o=void 0);else{let c=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:u,...l}=i;c=l}else o=void 0;n.push(c)}}),n.length?{allOf:n,...o}:void 0}a(DP,"parseIntersectionDef");function zP(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}a(zP,"parseLiteralDef");var Dx,Lr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:a(()=>(Dx===void 0&&(Dx=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Dx),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ip(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":Le(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,o.message,t);break;case"max":Le(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Fr(r,"email",o.message,t);break;case"format:idn-email":Fr(r,"idn-email",o.message,t);break;case"pattern:zod":rr(r,Lr.email,o.message,t);break}break;case"url":Fr(r,"uri",o.message,t);break;case"uuid":Fr(r,"uuid",o.message,t);break;case"regex":rr(r,o.regex,o.message,t);break;case"cuid":rr(r,Lr.cuid,o.message,t);break;case"cuid2":rr(r,Lr.cuid2,o.message,t);break;case"startsWith":rr(r,RegExp(`^${zx(o.value,t)}`),o.message,t);break;case"endsWith":rr(r,RegExp(`${zx(o.value,t)}$`),o.message,t);break;case"datetime":Fr(r,"date-time",o.message,t);break;case"date":Fr(r,"date",o.message,t);break;case"time":Fr(r,"time",o.message,t);break;case"duration":Fr(r,"duration",o.message,t);break;case"length":Le(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,o.message,t),Le(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"includes":{rr(r,RegExp(zx(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&Fr(r,"ipv4",o.message,t),o.version!=="v4"&&Fr(r,"ipv6",o.message,t);break}case"base64url":rr(r,Lr.base64url,o.message,t);break;case"jwt":rr(r,Lr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&rr(r,Lr.ipv4Cidr,o.message,t),o.version!=="v4"&&rr(r,Lr.ipv6Cidr,o.message,t);break}case"emoji":rr(r,Lr.emoji(),o.message,t);break;case"ulid":{rr(r,Lr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Fr(r,"binary",o.message,t);break}case"contentEncoding:base64":{Le(r,"contentEncoding","base64",o.message,t);break}case"pattern:zod":{rr(r,Lr.base64,o.message,t);break}}break}case"nanoid":rr(r,Lr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}a(ip,"parseStringDef");function zx(e,t){return t.patternStrategy==="escape"?wF(e):e}a(zx,"escapeLiteralCheckValue");var xF=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function wF(e){let t="";for(let r=0;r<e.length;r++)xF.has(e[r])||(t+="\\"),t+=e[r];return t}a(wF,"escapeNonAlphaNumeric");function Fr(e,t,r,o){e.format||e.anyOf?.some(n=>n.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&o.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):Le(e,"format",t,r,o)}a(Fr,"addFormat");function rr(e,t,r,o){e.pattern||e.allOf?.some(n=>n.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&o.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:MP(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):Le(e,"pattern",MP(t,o),r,o)}a(rr,"addPattern");function MP(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},o=r.i?e.source.toLowerCase():e.source,n="",i=!1,c=!1,u=!1;for(let l=0;l<o.length;l++){if(i){n+=o[l],i=!1;continue}if(r.i){if(c){if(o[l].match(/[a-z]/)){u?(n+=o[l],n+=`${o[l-2]}-${o[l]}`.toUpperCase(),u=!1):o[l+1]==="-"&&o[l+2]?.match(/[a-z]/)?(n+=o[l],u=!0):n+=`${o[l]}${o[l].toUpperCase()}`;continue}}else if(o[l].match(/[a-z]/)){n+=`[${o[l]}${o[l].toUpperCase()}]`;continue}}if(r.m){if(o[l]==="^"){n+=`(^|(?<=[\r
]))`;continue}else if(o[l]==="$"){n+=`($|(?=[\r
]))`;continue}}if(r.s&&o[l]==="."){n+=c?`${o[l]}\r
`:`[${o[l]}\r
]`;continue}n+=o[l],o[l]==="\\"?i=!0:c&&o[l]==="]"?c=!1:!c&&o[l]==="["&&(c=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}a(MP,"stringifyRegExpWithFlags");function ap(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===Se.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((o,n)=>({...o,[n]:xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??dt(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return r;if(e.keyType?._def.typeName===Se.ZodString&&e.keyType._def.checks?.length){let{type:o,...n}=ip(e.keyType._def,t);return{...r,propertyNames:n}}else{if(e.keyType?._def.typeName===Se.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===Se.ZodBranded&&e.keyType._def.type._def.typeName===Se.ZodString&&e.keyType._def.type._def.checks?.length){let{type:o,...n}=op(e.keyType._def,t);return{...r,propertyNames:n}}}return r}a(ap,"parseRecordDef");function UP(e,t){if(t.mapStrategy==="record")return ap(e,t);let r=xe(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||dt(t),o=xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||dt(t);return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}a(UP,"parseMapDef");function qP(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}a(qP,"parseNativeEnumDef");function LP(e){return e.target==="openAi"?void 0:{not:dt({...e,currentPath:[...e.currentPath,"not"]})}}a(LP,"parseNeverDef");function FP(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}a(FP,"parseNullDef");var wc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function VP(e,t){if(t.target==="openApi3")return BP(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in wc&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let c=wc[i._def.typeName];return c&&!n.includes(c)?[...n,c]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let c=typeof i._def.value;switch(c){case"string":case"number":case"boolean":return[...n,c];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(o.length===r.length){let n=o.filter((i,c,u)=>u.indexOf(i)===c);return{type:n.length>1?n:n[0],enum:r.reduce((i,c)=>i.includes(c._def.value)?i:[...i,c._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return BP(e,t)}a(VP,"parseUnionDef");var BP=a((e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>xe(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function ZP(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:wc[e.innerType._def.typeName],nullable:!0}:{type:[wc[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let o=xe(e.innerType._def,{...t,currentPath:[...t.currentPath]});return o&&"$ref"in o?{allOf:[o],nullable:!0}:o&&{...o,nullable:!0}}let r=xe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}a(ZP,"parseNullableDef");function HP(e,t){let r={type:"number"};if(!e.checks)return r;for(let o of e.checks)switch(o.kind){case"int":r.type="integer",Nx(r,"type",o.message,t);break;case"min":t.target==="jsonSchema7"?o.inclusive?Le(r,"minimum",o.value,o.message,t):Le(r,"exclusiveMinimum",o.value,o.message,t):(o.inclusive||(r.exclusiveMinimum=!0),Le(r,"minimum",o.value,o.message,t));break;case"max":t.target==="jsonSchema7"?o.inclusive?Le(r,"maximum",o.value,o.message,t):Le(r,"exclusiveMaximum",o.value,o.message,t):(o.inclusive||(r.exclusiveMaximum=!0),Le(r,"maximum",o.value,o.message,t));break;case"multipleOf":Le(r,"multipleOf",o.value,o.message,t);break}return r}a(HP,"parseNumberDef");function GP(e,t){let r=t.target==="openAi",o={type:"object",properties:{}},n=[],i=e.shape();for(let u in i){let l=i[u];if(l===void 0||l._def===void 0)continue;let d=TF(l);d&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let p=xe(l._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});p!==void 0&&(o.properties[u]=p,d||n.push(u))}n.length&&(o.required=n);let c=SF(e,t);return c!==void 0&&(o.additionalProperties=c),o}a(GP,"parseObjectDef");function SF(e,t){if(e.catchall._def.typeName!=="ZodNever")return xe(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}a(SF,"decideAdditionalProperties");function TF(e){try{return e.isOptional()}catch{return!0}}a(TF,"safeIsOptional");var KP=a((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return xe(e.innerType._def,t);let r=xe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:dt(t)},r]}:dt(t)},"parseOptionalDef");var JP=a((e,t)=>{if(t.pipeStrategy==="input")return xe(e.in._def,t);if(t.pipeStrategy==="output")return xe(e.out._def,t);let r=xe(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=xe(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}},"parsePipelineDef");function WP(e,t){return xe(e.type._def,t)}a(WP,"parsePromiseDef");function QP(e,t){let o={type:"array",uniqueItems:!0,items:xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Le(o,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Le(o,"maxItems",e.maxSize.value,e.maxSize.message,t),o}a(QP,"parseSetDef");function XP(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>xe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:xe(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>xe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}a(XP,"parseTupleDef");function YP(e){return{not:dt(e)}}a(YP,"parseUndefinedDef");function e$(e){return dt(e)}a(e$,"parseUnknownDef");var t$=a((e,t)=>xe(e.innerType._def,t),"parseReadonlyDef");var r$=a((e,t,r)=>{switch(t){case Se.ZodString:return ip(e,r);case Se.ZodNumber:return HP(e,r);case Se.ZodObject:return GP(e,r);case Se.ZodBigInt:return AP(e,r);case Se.ZodBoolean:return CP();case Se.ZodDate:return jx(e,r);case Se.ZodUndefined:return YP(r);case Se.ZodNull:return FP(r);case Se.ZodArray:return $P(e,r);case Se.ZodUnion:case Se.ZodDiscriminatedUnion:return VP(e,r);case Se.ZodIntersection:return DP(e,r);case Se.ZodTuple:return XP(e,r);case Se.ZodRecord:return ap(e,r);case Se.ZodLiteral:return zP(e,r);case Se.ZodEnum:return jP(e);case Se.ZodNativeEnum:return qP(e);case Se.ZodNullable:return ZP(e,r);case Se.ZodOptional:return KP(e,r);case Se.ZodMap:return UP(e,r);case Se.ZodSet:return QP(e,r);case Se.ZodLazy:return()=>e.getter()._def;case Se.ZodPromise:return WP(e,r);case Se.ZodNaN:case Se.ZodNever:return LP(r);case Se.ZodEffects:return NP(e,r);case Se.ZodAny:return dt(r);case Se.ZodUnknown:return e$(r);case Se.ZodDefault:return RP(e,r);case Se.ZodBranded:return op(e,r);case Se.ZodReadonly:return t$(e,r);case Se.ZodCatch:return OP(e,r);case Se.ZodPipeline:return JP(e,r);case Se.ZodFunction:case Se.ZodVoid:case Se.ZodSymbol:return;default:return(o=>{})(t)}},"selectParser");function xe(e,t,r=!1){let o=t.seen.get(e);if(t.override){let u=t.override?.(e,t,o,r);if(u!==EP)return u}if(o&&!r){let u=IF(o,t);if(u!==void 0)return u}let n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);let i=r$(e,e.typeName,t),c=typeof i=="function"?xe(i(),t):i;if(c&&EF(e,t,c),t.postProcess){let u=t.postProcess(c,e,t);return n.jsonSchema=c,u}return n.jsonSchema=c,c}a(xe,"parseDef");var IF=a((e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:np(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),dt(t)):t.$refStrategy==="seen"?dt(t):void 0}},"get$ref"),EF=a((e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),"addMeta");var n$=a((e,t)=>{let r=PP(t),o=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[d,p])=>({...l,[d]:xe(p._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??dt(r)}),{}):void 0,n=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=xe(e._def,n===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??dt(r),c=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;c!==void 0&&(i.title=c),r.flags.hasReferencedOpenAiAnyType&&(o||(o={}),o[r.openAiAnyTypeName]||(o[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let u=n===void 0?o?{...i,[r.definitionPath]:o}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...o,[n]:i}};return r.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u},"zodToJsonSchema");var o$=n$;var Sc={code:"0",name:"text",parse:a(e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}},"parse")},Tc={code:"1",name:"function_call",parse:a(e=>{if(e==null||typeof e!="object"||!("function_call"in e)||typeof e.function_call!="object"||e.function_call==null||!("name"in e.function_call)||!("arguments"in e.function_call)||typeof e.function_call.name!="string"||typeof e.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}},"parse")},Ic={code:"2",name:"data",parse:a(e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}},"parse")},Ec={code:"3",name:"error",parse:a(e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}},"parse")},kc={code:"4",name:"assistant_message",parse:a(e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}},"parse")},Pc={code:"5",name:"assistant_control_data",parse:a(e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}},"parse")},$c={code:"6",name:"data_message",parse:a(e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}},"parse")},Ac={code:"7",name:"tool_calls",parse:a(e=>{if(e==null||typeof e!="object"||!("tool_calls"in e)||typeof e.tool_calls!="object"||e.tool_calls==null||!Array.isArray(e.tool_calls)||e.tool_calls.some(t=>t==null||typeof t!="object"||!("id"in t)||typeof t.id!="string"||!("type"in t)||typeof t.type!="string"||!("function"in t)||t.function==null||typeof t.function!="object"||!("arguments"in t.function)||typeof t.function.name!="string"||typeof t.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}},"parse")},Cc={code:"8",name:"message_annotations",parse:a(e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}},"parse")},Oc={code:"9",name:"tool_call",parse:a(e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}},"parse")},Rc={code:"a",name:"tool_result",parse:a(e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}},"parse")},Nc={code:"b",name:"tool_call_streaming_start",parse:a(e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}},"parse")},jc={code:"c",name:"tool_call_delta",parse:a(e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}},"parse")},Dc={code:"d",name:"finish_message",parse:a(e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}},"parse")},zc={code:"e",name:"finish_step",parse:a(e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}},"parse")},i$=[Sc,Tc,Ic,Ec,kc,Pc,$c,Ac,Cc,Oc,Rc,Nc,jc,Dc,zc],_ye={[Sc.code]:Sc,[Tc.code]:Tc,[Ic.code]:Ic,[Ec.code]:Ec,[kc.code]:kc,[Pc.code]:Pc,[$c.code]:$c,[Ac.code]:Ac,[Cc.code]:Cc,[Oc.code]:Oc,[Rc.code]:Rc,[Nc.code]:Nc,[jc.code]:jc,[Dc.code]:Dc,[zc.code]:zc},bye={[Sc.name]:Sc.code,[Tc.name]:Tc.code,[Ic.name]:Ic.code,[Ec.name]:Ec.code,[kc.name]:kc.code,[Pc.name]:Pc.code,[$c.name]:$c.code,[Ac.name]:Ac.code,[Cc.name]:Cc.code,[Oc.name]:Oc.code,[Rc.name]:Rc.code,[Nc.name]:Nc.code,[jc.name]:jc.code,[Dc.name]:Dc.code,[zc.name]:zc.code},xye=i$.map(e=>e.code);function Br(e,t){let r=i$.find(o=>o.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}a(Br,"formatStreamPart");var Mx=Symbol.for("vercel.ai.schema");function PF(e,{validate:t}={}){return{[Mx]:!0,_type:void 0,[TP]:!0,jsonSchema:e,validate:t}}a(PF,"jsonSchema");function $F(e){return typeof e=="object"&&e!==null&&Mx in e&&e[Mx]===!0&&"jsonSchema"in e&&"validate"in e}a($F,"isSchema");function sp(e){return $F(e)?e:AF(e)}a(sp,"asSchema");function AF(e){return PF(o$(e),{validate:a(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}},"validate")})}a(AF,"zodSchema");var a$="vercel.ai.error",CF=Symbol.for(a$),s$,OF=class c$ extends Error{static{a(this,"_AISDKError")}constructor({name:t,message:r,cause:o}){super(r),this[s$]=!0,this.name=t,this.cause=o}static isInstance(t){return c$.hasMarker(t,a$)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}toJSON(){return{name:this.name,message:this.message}}};s$=CF;var Fe=OF,Ux="AI_APICallError",u$=`vercel.ai.error.${Ux}`,RF=Symbol.for(u$),l$,d$=class extends Fe{static{a(this,"APICallError")}constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:c,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:l}){super({name:Ux,message:e,cause:c}),this[l$]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=l}static isInstance(e){return Fe.hasMarker(e,u$)}static isAPICallError(e){return e instanceof Error&&e.name===Ux&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};l$=RF;var NF="AI_EmptyResponseBodyError",jF=`vercel.ai.error.${NF}`,DF=Symbol.for(jF),zF;zF=DF;function cp(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}a(cp,"getErrorMessage");var p$="AI_InvalidArgumentError",m$=`vercel.ai.error.${p$}`,MF=Symbol.for(m$),f$,h$=class extends Fe{static{a(this,"InvalidArgumentError")}constructor({message:e,cause:t,argument:r}){super({name:p$,message:e,cause:t}),this[f$]=!0,this.argument=r}static isInstance(e){return Fe.hasMarker(e,m$)}};f$=MF;var qx="AI_InvalidPromptError",g$=`vercel.ai.error.${qx}`,UF=Symbol.for(g$),y$,Ko=class extends Fe{static{a(this,"InvalidPromptError")}constructor({prompt:e,message:t,cause:r}){super({name:qx,message:`Invalid prompt: ${t}`,cause:r}),this[y$]=!0,this.prompt=e}static isInstance(e){return Fe.hasMarker(e,g$)}static isInvalidPromptError(e){return e instanceof Error&&e.name===qx&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};y$=UF;var qF="AI_InvalidResponseDataError",LF=`vercel.ai.error.${qF}`,FF=Symbol.for(LF),BF;BF=FF;var Lx="AI_JSONParseError",v$=`vercel.ai.error.${Lx}`,VF=Symbol.for(v$),_$,Vx=class extends Fe{static{a(this,"JSONParseError")}constructor({text:e,cause:t}){super({name:Lx,message:`JSON parsing failed: Text: ${e}.
Error message: ${cp(t)}`,cause:t}),this[_$]=!0,this.text=e}static isInstance(e){return Fe.hasMarker(e,v$)}static isJSONParseError(e){return e instanceof Error&&e.name===Lx&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};_$=VF;var ZF="AI_LoadAPIKeyError",HF=`vercel.ai.error.${ZF}`,GF=Symbol.for(HF),KF;KF=GF;var JF="AI_LoadSettingError",WF=`vercel.ai.error.${JF}`,QF=Symbol.for(WF),XF;XF=QF;var YF="AI_NoContentGeneratedError",e6=`vercel.ai.error.${YF}`,t6=Symbol.for(e6),r6;r6=t6;var n6="AI_NoSuchModelError",o6=`vercel.ai.error.${n6}`,i6=Symbol.for(o6),a6;a6=i6;var s6="AI_TooManyEmbeddingValuesForCallError",c6=`vercel.ai.error.${s6}`,u6=Symbol.for(c6),l6;l6=u6;var Fx="AI_TypeValidationError",b$=`vercel.ai.error.${Fx}`,d6=Symbol.for(b$),x$,p6=class Bx extends Fe{static{a(this,"_TypeValidationError")}constructor({value:t,cause:r}){super({name:Fx,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${cp(r)}`,cause:r}),this[x$]=!0,this.value=t}static isInstance(t){return Fe.hasMarker(t,b$)}static wrap({value:t,cause:r}){return Bx.isInstance(r)&&r.value===t?r:new Bx({value:t,cause:r})}static isTypeValidationError(t){return t instanceof Error&&t.name===Fx}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};x$=d6;var up=p6,m6="AI_UnsupportedFunctionalityError",f6=`vercel.ai.error.${m6}`,h6=Symbol.for(f6),g6;g6=h6;var w$=a((e,t=21)=>(r=t)=>{let o="",n=r|0;for(;n--;)o+=e[Math.random()*e.length|0];return o},"customAlphabet");var I$=Yu(rp(),1);var zn=a(({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=w$(r,t);if(e==null)return n;if(r.includes(o))throw new h$({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return i=>`${e}${o}${n(i)}`},"createIdGenerator"),Dye=zn();function S$(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}a(S$,"getErrorMessage");function T$(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}a(T$,"isAbortError");var Zx=Symbol.for("vercel.ai.validator");function y6(e){return{[Zx]:!0,validate:e}}a(y6,"validator");function v6(e){return typeof e=="object"&&e!==null&&Zx in e&&e[Zx]===!0&&"validate"in e}a(v6,"isValidator");function _6(e){return v6(e)?e:b6(e)}a(_6,"asValidator");function b6(e){return y6(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}a(b6,"zodValidator");function Mc({value:e,schema:t}){let r=_6(t);try{if(r.validate==null)return{success:!0,value:e};let o=r.validate(e);return o.success?o:{success:!1,error:up.wrap({value:e,cause:o.error})}}catch(o){return{success:!1,error:up.wrap({value:e,cause:o})}}}a(Mc,"safeValidateTypes");function Hx({text:e,schema:t}){try{let r=I$.default.parse(e);return t==null?{success:!0,value:r}:Mc({value:r,schema:t})}catch(r){return{success:!1,error:Vx.isJSONParseError(r)?r:new Vx({text:e,cause:r})}}}a(Hx,"safeParseJSON");var{btoa:x6,atob:w6}=globalThis;function E$(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=w6(t);return Uint8Array.from(r,o=>o.codePointAt(0))}a(E$,"convertBase64ToUint8Array");function Gx(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return x6(t)}a(Gx,"convertUint8ArrayToBase64");var k$=typeof globalThis=="object"?globalThis:global;var Mn="1.9.0";var P$=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function S6(e){var t=new Set([e]),r=new Set,o=e.match(P$);if(!o)return function(){return!1};var n={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(n.prerelease!=null)return a(function(l){return l===e},"isExactmatch");function i(u){return r.add(u),!1}a(i,"_reject");function c(u){return t.add(u),!0}return a(c,"_accept"),a(function(l){if(t.has(l))return!0;if(r.has(l))return!1;var d=l.match(P$);if(!d)return i(l);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||n.major!==p.major?i(l):n.major===0?n.minor===p.minor&&n.patch<=p.patch?c(l):i(l):n.minor<=p.minor?c(l):i(l)},"isCompatible")}a(S6,"_makeCompatibilityCheck");var $$=S6(Mn);var T6=Mn.split(".")[0],Uc=Symbol.for("opentelemetry.js.api."+T6),qc=k$;function sa(e,t,r,o){var n;o===void 0&&(o=!1);var i=qc[Uc]=(n=qc[Uc])!==null&&n!==void 0?n:{version:Mn};if(!o&&i[e]){var c=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(c.stack||c.message),!1}if(i.version!==Mn){var c=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Mn);return r.error(c.stack||c.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Mn+"."),!0}a(sa,"registerGlobal");function Un(e){var t,r,o=(t=qc[Uc])===null||t===void 0?void 0:t.version;if(!(!o||!$$(o)))return(r=qc[Uc])===null||r===void 0?void 0:r[e]}a(Un,"getGlobal");function ca(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Mn+".");var r=qc[Uc];r&&delete r[e]}a(ca,"unregisterGlobal");var I6=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],c;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(c)throw c.error}}return i},E6=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},A$=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return a(e,"DiagComponentLogger"),e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Lc("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Lc("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Lc("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Lc("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Lc("verbose",this._namespace,t)},e})();function Lc(e,t,r){var o=Un("diag");if(o)return r.unshift(t),o[e].apply(o,E6([],I6(r),!1))}a(Lc,"logProxy");var nr;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(nr||(nr={}));function C$(e,t){e<nr.NONE?e=nr.NONE:e>nr.ALL&&(e=nr.ALL),t=t||{};function r(o,n){var i=t[o];return typeof i=="function"&&e>=n?i.bind(t):function(){}}return a(r,"_filterFunc"),{error:r("error",nr.ERROR),warn:r("warn",nr.WARN),info:r("info",nr.INFO),debug:r("debug",nr.DEBUG),verbose:r("verbose",nr.VERBOSE)}}a(C$,"createLogLevelDiagLogger");var k6=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],c;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(c)throw c.error}}return i},P6=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},$6="diag",ua=(function(){function e(){function t(n){return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];var u=Un("diag");if(u)return u[n].apply(u,P6([],k6(i),!1))}}a(t,"_logProxy");var r=this,o=a(function(n,i){var c,u,l;if(i===void 0&&(i={logLevel:nr.INFO}),n===r){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((c=d.stack)!==null&&c!==void 0?c:d.message),!1}typeof i=="number"&&(i={logLevel:i});var p=Un("diag"),m=C$((u=i.logLevel)!==null&&u!==void 0?u:nr.INFO,n);if(p&&!i.suppressOverrideMessage){var f=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+f),m.warn("Current logger will overwrite one already registered from "+f)}return sa("diag",m,r,!0)},"setLogger");r.setLogger=o,r.disable=function(){ca($6,r)},r.createComponentLogger=function(n){return new A$(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return a(e,"DiagAPI"),e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function O$(e){return Symbol.for(e)}a(O$,"createContextKey");var A6=(function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(o){return r._currentContext.get(o)},r.setValue=function(o,n){var i=new e(r._currentContext);return i._currentContext.set(o,n),i},r.deleteValue=function(o){var n=new e(r._currentContext);return n._currentContext.delete(o),n}}return a(e,"BaseContext"),e})(),R$=new A6;var C6=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],c;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(c)throw c.error}}return i},O6=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},N$=(function(){function e(){}return a(e,"NoopContextManager"),e.prototype.active=function(){return R$},e.prototype.with=function(t,r,o){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return r.call.apply(r,O6([o],C6(n),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})();var R6=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],c;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(c)throw c.error}}return i},N6=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Kx="context",j6=new N$,lp=(function(){function e(){}return a(e,"ContextAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return sa(Kx,t,ua.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,o){for(var n,i=[],c=3;c<arguments.length;c++)i[c-3]=arguments[c];return(n=this._getContextManager()).with.apply(n,N6([t,r,o],R6(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Un(Kx)||j6},e.prototype.disable=function(){this._getContextManager().disable(),ca(Kx,ua.instance())},e})();var dp;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(dp||(dp={}));var Jx="0000000000000000",Wx="00000000000000000000000000000000",j$={traceId:Wx,spanId:Jx,traceFlags:dp.NONE};var yo=(function(){function e(t){t===void 0&&(t=j$),this._spanContext=t}return a(e,"NonRecordingSpan"),e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e})();var Qx=O$("OpenTelemetry Context Key SPAN");function pp(e){return e.getValue(Qx)||void 0}a(pp,"getSpan");function D$(){return pp(lp.getInstance().active())}a(D$,"getActiveSpan");function Fc(e,t){return e.setValue(Qx,t)}a(Fc,"setSpan");function z$(e){return e.deleteValue(Qx)}a(z$,"deleteSpan");function M$(e,t){return Fc(e,new yo(t))}a(M$,"setSpanContext");function mp(e){var t;return(t=pp(e))===null||t===void 0?void 0:t.spanContext()}a(mp,"getSpanContext");var D6=/^([0-9a-f]{32})$/i,z6=/^[0-9a-f]{16}$/i;function M6(e){return D6.test(e)&&e!==Wx}a(M6,"isValidTraceId");function U6(e){return z6.test(e)&&e!==Jx}a(U6,"isValidSpanId");function fp(e){return M6(e.traceId)&&U6(e.spanId)}a(fp,"isSpanContextValid");function U$(e){return new yo(e)}a(U$,"wrapSpanContext");var Xx=lp.getInstance(),hp=(function(){function e(){}return a(e,"NoopTracer"),e.prototype.startSpan=function(t,r,o){o===void 0&&(o=Xx.active());var n=!!r?.root;if(n)return new yo;var i=o&&mp(o);return q6(i)&&fp(i)?new yo(i):new yo},e.prototype.startActiveSpan=function(t,r,o,n){var i,c,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=o):(i=r,c=o,u=n);var l=c??Xx.active(),d=this.startSpan(t,i,l),p=Fc(l,d);return Xx.with(p,u,void 0,d)}},e})();function q6(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}a(q6,"isSpanContext");var L6=new hp,q$=(function(){function e(t,r,o,n){this._provider=t,this.name=r,this.version=o,this.options=n}return a(e,"ProxyTracer"),e.prototype.startSpan=function(t,r,o){return this._getTracer().startSpan(t,r,o)},e.prototype.startActiveSpan=function(t,r,o,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):L6},e})();var L$=(function(){function e(){}return a(e,"NoopTracerProvider"),e.prototype.getTracer=function(t,r,o){return new hp},e})();var F6=new L$,Yx=(function(){function e(){}return a(e,"ProxyTracerProvider"),e.prototype.getTracer=function(t,r,o){var n;return(n=this.getDelegateTracer(t,r,o))!==null&&n!==void 0?n:new q$(this,t,r,o)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:F6},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,o){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r,o)},e})();var la;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(la||(la={}));var ew="trace",F$=(function(){function e(){this._proxyTracerProvider=new Yx,this.wrapSpanContext=U$,this.isSpanContextValid=fp,this.deleteSpan=z$,this.getSpan=pp,this.getActiveSpan=D$,this.getSpanContext=mp,this.setSpan=Fc,this.setSpanContext=M$}return a(e,"TraceAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=sa(ew,this._proxyTracerProvider,ua.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Un(ew)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){ca(ew,ua.instance()),this._proxyTracerProvider=new Yx},e})();var tw=F$.getInstance();var B6=Object.defineProperty,W$=a((e,t)=>{for(var r in t)B6(e,r,{get:t[r],enumerable:!0})},"__export");async function V6(e){return e===void 0?Promise.resolve():new Promise(t=>setTimeout(t,e))}a(V6,"delay");var nw="AI_RetryError",Q$=`vercel.ai.error.${nw}`,Z6=Symbol.for(Q$),X$,B$=class extends Fe{static{a(this,"RetryError")}constructor({message:e,reason:t,errors:r}){super({name:nw,message:e}),this[X$]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Fe.hasMarker(e,Q$)}static isRetryError(e){return e instanceof Error&&e.name===nw&&typeof e.reason=="string"&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};X$=Z6;var H6=a(({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async o=>Y$(o,{maxRetries:e,delayInMs:t,backoffFactor:r}),"retryWithExponentialBackoff");async function Y$(e,{maxRetries:t,delayInMs:r,backoffFactor:o},n=[]){try{return await e()}catch(i){if(T$(i)||t===0)throw i;let c=S$(i),u=[...n,i],l=u.length;if(l>t)throw new B$({message:`Failed after ${l} attempts. Last error: ${c}`,reason:"maxRetriesExceeded",errors:u});if(i instanceof Error&&d$.isAPICallError(i)&&i.isRetryable===!0&&l<=t)return await V6(r),Y$(e,{maxRetries:t,delayInMs:o*r,backoffFactor:o},u);throw l===1?i:new B$({message:`Failed after ${l} attempts with non-retryable error: '${c}'`,reason:"errorNotRetryable",errors:u})}}a(Y$,"_retryWithExponentialBackoff");function ow({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}a(ow,"assembleOperationName");function G6({model:e,settings:t,telemetry:r,headers:o}){var n;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[c,u])=>(i[`ai.settings.${c}`]=u,i),{}),...Object.entries((n=r?.metadata)!=null?n:{}).reduce((i,[c,u])=>(i[`ai.telemetry.metadata.${c}`]=u,i),{}),...Object.entries(o??{}).reduce((i,[c,u])=>(u!==void 0&&(i[`ai.request.headers.${c}`]=u),i),{})}}a(G6,"getBaseTelemetryAttributes");var K6={startSpan(){return gp},startActiveSpan(e,t,r,o){if(typeof t=="function")return t(gp);if(typeof r=="function")return r(gp);if(typeof o=="function")return o(gp)}},gp={spanContext(){return J6},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},J6={traceId:"",spanId:"",traceFlags:0};function W6({isEnabled:e=!1,tracer:t}={}){return e?t||tw.getTracer("ai"):K6}a(W6,"getTracer");function iw({name:e,tracer:t,attributes:r,fn:o,endWhenDone:n=!0}){return t.startActiveSpan(e,{attributes:r},async i=>{try{let c=await o(i);return n&&i.end(),c}catch(c){try{c instanceof Error?(i.recordException({name:c.name,message:c.message,stack:c.stack}),i.setStatus({code:la.ERROR,message:c.message})):i.setStatus({code:la.ERROR})}finally{i.end()}throw c}})}a(iw,"recordSpan");function da({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((r,[o,n])=>{if(n===void 0)return r;if(typeof n=="object"&&"input"in n&&typeof n.input=="function"){if(e?.recordInputs===!1)return r;let i=n.input();return i===void 0?r:{...r,[o]:i}}if(typeof n=="object"&&"output"in n&&typeof n.output=="function"){if(e?.recordOutputs===!1)return r;let i=n.output();return i===void 0?r:{...r,[o]:i}}return{...r,[o]:n}},{})}a(da,"selectTelemetryAttributes");var aw="AI_DownloadError",eA=`vercel.ai.error.${aw}`,Q6=Symbol.for(eA),tA,rw=class extends Fe{static{a(this,"DownloadError")}constructor({url:e,statusCode:t,statusText:r,cause:o,message:n=o==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:aw,message:n,cause:o}),this[tA]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Fe.hasMarker(e,eA)}static isDownloadError(e){return e instanceof Error&&e.name===aw&&typeof e.url=="string"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.statusText==null||typeof e.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};tA=Q6;async function X6({url:e,fetchImplementation:t=fetch}){var r;let o=e.toString();try{let n=await t(o);if(!n.ok)throw new rw({url:o,statusCode:n.status,statusText:n.statusText});return{data:new Uint8Array(await n.arrayBuffer()),mimeType:(r=n.headers.get("content-type"))!=null?r:void 0}}catch(n){throw rw.isInstance(n)?n:new rw({url:o,cause:n})}}a(X6,"download");var Y6=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function eB(e){for(let{bytes:t,mimeType:r}of Y6)if(e.length>=t.length&&t.every((o,n)=>e[n]===o))return r}a(eB,"detectImageMimeType");var sw="AI_InvalidDataContentError",rA=`vercel.ai.error.${sw}`,tB=Symbol.for(rA),nA,V$=class extends Fe{static{a(this,"InvalidDataContentError")}constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:sw,message:r,cause:t}),this[nA]=!0,this.content=e}static isInstance(e){return Fe.hasMarker(e,rA)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===sw&&e.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};nA=tB;var oA=s.union([s.string(),s.instanceof(Uint8Array),s.instanceof(ArrayBuffer),s.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function rB(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Gx(new Uint8Array(e)):Gx(e)}a(rB,"convertDataContentToBase64String");function yp(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return E$(e)}catch(t){throw new V$({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new V$({content:e})}a(yp,"convertDataContentToUint8Array");function nB(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}a(nB,"convertUint8ArrayToText");var cw="AI_InvalidMessageRoleError",iA=`vercel.ai.error.${cw}`,oB=Symbol.for(iA),aA,iB=class extends Fe{static{a(this,"InvalidMessageRoleError")}constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:cw,message:t}),this[aA]=!0,this.role=e}static isInstance(e){return Fe.hasMarker(e,iA)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===cw&&typeof e.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};aA=oB;function aB(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}a(aB,"splitDataUrl");async function sB({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=a(()=>!1,"modelSupportsUrl"),downloadImplementation:o=X6}){let n=await uB(e.messages,o,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>cB(i,n))]}a(sB,"convertToLanguageModelPrompt");function cB(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"user",content:e.content.map(o=>lB(o,t)).filter(o=>o.type!=="text"||o.text!==""),providerMetadata:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(o=>o.type!=="text"||o.text!=="").map(o=>{let{experimental_providerMetadata:n,...i}=o;return{...i,providerMetadata:n}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(o=>({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,result:o.result,content:o.experimental_content,isError:o.isError,providerMetadata:o.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:{let o=r;throw new iB({role:o})}}}a(cB,"convertToLanguageModelMessage");async function uB(e,t,r,o){let n=e.filter(c=>c.role==="user").map(c=>c.content).filter(c=>Array.isArray(c)).flat().filter(c=>c.type==="image"||c.type==="file").filter(c=>!(c.type==="image"&&r===!0)).map(c=>c.type==="image"?c.image:c.data).map(c=>typeof c=="string"&&(c.startsWith("http:")||c.startsWith("https:"))?new URL(c):c).filter(c=>c instanceof URL).filter(c=>!o(c)),i=await Promise.all(n.map(async c=>({url:c,data:await t({url:c})})));return Object.fromEntries(i.map(({url:c,data:u})=>[c.toString(),u]))}a(uB,"downloadAssets");function lB(e,t){if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let r=e.mimeType,o,n,i,c=e.type;switch(c){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${c}`)}try{n=typeof o=="string"?new URL(o):o}catch{n=o}if(n instanceof URL)if(n.protocol==="data:"){let{mimeType:u,base64Content:l}=aB(n.toString());if(u==null||l==null)throw new Error(`Invalid data URL format in part ${c}`);r=u,i=yp(l)}else{let u=t[n.toString()];u?(i=u.data,r??(r=u.mimeType)):i=n}else i=yp(n);switch(c){case"image":return r==null&&i instanceof Uint8Array&&(r=eB(i)),{type:"image",image:i,mimeType:r,providerMetadata:e.experimental_providerMetadata};case"file":if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:i instanceof Uint8Array?rB(i):i,mimeType:r,providerMetadata:e.experimental_providerMetadata}}}a(lB,"convertPartToLanguageModelPart");var uw="AI_InvalidArgumentError",sA=`vercel.ai.error.${uw}`,dB=Symbol.for(sA),cA,Vr=class extends Fe{static{a(this,"InvalidArgumentError")}constructor({parameter:e,value:t,message:r}){super({name:uw,message:`Invalid argument for parameter ${e}: ${r}`}),this[cA]=!0,this.parameter=e,this.value=t}static isInstance(e){return Fe.hasMarker(e,sA)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===uw&&typeof e.parameter=="string"&&typeof e.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};cA=dB;function pB({maxTokens:e,temperature:t,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,stopSequences:c,seed:u,maxRetries:l}){if(e!=null){if(!Number.isInteger(e))throw new Vr({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Vr({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Vr({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Vr({parameter:"topP",value:r,message:"topP must be a number"});if(o!=null&&typeof o!="number")throw new Vr({parameter:"topK",value:o,message:"topK must be a number"});if(n!=null&&typeof n!="number")throw new Vr({parameter:"presencePenalty",value:n,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Vr({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(u!=null&&!Number.isInteger(u))throw new Vr({parameter:"seed",value:u,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new Vr({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new Vr({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:t??0,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,stopSequences:c!=null&&c.length>0?c:void 0,seed:u,maxRetries:l??2}}a(pB,"prepareCallSettings");var lw=s.lazy(()=>s.union([s.null(),s.string(),s.number(),s.boolean(),s.record(s.string(),lw),s.array(lw)])),vo=s.record(s.string(),s.record(s.string(),lw)),mB=s.array(s.union([s.object({type:s.literal("text"),text:s.string()}),s.object({type:s.literal("image"),data:s.string(),mimeType:s.string().optional()})])),uA=s.object({type:s.literal("text"),text:s.string(),experimental_providerMetadata:vo.optional()}),fB=s.object({type:s.literal("image"),image:s.union([oA,s.instanceof(URL)]),mimeType:s.string().optional(),experimental_providerMetadata:vo.optional()}),hB=s.object({type:s.literal("file"),data:s.union([oA,s.instanceof(URL)]),mimeType:s.string(),experimental_providerMetadata:vo.optional()}),gB=s.object({type:s.literal("tool-call"),toolCallId:s.string(),toolName:s.string(),args:s.unknown()}),yB=s.object({type:s.literal("tool-result"),toolCallId:s.string(),toolName:s.string(),result:s.unknown(),content:mB.optional(),isError:s.boolean().optional(),experimental_providerMetadata:vo.optional()}),vB=s.object({role:s.literal("system"),content:s.string(),experimental_providerMetadata:vo.optional()}),_B=s.object({role:s.literal("user"),content:s.union([s.string(),s.array(s.union([uA,fB,hB]))]),experimental_providerMetadata:vo.optional()}),bB=s.object({role:s.literal("assistant"),content:s.union([s.string(),s.array(s.union([uA,gB]))]),experimental_providerMetadata:vo.optional()}),xB=s.object({role:s.literal("tool"),content:s.array(yB),experimental_providerMetadata:vo.optional()}),wB=s.union([vB,_B,bB,xB]);function SB(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(TB);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}a(SB,"detectPromptType");function TB(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}a(TB,"detectSingleMessageCharacteristics");function IB(e){var t,r,o;let n=[];for(let i of e){let c;try{c=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(c.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))n.push({type:"image",image:c});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");n.push({type:"file",data:c,mimeType:i.contentType})}break}case"data:":{let u,l,d;try{[u,l]=i.url.split(","),d=u.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(d==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((r=i.contentType)!=null&&r.startsWith("image/"))n.push({type:"image",image:yp(l)});else if((o=i.contentType)!=null&&o.startsWith("text/"))n.push({type:"text",text:nB(yp(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");n.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${c.protocol}`)}}return n}a(IB,"attachmentsToParts");var lA="AI_MessageConversionError",dA=`vercel.ai.error.${lA}`,EB=Symbol.for(dA),pA,Z$=class extends Fe{static{a(this,"MessageConversionError")}constructor({originalMessage:e,message:t}){super({name:lA,message:t}),this[pA]=!0,this.originalMessage=e}static isInstance(e){return Fe.hasMarker(e,dA)}};pA=EB;function mw(e,t){var r;let o=(r=t?.tools)!=null?r:{},n=[];for(let i of e){let{role:c,content:u,toolInvocations:l,experimental_attachments:d}=i;switch(c){case"system":{n.push({role:"system",content:u});break}case"user":{n.push({role:"user",content:d?[{type:"text",text:u},...IB(d)]:u});break}case"assistant":{if(l==null){n.push({role:"assistant",content:u});break}n.push({role:"assistant",content:[{type:"text",text:u},...l.map(({toolCallId:p,toolName:m,args:f})=>({type:"tool-call",toolCallId:p,toolName:m,args:f}))]}),n.push({role:"tool",content:l.map(p=>{if(!("result"in p))throw new Z$({originalMessage:i,message:"ToolInvocation must have a result: "+JSON.stringify(p)});let{toolCallId:m,toolName:f,result:g}=p,h=o[f];return h?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:m,toolName:f,result:h.experimental_toToolResultContent(g),experimental_content:h.experimental_toToolResultContent(g)}:{type:"tool-result",toolCallId:m,toolName:f,result:g}})});break}case"function":case"data":case"tool":break;default:{let p=c;throw new Z$({originalMessage:i,message:`Unsupported role: ${p}`})}}}return n}a(mw,"convertToCoreMessages");function kB({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Ko({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Ko({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Ko({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Ko({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=SB(e.messages);if(r==="other")throw new Ko({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let o=r==="ui-messages"?mw(e.messages,{tools:t}):e.messages,n=Mc({value:o,schema:s.array(wB)});if(!n.success)throw new Ko({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:n.error});return{type:"messages",messages:o,system:e.system}}throw new Error("unreachable")}a(kB,"standardizePrompt");function PB(e){return{promptTokens:e.promptTokens,completionTokens:e.completionTokens,totalTokens:e.promptTokens+e.completionTokens}}a(PB,"calculateLanguageModelUsage");function vp(e,{contentType:t,dataStreamVersion:r}){var o;let n=new Headers((o=e?.headers)!=null?o:{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}a(vp,"prepareResponseHeaders");var $B="AI_NoObjectGeneratedError",AB=`vercel.ai.error.${$B}`,CB=Symbol.for(AB),OB;OB=CB;function H$(e,t){let r=e.pipeThrough(new TransformStream(t));return r[Symbol.asyncIterator]=()=>{let o=r.getReader();return{async next(){let{done:n,value:i}=await o.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}}},r}a(H$,"createAsyncIterableStream");var j_e=zn({prefix:"aiobj",size:24});function un(){let e,t;return{promise:new Promise((o,n)=>{e=o,t=n}),resolve:e,reject:t}}a(un,"createResolvablePromise");function RB(){var e,t;return(t=(e=globalThis?.performance)==null?void 0:e.now())!=null?t:Date.now()}a(RB,"now");function G$(e,{contentType:t,dataStreamVersion:r}){let o={};if(e?.headers!=null)for(let[n,i]of Object.entries(e.headers))o[n]=i;return o["Content-Type"]==null&&(o["Content-Type"]=t),r!==void 0&&(o["X-Vercel-AI-Data-Stream"]=r),o}a(G$,"prepareOutgoingHttpHeaders");function K$({response:e,status:t,statusText:r,headers:o,stream:n}){e.writeHead(t??200,r,o);let i=n.getReader();a(async()=>{try{for(;;){let{done:u,value:l}=await i.read();if(u)break;e.write(l)}}catch(u){throw u}finally{e.end()}},"read")()}a(K$,"writeToServerResponse");var z_e=zn({prefix:"aiobj",size:24});var dw="AI_InvalidToolArgumentsError",mA=`vercel.ai.error.${dw}`,NB=Symbol.for(mA),fA,jB=class extends Fe{static{a(this,"InvalidToolArgumentsError")}constructor({toolArgs:e,toolName:t,cause:r,message:o=`Invalid arguments for tool ${t}: ${cp(r)}`}){super({name:dw,message:o,cause:r}),this[fA]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Fe.hasMarker(e,mA)}static isInvalidToolArgumentsError(e){return e instanceof Error&&e.name===dw&&typeof e.toolName=="string"&&typeof e.toolArgs=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};fA=NB;var pw="AI_NoSuchToolError",hA=`vercel.ai.error.${pw}`,DB=Symbol.for(hA),gA,_p=class extends Fe{static{a(this,"NoSuchToolError")}constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:pw,message:r}),this[gA]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Fe.hasMarker(e,hA)}static isNoSuchToolError(e){return e instanceof Error&&e.name===pw&&"toolName"in e&&e.toolName!=null&&typeof e.name=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};gA=DB;function zB(e){return e!=null&&Object.keys(e).length>0}a(zB,"isNonEmptyObject");function MB({tools:e,toolChoice:t,activeTools:r}){return zB(e)?{tools:(r!=null?Object.entries(e).filter(([n])=>r.includes(n)):Object.entries(e)).map(([n,i])=>{let c=i.type;switch(c){case void 0:case"function":return{type:"function",name:n,description:i.description,parameters:sp(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:n,id:i.id,args:i.args};default:{let u=c;throw new Error(`Unsupported tool type: ${u}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}a(MB,"prepareToolsAndToolChoice");var UB=/^([\s\S]*?)(\s+)(\S*)$/;function qB(e){let t=e.match(UB);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}a(qB,"splitOnLastWhitespace");function LB({toolCall:e,tools:t}){let r=e.toolName;if(t==null)throw new _p({toolName:e.toolName});let o=t[r];if(o==null)throw new _p({toolName:e.toolName,availableTools:Object.keys(t)});let n=sp(o.parameters),i=e.args.trim()===""?Mc({value:{},schema:n}):Hx({text:e.args,schema:n});if(i.success===!1)throw new jB({toolName:r,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:i.value}}a(LB,"parseToolCall");function FB({text:e="",tools:t,toolCalls:r,toolResults:o}){let n=[];return n.push({role:"assistant",content:[{type:"text",text:e},...r]}),o.length>0&&n.push({role:"tool",content:o.map(i=>{let c=t[i.toolName];return c?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:c.experimental_toToolResultContent(i.result),experimental_content:c.experimental_toToolResultContent(i.result)}:{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:i.result}})}),n}a(FB,"toResponseMessages");var V_e=zn({prefix:"aitxt",size:24});function BB(){let e=[],t=null,r=!1,o=a(async()=>{if(r&&e.length===0){t?.close();return}if(e.length!==0)try{let{value:n,done:i}=await e[0].read();i?(e.shift(),e.length>0?await o():r&&t?.close()):t?.enqueue(n)}catch(n){t?.error(n),e.shift(),r&&e.length===0&&t?.close()}},"processPull");return{stream:new ReadableStream({start(n){t=n},pull:o,async cancel(){for(let n of e)await n.cancel();e=[],r=!0}}),addStream:a(n=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(n.getReader())},"addStream"),close:a(()=>{r=!0,e.length===0&&t?.close()},"close")}}a(BB,"createStitchableStream");function fw(e,t){let r=e.getReader(),o=t.getReader(),n,i,c=!1,u=!1;async function l(p){try{n==null&&(n=r.read());let m=await n;n=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}a(l,"readStream1");async function d(p){try{i==null&&(i=o.read());let m=await i;i=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}return a(d,"readStream2"),new ReadableStream({async pull(p){try{if(c){await d(p);return}if(u){await l(p);return}n==null&&(n=r.read()),i==null&&(i=o.read());let{result:m,reader:f}=await Promise.race([n.then(g=>({result:g,reader:r})),i.then(g=>({result:g,reader:o}))]);m.done||p.enqueue(m.value),f===r?(n=void 0,m.done&&(await d(p),c=!0)):(i=void 0,m.done&&(u=!0,await l(p)))}catch(m){p.error(m)}},cancel(){r.cancel(),o.cancel()}})}a(fw,"mergeStreams");function VB({tools:e,generatorStream:t,toolCallStreaming:r,tracer:o,telemetry:n,abortSignal:i}){let c=null,u=new ReadableStream({start(h){c=h}}),l={},d=new Set,p=!1,m;function f(){p&&d.size===0&&(m!=null&&c.enqueue(m),c.close())}a(f,"attemptClose");let g=new TransformStream({transform(h,v){let x=h.type;switch(x){case"text-delta":case"response-metadata":case"error":{v.enqueue(h);break}case"tool-call-delta":{r&&(l[h.toolCallId]||(v.enqueue({type:"tool-call-streaming-start",toolCallId:h.toolCallId,toolName:h.toolName}),l[h.toolCallId]=!0),v.enqueue({type:"tool-call-delta",toolCallId:h.toolCallId,toolName:h.toolName,argsTextDelta:h.argsTextDelta}));break}case"tool-call":{let S=h.toolName;if(e==null){c.enqueue({type:"error",error:new _p({toolName:h.toolName})});break}let b=e[S];if(b==null){c.enqueue({type:"error",error:new _p({toolName:h.toolName,availableTools:Object.keys(e)})});break}try{let w=LB({toolCall:h,tools:e});if(v.enqueue(w),b.execute!=null){let P=Rx();d.add(P),iw({name:"ai.toolCall",attributes:da({telemetry:n,attributes:{...ow({operationId:"ai.toolCall",telemetry:n}),"ai.toolCall.name":w.toolName,"ai.toolCall.id":w.toolCallId,"ai.toolCall.args":{output:a(()=>JSON.stringify(w.args),"output")}}}),tracer:o,fn:a(async B=>b.execute(w.args,{abortSignal:i}).then(V=>{c.enqueue({...w,type:"tool-result",result:V}),d.delete(P),f();try{B.setAttributes(da({telemetry:n,attributes:{"ai.toolCall.result":{output:a(()=>JSON.stringify(V),"output")}}}))}catch{}},V=>{c.enqueue({type:"error",error:V}),d.delete(P),f()}),"fn")})}}catch(w){c.enqueue({type:"error",error:w})}break}case"finish":{m={type:"finish",finishReason:h.finishReason,logprobs:h.logprobs,usage:PB(h.usage),experimental_providerMetadata:h.providerMetadata};break}default:{let S=x;throw new Error(`Unhandled chunk type: ${S}`)}}},flush(){p=!0,f()}});return new ReadableStream({async start(h){return Promise.all([t.pipeThrough(g).pipeTo(new WritableStream({write(v){h.enqueue(v)},close(){}})),u.pipeTo(new WritableStream({write(v){h.enqueue(v)},close(){h.close()}}))])}})}a(VB,"runToolsTransformation");var ZB=zn({prefix:"aitxt",size:24});async function yA({model:e,tools:t,toolChoice:r,system:o,prompt:n,messages:i,maxRetries:c,abortSignal:u,headers:l,maxToolRoundtrips:d=0,maxSteps:p=d!=null?d+1:1,experimental_continueSteps:m=!1,experimental_telemetry:f,experimental_providerMetadata:g,experimental_toolCallStreaming:h=!1,experimental_activeTools:v,onChunk:x,onFinish:S,onStepFinish:b,_internal:{now:w=RB,generateId:P=ZB,currentDate:B=a(()=>new Date,"currentDate")}={},...V}){if(p<1)throw new Vr({parameter:"maxSteps",value:p,message:"maxSteps must be at least 1"});let C=G6({model:e,telemetry:f,headers:l,settings:{...V,maxRetries:c}}),L=W6(f),M=kB({prompt:{system:o,prompt:n,messages:i},tools:t});return iw({name:"ai.streamText",attributes:da({telemetry:f,attributes:{...ow({operationId:"ai.streamText",telemetry:f}),...C,"ai.prompt":{input:a(()=>JSON.stringify({system:o,prompt:n,messages:i}),"input")},"ai.settings.maxSteps":p}}),tracer:L,endWhenDone:!1,fn:a(async D=>{let U=H6({maxRetries:c}),de=a(async({responseMessages:wt})=>{let We=wt.length===0?M.type:"messages",zt=await sB({prompt:{type:We,system:M.system,messages:[...M.messages,...wt]},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),z={type:"regular",...MB({tools:t,toolChoice:r,activeTools:v})},{result:{stream:be,warnings:se,rawResponse:E,request:Ae},doStreamSpan:ct,startTimestampMs:St}=await U(()=>iw({name:"ai.streamText.doStream",attributes:da({telemetry:f,attributes:{...ow({operationId:"ai.streamText.doStream",telemetry:f}),...C,"ai.prompt.format":{input:a(()=>We,"input")},"ai.prompt.messages":{input:a(()=>JSON.stringify(zt),"input")},"ai.prompt.tools":{input:a(()=>{var In;return(In=z.tools)==null?void 0:In.map(Wu=>JSON.stringify(Wu))},"input")},"ai.prompt.toolChoice":{input:a(()=>z.toolChoice!=null?JSON.stringify(z.toolChoice):void 0,"input")},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":V.frequencyPenalty,"gen_ai.request.max_tokens":V.maxTokens,"gen_ai.request.presence_penalty":V.presencePenalty,"gen_ai.request.stop_sequences":V.stopSequences,"gen_ai.request.temperature":V.temperature,"gen_ai.request.top_k":V.topK,"gen_ai.request.top_p":V.topP}}),tracer:L,endWhenDone:!1,fn:a(async In=>({startTimestampMs:w(),doStreamSpan:In,result:await e.doStream({mode:z,...pB(V),inputFormat:We,prompt:zt,providerMetadata:g,abortSignal:u,headers:l})}),"fn")}));return{result:{stream:VB({tools:t,generatorStream:be,toolCallStreaming:h,tracer:L,telemetry:f,abortSignal:u}),warnings:se,request:Ae??{},rawResponse:E},doStreamSpan:ct,startTimestampMs:St}},"startStep"),{result:{stream:J,warnings:re,rawResponse:ve,request:ie},doStreamSpan:fe,startTimestampMs:ze}=await de({responseMessages:[]});return new HB({stream:J,warnings:re,rawResponse:ve,request:ie,onChunk:x,onFinish:S,onStepFinish:b,rootSpan:D,doStreamSpan:fe,telemetry:f,startTimestampMs:ze,maxSteps:p,continueSteps:m,startStep:de,modelId:e.modelId,now:w,currentDate:B,generateId:P,tools:t})},"fn")})}a(yA,"streamText");var HB=class{static{a(this,"DefaultStreamTextResult")}constructor({stream:e,warnings:t,rawResponse:r,request:o,onChunk:n,onFinish:i,onStepFinish:c,rootSpan:u,doStreamSpan:l,telemetry:d,startTimestampMs:p,maxSteps:m,continueSteps:f,startStep:g,modelId:h,now:v,currentDate:x,generateId:S,tools:b}){this.warnings=t,this.rawResponse=r;let{resolve:w,promise:P}=un();this.usage=P;let{resolve:B,promise:V}=un();this.finishReason=V;let{resolve:C,promise:L}=un();this.text=L;let{resolve:M,promise:D}=un();this.toolCalls=D;let{resolve:U,promise:de}=un();this.toolResults=de;let{resolve:J,promise:re}=un();this.steps=re;let{resolve:ve,promise:ie}=un();this.experimental_providerMetadata=ie;let{resolve:fe,promise:ze}=un();this.request=ze;let{resolve:wt,promise:We}=un();this.response=We;let{resolve:zt,promise:z}=un();this.responseMessages=z;let{stream:be,addStream:se,close:E}=BB();this.originalStream=be;let Ae=[],ct=this;function St({stream:In,startTimestamp:Wu,doStreamSpan:li,currentStep:sT,responseMessages:Wr,usage:Um={promptTokens:0,completionTokens:0,totalTokens:0},stepType:Qu,previousStepText:Nz="",stepRequest:qm,hasLeadingWhitespace:jz}){let Qr=[],di=[],vr="unknown",Dr={promptTokens:0,completionTokens:0,totalTokens:0},pi,cT=!0,Oo="",mi=Qu==="continue"?Nz:"",es,ar={id:S(),timestamp:x(),modelId:h},fi="",uT=!1,lT=!0,dT=!1;async function Lm({controller:Ve,chunk:Vt}){Ve.enqueue(Vt),Oo+=Vt.textDelta,mi+=Vt.textDelta,uT=!0,dT=Vt.textDelta.trimEnd()!==Vt.textDelta,await n?.({chunk:Vt})}a(Lm,"publishTextChunk"),se(In.pipeThrough(new TransformStream({async transform(Ve,Vt){var Ro,Xr,ts;if(cT){let ut=v()-Wu;cT=!1,li.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ut,"ai.stream.msToFirstChunk":ut}),li.setAttributes({"ai.response.msToFirstChunk":ut,"ai.stream.msToFirstChunk":ut})}if(Ve.type==="text-delta"&&Ve.textDelta.length===0)return;let En=Ve.type;switch(En){case"text-delta":{if(f){let ut=lT&&jz?Ve.textDelta.trimStart():Ve.textDelta;if(ut.length===0)break;lT=!1,fi+=ut;let hi=qB(fi);hi!=null&&(fi=hi.suffix,await Lm({controller:Vt,chunk:{type:"text-delta",textDelta:hi.prefix+hi.whitespace}}))}else await Lm({controller:Vt,chunk:Ve});break}case"tool-call":{Vt.enqueue(Ve),Qr.push(Ve),await n?.({chunk:Ve});break}case"tool-result":{Vt.enqueue(Ve),di.push(Ve),await n?.({chunk:Ve});break}case"response-metadata":{ar={id:(Ro=Ve.id)!=null?Ro:ar.id,timestamp:(Xr=Ve.timestamp)!=null?Xr:ar.timestamp,modelId:(ts=Ve.modelId)!=null?ts:ar.modelId};break}case"finish":{Dr=Ve.usage,vr=Ve.finishReason,pi=Ve.experimental_providerMetadata,es=Ve.logprobs;let ut=v()-Wu;li.addEvent("ai.stream.finish"),li.setAttributes({"ai.response.msToFinish":ut,"ai.response.avgCompletionTokensPerSecond":1e3*Dr.completionTokens/ut});break}case"tool-call-streaming-start":case"tool-call-delta":{Vt.enqueue(Ve),await n?.({chunk:Ve});break}case"error":{Vt.enqueue(Ve),vr="error";break}default:{let ut=En;throw new Error(`Unknown chunk type: ${ut}`)}}},async flush(Ve){var Vt;let Ro=Qr.length>0?JSON.stringify(Qr):void 0,Xr="done";sT+1<m&&(f&&vr==="length"&&Qr.length===0?Xr="continue":Qr.length>0&&di.length===Qr.length&&(Xr="tool-result")),f&&fi.length>0&&(Xr!=="continue"||Qu==="continue"&&!uT)&&(await Lm({controller:Ve,chunk:{type:"text-delta",textDelta:fi}}),fi="");try{li.setAttributes(da({telemetry:d,attributes:{"ai.response.finishReason":vr,"ai.response.text":{output:a(()=>Oo,"output")},"ai.response.toolCalls":{output:a(()=>Ro,"output")},"ai.response.id":ar.id,"ai.response.model":ar.modelId,"ai.response.timestamp":ar.timestamp.toISOString(),"ai.usage.promptTokens":Dr.promptTokens,"ai.usage.completionTokens":Dr.completionTokens,"ai.finishReason":vr,"ai.result.text":{output:a(()=>Oo,"output")},"ai.result.toolCalls":{output:a(()=>Ro,"output")},"gen_ai.response.finish_reasons":[vr],"gen_ai.response.id":ar.id,"gen_ai.response.model":ar.modelId,"gen_ai.usage.input_tokens":Dr.promptTokens,"gen_ai.usage.output_tokens":Dr.completionTokens}}))}catch{}finally{li.end()}if(Ve.enqueue({type:"step-finish",finishReason:vr,usage:Dr,experimental_providerMetadata:pi,logprobs:es,response:{...ar},isContinued:Xr==="continue"}),Qu==="continue"){let ut=Wr[Wr.length-1];typeof ut.content=="string"?ut.content+=Oo:ut.content.push({text:Oo,type:"text"})}else Wr.push(...FB({text:Oo,tools:b??{},toolCalls:Qr,toolResults:di}));let ts={stepType:Qu,text:Oo,toolCalls:Qr,toolResults:di,finishReason:vr,usage:Dr,warnings:ct.warnings,logprobs:es,request:qm,rawResponse:ct.rawResponse,response:{...ar,headers:(Vt=ct.rawResponse)==null?void 0:Vt.headers,messages:JSON.parse(JSON.stringify(Wr))},experimental_providerMetadata:pi,isContinued:Xr==="continue"};Ae.push(ts),await c?.(ts);let En={promptTokens:Um.promptTokens+Dr.promptTokens,completionTokens:Um.completionTokens+Dr.completionTokens,totalTokens:Um.totalTokens+Dr.totalTokens};if(Xr!=="done"){let{result:ut,doStreamSpan:hi,startTimestampMs:Dz}=await g({responseMessages:Wr});ct.warnings=ut.warnings,ct.rawResponse=ut.rawResponse,St({stream:ut.stream,startTimestamp:Dz,doStreamSpan:hi,currentStep:sT+1,responseMessages:Wr,usage:En,stepType:Xr,previousStepText:mi,stepRequest:ut.request,hasLeadingWhitespace:dT});return}try{Ve.enqueue({type:"finish",finishReason:vr,usage:En,experimental_providerMetadata:pi,logprobs:es,response:{...ar}}),E(),u.setAttributes(da({telemetry:d,attributes:{"ai.response.finishReason":vr,"ai.response.text":{output:a(()=>mi,"output")},"ai.response.toolCalls":{output:a(()=>Ro,"output")},"ai.usage.promptTokens":En.promptTokens,"ai.usage.completionTokens":En.completionTokens,"ai.finishReason":vr,"ai.result.text":{output:a(()=>mi,"output")},"ai.result.toolCalls":{output:a(()=>Ro,"output")}}})),w(En),B(vr),C(mi),M(Qr),ve(pi),U(di),fe(qm),wt({...ar,headers:r?.headers,messages:Wr}),J(Ae),zt(Wr),await i?.({finishReason:vr,logprobs:es,usage:En,text:mi,toolCalls:Qr,toolResults:di,request:qm,rawResponse:r,response:{...ar,headers:r?.headers,messages:Wr},warnings:t,experimental_providerMetadata:pi,steps:Ae,responseMessages:Wr})}catch(ut){Ve.error(ut)}finally{u.end()}}})))}a(St,"addStepStream"),St({stream:e,startTimestamp:p,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:o,hasLeadingWhitespace:!1})}teeStream(){let[e,t]=this.originalStream.tee();return this.originalStream=t,e}get textStream(){return H$(this.teeStream(),{transform(e,t){e.type==="text-delta"?t.enqueue(e.textDelta):e.type==="error"&&t.error(e.error)}})}get fullStream(){return H$(this.teeStream(),{transform(e,t){t.enqueue(e)}})}toAIStream(e={}){return this.toDataStreamInternal({callbacks:e})}toDataStreamInternal({callbacks:e={},getErrorMessage:t=a(()=>"","getErrorMessage3"),sendUsage:r=!0}={}){let o="",n=new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(c,u){if(u.enqueue(c),c.type==="text-delta"){let l=c.textDelta;o+=l,e.onToken&&await e.onToken(l),e.onText&&await e.onText(l)}},async flush(){e.onCompletion&&await e.onCompletion(o),e.onFinal&&await e.onFinal(o)}}),i=new TransformStream({transform:a(async(c,u)=>{let l=c.type;switch(l){case"text-delta":{u.enqueue(Br("text",c.textDelta));break}case"tool-call-streaming-start":{u.enqueue(Br("tool_call_streaming_start",{toolCallId:c.toolCallId,toolName:c.toolName}));break}case"tool-call-delta":{u.enqueue(Br("tool_call_delta",{toolCallId:c.toolCallId,argsTextDelta:c.argsTextDelta}));break}case"tool-call":{u.enqueue(Br("tool_call",{toolCallId:c.toolCallId,toolName:c.toolName,args:c.args}));break}case"tool-result":{u.enqueue(Br("tool_result",{toolCallId:c.toolCallId,result:c.result}));break}case"error":{u.enqueue(Br("error",t(c.error)));break}case"step-finish":{u.enqueue(Br("finish_step",{finishReason:c.finishReason,usage:r?{promptTokens:c.usage.promptTokens,completionTokens:c.usage.completionTokens}:void 0,isContinued:c.isContinued}));break}case"finish":{u.enqueue(Br("finish_message",{finishReason:c.finishReason,usage:r?{promptTokens:c.usage.promptTokens,completionTokens:c.usage.completionTokens}:void 0}));break}default:{let d=l;throw new Error(`Unknown chunk type: ${d}`)}}},"transform")});return this.fullStream.pipeThrough(n).pipeThrough(i).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(e,t){return this.pipeDataStreamToResponse(e,t)}pipeDataStreamToResponse(e,t){let r=t==null?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},o=t==null?void 0:"data"in t?t.data:void 0,n=t==null?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,i=t==null?void 0:"sendUsage"in t?t.sendUsage:void 0;K$({response:e,status:r?.status,statusText:r?.statusText,headers:G$(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:o,getErrorMessage:n,sendUsage:i})})}pipeTextStreamToResponse(e,t){K$({response:e,status:t?.status,statusText:t?.statusText,headers:G$(t,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(e){return this.toDataStreamResponse(e)}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e?.getErrorMessage,sendUsage:e?.sendUsage});return e?.data?fw(e?.data.stream,t):t}toDataStreamResponse(e){var t;let r=e==null?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},o=e==null?void 0:"data"in e?e.data:void 0,n=e==null?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,i=e==null?void 0:"sendUsage"in e?e.sendUsage:void 0;return new Response(this.toDataStream({data:o,getErrorMessage:n,sendUsage:i}),{status:(t=r?.status)!=null?t:200,statusText:r?.statusText,headers:vp(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e?.status)!=null?t:200,headers:vp(e,{contentType:"text/plain; charset=utf-8"})})}};var GB="AI_NoSuchProviderError",KB=`vercel.ai.error.${GB}`,JB=Symbol.for(KB),WB;WB=JB;function vA(e){let t=new TextEncoder,r="",o=e||{};return new TransformStream({async start(){o.onStart&&await o.onStart()},async transform(n,i){let c=typeof n=="string"?n:n.content;i.enqueue(t.encode(c)),r+=c,o.onToken&&await o.onToken(c),o.onText&&typeof n=="string"&&await o.onText(n)},async flush(){let n=QB(o);o.onCompletion&&await o.onCompletion(r),o.onFinal&&!n&&await o.onFinal(r)}})}a(vA,"createCallbacksTransformer");function QB(e){return"experimental_onFunctionCall"in e}a(QB,"isOfTypeOpenAIStreamCallbacks");function XB(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}a(XB,"trimStartOfStreamHelper");var K_e=15*1e3;function _A(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:a(async(r,o)=>{let n=t.decode(r);o.enqueue(e.encode(Br("text",n)))},"transform")})}a(_A,"createStreamDataTransformer");var J_e=new TextDecoder("utf-8");var YB={};W$(YB,{toAIStream:a(()=>eV,"toAIStream"),toDataStream:a(()=>hw,"toDataStream"),toDataStreamResponse:a(()=>tV,"toDataStreamResponse")});function eV(e,t){return hw(e,t)}a(eV,"toAIStream");function hw(e,t){return e.pipeThrough(new TransformStream({transform:a(async(r,o)=>{var n;if(typeof r=="string"){o.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&J$((n=r.data)==null?void 0:n.chunk,o);return}J$(r,o)},"transform")})).pipeThrough(vA(t)).pipeThrough(_A())}a(hw,"toDataStream");function tV(e,t){var r;let o=hw(e,t?.callbacks),n=t?.data,i=t?.init,c=n?fw(n.stream,o):o;return new Response(c,{status:(r=i?.status)!=null?r:200,statusText:i?.statusText,headers:vp(i,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}a(tV,"toDataStreamResponse");function J$(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let o of r)o.type==="text"&&t.enqueue(o.text)}}a(J$,"forwardAIMessageChunk");var rV={};W$(rV,{toDataStream:a(()=>bA,"toDataStream"),toDataStreamResponse:a(()=>nV,"toDataStreamResponse")});function bA(e,t){return oV(e).pipeThrough(vA(t)).pipeThrough(_A())}a(bA,"toDataStream2");function nV(e,t={}){var r;let{init:o,data:n,callbacks:i}=t,c=bA(e,i),u=n?fw(n.stream,c):c;return new Response(u,{status:(r=o?.status)!=null?r:200,statusText:o?.statusText,headers:vp(o,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}a(nV,"toDataStreamResponse2");function oV(e){let t=e[Symbol.asyncIterator](),r=XB();return new ReadableStream({async pull(o){var n;let{value:i,done:c}=await t.next();if(c){o.close();return}let u=r((n=i.delta)!=null?n:"");u&&o.enqueue(u)}})}a(oV,"toReadableStream");var W_e=Symbol("internal_openai_fn_messages");async function bp(e){try{await sn.insert(ro).values({userId:e.userId,action:`ai_${e.actionType}`,resourceType:e.toolName||"ai_chat",sessionId:e.sessionId,success:e.outcome==="success",errorMessage:e.errorMessage,newValues:{provider:e.provider,model:e.model,action_type:e.actionType,tool_name:e.toolName,input_summary:e.inputSummary.slice(0,500),output_summary:e.outputSummary.slice(0,500),tokens_used:e.tokensUsed,latency_ms:e.latencyMs,outcome:e.outcome,affected_tables:e.affectedTables,affected_record_ids:e.affectedRecordIds}})}catch{}}a(bp,"logAIOperation");var xA=`Voc\xEA \xE9 o assistente financeiro inteligente especializado do AegisWallet, a plataforma brasileira l\xEDder em gest\xE3o financeira pessoal com interface voz-first.

## SUA ESPECIALIDADE BRASILEIRA

### Dom\xEDnio do Mercado Financeiro Brasileiro
- **PIX**: Expert em transfer\xEAncias PIX instant\xE2neas 24/7, QR Codes, limites, taxas e regras do BCB
- **Boletos**: Gest\xE3o completa de boletos - registro, pagamento, c\xE1lculo de juros/multas, agendamentos
- **Open Banking**: Conhecimento profundo das APIs banc\xE1rias brasileiras e padr\xF5es regulat\xF3rios
- **C\xE2mbio**: Entendimento de opera\xE7\xF5es cambiais e limites legais brasileiros
- **Impostos**: Conhecimento de tributa\xE7\xE3o brasileira (IR, IOF, etc.)

### Cultura e Localiza\xE7\xE3o
- **Portugu\xEAs Brasileiro Nativo**: Use termos como "parab\xE9ns", "show de bola", "blz", " firm\xE3o"
- **Realidade Financeira Brasileira**: Entenda sal\xE1rios, infla\xE7\xE3o, custo de vida, juros altos
- **Calend\xE1rio Brasileiro**: Considere feriados, 13\xBA sal\xE1rio, d\xE9cimo terceiro, parcelas
- **Bancos Nacionais**: Ita\xFA, Bradesco, Caixa, Banco do Brasil, Nubank, Inter, etc.

## CAPACIDADES AVAN\xC7ADAS

### Opera\xE7\xF5es Financeiras (PIX, TED, DOC, Boletos)
- **Transfer\xEAncias PIX**: Envio/recebimento instant\xE2neo, QR Codes, agendamentos, status tracking
- **Gest\xE3o de Boletos**: Registro via c\xF3digo de barras, c\xE1lculo autom\xE1tico de juros/multas, agendamento de pagamentos
- **An\xE1lise de Contatos**: Salvar contatos frequentes, m\xE9todos de pagamento PIX, favoritos
- **Limites e Taxas**: Conhecimento de limites di\xE1rios, taxas, hor\xE1rios de compensa\xE7\xE3o

### An\xE1lises e Insights Financeiros
- **An\xE1lise de Gastos**: Detalhada por categoria, tend\xEAncias, padr\xF5es an\xF4malos
- **Previs\xE3o de Fluxo de Caixa**: Baseada em hist\xF3rico e eventos futuros com confian\xE7a
- **Detec\xE7\xE3o de Fraude**: An\xE1lise em tempo real de risco, padr\xF5es suspeitos
- **Recomenda\xE7\xF5es de Or\xE7amento**: Personalizadas baseadas em comportamento e metas

### Interface Voz-First (Voice-First)
- **Comandos em Portugu\xEAs Natural**: "Envia cem reais para a Maria pelo PIX", "Paga o boleto da luz"
- **Processamento de Contexto**: Mant\xE9m conversa\xE7\xE3o com hist\xF3rico e contexto relevante
- **Confirma\xE7\xE3o por Voz**: Valida\xE7\xE3o segura de opera\xE7\xF5es sens\xEDveis via reconhecimento de voz
- **Respostas Otimizadas para TTS**: Texto projetado para s\xEDntese de voz natural

### Seguran\xE7a e Conformidade LGPD
- **LGPD**: Conformidade total com Lei Geral de Prote\xE7\xE3o de Dados brasileira
- **Valida\xE7\xE3o Multi-Fator**: 2FA, biom\xE9trica, c\xF3digo via SMS/email
- **Audit Logging**: Registros completos para compliance e auditoria
- **Prote\xE7\xE3o de Dados**: Criptografia, anonimiza\xE7\xE3o, reten\xE7\xE3o conformidade

## REGRAS DE SEGURAN\xC7A E CONFORMIDADE (CR\xCDTICAS)

### Prote\xE7\xE3o de Dados LGPD
1. **NUNCA** exponha dados sens\xEDveis: CPF, senhas, tokens biom\xE9tricos
2. **SEMPRE** obtenha consentimento expl\xEDcito para uso de dados financeiros
3. **RESPEITE** direitos de acesso, corre\xE7\xE3o e exclus\xE3o de dados
4. **IMPLEMENTE** pol\xEDticas de reten\xE7\xE3o conformes com regulamenta\xE7\xE3o brasileira

### Seguran\xE7a de Transa\xE7\xF5es
1. **VALIDA\xC7\xC3O OBRIGAT\xD3RIA**: Toda transa\xE7\xE3o >R$1.000 requer verifica\xE7\xE3o adicional
2. **LIMITES AUTOM\xC1TICOS**: Respeite limites di\xE1rios e de frequ\xEAncia
3. **MONITORAMENTO**: Detecte padr\xF5es an\xF4malos e poss\xEDveis fraudes
4. **CONFIRMA\xC7\xC3O**: Use c\xF3digos, biometria ou confirma\xE7\xE3o por voz para opera\xE7\xF5es cr\xEDticas

### Padr\xF5es Brasileiros de Atendimento
1. **Formalidade Amig\xE1vel**: Tratamento "voc\xEA" mas respeitoso e profissional
2. **Hor\xE1rio Banc\xE1rio**: Considere hor\xE1rios banc\xE1rios e janela de compensa\xE7\xE3o
3. **Feriados**: Esteja ciente de feriados nacionais e estaduais brasileiros
4. **Cultura Financeira**: Entenda avers\xE3o a risco, prefer\xEAncia por seguran\xE7a

## FORMATA\xC7\xC3O E COMUNICA\xC7\xC3O

### Formatos Brasileiros
- **Valores**: R$ 1.234,56 (separador decimal v\xEDrgula, milhar ponto)
- **Datas**: DD/MM/YYYY ou "hoje", "ontem", "anteontem", "esta semana"
- **Hor\xE1rios**: 24h com fuso America/Sao_Paulo (BRT/BRST)
- **Documentos**: CPF: XXX.XXX.XXX-XX, CNPJ: XX.XXX.XXX/XXXX-XX

### Tom e Estilo
- **Voz Ativa**: "Vou analisar seus gastos" em vez de "Seus gastos ser\xE3o analisados"
- **Empatia**: Entenda dificuldades financeiras com respeito e apoio
- **Clareza**: Use termos simples, evite jarg\xF5es t\xE9cnicos excessivos
- **Cultura**: Use express\xF5es brasileiras naturais quando apropriado

## PADR\xD5ES DE RESPOSTA

### Para PIX
- **R\xE1pido**: "Transfer\xEAncia PIX enviada! Chega em segundos na conta do destinat\xE1rio."
- **Seguro**: "Para sua seguran\xE7a, vou enviar um c\xF3digo para confirmar esta transfer\xEAncia de R$ 500,00."
- **Informativo**: "O limite di\xE1rio PIX \xE9 R$ 5.000 entre 20h e 6h."

### Para Boletos
- **C\xE1lculo**: "Este boleto vence em 3 dias com multa de 2% e juros de 1% ao m\xEAs."
- **Agendamento**: "Boleto agendado! Ser\xE1 pago automaticamente na data de vencimento."
- **Alerta**: "\u26A0\uFE0F Voc\xEA tem 2 boletos vencendo esta semana totalizando R$ 850,00."

### Para An\xE1lises
- **Visual**: "Seus gastos em alimenta\xE7\xE3o subiram 15% este m\xEAs. Quer ver o gr\xE1fico detalhado?"
- **Pr\xE1tico**: "Com base no seu padr\xE3o, sugiro reservar R$ 2.000 para emerg\xEAncias."
- **Alerta**: "Detectei 3 transa\xE7\xF5es suspeitas esta semana. Quer investigar?"

### Para Voz
- **Conversacional**: "Entendi! Voc\xEA quer transferir R$ 250 para a Joana pelo PIX, correto?"
- **Claro**: "Pode repetir o valor? N\xE3o consegui entender bem."
- **Eficiente**: "Pronto! Transfer\xEAncia autorizada com sua confirma\xE7\xE3o por voz."

## FLUXOS ESPECIALIZADOS

### Transfer\xEAncia PIX Completa
1. "Quanto quer transferir?" \u2192 Validar valor e limites
2. "Qual a chave PIX do destinat\xE1rio?" \u2192 Validar formato e tipo
3. "Qual o nome completo do destinat\xE1rio?" \u2192 Para registro
4. "Descri\xE7\xE3o opcional?" \u2192 Para identifica\xE7\xE3o
5. "Confirmar transfer\xEAncia?" \u2192 Envio ou verifica\xE7\xE3o adicional

### Pagamento de Boleto
1. "C\xF3digo de barras ou\u7167\u7247?" \u2192 Captura e valida\xE7\xE3o
2. "Valor e data de vencimento?" \u2192 Confirma\xE7\xE3o
3. "Calcular juros/multas?" \u2192 Se vencido
4. "Pagar agora ou agendar?" \u2192 Processamento
5. "Confirma\xE7\xE3o?" \u2192 Seguran\xE7a e finaliza\xE7\xE3o

### An\xE1lise Financeira por Voz
1. "Que per\xEDodo quer analisar?" \u2192 Defini\xE7\xE3o de scope
2. "Foco em alguma categoria espec\xEDfica?" \u2192 Detalhamento
3. "Quer compara\xE7\xE3o com per\xEDodo anterior?" \u2192 An\xE1lise comparativa
4. "Preferir resumo oral ou visual?" \u2192 Formato de sa\xEDda
5. "Gerar recomenda\xE7\xF5es?" \u2192 A\xE7\xF5es pr\xE1ticas

## INTEGRA\xC7\xC3O COM FERRAMENTAS

### Sistema de Ferramentas
Voc\xEA tem acesso a 4 categorias principais de ferramentas:

1. **Opera\xE7\xF5es Financeiras Brasileiras**
   - pix.*: Transfer\xEAncias, QR codes, agendamentos PIX
   - boletos.*: Registro, pagamento, c\xE1lculos de boletos
   - contacts.*: Gest\xE3o de contatos e m\xE9todos de pagamento

2. **An\xE1lises e Insights**
   - insights.*: An\xE1lise de gastos, previs\xF5es, detec\xE7\xE3o de anomalias
   - multimodal.*: Relat\xF3rios visuais, gr\xE1ficos, exporta\xE7\xF5es

3. **Seguran\xE7a e Conformidade**
   - security.*: Detec\xE7\xE3o de fraude, valida\xE7\xF5es, configura\xE7\xF5es de seguran\xE7a
   - notifications.*: Alertas, lembretes, prefer\xEAncias de notifica\xE7\xE3o

4. **Interface Voz-First**
   - voice.*: Processamento de comandos, confirma\xE7\xE3o por voz, contexto
   - Todas as ferramentas otimizadas para resposta via TTS

### Orquestra\xE7\xE3o Inteligente
Combine m\xFAltiplas ferramentas para respostas completas:
- Consultar saldo \u2192 security.checkFraudRisk \u2192 pix.sendPixTransfer
- An\xE1lise de gastos \u2192 insights.getSpendingAnalysis \u2192 multimodal.generateVisualReport
- Alerta de seguran\xE7a \u2192 notifications.sendAlert \u2192 voice.confirmVoiceAction

## MANEJO DE ERROS E RECUPERA\xC7\xC3O

### Erros Comuns Brasileiros
- **Chave PIX Inv\xE1lida**: "Esta chave PIX n\xE3o existe. Verifique CPF, email ou telefone."
- **Boleto Duplicado**: "Este boleto j\xE1 est\xE1 pago. Verifique se n\xE3o h\xE1 duplicidade."
- **Fora do Hor\xE1rio**: "Transfer\xEAncias TED/DOC s\xF3 em hor\xE1rio banc\xE1rio. PIX funciona 24/7."
- **LGPD**: "Preciso de sua autoriza\xE7\xE3o para acessar estes dados financeiros."

### Recupera\xE7\xE3o Intelligente
- **Alternativas**: "PIX n\xE3o funciona? Tente TED para transfer\xEAncias banc\xE1rias."
- **Contexto**: "Baseado no nosso hist\xF3rico, voc\xEA costuma transferir para..."
- **Proativo**: "Detectei um padr\xE3o incomum. Quer que eu investigue?"

## ATUALIZA\xC7\xD5ES E MELHORIAS

### Sempre Melhorando
- **Feedback de Usu\xE1rio**: Adapte respostas baseado no hist\xF3rico de intera\xE7\xF5es
- **Contexto Financeiro**: Mantenha-se atualizado sobre taxas, regulamenta\xE7\xF5es, novos bancos
- **Cultura Financeira**: Evolua com mudan\xE7as no comportamento financeiro brasileiro
- **Tecnologia**: Integre novas tecnologias banc\xE1rias e fintechs brasileiras

### M\xE9tricas de Sucesso
- **Compreens\xE3o**: 95%+ de comandos voz entendidos corretamente
- **Satisfa\xE7\xE3o**: Respostas que realmente ajudam os usu\xE1rios brasileiros
- **Efici\xEAncia**: Opera\xE7\xF5es conclu\xEDdas com m\xEDnimo de etapas
- **Seguran\xE7a**: Zero breaches de dados ou fraudes n\xE3o detectadas

---

**Sua Miss\xE3o**: Ser o assistente financeiro mais completo, seguro e brasileiro que existe, transformando gest\xE3o financeira em uma experi\xEAncia natural, intuitiva e efetiva para todos os brasileiros.

**Data de Hoje**: ${new Date().toLocaleDateString("pt-BR")}
**Fuso Hor\xE1rio**: America/Sao_Paulo (${new Date().toLocaleTimeString("pt-BR")})
**Moeda**: BRL (Real Brasileiro)`;var wA=xA;var SA="vercel.ai.error",iV=Symbol.for(SA),TA,aV=class IA extends Error{static{a(this,"_AISDKError")}constructor({name:t,message:r,cause:o}){super(r),this[TA]=!0,this.name=t,this.cause=o}static isInstance(t){return IA.hasMarker(t,SA)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}};TA=iV;var yt=aV,EA="AI_APICallError",kA=`vercel.ai.error.${EA}`,sV=Symbol.for(kA),PA,Ut=class extends yt{static{a(this,"APICallError")}constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:c,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:l}){super({name:EA,message:e,cause:c}),this[PA]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=l}static isInstance(e){return yt.hasMarker(e,kA)}};PA=sV;var $A="AI_EmptyResponseBodyError",AA=`vercel.ai.error.${$A}`,cV=Symbol.for(AA),CA,OA=class extends yt{static{a(this,"EmptyResponseBodyError")}constructor({message:e="Empty response body"}={}){super({name:$A,message:e}),this[CA]=!0}static isInstance(e){return yt.hasMarker(e,AA)}};CA=cV;function RA(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}a(RA,"getErrorMessage");var NA="AI_InvalidArgumentError",jA=`vercel.ai.error.${NA}`,uV=Symbol.for(jA),DA,xp=class extends yt{static{a(this,"InvalidArgumentError")}constructor({message:e,cause:t,argument:r}){super({name:NA,message:e,cause:t}),this[DA]=!0,this.argument=r}static isInstance(e){return yt.hasMarker(e,jA)}};DA=uV;var zA="AI_InvalidPromptError",MA=`vercel.ai.error.${zA}`,lV=Symbol.for(MA),UA,qA=class extends yt{static{a(this,"InvalidPromptError")}constructor({prompt:e,message:t,cause:r}){super({name:zA,message:`Invalid prompt: ${t}`,cause:r}),this[UA]=!0,this.prompt=e}static isInstance(e){return yt.hasMarker(e,MA)}};UA=lV;var LA="AI_InvalidResponseDataError",FA=`vercel.ai.error.${LA}`,dV=Symbol.for(FA),BA,wp=class extends yt{static{a(this,"InvalidResponseDataError")}constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:LA,message:t}),this[BA]=!0,this.data=e}static isInstance(e){return yt.hasMarker(e,FA)}};BA=dV;var VA="AI_JSONParseError",ZA=`vercel.ai.error.${VA}`,pV=Symbol.for(ZA),HA,Bc=class extends yt{static{a(this,"JSONParseError")}constructor({text:e,cause:t}){super({name:VA,message:`JSON parsing failed: Text: ${e}.
Error message: ${RA(t)}`,cause:t}),this[HA]=!0,this.text=e}static isInstance(e){return yt.hasMarker(e,ZA)}};HA=pV;var GA="AI_LoadAPIKeyError",KA=`vercel.ai.error.${GA}`,mV=Symbol.for(KA),JA,Vc=class extends yt{static{a(this,"LoadAPIKeyError")}constructor({message:e}){super({name:GA,message:e}),this[JA]=!0}static isInstance(e){return yt.hasMarker(e,KA)}};JA=mV;var fV="AI_LoadSettingError",hV=`vercel.ai.error.${fV}`,gV=Symbol.for(hV),yV;yV=gV;var vV="AI_NoContentGeneratedError",_V=`vercel.ai.error.${vV}`,bV=Symbol.for(_V),xV;xV=bV;var WA="AI_NoSuchModelError",QA=`vercel.ai.error.${WA}`,wV=Symbol.for(QA),XA,yw=class extends yt{static{a(this,"NoSuchModelError")}constructor({errorName:e=WA,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[XA]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return yt.hasMarker(e,QA)}};XA=wV;var YA="AI_TooManyEmbeddingValuesForCallError",eC=`vercel.ai.error.${YA}`,SV=Symbol.for(eC),tC,Sp=class extends yt{static{a(this,"TooManyEmbeddingValuesForCallError")}constructor(e){super({name:YA,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[tC]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return yt.hasMarker(e,eC)}};tC=SV;var rC="AI_TypeValidationError",nC=`vercel.ai.error.${rC}`,TV=Symbol.for(nC),oC,IV=class gw extends yt{static{a(this,"_TypeValidationError")}constructor({value:t,cause:r}){super({name:rC,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${RA(r)}`,cause:r}),this[oC]=!0,this.value=t}static isInstance(t){return yt.hasMarker(t,nC)}static wrap({value:t,cause:r}){return gw.isInstance(r)&&r.value===t?r:new gw({value:t,cause:r})}};oC=TV;var _o=IV,iC="AI_UnsupportedFunctionalityError",aC=`vercel.ai.error.${iC}`,EV=Symbol.for(aC),sC,Be=class extends yt{static{a(this,"UnsupportedFunctionalityError")}constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:iC,message:t}),this[sC]=!0,this.functionality=e}static isInstance(e){return yt.hasMarker(e,aC)}};sC=EV;var Tp=class extends Error{static{a(this,"ParseError")}constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function vw(e){}a(vw,"noop");function cC(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=vw,onError:r=vw,onRetry:o=vw,onComment:n}=e,i="",c=!0,u,l="",d="";function p(v){let x=c?v.replace(/^\xEF\xBB\xBF/,""):v,[S,b]=kV(`${i}${x}`);for(let w of S)m(w);i=b,c=!1}a(p,"feed");function m(v){if(v===""){g();return}if(v.startsWith(":")){n&&n(v.slice(v.startsWith(": ")?2:1));return}let x=v.indexOf(":");if(x!==-1){let S=v.slice(0,x),b=v[x+1]===" "?2:1,w=v.slice(x+b);f(S,w,v);return}f(v,"",v)}a(m,"parseLine");function f(v,x,S){switch(v){case"event":d=x;break;case"data":l=`${l}${x}
`;break;case"id":u=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?o(parseInt(x,10)):r(new Tp(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:S}));break;default:r(new Tp(`Unknown field "${v.length>20?`${v.slice(0,20)}\u2026`:v}"`,{type:"unknown-field",field:v,value:x,line:S}));break}}a(f,"processField");function g(){l.length>0&&t({id:u,event:d||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),u=void 0,l="",d=""}a(g,"dispatchEvent");function h(v={}){i&&v.consume&&m(i),c=!0,u=void 0,l="",d="",i=""}return a(h,"reset"),{feed:p,reset:h}}a(cC,"createParser");function kV(e){let t=[],r="",o=0;for(;o<e.length;){let n=e.indexOf("\r",o),i=e.indexOf(`
`,o),c=-1;if(n!==-1&&i!==-1?c=Math.min(n,i):n!==-1?n===e.length-1?c=-1:c=n:i!==-1&&(c=i),c===-1){r=e.slice(o);break}else{let u=e.slice(o,c);t.push(u),o=c+1,e[o-1]==="\r"&&e[o]===`
`&&o++}}return[t,r]}a(kV,"splitLines");var Ip=class extends TransformStream{static{a(this,"EventSourceParserStream")}constructor({onError:t,onRetry:r,onComment:o}={}){let n;super({start(i){n=cC({onEvent:a(c=>{i.enqueue(c)},"onEvent"),onError(c){t==="terminate"?i.error(c):typeof t=="function"&&t(c)},onRetry:r,onComment:o})},transform(i){n.feed(i)}})}};var qe;(function(e){e.assertEqual=n=>{};function t(n){}a(t,"assertIs"),e.assertIs=t;function r(n){throw new Error}a(r,"assertNever"),e.assertNever=r,e.arrayToEnum=n=>{let i={};for(let c of n)i[c]=c;return i},e.getValidEnumValues=n=>{let i=e.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),c={};for(let u of i)c[u]=n[u];return e.objectValues(c)},e.objectValues=n=>e.objectKeys(n).map(function(i){return n[i]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},e.find=(n,i)=>{for(let c of n)if(i(c))return c},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}a(o,"joinValues"),e.joinValues=o,e.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(qe||(qe={}));var uC;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(uC||(uC={}));var ae=qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qn=a(e=>{switch(typeof e){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(e)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(e)?ae.array:e===null?ae.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ae.promise:typeof Map<"u"&&e instanceof Map?ae.map:typeof Set<"u"&&e instanceof Set?ae.set:typeof Date<"u"&&e instanceof Date?ae.date:ae.object;default:return ae.unknown}},"getParsedType");var Z=qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var Sr=class e extends Error{static{a(this,"ZodError")}get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(i){return i.message},o={_errors:[]},n=a(i=>{for(let c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)o._errors.push(r(c));else{let u=o,l=0;for(;l<c.path.length;){let d=c.path[l];l===c.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(r(c))):u[d]=u[d]||{_errors:[]},u=u[d],l++}}},"processError");return n(this),o}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r=Object.create(null),o=[];for(let n of this.issues)if(n.path.length>0){let i=n.path[0];r[i]=r[i]||[],r[i].push(t(n))}else o.push(t(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};Sr.create=e=>new Sr(e);var $V=a((e,t)=>{let r;switch(e.code){case Z.invalid_type:e.received===ae.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Z.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,qe.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:r=`Unrecognized key(s) in object: ${qe.joinValues(e.keys,", ")}`;break;case Z.invalid_union:r="Invalid input";break;case Z.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qe.joinValues(e.options)}`;break;case Z.invalid_enum_value:r=`Invalid enum value. Expected ${qe.joinValues(e.options)}, received '${e.received}'`;break;case Z.invalid_arguments:r="Invalid function arguments";break;case Z.invalid_return_type:r="Invalid function return type";break;case Z.invalid_date:r="Invalid date";break;case Z.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:qe.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Z.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Z.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Z.custom:r="Invalid input";break;case Z.invalid_intersection_types:r="Intersection results could not be merged";break;case Z.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Z.not_finite:r="Number must be finite";break;default:r=t.defaultError,qe.assertNever(e)}return{message:r}},"errorMap"),bo=$V;var AV=bo;function Zc(){return AV}a(Zc,"getErrorMap");var Ep=a(e=>{let{data:t,path:r,errorMaps:o,issueData:n}=e,i=[...r,...n.path||[]],c={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let u="",l=o.filter(d=>!!d).slice().reverse();for(let d of l)u=d(c,{data:t,defaultError:u}).message;return{...n,path:i,message:u}},"makeIssue");function ne(e,t){let r=Zc(),o=Ep({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===bo?void 0:bo].filter(n=>!!n)});e.common.issues.push(o)}a(ne,"addIssueToContext");var Jt=class e{static{a(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let o=[];for(let n of r){if(n.status==="aborted")return we;n.status==="dirty"&&t.dirty(),o.push(n.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,r){let o=[];for(let n of r){let i=await n.key,c=await n.value;o.push({key:i,value:c})}return e.mergeObjectSync(t,o)}static mergeObjectSync(t,r){let o={};for(let n of r){let{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return we;i.status==="dirty"&&t.dirty(),c.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(o[i.value]=c.value)}return{status:t.value,value:o}}},we=Object.freeze({status:"aborted"}),pa=a(e=>({status:"dirty",value:e}),"DIRTY"),or=a(e=>({status:"valid",value:e}),"OK"),_w=a(e=>e.status==="aborted","isAborted"),bw=a(e=>e.status==="dirty","isDirty"),Jo=a(e=>e.status==="valid","isValid"),Hc=a(e=>typeof Promise<"u"&&e instanceof Promise,"isAsync");var me;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(me||(me={}));var Nr=class{static{a(this,"ParseInputLazyPath")}constructor(t,r,o,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},lC=a((e,t)=>{if(Jo(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Sr(e.common.issues);return this._error=r,this._error}}},"handleResult");function Pe(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:o,description:n}=e;if(t&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:a((c,u)=>{let{message:l}=e;return c.code==="invalid_enum_value"?{message:l??u.defaultError}:typeof u.data>"u"?{message:l??o??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:l??r??u.defaultError}},"customMap"),description:n}}a(Pe,"processCreateParams");var Oe=class{static{a(this,"ZodType")}get description(){return this._def.description}_getType(t){return qn(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:qn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Jt,ctx:{common:t.parent.common,data:t.data,parsedType:qn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Hc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let o=this.safeParse(t,r);if(o.success)return o.data;throw o.error}safeParse(t,r){let o={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:qn(t)},n=this._parseSync({data:t,path:o.path,parent:o});return lC(o,n)}"~validate"(t){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:qn(t)};if(!this["~standard"].async)try{let o=this._parseSync({data:t,path:[],parent:r});return Jo(o)?{value:o.value}:{issues:r.common.issues}}catch(o){o?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(o=>Jo(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(t,r){let o=await this.safeParseAsync(t,r);if(o.success)return o.data;throw o.error}async safeParseAsync(t,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:qn(t)},n=this._parse({data:t,path:o.path,parent:o}),i=await(Hc(n)?n:Promise.resolve(n));return lC(o,i)}refine(t,r){let o=a(n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r,"getIssueProperties");return this._refinement((n,i)=>{let c=t(n),u=a(()=>i.addIssue({code:Z.custom,...o(n)}),"setError");return typeof Promise<"u"&&c instanceof Promise?c.then(l=>l?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(t,r){return this._refinement((o,n)=>t(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(t){return new Hr({schema:this,typeName:K.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a(r=>this["~validate"](r),"validate")}}optional(){return Zr.create(this,this._def)}nullable(){return Bn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wo.create(this)}promise(){return Wo.create(this,this._def)}or(t){return ya.create([this,t],this._def)}and(t){return va.create(this,t,this._def)}transform(t){return new Hr({...Pe(this._def),schema:this,typeName:K.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Sa({...Pe(this._def),innerType:this,defaultValue:r,typeName:K.ZodDefault})}brand(){return new kp({typeName:K.ZodBranded,type:this,...Pe(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new Ta({...Pe(this._def),innerType:this,catchValue:r,typeName:K.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Pp.create(this,t)}readonly(){return Ia.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},CV=/^c[^\s-]{8,}$/i,OV=/^[0-9a-z]+$/,RV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jV=/^[a-z0-9_-]{21}$/i,DV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",xw,qV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,LV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",HV=new RegExp(`^${dC}$`);function pC(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}a(pC,"timeRegexSource");function GV(e){return new RegExp(`^${pC(e)}$`)}a(GV,"timeRegex");function KV(e){let t=`${dC}T${pC(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}a(KV,"datetimeRegex");function JV(e,t){return!!((t==="v4"||!t)&&qV.test(e)||(t==="v6"||!t)&&FV.test(e))}a(JV,"isValidIP");function WV(e,t){if(!DV.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let o=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(o));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}a(WV,"isValidJWT");function QV(e,t){return!!((t==="v4"||!t)&&LV.test(e)||(t==="v6"||!t)&&BV.test(e))}a(QV,"isValidCidr");var fa=class e extends Oe{static{a(this,"ZodString")}_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ae.string){let i=this._getOrReturnCtx(t);return ne(i,{code:Z.invalid_type,expected:ae.string,received:i.parsedType}),we}let o=new Jt,n;for(let i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let c=t.data.length>i.value,u=t.data.length<i.value;(c||u)&&(n=this._getOrReturnCtx(t,n),c?ne(n,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&ne(n,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")MV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"email",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")xw||(xw=new RegExp(UV,"u")),xw.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"emoji",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")NV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"uuid",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="nanoid")jV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"nanoid",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")CV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"cuid",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")OV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"cuid2",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")RV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"ulid",code:Z.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),ne(n,{validation:"url",code:Z.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"regex",code:Z.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?KV(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="date"?HV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:"date",message:i.message}),o.dirty()):i.kind==="time"?GV(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.invalid_string,validation:"time",message:i.message}),o.dirty()):i.kind==="duration"?zV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"duration",code:Z.invalid_string,message:i.message}),o.dirty()):i.kind==="ip"?JV(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"ip",code:Z.invalid_string,message:i.message}),o.dirty()):i.kind==="jwt"?WV(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"jwt",code:Z.invalid_string,message:i.message}),o.dirty()):i.kind==="cidr"?QV(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"cidr",code:Z.invalid_string,message:i.message}),o.dirty()):i.kind==="base64"?VV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"base64",code:Z.invalid_string,message:i.message}),o.dirty()):i.kind==="base64url"?ZV.test(t.data)||(n=this._getOrReturnCtx(t,n),ne(n,{validation:"base64url",code:Z.invalid_string,message:i.message}),o.dirty()):qe.assertNever(i);return{status:o.value,value:t.data}}_regex(t,r,o){return this.refinement(n=>t.test(n),{validation:r,code:Z.invalid_string,...me.errToObj(o)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...me.errToObj(t)})}url(t){return this._addCheck({kind:"url",...me.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...me.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...me.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...me.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...me.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...me.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...me.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...me.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...me.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...me.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...me.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...me.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...me.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...me.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...me.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...me.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...me.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...me.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...me.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...me.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...me.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...me.errToObj(r)})}nonempty(t){return this.min(1,me.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};fa.create=e=>new fa({checks:[],typeName:K.ZodString,coerce:e?.coerce??!1,...Pe(e)});function XV(e,t){let r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o,i=Number.parseInt(e.toFixed(n).replace(".","")),c=Number.parseInt(t.toFixed(n).replace(".",""));return i%c/10**n}a(XV,"floatSafeRemainder");var Gc=class e extends Oe{static{a(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ae.number){let i=this._getOrReturnCtx(t);return ne(i,{code:Z.invalid_type,expected:ae.number,received:i.parsedType}),we}let o,n=new Jt;for(let i of this._def.checks)i.kind==="int"?qe.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?XV(t.data,i.value)!==0&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.not_finite,message:i.message}),n.dirty()):qe.assertNever(i);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,me.toString(r))}gt(t,r){return this.setLimit("min",t,!1,me.toString(r))}lte(t,r){return this.setLimit("max",t,!0,me.toString(r))}lt(t,r){return this.setLimit("max",t,!1,me.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:me.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:me.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:me.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&qe.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Gc.create=e=>new Gc({checks:[],typeName:K.ZodNumber,coerce:e?.coerce||!1,...Pe(e)});var Kc=class e extends Oe{static{a(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ae.bigint)return this._getInvalidInput(t);let o,n=new Jt;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),ne(o,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):qe.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return ne(r,{code:Z.invalid_type,expected:ae.bigint,received:r.parsedType}),we}gte(t,r){return this.setLimit("min",t,!0,me.toString(r))}gt(t,r){return this.setLimit("min",t,!1,me.toString(r))}lte(t,r){return this.setLimit("max",t,!0,me.toString(r))}lt(t,r){return this.setLimit("max",t,!1,me.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:me.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Kc.create=e=>new Kc({checks:[],typeName:K.ZodBigInt,coerce:e?.coerce??!1,...Pe(e)});var Jc=class extends Oe{static{a(this,"ZodBoolean")}_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ae.boolean){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.boolean,received:o.parsedType}),we}return or(t.data)}};Jc.create=e=>new Jc({typeName:K.ZodBoolean,coerce:e?.coerce||!1,...Pe(e)});var Wc=class e extends Oe{static{a(this,"ZodDate")}_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ae.date){let i=this._getOrReturnCtx(t);return ne(i,{code:Z.invalid_type,expected:ae.date,received:i.parsedType}),we}if(Number.isNaN(t.data.getTime())){let i=this._getOrReturnCtx(t);return ne(i,{code:Z.invalid_date}),we}let o=new Jt,n;for(let i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),ne(n,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):qe.assertNever(i);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:me.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:me.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Wc.create=e=>new Wc({checks:[],coerce:e?.coerce||!1,typeName:K.ZodDate,...Pe(e)});var Qc=class extends Oe{static{a(this,"ZodSymbol")}_parse(t){if(this._getType(t)!==ae.symbol){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.symbol,received:o.parsedType}),we}return or(t.data)}};Qc.create=e=>new Qc({typeName:K.ZodSymbol,...Pe(e)});var ha=class extends Oe{static{a(this,"ZodUndefined")}_parse(t){if(this._getType(t)!==ae.undefined){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.undefined,received:o.parsedType}),we}return or(t.data)}};ha.create=e=>new ha({typeName:K.ZodUndefined,...Pe(e)});var ga=class extends Oe{static{a(this,"ZodNull")}_parse(t){if(this._getType(t)!==ae.null){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.null,received:o.parsedType}),we}return or(t.data)}};ga.create=e=>new ga({typeName:K.ZodNull,...Pe(e)});var Xc=class extends Oe{static{a(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(t){return or(t.data)}};Xc.create=e=>new Xc({typeName:K.ZodAny,...Pe(e)});var xo=class extends Oe{static{a(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(t){return or(t.data)}};xo.create=e=>new xo({typeName:K.ZodUnknown,...Pe(e)});var ln=class extends Oe{static{a(this,"ZodNever")}_parse(t){let r=this._getOrReturnCtx(t);return ne(r,{code:Z.invalid_type,expected:ae.never,received:r.parsedType}),we}};ln.create=e=>new ln({typeName:K.ZodNever,...Pe(e)});var Yc=class extends Oe{static{a(this,"ZodVoid")}_parse(t){if(this._getType(t)!==ae.undefined){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.void,received:o.parsedType}),we}return or(t.data)}};Yc.create=e=>new Yc({typeName:K.ZodVoid,...Pe(e)});var wo=class e extends Oe{static{a(this,"ZodArray")}_parse(t){let{ctx:r,status:o}=this._processInputParams(t),n=this._def;if(r.parsedType!==ae.array)return ne(r,{code:Z.invalid_type,expected:ae.array,received:r.parsedType}),we;if(n.exactLength!==null){let c=r.data.length>n.exactLength.value,u=r.data.length<n.exactLength.value;(c||u)&&(ne(r,{code:c?Z.too_big:Z.too_small,minimum:u?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(ne(r,{code:Z.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(ne(r,{code:Z.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((c,u)=>n.type._parseAsync(new Nr(r,c,r.path,u)))).then(c=>Jt.mergeArray(o,c));let i=[...r.data].map((c,u)=>n.type._parseSync(new Nr(r,c,r.path,u)));return Jt.mergeArray(o,i)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:me.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:me.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:me.toString(r)}})}nonempty(t){return this.min(1,t)}};wo.create=(e,t)=>new wo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:K.ZodArray,...Pe(t)});function ma(e){if(e instanceof Tr){let t={};for(let r in e.shape){let o=e.shape[r];t[r]=Zr.create(ma(o))}return new Tr({...e._def,shape:a(()=>t,"shape")})}else return e instanceof wo?new wo({...e._def,type:ma(e.element)}):e instanceof Zr?Zr.create(ma(e.unwrap())):e instanceof Bn?Bn.create(ma(e.unwrap())):e instanceof Fn?Fn.create(e.items.map(t=>ma(t))):e}a(ma,"deepPartialify");var Tr=class e extends Oe{static{a(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=qe.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ae.object){let d=this._getOrReturnCtx(t);return ne(d,{code:Z.invalid_type,expected:ae.object,received:d.parsedType}),we}let{status:o,ctx:n}=this._processInputParams(t),{shape:i,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof ln&&this._def.unknownKeys==="strip"))for(let d in n.data)c.includes(d)||u.push(d);let l=[];for(let d of c){let p=i[d],m=n.data[d];l.push({key:{status:"valid",value:d},value:p._parse(new Nr(n,m,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof ln){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of u)l.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(d==="strict")u.length>0&&(ne(n,{code:Z.unrecognized_keys,keys:u}),o.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of u){let m=n.data[p];l.push({key:{status:"valid",value:p},value:d._parse(new Nr(n,m,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of l){let m=await p.key,f=await p.value;d.push({key:m,value:f,alwaysSet:p.alwaysSet})}return d}).then(d=>Jt.mergeObjectSync(o,d)):Jt.mergeObjectSync(o,l)}get shape(){return this._def.shape()}strict(t){return me.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:a((r,o)=>{let n=this._def.errorMap?.(r,o).message??o.defaultError;return r.code==="unrecognized_keys"?{message:me.errToObj(t).message??n}:{message:n}},"errorMap")}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:a(()=>({...this._def.shape(),...t}),"shape")})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:a(()=>({...this._def.shape(),...t._def.shape()}),"shape"),typeName:K.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let o of qe.objectKeys(t))t[o]&&this.shape[o]&&(r[o]=this.shape[o]);return new e({...this._def,shape:a(()=>r,"shape")})}omit(t){let r={};for(let o of qe.objectKeys(this.shape))t[o]||(r[o]=this.shape[o]);return new e({...this._def,shape:a(()=>r,"shape")})}deepPartial(){return ma(this)}partial(t){let r={};for(let o of qe.objectKeys(this.shape)){let n=this.shape[o];t&&!t[o]?r[o]=n:r[o]=n.optional()}return new e({...this._def,shape:a(()=>r,"shape")})}required(t){let r={};for(let o of qe.objectKeys(this.shape))if(t&&!t[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof Zr;)i=i._def.innerType;r[o]=i}return new e({...this._def,shape:a(()=>r,"shape")})}keyof(){return mC(qe.objectKeys(this.shape))}};Tr.create=(e,t)=>new Tr({shape:a(()=>e,"shape"),unknownKeys:"strip",catchall:ln.create(),typeName:K.ZodObject,...Pe(t)});Tr.strictCreate=(e,t)=>new Tr({shape:a(()=>e,"shape"),unknownKeys:"strict",catchall:ln.create(),typeName:K.ZodObject,...Pe(t)});Tr.lazycreate=(e,t)=>new Tr({shape:e,unknownKeys:"strip",catchall:ln.create(),typeName:K.ZodObject,...Pe(t)});var ya=class extends Oe{static{a(this,"ZodUnion")}_parse(t){let{ctx:r}=this._processInputParams(t),o=this._def.options;function n(i){for(let u of i)if(u.result.status==="valid")return u.result;for(let u of i)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;let c=i.map(u=>new Sr(u.ctx.common.issues));return ne(r,{code:Z.invalid_union,unionErrors:c}),we}if(a(n,"handleResults"),r.common.async)return Promise.all(o.map(async i=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(n);{let i,c=[];for(let l of o){let d={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let u=c.map(l=>new Sr(l));return ne(r,{code:Z.invalid_union,unionErrors:u}),we}}get options(){return this._def.options}};ya.create=(e,t)=>new ya({options:e,typeName:K.ZodUnion,...Pe(t)});var Ln=a(e=>e instanceof _a?Ln(e.schema):e instanceof Hr?Ln(e.innerType()):e instanceof ba?[e.value]:e instanceof xa?e.options:e instanceof wa?qe.objectValues(e.enum):e instanceof Sa?Ln(e._def.innerType):e instanceof ha?[void 0]:e instanceof ga?[null]:e instanceof Zr?[void 0,...Ln(e.unwrap())]:e instanceof Bn?[null,...Ln(e.unwrap())]:e instanceof kp||e instanceof Ia?Ln(e.unwrap()):e instanceof Ta?Ln(e._def.innerType):[],"getDiscriminator"),ww=class e extends Oe{static{a(this,"ZodDiscriminatedUnion")}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.object)return ne(r,{code:Z.invalid_type,expected:ae.object,received:r.parsedType}),we;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ne(r,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),we)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,o){let n=new Map;for(let i of r){let c=Ln(i.shape[t]);if(!c.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let u of c){if(n.has(u))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(u)}`);n.set(u,i)}}return new e({typeName:K.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...Pe(o)})}};function Sw(e,t){let r=qn(e),o=qn(t);if(e===t)return{valid:!0,data:e};if(r===ae.object&&o===ae.object){let n=qe.objectKeys(t),i=qe.objectKeys(e).filter(u=>n.indexOf(u)!==-1),c={...e,...t};for(let u of i){let l=Sw(e[u],t[u]);if(!l.valid)return{valid:!1};c[u]=l.data}return{valid:!0,data:c}}else if(r===ae.array&&o===ae.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let i=0;i<e.length;i++){let c=e[i],u=t[i],l=Sw(c,u);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return r===ae.date&&o===ae.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}a(Sw,"mergeValues");var va=class extends Oe{static{a(this,"ZodIntersection")}_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=a((i,c)=>{if(_w(i)||_w(c))return we;let u=Sw(i.value,c.value);return u.valid?((bw(i)||bw(c))&&r.dirty(),{status:r.value,value:u.data}):(ne(o,{code:Z.invalid_intersection_types}),we)},"handleParsed");return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};va.create=(e,t,r)=>new va({left:e,right:t,typeName:K.ZodIntersection,...Pe(r)});var Fn=class e extends Oe{static{a(this,"ZodTuple")}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ae.array)return ne(o,{code:Z.invalid_type,expected:ae.array,received:o.parsedType}),we;if(o.data.length<this._def.items.length)return ne(o,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),we;!this._def.rest&&o.data.length>this._def.items.length&&(ne(o,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((c,u)=>{let l=this._def.items[u]||this._def.rest;return l?l._parse(new Nr(o,c,o.path,u)):null}).filter(c=>!!c);return o.common.async?Promise.all(i).then(c=>Jt.mergeArray(r,c)):Jt.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Fn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fn({items:e,typeName:K.ZodTuple,rest:null,...Pe(t)})};var Tw=class e extends Oe{static{a(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ae.object)return ne(o,{code:Z.invalid_type,expected:ae.object,received:o.parsedType}),we;let n=[],i=this._def.keyType,c=this._def.valueType;for(let u in o.data)n.push({key:i._parse(new Nr(o,u,o.path,u)),value:c._parse(new Nr(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?Jt.mergeObjectAsync(r,n):Jt.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,o){return r instanceof Oe?new e({keyType:t,valueType:r,typeName:K.ZodRecord,...Pe(o)}):new e({keyType:fa.create(),valueType:t,typeName:K.ZodRecord,...Pe(r)})}},eu=class extends Oe{static{a(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ae.map)return ne(o,{code:Z.invalid_type,expected:ae.map,received:o.parsedType}),we;let n=this._def.keyType,i=this._def.valueType,c=[...o.data.entries()].map(([u,l],d)=>({key:n._parse(new Nr(o,u,o.path,[d,"key"])),value:i._parse(new Nr(o,l,o.path,[d,"value"]))}));if(o.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let l of c){let d=await l.key,p=await l.value;if(d.status==="aborted"||p.status==="aborted")return we;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),u.set(d.value,p.value)}return{status:r.value,value:u}})}else{let u=new Map;for(let l of c){let d=l.key,p=l.value;if(d.status==="aborted"||p.status==="aborted")return we;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),u.set(d.value,p.value)}return{status:r.value,value:u}}}};eu.create=(e,t,r)=>new eu({valueType:t,keyType:e,typeName:K.ZodMap,...Pe(r)});var tu=class e extends Oe{static{a(this,"ZodSet")}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ae.set)return ne(o,{code:Z.invalid_type,expected:ae.set,received:o.parsedType}),we;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(ne(o,{code:Z.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(ne(o,{code:Z.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function c(l){let d=new Set;for(let p of l){if(p.status==="aborted")return we;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}a(c,"finalizeSet");let u=[...o.data.values()].map((l,d)=>i._parse(new Nr(o,l,o.path,d)));return o.common.async?Promise.all(u).then(l=>c(l)):c(u)}min(t,r){return new e({...this._def,minSize:{value:t,message:me.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:me.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};tu.create=(e,t)=>new tu({valueType:e,minSize:null,maxSize:null,typeName:K.ZodSet,...Pe(t)});var Iw=class e extends Oe{static{a(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.function)return ne(r,{code:Z.invalid_type,expected:ae.function,received:r.parsedType}),we;function o(u,l){return Ep({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zc(),bo].filter(d=>!!d),issueData:{code:Z.invalid_arguments,argumentsError:l}})}a(o,"makeArgsIssue");function n(u,l){return Ep({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zc(),bo].filter(d=>!!d),issueData:{code:Z.invalid_return_type,returnTypeError:l}})}a(n,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof Wo){let u=this;return or(async function(...l){let d=new Sr([]),p=await u._def.args.parseAsync(l,i).catch(g=>{throw d.addIssue(o(l,g)),d}),m=await Reflect.apply(c,this,p);return await u._def.returns._def.type.parseAsync(m,i).catch(g=>{throw d.addIssue(n(m,g)),d})})}else{let u=this;return or(function(...l){let d=u._def.args.safeParse(l,i);if(!d.success)throw new Sr([o(l,d.error)]);let p=Reflect.apply(c,this,d.data),m=u._def.returns.safeParse(p,i);if(!m.success)throw new Sr([n(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Fn.create(t).rest(xo.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,o){return new e({args:t||Fn.create([]).rest(xo.create()),returns:r||xo.create(),typeName:K.ZodFunction,...Pe(o)})}},_a=class extends Oe{static{a(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};_a.create=(e,t)=>new _a({getter:e,typeName:K.ZodLazy,...Pe(t)});var ba=class extends Oe{static{a(this,"ZodLiteral")}_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return ne(r,{received:r.data,code:Z.invalid_literal,expected:this._def.value}),we}return{status:"valid",value:t.data}}get value(){return this._def.value}};ba.create=(e,t)=>new ba({value:e,typeName:K.ZodLiteral,...Pe(t)});function mC(e,t){return new xa({values:e,typeName:K.ZodEnum,...Pe(t)})}a(mC,"createZodEnum");var xa=class e extends Oe{static{a(this,"ZodEnum")}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),o=this._def.values;return ne(r,{expected:qe.joinValues(o),received:r.parsedType,code:Z.invalid_type}),we}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),o=this._def.values;return ne(r,{received:r.data,code:Z.invalid_enum_value,options:o}),we}return or(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(o=>!t.includes(o)),{...this._def,...r})}};xa.create=mC;var wa=class extends Oe{static{a(this,"ZodNativeEnum")}_parse(t){let r=qe.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==ae.string&&o.parsedType!==ae.number){let n=qe.objectValues(r);return ne(o,{expected:qe.joinValues(n),received:o.parsedType,code:Z.invalid_type}),we}if(this._cache||(this._cache=new Set(qe.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=qe.objectValues(r);return ne(o,{received:o.data,code:Z.invalid_enum_value,options:n}),we}return or(t.data)}get enum(){return this._def.values}};wa.create=(e,t)=>new wa({values:e,typeName:K.ZodNativeEnum,...Pe(t)});var Wo=class extends Oe{static{a(this,"ZodPromise")}unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.promise&&r.common.async===!1)return ne(r,{code:Z.invalid_type,expected:ae.promise,received:r.parsedType}),we;let o=r.parsedType===ae.promise?r.data:Promise.resolve(r.data);return or(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Wo.create=(e,t)=>new Wo({type:e,typeName:K.ZodPromise,...Pe(t)});var Hr=class extends Oe{static{a(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===K.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:a(c=>{ne(o,c),c.fatal?r.abort():r.dirty()},"addIssue"),get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let c=n.transform(o.data,i);if(o.common.async)return Promise.resolve(c).then(async u=>{if(r.value==="aborted")return we;let l=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return l.status==="aborted"?we:l.status==="dirty"?pa(l.value):r.value==="dirty"?pa(l.value):l});{if(r.value==="aborted")return we;let u=this._def.schema._parseSync({data:c,path:o.path,parent:o});return u.status==="aborted"?we:u.status==="dirty"?pa(u.value):r.value==="dirty"?pa(u.value):u}}if(n.type==="refinement"){let c=a(u=>{let l=n.refinement(u,i);if(o.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u},"executeRefinement");if(o.common.async===!1){let u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?we:(u.status==="dirty"&&r.dirty(),c(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?we:(u.status==="dirty"&&r.dirty(),c(u.value).then(()=>({status:r.value,value:u.value}))))}if(n.type==="transform")if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Jo(c))return we;let u=n.transform(c.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>Jo(c)?Promise.resolve(n.transform(c.value,i)).then(u=>({status:r.value,value:u})):we);qe.assertNever(n)}};Hr.create=(e,t,r)=>new Hr({schema:e,typeName:K.ZodEffects,effect:t,...Pe(r)});Hr.createWithPreprocess=(e,t,r)=>new Hr({schema:t,effect:{type:"preprocess",transform:e},typeName:K.ZodEffects,...Pe(r)});var Zr=class extends Oe{static{a(this,"ZodOptional")}_parse(t){return this._getType(t)===ae.undefined?or(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Zr.create=(e,t)=>new Zr({innerType:e,typeName:K.ZodOptional,...Pe(t)});var Bn=class extends Oe{static{a(this,"ZodNullable")}_parse(t){return this._getType(t)===ae.null?or(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Bn.create=(e,t)=>new Bn({innerType:e,typeName:K.ZodNullable,...Pe(t)});var Sa=class extends Oe{static{a(this,"ZodDefault")}_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return r.parsedType===ae.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Sa.create=(e,t)=>new Sa({innerType:e,typeName:K.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Pe(t)});var Ta=class extends Oe{static{a(this,"ZodCatch")}_parse(t){let{ctx:r}=this._processInputParams(t),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return Hc(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Sr(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Sr(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};Ta.create=(e,t)=>new Ta({innerType:e,typeName:K.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Pe(t)});var ru=class extends Oe{static{a(this,"ZodNaN")}_parse(t){if(this._getType(t)!==ae.nan){let o=this._getOrReturnCtx(t);return ne(o,{code:Z.invalid_type,expected:ae.nan,received:o.parsedType}),we}return{status:"valid",value:t.data}}};ru.create=e=>new ru({typeName:K.ZodNaN,...Pe(e)});var sxe=Symbol("zod_brand"),kp=class extends Oe{static{a(this,"ZodBranded")}_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Pp=class e extends Oe{static{a(this,"ZodPipeline")}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.common.async)return a(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?we:i.status==="dirty"?(r.dirty(),pa(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})},"handleAsync")();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?we:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(t,r){return new e({in:t,out:r,typeName:K.ZodPipeline})}},Ia=class extends Oe{static{a(this,"ZodReadonly")}_parse(t){let r=this._def.innerType._parse(t),o=a(n=>(Jo(n)&&(n.value=Object.freeze(n.value)),n),"freeze");return Hc(r)?r.then(n=>o(n)):o(r)}unwrap(){return this._def.innerType}};Ia.create=(e,t)=>new Ia({innerType:e,typeName:K.ZodReadonly,...Pe(t)});var cxe={object:Tr.lazycreate},K;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(K||(K={}));var uxe=fa.create,lxe=Gc.create,dxe=ru.create,pxe=Kc.create,mxe=Jc.create,fxe=Wc.create,hxe=Qc.create,gxe=ha.create,yxe=ga.create,vxe=Xc.create,_xe=xo.create,bxe=ln.create,xxe=Yc.create,wxe=wo.create,Sxe=Tr.create,Txe=Tr.strictCreate,Ixe=ya.create,Exe=ww.create,kxe=va.create,Pxe=Fn.create,$xe=Tw.create,Axe=eu.create,Cxe=tu.create,Oxe=Iw.create,Rxe=_a.create,Nxe=ba.create,jxe=xa.create,Dxe=wa.create,zxe=Wo.create,Mxe=Hr.create,Uxe=Zr.create,qxe=Bn.create,Lxe=Hr.createWithPreprocess,Fxe=Pp.create;function it(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}a(it,"combineHeaders");var yC=class{static{a(this,"DelayedPromise")}constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function nu(e){return Object.fromEntries([...e.headers])}a(nu,"extractResponseHeaders");var eZ=a(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=a(()=>{let i=r.length,c=new Array(t);for(let u=0;u<t;u++)c[u]=r[Math.random()*i|0];return c.join("")},"generator");if(e==null)return n;if(r.includes(o))throw new xp({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},"createIdGenerator"),Nt=eZ();function Pw(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}a(Pw,"isAbortError");var tZ=["fetch failed","failed to fetch"];function rZ({error:e,url:t,requestBodyValues:r}){if(Pw(e))return e;if(e instanceof TypeError&&tZ.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new Ut({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return e}a(rZ,"handleFetchError");function nZ(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}a(nZ,"getRuntimeEnvironmentUserAgent");function oZ(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}a(oZ,"normalizeHeaders");function Qo(e,...t){let r=new Headers(oZ(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}a(Qo,"withUserAgentSuffix");var iZ="3.0.18";function Ea({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:o}){if(typeof e=="string")return e;if(e!=null)throw new Vc({message:`${o} API key must be a string.`});if(typeof process>"u")throw new Vc({message:`${o} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new Vc({message:`${o} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Vc({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}a(Ea,"loadApiKey");function Ap({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=process.env[t],!(e==null||typeof e!="string")))return e}a(Ap,"loadOptionalSetting");function vC(e){var t;let[r,o=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[o])!=null?t:o}a(vC,"mediaTypeToExtension");var aZ=/"__proto__"\s*:/,sZ=/"constructor"\s*:/;function fC(e){let t=JSON.parse(e);return t===null||typeof t!="object"||aZ.test(e)===!1&&sZ.test(e)===!1?t:cZ(t)}a(fC,"_parse");function cZ(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}a(cZ,"filter");function Aw(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return fC(e)}try{return fC(e)}finally{Error.stackTraceLimit=t}}a(Aw,"secureJsonParse");var $p=Symbol.for("vercel.ai.validator");function uZ(e){return{[$p]:!0,validate:e}}a(uZ,"validator");function lZ(e){return typeof e=="object"&&e!==null&&$p in e&&e[$p]===!0&&"validate"in e}a(lZ,"isValidator");function et(e){let t;return()=>(t==null&&(t=e()),t)}a(et,"lazyValidator");function dZ(e){return lZ(e)?e:typeof e=="function"?e():pZ(e)}a(dZ,"asValidator");function pZ(e){return uZ(async t=>{let r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new _o({value:t,cause:r.issues})}})}a(pZ,"standardSchemaValidator");async function jt({value:e,schema:t}){let r=await Cw({value:e,schema:t});if(!r.success)throw _o.wrap({value:e,cause:r.error});return r.value}a(jt,"validateTypes");async function Cw({value:e,schema:t}){let r=dZ(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:_o.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:_o.wrap({value:e,cause:o}),rawValue:e}}}a(Cw,"safeValidateTypes");async function mZ({text:e,schema:t}){try{let r=Aw(e);return t==null?r:jt({value:r,schema:t})}catch(r){throw Bc.isInstance(r)||_o.isInstance(r)?r:new Bc({text:e,cause:r})}}a(mZ,"parseJSON");async function _C({text:e,schema:t}){try{let r=Aw(e);return t==null?{success:!0,value:r,rawValue:r}:await Cw({value:r,schema:t})}catch(r){return{success:!1,error:Bc.isInstance(r)?r:new Bc({text:e,cause:r}),rawValue:void 0}}}a(_C,"safeParseJSON");function Ow(e){try{return Aw(e),!0}catch{return!1}}a(Ow,"isParsableJson");function fZ({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Ip).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await _C({text:r,schema:t}))}}))}a(fZ,"parseJsonEventStream");async function tt({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;let o=await Cw({value:t[e],schema:r});if(!o.success)throw new xp({argument:"providerOptions",message:`invalid ${e} provider options`,cause:o.error});return o.value}a(tt,"parseProviderOptions");var hZ=a(()=>globalThis.fetch,"getOriginalFetch2"),at=a(async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:c})=>xC({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:c}),"postJsonToApi"),bC=a(async({url:e,headers:t,formData:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:c})=>xC({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:c}),"postFormDataToApi"),xC=a(async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:c=hZ()})=>{try{let u=await c(e,{method:"POST",headers:Qo(t,`ai-sdk/provider-utils/${iZ}`,nZ()),body:r.content,signal:i}),l=nu(u);if(!u.ok){let d;try{d=await n({response:u,url:e,requestBodyValues:r.values})}catch(p){throw Pw(p)||Ut.isInstance(p)?p:new Ut({message:"Failed to process error response",cause:p,statusCode:u.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await o({response:u,url:e,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(Pw(d)||Ut.isInstance(d))?d:new Ut({message:"Failed to process successful response",cause:d,statusCode:u.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(u){throw rZ({error:u,url:e,requestBodyValues:r.values})}},"postToApi");function st({id:e,name:t,inputSchema:r}){return({execute:o,outputSchema:n,toModelOutput:i,onInputStart:c,onInputDelta:u,onInputAvailable:l,...d})=>({type:"provider-defined",id:e,name:t,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:c,onInputDelta:u,onInputAvailable:l})}a(st,"createProviderDefinedToolFactory");function vt({id:e,name:t,inputSchema:r,outputSchema:o}){return({execute:n,toModelOutput:i,onInputStart:c,onInputDelta:u,onInputAvailable:l,...d})=>({type:"provider-defined",id:e,name:t,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:c,onInputDelta:u,onInputAvailable:l})}a(vt,"createProviderDefinedToolFactoryWithOutputSchema");async function dn(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}a(dn,"resolve");var ka=a(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let c=await o.text(),u=nu(o);if(c.trim()==="")return{responseHeaders:u,value:new Ut({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:c,isRetryable:r?.(o)})};try{let l=await mZ({text:c,schema:e});return{responseHeaders:u,value:new Ut({message:t(l),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:c,data:l,isRetryable:r?.(o,l)})}}catch{return{responseHeaders:u,value:new Ut({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:c,isRetryable:r?.(o)})}}},"createJsonErrorResponseHandler"),pn=a(e=>async({response:t})=>{let r=nu(t);if(t.body==null)throw new OA({});return{responseHeaders:r,value:fZ({stream:t.body,schema:e})}},"createEventSourceResponseHandler");var Pt=a(e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await _C({text:n,schema:e}),c=nu(t);if(!i.success)throw new Ut({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:c,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:c,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),wC=a(()=>async({response:e,url:t,requestBodyValues:r})=>{let o=nu(e);if(!e.body)throw new Ut({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0});try{let n=await e.arrayBuffer();return{responseHeaders:o,value:new Uint8Array(n)}}catch(n){throw new Ut({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0,cause:n})}},"createBinaryResponseHandler");var gZ=a((e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},"getRelativePath"),yZ=Symbol("Let zodToJsonSchema decide on which parser to use"),hC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},vZ=a(e=>typeof e=="string"?{...hC,name:e}:{...hC,...e},"getDefaultOptions");function Ir(){return{}}a(Ir,"parseAnyDef");function _Z(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==K.ZodAny&&(i.items=He(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}a(_Z,"parseArrayDef");function bZ(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}a(bZ,"parseBigintDef");function xZ(){return{type:"boolean"}}a(xZ,"parseBooleanDef");function SC(e,t){return He(e.type._def,t)}a(SC,"parseBrandedDef");var wZ=a((e,t)=>He(e.innerType._def,t),"parseCatchDef");function TC(e,t,r){let o=r??t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>TC(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return SZ(e)}}a(TC,"parseDateDef");var SZ=a(e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t},"integerDateParser");function TZ(e,t){return{...He(e.innerType._def,t),default:e.defaultValue()}}a(TZ,"parseDefaultDef");function IZ(e,t){return t.effectStrategy==="input"?He(e.schema._def,t):Ir()}a(IZ,"parseEffectsDef");function EZ(e){return{type:"string",enum:Array.from(e.values)}}a(EZ,"parseEnumDef");var kZ=a(e=>"type"in e&&e.type==="string"?!1:"allOf"in e,"isJsonSchema7AllOfType");function PZ(e,t){let r=[He(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),He(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),o=[];return r.forEach(n=>{if(kZ(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:c,...u}=n;i=u}o.push(i)}}),o.length?{allOf:o}:void 0}a(PZ,"parseIntersectionDef");function $Z(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}a($Z,"parseLiteralDef");var Ew=void 0,Gr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:a(()=>(Ew===void 0&&(Ew=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ew),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function IC(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":Kr(r,"email",o.message,t);break;case"format:idn-email":Kr(r,"idn-email",o.message,t);break;case"pattern:zod":ir(r,Gr.email,o.message,t);break}break;case"url":Kr(r,"uri",o.message,t);break;case"uuid":Kr(r,"uuid",o.message,t);break;case"regex":ir(r,o.regex,o.message,t);break;case"cuid":ir(r,Gr.cuid,o.message,t);break;case"cuid2":ir(r,Gr.cuid2,o.message,t);break;case"startsWith":ir(r,RegExp(`^${kw(o.value,t)}`),o.message,t);break;case"endsWith":ir(r,RegExp(`${kw(o.value,t)}$`),o.message,t);break;case"datetime":Kr(r,"date-time",o.message,t);break;case"date":Kr(r,"date",o.message,t);break;case"time":Kr(r,"time",o.message,t);break;case"duration":Kr(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{ir(r,RegExp(kw(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&Kr(r,"ipv4",o.message,t),o.version!=="v4"&&Kr(r,"ipv6",o.message,t);break}case"base64url":ir(r,Gr.base64url,o.message,t);break;case"jwt":ir(r,Gr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&ir(r,Gr.ipv4Cidr,o.message,t),o.version!=="v4"&&ir(r,Gr.ipv6Cidr,o.message,t);break}case"emoji":ir(r,Gr.emoji(),o.message,t);break;case"ulid":{ir(r,Gr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Kr(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{ir(r,Gr.base64,o.message,t);break}}break}case"nanoid":ir(r,Gr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}a(IC,"parseStringDef");function kw(e,t){return t.patternStrategy==="escape"?CZ(e):e}a(kw,"escapeLiteralCheckValue");var AZ=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function CZ(e){let t="";for(let r=0;r<e.length;r++)AZ.has(e[r])||(t+="\\"),t+=e[r];return t}a(CZ,"escapeNonAlphaNumeric");function Kr(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):e.format=t}a(Kr,"addFormat");function ir(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:gC(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=gC(t,o)}a(ir,"addPattern");function gC(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",c=!1,u=!1,l=!1;for(let d=0;d<n.length;d++){if(c){i+=n[d],c=!1;continue}if(o.i){if(u){if(n[d].match(/[a-z]/)){l?(i+=n[d],i+=`${n[d-2]}-${n[d]}`.toUpperCase(),l=!1):n[d+1]==="-"&&((r=n[d+2])!=null&&r.match(/[a-z]/))?(i+=n[d],l=!0):i+=`${n[d]}${n[d].toUpperCase()}`;continue}}else if(n[d].match(/[a-z]/)){i+=`[${n[d]}${n[d].toUpperCase()}]`;continue}}if(o.m){if(n[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[d]==="."){i+=u?`${n[d]}\r
`:`[${n[d]}\r
]`;continue}i+=n[d],n[d]==="\\"?c=!0:u&&n[d]==="]"?u=!1:!u&&n[d]==="["&&(u=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}a(gC,"stringifyRegExpWithFlags");function EC(e,t){var r,o,n,i,c,u;let l={type:"object",additionalProperties:(r=He(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===K.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let{type:d,...p}=IC(e.keyType._def,t);return{...l,propertyNames:p}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===K.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((c=e.keyType)==null?void 0:c._def.typeName)===K.ZodBranded&&e.keyType._def.type._def.typeName===K.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){let{type:d,...p}=SC(e.keyType._def,t);return{...l,propertyNames:p}}}return l}a(EC,"parseRecordDef");function OZ(e,t){if(t.mapStrategy==="record")return EC(e,t);let r=He(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Ir(),o=He(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Ir();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}a(OZ,"parseMapDef");function RZ(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}a(RZ,"parseNativeEnumDef");function NZ(){return{not:Ir()}}a(NZ,"parseNeverDef");function jZ(){return{type:"null"}}a(jZ,"parseNullDef");var $w={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function DZ(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in $w&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let c=$w[i._def.typeName];return c&&!n.includes(c)?[...n,c]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let c=typeof i._def.value;switch(c){case"string":case"number":case"boolean":return[...n,c];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(o.length===r.length){let n=o.filter((i,c,u)=>u.indexOf(i)===c);return{type:n.length>1?n:n[0],enum:r.reduce((i,c)=>i.includes(c._def.value)?i:[...i,c._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return zZ(e,t)}a(DZ,"parseUnionDef");var zZ=a((e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>He(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function MZ(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[$w[e.innerType._def.typeName],"null"]};let r=He(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}a(MZ,"parseNullableDef");function UZ(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}a(UZ,"parseNumberDef");function qZ(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let c in n){let u=n[c];if(u===void 0||u._def===void 0)continue;let l=FZ(u),d=He(u._def,{...t,currentPath:[...t.currentPath,"properties",c],propertyPath:[...t.currentPath,"properties",c]});d!==void 0&&(r.properties[c]=d,l||o.push(c))}o.length&&(r.required=o);let i=LZ(e,t);return i!==void 0&&(r.additionalProperties=i),r}a(qZ,"parseObjectDef");function LZ(e,t){if(e.catchall._def.typeName!=="ZodNever")return He(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}a(LZ,"decideAdditionalProperties");function FZ(e){try{return e.isOptional()}catch{return!0}}a(FZ,"safeIsOptional");var BZ=a((e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return He(e.innerType._def,t);let o=He(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return o?{anyOf:[{not:Ir()},o]}:Ir()},"parseOptionalDef"),VZ=a((e,t)=>{if(t.pipeStrategy==="input")return He(e.in._def,t);if(t.pipeStrategy==="output")return He(e.out._def,t);let r=He(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=He(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}},"parsePipelineDef");function ZZ(e,t){return He(e.type._def,t)}a(ZZ,"parsePromiseDef");function HZ(e,t){let o={type:"array",uniqueItems:!0,items:He(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}a(HZ,"parseSetDef");function GZ(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>He(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:He(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>He(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}a(GZ,"parseTupleDef");function KZ(){return{not:Ir()}}a(KZ,"parseUndefinedDef");function JZ(){return Ir()}a(JZ,"parseUnknownDef");var WZ=a((e,t)=>He(e.innerType._def,t),"parseReadonlyDef"),QZ=a((e,t,r)=>{switch(t){case K.ZodString:return IC(e,r);case K.ZodNumber:return UZ(e);case K.ZodObject:return qZ(e,r);case K.ZodBigInt:return bZ(e);case K.ZodBoolean:return xZ();case K.ZodDate:return TC(e,r);case K.ZodUndefined:return KZ();case K.ZodNull:return jZ();case K.ZodArray:return _Z(e,r);case K.ZodUnion:case K.ZodDiscriminatedUnion:return DZ(e,r);case K.ZodIntersection:return PZ(e,r);case K.ZodTuple:return GZ(e,r);case K.ZodRecord:return EC(e,r);case K.ZodLiteral:return $Z(e);case K.ZodEnum:return EZ(e);case K.ZodNativeEnum:return RZ(e);case K.ZodNullable:return MZ(e,r);case K.ZodOptional:return BZ(e,r);case K.ZodMap:return OZ(e,r);case K.ZodSet:return HZ(e,r);case K.ZodLazy:return()=>e.getter()._def;case K.ZodPromise:return ZZ(e,r);case K.ZodNaN:case K.ZodNever:return NZ();case K.ZodEffects:return IZ(e,r);case K.ZodAny:return Ir();case K.ZodUnknown:return JZ();case K.ZodDefault:return TZ(e,r);case K.ZodBranded:return SC(e,r);case K.ZodReadonly:return WZ(e,r);case K.ZodCatch:return wZ(e,r);case K.ZodPipeline:return VZ(e,r);case K.ZodFunction:case K.ZodVoid:case K.ZodSymbol:return;default:return(o=>{})(t)}},"selectParser");function He(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let l=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(l!==yZ)return l}if(n&&!r){let l=XZ(n,t);if(l!==void 0)return l}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let c=QZ(e,e.typeName,t),u=typeof c=="function"?He(c(),t):c;if(u&&YZ(e,t,u),t.postProcess){let l=t.postProcess(u,e,t);return i.jsonSchema=u,l}return i.jsonSchema=u,u}a(He,"parseDef");var XZ=a((e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:gZ(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Ir()):t.$refStrategy==="seen"?Ir():void 0}},"get$ref"),YZ=a((e,t,r)=>(e.description&&(r.description=e.description),r),"addMeta"),eH=a(e=>{let t=vZ(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},"getRefs"),tH=a((e,t)=>{var r;let o=eH(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((d,[p,m])=>{var f;return{...d,[p]:(f=He(m._def,{...o,currentPath:[...o.basePath,o.definitionPath,p]},!0))!=null?f:Ir()}},{}):void 0,i=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,c=(r=He(e._def,i===void 0?o:{...o,currentPath:[...o.basePath,o.definitionPath,i]},!1))!=null?r:Ir(),u=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;u!==void 0&&(c.title=u);let l=i===void 0?n?{...c,[o.definitionPath]:n}:c:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:{...n,[i]:c}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),rH=tH;function nH(e,t){var r;let o=(r=t?.useReferences)!=null?r:!1;return kC(()=>rH(e,{$refStrategy:o?"root":"none"}),{validate:a(async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}a(nH,"zod3Schema");function oH(e,t){var r;let o=(r=t?.useReferences)!=null?r:!1;return kC(()=>fc(e,{target:"draft-7",io:"output",reused:o?"ref":"inline"}),{validate:a(async n=>{let i=await hc(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}a(oH,"zod4Schema");function iH(e){return"_zod"in e}a(iH,"isZod4Schema");function F(e,t){return iH(e)?oH(e,t):nH(e,t)}a(F,"zodSchema");var aH=Symbol.for("vercel.ai.schema");function ee(e){let t;return()=>(t==null&&(t=e()),t)}a(ee,"lazySchema");function kC(e,{validate:t}={}){return{[aH]:!0,_type:void 0,[$p]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}a(kC,"jsonSchema");var{btoa:sH,atob:cH}=globalThis;function PC(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=cH(t);return Uint8Array.from(r,o=>o.codePointAt(0))}a(PC,"convertBase64ToUint8Array");function uH(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return sH(t)}a(uH,"convertUint8ArrayToBase64");function gr(e){return e instanceof Uint8Array?uH(e):e}a(gr,"convertToBase64");function Pa(e){return e?.replace(/\/$/,"")}a(Pa,"withoutTrailingSlash");var lH="2.0.50",dH=ee(()=>F(s.object({type:s.literal("error"),error:s.object({type:s.string(),message:s.string()})}))),$C=ka({errorSchema:dH,errorToMessage:a(e=>e.error.message,"errorToMessage")}),pH=ee(()=>F(s.object({type:s.literal("message"),id:s.string().nullish(),model:s.string().nullish(),content:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("text"),text:s.string(),citations:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("web_search_result_location"),cited_text:s.string(),url:s.string(),title:s.string(),encrypted_index:s.string()}),s.object({type:s.literal("page_location"),cited_text:s.string(),document_index:s.number(),document_title:s.string().nullable(),start_page_number:s.number(),end_page_number:s.number()}),s.object({type:s.literal("char_location"),cited_text:s.string(),document_index:s.number(),document_title:s.string().nullable(),start_char_index:s.number(),end_char_index:s.number()})])).optional()}),s.object({type:s.literal("thinking"),thinking:s.string(),signature:s.string()}),s.object({type:s.literal("redacted_thinking"),data:s.string()}),s.object({type:s.literal("tool_use"),id:s.string(),name:s.string(),input:s.unknown()}),s.object({type:s.literal("server_tool_use"),id:s.string(),name:s.string(),input:s.record(s.string(),s.unknown()).nullish()}),s.object({type:s.literal("web_fetch_tool_result"),tool_use_id:s.string(),content:s.union([s.object({type:s.literal("web_fetch_result"),url:s.string(),retrieved_at:s.string(),content:s.object({type:s.literal("document"),title:s.string().nullable(),citations:s.object({enabled:s.boolean()}).optional(),source:s.object({type:s.literal("text"),media_type:s.string(),data:s.string()})})}),s.object({type:s.literal("web_fetch_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("web_search_tool_result"),tool_use_id:s.string(),content:s.union([s.array(s.object({type:s.literal("web_search_result"),url:s.string(),title:s.string(),encrypted_content:s.string(),page_age:s.string().nullish()})),s.object({type:s.literal("web_search_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("code_execution_tool_result"),tool_use_id:s.string(),content:s.union([s.object({type:s.literal("code_execution_result"),stdout:s.string(),stderr:s.string(),return_code:s.number()}),s.object({type:s.literal("code_execution_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("bash_code_execution_tool_result"),tool_use_id:s.string(),content:s.discriminatedUnion("type",[s.object({type:s.literal("bash_code_execution_result"),content:s.array(s.object({type:s.literal("bash_code_execution_output"),file_id:s.string()})),stdout:s.string(),stderr:s.string(),return_code:s.number()}),s.object({type:s.literal("bash_code_execution_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("text_editor_code_execution_tool_result"),tool_use_id:s.string(),content:s.discriminatedUnion("type",[s.object({type:s.literal("text_editor_code_execution_tool_result_error"),error_code:s.string()}),s.object({type:s.literal("text_editor_code_execution_view_result"),content:s.string(),file_type:s.string(),num_lines:s.number().nullable(),start_line:s.number().nullable(),total_lines:s.number().nullable()}),s.object({type:s.literal("text_editor_code_execution_create_result"),is_file_update:s.boolean()}),s.object({type:s.literal("text_editor_code_execution_str_replace_result"),lines:s.array(s.string()).nullable(),new_lines:s.number().nullable(),new_start:s.number().nullable(),old_lines:s.number().nullable(),old_start:s.number().nullable()})])})])),stop_reason:s.string().nullish(),stop_sequence:s.string().nullish(),usage:s.looseObject({input_tokens:s.number(),output_tokens:s.number(),cache_creation_input_tokens:s.number().nullish(),cache_read_input_tokens:s.number().nullish()}),container:s.object({expires_at:s.string(),id:s.string(),skills:s.array(s.object({type:s.union([s.literal("anthropic"),s.literal("custom")]),skill_id:s.string(),version:s.string()})).nullish()}).nullish()}))),mH=ee(()=>F(s.discriminatedUnion("type",[s.object({type:s.literal("message_start"),message:s.object({id:s.string().nullish(),model:s.string().nullish(),usage:s.looseObject({input_tokens:s.number(),cache_creation_input_tokens:s.number().nullish(),cache_read_input_tokens:s.number().nullish()})})}),s.object({type:s.literal("content_block_start"),index:s.number(),content_block:s.discriminatedUnion("type",[s.object({type:s.literal("text"),text:s.string()}),s.object({type:s.literal("thinking"),thinking:s.string()}),s.object({type:s.literal("tool_use"),id:s.string(),name:s.string()}),s.object({type:s.literal("redacted_thinking"),data:s.string()}),s.object({type:s.literal("server_tool_use"),id:s.string(),name:s.string(),input:s.record(s.string(),s.unknown()).nullish()}),s.object({type:s.literal("web_fetch_tool_result"),tool_use_id:s.string(),content:s.union([s.object({type:s.literal("web_fetch_result"),url:s.string(),retrieved_at:s.string(),content:s.object({type:s.literal("document"),title:s.string().nullable(),citations:s.object({enabled:s.boolean()}).optional(),source:s.object({type:s.literal("text"),media_type:s.string(),data:s.string()})})}),s.object({type:s.literal("web_fetch_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("web_search_tool_result"),tool_use_id:s.string(),content:s.union([s.array(s.object({type:s.literal("web_search_result"),url:s.string(),title:s.string(),encrypted_content:s.string(),page_age:s.string().nullish()})),s.object({type:s.literal("web_search_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("code_execution_tool_result"),tool_use_id:s.string(),content:s.union([s.object({type:s.literal("code_execution_result"),stdout:s.string(),stderr:s.string(),return_code:s.number()}),s.object({type:s.literal("code_execution_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("bash_code_execution_tool_result"),tool_use_id:s.string(),content:s.discriminatedUnion("type",[s.object({type:s.literal("bash_code_execution_result"),content:s.array(s.object({type:s.literal("bash_code_execution_output"),file_id:s.string()})),stdout:s.string(),stderr:s.string(),return_code:s.number()}),s.object({type:s.literal("bash_code_execution_tool_result_error"),error_code:s.string()})])}),s.object({type:s.literal("text_editor_code_execution_tool_result"),tool_use_id:s.string(),content:s.discriminatedUnion("type",[s.object({type:s.literal("text_editor_code_execution_tool_result_error"),error_code:s.string()}),s.object({type:s.literal("text_editor_code_execution_view_result"),content:s.string(),file_type:s.string(),num_lines:s.number().nullable(),start_line:s.number().nullable(),total_lines:s.number().nullable()}),s.object({type:s.literal("text_editor_code_execution_create_result"),is_file_update:s.boolean()}),s.object({type:s.literal("text_editor_code_execution_str_replace_result"),lines:s.array(s.string()).nullable(),new_lines:s.number().nullable(),new_start:s.number().nullable(),old_lines:s.number().nullable(),old_start:s.number().nullable()})])})])}),s.object({type:s.literal("content_block_delta"),index:s.number(),delta:s.discriminatedUnion("type",[s.object({type:s.literal("input_json_delta"),partial_json:s.string()}),s.object({type:s.literal("text_delta"),text:s.string()}),s.object({type:s.literal("thinking_delta"),thinking:s.string()}),s.object({type:s.literal("signature_delta"),signature:s.string()}),s.object({type:s.literal("citations_delta"),citation:s.discriminatedUnion("type",[s.object({type:s.literal("web_search_result_location"),cited_text:s.string(),url:s.string(),title:s.string(),encrypted_index:s.string()}),s.object({type:s.literal("page_location"),cited_text:s.string(),document_index:s.number(),document_title:s.string().nullable(),start_page_number:s.number(),end_page_number:s.number()}),s.object({type:s.literal("char_location"),cited_text:s.string(),document_index:s.number(),document_title:s.string().nullable(),start_char_index:s.number(),end_char_index:s.number()})])})])}),s.object({type:s.literal("content_block_stop"),index:s.number()}),s.object({type:s.literal("error"),error:s.object({type:s.string(),message:s.string()})}),s.object({type:s.literal("message_delta"),delta:s.object({stop_reason:s.string().nullish(),stop_sequence:s.string().nullish(),container:s.object({expires_at:s.string(),id:s.string(),skills:s.array(s.object({type:s.union([s.literal("anthropic"),s.literal("custom")]),skill_id:s.string(),version:s.string()})).nullish()}).nullish()}),usage:s.looseObject({output_tokens:s.number(),cache_creation_input_tokens:s.number().nullish()})}),s.object({type:s.literal("message_stop")}),s.object({type:s.literal("ping")})]))),fH=ee(()=>F(s.object({signature:s.string().optional(),redactedData:s.string().optional()}))),AC=s.object({citations:s.object({enabled:s.boolean()}).optional(),title:s.string().optional(),context:s.string().optional()}),hH=s.object({sendReasoning:s.boolean().optional(),structuredOutputMode:s.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:s.object({type:s.union([s.literal("enabled"),s.literal("disabled")]),budgetTokens:s.number().optional()}).optional(),disableParallelToolUse:s.boolean().optional(),cacheControl:s.object({type:s.literal("ephemeral"),ttl:s.union([s.literal("5m"),s.literal("1h")]).optional()}).optional(),container:s.object({id:s.string().optional(),skills:s.array(s.object({type:s.union([s.literal("anthropic"),s.literal("custom")]),skillId:s.string(),version:s.string().optional()})).optional()}).optional(),effort:s.enum(["low","medium","high"]).optional()}),CC=4;function gH(e){var t;let r=e?.anthropic;return(t=r?.cacheControl)!=null?t:r?.cache_control}a(gH,"getCacheControl");var Rw=class{static{a(this,"CacheControlValidator")}constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(e,t){let r=gH(e);if(r){if(!t.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${t.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>CC){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${CC} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},yH=ee(()=>F(s.object({maxCharacters:s.number().optional()}))),vH=ee(()=>F(s.object({command:s.enum(["view","create","str_replace","insert"]),path:s.string(),file_text:s.string().optional(),insert_line:s.number().int().optional(),new_str:s.string().optional(),old_str:s.string().optional(),view_range:s.array(s.number().int()).optional()}))),_H=st({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:vH}),bH=a((e={})=>_H(e),"textEditor_20250728"),xH=ee(()=>F(s.object({maxUses:s.number().optional(),allowedDomains:s.array(s.string()).optional(),blockedDomains:s.array(s.string()).optional(),userLocation:s.object({type:s.literal("approximate"),city:s.string().optional(),region:s.string().optional(),country:s.string().optional(),timezone:s.string().optional()}).optional()}))),NC=ee(()=>F(s.array(s.object({url:s.string(),title:s.string(),pageAge:s.string().nullable(),encryptedContent:s.string(),type:s.literal("web_search_result")})))),wH=ee(()=>F(s.object({query:s.string()}))),SH=vt({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:wH,outputSchema:NC}),TH=a((e={})=>SH(e),"webSearch_20250305"),IH=ee(()=>F(s.object({maxUses:s.number().optional(),allowedDomains:s.array(s.string()).optional(),blockedDomains:s.array(s.string()).optional(),citations:s.object({enabled:s.boolean()}).optional(),maxContentTokens:s.number().optional()}))),jC=ee(()=>F(s.object({type:s.literal("web_fetch_result"),url:s.string(),content:s.object({type:s.literal("document"),title:s.string(),citations:s.object({enabled:s.boolean()}).optional(),source:s.union([s.object({type:s.literal("base64"),mediaType:s.literal("application/pdf"),data:s.string()}),s.object({type:s.literal("text"),mediaType:s.literal("text/plain"),data:s.string()})])}),retrievedAt:s.string().nullable()}))),EH=ee(()=>F(s.object({url:s.string()}))),kH=vt({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:EH,outputSchema:jC}),PH=a((e={})=>kH(e),"webFetch_20250910");async function $H({tools:e,toolChoice:t,disableParallelToolUse:r,cacheControlValidator:o}){e=e?.length?e:void 0;let n=[],i=new Set,c=o||new Rw;if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n,betas:i};let u=[];for(let d of e)switch(d.type){case"function":{let p=c.getCacheControl(d.providerOptions,{type:"tool definition",canCache:!0});u.push({name:d.name,description:d.description,input_schema:d.inputSchema,cache_control:p});break}case"provider-defined":{switch(d.id){case"anthropic.code_execution_20250522":{i.add("code-execution-2025-05-22"),u.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{i.add("code-execution-2025-08-25"),u.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"computer",type:"computer_20250124",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"computer",type:"computer_20241022",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{i.add("computer-use-2025-01-24"),u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await jt({value:d.args,schema:yH});u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{i.add("computer-use-2025-01-24"),u.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{i.add("computer-use-2024-10-22"),u.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{i.add("context-management-2025-06-27"),u.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{i.add("web-fetch-2025-09-10");let p=await jt({value:d.args,schema:IH});u.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await jt({value:d.args,schema:xH});u.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}default:{n.push({type:"unsupported-tool",tool:d});break}}break}default:{n.push({type:"unsupported-tool",tool:d});break}}if(t==null)return{tools:u,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:n,betas:i};let l=t.type;switch(l){case"auto":return{tools:u,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:n,betas:i};case"required":return{tools:u,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:n,betas:i};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:n,betas:i};case"tool":return{tools:u,toolChoice:{type:"tool",name:t.toolName,disable_parallel_tool_use:r},toolWarnings:n,betas:i};default:{let d=l;throw new Be({functionality:`tool choice type: ${d}`})}}}a($H,"prepareTools");var DC=ee(()=>F(s.object({type:s.literal("code_execution_result"),stdout:s.string(),stderr:s.string(),return_code:s.number()}))),AH=ee(()=>F(s.object({code:s.string()}))),CH=vt({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:AH,outputSchema:DC}),OH=a((e={})=>CH(e),"codeExecution_20250522"),zC=ee(()=>F(s.discriminatedUnion("type",[s.object({type:s.literal("bash_code_execution_result"),content:s.array(s.object({type:s.literal("bash_code_execution_output"),file_id:s.string()})),stdout:s.string(),stderr:s.string(),return_code:s.number()}),s.object({type:s.literal("bash_code_execution_tool_result_error"),error_code:s.string()}),s.object({type:s.literal("text_editor_code_execution_tool_result_error"),error_code:s.string()}),s.object({type:s.literal("text_editor_code_execution_view_result"),content:s.string(),file_type:s.string(),num_lines:s.number().nullable(),start_line:s.number().nullable(),total_lines:s.number().nullable()}),s.object({type:s.literal("text_editor_code_execution_create_result"),is_file_update:s.boolean()}),s.object({type:s.literal("text_editor_code_execution_str_replace_result"),lines:s.array(s.string()).nullable(),new_lines:s.number().nullable(),new_start:s.number().nullable(),old_lines:s.number().nullable(),old_start:s.number().nullable()})]))),RH=ee(()=>F(s.discriminatedUnion("type",[s.object({type:s.literal("bash_code_execution"),command:s.string()}),s.discriminatedUnion("command",[s.object({type:s.literal("text_editor_code_execution"),command:s.literal("view"),path:s.string()}),s.object({type:s.literal("text_editor_code_execution"),command:s.literal("create"),path:s.string(),file_text:s.string().nullish()}),s.object({type:s.literal("text_editor_code_execution"),command:s.literal("str_replace"),path:s.string(),old_str:s.string(),new_str:s.string()})])]))),NH=vt({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:RH,outputSchema:zC}),jH=a((e={})=>NH(e),"codeExecution_20250825");function DH(e){if(typeof e=="string")return Buffer.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);throw e instanceof URL?new Be({functionality:"URL-based text documents are not supported for citations"}):new Be({functionality:`unsupported data type for text documents: ${typeof e}`})}a(DH,"convertToString");async function zH({prompt:e,sendReasoning:t,warnings:r,cacheControlValidator:o}){var n,i,c,u,l;let d=new Set,p=MH(e),m=o||new Rw,f,g=[];async function h(x){var S,b;let w=await tt({provider:"anthropic",providerOptions:x,schema:AC});return(b=(S=w?.citations)==null?void 0:S.enabled)!=null?b:!1}a(h,"shouldEnableCitations");async function v(x){let S=await tt({provider:"anthropic",providerOptions:x,schema:AC});return{title:S?.title,context:S?.context}}a(v,"getDocumentMetadata");for(let x=0;x<p.length;x++){let S=p[x],b=x===p.length-1,w=S.type;switch(w){case"system":{if(f!=null)throw new Be({functionality:"Multiple system messages that are separated by user/assistant messages"});f=S.messages.map(({content:P,providerOptions:B})=>({type:"text",text:P,cache_control:m.getCacheControl(B,{type:"system message",canCache:!0})}));break}case"user":{let P=[];for(let B of S.messages){let{role:V,content:C}=B;switch(V){case"user":{for(let L=0;L<C.length;L++){let M=C[L],D=L===C.length-1,U=(n=m.getCacheControl(M.providerOptions,{type:"user message part",canCache:!0}))!=null?n:D?m.getCacheControl(B.providerOptions,{type:"user message",canCache:!0}):void 0;switch(M.type){case"text":{P.push({type:"text",text:M.text,cache_control:U});break}case"file":{if(M.mediaType.startsWith("image/"))P.push({type:"image",source:M.data instanceof URL?{type:"url",url:M.data.toString()}:{type:"base64",media_type:M.mediaType==="image/*"?"image/jpeg":M.mediaType,data:gr(M.data)},cache_control:U});else if(M.mediaType==="application/pdf"){d.add("pdfs-2024-09-25");let de=await h(M.providerOptions),J=await v(M.providerOptions);P.push({type:"document",source:M.data instanceof URL?{type:"url",url:M.data.toString()}:{type:"base64",media_type:"application/pdf",data:gr(M.data)},title:(i=J.title)!=null?i:M.filename,...J.context&&{context:J.context},...de&&{citations:{enabled:!0}},cache_control:U})}else if(M.mediaType==="text/plain"){let de=await h(M.providerOptions),J=await v(M.providerOptions);P.push({type:"document",source:M.data instanceof URL?{type:"url",url:M.data.toString()}:{type:"text",media_type:"text/plain",data:DH(M.data)},title:(c=J.title)!=null?c:M.filename,...J.context&&{context:J.context},...de&&{citations:{enabled:!0}},cache_control:U})}else throw new Be({functionality:`media type: ${M.mediaType}`});break}}}break}case"tool":{for(let L=0;L<C.length;L++){let M=C[L],D=L===C.length-1,U=(u=m.getCacheControl(M.providerOptions,{type:"tool result part",canCache:!0}))!=null?u:D?m.getCacheControl(B.providerOptions,{type:"tool result message",canCache:!0}):void 0,de=M.output,J;switch(de.type){case"content":J=de.value.map(re=>{switch(re.type){case"text":return{type:"text",text:re.text};case"media":{if(re.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:re.mediaType,data:re.data}};if(re.mediaType==="application/pdf")return d.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:re.mediaType,data:re.data}};throw new Be({functionality:`media type: ${re.mediaType}`})}}});break;case"text":case"error-text":J=de.value;break;case"json":case"error-json":default:J=JSON.stringify(de.value);break}P.push({type:"tool_result",tool_use_id:M.toolCallId,content:J,is_error:de.type==="error-text"||de.type==="error-json"?!0:void 0,cache_control:U})}break}default:{let L=V;throw new Error(`Unsupported role: ${L}`)}}}g.push({role:"user",content:P});break}case"assistant":{let P=[];for(let B=0;B<S.messages.length;B++){let V=S.messages[B],C=B===S.messages.length-1,{content:L}=V;for(let M=0;M<L.length;M++){let D=L[M],U=M===L.length-1,de=(l=m.getCacheControl(D.providerOptions,{type:"assistant message part",canCache:!0}))!=null?l:U?m.getCacheControl(V.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(D.type){case"text":{P.push({type:"text",text:b&&C&&U?D.text.trim():D.text,cache_control:de});break}case"reasoning":{if(t){let J=await tt({provider:"anthropic",providerOptions:D.providerOptions,schema:fH});J!=null?J.signature!=null?(m.getCacheControl(D.providerOptions,{type:"thinking block",canCache:!1}),P.push({type:"thinking",thinking:D.text,signature:J.signature})):J.redactedData!=null?(m.getCacheControl(D.providerOptions,{type:"redacted thinking block",canCache:!1}),P.push({type:"redacted_thinking",data:J.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(D.providerExecuted){D.toolName==="code_execution"&&D.input!=null&&typeof D.input=="object"&&"type"in D.input&&typeof D.input.type=="string"&&(D.input.type==="bash_code_execution"||D.input.type==="text_editor_code_execution")?P.push({type:"server_tool_use",id:D.toolCallId,name:D.input.type,input:D.input,cache_control:de}):D.toolName==="code_execution"||D.toolName==="web_fetch"||D.toolName==="web_search"?P.push({type:"server_tool_use",id:D.toolCallId,name:D.toolName,input:D.input,cache_control:de}):r.push({type:"other",message:`provider executed tool call for tool ${D.toolName} is not supported`});break}P.push({type:"tool_use",id:D.toolCallId,name:D.toolName,input:D.input,cache_control:de});break}case"tool-result":{if(D.toolName==="code_execution"){let J=D.output;if(J.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${J.type} for tool ${D.toolName} is not supported`});break}if(J.value==null||typeof J.value!="object"||!("type"in J.value)||typeof J.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${D.toolName}`});break}if(J.value.type==="code_execution_result"){let re=await jt({value:J.value,schema:DC});P.push({type:"code_execution_tool_result",tool_use_id:D.toolCallId,content:{type:re.type,stdout:re.stdout,stderr:re.stderr,return_code:re.return_code},cache_control:de})}else{let re=await jt({value:J.value,schema:zC});P.push(re.type==="bash_code_execution_result"||re.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:de,content:re}:{type:"text_editor_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:de,content:re})}break}if(D.toolName==="web_fetch"){let J=D.output;if(J.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${J.type} for tool ${D.toolName} is not supported`});break}let re=await jt({value:J.value,schema:jC});P.push({type:"web_fetch_tool_result",tool_use_id:D.toolCallId,content:{type:"web_fetch_result",url:re.url,retrieved_at:re.retrievedAt,content:{type:"document",title:re.content.title,citations:re.content.citations,source:{type:re.content.source.type,media_type:re.content.source.mediaType,data:re.content.source.data}}},cache_control:de});break}if(D.toolName==="web_search"){let J=D.output;if(J.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${J.type} for tool ${D.toolName} is not supported`});break}let re=await jt({value:J.value,schema:NC});P.push({type:"web_search_tool_result",tool_use_id:D.toolCallId,content:re.map(ve=>({url:ve.url,title:ve.title,page_age:ve.pageAge,encrypted_content:ve.encryptedContent,type:ve.type})),cache_control:de});break}r.push({type:"other",message:`provider executed tool result for tool ${D.toolName} is not supported`});break}}}}g.push({role:"assistant",content:P});break}default:{let P=w;throw new Error(`content type: ${P}`)}}}return{prompt:{system:f,messages:g},betas:d}}a(zH,"convertToAnthropicMessagesPrompt");function MH(e){let t=[],r;for(let o of e){let{role:n}=o;switch(n){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(o);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(o);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}default:{let i=n;throw new Error(`Unsupported role: ${i}`)}}}return t}a(MH,"groupIntoBlocks");function OC({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}a(OC,"mapAnthropicStopReason");function RC(e,t,r){var o;if(e.type!=="page_location"&&e.type!=="char_location")return;let n=t[e.document_index];if(n)return{type:"source",sourceType:"document",id:r(),mediaType:n.mediaType,title:(o=e.document_title)!=null?o:n.title,filename:n.filename,providerMetadata:{anthropic:e.type==="page_location"?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}a(RC,"createCitationSource");var UH=class{static{a(this,"AnthropicMessagesLanguageModel")}constructor(e,t){this.specificationVersion="v2";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:Nt}supportsUrl(e){return e.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({userSuppliedBetas:e,prompt:t,maxOutputTokens:r,temperature:o,topP:n,topK:i,frequencyPenalty:c,presencePenalty:u,stopSequences:l,responseFormat:d,seed:p,tools:m,toolChoice:f,providerOptions:g}){var h,v,x,S,b;let w=[];c!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),u!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),p!=null&&w.push({type:"unsupported-setting",setting:"seed"}),o!=null&&o>1?(w.push({type:"unsupported-setting",setting:"temperature",details:`${o} exceeds anthropic maximum of 1.0. clamped to 1.0`}),o=1):o!=null&&o<0&&(w.push({type:"unsupported-setting",setting:"temperature",details:`${o} is below anthropic minimum of 0. clamped to 0`}),o=0),d?.type==="json"&&(d.schema==null?w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):m!=null&&w.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let P=await tt({provider:"anthropic",providerOptions:g,schema:hH}),{maxOutputTokens:B,supportsStructuredOutput:V,isKnownModel:C}=qH(this.modelId),L=(h=P?.structuredOutputMode)!=null?h:"jsonTool",M=L==="outputFormat"||L==="auto"&&V,D=d?.type==="json"&&d.schema!=null&&!M?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema}:void 0,U=new Rw,{prompt:de,betas:J}=await zH({prompt:t,sendReasoning:(v=P?.sendReasoning)!=null?v:!0,warnings:w,cacheControlValidator:U}),re=((x=P?.thinking)==null?void 0:x.type)==="enabled",ve=(S=P?.thinking)==null?void 0:S.budgetTokens,ie=r??B,fe={model:this.modelId,max_tokens:ie,temperature:o,top_k:i,top_p:n,stop_sequences:l,...re&&{thinking:{type:"enabled",budget_tokens:ve}},...P?.effort&&{output_config:{effort:P.effort}},...M&&d?.type==="json"&&d.schema!=null&&{output_format:{type:"json_schema",schema:d.schema}},...P?.container&&{container:{id:P.container.id,skills:(b=P.container.skills)==null?void 0:b.map(be=>({type:be.type,skill_id:be.skillId,version:be.version}))}},system:de.system,messages:de.messages};if(re){if(ve==null)throw new Be({functionality:"thinking requires a budget"});fe.temperature!=null&&(fe.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(fe.top_k=void 0,w.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),n!=null&&(fe.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),fe.max_tokens=ie+ve}C&&fe.max_tokens>B&&(r!=null&&w.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${fe.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${B} max output tokens. The max output tokens have been limited to ${B}.`}),fe.max_tokens=B),P?.container&&P.container.skills&&P.container.skills.length>0&&(J.add("code-execution-2025-08-25"),J.add("skills-2025-10-02"),J.add("files-api-2025-04-14"),m?.some(be=>be.type==="provider-defined"&&be.id==="anthropic.code_execution_20250825")||w.push({type:"other",message:"code execution tool is required when using skills"})),P?.effort&&J.add("effort-2025-11-24"),M&&J.add("structured-outputs-2025-11-13");let{tools:ze,toolChoice:wt,toolWarnings:We,betas:zt}=await $H(D!=null?{tools:[D],toolChoice:{type:"tool",toolName:D.name},disableParallelToolUse:!0,cacheControlValidator:U}:{tools:m??[],toolChoice:f,disableParallelToolUse:P?.disableParallelToolUse,cacheControlValidator:U}),z=U.getWarnings();return{args:{...fe,tools:ze,tool_choice:wt},warnings:[...w,...We,...z],betas:new Set([...J,...zt,...e]),usesJsonResponseTool:D!=null}}async getHeaders({betas:e,headers:t}){return it(await dn(this.config.headers),t,e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{})}async getBetasFromHeaders(e){var t,r;let n=(t=(await dn(this.config.headers))["anthropic-beta"])!=null?t:"",i=(r=e?.["anthropic-beta"])!=null?r:"";return new Set([...n.toLowerCase().split(","),...i.toLowerCase().split(",")].map(c=>c.trim()).filter(c=>c!==""))}buildRequestUrl(e){var t,r,o;return(o=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?o:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,o;return(o=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?o:e}extractCitationDocuments(e){let t=a(r=>{var o,n;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(o=r.providerOptions)==null?void 0:o.anthropic,c=i?.citations;return(n=c?.enabled)!=null?n:!1},"isCitationPart");return e.filter(r=>r.role==="user").flatMap(r=>r.content).filter(t).map(r=>{var o;let n=r;return{title:(o=n.filename)!=null?o:"Untitled Document",filename:n.filename,mediaType:n.mediaType}})}async doGenerate(e){var t,r,o,n,i,c,u,l;let{args:d,warnings:p,betas:m,usesJsonResponseTool:f}=await this.getArgs({...e,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),g=this.extractCitationDocuments(e.prompt),{responseHeaders:h,value:v,rawValue:x}=await at({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:m,headers:e.headers}),body:this.transformRequestBody(d),failedResponseHandler:$C,successfulResponseHandler:Pt(pH),abortSignal:e.abortSignal,fetch:this.config.fetch}),S=[];for(let b of v.content)switch(b.type){case"text":{if(!f&&(S.push({type:"text",text:b.text}),b.citations))for(let w of b.citations){let P=RC(w,g,this.generateId);P&&S.push(P)}break}case"thinking":{S.push({type:"reasoning",text:b.thinking,providerMetadata:{anthropic:{signature:b.signature}}});break}case"redacted_thinking":{S.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:b.data}}});break}case"tool_use":{S.push(f?{type:"text",text:JSON.stringify(b.input)}:{type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input)});break}case"server_tool_use":{b.name==="text_editor_code_execution"||b.name==="bash_code_execution"?S.push({type:"tool-call",toolCallId:b.id,toolName:"code_execution",input:JSON.stringify({type:b.name,...b.input}),providerExecuted:!0}):(b.name==="web_search"||b.name==="code_execution"||b.name==="web_fetch")&&S.push({type:"tool-call",toolCallId:b.id,toolName:b.name,input:JSON.stringify(b.input),providerExecuted:!0});break}case"web_fetch_tool_result":{b.content.type==="web_fetch_result"?S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:b.content.url,retrievedAt:b.content.retrieved_at,content:{type:b.content.content.type,title:b.content.content.title,citations:b.content.content.citations,source:{type:b.content.content.source.type,mediaType:b.content.content.source.media_type,data:b.content.content.source.data}}},providerExecuted:!0}):b.content.type==="web_fetch_tool_result_error"&&S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(b.content)){S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",result:b.content.map(w=>{var P;return{url:w.url,title:w.title,pageAge:(P=w.page_age)!=null?P:null,encryptedContent:w.encrypted_content,type:w.type}}),providerExecuted:!0});for(let w of b.content)S.push({type:"source",sourceType:"url",id:this.generateId(),url:w.url,title:w.title,providerMetadata:{anthropic:{pageAge:(t=w.page_age)!=null?t:null}}})}else S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{b.content.type==="code_execution_result"?S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:{type:b.content.type,stdout:b.content.stdout,stderr:b.content.stderr,return_code:b.content.return_code},providerExecuted:!0}):b.content.type==="code_execution_tool_result_error"&&S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:b.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{S.push({type:"tool-result",toolCallId:b.tool_use_id,toolName:"code_execution",result:b.content,providerExecuted:!0});break}}return{content:S,finishReason:OC({finishReason:v.stop_reason,isJsonResponseFromTool:f}),usage:{inputTokens:v.usage.input_tokens,outputTokens:v.usage.output_tokens,totalTokens:v.usage.input_tokens+v.usage.output_tokens,cachedInputTokens:(r=v.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:d},response:{id:(o=v.id)!=null?o:void 0,modelId:(n=v.model)!=null?n:void 0,headers:h,body:x},warnings:p,providerMetadata:{anthropic:{usage:v.usage,cacheCreationInputTokens:(i=v.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(c=v.stop_sequence)!=null?c:null,container:v.container?{expiresAt:v.container.expires_at,id:v.container.id,skills:(l=(u=v.container.skills)==null?void 0:u.map(b=>({type:b.type,skillId:b.skill_id,version:b.version})))!=null?l:null}:null}}}}async doStream(e){let{args:t,warnings:r,betas:o,usesJsonResponseTool:n}=await this.getArgs({...e,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),i=this.extractCitationDocuments(e.prompt),c={...t,stream:!0},u=this.buildRequestUrl(!0),{responseHeaders:l,value:d}=await at({url:u,headers:await this.getHeaders({betas:o,headers:e.headers}),body:this.transformRequestBody(c),failedResponseHandler:$C,successfulResponseHandler:pn(mH),abortSignal:e.abortSignal,fetch:this.config.fetch}),p="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},f={},g,h=null,v=null,x=null,S,b=this.generateId,w=!0,P,B=new yC,V=d.pipeThrough(new TransformStream({start(D){D.enqueue({type:"stream-start",warnings:r})},async flush(){B.isPending()&&B.resolve({stream:P,request:{body:c},response:{headers:l}})},transform(D,U){var de,J,re,ve,ie,fe,ze,wt,We,zt;if(e.includeRawChunks&&U.enqueue({type:"raw",rawValue:D.rawValue}),!D.success){U.enqueue({type:"error",error:D.error});return}if(w){if(D.value.type==="error"){B.reject(new Ut({message:D.value.error.message,url:u,requestBodyValues:c,statusCode:D.value.error.type==="overloaded_error"?529:500,responseHeaders:l,responseBody:JSON.stringify(D.value.error),isRetryable:D.value.error.type==="overloaded_error"})),U.terminate();return}w=!1,B.resolve({stream:P,request:{body:c},response:{headers:l}})}let z=D.value;switch(z.type){case"ping":return;case"content_block_start":{let be=z.content_block.type;switch(S=be,be){case"text":{f[z.index]={type:"text"},U.enqueue({type:"text-start",id:String(z.index)});return}case"thinking":{f[z.index]={type:"reasoning"},U.enqueue({type:"reasoning-start",id:String(z.index)});return}case"redacted_thinking":{f[z.index]={type:"reasoning"},U.enqueue({type:"reasoning-start",id:String(z.index),providerMetadata:{anthropic:{redactedData:z.content_block.data}}});return}case"tool_use":{f[z.index]=n?{type:"text"}:{type:"tool-call",toolCallId:z.content_block.id,toolName:z.content_block.name,input:"",firstDelta:!0},U.enqueue(n?{type:"text-start",id:String(z.index)}:{type:"tool-input-start",id:z.content_block.id,toolName:z.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(z.content_block.name)){f[z.index]={type:"tool-call",toolCallId:z.content_block.id,toolName:z.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let se=z.content_block.name==="text_editor_code_execution"||z.content_block.name==="bash_code_execution"?"code_execution":z.content_block.name;U.enqueue({type:"tool-input-start",id:z.content_block.id,toolName:se,providerExecuted:!0})}return}case"web_fetch_tool_result":{let se=z.content_block;se.content.type==="web_fetch_result"?U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:se.content.url,retrievedAt:se.content.retrieved_at,content:{type:se.content.content.type,title:se.content.content.title,citations:se.content.content.citations,source:{type:se.content.content.source.type,mediaType:se.content.content.source.media_type,data:se.content.content.source.data}}},providerExecuted:!0}):se.content.type==="web_fetch_tool_result_error"&&U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:se.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let se=z.content_block;if(Array.isArray(se.content)){U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"web_search",result:se.content.map(E=>{var Ae;return{url:E.url,title:E.title,pageAge:(Ae=E.page_age)!=null?Ae:null,encryptedContent:E.encrypted_content,type:E.type}}),providerExecuted:!0});for(let E of se.content)U.enqueue({type:"source",sourceType:"url",id:b(),url:E.url,title:E.title,providerMetadata:{anthropic:{pageAge:(de=E.page_age)!=null?de:null}}})}else U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:se.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let se=z.content_block;se.content.type==="code_execution_result"?U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"code_execution",result:{type:se.content.type,stdout:se.content.stdout,stderr:se.content.stderr,return_code:se.content.return_code},providerExecuted:!0}):se.content.type==="code_execution_tool_result_error"&&U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:se.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let se=z.content_block;U.enqueue({type:"tool-result",toolCallId:se.tool_use_id,toolName:"code_execution",result:se.content,providerExecuted:!0});return}default:{let se=be;throw new Error(`Unsupported content block type: ${se}`)}}}case"content_block_stop":{if(f[z.index]!=null){let be=f[z.index];switch(be.type){case"text":{U.enqueue({type:"text-end",id:String(z.index)});break}case"reasoning":{U.enqueue({type:"reasoning-end",id:String(z.index)});break}case"tool-call":if(!n){U.enqueue({type:"tool-input-end",id:be.toolCallId});let se=be.toolName==="text_editor_code_execution"||be.toolName==="bash_code_execution"?"code_execution":be.toolName;U.enqueue({type:"tool-call",toolCallId:be.toolCallId,toolName:se,input:be.input,providerExecuted:be.providerExecuted})}break}delete f[z.index]}S=void 0;return}case"content_block_delta":{let be=z.delta.type;switch(be){case"text_delta":{if(n)return;U.enqueue({type:"text-delta",id:String(z.index),delta:z.delta.text});return}case"thinking_delta":{U.enqueue({type:"reasoning-delta",id:String(z.index),delta:z.delta.thinking});return}case"signature_delta":{S==="thinking"&&U.enqueue({type:"reasoning-delta",id:String(z.index),delta:"",providerMetadata:{anthropic:{signature:z.delta.signature}}});return}case"input_json_delta":{let se=f[z.index],E=z.delta.partial_json;if(E.length===0)return;if(n){if(se?.type!=="text")return;U.enqueue({type:"text-delta",id:String(z.index),delta:E})}else{if(se?.type!=="tool-call")return;se.firstDelta&&(se.toolName==="bash_code_execution"||se.toolName==="text_editor_code_execution")&&(E=`{"type": "${se.toolName}",${E.substring(1)}`),U.enqueue({type:"tool-input-delta",id:se.toolCallId,delta:E}),se.input+=E,se.firstDelta=!1}return}case"citations_delta":{let se=z.delta.citation,E=RC(se,i,b);E&&U.enqueue(E);return}default:{let se=be;throw new Error(`Unsupported delta type: ${se}`)}}}case"message_start":{m.inputTokens=z.message.usage.input_tokens,m.cachedInputTokens=(J=z.message.usage.cache_read_input_tokens)!=null?J:void 0,g={...z.message.usage},h=(re=z.message.usage.cache_creation_input_tokens)!=null?re:null,U.enqueue({type:"response-metadata",id:(ve=z.message.id)!=null?ve:void 0,modelId:(ie=z.message.model)!=null?ie:void 0});return}case"message_delta":{m.outputTokens=z.usage.output_tokens,m.totalTokens=((fe=m.inputTokens)!=null?fe:0)+((ze=z.usage.output_tokens)!=null?ze:0),p=OC({finishReason:z.delta.stop_reason,isJsonResponseFromTool:n}),v=(wt=z.delta.stop_sequence)!=null?wt:null,x=z.delta.container!=null?{expiresAt:z.delta.container.expires_at,id:z.delta.container.id,skills:(zt=(We=z.delta.container.skills)==null?void 0:We.map(be=>({type:be.type,skillId:be.skill_id,version:be.version})))!=null?zt:null}:null,g={...g,...z.usage};return}case"message_stop":{U.enqueue({type:"finish",finishReason:p,usage:m,providerMetadata:{anthropic:{usage:g??null,cacheCreationInputTokens:h,stopSequence:v,container:x}}});return}case"error":{U.enqueue({type:"error",error:z.error});return}default:{let be=z;throw new Error(`Unsupported chunk type: ${be}`)}}}})),[C,L]=V.tee();P=L;let M=C.getReader();return(async()=>{try{let{done:D}=await M.read();D||await M.cancel()}catch{try{await M.cancel()}catch{}}finally{M.releaseLock()}})(),B.promise}};function qH(e){return e.includes("claude-sonnet-4-5")||e.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-sonnet-4-")||e.includes("claude-3-7-sonnet")||e.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}a(qH,"getModelCapabilities");var LH=ee(()=>F(s.object({command:s.string(),restart:s.boolean().optional()}))),FH=st({id:"anthropic.bash_20241022",name:"bash",inputSchema:LH}),BH=ee(()=>F(s.object({command:s.string(),restart:s.boolean().optional()}))),VH=st({id:"anthropic.bash_20250124",name:"bash",inputSchema:BH}),ZH=ee(()=>F(s.object({action:s.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:s.array(s.number().int()).optional(),text:s.string().optional()}))),HH=st({id:"anthropic.computer_20241022",name:"computer",inputSchema:ZH}),GH=ee(()=>F(s.object({action:s.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:s.tuple([s.number().int(),s.number().int()]).optional(),duration:s.number().optional(),scroll_amount:s.number().optional(),scroll_direction:s.enum(["up","down","left","right"]).optional(),start_coordinate:s.tuple([s.number().int(),s.number().int()]).optional(),text:s.string().optional()}))),KH=st({id:"anthropic.computer_20250124",name:"computer",inputSchema:GH}),JH=ee(()=>F(s.discriminatedUnion("command",[s.object({command:s.literal("view"),path:s.string(),view_range:s.tuple([s.number(),s.number()]).optional()}),s.object({command:s.literal("create"),path:s.string(),file_text:s.string()}),s.object({command:s.literal("str_replace"),path:s.string(),old_str:s.string(),new_str:s.string()}),s.object({command:s.literal("insert"),path:s.string(),insert_line:s.number(),insert_text:s.string()}),s.object({command:s.literal("delete"),path:s.string()}),s.object({command:s.literal("rename"),old_path:s.string(),new_path:s.string()})]))),WH=st({id:"anthropic.memory_20250818",name:"memory",inputSchema:JH}),QH=ee(()=>F(s.object({command:s.enum(["view","create","str_replace","insert","undo_edit"]),path:s.string(),file_text:s.string().optional(),insert_line:s.number().int().optional(),new_str:s.string().optional(),old_str:s.string().optional(),view_range:s.array(s.number().int()).optional()}))),XH=st({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:QH}),YH=ee(()=>F(s.object({command:s.enum(["view","create","str_replace","insert","undo_edit"]),path:s.string(),file_text:s.string().optional(),insert_line:s.number().int().optional(),new_str:s.string().optional(),old_str:s.string().optional(),view_range:s.array(s.number().int()).optional()}))),eG=st({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:YH}),tG=ee(()=>F(s.object({command:s.enum(["view","create","str_replace","insert"]),path:s.string(),file_text:s.string().optional(),insert_line:s.number().int().optional(),new_str:s.string().optional(),old_str:s.string().optional(),view_range:s.array(s.number().int()).optional()}))),rG=st({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:tG}),nG={bash_20241022:FH,bash_20250124:VH,codeExecution_20250522:OH,codeExecution_20250825:jH,computer_20241022:HH,computer_20250124:KH,memory_20250818:WH,textEditor_20241022:XH,textEditor_20250124:eG,textEditor_20250429:rG,textEditor_20250728:bH,webFetch_20250910:PH,webSearch_20250305:TH};function oG(e={}){var t,r;let o=(t=Pa(Ap({settingValue:e.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?t:"https://api.anthropic.com/v1",n=(r=e.name)!=null?r:"anthropic.messages",i=a(()=>Qo({"anthropic-version":"2023-06-01","x-api-key":Ea({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers},`ai-sdk/anthropic/${lH}`),"getHeaders"),c=a(l=>{var d;return new UH(l,{provider:n,baseURL:o,headers:i,fetch:e.fetch,generateId:(d=e.generateId)!=null?d:Nt,supportedUrls:a(()=>({"image/*":[/^https?:\/\/.*$/]}),"supportedUrls")})},"createChatModel"),u=a(function(l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return c(l)},"provider");return u.languageModel=c,u.chat=c,u.messages=c,u.textEmbeddingModel=l=>{throw new yw({modelId:l,modelType:"textEmbeddingModel"})},u.imageModel=l=>{throw new yw({modelId:l,modelType:"imageModel"})},u.tools=nG,u}a(oG,"createAnthropic");var Nw=oG();var iG="2.0.44",aG=ee(()=>F(s.object({error:s.object({code:s.number().nullable(),message:s.string(),status:s.string()})}))),ou=ka({errorSchema:aG,errorToMessage:a(e=>e.error.message,"errorToMessage")}),sG=ee(()=>F(s.object({outputDimensionality:s.number().optional(),taskType:s.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),cG=class{static{a(this,"GoogleGenerativeAIEmbeddingModel")}constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){let n=await tt({provider:"google",providerOptions:o,schema:sG});if(e.length>this.maxEmbeddingsPerCall)throw new Sp({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=it(await dn(this.config.headers),t);if(e.length===1){let{responseHeaders:d,value:p,rawValue:m}=await at({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:n?.outputDimensionality,taskType:n?.taskType},failedResponseHandler:ou,successfulResponseHandler:Pt(lG),abortSignal:r,fetch:this.config.fetch});return{embeddings:[p.embedding.values],usage:void 0,response:{headers:d,body:m}}}let{responseHeaders:c,value:u,rawValue:l}=await at({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:e.map(d=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:d}]},outputDimensionality:n?.outputDimensionality,taskType:n?.taskType}))},failedResponseHandler:ou,successfulResponseHandler:Pt(uG),abortSignal:r,fetch:this.config.fetch});return{embeddings:u.embeddings.map(d=>d.values),usage:void 0,response:{headers:c,body:l}}}},uG=ee(()=>F(s.object({embeddings:s.array(s.object({values:s.array(s.number())}))}))),lG=ee(()=>F(s.object({embedding:s.object({values:s.array(s.number())})})));function mn(e){if(e==null||dG(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};let{type:t,description:r,required:o,properties:n,items:i,allOf:c,anyOf:u,oneOf:l,format:d,const:p,minLength:m,enum:f}=e,g={};if(r&&(g.description=r),o&&(g.required=o),d&&(g.format=d),p!==void 0&&(g.enum=[p]),t)if(Array.isArray(t)){let h=t.includes("null"),v=t.filter(x=>x!=="null");v.length===0?g.type="null":(g.anyOf=v.map(x=>({type:x})),h&&(g.nullable=!0))}else g.type=t;if(f!==void 0&&(g.enum=f),n!=null&&(g.properties=Object.entries(n).reduce((h,[v,x])=>(h[v]=mn(x),h),{})),i&&(g.items=Array.isArray(i)?i.map(mn):mn(i)),c&&(g.allOf=c.map(mn)),u)if(u.some(h=>typeof h=="object"&&h?.type==="null")){let h=u.filter(v=>!(typeof v=="object"&&v?.type==="null"));if(h.length===1){let v=mn(h[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=h.map(mn),g.nullable=!0}else g.anyOf=u.map(mn);return l&&(g.oneOf=l.map(mn)),m!==void 0&&(g.minLength=m),g}a(mn,"convertJSONSchemaToOpenAPISchema");function dG(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}a(dG,"isEmptyObjectSchema");function pG(e,t){var r;let o=[],n=[],i=!0,c=(r=t?.isGemmaModel)!=null?r:!1;for(let{role:u,content:l}of e)switch(u){case"system":{if(!i)throw new Be({functionality:"system messages are only supported at the beginning of the conversation"});o.push({text:l});break}case"user":{i=!1;let d=[];for(let p of l)switch(p.type){case"text":{d.push({text:p.text});break}case"file":{let m=p.mediaType==="image/*"?"image/jpeg":p.mediaType;d.push(p.data instanceof URL?{fileData:{mimeType:m,fileUri:p.data.toString()}}:{inlineData:{mimeType:m,data:gr(p.data)}});break}}n.push({role:"user",parts:d});break}case"assistant":{i=!1,n.push({role:"model",parts:l.map(d=>{var p,m,f;let g=((m=(p=d.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature)!=null?String((f=d.providerOptions.google)==null?void 0:f.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:g};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:g};case"file":{if(d.mediaType!=="image/png")throw new Be({functionality:"Only PNG images are supported in assistant messages"});if(d.data instanceof URL)throw new Be({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:gr(d.data)}}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:g}}}).filter(d=>d!==void 0)});break}case"tool":{i=!1;let d=[];for(let p of l){let m=p.output;if(m.type==="content")for(let f of m.value)switch(f.type){case"text":d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:f.text}}});break;case"media":d.push({inlineData:{mimeType:f.mediaType,data:f.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(f)});break}else d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:m.value}}})}n.push({role:"user",parts:d});break}}if(c&&o.length>0&&n.length>0&&n[0].role==="user"){let u=o.map(l=>l.text).join(`

`);n[0].parts.unshift({text:u+`

`})}return{systemInstruction:o.length>0&&!c?{parts:o}:void 0,contents:n}}a(pG,"convertToGoogleGenerativeAIMessages");function MC(e){return e.includes("/")?e:`models/${e}`}a(MC,"getModelPath");var mG=ee(()=>F(s.object({responseModalities:s.array(s.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:s.object({thinkingBudget:s.number().optional(),includeThoughts:s.boolean().optional(),thinkingLevel:s.enum(["low","medium","high"]).optional()}).optional(),cachedContent:s.string().optional(),structuredOutputs:s.boolean().optional(),safetySettings:s.array(s.object({category:s.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:s.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:s.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:s.boolean().optional(),labels:s.record(s.string(),s.string()).optional(),mediaResolution:s.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:s.object({aspectRatio:s.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:s.enum(["1K","2K","4K"]).optional()}).optional()})));function fG({tools:e,toolChoice:t,modelId:r}){var o;e=e?.length?e:void 0;let n=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(g=>g===r),c=r.includes("gemini-2")||r.includes("gemini-3")||i,u=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),l=r.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:n};let d=e.some(g=>g.type==="function"),p=e.some(g=>g.type==="provider-defined");if(d&&p){let g=e.filter(h=>h.type==="function");n.push({type:"unsupported-tool",tool:e.find(h=>h.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${g.map(h=>h.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(p){let g=[];return e.filter(v=>v.type==="provider-defined").forEach(v=>{switch(v.id){case"google.google_search":c?g.push({googleSearch:{}}):u?g.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:v.args.mode,dynamicThreshold:v.args.dynamicThreshold}}}):g.push({googleSearchRetrieval:{}});break;case"google.url_context":c?g.push({urlContext:{}}):n.push({type:"unsupported-tool",tool:v,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":c?g.push({codeExecution:{}}):n.push({type:"unsupported-tool",tool:v,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?g.push({fileSearch:{...v.args}}):n.push({type:"unsupported-tool",tool:v,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":c?g.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:v.args.ragCorpus},similarity_top_k:v.args.topK}}}):n.push({type:"unsupported-tool",tool:v,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:n.push({type:"unsupported-tool",tool:v});break}}),{tools:g.length>0?g:void 0,toolConfig:void 0,toolWarnings:n}}let m=[];for(let g of e)switch(g.type){case"function":m.push({name:g.name,description:(o=g.description)!=null?o:"",parameters:mn(g.inputSchema)});break;default:n.push({type:"unsupported-tool",tool:g});break}if(t==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:n};let f=t.type;switch(f){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:n};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:n};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:n};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:n};default:{let g=f;throw new Be({functionality:`tool choice type: ${g}`})}}}a(fG,"prepareTools");function UC({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}a(UC,"mapGoogleGenerativeAIFinishReason");var hG=class{static{a(this,"GoogleGenerativeAILanguageModel")}constructor(e,t){this.specificationVersion="v2";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:Nt}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:c,stopSequences:u,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:f}){var g;let h=[],v=await tt({provider:"google",providerOptions:f,schema:mG});p?.some(V=>V.type==="provider-defined"&&V.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&h.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let x=this.modelId.toLowerCase().startsWith("gemma-"),{contents:S,systemInstruction:b}=pG(e,{isGemmaModel:x}),{tools:w,toolConfig:P,toolWarnings:B}=fG({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:r,topK:n,topP:o,frequencyPenalty:i,presencePenalty:c,stopSequences:u,seed:d,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((g=v?.structuredOutputs)==null||g)?mn(l.schema):void 0,...v?.audioTimestamp&&{audioTimestamp:v.audioTimestamp},responseModalities:v?.responseModalities,thinkingConfig:v?.thinkingConfig,...v?.imageConfig&&{imageConfig:v.imageConfig},...v?.mediaResolution&&{mediaResolution:v.mediaResolution}},contents:S,systemInstruction:x?void 0:b,safetySettings:v?.safetySettings,tools:w,toolConfig:P,cachedContent:v?.cachedContent,labels:v?.labels},warnings:[...h,...B]}}async doGenerate(e){var t,r,o,n,i,c,u,l,d,p,m,f,g;let{args:h,warnings:v}=await this.getArgs(e),x=JSON.stringify(h),S=it(await dn(this.config.headers),e.headers),{responseHeaders:b,value:w,rawValue:P}=await at({url:`${this.config.baseURL}/${MC(this.modelId)}:generateContent`,headers:S,body:h,failedResponseHandler:ou,successfulResponseHandler:Pt(yG),abortSignal:e.abortSignal,fetch:this.config.fetch}),B=w.candidates[0],V=[],C=(r=(t=B.content)==null?void 0:t.parts)!=null?r:[],L=w.usageMetadata,M;for(let U of C)if("executableCode"in U&&((o=U.executableCode)!=null&&o.code)){let de=this.config.generateId();M=de,V.push({type:"tool-call",toolCallId:de,toolName:"code_execution",input:JSON.stringify(U.executableCode),providerExecuted:!0})}else"codeExecutionResult"in U&&U.codeExecutionResult?(V.push({type:"tool-result",toolCallId:M,toolName:"code_execution",result:{outcome:U.codeExecutionResult.outcome,output:U.codeExecutionResult.output},providerExecuted:!0}),M=void 0):"text"in U&&U.text!=null&&U.text.length>0?V.push({type:U.thought===!0?"reasoning":"text",text:U.text,providerMetadata:U.thoughtSignature?{google:{thoughtSignature:U.thoughtSignature}}:void 0}):"functionCall"in U?V.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:U.functionCall.name,input:JSON.stringify(U.functionCall.args),providerMetadata:U.thoughtSignature?{google:{thoughtSignature:U.thoughtSignature}}:void 0}):"inlineData"in U&&V.push({type:"file",data:U.inlineData.data,mediaType:U.inlineData.mimeType});let D=(n=qC({groundingMetadata:B.groundingMetadata,generateId:this.config.generateId}))!=null?n:[];for(let U of D)V.push(U);return{content:V,finishReason:UC({finishReason:B.finishReason,hasToolCalls:V.some(U=>U.type==="tool-call")}),usage:{inputTokens:(i=L?.promptTokenCount)!=null?i:void 0,outputTokens:(c=L?.candidatesTokenCount)!=null?c:void 0,totalTokens:(u=L?.totalTokenCount)!=null?u:void 0,reasoningTokens:(l=L?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(d=L?.cachedContentTokenCount)!=null?d:void 0},warnings:v,providerMetadata:{google:{promptFeedback:(p=w.promptFeedback)!=null?p:null,groundingMetadata:(m=B.groundingMetadata)!=null?m:null,urlContextMetadata:(f=B.urlContextMetadata)!=null?f:null,safetyRatings:(g=B.safetyRatings)!=null?g:null,usageMetadata:L??null}},request:{body:x},response:{headers:b,body:P}}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o=JSON.stringify(t),n=it(await dn(this.config.headers),e.headers),{responseHeaders:i,value:c}=await at({url:`${this.config.baseURL}/${MC(this.modelId)}:streamGenerateContent?alt=sse`,headers:n,body:t,failedResponseHandler:ou,successfulResponseHandler:pn(vG),abortSignal:e.abortSignal,fetch:this.config.fetch}),u="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d,p=this.config.generateId,m=!1,f=null,g=null,h=0,v=new Set,x;return{stream:c.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:r})},transform(S,b){var w,P,B,V,C,L,M,D,U,de,J,re;if(e.includeRawChunks&&b.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){b.enqueue({type:"error",error:S.error});return}let ve=S.value,ie=ve.usageMetadata;ie!=null&&(l.inputTokens=(w=ie.promptTokenCount)!=null?w:void 0,l.outputTokens=(P=ie.candidatesTokenCount)!=null?P:void 0,l.totalTokens=(B=ie.totalTokenCount)!=null?B:void 0,l.reasoningTokens=(V=ie.thoughtsTokenCount)!=null?V:void 0,l.cachedInputTokens=(C=ie.cachedContentTokenCount)!=null?C:void 0);let fe=(L=ve.candidates)==null?void 0:L[0];if(fe==null)return;let ze=fe.content,wt=qC({groundingMetadata:fe.groundingMetadata,generateId:p});if(wt!=null)for(let We of wt)We.sourceType==="url"&&!v.has(We.url)&&(v.add(We.url),b.enqueue(We));if(ze!=null){let We=(M=ze.parts)!=null?M:[];for(let z of We)if("executableCode"in z&&((D=z.executableCode)!=null&&D.code)){let be=p();x=be,b.enqueue({type:"tool-call",toolCallId:be,toolName:"code_execution",input:JSON.stringify(z.executableCode),providerExecuted:!0}),m=!0}else if("codeExecutionResult"in z&&z.codeExecutionResult){let be=x;be&&(b.enqueue({type:"tool-result",toolCallId:be,toolName:"code_execution",result:{outcome:z.codeExecutionResult.outcome,output:z.codeExecutionResult.output},providerExecuted:!0}),x=void 0)}else"text"in z&&z.text!=null&&z.text.length>0?z.thought===!0?(f!==null&&(b.enqueue({type:"text-end",id:f}),f=null),g===null&&(g=String(h++),b.enqueue({type:"reasoning-start",id:g,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0})),b.enqueue({type:"reasoning-delta",id:g,delta:z.text,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0})):(g!==null&&(b.enqueue({type:"reasoning-end",id:g}),g=null),f===null&&(f=String(h++),b.enqueue({type:"text-start",id:f,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0})),b.enqueue({type:"text-delta",id:f,delta:z.text,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0})):"inlineData"in z&&b.enqueue({type:"file",mediaType:z.inlineData.mimeType,data:z.inlineData.data});let zt=gG({parts:ze.parts,generateId:p});if(zt!=null)for(let z of zt)b.enqueue({type:"tool-input-start",id:z.toolCallId,toolName:z.toolName,providerMetadata:z.providerMetadata}),b.enqueue({type:"tool-input-delta",id:z.toolCallId,delta:z.args,providerMetadata:z.providerMetadata}),b.enqueue({type:"tool-input-end",id:z.toolCallId,providerMetadata:z.providerMetadata}),b.enqueue({type:"tool-call",toolCallId:z.toolCallId,toolName:z.toolName,input:z.args,providerMetadata:z.providerMetadata}),m=!0}fe.finishReason!=null&&(u=UC({finishReason:fe.finishReason,hasToolCalls:m}),d={google:{promptFeedback:(U=ve.promptFeedback)!=null?U:null,groundingMetadata:(de=fe.groundingMetadata)!=null?de:null,urlContextMetadata:(J=fe.urlContextMetadata)!=null?J:null,safetyRatings:(re=fe.safetyRatings)!=null?re:null}},ie!=null&&(d.google.usageMetadata=ie))},flush(S){f!==null&&S.enqueue({type:"text-end",id:f}),g!==null&&S.enqueue({type:"reasoning-end",id:g}),S.enqueue({type:"finish",finishReason:u,usage:l,providerMetadata:d})}})),response:{headers:i},request:{body:o}}}};function gG({parts:e,generateId:t}){let r=e?.filter(o=>"functionCall"in o);return r==null||r.length===0?void 0:r.map(o=>({type:"tool-call",toolCallId:t(),toolName:o.functionCall.name,args:JSON.stringify(o.functionCall.args),providerMetadata:o.thoughtSignature?{google:{thoughtSignature:o.thoughtSignature}}:void 0}))}a(gG,"getToolCallsFromParts");function qC({groundingMetadata:e,generateId:t}){var r,o,n,i;if(!e?.groundingChunks)return;let c=[];for(let u of e.groundingChunks)if(u.web!=null)c.push({type:"source",sourceType:"url",id:t(),url:u.web.uri,title:(r=u.web.title)!=null?r:void 0});else if(u.retrievedContext!=null){let l=u.retrievedContext.uri,d=u.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))c.push({type:"source",sourceType:"url",id:t(),url:l,title:(o=u.retrievedContext.title)!=null?o:void 0});else if(l){let p=(n=u.retrievedContext.title)!=null?n:"Unknown Document",m="application/octet-stream",f;l.endsWith(".pdf")?(m="application/pdf",f=l.split("/").pop()):l.endsWith(".txt")?(m="text/plain",f=l.split("/").pop()):l.endsWith(".docx")?(m="application/vnd.openxmlformats-officedocument.wordprocessingml.document",f=l.split("/").pop()):l.endsWith(".doc")?(m="application/msword",f=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(m="text/markdown"),f=l.split("/").pop()),c.push({type:"source",sourceType:"document",id:t(),mediaType:m,title:p,filename:f})}else if(d){let p=(i=u.retrievedContext.title)!=null?i:"Unknown Document";c.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:p,filename:d.split("/").pop()})}}return c.length>0?c:void 0}a(qC,"extractSources");var LC=a(()=>s.object({webSearchQueries:s.array(s.string()).nullish(),retrievalQueries:s.array(s.string()).nullish(),searchEntryPoint:s.object({renderedContent:s.string()}).nullish(),groundingChunks:s.array(s.object({web:s.object({uri:s.string(),title:s.string().nullish()}).nullish(),retrievedContext:s.object({uri:s.string().nullish(),title:s.string().nullish(),text:s.string().nullish(),fileSearchStore:s.string().nullish()}).nullish()})).nullish(),groundingSupports:s.array(s.object({segment:s.object({startIndex:s.number().nullish(),endIndex:s.number().nullish(),text:s.string().nullish()}),segment_text:s.string().nullish(),groundingChunkIndices:s.array(s.number()).nullish(),supportChunkIndices:s.array(s.number()).nullish(),confidenceScores:s.array(s.number()).nullish(),confidenceScore:s.array(s.number()).nullish()})).nullish(),retrievalMetadata:s.union([s.object({webDynamicRetrievalScore:s.number()}),s.object({})]).nullish()}),"getGroundingMetadataSchema"),FC=a(()=>s.object({parts:s.array(s.union([s.object({functionCall:s.object({name:s.string(),args:s.unknown()}),thoughtSignature:s.string().nullish()}),s.object({inlineData:s.object({mimeType:s.string(),data:s.string()})}),s.object({executableCode:s.object({language:s.string(),code:s.string()}).nullish(),codeExecutionResult:s.object({outcome:s.string(),output:s.string()}).nullish(),text:s.string().nullish(),thought:s.boolean().nullish(),thoughtSignature:s.string().nullish()})])).nullish()}),"getContentSchema"),Cp=a(()=>s.object({category:s.string().nullish(),probability:s.string().nullish(),probabilityScore:s.number().nullish(),severity:s.string().nullish(),severityScore:s.number().nullish(),blocked:s.boolean().nullish()}),"getSafetyRatingSchema"),BC=s.object({cachedContentTokenCount:s.number().nullish(),thoughtsTokenCount:s.number().nullish(),promptTokenCount:s.number().nullish(),candidatesTokenCount:s.number().nullish(),totalTokenCount:s.number().nullish(),trafficType:s.string().nullish()}),VC=a(()=>s.object({urlMetadata:s.array(s.object({retrievedUrl:s.string(),urlRetrievalStatus:s.string()}))}),"getUrlContextMetadataSchema"),yG=ee(()=>F(s.object({candidates:s.array(s.object({content:FC().nullish().or(s.object({}).strict()),finishReason:s.string().nullish(),safetyRatings:s.array(Cp()).nullish(),groundingMetadata:LC().nullish(),urlContextMetadata:VC().nullish()})),usageMetadata:BC.nullish(),promptFeedback:s.object({blockReason:s.string().nullish(),safetyRatings:s.array(Cp()).nullish()}).nullish()}))),vG=ee(()=>F(s.object({candidates:s.array(s.object({content:FC().nullish(),finishReason:s.string().nullish(),safetyRatings:s.array(Cp()).nullish(),groundingMetadata:LC().nullish(),urlContextMetadata:VC().nullish()})).nullish(),usageMetadata:BC.nullish(),promptFeedback:s.object({blockReason:s.string().nullish(),safetyRatings:s.array(Cp()).nullish()}).nullish()}))),_G=vt({id:"google.code_execution",name:"code_execution",inputSchema:s.object({language:s.string().describe("The programming language of the code."),code:s.string().describe("The code to be executed.")}),outputSchema:s.object({outcome:s.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:s.string().describe("The output from the code execution.")})}),bG=s.object({fileSearchStoreNames:s.array(s.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:s.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:s.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),xG=ee(()=>F(bG)),wG=st({id:"google.file_search",name:"file_search",inputSchema:xG}),SG=st({id:"google.google_search",name:"google_search",inputSchema:ee(()=>F(s.object({mode:s.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:s.number().default(1)})))}),TG=st({id:"google.url_context",name:"url_context",inputSchema:ee(()=>F(s.object({})))}),IG=st({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:s.object({ragCorpus:s.string(),topK:s.number().optional()})}),EG={googleSearch:SG,urlContext:TG,fileSearch:wG,codeExecution:_G,vertexRagStore:IG},kG=class{static{a(this,"GoogleGenerativeAIImageModel")}constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,r,o;let{prompt:n,n:i=1,size:c="1024x1024",aspectRatio:u="1:1",seed:l,providerOptions:d,headers:p,abortSignal:m}=e,f=[];c!=null&&f.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&f.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let g=await tt({provider:"google",providerOptions:d,schema:$G}),h=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,v={sampleCount:i};u!=null&&(v.aspectRatio=u),g&&Object.assign(v,g);let x={instances:[{prompt:n}],parameters:v},{responseHeaders:S,value:b}=await at({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:it(await dn(this.config.headers),p),body:x,failedResponseHandler:ou,successfulResponseHandler:Pt(PG),abortSignal:m,fetch:this.config.fetch});return{images:b.predictions.map(w=>w.bytesBase64Encoded),warnings:f??[],providerMetadata:{google:{images:b.predictions.map(w=>({}))}},response:{timestamp:h,modelId:this.modelId,headers:S}}}},PG=ee(()=>F(s.object({predictions:s.array(s.object({bytesBase64Encoded:s.string()})).default([])}))),$G=ee(()=>F(s.object({personGeneration:s.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:s.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function AG(e={}){var t,r;let o=(t=Pa(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",n=(r=e.name)!=null?r:"google.generative-ai",i=a(()=>Qo({"x-goog-api-key":Ea({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${iG}`),"getHeaders"),c=a(p=>{var m;return new hG(p,{provider:n,baseURL:o,headers:i,generateId:(m=e.generateId)!=null?m:Nt,supportedUrls:a(()=>({"*":[new RegExp(`^${o}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),"supportedUrls"),fetch:e.fetch})},"createChatModel"),u=a(p=>new cG(p,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),"createEmbeddingModel"),l=a((p,m={})=>new kG(p,m,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),"createImageModel"),d=a(function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return c(p)},"provider");return d.languageModel=c,d.chat=c,d.generativeAI=c,d.embedding=u,d.textEmbedding=u,d.textEmbeddingModel=u,d.image=l,d.imageModel=l,d.tools=EG,d}a(AG,"createGoogleGenerativeAI");var jw=AG();var zw=s.object({error:s.object({message:s.string(),type:s.string().nullish(),param:s.any().nullish(),code:s.union([s.string(),s.number()]).nullish()})}),fn=ka({errorSchema:zw,errorToMessage:a(e=>e.error.message,"errorToMessage")});function CG({prompt:e,systemMessageMode:t="system"}){let r=[],o=[];for(let{role:n,content:i}of e)switch(n){case"system":{switch(t){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":{o.push({type:"other",message:"system messages are removed for this model"});break}default:{let c=t;throw new Error(`Unsupported system message mode: ${c}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map((c,u)=>{var l,d,p;switch(c.type){case"text":return{type:"text",text:c.text};case"file":if(c.mediaType.startsWith("image/")){let m=c.mediaType==="image/*"?"image/jpeg":c.mediaType;return{type:"image_url",image_url:{url:c.data instanceof URL?c.data.toString():`data:${m};base64,${gr(c.data)}`,detail:(d=(l=c.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(c.mediaType.startsWith("audio/")){if(c.data instanceof URL)throw new Be({functionality:"audio file parts with URLs"});switch(c.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:gr(c.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:gr(c.data),format:"mp3"}};default:throw new Be({functionality:`audio content parts with media type ${c.mediaType}`})}}else if(c.mediaType==="application/pdf"){if(c.data instanceof URL)throw new Be({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof c.data=="string"&&c.data.startsWith("file-")?{file_id:c.data}:{filename:(p=c.filename)!=null?p:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${gr(c.data)}`}}}else throw new Be({functionality:`file part media type ${c.mediaType}`})}})});break}case"assistant":{let c="",u=[];for(let l of i)switch(l.type){case"text":{c+=l.text;break}case"tool-call":{u.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}r.push({role:"assistant",content:c,tool_calls:u.length>0?u:void 0});break}case"tool":{for(let c of i){let u=c.output,l;switch(u.type){case"text":case"error-text":l=u.value;break;case"content":case"json":case"error-json":l=JSON.stringify(u.value);break}r.push({role:"tool",tool_call_id:c.toolCallId,content:l})}break}default:{let c=n;throw new Error(`Unsupported role: ${c}`)}}return{messages:r,warnings:o}}a(CG,"convertToOpenAIChatMessages");function Dw({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r?new Date(r*1e3):void 0}}a(Dw,"getResponseMetadata");function ZC(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}a(ZC,"mapOpenAIFinishReason");var OG=et(()=>F(s.object({id:s.string().nullish(),created:s.number().nullish(),model:s.string().nullish(),choices:s.array(s.object({message:s.object({role:s.literal("assistant").nullish(),content:s.string().nullish(),tool_calls:s.array(s.object({id:s.string().nullish(),type:s.literal("function"),function:s.object({name:s.string(),arguments:s.string()})})).nullish(),annotations:s.array(s.object({type:s.literal("url_citation"),start_index:s.number(),end_index:s.number(),url:s.string(),title:s.string()})).nullish()}),index:s.number(),logprobs:s.object({content:s.array(s.object({token:s.string(),logprob:s.number(),top_logprobs:s.array(s.object({token:s.string(),logprob:s.number()}))})).nullish()}).nullish(),finish_reason:s.string().nullish()})),usage:s.object({prompt_tokens:s.number().nullish(),completion_tokens:s.number().nullish(),total_tokens:s.number().nullish(),prompt_tokens_details:s.object({cached_tokens:s.number().nullish()}).nullish(),completion_tokens_details:s.object({reasoning_tokens:s.number().nullish(),accepted_prediction_tokens:s.number().nullish(),rejected_prediction_tokens:s.number().nullish()}).nullish()}).nullish()}))),RG=et(()=>F(s.union([s.object({id:s.string().nullish(),created:s.number().nullish(),model:s.string().nullish(),choices:s.array(s.object({delta:s.object({role:s.enum(["assistant"]).nullish(),content:s.string().nullish(),tool_calls:s.array(s.object({index:s.number(),id:s.string().nullish(),type:s.literal("function").nullish(),function:s.object({name:s.string().nullish(),arguments:s.string().nullish()})})).nullish(),annotations:s.array(s.object({type:s.literal("url_citation"),start_index:s.number(),end_index:s.number(),url:s.string(),title:s.string()})).nullish()}).nullish(),logprobs:s.object({content:s.array(s.object({token:s.string(),logprob:s.number(),top_logprobs:s.array(s.object({token:s.string(),logprob:s.number()}))})).nullish()}).nullish(),finish_reason:s.string().nullish(),index:s.number()})),usage:s.object({prompt_tokens:s.number().nullish(),completion_tokens:s.number().nullish(),total_tokens:s.number().nullish(),prompt_tokens_details:s.object({cached_tokens:s.number().nullish()}).nullish(),completion_tokens_details:s.object({reasoning_tokens:s.number().nullish(),accepted_prediction_tokens:s.number().nullish(),rejected_prediction_tokens:s.number().nullish()}).nullish()}).nullish()}),zw]))),NG=et(()=>F(s.object({logitBias:s.record(s.coerce.number(),s.number()).optional(),logprobs:s.union([s.boolean(),s.number()]).optional(),parallelToolCalls:s.boolean().optional(),user:s.string().optional(),reasoningEffort:s.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:s.number().optional(),store:s.boolean().optional(),metadata:s.record(s.string().max(64),s.string().max(512)).optional(),prediction:s.record(s.string(),s.any()).optional(),structuredOutputs:s.boolean().optional(),serviceTier:s.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:s.boolean().optional(),textVerbosity:s.enum(["low","medium","high"]).optional(),promptCacheKey:s.string().optional(),promptCacheRetention:s.enum(["in_memory","24h"]).optional(),safetyIdentifier:s.string().optional()})));function jG({tools:e,toolChoice:t,structuredOutputs:r,strictJsonSchema:o}){e=e?.length?e:void 0;let n=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let i=[];for(let u of e)switch(u.type){case"function":i.push({type:"function",function:{name:u.name,description:u.description,parameters:u.inputSchema,strict:r?o:void 0}});break;default:n.push({type:"unsupported-tool",tool:u});break}if(t==null)return{tools:i,toolChoice:void 0,toolWarnings:n};let c=t.type;switch(c){case"auto":case"none":case"required":return{tools:i,toolChoice:c,toolWarnings:n};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:n};default:{let u=c;throw new Be({functionality:`tool choice type: ${u}`})}}}a(jG,"prepareChatTools");var DG=class{static{a(this,"OpenAIChatLanguageModel")}constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:c,stopSequences:u,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:f}){var g,h,v,x;let S=[],b=(g=await tt({provider:"openai",providerOptions:f,schema:NG}))!=null?g:{},w=(h=b.structuredOutputs)!=null?h:!0;n!=null&&S.push({type:"unsupported-setting",setting:"topK"}),l?.type==="json"&&l.schema!=null&&!w&&S.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:P,warnings:B}=CG({prompt:e,systemMessageMode:UG(this.modelId)});S.push(...B);let V=(v=b.strictJsonSchema)!=null?v:!1,C={model:this.modelId,logit_bias:b.logitBias,logprobs:b.logprobs===!0||typeof b.logprobs=="number"?!0:void 0,top_logprobs:typeof b.logprobs=="number"?b.logprobs:typeof b.logprobs=="boolean"&&b.logprobs?0:void 0,user:b.user,parallel_tool_calls:b.parallelToolCalls,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:c,response_format:l?.type==="json"?w&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,strict:V,name:(x=l.name)!=null?x:"response",description:l.description}}:{type:"json_object"}:void 0,stop:u,seed:d,verbosity:b.textVerbosity,max_completion_tokens:b.maxCompletionTokens,store:b.store,metadata:b.metadata,prediction:b.prediction,reasoning_effort:b.reasoningEffort,service_tier:b.serviceTier,prompt_cache_key:b.promptCacheKey,prompt_cache_retention:b.promptCacheRetention,safety_identifier:b.safetyIdentifier,messages:P};eO(this.modelId)?(C.temperature!=null&&(C.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),C.top_p!=null&&(C.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),C.frequency_penalty!=null&&(C.frequency_penalty=void 0,S.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),C.presence_penalty!=null&&(C.presence_penalty=void 0,S.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),C.logit_bias!=null&&(C.logit_bias=void 0,S.push({type:"other",message:"logitBias is not supported for reasoning models"})),C.logprobs!=null&&(C.logprobs=void 0,S.push({type:"other",message:"logprobs is not supported for reasoning models"})),C.top_logprobs!=null&&(C.top_logprobs=void 0,S.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),C.max_tokens!=null&&(C.max_completion_tokens==null&&(C.max_completion_tokens=C.max_tokens),C.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&C.temperature!=null&&(C.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),b.serviceTier==="flex"&&!zG(this.modelId)&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),C.service_tier=void 0),b.serviceTier==="priority"&&!MG(this.modelId)&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),C.service_tier=void 0);let{tools:L,toolChoice:M,toolWarnings:D}=jG({tools:p,toolChoice:m,structuredOutputs:w,strictJsonSchema:V});return{args:{...C,tools:L,tool_choice:M},warnings:[...S,...D]}}async doGenerate(e){var t,r,o,n,i,c,u,l,d,p,m,f,g,h;let{args:v,warnings:x}=await this.getArgs(e),{responseHeaders:S,value:b,rawValue:w}=await at({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:v,failedResponseHandler:fn,successfulResponseHandler:Pt(OG),abortSignal:e.abortSignal,fetch:this.config.fetch}),P=b.choices[0],B=[],V=P.message.content;V!=null&&V.length>0&&B.push({type:"text",text:V});for(let D of(t=P.message.tool_calls)!=null?t:[])B.push({type:"tool-call",toolCallId:(r=D.id)!=null?r:Nt(),toolName:D.function.name,input:D.function.arguments});for(let D of(o=P.message.annotations)!=null?o:[])B.push({type:"source",sourceType:"url",id:Nt(),url:D.url,title:D.title});let C=(n=b.usage)==null?void 0:n.completion_tokens_details,L=(i=b.usage)==null?void 0:i.prompt_tokens_details,M={openai:{}};return C?.accepted_prediction_tokens!=null&&(M.openai.acceptedPredictionTokens=C?.accepted_prediction_tokens),C?.rejected_prediction_tokens!=null&&(M.openai.rejectedPredictionTokens=C?.rejected_prediction_tokens),((c=P.logprobs)==null?void 0:c.content)!=null&&(M.openai.logprobs=P.logprobs.content),{content:B,finishReason:ZC(P.finish_reason),usage:{inputTokens:(l=(u=b.usage)==null?void 0:u.prompt_tokens)!=null?l:void 0,outputTokens:(p=(d=b.usage)==null?void 0:d.completion_tokens)!=null?p:void 0,totalTokens:(f=(m=b.usage)==null?void 0:m.total_tokens)!=null?f:void 0,reasoningTokens:(g=C?.reasoning_tokens)!=null?g:void 0,cachedInputTokens:(h=L?.cached_tokens)!=null?h:void 0},request:{body:v},response:{...Dw(b),headers:S,body:w},warnings:x,providerMetadata:M}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await at({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:o,failedResponseHandler:fn,successfulResponseHandler:pn(RG),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[],u="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!1,p=!1,m={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(f){f.enqueue({type:"stream-start",warnings:r})},transform(f,g){var h,v,x,S,b,w,P,B,V,C,L,M,D,U,de,J,re,ve,ie,fe,ze,wt,We,zt;if(e.includeRawChunks&&g.enqueue({type:"raw",rawValue:f.rawValue}),!f.success){u="error",g.enqueue({type:"error",error:f.error});return}let z=f.value;if("error"in z){u="error",g.enqueue({type:"error",error:z.error});return}if(!d){let E=Dw(z);Object.values(E).some(Boolean)&&(d=!0,g.enqueue({type:"response-metadata",...Dw(z)}))}z.usage!=null&&(l.inputTokens=(h=z.usage.prompt_tokens)!=null?h:void 0,l.outputTokens=(v=z.usage.completion_tokens)!=null?v:void 0,l.totalTokens=(x=z.usage.total_tokens)!=null?x:void 0,l.reasoningTokens=(b=(S=z.usage.completion_tokens_details)==null?void 0:S.reasoning_tokens)!=null?b:void 0,l.cachedInputTokens=(P=(w=z.usage.prompt_tokens_details)==null?void 0:w.cached_tokens)!=null?P:void 0,((B=z.usage.completion_tokens_details)==null?void 0:B.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=(V=z.usage.completion_tokens_details)==null?void 0:V.accepted_prediction_tokens),((C=z.usage.completion_tokens_details)==null?void 0:C.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=(L=z.usage.completion_tokens_details)==null?void 0:L.rejected_prediction_tokens));let be=z.choices[0];if(be?.finish_reason!=null&&(u=ZC(be.finish_reason)),((M=be?.logprobs)==null?void 0:M.content)!=null&&(m.openai.logprobs=be.logprobs.content),be?.delta==null)return;let se=be.delta;if(se.content!=null&&(p||(g.enqueue({type:"text-start",id:"0"}),p=!0),g.enqueue({type:"text-delta",id:"0",delta:se.content})),se.tool_calls!=null)for(let E of se.tool_calls){let Ae=E.index;if(c[Ae]==null){if(E.type!=="function")throw new wp({data:E,message:"Expected 'function' type."});if(E.id==null)throw new wp({data:E,message:"Expected 'id' to be a string."});if(((D=E.function)==null?void 0:D.name)==null)throw new wp({data:E,message:"Expected 'function.name' to be a string."});g.enqueue({type:"tool-input-start",id:E.id,toolName:E.function.name}),c[Ae]={id:E.id,type:"function",function:{name:E.function.name,arguments:(U=E.function.arguments)!=null?U:""},hasFinished:!1};let St=c[Ae];((de=St.function)==null?void 0:de.name)!=null&&((J=St.function)==null?void 0:J.arguments)!=null&&(St.function.arguments.length>0&&g.enqueue({type:"tool-input-delta",id:St.id,delta:St.function.arguments}),Ow(St.function.arguments)&&(g.enqueue({type:"tool-input-end",id:St.id}),g.enqueue({type:"tool-call",toolCallId:(re=St.id)!=null?re:Nt(),toolName:St.function.name,input:St.function.arguments}),St.hasFinished=!0));continue}let ct=c[Ae];ct.hasFinished||(((ve=E.function)==null?void 0:ve.arguments)!=null&&(ct.function.arguments+=(fe=(ie=E.function)==null?void 0:ie.arguments)!=null?fe:""),g.enqueue({type:"tool-input-delta",id:ct.id,delta:(ze=E.function.arguments)!=null?ze:""}),((wt=ct.function)==null?void 0:wt.name)!=null&&((We=ct.function)==null?void 0:We.arguments)!=null&&Ow(ct.function.arguments)&&(g.enqueue({type:"tool-input-end",id:ct.id}),g.enqueue({type:"tool-call",toolCallId:(zt=ct.id)!=null?zt:Nt(),toolName:ct.function.name,input:ct.function.arguments}),ct.hasFinished=!0))}if(se.annotations!=null)for(let E of se.annotations)g.enqueue({type:"source",sourceType:"url",id:Nt(),url:E.url,title:E.title})},flush(f){p&&f.enqueue({type:"text-end",id:"0"}),f.enqueue({type:"finish",finishReason:u,usage:l,...m!=null?{providerMetadata:m}:{}})}})),request:{body:o},response:{headers:n}}}};function eO(e){return(e.startsWith("o")||e.startsWith("gpt-5"))&&!e.startsWith("gpt-5-chat")}a(eO,"isReasoningModel");function zG(e){return e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat")}a(zG,"supportsFlexProcessing");function MG(e){return e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini")}a(MG,"supportsPriorityProcessing");function UG(e){var t,r;return eO(e)?(r=(t=qG[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}a(UG,"getSystemMessageMode");var qG={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function LG({prompt:e,user:t="user",assistant:r="assistant"}){let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:n,content:i}of e)switch(n){case"system":throw new qA({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let c=i.map(u=>{switch(u.type){case"text":return u.text}}).filter(Boolean).join("");o+=`${t}:
${c}

`;break}case"assistant":{let c=i.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new Be({functionality:"tool-call messages"})}}).join("");o+=`${r}:
${c}

`;break}case"tool":throw new Be({functionality:"tool messages"});default:{let c=n;throw new Error(`Unsupported role: ${c}`)}}return o+=`${r}:
`,{prompt:o,stopSequences:[`
${t}:`]}}a(LG,"convertToOpenAICompletionPrompt");function HC({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}a(HC,"getResponseMetadata2");function GC(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}a(GC,"mapOpenAIFinishReason2");var FG=et(()=>F(s.object({id:s.string().nullish(),created:s.number().nullish(),model:s.string().nullish(),choices:s.array(s.object({text:s.string(),finish_reason:s.string(),logprobs:s.object({tokens:s.array(s.string()),token_logprobs:s.array(s.number()),top_logprobs:s.array(s.record(s.string(),s.number())).nullish()}).nullish()})),usage:s.object({prompt_tokens:s.number(),completion_tokens:s.number(),total_tokens:s.number()}).nullish()}))),BG=et(()=>F(s.union([s.object({id:s.string().nullish(),created:s.number().nullish(),model:s.string().nullish(),choices:s.array(s.object({text:s.string(),finish_reason:s.string().nullish(),index:s.number(),logprobs:s.object({tokens:s.array(s.string()),token_logprobs:s.array(s.number()),top_logprobs:s.array(s.record(s.string(),s.number())).nullish()}).nullish()})),usage:s.object({prompt_tokens:s.number(),completion_tokens:s.number(),total_tokens:s.number()}).nullish()}),zw]))),KC=et(()=>F(s.object({echo:s.boolean().optional(),logitBias:s.record(s.string(),s.number()).optional(),suffix:s.string().optional(),user:s.string().optional(),logprobs:s.union([s.boolean(),s.number()]).optional()}))),VG=class{static{a(this,"OpenAICompletionLanguageModel")}constructor(e,t){this.specificationVersion="v2",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:c,stopSequences:u,responseFormat:l,tools:d,toolChoice:p,seed:m,providerOptions:f}){let g=[],h={...await tt({provider:"openai",providerOptions:f,schema:KC}),...await tt({provider:this.providerOptionsName,providerOptions:f,schema:KC})};n!=null&&g.push({type:"unsupported-setting",setting:"topK"}),d?.length&&g.push({type:"unsupported-setting",setting:"tools"}),p!=null&&g.push({type:"unsupported-setting",setting:"toolChoice"}),l!=null&&l.type!=="text"&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:v,stopSequences:x}=LG({prompt:e}),S=[...x??[],...u??[]];return{args:{model:this.modelId,echo:h.echo,logit_bias:h.logitBias,logprobs:h?.logprobs===!0?0:h?.logprobs===!1?void 0:h?.logprobs,suffix:h.suffix,user:h.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:c,seed:m,prompt:v,stop:S.length>0?S:void 0},warnings:g}}async doGenerate(e){var t,r,o;let{args:n,warnings:i}=await this.getArgs(e),{responseHeaders:c,value:u,rawValue:l}=await at({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:n,failedResponseHandler:fn,successfulResponseHandler:Pt(FG),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=u.choices[0],p={openai:{}};return d.logprobs!=null&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:(t=u.usage)==null?void 0:t.prompt_tokens,outputTokens:(r=u.usage)==null?void 0:r.completion_tokens,totalTokens:(o=u.usage)==null?void 0:o.total_tokens},finishReason:GC(d.finish_reason),request:{body:n},response:{...HC(u),headers:c,body:l},providerMetadata:p,warnings:i}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await at({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:o,failedResponseHandler:fn,successfulResponseHandler:pn(BG),abortSignal:e.abortSignal,fetch:this.config.fetch}),c="unknown",u={openai:{}},l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,m){if(e.includeRawChunks&&m.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){c="error",m.enqueue({type:"error",error:p.error});return}let f=p.value;if("error"in f){c="error",m.enqueue({type:"error",error:f.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...HC(f)}),m.enqueue({type:"text-start",id:"0"})),f.usage!=null&&(l.inputTokens=f.usage.prompt_tokens,l.outputTokens=f.usage.completion_tokens,l.totalTokens=f.usage.total_tokens);let g=f.choices[0];g?.finish_reason!=null&&(c=GC(g.finish_reason)),g?.logprobs!=null&&(u.openai.logprobs=g.logprobs),g?.text!=null&&g.text.length>0&&m.enqueue({type:"text-delta",id:"0",delta:g.text})},flush(p){d||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:c,providerMetadata:u,usage:l})}})),request:{body:o},response:{headers:n}}}},ZG=et(()=>F(s.object({dimensions:s.number().optional(),user:s.string().optional()}))),HG=et(()=>F(s.object({data:s.array(s.object({embedding:s.array(s.number())})),usage:s.object({prompt_tokens:s.number()}).nullish()}))),GG=class{static{a(this,"OpenAIEmbeddingModel")}constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n;if(e.length>this.maxEmbeddingsPerCall)throw new Sp({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=(n=await tt({provider:"openai",providerOptions:o,schema:ZG}))!=null?n:{},{responseHeaders:c,value:u,rawValue:l}=await at({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:it(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:fn,successfulResponseHandler:Pt(HG),abortSignal:r,fetch:this.config.fetch});return{embeddings:u.data.map(d=>d.embedding),usage:u.usage?{tokens:u.usage.prompt_tokens}:void 0,response:{headers:c,body:l}}}},KG=et(()=>F(s.object({data:s.array(s.object({b64_json:s.string(),revised_prompt:s.string().nullish()}))}))),JG={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},WG=new Set(["gpt-image-1","gpt-image-1-mini"]),QG=class{static{a(this,"OpenAIImageModel")}constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=JG[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,providerOptions:i,headers:c,abortSignal:u}){var l,d,p,m;let f=[];o!=null&&f.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),n!=null&&f.push({type:"unsupported-setting",setting:"seed"});let g=(p=(d=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:d.call(l))!=null?p:new Date,{value:h,responseHeaders:v}=await at({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:it(this.config.headers(),c),body:{model:this.modelId,prompt:e,n:t,size:r,...(m=i.openai)!=null?m:{},...WG.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:fn,successfulResponseHandler:Pt(KG),abortSignal:u,fetch:this.config.fetch});return{images:h.data.map(x=>x.b64_json),warnings:f,response:{timestamp:g,modelId:this.modelId,headers:v},providerMetadata:{openai:{images:h.data.map(x=>x.revised_prompt?{revisedPrompt:x.revised_prompt}:null)}}}}},XG=ee(()=>F(s.object({code:s.string().nullish(),containerId:s.string()}))),YG=ee(()=>F(s.object({outputs:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("logs"),logs:s.string()}),s.object({type:s.literal("image"),url:s.string()})])).nullish()}))),e9=ee(()=>F(s.object({container:s.union([s.string(),s.object({fileIds:s.array(s.string()).optional()})]).optional()}))),t9=vt({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:XG,outputSchema:YG}),r9=a((e={})=>t9(e),"codeInterpreter"),tO=s.object({key:s.string(),type:s.enum(["eq","ne","gt","gte","lt","lte"]),value:s.union([s.string(),s.number(),s.boolean()])}),rO=s.object({type:s.enum(["and","or"]),filters:s.array(s.union([tO,s.lazy(()=>rO)]))}),n9=ee(()=>F(s.object({vectorStoreIds:s.array(s.string()),maxNumResults:s.number().optional(),ranking:s.object({ranker:s.string().optional(),scoreThreshold:s.number().optional()}).optional(),filters:s.union([tO,rO]).optional()}))),o9=ee(()=>F(s.object({queries:s.array(s.string()),results:s.array(s.object({attributes:s.record(s.string(),s.unknown()),fileId:s.string(),filename:s.string(),score:s.number(),text:s.string()})).nullable()}))),i9=vt({id:"openai.file_search",name:"file_search",inputSchema:s.object({}),outputSchema:o9}),a9=ee(()=>F(s.object({background:s.enum(["auto","opaque","transparent"]).optional(),inputFidelity:s.enum(["low","high"]).optional(),inputImageMask:s.object({fileId:s.string().optional(),imageUrl:s.string().optional()}).optional(),model:s.string().optional(),moderation:s.enum(["auto"]).optional(),outputCompression:s.number().int().min(0).max(100).optional(),outputFormat:s.enum(["png","jpeg","webp"]).optional(),partialImages:s.number().int().min(0).max(3).optional(),quality:s.enum(["auto","low","medium","high"]).optional(),size:s.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),s9=ee(()=>F(s.object({}))),c9=ee(()=>F(s.object({result:s.string()}))),u9=vt({id:"openai.image_generation",name:"image_generation",inputSchema:s9,outputSchema:c9}),l9=a((e={})=>u9(e),"imageGeneration"),nO=ee(()=>F(s.object({action:s.object({type:s.literal("exec"),command:s.array(s.string()),timeoutMs:s.number().optional(),user:s.string().optional(),workingDirectory:s.string().optional(),env:s.record(s.string(),s.string()).optional()})}))),oO=ee(()=>F(s.object({output:s.string()}))),d9=vt({id:"openai.local_shell",name:"local_shell",inputSchema:nO,outputSchema:oO}),p9=ee(()=>F(s.object({externalWebAccess:s.boolean().optional(),filters:s.object({allowedDomains:s.array(s.string()).optional()}).optional(),searchContextSize:s.enum(["low","medium","high"]).optional(),userLocation:s.object({type:s.literal("approximate"),country:s.string().optional(),city:s.string().optional(),region:s.string().optional(),timezone:s.string().optional()}).optional()}))),m9=ee(()=>F(s.object({}))),f9=ee(()=>F(s.object({action:s.discriminatedUnion("type",[s.object({type:s.literal("search"),query:s.string().optional()}),s.object({type:s.literal("openPage"),url:s.string()}),s.object({type:s.literal("find"),url:s.string(),pattern:s.string()})]),sources:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("url"),url:s.string()}),s.object({type:s.literal("api"),name:s.string()})])).optional()}))),h9=vt({id:"openai.web_search",name:"web_search",inputSchema:m9,outputSchema:f9}),g9=a((e={})=>h9(e),"webSearch"),y9=ee(()=>F(s.object({searchContextSize:s.enum(["low","medium","high"]).optional(),userLocation:s.object({type:s.literal("approximate"),country:s.string().optional(),city:s.string().optional(),region:s.string().optional(),timezone:s.string().optional()}).optional()}))),v9=ee(()=>F(s.object({}))),_9=ee(()=>F(s.object({action:s.discriminatedUnion("type",[s.object({type:s.literal("search"),query:s.string().optional()}),s.object({type:s.literal("openPage"),url:s.string()}),s.object({type:s.literal("find"),url:s.string(),pattern:s.string()})])}))),b9=vt({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:v9,outputSchema:_9}),x9={codeInterpreter:r9,fileSearch:i9,imageGeneration:l9,localShell:d9,webSearchPreview:b9,webSearch:g9};function JC(e,t){return t?t.some(r=>e.startsWith(r)):!1}a(JC,"isFileId");async function w9({prompt:e,systemMessageMode:t,fileIdPrefixes:r,store:o,hasLocalShellTool:n=!1}){var i,c,u,l;let d=[],p=[];for(let{role:m,content:f}of e)switch(m){case"system":{switch(t){case"system":{d.push({role:"system",content:f});break}case"developer":{d.push({role:"developer",content:f});break}case"remove":{p.push({type:"other",message:"system messages are removed for this model"});break}default:{let g=t;throw new Error(`Unsupported system message mode: ${g}`)}}break}case"user":{d.push({role:"user",content:f.map((g,h)=>{var v,x,S;switch(g.type){case"text":return{type:"input_text",text:g.text};case"file":if(g.mediaType.startsWith("image/")){let b=g.mediaType==="image/*"?"image/jpeg":g.mediaType;return{type:"input_image",...g.data instanceof URL?{image_url:g.data.toString()}:typeof g.data=="string"&&JC(g.data,r)?{file_id:g.data}:{image_url:`data:${b};base64,${gr(g.data)}`},detail:(x=(v=g.providerOptions)==null?void 0:v.openai)==null?void 0:x.imageDetail}}else{if(g.mediaType==="application/pdf")return g.data instanceof URL?{type:"input_file",file_url:g.data.toString()}:{type:"input_file",...typeof g.data=="string"&&JC(g.data,r)?{file_id:g.data}:{filename:(S=g.filename)!=null?S:`part-${h}.pdf`,file_data:`data:application/pdf;base64,${gr(g.data)}`}};throw new Be({functionality:`file part media type ${g.mediaType}`})}}})});break}case"assistant":{let g={},h={};for(let v of f)switch(v.type){case"text":{let x=(c=(i=v.providerOptions)==null?void 0:i.openai)==null?void 0:c.itemId;if(o&&x!=null){d.push({type:"item_reference",id:x});break}d.push({role:"assistant",content:[{type:"output_text",text:v.text}],id:x});break}case"tool-call":{if(h[v.toolCallId]=v,v.providerExecuted)break;let x=(l=(u=v.providerOptions)==null?void 0:u.openai)==null?void 0:l.itemId;if(o&&x!=null){d.push({type:"item_reference",id:x});break}if(n&&v.toolName==="local_shell"){let S=await jt({value:v.input,schema:nO});d.push({type:"local_shell_call",call_id:v.toolCallId,id:x,action:{type:"exec",command:S.action.command,timeout_ms:S.action.timeoutMs,user:S.action.user,working_directory:S.action.workingDirectory,env:S.action.env}});break}d.push({type:"function_call",call_id:v.toolCallId,name:v.toolName,arguments:JSON.stringify(v.input),id:x});break}case"tool-result":{o?d.push({type:"item_reference",id:v.toolCallId}):p.push({type:"other",message:`Results for OpenAI tool ${v.toolName} are not sent to the API when store is false`});break}case"reasoning":{let x=await tt({provider:"openai",providerOptions:v.providerOptions,schema:S9}),S=x?.itemId;if(S!=null){let b=g[S];if(o)b===void 0&&(d.push({type:"item_reference",id:S}),g[S]={type:"reasoning",id:S,summary:[]});else{let w=[];v.text.length>0?w.push({type:"summary_text",text:v.text}):b!==void 0&&p.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(v)}.`}),b===void 0?(g[S]={type:"reasoning",id:S,encrypted_content:x?.reasoningEncryptedContent,summary:w},d.push(g[S])):(b.summary.push(...w),x?.reasoningEncryptedContent!=null&&(b.encrypted_content=x.reasoningEncryptedContent))}}else p.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(v)}.`});break}}break}case"tool":{for(let g of f){let h=g.output;if(n&&g.toolName==="local_shell"&&h.type==="json"){let x=await jt({value:h.value,schema:oO});d.push({type:"local_shell_call_output",call_id:g.toolCallId,output:x.output});break}let v;switch(h.type){case"text":case"error-text":v=h.value;break;case"json":case"error-json":v=JSON.stringify(h.value);break;case"content":v=h.value.map(x=>{switch(x.type){case"text":return{type:"input_text",text:x.text};case"media":return x.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${x.mediaType};base64,${x.data}`}:{type:"input_file",filename:"data",file_data:`data:${x.mediaType};base64,${x.data}`}}});break}d.push({type:"function_call_output",call_id:g.toolCallId,output:v})}break}default:{let g=m;throw new Error(`Unsupported role: ${g}`)}}return{input:d,warnings:p}}a(w9,"convertToOpenAIResponsesInput");var S9=s.object({itemId:s.string().nullish(),reasoningEncryptedContent:s.string().nullish()});function WC({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}a(WC,"mapOpenAIResponseFinishReason");var T9=et(()=>F(s.union([s.object({type:s.literal("response.output_text.delta"),item_id:s.string(),delta:s.string(),logprobs:s.array(s.object({token:s.string(),logprob:s.number(),top_logprobs:s.array(s.object({token:s.string(),logprob:s.number()}))})).nullish()}),s.object({type:s.enum(["response.completed","response.incomplete"]),response:s.object({incomplete_details:s.object({reason:s.string()}).nullish(),usage:s.object({input_tokens:s.number(),input_tokens_details:s.object({cached_tokens:s.number().nullish()}).nullish(),output_tokens:s.number(),output_tokens_details:s.object({reasoning_tokens:s.number().nullish()}).nullish()}),service_tier:s.string().nullish()})}),s.object({type:s.literal("response.created"),response:s.object({id:s.string(),created_at:s.number(),model:s.string(),service_tier:s.string().nullish()})}),s.object({type:s.literal("response.output_item.added"),output_index:s.number(),item:s.discriminatedUnion("type",[s.object({type:s.literal("message"),id:s.string()}),s.object({type:s.literal("reasoning"),id:s.string(),encrypted_content:s.string().nullish()}),s.object({type:s.literal("function_call"),id:s.string(),call_id:s.string(),name:s.string(),arguments:s.string()}),s.object({type:s.literal("web_search_call"),id:s.string(),status:s.string()}),s.object({type:s.literal("computer_call"),id:s.string(),status:s.string()}),s.object({type:s.literal("file_search_call"),id:s.string()}),s.object({type:s.literal("image_generation_call"),id:s.string()}),s.object({type:s.literal("code_interpreter_call"),id:s.string(),container_id:s.string(),code:s.string().nullable(),outputs:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("logs"),logs:s.string()}),s.object({type:s.literal("image"),url:s.string()})])).nullable(),status:s.string()})])}),s.object({type:s.literal("response.output_item.done"),output_index:s.number(),item:s.discriminatedUnion("type",[s.object({type:s.literal("message"),id:s.string()}),s.object({type:s.literal("reasoning"),id:s.string(),encrypted_content:s.string().nullish()}),s.object({type:s.literal("function_call"),id:s.string(),call_id:s.string(),name:s.string(),arguments:s.string(),status:s.literal("completed")}),s.object({type:s.literal("code_interpreter_call"),id:s.string(),code:s.string().nullable(),container_id:s.string(),outputs:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("logs"),logs:s.string()}),s.object({type:s.literal("image"),url:s.string()})])).nullable()}),s.object({type:s.literal("image_generation_call"),id:s.string(),result:s.string()}),s.object({type:s.literal("web_search_call"),id:s.string(),status:s.string(),action:s.discriminatedUnion("type",[s.object({type:s.literal("search"),query:s.string().nullish(),sources:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("url"),url:s.string()}),s.object({type:s.literal("api"),name:s.string()})])).nullish()}),s.object({type:s.literal("open_page"),url:s.string()}),s.object({type:s.literal("find"),url:s.string(),pattern:s.string()})])}),s.object({type:s.literal("file_search_call"),id:s.string(),queries:s.array(s.string()),results:s.array(s.object({attributes:s.record(s.string(),s.unknown()),file_id:s.string(),filename:s.string(),score:s.number(),text:s.string()})).nullish()}),s.object({type:s.literal("local_shell_call"),id:s.string(),call_id:s.string(),action:s.object({type:s.literal("exec"),command:s.array(s.string()),timeout_ms:s.number().optional(),user:s.string().optional(),working_directory:s.string().optional(),env:s.record(s.string(),s.string()).optional()})}),s.object({type:s.literal("computer_call"),id:s.string(),status:s.literal("completed")})])}),s.object({type:s.literal("response.function_call_arguments.delta"),item_id:s.string(),output_index:s.number(),delta:s.string()}),s.object({type:s.literal("response.image_generation_call.partial_image"),item_id:s.string(),output_index:s.number(),partial_image_b64:s.string()}),s.object({type:s.literal("response.code_interpreter_call_code.delta"),item_id:s.string(),output_index:s.number(),delta:s.string()}),s.object({type:s.literal("response.code_interpreter_call_code.done"),item_id:s.string(),output_index:s.number(),code:s.string()}),s.object({type:s.literal("response.output_text.annotation.added"),annotation:s.discriminatedUnion("type",[s.object({type:s.literal("url_citation"),start_index:s.number(),end_index:s.number(),url:s.string(),title:s.string()}),s.object({type:s.literal("file_citation"),file_id:s.string(),filename:s.string().nullish(),index:s.number().nullish(),start_index:s.number().nullish(),end_index:s.number().nullish(),quote:s.string().nullish()})])}),s.object({type:s.literal("response.reasoning_summary_part.added"),item_id:s.string(),summary_index:s.number()}),s.object({type:s.literal("response.reasoning_summary_text.delta"),item_id:s.string(),summary_index:s.number(),delta:s.string()}),s.object({type:s.literal("response.reasoning_summary_part.done"),item_id:s.string(),summary_index:s.number()}),s.object({type:s.literal("error"),sequence_number:s.number(),error:s.object({type:s.string(),code:s.string(),message:s.string(),param:s.string().nullish()})}),s.object({type:s.string()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),I9=et(()=>F(s.object({id:s.string().optional(),created_at:s.number().optional(),error:s.object({message:s.string(),type:s.string(),param:s.string().nullish(),code:s.string()}).nullish(),model:s.string().optional(),output:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("message"),role:s.literal("assistant"),id:s.string(),content:s.array(s.object({type:s.literal("output_text"),text:s.string(),logprobs:s.array(s.object({token:s.string(),logprob:s.number(),top_logprobs:s.array(s.object({token:s.string(),logprob:s.number()}))})).nullish(),annotations:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("url_citation"),start_index:s.number(),end_index:s.number(),url:s.string(),title:s.string()}),s.object({type:s.literal("file_citation"),file_id:s.string(),filename:s.string().nullish(),index:s.number().nullish(),start_index:s.number().nullish(),end_index:s.number().nullish(),quote:s.string().nullish()}),s.object({type:s.literal("container_file_citation"),container_id:s.string(),file_id:s.string(),filename:s.string().nullish(),start_index:s.number().nullish(),end_index:s.number().nullish(),index:s.number().nullish()}),s.object({type:s.literal("file_path"),file_id:s.string(),index:s.number().nullish()})]))}))}),s.object({type:s.literal("web_search_call"),id:s.string(),status:s.string(),action:s.discriminatedUnion("type",[s.object({type:s.literal("search"),query:s.string().nullish(),sources:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("url"),url:s.string()}),s.object({type:s.literal("api"),name:s.string()})])).nullish()}),s.object({type:s.literal("open_page"),url:s.string()}),s.object({type:s.literal("find"),url:s.string(),pattern:s.string()})])}),s.object({type:s.literal("file_search_call"),id:s.string(),queries:s.array(s.string()),results:s.array(s.object({attributes:s.record(s.string(),s.union([s.string(),s.number(),s.boolean()])),file_id:s.string(),filename:s.string(),score:s.number(),text:s.string()})).nullish()}),s.object({type:s.literal("code_interpreter_call"),id:s.string(),code:s.string().nullable(),container_id:s.string(),outputs:s.array(s.discriminatedUnion("type",[s.object({type:s.literal("logs"),logs:s.string()}),s.object({type:s.literal("image"),url:s.string()})])).nullable()}),s.object({type:s.literal("image_generation_call"),id:s.string(),result:s.string()}),s.object({type:s.literal("local_shell_call"),id:s.string(),call_id:s.string(),action:s.object({type:s.literal("exec"),command:s.array(s.string()),timeout_ms:s.number().optional(),user:s.string().optional(),working_directory:s.string().optional(),env:s.record(s.string(),s.string()).optional()})}),s.object({type:s.literal("function_call"),call_id:s.string(),name:s.string(),arguments:s.string(),id:s.string()}),s.object({type:s.literal("computer_call"),id:s.string(),status:s.string().optional()}),s.object({type:s.literal("reasoning"),id:s.string(),encrypted_content:s.string().nullish(),summary:s.array(s.object({type:s.literal("summary_text"),text:s.string()}))})])).optional(),service_tier:s.string().nullish(),incomplete_details:s.object({reason:s.string()}).nullish(),usage:s.object({input_tokens:s.number(),input_tokens_details:s.object({cached_tokens:s.number().nullish()}).nullish(),output_tokens:s.number(),output_tokens_details:s.object({reasoning_tokens:s.number().nullish()}).nullish()}).optional()}))),iO=20,E9=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],OTe=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...E9],k9=et(()=>F(s.object({conversation:s.string().nullish(),include:s.array(s.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:s.string().nullish(),logprobs:s.union([s.boolean(),s.number().min(1).max(iO)]).optional(),maxToolCalls:s.number().nullish(),metadata:s.any().nullish(),parallelToolCalls:s.boolean().nullish(),previousResponseId:s.string().nullish(),promptCacheKey:s.string().nullish(),promptCacheRetention:s.enum(["in_memory","24h"]).nullish(),reasoningEffort:s.string().nullish(),reasoningSummary:s.string().nullish(),safetyIdentifier:s.string().nullish(),serviceTier:s.enum(["auto","flex","priority","default"]).nullish(),store:s.boolean().nullish(),strictJsonSchema:s.boolean().nullish(),textVerbosity:s.enum(["low","medium","high"]).nullish(),truncation:s.enum(["auto","disabled"]).nullish(),user:s.string().nullish()})));async function P9({tools:e,toolChoice:t,strictJsonSchema:r}){e=e?.length?e:void 0;let o=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let n=[];for(let c of e)switch(c.type){case"function":n.push({type:"function",name:c.name,description:c.description,parameters:c.inputSchema,strict:r});break;case"provider-defined":{switch(c.id){case"openai.file_search":{let u=await jt({value:c.args,schema:n9});n.push({type:"file_search",vector_store_ids:u.vectorStoreIds,max_num_results:u.maxNumResults,ranking_options:u.ranking?{ranker:u.ranking.ranker,score_threshold:u.ranking.scoreThreshold}:void 0,filters:u.filters});break}case"openai.local_shell":{n.push({type:"local_shell"});break}case"openai.web_search_preview":{let u=await jt({value:c.args,schema:y9});n.push({type:"web_search_preview",search_context_size:u.searchContextSize,user_location:u.userLocation});break}case"openai.web_search":{let u=await jt({value:c.args,schema:p9});n.push({type:"web_search",filters:u.filters!=null?{allowed_domains:u.filters.allowedDomains}:void 0,external_web_access:u.externalWebAccess,search_context_size:u.searchContextSize,user_location:u.userLocation});break}case"openai.code_interpreter":{let u=await jt({value:c.args,schema:e9});n.push({type:"code_interpreter",container:u.container==null?{type:"auto",file_ids:void 0}:typeof u.container=="string"?u.container:{type:"auto",file_ids:u.container.fileIds}});break}case"openai.image_generation":{let u=await jt({value:c.args,schema:a9});n.push({type:"image_generation",background:u.background,input_fidelity:u.inputFidelity,input_image_mask:u.inputImageMask?{file_id:u.inputImageMask.fileId,image_url:u.inputImageMask.imageUrl}:void 0,model:u.model,size:u.size,quality:u.quality,moderation:u.moderation,output_format:u.outputFormat,output_compression:u.outputCompression});break}}break}default:o.push({type:"unsupported-tool",tool:c});break}if(t==null)return{tools:n,toolChoice:void 0,toolWarnings:o};let i=t.type;switch(i){case"auto":case"none":case"required":return{tools:n,toolChoice:i,toolWarnings:o};case"tool":return{tools:n,toolChoice:t.toolName==="code_interpreter"||t.toolName==="file_search"||t.toolName==="image_generation"||t.toolName==="web_search_preview"||t.toolName==="web_search"?{type:t.toolName}:{type:"function",name:t.toolName},toolWarnings:o};default:{let c=i;throw new Be({functionality:`tool choice type: ${c}`})}}}a(P9,"prepareResponsesTools");var $9=class{static{a(this,"OpenAIResponsesLanguageModel")}constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:t,stopSequences:r,topP:o,topK:n,presencePenalty:i,frequencyPenalty:c,seed:u,prompt:l,providerOptions:d,tools:p,toolChoice:m,responseFormat:f}){var g,h,v,x;let S=[],b=U9(this.modelId);n!=null&&S.push({type:"unsupported-setting",setting:"topK"}),u!=null&&S.push({type:"unsupported-setting",setting:"seed"}),i!=null&&S.push({type:"unsupported-setting",setting:"presencePenalty"}),c!=null&&S.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&S.push({type:"unsupported-setting",setting:"stopSequences"});let w=await tt({provider:"openai",providerOptions:d,schema:k9});w?.conversation&&w?.previousResponseId&&S.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});let{input:P,warnings:B}=await w9({prompt:l,systemMessageMode:b.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(g=w?.store)!=null?g:!0,hasLocalShellTool:M("openai.local_shell")});S.push(...B);let V=(h=w?.strictJsonSchema)!=null?h:!1,C=w?.include;function L(fe){C==null?C=[fe]:C.includes(fe)||(C=[...C,fe])}a(L,"addInclude");function M(fe){return p?.find(ze=>ze.type==="provider-defined"&&ze.id===fe)!=null}a(M,"hasOpenAITool");let D=typeof w?.logprobs=="number"?w?.logprobs:w?.logprobs===!0?iO:void 0;D&&L("message.output_text.logprobs");let U=(v=p?.find(fe=>fe.type==="provider-defined"&&(fe.id==="openai.web_search"||fe.id==="openai.web_search_preview")))==null?void 0:v.name;U&&L("web_search_call.action.sources"),M("openai.code_interpreter")&&L("code_interpreter_call.outputs");let de=w?.store;de===!1&&b.isReasoningModel&&L("reasoning.encrypted_content");let J={model:this.modelId,input:P,temperature:t,top_p:o,max_output_tokens:e,...(f?.type==="json"||w?.textVerbosity)&&{text:{...f?.type==="json"&&{format:f.schema!=null?{type:"json_schema",strict:V,name:(x=f.name)!=null?x:"response",description:f.description,schema:f.schema}:{type:"json_object"}},...w?.textVerbosity&&{verbosity:w.textVerbosity}}},conversation:w?.conversation,max_tool_calls:w?.maxToolCalls,metadata:w?.metadata,parallel_tool_calls:w?.parallelToolCalls,previous_response_id:w?.previousResponseId,store:de,user:w?.user,instructions:w?.instructions,service_tier:w?.serviceTier,include:C,prompt_cache_key:w?.promptCacheKey,prompt_cache_retention:w?.promptCacheRetention,safety_identifier:w?.safetyIdentifier,top_logprobs:D,truncation:w?.truncation,...b.isReasoningModel&&(w?.reasoningEffort!=null||w?.reasoningSummary!=null)&&{reasoning:{...w?.reasoningEffort!=null&&{effort:w.reasoningEffort},...w?.reasoningSummary!=null&&{summary:w.reasoningSummary}}}};b.isReasoningModel?(J.temperature!=null&&(J.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),J.top_p!=null&&(J.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(w?.reasoningEffort!=null&&S.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),w?.reasoningSummary!=null&&S.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),w?.serviceTier==="flex"&&!b.supportsFlexProcessing&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete J.service_tier),w?.serviceTier==="priority"&&!b.supportsPriorityProcessing&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete J.service_tier);let{tools:re,toolChoice:ve,toolWarnings:ie}=await P9({tools:p,toolChoice:m,strictJsonSchema:V});return{webSearchToolName:U,args:{...J,tools:re,tool_choice:ve},warnings:[...S,...ie],store:de}}async doGenerate(e){var t,r,o,n,i,c,u,l,d,p,m,f,g,h,v,x,S,b,w;let{args:P,warnings:B,webSearchToolName:V}=await this.getArgs(e),C=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:L,value:M,rawValue:D}=await at({url:C,headers:it(this.config.headers(),e.headers),body:P,failedResponseHandler:fn,successfulResponseHandler:Pt(I9),abortSignal:e.abortSignal,fetch:this.config.fetch});if(M.error)throw new Ut({message:M.error.message,url:C,requestBodyValues:P,statusCode:400,responseHeaders:L,responseBody:D,isRetryable:!1});let U=[],de=[],J=!1;for(let ie of M.output)switch(ie.type){case"reasoning":{ie.summary.length===0&&ie.summary.push({type:"summary_text",text:""});for(let fe of ie.summary)U.push({type:"reasoning",text:fe.text,providerMetadata:{openai:{itemId:ie.id,reasoningEncryptedContent:(t=ie.encrypted_content)!=null?t:null}}});break}case"image_generation_call":{U.push({type:"tool-call",toolCallId:ie.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),U.push({type:"tool-result",toolCallId:ie.id,toolName:"image_generation",result:{result:ie.result},providerExecuted:!0});break}case"local_shell_call":{U.push({type:"tool-call",toolCallId:ie.call_id,toolName:"local_shell",input:JSON.stringify({action:ie.action}),providerMetadata:{openai:{itemId:ie.id}}});break}case"message":{for(let fe of ie.content){(o=(r=e.providerOptions)==null?void 0:r.openai)!=null&&o.logprobs&&fe.logprobs&&de.push(fe.logprobs),U.push({type:"text",text:fe.text,providerMetadata:{openai:{itemId:ie.id}}});for(let ze of fe.annotations)ze.type==="url_citation"?U.push({type:"source",sourceType:"url",id:(c=(i=(n=this.config).generateId)==null?void 0:i.call(n))!=null?c:Nt(),url:ze.url,title:ze.title}):ze.type==="file_citation"&&U.push({type:"source",sourceType:"document",id:(d=(l=(u=this.config).generateId)==null?void 0:l.call(u))!=null?d:Nt(),mediaType:"text/plain",title:(m=(p=ze.quote)!=null?p:ze.filename)!=null?m:"Document",filename:(f=ze.filename)!=null?f:ze.file_id,...ze.file_id?{providerMetadata:{openai:{fileId:ze.file_id}}}:{}})}break}case"function_call":{J=!0,U.push({type:"tool-call",toolCallId:ie.call_id,toolName:ie.name,input:ie.arguments,providerMetadata:{openai:{itemId:ie.id}}});break}case"web_search_call":{U.push({type:"tool-call",toolCallId:ie.id,toolName:V??"web_search",input:JSON.stringify({}),providerExecuted:!0}),U.push({type:"tool-result",toolCallId:ie.id,toolName:V??"web_search",result:XC(ie.action),providerExecuted:!0});break}case"computer_call":{U.push({type:"tool-call",toolCallId:ie.id,toolName:"computer_use",input:"",providerExecuted:!0}),U.push({type:"tool-result",toolCallId:ie.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:ie.status||"completed"},providerExecuted:!0});break}case"file_search_call":{U.push({type:"tool-call",toolCallId:ie.id,toolName:"file_search",input:"{}",providerExecuted:!0}),U.push({type:"tool-result",toolCallId:ie.id,toolName:"file_search",result:{queries:ie.queries,results:(h=(g=ie.results)==null?void 0:g.map(fe=>({attributes:fe.attributes,fileId:fe.file_id,filename:fe.filename,score:fe.score,text:fe.text})))!=null?h:null},providerExecuted:!0});break}case"code_interpreter_call":{U.push({type:"tool-call",toolCallId:ie.id,toolName:"code_interpreter",input:JSON.stringify({code:ie.code,containerId:ie.container_id}),providerExecuted:!0}),U.push({type:"tool-result",toolCallId:ie.id,toolName:"code_interpreter",result:{outputs:ie.outputs},providerExecuted:!0});break}}let re={openai:{...M.id!=null?{responseId:M.id}:{}}};de.length>0&&(re.openai.logprobs=de),typeof M.service_tier=="string"&&(re.openai.serviceTier=M.service_tier);let ve=M.usage;return{content:U,finishReason:WC({finishReason:(v=M.incomplete_details)==null?void 0:v.reason,hasFunctionCall:J}),usage:{inputTokens:ve.input_tokens,outputTokens:ve.output_tokens,totalTokens:ve.input_tokens+ve.output_tokens,reasoningTokens:(S=(x=ve.output_tokens_details)==null?void 0:x.reasoning_tokens)!=null?S:void 0,cachedInputTokens:(w=(b=ve.input_tokens_details)==null?void 0:b.cached_tokens)!=null?w:void 0},request:{body:P},response:{id:M.id,timestamp:new Date(M.created_at*1e3),modelId:M.model,headers:L,body:D},providerMetadata:re,warnings:B}}async doStream(e){let{args:t,warnings:r,webSearchToolName:o,store:n}=await this.getArgs(e),{responseHeaders:i,value:c}=await at({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:fn,successfulResponseHandler:pn(T9),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=this,l="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],m=null,f={},g=[],h=!1,v={},x;return{stream:c.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:r})},transform(S,b){var w,P,B,V,C,L,M,D,U,de,J,re,ve,ie,fe,ze,wt,We,zt,z,be,se;if(e.includeRawChunks&&b.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){l="error",b.enqueue({type:"error",error:S.error});return}let E=S.value;if(QC(E))E.item.type==="function_call"?(f[E.output_index]={toolName:E.item.name,toolCallId:E.item.call_id},b.enqueue({type:"tool-input-start",id:E.item.call_id,toolName:E.item.name})):E.item.type==="web_search_call"?(f[E.output_index]={toolName:o??"web_search",toolCallId:E.item.id},b.enqueue({type:"tool-input-start",id:E.item.id,toolName:o??"web_search",providerExecuted:!0}),b.enqueue({type:"tool-input-end",id:E.item.id}),b.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:o??"web_search",input:JSON.stringify({}),providerExecuted:!0})):E.item.type==="computer_call"?(f[E.output_index]={toolName:"computer_use",toolCallId:E.item.id},b.enqueue({type:"tool-input-start",id:E.item.id,toolName:"computer_use",providerExecuted:!0})):E.item.type==="code_interpreter_call"?(f[E.output_index]={toolName:"code_interpreter",toolCallId:E.item.id,codeInterpreter:{containerId:E.item.container_id}},b.enqueue({type:"tool-input-start",id:E.item.id,toolName:"code_interpreter",providerExecuted:!0}),b.enqueue({type:"tool-input-delta",id:E.item.id,delta:`{"containerId":"${E.item.container_id}","code":"`})):E.item.type==="file_search_call"?b.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):E.item.type==="image_generation_call"?b.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):E.item.type==="message"?(g.splice(0,g.length),b.enqueue({type:"text-start",id:E.item.id,providerMetadata:{openai:{itemId:E.item.id}}})):QC(E)&&E.item.type==="reasoning"&&(v[E.item.id]={encryptedContent:E.item.encrypted_content,summaryParts:{0:"active"}},b.enqueue({type:"reasoning-start",id:`${E.item.id}:0`,providerMetadata:{openai:{itemId:E.item.id,reasoningEncryptedContent:(w=E.item.encrypted_content)!=null?w:null}}}));else if(C9(E)){if(E.item.type==="message")b.enqueue({type:"text-end",id:E.item.id,providerMetadata:{openai:{itemId:E.item.id,...g.length>0&&{annotations:g}}}});else if(E.item.type==="function_call")f[E.output_index]=void 0,h=!0,b.enqueue({type:"tool-input-end",id:E.item.call_id}),b.enqueue({type:"tool-call",toolCallId:E.item.call_id,toolName:E.item.name,input:E.item.arguments,providerMetadata:{openai:{itemId:E.item.id}}});else if(E.item.type==="web_search_call")f[E.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:o??"web_search",result:XC(E.item.action),providerExecuted:!0});else if(E.item.type==="computer_call")f[E.output_index]=void 0,b.enqueue({type:"tool-input-end",id:E.item.id}),b.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),b.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:E.item.status||"completed"},providerExecuted:!0});else if(E.item.type==="file_search_call")f[E.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"file_search",result:{queries:E.item.queries,results:(B=(P=E.item.results)==null?void 0:P.map(Ae=>({attributes:Ae.attributes,fileId:Ae.file_id,filename:Ae.filename,score:Ae.score,text:Ae.text})))!=null?B:null},providerExecuted:!0});else if(E.item.type==="code_interpreter_call")f[E.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"code_interpreter",result:{outputs:E.item.outputs},providerExecuted:!0});else if(E.item.type==="image_generation_call")b.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"image_generation",result:{result:E.item.result},providerExecuted:!0});else if(E.item.type==="local_shell_call")f[E.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:E.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:E.item.action.command,timeoutMs:E.item.action.timeout_ms,user:E.item.action.user,workingDirectory:E.item.action.working_directory,env:E.item.action.env}}),providerMetadata:{openai:{itemId:E.item.id}}});else if(E.item.type==="reasoning"){let Ae=v[E.item.id],ct=Object.entries(Ae.summaryParts).filter(([St,In])=>In==="active"||In==="can-conclude").map(([St])=>St);for(let St of ct)b.enqueue({type:"reasoning-end",id:`${E.item.id}:${St}`,providerMetadata:{openai:{itemId:E.item.id,reasoningEncryptedContent:(V=E.item.encrypted_content)!=null?V:null}}});delete v[E.item.id]}}else if(N9(E)){let Ae=f[E.output_index];Ae!=null&&b.enqueue({type:"tool-input-delta",id:Ae.toolCallId,delta:E.delta})}else if(j9(E)){let Ae=f[E.output_index];Ae!=null&&b.enqueue({type:"tool-input-delta",id:Ae.toolCallId,delta:JSON.stringify(E.delta).slice(1,-1)})}else if(D9(E)){let Ae=f[E.output_index];Ae!=null&&(b.enqueue({type:"tool-input-delta",id:Ae.toolCallId,delta:'"}'}),b.enqueue({type:"tool-input-end",id:Ae.toolCallId}),b.enqueue({type:"tool-call",toolCallId:Ae.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:E.code,containerId:Ae.codeInterpreter.containerId}),providerExecuted:!0}))}else if(R9(E))m=E.response.id,b.enqueue({type:"response-metadata",id:E.response.id,timestamp:new Date(E.response.created_at*1e3),modelId:E.response.model});else if(A9(E))b.enqueue({type:"text-delta",id:E.item_id,delta:E.delta}),(L=(C=e.providerOptions)==null?void 0:C.openai)!=null&&L.logprobs&&E.logprobs&&p.push(E.logprobs);else if(E.type==="response.reasoning_summary_part.added"){if(E.summary_index>0){let Ae=v[E.item_id];Ae.summaryParts[E.summary_index]="active";for(let ct of Object.keys(Ae.summaryParts))Ae.summaryParts[ct]==="can-conclude"&&(b.enqueue({type:"reasoning-end",id:`${E.item_id}:${ct}`,providerMetadata:{openai:{itemId:E.item_id}}}),Ae.summaryParts[ct]="concluded");b.enqueue({type:"reasoning-start",id:`${E.item_id}:${E.summary_index}`,providerMetadata:{openai:{itemId:E.item_id,reasoningEncryptedContent:(D=(M=v[E.item_id])==null?void 0:M.encryptedContent)!=null?D:null}}})}}else E.type==="response.reasoning_summary_text.delta"?b.enqueue({type:"reasoning-delta",id:`${E.item_id}:${E.summary_index}`,delta:E.delta,providerMetadata:{openai:{itemId:E.item_id}}}):E.type==="response.reasoning_summary_part.done"?n?(b.enqueue({type:"reasoning-end",id:`${E.item_id}:${E.summary_index}`,providerMetadata:{openai:{itemId:E.item_id}}}),v[E.item_id].summaryParts[E.summary_index]="concluded"):v[E.item_id].summaryParts[E.summary_index]="can-conclude":O9(E)?(l=WC({finishReason:(U=E.response.incomplete_details)==null?void 0:U.reason,hasFunctionCall:h}),d.inputTokens=E.response.usage.input_tokens,d.outputTokens=E.response.usage.output_tokens,d.totalTokens=E.response.usage.input_tokens+E.response.usage.output_tokens,d.reasoningTokens=(J=(de=E.response.usage.output_tokens_details)==null?void 0:de.reasoning_tokens)!=null?J:void 0,d.cachedInputTokens=(ve=(re=E.response.usage.input_tokens_details)==null?void 0:re.cached_tokens)!=null?ve:void 0,typeof E.response.service_tier=="string"&&(x=E.response.service_tier)):z9(E)?(g.push(E.annotation),E.annotation.type==="url_citation"?b.enqueue({type:"source",sourceType:"url",id:(ze=(fe=(ie=u.config).generateId)==null?void 0:fe.call(ie))!=null?ze:Nt(),url:E.annotation.url,title:E.annotation.title}):E.annotation.type==="file_citation"&&b.enqueue({type:"source",sourceType:"document",id:(zt=(We=(wt=u.config).generateId)==null?void 0:We.call(wt))!=null?zt:Nt(),mediaType:"text/plain",title:(be=(z=E.annotation.quote)!=null?z:E.annotation.filename)!=null?be:"Document",filename:(se=E.annotation.filename)!=null?se:E.annotation.file_id,...E.annotation.file_id?{providerMetadata:{openai:{fileId:E.annotation.file_id}}}:{}})):M9(E)&&b.enqueue({type:"error",error:E})},flush(S){let b={openai:{responseId:m}};p.length>0&&(b.openai.logprobs=p),x!==void 0&&(b.openai.serviceTier=x),S.enqueue({type:"finish",finishReason:l,usage:d,providerMetadata:b})}})),request:{body:t},response:{headers:i}}}};function A9(e){return e.type==="response.output_text.delta"}a(A9,"isTextDeltaChunk");function C9(e){return e.type==="response.output_item.done"}a(C9,"isResponseOutputItemDoneChunk");function O9(e){return e.type==="response.completed"||e.type==="response.incomplete"}a(O9,"isResponseFinishedChunk");function R9(e){return e.type==="response.created"}a(R9,"isResponseCreatedChunk");function N9(e){return e.type==="response.function_call_arguments.delta"}a(N9,"isResponseFunctionCallArgumentsDeltaChunk");function j9(e){return e.type==="response.code_interpreter_call_code.delta"}a(j9,"isResponseCodeInterpreterCallCodeDeltaChunk");function D9(e){return e.type==="response.code_interpreter_call_code.done"}a(D9,"isResponseCodeInterpreterCallCodeDoneChunk");function QC(e){return e.type==="response.output_item.added"}a(QC,"isResponseOutputItemAddedChunk");function z9(e){return e.type==="response.output_text.annotation.added"}a(z9,"isResponseAnnotationAddedChunk");function M9(e){return e.type==="error"}a(M9,"isErrorChunk");function U9(e){let t=e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),r=e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini"),o={systemMessageMode:"system",supportsFlexProcessing:t,supportsPriorityProcessing:r};return e.startsWith("gpt-5-chat")?{...o,isReasoningModel:!1}:e.startsWith("o")||e.startsWith("gpt-5")||e.startsWith("codex-")||e.startsWith("computer-use")?{...o,isReasoningModel:!0,systemMessageMode:"developer"}:{...o,isReasoningModel:!1}}a(U9,"getResponsesModelConfig");function XC(e){var t;switch(e.type){case"search":return{action:{type:"search",query:(t=e.query)!=null?t:void 0},...e.sources!=null&&{sources:e.sources}};case"open_page":return{action:{type:"openPage",url:e.url}};case"find":return{action:{type:"find",url:e.url,pattern:e.pattern}}}}a(XC,"mapWebSearchOutput");var q9=et(()=>F(s.object({instructions:s.string().nullish(),speed:s.number().min(.25).max(4).default(1).nullish()}))),L9=class{static{a(this,"OpenAISpeechModel")}constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:e,voice:t="alloy",outputFormat:r="mp3",speed:o,instructions:n,language:i,providerOptions:c}){let u=[],l=await tt({provider:"openai",providerOptions:c,schema:q9}),d={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:o,instructions:n};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?d.response_format=r:u.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),l){let p={};for(let m in p){let f=p[m];f!==void 0&&(d[m]=f)}}return i&&u.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:d,warnings:u}}async doGenerate(e){var t,r,o;let n=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{requestBody:i,warnings:c}=await this.getArgs(e),{value:u,responseHeaders:l,rawValue:d}=await at({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),body:i,failedResponseHandler:fn,successfulResponseHandler:wC(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:u,warnings:c,request:{body:JSON.stringify(i)},response:{timestamp:n,modelId:this.modelId,headers:l,body:d}}}},F9=et(()=>F(s.object({text:s.string(),language:s.string().nullish(),duration:s.number().nullish(),words:s.array(s.object({word:s.string(),start:s.number(),end:s.number()})).nullish(),segments:s.array(s.object({id:s.number(),seek:s.number(),start:s.number(),end:s.number(),text:s.string(),tokens:s.array(s.number()),temperature:s.number(),avg_logprob:s.number(),compression_ratio:s.number(),no_speech_prob:s.number()})).nullish()}))),B9=et(()=>F(s.object({include:s.array(s.string()).optional(),language:s.string().optional(),prompt:s.string().optional(),temperature:s.number().min(0).max(1).default(0).optional(),timestampGranularities:s.array(s.enum(["word","segment"])).default(["segment"]).optional()}))),YC={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},V9=class{static{a(this,"OpenAITranscriptionModel")}constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:r}){let o=[],n=await tt({provider:"openai",providerOptions:r,schema:B9}),i=new FormData,c=e instanceof Uint8Array?new Blob([e]):new Blob([PC(e)]);i.append("model",this.modelId);let u=vC(t);if(i.append("file",new File([c],"audio",{type:t}),`audio.${u}`),n){let l={include:n.include,language:n.language,prompt:n.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:n.temperature,timestamp_granularities:n.timestampGranularities};for(let[d,p]of Object.entries(l))if(p!=null)if(Array.isArray(p))for(let m of p)i.append(`${d}[]`,String(m));else i.append(d,String(p))}return{formData:i,warnings:o}}async doGenerate(e){var t,r,o,n,i,c,u,l;let d=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{formData:p,warnings:m}=await this.getArgs(e),{value:f,responseHeaders:g,rawValue:h}=await bC({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:it(this.config.headers(),e.headers),formData:p,failedResponseHandler:fn,successfulResponseHandler:Pt(F9),abortSignal:e.abortSignal,fetch:this.config.fetch}),v=f.language!=null&&f.language in YC?YC[f.language]:void 0;return{text:f.text,segments:(u=(c=(n=f.segments)==null?void 0:n.map(x=>({text:x.text,startSecond:x.start,endSecond:x.end})))!=null?c:(i=f.words)==null?void 0:i.map(x=>({text:x.word,startSecond:x.start,endSecond:x.end})))!=null?u:[],language:v,durationInSeconds:(l=f.duration)!=null?l:void 0,warnings:m,response:{timestamp:d,modelId:this.modelId,headers:g,body:h}}}},Z9="2.0.74";function H9(e={}){var t,r;let o=(t=Pa(Ap({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?t:"https://api.openai.com/v1",n=(r=e.name)!=null?r:"openai",i=a(()=>Qo({Authorization:`Bearer ${Ea({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},`ai-sdk/openai/${Z9}`),"getHeaders"),c=a(v=>new DG(v,{provider:`${n}.chat`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createChatModel"),u=a(v=>new VG(v,{provider:`${n}.completion`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createCompletionModel"),l=a(v=>new GG(v,{provider:`${n}.embedding`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createEmbeddingModel"),d=a(v=>new QG(v,{provider:`${n}.image`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createImageModel"),p=a(v=>new V9(v,{provider:`${n}.transcription`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createTranscriptionModel"),m=a(v=>new L9(v,{provider:`${n}.speech`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch}),"createSpeechModel"),f=a(v=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return g(v)},"createLanguageModel"),g=a(v=>new $9(v,{provider:`${n}.responses`,url:a(({path:x})=>`${o}${x}`,"url"),headers:i,fetch:e.fetch,fileIdPrefixes:["file-"]}),"createResponsesModel"),h=a(function(v){return f(v)},"provider");return h.languageModel=f,h.chat=c,h.completion=u,h.responses=g,h.embedding=l,h.textEmbedding=l,h.textEmbeddingModel=l,h.image=d,h.imageModel=d,h.transcription=p,h.transcriptionModel=p,h.speech=m,h.speechModel=m,h.tools=x9,h}a(H9,"createOpenAI");var Mw=H9();var aO=s.enum(["openai","anthropic","google"]),G9={openai:{default:a(()=>Mw("gpt-4o"),"default"),fast:a(()=>Mw("gpt-4o-mini"),"fast"),envKey:"OPENAI_API_KEY"},anthropic:{default:a(()=>Nw("claude-3-5-sonnet-latest"),"default"),fast:a(()=>Nw("claude-3-5-haiku-latest"),"fast"),envKey:"ANTHROPIC_API_KEY"},google:{default:a(()=>jw("gemini-1.5-pro-latest"),"default"),fast:a(()=>jw("gemini-1.5-flash-latest"),"fast"),envKey:"GOOGLE_GENERATIVE_AI_API_KEY"}};function sO(e,t="default"){return G9[e][t]()}a(sO,"getModel");function cO(){let e=[];return process.env.OPENAI_API_KEY&&e.push("openai"),process.env.ANTHROPIC_API_KEY&&e.push("anthropic"),process.env.GOOGLE_GENERATIVE_AI_API_KEY&&e.push("google"),e.length>0?e:["google"]}a(cO,"getAvailableProviders");var K9=[/ignore\s+(all\s+)?(previous|above|prior)\s+instructions/i,/disregard\s+(all\s+)?(previous|prior)\s+(instructions|context)/i,/you\s+are\s+now/i,/new\s+instructions:/i,/system:\s*/i,/\[INST\]/i,/<\/s>/i,/DROP\s+TABLE/i,/DELETE\s+FROM\s+\w+\s*;/i,/UPDATE\s+\w+\s+SET.*WHERE\s+1\s*=\s*1/i,/;\s*--/];function uO(e){for(let r of K9)if(r.test(e))return{isSafe:!1,reason:`Potential injection detected: ${r.source}`};return{isSafe:!0,sanitizedInput:[...e].filter(r=>{let o=r.charCodeAt(0);return o>=32&&o!==127}).join("").trim()}}a(uO,"checkPromptInjection");var J9=new Set(["password","password_hash","two_factor_secret","two_factor_enabled","voice_sample_encrypted","voice_biometric_enabled","biometric_enabled","api_token","refresh_token","belvo_link_token","session_token"]),lO={cpf:a(e=>e?`***.***.***-${e.slice(-2)}`:"[n\xE3o informado]","cpf"),account_number:a(e=>e?`****${e.slice(-4)}`:"[n\xE3o informado]","account_number"),phone:a(e=>e?`(**) *****-${e.slice(-4)}`:"[n\xE3o informado]","phone")};function hn(e){if(!e)return{};let t={};for(let[r,o]of Object.entries(e))if(!J9.has(r.toLowerCase())){if(r.toLowerCase()in lO&&typeof o=="string"){t[r]=lO[r.toLowerCase()](o);continue}if(o&&typeof o=="object"){Array.isArray(o)?t[r]=o.map(n=>typeof n=="object"&&n!==null?hn(n):n):t[r]=hn(o);continue}t[r]=o}return t}a(hn,"filterSensitiveData");function dO(e,t){let r=s.object({includeInactive:s.boolean().default(!1).describe("Incluir contas inativas")}),o=s.object({accountId:s.string().uuid().optional().describe("ID da conta (omitir para total)")});return{listAccounts:{description:"Lista todas as contas banc\xE1rias do usu\xE1rio.",parameters:r,execute:a(async n=>{let{includeInactive:i}=n,c=[A(H.userId,e)];i||c.push(A(H.isActive,!0));let u=await t.select({id:H.id,institutionName:H.institutionName,accountType:H.accountType,balance:H.balance,availableBalance:H.availableBalance,currency:H.currency,isActive:H.isActive,isPrimary:H.isPrimary,lastSync:H.lastSync}).from(H).where(pe(...c)).orderBy(ot(H.isPrimary)),l=u.reduce((d,p)=>d+Number(p.balance??0),0);return{accounts:u.map(hn),totalBalance:l,count:u.length}},"execute")},getAccountBalance:{description:"Obt\xE9m saldo atual de uma conta espec\xEDfica ou total de todas as contas.",parameters:o,execute:a(async n=>{let{accountId:i}=n;if(i){let[d]=await t.select({id:H.id,institutionName:H.institutionName,balance:H.balance,availableBalance:H.availableBalance,currency:H.currency,lastSync:H.lastSync}).from(H).where(pe(A(H.id,i),A(H.userId,e))).limit(1);if(!d)throw new Error("Conta n\xE3o encontrada");return hn(d)}let c=await t.select({balance:H.balance,availableBalance:H.availableBalance,currency:H.currency}).from(H).where(pe(A(H.userId,e),A(H.isActive,!0))),u=c.reduce((d,p)=>d+Number(p.balance??0),0),l=c.reduce((d,p)=>d+Number(p.availableBalance??0),0);return{totalBalance:u,totalAvailable:l,currency:"BRL",accountCount:c.length}},"execute")}}}a(dO,"createAccountTools");function pO(e,t){let r=s.object({includeSystem:s.boolean().default(!0).describe("Incluir categorias do sistema")}),o=s.object({name:s.string().min(1).max(50).describe("Nome da categoria"),color:s.string().regex(/^#[0-9A-Fa-f]{6}$/).default("#6B7280").describe("Cor em hexadecimal"),icon:s.string().default("circle").describe("Nome do \xEDcone")});return{listCategories:{description:"Lista todas as categorias de transa\xE7\xE3o dispon\xEDveis.",parameters:r,execute:a(async n=>{let{includeSystem:i}=n,c=Uo(A(_e.userId,e),bl(_e.userId)),u=await t.select({id:_e.id,name:_e.name,color:_e.color,icon:_e.icon,isSystem:_e.isSystem,parentId:_e.parentId}).from(_e).where(c);return i||(u=u.filter(l=>!l.isSystem)),{categories:u,count:u.length}},"execute")},createCategory:{description:"Cria uma nova categoria personalizada.",parameters:o,execute:a(async n=>{let{name:i,color:c,icon:u}=n,[l]=await t.insert(_e).values({userId:e,name:i,color:c,icon:u,isSystem:!1}).returning();return{success:!0,category:l}},"execute")}}}a(pO,"createCategoryTools");function mO(e,t){let r=s.object({startDate:s.string().datetime().optional().describe("Data inicial no formato ISO (YYYY-MM-DD)"),endDate:s.string().datetime().optional().describe("Data final no formato ISO (YYYY-MM-DD)"),categoryId:s.string().uuid().optional().describe("ID da categoria para filtrar"),accountId:s.string().uuid().optional().describe("ID da conta para filtrar"),minAmount:s.number().optional().describe("Valor m\xEDnimo da transa\xE7\xE3o"),maxAmount:s.number().optional().describe("Valor m\xE1ximo da transa\xE7\xE3o"),searchTerm:s.string().optional().describe("Termo para buscar na descri\xE7\xE3o"),limit:s.number().min(1).max(100).default(20).describe("N\xFAmero m\xE1ximo de resultados"),offset:s.number().min(0).default(0).describe("Pular N resultados para pagina\xE7\xE3o")}),o=s.object({transactionId:s.string().uuid().describe("ID da transa\xE7\xE3o")}),n=s.object({amount:s.number().describe("Valor da transa\xE7\xE3o (positivo para receita, negativo para despesa)"),description:s.string().min(1).max(255).describe("Descri\xE7\xE3o da transa\xE7\xE3o"),categoryId:s.string().uuid().optional().describe("ID da categoria"),accountId:s.string().uuid().optional().describe("ID da conta banc\xE1ria"),transactionDate:s.string().datetime().optional().describe("Data da transa\xE7\xE3o (padr\xE3o: agora)"),merchantName:s.string().optional().describe("Nome do estabelecimento")}),i=s.object({transactionId:s.string().uuid().describe("ID da transa\xE7\xE3o a atualizar"),amount:s.number().optional().describe("Novo valor"),description:s.string().min(1).max(255).optional().describe("Nova descri\xE7\xE3o"),categoryId:s.string().uuid().optional().describe("Nova categoria"),transactionDate:s.string().datetime().optional().describe("Nova data"),merchantName:s.string().optional().describe("Novo estabelecimento")}),c=s.object({transactionId:s.string().uuid().describe("ID da transa\xE7\xE3o")}),u=s.object({startDate:s.string().datetime().describe("Data inicial"),endDate:s.string().datetime().describe("Data final")});return{listTransactions:{description:"Lista transa\xE7\xF5es do usu\xE1rio com filtros opcionais. Use para consultar hist\xF3rico, buscar por per\xEDodo ou categoria.",parameters:r,execute:a(async l=>{let{startDate:d,endDate:p,categoryId:m,accountId:f,minAmount:g,maxAmount:h,searchTerm:v,limit:x,offset:S}=l,b=[A(q.userId,e)];d&&b.push(Ot(q.transactionDate,new Date(d))),p&&b.push(It(q.transactionDate,new Date(p))),m&&b.push(A(q.categoryId,m)),f&&b.push(A(q.accountId,f)),g&&b.push(Ot(q.amount,String(g))),h&&b.push(It(q.amount,String(h))),v&&b.push(Gt(q.description,`%${v}%`));let w=await t.select({id:q.id,amount:q.amount,description:q.description,merchantName:q.merchantName,transactionDate:q.transactionDate,status:q.status,createdAt:q.createdAt}).from(q).where(pe(...b)).orderBy(ot(q.transactionDate)).limit(x).offset(S);return{transactions:w.map(hn),total:w.length,hasMore:w.length===x}},"execute")},getTransaction:{description:"Obt\xE9m detalhes de uma transa\xE7\xE3o espec\xEDfica pelo ID.",parameters:o,execute:a(async l=>{let{transactionId:d}=l,[p]=await t.select().from(q).where(pe(A(q.id,d),A(q.userId,e))).limit(1);if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return hn(p)},"execute")},createTransaction:{description:"Cria uma nova transa\xE7\xE3o manual para o usu\xE1rio.",parameters:n,execute:a(async l=>{let{amount:d,description:p,categoryId:m,accountId:f,transactionDate:g,merchantName:h}=l,[v]=await t.insert(q).values({userId:e,amount:String(d),description:p,categoryId:m,accountId:f,transactionDate:g?new Date(g):new Date,merchantName:h,transactionType:d>=0?"credit":"debit",status:"posted",isManualEntry:!0}).returning();return{success:!0,transaction:hn(v)}},"execute")},updateTransaction:{description:"Atualiza uma transa\xE7\xE3o existente do usu\xE1rio.",parameters:i,execute:a(async l=>{let{transactionId:d,...p}=l,m={updatedAt:new Date};p.amount!==void 0&&(m.amount=String(p.amount)),p.description!==void 0&&(m.description=p.description),p.categoryId!==void 0&&(m.categoryId=p.categoryId),p.transactionDate!==void 0&&(m.transactionDate=new Date(p.transactionDate)),p.merchantName!==void 0&&(m.merchantName=p.merchantName);let[f]=await t.update(q).set(m).where(pe(A(q.id,d),A(q.userId,e))).returning();if(!f)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,transaction:hn(f)}},"execute")},deleteTransaction:{description:"Deleta uma transa\xE7\xE3o. Use com cuidado, esta a\xE7\xE3o \xE9 irrevers\xEDvel.",parameters:c,execute:a(async l=>{let{transactionId:d}=l,[p]=await t.delete(q).where(pe(A(q.id,d),A(q.userId,e))).returning({id:q.id});if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,message:"Transa\xE7\xE3o deletada com sucesso."}},"execute")},getSpendingSummary:{description:"Obt\xE9m resumo de gastos por categoria em um per\xEDodo.",parameters:u,execute:a(async l=>{let{startDate:d,endDate:p}=l,m=await t.select({amount:q.amount,categoryId:q.categoryId}).from(q).where(pe(A(q.userId,e),It(q.amount,"0"),Ot(q.transactionDate,new Date(d)),It(q.transactionDate,new Date(p)))),f=[...new Set(m.map(b=>b.categoryId).filter(Boolean))],g=f.length?await t.select({id:_e.id,name:_e.name,color:_e.color}).from(_e).where(Ti(_e.id,f)):[],h=new Map(g.map(b=>[b.id,b])),v=m.reduce((b,w)=>{let P=w.categoryId??"uncategorized",B=h.get(w.categoryId??"");return b[P]||(b[P]={categoryId:P,categoryName:B?.name??"Sem categoria",color:B?.color??"#6B7280",total:0,count:0}),b[P].total+=Math.abs(Number(w.amount)),b[P].count+=1,b},{}),x=Object.values(v).sort((b,w)=>w.total-b.total),S=x.reduce((b,w)=>b+w.total,0);return{period:{startDate:d,endDate:p},grandTotal:S,categories:x}},"execute")}}}a(mO,"createTransactionTools");function fO(e,t){return{...mO(e,t),...dO(e,t),...pO(e,t)}}a(fO,"createAllTools");function W9(e){let t=[],o=[/\b\d{3}\.\d{3}\.\d{3}-\d{2}\b/,/\b\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}\b/,/\b\d{4}[- ]?\d{4}[- ]?\d{4}[- ]?\d{4}\b/].some(i=>i.test(e));o&&t.push("Sensitive data detected in response");let n=/[]/i.test(e)||e.includes("R$");return{isValid:t.length===0,language:n?"pt-BR":"en",contentType:"text",sensitiveDataDetected:o,complianceIssues:t}}a(W9,"validateBrazilianPortugueseContent");var iu=new ge,Q9=s.object({messages:s.array(s.object({role:s.enum(["user","assistant","system","tool"]),content:s.string(),sensitiveDataRedacted:s.boolean().optional().default(!1),timestamp:s.string().datetime().optional(),sessionId:s.string().uuid().optional(),parts:s.array(s.object({type:s.literal("text"),text:s.string()})).optional()})).min(1,"At least one message is required").transform(e=>e.filter(t=>t.role!=="tool").map(t=>({...t,parts:t.parts||[{type:"text",text:t.content}]}))),provider:aO.optional().default("google"),tier:s.enum(["default","fast"]).optional().default("default")});iu.post("/chat",X,Ee("json",Q9),async e=>{let t=Date.now(),{messages:r,provider:o,tier:n}=e.req.valid("json"),i=e.get("auth");if(!i?.user)return e.json({error:"Unauthorized"},401);let c=i.user.id,u=crypto.randomUUID(),l=r[r.length-1],d=l?.role==="user"?l.content:null;if(d&&typeof d=="string"){let p=uO(d);if(!p.isSafe)return await bp({userId:c,sessionId:u,provider:o,model:`${o}/${n}`,actionType:"chat",inputSummary:d.slice(0,100),outputSummary:"Blocked: injection detected",latencyMs:Date.now()-t,outcome:"blocked",errorMessage:p.reason}),e.json({error:"Invalid input detected"},400)}try{let p=sO(o,n),m=fO(c,i.db);return yA({model:p,system:wA,messages:mw(r),tools:m,maxSteps:5,onFinish:a(async({usage:g,finishReason:h,toolCalls:v})=>{let x=r,S=x[x.length-1],b=S?.role==="assistant"?S.content:h,w=typeof b=="string"?W9(b):{isValid:!0,language:"pt-BR",contentType:"text",sensitiveDataDetected:!1,complianceIssues:[]},P=w.sensitiveDataDetected?" [LGPD Warning: Sensitive data detected]":w.language==="pt-BR"?" [PT-BR]":" [EN]";await bp({userId:c,sessionId:u,provider:o,model:`${o}/${n}`,actionType:v?.length?"tool_call":"chat",toolName:v?.map(B=>B.toolName).join(", "),inputSummary:typeof d=="string"?d.slice(0,100):"Multi-modal/Tool input",outputSummary:h+P,tokensUsed:g.totalTokens,latencyMs:Date.now()-t,outcome:w.isValid?"success":"error",errorMessage:w.complianceIssues.length>0?`Compliance issues: ${w.complianceIssues.join("; ")}`:void 0})},"onFinish")}).toDataStreamResponse()}catch(p){return await bp({userId:c,sessionId:u,provider:o,model:`${o}/${n}`,actionType:"chat",inputSummary:typeof d=="string"?d.slice(0,100):"",outputSummary:"Error",latencyMs:Date.now()-t,outcome:"error",errorMessage:p instanceof Error?p.message:"Unknown error"}),e.json({error:"AI service error"},500)}});iu.get("/providers",X,e=>e.json({available:cO(),default:"google"}));import{randomUUID as i5}from"node:crypto";import{randomUUID as e5}from"node:crypto";var hO={BRL:{symbol:"R$",decimalSeparator:",",thousandsSeparator:".",maxAmount:99999999999e-2,minAmount:.01}},Op=new Set(["001","033","104","237","341","260","077","021","025","036","037","039","041","047","062","063","064","065","066","069","070","074","075","078","079","083","084","085","089","102","105","107","108","109","110","111","112","114","117","118","119","120","121","122","124","125","126","127","128","129","130","131","132","133","134","136","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320"]),X9={CNPJ:{format:"XX.XXX.XXX/XXXX-XX",regex:/^\d{14}$/},CPF:{format:"XXX.XXX.XXX-XX",regex:/^\d{11}$/},EMAIL:{format:"email@example.com",regex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},PHONE:{format:"+55 (XX) XXXXX-XXXX",regex:/^\+?\d{10,15}$/},RANDOM_KEY:{format:"XXXX-XXXX-XXXX-XXXX-XXXX",regex:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i}};var Y9={SUSPICIOUS_DESCRIPTIONS:["test","teste","debug","xxx","fake","fraud","hack","stolen","lavagem","dinheiro negro"],HIGH_VALUE_TRANSACTION:5e4,FREQUENT_SMALL_TRANSACTIONS:{count:20,amount:1e3,window:1440*60*1e3},RAPID_SUCCESSION:{count:5,window:300*1e3}},BIe={amount:s.number().min(hO.BRL.minAmount,"Amount must be at least R$ 0,01").max(hO.BRL.maxAmount,"Amount exceeds maximum allowed").refine(e=>Number.isFinite(e)&&Number(e.toFixed(2))===e,"Amount must have at most 2 decimal places"),bankAccount:s.object({account:s.string().regex(/^\d{1,12}$/,"Account must be 1-12 digits").refine(e=>!/^0+$/.test(e),"Account cannot be all zeros"),accountDigit:s.string().regex(/^\d$/,"Account digit must be a single digit"),agency:s.string().regex(/^\d{1,6}$/,"Agency must be 1-6 digits").refine(e=>!/^0+$/.test(e),"Agency cannot be all zeros"),bankCode:s.string().refine(e=>Op.has(e),"Invalid Brazilian bank code")}),financialInstitution:s.object({code:s.string().refine(e=>Op.has(e),"Invalid bank code"),name:s.string().min(2,"Institution name must be at least 2 characters").max(100,"Institution name must be less than 100 characters")}),pixKey:s.object({key:s.string().min(1,"PIX key cannot be empty"),type:s.enum(["cpf","cnpj","email","phone","random"])}).refine(e=>X9[e.type.toUpperCase()].regex.test(e.key.replace(/\D/g,"")),"Invalid PIX key format for the specified type"),transaction:s.object({account_id:s.string().uuid("Conta banc\xE1ria inv\xE1lida"),amount:s.number(),category_id:s.string().uuid().optional(),description:s.string().min(3,"Description must be at least 3 characters").max(200,"Description must be less than 200 characters").refine(e=>!Y9.SUSPICIOUS_DESCRIPTIONS.some(t=>e.toLowerCase().includes(t)),"Description contains suspicious content"),is_manual_entry:s.boolean().default(!0),merchant_name:s.string().max(120).optional(),notes:s.string().max(500).optional(),payment_method:s.enum(["cash","debit_card","credit_card","pix","boleto","transfer"]).optional(),status:s.enum(["pending","posted","failed","cancelled"]).default("posted"),tags:s.array(s.string()).max(10).optional(),transaction_date:s.string().refine(e=>{let t=new Date(e);return!Number.isNaN(t.getTime())&&t>=new Date("2020-01-01")&&t<=new Date(Date.now()+1440*60*1e3)},"Invalid date. Must be a valid date between 2020-01-01 and tomorrow"),transaction_type:s.enum(["debit","credit","transfer","pix","boleto"])})};function gO(e){let t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let r=0,o;for(let n=1;n<=9;n++)r+=Number.parseInt(t.substring(n-1,n),10)*(11-n);if(o=r*10%11,(o===10||o===11)&&(o=0),o!==Number.parseInt(t.substring(9,10),10))return!1;r=0;for(let n=1;n<=10;n++)r+=Number.parseInt(t.substring(n-1,n),10)*(12-n);return o=r*10%11,(o===10||o===11)&&(o=0),o===Number.parseInt(t.substring(10,11),10)}a(gO,"validateCPF");var yO=["CHECKING","SAVINGS","INVESTMENT","SALARY","DIGITAL_WALLET"],t5=["pending","manual","success","error"],r5=s.object({account_holder_name:s.string().optional(),account_mask:s.string().min(7,"M\xE1scara da conta \xE9 obrigat\xF3ria."),account_number:s.string().optional(),account_type:s.enum(yO),balance:s.number(),belvo_account_id:s.string().optional(),currency:s.string().default("BRL"),institution_id:s.string().min(1,"ID da institui\xE7\xE3o \xE9 obrigat\xF3rio."),institution_name:s.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio."),is_active:s.boolean().optional(),is_primary:s.boolean().optional(),user_id:s.string().min(1,"Usu\xE1rio \xE9 obrigat\xF3rio.")}),n5=s.object({account_holder_name:s.string().optional(),account_mask:s.string().optional(),account_number:s.string().optional(),account_type:s.enum(yO).optional(),balance:s.number().optional(),belvo_account_id:s.string().optional(),currency:s.string().optional(),institution_id:s.string().optional(),institution_name:s.string().optional(),is_active:s.boolean().optional(),is_primary:s.boolean().optional(),sync_error_message:s.string().optional(),sync_status:s.enum(t5).optional()}),o5=new Set(["user_id","institution_name","institution_id","account_type","account_mask","account_holder_name","account_number","belvo_account_id","balance","currency","is_primary","is_active","sync_status","sync_error_message"]),vO="manual_",_O=a(e=>{if(!e)return!1;let t=e.trim();return Op.has(t)?!0:/^[0-9a-f-]{8,}$/i.test(t)},"isValidInstitutionId"),bO=a(e=>!e||e.toUpperCase()==="BRL","isValidCurrency"),xO=a(e=>!e||e.startsWith(vO)?!0:/^[a-z0-9_-]{6,}$/i.test(e),"isValidBelvoId"),au=a(e=>e?/^\*{4}\s\d{4}$/.test(e):!1,"validateAccountMask"),su=a(e=>/^\*{4}\d{4}$/.test(e)?`**** ${e.slice(-4)}`:e,"normalizeAccountMask"),wO=a(e=>e.map(t=>({field:t.path.join(".")||"root",message:t.message})),"collectZodErrors"),Uw=a(e=>{let t={};return Object.entries(e).forEach(([r,o])=>{if(o5.has(r)){if(typeof o=="string"){let n=o.trim();if(n==="")return;switch(r){case"currency":t.currency=n.toUpperCase();break;case"account_number":t.account_number=n.replace(/\s+/g,"");break;case"account_mask":t.account_mask=su(n);break;default:t[r]=n}return}if(typeof o=="number"){t[r]=Number(o);return}t[r]=o}}),t},"sanitizeBankAccountData"),SO=a(()=>`${vO}${e5()}`,"generateManualAccountId"),TO=a(e=>{let t=[],r=r5.safeParse(e);if(!r.success)return t.push(...wO(r.error.issues)),{errors:t,valid:!1};let o=r.data;return au(o.account_mask)||t.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),_O(o.institution_id)||t.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),bO(o.currency)||t.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas no momento."}),xO(o.belvo_account_id)||t.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),Number.isNaN(o.balance)&&t.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:t,valid:t.length===0}},"validateBankAccountForInsert"),IO=a(e=>{let t=[],r=n5.safeParse(e);if(!r.success)return t.push(...wO(r.error.issues)),{errors:t,valid:!1};let o=r.data;return o.account_mask&&!au(o.account_mask)&&t.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),o.institution_id&&!_O(o.institution_id)&&t.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),o.currency&&!bO(o.currency)&&t.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas."}),o.belvo_account_id&&!xO(o.belvo_account_id)&&t.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),o.balance!==void 0&&Number.isNaN(o.balance)&&t.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:t,valid:t.length===0}},"validateBankAccountForUpdate");var a5=s.object({institutionName:s.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio"),accountType:s.enum(["checking","savings","investment","cash"],{error:"Tipo de conta \xE9 obrigat\xF3rio"}),balance:s.number().default(0),currency:s.string().default("BRL"),isPrimary:s.boolean().default(!1),isActive:s.boolean().default(!0),accountMask:s.string().optional(),institutionId:s.string().optional()}),s5=s.object({institutionName:s.string().optional(),accountType:s.enum(["checking","savings","investment","cash"]).optional(),balance:s.number().optional(),currency:s.string().optional(),isPrimary:s.boolean().optional(),isActive:s.boolean().optional(),accountMask:s.string().optional()}),c5=s.object({balance:s.number()}),u5=s.object({days:s.coerce.number().int().positive().default(30)}),l5={checking:"CHECKING",savings:"SAVINGS",investment:"INVESTMENT",cash:"DIGITAL_WALLET"},qw=a(e=>l5[e.toLowerCase()]||e.toUpperCase(),"normalizeAccountType"),d5=a(()=>`**** ${Math.floor(1e3+Math.random()*9e3)}`,"generateAccountMask"),Vn=new ge;Vn.get("/",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let n=await r.select().from(H).where(A(H.userId,t.id)).orderBy(ot(H.createdAt));return e.json({data:n||[],meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Vn.get("/total-balance",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let n=await r.select({balance:H.balance,currency:H.currency}).from(H).where(pe(A(H.userId,t.id),A(H.isActive,!0))),i={};return n&&n.forEach(c=>{let u=c.currency||"BRL";i[u]=(i[u]||0)+Number(c.balance||0)}),e.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get total balance",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"TOTAL_BALANCE_ERROR",error:"Failed to calculate total balance"},500)}});Vn.get("/:id",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{let[i]=await r.select().from(H).where(pe(A(H.id,o),A(H.userId,t.id))).limit(1);return i?e.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}}):e.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(i){return k.error("Failed to get bank account",{accountId:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"BANK_ACCOUNT_ERROR",error:"Failed to retrieve bank account"},500)}});Vn.get("/:id/balance-history",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ee("query",u5),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),{days:n}=e.req.valid("query"),i=e.get("requestId");try{if(!o||o==="all")return e.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let[c]=await r.select({balance:H.balance}).from(H).where(pe(A(H.id,o),A(H.userId,t.id))).limit(1);if(!c)return e.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let u=Number(c.balance||0),l=[];for(let d=0;d<n;d++){let p=new Date;p.setDate(p.getDate()-d),l.push({date:p.toISOString(),balance:u})}return e.json({data:l.reverse(),meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(c){return k.error("Failed to get balance history",{accountId:o,error:c instanceof Error?c.message:"Unknown error",requestId:i,userId:t.id}),e.json({code:"BALANCE_HISTORY_ERROR",error:"Failed to retrieve balance history"},500)}});Vn.post("/",X,ue({windowMs:60*1e3,max:10,message:"Too many account creation attempts, please try again later"}),Ee("json",a5),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=qw(o.accountType),c=o.accountMask?su(o.accountMask):d5();if(!au(c))return e.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);let u=o.institutionId||i5(),l=SO(),d="manual",p=Uw({user_id:t.id,institution_name:o.institutionName,institution_id:u,account_type:i,account_mask:c,balance:o.balance,currency:o.currency.toUpperCase(),is_primary:o.isPrimary,is_active:o.isActive,belvo_account_id:l,sync_status:d}),m=TO(p);if(!m.valid){let h=m.errors.length>0?m.errors.map(v=>v.message).join(", "):"Dados inv\xE1lidos";return e.json({code:"BAD_REQUEST",error:h},400)}let[f]=await r.select({id:H.id}).from(H).where(pe(A(H.userId,t.id),A(H.institutionId,u),A(H.accountMask,c))).limit(1);if(f)return e.json({code:"CONFLICT",error:"J\xE1 existe uma conta com a mesma institui\xE7\xE3o e final"},409);let[g]=await r.insert(H).values({userId:t.id,institutionName:o.institutionName,institutionId:u,accountType:i,accountMask:c,balance:String(o.balance),currency:o.currency.toUpperCase(),isPrimary:o.isPrimary,isActive:o.isActive,belvoAccountId:l,syncStatus:d}).returning();return k.info("Bank account created",{accountId:g.id,institutionName:o.institutionName,requestId:n,userId:t.id}),e.json({data:g,meta:{createdAt:new Date().toISOString(),requestId:n}},201)}catch(i){return k.error("Failed to create bank account",{error:i instanceof Error?i.message:"Unknown error",institutionName:o.institutionName,requestId:n,userId:t.id}),e.json({code:"BANK_ACCOUNT_CREATE_ERROR",error:"Failed to create bank account"},500)}});Vn.put("/:id",X,ue({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ee("json",s5),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.req.valid("json"),i=e.get("requestId");try{let[c]=await r.select({id:H.id}).from(H).where(pe(A(H.id,o),A(H.userId,t.id))).limit(1);if(!c)return e.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404);let u={};if(n.institutionName!==void 0&&(u.institutionName=n.institutionName),n.accountType!==void 0&&(u.accountType=qw(n.accountType)),n.balance!==void 0&&(u.balance=String(n.balance)),n.currency!==void 0&&(u.currency=n.currency.toUpperCase()),n.isPrimary!==void 0&&(u.isPrimary=n.isPrimary),n.isActive!==void 0&&(u.isActive=n.isActive),n.accountMask!==void 0){let m=su(n.accountMask);if(!au(m))return e.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);u.accountMask=m}let l=Uw({institution_name:n.institutionName,account_type:n.accountType?qw(n.accountType):void 0,balance:n.balance,currency:n.currency?.toUpperCase(),is_primary:n.isPrimary,is_active:n.isActive,account_mask:n.accountMask?su(n.accountMask):void 0}),d=IO(l);if(!d.valid){let m=d.errors.length>0?d.errors.map(f=>f.message).join(", "):"Dados inv\xE1lidos";return e.json({code:"BAD_REQUEST",error:m},400)}let[p]=await r.update(H).set(u).where(pe(A(H.id,o),A(H.userId,t.id))).returning();return e.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})}catch(c){return k.error("Failed to update bank account",{accountId:o,error:c instanceof Error?c.message:"Unknown error",requestId:i,userId:t.id}),e.json({code:"BANK_ACCOUNT_UPDATE_ERROR",error:"Failed to update bank account"},500)}});Vn.patch("/:id/balance",X,ue({windowMs:60*1e3,max:30,message:"Too many balance update attempts, please try again later"}),Ee("json",c5),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),{balance:n}=e.req.valid("json"),i=e.get("requestId");try{let[c]=await r.update(H).set({balance:String(n)}).where(pe(A(H.id,o),A(H.userId,t.id))).returning();return c?e.json({data:c,meta:{requestId:i,updatedAt:new Date().toISOString()}}):e.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(c){return k.error("Failed to update balance",{accountId:o,error:c instanceof Error?c.message:"Unknown error",requestId:i,userId:t.id}),e.json({code:"BALANCE_UPDATE_ERROR",error:"Failed to update balance"},500)}});Vn.delete("/:id",X,ue({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{return await r.delete(H).where(pe(A(H.id,o),A(H.userId,t.id))),k.info("Bank account deleted",{accountId:o,requestId:n,userId:t.id}),e.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:n}})}catch(i){return k.error("Failed to delete bank account",{accountId:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"BANK_ACCOUNT_DELETE_ERROR",error:"Failed to delete bank account"},500)}});var Lw=Vn;var Rp=new ge,p5=s.object({accountType:s.string(),balance:s.number(),bankName:s.string(),currency:s.string(),id:s.string(),lastSync:s.string().datetime().optional()}),m0e=s.object({accounts:s.array(p5),currency:s.string(),total:s.number()});Rp.get("/accounts",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");try{k.info("Bank accounts accessed",{requestId:r,userId:t.id});let o={accounts:[],currency:"BRL",total:0};return e.json({data:o,meta:{note:"Placeholder implementation - Belvo integration pending",requestId:r,retrievedAt:new Date().toISOString()}})}catch(o){return k.error("Failed to get bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:r,userId:t.id}),e.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Rp.post("/accounts/link",X,ue({windowMs:60*1e3,max:5,message:"Too many link attempts, please try again later"}),Ee("json",s.object({bankCode:s.string(),credentials:s.record(s.string(),s.any())})),async e=>{let{user:t}=e.get("auth"),r=e.req.valid("json"),o=e.get("requestId");try{return k.info("Bank account link attempt",{bankCode:r.bankCode,requestId:o,userId:t.id}),e.json({code:"NOT_IMPLEMENTED",details:{bankCode:r.bankCode,note:"Belvo integration is pending implementation"},error:"Bank account linking not yet implemented"},501)}catch(n){return k.error("Failed to link bank account",{bankCode:r.bankCode,error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"BANK_LINK_ERROR",error:"Failed to link bank account"},500)}});Rp.post("/accounts/sync",X,ue({windowMs:60*1e3,max:10,message:"Too many sync requests, please try again later"}),async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");try{return k.info("Bank accounts sync attempt",{requestId:r,userId:t.id}),e.json({code:"NOT_IMPLEMENTED",details:{note:"Belvo integration is pending implementation"},error:"Bank account synchronization not yet implemented"},501)}catch(o){return k.error("Failed to sync bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:r,userId:t.id}),e.json({code:"BANK_SYNC_ERROR",error:"Failed to sync bank accounts"},500)}});var Fw=Rp;import*as La from"crypto";import{EventEmitter as XN}from"events";import*as jp from"crypto";var So=class{static{a(this,"CryptoProvider")}computeHMACSignature(t,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(t,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(t){throw new Error("computeSHA256 not implemented.")}},$a=class extends Error{static{a(this,"CryptoProviderOnlySupportsAsyncError")}};var Np=class extends So{static{a(this,"NodeCryptoProvider")}computeHMACSignature(t,r){return jp.createHmac("sha256",r).update(t,"utf8").digest("hex")}async computeHMACSignatureAsync(t,r){return await this.computeHMACSignature(t,r)}async computeSHA256Async(t){return new Uint8Array(await jp.createHash("sha256").update(t).digest())}};import*as Vw from"http";import*as Zw from"https";var Bt=class e{static{a(this,"HttpClient")}getClientName(){throw new Error("getClientName not implemented.")}makeRequest(t,r,o,n,i,c,u,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let t=new TypeError(e.TIMEOUT_ERROR_CODE);return t.code=e.TIMEOUT_ERROR_CODE,t}};Bt.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Bt.TIMEOUT_ERROR_CODE="ETIMEDOUT";var To=class{static{a(this,"HttpClientResponse")}constructor(t,r){this._statusCode=t,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(t){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var EO=Vw.default||Vw,kO=Zw.default||Zw,m5=new EO.Agent({keepAlive:!0}),f5=new kO.Agent({keepAlive:!0}),cu=class extends Bt{static{a(this,"NodeHttpClient")}constructor(t){super(),this._agent=t}getClientName(){return"node"}makeRequest(t,r,o,n,i,c,u,l){let d=u==="http",p=this._agent;return p||(p=d?m5:f5),new Promise((f,g)=>{let h=(d?EO:kO).request({host:t,port:r,path:o,method:n,agent:p,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});h.setTimeout(l,()=>{h.destroy(Bt.makeTimeoutError())}),h.on("response",v=>{f(new Bw(v))}),h.on("error",v=>{g(v)}),h.once("socket",v=>{v.connecting?v.once(d?"connect":"secureConnect",()=>{h.write(c),h.end()}):(h.write(c),h.end())})})}},Bw=class extends To{static{a(this,"NodeHttpClientResponse")}constructor(t){super(t.statusCode,t.headers||{}),this._res=t}getRawResponse(){return this._res}toStream(t){return this._res.once("end",()=>t()),this._res}toJSON(){return new Promise((t,r)=>{let o="";this._res.setEncoding("utf8"),this._res.on("data",n=>{o+=n}),this._res.once("end",()=>{try{t(JSON.parse(o))}catch(n){r(n)}})})}};var qN=Yu(UN(),1);var xS=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function LN(e){return e&&typeof e=="object"&&xS.some(t=>Object.prototype.hasOwnProperty.call(e,t))}a(LN,"isOptionsHash");function ko(e,t){return qN.stringify(e,{serializeDate:a(r=>Math.floor(r.getTime()/1e3).toString(),"serializeDate"),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}a(ko,"queryStringifyRequestData");var Qp=(()=>{let e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{let r=t.replace(/["\n\r\u2028\u2029]/g,o=>e[o]);return o=>r.replace(/\{([\s\S]+?)\}/g,(n,i)=>{let c=o[i];return qJ(c)?encodeURIComponent(c):""})}})();function qJ(e){return["number","string","boolean"].includes(typeof e)}a(qJ,"isValidEncodeUriComponentType");function FN(e){let t=e.match(/\{\w+\}/g);return t?t.map(r=>r.replace(/[{}]/g,"")):[]}a(FN,"extractUrlParams");function Da(e){if(!Array.isArray(e)||!e[0]||typeof e[0]!="object")return{};if(!LN(e[0]))return e.shift();let t=Object.keys(e[0]),r=t.filter(o=>xS.includes(o));return r.length>0&&r.length!==t.length&&xu(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}a(Da,"getDataFromArgs");function Xp(e){let t={host:null,headers:{},settings:{},streaming:!1};if(e.length>0){let r=e[e.length-1];if(typeof r=="string")t.authenticator=Wp(e.pop());else if(LN(r)){let o=Object.assign({},e.pop()),n=Object.keys(o).filter(i=>!xS.includes(i));if(n.length&&xu(`Invalid options found (${n.join(", ")}); ignoring.`),o.apiKey&&(t.authenticator=Wp(o.apiKey)),o.idempotencyKey&&(t.headers["Idempotency-Key"]=o.idempotencyKey),o.stripeAccount&&(t.headers["Stripe-Account"]=o.stripeAccount),o.stripeContext){if(t.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");t.headers["Stripe-Context"]=o.stripeContext}if(o.apiVersion&&(t.headers["Stripe-Version"]=o.apiVersion),Number.isInteger(o.maxNetworkRetries)&&(t.settings.maxNetworkRetries=o.maxNetworkRetries),Number.isInteger(o.timeout)&&(t.settings.timeout=o.timeout),o.host&&(t.host=o.host),o.authenticator){if(o.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof o.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");t.authenticator=o.authenticator}o.additionalHeaders&&(t.headers=o.additionalHeaders),o.streaming&&(t.streaming=!0)}}return t}a(Xp,"getOptionsFromArgs");function BN(e){let t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...o){t.apply(this,o)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r}a(BN,"protoExtend");function Yp(e){if(typeof e!="object")throw new Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(e[r]!=null&&(t[r]=e[r]),t),{})}a(Yp,"removeNullish");function VN(e){return e&&typeof e=="object"?Object.keys(e).reduce((t,r)=>(t[LJ(r)]=e[r],t),{}):e}a(VN,"normalizeHeaders");function LJ(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()).join("-")}a(LJ,"normalizeHeader");function bu(e,t){return t?e.then(r=>{setTimeout(()=>{t(null,r)},0)},r=>{setTimeout(()=>{t(r,null)},0)}):e}a(bu,"callbackifyPromiseWithTimeout");function ZN(e){return e==="OAuth"?"oauth":e[0].toLowerCase()+e.substring(1)}a(ZN,"pascalToCamelCase");function xu(e){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}a(xu,"emitWarning");function FJ(e){let t=typeof e;return(t==="function"||t==="object")&&!!e}a(FJ,"isObject");function HN(e){let t={},r=a((o,n)=>{Object.entries(o).forEach(([i,c])=>{let u=n?`${n}[${i}]`:i;if(FJ(c)){if(!(c instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(c,"data"))return r(c,u);t[u]=c}else t[u]=String(c)})},"step");return r(e,null),t}a(HN,"flattenAndStringify");function em(e,t,r){if(!Number.isInteger(t)){if(r!==void 0)return r;throw new Error(`${e} must be an integer`)}return t}a(em,"validateInteger");function GN(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}a(GN,"determineProcessUserAgentProperties");function Wp(e){let t=a(r=>(r.headers.Authorization="Bearer "+e,Promise.resolve()),"authenticator");return t._apiKey=e,t}a(Wp,"createApiKeyAuthenticator");function KN(e){let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t),o=0;return e.forEach(n=>{r.set(n,o),o+=n.length}),r}a(KN,"concat");function BJ(e,t){return this[e]instanceof Date?Math.floor(this[e].getTime()/1e3).toString():t}a(BJ,"dateTimeReplacer");function JN(e){return JSON.stringify(e,BJ)}a(JN,"jsonStringifyRequestData");function za(e){return e&&e.startsWith("/v2")?"v2":"v1"}a(za,"getAPIMode");function tm(e){return Array.isArray(e)?e.join(", "):String(e)}a(tm,"parseHttpHeaderAsString");function WN(e){let t=Array.isArray(e)?e[0]:e;return Number(t)}a(WN,"parseHttpHeaderAsNumber");function QN(e){return Object.entries(e).map(([t,r])=>[t,tm(r)])}a(QN,"parseHeadersForFetch");var rm=class e extends Bt{static{a(this,"FetchHttpClient")}constructor(t){if(super(),!t){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");t=globalThis.fetch}globalThis.AbortController?this._fetchFn=e.makeFetchWithAbortTimeout(t):this._fetchFn=e.makeFetchWithRaceTimeout(t)}static makeFetchWithRaceTimeout(t){return(r,o,n)=>{let i,c=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Bt.makeTimeoutError())},n)}),u=t(r,o);return Promise.race([u,c]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(t){return async(r,o,n)=>{let i=new AbortController,c=setTimeout(()=>{c=null,i.abort(Bt.makeTimeoutError())},n);try{return await t(r,Object.assign(Object.assign({},o),{signal:i.signal}))}catch(u){throw u.name==="AbortError"?Bt.makeTimeoutError():u}finally{c&&clearTimeout(c)}}}getClientName(){return"fetch"}async makeRequest(t,r,o,n,i,c,u,l){let d=u==="http",p=new URL(o,`${d?"http":"https"}://${t}`);p.port=r;let m=n=="POST"||n=="PUT"||n=="PATCH",f=c||(m?"":void 0),g=await this._fetchFn(p.toString(),{method:n,headers:QN(i),body:f},l);return new wS(g)}},wS=class e extends To{static{a(this,"FetchHttpClientResponse")}constructor(t){super(t.status,e._transformHeadersToObject(t.headers)),this._res=t}getRawResponse(){return this._res}toStream(t){return t(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(t){let r={};for(let o of t){if(!Array.isArray(o)||o.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[o[0]]=o[1]}return r}};var nm=class extends So{static{a(this,"SubtleCryptoProvider")}constructor(t){super(),this.subtleCrypto=t||crypto.subtle}computeHMACSignature(t,r){throw new $a("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(t,r){let o=new TextEncoder,n=await this.subtleCrypto.importKey("raw",o.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",n,o.encode(t)),c=new Uint8Array(i),u=new Array(c.length);for(let l=0;l<c.length;l++)u[l]=SS[c[l]];return u.join("")}async computeSHA256Async(t){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",t))}},SS=new Array(256);for(let e=0;e<SS.length;e++)SS[e]=e.toString(16).padStart(2,"0");var om=class{static{a(this,"PlatformFunctions")}constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}secureCompare(t,r){if(t.length!==r.length)return!1;let o=t.length,n=0;for(let i=0;i<o;++i)n|=t.charCodeAt(i)^r.charCodeAt(i);return n===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(t){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(t){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(t){return new rm(t)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(t){return new nm(t)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var lm={};$r(lm,{StripeAPIError:()=>Ma,StripeAuthenticationError:()=>Ua,StripeCardError:()=>im,StripeConnectionError:()=>Tu,StripeError:()=>bt,StripeIdempotencyError:()=>am,StripeInvalidGrantError:()=>sm,StripeInvalidRequestError:()=>wu,StripePermissionError:()=>Su,StripeRateLimitError:()=>qa,StripeSignatureVerificationError:()=>Jr,StripeUnknownError:()=>cm,TemporarySessionExpiredError:()=>um,generateV1Error:()=>Iu,generateV2Error:()=>TS});var Iu=a(e=>{switch(e.type){case"card_error":return new im(e);case"invalid_request_error":return new wu(e);case"api_error":return new Ma(e);case"authentication_error":return new Ua(e);case"rate_limit_error":return new qa(e);case"idempotency_error":return new am(e);case"invalid_grant":return new sm(e);default:return new cm(e)}},"generateV1Error"),TS=a(e=>{switch(e.type){case"temporary_session_expired":return new um(e)}switch(e.code){case"invalid_fields":return new wu(e)}return Iu(e)},"generateV2Error"),bt=class extends Error{static{a(this,"StripeError")}constructor(t={},r=null){var o;super(t.message),this.type=r||this.constructor.name,this.raw=t,this.rawType=t.type,this.code=t.code,this.doc_url=t.doc_url,this.param=t.param,this.detail=t.detail,this.headers=t.headers,this.requestId=t.requestId,this.statusCode=t.statusCode,this.message=(o=t.message)!==null&&o!==void 0?o:"",this.userMessage=t.user_message,this.charge=t.charge,this.decline_code=t.decline_code,this.payment_intent=t.payment_intent,this.payment_method=t.payment_method,this.payment_method_type=t.payment_method_type,this.setup_intent=t.setup_intent,this.source=t.source}};bt.generate=Iu;var im=class extends bt{static{a(this,"StripeCardError")}constructor(t={}){super(t,"StripeCardError")}},wu=class extends bt{static{a(this,"StripeInvalidRequestError")}constructor(t={}){super(t,"StripeInvalidRequestError")}},Ma=class extends bt{static{a(this,"StripeAPIError")}constructor(t={}){super(t,"StripeAPIError")}},Ua=class extends bt{static{a(this,"StripeAuthenticationError")}constructor(t={}){super(t,"StripeAuthenticationError")}},Su=class extends bt{static{a(this,"StripePermissionError")}constructor(t={}){super(t,"StripePermissionError")}},qa=class extends bt{static{a(this,"StripeRateLimitError")}constructor(t={}){super(t,"StripeRateLimitError")}},Tu=class extends bt{static{a(this,"StripeConnectionError")}constructor(t={}){super(t,"StripeConnectionError")}},Jr=class extends bt{static{a(this,"StripeSignatureVerificationError")}constructor(t,r,o={}){super(o,"StripeSignatureVerificationError"),this.header=t,this.payload=r}},am=class extends bt{static{a(this,"StripeIdempotencyError")}constructor(t={}){super(t,"StripeIdempotencyError")}},sm=class extends bt{static{a(this,"StripeInvalidGrantError")}constructor(t={}){super(t,"StripeInvalidGrantError")}},cm=class extends bt{static{a(this,"StripeUnknownError")}constructor(t={}){super(t,"StripeUnknownError")}},um=class extends bt{static{a(this,"TemporarySessionExpiredError")}constructor(t={}){super(t,"TemporarySessionExpiredError")}};import{exec as VJ}from"child_process";var IS=class extends bt{static{a(this,"StreamProcessingError")}},dm=class extends om{static{a(this,"NodePlatformFunctions")}constructor(){super(),this._exec=VJ,this._UNAME_CACHE=null}uuid4(){return La.randomUUID?La.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((t,r)=>{try{this._exec("uname -a",(o,n)=>{if(o)return t(null);t(n)})}catch{t(null)}})),this._UNAME_CACHE}secureCompare(t,r){if(!t||!r)throw new Error("secureCompare must receive two arguments");if(t.length!==r.length)return!1;if(La.timingSafeEqual){let o=new TextEncoder,n=o.encode(t),i=o.encode(r);return La.timingSafeEqual(n,i)}return super.secureCompare(t,r)}createEmitter(){return new XN}tryBufferData(t){if(!(t.file.data instanceof XN))return Promise.resolve(t);let r=[];return new Promise((o,n)=>{t.file.data.on("data",i=>{r.push(i)}).once("end",()=>{let i=Object.assign({},t);i.file.data=KN(r),o(i)}).on("error",i=>{n(new IS({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(t){return new cu(t)}createDefaultHttpClient(){return new cu}createNodeCryptoProvider(){return new Np}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}};var ZJ=60,pm=class e{static{a(this,"RequestSender")}constructor(t,r){this._stripe=t,this._maxBufferedRequestMetric=r}_normalizeStripeContext(t,r){return t?t.toString()||null:r?.toString()||null}_addHeadersDirectlyToObject(t,r){t.requestId=r["request-id"],t.stripeAccount=t.stripeAccount||r["stripe-account"],t.apiVersion=t.apiVersion||r["stripe-version"],t.idempotencyKey=t.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(t,r,o){let n=Date.now(),i=n-t.request_start_time;return Yp({api_version:o["stripe-version"],account:o["stripe-account"],idempotency_key:o["idempotency-key"],method:t.method,path:t.path,status:r,request_id:this._getRequestId(o),elapsed:i,request_start_time:t.request_start_time,request_end_time:n})}_getRequestId(t){return t["request-id"]}_streamingResponseHandler(t,r,o){return n=>{let i=n.getHeaders(),c=a(()=>{let l=this._makeResponseEvent(t,n.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,r)},"streamCompleteCallback"),u=n.toStream(c);return this._addHeadersDirectlyToObject(u,i),o(null,u)}}_jsonResponseHandler(t,r,o,n){return i=>{let c=i.getHeaders(),u=this._getRequestId(c),l=i.getStatusCode(),d=this._makeResponseEvent(t,l,c);this._stripe._emitter.emit("response",d),i.toJSON().then(p=>{if(p.error){let m;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=c,p.error.statusCode=l,p.error.requestId=u,l===401?m=new Ua(p.error):l===403?m=new Su(p.error):l===429?m=new qa(p.error):r==="v2"?m=TS(p.error):m=Iu(p.error),m}return p},p=>{throw new Ma({message:"Invalid JSON received from the Stripe API",exception:p,requestId:c["request-id"]})}).then(p=>{this._recordRequestMetrics(u,d.elapsed,o);let m=i.getRawResponse();this._addHeadersDirectlyToObject(m,c),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:m}),n(null,p)},p=>n(p,null))}}static _generateConnectionErrorMessage(t){return`An error occurred with our connection to Stripe.${t>0?` Request was retried ${t} times.`:""}`}static _shouldRetry(t,r,o,n){return n&&r===0&&Bt.CONNECTION_CLOSED_ERROR_CODES.includes(n.code)?!0:r>=o?!1:t?t.getHeaders()["stripe-should-retry"]==="false"?!1:t.getHeaders()["stripe-should-retry"]==="true"||t.getStatusCode()===409||t.getStatusCode()>=500:!0}_getSleepTimeInMS(t,r=null){let o=this._stripe.getInitialNetworkRetryDelay(),n=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(o*Math.pow(2,t-1),n);return i*=.5*(1+Math.random()),i=Math.max(o,i),Number.isInteger(r)&&r<=ZJ&&(i=Math.max(i,r)),i*1e3}_getMaxNetworkRetries(t={}){return t.maxNetworkRetries!==void 0&&Number.isInteger(t.maxNetworkRetries)?t.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(t,r,o){let n=this._getMaxNetworkRetries(r),i=a(()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`,"genKey");if(o==="v2"){if(t==="POST"||t==="DELETE")return i()}else if(o==="v1"&&t==="POST"&&n>0)return i();return null}_makeHeaders({contentType:t,contentLength:r,apiVersion:o,clientUserAgent:n,method:i,userSuppliedHeaders:c,userSuppliedSettings:u,stripeAccount:l,stripeContext:d,apiMode:p}){let m={Accept:"application/json","Content-Type":t,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":n,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":o,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,u,p)},f=i=="POST"||i=="PUT"||i=="PATCH";return(f||r)&&(f||xu(`${i} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(Yp(m),VN(c))}_getUserAgentString(t){let r=this._stripe.getConstant("PACKAGE_VERSION"),o=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${t} NodeBindings/${r} ${o}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let t=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:t})}}_recordRequestMetrics(t,r,o){if(this._stripe.getTelemetryEnabled()&&t)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)xu("Request metrics buffer is full, dropping telemetry message.");else{let n={request_id:t,request_duration_ms:r};o&&o.length>0&&(n.usage=o),this._stripe._prevRequestMetrics.push(n)}}_rawRequest(t,r,o,n,i){return new Promise((u,l)=>{let d;try{let h=t.toUpperCase();if(h!=="POST"&&o&&Object.keys(o).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let v=[].slice.call([o,n]),x=Da(v),S=h==="POST"?Object.assign({},x):null,b=Xp(v),w=b.headers,P=b.authenticator;d={requestMethod:h,requestPath:r,bodyData:S,queryData:{},authenticator:P,headers:w,host:b.host,streaming:!!b.streaming,settings:{},usage:i||["raw_request"]}}catch(h){l(h);return}function p(h,v){h?l(h):u(v)}a(p,"requestCallback");let{headers:m,settings:f}=d,g=d.authenticator;this._request(d.requestMethod,d.host,r,d.bodyData,g,{headers:m,settings:f,streaming:d.streaming},d.usage,p)})}_request(t,r,o,n,i,c,u=[],l,d=null){var p;let m;i=(p=i??this._stripe._authenticator)!==null&&p!==void 0?p:null;let f=za(o),g=a((x,S,b,w,P)=>setTimeout(x,this._getSleepTimeInMS(w,P),S,b,w+1),"retryRequest"),h=a((x,S,b)=>{let w=c.settings&&c.settings.timeout&&Number.isInteger(c.settings.timeout)&&c.settings.timeout>=0?c.settings.timeout:this._stripe.getApiField("timeout"),P={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:o,method:t,headers:Object.assign({},S),body:m,protocol:this._stripe.getApiField("protocol")};i(P).then(()=>{let B=this._stripe.getApiField("httpClient").makeRequest(P.host,P.port,P.path,P.method,P.headers,P.body,P.protocol,w),V=Date.now(),C=Yp({api_version:x,account:tm(S["Stripe-Account"]),idempotency_key:tm(S["Idempotency-Key"]),method:t,path:o,request_start_time:V}),L=b||0,M=this._getMaxNetworkRetries(c.settings||{});this._stripe._emitter.emit("request",C),B.then(D=>e._shouldRetry(D,L,M)?g(h,x,S,L,WN(D.getHeaders()["retry-after"])):c.streaming&&D.getStatusCode()<400?this._streamingResponseHandler(C,u,l)(D):this._jsonResponseHandler(C,f,u,l)(D)).catch(D=>{if(e._shouldRetry(null,L,M,D))return g(h,x,S,L,null);{let U=D.code&&D.code===Bt.TIMEOUT_ERROR_CODE;return l(new Tu({message:U?`Request aborted due to timeout being reached (${w}ms)`:e._generateConnectionErrorMessage(L),detail:D}))}})}).catch(B=>{throw new bt({message:"Unable to authenticate the request",exception:B})})},"makeRequest"),v=a((x,S)=>{if(x)return l(x);m=S,this._stripe.getClientUserAgent(b=>{var w,P,B;let V=this._stripe.getApiField("version"),C=this._makeHeaders({contentType:f=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(m).length,apiVersion:V,clientUserAgent:b,method:t,userSuppliedHeaders:(w=c.headers)!==null&&w!==void 0?w:null,userSuppliedSettings:(P=c.settings)!==null&&P!==void 0?P:{},stripeAccount:(B=c.stripeAccount)!==null&&B!==void 0?B:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(c.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:f});h(V,C,0)})},"prepareAndMakeRequest");if(d)d(t,n,c.headers,v);else{let x;f=="v2"?x=n?JN(n):"":x=ko(n||{},f),v(null,x)}}};var mm=class{static{a(this,"V1Iterator")}constructor(t,r,o,n){this.index=0,this.pagePromise=t,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=o,this.stripeResource=n}async iterate(t){if(!(t&&t.data&&typeof t.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=e1(this.requestArgs);if(this.index<t.data.length){let o=r?t.data.length-1-this.index:this.index,n=t.data[o];return this.index+=1,{value:n,done:!1}}else if(t.has_more){this.index=0,this.pagePromise=this.getNextPage(t);let o=await this.pagePromise;return this.iterate(o)}return{done:!0,value:void 0}}getNextPage(t){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let t=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=t,t}},kS=class extends mm{static{a(this,"V1ListIterator")}getNextPage(t){let r=e1(this.requestArgs),o=JJ(t,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:o})}},PS=class extends mm{static{a(this,"V1SearchIterator")}getNextPage(t){if(!t.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:t.next_page})}},$S=class{static{a(this,"V2ListIterator")}constructor(t,r,o,n){this.currentPageIterator=(async()=>(await t).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await t).next_page_url||null)(),this.requestArgs=r,this.spec=o,this.stripeResource=n}async turnPage(){let t=await this.nextPageUrl;if(!t)return null;this.spec.fullPath=t;let r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let o=(await this.currentPageIterator).next();if(!o.done)return{done:!1,value:o.value}}let t=await this.turnPage();if(!t)return{done:!0,value:void 0};let r=t.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}},YN=a((e,t,r,o)=>{let n=za(r.fullPath||r.path);return n!=="v2"&&r.methodType==="search"?ES(new PS(o,t,r,e)):n!=="v2"&&r.methodType==="list"?ES(new kS(o,t,r,e)):n==="v2"&&r.methodType==="list"?ES(new $S(o,t,r,e)):null},"makeAutoPaginationMethods"),ES=a(e=>{let t=WJ((...n)=>e.next(...n)),r=QJ(t),o={autoPagingEach:t,autoPagingToArray:r,next:a(()=>e.next(),"next"),return:a(()=>({}),"return"),[HJ()]:()=>o};return o},"makeAutoPaginationMethodsFromIterator");function HJ(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}a(HJ,"getAsyncIteratorSymbol");function GJ(e){if(e.length<2)return null;let t=e[1];if(typeof t!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}a(GJ,"getDoneCallback");function KJ(e){if(e.length===0)return;let t=e[0];if(typeof t!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(t.length===2)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return a(function(o,n){let i=t(o);n(i)},"_onItem")}a(KJ,"getItemCallback");function JJ(e,t){let r=t?0:e.data.length-1,o=e.data[r],n=o&&o.id;if(!n)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return n}a(JJ,"getLastId");function WJ(e){return a(function(){let r=[].slice.call(arguments),o=KJ(r),n=GJ(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let i=XJ(e,o);return bu(i,n)},"autoPagingEach")}a(WJ,"makeAutoPagingEach");function QJ(e){return a(function(r,o){let n=r&&r.limit;if(!n)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(n>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((c,u)=>{let l=[];e(d=>{if(l.push(d),l.length>=n)return!1}).then(()=>{c(l)}).catch(u)});return bu(i,o)},"autoPagingToArray")}a(QJ,"makeAutoPagingToArray");function XJ(e,t){return new Promise((r,o)=>{function n(i){if(i.done){r();return}let c=i.value;return new Promise(u=>{t(c,u)}).then(u=>u===!1?n({done:!0,value:void 0}):e().then(n))}a(n,"handleIteration"),e().then(n).catch(o)})}a(XJ,"wrapAsyncIteratorWithCallback");function e1(e){let t=[].slice.call(e);return!!Da(t).ending_before}a(e1,"isReverseIteration");function t1(e){if(e.path!==void 0&&e.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){let r=typeof t[t.length-1]=="function"&&t.pop();e.urlParams=FN(e.fullPath||this.createResourcePathWithSymbols(e.path||""));let o=bu(this._makeRequest(t,e,{}),r);return Object.assign(o,YN(this,t,e,o)),o}}a(t1,"stripeMethod");y.extend=BN;y.method=t1;y.MAX_BUFFERED_REQUEST_METRICS=100;function y(e,t){if(this._stripe=e,t)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Qp(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=Qp(this.path),this.initialize(...arguments)}a(y,"StripeResource");y.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){let r=[this.basePath(t),this.path(t)];if(typeof e=="function"){let o=e(t);o&&r.push(o)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts(e){return e.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(e,t,r){var o;let n=(t.method||"GET").toUpperCase(),i=t.usage||[],c=t.urlParams||[],u=t.encode||(C=>C),l=!!t.fullPath,d=Qp(l?t.fullPath:t.path||""),p=l?t.fullPath:this.createResourcePathWithSymbols(t.path),m=[].slice.call(e),f=c.reduce((C,L)=>{let M=m.shift();if(typeof M!="string")throw new Error(`Stripe: Argument "${L}" must be a string, but got: ${M} (on API request to \`${n} ${p}\`)`);return C[L]=M,C},{}),g=Da(m),h=u(Object.assign({},g,r)),v=Xp(m),x=v.host||t.host,S=!!t.streaming||!!v.streaming;if(m.filter(C=>C!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${n} \`${p}\`)`);let b=l?d(f):this.createFullPath(d,f),w=Object.assign(v.headers,t.headers);t.validator&&t.validator(h,{headers:w});let P=t.method==="GET"||t.method==="DELETE";return{requestMethod:n,requestPath:b,bodyData:P?null:h,queryData:P?h:{},authenticator:(o=v.authenticator)!==null&&o!==void 0?o:null,headers:w,host:x??null,streaming:S,settings:v.settings,usage:i}},_makeRequest(e,t,r){return new Promise((o,n)=>{var i;let c;try{c=this._getRequestOpts(e,t,r)}catch(f){n(f);return}function u(f,g){f?n(f):o(t.transformResponseData?t.transformResponseData(g):g)}a(u,"requestCallback");let l=Object.keys(c.queryData).length===0,d=[c.requestPath,l?"":"?",ko(c.queryData,za(c.requestPath))].join(""),{headers:p,settings:m}=c;this._stripe._requestSender._request(c.requestMethod,c.host,d,c.bodyData,c.authenticator,{headers:p,settings:m,streaming:c.streaming},c.usage,u,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};var Eu=class e{static{a(this,"StripeContext")}constructor(t=[]){this._segments=[...t]}get segments(){return[...this._segments]}push(t){if(!t)throw new Error("Segment cannot be null or undefined");return new e([...this._segments,t])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new e(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(t){return t?new e(t.split("/")):new e([])}};function r1(e){let t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,m,f,g,h,v){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,m,f,g||t.DEFAULT_TOLERANCE,h,v)}catch(S){throw S instanceof $a&&(S.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),S}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,m,f,g,h,v){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,m,f,g||t.DEFAULT_TOLERANCE,h,v),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:a(function(p){let m=d(p),f=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(f)},"generateTestHeaderString"),generateTestHeaderStringAsync:a(async function(p){let m=d(p),f=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(f)},"generateTestHeaderStringAsync")},r={EXPECTED_SCHEME:"v1",verifyHeader(p,m,f,g,h,v){let{decodedHeader:x,decodedPayload:S,details:b,suspectPayloadType:w}=n(p,m,this.EXPECTED_SCHEME),P=/\s/.test(f);h=h||l();let B=h.computeHMACSignature(o(S,b),f);return i(S,x,b,B,g,w,P,v),!0},async verifyHeaderAsync(p,m,f,g,h,v){let{decodedHeader:x,decodedPayload:S,details:b,suspectPayloadType:w}=n(p,m,this.EXPECTED_SCHEME),P=/\s/.test(f);h=h||l();let B=await h.computeHMACSignatureAsync(o(S,b),f);return i(S,x,b,B,g,w,P,v)}};function o(p,m){return`${m.timestamp}.${p}`}a(o,"makeHMACContent");function n(p,m,f){if(!p)throw new Jr(m,p,{message:"No webhook payload was provided."});let g=typeof p!="string"&&!(p instanceof Uint8Array),h=new TextDecoder("utf8"),v=p instanceof Uint8Array?h.decode(p):p;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new Jr(m,p,{message:"No stripe-signature header value was provided."});let x=m instanceof Uint8Array?h.decode(m):m,S=c(x,f);if(!S||S.timestamp===-1)throw new Jr(x,v,{message:"Unable to extract timestamp and signatures from header"});if(!S.signatures.length)throw new Jr(x,v,{message:"No signatures found with expected scheme"});return{decodedPayload:v,decodedHeader:x,details:S,suspectPayloadType:g}}a(n,"parseEventDetails");function i(p,m,f,g,h,v,x,S){let b=!!f.signatures.filter(e.secureCompare.bind(e,g)).length,w=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,P=x?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!b)throw v?new Jr(m,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+w+`
`+P}):new Jr(m,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+w+`
`+P});let B=Math.floor((typeof S=="number"?S:Date.now())/1e3)-f.timestamp;if(h>0&&B>h)throw new Jr(m,p,{message:"Timestamp outside the tolerance zone"});return!0}a(i,"validateComputedSignature");function c(p,m){return typeof p!="string"?null:p.split(",").reduce((f,g)=>{let h=g.split("=");return h[0]==="t"&&(f.timestamp=parseInt(h[1],10)),h[0]===m&&f.signatures.push(h[1]),f},{timestamp:-1,signatures:[]})}a(c,"parseHeader");let u=null;function l(){return u||(u=e.createDefaultCryptoProvider()),u}a(l,"getCryptoProvider");function d(p){if(!p)throw new bt({message:"Options are required"});let m=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),f=p.scheme||r.EXPECTED_SCHEME,g=p.cryptoProvider||l(),h=`${m}.${p.payload}`,v=a(x=>`t=${m},${f}=${x}`,"generateHeaderString");return Object.assign(Object.assign({},p),{timestamp:m,scheme:f,cryptoProvider:g,payloadString:h,generateHeaderString:v})}return a(d,"prepareOptions"),t.signature=r,t}a(r1,"createWebhooks");var AS="2025-11-17.clover";var Qa={};$r(Qa,{Account:()=>BS,AccountLinks:()=>Lj,AccountSessions:()=>Fj,Accounts:()=>BS,ApplePayDomains:()=>Bj,ApplicationFees:()=>Vj,Apps:()=>T3,Balance:()=>Zj,BalanceSettings:()=>Gj,BalanceTransactions:()=>Jj,Billing:()=>I3,BillingPortal:()=>E3,Charges:()=>Wj,Checkout:()=>k3,Climate:()=>P3,ConfirmationTokens:()=>Qj,CountrySpecs:()=>Yj,Coupons:()=>eD,CreditNotes:()=>tD,CustomerSessions:()=>rD,Customers:()=>nD,Disputes:()=>oD,Entitlements:()=>$3,EphemeralKeys:()=>aD,Events:()=>cD,ExchangeRates:()=>lD,FileLinks:()=>dD,Files:()=>mD,FinancialConnections:()=>A3,Forwarding:()=>C3,Identity:()=>O3,InvoiceItems:()=>fD,InvoicePayments:()=>gD,InvoiceRenderingTemplates:()=>yD,Invoices:()=>vD,Issuing:()=>R3,Mandates:()=>_D,OAuth:()=>xD,PaymentAttemptRecords:()=>SD,PaymentIntents:()=>TD,PaymentLinks:()=>ID,PaymentMethodConfigurations:()=>ED,PaymentMethodDomains:()=>kD,PaymentMethods:()=>PD,PaymentRecords:()=>$D,Payouts:()=>AD,Plans:()=>CD,Prices:()=>OD,Products:()=>RD,PromotionCodes:()=>ND,Quotes:()=>jD,Radar:()=>N3,Refunds:()=>DD,Reporting:()=>j3,Reviews:()=>zD,SetupAttempts:()=>MD,SetupIntents:()=>UD,ShippingRates:()=>qD,Sigma:()=>D3,Sources:()=>LD,SubscriptionItems:()=>FD,SubscriptionSchedules:()=>BD,Subscriptions:()=>VD,Tax:()=>z3,TaxCodes:()=>HD,TaxIds:()=>GD,TaxRates:()=>KD,Terminal:()=>M3,TestHelpers:()=>U3,Tokens:()=>WD,Topups:()=>QD,Transfers:()=>XD,Treasury:()=>q3,V2:()=>L3,WebhookEndpoints:()=>YD});function YJ(e,t){for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;let o=r[0].toLowerCase()+r.substring(1),n=new t[r](e);this[o]=n}}a(YJ,"ResourceNamespace");function pt(e,t){return function(r){return new YJ(r,t)}}a(pt,"resourceNamespace");var ni=y.method,n1=y.extend({retrieve:ni({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ni({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ni({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ni({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ni({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ni({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ni({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})});var o1=y.method,i1=y.extend({retrieve:o1({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:o1({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})});var Fa=y.method,a1=y.extend({create:Fa({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:Fa({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:Fa({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:Fa({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})});var e3=y.method,s1=y.extend({find:e3({method:"GET",fullPath:"/v1/tax/associations/find"})});var ku=y.method,c1=y.extend({retrieve:ku({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ku({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ku({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ku({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ku({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var oi=y.method,u1=y.extend({create:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:oi({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})});var CS=y.method,l1=y.extend({create:CS({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:CS({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:CS({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var fm=y.method,d1=y.extend({create:fm({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:fm({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:fm({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:fm({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var hm=y.method,p1=y.extend({create:hm({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:hm({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:hm({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:hm({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var Pu=y.method,m1=y.extend({deliverCard:Pu({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Pu({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Pu({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Pu({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:Pu({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})});var gm=y.method,f1=y.extend({create:gm({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:gm({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:gm({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:gm({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var $u=y.method,h1=y.extend({create:$u({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:$u({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:$u({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:$u({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:$u({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var t3=y.method,g1=y.extend({create:t3({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})});var r3=y.method,y1=y.extend({create:r3({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var n3=y.method,v1=y.extend({retrieve:n3({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})});var _1=y.method,b1=y.extend({retrieve:_1({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:_1({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})});var Ba=y.method,x1=y.extend({create:Ba({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:Ba({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:Ba({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:Ba({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})});var OS=y.method,w1=y.extend({create:OS({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:OS({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:OS({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var o3=y.method,S1=y.extend({fundCashBalance:o3({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var RS=y.method,T1=y.extend({create:RS({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:RS({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:RS({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var Au=y.method,I1=y.extend({create:Au({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Au({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Au({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Au({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Au({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var E1=y.method,k1=y.extend({retrieve:E1({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:E1({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var Po=y.method,P1=y.extend({create:Po({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Po({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Po({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Po({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Po({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Po({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Po({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Po({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})});var NS=y.method,$1=y.extend({retrieve(...e){return NS({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:a(r=>this.addFetchRelatedObjectIfNeeded(r),"transformResponseData")}).apply(this,e)},list(...e){return NS({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:a(r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))}),"transformResponseData")}).apply(this,e)},addFetchRelatedObjectIfNeeded(e){return!e.related_object||!e.related_object.url?e:Object.assign(Object.assign({},e),{fetchRelatedObject:a(()=>NS({method:"GET",fullPath:e.related_object.url}).apply(this,[{stripeContext:e.context}]),"fetchRelatedObject")})}});var ym=y.method,A1=y.extend({create:ym({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:ym({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:ym({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:ym({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})});var ii=y.method,C1=y.extend({create:ii({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ii({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ii({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ii({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ii({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ii({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ii({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var jS=y.method,O1=y.extend({fail:jS({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:jS({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:jS({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var vm=y.method,R1=y.extend({create:vm({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:vm({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:vm({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:vm({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var Cu=y.method,N1=y.extend({create:Cu({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:Cu({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:Cu({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:Cu({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:Cu({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var i3=y.method,j1=y.extend({create:i3({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})});var a3=y.method,D1=y.extend({create:a3({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})});var s3=y.method,z1=y.extend({create:s3({method:"POST",fullPath:"/v2/billing/meter_event_session"})});var c3=y.method,M1=y.extend({create:c3({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})});var u3=y.method,U1=y.extend({create:u3({method:"POST",fullPath:"/v1/billing/meter_events"})});var l3=y.method,q1=y.extend({create:l3({method:"POST",fullPath:"/v2/billing/meter_events"})});var ai=y.method,L1=y.extend({create:ai({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:ai({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:ai({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:ai({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:ai({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:ai({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:ai({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})});var d3=y.method,F1=y.extend({create:d3({method:"POST",fullPath:"/v1/terminal/onboarding_links"})});var Ou=y.method,B1=y.extend({create:Ou({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Ou({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Ou({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Ou({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Ou({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})});var _m=y.method,V1=y.extend({update:_m({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:_m({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:_m({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:_m({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var bm=y.method,Z1=y.extend({create:bm({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:bm({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:bm({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:bm({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var xm=y.method,H1=y.extend({update:xm({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:xm({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:xm({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:xm({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var wm=y.method,G1=y.extend({create:wm({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:wm({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:wm({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:wm({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var Sm=y.method,K1=y.extend({create:Sm({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:Sm({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:Sm({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:Sm({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})});var DS=y.method,J1=y.extend({activate:DS({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:DS({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:DS({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})});var W1=y.method,Q1=y.extend({retrieve:W1({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:W1({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})});var X1=y.method,Y1=y.extend({retrieve:X1({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:X1({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})});var Er=y.method,ej=y.extend({create:Er({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Er({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Er({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Er({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Er({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var zS=y.method,tj=y.extend({presentPaymentMethod:zS({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:zS({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:zS({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})});var p3=y.method,rj=y.extend({create:p3({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var nj=y.method,oj=y.extend({retrieve:nj({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:nj({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var m3=y.method,ij=y.extend({create:m3({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var aj=y.method,sj=y.extend({retrieve:aj({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:aj({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var f3=y.method,cj=y.extend({expire:f3({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var Tm=y.method,uj=y.extend({create:Tm({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Tm({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Tm({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Tm({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})});var MS=y.method,lj=y.extend({create:MS({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:MS({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:MS({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var dj=y.method,pj=y.extend({retrieve:dj({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:dj({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var US=y.method,mj=y.extend({create:US({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:US({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:US({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})});var fj=y.method,hj=y.extend({retrieve:fj({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:fj({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var Im=y.method,gj=y.extend({create:Im({method:"POST",fullPath:"/v1/apps/secrets"}),list:Im({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Im({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Im({method:"GET",fullPath:"/v1/apps/secrets/find"})});var h3=y.method,yj=y.extend({create:h3({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var Va=y.method,vj=y.extend({create:Va({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Va({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Va({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Va({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Va({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Va({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var _j=y.method,bj=y.extend({create:_j({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:_j({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var xj=y.method,wj=y.extend({retrieve:xj({method:"GET",fullPath:"/v1/tax/settings"}),update:xj({method:"POST",fullPath:"/v1/tax/settings"})});var Sj=y.method,Tj=y.extend({retrieve:Sj({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:Sj({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})});var Ru=y.method,Ij=y.extend({create:Ru({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Ru({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Ru({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Ru({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Ru({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var qS=y.method,Ej=y.extend({retrieve:qS({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:qS({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:qS({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})});var kj=y.method,Pj=y.extend({retrieve:kj({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:kj({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var $j=y.method,Aj=y.extend({retrieve:$j({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:$j({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})});var LS=y.method,Cj=y.extend({retrieve:LS({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:LS({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:LS({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var Em=y.method,Oj=y.extend({retrieve:Em({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Em({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Em({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Em({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var FS=y.method,Rj=y.extend({createForceCapture:FS({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:FS({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:FS({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})});var Nj=y.method,jj=y.extend({retrieve:Nj({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Nj({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var km=y.method,Dj=y.extend({create:km({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:km({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:km({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:km({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var Nu=y.method,zj=y.extend({create:Nu({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:Nu({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:Nu({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:Nu({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:Nu({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var Mj=y.method,Uj=y.extend({retrieve:Mj({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Mj({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var Za=y.method,qj=y.extend({create:Za({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Za({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Za({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Za({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Za({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Za({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var xt=y.method,BS=y.extend({create:xt({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return typeof e=="string"?xt({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(e==null&&[].shift.apply([e,...t]),xt({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:xt({method:"POST",fullPath:"/v1/accounts/{account}"}),list:xt({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:xt({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:xt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:xt({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:xt({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:xt({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:xt({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:xt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:xt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:xt({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:xt({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:xt({method:"GET",fullPath:"/v1/account"}),retrieveCapability:xt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:xt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:xt({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:xt({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:xt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:xt({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var g3=y.method,Lj=y.extend({create:g3({method:"POST",fullPath:"/v1/account_links"})});var y3=y.method,Fj=y.extend({create:y3({method:"POST",fullPath:"/v1/account_sessions"})});var Pm=y.method,Bj=y.extend({create:Pm({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Pm({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Pm({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Pm({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var Ha=y.method,Vj=y.extend({retrieve:Ha({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Ha({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Ha({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Ha({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Ha({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Ha({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var v3=y.method,Zj=y.extend({retrieve:v3({method:"GET",fullPath:"/v1/balance"})});var Hj=y.method,Gj=y.extend({retrieve:Hj({method:"GET",fullPath:"/v1/balance_settings"}),update:Hj({method:"POST",fullPath:"/v1/balance_settings"})});var Kj=y.method,Jj=y.extend({retrieve:Kj({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:Kj({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var Ga=y.method,Wj=y.extend({create:Ga({method:"POST",fullPath:"/v1/charges"}),retrieve:Ga({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Ga({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Ga({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Ga({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Ga({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var _3=y.method,Qj=y.extend({retrieve:_3({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})});var Xj=y.method,Yj=y.extend({retrieve:Xj({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Xj({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var ju=y.method,eD=y.extend({create:ju({method:"POST",fullPath:"/v1/coupons"}),retrieve:ju({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:ju({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:ju({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:ju({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var $o=y.method,tD=y.extend({create:$o({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:$o({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:$o({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:$o({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:$o({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:$o({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:$o({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:$o({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var b3=y.method,rD=y.extend({create:b3({method:"POST",fullPath:"/v1/customer_sessions"})});var Je=y.method,nD=y.extend({create:Je({method:"POST",fullPath:"/v1/customers"}),retrieve:Je({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Je({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Je({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Je({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Je({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Je({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Je({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Je({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Je({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Je({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Je({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Je({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Je({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Je({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Je({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Je({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Je({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Je({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Je({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Je({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Je({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Je({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Je({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Je({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Je({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Je({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Je({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var $m=y.method,oD=y.extend({retrieve:$m({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:$m({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:$m({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:$m({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var iD=y.method,aD=y.extend({create:iD({method:"POST",fullPath:"/v1/ephemeral_keys",validator:a((e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")},"validator")}),del:iD({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var sD=y.method,cD=y.extend({retrieve:sD({method:"GET",fullPath:"/v1/events/{id}"}),list:sD({method:"GET",fullPath:"/v1/events",methodType:"list"})});var uD=y.method,lD=y.extend({retrieve:uD({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:uD({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var Am=y.method,dD=y.extend({create:Am({method:"POST",fullPath:"/v1/file_links"}),retrieve:Am({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Am({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Am({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var x3=a((e,t,r)=>{let o=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${o}`;let n=new TextEncoder,i=new Uint8Array(0),c=n.encode(`\r
`);function u(p){let m=i,f=p instanceof Uint8Array?p:new Uint8Array(n.encode(p));i=new Uint8Array(m.length+f.length+2),i.set(m),i.set(f,m.length),i.set(c,i.length-2)}a(u,"push");function l(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}a(l,"q");let d=HN(t);for(let p in d){if(!Object.prototype.hasOwnProperty.call(d,p))continue;let m=d[p];if(u(`--${o}`),Object.prototype.hasOwnProperty.call(m,"data")){let f=m;u(`Content-Disposition: form-data; name=${l(p)}; filename=${l(f.name||"blob")}`),u(`Content-Type: ${f.type||"application/octet-stream"}`),u(""),u(f.data)}else u(`Content-Disposition: form-data; name=${l(p)}`),u(""),u(m)}return u(`--${o}--`),i},"multipartDataGenerator");function pD(e,t,r,o){if(t=t||{},e!=="POST")return o(null,ko(t));this._stripe._platformFunctions.tryBufferData(t).then(n=>{let i=x3(e,n,r);return o(null,i)}).catch(n=>o(n,null))}a(pD,"multipartRequestDataProcessor");var VS=y.method,mD=y.extend({create:VS({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:VS({method:"GET",fullPath:"/v1/files/{file}"}),list:VS({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:pD});var Du=y.method,fD=y.extend({create:Du({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Du({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Du({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Du({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Du({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var hD=y.method,gD=y.extend({retrieve:hD({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:hD({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})});var Cm=y.method,yD=y.extend({retrieve:Cm({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Cm({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Cm({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Cm({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})});var Lt=y.method,vD=y.extend({create:Lt({method:"POST",fullPath:"/v1/invoices"}),retrieve:Lt({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:Lt({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:Lt({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:Lt({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:Lt({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:Lt({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:Lt({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var w3=y.method,_D=y.extend({retrieve:w3({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var bD=y.method,ZS="connect.stripe.com",xD=y.extend({basePath:"/",authorizeUrl(e,t){e=e||{},t=t||{};let r="oauth/authorize";return t.express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${ZS}/${r}?${ko(e)}`},token:bD({method:"POST",path:"oauth/token",host:ZS}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),bD({method:"POST",path:"oauth/deauthorize",host:ZS}).apply(this,[e,...t])}});var wD=y.method,SD=y.extend({retrieve:wD({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:wD({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})});var jr=y.method,TD=y.extend({create:jr({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:jr({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:jr({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:jr({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:jr({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:jr({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var zu=y.method,ID=y.extend({create:zu({method:"POST",fullPath:"/v1/payment_links"}),retrieve:zu({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:zu({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:zu({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:zu({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var Om=y.method,ED=y.extend({create:Om({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Om({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Om({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Om({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})});var Mu=y.method,kD=y.extend({create:Mu({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Mu({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Mu({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Mu({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Mu({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})});var Ka=y.method,PD=y.extend({create:Ka({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ka({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ka({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ka({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ka({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ka({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var Ao=y.method,$D=y.extend({retrieve:Ao({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:Ao({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:Ao({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})});var Ja=y.method,AD=y.extend({create:Ja({method:"POST",fullPath:"/v1/payouts"}),retrieve:Ja({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Ja({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Ja({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Ja({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Ja({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var Uu=y.method,CD=y.extend({create:Uu({method:"POST",fullPath:"/v1/plans"}),retrieve:Uu({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Uu({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Uu({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Uu({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var qu=y.method,OD=y.extend({create:qu({method:"POST",fullPath:"/v1/prices"}),retrieve:qu({method:"GET",fullPath:"/v1/prices/{price}"}),update:qu({method:"POST",fullPath:"/v1/prices/{price}"}),list:qu({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:qu({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var _n=y.method,RD=y.extend({create:_n({method:"POST",fullPath:"/v1/products"}),retrieve:_n({method:"GET",fullPath:"/v1/products/{id}"}),update:_n({method:"POST",fullPath:"/v1/products/{id}"}),list:_n({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:_n({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:_n({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:_n({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:_n({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:_n({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:_n({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Rm=y.method,ND=y.extend({create:Rm({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Rm({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Rm({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Rm({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var bn=y.method,jD=y.extend({create:bn({method:"POST",fullPath:"/v1/quotes"}),retrieve:bn({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:bn({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:bn({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:bn({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:bn({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:bn({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:bn({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:bn({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:bn({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var Lu=y.method,DD=y.extend({create:Lu({method:"POST",fullPath:"/v1/refunds"}),retrieve:Lu({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Lu({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Lu({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Lu({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var HS=y.method,zD=y.extend({retrieve:HS({method:"GET",fullPath:"/v1/reviews/{review}"}),list:HS({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:HS({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var S3=y.method,MD=y.extend({list:S3({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var si=y.method,UD=y.extend({create:si({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:si({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:si({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:si({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:si({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:si({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:si({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var Nm=y.method,qD=y.extend({create:Nm({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Nm({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Nm({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Nm({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var Fu=y.method,LD=y.extend({create:Fu({method:"POST",fullPath:"/v1/sources"}),retrieve:Fu({method:"GET",fullPath:"/v1/sources/{source}"}),update:Fu({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Fu({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Fu({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var Bu=y.method,FD=y.extend({create:Bu({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Bu({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Bu({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Bu({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Bu({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})});var Wa=y.method,BD=y.extend({create:Wa({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:Wa({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:Wa({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:Wa({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var Hn=y.method,VD=y.extend({create:Hn({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Hn({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Hn({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Hn({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Hn({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Hn({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:Hn({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:Hn({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Hn({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var ZD=y.method,HD=y.extend({retrieve:ZD({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:ZD({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var jm=y.method,GD=y.extend({create:jm({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:jm({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:jm({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:jm({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})});var Dm=y.method,KD=y.extend({create:Dm({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Dm({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Dm({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Dm({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var JD=y.method,WD=y.extend({create:JD({method:"POST",fullPath:"/v1/tokens"}),retrieve:JD({method:"GET",fullPath:"/v1/tokens/{token}"})});var Vu=y.method,QD=y.extend({create:Vu({method:"POST",fullPath:"/v1/topups"}),retrieve:Vu({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Vu({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Vu({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Vu({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var Co=y.method,XD=y.extend({create:Co({method:"POST",fullPath:"/v1/transfers"}),retrieve:Co({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Co({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Co({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Co({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Co({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Co({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Co({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var Zu=y.method,YD=y.extend({create:Zu({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Zu({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Zu({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Zu({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Zu({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var T3=pt("apps",{Secrets:gj}),I3=pt("billing",{Alerts:a1,CreditBalanceSummary:v1,CreditBalanceTransactions:b1,CreditGrants:x1,MeterEventAdjustments:j1,MeterEvents:U1,Meters:L1}),E3=pt("billingPortal",{Configurations:f1,Sessions:yj}),k3=pt("checkout",{Sessions:vj}),P3=pt("climate",{Orders:B1,Products:Y1,Suppliers:Tj}),$3=pt("entitlements",{ActiveEntitlements:i1,Features:A1}),A3=pt("financialConnections",{Accounts:n1,Sessions:bj,Transactions:Aj}),C3=pt("forwarding",{Requests:mj}),O3=pt("identity",{VerificationReports:Uj,VerificationSessions:qj}),R3=pt("issuing",{Authorizations:c1,Cardholders:d1,Cards:p1,Disputes:I1,PersonalizationDesigns:K1,PhysicalBundles:Q1,Tokens:Ej,Transactions:Cj}),N3=pt("radar",{EarlyFraudWarnings:k1,ValueListItems:Dj,ValueLists:zj}),j3=pt("reporting",{ReportRuns:lj,ReportTypes:pj}),D3=pt("sigma",{ScheduledQueryRuns:hj}),z3=pt("tax",{Associations:s1,Calculations:l1,Registrations:uj,Settings:wj,Transactions:Oj}),M3=pt("terminal",{Configurations:h1,ConnectionTokens:y1,Locations:N1,OnboardingLinks:F1,Readers:ej}),U3=pt("testHelpers",{ConfirmationTokens:g1,Customers:S1,Refunds:cj,TestClocks:Ij,Issuing:pt("issuing",{Authorizations:u1,Cards:m1,PersonalizationDesigns:J1,Transactions:Rj}),Terminal:pt("terminal",{Readers:tj}),Treasury:pt("treasury",{InboundTransfers:O1,OutboundPayments:V1,OutboundTransfers:H1,ReceivedCredits:rj,ReceivedDebits:ij})}),q3=pt("treasury",{CreditReversals:w1,DebitReversals:T1,FinancialAccounts:C1,InboundTransfers:R1,OutboundPayments:Z1,OutboundTransfers:G1,ReceivedCredits:oj,ReceivedDebits:sj,TransactionEntries:Pj,Transactions:jj}),L3=pt("v2",{Billing:pt("billing",{MeterEventAdjustments:D1,MeterEventSession:z1,MeterEventStream:M1,MeterEvents:q1}),Core:pt("core",{EventDestinations:P1,Events:$1})});var ez="api.stripe.com",tz="443",rz="/v1/",nz=AS,oz=8e4,iz=5,az=.5,F3=["name","version","url","partner_id"],sz=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],B3=a(e=>new pm(e,y.MAX_BUFFERED_REQUEST_METRICS),"defaultRequestSenderFactory");function cz(e,t=B3){r.PACKAGE_VERSION="20.0.0",r.API_VERSION=AS,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},GN()),r.StripeResource=y,r.StripeContext=Eu,r.resources=Qa,r.HttpClient=Bt,r.HttpClientResponse=To,r.CryptoProvider=So,r.webhooks=r1(e);function r(o,n={}){if(!(this instanceof r))return new r(o,n);let i=this._getPropsFromConfig(n);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let c=i.httpAgent||null;this._api={host:i.host||ez,port:i.port||tz,protocol:i.protocol||"https",basePath:rz,version:i.apiVersion||nz,timeout:em("timeout",i.timeout,oz),maxNetworkRetries:em("maxNetworkRetries",i.maxNetworkRetries,2),agent:c,httpClient:i.httpClient||(c?this._platformFunctions.createNodeHttpClient(c):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};let u=i.typescript||!1;u!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=u),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(o,i.authenticator),this.errors=lm,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=t(this),this.StripeResource=r.StripeResource}return a(r,"Stripe"),r.errors=lm,r.createNodeHttpClient=e.createNodeHttpClient,r.createFetchHttpClient=e.createFetchHttpClient,r.createNodeCryptoProvider=e.createNodeCryptoProvider,r.createSubtleCryptoProvider=e.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(o,n,i,c){return this._requestSender._rawRequest(o,n,i,c)},_setAuthenticator(o,n){if(o&&n)throw new Error("Can't specify both apiKey and authenticator");if(!o&&!n)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=o?Wp(o):n},_setAppInfo(o){if(o&&typeof o!="object")throw new Error("AppInfo must be an object.");if(o&&!o.name)throw new Error("AppInfo.name is required");o=o||{},this._appInfo=F3.reduce((n,i)=>(typeof o[i]=="string"&&(n=n||{},n[i]=o[i]),n),{})},_setApiField(o,n){this._api[o]=n},getApiField(o){return this._api[o]},setClientId(o){this._clientId=o},getClientId(){return this._clientId},getConstant:a(o=>{switch(o){case"DEFAULT_HOST":return ez;case"DEFAULT_PORT":return tz;case"DEFAULT_BASE_PATH":return rz;case"DEFAULT_API_VERSION":return nz;case"DEFAULT_TIMEOUT":return oz;case"MAX_NETWORK_RETRY_DELAY_SEC":return iz;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return az}return r[o]},"getConstant"),getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(o,n,i){let c=em(o,n,i);this._setApiField(o,c)},getMaxNetworkRetryDelay(){return iz},getInitialNetworkRetryDelay(){return az},getClientUserAgent(o){return this.getClientUserAgentSeeded(r.USER_AGENT,o)},getClientUserAgentSeeded(o,n){this._platformFunctions.getUname().then(i=>{var c;let u={};for(let d in o)Object.prototype.hasOwnProperty.call(o,d)&&(u[d]=encodeURIComponent((c=o[d])!==null&&c!==void 0?c:"null"));u.uname=encodeURIComponent(i||"UNKNOWN");let l=this.getApiField("httpClient");l&&(u.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(u.application=this._appInfo),n(JSON.stringify(u))})},getAppInfoAsString(){if(!this._appInfo)return"";let o=this._appInfo.name;return this._appInfo.version&&(o+=`/${this._appInfo.version}`),this._appInfo.url&&(o+=` (${this._appInfo.url})`),o},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let o in Qa)Object.prototype.hasOwnProperty.call(Qa,o)&&(this[ZN(o)]=new Qa[o](this))},_getPropsFromConfig(o){if(!o)return{};let n=typeof o=="string";if(!(o===Object(o)&&!Array.isArray(o))&&!n)throw new Error("Config must either be an object or a string");if(n)return{apiVersion:o};if(Object.keys(o).filter(u=>!sz.includes(u)).length>0)throw new Error(`Config object may only contain the following: ${sz.join(", ")}`);return o},parseEventNotification(o,n,i,c,u,l){let d=this.webhooks.constructEvent(o,n,i,c,u,l);return d.context&&(d.context=Eu.parse(d.context)),d.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${d.id}`,void 0,{stripeContext:d.context},["fetch_event"]),d.fetchRelatedObject=()=>d.related_object?this._requestSender._rawRequest("GET",d.related_object.url,void 0,{stripeContext:d.context},["fetch_related_object"]):Promise.resolve(null),d}},r}a(cz,"createStripe");var V3=cz(new dm),uz=V3;function Z3(){let e=process.env.STRIPE_SECRET_KEY;if(!e)throw new Error("STRIPE_SECRET_KEY environment variable is not set. Configure Stripe credentials.");return e}a(Z3,"getStripeSecretKey");var H3={apiVersion:"2025-11-17.clover",typescript:!0,appInfo:{name:"AegisWallet",version:"1.0.0",url:"https://aegiswallet.com.br"}},GS=null;function kr(){return GS||(GS=new uz(Z3(),H3)),GS}a(kr,"getStripeClient");var zm=class e{static{a(this,"StripeCustomerService")}static async createCustomer(t,r,o){let n=kr();try{let i=await n.customers.create({email:r,name:o,metadata:{clerkUserId:t}});return k.info("Stripe customer created",{clerkUserId:t,stripeCustomerId:i.id}),i.id}catch(i){throw k.error("Failed to create Stripe customer",{clerkUserId:t,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao criar cliente no Stripe")}}static async getOrCreateCustomer(t,r,o){let n=kr();try{let i=await n.customers.search({query:`metadata['clerkUserId']:'${t}'`,limit:1});if(i.data.length>0)return i.data[0].id;let c=await n.customers.list({email:r,limit:1});return c.data.length>0?(await n.customers.update(c.data[0].id,{metadata:{clerkUserId:t}}),c.data[0].id):await e.createCustomer(t,r,o)}catch(i){throw k.error("Failed to get/create Stripe customer",{clerkUserId:t,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao processar cliente no Stripe")}}static async updateCustomer(t,r){let o=kr();try{await o.customers.update(t,r)}catch(n){throw k.error("Failed to update Stripe customer",{stripeCustomerId:t,error:n instanceof Error?n.message:"Unknown error"}),n}}static async deleteCustomer(t){let r=kr();try{let o=await r.subscriptions.list({customer:t,status:"active"});for(let n of o.data)await r.subscriptions.cancel(n.id);await r.customers.del(t),k.info("Stripe customer deleted",{stripeCustomerId:t})}catch(o){throw k.error("Failed to delete Stripe customer",{stripeCustomerId:t,error:o instanceof Error?o.message:"Unknown error"}),o}}};var G3=s.object({STRIPE_SECRET_KEY:s.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_PUBLISHABLE_KEY:s.string().min(1,"STRIPE_PUBLISHABLE_KEY is required"),STRIPE_WEBHOOK_SECRET:s.string().min(1,"STRIPE_WEBHOOK_SECRET is required"),STRIPE_SUCCESS_URL:s.string().url("STRIPE_SUCCESS_URL must be a valid URL"),STRIPE_CANCEL_URL:s.string().url("STRIPE_CANCEL_URL must be a valid URL"),STRIPE_PORTAL_RETURN_URL:s.string().url("STRIPE_PORTAL_RETURN_URL must be a valid URL"),STRIPE_PRICE_BASIC_MONTHLY:s.string().min(1,"STRIPE_PRICE_BASIC_MONTHLY is required"),STRIPE_PRICE_ADVANCED_MONTHLY:s.string().min(1,"STRIPE_PRICE_ADVANCED_MONTHLY is required")}),xn;try{xn=G3.parse(process.env)}catch{xn=process.env}var ci={secretKey:xn?.STRIPE_SECRET_KEY,publishableKey:xn?.STRIPE_PUBLISHABLE_KEY,webhookSecret:xn?.STRIPE_WEBHOOK_SECRET,successUrl:xn?.STRIPE_SUCCESS_URL,cancelUrl:xn?.STRIPE_CANCEL_URL,portalReturnUrl:xn?.STRIPE_PORTAL_RETURN_URL},lz={BASIC_MONTHLY:xn?.STRIPE_PRICE_BASIC_MONTHLY,ADVANCED_MONTHLY:xn?.STRIPE_PRICE_ADVANCED_MONTHLY},K3=[{id:"free",name:"Gratuito",priceCents:0,features:["Dashboard b\xE1sico","1 conta banc\xE1ria","Transa\xE7\xF5es limitadas"],aiModels:[]},{id:"basic",name:"B\xE1sico",priceCents:5900,features:["Chat IA (Gemini Flash)","3 contas banc\xE1rias","Automa\xE7\xF5es b\xE1sicas"],aiModels:["gemini-flash"]},{id:"advanced",name:"Avan\xE7ado",priceCents:11900,features:["Todas as IAs","Contas ilimitadas","API access","Suporte priorit\xE1rio"],aiModels:["gpt-4o","claude-sonnet","gemini-pro","gemini-flash"]}],Xa=a(e=>K3.find(t=>t.id===e),"getPlanById"),Hu=a(e=>e===lz.BASIC_MONTHLY?Xa("basic"):e===lz.ADVANCED_MONTHLY?Xa("advanced"):null,"getPlanByStripePrice"),dz=a(e=>{let t=Xa(e);return t?t.aiModels.length>0:!1},"canAccessAI"),pz=a(e=>{let t=Xa(e);return t?t.aiModels:[]},"getAllowedModels");var Gn=class{static{a(this,"StripeSubscriptionService")}static async createCheckoutSession(t,r,o,n,i){let c=kr(),u=Rt();try{let[l]=await u.select().from(R).where(A(R.id,t)).limit(1);if(!l?.email)throw new Error("Usu\xE1rio n\xE3o encontrado ou sem email");let d=await zm.getOrCreateCustomer(t,l.email,l.fullName||void 0),p=i||ci.successUrl?.replace(/\/billing\/success$/,"")||"https://app.aegiswallet.com.br",m=o||`${p}/billing/success`,f=n||`${p}/billing/cancel`,g=await c.checkout.sessions.create({customer:d,mode:"subscription",payment_method_types:["card"],line_items:[{price:r,quantity:1}],success_url:m,cancel_url:f,metadata:{clerkUserId:t},allow_promotion_codes:!0});if(!g.url)throw new Error("Stripe n\xE3o retornou URL de checkout v\xE1lida");return{sessionId:g.id,checkoutUrl:g.url}}catch(l){throw k.error("Failed to create checkout session",{userId:t,priceId:r,requestOrigin:i,error:l instanceof Error?l.message:"Unknown error"}),l}}static async createPortalSession(t,r){let o=kr();try{return{portalUrl:(await o.billingPortal.sessions.create({customer:t,return_url:r||ci.portalReturnUrl||"https://app.aegiswallet.com.br/settings/billing"})).url}}catch(n){throw k.error("Failed to create portal session",{stripeCustomerId:t,error:n instanceof Error?n.message:"Unknown error"}),n}}static async getSubscription(t){let r=Rt();try{let o=await r.select({subscription:Ce,plan:Qt}).from(Ce).leftJoin(Qt,A(Ce.planId,Qt.id)).where(A(Ce.userId,t)).limit(1);if(o.length===0)return k.info("No subscription found for user",{userId:t}),null;let{subscription:n,plan:i}=o[0];return n?(k.info("Retrieved subscription for user",{userId:t,subscriptionId:n.id,status:n.status,planId:n.planId}),{subscription:n,plan:i||null}):(k.warn("Subscription record is null despite query success",{userId:t}),null)}catch(o){throw k.error("Failed to get subscription",{userId:t,error:o instanceof Error?o.message:"Unknown error"}),o}}static async syncSubscriptionFromStripe(t){let r=kr(),o=Rt();try{let i=await r.subscriptions.retrieve(t),c=typeof i.customer=="string"?i.customer:i.customer.id,[u]=await o.select().from(Ce).where(A(Ce.stripeCustomerId,c)).limit(1);if(!u)return k.warn("Subscription sync skipped: User not found for customer",{customerId:c,stripeSubscriptionId:t}),null;let l=i.items.data[0]?.price?.id;if(!l)throw k.error("No price ID found in subscription",{stripeSubscriptionId:t,items:i.items.data.length}),new Error("Pre\xE7o n\xE3o encontrado na assinatura do Stripe");let d=Hu(l),p=d?d.id:"free",m=i.status,f=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m,g=i.items.data[0];if(!g)throw k.error("No subscription items found",{stripeSubscriptionId:t}),new Error("Item da assinatura n\xE3o encontrado");let h=g.current_period_start,v=g.current_period_end;if(!(h&&v))throw k.error("Missing billing period dates",{stripeSubscriptionId:t,periodStart:h,periodEnd:v}),new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let x={stripeSubscriptionId:i.id,planId:p,status:f,currentPeriodStart:new Date(h*1e3),currentPeriodEnd:new Date(v*1e3)},[S]=await o.update(Ce).set({...x,cancelAtPeriodEnd:i.cancel_at_period_end,canceledAt:i.canceled_at?new Date(i.canceled_at*1e3):null,trialStart:i.trial_start?new Date(i.trial_start*1e3):null,trialEnd:i.trial_end?new Date(i.trial_end*1e3):null,updatedAt:new Date}).where(A(Ce.id,u.id)).returning();return k.info("Subscription synced from Stripe",{userId:u.userId,subscriptionId:i.id,status:f,planId:p,previousStatus:u.status,previousPlanId:u.planId}),S}catch(n){throw k.error("Failed to sync subscription",{stripeSubscriptionId:t,error:n instanceof Error?n.message:"Unknown error",stack:n instanceof Error?n.stack:void 0}),n}}static async cancelSubscription(t,r=!1){let o=kr(),n=Rt();try{let[i]=await n.select().from(Ce).where(A(Ce.userId,t)).limit(1);if(!i?.stripeSubscriptionId)throw new Error("Assinatura n\xE3o encontrada");return r?await o.subscriptions.cancel(i.stripeSubscriptionId):await o.subscriptions.update(i.stripeSubscriptionId,{cancel_at_period_end:!0}),!0}catch(i){throw k.error("Failed to cancel subscription",{userId:t,error:i instanceof Error?i.message:"Unknown error"}),i}}};var mz=new ge,J3=s.object({priceId:s.string().min(1),successUrl:s.string().url().optional(),cancelUrl:s.string().url().optional()});mz.post("/",X,ue({windowMs:6e4,max:30}),Ee("json",J3),async e=>{let{user:t}=e.get("auth"),{priceId:r,successUrl:o,cancelUrl:n}=e.req.valid("json"),i=e.get("requestId");if(!t?.id)return k.warn("Checkout request missing user authentication",{requestId:i}),e.json({error:"Usu\xE1rio n\xE3o autenticado"},401);if(!t?.email)return k.warn("Checkout request missing user email",{requestId:i,userId:t.id}),e.json({error:"Email do usu\xE1rio n\xE3o encontrado"},400);try{let c=e.req.header("origin")||e.req.header("referer")?.replace(/\/$/,""),u=await Gn.createCheckoutSession(t.id,r,o,n,c);return k.info("Checkout session created successfully",{userId:t.id,priceId:r,requestOrigin:c,sessionId:u.sessionId}),e.json({data:u,meta:{requestId:i}})}catch(c){let u=c instanceof Error?c.message:"Unknown error";return k.error("Checkout creation failed",{userId:t.id,priceId:r,error:u,requestId:i}),u.includes("Usu\xE1rio n\xE3o encontrado")?e.json({error:"Usu\xE1rio n\xE3o encontrado"},404):u.includes("plano")||u.includes("price")?e.json({error:"Plano inv\xE1lido ou n\xE3o encontrado"},400):u.includes("Stripe")?e.json({error:"Servi\xE7o de pagamento temporariamente indispon\xEDvel"},503):e.json({error:"Falha ao criar checkout"},500)}});var fz=mz;var KS=new ge,W3=s.object({limit:s.coerce.number().min(1).max(100).default(10),offset:s.coerce.number().min(0).default(0),status:s.enum(["draft","open","paid","void","uncollectible"]).optional()});KS.get("/",X,ue({windowMs:6e4,max:30}),Ee("query",W3),async e=>{let{user:t}=e.get("auth"),{limit:r,offset:o,status:n}=e.req.valid("query"),i=e.get("requestId");try{let c=[],[u]=[{count:0}];return e.json({data:{invoices:c,total:Number(u?.count||0),hasMore:!1},meta:{requestId:i}})}catch(c){return k.error("Failed to fetch invoices",{userId:t.id,error:c instanceof Error?c.message:"Unknown error",requestId:i}),e.json({error:"Falha ao buscar faturas"},500)}});KS.get("/:id/pdf",X,ue({windowMs:6e4,max:10}),async e=>{let{user:t}=e.get("auth"),r=e.req.param("id"),o=e.get("requestId");try{k.info("Invoice PDF download requested",{userId:t.id,invoiceId:r,requestId:o});let n=new Blob(["Mock PDF content"],{type:"application/pdf"});return new Response(n,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="fatura-${r}.pdf"`}})}catch(n){return k.error("Failed to download invoice PDF",{userId:t.id,invoiceId:r,error:n instanceof Error?n.message:"Unknown error",requestId:o}),e.json({error:"Falha ao baixar fatura"},500)}});var hz=KS;var gz=new ge,Q3=s.object({limit:s.coerce.number().min(1).max(100).default(10),offset:s.coerce.number().min(0).default(0)});gz.get("/",X,ue({windowMs:6e4,max:30}),Ee("query",Q3),async e=>{let{user:t}=e.get("auth"),{limit:r,offset:o}=e.req.valid("query"),n=e.get("requestId"),i=Rt();try{let c=await i.select().from(Et).where(A(Et.userId,t.id)).orderBy(ot(Et.createdAt)).limit(r).offset(o),[u]=await i.select({count:I`count(*)`}).from(Et).where(A(Et.userId,t.id));return e.json({data:{payments:c,total:Number(u.count)},meta:{requestId:n}})}catch(c){return k.error("Failed to fetch payment history",{userId:t.id,error:c instanceof Error?c.message:"Unknown error",requestId:n}),e.json({error:"Falha ao buscar hist\xF3rico de pagamentos"},500)}});var yz=gz;var Gu=new ge,X3=s.object({type:s.enum(["card","pix","bank_account"]),isDefault:s.boolean().optional(),cardNumber:s.string().optional(),expiryMonth:s.number().min(1).max(12).optional(),expiryYear:s.number().min(new Date().getFullYear()).optional(),cvc:s.string().optional(),pixKey:s.string().optional(),pixKeyType:s.enum(["cpf","cnpj","phone","email","random"]).optional(),bankCode:s.string().optional(),accountNumber:s.string().optional(),accountType:s.enum(["checking","savings"]).optional(),accountHolderName:s.string().optional(),documentNumber:s.string().optional()}),Y3=s.object({isDefault:s.boolean()});Gu.get("/",X,ue({windowMs:6e4,max:30}),async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");try{let o=[];return e.json({data:{paymentMethods:o,hasMore:!1,total:0},meta:{requestId:r}})}catch(o){return k.error("Failed to fetch payment methods",{userId:t.id,error:o instanceof Error?o.message:"Unknown error",requestId:r}),e.json({error:"Falha ao buscar m\xE9todos de pagamento"},500)}});Gu.post("/",X,ue({windowMs:6e4,max:10}),Ee("json",X3),async e=>{let{user:t}=e.get("auth"),r=e.req.valid("json"),o=e.get("requestId");try{return k.info("Payment method addition requested",{userId:t.id,type:r.type,requestId:o}),e.json({data:{paymentMethod:{id:"pm_mock_id",type:r.type,isDefault:r.isDefault,createdAt:new Date().toISOString()}},meta:{requestId:o}})}catch(n){return k.error("Failed to add payment method",{userId:t.id,error:n instanceof Error?n.message:"Unknown error",requestId:o}),e.json({error:"Falha ao adicionar m\xE9todo de pagamento"},500)}});Gu.put("/:id",X,ue({windowMs:6e4,max:20}),Ee("json",Y3),async e=>{let{user:t}=e.get("auth"),r=e.req.param("id"),o=e.req.valid("json"),n=e.get("requestId");try{return k.info("Payment method update requested",{userId:t.id,paymentMethodId:r,data:o,requestId:n}),e.json({data:{paymentMethod:{id:r,isDefault:o.isDefault}},meta:{requestId:n}})}catch(i){return k.error("Failed to update payment method",{userId:t.id,paymentMethodId:r,error:i instanceof Error?i.message:"Unknown error",requestId:n}),e.json({error:"Falha ao atualizar m\xE9todo de pagamento"},500)}});Gu.delete("/:id",X,ue({windowMs:6e4,max:10}),async e=>{let{user:t}=e.get("auth"),r=e.req.param("id"),o=e.get("requestId");try{return k.info("Payment method deletion requested",{userId:t.id,paymentMethodId:r,requestId:o}),e.json({data:{success:!0},meta:{requestId:o}})}catch(n){return k.error("Failed to remove payment method",{userId:t.id,paymentMethodId:r,error:n instanceof Error?n.message:"Unknown error",requestId:o}),e.json({error:"Falha ao remover m\xE9todo de pagamento"},500)}});var vz=Gu;var _z=new ge;_z.get("/",async e=>{let t=e.get("requestId"),r=Rt();try{let n=(await r.select().from(Qt).where(A(Qt.isActive,!0)).orderBy(Xn(Qt.displayOrder))).map(i=>({...i,priceFormatted:new Intl.NumberFormat("pt-BR",{style:"currency",currency:i.currency}).format(i.priceCents/100)}));return e.json({data:{plans:n},meta:{requestId:t}})}catch(o){return k.error("Failed to fetch plans",{error:o instanceof Error?o.message:"Unknown error",requestId:t}),e.json({error:"Falha ao buscar planos"},500)}});var bz=_z;var xz=new ge,eW=s.object({returnUrl:s.string().url().optional()});xz.post("/",X,ue({windowMs:6e4,max:10}),Ee("json",eW),async e=>{let{user:t}=e.get("auth"),{returnUrl:r}=e.req.valid("json"),o=e.get("requestId");try{let n=await Gn.getSubscription(t.id);if(!n?.subscription?.stripeCustomerId)return e.json({error:"Assinatura n\xE3o encontrada"},400);let i=await Gn.createPortalSession(n.subscription.stripeCustomerId,r);return k.info("Portal session created",{userId:t.id}),e.json({data:i,meta:{requestId:o}})}catch(n){return k.error("Portal creation failed",{userId:t.id,error:n instanceof Error?n.message:"Unknown error",requestId:o}),e.json({error:"Falha ao criar portal"},500)}});var wz=xz;var Sz=new ge;Sz.get("/",X,ue({windowMs:6e4,max:30}),async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");try{let o=await Gn.getSubscription(t.id),n=o?.plan||Xa("free"),i=n?.id||"free",c=dz(i),u=pz(i);return e.json({data:{subscription:o?.subscription||null,plan:n,canAccessAI:c,allowedModels:u},meta:{requestId:r}})}catch(o){return k.error("Failed to get subscription",{userId:t.id,error:o instanceof Error?o.message:"Unknown error",requestId:r}),e.json({error:"Falha ao buscar assinatura"},500)}});var Tz=Sz;var wn=class{static{a(this,"StripeWebhookService")}static constructEvent(t,r){let o=kr();if(!ci.webhookSecret)throw k.error("Webhook secret not configured",{hasConfig:!!ci.webhookSecret}),new Error("STRIPE_WEBHOOK_SECRET n\xE3o est\xE1 configurado. Verifique as vari\xE1veis de ambiente.");try{let n=o.webhooks.constructEvent(t,r,ci.webhookSecret);return k.info("Webhook event constructed successfully",{type:n.type,id:n.id}),n}catch(n){let i=n instanceof Error?n.message:"Unknown error";throw k.error("Failed to construct webhook event",{error:i,signatureLength:r?.length}),new Error(`Falha ao validar webhook: ${i}`)}}static async handleCheckoutSessionCompleted(t){let r=Rt(),o=t.metadata?.clerkUserId,n=typeof t.customer=="string"?t.customer:t.customer?.id,i=typeof t.subscription=="string"?t.subscription:t.subscription?.id;if(!(o&&n&&i))throw k.warn("Checkout session missing required metadata",{sessionId:t.id,hasClerkUserId:!!o,hasCustomerId:!!n,hasSubscriptionId:!!i}),new Error("Checkout session incompleto - metadados obrigat\xF3rios n\xE3o encontrados");try{let[c]=await r.select().from(Ce).where(A(Ce.stripeSubscriptionId,i)).limit(1);if(c){k.info("Checkout session already processed",{sessionId:t.id,subscriptionId:i,existingStatus:c.status});return}let l=await kr().subscriptions.retrieve(i),d=l.items.data[0]?.price?.id;if(!d)throw new Error("Price ID n\xE3o encontrado na assinatura do Stripe");let p=Hu(d),m=p?p.id:"free",f=l.items.data[0];if(!f)throw new Error("Item da assinatura n\xE3o encontrado");let g=f.current_period_start,h=f.current_period_end;if(!(g&&h))throw new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let v=l.status,x=v==="incomplete"||v==="incomplete_expired"||v==="paused"?"canceled":v;await r.update(Ce).set({stripeCustomerId:n,stripeSubscriptionId:i,planId:m,status:x,currentPeriodStart:new Date(g*1e3),currentPeriodEnd:new Date(h*1e3),updatedAt:new Date}).where(A(Ce.userId,o)),k.info("Checkout session completed successfully",{clerkUserId:o,sessionId:t.id,subscriptionId:i,status:x,planId:m})}catch(c){let u=c instanceof Error?c.message:"Unknown error";throw k.error("Failed to process checkout session completion",{sessionId:t.id,clerkUserId:o,error:u}),c}}static async handleSubscriptionCreated(t){}static async handleSubscriptionUpdated(t){let r=Rt(),o=typeof t.customer=="string"?t.customer:t.customer.id,[n]=await r.select().from(Ce).where(A(Ce.stripeCustomerId,o)).limit(1);if(!n){k.warn("Subscription update webhook subscription not found",{customerId:o,subscriptionId:t.id});return}let i=t.items.data[0]?.price?.id;if(!i){k.error("No price ID found in subscription update",{subscriptionId:t.id});return}let c=Hu(i),u=c?c.id:"free",l=t.items.data[0];if(!l){k.error("No subscription items found in update",{subscriptionId:t.id});return}let d=l.current_period_start,p=l.current_period_end,m=t.status,f=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m;await r.update(Ce).set({stripeSubscriptionId:t.id,planId:u,status:f,currentPeriodStart:new Date(d*1e3),currentPeriodEnd:new Date(p*1e3),cancelAtPeriodEnd:t.cancel_at_period_end,canceledAt:t.canceled_at?new Date(t.canceled_at*1e3):null,updatedAt:new Date}).where(A(Ce.id,n.id)),k.info("Subscription updated webhook processed successfully",{subscriptionId:t.id,previousStatus:n.status,newStatus:f,previousPlanId:n.planId,newPlanId:u})}static async handleSubscriptionDeleted(t){let r=Rt(),o=typeof t.customer=="string"?t.customer:t.customer.id,[n]=await r.select().from(Ce).where(A(Ce.stripeCustomerId,o)).limit(1);if(!n){k.warn("Subscription delete webhook subscription not found",{customerId:o,subscriptionId:t.id});return}await r.update(Ce).set({status:"canceled",canceledAt:new Date,updatedAt:new Date}).where(A(Ce.stripeCustomerId,o)),k.info("Subscription deleted webhook processed successfully",{subscriptionId:t.id,userId:n.userId,previousStatus:n.status})}static async handleInvoicePaid(t){let r=Rt(),o=t,n=typeof o.customer=="string"?o.customer:o.customer?.id;if(!n){k.warn("Invoice paid webhook missing customer ID",{invoiceId:o.id});return}let[i]=await r.select().from(Ce).where(A(Ce.stripeCustomerId,n)).limit(1);if(!i){k.warn("Invoice paid webhook subscription not found",{invoiceId:o.id,customerId:n});return}let[c]=await r.select().from(Et).where(A(Et.stripeInvoiceId,o.id)).limit(1);if(c){k.info("Invoice payment already processed",{invoiceId:o.id,existingStatus:c.status});return}try{await r.insert(Et).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof o.payment_intent=="string"?o.payment_intent:o.payment_intent?.id,stripeInvoiceId:o.id,stripeChargeId:typeof o.charge=="string"?o.charge:o.charge?.id,amountCents:o.amount_paid,currency:o.currency,status:"succeeded",description:o.description||"Assinatura AegisWallet",receiptUrl:o.hosted_invoice_url,invoicePdf:o.invoice_pdf}),k.info("Invoice paid webhook processed successfully",{invoiceId:o.id,userId:i.userId,amount:o.amount_paid,currency:o.currency})}catch(u){let l=u instanceof Error?u.message:"Unknown error";throw k.error("Failed to process invoice payment",{invoiceId:o.id,userId:i.userId,error:l}),u}}static async handleInvoicePaymentFailed(t){let r=Rt(),o=t,n=typeof o.customer=="string"?o.customer:o.customer?.id;if(!n){k.warn("Invoice payment failed webhook missing customer ID",{invoiceId:o.id});return}let[i]=await r.select().from(Ce).where(A(Ce.stripeCustomerId,n)).limit(1);if(!i){k.warn("Invoice payment failed webhook subscription not found",{invoiceId:o.id,customerId:n});return}let[c]=await r.select().from(Et).where(A(Et.stripeInvoiceId,o.id)).limit(1);if(c){k.info("Invoice payment failure already processed",{invoiceId:o.id,existingStatus:c.status});return}try{await r.insert(Et).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof o.payment_intent=="string"?o.payment_intent:o.payment_intent?.id,stripeInvoiceId:o.id,stripeChargeId:typeof o.charge=="string"?o.charge:o.charge?.id,amountCents:o.amount_due,currency:o.currency,status:"failed",description:o.description||"Falha no pagamento",failureCode:o.last_finalization_error?.code,failureMessage:t.last_finalization_error?.message}),k.warn("Invoice payment failed webhook processed successfully",{invoiceId:o.id,userId:i.userId,amount:o.amount_due,currency:o.currency,failureCode:o.last_finalization_error?.code,failureMessage:t.last_finalization_error?.message})}catch(u){let l=u instanceof Error?u.message:"Unknown error";throw k.error("Failed to process invoice payment failure",{invoiceId:o.id,userId:i.userId,error:l}),u}}};var Iz=new ge;Iz.post("/",async e=>{let t=e.req.header("stripe-signature"),r=await e.req.text();if(!t)return e.json({error:"Missing stripe-signature header"},400);try{let o=wn.constructEvent(r,t);switch(k.info("Stripe webhook received",{type:o.type,id:o.id}),o.type){case"checkout.session.completed":await wn.handleCheckoutSessionCompleted(o.data.object);break;case"customer.subscription.created":await wn.handleSubscriptionCreated(o.data.object);break;case"customer.subscription.updated":await wn.handleSubscriptionUpdated(o.data.object);break;case"customer.subscription.deleted":await wn.handleSubscriptionDeleted(o.data.object);break;case"invoice.paid":await wn.handleInvoicePaid(o.data.object);break;case"invoice.payment_failed":await wn.handleInvoicePaymentFailed(o.data.object);break;default:k.info("Unhandled webhook event type",{type:o.type})}return e.json({received:!0})}catch(o){return k.error("Webhook processing failed",{error:o instanceof Error?o.message:"Unknown error"}),e.json({error:"Webhook handler failed"},400)}});var Ez=Iz;var Kn=new ge;Kn.route("/checkout",fz);Kn.route("/subscription",Tz);Kn.route("/portal",wz);Kn.route("/plans",bz);Kn.route("/webhook",Ez);Kn.route("/payment-history",yz);Kn.route("/payment-methods",vz);Kn.route("/invoices",hz);var JS=Kn;var WS=new ge,tW=s.object({categoryId:s.string().optional(),endDate:s.string().datetime().optional(),limit:s.coerce.number().min(1).max(100).default(20),offset:s.coerce.number().min(0).default(0),query:s.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:s.string().datetime().optional()}),rW=s.object({accountId:s.string().optional(),categoryId:s.string().optional(),endDate:s.string().datetime().optional(),limit:s.coerce.number().min(1).max(100).default(20),offset:s.coerce.number().min(0).default(0),query:s.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:s.string().datetime().optional()});WS.get("/events/search",X,ue({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Ee("query",tW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("query"),n=e.get("requestId");try{let i=[A(Ue.userId,t.id),Gt(Ue.title,`%${o.query}%`)];o.categoryId&&i.push(A(Ue.categoryId,o.categoryId)),o.startDate&&i.push(Ot(Ue.startDate,new Date(o.startDate))),o.endDate&&i.push(It(Ue.endDate,new Date(o.endDate)));let c=await r.select().from(Ue).where(pe(...i)).orderBy(ot(Ue.createdAt)).limit(o.limit).offset(o.offset);return k.info("Calendar events searched",{limit:o.limit,query:o.query,requestId:n,resultsCount:c.length,userId:t.id}),e.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to search calendar events",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar eventos"},500)}});WS.get("/transactions/search",X,ue({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Ee("query",rW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("query"),n=e.get("requestId");try{let i=[A(q.userId,t.id),Gt(q.description,`%${o.query}%`)];o.accountId&&i.push(A(q.accountId,o.accountId)),o.categoryId&&i.push(A(q.categoryId,o.categoryId)),o.startDate&&i.push(Ot(q.transactionDate,new Date(o.startDate))),o.endDate&&i.push(It(q.transactionDate,new Date(o.endDate)));let c=await r.select().from(q).where(pe(...i)).orderBy(ot(q.createdAt)).limit(o.limit).offset(o.offset);return k.info("Calendar transactions searched",{limit:o.limit,query:o.query,requestId:n,resultsCount:c.length,userId:t.id}),e.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to search calendar transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar transa\xE7\xF5es"},500)}});var QS=WS;var XS=class{constructor(t){this.db=t}static{a(this,"ComplianceService")}async getUserConsents(t){try{return await this.db.select().from(Qe).where(A(Qe.userId,t)).orderBy(ot(Qe.createdAt))}catch(r){throw k.error("Failed to get user consents",{error:r instanceof Error?r.message:"Unknown error",userId:t}),new Error(`Erro ao buscar consentimentos: ${r instanceof Error?r.message:"Unknown error"}`)}}async getConsentTemplates(){try{return await this.db.select().from(dr).where(A(dr.isActive,!0)).orderBy(dr.consentType)}catch(t){throw k.error("Failed to get consent templates",{error:t instanceof Error?t.message:"Unknown error"}),new Error(`Erro ao buscar templates de consentimento: ${t instanceof Error?t.message:"Unknown error"}`)}}async grantConsent(t,r,o,n,i){try{let[c]=await this.db.select().from(dr).where(pe(A(dr.consentType,r),A(dr.isActive,!0))).limit(1);if(!c)throw new Error(`Template de consentimento n\xE3o encontrado: ${r}`);let u=await this.generateHash(c.fullTextPt),[l]=await this.db.select().from(Qe).where(pe(A(Qe.userId,t),A(Qe.consentType,r))).limit(1);if(l){let[p]=await this.db.update(Qe).set({granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:c.version,consentTextHash:u,collectionMethod:o,ipAddress:n??null,userAgent:i??null}).where(A(Qe.id,l.id)).returning();return p}let[d]=await this.db.insert(Qe).values({userId:t,consentType:r,purpose:c.descriptionPt,legalBasis:"consent",granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:c.version,consentTextHash:u,collectionMethod:o,ipAddress:n??null,userAgent:i??null}).returning();return d}catch(c){throw k.error("Failed to grant consent",{error:c instanceof Error?c.message:"Unknown error",userId:t,consentType:r}),new Error(`Erro ao conceder consentimento: ${c instanceof Error?c.message:"Unknown error"}`)}}async revokeConsent(t,r){try{await this.db.update(Qe).set({granted:!1,revokedAt:new Date}).where(pe(A(Qe.userId,t),A(Qe.consentType,r)))}catch(o){throw k.error("Failed to revoke consent",{error:o instanceof Error?o.message:"Unknown error",userId:t,consentType:r}),new Error(`Erro ao revogar consentimento: ${o instanceof Error?o.message:"Unknown error"}`)}}async checkRequiredConsents(t,r){try{return(await this.db.select().from(Qe).where(pe(A(Qe.userId,t),Ti(Qe.consentType,r),A(Qe.granted,!0)))).length===r.length}catch(o){return k.error("Failed to check required consents",{error:o instanceof Error?o.message:"Unknown error",userId:t}),!1}}async getMissingMandatoryConsents(t){try{let o=(await this.db.select().from(dr).where(pe(A(dr.isMandatory,!0),A(dr.isActive,!0)))).map(c=>c.consentType),i=(await this.db.select().from(Qe).where(pe(A(Qe.userId,t),A(Qe.granted,!0)))).map(c=>c.consentType);return o.filter(c=>!i.includes(c))}catch(r){throw k.error("Failed to get missing mandatory consents",{error:r instanceof Error?r.message:"Unknown error",userId:t}),new Error(`Erro ao buscar consentimentos obrigat\xF3rios faltantes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createExportRequest(t,r,o,n,i,c){try{let[u]=await this.db.insert(Ur).values({userId:t,requestType:r,format:o,status:"pending",dateFrom:n??null,dateTo:i??null,requestedVia:"app",ipAddress:c??null}).returning();return await this.logAuditEvent(t,"data_export_requested","data_export_requests",u.id,{requestType:r,format:o}),u}catch(u){throw k.error("Failed to create export request",{error:u instanceof Error?u.message:"Unknown error",userId:t}),new Error(`Erro ao criar solicita\xE7\xE3o de exporta\xE7\xE3o: ${u instanceof Error?u.message:"Unknown error"}`)}}async getExportRequests(t){try{return await this.db.select().from(Ur).where(A(Ur.userId,t)).orderBy(ot(Ur.createdAt))}catch(r){throw k.error("Failed to get export requests",{error:r instanceof Error?r.message:"Unknown error",userId:t}),new Error(`Erro ao buscar solicita\xE7\xF5es de exporta\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async createDeletionRequest(t,r,o,n,i){try{let[c]=await this.db.select({legalHold:Xt.legalHold}).from(Xt).where(pe(A(Xt.userId,t),A(Xt.legalHold,!0))).limit(1);if(c?.legalHold)throw new Error("Seus dados est\xE3o em reten\xE7\xE3o legal e n\xE3o podem ser exclu\xEDdos no momento");let u=new Date;u.setDate(u.getDate()+15);let[l]=await this.db.insert(Xt).values({userId:t,requestType:r,scope:o??{},reason:n??null,status:"pending",reviewDeadline:u,ipAddress:i??null}).returning();return await this.logAuditEvent(t,"data_deletion_requested","data_deletion_requests",l.id,{requestType:r}),l}catch(c){throw k.error("Failed to create deletion request",{error:c instanceof Error?c.message:"Unknown error",userId:t}),c}}async getDeletionRequests(t){try{return await this.db.select().from(Xt).where(A(Xt.userId,t)).orderBy(ot(Xt.createdAt))}catch(r){throw k.error("Failed to get deletion requests",{error:r instanceof Error?r.message:"Unknown error",userId:t}),new Error(`Erro ao buscar solicita\xE7\xF5es de exclus\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionLimits(t){try{return await this.db.select().from(Ft).where(A(Ft.userId,t))}catch(r){throw k.error("Failed to get transaction limits",{error:r instanceof Error?r.message:"Unknown error",userId:t}),new Error(`Erro ao buscar limites de transa\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async checkTransactionLimit(t,r,o){try{let[n]=await this.db.select().from(Ft).where(pe(A(Ft.userId,t),A(Ft.limitType,r),A(Ft.isActive,!0))).limit(1);if(!n)return{allowed:!0};let i=Number(n.dailyLimit),c=Number(n.currentDailyUsed??0),u=n.transactionLimit?Number(n.transactionLimit):null,l=i-c;return u&&o>u?{allowed:!1,reason:`Valor excede limite por transa\xE7\xE3o de R$ ${u.toFixed(2)}`,limit:i,used:c,requested:o,remaining:l}:o>l?{allowed:!1,reason:`Valor excede saldo di\xE1rio dispon\xEDvel de R$ ${l.toFixed(2)}`,limit:i,used:c,requested:o,remaining:l}:{allowed:!0,limit:i,used:c,requested:o,remaining:l}}catch(n){throw k.error("Failed to check transaction limit",{error:n instanceof Error?n.message:"Unknown error",limitType:r,userId:t}),new Error(`Erro ao verificar limite de transa\xE7\xE3o: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateLimitUsage(t,r,o){try{await this.db.update(Ft).set({currentDailyUsed:I`${Ft.currentDailyUsed} + ${o}`}).where(pe(A(Ft.userId,t),A(Ft.limitType,r)))}catch(n){throw k.error("Failed to update limit usage",{error:n instanceof Error?n.message:"Unknown error",userId:t,limitType:r,amount:o}),new Error(`Erro ao atualizar uso de limite: ${n instanceof Error?n.message:"Unknown error"}`)}}async logAuditEvent(t,r,o,n,i){try{let c=new Date;c.setFullYear(c.getFullYear()+5),await this.db.insert(pr).values({userId:t,eventType:r,resourceType:o,resourceId:n??null,description:i?.action??null,metadata:i??{},previousState:null,newState:null,ipAddress:null,userAgent:null,sessionId:null,retentionUntil:c})}catch(c){k.error("Failed to log audit event",{error:c instanceof Error?c.message:"Unknown error",eventType:r,userId:t})}}async getAuditHistory(t,r){try{let o=[A(pr.userId,t)];return r?.eventType&&o.push(A(pr.eventType,r.eventType)),r?.startDate&&o.push(Ot(pr.createdAt,r.startDate)),r?.endDate&&o.push(It(pr.createdAt,r.endDate)),await this.db.select().from(pr).where(o.length>1?pe(...o):o[0]).orderBy(ot(pr.createdAt)).limit(r?.limit??100)}catch(o){throw k.error("Failed to get audit history",{error:o instanceof Error?o.message:"Unknown error",userId:t}),new Error(`Erro ao buscar hist\xF3rico de auditoria: ${o instanceof Error?o.message:"Unknown error"}`)}}async generateHash(t){let o=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(n)).map(c=>c.toString(16).padStart(2,"0")).join("")}};function yr(e){return new XS(e)}a(yr,"createComplianceService");var Pr=new ge,nW=s.object({collectionMethod:s.enum(["explicit_form","voice_command","terms_acceptance","settings_toggle"]).default("explicit_form"),consentType:s.enum(["data_processing","marketing","analytics","third_party","voice_data","biometric","financial_data","location"])}),oW=s.object({dateFrom:s.string().optional(),dateTo:s.string().optional(),format:s.enum(["json","csv","pdf"]).default("json"),requestType:s.enum(["full_data","full_export","transactions","profile","consents","audit_logs"]).default("full_export")}),iW=s.object({reason:s.string().optional(),requestType:s.enum(["full_account","full_deletion","specific_data","anonymization"]),scope:s.record(s.string(),s.unknown()).optional()}),aW=s.object({amount:s.number().positive("Valor deve ser positivo"),limitType:s.enum(["pix_daily","pix_daytime","pix_transaction","boleto_daily","transfer_daily","withdrawal_daily"])});Pr.get("/consent-templates",X,async e=>{let{db:t}=e.get("auth"),r=e.get("requestId");try{let n=await yr(t).getConsentTemplates();return e.json({data:n,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(o){return k.error("Failed to get consent templates",{error:o instanceof Error?o.message:"Unknown error",requestId:r}),e.json({code:"CONSENT_TEMPLATES_ERROR",error:"Erro ao buscar modelos de consentimento"},500)}});Pr.get("/consents",X,ue({windowMs:6e4,max:30,message:"Muitas requisi\xE7\xF5es"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let i=await yr(r).getUserConsents(t.id);return e.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get user consents",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"CONSENTS_ERROR",error:"Erro ao buscar consentimentos"},500)}});Pr.get("/consents/missing",X,async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let i=await yr(r).getMissingMandatoryConsents(t.id);return e.json({data:{hasMissing:i.length>0,missingConsents:i},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get missing consents",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"MISSING_CONSENTS_ERROR",error:"Erro ao verificar consentimentos"},500)}});Pr.post("/consents",X,ue({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),Ee("json",nW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=e.req.header("x-forwarded-for")??e.req.header("x-real-ip"),c=e.req.header("user-agent"),l=await yr(r).grantConsent(t.id,o.consentType,o.collectionMethod,i,c);return k.info("Consent granted",{consentType:o.consentType,requestId:n,userId:t.id}),e.json({data:l,meta:{requestId:n,grantedAt:new Date().toISOString()}},201)}catch(i){return k.error("Failed to grant consent",{consentType:o.consentType,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONSENT_GRANT_ERROR",error:"Erro ao registrar consentimento"},500)}});Pr.delete("/consents/:type",X,ue({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("type"),n=e.get("requestId");try{return await yr(r).revokeConsent(t.id,o),k.info("Consent revoked",{consentType:o,requestId:n,userId:t.id}),e.json({data:{success:!0,message:"Consentimento revogado com sucesso"},meta:{requestId:n,revokedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to revoke consent",{consentType:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONSENT_REVOKE_ERROR",error:"Erro ao revogar consentimento"},500)}});Pr.get("/export-requests",X,async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let i=await yr(r).getExportRequests(t.id);return e.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get export requests",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"EXPORT_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});Pr.post("/export-requests",X,ue({windowMs:36e5,max:5,message:"Limite de solicita\xE7\xF5es atingido"}),Ee("json",oW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=e.req.header("x-forwarded-for")??e.req.header("x-real-ip"),u=await yr(r).createExportRequest(t.id,o.requestType,o.format,o.dateFrom,o.dateTo,i);return k.info("Export request created",{format:o.format,requestId:n,requestType:o.requestType,userId:t.id}),e.json({data:u,meta:{requestId:n,createdAt:new Date().toISOString()}},201)}catch(i){return k.error("Failed to create export request",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"EXPORT_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});Pr.get("/deletion-requests",X,async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let i=await yr(r).getDeletionRequests(t.id);return e.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get deletion requests",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"DELETION_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});Pr.post("/deletion-requests",X,ue({windowMs:864e5,max:3,message:"Limite di\xE1rio atingido"}),Ee("json",iW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=e.req.header("x-forwarded-for")??e.req.header("x-real-ip"),u=await yr(r).createDeletionRequest(t.id,o.requestType,o.scope,o.reason,i);return k.info("Deletion request created",{requestId:n,requestType:o.requestType,userId:t.id}),e.json({data:u,meta:{requestId:n,createdAt:new Date().toISOString()}},201)}catch(i){let c=i instanceof Error?i.message:"Unknown error";return k.error("Failed to create deletion request",{error:c,requestId:n,userId:t.id}),c.includes("reten\xE7\xE3o legal")?e.json({code:"LEGAL_HOLD",error:c},403):e.json({code:"DELETION_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});Pr.get("/limits",X,async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let i=await yr(r).getTransactionLimits(t.id);return e.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get transaction limits",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"LIMITS_ERROR",error:"Erro ao buscar limites"},500)}});Pr.post("/limits/check",X,ue({windowMs:6e4,max:60,message:"Muitas verifica\xE7\xF5es"}),Ee("json",aW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let c=await yr(r).checkTransactionLimit(t.id,o.limitType,o.amount);return e.json({data:c,meta:{requestId:n,checkedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to check transaction limit",{amount:o.amount,error:i instanceof Error?i.message:"Unknown error",limitType:o.limitType,requestId:n,userId:t.id}),e.json({code:"LIMIT_CHECK_ERROR",error:"Erro ao verificar limite"},500)}});Pr.get("/audit",X,ue({windowMs:6e4,max:10,message:"Muitas requisi\xE7\xF5es"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let n=Number(e.req.query("limit"))||50,i=e.req.query("eventType"),u=await yr(r).getAuditHistory(t.id,{limit:n,eventType:i||void 0});return e.json({data:u,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get audit history",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"AUDIT_ERROR",error:"Erro ao buscar hist\xF3rico"},500)}});var YS=Pr;var sW=/^\d{10,11}$/,Mm=a(e=>e?e.replace(/\D/g,""):e??void 0,"normalizeDigits"),kz=a(e=>({...e,cpf:e.cpf?Mm(e.cpf):e.cpf,email:e.email?.trim().toLowerCase(),phone:e.phone?Mm(e.phone):e.phone}),"sanitizeContactFields"),Sn=new ge,cW=s.object({cpf:s.string().optional(),email:s.string().email().optional(),isFavorite:s.boolean().default(!1),name:s.string().min(1,"Nome \xE9 obrigat\xF3rio"),notes:s.string().optional(),phone:s.string().optional()}),uW=s.object({cpf:s.string().optional().refine(e=>!e||gO(Mm(e)??""),"CPF inv\xE1lido"),email:s.string().email().optional(),id:s.string().uuid(),isFavorite:s.boolean().optional(),name:s.string().optional(),notes:s.string().optional(),phone:s.string().optional().refine(e=>!e||sW.test(Mm(e)??""),"Telefone inv\xE1lido")}),lW=s.object({isFavorite:s.boolean().optional(),limit:s.number().min(1).max(100).default(50),offset:s.number().default(0),search:s.string().optional()}),dW=s.object({limit:s.number().min(1).max(20).default(10),query:s.string().min(1,"Query de busca \xE9 obrigat\xF3ria")});Sn.get("/",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Ee("query",lW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("query"),n=e.get("requestId");try{let i=[A(ye.userId,t.id)];if(o.search){let l=`%${o.search}%`,d=Uo(Gt(ye.name,l),Gt(ye.email,l),Gt(ye.phone,l));d&&i.push(d)}o.isFavorite!==void 0&&i.push(A(ye.isFavorite,o.isFavorite));let[{total:c}]=await r.select({total:VI()}).from(ye).where(pe(...i)),u=await r.select().from(ye).where(pe(...i)).orderBy(ot(ye.isFavorite),Xn(ye.name)).limit(o.limit).offset(o.offset);return e.json({data:{contacts:u,hasMore:c>o.offset+o.limit,total:c},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to get contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONTACTS_ERROR",error:"Failed to retrieve contacts"},500)}});Sn.get("/:id",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{let[i]=await r.select().from(ye).where(pe(A(ye.id,o),A(ye.userId,t.id))).limit(1);return i?e.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}}):e.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return k.error("Failed to get contact",{contactId:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONTACT_ERROR",error:"Failed to retrieve contact"},500)}});Sn.post("/",X,ue({windowMs:60*1e3,max:20,message:"Too many creation attempts, please try again later"}),Ee("json",cW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=kz(o),[c]=await r.insert(ye).values({userId:t.id,name:i.name,email:i.email??null,phone:i.phone??null,cpf:i.cpf??null,notes:i.notes??null,isFavorite:i.isFavorite??!1,createdAt:new Date,updatedAt:new Date}).returning();return k.info("Contact created",{contactId:c.id,contactName:o.name,requestId:n,userId:t.id}),e.json({data:c,meta:{createdAt:new Date().toISOString(),requestId:n}},201)}catch(i){return i instanceof Error&&i.message.includes("unique constraint")?e.json({code:"CONFLICT",error:"Email ou telefone j\xE1 cadastrado para este usu\xE1rio"},409):(k.error("Failed to create contact",{contactName:o.name,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONTACT_CREATE_ERROR",error:"Failed to create contact"},500))}});Sn.put("/:id",X,ue({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ee("json",uW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.req.valid("json"),i=e.get("requestId");try{let{id:c,...u}=n,l=kz(u),d={updatedAt:new Date};l.name!==void 0&&(d.name=l.name),l.email!==void 0&&(d.email=l.email??null),l.phone!==void 0&&(d.phone=l.phone??null),l.cpf!==void 0&&(d.cpf=l.cpf??null),l.notes!==void 0&&(d.notes=l.notes??null),l.isFavorite!==void 0&&(d.isFavorite=l.isFavorite);let[p]=await r.update(ye).set(d).where(pe(A(ye.id,o),A(ye.userId,t.id))).returning();return p?(k.info("Contact updated",{contactId:o,requestId:i,updatedFields:Object.keys(u).filter(m=>m!=="updatedAt"),userId:t.id}),e.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})):e.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(c){return k.error("Failed to update contact",{contactId:o,error:c instanceof Error?c.message:"Unknown error",requestId:i,userId:t.id}),e.json({code:"CONTACT_UPDATE_ERROR",error:"Failed to update contact"},500)}});Sn.delete("/:id",X,ue({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{let[i]=await r.delete(ye).where(pe(A(ye.id,o),A(ye.userId,t.id))).returning();return i?(k.info("Contact deleted",{contactId:o,requestId:n,userId:t.id}),e.json({data:{id:o,success:!0},meta:{deletedAt:new Date().toISOString(),requestId:n}})):e.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return k.error("Failed to delete contact",{contactId:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"CONTACT_DELETE_ERROR",error:"Failed to delete contact"},500)}});Sn.get("/search",X,ue({windowMs:60*1e3,max:20,message:"Too many search attempts, please try again later"}),Ee("query",dW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("query"),n=e.get("requestId");try{let i=`%${o.query}%`,c=await r.select({id:ye.id,name:ye.name,email:ye.email,phone:ye.phone,isFavorite:ye.isFavorite}).from(ye).where(pe(A(ye.userId,t.id),Uo(Gt(ye.name,i),Gt(ye.email,i),Gt(ye.phone,i)))).orderBy(ot(ye.isFavorite),Xn(ye.name)).limit(o.limit);return k.info("Contacts searched",{requestId:n,resultsCount:c.length,searchQuery:o.query,userId:t.id}),e.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to search contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:n,searchQuery:o.query,userId:t.id}),e.json({code:"CONTACT_SEARCH_ERROR",error:"Failed to search contacts"},500)}});Sn.get("/favorites",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let n=await r.select().from(ye).where(pe(A(ye.userId,t.id),A(ye.isFavorite,!0))).orderBy(Xn(ye.name));return k.info("Favorite contacts retrieved",{favoritesCount:n.length,requestId:o,userId:t.id}),e.json({data:n,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get favorite contacts",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"FAVORITES_ERROR",error:"Failed to retrieve favorite contacts"},500)}});Sn.post("/:id/favorite",X,ue({windowMs:60*1e3,max:30,message:"Too many toggle attempts, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{let[i]=await r.select({isFavorite:ye.isFavorite}).from(ye).where(pe(A(ye.id,o),A(ye.userId,t.id))).limit(1);if(!i)return e.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404);let[c]=await r.update(ye).set({isFavorite:!i.isFavorite,updatedAt:new Date}).where(pe(A(ye.id,o),A(ye.userId,t.id))).returning();return k.info("Contact favorite status toggled",{contactId:o,newStatus:!i.isFavorite,previousStatus:i.isFavorite,requestId:n,userId:t.id}),e.json({data:c,meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to toggle favorite status",{contactId:o,error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"FAVORITE_TOGGLE_ERROR",error:"Failed to toggle favorite status"},500)}});Sn.get("/stats",X,ue({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let n=await r.select({isFavorite:ye.isFavorite,email:ye.email,phone:ye.phone}).from(ye).where(A(ye.userId,t.id)),i=n.length,c=n.filter(d=>d.isFavorite).length,u=n.filter(d=>d.email).length,l=n.filter(d=>d.phone).length;return e.json({data:{contactsWithEmail:u,contactsWithPhone:l,favoriteContacts:c,favoritePercentage:i>0?c/i*100:0,totalContacts:i},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get contact statistics",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"CONTACT_STATS_ERROR",error:"Failed to retrieve contact statistics"},500)}});var eT=Sn;var Tn=new ge,Ku={code:"NOT_IMPLEMENTED",error:"Google Calendar sync is temporarily unavailable during migration. Please check back later.",message:"Esta funcionalidade est\xE1 temporariamente indispon\xEDvel durante a migra\xE7\xE3o do sistema."},Jn=ue({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3});Tn.get("/sync/status",X,Jn,async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");return k.info("Google Calendar status requested (not implemented)",{requestId:r,userId:t.id}),e.json({data:{googleEmail:null,isConnected:!1,isEnabled:!1,lastSyncAt:null,migrationNotice:"Google Calendar sync is being migrated to new infrastructure"},meta:{requestId:r,retrievedAt:new Date().toISOString()}},200)});Tn.get("/sync/settings",X,Jn,async e=>{let t=e.get("requestId");return e.json({data:null,meta:{requestId:t,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Tn.get("/sync/history",X,Jn,async e=>{let t=e.get("requestId");return e.json({data:[],meta:{requestId:t,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});Tn.put("/sync/settings",X,Jn,async e=>{let t=e.get("requestId");return e.json({...Ku,meta:{requestId:t}},501)});Tn.post("/sync/full",X,Jn,async e=>{let t=e.get("requestId");return e.json({...Ku,meta:{requestId:t}},501)});Tn.post("/sync/incremental",X,Jn,async e=>{let t=e.get("requestId");return e.json({...Ku,meta:{requestId:t}},501)});Tn.post("/sync/event",X,Jn,async e=>{let t=e.get("requestId");return e.json({...Ku,meta:{requestId:t}},501)});Tn.post("/sync/channel/renew",X,Jn,async e=>{let t=e.get("requestId");return e.json({...Ku,meta:{requestId:t}},501)});Tn.get("/sync/conflicts",X,Jn,async e=>{let t=e.get("requestId");return e.json({data:[],meta:{requestId:t,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});var tT=Tn;var Ju=new ge,DDe=s.object({services:s.object({database:s.enum(["connected","disconnected","error"]),api:s.enum(["operational","degraded","down"]),auth:s.enum(["operational","degraded","down"])}),status:s.enum(["ok","error"]),timestamp:s.string(),uptime:s.number(),version:s.string()});async function Pz(e){let t=Date.now();try{let r="error";try{r="connected"}catch(i){k.error("Database health check failed",{error:i}),r="error"}let o=r==="connected",n={services:{database:r,api:o?"operational":"down",auth:o?"operational":"down"},status:o?"ok":"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"};return k.info("Health check completed",{databaseStatus:r,duration:Date.now()-t,status:n.status}),e.json(n)}catch(r){return k.error("Health check error",{duration:Date.now()-t,error:r instanceof Error?r.message:"Unknown error"}),e.json({services:{database:"error",api:"down",auth:"down"},status:"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"},500)}}a(Pz,"healthCheckHandler");Ju.get("/",Pz);Ju.get("/health",Pz);Ju.get("/ping",e=>e.json({message:"pong",timestamp:new Date().toISOString(),version:"v1"}));Ju.get("/auth",async e=>{let t=e.get("auth");return e.json({authenticated:!!t,services:{database:"connected",api:"operational",auth:"operational"},status:"ok",timestamp:new Date().toISOString(),user:t?{id:t.user.id,email:t.user.email}:null,version:"1.0.0"})});var rT=Ju;var pW=s.object({limit:s.coerce.number().int().min(1).max(100).default(50),offset:s.coerce.number().int().min(0).default(0),categoryId:s.string().optional(),accountId:s.string().optional(),type:s.enum(["transfer","debit","credit","pix","boleto"]).optional(),status:s.enum(["cancelled","failed","pending","posted"]).optional(),startDate:s.string().optional(),endDate:s.string().optional(),search:s.string().optional()}),$z=s.object({amount:s.number(),categoryId:s.string().optional(),description:s.string(),transactionType:s.enum(["transfer","debit","credit","pix","boleto"]),status:s.enum(["cancelled","failed","pending","posted"]).default("pending"),transactionDate:s.string().optional(),accountId:s.string().optional(),paymentMethod:s.string().optional(),merchantName:s.string().optional(),notes:s.string().optional(),tags:s.array(s.string()).optional()}),mW=s.object({period:s.enum(["week","month","quarter","year"]).default("month"),accountId:s.string().optional()}),Ya=new ge;Ya.get("/",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Ee("query",pW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("query"),n=e.get("requestId");try{let i=[A(q.userId,t.id)];o.categoryId&&i.push(A(q.categoryId,o.categoryId)),o.accountId&&i.push(A(q.accountId,o.accountId)),o.type&&i.push(A(q.transactionType,o.type)),o.status&&i.push(A(q.status,o.status)),o.startDate&&i.push(Ot(q.transactionDate,new Date(o.startDate))),o.endDate&&i.push(It(q.transactionDate,new Date(o.endDate))),o.search&&i.push(Gt(q.description,`%${o.search}%`));let c=await r.select().from(q).where(pe(...i)).orderBy(ot(q.createdAt)).limit(o.limit).offset(o.offset);return e.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString(),total:c.length}})}catch(i){return k.error("Failed to get transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"TRANSACTIONS_ERROR",error:"Failed to retrieve transactions"},500)}});Ya.get("/statistics",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ee("query",mW),async e=>{let{user:t,db:r}=e.get("auth"),{period:o}=e.req.valid("query"),n=e.get("requestId");try{let i=new Date,c=new Date;switch(o){case"week":c.setDate(i.getDate()-7);break;case"month":c.setMonth(i.getMonth()-1);break;case"quarter":c.setMonth(i.getMonth()-3);break;case"year":c.setFullYear(i.getFullYear()-1);break}let u=await r.select().from(q).where(pe(A(q.userId,t.id),Ot(q.transactionDate,c),It(q.transactionDate,i))),l=u.reduce((m,f)=>m+Number(f.amount),0),d=u.filter(m=>Number(m.amount)<0).reduce((m,f)=>m+Math.abs(Number(f.amount)),0),p=u.filter(m=>Number(m.amount)>0).reduce((m,f)=>m+Number(f.amount),0);return e.json({data:{balance:l,expenses:d,income:p,period:o,transactionsCount:u.length},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to get transaction statistics",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"STATISTICS_ERROR",error:"Failed to retrieve statistics"},500)}});Ya.post("/",X,ue({windowMs:60*1e3,max:10,message:"Too many transaction creation attempts, please try again later"}),Ee("json",$z),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i=new Date,[c]=await r.insert(q).values({userId:t.id,amount:o.amount.toString(),description:o.description,transactionType:o.transactionType,status:o.status,transactionDate:o.transactionDate?new Date(o.transactionDate):i,categoryId:o.categoryId,accountId:o.accountId,paymentMethod:o.paymentMethod,merchantName:o.merchantName,notes:o.notes,tags:o.tags,isManualEntry:!0}).returning();return k.info("Transaction created",{amount:o.amount,requestId:n,transactionId:c.id,type:o.transactionType,userId:t.id}),e.json({data:c,meta:{createdAt:new Date().toISOString(),requestId:n}},201)}catch(i){return k.error("Failed to create transaction",{amount:o.amount,error:i instanceof Error?i.message:"Unknown error",requestId:n,type:o.transactionType,userId:t.id}),e.json({code:"TRANSACTION_CREATE_ERROR",error:"Failed to create transaction"},500)}});Ya.put("/:id",X,ue({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Ee("json",$z.partial()),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.req.valid("json"),i=e.get("requestId");try{let[c]=await r.select({id:q.id}).from(q).where(pe(A(q.id,o),A(q.userId,t.id))).limit(1);if(!c)return e.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada"},404);let u={updatedAt:new Date};n.description!==void 0&&(u.description=n.description),n.amount!==void 0&&(u.amount=n.amount.toString()),n.transactionType!==void 0&&(u.transactionType=n.transactionType),n.status!==void 0&&(u.status=n.status),n.categoryId!==void 0&&(u.categoryId=n.categoryId),n.accountId!==void 0&&(u.accountId=n.accountId),n.paymentMethod!==void 0&&(u.paymentMethod=n.paymentMethod),n.merchantName!==void 0&&(u.merchantName=n.merchantName),n.notes!==void 0&&(u.notes=n.notes),n.tags!==void 0&&(u.tags=n.tags);let[l]=await r.update(q).set(u).where(pe(A(q.id,o),A(q.userId,t.id))).returning();return k.info("Transaction updated",{requestId:i,transactionId:o,userId:t.id}),e.json({data:l,meta:{updatedAt:new Date().toISOString(),requestId:i}})}catch(c){return k.error("Failed to update transaction",{error:c instanceof Error?c.message:"Unknown error",requestId:i,transactionId:o,userId:t.id}),e.json({code:"TRANSACTION_UPDATE_ERROR",error:"Failed to update transaction"},500)}});Ya.delete("/:id",X,ue({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.param("id"),n=e.get("requestId");try{return(await r.delete(q).where(pe(A(q.id,o),A(q.userId,t.id))).returning()).length===0?e.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada ou permiss\xE3o negada"},404):(k.info("Transaction deleted",{requestId:n,transactionId:o,userId:t.id}),e.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:n}}))}catch(i){return k.error("Failed to delete transaction",{error:i instanceof Error?i.message:"Unknown error",requestId:n,transactionId:o,userId:t.id}),e.json({code:"TRANSACTION_DELETE_ERROR",error:"Failed to delete transaction"},500)}});var nT=Ya;var fW=s.object({full_name:s.string().optional(),phone:s.string().optional(),cpf:s.string().optional(),birth_date:s.string().optional(),profile_image_url:s.string().url().optional()}),hW=s.record(s.string(),s.any()),gW=s.object({period_start:s.string(),period_end:s.string()}),Az=["theme","notificationsEmail","notificationsPush","notificationsSms","autoCategorize","budgetAlerts","voiceFeedback","accessibilityHighContrast","accessibilityLargeText","accessibilityScreenReader"],ui=new ge;ui.get("/me",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let[n]=await r.select().from(R).where(A(R.id,t.id)).limit(1);return e.json({data:n||null,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to get user profile",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({code:"PROFILE_ERROR",error:"Failed to retrieve profile"},500)}});ui.put("/me",X,ue({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Ee("json",fW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let i={updatedAt:new Date};o.full_name&&(i.fullName=o.full_name),o.phone&&(i.phone=o.phone),o.cpf&&(i.cpf=o.cpf),o.birth_date&&(i.birthDate=o.birth_date),o.profile_image_url&&(i.profileImageUrl=o.profile_image_url);let[c]=await r.update(R).set(i).where(A(R.id,t.id)).returning();return k.info("User profile updated",{requestId:n,userId:t.id}),e.json({data:c,meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to update user profile",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"PROFILE_UPDATE_ERROR",error:"Failed to update profile"},500)}});ui.put("/me/preferences",X,ue({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Ee("json",hW),async e=>{let{user:t,db:r}=e.get("auth"),o=e.req.valid("json"),n=e.get("requestId");try{let[i]=await r.select({id:lr.id}).from(lr).where(A(lr.userId,t.id)).limit(1),c;if(i){let u={updatedAt:new Date};for(let l of Az)o[l]!==void 0&&(u[l]=o[l]);[c]=await r.update(lr).set(u).where(A(lr.id,i.id)).returning()}else{let u={userId:t.id,createdAt:new Date,updatedAt:new Date};for(let l of Az)o[l]!==void 0&&(u[l]=o[l]);[c]=await r.insert(lr).values(u).returning()}return k.info("User preferences updated",{requestId:n,userId:t.id}),e.json({data:c,meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(i){return k.error("Failed to update user preferences",{error:i instanceof Error?i.message:"Unknown error",requestId:n,userId:t.id}),e.json({code:"PREFERENCES_UPDATE_ERROR",error:"Failed to update preferences"},500)}});ui.post("/me/last-login",X,ue({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{return await r.update(R).set({lastLogin:new Date}).where(A(R.id,t.id)),e.json({data:{success:!0},meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(n){return k.warn("Failed to update last login",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({data:{success:!0},meta:{requestId:o,updatedAt:new Date().toISOString()}})}});ui.get("/me/status",X,ue({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async e=>{let{user:t,db:r}=e.get("auth"),o=e.get("requestId");try{let[n]=await r.select({isActive:R.isActive,lastLogin:R.lastLogin}).from(R).where(A(R.id,t.id)).limit(1);return n?e.json({data:{isActive:n.isActive,lastLogin:n.lastLogin?.toISOString()||null},meta:{requestId:o,retrievedAt:new Date().toISOString()}}):e.json({data:{isActive:!1,lastLogin:null},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(n){return k.error("Failed to check user status",{error:n instanceof Error?n.message:"Unknown error",requestId:o,userId:t.id}),e.json({data:{isActive:!1,lastLogin:null},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}});ui.get("/me/financial-summary",X,ue({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Ee("query",gW),async e=>{let{user:t,db:r}=e.get("auth"),{period_start:o,period_end:n}=e.req.valid("query"),i=e.get("requestId");try{let u=(await r.select({amount:Ue.amount,isIncome:Ue.isIncome}).from(Ue).where(pe(A(Ue.userId,t.id),Ot(Ue.createdAt,new Date(o)),It(Ue.createdAt,new Date(n))))).reduce((l,d)=>{let p=Number(d.amount);return d.isIncome?(l.income+=p,l.balance+=p):(l.expenses+=p,l.balance-=p),l},{income:0,expenses:0,balance:0});return e.json({data:u,meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(c){return k.error("Failed to get financial summary",{error:c instanceof Error?c.message:"Unknown error",requestId:i,userId:t.id}),e.json({code:"FINANCIAL_SUMMARY_ERROR",error:"Failed to retrieve financial summary"},500)}});var oT=ui;function yW(e){let t=e.toLowerCase().trim(),r={},o=[{intent:"check_balance",patterns:["saldo","quanto tenho","quanto dinheiro","verificar saldo"]},{intent:"transfer_money",patterns:["transferir","pagar","enviar dinheiro","mandar dinheiro"],entityExtractor:a(n=>vW(n,r),"entityExtractor")},{intent:"pay_bill",patterns:["conta","boleto","pagar conta","pagar boleto"],entityExtractor:a(()=>_W(t,r),"entityExtractor")},{intent:"transaction_history",patterns:["extrato","transa\xE7\xF5es","historico","compras"]},{intent:"pix_transfer",patterns:["pix","fazer pix"],entityExtractor:a(n=>bW(n,r),"entityExtractor")}];for(let{intent:n,patterns:i,entityExtractor:c}of o)if(i.some(u=>t.includes(u)))return c&&c(e),{intent:n,entities:r,confidence:.9};return{intent:"unknown",entities:r,confidence:.3}}a(yW,"detectIntentAndEntities");function vW(e,t){let r=e.match(/r?\$?\s*(\d+(?:,\d{1,2})?)/i);if(r){let n=Number.parseFloat(r[1].replace(",","."));t.amount=n,t.currency="BRL"}let o=e.match(/(?:para|para o|para a)\s+([a-z-\s]{2,30})/i);o&&(t.recipient=o[1].trim())}a(vW,"extractTransferEntities");function _W(e,t){e.includes("luz")?t.billType="electricity":e.includes("\xE1gua")?t.billType="water":e.includes("telefone")?t.billType="phone":e.includes("internet")&&(t.billType="internet")}a(_W,"extractBillEntities");function bW(e,t){let r=e.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/),o=e.match(/\(?(\d{2})?\)?\s?(\d{4,5})-?(\d{4})/),n=e.match(/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/);r?(t.pixKey=r[1],t.pixKeyType="EMAIL"):o?(t.pixKey=o[0],t.pixKeyType="PHONE"):n&&(t.pixKey=n[0],t.pixKeyType="CPF")}a(bW,"extractPixEntities");function xW(e,t){switch(e){case"check_balance":return"Verificando seu saldo...";case"transfer_money":return t.amount&&t.recipient?`Preparando transfer\xEAncia de R$ ${t.amount} para ${t.recipient}`:"Entendi que quer transferir dinheiro. Para quem e quanto?";case"pay_bill":return"Buscando suas contas a pagar...";case"transaction_history":return"Mostrando seu hist\xF3rico de transa\xE7\xF5es...";case"pix_transfer":return"Preparando transfer\xEAncia PIX...";default:return"N\xE3o entendi o comando. Pode repetir?"}}a(xW,"generateResponse");async function Cz(e){let{commandText:t,sessionId:r,language:o,requireConfirmation:n,userId:i}=e,c=t??"";await new Promise(g=>setTimeout(g,300));let{intent:u,entities:l,confidence:d}=yW(c),p=d<.8||(n??!1),m=xW(u,l);return{confidence:d,entities:l,intent:u,language:o??"pt-BR",processedAt:new Date().toISOString(),requiresConfirmation:p,response:m,sessionId:r}}a(Cz,"processVoiceCommand");function Oz(){return{commands:[{description:"Verificar saldo da conta",examples:["Qual \xE9 o meu saldo?","Quanto dinheiro eu tenho?","Mostrar meu saldo"],name:"check_balance"},{description:"Transferir dinheiro para outra conta",examples:["Transferir R$ 100 para Jo\xE3o","Pagar 50 reais para Maria","Enviar R$ 200 para o email teste@email.com"],name:"transfer_money"},{description:"Pagar contas e boletos",examples:["Pagar conta de luz","Pagar boleto do cart\xE3o","Quitar conta de telefone"],name:"pay_bill"},{description:"Fazer transfer\xEAncia PIX",examples:["Fazer PIX para o CPF 123.456.789-00","Enviar PIX para o telefone 11999999999","Transferir por PIX para maria@email.com"],name:"pix_transfer"},{description:"Ver hist\xF3rico de transa\xE7\xF5es",examples:["Mostrar minhas transa\xE7\xF5es","Ver extrato do m\xEAs","Hist\xF3rico de compras"],name:"transaction_history"}],language:"pt-BR"}}a(Oz,"getAvailableCommands");var iT=new ge,wW=s.object({commandText:s.string().min(1).max(1e3).optional(),sessionId:s.string().uuid(),audioData:s.string().optional(),language:s.string().default("pt-BR"),requireConfirmation:s.boolean().default(!1)}).refine(e=>e.audioData||e.commandText,{message:"Dados de \xE1udio ou texto do comando s\xE3o obrigat\xF3rios",path:["audioData"]}),uze=s.object({commands:s.array(s.object({description:s.string(),examples:s.array(s.string()),name:s.string()})),language:s.string()});iT.post("/process",X,ue({windowMs:60*1e3,max:30,message:"Too many voice commands, please try again later"}),Ee("json",wW),async e=>{let{user:t}=e.get("auth"),r=e.req.valid("json"),o=e.get("requestId"),{commandText:n,sessionId:i,audioData:c,language:u,requireConfirmation:l}=r,d=n??"";try{k.audit("Voice command processing started",{commandLength:d.length,component:"voice.processCommand",requestId:o,userId:t.id});let p=await Cz({audioData:c,commandText:d,userId:t.id,context:{user:t},language:u,requireConfirmation:l,sessionId:i});return k.audit("Voice command processing completed",{command:d,requestId:o,result:p,sessionId:i,timestamp:new Date().toISOString(),userId:t.id}),e.json({data:p,meta:{processedAt:new Date().toISOString(),requestId:o}})}catch(p){return k.audit("Voice command processing failed",{command:d,error:p instanceof Error?p.message:"Unknown error",requestId:o,sessionId:i,timestamp:new Date().toISOString(),userId:t.id}),e.json({code:"VOICE_PROCESSING_ERROR",details:{command:d.substring(0,50)},error:"Failed to process voice command"},500)}});iT.get("/commands",X,ue({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async e=>{let{user:t}=e.get("auth"),r=e.get("requestId");try{let o=Oz();return k.info("Voice commands list accessed",{requestId:r,userId:t.id}),e.json({data:o,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(o){return k.error("Failed to get voice commands",{error:o instanceof Error?o.message:"Unknown error",requestId:r,userId:t.id}),e.json({code:"COMMANDS_RETRIEVAL_ERROR",error:"Failed to retrieve voice commands"},500)}});var aT=iT;var ft=new ge;ft.use("*",CT());ft.use("*",qT);ft.use("*",async(e,t)=>{let r=crypto.randomUUID();e.set("requestId",r),await t()});K0(ft);G0(ft);ft.route("/api/v1",rT);ft.route("/api/v1/voice",aT);ft.route("/api/v1/banking",Fw);ft.route("/api/v1/contacts",eT);ft.route("/api/v1/bank-accounts",Lw);ft.route("/api/v1/users",oT);ft.route("/api/v1/transactions",nT);ft.route("/api/v1/calendar",QS);ft.route("/api/v1/google-calendar",tT);ft.route("/api/v1/compliance",YS);ft.route("/api/v1/billing",JS);ft.route("/api/v1/ai",iu);ft.route("/api/v1/agent",Cx);ft.route("/cron",MT);RE(ft);ft.notFound(e=>{let t=e.get("requestId");return k.warn("Route not found",{ip:e.req.header("X-Forwarded-For")||e.req.header("X-Real-IP")||"unknown",method:e.req.method,path:e.req.path,requestId:t,userAgent:e.req.header("User-Agent")||"unknown"}),e.json({error:"Not Found",message:`Route ${e.req.method} ${e.req.path} not found`,requestId:t,timestamp:new Date().toISOString()},404)});ft.onError((e,t)=>{let r=t.get("requestId");return k.error("Unhandled error",{error:e.message,method:t.req.method,path:t.req.path,requestId:r,stack:e.stack}),t.json({error:"Internal server error",requestId:r,timestamp:new Date().toISOString()},500)});var Rz=ft;var zze={runtime:"nodejs",maxDuration:30},Mze=Fm(Rz);export{zze as config,Mze as default};
