# AegisWallet Automatic Triggers Configuration
# Sistema de deteção automática para routing inteligente

version: "1.0"
project: "aegiswallet"

# Spec Mode Triggers (Highest Priority)
spec_mode:
  enabled: true
  priority: "highest"
  triggers:
    english:
      - "spec - research"
      - "research and plan"
      - "analyze and plan"
      - "investigate and create"
      - "spec research"
      - "research only"
      - "plan only"
    portuguese:
      - "spec - pesquisar"
      - "pesquisar e planejar"
      - "analisar e planejar"
      - "investigar e criar"
      - "pesquisa apenas"
      - "planejar apenas"
  
  routing:
    type: "droid"
    name: "apex-researcher"
    confidence: 0.95
    mcp_servers: ["context7", "tavily", "sequential-thinking", "serena"]
    parallel: false

# Brazilian Compliance Triggers (High Priority)
brazilian_compliance:
  lgpd:
    enabled: true
    priority: "high"
    triggers:
      english: ["lgpd", "consent", "personal data", "privacy", "data protection", "gdpr"]
      portuguese: ["lgpd", "consentimento", "dados pessoais", "privacidade", "proteção de dados"]
    
    routing:
      - type: "droid"
        name: "apex-researcher"
        confidence: 0.90
        reasoning: "LGPD compliance research required"
        mcp_servers: ["context7", "tavily", "sequential-thinking"]
      - type: "skill"
        name: "brazilian-fintech-compliance"
        confidence: 0.95
        reasoning: "Brazilian data protection compliance"
        mcp_servers: []
      - type: "droid"
        name: "code-reviewer"
        confidence: 0.85
        reasoning: "Security validation for LGPD compliance"
        mcp_servers: ["serena"]

  financial:
    enabled: true
    priority: "highest"
    triggers:
      english: ["pix", "boleto", "open banking", "bcb", "central bank", "fintech"]
      portuguese: ["pix", "boleto", "open banking", "bcb", "banco central", "fintech"]
    
    routing:
      - type: "droid"
        name: "apex-researcher"
        confidence: 0.95
        reasoning: "Brazilian financial regulations research"
        mcp_servers: ["context7", "tavily", "sequential-thinking"]
      - type: "skill"
        name: "brazilian-fintech-compliance"
        confidence: 0.90
        reasoning: "Financial compliance validation"
        mcp_servers: []
      - type: "droid"
        name: "code-reviewer"
        confidence: 0.90
        reasoning: "Security review for financial features"
        mcp_servers: ["serena"]

  accessibility:
    enabled: true
    priority: "high"
    triggers:
      english: ["wcag", "accessibility", "screen reader", "keyboard navigation", "libras"]
      portuguese: ["wcag", "acessibilidade", "leitor de tela", "navegação por teclado", "libras"]
    
    routing:
      - type: "droid"
        name: "apex-ui-ux-designer"
        confidence: 0.90
        reasoning: "WCAG 2.1 AA+ accessibility compliance"
        mcp_servers: ["context7"]

# Technical Implementation Triggers
technical_triggers:
  database:
    enabled: true
    priority: "high"
    triggers:
      english: ["database", "schema", "migration", "supabase", "postgres", "sql"]
      portuguese: ["banco de dados", "schema", "migration", "supabase", "postgres", "sql"]
    
    routing:
      type: "droid"
      name: "database-specialist"
      confidence: 0.90
      mcp_servers: ["serena"]

  security:
    enabled: true
    priority: "highest"
    triggers:
      english: ["security", "vulnerability", "auth", "authentication", "encrypt", "protect"]
      portuguese: ["segurança", "vulnerabilidade", "autenticação", "criptografar", "proteger"]
    
    routing:
      type: "droid"
      name: "code-reviewer"
      confidence: 0.95
      mcp_servers: ["serena"]

  design:
    enabled: true
    priority: "medium"
    triggers:
      english: ["design", "ui", "ux", "interface", "component", "layout", "style"]
      portuguese: ["design", "interface", "componente", "layout", "estilo"]
    
    routing:
      type: "droid"
      name: "apex-ui-ux-designer"
      confidence: 0.85
      mcp_servers: ["context7"]

  testing:
    enabled: true
    priority: "high"
    triggers:
      english: ["test", "testing", "validate", "verify", "quality", "audit"]
      portuguese: ["testar", "teste", "validar", "verificar", "qualidade", "auditoria"]
    
    routing:
      type: "skill"
      name: "webapp-testing"
      confidence: 0.90
      mcp_servers: []

# Complexity-Based Routing
complexity_routing:
  enabled: true
  
  thresholds:
    simple: { min: 1, max: 3 }
    moderate: { min: 4, max: 6 }
    complex: { min: 7, max: 8 }
    critical: { min: 9, max: 10 }
  
  routing_matrix:
    simple:
      default:
        type: "droid"
        name: "apex-dev"
        confidence: 0.70
        mcp_servers: ["serena"]
    
    moderate:
      default:
        type: "droid"
        name: "apex-dev"
        confidence: 0.80
        mcp_servers: ["serena"]
      parallel:
        - type: "droid"
          name: "database-specialist"
          confidence: 0.85
          mcp_servers: ["serena"]
    
    complex:
      primary:
        type: "droid"
        name: "apex-dev"
        confidence: 0.90
        mcp_servers: ["serena", "context7"]
      parallel:
        - type: "droid"
          name: "code-reviewer"
          confidence: 0.85
          mcp_servers: ["serena"]
        - type: "droid"
          name: "database-specialist"
          confidence: 0.90
          mcp_servers: ["serena"]
    
    critical:
      research_phase:
        type: "droid"
        name: "apex-researcher"
        confidence: 0.95
        mcp_servers: ["context7", "tavily", "sequential-thinking"]
      implementation_phase:
        type: "droid"
        name: "apex-dev"
        confidence: 0.95
        mcp_servers: ["serena", "context7"]
      validation_phase:
        type: "droid"
        name: "code-reviewer"
        confidence: 0.95
        mcp_servers: ["serena"]

# Parallel Execution Configuration
parallel_execution:
  enabled: true
  max_concurrent: 3
  
  allowed_combinations:
    - name: "research_team"
      agents: ["apex-researcher", "database-specialist", "apex-ui-ux-designer"]
      triggers: ["spec_mode", "complexity_critical"]
    
    - name: "quality_gates"
      agents: ["code-reviewer", "database-specialist", "webapp-testing"]
      triggers: ["security", "testing", "database"]
    
    - name: "implementation_team"
      agents: ["apex-dev", "database-specialist"]
      triggers: ["complexity_complex", "database"]
    
    - name: "compliance_validation"
      agents: ["code-reviewer", "brazilian-fintech-compliance"]
      triggers: ["lgpd", "financial"]

# MCP Server Assignment by Specialization
mcp_assignment:
  droids:
    apex-researcher: ["context7", "tavily", "sequential-thinking", "serena"]
    apex-dev: ["serena", "context7"]
    code-reviewer: ["serena", "context7"]
    database-specialist: ["serena"]
    apex-ui-ux-designer: ["context7"]
    product-architect: ["context7", "tavily", "sequential-thinking"]
  
  skills:
    brazilian-fintech-compliance: ["context7", "tavily"]
    webapp-testing: []
    frontend-design: ["context7"]
    aegis-architect: ["context7", "tavily", "sequential-thinking"]
    algorithmic-art: []
    canvas-design: []
    theme-factory: []
    web-artifacts-builder: []

# Quality Gates Configuration
quality_gates:
  enabled: true
  
  gates:
    - name: "brazilian_compliance"
      required_for: ["lgpd", "financial", "accessibility"]
      validators: ["brazilian-fintech-compliance", "code-reviewer"]
    
    - name: "security_validation"
      required_for: ["security", "financial", "database"]
      validators: ["code-reviewer"]
    
    - name: "database_validation"
      required_for: ["database", "migration"]
      validators: ["database-specialist"]
    
    - name: "accessibility_validation"
      required_for: ["design", "ui", "ux"]
      validators: ["apex-ui-ux-designer"]
    
    - name: "performance_validation"
      required_for: ["critical", "financial"]
      validators: ["apex-dev", "code-reviewer"]

# Monitoring & Metrics
monitoring:
  enabled: true
  
  metrics:
    routing_accuracy: { target: 0.90, unit: "%" }
    task_completion_rate: { target: 0.95, unit: "%" }
    compliance_validation_rate: { target: 1.00, unit: "%" }
    context_transfer_efficiency: { target: 0.95, unit: "%" }
    parallel_execution_success: { target: 0.90, unit: "%" }
