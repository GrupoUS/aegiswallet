#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run color validation before commit
echo "?? Validating color usage..."
bun scripts/validate-colors.ts

if [ $? -ne 0 ]; then
  echo "? Color validation failed! Please fix hardcoded colors before committing."
  echo "?? Use semantic tokens from src/index.css instead:"
  echo "   - success, warning, destructive, info"
  echo "   - financial-positive, financial-negative, financial-neutral"
  echo "   - pix-primary, pix-accent"
  exit 1
fi

echo "? Color validation passed!"

# Run linting
echo "?? Running linter..."
bun lint

if [ $? -ne 0 ]; then
  echo "? Linting failed. Please fix issues before committing."
  exit 1
fi

echo "? Pre-commit checks passed!"
