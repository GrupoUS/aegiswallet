// AegisWallet API - Bundled for Vercel Node.js Runtime
// Generated at: 2025-12-02T19:35:41.340Z
// Entry: src/server/vercel.ts

var pK=Object.create;var Up=Object.defineProperty;var mK=Object.getOwnPropertyDescriptor;var fK=Object.getOwnPropertyNames;var hK=Object.getPrototypeOf,gK=Object.prototype.hasOwnProperty;var s=(t,e)=>Up(t,"name",{value:e,configurable:!0}),yK=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var b=(t,e)=>()=>(t&&(e=t(t=0)),e);var Fe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),On=(t,e)=>{for(var r in e)Up(t,r,{get:e[r],enumerable:!0})},vK=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of fK(e))!gK.call(t,o)&&o!==r&&Up(t,o,{get:()=>e[o],enumerable:!(n=mK(e,o))||n.enumerable});return t};var hu=(t,e,r)=>(r=t!=null?pK(hK(t)):{},vK(e||!t||!t.__esModule?Up(r,"default",{value:t,enumerable:!0}):r,t));var By,c1=b(()=>{By=s((t,e,r)=>(n,o)=>{let i=-1;return a(0);async function a(c){if(c<=i)throw new Error("next() called multiple times");i=c;let l,d=!1,p;if(t[c]?(p=t[c][0][0],n.req.routeIndex=c):p=c===t.length&&o||void 0,p)try{l=await p(n,()=>a(c+1))}catch(m){if(m instanceof Error&&e)n.error=m,l=await e(m,n),d=!0;else throw m}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||d)&&(n.res=l),n}},"compose")});var Lp,Vy=b(()=>{Lp=class extends Error{static{s(this,"HTTPException")}res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}}});var u1,l1=b(()=>{u1=Symbol()});async function _K(t,e){let r=await t.formData();return r?bK(r,e):{}}function bK(t,e){let r=Object.create(null);return t.forEach((n,o)=>{e.all||o.endsWith("[]")?wK(r,o,n):r[o]=n}),e.dot&&Object.entries(r).forEach(([n,o])=>{n.includes(".")&&(SK(r,n,o),delete r[n])}),r}var d1,wK,SK,p1=b(()=>{Hy();d1=s(async(t,e=Object.create(null))=>{let{all:r=!1,dot:n=!1}=e,i=(t instanceof qp?t.raw.headers:t.headers).get("Content-Type");return i?.startsWith("multipart/form-data")||i?.startsWith("application/x-www-form-urlencoded")?_K(t,{all:r,dot:n}):{}},"parseBody");s(_K,"parseFormData");s(bK,"convertFormDataToBodyData");wK=s((t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},"handleParsingAllValues"),SK=s((t,e,r)=>{let n=t,o=e.split(".");o.forEach((i,a)=>{a===o.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},"handleParsingNestedValues")});var Jy,m1,xK,TK,Fp,f1,wa,EK,Gy,h1,Ds,Bp,Zy,g1,y1,v1,gu,js=b(()=>{Jy=s(t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},"splitPath"),m1=s(t=>{let{groups:e,path:r}=xK(t),n=Jy(r);return TK(n,e)},"splitRoutingPath"),xK=s(t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,n)=>{let o=`@${n}`;return e.push([o,r]),o}),{groups:e,path:t}},"extractGroupsFromPath"),TK=s((t,e)=>{for(let r=e.length-1;r>=0;r--){let[n]=e[r];for(let o=t.length-1;o>=0;o--)if(t[o].includes(n)){t[o]=t[o].replace(n,e[r][1]);break}}return t},"replaceGroupMarks"),Fp={},f1=s((t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${t}#${e}`;return Fp[n]||(r[2]?Fp[n]=e&&e[0]!==":"&&e[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:Fp[n]=[t,r[1],!0]),Fp[n]}return null},"getPattern"),wa=s((t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},"tryDecode"),EK=s(t=>wa(t,decodeURI),"tryDecodeURI"),Gy=s(t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),n=r;for(;n<e.length;n++){let o=e.charCodeAt(n);if(o===37){let i=e.indexOf("?",n),a=e.slice(r,i===-1?void 0:i);return EK(a.includes("%25")?a.replace(/%25/g,"%2525"):a)}else if(o===63)break}return e.slice(r,n)},"getPath"),h1=s(t=>{let e=Gy(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},"getPathNoStrict"),Ds=s((t,e,...r)=>(r.length&&(e=Ds(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),"mergePath"),Bp=s(t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],n="";return e.forEach(o=>{if(o!==""&&!/\:/.test(o))n+="/"+o;else if(/\:/.test(o))if(/\?/.test(o)){r.length===0&&n===""?r.push("/"):r.push(n);let i=o.replace("?","");n+="/"+i,r.push(n)}else n+="/"+o}),r.filter((o,i,a)=>a.indexOf(o)===i)},"checkOptionalParameter"),Zy=s(t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?wa(t,gu):t):t,"_decodeURI"),g1=s((t,e,r)=>{let n;if(!r&&e&&!/[%+]/.test(e)){let a=t.indexOf("?",8);if(a===-1)return;for(t.startsWith(e,a+1)||(a=t.indexOf(`&${e}`,a+1));a!==-1;){let c=t.charCodeAt(a+e.length+1);if(c===61){let l=a+e.length+2,d=t.indexOf("&",l);return Zy(t.slice(l,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";a=t.indexOf(`&${e}`,a+1)}if(n=/[%+]/.test(t),!n)return}let o={};n??=/[%+]/.test(t);let i=t.indexOf("?",8);for(;i!==-1;){let a=t.indexOf("&",i+1),c=t.indexOf("=",i);c>a&&a!==-1&&(c=-1);let l=t.slice(i+1,c===-1?a===-1?void 0:a:c);if(n&&(l=Zy(l)),i=a,l==="")continue;let d;c===-1?d="":(d=t.slice(c+1,a===-1?void 0:a),n&&(d=Zy(d))),r?(o[l]&&Array.isArray(o[l])||(o[l]=[]),o[l].push(d)):o[l]??=d}return e?o[e]:o},"_getQueryParam"),y1=g1,v1=s((t,e)=>g1(t,e,!0),"getQueryParams"),gu=decodeURIComponent});var _1,qp,Hy=b(()=>{Vy();l1();p1();js();_1=s(t=>wa(t,gu),"tryDecodeURIComponent"),qp=class{static{s(this,"HonoRequest")}raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#i()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#n(e);return r&&/\%/.test(r)?_1(r):r}#i(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let n=this.#n(this.#t[0][this.routeIndex][1][r]);n!==void 0&&(t[r]=/\%/.test(n)?_1(n):n)}return t}#n(t){return this.#t[1]?this.#t[1][t]:t}query(t){return y1(this.url,t)}queries(t){return v1(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,n)=>{e[n]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await d1(this,t)}#o=s(t=>{let{bodyCache:e,raw:r}=this,n=e[t];if(n)return n;let o=Object.keys(e)[0];return o?e[o].then(i=>(o==="json"&&(i=JSON.stringify(i)),new Response(i)[t]())):e[t]=r[t]()},"#cachedBody");json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[u1](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}}});var b1,kK,Ky,w1=b(()=>{b1={Stringify:1,BeforeStream:2,Stream:3},kK=s((t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r},"raw"),Ky=s(async(t,e,r,n,o)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let i=t.callbacks;if(!i?.length)return Promise.resolve(t);o?o[0]+=t:o=[t];let a=Promise.all(i.map(c=>c({phase:e,buffer:o,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(l=>Ky(l,e,!1,n,o))).then(()=>o[0]));return r?kK(await a,i):a},"resolveCallback")});var IK,Wy,S1,x1=b(()=>{Hy();w1();IK="text/plain; charset=UTF-8",Wy=s((t,e)=>({"Content-Type":t,...e}),"setDefaultContentType"),S1=class{static{s(this,"Context")}#e;#t;env={};#r;finalized=!1;error;#i;#n;#o;#d;#u;#c;#s;#p;#l;constructor(t,e){this.#e=t,e&&(this.#n=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#l=e.path,this.#p=e.matchResult)}get req(){return this.#t??=new qp(this.#e,this.#l,this.#p),this.#t}get event(){if(this.#n&&"respondWith"in this.#n)return this.#n;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#n)return this.#n;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#s??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let n=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let o of n)t.headers.append("set-cookie",o)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=s((...t)=>(this.#u??=e=>this.html(e),this.#u(...t)),"render");setLayout=s(t=>this.#d=t,"setLayout");getLayout=s(()=>this.#d,"getLayout");setRenderer=s(t=>{this.#u=t},"setRenderer");header=s((t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let n=this.#o?this.#o.headers:this.#s??=new Headers;e===void 0?n.delete(t):r?.append?n.append(t,e):n.set(t,e)},"header");status=s(t=>{this.#i=t},"status");set=s((t,e)=>{this.#r??=new Map,this.#r.set(t,e)},"set");get=s(t=>this.#r?this.#r.get(t):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(t,e,r){let n=this.#o?new Headers(this.#o.headers):this.#s??new Headers;if(typeof e=="object"&&"headers"in e){let i=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[a,c]of i)a.toLowerCase()==="set-cookie"?n.append(a,c):n.set(a,c)}if(r)for(let[i,a]of Object.entries(r))if(typeof a=="string")n.set(i,a);else{n.delete(i);for(let c of a)n.append(i,c)}let o=typeof e=="number"?e:e?.status??this.#i;return new Response(t,{status:o,headers:n})}newResponse=s((...t)=>this.#a(...t),"newResponse");body=s((t,e,r)=>this.#a(t,e,r),"body");text=s((t,e,r)=>!this.#s&&!this.#i&&!e&&!r&&!this.finalized?new Response(t):this.#a(t,e,Wy(IK,r)),"text");json=s((t,e,r)=>this.#a(JSON.stringify(t),e,Wy("application/json",r)),"json");html=s((t,e,r)=>{let n=s(o=>this.#a(o,e,Wy("text/html; charset=UTF-8",r)),"res");return typeof t=="object"?Ky(t,b1.Stringify,!1,{}).then(n):n(t)},"html");redirect=s((t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)},"redirect");notFound=s(()=>(this.#c??=()=>new Response,this.#c(this)),"notFound")}});var Jt,T1,E1,Vp,Hp,Li=b(()=>{Jt="ALL",T1="all",E1=["get","post","put","delete","options","patch"],Vp="Can not add a route since the matcher is already built.",Hp=class extends Error{static{s(this,"UnsupportedPathError")}}});var yu,Qy=b(()=>{yu="__COMPOSED_HANDLER"});var PK,k1,Xy,I1=b(()=>{c1();x1();Li();Qy();js();PK=s(t=>t.text("404 Not Found",404),"notFoundHandler"),k1=s((t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},"errorHandler"),Xy=class{static{s(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(t={}){[...E1,T1].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?this.#e=i:this.#i(o,this.#e,i),a.forEach(c=>{this.#i(o,this.#e,c)}),this)}),this.on=(o,i,...a)=>{for(let c of[i].flat()){this.#e=c;for(let l of[o].flat())a.map(d=>{this.#i(l.toUpperCase(),this.#e,d)})}return this},this.use=(o,...i)=>(typeof o=="string"?this.#e=o:(this.#e="*",i.unshift(o)),i.forEach(a=>{this.#i(Jt,this.#e,a)}),this);let{strict:r,...n}=t;Object.assign(this,n),this.getPath=r??!0?t.getPath??Gy:h1}#t(){let t=new Xy({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,t.#r=this.#r,t.routes=this.routes,t}#r=PK;errorHandler=k1;route(t,e){let r=this.basePath(t);return e.routes.map(n=>{let o;e.errorHandler===k1?o=n.handler:(o=s(async(i,a)=>(await By([],e.errorHandler)(i,()=>n.handler(i,a))).res,"handler"),o[yu]=n.handler),r.#i(n.method,n.path,o)}),this}basePath(t){let e=this.#t();return e._basePath=Ds(this._basePath,t),e}onError=s(t=>(this.errorHandler=t,this),"onError");notFound=s(t=>(this.#r=t,this),"notFound");mount(t,e,r){let n,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?n=s(c=>c,"replaceRequest"):n=r.replaceRequest));let i=o?c=>{let l=o(c);return Array.isArray(l)?l:[l]}:c=>{let l;try{l=c.executionCtx}catch{}return[c.env,l]};n||=(()=>{let c=Ds(this._basePath,t),l=c==="/"?0:c.length;return d=>{let p=new URL(d.url);return p.pathname=p.pathname.slice(l)||"/",new Request(p,d)}})();let a=s(async(c,l)=>{let d=await e(n(c.req.raw),...i(c));if(d)return d;await l()},"handler");return this.#i(Jt,Ds(t,"*"),a),this}#i(t,e,r){t=t.toUpperCase(),e=Ds(this._basePath,e);let n={basePath:this._basePath,path:e,method:t,handler:r};this.router.add(t,e,[r,n]),this.routes.push(n)}#n(t,e){if(t instanceof Error)return this.errorHandler(t,e);throw t}#o(t,e,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(t,e,r,"GET")))();let o=this.getPath(t,{env:r}),i=this.router.match(n,o),a=new S1(t,{path:o,matchResult:i,env:r,executionCtx:e,notFoundHandler:this.#r});if(i[0].length===1){let l;try{l=i[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(d){return this.#n(d,a)}return l instanceof Promise?l.then(d=>d||(a.finalized?a.res:this.#r(a))).catch(d=>this.#n(d,a)):l??this.#r(a)}let c=By(i[0],this.errorHandler,this.#r);return(async()=>{try{let l=await c(a);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#n(l,a)}})()}fetch=s((t,...e)=>this.#o(t,e[1],e[0],t.method),"fetch");request=s((t,e,r,n)=>t instanceof Request?this.fetch(e?new Request(t,e):t,r,n):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Ds("/",t)}`,e),r,n)),"request");fire=s(()=>{addEventListener("fetch",t=>{t.respondWith(this.#o(t.request,t,void 0,t.request.method))})},"fire")}});function Yy(t,e){let r=this.buildAllMatchers(),n=s((o,i)=>{let a=r[o]||r[Jt],c=a[2][i];if(c)return c;let l=i.match(a[0]);if(!l)return[[],Zp];let d=l.indexOf("",1);return[a[1][d],l]},"match2");return this.match=n,n(t,e)}var Zp,ev=b(()=>{Li();Zp=[];s(Yy,"match")});function CK(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===vu||t===_u?1:e===vu||e===_u?-1:t===Jp?1:e===Jp?-1:t.length===e.length?t<e?-1:1:e.length-t.length}var Jp,vu,_u,Ms,AK,Gp,tv=b(()=>{Jp="[^/]+",vu=".*",_u="(?:|/.*)",Ms=Symbol(),AK=new Set(".\\+*[^]$()");s(CK,"compareKey");Gp=class{static{s(this,"Node")}#e;#t;#r=Object.create(null);insert(t,e,r,n,o){if(t.length===0){if(this.#e!==void 0)throw Ms;if(o)return;this.#e=e;return}let[i,...a]=t,c=i==="*"?a.length===0?["","",vu]:["","",Jp]:i==="/*"?["","",_u]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(c){let d=c[1],p=c[2]||Jp;if(d&&c[2]&&(p===".*"||(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p))))throw Ms;if(l=this.#r[p],!l){if(Object.keys(this.#r).some(m=>m!==vu&&m!==_u))throw Ms;if(o)return;l=this.#r[p]=new Gp,d!==""&&(l.#t=n.varIndex++)}!o&&d!==""&&r.push([d,l.#t])}else if(l=this.#r[i],!l){if(Object.keys(this.#r).some(d=>d.length>1&&d!==vu&&d!==_u))throw Ms;if(o)return;l=this.#r[i]=new Gp}l.insert(a,e,r,n,o)}buildRegExpStr(){let e=Object.keys(this.#r).sort(CK).map(r=>{let n=this.#r[r];return(typeof n.#t=="number"?`(${r})@${n.#t}`:AK.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#e=="number"&&e.unshift(`#${this.#e}`),e.length===0?"":e.length===1?e[0]:"(?:"+e.join("|")+")"}}});var P1,A1=b(()=>{tv();P1=class{static{s(this,"Trie")}#e={varIndex:0};#t=new Gp;insert(t,e,r){let n=[],o=[];for(let a=0;;){let c=!1;if(t=t.replace(/\{[^}]+\}/g,l=>{let d=`@\\${a}`;return o[a]=[d,l],a++,c=!0,d}),!c)break}let i=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=o.length-1;a>=0;a--){let[c]=o[a];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(c)!==-1){i[l]=i[l].replace(c,o[a][1]);break}}return this.#t.insert(i,e,n,this.#e,r),n}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],n=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(o,i,a)=>i!==void 0?(r[++e]=Number(i),"$()"):(a!==void 0&&(n[Number(a)]=++e),"")),[new RegExp(`^${t}`),r,n]}}});function O1(t){return C1[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}function $K(){C1=Object.create(null)}function RK(t){let e=new P1,r=[];if(t.length===0)return OK;let n=t.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,p],[m,h])=>d?1:m?-1:p.length-h.length),o=Object.create(null);for(let d=0,p=-1,m=n.length;d<m;d++){let[h,y,g]=n[d];h?o[y]=[g.map(([_])=>[_,Object.create(null)]),Zp]:p++;let f;try{f=e.insert(y,p,h)}catch(_){throw _===Ms?new Hp(y):_}h||(r[p]=g.map(([_,S])=>{let w=Object.create(null);for(S-=1;S>=0;S--){let[x,I]=f[S];w[x]=I}return[_,w]}))}let[i,a,c]=e.buildRegExp();for(let d=0,p=r.length;d<p;d++)for(let m=0,h=r[d].length;m<h;m++){let y=r[d][m]?.[1];if(!y)continue;let g=Object.keys(y);for(let f=0,_=g.length;f<_;f++)y[g[f]]=c[y[g[f]]]}let l=[];for(let d in a)l[d]=r[a[d]];return[i,l,o]}function Sa(t,e){if(t){for(let r of Object.keys(t).sort((n,o)=>o.length-n.length))if(O1(r).test(e))return[...t[r]]}}var OK,C1,Kp,rv=b(()=>{Li();js();ev();tv();A1();OK=[/^$/,[],Object.create(null)],C1=Object.create(null);s(O1,"buildWildcardRegExp");s($K,"clearWildcardRegExpCache");s(RK,"buildMatcherFromPreprocessedRoutes");s(Sa,"findMiddleware");Kp=class{static{s(this,"RegExpRouter")}name="RegExpRouter";#e;#t;constructor(){this.#e={[Jt]:Object.create(null)},this.#t={[Jt]:Object.create(null)}}add(t,e,r){let n=this.#e,o=this.#t;if(!n||!o)throw new Error(Vp);n[t]||[n,o].forEach(c=>{c[t]=Object.create(null),Object.keys(c[Jt]).forEach(l=>{c[t][l]=[...c[Jt][l]]})}),e==="/*"&&(e="*");let i=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let c=O1(e);t===Jt?Object.keys(n).forEach(l=>{n[l][e]||=Sa(n[l],e)||Sa(n[Jt],e)||[]}):n[t][e]||=Sa(n[t],e)||Sa(n[Jt],e)||[],Object.keys(n).forEach(l=>{(t===Jt||t===l)&&Object.keys(n[l]).forEach(d=>{c.test(d)&&n[l][d].push([r,i])})}),Object.keys(o).forEach(l=>{(t===Jt||t===l)&&Object.keys(o[l]).forEach(d=>c.test(d)&&o[l][d].push([r,i]))});return}let a=Bp(e)||[e];for(let c=0,l=a.length;c<l;c++){let d=a[c];Object.keys(o).forEach(p=>{(t===Jt||t===p)&&(o[p][d]||=[...Sa(n[p],d)||Sa(n[Jt],d)||[]],o[p][d].push([r,i-l+c+1]))})}}match=Yy;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,$K(),t}#r(t){let e=[],r=t===Jt;return[this.#e,this.#t].forEach(n=>{let o=n[t]?Object.keys(n[t]).map(i=>[i,n[t][i]]):[];o.length!==0?(r||=!0,e.push(...o)):t!==Jt&&e.push(...Object.keys(n[Jt]).map(i=>[i,n[Jt][i]]))}),r?RK(e):null}}});var $1=b(()=>{Li();ev();rv()});var R1=b(()=>{rv();$1()});var nv,N1=b(()=>{Li();nv=class{static{s(this,"SmartRouter")}name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(Vp);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,n=this.#t,o=r.length,i=0,a;for(;i<o;i++){let c=r[i];try{for(let l=0,d=n.length;l<d;l++)c.add(...n[l]);a=c.match(t,e)}catch(l){if(l instanceof Hp)continue;throw l}this.match=c.match.bind(c),this.#e=[c],this.#t=void 0;break}if(i===o)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}}});var D1=b(()=>{N1()});var bu,ov,j1=b(()=>{Li();js();bu=Object.create(null),ov=class{static{s(this,"Node")}#e;#t;#r;#i=0;#n=bu;constructor(t,e,r){if(this.#t=r||Object.create(null),this.#e=[],t&&e){let n=Object.create(null);n[t]={handler:e,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(t,e,r){this.#i=++this.#i;let n=this,o=m1(e),i=[];for(let a=0,c=o.length;a<c;a++){let l=o[a],d=o[a+1],p=f1(l,d),m=Array.isArray(p)?p[0]:l;if(m in n.#t){n=n.#t[m],p&&i.push(p[1]);continue}n.#t[m]=new ov,p&&(n.#r.push(p),i.push(p[1])),n=n.#t[m]}return n.#e.push({[t]:{handler:r,possibleKeys:i.filter((a,c,l)=>l.indexOf(a)===c),score:this.#i}}),n}#o(t,e,r,n){let o=[];for(let i=0,a=t.#e.length;i<a;i++){let c=t.#e[i],l=c[e]||c[Jt],d={};if(l!==void 0&&(l.params=Object.create(null),o.push(l),r!==bu||n&&n!==bu))for(let p=0,m=l.possibleKeys.length;p<m;p++){let h=l.possibleKeys[p],y=d[l.score];l.params[h]=n?.[h]&&!y?n[h]:r[h]??n?.[h],d[l.score]=!0}}return o}search(t,e){let r=[];this.#n=bu;let o=[this],i=Jy(e),a=[];for(let c=0,l=i.length;c<l;c++){let d=i[c],p=c===l-1,m=[];for(let h=0,y=o.length;h<y;h++){let g=o[h],f=g.#t[d];f&&(f.#n=g.#n,p?(f.#t["*"]&&r.push(...this.#o(f.#t["*"],t,g.#n)),r.push(...this.#o(f,t,g.#n))):m.push(f));for(let _=0,S=g.#r.length;_<S;_++){let w=g.#r[_],x=g.#n===bu?{}:{...g.#n};if(w==="*"){let A=g.#t["*"];A&&(r.push(...this.#o(A,t,g.#n)),A.#n=x,m.push(A));continue}let[I,N,$]=w;if(!d&&!($ instanceof RegExp))continue;let O=g.#t[I],R=i.slice(c).join("/");if($ instanceof RegExp){let A=$.exec(R);if(A){if(x[N]=A[0],r.push(...this.#o(O,t,g.#n,x)),Object.keys(O.#t).length){O.#n=x;let D=A[0].match(/\//)?.length??0;(a[D]||=[]).push(O)}continue}}($===!0||$.test(d))&&(x[N]=d,p?(r.push(...this.#o(O,t,x,g.#n)),O.#t["*"]&&r.push(...this.#o(O.#t["*"],t,x,g.#n))):(O.#n=x,m.push(O)))}}o=m.concat(a.shift()??[])}return r.length>1&&r.sort((c,l)=>c.score-l.score),[r.map(({handler:c,params:l})=>[c,l])]}}});var iv,M1=b(()=>{js();j1();iv=class{static{s(this,"TrieRouter")}name="TrieRouter";#e;constructor(){this.#e=new ov}add(t,e,r){let n=Bp(e);if(n){for(let o=0,i=n.length;o<i;o++)this.#e.insert(t,n[o],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}}});var z1=b(()=>{M1()});var Ae,sv=b(()=>{I1();R1();D1();z1();Ae=class extends Xy{static{s(this,"Hono")}constructor(t={}){super(t),this.router=t.router??new nv({routers:[new Kp,new iv]})}}});var Pt=b(()=>{sv()});function NK(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}async function U1(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!NK())}var L1=b(()=>{s(NK,"getColorEnabled");s(U1,"getColorEnabledAsync")});async function q1(t,e,r,n,o=0,i){let a=e==="<--"?`${e} ${r} ${n}`:`${e} ${r} ${n} ${await MK(o)} ${i}`;t(a)}var DK,jK,MK,F1,B1=b(()=>{L1();DK=s(t=>{let[e,r]=[",","."];return t.map(o=>o.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},"humanize"),jK=s(t=>{let e=Date.now()-t;return DK([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},"time"),MK=s(async t=>{if(await U1())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`},"colorStatus");s(q1,"log");F1=s((t=console.log)=>s(async function(r,n){let{method:o,url:i}=r.req,a=i.slice(i.indexOf("/",8));await q1(t,"<--",o,a);let c=Date.now();await n(),await q1(t,"-->",o,a,r.res.status,jK(c))},"logger2"),"logger")});var av,q,$t=b(()=>{"use strict";av=class{static{s(this,"SecureLogger")}isDevelopment;isProduction;currentUserId;sensitivePatterns;logBuffer=[];maxBufferSize=1e3;flushInterval=5e3;constructor(){this.isDevelopment=!!(typeof process<"u"&&!1||typeof import.meta<"u"&&import.meta.env?.DEV),this.isProduction=typeof process<"u"||typeof import.meta<"u"&&import.meta.env?.MODE==="production",this.sensitivePatterns=[/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/g,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,/\b(?:\+55\s?)?\(?[1-9]{2}\)?\s?[9]?\d{4}-?\d{4}\b/g,/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,/(?:sk_|eyJ)[a-zA-Z0-9_-]{20,}/g,/password["\s:]+["']?[^"'\s,}]+["']?/gi,/token["\s:]+["']?[^"'\s,}]+["']?/gi,/account["\s:]+["']?\d{6,}["']?/gi],this.isProduction&&setInterval(()=>this.flushBuffer(),this.flushInterval)}setUserId(e){this.currentUserId=e}clearUserId(){this.currentUserId=void 0}sanitizeData(e,r){let n=e;this.sensitivePatterns.forEach(i=>{n=n.replace(i,"[REDACTED]")});let o;return r&&(o=this.sanitizeContextObject(r)),{sanitizedContext:o,sanitizedMessage:n}}sanitizeContextObject(e){let r={};for(let[n,o]of Object.entries(e))if(this.isSensitiveKey(n)&&o)r[n]="[REDACTED]";else if(typeof o=="string"){let a=o;this.sensitivePatterns.forEach(c=>{a=a.replace(c,"[REDACTED]")}),r[n]=a}else typeof o=="object"&&o!==null?r[n]=this.sanitizeContextObject(o):r[n]=o;return this.currentUserId&&!r.userId&&(r.userId=`${this.currentUserId.substring(0,8)}...`),r}isSensitiveKey(e){return["password","token","secret","key","auth","session","email","phone","cpf","cnpj","account","balance","creditcard","card","bank","transaction","amount"].some(n=>e.toLowerCase().includes(n.toLowerCase()))}createLogEntry(e,r,n){let{sanitizedMessage:o,sanitizedContext:i}=this.sanitizeData(r,n);return{context:i,level:e,message:o,sanitized:!0,timestamp:new Date().toISOString()}}writeLog(e){if(this.isDevelopment)switch(e.level){case 0:break;case 1:break;case 2:break;case 3:case 4:break;case 5:break}else this.isProduction&&this.addToBuffer(e)}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>=this.maxBufferSize&&this.flushBuffer()}flushBuffer(){if(this.logBuffer.length===0)return;let e=[...this.logBuffer];this.logBuffer=[];let r=e.filter(n=>n.level>=3);r.length>0&&r.forEach(n=>{})}log(e,r,n){if(!this.isDevelopment&&e===0)return;let o=this.createLogEntry(e,r,n);this.writeLog(o)}debug(e,r){this.log(0,e,r)}info(e,r){this.log(1,e,r)}warn(e,r){this.log(2,e,r)}error(e,r){this.log(3,e,r)}security(e,r){this.log(4,e,r)}audit(e,r){this.log(5,e,r)}voiceCommand(e,r,n){this.info("Voice command processed",{...n,command:e.substring(0,50),confidence:r})}authEvent(e,r,n){this.audit("Authentication event",{...n,event:e,userId:r?`${r.substring(0,8)}...`:void 0})}userAction(e,r,n){this.info("User action",{action:e,component:r,...n})}performance(e,r,n){this.info("Performance metric",{...n,operation:e,duration:r})}getBufferStats(){return{lastFlush:new Date,maxSize:this.maxBufferSize,size:this.logBuffer.length}}forceFlush(){this.flushBuffer()}clear(){this.logBuffer=[],this.currentUserId=void 0}},q=new av});var V1,H1,Z1=b(()=>{"use strict";Pt();$t();V1=new Ae;V1.get("/",async t=>{try{return q.info("Starting calendar channel renewal check"),t.json({success:!0,message:"Calendar channel renewal completed",timestamp:new Date().toISOString(),channelsRenewed:0})}catch(e){return q.error("Calendar channel renewal failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Calendar channel renewal failed",error:e instanceof Error?e.message:"Unknown error"},500)}});H1=V1});var J1,G1,K1=b(()=>{"use strict";Pt();$t();J1=new Ae;J1.get("/",async t=>{try{return q.info("Starting sync queue cleanup"),t.json({success:!0,message:"Sync queue cleanup completed",timestamp:new Date().toISOString(),itemsDeleted:0})}catch(e){return q.error("Sync queue cleanup failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue cleanup failed",error:e instanceof Error?e.message:"Unknown error"},500)}});G1=J1});var W1,Q1,X1=b(()=>{"use strict";Pt();$t();W1=new Ae;W1.get("/",async t=>{try{return q.info("Starting sync queue processing"),t.json({success:!0,message:"Sync queue processing completed",timestamp:new Date().toISOString(),itemsProcessed:0})}catch(e){return q.error("Sync queue processing failed",{error:e instanceof Error?e.message:"Unknown error"}),t.json({success:!1,message:"Sync queue processing failed",error:e instanceof Error?e.message:"Unknown error"},500)}});Q1=W1});var wu,Y1,eO=b(()=>{"use strict";Pt();Z1();K1();X1();wu=new Ae;wu.route("/calendar-channel-renewal",H1);wu.route("/sync-queue-processor",Q1);wu.route("/cleanup-sync-queue",G1);wu.get("/health",t=>t.json({status:"healthy",service:"cron-jobs",timestamp:new Date().toISOString(),jobs:[{name:"calendar-channel-renewal",schedule:"0 0 * * *",description:"Renew expiring Google Calendar webhook channels"},{name:"sync-queue-processor",schedule:"*/5 * * * *",description:"Process pending Google Calendar sync queue items"},{name:"cleanup-sync-queue",schedule:"0 2 * * *",description:"Clean up old completed/failed sync queue items"}]}));Y1=wu});var tO,rO,nO=b(()=>{"use strict";tO=["https://aegiswallet.com","https://www.aegiswallet.com","https://app.aegiswallet.com","http://localhost:3000","http://localhost:5173","http://localhost:8080","http://localhost:8081","http://localhost:8082","https://localhost:3000","https://localhost:5173","https://localhost:8080","https://localhost:8081","https://localhost:8082"],rO=s(async(t,e)=>{let r=t.req.header("Origin");if(tO.includes(r||"")||r?.startsWith("http://localhost:")&&!1||r?.startsWith("https://localhost:")&&!1?t.header("Access-Control-Allow-Origin",r||"*"):t.header("Access-Control-Allow-Origin",tO[0]),t.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.header("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, X-Client-ID"),t.header("Access-Control-Allow-Credentials","true"),t.header("Access-Control-Max-Age","86400"),t.header("Vary","Origin"),t.req.method==="OPTIONS")return t.newResponse(null,204);await e()},"corsMiddleware")});function te(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,j))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(j in r&&r[j]===e[j])return!0;r=Object.getPrototypeOf(r)}return!1}var j,iSe,he=b(()=>{j=Symbol.for("drizzle:entityKind"),iSe=Symbol.for("drizzle:hasOwnEntityKind");s(te,"is")});var Ut,Io=b(()=>{he();Ut=class{static{s(this,"Column")}constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[j]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}});var Wp,cv=b(()=>{he();Wp=class{static{s(this,"ColumnBuilder")}static[j]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}});var ro,Qp=b(()=>{ro=Symbol.for("drizzle:Name")});var Xp,uv,lv=b(()=>{he();Qp();Xp=class{static{s(this,"ForeignKeyBuilder")}static[j]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:n,columns:o,foreignColumns:i}=e();return{name:n,columns:o,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new uv(e,this)}},uv=class{static{s(this,"ForeignKey")}constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[j]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(c=>c.name),i=n.map(c=>c.name),a=[this.table[ro],...o,n[0].table[ro],...i];return e??`${a.join("_")}_fk`}}});function Yp(t,...e){return t(...e)}var dv=b(()=>{s(Yp,"iife")});function fv(t,e){return`${t[ro]}_${e.join("_")}_unique`}var pv,oO,mv,hv=b(()=>{he();Qp();s(fv,"uniqueKeyName");pv=class{static{s(this,"UniqueConstraintBuilder")}constructor(e,r){this.name=r,this.columns=e}static[j]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new mv(e,this.columns,this.nullsNotDistinctConfig,this.name)}},oO=class{static{s(this,"UniqueOnConstraintBuilder")}static[j]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new pv(e,this.name)}},mv=class{static{s(this,"UniqueConstraint")}constructor(e,r,n,o){this.table=e,this.columns=r,this.name=o??fv(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}static[j]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}});function iO(t,e,r){for(let n=e;n<t.length;n++){let o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function sO(t,e=0){let r=[],n=e,o=!1;for(;n<t.length;){let i=t[n];if(i===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,i==="\\"){n+=2;continue}if(i==='"'){let[l,d]=iO(t,n+1,!0);r.push(l),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){let[l,d]=sO(t,n+1);r.push(l),n=d;continue}let[a,c]=iO(t,n,!1);r.push(a),n=c}return[r,n]}function aO(t){let[e]=sO(t,1);return e}function gv(t){return`{${t.map(e=>Array.isArray(e)?gv(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var yv=b(()=>{s(iO,"parsePgArrayValue");s(sO,"parsePgNestedArray");s(aO,"parsePgArray");s(gv,"makePgArray")});var Te,fe,vv,xa,_v,bv,ft=b(()=>{cv();Io();he();lv();dv();hv();yv();Te=class extends Wp{static{s(this,"PgColumnBuilder")}foreignKeyConfigs=[];static[j]="PgColumnBuilder";array(e){return new _v(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>Yp((i,a)=>{let c=new Xp(()=>{let l=i();return{columns:[e],foreignColumns:[l]}});return a.onUpdate&&c.onUpdate(a.onUpdate),a.onDelete&&c.onDelete(a.onDelete),c.build(r)},n,o))}buildExtraConfigColumn(e){return new vv(e,this.config)}},fe=class extends Ut{static{s(this,"PgColumn")}constructor(e,r){r.uniqueName||(r.uniqueName=fv(e,[r.name])),super(e,r),this.table=e}static[j]="PgColumn"},vv=class extends fe{static{s(this,"ExtraConfigColumn")}static[j]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},xa=class{static{s(this,"IndexedColumn")}static[j]="IndexedColumn";constructor(e,r,n,o){this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=o}name;keyAsName;type;indexConfig},_v=class extends Te{static{s(this,"PgArrayBuilder")}static[j]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){let r=this.config.baseBuilder.build(e);return new bv(e,this.config,r)}},bv=class t extends fe{static{s(this,"PgArray")}constructor(e,r,n,o){super(e,r),this.baseColumn=n,this.range=o,this.size=r.size}size;static[j]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=aO(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let n=e.map(o=>o===null?null:te(this.baseColumn,t)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?n:gv(n)}}});function cO(t){return!!t&&typeof t=="function"&&em in t&&t[em]===!0}function fr(t,e){return Array.isArray(e)?Ev(t,[...e],void 0):kv(t,e,void 0)}function Ev(t,e,r){let n=Object.assign(o=>new xv(o??"",n),{enumName:t,enumValues:e,schema:r,[em]:!0});return n}function kv(t,e,r){let n=Object.assign(o=>new wv(o??"",n),{enumName:t,enumValues:Object.values(e),schema:r,[em]:!0});return n}var wv,Sv,em,xv,Tv,tm=b(()=>{he();ft();wv=class extends Te{static{s(this,"PgEnumObjectColumnBuilder")}static[j]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new Sv(e,this.config)}},Sv=class extends fe{static{s(this,"PgEnumObjectColumn")}static[j]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},em=Symbol.for("drizzle:isPgEnum");s(cO,"isPgEnum");xv=class extends Te{static{s(this,"PgEnumColumnBuilder")}static[j]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new Tv(e,this.config)}},Tv=class extends fe{static{s(this,"PgEnumColumn")}static[j]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};s(fr,"pgEnum");s(Ev,"pgEnumWithSchema");s(kv,"pgEnumObjectWithSchema")});var sr,Ta,no=b(()=>{he();sr=class{static{s(this,"Subquery")}static[j]="Subquery";constructor(e,r,n,o=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o,usedTables:i}}},Ta=class extends sr{static{s(this,"WithSubquery")}static[j]="WithSubquery"}});var uO,lO=b(()=>{uO="0.44.7"});var Iv,Pv,wr,qi=b(()=>{dv();lO();wr={startActiveSpan(t,e){return Iv?(Pv||(Pv=Iv.trace.getTracer("drizzle-orm",uO)),Yp((r,n)=>n.startActiveSpan(t,o=>{try{return e(o)}catch(i){throw o.setStatus({code:r.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{o.end()}}),Iv,Pv)):e()}}});var Gt,oi=b(()=>{Gt=Symbol.for("drizzle:ViewBaseConfig")});function hn(t){return t[ro]}function Us(t){return`${t[zs]??"public"}.${t[ro]}`}var zs,rm,dO,Av,Cv,Su,pO,zK,ge,Kr=b(()=>{he();Qp();zs=Symbol.for("drizzle:Schema"),rm=Symbol.for("drizzle:Columns"),dO=Symbol.for("drizzle:ExtraConfigColumns"),Av=Symbol.for("drizzle:OriginalName"),Cv=Symbol.for("drizzle:BaseName"),Su=Symbol.for("drizzle:IsAlias"),pO=Symbol.for("drizzle:ExtraConfigBuilder"),zK=Symbol.for("drizzle:IsDrizzleTable"),ge=class{static{s(this,"Table")}static[j]="Table";static Symbol={Name:ro,Schema:zs,OriginalName:Av,Columns:rm,ExtraConfigColumns:dO,BaseName:Cv,IsAlias:Su,ExtraConfigBuilder:pO};[ro];[Av];[zs];[rm];[dO];[Cv];[Su]=!1;[zK]=!0;[pO]=void 0;constructor(e,r,n){this[ro]=this[Av]=e,this[zs]=r,this[Cv]=n}};s(hn,"getTableName");s(Us,"getTableUniqueName")});function Ov(t){return t!=null&&typeof t.getSQL=="function"}function UK(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}function fO(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}function z(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new Sr(t[0]));for(let[n,o]of e.entries())r.push(o,new Sr(t[n+1]));return new be(r)}function Fi(t,e){return t.map(r=>{if(te(r,ii)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(te(r,gn)&&te(r.value,ii)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}var mO,Sr,be,xu,hO,gO,ixe,gn,ii,LK,Wr,or=b(()=>{he();tm();no();qi();oi();Io();Kr();mO=class{static{s(this,"FakePrimitiveParam")}static[j]="FakePrimitiveParam"};s(Ov,"isSQLWrapper");s(UK,"mergeQueries");Sr=class{static{s(this,"StringChunk")}static[j]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new be([this])}},be=class t{static{s(this,"SQL")}constructor(e){this.queryChunks=e;for(let r of e)if(te(r,ge)){let n=r[ge.Symbol.Schema];this.usedTables.push(n===void 0?r[ge.Symbol.Name]:n+"."+r[ge.Symbol.Name])}}static[j]="SQL";decoder=hO;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return wr.startActiveSpan("drizzle.buildSQL",r=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){let n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:i,escapeParam:a,prepareTyping:c,inlineParams:l,paramStartIndex:d}=n;return UK(e.map(p=>{if(te(p,Sr))return{sql:p.value.join(""),params:[]};if(te(p,xu))return{sql:i(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){let m=[new Sr("(")];for(let[h,y]of p.entries())m.push(y),h<p.length-1&&m.push(new Sr(", "));return m.push(new Sr(")")),this.buildQueryFromSourceParams(m,n)}if(te(p,t))return this.buildQueryFromSourceParams(p.queryChunks,{...n,inlineParams:l||p.shouldInlineParams});if(te(p,ge)){let m=p[ge.Symbol.Schema],h=p[ge.Symbol.Name];return{sql:m===void 0||p[Su]?i(h):i(m)+"."+i(h),params:[]}}if(te(p,Ut)){let m=o.getColumnCasing(p);if(r.invokeSource==="indexes")return{sql:i(m),params:[]};let h=p.table[ge.Symbol.Schema];return{sql:p.table[Su]||h===void 0?i(p.table[ge.Symbol.Name])+"."+i(m):i(h)+"."+i(p.table[ge.Symbol.Name])+"."+i(m),params:[]}}if(te(p,Wr)){let m=p[Gt].schema,h=p[Gt].name;return{sql:m===void 0||p[Gt].isAlias?i(h):i(m)+"."+i(h),params:[]}}if(te(p,gn)){if(te(p.value,ii))return{sql:a(d.value++,p),params:[p],typings:["none"]};let m=p.value===null?null:p.encoder.mapToDriverValue(p.value);if(te(m,t))return this.buildQueryFromSourceParams([m],n);if(l)return{sql:this.mapInlineParam(m,n),params:[]};let h=["none"];return c&&(h=[c(p.encoder)]),{sql:a(d.value++,m),params:[m],typings:h}}return te(p,ii)?{sql:a(d.value++,p),params:[p],typings:["none"]}:te(p,t.Aliased)&&p.fieldAlias!==void 0?{sql:i(p.fieldAlias),params:[]}:te(p,sr)?p._.isWith?{sql:i(p._.alias),params:[]}:this.buildQueryFromSourceParams([new Sr("("),p._.sql,new Sr(") "),new xu(p._.alias)],n):cO(p)?p.schema?{sql:i(p.schema)+"."+i(p.enumName),params:[]}:{sql:i(p.enumName),params:[]}:Ov(p)?p.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([p.getSQL()],n):this.buildQueryFromSourceParams([new Sr("("),p.getSQL(),new Sr(")")],n):l?{sql:this.mapInlineParam(p,n),params:[]}:{sql:a(d.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},xu=class{static{s(this,"Name")}constructor(e){this.value=e}static[j]="Name";brand;getSQL(){return new be([this])}};s(fO,"isDriverValueEncoder");hO={mapFromDriverValue:s(t=>t,"mapFromDriverValue")},gO={mapToDriverValue:s(t=>t,"mapToDriverValue")},ixe={...hO,...gO},gn=class{static{s(this,"Param")}constructor(e,r=gO){this.value=e,this.encoder=r}static[j]="Param";brand;getSQL(){return new be([this])}};s(z,"sql");(t=>{function e(){return new be([])}s(e,"empty"),t.empty=e;function r(l){return new be(l)}s(r,"fromList"),t.fromList=r;function n(l){return new be([new Sr(l)])}s(n,"raw"),t.raw=n;function o(l,d){let p=[];for(let[m,h]of l.entries())m>0&&d!==void 0&&p.push(d),p.push(h);return new be(p)}s(o,"join"),t.join=o;function i(l){return new xu(l)}s(i,"identifier"),t.identifier=i;function a(l){return new ii(l)}s(a,"placeholder2"),t.placeholder=a;function c(l,d){return new gn(l,d)}s(c,"param2"),t.param=c})(z||(z={}));(t=>{class e{static{s(this,"Aliased")}constructor(n,o){this.sql=n,this.fieldAlias=o}static[j]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(be||(be={}));ii=class{static{s(this,"Placeholder")}constructor(e){this.name=e}static[j]="Placeholder";getSQL(){return new be([this])}};s(Fi,"fillPlaceholders");LK=Symbol.for("drizzle:IsDrizzleView"),Wr=class{static{s(this,"View")}static[j]="View";[Gt];[LK]=!0;constructor({name:e,schema:r,selectedFields:n,query:o}){this[Gt]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new be([this])}};Ut.prototype.getSQL=function(){return new be([this])};ge.prototype.getSQL=function(){return new be([this])};sr.prototype.getSQL=function(){return new be([this])}});function Tu(t,e){return new Proxy(t,new Ea(e,!1))}function Po(t,e){return new Proxy(t,new Ls(new Proxy(t.table,new Ea(e,!1))))}function $v(t,e){return new be.Aliased(Eu(t.sql,e),t.fieldAlias)}function Eu(t,e){return z.join(t.queryChunks.map(r=>te(r,Ut)?Po(r,e):te(r,be)?Eu(r,e):te(r,be.Aliased)?$v(r,e):r))}var Ls,Ea,yO,nm=b(()=>{Io();he();or();Kr();oi();Ls=class{static{s(this,"ColumnAliasProxyHandler")}constructor(e){this.table=e}static[j]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},Ea=class{static{s(this,"TableAliasProxyHandler")}constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[j]="TableAliasProxyHandler";get(e,r){if(r===ge.Symbol.IsAlias)return!0;if(r===ge.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===ge.Symbol.OriginalName)return this.alias;if(r===Gt)return{...e[Gt],name:this.alias,isAlias:!0};if(r===ge.Symbol.Columns){let o=e[ge.Symbol.Columns];if(!o)return o;let i={};return Object.keys(o).map(a=>{i[a]=new Proxy(o[a],new Ls(new Proxy(e,this)))}),i}let n=e[r];return te(n,Ut)?new Proxy(n,new Ls(new Proxy(e,this))):n}},yO=class{static{s(this,"RelationTableAliasProxyHandler")}constructor(e){this.alias=e}static[j]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?Tu(e.sourceTable,this.alias):e[r]}};s(Tu,"aliasedTable");s(Po,"aliasedTableColumn");s($v,"mapColumnsInAliasedSQLToAlias");s(Eu,"mapColumnsInSQLToAlias")});var ku,si,om,im=b(()=>{he();ku=class extends Error{static{s(this,"DrizzleError")}static[j]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},si=class t extends Error{static{s(this,"DrizzleQueryError")}constructor(e,r,n){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=n,Error.captureStackTrace(this,t),n&&(this.cause=n)}},om=class extends ku{static{s(this,"TransactionRollbackError")}static[j]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}});var Rv,ka,Ia,Pa=b(()=>{he();Rv=class{static{s(this,"ConsoleLogWriter")}static[j]="ConsoleLogWriter";write(e){console.log(e)}},ka=class{static{s(this,"DefaultLogger")}static[j]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new Rv}logQuery(e,r){let n=r.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),o=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${o}`)}},Ia=class{static{s(this,"NoopLogger")}static[j]="NoopLogger";logQuery(){}}});var vO=b(()=>{});var Br,ai=b(()=>{he();Br=class{static{s(this,"QueryPromise")}static[j]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}}});function sm(t,e,r){let n={},o=t.reduce((i,{path:a,field:c},l)=>{let d;te(c,Ut)?d=c:te(c,be)?d=c.decoder:d=c.sql.decoder;let p=i;for(let[m,h]of a.entries())if(m<a.length-1)h in p||(p[h]={}),p=p[h];else{let y=e[l],g=p[h]=y===null?null:d.mapFromDriverValue(y);if(r&&te(c,Ut)&&a.length===2){let f=a[0];f in n?typeof n[f]=="string"&&n[f]!==hn(c.table)&&(n[f]=!1):n[f]=g===null?hn(c.table):!1}}return i},{});if(r&&Object.keys(n).length>0)for(let[i,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(o[i]=null);return o}function Bn(t,e){return Object.entries(t).reduce((r,[n,o])=>{if(typeof n!="string")return r;let i=e?[...e,n]:[n];return te(o,Ut)||te(o,be)||te(o,be.Aliased)?r.push({path:i,field:o}):te(o,ge)?r.push(...Bn(o[ge.Symbol.Columns],i)):r.push(...Bn(o,i)),r},[])}function Iu(t,e){let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let[o,i]of r.entries())if(i!==n[o])return!1;return!0}function am(t,e){let r=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,o])=>te(o,be)||te(o,Ut)?[n,o]:[n,new gn(o,t[ge.Symbol.Columns][n])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function _O(t,e){for(let r of e)for(let n of Object.getOwnPropertyNames(r.prototype))n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))}function Pu(t){return t[ge.Symbol.Columns]}function ci(t){return te(t,sr)?t._.alias:te(t,Wr)?t[Gt].name:te(t,be)?void 0:t[ge.Symbol.IsAlias]?t[ge.Symbol.Name]:t[ge.Symbol.BaseName]}function yt(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function cm(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Cxe,kt=b(()=>{Io();he();or();no();Kr();oi();s(sm,"mapResultRow");s(Bn,"orderSelectedFields");s(Iu,"haveSameKeys");s(am,"mapUpdateSet");s(_O,"applyMixins");s(Pu,"getTableColumns");s(ci,"getTableLikeName");s(yt,"getColumnNameAndConfig");s(cm,"isConfig");Cxe=typeof TextDecoder>"u"?null:new TextDecoder});var ui,Au=b(()=>{he();ft();ui=class extends Te{static{s(this,"PgIntColumnBaseBuilder")}static[j]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}});function bO(t,e){let{name:r,config:n}=yt(t,e);return n.mode==="number"?new Nv(r):new jv(r)}var Nv,Dv,jv,Mv,zv=b(()=>{he();kt();ft();Au();Nv=class extends ui{static{s(this,"PgBigInt53Builder")}static[j]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Dv(e,this.config)}},Dv=class extends fe{static{s(this,"PgBigInt53")}static[j]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},jv=class extends ui{static{s(this,"PgBigInt64Builder")}static[j]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Mv(e,this.config)}},Mv=class extends fe{static{s(this,"PgBigInt64")}static[j]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};s(bO,"bigint")});function wO(t,e){let{name:r,config:n}=yt(t,e);return n.mode==="number"?new Uv(r):new qv(r)}var Uv,Lv,qv,Fv,Bv=b(()=>{he();kt();ft();Uv=class extends Te{static{s(this,"PgBigSerial53Builder")}static[j]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Lv(e,this.config)}},Lv=class extends fe{static{s(this,"PgBigSerial53")}static[j]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},qv=class extends Te{static{s(this,"PgBigSerial64Builder")}static[j]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Fv(e,this.config)}},Fv=class extends fe{static{s(this,"PgBigSerial64")}static[j]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};s(wO,"bigserial")});function _e(t){return new Vv(t??"")}var Vv,Hv,Zv=b(()=>{he();ft();Vv=class extends Te{static{s(this,"PgBooleanBuilder")}static[j]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Hv(e,this.config)}},Hv=class extends fe{static{s(this,"PgBoolean")}static[j]="PgBoolean";getSQLType(){return"boolean"}};s(_e,"boolean")});function SO(t,e={}){let{name:r,config:n}=yt(t,e);return new Jv(r,n)}var Jv,Gv,Kv=b(()=>{he();kt();ft();Jv=class extends Te{static{s(this,"PgCharBuilder")}static[j]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Gv(e,this.config)}},Gv=class extends fe{static{s(this,"PgChar")}static[j]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};s(SO,"char")});function xO(t){return new Wv(t??"")}var Wv,Qv,Xv=b(()=>{he();ft();Wv=class extends Te{static{s(this,"PgCidrBuilder")}static[j]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Qv(e,this.config)}},Qv=class extends fe{static{s(this,"PgCidr")}static[j]="PgCidr";getSQLType(){return"cidr"}};s(xO,"cidr")});function TO(t){return(e,r)=>{let{name:n,config:o}=yt(e,r);return new Yv(n,o,t)}}var Yv,e_,t_=b(()=>{he();kt();ft();Yv=class extends Te{static{s(this,"PgCustomColumnBuilder")}static[j]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new e_(e,this.config)}},e_=class extends fe{static{s(this,"PgCustomColumn")}static[j]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};s(TO,"customType")});var Ao,um=b(()=>{he();or();ft();Ao=class extends Te{static{s(this,"PgDateColumnBaseBuilder")}static[j]="PgDateColumnBaseBuilder";defaultNow(){return this.default(z`now()`)}}});function Vr(t,e){let{name:r,config:n}=yt(t,e);return n?.mode==="date"?new r_(r):new n_(r)}var r_,Cu,n_,Ou,o_=b(()=>{he();kt();ft();um();r_=class extends Ao{static{s(this,"PgDateBuilder")}static[j]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Cu(e,this.config)}},Cu=class extends fe{static{s(this,"PgDate")}static[j]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},n_=class extends Ao{static{s(this,"PgDateStringBuilder")}static[j]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Ou(e,this.config)}},Ou=class extends fe{static{s(this,"PgDateString")}static[j]="PgDateString";getSQLType(){return"date"}};s(Vr,"date")});function EO(t){return new i_(t??"")}var i_,s_,a_=b(()=>{he();ft();i_=class extends Te{static{s(this,"PgDoublePrecisionBuilder")}static[j]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new s_(e,this.config)}},s_=class extends fe{static{s(this,"PgDoublePrecision")}static[j]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};s(EO,"doublePrecision")});function $n(t){return new c_(t??"")}var c_,u_,l_=b(()=>{he();ft();c_=class extends Te{static{s(this,"PgInetBuilder")}static[j]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new u_(e,this.config)}},u_=class extends fe{static{s(this,"PgInet")}static[j]="PgInet";getSQLType(){return"inet"}};s($n,"inet")});function Rt(t){return new d_(t??"")}var d_,p_,m_=b(()=>{he();ft();Au();d_=class extends ui{static{s(this,"PgIntegerBuilder")}static[j]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new p_(e,this.config)}},p_=class extends fe{static{s(this,"PgInteger")}static[j]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};s(Rt,"integer")});function kO(t,e={}){let{name:r,config:n}=yt(t,e);return new f_(r,n)}var f_,h_,g_=b(()=>{he();kt();ft();f_=class extends Te{static{s(this,"PgIntervalBuilder")}static[j]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new h_(e,this.config)}},h_=class extends fe{static{s(this,"PgInterval")}static[j]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};s(kO,"interval")});function IO(t){return new y_(t??"")}var y_,$u,v_=b(()=>{he();ft();y_=class extends Te{static{s(this,"PgJsonBuilder")}static[j]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new $u(e,this.config)}},$u=class extends fe{static{s(this,"PgJson")}static[j]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};s(IO,"json")});function dt(t){return new __(t??"")}var __,Ru,b_=b(()=>{he();ft();__=class extends Te{static{s(this,"PgJsonbBuilder")}static[j]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Ru(e,this.config)}},Ru=class extends fe{static{s(this,"PgJsonb")}static[j]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};s(dt,"jsonb")});function PO(t,e){let{name:r,config:n}=yt(t,e);return!n?.mode||n.mode==="tuple"?new w_(r):new x_(r)}var w_,S_,x_,T_,E_=b(()=>{he();kt();ft();w_=class extends Te{static{s(this,"PgLineBuilder")}static[j]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new S_(e,this.config)}},S_=class extends fe{static{s(this,"PgLineTuple")}static[j]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},x_=class extends Te{static{s(this,"PgLineABCBuilder")}static[j]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new T_(e,this.config)}},T_=class extends fe{static{s(this,"PgLineABC")}static[j]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};s(PO,"line")});function AO(t){return new k_(t??"")}var k_,I_,P_=b(()=>{he();ft();k_=class extends Te{static{s(this,"PgMacaddrBuilder")}static[j]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new I_(e,this.config)}},I_=class extends fe{static{s(this,"PgMacaddr")}static[j]="PgMacaddr";getSQLType(){return"macaddr"}};s(AO,"macaddr")});function CO(t){return new A_(t??"")}var A_,C_,O_=b(()=>{he();ft();A_=class extends Te{static{s(this,"PgMacaddr8Builder")}static[j]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new C_(e,this.config)}},C_=class extends fe{static{s(this,"PgMacaddr8")}static[j]="PgMacaddr8";getSQLType(){return"macaddr8"}};s(CO,"macaddr8")});function M_(t,e){let{name:r,config:n}=yt(t,e),o=n?.mode;return o==="number"?new R_(r,n?.precision,n?.scale):o==="bigint"?new D_(r,n?.precision,n?.scale):new $_(r,n?.precision,n?.scale)}var $_,Nu,R_,N_,D_,j_,pt,z_=b(()=>{he();kt();ft();$_=class extends Te{static{s(this,"PgNumericBuilder")}static[j]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new Nu(e,this.config)}},Nu=class extends fe{static{s(this,"PgNumeric")}static[j]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},R_=class extends Te{static{s(this,"PgNumericNumberBuilder")}static[j]="PgNumericNumberBuilder";constructor(e,r,n){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=n}build(e){return new N_(e,this.config)}},N_=class extends fe{static{s(this,"PgNumericNumber")}static[j]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},D_=class extends Te{static{s(this,"PgNumericBigIntBuilder")}static[j]="PgNumericBigIntBuilder";constructor(e,r,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=n}build(e){return new j_(e,this.config)}},j_=class extends fe{static{s(this,"PgNumericBigInt")}static[j]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};s(M_,"numeric");pt=M_});function OO(t,e){let{name:r,config:n}=yt(t,e);return!n?.mode||n.mode==="tuple"?new U_(r):new q_(r)}var U_,L_,q_,F_,B_=b(()=>{he();kt();ft();U_=class extends Te{static{s(this,"PgPointTupleBuilder")}static[j]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new L_(e,this.config)}},L_=class extends fe{static{s(this,"PgPointTuple")}static[j]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},q_=class extends Te{static{s(this,"PgPointObjectBuilder")}static[j]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new F_(e,this.config)}},F_=class extends fe{static{s(this,"PgPointObject")}static[j]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};s(OO,"point")});function qK(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function $O(t,e){let r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}function V_(t){let e=qK(t),r=0,n=e[r];r+=1;let o=new DataView(e.buffer),i=o.getUint32(r,n===1);r+=4;let a;if(i&536870912&&(a=o.getUint32(r,n===1),r+=4),(i&65535)===1){let c=$O(e,r);r+=8;let l=$O(e,r);return r+=8,[c,l]}throw new Error("Unsupported geometry type")}var RO=b(()=>{s(qK,"hexToBytes");s($O,"bytesToFloat64");s(V_,"parseEWKB")});function NO(t,e){let{name:r,config:n}=yt(t,e);return!n?.mode||n.mode==="tuple"?new H_(r):new J_(r)}var H_,Z_,J_,G_,K_=b(()=>{he();kt();ft();RO();H_=class extends Te{static{s(this,"PgGeometryBuilder")}static[j]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Z_(e,this.config)}},Z_=class extends fe{static{s(this,"PgGeometry")}static[j]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return V_(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},J_=class extends Te{static{s(this,"PgGeometryObjectBuilder")}static[j]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new G_(e,this.config)}},G_=class extends fe{static{s(this,"PgGeometryObject")}static[j]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=V_(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};s(NO,"geometry")});function DO(t){return new W_(t??"")}var W_,Q_,X_=b(()=>{he();ft();W_=class extends Te{static{s(this,"PgRealBuilder")}static[j]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Q_(e,this.config)}},Q_=class extends fe{static{s(this,"PgReal")}static[j]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=s(e=>typeof e=="string"?Number.parseFloat(e):e,"mapFromDriverValue")};s(DO,"real")});function jO(t){return new Y_(t??"")}var Y_,eb,tb=b(()=>{he();ft();Y_=class extends Te{static{s(this,"PgSerialBuilder")}static[j]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new eb(e,this.config)}},eb=class extends fe{static{s(this,"PgSerial")}static[j]="PgSerial";getSQLType(){return"serial"}};s(jO,"serial")});function MO(t){return new rb(t??"")}var rb,nb,ob=b(()=>{he();ft();Au();rb=class extends ui{static{s(this,"PgSmallIntBuilder")}static[j]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new nb(e,this.config)}},nb=class extends fe{static{s(this,"PgSmallInt")}static[j]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=s(e=>typeof e=="string"?Number(e):e,"mapFromDriverValue")};s(MO,"smallint")});function zO(t){return new ib(t??"")}var ib,sb,ab=b(()=>{he();ft();ib=class extends Te{static{s(this,"PgSmallSerialBuilder")}static[j]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new sb(e,this.config)}},sb=class extends fe{static{s(this,"PgSmallSerial")}static[j]="PgSmallSerial";getSQLType(){return"smallserial"}};s(zO,"smallserial")});function C(t,e={}){let{name:r,config:n}=yt(t,e);return new cb(r,n)}var cb,ub,lb=b(()=>{he();kt();ft();cb=class extends Te{static{s(this,"PgTextBuilder")}static[j]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new ub(e,this.config)}},ub=class extends fe{static{s(this,"PgText")}static[j]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};s(C,"text")});function UO(t,e={}){let{name:r,config:n}=yt(t,e);return new db(r,n.withTimezone??!1,n.precision)}var db,Du,pb=b(()=>{he();kt();ft();um();db=class extends Ao{static{s(this,"PgTimeBuilder")}constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[j]="PgTimeBuilder";build(e){return new Du(e,this.config)}},Du=class extends fe{static{s(this,"PgTime")}static[j]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};s(UO,"time")});function K(t,e={}){let{name:r,config:n}=yt(t,e);return n?.mode==="string"?new fb(r,n.withTimezone??!1,n.precision):new mb(r,n?.withTimezone??!1,n?.precision)}var mb,ju,fb,Mu,hb=b(()=>{he();kt();ft();um();mb=class extends Ao{static{s(this,"PgTimestampBuilder")}static[j]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new ju(e,this.config)}},ju=class extends fe{static{s(this,"PgTimestamp")}static[j]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=s(e=>new Date(this.withTimezone?e:e+"+0000"),"mapFromDriverValue");mapToDriverValue=s(e=>e.toISOString(),"mapToDriverValue")},fb=class extends Ao{static{s(this,"PgTimestampStringBuilder")}static[j]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Mu(e,this.config)}},Mu=class extends fe{static{s(this,"PgTimestampString")}static[j]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};s(K,"timestamp")});function Aa(t){return new gb(t??"")}var gb,zu,yb=b(()=>{he();or();ft();gb=class extends Te{static{s(this,"PgUUIDBuilder")}static[j]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(z`gen_random_uuid()`)}build(e){return new zu(e,this.config)}},zu=class extends fe{static{s(this,"PgUUID")}static[j]="PgUUID";getSQLType(){return"uuid"}};s(Aa,"uuid")});function LO(t,e={}){let{name:r,config:n}=yt(t,e);return new vb(r,n)}var vb,_b,bb=b(()=>{he();kt();ft();vb=class extends Te{static{s(this,"PgVarcharBuilder")}static[j]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _b(e,this.config)}},_b=class extends fe{static{s(this,"PgVarchar")}static[j]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};s(LO,"varchar")});function qO(t,e){let{name:r,config:n}=yt(t,e);return new wb(r,n)}var wb,Sb,xb=b(()=>{he();kt();ft();wb=class extends Te{static{s(this,"PgBinaryVectorBuilder")}static[j]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Sb(e,this.config)}},Sb=class extends fe{static{s(this,"PgBinaryVector")}static[j]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};s(qO,"bit")});function FO(t,e){let{name:r,config:n}=yt(t,e);return new Tb(r,n)}var Tb,Eb,kb=b(()=>{he();kt();ft();Tb=class extends Te{static{s(this,"PgHalfVectorBuilder")}static[j]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Eb(e,this.config)}},Eb=class extends fe{static{s(this,"PgHalfVector")}static[j]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};s(FO,"halfvec")});function BO(t,e){let{name:r,config:n}=yt(t,e);return new Ib(r,n)}var Ib,Pb,Ab=b(()=>{he();kt();ft();Ib=class extends Te{static{s(this,"PgSparseVectorBuilder")}static[j]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Pb(e,this.config)}},Pb=class extends fe{static{s(this,"PgSparseVector")}static[j]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};s(BO,"sparsevec")});function VO(t,e){let{name:r,config:n}=yt(t,e);return new Cb(r,n)}var Cb,Ob,$b=b(()=>{he();kt();ft();Cb=class extends Te{static{s(this,"PgVectorBuilder")}static[j]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Ob(e,this.config)}},Ob=class extends fe{static{s(this,"PgVector")}static[j]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};s(VO,"vector")});function HO(){return{bigint:bO,bigserial:wO,boolean:_e,char:SO,cidr:xO,customType:TO,date:Vr,doublePrecision:EO,inet:$n,integer:Rt,interval:kO,json:IO,jsonb:dt,line:PO,macaddr:AO,macaddr8:CO,numeric:M_,point:OO,geometry:NO,real:DO,serial:jO,smallint:MO,smallserial:zO,text:C,time:UO,timestamp:K,uuid:Aa,varchar:LO,bit:qO,halfvec:FO,sparsevec:BO,vector:VO}}var ZO=b(()=>{zv();Bv();Zv();Kv();Xv();t_();o_();a_();l_();m_();g_();v_();b_();E_();P_();O_();z_();B_();K_();X_();tb();ob();ab();lb();pb();hb();yb();bb();xb();kb();Ab();$b();s(HO,"getPgColumnBuilders")});function Nb(t,e,r,n,o=t){let i=new xr(t,n,o),a=typeof e=="function"?e(HO()):e,c=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.build(i);return i[Rb].push(...h.buildForeignKeys(y,i)),[p,y]})),l=Object.fromEntries(Object.entries(a).map(([p,m])=>{let h=m;h.setName(p);let y=h.buildExtraConfigColumn(i);return[p,y]})),d=Object.assign(i,c);return d[ge.Symbol.Columns]=c,d[ge.Symbol.ExtraConfigColumns]=l,r&&(d[xr.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:s(()=>(d[xr.Symbol.EnableRLS]=!0,d),"enableRLS")})}var Rb,JO,xr,ke,Bi=b(()=>{he();Kr();ZO();Rb=Symbol.for("drizzle:PgInlineForeignKeys"),JO=Symbol.for("drizzle:EnableRLS"),xr=class extends ge{static{s(this,"PgTable")}static[j]="PgTable";static Symbol=Object.assign({},ge.Symbol,{InlineForeignKeys:Rb,EnableRLS:JO});[Rb]=[];[JO]=!1;[ge.Symbol.ExtraConfigBuilder]=void 0;[ge.Symbol.ExtraConfigColumns]={}};s(Nb,"pgTableWithSchema");ke=s((t,e,r)=>Nb(t,e,r,void 0),"pgTable")});var lm,Db,jb=b(()=>{he();Bi();lm=class{static{s(this,"PrimaryKeyBuilder")}static[j]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new Db(e,this.columns,this.name)}},Db=class{static{s(this,"PrimaryKey")}constructor(e,r,n){this.table=e,this.columns=r,this.name=n}static[j]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[xr.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}});function yn(t,e){return fO(e)&&!Ov(t)&&!te(t,gn)&&!te(t,ii)&&!te(t,Ut)&&!te(t,ge)&&!te(t,Wr)?new gn(t,e):t}function Ie(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new be(e):new be([new Sr("("),z.join(e,new Sr(" and ")),new Sr(")")])}function qs(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new be(e):new be([new Sr("("),z.join(e,new Sr(" or ")),new Sr(")")])}function KO(t){return z`not ${t}`}function Ca(t,e){return Array.isArray(e)?e.length===0?z`false`:z`${t} in ${e.map(r=>yn(r,t))}`:z`${t} in ${yn(e,t)}`}function XO(t,e){return Array.isArray(e)?e.length===0?z`true`:z`${t} not in ${e.map(r=>yn(r,t))}`:z`${t} not in ${yn(e,t)}`}function dm(t){return z`${t} is null`}function YO(t){return z`${t} is not null`}function e$(t){return z`exists ${t}`}function t$(t){return z`not exists ${t}`}function r$(t,e,r){return z`${t} between ${yn(e,t)} and ${yn(r,t)}`}function n$(t,e,r){return z`${t} not between ${yn(e,t)} and ${yn(r,t)}`}function o$(t,e){return z`${t} like ${e}`}function i$(t,e){return z`${t} not like ${e}`}function Hr(t,e){return z`${t} ilike ${e}`}function s$(t,e){return z`${t} not ilike ${e}`}var J,GO,WO,Tr,QO,hr,a$=b(()=>{Io();he();Kr();or();s(yn,"bindIfParam");J=s((t,e)=>z`${t} = ${yn(e,t)}`,"eq"),GO=s((t,e)=>z`${t} <> ${yn(e,t)}`,"ne");s(Ie,"and");s(qs,"or");s(KO,"not");WO=s((t,e)=>z`${t} > ${yn(e,t)}`,"gt"),Tr=s((t,e)=>z`${t} >= ${yn(e,t)}`,"gte"),QO=s((t,e)=>z`${t} < ${yn(e,t)}`,"lt"),hr=s((t,e)=>z`${t} <= ${yn(e,t)}`,"lte");s(Ca,"inArray");s(XO,"notInArray");s(dm,"isNull");s(YO,"isNotNull");s(e$,"exists");s(t$,"notExists");s(r$,"between");s(n$,"notBetween");s(o$,"like");s(i$,"notLike");s(Hr,"ilike");s(s$,"notIlike")});function Vi(t){return z`${t} asc`}function Kt(t){return z`${t} desc`}var c$=b(()=>{or();s(Vi,"asc");s(Kt,"desc")});var Mb=b(()=>{a$();c$()});function u$(){return{and:Ie,between:r$,eq:J,exists:e$,gt:WO,gte:Tr,ilike:Hr,inArray:Ca,isNull:dm,isNotNull:YO,like:o$,lt:QO,lte:hr,ne:GO,not:KO,notBetween:n$,notExists:t$,notLike:i$,notIlike:s$,notInArray:XO,or:qs,sql:z}}function l$(){return{sql:z,asc:Vi,desc:Kt}}function hm(t,e){Object.keys(t).length===1&&"default"in t&&!te(t.default,ge)&&(t=t.default);let r={},n={},o={};for(let[i,a]of Object.entries(t))if(te(a,ge)){let c=Us(a),l=n[c];r[c]=i,o[i]={tsName:i,dbName:a[ge.Symbol.Name],schema:a[ge.Symbol.Schema],columns:a[ge.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let p of Object.values(a[ge.Symbol.Columns]))p.primary&&o[i].primaryKey.push(p);let d=a[ge.Symbol.ExtraConfigBuilder]?.(a[ge.Symbol.ExtraConfigColumns]);if(d)for(let p of Object.values(d))te(p,lm)&&o[i].primaryKey.push(...p.columns)}else if(te(a,mm)){let c=Us(a.table),l=r[c],d=a.config(e(a.table)),p;for(let[m,h]of Object.entries(d))if(l){let y=o[l];y.relations[m]=h,p&&y.primaryKey.push(...p)}else c in n||(n[c]={relations:{},primaryKey:p}),n[c].relations[m]=h}return{tables:o,tableNamesMap:r}}function Ze(t,e){return new mm(t,r=>Object.fromEntries(Object.entries(e(r)).map(([n,o])=>[n,o.withFieldName(n)])))}function FK(t){return s(function(r,n){return new Hi(t,r,n,n?.fields.reduce((o,i)=>o&&i.notNull,!0)??!1)},"one")}function BK(t){return s(function(r,n){return new Uu(t,r,n)},"many")}function d$(t,e,r){if(te(r,Hi)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=e[Us(r.referencedTable)];if(!n)throw new Error(`Table "${r.referencedTable[ge.Symbol.Name]}" not found in schema`);let o=t[n];if(!o)throw new Error(`Table "${n}" not found in schema`);let i=r.sourceTable,a=e[Us(i)];if(!a)throw new Error(`Table "${i[ge.Symbol.Name]}" not found in schema`);let c=[];for(let l of Object.values(o.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&c.push(l);if(c.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[ge.Symbol.Name]}". Please specify relation name`);if(c[0]&&te(c[0],Hi)&&c[0].config)return{fields:c[0].config.references,references:c[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function gm(t){return{one:FK(t),many:BK(t)}}function fm(t,e,r,n,o=i=>i){let i={};for(let[a,c]of n.entries())if(c.isJson){let l=e.relations[c.tsKey],d=r[a],p=typeof d=="string"?JSON.parse(d):d;i[c.tsKey]=te(l,Hi)?p&&fm(t,t[c.relationTableTsKey],p,c.selection,o):p.map(m=>fm(t,t[c.relationTableTsKey],m,c.selection,o))}else{let l=o(r[a]),d=c.field,p;te(d,Ut)?p=d:te(d,be)?p=d.decoder:p=d.sql.decoder,i[c.tsKey]=l===null?null:p.mapFromDriverValue(l)}return i}var pm,mm,Hi,Uu,Oa=b(()=>{Kr();Io();he();jb();Mb();or();pm=class{static{s(this,"Relation")}constructor(e,r,n){this.sourceTable=e,this.referencedTable=r,this.relationName=n,this.referencedTableName=r[ge.Symbol.Name]}static[j]="Relation";referencedTableName;fieldName},mm=class{static{s(this,"Relations")}constructor(e,r){this.table=e,this.config=r}static[j]="Relations"},Hi=class t extends pm{static{s(this,"One")}constructor(e,r,n,o){super(e,r,n?.relationName),this.config=n,this.isNullable=o}static[j]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},Uu=class t extends pm{static{s(this,"Many")}constructor(e,r,n){super(e,r,n?.relationName),this.config=n}static[j]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};s(u$,"getOperators");s(l$,"getOrderByOperators");s(hm,"extractTablesRelationalConfig");s(Ze,"relations");s(FK,"createOne");s(BK,"createMany");s(d$,"normalizeRelation");s(gm,"createTableRelationsHelpers");s(fm,"mapRelationalRow")});function p$(t){return z`count(${t||z.raw("*")})`.mapWith(Number)}function ym(t){return z`sum(${t})`.mapWith(String)}var m$=b(()=>{or();s(p$,"count");s(ym,"sum")});var f$=b(()=>{});var h$=b(()=>{m$();f$()});var vm=b(()=>{Mb();h$();or()});var zr=b(()=>{nm();cv();Io();he();im();Pa();vO();ai();Oa();vm();no();Kr();kt();oi()});function T$(t){return 0}function Vb(t,e=!1){let{protocol:r}=new URL(t),n="http:"+t.substring(r.length),{username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,searchParams:m,hash:h}=new URL(n);i=decodeURIComponent(i),o=decodeURIComponent(o),d=decodeURIComponent(d);let y=o+":"+i,g=e?Object.fromEntries(m.entries()):p;return{href:t,protocol:r,auth:y,username:o,password:i,host:a,hostname:c,port:l,pathname:d,search:p,query:g,hash:h}}function Fu(t){let e=1779033703,r=3144134277,n=1013904242,o=2773480762,i=1359893119,a=2600822924,c=528734635,l=1541459225,d=0,p=0,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=P((w,x)=>w>>>x|w<<32-x,"rrot"),y=new Uint32Array(64),g=new Uint8Array(64),f=P(()=>{for(let D=0,M=0;D<16;D++,M+=4)y[D]=g[M]<<24|g[M+1]<<16|g[M+2]<<8|g[M+3];for(let D=16;D<64;D++){let M=h(y[D-15],7)^h(y[D-15],18)^y[D-15]>>>3,Q=h(y[D-2],17)^h(y[D-2],19)^y[D-2]>>>10;y[D]=y[D-16]+M+y[D-7]+Q|0}let w=e,x=r,I=n,N=o,$=i,O=a,R=c,A=l;for(let D=0;D<64;D++){let M=h($,6)^h($,11)^h($,25),Q=$&O^~$&R,Z=A+M+Q+m[D]+y[D]|0,F=h(w,2)^h(w,13)^h(w,22),ee=w&x^w&I^x&I,ne=F+ee|0;A=R,R=O,O=$,$=N+Z|0,N=I,I=x,x=w,w=Z+ne|0}e=e+w|0,r=r+x|0,n=n+I|0,o=o+N|0,i=i+$|0,a=a+O|0,c=c+R|0,l=l+A|0,p=0},"process"),_=P(w=>{typeof w=="string"&&(w=new TextEncoder().encode(w));for(let x=0;x<w.length;x++)g[p++]=w[x],p===64&&f();d+=w.length},"add"),S=P(()=>{if(g[p++]=128,p==64&&f(),p+8>64){for(;p<64;)g[p++]=0;f()}for(;p<58;)g[p++]=0;let w=d*8;g[p++]=w/1099511627776&255,g[p++]=w/4294967296&255,g[p++]=w>>>24,g[p++]=w>>>16&255,g[p++]=w>>>8&255,g[p++]=w&255,f();let x=new Uint8Array(32);return x[0]=e>>>24,x[1]=e>>>16&255,x[2]=e>>>8&255,x[3]=e&255,x[4]=r>>>24,x[5]=r>>>16&255,x[6]=r>>>8&255,x[7]=r&255,x[8]=n>>>24,x[9]=n>>>16&255,x[10]=n>>>8&255,x[11]=n&255,x[12]=o>>>24,x[13]=o>>>16&255,x[14]=o>>>8&255,x[15]=o&255,x[16]=i>>>24,x[17]=i>>>16&255,x[18]=i>>>8&255,x[19]=i&255,x[20]=a>>>24,x[21]=a>>>16&255,x[22]=a>>>8&255,x[23]=a&255,x[24]=c>>>24,x[25]=c>>>16&255,x[26]=c>>>8&255,x[27]=c&255,x[28]=l>>>24,x[29]=l>>>16&255,x[30]=l>>>8&255,x[31]=l&255,x},"digest");return t===void 0?{add:_,digest:S}:(_(t),S())}function C$(t){return crypto.getRandomValues(Be.alloc(t))}function O$(t){if(t==="sha256")return{update:P(function(e){return{digest:P(function(){return Be.from(Fu(e))},"digest")}},"update")};if(t==="md5")return{update:P(function(e){return{digest:P(function(){return typeof e=="string"?Lb.hashStr(e):Lb.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}function $$(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:P(function(r){return{digest:P(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let n=e.length;if(n>64)e=Fu(e);else if(n<64){let l=new Uint8Array(64);l.set(e),e=l}let o=new Uint8Array(64),i=new Uint8Array(64);for(let l=0;l<64;l++)o[l]=54^e[l],i[l]=92^e[l];let a=new Uint8Array(r.length+64);a.set(o,0),a.set(r,64);let c=new Uint8Array(96);return c.set(i,0),c.set(Fu(a),64),Be.from(Fu(c))},"digest")}},"update")}}function D$(...t){return t.join("/")}function M$(t,e){e(new Error("No filesystem"))}function G$({socket:t,servername:e}){return t.startTls(e),t}function Y$(t,{alphabet:e,scratchArr:r}={}){if(!qu)if(qu=new Uint16Array(256),wm=new Uint16Array(256),b$)for(let y=0;y<256;y++)qu[y]=_m[y&15]<<8|_m[y>>>4],wm[y]=bm[y&15]<<8|bm[y>>>4];else for(let y=0;y<256;y++)qu[y]=_m[y&15]|_m[y>>>4]<<8,wm[y]=bm[y&15]|bm[y>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let n=t.length,o=n>>>1,i=n>>>2,a=r||new Uint16Array(n),c=new Uint32Array(t.buffer,t.byteOffset,i),l=new Uint32Array(a.buffer,a.byteOffset,o),d=e==="upper"?wm:qu,p=0,m=0,h;if(b$)for(;p<i;)h=c[p++],l[m++]=d[h>>>8&255]<<16|d[h&255],l[m++]=d[h>>>24]<<16|d[h>>>16&255];else for(;p<i;)h=c[p++],l[m++]=d[h>>>24]<<16|d[h>>>16&255],l[m++]=d[h>>>8&255]<<16|d[h&255];for(p<<=2;p<n;)a[p]=d[t[p++]];return zW.decode(a.subarray(0,n))}function eR(t,e={}){let r="",n=t.length,o=MW>>>1,i=Math.ceil(n/o),a=new Uint16Array(i>1?o:n);for(let c=0;c<i;c++){let l=c*o,d=l+o;r+=Y$(t.subarray(l,d),jW(DW({},e),{scratchArr:a}))}return r}function tR(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():eR(t,e)}function Xb(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}function uR(t){return t instanceof Be?"\\x"+tR(t):t}function qb(t){let{query:e,params:r}=t instanceof oR?t.toParameterizedQuery():t;return{query:e,params:r.map(n=>uR((0,qW.prepareValue)(n)))}}function Zi(t,{arrayMode:e,fullResults:r,fetchOptions:n,isolationLevel:o,readOnly:i,deferrable:a,authToken:c,disableWarningInBrowsers:l}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=Vb(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:p,username:m,hostname:h,port:y,pathname:g}=d;if(p!=="postgres:"&&p!=="postgresql:"||!m||!h||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function f(S,...w){if(!(Array.isArray(S)&&Array.isArray(S.raw)&&Array.isArray(w)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Sm(_,new oR(S,w))}s(f,"D"),P(f,"templateFn"),f.query=(S,w,x)=>new Sm(_,{query:S,params:w??[]},x),f.unsafe=S=>new sR(S),f.transaction=async(S,w)=>{if(typeof S=="function"&&(S=S(f)),!Array.isArray(S))throw new Error(w$);S.forEach(N=>{if(!(N instanceof Sm))throw new Error(w$)});let x=S.map(N=>N.queryData),I=S.map(N=>N.opts??{});return _(x,I,w)};async function _(S,w,x){let{fetchEndpoint:I,fetchFunction:N}=Fs,$=Array.isArray(S)?{queries:S.map(we=>qb(we))}:qb(S),O=n??{},R=e??!1,A=r??!1,D=o,M=i,Q=a;x!==void 0&&(x.fetchOptions!==void 0&&(O={...O,...x.fetchOptions}),x.arrayMode!==void 0&&(R=x.arrayMode),x.fullResults!==void 0&&(A=x.fullResults),x.isolationLevel!==void 0&&(D=x.isolationLevel),x.readOnly!==void 0&&(M=x.readOnly),x.deferrable!==void 0&&(Q=x.deferrable)),w!==void 0&&!Array.isArray(w)&&w.fetchOptions!==void 0&&(O={...O,...w.fetchOptions});let Z=c;!Array.isArray(w)&&w?.authToken!==void 0&&(Z=w.authToken);let F=typeof I=="function"?I(h,y,{jwtAuth:Z!==void 0}):I,ee={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},ne=await dR(Z);ne&&(ee.Authorization=`Bearer ${ne}`),Array.isArray(S)&&(D!==void 0&&(ee["Neon-Batch-Isolation-Level"]=D),M!==void 0&&(ee["Neon-Batch-Read-Only"]=String(M)),Q!==void 0&&(ee["Neon-Batch-Deferrable"]=String(Q))),l||Fs.disableWarningInBrowsers||Xb();let se;try{se=await(N??fetch)(F,{method:"POST",body:JSON.stringify($),headers:ee,...O})}catch(we){let Ee=new $a(`Error connecting to database: ${we}`);throw Ee.sourceError=we,Ee}if(se.ok){let we=await se.json();if(Array.isArray(S)){let Ee=we.results;if(!Array.isArray(Ee))throw new $a("Neon internal error: unexpected result format");return Ee.map((rt,Ke)=>{let G=w[Ke]??{},$e=G.arrayMode??R,ye=G.fullResults??A;return Fb(rt,{arrayMode:$e,fullResults:ye,types:G.types})})}else{let Ee=w??{},rt=Ee.arrayMode??R,Ke=Ee.fullResults??A;return Fb(we,{arrayMode:rt,fullResults:Ke,types:Ee.types})}}else{let{status:we}=se;if(we===400){let Ee=await se.json(),rt=new $a(Ee.message);for(let Ke of FW)rt[Ke]=Ee[Ke]??void 0;throw rt}else{let Ee=await se.text();throw new $a(`Server error (HTTP status ${we}): ${Ee}`)}}}return s(_,"Y"),P(_,"execute"),f}function Fb(t,{arrayMode:e,fullResults:r,types:n}){let o=new LW.default(n),i=t.fields.map(l=>l.name),a=t.fields.map(l=>o.getTypeParser(l.dataTypeID)),c=e===!0?t.rows.map(l=>l.map((d,p)=>d===null?null:a[p](d))):t.rows.map(l=>Object.fromEntries(l.map((d,p)=>[i[p],d===null?null:a[p](d)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=c,t._parsers=a,t._types=o,t):c}async function dR(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new $a("Error getting auth token.");throw e instanceof Error&&(r=new $a(`Error getting auth token: ${e.message}`)),r}}function mR(t,e){if(e)return{callback:e,result:void 0};let r,n,o=P(function(a,c){a?r(a):n(c)},"cb"),i=new t(function(a,c){n=a,r=c});return{callback:o,result:i}}var VK,Ra,HK,ZK,JK,GK,KK,P,vn,ot,oo,S$,Bs,$r,He,WK,QK,XK,xm,Bb,YK,Be,nt,Oe,Vs,x$,g$,zb,Lu,Fs,Bu,E$,k$,I$,A$,eW,tW,rW,nW,oW,iW,sW,aW,Tm,Hb,cW,li,Lb,uW,Zb,R$,Em,km,Vu,N$,Im,lW,Jb,j$,Gb,z$,Kb,U$,L$,q$,Ub,F$,dW,pW,mW,fW,B$,V$,hW,gW,Wb,yW,vW,H$,_W,bW,wW,SW,Z$,J$,xW,K$,TW,EW,W$,Q$,kW,IW,PW,AW,y$,Pm,CW,OW,$W,v$,RW,NW,_$,DW,jW,MW,b$,zW,Qb,_m,bm,UW,X$,qu,wm,rR,oR,iR,sR,LW,qW,aR,$a,w$,FW,lR,Sm,BW,VW,pR,HW,ZW,fR,di,Hu,GIe,KIe,WIe,QIe,Wt,Zu=b(()=>{VK=Object.create,Ra=Object.defineProperty,HK=Object.getOwnPropertyDescriptor,ZK=Object.getOwnPropertyNames,JK=Object.getPrototypeOf,GK=Object.prototype.hasOwnProperty,KK=s((t,e,r)=>e in t?Ra(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"Io"),P=s((t,e)=>Ra(t,"name",{value:e,configurable:!0}),"a"),vn=s((t,e)=>()=>(t&&(e=t(t=0)),e),"G"),ot=s((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),"T"),oo=s((t,e)=>{for(var r in e)Ra(t,r,{get:e[r],enumerable:!0})},"ie"),S$=s((t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ZK(e))!GK.call(t,o)&&o!==r&&Ra(t,o,{get:s(()=>e[o],"get"),enumerable:!(n=HK(e,o))||n.enumerable});return t},"Dn"),Bs=s((t,e,r)=>(r=t!=null?VK(JK(t)):{},S$(e||!t||!t.__esModule?Ra(r,"default",{value:t,enumerable:!0}):r,t)),"Se"),$r=s(t=>S$(Ra({},"__esModule",{value:!0}),t),"O"),He=s((t,e,r)=>KK(t,typeof e!="symbol"?e+"":e,r),"E"),WK=ot(t=>{"use strict";Oe(),t.byteLength=l,t.toByteArray=p,t.fromByteArray=y;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,a=o.length;i<a;++i)e[i]=o[i],r[o.charCodeAt(i)]=i;var i,a;r[45]=62,r[95]=63;function c(g){var f=g.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=g.indexOf("=");_===-1&&(_=f);var S=_===f?0:4-_%4;return[_,S]}s(c,"qn"),P(c,"getLens");function l(g){var f=c(g),_=f[0],S=f[1];return(_+S)*3/4-S}s(l,"Po"),P(l,"byteLength");function d(g,f,_){return(f+_)*3/4-_}s(d,"Bo"),P(d,"_byteLength");function p(g){var f,_=c(g),S=_[0],w=_[1],x=new n(d(g,S,w)),I=0,N=w>0?S-4:S,$;for($=0;$<N;$+=4)f=r[g.charCodeAt($)]<<18|r[g.charCodeAt($+1)]<<12|r[g.charCodeAt($+2)]<<6|r[g.charCodeAt($+3)],x[I++]=f>>16&255,x[I++]=f>>8&255,x[I++]=f&255;return w===2&&(f=r[g.charCodeAt($)]<<2|r[g.charCodeAt($+1)]>>4,x[I++]=f&255),w===1&&(f=r[g.charCodeAt($)]<<10|r[g.charCodeAt($+1)]<<4|r[g.charCodeAt($+2)]>>2,x[I++]=f>>8&255,x[I++]=f&255),x}s(p,"Ro"),P(p,"toByteArray");function m(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}s(m,"Lo"),P(m,"tripletToBase64");function h(g,f,_){for(var S,w=[],x=f;x<_;x+=3)S=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),w.push(m(S));return w.join("")}s(h,"Fo"),P(h,"encodeChunk");function y(g){for(var f,_=g.length,S=_%3,w=[],x=16383,I=0,N=_-S;I<N;I+=x)w.push(h(g,I,I+x>N?N:I+x));return S===1?(f=g[_-1],w.push(e[f>>2]+e[f<<4&63]+"==")):S===2&&(f=(g[_-2]<<8)+g[_-1],w.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),w.join("")}s(y,"ko"),P(y,"fromByteArray")}),QK=ot(t=>{Oe(),t.read=function(e,r,n,o,i){var a,c,l=i*8-o-1,d=(1<<l)-1,p=d>>1,m=-7,h=n?i-1:0,y=n?-1:1,g=e[r+h];for(h+=y,a=g&(1<<-m)-1,g>>=-m,m+=l;m>0;a=a*256+e[r+h],h+=y,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=o;m>0;c=c*256+e[r+h],h+=y,m-=8);if(a===0)a=1-p;else{if(a===d)return c?NaN:(g?-1:1)*(1/0);c=c+Math.pow(2,o),a=a-p}return(g?-1:1)*c*Math.pow(2,a-o)},t.write=function(e,r,n,o,i,a){var c,l,d,p=a*8-i-1,m=(1<<p)-1,h=m>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:a-1,f=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,c=m):(c=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+h>=1?r+=y/d:r+=y*Math.pow(2,1-h),r*d>=2&&(c++,d/=2),c+h>=m?(l=0,c=m):c+h>=1?(l=(r*d-1)*Math.pow(2,i),c=c+h):(l=r*Math.pow(2,h-1)*Math.pow(2,i),c=0));i>=8;e[n+g]=l&255,g+=f,l/=256,i-=8);for(c=c<<i|l,p+=i;p>0;e[n+g]=c&255,g+=f,c/=256,p-=8);e[n+g-f]|=_*128}}),XK=ot(t=>{"use strict";Oe();var e=WK(),r=QK(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let v=new Uint8Array(1),T={foo:P(function(){return 42},"foo")};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(v,T),v.foo()===42}catch{return!1}}s(i,"Mo"),P(i,"typedArraySupport"),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:P(function(){if(c.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:P(function(){if(c.isBuffer(this))return this.byteOffset},"get")});function a(v){if(v>o)throw new RangeError('The value "'+v+'" is invalid for option "size"');let T=new Uint8Array(v);return Object.setPrototypeOf(T,c.prototype),T}s(a,"he"),P(a,"createBuffer");function c(v,T,k){if(typeof v=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return l(v,T,k)}s(c,"h"),P(c,"Buffer"),c.poolSize=8192;function l(v,T,k){if(typeof v=="string")return h(v,T);if(ArrayBuffer.isView(v))return g(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(nr(v,ArrayBuffer)||v&&nr(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nr(v,SharedArrayBuffer)||v&&nr(v.buffer,SharedArrayBuffer)))return f(v,T,k);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let U=v.valueOf&&v.valueOf();if(U!=null&&U!==v)return c.from(U,T,k);let H=_(v);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return c.from(v[Symbol.toPrimitive]("string"),T,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s(l,"Gn"),P(l,"from"),c.from=function(v,T,k){return l(v,T,k)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function d(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}s(d,"Vn"),P(d,"assertSize");function p(v,T,k){return d(v),v<=0?a(v):T!==void 0?typeof k=="string"?a(v).fill(T,k):a(v).fill(T):a(v)}s(p,"Uo"),P(p,"alloc"),c.alloc=function(v,T,k){return p(v,T,k)};function m(v){return d(v),a(v<0?0:S(v)|0)}s(m,"$t"),P(m,"allocUnsafe"),c.allocUnsafe=function(v){return m(v)},c.allocUnsafeSlow=function(v){return m(v)};function h(v,T){if((typeof T!="string"||T==="")&&(T="utf8"),!c.isEncoding(T))throw new TypeError("Unknown encoding: "+T);let k=x(v,T)|0,U=a(k),H=U.write(v,T);return H!==k&&(U=U.slice(0,H)),U}s(h,"Do"),P(h,"fromString");function y(v){let T=v.length<0?0:S(v.length)|0,k=a(T);for(let U=0;U<T;U+=1)k[U]=v[U]&255;return k}s(y,"Wt"),P(y,"fromArrayLike");function g(v){if(nr(v,Uint8Array)){let T=new Uint8Array(v);return f(T.buffer,T.byteOffset,T.byteLength)}return y(v)}s(g,"Oo"),P(g,"fromArrayView");function f(v,T,k){if(T<0||v.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<T+(k||0))throw new RangeError('"length" is outside of buffer bounds');let U;return T===void 0&&k===void 0?U=new Uint8Array(v):k===void 0?U=new Uint8Array(v,T):U=new Uint8Array(v,T,k),Object.setPrototypeOf(U,c.prototype),U}s(f,"jt"),P(f,"fromArrayBuffer");function _(v){if(c.isBuffer(v)){let T=S(v.length)|0,k=a(T);return k.length===0||v.copy(k,0,0,T),k}if(v.length!==void 0)return typeof v.length!="number"||to(v.length)?a(0):y(v);if(v.type==="Buffer"&&Array.isArray(v.data))return y(v.data)}s(_,"qo"),P(_,"fromObject");function S(v){if(v>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return v|0}s(S,"Gt"),P(S,"checked");function w(v){return+v!=v&&(v=0),c.alloc(+v)}s(w,"Qo"),P(w,"SlowBuffer"),c.isBuffer=P(function(v){return v!=null&&v._isBuffer===!0&&v!==c.prototype},"isBuffer"),c.compare=P(function(v,T){if(nr(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),nr(T,Uint8Array)&&(T=c.from(T,T.offset,T.byteLength)),!c.isBuffer(v)||!c.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===T)return 0;let k=v.length,U=T.length;for(let H=0,re=Math.min(k,U);H<re;++H)if(v[H]!==T[H]){k=v[H],U=T[H];break}return k<U?-1:U<k?1:0},"compare"),c.isEncoding=P(function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),c.concat=P(function(v,T){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return c.alloc(0);let k;if(T===void 0)for(T=0,k=0;k<v.length;++k)T+=v[k].length;let U=c.allocUnsafe(T),H=0;for(k=0;k<v.length;++k){let re=v[k];if(nr(re,Uint8Array))H+re.length>U.length?(c.isBuffer(re)||(re=c.from(re)),re.copy(U,H)):Uint8Array.prototype.set.call(U,re,H);else if(c.isBuffer(re))re.copy(U,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=re.length}return U},"concat");function x(v,T){if(c.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||nr(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);let k=v.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&k===0)return 0;let H=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Ui(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return ko(v).length;default:if(H)return U?-1:Ui(v).length;T=(""+T).toLowerCase(),H=!0}}s(x,"zn"),P(x,"byteLength"),c.byteLength=x;function I(v,T,k){let U=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,T>>>=0,k<=T))return"";for(v||(v="utf8");;)switch(v){case"hex":return Ee(this,T,k);case"utf8":case"utf-8":return F(this,T,k);case"ascii":return se(this,T,k);case"latin1":case"binary":return we(this,T,k);case"base64":return Z(this,T,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,T,k);default:if(U)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),U=!0}}s(I,"No"),P(I,"slowToString"),c.prototype._isBuffer=!0;function N(v,T,k){let U=v[T];v[T]=v[k],v[k]=U}s(N,"Ae"),P(N,"swap"),c.prototype.swap16=P(function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<v;T+=2)N(this,T,T+1);return this},"swap16"),c.prototype.swap32=P(function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<v;T+=4)N(this,T,T+3),N(this,T+1,T+2);return this},"swap32"),c.prototype.swap64=P(function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<v;T+=8)N(this,T,T+7),N(this,T+1,T+6),N(this,T+2,T+5),N(this,T+3,T+4);return this},"swap64"),c.prototype.toString=P(function(){let v=this.length;return v===0?"":arguments.length===0?F(this,0,v):I.apply(this,arguments)},"toString"),c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=P(function(v){if(!c.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:c.compare(this,v)===0},"equals"),c.prototype.inspect=P(function(){let v="",T=t.INSPECT_MAX_BYTES;return v=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(v+=" ... "),"<Buffer "+v+">"},"inspect"),n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=P(function(v,T,k,U,H){if(nr(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),!c.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(T===void 0&&(T=0),k===void 0&&(k=v?v.length:0),U===void 0&&(U=0),H===void 0&&(H=this.length),T<0||k>v.length||U<0||H>this.length)throw new RangeError("out of range index");if(U>=H&&T>=k)return 0;if(U>=H)return-1;if(T>=k)return 1;if(T>>>=0,k>>>=0,U>>>=0,H>>>=0,this===v)return 0;let re=H-U,pe=k-T,Ne=Math.min(re,pe),bt=this.slice(U,H),Tt=v.slice(T,k);for(let mt=0;mt<Ne;++mt)if(bt[mt]!==Tt[mt]){re=bt[mt],pe=Tt[mt];break}return re<pe?-1:pe<re?1:0},"compare");function $(v,T,k,U,H){if(v.length===0)return-1;if(typeof k=="string"?(U=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,to(k)&&(k=H?0:v.length-1),k<0&&(k=v.length+k),k>=v.length){if(H)return-1;k=v.length-1}else if(k<0)if(H)k=0;else return-1;if(typeof T=="string"&&(T=c.from(T,U)),c.isBuffer(T))return T.length===0?-1:O(v,T,k,U,H);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(v,T,k):Uint8Array.prototype.lastIndexOf.call(v,T,k):O(v,[T],k,U,H);throw new TypeError("val must be string, number or Buffer")}s($,"Kn"),P($,"bidirectionalIndexOf");function O(v,T,k,U,H){let re=1,pe=v.length,Ne=T.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(v.length<2||T.length<2)return-1;re=2,pe/=2,Ne/=2,k/=2}function bt(mt,Zt){return re===1?mt[Zt]:mt.readUInt16BE(Zt*re)}s(bt,"c"),P(bt,"read");let Tt;if(H){let mt=-1;for(Tt=k;Tt<pe;Tt++)if(bt(v,Tt)===bt(T,mt===-1?0:Tt-mt)){if(mt===-1&&(mt=Tt),Tt-mt+1===Ne)return mt*re}else mt!==-1&&(Tt-=Tt-mt),mt=-1}else for(k+Ne>pe&&(k=pe-Ne),Tt=k;Tt>=0;Tt--){let mt=!0;for(let Zt=0;Zt<Ne;Zt++)if(bt(v,Tt+Zt)!==bt(T,Zt)){mt=!1;break}if(mt)return Tt}return-1}s(O,"jn"),P(O,"arrayIndexOf"),c.prototype.includes=P(function(v,T,k){return this.indexOf(v,T,k)!==-1},"includes"),c.prototype.indexOf=P(function(v,T,k){return $(this,v,T,k,!0)},"indexOf"),c.prototype.lastIndexOf=P(function(v,T,k){return $(this,v,T,k,!1)},"lastIndexOf");function R(v,T,k,U){k=Number(k)||0;let H=v.length-k;U?(U=Number(U),U>H&&(U=H)):U=H;let re=T.length;U>re/2&&(U=re/2);let pe;for(pe=0;pe<U;++pe){let Ne=parseInt(T.substr(pe*2,2),16);if(to(Ne))return pe;v[k+pe]=Ne}return pe}s(R,"Wo"),P(R,"hexWrite");function A(v,T,k,U){return Ir(Ui(T,v.length-k),v,k,U)}s(A,"jo"),P(A,"utf8Write");function D(v,T,k,U){return Ir(Mp(T),v,k,U)}s(D,"Ho"),P(D,"asciiWrite");function M(v,T,k,U){return Ir(ko(T),v,k,U)}s(M,"$o"),P(M,"base64Write");function Q(v,T,k,U){return Ir(Cn(T,v.length-k),v,k,U)}s(Q,"Go"),P(Q,"ucs2Write"),c.prototype.write=P(function(v,T,k,U){if(T===void 0)U="utf8",k=this.length,T=0;else if(k===void 0&&typeof T=="string")U=T,k=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(k)?(k=k>>>0,U===void 0&&(U="utf8")):(U=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let H=this.length-T;if((k===void 0||k>H)&&(k=H),v.length>0&&(k<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let re=!1;for(;;)switch(U){case"hex":return R(this,v,T,k);case"utf8":case"utf-8":return A(this,v,T,k);case"ascii":case"latin1":case"binary":return D(this,v,T,k);case"base64":return M(this,v,T,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,v,T,k);default:if(re)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),re=!0}},"write"),c.prototype.toJSON=P(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Z(v,T,k){return T===0&&k===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(T,k))}s(Z,"Vo"),P(Z,"base64Slice");function F(v,T,k){k=Math.min(v.length,k);let U=[],H=T;for(;H<k;){let re=v[H],pe=null,Ne=re>239?4:re>223?3:re>191?2:1;if(H+Ne<=k){let bt,Tt,mt,Zt;switch(Ne){case 1:re<128&&(pe=re);break;case 2:bt=v[H+1],(bt&192)===128&&(Zt=(re&31)<<6|bt&63,Zt>127&&(pe=Zt));break;case 3:bt=v[H+1],Tt=v[H+2],(bt&192)===128&&(Tt&192)===128&&(Zt=(re&15)<<12|(bt&63)<<6|Tt&63,Zt>2047&&(Zt<55296||Zt>57343)&&(pe=Zt));break;case 4:bt=v[H+1],Tt=v[H+2],mt=v[H+3],(bt&192)===128&&(Tt&192)===128&&(mt&192)===128&&(Zt=(re&15)<<18|(bt&63)<<12|(Tt&63)<<6|mt&63,Zt>65535&&Zt<1114112&&(pe=Zt))}}pe===null?(pe=65533,Ne=1):pe>65535&&(pe-=65536,U.push(pe>>>10&1023|55296),pe=56320|pe&1023),U.push(pe),H+=Ne}return ne(U)}s(F,"Yn"),P(F,"utf8Slice");var ee=4096;function ne(v){let T=v.length;if(T<=ee)return String.fromCharCode.apply(String,v);let k="",U=0;for(;U<T;)k+=String.fromCharCode.apply(String,v.slice(U,U+=ee));return k}s(ne,"zo"),P(ne,"decodeCodePointsArray");function se(v,T,k){let U="";k=Math.min(v.length,k);for(let H=T;H<k;++H)U+=String.fromCharCode(v[H]&127);return U}s(se,"Ko"),P(se,"asciiSlice");function we(v,T,k){let U="";k=Math.min(v.length,k);for(let H=T;H<k;++H)U+=String.fromCharCode(v[H]);return U}s(we,"Yo"),P(we,"latin1Slice");function Ee(v,T,k){let U=v.length;(!T||T<0)&&(T=0),(!k||k<0||k>U)&&(k=U);let H="";for(let re=T;re<k;++re)H+=zp[v[re]];return H}s(Ee,"Zo"),P(Ee,"hexSlice");function rt(v,T,k){let U=v.slice(T,k),H="";for(let re=0;re<U.length-1;re+=2)H+=String.fromCharCode(U[re]+U[re+1]*256);return H}s(rt,"Jo"),P(rt,"utf16leSlice"),c.prototype.slice=P(function(v,T){let k=this.length;v=~~v,T=T===void 0?k:~~T,v<0?(v+=k,v<0&&(v=0)):v>k&&(v=k),T<0?(T+=k,T<0&&(T=0)):T>k&&(T=k),T<v&&(T=v);let U=this.subarray(v,T);return Object.setPrototypeOf(U,c.prototype),U},"slice");function Ke(v,T,k){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+T>k)throw new RangeError("Trying to access beyond buffer length")}s(Ke,"q"),P(Ke,"checkOffset"),c.prototype.readUintLE=c.prototype.readUIntLE=P(function(v,T,k){v=v>>>0,T=T>>>0,k||Ke(v,T,this.length);let U=this[v],H=1,re=0;for(;++re<T&&(H*=256);)U+=this[v+re]*H;return U},"readUIntLE"),c.prototype.readUintBE=c.prototype.readUIntBE=P(function(v,T,k){v=v>>>0,T=T>>>0,k||Ke(v,T,this.length);let U=this[v+--T],H=1;for(;T>0&&(H*=256);)U+=this[v+--T]*H;return U},"readUIntBE"),c.prototype.readUint8=c.prototype.readUInt8=P(function(v,T){return v=v>>>0,T||Ke(v,1,this.length),this[v]},"readUInt8"),c.prototype.readUint16LE=c.prototype.readUInt16LE=P(function(v,T){return v=v>>>0,T||Ke(v,2,this.length),this[v]|this[v+1]<<8},"readUInt16LE"),c.prototype.readUint16BE=c.prototype.readUInt16BE=P(function(v,T){return v=v>>>0,T||Ke(v,2,this.length),this[v]<<8|this[v+1]},"readUInt16BE"),c.prototype.readUint32LE=c.prototype.readUInt32LE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},"readUInt32LE"),c.prototype.readUint32BE=c.prototype.readUInt32BE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},"readUInt32BE"),c.prototype.readBigUInt64LE=Mr(P(function(v){v=v>>>0,Or(v,"offset");let T=this[v],k=this[v+7];(T===void 0||k===void 0)&&Eo(v,this.length-8);let U=T+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,H=this[++v]+this[++v]*2**8+this[++v]*2**16+k*2**24;return BigInt(U)+(BigInt(H)<<BigInt(32))},"readBigUInt64LE")),c.prototype.readBigUInt64BE=Mr(P(function(v){v=v>>>0,Or(v,"offset");let T=this[v],k=this[v+7];(T===void 0||k===void 0)&&Eo(v,this.length-8);let U=T*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],H=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+k;return(BigInt(U)<<BigInt(32))+BigInt(H)},"readBigUInt64BE")),c.prototype.readIntLE=P(function(v,T,k){v=v>>>0,T=T>>>0,k||Ke(v,T,this.length);let U=this[v],H=1,re=0;for(;++re<T&&(H*=256);)U+=this[v+re]*H;return H*=128,U>=H&&(U-=Math.pow(2,8*T)),U},"readIntLE"),c.prototype.readIntBE=P(function(v,T,k){v=v>>>0,T=T>>>0,k||Ke(v,T,this.length);let U=T,H=1,re=this[v+--U];for(;U>0&&(H*=256);)re+=this[v+--U]*H;return H*=128,re>=H&&(re-=Math.pow(2,8*T)),re},"readIntBE"),c.prototype.readInt8=P(function(v,T){return v=v>>>0,T||Ke(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},"readInt8"),c.prototype.readInt16LE=P(function(v,T){v=v>>>0,T||Ke(v,2,this.length);let k=this[v]|this[v+1]<<8;return k&32768?k|4294901760:k},"readInt16LE"),c.prototype.readInt16BE=P(function(v,T){v=v>>>0,T||Ke(v,2,this.length);let k=this[v+1]|this[v]<<8;return k&32768?k|4294901760:k},"readInt16BE"),c.prototype.readInt32LE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},"readInt32LE"),c.prototype.readInt32BE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},"readInt32BE"),c.prototype.readBigInt64LE=Mr(P(function(v){v=v>>>0,Or(v,"offset");let T=this[v],k=this[v+7];(T===void 0||k===void 0)&&Eo(v,this.length-8);let U=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(k<<24);return(BigInt(U)<<BigInt(32))+BigInt(T+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)},"readBigInt64LE")),c.prototype.readBigInt64BE=Mr(P(function(v){v=v>>>0,Or(v,"offset");let T=this[v],k=this[v+7];(T===void 0||k===void 0)&&Eo(v,this.length-8);let U=(T<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(U)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+k)},"readBigInt64BE")),c.prototype.readFloatLE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),r.read(this,v,!0,23,4)},"readFloatLE"),c.prototype.readFloatBE=P(function(v,T){return v=v>>>0,T||Ke(v,4,this.length),r.read(this,v,!1,23,4)},"readFloatBE"),c.prototype.readDoubleLE=P(function(v,T){return v=v>>>0,T||Ke(v,8,this.length),r.read(this,v,!0,52,8)},"readDoubleLE"),c.prototype.readDoubleBE=P(function(v,T){return v=v>>>0,T||Ke(v,8,this.length),r.read(this,v,!1,52,8)},"readDoubleBE");function G(v,T,k,U,H,re){if(!c.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>H||T<re)throw new RangeError('"value" argument is out of bounds');if(k+U>v.length)throw new RangeError("Index out of range")}s(G,"V"),P(G,"checkInt"),c.prototype.writeUintLE=c.prototype.writeUIntLE=P(function(v,T,k,U){if(v=+v,T=T>>>0,k=k>>>0,!U){let pe=Math.pow(2,8*k)-1;G(this,v,T,k,pe,0)}let H=1,re=0;for(this[T]=v&255;++re<k&&(H*=256);)this[T+re]=v/H&255;return T+k},"writeUIntLE"),c.prototype.writeUintBE=c.prototype.writeUIntBE=P(function(v,T,k,U){if(v=+v,T=T>>>0,k=k>>>0,!U){let pe=Math.pow(2,8*k)-1;G(this,v,T,k,pe,0)}let H=k-1,re=1;for(this[T+H]=v&255;--H>=0&&(re*=256);)this[T+H]=v/re&255;return T+k},"writeUIntBE"),c.prototype.writeUint8=c.prototype.writeUInt8=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,1,255,0),this[T]=v&255,T+1},"writeUInt8"),c.prototype.writeUint16LE=c.prototype.writeUInt16LE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,2,65535,0),this[T]=v&255,this[T+1]=v>>>8,T+2},"writeUInt16LE"),c.prototype.writeUint16BE=c.prototype.writeUInt16BE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,2,65535,0),this[T]=v>>>8,this[T+1]=v&255,T+2},"writeUInt16BE"),c.prototype.writeUint32LE=c.prototype.writeUInt32LE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,4,4294967295,0),this[T+3]=v>>>24,this[T+2]=v>>>16,this[T+1]=v>>>8,this[T]=v&255,T+4},"writeUInt32LE"),c.prototype.writeUint32BE=c.prototype.writeUInt32BE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,4,4294967295,0),this[T]=v>>>24,this[T+1]=v>>>16,this[T+2]=v>>>8,this[T+3]=v&255,T+4},"writeUInt32BE");function $e(v,T,k,U,H){va(T,U,H,v,k,7);let re=Number(T&BigInt(4294967295));v[k++]=re,re=re>>8,v[k++]=re,re=re>>8,v[k++]=re,re=re>>8,v[k++]=re;let pe=Number(T>>BigInt(32)&BigInt(4294967295));return v[k++]=pe,pe=pe>>8,v[k++]=pe,pe=pe>>8,v[k++]=pe,pe=pe>>8,v[k++]=pe,k}s($e,"Zn"),P($e,"wrtBigUInt64LE");function ye(v,T,k,U,H){va(T,U,H,v,k,7);let re=Number(T&BigInt(4294967295));v[k+7]=re,re=re>>8,v[k+6]=re,re=re>>8,v[k+5]=re,re=re>>8,v[k+4]=re;let pe=Number(T>>BigInt(32)&BigInt(4294967295));return v[k+3]=pe,pe=pe>>8,v[k+2]=pe,pe=pe>>8,v[k+1]=pe,pe=pe>>8,v[k]=pe,k+8}s(ye,"Jn"),P(ye,"wrtBigUInt64BE"),c.prototype.writeBigUInt64LE=Mr(P(function(v,T=0){return $e(this,v,T,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),c.prototype.writeBigUInt64BE=Mr(P(function(v,T=0){return ye(this,v,T,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),c.prototype.writeIntLE=P(function(v,T,k,U){if(v=+v,T=T>>>0,!U){let Ne=Math.pow(2,8*k-1);G(this,v,T,k,Ne-1,-Ne)}let H=0,re=1,pe=0;for(this[T]=v&255;++H<k&&(re*=256);)v<0&&pe===0&&this[T+H-1]!==0&&(pe=1),this[T+H]=(v/re>>0)-pe&255;return T+k},"writeIntLE"),c.prototype.writeIntBE=P(function(v,T,k,U){if(v=+v,T=T>>>0,!U){let Ne=Math.pow(2,8*k-1);G(this,v,T,k,Ne-1,-Ne)}let H=k-1,re=1,pe=0;for(this[T+H]=v&255;--H>=0&&(re*=256);)v<0&&pe===0&&this[T+H+1]!==0&&(pe=1),this[T+H]=(v/re>>0)-pe&255;return T+k},"writeIntBE"),c.prototype.writeInt8=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,1,127,-128),v<0&&(v=255+v+1),this[T]=v&255,T+1},"writeInt8"),c.prototype.writeInt16LE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,2,32767,-32768),this[T]=v&255,this[T+1]=v>>>8,T+2},"writeInt16LE"),c.prototype.writeInt16BE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,2,32767,-32768),this[T]=v>>>8,this[T+1]=v&255,T+2},"writeInt16BE"),c.prototype.writeInt32LE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,4,2147483647,-2147483648),this[T]=v&255,this[T+1]=v>>>8,this[T+2]=v>>>16,this[T+3]=v>>>24,T+4},"writeInt32LE"),c.prototype.writeInt32BE=P(function(v,T,k){return v=+v,T=T>>>0,k||G(this,v,T,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[T]=v>>>24,this[T+1]=v>>>16,this[T+2]=v>>>8,this[T+3]=v&255,T+4},"writeInt32BE"),c.prototype.writeBigInt64LE=Mr(P(function(v,T=0){return $e(this,v,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),c.prototype.writeBigInt64BE=Mr(P(function(v,T=0){return ye(this,v,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function L(v,T,k,U,H,re){if(k+U>v.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}s(L,"Xn"),P(L,"checkIEEE754");function Qe(v,T,k,U,H){return T=+T,k=k>>>0,H||L(v,T,k,4,34028234663852886e22,-34028234663852886e22),r.write(v,T,k,U,23,4),k+4}s(Qe,"ei"),P(Qe,"writeFloat"),c.prototype.writeFloatLE=P(function(v,T,k){return Qe(this,v,T,!0,k)},"writeFloatLE"),c.prototype.writeFloatBE=P(function(v,T,k){return Qe(this,v,T,!1,k)},"writeFloatBE");function Ot(v,T,k,U,H){return T=+T,k=k>>>0,H||L(v,T,k,8,17976931348623157e292,-17976931348623157e292),r.write(v,T,k,U,52,8),k+8}s(Ot,"ti"),P(Ot,"writeDouble"),c.prototype.writeDoubleLE=P(function(v,T,k){return Ot(this,v,T,!0,k)},"writeDoubleLE"),c.prototype.writeDoubleBE=P(function(v,T,k){return Ot(this,v,T,!1,k)},"writeDoubleBE"),c.prototype.copy=P(function(v,T,k,U){if(!c.isBuffer(v))throw new TypeError("argument should be a Buffer");if(k||(k=0),!U&&U!==0&&(U=this.length),T>=v.length&&(T=v.length),T||(T=0),U>0&&U<k&&(U=k),U===k||v.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),v.length-T<U-k&&(U=v.length-T+k);let H=U-k;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,k,U):Uint8Array.prototype.set.call(v,this.subarray(k,U),T),H},"copy"),c.prototype.fill=P(function(v,T,k,U){if(typeof v=="string"){if(typeof T=="string"?(U=T,T=0,k=this.length):typeof k=="string"&&(U=k,k=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!c.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(v.length===1){let re=v.charCodeAt(0);(U==="utf8"&&re<128||U==="latin1")&&(v=re)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(T<0||this.length<T||this.length<k)throw new RangeError("Out of range index");if(k<=T)return this;T=T>>>0,k=k===void 0?this.length:k>>>0,v||(v=0);let H;if(typeof v=="number")for(H=T;H<k;++H)this[H]=v;else{let re=c.isBuffer(v)?v:c.from(v,U),pe=re.length;if(pe===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(H=0;H<k-T;++H)this[H+T]=re[H%pe]}return this},"fill");var zt={};function fn(v,T,k){var U;zt[v]=(U=class extends k{static{s(this,"n")}constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}},P(U,"NodeError"),U)}s(fn,"Vt"),P(fn,"E"),fn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fn("ERR_INVALID_ARG_TYPE",function(v,T){return`The "${v}" argument must be of type number. Received type ${typeof T}`},TypeError),fn("ERR_OUT_OF_RANGE",function(v,T,k){let U=`The value of "${v}" is out of range.`,H=k;return Number.isInteger(k)&&Math.abs(k)>2**32?H=zi(String(k)):typeof k=="bigint"&&(H=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(H=zi(H)),H+="n"),U+=` It must be ${T}. Received ${H}`,U},RangeError);function zi(v){let T="",k=v.length,U=v[0]==="-"?1:0;for(;k>=U+4;k-=3)T=`_${v.slice(k-3,k)}${T}`;return`${v.slice(0,k)}${T}`}s(zi,"$n"),P(zi,"addNumericalSeparator");function ti(v,T,k){Or(T,"offset"),(v[T]===void 0||v[T+k]===void 0)&&Eo(T,v.length-(k+1))}s(ti,"Xo"),P(ti,"checkBounds");function va(v,T,k,U,H,re){if(v>k||v<T){let pe=typeof T=="bigint"?"n":"",Ne;throw re>3?T===0||T===BigInt(0)?Ne=`>= 0${pe} and < 2${pe} ** ${(re+1)*8}${pe}`:Ne=`>= -(2${pe} ** ${(re+1)*8-1}${pe}) and < 2 ** ${(re+1)*8-1}${pe}`:Ne=`>= ${T}${pe} and <= ${k}${pe}`,new zt.ERR_OUT_OF_RANGE("value",Ne,v)}ti(U,H,re)}s(va,"ri"),P(va,"checkIntBI");function Or(v,T){if(typeof v!="number")throw new zt.ERR_INVALID_ARG_TYPE(T,"number",v)}s(Or,"Be"),P(Or,"validateNumber");function Eo(v,T,k){throw Math.floor(v)!==v?(Or(v,k),new zt.ERR_OUT_OF_RANGE(k||"offset","an integer",v)):T<0?new zt.ERR_BUFFER_OUT_OF_BOUNDS:new zt.ERR_OUT_OF_RANGE(k||"offset",`>= ${k?1:0} and <= ${T}`,v)}s(Eo,"je"),P(Eo,"boundsError");var _a=/[^+/0-9A-Za-z-_]/g;function jp(v){if(v=v.split("=")[0],v=v.trim().replace(_a,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}s(jp,"ta"),P(jp,"base64clean");function Ui(v,T){T=T||1/0;let k,U=v.length,H=null,re=[];for(let pe=0;pe<U;++pe){if(k=v.charCodeAt(pe),k>55295&&k<57344){if(!H){if(k>56319){(T-=3)>-1&&re.push(239,191,189);continue}else if(pe+1===U){(T-=3)>-1&&re.push(239,191,189);continue}H=k;continue}if(k<56320){(T-=3)>-1&&re.push(239,191,189),H=k;continue}k=(H-55296<<10|k-56320)+65536}else H&&(T-=3)>-1&&re.push(239,191,189);if(H=null,k<128){if((T-=1)<0)break;re.push(k)}else if(k<2048){if((T-=2)<0)break;re.push(k>>6|192,k&63|128)}else if(k<65536){if((T-=3)<0)break;re.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((T-=4)<0)break;re.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return re}s(Ui,"Ht"),P(Ui,"utf8ToBytes");function Mp(v){let T=[];for(let k=0;k<v.length;++k)T.push(v.charCodeAt(k)&255);return T}s(Mp,"ra"),P(Mp,"asciiToBytes");function Cn(v,T){let k,U,H,re=[];for(let pe=0;pe<v.length&&!((T-=2)<0);++pe)k=v.charCodeAt(pe),U=k>>8,H=k%256,re.push(H),re.push(U);return re}s(Cn,"na"),P(Cn,"utf16leToBytes");function ko(v){return e.toByteArray(jp(v))}s(ko,"ni"),P(ko,"base64ToBytes");function Ir(v,T,k,U){let H;for(H=0;H<U&&!(H+k>=T.length||H>=v.length);++H)T[H+k]=v[H];return H}s(Ir,"ht"),P(Ir,"blitBuffer");function nr(v,T){return v instanceof T||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===T.name}s(nr,"ue"),P(nr,"isInstance");function to(v){return v!==v}s(to,"zt"),P(to,"numberIsNaN");var zp=(function(){let v="0123456789abcdef",T=new Array(256);for(let k=0;k<16;++k){let U=k*16;for(let H=0;H<16;++H)T[U+H]=v[k]+v[H]}return T})();function Mr(v){return typeof BigInt>"u"?ri:v}s(Mr,"we"),P(Mr,"defineBigIntMethod");function ri(){throw new Error("BigInt not supported")}s(ri,"sa"),P(ri,"BufferBigIntNotDefined")}),Oe=vn(()=>{"use strict";xm=globalThis,Bb=globalThis.setImmediate??(t=>setTimeout(t,0)),YK=globalThis.clearImmediate??(t=>clearTimeout(t)),Be=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:XK().Buffer,nt=globalThis.process??{},nt.env??(nt.env={});try{nt.nextTick(()=>{})}catch{let t=Promise.resolve();nt.nextTick=t.then.bind(t)}}),Vs=ot((t,e)=>{"use strict";Oe();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:P(function($,O,R){return Function.prototype.apply.call($,O,R)},"ReflectApply"),o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=P(function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))},"ReflectOwnKeys"):o=P(function($){return Object.getOwnPropertyNames($)},"ReflectOwnKeys");function i($){console&&console.warn&&console.warn($)}s(i,"oa"),P(i,"ProcessEmitWarning");var a=Number.isNaN||P(function($){return $!==$},"NumberIsNaN");function c(){c.init.call(this)}s(c,"B"),P(c,"EventEmitter"),e.exports=c,e.exports.once=x,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}s(d,"dt"),P(d,"checkListener"),Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:P(function(){return l},"get"),set:P(function($){if(typeof $!="number"||$<0||a($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");l=$},"set")}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=P(function($){if(typeof $!="number"||$<0||a($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this},"setMaxListeners");function p($){return $._maxListeners===void 0?c.defaultMaxListeners:$._maxListeners}s(p,"ui"),P(p,"_getMaxListeners"),c.prototype.getMaxListeners=P(function(){return p(this)},"getMaxListeners"),c.prototype.emit=P(function($){for(var O=[],R=1;R<arguments.length;R++)O.push(arguments[R]);var A=$==="error",D=this._events;if(D!==void 0)A=A&&D.error===void 0;else if(!A)return!1;if(A){var M;if(O.length>0&&(M=O[0]),M instanceof Error)throw M;var Q=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw Q.context=M,Q}var Z=D[$];if(Z===void 0)return!1;if(typeof Z=="function")n(Z,this,O);else for(var F=Z.length,ee=_(Z,F),R=0;R<F;++R)n(ee[R],this,O);return!0},"emit");function m($,O,R,A){var D,M,Q;if(d(R),M=$._events,M===void 0?(M=$._events=Object.create(null),$._eventsCount=0):(M.newListener!==void 0&&($.emit("newListener",O,R.listener?R.listener:R),M=$._events),Q=M[O]),Q===void 0)Q=M[O]=R,++$._eventsCount;else if(typeof Q=="function"?Q=M[O]=A?[R,Q]:[Q,R]:A?Q.unshift(R):Q.push(R),D=p($),D>0&&Q.length>D&&!Q.warned){Q.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=$,Z.type=O,Z.count=Q.length,i(Z)}return $}s(m,"ci"),P(m,"_addListener"),c.prototype.addListener=P(function($,O){return m(this,$,O,!1)},"addListener"),c.prototype.on=c.prototype.addListener,c.prototype.prependListener=P(function($,O){return m(this,$,O,!0)},"prependListener");function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}s(h,"aa"),P(h,"onceWrapper");function y($,O,R){var A={fired:!1,wrapFn:void 0,target:$,type:O,listener:R},D=h.bind(A);return D.listener=R,A.wrapFn=D,D}s(y,"li"),P(y,"_onceWrap"),c.prototype.once=P(function($,O){return d(O),this.on($,y(this,$,O)),this},"once"),c.prototype.prependOnceListener=P(function($,O){return d(O),this.prependListener($,y(this,$,O)),this},"prependOnceListener"),c.prototype.removeListener=P(function($,O){var R,A,D,M,Q;if(d(O),A=this._events,A===void 0)return this;if(R=A[$],R===void 0)return this;if(R===O||R.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete A[$],A.removeListener&&this.emit("removeListener",$,R.listener||O));else if(typeof R!="function"){for(D=-1,M=R.length-1;M>=0;M--)if(R[M]===O||R[M].listener===O){Q=R[M].listener,D=M;break}if(D<0)return this;D===0?R.shift():S(R,D),R.length===1&&(A[$]=R[0]),A.removeListener!==void 0&&this.emit("removeListener",$,Q||O)}return this},"removeListener"),c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=P(function($){var O,R,A;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[$]),this;if(arguments.length===0){var D=Object.keys(R),M;for(A=0;A<D.length;++A)M=D[A],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=R[$],typeof O=="function")this.removeListener($,O);else if(O!==void 0)for(A=O.length-1;A>=0;A--)this.removeListener($,O[A]);return this},"removeAllListeners");function g($,O,R){var A=$._events;if(A===void 0)return[];var D=A[O];return D===void 0?[]:typeof D=="function"?R?[D.listener||D]:[D]:R?w(D):_(D,D.length)}s(g,"fi"),P(g,"_listeners"),c.prototype.listeners=P(function($){return g(this,$,!0)},"listeners"),c.prototype.rawListeners=P(function($){return g(this,$,!1)},"rawListeners"),c.listenerCount=function($,O){return typeof $.listenerCount=="function"?$.listenerCount(O):f.call($,O)},c.prototype.listenerCount=f;function f($){var O=this._events;if(O!==void 0){var R=O[$];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s(f,"hi"),P(f,"listenerCount"),c.prototype.eventNames=P(function(){return this._eventsCount>0?o(this._events):[]},"eventNames");function _($,O){for(var R=new Array(O),A=0;A<O;++A)R[A]=$[A];return R}s(_,"pi"),P(_,"arrayClone");function S($,O){for(;O+1<$.length;O++)$[O]=$[O+1];$.pop()}s(S,"ua"),P(S,"spliceOne");function w($){for(var O=new Array($.length),R=0;R<O.length;++R)O[R]=$[R].listener||$[R];return O}s(w,"ca"),P(w,"unwrapListeners");function x($,O){return new Promise(function(R,A){function D(Q){$.removeListener(O,M),A(Q)}s(D,"i"),P(D,"errorListener");function M(){typeof $.removeListener=="function"&&$.removeListener("error",D),R([].slice.call(arguments))}s(M,"s"),P(M,"resolver"),N($,O,M,{once:!0}),O!=="error"&&I($,D,{once:!0})})}s(x,"la"),P(x,"once");function I($,O,R){typeof $.on=="function"&&N($,"error",O,R)}s(I,"fa"),P(I,"addErrorHandlerIfEventEmitter");function N($,O,R,A){if(typeof $.on=="function")A.once?$.once(O,R):$.on(O,R);else if(typeof $.addEventListener=="function")$.addEventListener(O,P(s(function D(M){A.once&&$.removeEventListener(O,D),R(M)},"i"),"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}s(N,"di"),P(N,"eventTargetAgnosticAddListener")}),x$={};oo(x$,{Socket:s(()=>Fs,"Socket"),isIP:s(()=>T$,"isIP")});s(T$,"ha");Bu=vn(()=>{"use strict";Oe(),g$=Bs(Vs(),1),P(T$,"isIP"),zb=/^[^.]+\./,Lu=class je extends g$.EventEmitter{static{s(this,"S")}constructor(){super(...arguments),He(this,"opts",{}),He(this,"connecting",!1),He(this,"pending",!0),He(this,"writable",!0),He(this,"encrypted",!1),He(this,"authorized",!1),He(this,"destroyed",!1),He(this,"ws",null),He(this,"writeBuffer"),He(this,"tlsState",0),He(this,"tlsRead"),He(this,"tlsWrite")}static get poolQueryViaFetch(){return je.opts.poolQueryViaFetch??je.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){je.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return je.opts.fetchEndpoint??je.defaults.fetchEndpoint}static set fetchEndpoint(e){je.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return je.opts.fetchFunction??je.defaults.fetchFunction}static set fetchFunction(e){je.opts.fetchFunction=e}static get webSocketConstructor(){return je.opts.webSocketConstructor??je.defaults.webSocketConstructor}static set webSocketConstructor(e){je.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??je.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return je.opts.wsProxy??je.defaults.wsProxy}static set wsProxy(e){je.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??je.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return je.opts.coalesceWrites??je.defaults.coalesceWrites}static set coalesceWrites(e){je.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??je.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return je.opts.useSecureWebSocket??je.defaults.useSecureWebSocket}static set useSecureWebSocket(e){je.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??je.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return je.opts.forceDisablePgSSL??je.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){je.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??je.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return je.opts.disableSNI??je.defaults.disableSNI}static set disableSNI(e){je.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??je.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return je.opts.disableWarningInBrowsers??je.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){je.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??je.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return je.opts.pipelineConnect??je.defaults.pipelineConnect}static set pipelineConnect(e){je.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??je.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return je.opts.subtls??je.defaults.subtls}static set subtls(e){je.opts.subtls=e}get subtls(){return this.opts.subtls??je.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return je.opts.pipelineTLS??je.defaults.pipelineTLS}static set pipelineTLS(e){je.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??je.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return je.opts.rootCerts??je.defaults.rootCerts}static set rootCerts(e){je.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??je.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,n){this.connecting=!0,n&&this.once("connect",n);let o=P(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=P((c,l=!1)=>{c.binaryType="arraybuffer",c.addEventListener("error",d=>{this.emit("error",d),this.emit("close")}),c.addEventListener("message",d=>{if(this.tlsState===0){let p=Be.from(d.data);this.emit("data",p)}}),c.addEventListener("close",()=>{this.emit("close")}),l?o():c.addEventListener("open",o)},"configureWebSocket"),a;try{a=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(c){this.emit("error",c),this.emit("close");return}try{let c=(this.useSecureWebSocket?"wss:":"ws:")+"//"+a;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(c),i(this.ws);else try{this.ws=new WebSocket(c),i(this.ws)}catch{this.ws=new __unstable_WebSocket(c),i(this.ws)}}catch(c){let l=(this.useSecureWebSocket?"https:":"http:")+"//"+a;fetch(l,{headers:{Upgrade:"websocket"}}).then(d=>{if(this.ws=d.webSocket,this.ws==null)throw c;this.ws.accept(),i(this.ws,!0)}).catch(d=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${d}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),i=this.rawWrite.bind(this),{read:a,write:c}=await this.subtls.startTls(e,r,o,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=a,this.tlsWrite=c,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=Be.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=o=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=Be.from(e,r)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,n)}):(this.tlsWrite(e),n()),!0)}end(e=Be.alloc(0),r="utf8",n=()=>{}){return this.write(e,r,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},P(Lu,"Socket"),He(Lu,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:P((t,e,r)=>{let n;return r?.jwtAuth?n=t.replace(zb,"apiauth."):n=t.replace(zb,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:P(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),He(Lu,"opts",{}),Fs=Lu}),E$={};oo(E$,{parse:s(()=>Vb,"parse")});s(Vb,"Yt");k$=vn(()=>{"use strict";Oe(),P(Vb,"parse")}),I$=ot(t=>{"use strict";Oe(),t.parse=function(o,i){return new r(o,i).parse()};var e=class P${static{s(this,"vt")}constructor(i,a){this.source=i,this.transform=a||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var a;(this.recorded.length>0||i)&&(a=this.recorded.join(""),a==="NULL"&&!i&&(a=null),a!==null&&(a=this.transform(a)),this.entries.push(a),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var a,c,l;for(this.consumeDimensions();!this.isEof();)if(a=this.nextCharacter(),a.value==="{"&&!l)this.dimension++,this.dimension>1&&(c=new P$(this.source.substr(this.position-1),this.transform),this.entries.push(c.parse(!0)),this.position+=c.position-2);else if(a.value==="}"&&!l){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else a.value==='"'&&!a.escaped?(l&&this.newEntry(!0),l=!l):a.value===","&&!l?this.newEntry():this.record(a.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};P(e,"ArrayParser");var r=e;function n(o){return o}s(n,"Ca"),P(n,"identity")}),A$=ot((t,e)=>{Oe();var r=I$();e.exports={create:P(function(n,o){return{parse:P(function(){return r.parse(n,o)},"parse")}},"create")}}),eW=ot((t,e)=>{"use strict";Oe();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,o=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=P(function(p){if(i.test(p))return Number(p.replace("i","I"));var m=r.exec(p);if(!m)return a(p)||null;var h=!!m[8],y=parseInt(m[1],10);h&&(y=l(y));var g=parseInt(m[2],10)-1,f=m[3],_=parseInt(m[4],10),S=parseInt(m[5],10),w=parseInt(m[6],10),x=m[7];x=x?1e3*parseFloat(x):0;var I,N=c(p);return N!=null?(I=new Date(Date.UTC(y,g,f,_,S,w,x)),d(y)&&I.setUTCFullYear(y),N!==0&&I.setTime(I.getTime()-N)):(I=new Date(y,g,f,_,S,w,x),d(y)&&I.setFullYear(y)),I},"parseDate");function a(p){var m=n.exec(p);if(m){var h=parseInt(m[1],10),y=!!m[4];y&&(h=l(h));var g=parseInt(m[2],10)-1,f=m[3],_=new Date(h,g,f);return d(h)&&_.setFullYear(h),_}}s(a,"Ra"),P(a,"getDate");function c(p){if(p.endsWith("+00"))return 0;var m=o.exec(p.split(" ")[1]);if(m){var h=m[1];if(h==="Z")return 0;var y=h==="-"?-1:1,g=parseInt(m[2],10)*3600+parseInt(m[3]||0,10)*60+parseInt(m[4]||0,10);return g*y*1e3}}s(c,"La"),P(c,"timeZoneOffset");function l(p){return-(p-1)}s(l,"_i"),P(l,"bcYearToNegativeYear");function d(p){return p>=0&&p<100}s(d,"nr"),P(d,"is0To99")}),tW=ot((t,e)=>{Oe(),e.exports=n;var r=Object.prototype.hasOwnProperty;function n(o){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var c in a)r.call(a,c)&&(o[c]=a[c])}return o}s(n,"ka"),P(n,"extend")}),rW=ot((t,e)=>{"use strict";Oe();var r=tW();e.exports=n;function n(w){if(!(this instanceof n))return new n(w);r(this,S(w))}s(n,"ke"),P(n,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var w=o.filter(this.hasOwnProperty,this);return this.milliseconds&&w.indexOf("seconds")<0&&w.push("seconds"),w.length===0?"0":w.map(function(x){var I=this[x]||0;return x==="seconds"&&this.milliseconds&&(I=(I+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),I+" "+x},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],c=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var w=a.map(I,this).join(""),x=c.map(I,this).join("");return"P"+w+"T"+x;function I(N){var $=this[N]||0;return N==="seconds"&&this.milliseconds&&($=($+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),$+i[N]}};var l="([+-]?\\d+)",d=l+"\\s+years?",p=l+"\\s+mons?",m=l+"\\s+days?",h="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",y=new RegExp([d,p,m,h].map(function(w){return"("+w+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},f=["hours","minutes","seconds","milliseconds"];function _(w){var x=w+"000000".slice(w.length);return parseInt(x,10)/1e3}s(_,"Ga"),P(_,"parseMilliseconds");function S(w){if(!w)return{};var x=y.exec(w),I=x[8]==="-";return Object.keys(g).reduce(function(N,$){var O=g[$],R=x[O];return!R||(R=$==="milliseconds"?_(R):parseInt(R,10),!R)||(I&&~f.indexOf($)&&(R*=-1),N[$]=R),N},{})}s(S,"Va"),P(S,"parse")}),nW=ot((t,e)=>{"use strict";Oe(),e.exports=P(function(r){if(/^\\x/.test(r))return new Be(r.substr(2),"hex");for(var n="",o=0;o<r.length;)if(r[o]!=="\\")n+=r[o],++o;else if(/[0-7]{3}/.test(r.substr(o+1,3)))n+=String.fromCharCode(parseInt(r.substr(o+1,3),8)),o+=4;else{for(var i=1;o+i<r.length&&r[o+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";o+=Math.floor(i/2)*2}return new Be(n,"binary")},"parseBytea")}),oW=ot((t,e)=>{Oe();var r=I$(),n=A$(),o=eW(),i=rW(),a=nW();function c(A){return P(function(D){return D===null?D:A(D)},"nullAllowed")}s(c,"St"),P(c,"allowNull");function l(A){return A===null?A:A==="TRUE"||A==="t"||A==="true"||A==="y"||A==="yes"||A==="on"||A==="1"}s(l,"qi"),P(l,"parseBool");function d(A){return A?r.parse(A,l):null}s(d,"za"),P(d,"parseBoolArray");function p(A){return parseInt(A,10)}s(p,"Ka"),P(p,"parseBaseTenInt");function m(A){return A?r.parse(A,c(p)):null}s(m,"sr"),P(m,"parseIntegerArray");function h(A){return A?r.parse(A,c(function(D){return I(D).trim()})):null}s(h,"Ya"),P(h,"parseBigIntegerArray");var y=P(function(A){if(!A)return null;var D=n.create(A,function(M){return M!==null&&(M=$(M)),M});return D.parse()},"parsePointArray"),g=P(function(A){if(!A)return null;var D=n.create(A,function(M){return M!==null&&(M=parseFloat(M)),M});return D.parse()},"parseFloatArray"),f=P(function(A){if(!A)return null;var D=n.create(A);return D.parse()},"parseStringArray"),_=P(function(A){if(!A)return null;var D=n.create(A,function(M){return M!==null&&(M=o(M)),M});return D.parse()},"parseDateArray"),S=P(function(A){if(!A)return null;var D=n.create(A,function(M){return M!==null&&(M=i(M)),M});return D.parse()},"parseIntervalArray"),w=P(function(A){return A?r.parse(A,c(a)):null},"parseByteAArray"),x=P(function(A){return parseInt(A,10)},"parseInteger"),I=P(function(A){var D=String(A);return/^\d+$/.test(D)?D:A},"parseBigInteger"),N=P(function(A){return A?r.parse(A,c(JSON.parse)):null},"parseJsonArray"),$=P(function(A){return A[0]!=="("?null:(A=A.substring(1,A.length-1).split(","),{x:parseFloat(A[0]),y:parseFloat(A[1])})},"parsePoint"),O=P(function(A){if(A[0]!=="<"&&A[1]!=="(")return null;for(var D="(",M="",Q=!1,Z=2;Z<A.length-1;Z++){if(Q||(D+=A[Z]),A[Z]===")"){Q=!0;continue}else if(!Q)continue;A[Z]!==","&&(M+=A[Z])}var F=$(D);return F.radius=parseFloat(M),F},"parseCircle"),R=P(function(A){A(20,I),A(21,x),A(23,x),A(26,x),A(700,parseFloat),A(701,parseFloat),A(16,l),A(1082,o),A(1114,o),A(1184,o),A(600,$),A(651,f),A(718,O),A(1e3,d),A(1001,w),A(1005,m),A(1007,m),A(1028,m),A(1016,h),A(1017,y),A(1021,g),A(1022,g),A(1231,g),A(1014,f),A(1015,f),A(1008,f),A(1009,f),A(1040,f),A(1041,f),A(1115,_),A(1182,_),A(1185,_),A(1186,i),A(1187,S),A(17,a),A(114,JSON.parse.bind(JSON)),A(3802,JSON.parse.bind(JSON)),A(199,N),A(3807,N),A(3907,f),A(2951,f),A(791,f),A(1183,f),A(1270,f)},"init");e.exports={init:R}}),iW=ot((t,e)=>{"use strict";Oe();var r=1e6;function n(o){var i=o.readInt32BE(0),a=o.readUInt32BE(4),c="";i<0&&(i=~i+(a===0),a=~a+1>>>0,c="-");var l="",d,p,m,h,y,g;{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}{if(d=i%r,i=i/r>>>0,p=4294967296*d+a,a=p/r>>>0,m=""+(p-r*a),a===0&&i===0)return c+m+l;for(h="",y=6-m.length,g=0;g<y;g++)h+="0";l=h+m+l}return d=i%r,p=4294967296*d+a,m=""+p%r,c+m+l}s(n,"ru"),P(n,"readInt8"),e.exports=n}),sW=ot((t,e)=>{Oe();var r=iW(),n=P(function(f,_,S,w,x){S=S||0,w=w||!1,x=x||function(Q,Z,F){return Q*Math.pow(2,F)+Z};var I=S>>3,N=P(function(Q){return w?~Q&255:Q},"inv"),$=255,O=8-S%8;_<O&&($=255<<8-_&255,O=_),S&&($=$>>S%8);var R=0;S%8+_>=8&&(R=x(0,N(f[I])&$,O));for(var A=_+S>>3,D=I+1;D<A;D++)R=x(R,N(f[D]),8);var M=(_+S)%8;return M>0&&(R=x(R,N(f[A])>>8-M,M)),R},"parseBits"),o=P(function(f,_,S){var w=Math.pow(2,S-1)-1,x=n(f,1),I=n(f,S,1);if(I===0)return 0;var N=1,$=P(function(R,A,D){R===0&&(R=1);for(var M=1;M<=D;M++)N/=2,(A&1<<D-M)>0&&(R+=N);return R},"parsePrecisionBits"),O=n(f,_,S+1,!1,$);return I==Math.pow(2,S+1)-1?O===0?x===0?1/0:-1/0:NaN:(x===0?1:-1)*Math.pow(2,I-w)*O},"parseFloatFromBits"),i=P(function(f){return n(f,1)==1?-1*(n(f,15,1,!0)+1):n(f,15,1)},"parseInt16"),a=P(function(f){return n(f,1)==1?-1*(n(f,31,1,!0)+1):n(f,31,1)},"parseInt32"),c=P(function(f){return o(f,23,8)},"parseFloat32"),l=P(function(f){return o(f,52,11)},"parseFloat64"),d=P(function(f){var _=n(f,16,32);if(_==49152)return NaN;for(var S=Math.pow(1e4,n(f,16,16)),w=0,x=[],I=n(f,16),N=0;N<I;N++)w+=n(f,16,64+16*N)*S,S/=1e4;var $=Math.pow(10,n(f,16,48));return(_===0?1:-1)*Math.round(w*$)/$},"parseNumeric"),p=P(function(f,_){var S=n(_,1),w=n(_,63,1),x=new Date((S===0?1:-1)*w/1e3+9466848e5);return f||x.setTime(x.getTime()+x.getTimezoneOffset()*6e4),x.usec=w%1e3,x.getMicroSeconds=function(){return this.usec},x.setMicroSeconds=function(I){this.usec=I},x.getUTCMicroSeconds=function(){return this.usec},x},"parseDate"),m=P(function(f){for(var _=n(f,32),S=n(f,32,32),w=n(f,32,64),x=96,I=[],N=0;N<_;N++)I[N]=n(f,32,x),x+=32,x+=32;var $=P(function(R){var A=n(f,32,x);if(x+=32,A==4294967295)return null;var D;if(R==23||R==20)return D=n(f,A*8,x),x+=A*8,D;if(R==25)return D=f.toString(this.encoding,x>>3,(x+=A<<3)>>3),D;console.log("ERROR: ElementType not implemented: "+R)},"parseElement"),O=P(function(R,A){var D=[],M;if(R.length>1){var Q=R.shift();for(M=0;M<Q;M++)D[M]=O(R,A);R.unshift(Q)}else for(M=0;M<R[0];M++)D[M]=$(A);return D},"parse");return O(I,w)},"parseArray"),h=P(function(f){return f.toString("utf8")},"parseText"),y=P(function(f){return f===null?null:n(f,8)>0},"parseBool"),g=P(function(f){f(20,r),f(21,i),f(23,a),f(26,a),f(1700,d),f(700,c),f(701,l),f(16,y),f(1114,p.bind(null,!1)),f(1184,p.bind(null,!0)),f(1e3,m),f(1007,m),f(1016,m),f(1008,m),f(1009,m),f(25,h)},"init");e.exports={init:g}}),aW=ot((t,e)=>{Oe(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Tm=ot(t=>{Oe();var e=oW(),r=sW(),n=A$(),o=aW();t.getTypeParser=c,t.setTypeParser=l,t.arrayParser=n,t.builtins=o;var i={text:{},binary:{}};function a(d){return String(d)}s(a,"Ji"),P(a,"noParse");function c(d,p){return p=p||"text",i[p]&&i[p][d]||a}s(c,"yu"),P(c,"getTypeParser");function l(d,p,m){typeof p=="function"&&(m=p,p="text"),i[p][d]=m}s(l,"mu"),P(l,"setTypeParser"),e.init(function(d,p){i.text[d]=p}),r.init(function(d,p){i.binary[d]=p})}),Hb=ot((t,e)=>{"use strict";Oe();var r=Tm();function n(o){this._types=o||r,this.text={},this.binary={}}s(n,"Et"),P(n,"TypeOverrides"),n.prototype.getOverrides=function(o){switch(o){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(o,i,a){typeof i=="function"&&(a=i,i="text"),this.getOverrides(i)[o]=a},n.prototype.getTypeParser=function(o,i){return i=i||"text",this.getOverrides(i)[o]||this._types.getTypeParser(o,i)},e.exports=n});s(Fu,"Xe");cW=vn(()=>{"use strict";Oe(),P(Fu,"sha256")}),uW=vn(()=>{"use strict";Oe(),li=class Vn{static{s(this,"U")}constructor(){He(this,"_dataLength",0),He(this,"_bufferLength",0),He(this,"_state",new Int32Array(4)),He(this,"_buffer",new ArrayBuffer(68)),He(this,"_buffer8"),He(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=Vn.hexChars,n=Vn.hexOut,o,i,a,c;for(c=0;c<4;c+=1)for(i=c*8,o=e[c],a=0;a<8;a+=2)n[i+1+a]=r.charAt(o&15),o>>>=4,n[i+0+a]=r.charAt(o&15),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],i=e[2],a=e[3];n+=(o&i|~o&a)+r[0]-680876936|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[2]+606105819|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[3]-1044525330|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[4]-176418897|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[7]-45705983|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[8]+1770035416|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[10]-42063|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[11]-1990404162|0,o=(o<<22|o>>>10)+i|0,n+=(o&i|~o&a)+r[12]+1804603682|0,n=(n<<7|n>>>25)+o|0,a+=(n&o|~n&i)+r[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&o)+r[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,o+=(i&a|~i&n)+r[15]+1236535329|0,o=(o<<22|o>>>10)+i|0,n+=(o&a|i&~a)+r[1]-165796510|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[11]+643717713|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[0]-373897302|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[5]-701558691|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[15]-660478335|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[4]-405537848|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[9]+568446438|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[3]-187363961|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[8]+1163531501|0,o=(o<<20|o>>>12)+i|0,n+=(o&a|i&~a)+r[13]-1444681467|0,n=(n<<5|n>>>27)+o|0,a+=(n&i|o&~i)+r[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&o|n&~o)+r[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,o+=(i&n|a&~n)+r[12]-1926607734|0,o=(o<<20|o>>>12)+i|0,n+=(o^i^a)+r[5]-378558|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[14]-35309556|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[1]-1530992060|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[7]-155497632|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[10]-1094730640|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[13]+681279174|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[3]-722521979|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[6]+76029189|0,o=(o<<23|o>>>9)+i|0,n+=(o^i^a)+r[9]-640364487|0,n=(n<<4|n>>>28)+o|0,a+=(n^o^i)+r[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^o)+r[15]+530742520|0,i=(i<<16|i>>>16)+a|0,o+=(i^a^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+i|0,n+=(i^(o|~a))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[10]-1051523|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+i|0,n+=(i^(o|~a))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,a+=(o^(n|~i))+r[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~o))+r[2]+718787259|0,i=(i<<15|i>>>17)+a|0,o+=(a^(i|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Vn.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a;for(a=0;a<e.length;a+=1){if(i=e.charCodeAt(a),i<128)r[o++]=i;else if(i<2048)r[o++]=(i>>>6)+192,r[o++]=i&63|128;else if(i<55296||i>56319)r[o++]=(i>>>12)+224,r[o++]=i>>>6&63|128,r[o++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++a)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(i>>>18)+240,r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=i&63|128}o>=64&&(this._dataLength+=64,Vn._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e.charCodeAt(a++);if(o<64)break;this._dataLength+=64,Vn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,i,a=0;for(;;){for(i=Math.min(e.length-a,64-o);i--;)r[o++]=e[a++];if(o<64)break;this._dataLength+=64,Vn._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i=0;i<r.length;i+=1)this._buffer8[i]=r.charCodeAt(i)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,i=(r>>2)+1;this._dataLength+=r;let a=this._dataLength*8;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(Vn.buffer32Identity.subarray(i),i),r>55&&(Vn._md5cycle(this._state,o),o.set(Vn.buffer32Identity)),a<=4294967295)o[14]=a;else{let c=a.toString(16).match(/(.*?)(.{0,8})$/);if(c===null)return;let l=parseInt(c[2],16),d=parseInt(c[1],16)||0;o[14]=l,o[15]=d}return Vn._md5cycle(this._state,o),e?this._state:Vn._hex(this._state)}},P(li,"Md5"),He(li,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),He(li,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),He(li,"hexChars","0123456789abcdef"),He(li,"hexOut",[]),He(li,"onePassHasher",new li),Lb=li}),Zb={};oo(Zb,{createHash:s(()=>O$,"createHash"),createHmac:s(()=>$$,"createHmac"),randomBytes:s(()=>C$,"randomBytes")});s(C$,"gu");s(O$,"bu");s($$,"vu");R$=vn(()=>{"use strict";Oe(),cW(),uW(),P(C$,"randomBytes"),P(O$,"createHash"),P($$,"createHmac")}),Em=ot((t,e)=>{"use strict";Oe(),e.exports={host:"localhost",user:nt.platform==="win32"?nt.env.USERNAME:nt.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=Tm(),n=r.getTypeParser(20,"text"),o=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){r.setTypeParser(20,"text",i?r.getTypeParser(23,"text"):n),r.setTypeParser(1016,"text",i?r.getTypeParser(1007,"text"):o)})}),km=ot((t,e)=>{"use strict";Oe();var r=(R$(),$r(Zb)),n=Em();function o(g){var f=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+f+'"'}s(o,"Cu"),P(o,"escapeElement");function i(g){for(var f="{",_=0;_<g.length;_++)_>0&&(f=f+","),g[_]===null||typeof g[_]>"u"?f=f+"NULL":Array.isArray(g[_])?f=f+i(g[_]):g[_]instanceof Be?f+="\\\\x"+g[_].toString("hex"):f+=o(a(g[_]));return f=f+"}",f}s(i,"rs"),P(i,"arrayString");var a=P(function(g,f){if(g==null)return null;if(g instanceof Be)return g;if(ArrayBuffer.isView(g)){var _=Be.from(g.buffer,g.byteOffset,g.byteLength);return _.length===g.byteLength?_:_.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?p(g):d(g):Array.isArray(g)?i(g):typeof g=="object"?c(g,f):g.toString()},"prepareValue");function c(g,f){if(g&&typeof g.toPostgres=="function"){if(f=f||[],f.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return f.push(g),a(g.toPostgres(a),f)}return JSON.stringify(g)}s(c,"_u"),P(c,"prepareObject");function l(g,f){for(g=""+g;g.length<f;)g="0"+g;return g}s(l,"N"),P(l,"pad");function d(g){var f=-g.getTimezoneOffset(),_=g.getFullYear(),S=_<1;S&&(_=Math.abs(_)+1);var w=l(_,4)+"-"+l(g.getMonth()+1,2)+"-"+l(g.getDate(),2)+"T"+l(g.getHours(),2)+":"+l(g.getMinutes(),2)+":"+l(g.getSeconds(),2)+"."+l(g.getMilliseconds(),3);return f<0?(w+="-",f*=-1):w+="+",w+=l(Math.floor(f/60),2)+":"+l(f%60,2),S&&(w+=" BC"),w}s(d,"Iu"),P(d,"dateToString");function p(g){var f=g.getUTCFullYear(),_=f<1;_&&(f=Math.abs(f)+1);var S=l(f,4)+"-"+l(g.getUTCMonth()+1,2)+"-"+l(g.getUTCDate(),2)+"T"+l(g.getUTCHours(),2)+":"+l(g.getUTCMinutes(),2)+":"+l(g.getUTCSeconds(),2)+"."+l(g.getUTCMilliseconds(),3);return S+="+00:00",_&&(S+=" BC"),S}s(p,"Tu"),P(p,"dateToStringUTC");function m(g,f,_){return g=typeof g=="string"?{text:g}:g,f&&(typeof f=="function"?g.callback=f:g.values=f),_&&(g.callback=_),g}s(m,"Pu"),P(m,"normalizeQueryConfig");var h=P(function(g){return r.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),y=P(function(g,f,_){var S=h(f+g),w=h(Be.concat([Be.from(S),_]));return"md5"+w},"postgresMd5PasswordHash");e.exports={prepareValue:P(function(g){return a(g)},"prepareValueWrapper"),normalizeQueryConfig:m,postgresMd5PasswordHash:y,md5:h}}),Vu={};oo(Vu,{default:s(()=>N$,"default")});Im=vn(()=>{"use strict";Oe(),N$={}}),lW=ot((t,e)=>{"use strict";Oe();var r=(R$(),$r(Zb));function n(f){if(f.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let _=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:_,response:"n,,n=*,r="+_,message:"SASLInitialResponse"}}s(n,"Mu"),P(n,"startSession");function o(f,_,S){if(f.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof S!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let w=d(S);if(w.nonce.startsWith(f.clientNonce)){if(w.nonce.length===f.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var x=Be.from(w.salt,"base64"),I=g(_,x,w.iteration),N=y(I,"Client Key"),$=h(N),O="n=*,r="+f.clientNonce,R="r="+w.nonce+",s="+w.salt+",i="+w.iteration,A="c=biws,r="+w.nonce,D=O+","+R+","+A,M=y($,D),Q=m(N,M),Z=Q.toString("base64"),F=y(I,"Server Key"),ee=y(F,D);f.message="SASLResponse",f.serverSignature=ee.toString("base64"),f.response=A+",p="+Z}s(o,"Uu"),P(o,"continueSession");function i(f,_){if(f.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:S}=p(_);if(S!==f.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}s(i,"Du"),P(i,"finalizeSession");function a(f){if(typeof f!="string")throw new TypeError("SASL: text must be a string");return f.split("").map((_,S)=>f.charCodeAt(S)).every(_=>_>=33&&_<=43||_>=45&&_<=126)}s(a,"Ou"),P(a,"isPrintableChars");function c(f){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f)}s(c,"ls"),P(c,"isBase64");function l(f){if(typeof f!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(f.split(",").map(_=>{if(!/^.=/.test(_))throw new Error("SASL: Invalid attribute pair entry");let S=_[0],w=_.substring(2);return[S,w]}))}s(l,"fs"),P(l,"parseAttributePairs");function d(f){let _=l(f),S=_.get("r");if(S){if(!a(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let w=_.get("s");if(w){if(!c(w))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let x=_.get("i");if(x){if(!/^[1-9][0-9]*$/.test(x))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let I=parseInt(x,10);return{nonce:S,salt:w,iteration:I}}s(d,"qu"),P(d,"parseServerFirstMessage");function p(f){let _=l(f).get("v");if(_){if(!c(_))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:_}}s(p,"Qu"),P(p,"parseServerFinalMessage");function m(f,_){if(!Be.isBuffer(f))throw new TypeError("first argument must be a Buffer");if(!Be.isBuffer(_))throw new TypeError("second argument must be a Buffer");if(f.length!==_.length)throw new Error("Buffer lengths must match");if(f.length===0)throw new Error("Buffers cannot be empty");return Be.from(f.map((S,w)=>f[w]^_[w]))}s(m,"hs"),P(m,"xorBuffers");function h(f){return r.createHash("sha256").update(f).digest()}s(h,"Nu"),P(h,"sha256");function y(f,_){return r.createHmac("sha256",f).update(_).digest()}s(y,"Ue"),P(y,"hmacSha256");function g(f,_,S){for(var w=y(f,Be.concat([_,Be.from([0,0,0,1])])),x=w,I=0;I<S-1;I++)w=y(f,w),x=m(x,w);return x}s(g,"Wu"),P(g,"Hi"),e.exports={startSession:n,continueSession:o,finalizeSession:i}}),Jb={};oo(Jb,{join:s(()=>D$,"join")});s(D$,"ju");j$=vn(()=>{"use strict";Oe(),P(D$,"join")}),Gb={};oo(Gb,{stat:s(()=>M$,"stat")});s(M$,"Hu");z$=vn(()=>{"use strict";Oe(),P(M$,"stat")}),Kb={};oo(Kb,{default:s(()=>U$,"default")});L$=vn(()=>{"use strict";Oe(),U$={}}),q$={};oo(q$,{StringDecoder:s(()=>F$,"StringDecoder")});dW=vn(()=>{"use strict";Oe(),Ub=class{static{s(this,"Er")}constructor(e){He(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},P(Ub,"StringDecoder"),F$=Ub}),pW=ot((t,e)=>{"use strict";Oe();var{Transform:r}=(L$(),$r(Kb)),{StringDecoder:n}=(dW(),$r(q$)),o=Symbol("last"),i=Symbol("decoder");function a(m,h,y){let g;if(this.overflow){if(g=this[i].write(m).split(this.matcher),g.length===1)return y();g.shift(),this.overflow=!1}else this[o]+=this[i].write(m),g=this[o].split(this.matcher);this[o]=g.pop();for(let f=0;f<g.length;f++)try{l(this,this.mapper(g[f]))}catch(_){return y(_)}if(this.overflow=this[o].length>this.maxLength,this.overflow&&!this.skipOverflow){y(new Error("maximum buffer reached"));return}y()}s(a,"zu"),P(a,"transform");function c(m){if(this[o]+=this[i].end(),this[o])try{l(this,this.mapper(this[o]))}catch(h){return m(h)}m()}s(c,"Ku"),P(c,"flush");function l(m,h){h!==void 0&&m.push(h)}s(l,"gs"),P(l,"push");function d(m){return m}s(d,"ws"),P(d,"noop");function p(m,h,y){switch(m=m||/\r?\n/,h=h||d,y=y||{},arguments.length){case 1:typeof m=="function"?(h=m,m=/\r?\n/):typeof m=="object"&&!(m instanceof RegExp)&&!m[Symbol.split]&&(y=m,m=/\r?\n/);break;case 2:typeof m=="function"?(y=h,h=m,m=/\r?\n/):typeof h=="object"&&(y=h,h=d)}y=Object.assign({},y),y.autoDestroy=!0,y.transform=a,y.flush=c,y.readableObjectMode=!0;let g=new r(y);return g[o]="",g[i]=new n("utf8"),g.matcher=m,g.mapper=h,g.maxLength=y.maxLength,g.skipOverflow=y.skipOverflow||!1,g.overflow=!1,g._destroy=function(f,_){this._writableState.errorEmitted=!1,_(f)},g}s(p,"Yu"),P(p,"split"),e.exports=p}),mW=ot((t,e)=>{"use strict";Oe();var r=(j$(),$r(Jb)),n=(L$(),$r(Kb)).Stream,o=pW(),i=(Im(),$r(Vu)),a=5432,c=nt.platform==="win32",l=nt.stderr,d=56,p=7,m=61440,h=32768;function y(N){return(N&m)==h}s(y,"ic"),P(y,"isRegFile");var g=["host","port","database","user","password"],f=g.length,_=g[f-1];function S(){var N=l instanceof n&&l.writable===!0;if(N){var $=Array.prototype.slice.call(arguments).concat(`
`);l.write(i.format.apply(i,$))}}s(S,"Cr"),P(S,"warn"),Object.defineProperty(e.exports,"isWin",{get:P(function(){return c},"get"),set:P(function(N){c=N},"set")}),e.exports.warnTo=function(N){var $=l;return l=N,$},e.exports.getFileName=function(N){var $=N||nt.env,O=$.PGPASSFILE||(c?r.join($.APPDATA||"./","postgresql","pgpass.conf"):r.join($.HOME||"./",".pgpass"));return O},e.exports.usePgPass=function(N,$){return Object.prototype.hasOwnProperty.call(nt.env,"PGPASSWORD")?!1:c?!0:($=$||"<unkn>",y(N.mode)?N.mode&(d|p)?(S('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',$),!1):!0:(S('WARNING: password file "%s" is not a plain file',$),!1))};var w=e.exports.match=function(N,$){return g.slice(0,-1).reduce(function(O,R,A){return A==1&&Number(N[R]||a)===Number($[R])?O&&!0:O&&($[R]==="*"||$[R]===N[R])},!0)};e.exports.getPassword=function(N,$,O){var R,A=$.pipe(o());function D(Z){var F=x(Z);F&&I(F)&&w(N,F)&&(R=F[_],A.end())}s(D,"s"),P(D,"onLine");var M=P(function(){$.destroy(),O(R)},"onEnd"),Q=P(function(Z){$.destroy(),S("WARNING: error on reading file: %s",Z),O(void 0)},"onErr");$.on("error",Q),A.on("data",D).on("end",M).on("error",Q)};var x=e.exports.parseLine=function(N){if(N.length<11||N.match(/^\s+#/))return null;for(var $="",O="",R=0,A=0,D=0,M={},Q=!1,Z=P(function(ee,ne,se){var we=N.substring(ne,se);Object.hasOwnProperty.call(nt.env,"PGPASS_NO_DEESCAPE")||(we=we.replace(/\\([:\\])/g,"$1")),M[g[ee]]=we},"addToObj"),F=0;F<N.length-1;F+=1){if($=N.charAt(F+1),O=N.charAt(F),Q=R==f-1,Q){Z(R,A);break}F>=0&&$==":"&&O!=="\\"&&(Z(R,A,F+1),A=F+2,R+=1)}return M=Object.keys(M).length===f?M:null,M},I=e.exports.isValidEntry=function(N){for(var $={0:function(M){return M.length>0},1:function(M){return M==="*"?!0:(M=Number(M),isFinite(M)&&M>0&&M<9007199254740992&&Math.floor(M)===M)},2:function(M){return M.length>0},3:function(M){return M.length>0},4:function(M){return M.length>0}},O=0;O<g.length;O+=1){var R=$[O],A=N[g[O]]||"",D=R(A);if(!D)return!1}return!0}}),fW=ot((t,e)=>{"use strict";Oe();var r=(j$(),$r(Jb)),n=(z$(),$r(Gb)),o=mW();e.exports=function(i,a){var c=o.getFileName();n.stat(c,function(l,d){if(l||!o.usePgPass(d,c))return a(void 0);var p=n.createReadStream(c);o.getPassword(i,p,a)})},e.exports.warnTo=o.warnTo}),B$={};oo(B$,{default:s(()=>V$,"default")});hW=vn(()=>{"use strict";Oe(),V$={}}),gW=ot((t,e)=>{"use strict";Oe();var r=(k$(),$r(E$)),n=(z$(),$r(Gb));function o(i){if(i.charAt(0)==="/"){var c=i.split(" ");return{host:c[0],database:c[1]}}var a=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),c=a.query;for(var l in c)Array.isArray(c[l])&&(c[l]=c[l][c[l].length-1]);var d=(a.auth||":").split(":");if(c.user=d[0],c.password=d.splice(1).join(":"),c.port=a.port,a.protocol=="socket:")return c.host=decodeURI(a.pathname),c.database=a.query.db,c.client_encoding=a.query.encoding,c;c.host||(c.host=a.hostname);var p=a.pathname;if(!c.host&&p&&/^%2f/i.test(p)){var m=p.split("/");c.host=decodeURIComponent(m[0]),p=m.splice(1).join("/")}switch(p&&p.charAt(0)==="/"&&(p=p.slice(1)||null),c.database=p&&decodeURI(p),(c.ssl==="true"||c.ssl==="1")&&(c.ssl=!0),c.ssl==="0"&&(c.ssl=!1),(c.sslcert||c.sslkey||c.sslrootcert||c.sslmode)&&(c.ssl={}),c.sslcert&&(c.ssl.cert=n.readFileSync(c.sslcert).toString()),c.sslkey&&(c.ssl.key=n.readFileSync(c.sslkey).toString()),c.sslrootcert&&(c.ssl.ca=n.readFileSync(c.sslrootcert).toString()),c.sslmode){case"disable":{c.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{c.ssl.rejectUnauthorized=!1;break}}return c}s(o,"Tr"),P(o,"parse"),e.exports=o,o.parse=o}),Wb=ot((t,e)=>{"use strict";Oe();var r=(hW(),$r(B$)),n=Em(),o=gW().parse,i=P(function(m,h,y){return y===void 0?y=nt.env["PG"+m.toUpperCase()]:y===!1||(y=nt.env[y]),h[m]||y||n[m]},"val"),a=P(function(){switch(nt.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),c=P(function(m){return"'"+(""+m).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),l=P(function(m,h,y){var g=h[y];g!=null&&m.push(y+"="+c(g))},"add"),d=class{static{s(this,"Br")}constructor(h){h=typeof h=="string"?o(h):h||{},h.connectionString&&(h=Object.assign({},h,o(h.connectionString))),this.user=i("user",h),this.database=i("database",h),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",h),10),this.host=i("host",h),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",h)}),this.binary=i("binary",h),this.options=i("options",h),this.ssl=typeof h.ssl>"u"?a():h.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",h),this.replication=i("replication",h),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",h,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",h,!1),this.statement_timeout=i("statement_timeout",h,!1),this.lock_timeout=i("lock_timeout",h,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",h,!1),this.query_timeout=i("query_timeout",h,!1),h.connectionTimeoutMillis===void 0?this.connect_timeout=nt.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(h.connectionTimeoutMillis/1e3),h.keepAlive===!1?this.keepalives=0:h.keepAlive===!0&&(this.keepalives=1),typeof h.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(h.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(h){var y=[];l(y,this,"user"),l(y,this,"password"),l(y,this,"port"),l(y,this,"application_name"),l(y,this,"fallback_application_name"),l(y,this,"connect_timeout"),l(y,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(y,g,"sslmode"),l(y,g,"sslca"),l(y,g,"sslkey"),l(y,g,"sslcert"),l(y,g,"sslrootcert"),this.database&&y.push("dbname="+c(this.database)),this.replication&&y.push("replication="+c(this.replication)),this.host&&y.push("host="+c(this.host)),this.isDomainSocket)return h(null,y.join(" "));this.client_encoding&&y.push("client_encoding="+c(this.client_encoding)),r.lookup(this.host,function(f,_){return f?h(f,null):(y.push("hostaddr="+c(_)),h(null,y.join(" ")))})}};P(d,"ConnectionParameters");var p=d;e.exports=p}),yW=ot((t,e)=>{"use strict";Oe();var r=Tm(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,o=class{static{s(this,"Lr")}constructor(c,l){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=l,this.RowCtor=null,this.rowAsArray=c==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(c){var l;c.text?l=n.exec(c.text):l=n.exec(c.command),l&&(this.command=l[1],l[3]?(this.oid=parseInt(l[2],10),this.rowCount=parseInt(l[3],10)):l[2]&&(this.rowCount=parseInt(l[2],10)))}_parseRowAsArray(c){for(var l=new Array(c.length),d=0,p=c.length;d<p;d++){var m=c[d];m!==null?l[d]=this._parsers[d](m):l[d]=null}return l}parseRow(c){for(var l={},d=0,p=c.length;d<p;d++){var m=c[d],h=this.fields[d].name;m!==null?l[h]=this._parsers[d](m):l[h]=null}return l}addRow(c){this.rows.push(c)}addFields(c){this.fields=c,this.fields.length&&(this._parsers=new Array(c.length));for(var l=0;l<c.length;l++){var d=c[l];this._types?this._parsers[l]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[l]=r.getTypeParser(d.dataTypeID,d.format||"text")}}};P(o,"Result");var i=o;e.exports=i}),vW=ot((t,e)=>{"use strict";Oe();var{EventEmitter:r}=Vs(),n=yW(),o=km(),i=class extends r{static{s(this,"kr")}constructor(l,d,p){super(),l=o.normalizeQueryConfig(l,d,p),this.text=l.text,this.values=l.values,this.rows=l.rows,this.types=l.types,this.name=l.name,this.binary=l.binary,this.portal=l.portal||"",this.callback=l.callback,this._rowMode=l.rowMode,nt.domain&&l.callback&&(this.callback=nt.domain.bind(l.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(l){this._checkForMultirow(),this._result.addFields(l.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(l){let d;if(!this._canceledDueToError){try{d=this._result.parseRow(l.fields)}catch(p){this._canceledDueToError=p;return}this.emit("row",d,this._result),this._accumulateRows&&this._result.addRow(d)}}handleCommandComplete(l,d){this._checkForMultirow(),this._result.addCommandComplete(l),this.rows&&d.sync()}handleEmptyQuery(l){this.rows&&l.sync()}handleError(l,d){if(this._canceledDueToError&&(l=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(l);this.emit("error",l)}handleReadyForQuery(l){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,l);if(this.callback)try{this.callback(null,this._results)}catch(d){nt.nextTick(()=>{throw d})}this.emit("end",this._results)}submit(l){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let d=l.parsedStatements[this.name];return this.text&&d&&this.text!==d?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(l):l.query(this.text),null)}hasBeenParsed(l){return this.name&&l.parsedStatements[this.name]}handlePortalSuspended(l){this._getRows(l,this.rows)}_getRows(l,d){l.execute({portal:this.portal,rows:d}),d?l.flush():l.sync()}prepare(l){this.isPreparedStatement=!0,this.hasBeenParsed(l)||l.parse({text:this.text,name:this.name,types:this.types});try{l.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:o.prepareValue})}catch(d){this.handleError(d,l);return}l.describe({type:"P",name:this.portal||""}),this._getRows(l,this.rows)}handleCopyInResponse(l){l.sendCopyFail("No source stream defined")}handleCopyData(l,d){}};P(i,"Query");var a=i;e.exports=a}),H$=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{static{s(this,"Kr")}constructor(F,ee,ne){super(F),this.length=ee,this.name=ne}};P(e,"DatabaseError");var r=e;t.DatabaseError=r;var n=class{static{s(this,"Yr")}constructor(F,ee){this.length=F,this.chunk=ee,this.name="copyData"}};P(n,"CopyDataMessage");var o=n;t.CopyDataMessage=o;var i=class{static{s(this,"Zr")}constructor(F,ee,ne,se){this.length=F,this.name=ee,this.binary=ne,this.columnTypes=new Array(se)}};P(i,"CopyResponse");var a=i;t.CopyResponse=a;var c=class{static{s(this,"Jr")}constructor(F,ee,ne,se,we,Ee,rt){this.name=F,this.tableID=ee,this.columnID=ne,this.dataTypeID=se,this.dataTypeSize=we,this.dataTypeModifier=Ee,this.format=rt}};P(c,"Field");var l=c;t.Field=l;var d=class{static{s(this,"Xr")}constructor(F,ee){this.length=F,this.fieldCount=ee,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};P(d,"RowDescriptionMessage");var p=d;t.RowDescriptionMessage=p;var m=class{static{s(this,"en")}constructor(F,ee){this.length=F,this.parameterCount=ee,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};P(m,"ParameterDescriptionMessage");var h=m;t.ParameterDescriptionMessage=h;var y=class{static{s(this,"tn")}constructor(F,ee,ne){this.length=F,this.parameterName=ee,this.parameterValue=ne,this.name="parameterStatus"}};P(y,"ParameterStatusMessage");var g=y;t.ParameterStatusMessage=g;var f=class{static{s(this,"rn")}constructor(F,ee){this.length=F,this.salt=ee,this.name="authenticationMD5Password"}};P(f,"AuthenticationMD5Password");var _=f;t.AuthenticationMD5Password=_;var S=class{static{s(this,"nn")}constructor(F,ee,ne){this.length=F,this.processID=ee,this.secretKey=ne,this.name="backendKeyData"}};P(S,"BackendKeyDataMessage");var w=S;t.BackendKeyDataMessage=w;var x=class{static{s(this,"sn")}constructor(F,ee,ne,se){this.length=F,this.processId=ee,this.channel=ne,this.payload=se,this.name="notification"}};P(x,"NotificationResponseMessage");var I=x;t.NotificationResponseMessage=I;var N=class{static{s(this,"on")}constructor(F,ee){this.length=F,this.status=ee,this.name="readyForQuery"}};P(N,"ReadyForQueryMessage");var $=N;t.ReadyForQueryMessage=$;var O=class{static{s(this,"an")}constructor(F,ee){this.length=F,this.text=ee,this.name="commandComplete"}};P(O,"CommandCompleteMessage");var R=O;t.CommandCompleteMessage=R;var A=class{static{s(this,"un")}constructor(F,ee){this.length=F,this.fields=ee,this.name="dataRow",this.fieldCount=ee.length}};P(A,"DataRowMessage");var D=A;t.DataRowMessage=D;var M=class{static{s(this,"cn")}constructor(F,ee){this.length=F,this.message=ee,this.name="notice"}};P(M,"NoticeMessage");var Q=M;t.NoticeMessage=Q}),_W=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{static{s(this,"hn")}constructor(o=256){this.size=o,this.offset=5,this.headerPosition=0,this.buffer=Be.allocUnsafe(o)}ensure(o){if(this.buffer.length-this.offset<o){let i=this.buffer,a=i.length+(i.length>>1)+o;this.buffer=Be.allocUnsafe(a),i.copy(this.buffer)}}addInt32(o){return this.ensure(4),this.buffer[this.offset++]=o>>>24&255,this.buffer[this.offset++]=o>>>16&255,this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addInt16(o){return this.ensure(2),this.buffer[this.offset++]=o>>>8&255,this.buffer[this.offset++]=o>>>0&255,this}addCString(o){if(!o)this.ensure(1);else{let i=Be.byteLength(o);this.ensure(i+1),this.buffer.write(o,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(o=""){let i=Be.byteLength(o);return this.ensure(i),this.buffer.write(o,this.offset),this.offset+=i,this}add(o){return this.ensure(o.length),o.copy(this.buffer,this.offset),this.offset+=o.length,this}join(o){if(o){this.buffer[this.headerPosition]=o;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(o?0:5,this.offset)}flush(o){let i=this.join(o);return this.offset=5,this.headerPosition=0,this.buffer=Be.allocUnsafe(this.size),i}};P(e,"Writer");var r=e;t.Writer=r}),bW=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=_W(),r=new e.Writer,n=P(F=>{r.addInt16(3).addInt16(0);for(let se of Object.keys(F))r.addCString(se).addCString(F[se]);r.addCString("client_encoding").addCString("UTF8");let ee=r.addCString("").flush(),ne=ee.length+4;return new e.Writer().addInt32(ne).add(ee).flush()},"startup"),o=P(()=>{let F=Be.allocUnsafe(8);return F.writeInt32BE(8,0),F.writeInt32BE(80877103,4),F},"requestSsl"),i=P(F=>r.addCString(F).flush(112),"password"),a=P(function(F,ee){return r.addCString(F).addInt32(Be.byteLength(ee)).addString(ee),r.flush(112)},"sendSASLInitialResponseMessage"),c=P(function(F){return r.addString(F).flush(112)},"sendSCRAMClientFinalMessage"),l=P(F=>r.addCString(F).flush(81),"query"),d=[],p=P(F=>{let ee=F.name||"";ee.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",ee,ee.length),console.error("This can cause conflicts and silent errors executing queries"));let ne=F.types||d,se=ne.length,we=r.addCString(ee).addCString(F.text).addInt16(se);for(let Ee=0;Ee<se;Ee++)we.addInt32(ne[Ee]);return r.flush(80)},"parse"),m=new e.Writer,h=P(function(F,ee){for(let ne=0;ne<F.length;ne++){let se=ee?ee(F[ne],ne):F[ne];se==null?(r.addInt16(0),m.addInt32(-1)):se instanceof Be?(r.addInt16(1),m.addInt32(se.length),m.add(se)):(r.addInt16(0),m.addInt32(Be.byteLength(se)),m.addString(se))}},"writeValues"),y=P((F={})=>{let ee=F.portal||"",ne=F.statement||"",se=F.binary||!1,we=F.values||d,Ee=we.length;return r.addCString(ee).addCString(ne),r.addInt16(Ee),h(we,F.valueMapper),r.addInt16(Ee),r.add(m.flush()),r.addInt16(se?1:0),r.flush(66)},"bind"),g=Be.from([69,0,0,0,9,0,0,0,0,0]),f=P(F=>{if(!F||!F.portal&&!F.rows)return g;let ee=F.portal||"",ne=F.rows||0,se=Be.byteLength(ee),we=4+se+1+4,Ee=Be.allocUnsafe(1+we);return Ee[0]=69,Ee.writeInt32BE(we,1),Ee.write(ee,5,"utf-8"),Ee[se+5]=0,Ee.writeUInt32BE(ne,Ee.length-4),Ee},"execute"),_=P((F,ee)=>{let ne=Be.allocUnsafe(16);return ne.writeInt32BE(16,0),ne.writeInt16BE(1234,4),ne.writeInt16BE(5678,6),ne.writeInt32BE(F,8),ne.writeInt32BE(ee,12),ne},"cancel"),S=P((F,ee)=>{let ne=4+Be.byteLength(ee)+1,se=Be.allocUnsafe(1+ne);return se[0]=F,se.writeInt32BE(ne,1),se.write(ee,5,"utf-8"),se[ne]=0,se},"cstringMessage"),w=r.addCString("P").flush(68),x=r.addCString("S").flush(68),I=P(F=>F.name?S(68,`${F.type}${F.name||""}`):F.type==="P"?w:x,"describe"),N=P(F=>{let ee=`${F.type}${F.name||""}`;return S(67,ee)},"close"),$=P(F=>r.add(F).flush(100),"copyData"),O=P(F=>S(102,F),"copyFail"),R=P(F=>Be.from([F,0,0,0,4]),"codeOnlyBuffer"),A=R(72),D=R(83),M=R(88),Q=R(99),Z={startup:n,password:i,requestSsl:o,sendSASLInitialResponseMessage:a,sendSCRAMClientFinalMessage:c,query:l,parse:p,bind:y,execute:f,describe:I,close:N,flush:P(()=>A,"flush"),sync:P(()=>D,"sync"),end:P(()=>M,"end"),copyData:$,copyDone:P(()=>Q,"copyDone"),copyFail:O,cancel:_};t.serialize=Z}),wW=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=Be.allocUnsafe(0),r=class{static{s(this,"mn")}constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,a){this.offset=i,this.buffer=a}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let a=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,a}cstring(){let i=this.offset,a=i;for(;this.buffer[a++]!==0;);return this.offset=a,this.buffer.toString(this.encoding,i,a-1)}bytes(i){let a=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,a}};P(r,"BufferReader");var n=r;t.BufferReader=n}),SW=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=H$(),r=wW(),n=1,o=4,i=n+o,a=Be.allocUnsafe(0),c=class{static{s(this,"bn")}constructor(p){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,p?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=p?.mode||"text"}parse(p,m){this.mergeBuffer(p);let h=this.bufferOffset+this.bufferLength,y=this.bufferOffset;for(;y+i<=h;){let g=this.buffer[y],f=this.buffer.readUInt32BE(y+n),_=n+f;if(_+y<=h){let S=this.handlePacket(y+i,g,f,this.buffer);m(S),y+=_}else break}y===h?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=h-y,this.bufferOffset=y)}mergeBuffer(p){if(this.bufferLength>0){let m=this.bufferLength+p.byteLength;if(m+this.bufferOffset>this.buffer.byteLength){let h;if(m<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)h=this.buffer;else{let y=this.buffer.byteLength*2;for(;m>=y;)y*=2;h=Be.allocUnsafe(y)}this.buffer.copy(h,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=h,this.bufferOffset=0}p.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=m}else this.buffer=p,this.bufferOffset=0,this.bufferLength=p.byteLength}handlePacket(p,m,h,y){switch(m){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(p,h,y);case 67:return this.parseCommandCompleteMessage(p,h,y);case 90:return this.parseReadyForQueryMessage(p,h,y);case 65:return this.parseNotificationMessage(p,h,y);case 82:return this.parseAuthenticationResponse(p,h,y);case 83:return this.parseParameterStatusMessage(p,h,y);case 75:return this.parseBackendKeyData(p,h,y);case 69:return this.parseErrorMessage(p,h,y,"error");case 78:return this.parseErrorMessage(p,h,y,"notice");case 84:return this.parseRowDescriptionMessage(p,h,y);case 116:return this.parseParameterDescriptionMessage(p,h,y);case 71:return this.parseCopyInMessage(p,h,y);case 72:return this.parseCopyOutMessage(p,h,y);case 100:return this.parseCopyData(p,h,y);default:return new e.DatabaseError("received invalid response: "+m.toString(16),h,"error")}}parseReadyForQueryMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.string(1);return new e.ReadyForQueryMessage(m,y)}parseCommandCompleteMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring();return new e.CommandCompleteMessage(m,y)}parseCopyData(p,m,h){let y=h.slice(p,p+(m-4));return new e.CopyDataMessage(m,y)}parseCopyInMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyInResponse")}parseCopyOutMessage(p,m,h){return this.parseCopyMessage(p,m,h,"copyOutResponse")}parseCopyMessage(p,m,h,y){this.reader.setBuffer(p,h);let g=this.reader.byte()!==0,f=this.reader.int16(),_=new e.CopyResponse(m,y,g,f);for(let S=0;S<f;S++)_.columnTypes[S]=this.reader.int16();return _}parseNotificationMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.cstring(),f=this.reader.cstring();return new e.NotificationResponseMessage(m,y,g,f)}parseRowDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.RowDescriptionMessage(m,y);for(let f=0;f<y;f++)g.fields[f]=this.parseField();return g}parseField(){let p=this.reader.cstring(),m=this.reader.uint32(),h=this.reader.int16(),y=this.reader.uint32(),g=this.reader.int16(),f=this.reader.int32(),_=this.reader.int16()===0?"text":"binary";return new e.Field(p,m,h,y,g,f,_)}parseParameterDescriptionMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new e.ParameterDescriptionMessage(m,y);for(let f=0;f<y;f++)g.dataTypeIDs[f]=this.reader.int32();return g}parseDataRowMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int16(),g=new Array(y);for(let f=0;f<y;f++){let _=this.reader.int32();g[f]=_===-1?null:this.reader.string(_)}return new e.DataRowMessage(m,g)}parseParameterStatusMessage(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(m,y,g)}parseBackendKeyData(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(m,y,g)}parseAuthenticationResponse(p,m,h){this.reader.setBuffer(p,h);let y=this.reader.int32(),g={name:"authenticationOk",length:m};switch(y){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let f=this.reader.bytes(4);return new e.AuthenticationMD5Password(m,f)}break;case 10:{g.name="authenticationSASL",g.mechanisms=[];let f;do f=this.reader.cstring(),f&&g.mechanisms.push(f);while(f)}break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(m-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(m-8);break;default:throw new Error("Unknown authenticationOk message type "+y)}return g}parseErrorMessage(p,m,h,y){this.reader.setBuffer(p,h);let g={},f=this.reader.string(1);for(;f!=="\0";)g[f]=this.reader.cstring(),f=this.reader.string(1);let _=g.M,S=y==="notice"?new e.NoticeMessage(m,_):new e.DatabaseError(_,m,y);return S.severity=g.S,S.code=g.C,S.detail=g.D,S.hint=g.H,S.position=g.P,S.internalPosition=g.p,S.internalQuery=g.q,S.where=g.W,S.schema=g.s,S.table=g.t,S.column=g.c,S.dataType=g.d,S.constraint=g.n,S.file=g.F,S.line=g.L,S.routine=g.R,S}};P(c,"Parser");var l=c;t.Parser=l}),Z$=ot(t=>{"use strict";Oe(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=H$();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:P(function(){return e.DatabaseError},"get")});var r=bW();Object.defineProperty(t,"serialize",{enumerable:!0,get:P(function(){return r.serialize},"get")});var n=SW();function o(i,a){let c=new n.Parser;return i.on("data",l=>c.parse(l,a)),new Promise(l=>i.on("end",()=>l()))}s(o,"Hc"),P(o,"parse"),t.parse=o}),J$={};oo(J$,{connect:s(()=>G$,"connect")});s(G$,"$c");xW=vn(()=>{"use strict";Oe(),P(G$,"connect")}),K$=ot((t,e)=>{"use strict";Oe();var r=(Bu(),$r(x$)),n=Vs().EventEmitter,{parse:o,serialize:i}=Z$(),a=i.flush(),c=i.sync(),l=i.end(),d=class extends n{static{s(this,"Sn")}constructor(h){super(),h=h||{},this.stream=h.stream||new r.Socket,this._keepAlive=h.keepAlive,this._keepAliveInitialDelayMillis=h.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=h.ssl||!1,this._ending=!1,this._emitMessage=!1;var y=this;this.on("newListener",function(g){g==="message"&&(y._emitMessage=!0)})}connect(h,y){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(h,y),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let f=P(function(_){g._ending&&(_.code==="ECONNRESET"||_.code==="EPIPE")||g.emit("error",_)},"reportStreamError");if(this.stream.on("error",f),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(_){var S=_.toString("utf8");switch(S){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var w=(xW(),$r(J$));let x={socket:g.stream};g.ssl!==!0&&(Object.assign(x,g.ssl),"key"in g.ssl&&(x.key=g.ssl.key)),r.isIP(y)===0&&(x.servername=y);try{g.stream=w.connect(x)}catch(I){return g.emit("error",I)}g.attachListeners(g.stream),g.stream.on("error",f),g.emit("sslconnect")})}attachListeners(h){h.on("end",()=>{this.emit("end")}),o(h,y=>{var g=y.name==="error"?"errorMessage":y.name;this._emitMessage&&this.emit("message",y),this.emit(g,y)})}requestSsl(){this.stream.write(i.requestSsl())}startup(h){this.stream.write(i.startup(h))}cancel(h,y){this._send(i.cancel(h,y))}password(h){this._send(i.password(h))}sendSASLInitialResponseMessage(h,y){this._send(i.sendSASLInitialResponseMessage(h,y))}sendSCRAMClientFinalMessage(h){this._send(i.sendSCRAMClientFinalMessage(h))}_send(h){return this.stream.writable?this.stream.write(h):!1}query(h){this._send(i.query(h))}parse(h){this._send(i.parse(h))}bind(h){this._send(i.bind(h))}execute(h){this._send(i.execute(h))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(c)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(h){this._send(i.close(h))}describe(h){this._send(i.describe(h))}sendCopyFromChunk(h){this._send(i.copyData(h))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(h){this._send(i.copyFail(h))}};P(d,"Connection");var p=d;e.exports=p}),TW=ot((t,e)=>{"use strict";Oe();var r=Vs().EventEmitter,n=(Im(),$r(Vu)),o=km(),i=lW(),a=fW(),c=Hb(),l=Wb(),d=vW(),p=Em(),m=K$(),h=class extends r{static{s(this,"Cn")}constructor(f){super(),this.connectionParameters=new l(f),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var _=f||{};this._Promise=_.Promise||xm.Promise,this._types=new c(_.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=_.connection||new m({stream:_.stream,ssl:this.connectionParameters.ssl,keepAlive:_.keepAlive||!1,keepAliveInitialDelayMillis:_.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=_.binary||p.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=_.connectionTimeoutMillis||0}_errorAllQueries(f){let _=P(S=>{nt.nextTick(()=>{S.handleError(f,this.connection)})},"enqueueError");this.activeQuery&&(_(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(_),this.queryQueue.length=0}_connect(f){var _=this,S=this.connection;if(this._connectionCallback=f,this._connecting||this._connected){let w=new Error("Client has already been connected. You cannot reuse a client.");nt.nextTick(()=>{f(w)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{S._ending=!0,S.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?S.connect(this.host+"/.s.PGSQL."+this.port):S.connect(this.port,this.host),S.on("connect",function(){_.ssl?S.requestSsl():S.startup(_.getStartupConf())}),S.on("sslconnect",function(){S.startup(_.getStartupConf())}),this._attachListeners(S),S.once("end",()=>{let w=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(w),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(w):this._handleErrorEvent(w):this._connectionError||this._handleErrorEvent(w)),nt.nextTick(()=>{this.emit("end")})})}connect(f){if(f){this._connect(f);return}return new this._Promise((_,S)=>{this._connect(w=>{w?S(w):_()})})}_attachListeners(f){f.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),f.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),f.on("authenticationSASL",this._handleAuthSASL.bind(this)),f.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),f.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),f.on("backendKeyData",this._handleBackendKeyData.bind(this)),f.on("error",this._handleErrorEvent.bind(this)),f.on("errorMessage",this._handleErrorMessage.bind(this)),f.on("readyForQuery",this._handleReadyForQuery.bind(this)),f.on("notice",this._handleNotice.bind(this)),f.on("rowDescription",this._handleRowDescription.bind(this)),f.on("dataRow",this._handleDataRow.bind(this)),f.on("portalSuspended",this._handlePortalSuspended.bind(this)),f.on("emptyQuery",this._handleEmptyQuery.bind(this)),f.on("commandComplete",this._handleCommandComplete.bind(this)),f.on("parseComplete",this._handleParseComplete.bind(this)),f.on("copyInResponse",this._handleCopyInResponse.bind(this)),f.on("copyData",this._handleCopyData.bind(this)),f.on("notification",this._handleNotification.bind(this))}_checkPgPass(f){let _=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(S=>{if(S!==void 0){if(typeof S!="string"){_.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=S}else this.connectionParameters.password=this.password=null;f()}).catch(S=>{_.emit("error",S)}):this.password!==null?f():a(this.connectionParameters,S=>{S!==void 0&&(this.connectionParameters.password=this.password=S),f()})}_handleAuthCleartextPassword(f){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(f){this._checkPgPass(()=>{let _=o.postgresMd5PasswordHash(this.user,this.password,f.salt);this.connection.password(_)})}_handleAuthSASL(f){this._checkPgPass(()=>{this.saslSession=i.startSession(f.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(f){i.continueSession(this.saslSession,this.password,f.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(f){i.finalizeSession(this.saslSession,f.data),this.saslSession=null}_handleBackendKeyData(f){this.processID=f.processID,this.secretKey=f.secretKey}_handleReadyForQuery(f){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:_}=this;this.activeQuery=null,this.readyForQuery=!0,_&&_.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(f){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(f);this.emit("error",f)}}_handleErrorEvent(f){if(this._connecting)return this._handleErrorWhileConnecting(f);this._queryable=!1,this._errorAllQueries(f),this.emit("error",f)}_handleErrorMessage(f){if(this._connecting)return this._handleErrorWhileConnecting(f);let _=this.activeQuery;if(!_){this._handleErrorEvent(f);return}this.activeQuery=null,_.handleError(f,this.connection)}_handleRowDescription(f){this.activeQuery.handleRowDescription(f)}_handleDataRow(f){this.activeQuery.handleDataRow(f)}_handlePortalSuspended(f){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(f){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(f){this.activeQuery.handleCommandComplete(f,this.connection)}_handleParseComplete(f){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(f){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(f){this.activeQuery.handleCopyData(f,this.connection)}_handleNotification(f){this.emit("notification",f)}_handleNotice(f){this.emit("notice",f)}getStartupConf(){var f=this.connectionParameters,_={user:f.user,database:f.database},S=f.application_name||f.fallback_application_name;return S&&(_.application_name=S),f.replication&&(_.replication=""+f.replication),f.statement_timeout&&(_.statement_timeout=String(parseInt(f.statement_timeout,10))),f.lock_timeout&&(_.lock_timeout=String(parseInt(f.lock_timeout,10))),f.idle_in_transaction_session_timeout&&(_.idle_in_transaction_session_timeout=String(parseInt(f.idle_in_transaction_session_timeout,10))),f.options&&(_.options=f.options),_}cancel(f,_){if(f.activeQuery===_){var S=this.connection;this.host&&this.host.indexOf("/")===0?S.connect(this.host+"/.s.PGSQL."+this.port):S.connect(this.port,this.host),S.on("connect",function(){S.cancel(f.processID,f.secretKey)})}else f.queryQueue.indexOf(_)!==-1&&f.queryQueue.splice(f.queryQueue.indexOf(_),1)}setTypeParser(f,_,S){return this._types.setTypeParser(f,_,S)}getTypeParser(f,_){return this._types.getTypeParser(f,_)}escapeIdentifier(f){return'"'+f.replace(/"/g,'""')+'"'}escapeLiteral(f){for(var _=!1,S="'",w=0;w<f.length;w++){var x=f[w];x==="'"?S+=x+x:x==="\\"?(S+=x+x,_=!0):S+=x}return S+="'",_===!0&&(S=" E"+S),S}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let f=this.activeQuery.submit(this.connection);f&&nt.nextTick(()=>{this.activeQuery.handleError(f,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(f,_,S){var w,x,I,N,$;if(f==null)throw new TypeError("Client was passed a null or undefined query");return typeof f.submit=="function"?(I=f.query_timeout||this.connectionParameters.query_timeout,x=w=f,typeof _=="function"&&(w.callback=w.callback||_)):(I=this.connectionParameters.query_timeout,w=new d(f,_,S),w.callback||(x=new this._Promise((O,R)=>{w.callback=(A,D)=>A?R(A):O(D)}))),I&&($=w.callback,N=setTimeout(()=>{var O=new Error("Query read timeout");nt.nextTick(()=>{w.handleError(O,this.connection)}),$(O),w.callback=()=>{};var R=this.queryQueue.indexOf(w);R>-1&&this.queryQueue.splice(R,1),this._pulseQueryQueue()},I),w.callback=(O,R)=>{clearTimeout(N),$(O,R)}),this.binary&&!w.binary&&(w.binary=!0),w._result&&!w._result._types&&(w._result._types=this._types),this._queryable?this._ending?(nt.nextTick(()=>{w.handleError(new Error("Client was closed and is not queryable"),this.connection)}),x):(this.queryQueue.push(w),this._pulseQueryQueue(),x):(nt.nextTick(()=>{w.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),x)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(f){if(this._ending=!0,!this.connection._connecting)if(f)f();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),f)this.connection.once("end",f);else return new this._Promise(_=>{this.connection.once("end",_)})}};P(h,"Client");var y=h;y.Query=d,e.exports=y}),EW=ot((t,e)=>{"use strict";Oe();var r=Vs().EventEmitter,n=P(function(){},"NOOP"),o=P((g,f)=>{let _=g.findIndex(f);return _===-1?void 0:g.splice(_,1)[0]},"removeWhere"),i=class{static{s(this,"Tn")}constructor(f,_,S){this.client=f,this.idleListener=_,this.timeoutId=S}};P(i,"IdleItem");var a=i,c=class{static{s(this,"Pn")}constructor(f){this.callback=f}};P(c,"PendingItem");var l=c;function d(){throw new Error("Release called on client which has already been released to the pool.")}s(d,"il"),P(d,"throwOnDoubleRelease");function p(g,f){if(f)return{callback:f,result:void 0};let _,S,w=P(function(I,N){I?_(I):S(N)},"cb"),x=new g(function(I,N){S=I,_=N}).catch(I=>{throw Error.captureStackTrace(I),I});return{callback:w,result:x}}s(p,"Dt"),P(p,"promisify");function m(g,f){return P(s(function _(S){S.client=f,f.removeListener("error",_),f.on("error",()=>{g.log("additional client error after disconnection due to error",S)}),g._remove(f),g.emit("error",S,f)},"t"),"idleListener")}s(m,"sl"),P(m,"makeIdleListener");var h=class extends r{static{s(this,"Bn")}constructor(f,_){super(),this.options=Object.assign({},f),f!=null&&"password"in f&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),f!=null&&f.ssl&&f.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||_||Pm().Client,this.Promise=this.options.Promise||xm.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(_=>{this._remove(_.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let f=this._pendingQueue.shift();if(this._idle.length){let _=this._idle.pop();clearTimeout(_.timeoutId);let S=_.client;S.ref&&S.ref();let w=_.idleListener;return this._acquireClient(S,f,w,!1)}if(!this._isFull())return this.newClient(f);throw new Error("unexpected condition")}_remove(f){let _=o(this._idle,S=>S.client===f);_!==void 0&&clearTimeout(_.timeoutId),this._clients=this._clients.filter(S=>S!==f),f.end(),this.emit("remove",f)}connect(f){if(this.ending){let w=new Error("Cannot use a pool after calling end on the pool");return f?f(w):this.Promise.reject(w)}let _=p(this.Promise,f),S=_.result;if(this._isFull()||this._idle.length){if(this._idle.length&&nt.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(_.callback)),S;let w=P((N,$,O)=>{clearTimeout(I),_.callback(N,$,O)},"queueCallback"),x=new l(w),I=setTimeout(()=>{o(this._pendingQueue,N=>N.callback===w),x.timedOut=!0,_.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return I.unref&&I.unref(),this._pendingQueue.push(x),S}return this.newClient(new l(_.callback)),S}newClient(f){let _=new this.Client(this.options);this._clients.push(_);let S=m(this,_);this.log("checking client timeout");let w,x=!1;this.options.connectionTimeoutMillis&&(w=setTimeout(()=>{this.log("ending client due to timeout"),x=!0,_.connection?_.connection.stream.destroy():_.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),_.connect(I=>{if(w&&clearTimeout(w),_.on("error",S),I)this.log("client failed to connect",I),this._clients=this._clients.filter(N=>N!==_),x&&(I=new Error("Connection terminated due to connection timeout",{cause:I})),this._pulseQueue(),f.timedOut||f.callback(I,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let N=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(_),this._idle.findIndex($=>$.client===_)!==-1&&this._acquireClient(_,new l(($,O,R)=>R()),S,!1)},this.options.maxLifetimeSeconds*1e3);N.unref(),_.once("end",()=>clearTimeout(N))}return this._acquireClient(_,f,S,!0)}})}_acquireClient(f,_,S,w){w&&this.emit("connect",f),this.emit("acquire",f),f.release=this._releaseOnce(f,S),f.removeListener("error",S),_.timedOut?w&&this.options.verify?this.options.verify(f,f.release):f.release():w&&this.options.verify?this.options.verify(f,x=>{if(x)return f.release(x),_.callback(x,void 0,n);_.callback(void 0,f,f.release)}):_.callback(void 0,f,f.release)}_releaseOnce(f,_){let S=!1;return w=>{S&&d(),S=!0,this._release(f,_,w)}}_release(f,_,S){if(f.on("error",_),f._poolUseCount=(f._poolUseCount||0)+1,this.emit("release",S,f),S||this.ending||!f._queryable||f._ending||f._poolUseCount>=this.options.maxUses){f._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(f),this._pulseQueue();return}if(this._expired.has(f)){this.log("remove expired client"),this._expired.delete(f),this._remove(f),this._pulseQueue();return}let w;this.options.idleTimeoutMillis&&this._isAboveMin()&&(w=setTimeout(()=>{this.log("remove idle client"),this._remove(f)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&w.unref()),this.options.allowExitOnIdle&&f.unref(),this._idle.push(new a(f,_,w)),this._pulseQueue()}query(f,_,S){if(typeof f=="function"){let x=p(this.Promise,f);return Bb(function(){return x.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),x.result}typeof _=="function"&&(S=_,_=void 0);let w=p(this.Promise,S);return S=w.callback,this.connect((x,I)=>{if(x)return S(x);let N=!1,$=P(O=>{N||(N=!0,I.release(O),S(O))},"onError");I.once("error",$),this.log("dispatching query");try{I.query(f,_,(O,R)=>{if(this.log("query dispatched"),I.removeListener("error",$),!N)return N=!0,I.release(O),O?S(O):S(void 0,R)})}catch(O){return I.release(O),S(O)}}),w.result}end(f){if(this.log("ending"),this.ending){let S=new Error("Called end on pool more than once");return f?f(S):this.Promise.reject(S)}this.ending=!0;let _=p(this.Promise,f);return this._endCallback=_.callback,this._pulseQueue(),_.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((f,_)=>f+(this._expired.has(_)?1:0),0)}get totalCount(){return this._clients.length}};P(h,"Pool");var y=h;e.exports=y}),W$={};oo(W$,{default:s(()=>Q$,"default")});kW=vn(()=>{"use strict";Oe(),Q$={}}),IW=ot((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),PW=ot((t,e)=>{"use strict";Oe();var r=Vs().EventEmitter,n=(Im(),$r(Vu)),o=km(),i=e.exports=function(c,l,d){r.call(this),c=o.normalizeQueryConfig(c,l,d),this.text=c.text,this.values=c.values,this.name=c.name,this.callback=c.callback,this.state="new",this._arrayMode=c.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(p){p==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,r);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(c){var l=this.native.pq.resultErrorFields();if(l)for(var d in l){var p=a[d]||d;c[p]=l[d]}this.callback?this.callback(c):this.emit("error",c),this.state="error"},i.prototype.then=function(c,l){return this._getPromise().then(c,l)},i.prototype.catch=function(c){return this._getPromise().catch(c)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(c,l){this._once("end",c),this._once("error",l)}.bind(this)),this._promise)},i.prototype.submit=function(c){this.state="running";var l=this;this.native=c.native,c.native.arrayMode=this._arrayMode;var d=P(function(h,y,g){if(c.native.arrayMode=!1,Bb(function(){l.emit("_done")}),h)return l.handleError(h);l._emitRowEvents&&(g.length>1?y.forEach((f,_)=>{f.forEach(S=>{l.emit("row",S,g[_])})}):y.forEach(function(f){l.emit("row",f,g)})),l.state="end",l.emit("end",g),l.callback&&l.callback(null,g)},"after");if(nt.domain&&(d=nt.domain.bind(d)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var p=(this.values||[]).map(o.prepareValue);if(c.namedQueries[this.name]){if(this.text&&c.namedQueries[this.name]!==this.text){let h=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return d(h)}return c.native.execute(this.name,p,d)}return c.native.prepare(this.name,this.text,p.length,function(h){return h?d(h):(c.namedQueries[l.name]=l.text,l.native.execute(l.name,p,d))})}else if(this.values){if(!Array.isArray(this.values)){let h=new Error("Query values must be an array");return d(h)}var m=this.values.map(o.prepareValue);c.native.query(this.text,m,d)}else c.native.query(this.text,d)}}),AW=ot((t,e)=>{"use strict";Oe();var r=(kW(),$r(W$)),n=Hb(),o=IW(),i=Vs().EventEmitter,a=(Im(),$r(Vu)),c=Wb(),l=PW(),d=e.exports=function(p){i.call(this),p=p||{},this._Promise=p.Promise||xm.Promise,this._types=new n(p.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var m=this.connectionParameters=new c(p);this.user=m.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:m.password}),this.database=m.database,this.host=m.host,this.port=m.port,this.namedQueries={}};d.Query=l,a.inherits(d,i),d.prototype._errorAllQueries=function(p){let m=P(h=>{nt.nextTick(()=>{h.native=this.native,h.handleError(p)})},"enqueueError");this._hasActiveQuery()&&(m(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(m),this._queryQueue.length=0},d.prototype._connect=function(p){var m=this;if(this._connecting){nt.nextTick(()=>p(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(h,y){if(h)return p(h);m.native.connect(y,function(g){if(g)return m.native.end(),p(g);m._connected=!0,m.native.on("error",function(f){m._queryable=!1,m._errorAllQueries(f),m.emit("error",f)}),m.native.on("notification",function(f){m.emit("notification",{channel:f.relname,payload:f.extra})}),m.emit("connect"),m._pulseQueryQueue(!0),p()})})},d.prototype.connect=function(p){if(p){this._connect(p);return}return new this._Promise((m,h)=>{this._connect(y=>{y?h(y):m()})})},d.prototype.query=function(p,m,h){var y,g,f,_,S;if(p==null)throw new TypeError("Client was passed a null or undefined query");if(typeof p.submit=="function")f=p.query_timeout||this.connectionParameters.query_timeout,g=y=p,typeof m=="function"&&(p.callback=m);else if(f=this.connectionParameters.query_timeout,y=new l(p,m,h),!y.callback){let w,x;g=new this._Promise((I,N)=>{w=I,x=N}),y.callback=(I,N)=>I?x(I):w(N)}return f&&(S=y.callback,_=setTimeout(()=>{var w=new Error("Query read timeout");nt.nextTick(()=>{y.handleError(w,this.connection)}),S(w),y.callback=()=>{};var x=this._queryQueue.indexOf(y);x>-1&&this._queryQueue.splice(x,1),this._pulseQueryQueue()},f),y.callback=(w,x)=>{clearTimeout(_),S(w,x)}),this._queryable?this._ending?(y.native=this.native,nt.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(y),this._pulseQueryQueue(),g):(y.native=this.native,nt.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},d.prototype.end=function(p){var m=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,p));var h;return p||(h=new this._Promise(function(y,g){p=P(f=>f?g(f):y(),"cb")})),this.native.end(function(){m._errorAllQueries(new Error("Connection terminated")),nt.nextTick(()=>{m.emit("end"),p&&p()})}),h},d.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},d.prototype._pulseQueryQueue=function(p){if(this._connected&&!this._hasActiveQuery()){var m=this._queryQueue.shift();if(!m){p||this.emit("drain");return}this._activeQuery=m,m.submit(this);var h=this;m.once("_done",function(){h._pulseQueryQueue()})}},d.prototype.cancel=function(p){this._activeQuery===p?this.native.cancel(function(){}):this._queryQueue.indexOf(p)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(p),1)},d.prototype.ref=function(){},d.prototype.unref=function(){},d.prototype.setTypeParser=function(p,m,h){return this._types.setTypeParser(p,m,h)},d.prototype.getTypeParser=function(p,m){return this._types.getTypeParser(p,m)}}),y$=ot((t,e)=>{"use strict";Oe(),e.exports=AW()}),Pm=ot((t,e)=>{"use strict";Oe();var r=TW(),n=Em(),o=K$(),i=EW(),{DatabaseError:a}=Z$(),c=P(d=>{var p;return p=class extends i{static{s(this,"e")}constructor(m){super(m,d)}},P(p,"BoundPool"),p},"poolFactory"),l=P(function(d){this.defaults=n,this.Client=d,this.Query=this.Client.Query,this.Pool=c(this.Client),this._pools=[],this.Connection=o,this.types=Tm(),this.DatabaseError=a},"PG");typeof nt.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new l(y$()):(e.exports=new l(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var d=null;try{d=new l(y$())}catch(p){if(p.code!=="MODULE_NOT_FOUND")throw p}return Object.defineProperty(e.exports,"native",{value:d}),d}}))});Oe();Oe();Bu();k$();Oe();CW=Object.defineProperty,OW=Object.defineProperties,$W=Object.getOwnPropertyDescriptors,v$=Object.getOwnPropertySymbols,RW=Object.prototype.hasOwnProperty,NW=Object.prototype.propertyIsEnumerable,_$=P((t,e,r)=>e in t?CW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),DW=P((t,e)=>{for(var r in e||(e={}))RW.call(e,r)&&_$(t,r,e[r]);if(v$)for(var r of v$(e))NW.call(e,r)&&_$(t,r,e[r]);return t},"__spreadValues"),jW=P((t,e)=>OW(t,$W(e)),"__spreadProps"),MW=1008e3,b$=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,zW=new TextDecoder,Qb=new TextEncoder,_m=Qb.encode("0123456789abcdef"),bm=Qb.encode("0123456789ABCDEF"),UW=Qb.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),X$=UW.slice();X$[62]=45;X$[63]=95;s(Y$,"Ea");P(Y$,"_toHex");s(eR,"Aa");P(eR,"_toHexChunked");s(tR,"Ei");P(tR,"toHex");Oe();rR=class nR{static{s(this,"gt")}constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:n}=this;for(let o=0,i=r.length;o<i;o++)if(e.query+=r[o],o<n.length){let a=n[o];if(a instanceof sR)e.query+=a.sql;else if(a instanceof Sm)if(a.queryData instanceof nR)a.queryData.toParameterizedQuery(e);else{if(a.queryData.params?.length)throw new Error("This query is not composable");e.query+=a.queryData.query}else{let{params:c}=e;c.push(a),e.query+="$"+c.length,(a instanceof Be||ArrayBuffer.isView(a))&&(e.query+="::bytea")}}return e}};P(rR,"SqlTemplate");oR=rR,iR=class{static{s(this,"Xt")}constructor(e){this.sql=e}};P(iR,"UnsafeRawSql");sR=iR;Oe();s(Xb,"bt");P(Xb,"warnIfBrowser");Bu();LW=Bs(Hb()),qW=Bs(km()),aR=class cR extends Error{static{s(this,"_t")}constructor(e){super(e),He(this,"name","NeonDbError"),He(this,"severity"),He(this,"code"),He(this,"detail"),He(this,"hint"),He(this,"position"),He(this,"internalPosition"),He(this,"internalQuery"),He(this,"where"),He(this,"schema"),He(this,"table"),He(this,"column"),He(this,"dataType"),He(this,"constraint"),He(this,"file"),He(this,"line"),He(this,"routine"),He(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,cR)}};P(aR,"NeonDbError");$a=aR,w$="transaction() expects an array of queries, or a function returning an array of queries",FW=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];s(uR,"Lu");P(uR,"encodeBuffersAsBytea");s(qb,"ss");P(qb,"prepareQuery");s(Zi,"cs");P(Zi,"neon");lR=class{static{s(this,"dr")}constructor(e,r,n){this.execute=e,this.queryData=r,this.opts=n}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};P(lR,"NeonQueryPromise");Sm=lR;s(Fb,"os");P(Fb,"processQueryResult");s(dR,"Fu");P(dR,"getAuthToken");Oe();BW=Bs(Pm());Oe();VW=Bs(Pm()),pR=class extends VW.Client{static{s(this,"kn")}constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||nt.env.PGHOST!==void 0,o=nt.env.USER??nt.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===o&&this.database===o&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${o}, db: ${o}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),a=r.pipelineTLS&&this.ssl,c=r.pipelineConnect==="password";if(!a&&!r.pipelineConnect)return i;let l=this.connection;if(a&&l.on("connect",()=>l.stream.emit("data","S")),c){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let d=this.ssl?"sslconnect":"connect";l.on(d,()=>{this.neonConfig.disableWarningInBrowsers||Xb(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,n=this.saslSession,o=this.password,i=e.data;if(n.message!=="SASLInitialResponse"||typeof o!="string"||typeof i!="string")throw new Error("SASL: protocol error");let a=Object.fromEntries(i.split(",").map(we=>{if(!/^.=/.test(we))throw new Error("SASL: Invalid attribute pair entry");let Ee=we[0],rt=we.substring(2);return[Ee,rt]})),c=a.r,l=a.s,d=a.i;if(!c||!/^[!-+--~]+$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!d||!/^[1-9][0-9]*$/.test(d))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!c.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(c.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let p=parseInt(d,10),m=Be.from(l,"base64"),h=new TextEncoder,y=h.encode(o),g=await r.importKey("raw",y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),f=new Uint8Array(await r.sign("HMAC",g,Be.concat([m,Be.from([0,0,0,1])]))),_=f;for(var S=0;S<p-1;S++)f=new Uint8Array(await r.sign("HMAC",g,f)),_=Be.from(_.map((we,Ee)=>_[Ee]^f[Ee]));let w=_,x=await r.importKey("raw",w,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),I=new Uint8Array(await r.sign("HMAC",x,h.encode("Client Key"))),N=await r.digest("SHA-256",I),$="n=*,r="+n.clientNonce,O="r="+c+",s="+l+",i="+p,R="c=biws,r="+c,A=$+","+O+","+R,D=await r.importKey("raw",N,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var M=new Uint8Array(await r.sign("HMAC",D,h.encode(A))),Q=Be.from(I.map((we,Ee)=>I[Ee]^M[Ee])),Z=Q.toString("base64");let F=await r.importKey("raw",w,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),ee=await r.sign("HMAC",F,h.encode("Server Key")),ne=await r.importKey("raw",ee,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var se=Be.from(await r.sign("HMAC",ne,h.encode(A)));n.message="SASLResponse",n.serverSignature=se.toString("base64"),n.response=R+",p="+Z,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};P(pR,"NeonClient");HW=pR;Bu();ZW=Bs(Wb());s(mR,"vl");P(mR,"promisify");fR=class extends BW.Pool{static{s(this,"Un")}constructor(){super(...arguments),He(this,"Client",HW),He(this,"hasFetchUnsupportedListeners",!1),He(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!Fs.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,n);typeof r=="function"&&(n=r,r=void 0);let o=mR(this.Promise,n);n=o.callback;try{let i=new ZW.default(this.options),a=encodeURIComponent,c=encodeURI,l=`postgresql://${a(i.user)}:${a(i.password)}@${a(i.host)}/${c(i.database)}`,d=typeof e=="string"?e:e.text,p=r??e.values??[];Zi(l,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(d,p,{types:e.types??this.options?.types}).then(m=>n(void 0,m)).catch(m=>n(m))}catch(i){n(i)}return o.result}};P(fR,"NeonPool");di=fR;Bu();Hu=Bs(Pm()),GIe=Hu.DatabaseError,KIe=Hu.defaults,WIe=Hu.escapeIdentifier,QIe=Hu.escapeLiteral,Wt=Hu.types;});var Nt,Ji=b(()=>{nm();Io();he();or();no();oi();Nt=class t{static{s(this,"SelectionProxyHandler")}static[j]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===Gt)return{...e[Gt],selectedFields:new Proxy(e[Gt].selectedFields,this)};if(typeof r=="symbol")return e[r];let o=(te(e,sr)?e._.selectedFields:te(e,Wr)?e[Gt].selectedFields:e)[r];if(te(o,be.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;let i=o.clone();return i.isSelectionField=!0,i}if(te(o,be)){if(this.config.sqlBehavior==="sql")return o;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return te(o,Ut)?this.config.alias?new Proxy(o,new Ls(new Proxy(o.table,new Ea(this.config.alias,this.config.replaceOriginalName??!1)))):o:typeof o!="object"||o===null?o:new Proxy(o,new t(this.config))}}});var hR,Yb,gR=b(()=>{he();hR=class{static{s(this,"CheckBuilder")}constructor(e,r){this.name=e,this.value=r}static[j]="PgCheckBuilder";brand;build(e){return new Yb(e,this)}},Yb=class{static{s(this,"Check")}constructor(e,r){this.table=e,this.name=r.name,this.value=r.value}static[j]="PgCheck";name;value}});var Am=b(()=>{zv();Bv();Zv();Kv();Xv();ft();t_();o_();a_();tm();l_();Au();m_();g_();v_();b_();E_();P_();O_();z_();B_();K_();X_();tb();ob();ab();lb();pb();hb();yb();bb();xb();kb();Ab();$b()});function rw(t){return new ew(!0,t)}var ew,Ju,tw,yR=b(()=>{or();he();Am();ew=class{static{s(this,"IndexBuilderOn")}constructor(e,r){this.unique=e,this.name=r}static[j]="PgIndexBuilderOn";on(...e){return new Ju(e.map(r=>{if(te(r,be))return r;r=r;let n=new xa(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Ju(e.map(r=>{if(te(r,be))return r;r=r;let n=new xa(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new Ju(r.map(n=>{if(te(n,be))return n;n=n;let o=new xa(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),o}),this.unique,!0,this.name,e)}},Ju=class{static{s(this,"IndexBuilder")}static[j]="PgIndexBuilder";config;constructor(e,r,n,o,i="btree"){this.config={name:o,columns:e,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new tw(this.config,e)}},tw=class{static{s(this,"Index")}static[j]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};s(rw,"uniqueIndex")});var vR,_R=b(()=>{he();vR=class{static{s(this,"PgPolicy")}constructor(e,r){this.name=e,r&&(this.as=r.as,this.for=r.for,this.to=r.to,this.using=r.using,this.withCheck=r.withCheck)}static[j]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(e){return this._linkedTable=e,this}}});var nw,ow=b(()=>{nw=Symbol.for("drizzle:PgViewConfig")});function JW(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}function GW(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,n,o)=>{let i=o===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return r+i},"")}function KW(t){return t}var Cm,bR=b(()=>{he();Kr();s(JW,"toSnakeCase");s(GW,"toCamelCase");s(KW,"noopCase");Cm=class{static{s(this,"CasingCache")}static[j]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?JW:e==="camelCase"?GW:KW}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[ge.Symbol.Schema]??"public",n=e.table[ge.Symbol.OriginalName],o=`${r}.${n}.${e.name}`;return this.cache[o]||this.cacheTable(e.table),this.cache[o]}cacheTable(e){let r=e[ge.Symbol.Schema]??"public",n=e[ge.Symbol.OriginalName],o=`${r}.${n}`;if(!this.cachedTables[o]){for(let i of Object.values(e[ge.Symbol.Columns])){let a=`${o}.${i.name}`;this.cache[a]=this.convert(i.name)}this.cachedTables[o]=!0}}clearCache(){this.cache={},this.cachedTables={}}}});var pi,Om=b(()=>{he();or();pi=class extends Wr{static{s(this,"PgViewBase")}static[j]="PgViewBase"}});var Co,Gu=b(()=>{nm();bR();Io();he();im();Am();Bi();Oa();vm();or();no();Kr();kt();oi();Om();Co=class{static{s(this,"PgDialect")}static[j]="PgDialect";casing;constructor(e){this.casing=new Cm(e?.casing)}async migrate(e,r,n){let o=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",a=z`
			CREATE TABLE IF NOT EXISTS ${z.identifier(i)}.${z.identifier(o)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(z`CREATE SCHEMA IF NOT EXISTS ${z.identifier(i)}`),await r.execute(a);let l=(await r.all(z`select id, hash, created_at from ${z.identifier(i)}.${z.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async d=>{for await(let p of e)if(!l||Number(l.created_at)<p.folderMillis){for(let m of p.sql)await d.execute(z.raw(m));await d.execute(z`insert into ${z.identifier(i)}.${z.identifier(o)} ("hash", "created_at") values(${p.hash}, ${p.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[z`with `];for(let[n,o]of e.entries())r.push(z`${z.identifier(o._.alias)} as (${o._.sql})`),n<e.length-1&&r.push(z`, `);return r.push(z` `),z.join(r)}buildDeleteQuery({table:e,where:r,returning:n,withList:o}){let i=this.buildWithCTE(o),a=n?z` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,c=r?z` where ${r}`:void 0;return z`${i}delete from ${e}${c}${a}`}buildUpdateSet(e,r){let n=e[ge.Symbol.Columns],o=Object.keys(n).filter(a=>r[a]!==void 0||n[a]?.onUpdateFn!==void 0),i=o.length;return z.join(o.flatMap((a,c)=>{let l=n[a],d=r[a]??z.param(l.onUpdateFn(),l),p=z`${z.identifier(this.casing.getColumnCasing(l))} = ${d}`;return c<i-1?[p,z.raw(", ")]:[p]}))}buildUpdateQuery({table:e,set:r,where:n,returning:o,withList:i,from:a,joins:c}){let l=this.buildWithCTE(i),d=e[xr.Symbol.Name],p=e[xr.Symbol.Schema],m=e[xr.Symbol.OriginalName],h=d===m?void 0:d,y=z`${p?z`${z.identifier(p)}.`:void 0}${z.identifier(m)}${h&&z` ${z.identifier(h)}`}`,g=this.buildUpdateSet(e,r),f=a&&z.join([z.raw(" from "),this.buildFromTable(a)]),_=this.buildJoins(c),S=o?z` returning ${this.buildSelection(o,{isSingleTable:!a})}`:void 0,w=n?z` where ${n}`:void 0;return z`${l}update ${y} set ${g}${f}${_}${w}${S}`}buildSelection(e,{isSingleTable:r=!1}={}){let n=e.length,o=e.flatMap(({field:i},a)=>{let c=[];if(te(i,be.Aliased)&&i.isSelectionField)c.push(z.identifier(i.fieldAlias));else if(te(i,be.Aliased)||te(i,be)){let l=te(i,be.Aliased)?i.sql:i;r?c.push(new be(l.queryChunks.map(d=>te(d,fe)?z.identifier(this.casing.getColumnCasing(d)):d))):c.push(l),te(i,be.Aliased)&&c.push(z` as ${z.identifier(i.fieldAlias)}`)}else te(i,Ut)&&(r?c.push(z.identifier(this.casing.getColumnCasing(i))):c.push(i));return a<n-1&&c.push(z`, `),c});return z.join(o)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[n,o]of e.entries()){n===0&&r.push(z` `);let i=o.table,a=o.lateral?z` lateral`:void 0,c=o.on?z` on ${o.on}`:void 0;if(te(i,xr)){let l=i[xr.Symbol.Name],d=i[xr.Symbol.Schema],p=i[xr.Symbol.OriginalName],m=l===p?void 0:o.alias;r.push(z`${z.raw(o.joinType)} join${a} ${d?z`${z.identifier(d)}.`:void 0}${z.identifier(p)}${m&&z` ${z.identifier(m)}`}${c}`)}else if(te(i,Wr)){let l=i[Gt].name,d=i[Gt].schema,p=i[Gt].originalName,m=l===p?void 0:o.alias;r.push(z`${z.raw(o.joinType)} join${a} ${d?z`${z.identifier(d)}.`:void 0}${z.identifier(p)}${m&&z` ${z.identifier(m)}`}${c}`)}else r.push(z`${z.raw(o.joinType)} join${a} ${i}${c}`);n<e.length-1&&r.push(z` `)}return z.join(r)}buildFromTable(e){if(te(e,ge)&&e[ge.Symbol.IsAlias]){let r=z`${z.identifier(e[ge.Symbol.OriginalName])}`;return e[ge.Symbol.Schema]&&(r=z`${z.identifier(e[ge.Symbol.Schema])}.${r}`),z`${r} ${z.identifier(e[ge.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:n,where:o,having:i,table:a,joins:c,orderBy:l,groupBy:d,limit:p,offset:m,lockingClause:h,distinct:y,setOperators:g}){let f=n??Bn(r);for(let F of f)if(te(F.field,Ut)&&hn(F.field.table)!==(te(a,sr)?a._.alias:te(a,pi)?a[Gt].name:te(a,be)?void 0:hn(a))&&!(ee=>c?.some(({alias:ne})=>ne===(ee[ge.Symbol.IsAlias]?hn(ee):ee[ge.Symbol.BaseName])))(F.field.table)){let ee=hn(F.field.table);throw new Error(`Your "${F.path.join("->")}" field references a column "${ee}"."${F.field.name}", but the table "${ee}" is not part of the query! Did you forget to join it?`)}let _=!c||c.length===0,S=this.buildWithCTE(e),w;y&&(w=y===!0?z` distinct`:z` distinct on (${z.join(y.on,z`, `)})`);let x=this.buildSelection(f,{isSingleTable:_}),I=this.buildFromTable(a),N=this.buildJoins(c),$=o?z` where ${o}`:void 0,O=i?z` having ${i}`:void 0,R;l&&l.length>0&&(R=z` order by ${z.join(l,z`, `)}`);let A;d&&d.length>0&&(A=z` group by ${z.join(d,z`, `)}`);let D=typeof p=="object"||typeof p=="number"&&p>=0?z` limit ${p}`:void 0,M=m?z` offset ${m}`:void 0,Q=z.empty();if(h){let F=z` for ${z.raw(h.strength)}`;h.config.of&&F.append(z` of ${z.join(Array.isArray(h.config.of)?h.config.of:[h.config.of],z`, `)}`),h.config.noWait?F.append(z` nowait`):h.config.skipLocked&&F.append(z` skip locked`),Q.append(F)}let Z=z`${S}select${w} ${x} from ${I}${N}${$}${A}${O}${R}${D}${M}${Q}`;return g.length>0?this.buildSetOperations(Z,g):Z}buildSetOperations(e,r){let[n,...o]=r;if(!n)throw new Error("Cannot pass undefined values to any set operator");return o.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),o)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:n,rightSelect:o,limit:i,orderBy:a,offset:c}}){let l=z`(${e.getSQL()}) `,d=z`(${o.getSQL()})`,p;if(a&&a.length>0){let g=[];for(let f of a)if(te(f,fe))g.push(z.identifier(f.name));else if(te(f,be)){for(let _=0;_<f.queryChunks.length;_++){let S=f.queryChunks[_];te(S,fe)&&(f.queryChunks[_]=z.identifier(S.name))}g.push(z`${f}`)}else g.push(z`${f}`);p=z` order by ${z.join(g,z`, `)} `}let m=typeof i=="object"||typeof i=="number"&&i>=0?z` limit ${i}`:void 0,h=z.raw(`${r} ${n?"all ":""}`),y=c?z` offset ${c}`:void 0;return z`${l}${h}${d}${p}${m}${y}`}buildInsertQuery({table:e,values:r,onConflict:n,returning:o,withList:i,select:a,overridingSystemValue_:c}){let l=[],d=e[ge.Symbol.Columns],p=Object.entries(d).filter(([S,w])=>!w.shouldDisableInsert()),m=p.map(([,S])=>z.identifier(this.casing.getColumnCasing(S)));if(a){let S=r;te(S,be)?l.push(S):l.push(S.getSQL())}else{let S=r;l.push(z.raw("values "));for(let[w,x]of S.entries()){let I=[];for(let[N,$]of p){let O=x[N];if(O===void 0||te(O,gn)&&O.value===void 0)if($.defaultFn!==void 0){let R=$.defaultFn(),A=te(R,be)?R:z.param(R,$);I.push(A)}else if(!$.default&&$.onUpdateFn!==void 0){let R=$.onUpdateFn(),A=te(R,be)?R:z.param(R,$);I.push(A)}else I.push(z`default`);else I.push(O)}l.push(I),w<S.length-1&&l.push(z`, `)}}let h=this.buildWithCTE(i),y=z.join(l),g=o?z` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,f=n?z` on conflict ${n}`:void 0,_=c===!0?z`overriding system value `:void 0;return z`${h}insert into ${e} ${m} ${_}${y}${f}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:n}){let o=r?z` concurrently`:void 0,i=n?z` with no data`:void 0;return z`refresh materialized view${o} ${e}${i}`}prepareTyping(e){return te(e,Ru)||te(e,$u)?"json":te(e,Nu)?"decimal":te(e,Du)?"time":te(e,ju)||te(e,Mu)?"timestamp":te(e,Cu)||te(e,Ou)?"date":te(e,zu)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:o,tableConfig:i,queryConfig:a,tableAlias:c,nestedQueryRelation:l,joinOn:d}){let p=[],m,h,y=[],g,f=[];if(a===!0)p=Object.entries(i.columns).map(([w,x])=>({dbKey:x.name,tsKey:w,field:Po(x,c),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let S=Object.fromEntries(Object.entries(i.columns).map(([O,R])=>[O,Po(R,c)]));if(a.where){let O=typeof a.where=="function"?a.where(S,u$()):a.where;g=O&&Eu(O,c)}let w=[],x=[];if(a.columns){let O=!1;for(let[R,A]of Object.entries(a.columns))A!==void 0&&R in i.columns&&(!O&&A===!0&&(O=!0),x.push(R));x.length>0&&(x=O?x.filter(R=>a.columns?.[R]===!0):Object.keys(i.columns).filter(R=>!x.includes(R)))}else x=Object.keys(i.columns);for(let O of x){let R=i.columns[O];w.push({tsKey:O,value:R})}let I=[];a.with&&(I=Object.entries(a.with).filter(O=>!!O[1]).map(([O,R])=>({tsKey:O,queryConfig:R,relation:i.relations[O]})));let N;if(a.extras){N=typeof a.extras=="function"?a.extras(S,{sql:z}):a.extras;for(let[O,R]of Object.entries(N))w.push({tsKey:O,value:$v(R,c)})}for(let{tsKey:O,value:R}of w)p.push({dbKey:te(R,be.Aliased)?R.fieldAlias:i.columns[O].name,tsKey:O,field:te(R,Ut)?Po(R,c):R,relationTableTsKey:void 0,isJson:!1,selection:[]});let $=typeof a.orderBy=="function"?a.orderBy(S,l$()):a.orderBy??[];Array.isArray($)||($=[$]),y=$.map(O=>te(O,Ut)?Po(O,c):Eu(O,c)),m=a.limit,h=a.offset;for(let{tsKey:O,queryConfig:R,relation:A}of I){let D=d$(r,n,A),M=Us(A.referencedTable),Q=n[M],Z=`${c}_${O}`,F=Ie(...D.fields.map((se,we)=>J(Po(D.references[we],Z),Po(se,c)))),ee=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:n,table:e[Q],tableConfig:r[Q],queryConfig:te(A,Hi)?R===!0?{limit:1}:{...R,limit:1}:R,tableAlias:Z,joinOn:F,nestedQueryRelation:A}),ne=z`${z.identifier(Z)}.${z.identifier("data")}`.as(O);f.push({on:z`true`,table:new sr(ee.sql,{},Z),alias:Z,joinType:"left",lateral:!0}),p.push({dbKey:O,tsKey:O,field:ne,relationTableTsKey:Q,isJson:!0,selection:ee.selection})}}if(p.length===0)throw new ku({message:`No fields selected for table "${i.tsName}" ("${c}")`});let _;if(g=Ie(d,g),l){let S=z`json_build_array(${z.join(p.map(({field:I,tsKey:N,isJson:$})=>$?z`${z.identifier(`${c}_${N}`)}.${z.identifier("data")}`:te(I,be.Aliased)?I.sql:I),z`, `)})`;te(l,Uu)&&(S=z`coalesce(json_agg(${S}${y.length>0?z` order by ${z.join(y,z`, `)}`:void 0}), '[]'::json)`);let w=[{dbKey:"data",tsKey:"data",field:S.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];m!==void 0||h!==void 0||y.length>0?(_=this.buildSelectQuery({table:Tu(o,c),fields:{},fieldsFlat:[{path:[],field:z.raw("*")}],where:g,limit:m,offset:h,orderBy:y,setOperators:[]}),g=void 0,m=void 0,h=void 0,y=[]):_=Tu(o,c),_=this.buildSelectQuery({table:te(_,xr)?_:new sr(_,{},c),fields:{},fieldsFlat:w.map(({field:I})=>({path:[],field:te(I,Ut)?Po(I,c):I})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]})}else _=this.buildSelectQuery({table:Tu(o,c),fields:{},fieldsFlat:p.map(({field:S})=>({path:[],field:te(S,Ut)?Po(S,c):S})),joins:f,where:g,limit:m,offset:h,orderBy:y,setOperators:[]});return{tableTsKey:i.tsName,sql:_,selection:p}}}});var $m,wR=b(()=>{he();$m=class{static{s(this,"TypedQueryBuilder")}static[j]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}});function Na(t,e){return(r,n,...o)=>{let i=[n,...o].map(a=>({type:t,isAll:e,rightSelect:a}));for(let a of i)if(!Iu(r.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}var Zr,iw,Rm,WW,QW,XW,YW,eQ,tQ,rQ,sw=b(()=>{he();Om();wR();ai();Ji();or();no();Kr();qi();kt();kt();oi();Da();Zr=class{static{s(this,"PgSelectBuilder")}static[j]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,n=e,o;return this.fields?o=this.fields:te(n,sr)?o=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):te(n,pi)?o=n[Gt].selectedFields:te(n,be)?o={}:o=Pu(n),new Rm({table:n,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},iw=class extends $m{static{s(this,"PgSelectQueryBuilderBase")}static[j]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:n,session:o,dialect:i,withList:a,distinct:c}){super(),this.config={withList:a,table:e,fields:{...r},distinct:c,setOperators:[]},this.isPartialSelect=n,this.session=o,this.dialect=i,this._={selectedFields:r,config:this.config},this.tableName=ci(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let l of io(e))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(n,o)=>{let i=this.tableName,a=ci(n);for(let c of io(n))this.usedTables.add(c);if(typeof a=="string"&&this.config.joins?.some(c=>c.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof a=="string"&&!te(n,be))){let c=te(n,sr)?n._.selectedFields:te(n,Wr)?n[Gt].selectedFields:n[ge.Symbol.Columns];this.config.fields[a]=c}if(typeof o=="function"&&(o=o(new Proxy(this.config.fields,new Nt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:n,joinType:e,alias:a,lateral:r}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([c])=>[c,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return n=>{let o=typeof n=="function"?n(WW()):n;if(!Iu(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Nt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Nt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Nt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Nt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...io(this.config.table)),this.config.joins)for(let n of this.config.joins)r.push(...io(n.table));return new Proxy(new sr(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new Nt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Nt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},Rm=class extends iw{static{s(this,"PgSelectBase")}static[j]="PgSelect";_prepare(e){let{session:r,config:n,dialect:o,joinsNotNullableMap:i,authToken:a,cacheConfig:c,usedTables:l}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:d}=n;return wr.startActiveSpan("drizzle.prepareQuery",()=>{let p=Bn(d),m=r.prepareQuery(o.sqlToQuery(this.getSQL()),p,e,!0,void 0,{type:"select",tables:[...l]},c);return m.joinsNotNullableMap=i,m.setToken(a)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>wr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")};_O(Rm,[Br]);s(Na,"createSetOperator");WW=s(()=>({union:QW,unionAll:XW,intersect:YW,intersectAll:eQ,except:tQ,exceptAll:rQ}),"getPgSetOperators"),QW=Na("union",!1),XW=Na("union",!0),YW=Na("intersect",!1),eQ=Na("intersect",!0),tQ=Na("except",!1),rQ=Na("except",!0)});var mi,Nm=b(()=>{he();Gu();Ji();no();sw();mi=class{static{s(this,"QueryBuilder")}static[j]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=te(e,Co)?e:void 0,this.dialectConfig=te(e,Co)?void 0:e}$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(n)),new Proxy(new Ta(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Nt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");with(...e){let r=this;function n(a){return new Zr({fields:a??void 0,session:void 0,dialect:r.getDialect(),withList:e})}s(n,"select");function o(a){return new Zr({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}s(o,"selectDistinct");function i(a,c){return new Zr({fields:c??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:a}})}return s(i,"selectDistinctOn"),{select:n,selectDistinct:o,selectDistinctOn:i}}select(e){return new Zr({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Zr({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Zr({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Co(this.dialectConfig)),this.dialect}}});function xR(t,e,r){return e?new cw(t,e,r):new aw(t,r)}function TR(t,e,r){return e?new lw(t,e,r):new uw(t,r)}var Dm,aw,cw,jm,uw,lw,Ku,SR,Wu,dw=b(()=>{he();Ji();kt();Nm();Bi();Om();ow();Dm=class{static{s(this,"DefaultViewBuilderCore")}constructor(e,r){this.name=e,this.schema=r}static[j]="PgDefaultViewBuilderCore";config={};with(e){return this.config.with=e,this}},aw=class extends Dm{static{s(this,"ViewBuilder")}static[j]="PgViewBuilder";as(e){typeof e=="function"&&(e=e(new mi));let r=new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),r);return new Proxy(new Ku({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),r)}},cw=class extends Dm{static{s(this,"ManualViewBuilder")}static[j]="PgManualViewBuilder";columns;constructor(e,r,n){super(e,n),this.columns=Pu(ke(e,r))}existing(){return new Proxy(new Ku({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new Ku({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}},jm=class{static{s(this,"MaterializedViewBuilderCore")}constructor(e,r){this.name=e,this.schema=r}static[j]="PgMaterializedViewBuilderCore";config={};using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}},uw=class extends jm{static{s(this,"MaterializedViewBuilder")}static[j]="PgMaterializedViewBuilder";as(e){typeof e=="function"&&(e=e(new mi));let r=new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),r);return new Proxy(new Wu({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),r)}},lw=class extends jm{static{s(this,"ManualMaterializedViewBuilder")}static[j]="PgManualMaterializedViewBuilder";columns;constructor(e,r,n){super(e,n),this.columns=Pu(ke(e,r))}existing(){return new Proxy(new Wu({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new Wu({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new Nt({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}},Ku=class extends pi{static{s(this,"PgView")}static[j]="PgView";[nw];constructor({pgConfig:e,config:r}){super(r),e&&(this[nw]={with:e.with})}},SR=Symbol.for("drizzle:PgMaterializedViewConfig"),Wu=class extends pi{static{s(this,"PgMaterializedView")}static[j]="PgMaterializedView";[SR];constructor({pgConfig:e,config:r}){super(r),this[SR]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}};s(xR,"pgViewWithSchema");s(TR,"pgMaterializedViewWithSchema")});function io(t){return te(t,xr)?[t[zs]?`${t[zs]}.${t[ge.Symbol.BaseName]}`:t[ge.Symbol.BaseName]]:te(t,sr)?t._.usedTables??[]:te(t,be)?t.usedTables??[]:[]}var Da=b(()=>{he();Bi();or();no();Kr();s(io,"extractUsedTable")});var Qu,ER=b(()=>{he();ai();Ji();Kr();qi();kt();Da();Qu=class extends Br{static{s(this,"PgDeleteBase")}constructor(e,r,n,o){super(),this.session=r,this.dialect=n,this.config={table:e,withList:o}}static[j]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[ge.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Bn(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return wr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:io(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>wr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Nt({alias:hn(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var Xu,Mm,kR=b(()=>{he();ai();Ji();or();Kr();qi();kt();Da();Nm();Xu=class{static{s(this,"PgInsertBuilder")}constructor(e,r,n,o,i){this.table=e,this.session=r,this.dialect=n,this.withList=o,this.overridingSystemValue_=i}static[j]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(n=>{let o={},i=this.table[ge.Symbol.Columns];for(let a of Object.keys(n)){let c=n[a];o[a]=te(c,be)?c:new gn(c,i[a])}return o});return new Mm(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new mi):e;if(!te(r,be)&&!Iu(this.table[rm],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Mm(this.table,r,this.session,this.dialect,this.withList,!0)}},Mm=class extends Br{static{s(this,"PgInsertBase")}constructor(e,r,n,o,i,a,c){super(),this.session=n,this.dialect=o,this.config={table:e,values:r,withList:i,select:a,overridingSystemValue_:c}}static[j]="PgInsert";config;cacheConfig;returning(e=this.config.table[ge.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Bn(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=z`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?z` where ${e.where}`:void 0;this.config.onConflict=z`(${z.raw(r)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?z` where ${e.where}`:void 0,n=e.targetWhere?z` where ${e.targetWhere}`:void 0,o=e.setWhere?z` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,am(this.config.table,e.set)),a="";return a=Array.isArray(e.target)?e.target.map(c=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(c))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=z`(${z.raw(a)})${n} do update set ${i}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return wr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:io(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>wr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Nt({alias:hn(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var zm,pw=b(()=>{he();ai();qi();zm=class extends Br{static{s(this,"PgRefreshMaterializedView")}constructor(e,r,n){super(),this.session=r,this.dialect=n,this.config={view:e}}static[j]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return wr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>wr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken)),"execute")}});var IR=b(()=>{});var Yu,mw,PR=b(()=>{he();Bi();ai();Ji();or();no();Kr();kt();oi();Da();Yu=class{static{s(this,"PgUpdateBuilder")}constructor(e,r,n,o){this.table=e,this.session=r,this.dialect=n,this.withList=o}static[j]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new mw(this.table,am(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},mw=class extends Br{static{s(this,"PgUpdateBase")}constructor(e,r,n,o,i){super(),this.session=n,this.dialect=o,this.config={set:r,table:e,withList:i,joins:[]},this.tableName=ci(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[j]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,n=ci(r);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=r,this}getTableLikeFields(e){return te(e,xr)?e[ge.Symbol.Columns]:te(e,sr)?e._.selectedFields:e[Gt].selectedFields}createJoin(e){return(r,n)=>{let o=ci(r);if(typeof o=="string"&&this.config.joins.some(i=>i.alias===o))throw new Error(`Alias "${o}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!te(this.config.from,be)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[ge.Symbol.Columns],new Nt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new Nt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:r,joinType:e,alias:o}),typeof o=="string")switch(e){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[ge.Symbol.Columns]),this.config.from)){let r=ci(this.config.from);if(typeof r=="string"&&this.config.from&&!te(this.config.from,be)){let n=this.getTableLikeFields(this.config.from);e[r]=n}for(let n of this.config.joins){let o=ci(n.table);if(typeof o=="string"&&!te(n.table,be)){let i=this.getTableLikeFields(n.table);e[o]=i}}}return this.config.returningFields=e,this.config.returning=Bn(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:io(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=s(e=>this._prepare().execute(e,this.authToken),"execute");getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Nt({alias:hn(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var fw=b(()=>{ER();kR();Nm();pw();sw();IR();PR()});var Um,AR=b(()=>{he();or();Um=class t extends be{static{s(this,"PgCountBuilder")}constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[j]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return z`(select count(*) from ${e}${z.raw(" where ").if(r)}${r})`}static buildCount(e,r){return z`select count(*) as count from ${e}${z.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}}});var Lm,qm,CR=b(()=>{he();ai();Oa();qi();Lm=class{static{s(this,"RelationalQueryBuilder")}constructor(e,r,n,o,i,a,c){this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c}static[j]="PgRelationalQueryBuilder";findMany(e){return new qm(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new qm(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},qm=class extends Br{static{s(this,"PgRelationalQuery")}constructor(e,r,n,o,i,a,c,l,d){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=n,this.table=o,this.tableConfig=i,this.dialect=a,this.session=c,this.config=l,this.mode=d}static[j]="PgRelationalQuery";_prepare(e){return wr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(o,i)=>{let a=o.map(c=>fm(this.schema,this.tableConfig,c,r.selection,i));return this.mode==="first"?a[0]:a})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return wr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}});var Fm,OR=b(()=>{he();ai();Fm=class extends Br{static{s(this,"PgRaw")}constructor(e,r,n,o){super(),this.execute=e,this.sql=r,this.query=n,this.mapBatchResult=o}static[j]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}});var Gi,el=b(()=>{he();fw();Ji();or();no();AR();CR();OR();pw();Gi=class{static{s(this,"PgDatabase")}constructor(e,r,n){if(this.dialect=e,this.session=r,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,i]of Object.entries(this._.schema))this.query[o]=new Lm(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[o],i,e,r);this.$cache={invalidate:s(async o=>{},"invalidate")}}static[j]="PgDatabase";query;$with=s((e,r)=>{let n=this;return{as:s(i=>(typeof i=="function"&&(i=i(new mi(n.dialect))),new Proxy(new Ta(i.getSQL(),r??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Nt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))),"as")}},"$with");$count(e,r){return new Um({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function n(d){return new Zr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e})}s(n,"select");function o(d){return new Zr({fields:d??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}s(o,"selectDistinct");function i(d,p){return new Zr({fields:p??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:d}})}s(i,"selectDistinctOn");function a(d){return new Yu(d,r.session,r.dialect,e)}s(a,"update");function c(d){return new Xu(d,r.session,r.dialect,e)}s(c,"insert");function l(d){return new Qu(d,r.session,r.dialect,e)}return s(l,"delete_"),{select:n,selectDistinct:o,selectDistinctOn:i,update:a,insert:c,delete:l}}select(e){return new Zr({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Zr({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Zr({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Yu(e,this.session,this.dialect)}insert(e){return new Xu(e,this.session,this.dialect)}delete(e){return new Qu(e,this.session,this.dialect)}refreshMaterializedView(e){return new zm(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?z.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(n,void 0,void 0,!1);return new Fm(()=>o.execute(void 0,this.authToken),r,n,i=>o.mapResult(i,!0))}transaction(e,r){return this.session.transaction(e,r)}}});async function gw(t,e){let r=`${t}-${JSON.stringify(e)}`,o=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",o);return[...new Uint8Array(i)].map(l=>l.toString(16).padStart(2,"0")).join("")}var hw,Ki,Bm=b(()=>{he();hw=class{static{s(this,"Cache")}static[j]="Cache"},Ki=class extends hw{static{s(this,"NoopCache")}strategy(){return"all"}static[j]="NoopCache";async get(e){}async put(e,r,n,o){}async onMutate(e){}};s(gw,"hashQuery")});var $R=b(()=>{Bm()});var RR=b(()=>{});var NR,DR=b(()=>{he();NR=class{static{s(this,"PgRole")}constructor(e,r){this.name=e,r&&(this.createDb=r.createDb,this.createRole=r.createRole,this.inherit=r.inherit)}static[j]="PgRole";_existing;createDb;createRole;inherit;existing(){return this._existing=!0,this}}});function jR(t,e,r){return new yw(t,e,r)}var yw,vw=b(()=>{he();yw=class{static{s(this,"PgSequence")}constructor(e,r,n){this.seqName=e,this.seqOptions=r,this.schema=n}static[j]="PgSequence"};s(jR,"pgSequenceWithSchema")});var MR,zR=b(()=>{he();or();tm();vw();Bi();dw();MR=class{static{s(this,"PgSchema")}constructor(e){this.schemaName=e}static[j]="PgSchema";table=s((e,r,n)=>Nb(e,r,n,this.schemaName),"table");view=s((e,r)=>xR(e,r,this.schemaName),"view");materializedView=s((e,r)=>TR(e,r,this.schemaName),"materializedView");enum(e,r){return Array.isArray(r)?Ev(e,[...r],this.schemaName):kv(e,r,this.schemaName)}sequence=s((e,r)=>jR(e,r,this.schemaName),"sequence");getSQL(){return new be([z.identifier(this.schemaName)])}shouldOmitSQLParens(){return!0}}});var ja,Ma,za,Vm=b(()=>{Bm();he();im();vm();qi();el();ja=class{static{s(this,"PgPreparedQuery")}constructor(e,r,n,o){this.query=e,this.cache=r,this.queryMetadata=n,this.cacheConfig=o,r&&r.strategy()==="all"&&o===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[j]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,n){if(this.cache===void 0||te(this.cache,Ki)||this.queryMetadata===void 0)try{return await n()}catch(o){throw new si(e,r,o)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await n()}catch(o){throw new si(e,r,o)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[o]=await Promise.all([n(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return o}catch(o){throw new si(e,r,o)}if(!this.cacheConfig)try{return await n()}catch(o){throw new si(e,r,o)}if(this.queryMetadata.type==="select"){let o=await this.cache.get(this.cacheConfig.tag??await gw(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(o===void 0){let i;try{i=await n()}catch(a){throw new si(e,r,a)}return await this.cache.put(this.cacheConfig.tag??await gw(e,r),i,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),i}return o}try{return await n()}catch(o){throw new si(e,r,o)}}},Ma=class{static{s(this,"PgSession")}constructor(e){this.dialect=e}static[j]="PgSession";execute(e,r){return wr.startActiveSpan("drizzle.operation",()=>wr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let n=await this.execute(e,r);return Number(n[0].count)}},za=class extends Gi{static{s(this,"PgTransaction")}constructor(e,r,n,o=0){super(e,r,n),this.schema=n,this.nestedIndex=o}static[j]="PgTransaction";rollback(){throw new om}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),z.raw(r.join(" "))}setTransaction(e){return this.session.execute(z`set transaction ${this.getTransactionConfigSQL(e)}`)}}});var UR=b(()=>{});var LR=b(()=>{yv()});var Qr=b(()=>{RR();gR();Am();el();Gu();lv();yR();_R();jb();fw();DR();zR();vw();Vm();UR();Bi();hv();Da();LR();ow();dw()});var Hm,_w,bw,Zm,qR,ww=b(()=>{$R();he();Pa();Qr();Vm();or();kt();Hm={arrayMode:!1,fullResults:!0},_w={arrayMode:!0,fullResults:!0},bw=class extends ja{static{s(this,"NeonHttpPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d){super(r,o,i,a),this.client=e,this.logger=n,this.fields=c,this._isResponseInArrayMode=l,this.customResultMapper=d,this.clientQuery=e.query??e}static[j]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let n=Fi(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:o,clientQuery:i,query:a,customResultMapper:c}=this;if(!o&&!c)return this.queryWithCache(a.sql,n,async()=>i(a.sql,n,r===void 0?Hm:{...Hm,authToken:r}));let l=await this.queryWithCache(a.sql,n,async()=>await i(a.sql,n,r===void 0?_w:{..._w,authToken:r}));return this.mapResult(l)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(n=>sm(this.fields,n,this.joinsNotNullableMap))}all(e={}){let r=Fi(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?Hm:{...Hm,authToken:this.authToken}).then(n=>n.rows)}values(e={},r){let n=Fi(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:r}).then(o=>o.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Zm=class extends Ma{static{s(this,"NeonHttpSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.clientQuery=e.query??e,this.logger=o.logger??new Ia,this.cache=o.cache??new Ki}static[j]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,n,o,i,a,c){return new bw(this.client,e,this.logger,this.cache,a,c,r,o,i)}async batch(e){let r=[],n=[];for(let i of e){let a=i._prepare(),c=a.getQuery();r.push(a),n.push(this.clientQuery(c.sql,c.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(n,_w)).map((i,a)=>r[a].mapResult(i,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let n=await this.execute(e,r);return Number(n.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},qR=class extends za{static{s(this,"NeonTransaction")}static[j]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}}});function Jm(t,e,r,n){return new Proxy(t,{get(o,i){let a=o[i];return typeof a!="function"&&(typeof a!="object"||a===null)?a:n?Jm(a,e,r):i==="query"?Jm(a,e,r,!0):new Proxy(a,{apply(c,l,d){let p=c.call(l,...d);return typeof p=="object"&&p!==null&&"setToken"in p&&typeof p.setToken=="function"&&p.setToken(e),r(c,i,p)}})}})}function Ua(t,e={}){let r=new Co({casing:e.casing}),n;e.logger===!0?n=new ka:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=hm(e.schema,gm);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new Sw(t,r,{logger:n,cache:e.cache}).createSession(o),c=new xw(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}function Gm(...t){if(typeof t[0]=="string"){let e=Zi(t[0]);return Ua(e,t[1])}if(cm(t[0])){let{connection:e,client:r,...n}=t[0];if(r)return Ua(r,n);if(typeof e=="object"){let{connectionString:i,...a}=e,c=Zi(i,a);return Ua(c,n)}let o=Zi(e);return Ua(o,n)}return Ua(t[0],t[1])}var Sw,xw,FR=b(()=>{Zu();he();Pa();el();Gu();Oa();kt();ww();Sw=class{static{s(this,"NeonHttpDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n,this.initMappers()}static[j]="NeonHttpDriver";createSession(e){return new Zm(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){Wt.setTypeParser(Wt.builtins.TIMESTAMPTZ,e=>e),Wt.setTypeParser(Wt.builtins.TIMESTAMP,e=>e),Wt.setTypeParser(Wt.builtins.DATE,e=>e),Wt.setTypeParser(Wt.builtins.INTERVAL,e=>e),Wt.setTypeParser(1231,e=>e),Wt.setTypeParser(1115,e=>e),Wt.setTypeParser(1185,e=>e),Wt.setTypeParser(1187,e=>e),Wt.setTypeParser(1182,e=>e)}};s(Jm,"wrap");xw=class extends Gi{static{s(this,"NeonHttpDatabase")}static[j]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,Jm(this,e,(r,n,o)=>n==="with"?Jm(o,e,(i,a,c)=>c):o)}async batch(e){return this.session.batch(e)}};s(Ua,"construct");s(Gm,"drizzle");(t=>{function e(r){return Ua({},r)}s(e,"mock"),t.mock=e})(Gm||(Gm={}))});var BR=b(()=>{FR();ww()});var Tw,Km,Ew,kw=b(()=>{Zu();Bm();he();Pa();Qr();Vm();or();kt();Tw=class extends ja{static{s(this,"NeonPreparedQuery")}constructor(e,r,n,o,i,a,c,l,d,p,m){super({sql:r,params:n},i,a,c),this.client=e,this.params=n,this.logger=o,this.fields=l,this._isResponseInArrayMode=p,this.customResultMapper=m,this.rawQueryConfig={name:d,text:r,types:{getTypeParser:s((h,y)=>h===Wt.builtins.TIMESTAMPTZ?g=>g:h===Wt.builtins.TIMESTAMP?g=>g:h===Wt.builtins.DATE?g=>g:h===Wt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Wt.getTypeParser(h,y),"getTypeParser")}},this.queryConfig={name:d,text:r,rowMode:"array",types:{getTypeParser:s((h,y)=>h===Wt.builtins.TIMESTAMPTZ?g=>g:h===Wt.builtins.TIMESTAMP?g=>g:h===Wt.builtins.DATE?g=>g:h===Wt.builtins.INTERVAL?g=>g:h===1231?g=>g:h===1115?g=>g:h===1185?g=>g:h===1187?g=>g:h===1182?g=>g:Wt.getTypeParser(h,y),"getTypeParser")}}}static[j]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let r=Fi(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:n,client:o,rawQueryConfig:i,queryConfig:a,joinsNotNullableMap:c,customResultMapper:l}=this;if(!n&&!l)return await this.queryWithCache(i.text,r,async()=>await o.query(i,r));let d=await this.queryWithCache(a.text,r,async()=>await o.query(a,r));return l?l(d.rows):d.rows.map(p=>sm(n,p,c))}all(e={}){let r=Fi(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.rawQueryConfig.text,r,async()=>await this.client.query(this.rawQueryConfig,r)).then(n=>n.rows)}values(e={}){let r=Fi(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,r),this.queryWithCache(this.queryConfig.text,r,async()=>await this.client.query(this.queryConfig,r)).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Km=class t extends Ma{static{s(this,"NeonSession")}constructor(e,r,n,o={}){super(r),this.client=e,this.schema=n,this.options=o,this.logger=o.logger??new Ia,this.cache=o.cache??new Ki}static[j]="NeonSession";logger;cache;prepareQuery(e,r,n,o,i,a,c){return new Tw(this.client,e.sql,e.params,this.logger,this.cache,a,c,r,n,o,i)}async query(e,r){return this.logger.logQuery(e,r),await this.client.query({rowMode:"array",text:e,values:r})}async queryObjects(e,r){return this.client.query(e,r)}async count(e){let r=await this.execute(e);return Number(r.rows[0].count)}async transaction(e,r={}){let n=this.client instanceof di?new t(await this.client.connect(),this.dialect,this.schema,this.options):this,o=new Ew(this.dialect,n,this.schema);await o.execute(z`begin ${o.getTransactionConfigSQL(r)}`);try{let i=await e(o);return await o.execute(z`commit`),i}catch(i){throw await o.execute(z`rollback`),i}finally{this.client instanceof di&&n.client.release()}}},Ew=class t extends za{static{s(this,"NeonTransaction")}static[j]="NeonTransaction";async transaction(e){let r=`sp${this.nestedIndex+1}`,n=new t(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(z.raw(`savepoint ${r}`));try{let o=await e(n);return await n.execute(z.raw(`release savepoint ${r}`)),o}catch(o){throw await n.execute(z.raw(`rollback to savepoint ${r}`)),o}}}});function tl(t,e={}){let r=new Co({casing:e.casing}),n;e.logger===!0?n=new ka:e.logger!==!1&&(n=e.logger);let o;if(e.schema){let l=hm(e.schema,gm);o={fullSchema:e.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}let a=new Iw(t,r,{logger:n,cache:e.cache}).createSession(o),c=new Pw(r,a,o);return c.$client=t,c.$cache=e.cache,c.$cache&&(c.$cache.invalidate=e.cache?.onMutate),c}function Wm(...t){if(typeof t[0]=="string"){let e=new di({connectionString:t[0]});return tl(e,t[1])}if(cm(t[0])){let{connection:e,client:r,ws:n,...o}=t[0];if(n&&(Fs.webSocketConstructor=n),r)return tl(r,o);let i=typeof e=="string"?new di({connectionString:e}):new di(e);return tl(i,o)}return tl(t[0],t[1])}var Iw,Pw,VR=b(()=>{Zu();he();Pa();el();Gu();Oa();kt();kw();Iw=class{static{s(this,"NeonDriver")}constructor(e,r,n={}){this.client=e,this.dialect=r,this.options=n}static[j]="NeonDriver";createSession(e){return new Km(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}},Pw=class extends Gi{static{s(this,"NeonDatabase")}static[j]="NeonServerlessDatabase"};s(tl,"construct");s(Wm,"drizzle");(t=>{function e(r){return tl({},r)}s(e,"mock"),t.mock=e})(Wm||(Wm={}))});var HR=b(()=>{VR();kw()});var W,_n,Hs,bn=b(()=>{"use strict";Qr();W=ke("users",{id:C("id").primaryKey(),email:C("email").unique().notNull(),fullName:C("full_name"),phone:C("phone"),cpf:C("cpf").unique(),birthDate:Vr("birth_date"),autonomyLevel:Rt("autonomy_level").default(50),voiceCommandEnabled:_e("voice_command_enabled").default(!0),language:C("language").default("pt-BR"),timezone:C("timezone").default("America/Sao_Paulo"),currency:C("currency").default("BRL"),profileImageUrl:C("profile_image_url"),isActive:_e("is_active").default(!0),lastLogin:K("last_login",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),_n=ke("user_preferences",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),theme:C("theme").default("system"),notificationsEmail:_e("notifications_email").default(!0),notificationsPush:_e("notifications_push").default(!0),notificationsSms:_e("notifications_sms").default(!1),autoCategorize:_e("auto_categorize").default(!0),budgetAlerts:_e("budget_alerts").default(!0),voiceFeedback:_e("voice_feedback").default(!0),accessibilityHighContrast:_e("accessibility_high_contrast").default(!1),accessibilityLargeText:_e("accessibility_large_text").default(!1),accessibilityScreenReader:_e("accessibility_screen_reader").default(!1),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Hs=ke("user_security",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),biometricEnabled:_e("biometric_enabled").default(!1),twoFactorEnabled:_e("two_factor_enabled").default(!1),twoFactorSecret:C("two_factor_secret"),voiceBiometricEnabled:_e("voice_biometric_enabled").default(!1),voiceSampleEncrypted:C("voice_sample_encrypted"),sessionTimeoutMinutes:Rt("session_timeout_minutes").default(30),maxFailedAttempts:Rt("max_failed_attempts").default(5),lockedUntil:K("locked_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Wi,Zs,La,qa,Fa,Aw=b(()=>{"use strict";Qr();bn();Wi=ke("audit_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),action:C("action").notNull(),resourceType:C("resource_type"),resourceId:C("resource_id"),oldValues:dt("old_values"),newValues:dt("new_values"),ipAddress:$n("ip_address"),userAgent:C("user_agent"),sessionId:C("session_id"),success:_e("success").default(!0),errorMessage:C("error_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Zs=ke("error_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),errorType:C("error_type").notNull(),errorCode:C("error_code"),errorMessage:C("error_message").notNull(),stackTrace:C("stack_trace"),context:dt("context"),userAgent:C("user_agent"),ipAddress:$n("ip_address"),sessionId:C("session_id"),isResolved:_e("is_resolved").default(!1),resolvedAt:K("resolved_at",{withTimezone:!0}),resolvedBy:C("resolved_by").references(()=>W.id),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),La=ke("user_sessions",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),sessionToken:C("session_token").unique().notNull(),deviceType:C("device_type"),deviceId:C("device_id"),ipAddress:$n("ip_address"),userAgent:C("user_agent"),isActive:_e("is_active").default(!0),lastActivity:K("last_activity",{withTimezone:!0}).defaultNow(),expiresAt:K("expires_at",{withTimezone:!0}).notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),qa=ke("lgpd_consent_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),consentType:C("consent_type").notNull(),consentGiven:_e("consent_given").notNull(),consentVersion:C("consent_version").notNull(),ipAddress:$n("ip_address"),userAgent:C("user_agent"),consentedAt:K("consented_at",{withTimezone:!0}).defaultNow(),revokedAt:K("revoked_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Fa=ke("data_export_requests",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),requestType:C("request_type").notNull(),status:C("status").default("pending"),processedAt:K("processed_at",{withTimezone:!0}),downloadUrl:C("download_url"),expiresAt:K("expires_at",{withTimezone:!0}),ipAddress:$n("ip_address"),userAgent:C("user_agent"),requestedAt:K("requested_at",{withTimezone:!0}).defaultNow(),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var ce,Ba,Qi,rl=b(()=>{"use strict";Qr();bn();ce=ke("bank_accounts",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),belvoAccountId:C("belvo_account_id").unique().notNull(),institutionId:C("institution_id").notNull(),institutionName:C("institution_name").notNull(),accountType:C("account_type").notNull(),accountNumber:C("account_number"),accountMask:C("account_mask").notNull(),accountHolderName:C("account_holder_name"),balance:pt("balance",{precision:15,scale:2}).default("0"),availableBalance:pt("available_balance",{precision:15,scale:2}).default("0"),currency:C("currency").default("BRL"),isActive:_e("is_active").default(!0),isPrimary:_e("is_primary").default(!1),lastSync:K("last_sync",{withTimezone:!0}),syncStatus:C("sync_status").default("pending"),syncErrorMessage:C("sync_error_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ba=ke("account_balance_history",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),accountId:C("account_id").references(()=>ce.id,{onDelete:"cascade"}),balance:pt("balance",{precision:15,scale:2}).notNull(),availableBalance:pt("available_balance",{precision:15,scale:2}),recordedAt:K("recorded_at",{withTimezone:!0}).defaultNow(),source:C("source").default("sync")}),Qi=ke("bank_sync_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),accountId:C("account_id").references(()=>ce.id,{onDelete:"cascade"}),syncType:C("sync_type").notNull(),status:C("status").notNull(),recordsSynced:Rt("records_synced").default(0),errorMessage:C("error_message"),startedAt:K("started_at",{withTimezone:!0}).defaultNow(),completedAt:K("completed_at",{withTimezone:!0}),durationMs:Rt("duration_ms")})});var Cw,Ow,Xr,at,gr,$w=b(()=>{"use strict";Qr();bn();Cw=fr("subscription_status",["free","trialing","active","past_due","canceled","unpaid"]),Ow=fr("payment_status",["succeeded","failed","pending"]),Xr=ke("subscription_plans",{id:C("id").primaryKey(),name:C("name").notNull(),description:C("description"),priceCents:Rt("price_cents").notNull().default(0),currency:C("currency").notNull().default("BRL"),interval:C("interval"),stripeProductId:C("stripe_product_id"),stripePriceId:C("stripe_price_id"),features:dt("features").$type().default([]),aiModels:dt("ai_models").$type().default([]),maxBankAccounts:Rt("max_bank_accounts").default(1),maxTransactionsPerMonth:Rt("max_transactions_per_month"),isActive:_e("is_active").default(!0),displayOrder:Rt("display_order").default(0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),at=ke("subscriptions",{id:Aa("id").primaryKey().defaultRandom(),userId:C("user_id").notNull().unique().references(()=>W.id,{onDelete:"cascade"}),stripeCustomerId:C("stripe_customer_id"),stripeSubscriptionId:C("stripe_subscription_id").unique(),planId:C("plan_id").notNull().default("free").references(()=>Xr.id),status:Cw("status").notNull().default("free"),currentPeriodStart:K("current_period_start",{withTimezone:!0}),currentPeriodEnd:K("current_period_end",{withTimezone:!0}),cancelAtPeriodEnd:_e("cancel_at_period_end").default(!1),canceledAt:K("canceled_at",{withTimezone:!0}),trialStart:K("trial_start",{withTimezone:!0}),trialEnd:K("trial_end",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),gr=ke("payment_history",{id:Aa("id").primaryKey().defaultRandom(),userId:C("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),subscriptionId:Aa("subscription_id").references(()=>at.id,{onDelete:"set null"}),stripePaymentIntentId:C("stripe_payment_intent_id"),stripeInvoiceId:C("stripe_invoice_id"),stripeChargeId:C("stripe_charge_id"),amountCents:Rt("amount_cents").notNull(),currency:C("currency").notNull().default("BRL"),status:Ow("status").notNull(),description:C("description"),receiptUrl:C("receipt_url"),invoicePdf:C("invoice_pdf"),failureCode:C("failure_code"),failureMessage:C("failure_message"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var Me,oe,Xt,Js=b(()=>{"use strict";Qr();rl();bn();Me=ke("transaction_categories",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),name:C("name").notNull(),color:C("color").default("#6B7280"),icon:C("icon").default("circle"),isSystem:_e("is_system").default(!1),parentId:C("parent_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),oe=ke("transactions",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),accountId:C("account_id").references(()=>ce.id,{onDelete:"set null"}),categoryId:C("category_id").references(()=>Me.id,{onDelete:"set null"}),amount:pt("amount",{precision:15,scale:2}).notNull(),originalAmount:pt("original_amount",{precision:15,scale:2}),currency:C("currency").default("BRL"),description:C("description").notNull(),merchantName:C("merchant_name"),transactionDate:K("transaction_date",{withTimezone:!0}).notNull(),postedDate:K("posted_date",{withTimezone:!0}),transactionType:C("transaction_type").notNull(),paymentMethod:C("payment_method"),status:C("status").default("posted"),isRecurring:_e("is_recurring").default(!1),recurringRule:dt("recurring_rule"),tags:C("tags").array(),notes:C("notes"),attachments:C("attachments").array(),confidenceScore:pt("confidence_score",{precision:3,scale:2}),isCategorized:_e("is_categorized").default(!1),isManualEntry:_e("is_manual_entry").default(!1),externalId:C("external_id"),externalSource:C("external_source"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Xt=ke("transaction_schedules",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),accountId:C("account_id").references(()=>ce.id,{onDelete:"set null"}),categoryId:C("category_id").references(()=>Me.id,{onDelete:"set null"}),amount:pt("amount",{precision:15,scale:2}).notNull(),description:C("description").notNull(),recipientName:C("recipient_name"),recipientAccount:C("recipient_account"),recipientPixKey:C("recipient_pix_key"),scheduledDate:Vr("scheduled_date").notNull(),recurrenceRule:C("recurrence_rule"),isActive:_e("is_active").default(!0),autoExecute:_e("auto_execute").default(!1),notificationSent:_e("notification_sent").default(!1),executed:_e("executed").default(!1),executedTransactionId:C("executed_transaction_id").references(()=>oe.id),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var ZR,Oo,Xi,Rw=b(()=>{"use strict";Qr();Js();bn();ZR=fr("boleto_status",["pending","paid","overdue","cancelled","scheduled"]),Oo=ke("boletos",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),barcode:C("barcode").unique().notNull(),lineIdDigitable:C("line_id_digitable").unique().notNull(),amount:pt("amount",{precision:15,scale:2}).notNull(),dueDate:Vr("due_date").notNull(),beneficiaryName:C("beneficiary_name").notNull(),beneficiaryCnpj:C("beneficiary_cnpj"),description:C("description"),status:C("status").default("pending"),paymentDate:K("payment_date",{withTimezone:!0}),paidAmount:pt("paid_amount",{precision:15,scale:2}),paidWith:C("paid_with"),transactionId:C("transaction_id").references(()=>oe.id),fineAmount:pt("fine_amount",{precision:15,scale:2}).default("0"),interestAmount:pt("interest_amount",{precision:15,scale:2}).default("0"),discountAmount:pt("discount_amount",{precision:15,scale:2}).default("0"),pdfUrl:C("pdf_url"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Xi=ke("boleto_payments",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),boletoId:C("boleto_id").references(()=>Oo.id,{onDelete:"cascade"}),amount:pt("amount",{precision:15,scale:2}).notNull(),paymentDate:K("payment_date",{withTimezone:!0}).defaultNow(),paymentMethod:C("payment_method").notNull(),transactionId:C("transaction_id").references(()=>oe.id),status:C("status").default("processing"),externalId:C("external_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var Gs,vt,Yi,Nw=b(()=>{"use strict";Qr();rl();Js();bn();Gs=ke("event_types",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:C("name").unique().notNull(),description:C("description"),color:C("color").default("#3B82F6"),icon:C("icon").default("calendar"),isSystem:_e("is_system").default(!0),defaultReminderHours:Rt("default_reminder_hours").default(24),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),vt=ke("financial_events",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),accountId:C("account_id").references(()=>ce.id,{onDelete:"set null"}),categoryId:C("category_id").references(()=>Me.id,{onDelete:"set null"}),eventTypeId:C("event_type_id").references(()=>Gs.id,{onDelete:"set null"}),title:C("title").notNull(),description:C("description"),amount:pt("amount",{precision:15,scale:2}).notNull(),status:C("status").notNull().default("pending"),startDate:K("start_date",{withTimezone:!0}).notNull(),endDate:K("end_date",{withTimezone:!0}).notNull(),allDay:_e("all_day").default(!1),color:C("color").notNull().default("blue"),icon:C("icon"),isIncome:_e("is_income").default(!1),isCompleted:_e("is_completed").default(!1),isRecurring:_e("is_recurring").default(!1),recurrenceRule:C("recurrence_rule"),parentEventId:C("parent_event_id"),location:C("location"),notes:C("notes"),dueDate:Vr("due_date"),completedAt:K("completed_at",{withTimezone:!0}),priority:C("priority").default("normal"),tags:C("tags").array(),attachments:C("attachments").array(),brazilianEventType:C("brazilian_event_type"),installmentInfo:dt("installment_info"),merchantCategory:C("merchant_category"),metadata:dt("metadata"),transactionId:C("transaction_id").references(()=>oe.id,{onDelete:"set null"}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Yi=ke("event_reminders",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),eventId:C("event_id").references(()=>vt.id,{onDelete:"cascade"}),remindAt:K("remind_at",{withTimezone:!0}).notNull(),reminderType:C("reminder_type").default("notification"),message:C("message"),isSent:_e("is_sent").default(!1),sentAt:K("sent_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var JR,Re,Va,Dw=b(()=>{"use strict";Qr();bn();JR=fr("payment_method_type",["PIX","BANK_ACCOUNT","BOLETO"]),Re=ke("contacts",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),name:C("name").notNull(),email:C("email"),phone:C("phone"),cpf:C("cpf"),cnpj:C("cnpj"),notes:C("notes"),isFavorite:_e("is_favorite").default(!1),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Va=ke("contact_payment_methods",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),contactId:C("contact_id").references(()=>Re.id,{onDelete:"cascade"}),methodType:C("method_type").notNull(),methodDetails:dt("method_details").notNull(),isDefault:_e("is_default").default(!1),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Qm,jw,Mw,zw,Uw,Lw,qw,Fw,Bw,wn,Ft,Xm,Yr,so,Ur,Sn,Ha,Vw=b(()=>{"use strict";Qr();bn();Qm=fr("consent_type",["data_processing","marketing","analytics","third_party","third_party_sharing","voice_data","voice_recording","biometric","financial_data","location","open_banking"]),jw=fr("collection_method",["signup","settings","settings_toggle","prompt","api","import","explicit_form","terms_acceptance","voice_command"]),Mw=fr("deletion_request_type",["full_account","full_deletion","specific_data","anonymization","partial_deletion","consent_withdrawal"]),zw=fr("deletion_request_status",["pending","verified","approved","processing","completed","rejected","cancelled"]),Uw=fr("export_request_type",["full_data","full_export","transactions","profile","consents","audit_logs","financial_only","voice_commands","specific_period"]),Lw=fr("export_format",["json","csv","pdf"]),qw=fr("export_status",["pending","processing","completed","failed","expired"]),Fw=fr("limit_type",["pix_daily","pix_daytime","pix_nighttime","pix_transaction","pix_total_daily","boleto_daily","ted_daily","transfer_daily","withdrawal_daily","total_daily","total_monthly"]),Bw=fr("compliance_event_type",["consent_granted","consent_revoked","data_export_requested","data_export_completed","data_deletion_requested","data_deletion_completed","data_accessed","data_modified","limit_updated","policy_acknowledged"]),wn=ke("consent_templates",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),consentType:Qm("consent_type").notNull(),version:C("version").notNull().default("1.0"),titlePt:C("title_pt").notNull(),descriptionPt:C("description_pt").notNull(),fullTextPt:C("full_text_pt").notNull(),titleEn:C("title_en"),descriptionEn:C("description_en"),fullTextEn:C("full_text_en"),isMandatory:_e("is_mandatory").default(!1),isActive:_e("is_active").default(!0),legalBasis:C("legal_basis"),effectiveFrom:K("effective_from",{withTimezone:!0}).defaultNow(),effectiveUntil:K("effective_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ft=ke("lgpd_consents",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),consentType:Qm("consent_type").notNull(),purpose:C("purpose").notNull(),legalBasis:C("legal_basis").notNull(),granted:_e("granted").notNull().default(!1),grantedAt:K("granted_at",{withTimezone:!0}),revokedAt:K("revoked_at",{withTimezone:!0}),consentVersion:C("consent_version").notNull(),consentTextHash:C("consent_text_hash"),collectionMethod:jw("collection_method").notNull(),ipAddress:$n("ip_address"),userAgent:C("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()},t=>[rw("lgpd_consents_user_type_version_idx").on(t.userId,t.consentType,t.consentVersion)]),Xm=ke("data_retention_policies",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),dataType:C("data_type").notNull().unique(),description:C("description"),descriptionPt:C("description_pt"),retentionMonths:Rt("retention_months").notNull(),retentionPeriodLabel:C("retention_period_label"),autoDelete:_e("auto_delete").default(!1),deletionMethod:C("deletion_method").default("hard_delete"),legalHold:_e("legal_hold").default(!1),legalBasis:C("legal_basis"),legalRequirement:_e("legal_requirement").default(!1),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Yr=ke("data_deletion_requests",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),requestType:Mw("request_type").notNull(),scope:dt("scope").default({}),reason:C("reason"),status:zw("status").default("pending"),verificationCode:C("verification_code"),verifiedAt:K("verified_at",{withTimezone:!0}),reviewDeadline:K("review_deadline",{withTimezone:!0}),processedAt:K("processed_at",{withTimezone:!0}),processedBy:C("processed_by"),processingNotes:C("processing_notes"),legalHold:_e("legal_hold").default(!1),legalHoldReason:C("legal_hold_reason"),ipAddress:$n("ip_address"),userAgent:C("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),so=ke("lgpd_export_requests",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),requestType:Uw("request_type").notNull(),format:Lw("format").default("json"),dateFrom:Vr("date_from"),dateTo:Vr("date_to"),status:qw("status").default("pending"),processedAt:K("processed_at",{withTimezone:!0}),downloadUrl:C("download_url"),downloadExpiresAt:K("download_expires_at",{withTimezone:!0}),fileSizeBytes:Rt("file_size_bytes"),errorMessage:C("error_message"),retryCount:Rt("retry_count").default(0),requestedVia:C("requested_via").default("app"),ipAddress:$n("ip_address"),userAgent:C("user_agent"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ur=ke("transaction_limits",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),limitType:Fw("limit_type").notNull(),dailyLimit:pt("daily_limit",{precision:15,scale:2}).notNull(),transactionLimit:pt("transaction_limit",{precision:15,scale:2}),monthlyLimit:pt("monthly_limit",{precision:15,scale:2}),currentDailyUsed:pt("current_daily_used",{precision:15,scale:2}).default("0"),currentMonthlyUsed:pt("current_monthly_used",{precision:15,scale:2}).default("0"),lastResetAt:K("last_reset_at",{withTimezone:!0}).defaultNow(),nighttimeLimit:pt("nighttime_limit",{precision:15,scale:2}),nighttimeStart:C("nighttime_start").default("20:00"),nighttimeEnd:C("nighttime_end").default("06:00"),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()},t=>[rw("transaction_limits_user_type_idx").on(t.userId,t.limitType)]),Sn=ke("compliance_audit_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"set null"}),eventType:Bw("event_type").notNull(),resourceType:C("resource_type").notNull(),resourceId:C("resource_id"),description:C("description"),metadata:dt("metadata").default({}),previousState:dt("previous_state"),newState:dt("new_state"),ipAddress:$n("ip_address"),userAgent:C("user_agent"),sessionId:C("session_id"),retentionUntil:K("retention_until",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Ha=ke("legal_holds",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}).notNull(),reason:C("reason").notNull(),description:C("description"),referenceNumber:C("reference_number"),dataTypes:dt("data_types").default([]),allData:_e("all_data").default(!1),active:_e("active").default(!0),startedAt:K("started_at",{withTimezone:!0}).defaultNow(),expiresAt:K("expires_at",{withTimezone:!0}),releasedAt:K("released_at",{withTimezone:!0}),releasedBy:C("released_by"),releaseReason:C("release_reason"),createdBy:C("created_by").notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var fi,Za,Ja,Hw=b(()=>{"use strict";Qr();bn();fi=ke("notifications",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),title:C("title").notNull(),message:C("message").notNull(),type:C("type").notNull(),category:C("category"),priority:C("priority").default("normal"),isRead:_e("is_read").default(!1),readAt:K("read_at",{withTimezone:!0}),actionUrl:C("action_url"),actionText:C("action_text"),metadata:dt("metadata"),expiresAt:K("expires_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Za=ke("alert_rules",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),ruleName:C("rule_name").notNull(),ruleType:C("rule_type").notNull(),conditions:dt("conditions").notNull(),actions:dt("actions").notNull(),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ja=ke("notification_logs",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),notificationId:C("notification_id").references(()=>fi.id,{onDelete:"cascade"}),deliveryMethod:C("delivery_method").notNull(),status:C("status").notNull(),sentAt:K("sent_at",{withTimezone:!0}).defaultNow(),deliveredAt:K("delivered_at",{withTimezone:!0}),errorMessage:C("error_message"),externalId:C("external_id"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var GR,KR,WR,Ga,hi,$o,Zw=b(()=>{"use strict";Qr();Js();bn();GR=fr("pix_key_type",["CPF","CNPJ","EMAIL","PHONE","RANDOM"]),KR=fr("pix_transaction_status",["pending","processing","completed","failed","cancelled","reversed"]),WR=fr("pix_transaction_type_enum",["sent","received","scheduled"]),Ga=ke("pix_keys",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),keyType:C("key_type").notNull(),keyValue:C("key_value").notNull(),keyName:C("key_name").notNull(),bankName:C("bank_name"),isFavorite:_e("is_favorite").default(!1),isActive:_e("is_active").default(!0),verificationStatus:C("verification_status").default("pending"),lastUsed:K("last_used",{withTimezone:!0}),usageCount:Rt("usage_count").default(0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),hi=ke("pix_qr_codes",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),qrCodeData:C("qr_code_data").notNull(),pixCopyPaste:C("pix_copy_paste").notNull(),amount:pt("amount",{precision:15,scale:2}),description:C("description"),recipientName:C("recipient_name"),recipientPixKey:C("recipient_pix_key"),expiresAt:K("expires_at",{withTimezone:!0}),isActive:_e("is_active").default(!0),isSingleUse:_e("is_single_use").default(!1),usageCount:Rt("usage_count").default(0),maxUsage:Rt("max_usage"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),$o=ke("pix_transactions",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),transactionId:C("transaction_id").references(()=>oe.id,{onDelete:"set null"}),endToEndId:C("end_to_end_id").unique(),pixKey:C("pix_key").notNull(),pixKeyType:C("pix_key_type").notNull(),recipientName:C("recipient_name").notNull(),recipientDocument:C("recipient_document"),recipientBank:C("recipient_bank"),amount:pt("amount",{precision:15,scale:2}).notNull(),description:C("description"),transactionDate:K("transaction_date",{withTimezone:!0}).notNull(),status:C("status").default("pending"),transactionType:C("transaction_type").default("sent"),scheduledFor:K("scheduled_for",{withTimezone:!0}),processedAt:K("processed_at",{withTimezone:!0}),qrCodeId:C("qr_code_id").references(()=>hi.id),externalId:C("external_id"),errorMessage:C("error_message"),feeAmount:pt("fee_amount",{precision:15,scale:2}).default("0"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()})});var Ka,QR,Rr,es,ts,Ro,Wa,Qa,cRe,Jw=b(()=>{"use strict";Qr();Js();bn();Ka=ke("voice_commands",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),commandText:C("command_text").notNull(),audioFileUrl:C("audio_file_url"),intent:C("intent").notNull(),intentConfidence:pt("intent_confidence",{precision:3,scale:2}),entities:dt("entities"),responseText:C("response_text"),responseAudioUrl:C("response_audio_url"),processingTimeMs:Rt("processing_time_ms"),status:C("status").default("processed"),errorMessage:C("error_message"),context:dt("context"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),QR=ke("command_intents",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),intentName:C("intent_name").unique().notNull(),description:C("description"),examplePhrases:C("example_phrases").array(),requiredEntities:C("required_entities").array(),actionHandler:C("action_handler"),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Rr=ke("ai_insights",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),insightType:C("insight_type").notNull(),title:C("title").notNull(),description:C("description").notNull(),recommendation:C("recommendation"),impactLevel:C("impact_level").default("medium"),categoryId:C("category_id").references(()=>Me.id),data:dt("data"),isRead:_e("is_read").default(!1),isActioned:_e("is_actioned").default(!1),expiresAt:K("expires_at",{withTimezone:!0}),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),es=ke("spending_patterns",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),categoryId:C("category_id").references(()=>Me.id),periodStart:Vr("period_start").notNull(),periodEnd:Vr("period_end").notNull(),periodType:C("period_type").notNull(),totalAmount:pt("total_amount",{precision:15,scale:2}).notNull(),transactionCount:Rt("transaction_count").notNull(),averageTransaction:pt("average_transaction",{precision:15,scale:2}),trendPercentage:pt("trend_percentage",{precision:5,scale:2}),patternData:dt("pattern_data"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),ts=ke("budget_categories",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),categoryId:C("category_id").references(()=>Me.id,{onDelete:"cascade"}),budgetAmount:pt("budget_amount",{precision:15,scale:2}).notNull(),periodType:C("period_type").notNull(),alertThreshold:pt("alert_threshold",{precision:5,scale:2}).default("80"),isActive:_e("is_active").default(!0),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Ro=ke("chat_sessions",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),title:C("title"),isActive:_e("is_active").default(!0),metadata:dt("metadata"),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),Wa=ke("chat_messages",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:C("session_id").references(()=>Ro.id,{onDelete:"cascade"}),role:C("role").notNull(),content:C("content").notNull(),attachments:dt("attachments"),context:dt("context"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()}),Qa=ke("voice_transcriptions",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),userId:C("user_id").references(()=>W.id,{onDelete:"cascade"}),audioStoragePath:C("audio_storage_path").notNull(),transcript:C("transcript").notNull(),confidenceScore:pt("confidence_score",{precision:3,scale:2}),language:C("language").notNull(),processingTimeMs:Rt("processing_time_ms").notNull(),expiresAt:K("expires_at",{withTimezone:!0}).notNull(),createdAt:K("created_at",{withTimezone:!0}).defaultNow(),updatedAt:K("updated_at",{withTimezone:!0}).defaultNow()}),cRe=ke("chat_context_snapshots",{id:C("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),conversationId:C("conversation_id").references(()=>Ro.id,{onDelete:"cascade"}),recentTransactions:dt("recent_transactions"),accountBalances:dt("account_balances"),upcomingEvents:dt("upcoming_events"),userPreferences:dt("user_preferences"),createdAt:K("created_at",{withTimezone:!0}).defaultNow()})});var XR,YR,eN,tN,rN,nN,oN,iN,sN,aN,cN,uN,lN,dN,pN,mN,fN,hN,gN,yN,vN,_N,bN,wN,SN,xN,TN,EN,kN,IN,PN,AN,CN,ON,$N,RN,NN,DN,jN,MN,zN,UN,LN,qN,FN,BN=b(()=>{"use strict";zr();Aw();rl();$w();Rw();Nw();Dw();Vw();Hw();Zw();Js();bn();Jw();XR=Ze(W,({one:t,many:e})=>({preferences:t(_n,{fields:[W.id],references:[_n.userId]}),security:t(Hs,{fields:[W.id],references:[Hs.userId]}),bankAccounts:e(ce),transactionCategories:e(Me),transactions:e(oe),transactionSchedules:e(Xt),financialEvents:e(vt),eventReminders:e(Yi),pixKeys:e(Ga),pixQrCodes:e(hi),pixTransactions:e($o),contacts:e(Re),boletos:e(Oo),voiceCommands:e(Ka),voiceTranscriptions:e(Qa),aiInsights:e(Rr),spendingPatterns:e(es),budgetCategories:e(ts),chatSessions:e(Ro),notifications:e(fi),alertRules:e(Za),auditLogs:e(Wi),errorLogs:e(Zs),userSessions:e(La),lgpdConsentLogs:e(qa),dataExportRequests:e(Fa),bankSyncLogs:e(Qi),lgpdConsents:e(Ft),dataDeletionRequests:e(Yr),lgpdExportRequests:e(so),transactionLimits:e(Ur),complianceAuditLogs:e(Sn),legalHolds:e(Ha),subscriptions:e(at),paymentHistory:e(gr)})),YR=Ze(_n,({one:t})=>({user:t(W,{fields:[_n.userId],references:[W.id]})})),eN=Ze(Hs,({one:t})=>({user:t(W,{fields:[Hs.userId],references:[W.id]})})),tN=Ze(ce,({one:t,many:e})=>({user:t(W,{fields:[ce.userId],references:[W.id]}),balanceHistory:e(Ba),syncLogs:e(Qi),transactions:e(oe),transactionSchedules:e(Xt),financialEvents:e(vt)})),rN=Ze(Ba,({one:t})=>({account:t(ce,{fields:[Ba.accountId],references:[ce.id]})})),nN=Ze(Qi,({one:t})=>({user:t(W,{fields:[Qi.userId],references:[W.id]}),account:t(ce,{fields:[Qi.accountId],references:[ce.id]})})),oN=Ze(Me,({one:t,many:e})=>({user:t(W,{fields:[Me.userId],references:[W.id]}),parent:t(Me,{fields:[Me.parentId],references:[Me.id],relationName:"categoryParent"}),children:e(Me,{relationName:"categoryParent"}),transactions:e(oe),transactionSchedules:e(Xt),financialEvents:e(vt),aiInsights:e(Rr),spendingPatterns:e(es),budgetCategories:e(ts)})),iN=Ze(oe,({one:t,many:e})=>({user:t(W,{fields:[oe.userId],references:[W.id]}),account:t(ce,{fields:[oe.accountId],references:[ce.id]}),category:t(Me,{fields:[oe.categoryId],references:[Me.id]}),pixTransactions:e($o),boletoPayments:e(Xi),financialEvents:e(vt)})),sN=Ze(Xt,({one:t})=>({user:t(W,{fields:[Xt.userId],references:[W.id]}),account:t(ce,{fields:[Xt.accountId],references:[ce.id]}),category:t(Me,{fields:[Xt.categoryId],references:[Me.id]}),executedTransaction:t(oe,{fields:[Xt.executedTransactionId],references:[oe.id]})})),aN=Ze(Gs,({many:t})=>({financialEvents:t(vt)})),cN=Ze(vt,({one:t,many:e})=>({user:t(W,{fields:[vt.userId],references:[W.id]}),account:t(ce,{fields:[vt.accountId],references:[ce.id]}),category:t(Me,{fields:[vt.categoryId],references:[Me.id]}),eventType:t(Gs,{fields:[vt.eventTypeId],references:[Gs.id]}),parentEvent:t(vt,{fields:[vt.parentEventId],references:[vt.id],relationName:"eventParent"}),childEvents:e(vt,{relationName:"eventParent"}),transaction:t(oe,{fields:[vt.transactionId],references:[oe.id]}),reminders:e(Yi)})),uN=Ze(Yi,({one:t})=>({user:t(W,{fields:[Yi.userId],references:[W.id]}),event:t(vt,{fields:[Yi.eventId],references:[vt.id]})})),lN=Ze(Ga,({one:t})=>({user:t(W,{fields:[Ga.userId],references:[W.id]})})),dN=Ze(hi,({one:t,many:e})=>({user:t(W,{fields:[hi.userId],references:[W.id]}),pixTransactions:e($o)})),pN=Ze($o,({one:t})=>({user:t(W,{fields:[$o.userId],references:[W.id]}),transaction:t(oe,{fields:[$o.transactionId],references:[oe.id]}),qrCode:t(hi,{fields:[$o.qrCodeId],references:[hi.id]})})),mN=Ze(Re,({one:t,many:e})=>({user:t(W,{fields:[Re.userId],references:[W.id]}),paymentMethods:e(Va)})),fN=Ze(Va,({one:t})=>({contact:t(Re,{fields:[Va.contactId],references:[Re.id]})})),hN=Ze(Oo,({one:t,many:e})=>({user:t(W,{fields:[Oo.userId],references:[W.id]}),transaction:t(oe,{fields:[Oo.transactionId],references:[oe.id]}),payments:e(Xi)})),gN=Ze(Xi,({one:t})=>({boleto:t(Oo,{fields:[Xi.boletoId],references:[Oo.id]}),transaction:t(oe,{fields:[Xi.transactionId],references:[oe.id]})})),yN=Ze(Ka,({one:t})=>({user:t(W,{fields:[Ka.userId],references:[W.id]})})),vN=Ze(Qa,({one:t})=>({user:t(W,{fields:[Qa.userId],references:[W.id]})})),_N=Ze(Rr,({one:t})=>({user:t(W,{fields:[Rr.userId],references:[W.id]}),category:t(Me,{fields:[Rr.categoryId],references:[Me.id]})})),bN=Ze(es,({one:t})=>({user:t(W,{fields:[es.userId],references:[W.id]}),category:t(Me,{fields:[es.categoryId],references:[Me.id]})})),wN=Ze(ts,({one:t})=>({user:t(W,{fields:[ts.userId],references:[W.id]}),category:t(Me,{fields:[ts.categoryId],references:[Me.id]})})),SN=Ze(Ro,({one:t,many:e})=>({user:t(W,{fields:[Ro.userId],references:[W.id]}),messages:e(Wa)})),xN=Ze(Wa,({one:t})=>({session:t(Ro,{fields:[Wa.sessionId],references:[Ro.id]})})),TN=Ze(fi,({one:t,many:e})=>({user:t(W,{fields:[fi.userId],references:[W.id]}),logs:e(Ja)})),EN=Ze(Za,({one:t})=>({user:t(W,{fields:[Za.userId],references:[W.id]})})),kN=Ze(Ja,({one:t})=>({notification:t(fi,{fields:[Ja.notificationId],references:[fi.id]})})),IN=Ze(Wi,({one:t})=>({user:t(W,{fields:[Wi.userId],references:[W.id]})})),PN=Ze(Zs,({one:t})=>({user:t(W,{fields:[Zs.userId],references:[W.id]}),resolvedByUser:t(W,{fields:[Zs.resolvedBy],references:[W.id],relationName:"resolvedByUser"})})),AN=Ze(La,({one:t})=>({user:t(W,{fields:[La.userId],references:[W.id]})})),CN=Ze(qa,({one:t})=>({user:t(W,{fields:[qa.userId],references:[W.id]})})),ON=Ze(Fa,({one:t})=>({user:t(W,{fields:[Fa.userId],references:[W.id]})})),$N=Ze(wn,({many:t})=>({consents:t(Ft)})),RN=Ze(Ft,({one:t})=>({user:t(W,{fields:[Ft.userId],references:[W.id]})})),NN=Ze(Xm,()=>({})),DN=Ze(Yr,({one:t})=>({user:t(W,{fields:[Yr.userId],references:[W.id]})})),jN=Ze(so,({one:t})=>({user:t(W,{fields:[so.userId],references:[W.id]})})),MN=Ze(Ur,({one:t})=>({user:t(W,{fields:[Ur.userId],references:[W.id]})})),zN=Ze(Sn,({one:t})=>({user:t(W,{fields:[Sn.userId],references:[W.id]})})),UN=Ze(Ha,({one:t})=>({user:t(W,{fields:[Ha.userId],references:[W.id]})})),LN=Ze(Xr,({many:t})=>({subscriptions:t(at)})),qN=Ze(at,({one:t,many:e})=>({user:t(W,{fields:[at.userId],references:[W.id]}),plan:t(Xr,{fields:[at.planId],references:[Xr.id]}),paymentHistory:e(gr)})),FN=Ze(gr,({one:t})=>({user:t(W,{fields:[gr.userId],references:[W.id]}),subscription:t(at,{fields:[gr.subscriptionId],references:[at.id]})}))});var Ym={};On(Ym,{accountBalanceHistory:()=>Ba,accountBalanceHistoryRelations:()=>rN,aiInsights:()=>Rr,aiInsightsRelations:()=>_N,alertRules:()=>Za,alertRulesRelations:()=>EN,auditLogs:()=>Wi,auditLogsRelations:()=>IN,bankAccounts:()=>ce,bankAccountsRelations:()=>tN,bankSyncLogs:()=>Qi,bankSyncLogsRelations:()=>nN,boletoPayments:()=>Xi,boletoPaymentsRelations:()=>gN,boletoStatusEnum:()=>ZR,boletos:()=>Oo,boletosRelations:()=>hN,budgetCategories:()=>ts,budgetCategoriesRelations:()=>wN,chatMessages:()=>Wa,chatMessagesRelations:()=>xN,chatSessions:()=>Ro,chatSessionsRelations:()=>SN,collectionMethodEnum:()=>jw,commandIntents:()=>QR,complianceAuditLogs:()=>Sn,complianceAuditLogsRelations:()=>zN,complianceEventTypeEnum:()=>Bw,consentTemplates:()=>wn,consentTemplatesRelations:()=>$N,consentTypeEnum:()=>Qm,contactPaymentMethods:()=>Va,contactPaymentMethodsRelations:()=>fN,contacts:()=>Re,contactsRelations:()=>mN,dataDeletionRequests:()=>Yr,dataDeletionRequestsRelations:()=>DN,dataExportRequests:()=>Fa,dataExportRequestsRelations:()=>ON,dataRetentionPolicies:()=>Xm,dataRetentionPoliciesRelations:()=>NN,deletionRequestStatusEnum:()=>zw,deletionRequestTypeEnum:()=>Mw,errorLogs:()=>Zs,errorLogsRelations:()=>PN,eventReminders:()=>Yi,eventRemindersRelations:()=>uN,eventTypes:()=>Gs,eventTypesRelations:()=>aN,exportFormatEnum:()=>Lw,exportRequestTypeEnum:()=>Uw,exportStatusEnum:()=>qw,financialEvents:()=>vt,financialEventsRelations:()=>cN,legalHolds:()=>Ha,legalHoldsRelations:()=>UN,lgpdConsentLogs:()=>qa,lgpdConsentLogsRelations:()=>CN,lgpdConsents:()=>Ft,lgpdConsentsRelations:()=>RN,lgpdExportRequests:()=>so,lgpdExportRequestsRelations:()=>jN,limitTypeEnum:()=>Fw,notificationLogs:()=>Ja,notificationLogsRelations:()=>kN,notifications:()=>fi,notificationsRelations:()=>TN,paymentHistory:()=>gr,paymentHistoryRelations:()=>FN,paymentMethodTypeEnum:()=>JR,paymentStatusEnum:()=>Ow,pixKeyTypeEnum:()=>GR,pixKeys:()=>Ga,pixKeysRelations:()=>lN,pixQrCodes:()=>hi,pixQrCodesRelations:()=>dN,pixTransactionStatusEnum:()=>KR,pixTransactionTypeEnum:()=>WR,pixTransactions:()=>$o,pixTransactionsRelations:()=>pN,spendingPatterns:()=>es,spendingPatternsRelations:()=>bN,subscriptionPlans:()=>Xr,subscriptionPlansRelations:()=>LN,subscriptionStatusEnum:()=>Cw,subscriptions:()=>at,subscriptionsRelations:()=>qN,transactionCategories:()=>Me,transactionCategoriesRelations:()=>oN,transactionLimits:()=>Ur,transactionLimitsRelations:()=>MN,transactionSchedules:()=>Xt,transactionSchedulesRelations:()=>sN,transactions:()=>oe,transactionsRelations:()=>iN,userPreferences:()=>_n,userPreferencesRelations:()=>YR,userSecurity:()=>Hs,userSecurityRelations:()=>eN,userSessions:()=>La,userSessionsRelations:()=>AN,users:()=>W,usersRelations:()=>XR,voiceCommands:()=>Ka,voiceCommandsRelations:()=>yN,voiceTranscriptions:()=>Qa,voiceTranscriptionsRelations:()=>vN});var Lr=b(()=>{"use strict";Aw();rl();$w();Rw();Nw();Dw();Vw();Hw();Zw();Js();bn();Jw();BN()});var HN,nQ,oQ,Gw,Pr,VN,Kw,iQ,Ww,No,Qw,LRe,gi=b(()=>{"use strict";Zu();BR();HR();Lr();HN=s(()=>{let t=process.env.DATABASE_URL;if(!t)throw new Error("DATABASE_URL environment variable is not set");return t},"getPooledDatabaseUrl"),nQ=s(()=>{let t=process.env.DATABASE_URL_UNPOOLED;return t||(console.warn("DATABASE_URL_UNPOOLED not set, using DATABASE_URL as fallback"),HN())},"getDirectDatabaseUrl"),oQ=s(()=>{let t=Zi(HN());return Gm(t,{schema:Ym})},"createHttpClient"),Gw=null,Pr=s(()=>(Gw||(Gw=oQ()),Gw),"getHttpClient"),VN=null,Kw=null,iQ=s(()=>(Kw||(VN=new di({connectionString:nQ()}),Kw=Wm(VN,{schema:Ym})),Kw),"getPoolClient"),Ww=null,No=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Database client cannot be used in browser context");if(!Ww){if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL environment variable is not set");Ww=Pr()}return Ww[e]}}),Qw=null,LRe=new Proxy({},{get(t,e){if(typeof window<"u")throw new Error("Admin database client cannot be used in browser context");if(!Qw){if(!(process.env.DATABASE_URL_UNPOOLED??process.env.DATABASE_URL))throw new Error("DATABASE_URL_UNPOOLED or DATABASE_URL environment variable is not set");Qw=iQ()}return Qw[e]}})});async function ZN(){let t=Date.now();try{return await No.execute(z`SELECT 1`),{status:"connected",latencyMs:Date.now()-t}}catch(e){return{status:"disconnected",latencyMs:Date.now()-t,error:e instanceof Error?e.message:"Unknown error"}}}function JN(t){t.get("/api/ping",e=>e.json({message:"pong",timestamp:new Date().toISOString(),version:"1.0.0"})),t.get("/api/status",async e=>{let r=await ZN(),n=r.status==="connected";return e.json({services:{database:r.status,databaseLatencyMs:r.latencyMs,trpc:"connected",auth:"connected"},status:n?"operational":"degraded",timestamp:new Date().toISOString(),...r.error&&{errors:{database:r.error}}})}),t.get("/api/health",async e=>{let r=await ZN();return r.status!=="connected"?e.json({healthy:!1,database:r,timestamp:new Date().toISOString()},503):e.json({healthy:!0,database:r,timestamp:new Date().toISOString()})})}var GN=b(()=>{"use strict";zr();gi();s(ZN,"checkDatabaseHealth");s(JN,"setupApiRoutes")});var Xw,nl,ef=b(()=>{"use strict";Xw={staticAssets:"public, max-age=31536000, immutable",htmlFiles:"no-cache, no-store, must-revalidate",apiResponses:"private, max-age=60",dynamicContent:"private, no-cache"},nl={NODE_ENV:"production",PORT:Number(process.env.PORT)||3e3,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,DATABASE_URL:process.env.DATABASE_URL||"",DATABASE_URL_UNPOOLED:process.env.DATABASE_URL_UNPOOLED||"",CLERK_PUBLISHABLE_KEY:process.env.VITE_CLERK_PUBLISHABLE_KEY||process.env.CLERK_PUBLISHABLE_KEY||"",CLERK_SECRET_KEY:process.env.CLERK_SECRET_KEY||"",API_URL:process.env.VITE_API_URL||process.env.API_URL||"http://localhost:3000",CORS_ORIGINS:(process.env.CORS_ORIGINS||"http://localhost:5173,http://localhost:3000").split(",")}});function KN(t){t.get("/api/health",e=>e.json({environment:nl.NODE_ENV,memory:process.memoryUsage?.()||{},service:"aegiswallet-server",status:"ok",timestamp:new Date().toISOString(),uptime:process.uptime?.()||0}))}var WN=b(()=>{"use strict";ef();s(KN,"setupHealthRoute")});var QN,XN=b(()=>{QN=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i});var eS,YN,sQ,Yw,tS=b(()=>{eS=s((t,e=Yw)=>{let r=/\.([a-zA-Z0-9]+?)$/,n=t.match(r);if(!n)return;let o=e[n[1]];return o&&o.startsWith("text")&&(o+="; charset=utf-8"),o},"getMimeType"),YN=s(t=>{for(let e in Yw)if(Yw[e]===t)return e},"getExtension"),sQ={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Yw=sQ});var eD,tD=b(()=>{eD=s((...t)=>{let e=t.filter(o=>o!=="").join("/");e=e.replace(/(?<=\/)\/+/g,"");let r=e.split("/"),n=[];for(let o of r)o===".."&&n.length>0&&n.at(-1)!==".."?n.pop():o!=="."&&n.push(o);return n.join("/")||"."},"defaultJoin")});var rD,aQ,cQ,nD,oD=b(()=>{XN();tS();tD();rD={br:".br",zstd:".zst",gzip:".gz"},aQ=Object.keys(rD),cQ="index.html",nD=s(t=>{let e=t.root??"./",r=t.path,n=t.join??eD;return async(o,i)=>{if(o.finalized)return i();let a;if(t.path)a=t.path;else try{if(a=decodeURIComponent(o.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(a))throw new Error}catch{return await t.onNotFound?.(o.req.path,o),i()}let c=n(e,!r&&t.rewriteRequestPath?t.rewriteRequestPath(a):a);t.isDir&&await t.isDir(c)&&(c=n(c,cQ));let l=t.getContent,d=await l(c,o);if(d instanceof Response)return o.newResponse(d.body,d);if(d){let p=t.mimes&&eS(c,t.mimes)||eS(c);if(o.header("Content-Type",p||"application/octet-stream"),t.precompressed&&(!p||QN.test(p))){let m=new Set(o.req.header("Accept-Encoding")?.split(",").map(h=>h.trim()));for(let h of aQ){if(!m.has(h))continue;let y=await l(c+rD[h],o);if(y){d=y,o.header("Content-Encoding",h),o.header("Vary","Accept-Encoding",{append:!0});break}}}return await t.onFound?.(c,o),o.body(d)}await t.onNotFound?.(c,o),await i()}},"serveStatic")});import{stat as uQ}from"node:fs/promises";import{join as lQ}from"node:path";var iD,sD=b(()=>{oD();iD=s(t=>s(async function(r,n){return nD({...t,getContent:s(async a=>{let c=Bun.file(a);return await c.exists()?c:null},"getContent"),join:lQ,isDir:s(async a=>{let c;try{c=(await uQ(a)).isDirectory()}catch{}return c},"isDir")})(r,n)},"serveStatic2"),"serveStatic")});var aD=b(()=>{});var cD,uD=b(()=>{aD();cD=s((t,e)=>{for(let[r,n]of Object.entries(e)){let o=new RegExp("/:"+r+"(?:{[^/]+})?\\??");t=t.replace(o,n?`/${n}`:"")}return t},"replaceUrlParam")});var dQ,lD,dD=b(()=>{dQ=1024,lD=s(({concurrency:t,interval:e}={})=>{if(t||=dQ,t===1/0)return{run:s(async o=>o(),"run")};let r=new Set,n=s(async(o,i,a)=>{if(r.size>=t)return i||=new Promise(d=>a=d),setTimeout(()=>n(o,i,a)),i;let c={};r.add(c);let l=await o();return e?setTimeout(()=>r.delete(c),e):r.delete(c),a?(a(l),i):l},"run");return{run:n}},"createPool")});var pD,rS,mD=b(()=>{Qy();pD=s(t=>t.length>1,"isMiddleware"),rS=s(t=>t[yu]?rS(t[yu]):t,"findTargetHandler")});var fD,pQ,mQ,fQ,hQ,ol,hD,nS,oS=b(()=>{Li();mD();fD=s(t=>t.split(/[\/\\]/).slice(0,-1).join("/"),"dirname"),pQ=s(t=>t.replace(/(\\)/g,"/").replace(/\/$/g,""),"normalizePath"),mQ=s((t,e)=>{t.length===0||e?t.push(".."):t.pop()},"handleParent"),fQ=s((t,e)=>{t=t.replace(/^\.(?!.)/,""),t!==""&&e.push(t)},"handleNonDot"),hQ=s((t,e)=>{let r=!1;for(let n of t)n===".."?(mQ(e,r),r=!0):(fQ(n,e),r=!1)},"handleSegments"),ol=s((...t)=>{t=t.map(pQ);let e=[];return hQ(t.join("/").split("/"),e),(t[0][0]==="/"?"/":"")+e.join("/")},"joinPaths"),hD=s(t=>t.routes.reduce((e,{method:r,handler:n,path:o})=>{let i=rS(n);return["GET",Jt].includes(r)&&!pD(i)&&e.push({path:o}),e},[]),"filterStaticGenerateRoutes"),nS=s(t=>t.split("/").some(e=>e.startsWith(":")||e.includes("*")),"isDynamicRoute")});var gD,tf,CNe,iS=b(()=>{oS();gD="HONO_SSG_CONTEXT",tf="x-hono-disable-ssg",CNe=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[tf]:"true"}})}catch{return null}})()});var gQ,yQ,vQ,_Q,bQ,wQ,SQ,xQ,TQ,EQ,kQ,yD,IQ,PQ,vD,_D=b(()=>{uD();dD();tS();iS();oS();gQ=2,yQ="text/plain",vQ="./static",_Q=s((t,e,r,n)=>{let o=SQ(r,n);return t.endsWith(`.${o}`)?ol(e,t):t==="/"?ol(e,`index.${o}`):t.endsWith("/")?ol(e,t,`index.${o}`):ol(e,`${t}.${o}`)},"generateFilePath"),bQ=s(async t=>{let e=t.headers.get("Content-Type");try{return e?.includes("text")||e?.includes("json")?await t.text():await t.arrayBuffer()}catch(r){throw new Error(`Error processing response: ${r instanceof Error?r.message:"Unknown error"}`)}},"parseResponseContent"),wQ={"text/html":"html","text/xml":"xml","application/xml":"xml","application/yaml":"yaml"},SQ=s((t,e)=>{let r=e||wQ;return t in r?r[t]:YN(t)||"html"},"determineExtension"),xQ=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Request&&(r=o)}return r}:t,"combineBeforeRequestHooks"),TQ=s(t=>Array.isArray(t)?async e=>{let r=e;for(let n of t){let o=await n(r);if(o===!1)return!1;o instanceof Response&&(r=o)}return r}:t,"combineAfterResponseHooks"),EQ=s((t,e,r)=>Array.isArray(t)?async n=>{for(let o of t)await o(n,e,r)}:t,"combineAfterGenerateHooks"),kQ=s(function*(t,e,r,n){let o="http://localhost",i=lD({concurrency:n});for(let a of hD(t)){let c=new URL(a.path,o).toString(),l=new Request(c);yield new Promise(async(d,p)=>{try{if(e){let h=await e(l);if(!h){d(void 0);return}l=h}if(await i.run(()=>t.fetch(l)),!l.ssgParams){if(nS(a.path)){d(void 0);return}l.ssgParams=[{}]}let m={method:l.method,headers:l.headers};d((function*(){for(let h of l.ssgParams)yield new Promise(async(y,g)=>{try{let f=cD(a.path,h),_=await i.run(()=>t.request(f,m,{[gD]:!0}));if(_.headers.get(tf)){y(void 0);return}if(r){let x=await r(_);if(!x){y(void 0);return}_=x}let S=_.headers.get("Content-Type")?.split(";")[0]||yQ,w=await bQ(_);y({routePath:f,mimeType:S,content:w})}catch(f){g(f)}})})())}catch(m){p(m)}})}},"fetchRoutesContent"),yD=new Set,IQ=s(async(t,e,r,n)=>{let o=await t;if(!o)return;let{routePath:i,content:a,mimeType:c}=o,l=_Q(i,r,c,n),d=fD(l);return yD.has(d)||(await e.mkdir(d,{recursive:!0}),yD.add(d)),typeof a=="string"?await e.writeFile(l,a):a instanceof ArrayBuffer&&await e.writeFile(l,new Uint8Array(a)),l},"saveContentToFile"),PQ={afterResponseHook:s(t=>t.status!==200?!1:t,"afterResponseHook")},vD=s(async(t,e,r)=>{let n,o=[],i=[],a=r?.plugins||[PQ],c=[],l=[],d=[];r?.beforeRequestHook&&c.push(...Array.isArray(r.beforeRequestHook)?r.beforeRequestHook:[r.beforeRequestHook]),r?.afterResponseHook&&l.push(...Array.isArray(r.afterResponseHook)?r.afterResponseHook:[r.afterResponseHook]),r?.afterGenerateHook&&d.push(...Array.isArray(r.afterGenerateHook)?r.afterGenerateHook:[r.afterGenerateHook]);for(let p of a)p.beforeRequestHook&&c.push(...Array.isArray(p.beforeRequestHook)?p.beforeRequestHook:[p.beforeRequestHook]),p.afterResponseHook&&l.push(...Array.isArray(p.afterResponseHook)?p.afterResponseHook:[p.afterResponseHook]),p.afterGenerateHook&&d.push(...Array.isArray(p.afterGenerateHook)?p.afterGenerateHook:[p.afterGenerateHook]);try{let p=r?.dir??vQ,m=r?.concurrency??gQ,h=xQ(c.length>0?c:[_=>_]),y=TQ(l.length>0?l:[_=>_]),g=kQ(t,h,y,m);for(let _ of g)o.push(_.then(S=>{if(S)for(let w of S)i.push(IQ(w,e,p,r?.extensionMap).catch(x=>x))}));await Promise.all(o);let f=[];for(let _ of i){let S=await _;if(typeof S=="string")f.push(S);else if(S)throw S}n={success:!0,files:f}}catch(p){let m=p instanceof Error?p:new Error(String(p));n={success:!1,files:[],error:m}}return d.length>0&&await EQ(d,e,r)(n,e,r),n},"toSSG")});var bD=b(()=>{_D();iS()});var AQ,sS,wD,SD=b(()=>{bD();({write:AQ}=Bun),sS={writeFile:s(async(t,e)=>{await AQ(t,e)},"writeFile"),mkdir:s(async()=>{},"mkdir")},wD=s(async(t,e)=>vD(t,sS,e),"toSSG")});var xD,TD,ED,kD=b(()=>{xD=class{static{s(this,"WSContext")}#e;constructor(t){this.#e=t,this.raw=t.raw,this.url=t.url?new URL(t.url):null,this.protocol=t.protocol??null}send(t,e){this.#e.send(t,e??{})}raw;binaryType="arraybuffer";get readyState(){return this.#e.readyState}url;protocol;close(t,e){this.#e.close(t,e)}},TD=s(t=>new MessageEvent("message",{data:t}),"createWSMessageEvent"),ED=s(t=>(...e)=>{if(typeof e[0]=="function"){let[r,n]=e;return s(async function(i,a){let c=await r(i),l=await t(i,c,n);if(l)return l;await a()},"upgradeWebSocket")}else{let[r,n,o]=e;return(async()=>{let i=await t(r,n,o);if(!i)throw new Error("Failed to upgrade WebSocket");return i})()}},"defineWebSocketHelper")});var rf,aS=b(()=>{rf=s(t=>"server"in t.env?t.env.server:t.env,"getBunServer")});var cS,uS,lS,ID,PD=b(()=>{kD();aS();cS=s(t=>new xD({send:s((e,r)=>{t.send(e,r?.compress)},"send"),raw:t,readyState:t.readyState,url:t.data.url,protocol:t.data.protocol,close(e,r){t.close(e,r)}}),"createWSContext"),uS=ED((t,e)=>{let r=rf(t);if(!r)throw new TypeError("env has to include the 2nd argument of fetch.");if(r.upgrade(t.req.raw,{data:{events:e,url:new URL(t.req.url),protocol:t.req.url}}))return new Response(null)}),lS={open(t){let e=t.data.events;e.onOpen&&e.onOpen(new Event("open"),cS(t))},close(t,e,r){let n=t.data.events;n.onClose&&n.onClose(new CloseEvent("close",{code:e,reason:r}),cS(t))},message(t,e){let r=t.data.events;if(r.onMessage){let n=typeof e=="string"?e:e.buffer;r.onMessage(TD(n),cS(t))}}},ID=s(()=>({upgradeWebSocket:uS,websocket:lS}),"createBunWebSocket")});var AD,CD=b(()=>{aS();AD=s(t=>{let e=rf(t);if(!e)throw new TypeError("env has to include the 2nd argument of fetch.");if(typeof e.requestIP!="function")throw new TypeError("server.requestIP is not a function.");let r=e.requestIP(t.req.raw);return r?{remote:{address:r.address,addressType:r.family==="IPv6"||r.family==="IPv4"?r.family:void 0,port:r.port}}:{remote:{}}},"getConnInfo")});var OD={};On(OD,{bunFileSystemModule:()=>sS,createBunWebSocket:()=>ID,getConnInfo:()=>AD,serveStatic:()=>iD,toSSG:()=>wD,upgradeWebSocket:()=>uS,websocket:()=>lS});var $D=b(()=>{sD();SD();PD();CD()});var RD={};On(RD,{htmlCache:()=>OQ,staticAssetsCache:()=>CQ});var CQ,OQ,ND=b(()=>{"use strict";ef();CQ=s(()=>async(t,e)=>{t.header("Cache-Control",Xw.staticAssets),await e()},"staticAssetsCache"),OQ=s(()=>async(t,e)=>{t.header("Cache-Control",Xw.htmlFiles),t.header("Pragma","no-cache"),t.header("Expires","0"),await e()},"htmlCache")});function DD(t){$Q||(nl.IS_PRODUCTION?Promise.resolve().then(()=>($D(),OD)).then(({serveStatic:e})=>{Promise.resolve().then(()=>(ND(),RD)).then(({htmlCache:r,staticAssetsCache:n})=>{t.use("/assets/*",n(),e({root:"./dist"})),t.use("/*.html",r(),e({root:"./dist"})),t.use("/*",r(),e({path:"./dist/index.html",rewriteRequestPath:s(o=>o,"rewriteRequestPath")}))})}):t.get("/*",e=>e.req.path.startsWith("/api/")?e.notFound():e.json({api:`http://localhost:${nl.PORT}`,frontend:"http://localhost:5173",message:"Development mode - Frontend served by Vite dev server",mode:"development"})))}var $Q,jD=b(()=>{"use strict";ef();$Q=process.env.VERCEL==="1"||process.env.VERCEL==="true";s(DD,"setupStaticRoutes")});function NQ(){if(rs.size<=MD)return;let e=Array.from(rs.entries()).sort((r,n)=>r[1].lastAccess-n[1].lastAccess).slice(0,rs.size-MD);for(let[r]of e)rs.delete(r)}var RQ,MD,rs,nf,zD=b(()=>{"use strict";zr();gi();Lr();RQ=300*1e3,MD=100,rs=new Map;s(NQ,"evictOldestCacheEntries");nf=class{static{s(this,"FinancialContextService")}userId;constructor(e){this.userId=e}async getContext(e=!1){let r=this.userId,n=rs.get(r),o=Date.now();if(!e&&n&&n.expiresAt>o)return n.lastAccess=o,n.context;let i=await this.buildContext();return rs.set(r,{context:i,expiresAt:o+RQ,lastAccess:o}),NQ(),i}invalidateCache(){rs.delete(this.userId)}static clearAllCache(){rs.clear()}async buildContext(){let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),[o,i,a,c,l]=await Promise.all([this.getAccountBalances(),this.getMonthlyTotals(r,n),this.getCategorySpending(r,n),this.getPendingAlerts(),this.getUpcomingPayments(30)]),d=o.reduce((m,h)=>m+Number(h.balance||0),0),p=o.reduce((m,h)=>m+Number(h.availableBalance||0),0);return{totalBalance:d,availableBalance:p,monthlyIncome:i.income,monthlyExpenses:i.expenses,topCategories:a,pendingAlerts:c,upcomingPayments:l,lastUpdated:e}}async getAccountBalances(){return await No.select({id:ce.id,balance:ce.balance,availableBalance:ce.availableBalance,institutionName:ce.institutionName}).from(ce).where(Ie(J(ce.userId,this.userId),J(ce.isActive,!0)))}async getMonthlyTotals(e,r){let n=await No.select({transactionType:oe.transactionType,total:ym(oe.amount)}).from(oe).where(Ie(J(oe.userId,this.userId),Tr(oe.transactionDate,e),hr(oe.transactionDate,r))).groupBy(oe.transactionType),o=0,i=0;for(let a of n){let c=Math.abs(Number(a.total||0));a.transactionType==="credit"?o+=c:a.transactionType==="debit"&&(i+=c)}return{income:o,expenses:i}}async getCategorySpending(e,r){let n=await No.select({categoryId:oe.categoryId,categoryName:Me.name,total:ym(oe.amount)}).from(oe).leftJoin(Me,J(oe.categoryId,Me.id)).where(Ie(J(oe.userId,this.userId),J(oe.transactionType,"debit"),Tr(oe.transactionDate,e),hr(oe.transactionDate,r))).groupBy(oe.categoryId,Me.name).orderBy(Kt(ym(oe.amount))).limit(10),o=n.reduce((i,a)=>i+Math.abs(Number(a.total||0)),0);return n.map(i=>({categoryId:i.categoryId||"uncategorized",categoryName:i.categoryName||"Sem categoria",amount:Math.abs(Number(i.total||0)),percentage:o>0?Math.round(Math.abs(Number(i.total||0))/o*100):0,trend:"stable"}))}async getPendingAlerts(){return(await No.select({id:Rr.id,insightType:Rr.insightType,title:Rr.title,impactLevel:Rr.impactLevel,recommendation:Rr.recommendation}).from(Rr).where(Ie(J(Rr.userId,this.userId),J(Rr.isRead,!1))).orderBy(Kt(Rr.createdAt)).limit(5)).map(r=>({id:r.id,type:this.mapInsightTypeToAlertType(r.insightType),message:r.title,severity:r.impactLevel||"medium",actionable:!!r.recommendation}))}mapInsightTypeToAlertType(e){switch(this.normalizeInsightType(e)){case"budget_alert":return"budget_exceeded";case"warning":return"low_balance";case"spending_pattern":return"unusual_spending";case"opportunity":return"payment_due";default:return"unusual_spending"}}normalizeInsightType(e){return e.includes("_")?e:e.replace(/([A-Z])/g,"_$1").toLowerCase()}async getUpcomingPayments(e){let r=new Date,n=new Date;n.setDate(r.getDate()+e);let o=r.toISOString().split("T")[0],i=n.toISOString().split("T")[0];return(await No.select({id:Xt.id,description:Xt.description,amount:Xt.amount,scheduledDate:Xt.scheduledDate,recurrenceRule:Xt.recurrenceRule}).from(Xt).where(Ie(J(Xt.userId,this.userId),J(Xt.isActive,!0),J(Xt.executed,!1),Tr(Xt.scheduledDate,o),hr(Xt.scheduledDate,i))).orderBy(Xt.scheduledDate).limit(10)).map(c=>({id:c.id,description:c.description,amount:Math.abs(Number(c.amount)),dueDate:new Date(c.scheduledDate),isRecurring:!!c.recurrenceRule}))}}});function Xa(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}function DQ(t){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function jQ(t){return{up:"\u2191 aumentando",down:"\u2193 diminuindo",stable:"\u2192 est\xE1vel"}[t]}function UD(t){let{totalBalance:e,availableBalance:r,monthlyIncome:n,monthlyExpenses:o,topCategories:i}=t,a=n-o,c=n>0?Math.round(a/n*100):0,l=i.slice(0,5).map((d,p)=>`${p+1}. **${d.categoryName}**: ${Xa(d.amount)} (${d.percentage}% do total, ${jQ(d.trend)})`).join(`
`);return`
### Resumo Financeiro
- **Saldo Total**: ${Xa(e)}
- **Saldo Dispon\xEDvel**: ${Xa(r)}
- **Renda do M\xEAs**: ${Xa(n)}
- **Gastos do M\xEAs**: ${Xa(o)}
- **Economia do M\xEAs**: ${Xa(a)} (${c}% da renda)

### Top 5 Categorias de Gasto (M\xEAs Atual)
${l||"Nenhuma transa\xE7\xE3o registrada este m\xEAs."}

### \xDAltima Atualiza\xE7\xE3o
${DQ(t.lastUpdated)}
`.trim()}function LD(t){if(t.length===0)return"\u2705 Nenhum alerta ativo no momento.";let e={low:"\u2139\uFE0F",medium:"\u26A0\uFE0F",high:"\u{1F6A8}"};return t.map(r=>`${e[r.severity]} [${r.severity.toUpperCase()}] ${r.message}`).join(`
`)}var qD=b(()=>{"use strict";s(Xa,"formatBRL");s(DQ,"formatDateBR");s(jQ,"translateTrend");s(UD,"buildFinancialContextBlock");s(LD,"buildAlertsBlock")});var FD,BD,dS=b(()=>{FD=s(()=>{try{return!1}catch{}return!1},"isTestEnvironment"),BD=s(()=>{try{return!0}catch{}return!1},"isProductionEnvironment")});var VD,of,HD=b(()=>{dS();VD=new Set,of=s((t,e,r)=>{let n=FD()||BD(),o=r??t;VD.has(o)||n||(VD.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},"deprecated")});var ZD=b(()=>{dS();HD()});var pS,JD,GD,Ya=b(()=>{pS=[".lcl.dev",".lclstage.dev",".lclclerk.com"],JD=[".accounts.dev",".accountsstage.dev",".accounts.lclclerk.com"],GD=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"]});var ec,il=b(()=>{ec=s(t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,"isomorphicAtob")});var KD,sf=b(()=>{KD=s(t=>typeof btoa<"u"&&typeof btoa=="function"?btoa(t):typeof global<"u"&&global.Buffer?new global.Buffer(t).toString("base64"):t,"isomorphicBtoa")});function QD(t){if(!t.endsWith("$"))return!1;let e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}function ns(t,e={}){if(t=t||"",!t||!mS(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!mS(t))throw new Error("Publishable key not valid.");return null}let r=t.startsWith(WD)?"production":"development",n;try{n=ec(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!QD(n)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return e.proxyUrl?o=e.proxyUrl:r!=="development"&&e.domain&&e.isSatellite&&(o=`clerk.${e.domain}`),{instanceType:r,frontendApi:o}}function mS(t=""){try{if(!(t.startsWith(WD)||t.startsWith(MQ)))return!1;let e=t.split("_");if(e.length!==3)return!1;let r=e[2];return r?QD(ec(r)):!1}catch{return!1}}function fS(){let t=new Map;return{isDevOrStagingUrl:s(e=>{if(!e)return!1;let r=typeof e=="string"?e:e.hostname,n=t.get(r);return n===void 0&&(n=GD.some(o=>r.endsWith(o)),t.set(r,n)),n},"isDevOrStagingUrl")}}function af(t){return t.startsWith("test_")||t.startsWith("sk_test_")}async function cf(t,e=globalThis.crypto.subtle){let r=new TextEncoder().encode(t),n=await e.digest("sha-1",r);return KD(String.fromCharCode(...new Uint8Array(n))).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}var WD,MQ,uf,lf=b(()=>{Ya();il();sf();WD="pk_live_",MQ="pk_test_";s(QD,"isValidDecodedPublishableKey");s(ns,"parsePublishableKey");s(mS,"isPublishableKey");s(fS,"createDevOrStagingUrlCache");s(af,"isDevelopmentFromSecretKey");s(cf,"getCookieSuffix");uf=s((t,e)=>`${t}_${e}`,"getSuffixedCookieName")});var hS=b(()=>{Ya();il();sf();lf()});var zQ,UQ,XD,YD,LQ,df,ej=b(()=>{zQ={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:s((t,e)=>e<5,"shouldRetry"),retryImmediately:!1,jitter:!0},UQ=100,XD=s(async t=>new Promise(e=>setTimeout(e,t)),"sleep"),YD=s((t,e)=>e?t*(1+Math.random()):t,"applyJitter"),LQ=s(t=>{let e=0,r=s(()=>{let n=t.initialDelay,o=t.factor,i=n*Math.pow(o,e);return i=YD(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)},"calculateDelayInMs");return async()=>{await XD(r()),e++}},"createExponentialDelayAsyncFn"),df=s(async(t,e={})=>{let r=0,{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:a,retryImmediately:c,jitter:l,onBeforeRetry:d}={...zQ,...e},p=LQ({initialDelay:o,maxDelayBetweenRetries:i,factor:a,jitter:l});for(;;)try{return await t()}catch(m){if(r++,!n(m,r))throw m;d&&await d(r),c&&r===1?await XD(YD(UQ,l)):await p()}},"retry")});var tj=b(()=>{ej()});var gS=b(()=>{});function yS(t){return pS.some(e=>t.startsWith("accounts.")&&t.endsWith(e))}function vS(t){return JD.some(e=>t.endsWith(e)&&!t.endsWith(".clerk"+e))}var rj=b(()=>{Ya();gS();s(yS,"isLegacyDevAccountPortalOrigin");s(vS,"isCurrentDevAccountPortalOrigin")});var _S=b(()=>{Ya();gS();rj()});function bS(t){function e(r){let n=r??this;if(!n)throw new TypeError(`${t.kind||t.name} type guard requires an error object`);return n instanceof t}return s(e,"typeGuard"),e}function wS(t){return new pf(t)}function xS({packageName:t,customMessages:e}){let r=t;function n(i,a){if(!a)return`${r}: ${i}`;let c=i,l=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let d of l){let p=(a[d[1]]||"").toString();c=c.replace(`{{${d[1]}}}`,p)}return`${r}: ${c}`}s(n,"buildMessage");let o={...qQ,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}function TS(t){return t&&"clerkError"in t}var pf,Cje,SS,mf,Oje,qQ,ij,$je,aj=b(()=>{s(bS,"createErrorTypeGuard");pf=class{static{s(this,"ClerkAPIError")}static kind="ClerkApiError";code;message;longMessage;meta;constructor(t){let e={code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t.meta?.param_name,sessionId:t.meta?.session_id,emailAddresses:t.meta?.email_addresses,identifiers:t.meta?.identifiers,zxcvbn:t.meta?.zxcvbn,plan:t.meta?.plan,isPlanUpgradePossible:t.meta?.is_plan_upgrade_possible}};this.code=e.code,this.message=e.message,this.longMessage=e.longMessage,this.meta=e.meta}},Cje=bS(pf);s(wS,"parseError");SS=class nj extends Error{static{s(this,"ClerkError")}static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(e){super(new.target.formatMessage(new.target.kind,e.message,e.code,e.docsUrl),{cause:e.cause}),Object.setPrototypeOf(this,nj.prototype),this.code=e.code,this.docsUrl=e.docsUrl,this.longMessage=e.longMessage,this.cause=e.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(e,r,n,o){let i="Clerk:",a=new RegExp(i.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${i} ${r.trim()}

(code="${n}")

`,o&&(r+=`

Docs: ${o}`),r}},mf=class oj extends SS{static{s(this,"ClerkAPIResponseError")}static kind="ClerkAPIResponseError";status;clerkTraceId;retryAfter;errors;constructor(e,r){let{data:n,status:o,clerkTraceId:i,retryAfter:a}=r;super({...r,message:e,code:"api_response_error"}),Object.setPrototypeOf(this,oj.prototype),this.status=o,this.clerkTraceId=i,this.retryAfter=a,this.errors=(n||[]).map(c=>new pf(c))}toString(){let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(r=>JSON.stringify(r))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e}static formatMessage(e,r,n,o){return r}},Oje=bS(mf),qQ=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});s(xS,"buildErrorThrower");ij=class sj extends SS{static{s(this,"ClerkRuntimeError")}static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(e,r){super({...r,message:e}),Object.setPrototypeOf(this,sj.prototype)}},$je=bS(ij);s(TS,"isClerkAPIResponseError")});var ff=b(()=>{aj()});var FQ,m2e,ES=b(()=>{ZD();hS();tj();_S();ff();hS();FQ=xS({packageName:"@clerk/backend"}),{isDevOrStagingUrl:m2e}=fS()});var cj,it,Er,Et,sl,hf,gf=b(()=>{cj={InvalidSecretKey:"clerk_key_invalid"},it={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",RemoteJWKInvalid:"jwk-remote-invalid",RemoteJWKMissing:"jwk-remote-missing",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},Er={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk-generated JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable.",EnsureClockSync:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization)."},Et=class uj extends Error{static{s(this,"_TokenVerificationError")}constructor({action:e,message:r,reason:n}){super(r),Object.setPrototypeOf(this,uj.prototype),this.reason=n,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}},sl={TokenInvalid:"token-invalid",InvalidSecretKey:"secret-key-invalid",UnexpectedError:"unexpected-error"},hf=class lj extends Error{static{s(this,"_MachineTokenVerificationError")}constructor({message:e,code:r,status:n}){super(e),Object.setPrototypeOf(this,lj.prototype),this.code=r,this.status=n}getFullMessage(){return`${this.message} (code=${this.code}, status=${this.status})`}}});import{webcrypto as dj}from"node:crypto";var pj=b(()=>{});var mj=b(()=>{il()});function VQ(t,e,r={}){if(!e.codes){e.codes={};for(let l=0;l<e.chars.length;++l)e.codes[e.chars[l]]=l}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let o=new(r.out??Uint8Array)(n*e.bits/8|0),i=0,a=0,c=0;for(let l=0;l<n;++l){let d=e.codes[t[l]];if(d===void 0)throw new SyntaxError("Invalid character "+t[l]);a=a<<e.bits|d,i+=e.bits,i>=8&&(i-=8,o[c++]=255&a>>i)}if(i>=e.bits||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return o}function HQ(t,e,r={}){let{pad:n=!0}=r,o=(1<<e.bits)-1,i="",a=0,c=0;for(let l=0;l<t.length;++l)for(c=c<<8|255&t[l],a+=8;a>e.bits;)a-=e.bits,i+=e.chars[o&c>>a];if(a&&(i+=e.chars[o&c<<e.bits-a]),n)for(;i.length*e.bits&7;)i+="=";return i}function ZQ(t){let e=PS[t],r=hj[t];if(!e||!r)throw new Error(`Unsupported algorithm ${t}, expected one of ${AS.join(",")}.`);return{hash:{name:PS[t]},name:hj[t]}}function e7(t){let e=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=ec(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n);for(let i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return o}function t7(t,e,r){if(typeof t=="object")return Do.crypto.subtle.importKey("jwk",t,e,!1,[r]);let n=e7(t),o=r==="sign"?"pkcs8":"spki";return Do.crypto.subtle.importKey(o,n,e,!1,[r])}async function $S(t,e){let{header:r,signature:n,raw:o}=t,a=new TextEncoder().encode([o.header,o.payload].join(".")),c=ZQ(r.alg);try{let l=await t7(e,c,"verify");return{data:await Do.crypto.subtle.verify(c.name,l,n,a)}}catch(l){return{errors:[new Et({reason:it.TokenInvalidSignature,message:l?.message})]}}}function ao(t){let e=(t||"").toString().split(".");if(e.length!==3)return{errors:[new Et({reason:it.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,n,o]=e,i=new TextDecoder,a=JSON.parse(i.decode(kS.parse(r,{loose:!0}))),c=JSON.parse(i.decode(kS.parse(n,{loose:!0}))),l=kS.parse(o,{loose:!0});return{data:{header:a,payload:c,signature:l,raw:{header:r,payload:n,signature:o,text:t}}}}async function gj(t,e){let{audience:r,authorizedParties:n,clockSkewInMs:o,key:i}=e,a=o||r7,{data:c,errors:l}=ao(t);if(l)return{errors:l};let{header:d,payload:p}=c;try{let{typ:y,alg:g}=d;CS(y),OS(g);let{azp:f,sub:_,aud:S,iat:w,exp:x,nbf:I}=p;KQ(_),GQ([S],[r]),WQ(f,n),QQ(x,a),XQ(I,a),YQ(w,a)}catch(y){return{errors:[y]}}let{data:m,errors:h}=await $S(c,i);return h?{errors:[new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Error verifying JWT signature. ${h[0]}`})]}:m?{data:p}:{errors:[new Et({reason:it.TokenInvalidSignature,message:"JWT signature is invalid."})]}}var BQ,Do,kS,fj,PS,IS,hj,AS,JQ,GQ,CS,OS,KQ,WQ,QQ,XQ,YQ,r7,RS=b(()=>{gf();pj();mj();BQ=fetch.bind(globalThis),Do={crypto:dj,get fetch(){return BQ},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},kS={parse(t,e){return VQ(t,fj,e)},stringify(t,e){return HQ(t,fj,e)}},fj={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};s(VQ,"parse");s(HQ,"stringify");PS={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},IS="RSASSA-PKCS1-v1_5",hj={RS256:IS,RS384:IS,RS512:IS},AS=Object.keys(PS);s(ZQ,"getCryptoAlgorithm");JQ=s(t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),"isArrayString"),GQ=s((t,e)=>{let r=[e].flat().filter(i=>!!i),n=[t].flat().filter(i=>!!i);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(JQ(t)&&!t.some(i=>r.includes(i)))throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}},"assertAudienceClaim"),CS=s(t=>{if(!(typeof t>"u")&&t!=="JWT")throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},"assertHeaderType"),OS=s(t=>{if(!AS.includes(t))throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${AS}.`})},"assertHeaderAlgorithm"),KQ=s(t=>{if(typeof t!="string")throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},"assertSubClaim"),WQ=s((t,e)=>{if(!(!t||!e||e.length===0)&&!e.includes(t))throw new Et({reason:it.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${e}".`})},"assertAuthorizedPartiesClaim"),QQ=s((t,e)=>{if(typeof t!="number")throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()<=r.getTime()-e)throw new Et({reason:it.TokenExpired,message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},"assertExpirationClaim"),XQ=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new Et({reason:it.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertActivationClaim"),YQ=s((t,e)=>{if(typeof t>"u")return;if(typeof t!="number")throw new Et({action:Er.EnsureClerkJWT,reason:it.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(t),n.getTime()>r.getTime()+e)throw new Et({reason:it.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},"assertIssuedAtClaim");s(e7,"pemToBuffer");s(t7,"importKey");r7=5*1e3;s($S,"hasValidSignature");s(ao,"decodeJwt");s(gj,"verifyJwt")});var yj,n7,vj,yf,NS=b(()=>{yj=s(t=>{throw TypeError(t)},"__typeError"),n7=s((t,e,r)=>e.has(t)||yj("Cannot "+r),"__accessCheck"),vj=s((t,e,r)=>e.has(t)?yj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),yf=s((t,e,r)=>(n7(t,e,"access private method"),r),"__privateMethod")});function DS(t){return t?`https://${t.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}var jS=b(()=>{s(DS,"buildAccountsBaseUrl")});var o7,i7,s7,a7,c7,u7,MS,l7,_j,d7,vf,bj,p7,zS,US=b(()=>{o7={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},i7=new Set(["first_factor","second_factor","multi_factor"]),s7=new Set(["strict_mfa","strict","moderate","lax"]),a7=s(t=>typeof t=="number"&&t>0,"isValidMaxAge"),c7=s(t=>i7.has(t),"isValidLevel"),u7=s(t=>s7.has(t),"isValidVerificationType"),MS=s(t=>t.replace(/^(org:)*/,"org:"),"prefixWithOrg"),l7=s((t,e)=>{let{orgId:r,orgRole:n,orgPermissions:o}=e;return!t.role&&!t.permission||!r||!n||!o?null:t.permission?o.includes(MS(t.permission)):t.role?MS(n)===MS(t.role):null},"checkOrgAuthorization"),_j=s((t,e)=>{let{org:r,user:n}=vf(t),[o,i]=e.split(":"),a=i||o;return o==="org"?r.includes(a):o==="user"?n.includes(a):[...r,...n].includes(a)},"checkForFeatureOrPlan"),d7=s((t,e)=>{let{features:r,plans:n}=e;return t.feature&&r?_j(r,t.feature):t.plan&&n?_j(n,t.plan):null},"checkBillingAuthorization"),vf=s(t=>{let e=t?t.split(",").map(r=>r.trim()):[];return{org:e.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:e.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},"splitByScope"),bj=s(t=>{if(!t)return!1;let e=s(o=>typeof o=="string"?o7[o]:o,"convertConfigToObject"),r=typeof t=="string"&&u7(t),n=typeof t=="object"&&c7(t.level)&&a7(t.afterMinutes);return r||n?e.bind(null,t):!1},"validateReverificationConfig"),p7=s((t,{factorVerificationAge:e})=>{if(!t.reverification||!e)return null;let r=bj(t.reverification);if(!r)return null;let{level:n,afterMinutes:o}=r(),[i,a]=e,c=i!==-1?o>i:null,l=a!==-1?o>a:null;switch(n){case"first_factor":return c;case"second_factor":return a!==-1?l:c;case"multi_factor":return a===-1?c:c&&l}},"checkReverificationAuthorization"),zS=s(t=>e=>{if(!t.userId)return!1;let r=d7(e,t),n=l7(e,t),o=p7(e,t);return[r||n,o].some(i=>i===null)?[r||n,o].some(i=>i===!0):[r||n,o].every(i=>i===!0)},"createCheckAuthorization")});var wj=b(()=>{US()});function f7({features:t,permissions:e,featurePermissionMap:r}){if(!t||!e||!r)return[];let n=[];for(let o=0;o<t.length;o++){let i=t[o];if(o>=r.length)continue;let a=r[o];if(a)for(let c=0;c<a.length;c++)a[c]===1&&n.push(`org:${i}:${e[c]}`)}return n}var m7,Sj,xj=b(()=>{US();m7=s(({per:t,fpm:e})=>{if(!t||!e)return{permissions:[],featurePermissionMap:[]};let r=t.split(",").map(n=>n.trim());return{permissions:r,featurePermissionMap:e.split(",").map(n=>Number.parseInt(n.trim(),10)).map(n=>n.toString(2).padStart(r.length,"0").split("").map(o=>Number.parseInt(o,10)).reverse()).filter(Boolean)}},"parsePermissions");s(f7,"buildOrgPermissions");Sj=s(t=>{let e,r,n,o,i=t.fva??null,a=t.sts??null;switch(t.v){case 2:if(t.o){e=t.o?.id,n=t.o?.slg,t.o?.rol&&(r=`org:${t.o?.rol}`);let{org:c}=vf(t.fea),{permissions:l,featurePermissionMap:d}=m7({per:t.o?.per,fpm:t.o?.fpm});o=f7({features:c,featurePermissionMap:d,permissions:l})}break;default:e=t.org_id,r=t.org_role,n=t.org_slug,o=t.org_permissions;break}return{sessionClaims:t,sessionId:t.sid,sessionStatus:a,actor:t.act,userId:t.sub,orgId:e,orgRole:r,orgSlug:n,orgPermissions:o,factorVerificationAge:i}},"__experimental_JWTPayloadToAuthObjectProperties")});var kj=Fe(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.parse=w7;_f.serialize=S7;var h7=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,g7=/^[\u0021-\u003A\u003C-\u007E]*$/,y7=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,v7=/^[\u0020-\u003A\u003D-\u007E]*$/,_7=Object.prototype.toString,b7=(()=>{let t=s(function(){},"C");return t.prototype=Object.create(null),t})();function w7(t,e){let r=new b7,n=t.length;if(n<2)return r;let o=e?.decode||x7,i=0;do{let a=t.indexOf("=",i);if(a===-1)break;let c=t.indexOf(";",i),l=c===-1?n:c;if(a>l){i=t.lastIndexOf(";",a-1)+1;continue}let d=Tj(t,i,a),p=Ej(t,a,d),m=t.slice(d,p);if(r[m]===void 0){let h=Tj(t,a+1,l),y=Ej(t,l,h),g=o(t.slice(h,y));r[m]=g}i=l+1}while(i<n);return r}s(w7,"parse");function Tj(t,e,r){do{let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}s(Tj,"startIndex");function Ej(t,e,r){for(;e>r;){let n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}s(Ej,"endIndex");function S7(t,e,r){let n=r?.encode||encodeURIComponent;if(!h7.test(t))throw new TypeError(`argument name is invalid: ${t}`);let o=n(e);if(!g7.test(o))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+o;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!y7.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!v7.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!T7(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}s(S7,"serialize");function x7(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}s(x7,"decode");function T7(t){return _7.call(t)==="[object Date]"}s(T7,"isDate")});function E7(t){for(var e=[],r=0;r<t.length;){var n=t[r];if(n==="*"||n==="+"||n==="?"){e.push({type:"MODIFIER",index:r,value:t[r++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(n==="{"){e.push({type:"OPEN",index:r,value:t[r++]});continue}if(n==="}"){e.push({type:"CLOSE",index:r,value:t[r++]});continue}if(n===":"){for(var o="",i=r+1;i<t.length;){var a=t.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:o}),r=i;continue}if(n==="("){var c=1,l="",i=r+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){l+=t[i++]+t[i++];continue}if(t[i]===")"){if(c--,c===0){i++;break}}else if(t[i]==="("&&(c++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=t[i++]}if(c)throw new TypeError("Unbalanced pattern at ".concat(r));if(!l)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:l}),r=i;continue}e.push({type:"CHAR",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}function k7(t,e){e===void 0&&(e={});for(var r=E7(t),n=e.prefixes,o=n===void 0?"./":n,i=e.delimiter,a=i===void 0?"/#?":i,c=[],l=0,d=0,p="",m=function(R){if(d<r.length&&r[d].type===R)return r[d++].value},h=function(R){var A=m(R);if(A!==void 0)return A;var D=r[d],M=D.type,Q=D.index;throw new TypeError("Unexpected ".concat(M," at ").concat(Q,", expected ").concat(R))},y=function(){for(var R="",A;A=m("CHAR")||m("ESCAPED_CHAR");)R+=A;return R},g=function(R){for(var A=0,D=a;A<D.length;A++){var M=D[A];if(R.indexOf(M)>-1)return!0}return!1},f=function(R){var A=c[c.length-1],D=R||(A&&typeof A=="string"?A:"");if(A&&!D)throw new TypeError('Must have text between two parameters, missing text after "'.concat(A.name,'"'));return!D||g(D)?"[^".concat(os(a),"]+?"):"(?:(?!".concat(os(D),")[^").concat(os(a),"])+?")};d<r.length;){var _=m("CHAR"),S=m("NAME"),w=m("PATTERN");if(S||w){var x=_||"";o.indexOf(x)===-1&&(p+=x,x=""),p&&(c.push(p),p=""),c.push({name:S||l++,prefix:x,suffix:"",pattern:w||f(x),modifier:m("MODIFIER")||""});continue}var I=_||m("ESCAPED_CHAR");if(I){p+=I;continue}if(p&&(c.push(p),p=""),m("OPEN")){var x=y(),N=m("NAME")||"",$=m("PATTERN")||"",O=y();h("CLOSE"),c.push({name:N||($?l++:""),pattern:N&&!$?f(x):$,prefix:x,suffix:O,modifier:m("MODIFIER")||""});continue}h("END")}return c}function I7(t,e){var r=[];return P7(Pj(t,r,e),r,e)}function P7(t,e,r){r===void 0&&(r={});var n=r.decode,o=n===void 0?function(i){return i}:n;return function(i){var a=t.exec(i);if(!a)return!1;for(var c=a[0],l=a.index,d=Object.create(null),p=function(h){if(a[h]===void 0)return"continue";var y=e[h-1];y.modifier==="*"||y.modifier==="+"?d[y.name]=a[h].split(y.prefix+y.suffix).map(function(g){return o(g,y)}):d[y.name]=o(a[h],y)},m=1;m<a.length;m++)p(m);return{path:c,index:l,params:d}}}function os(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Ij(t){return t&&t.sensitive?"":"i"}function A7(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(t.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(t.source);return t}function C7(t,e,r){var n=t.map(function(o){return Pj(o,e,r).source});return new RegExp("(?:".concat(n.join("|"),")"),Ij(r))}function O7(t,e,r){return $7(k7(t,r),e,r)}function $7(t,e,r){r===void 0&&(r={});for(var n=r.strict,o=n===void 0?!1:n,i=r.start,a=i===void 0?!0:i,c=r.end,l=c===void 0?!0:c,d=r.encode,p=d===void 0?function(D){return D}:d,m=r.delimiter,h=m===void 0?"/#?":m,y=r.endsWith,g=y===void 0?"":y,f="[".concat(os(g),"]|$"),_="[".concat(os(h),"]"),S=a?"^":"",w=0,x=t;w<x.length;w++){var I=x[w];if(typeof I=="string")S+=os(p(I));else{var N=os(p(I.prefix)),$=os(p(I.suffix));if(I.pattern)if(e&&e.push(I),N||$)if(I.modifier==="+"||I.modifier==="*"){var O=I.modifier==="*"?"?":"";S+="(?:".concat(N,"((?:").concat(I.pattern,")(?:").concat($).concat(N,"(?:").concat(I.pattern,"))*)").concat($,")").concat(O)}else S+="(?:".concat(N,"(").concat(I.pattern,")").concat($,")").concat(I.modifier);else{if(I.modifier==="+"||I.modifier==="*")throw new TypeError('Can not repeat "'.concat(I.name,'" without a prefix and suffix'));S+="(".concat(I.pattern,")").concat(I.modifier)}else S+="(?:".concat(N).concat($,")").concat(I.modifier)}}if(l)o||(S+="".concat(_,"?")),S+=r.endsWith?"(?=".concat(f,")"):"$";else{var R=t[t.length-1],A=typeof R=="string"?_.indexOf(R[R.length-1])>-1:R===void 0;o||(S+="(?:".concat(_,"(?=").concat(f,"))?")),A||(S+="(?=".concat(_,"|").concat(f,")"))}return new RegExp(S,Ij(r))}function Pj(t,e,r){return t instanceof RegExp?A7(t,e):Array.isArray(t)?C7(t,e,r):O7(t,e,r)}function LS(t,e){try{return I7(t,e)}catch(r){throw new Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${r.message}`)}}var Aj=b(()=>{s(E7,"_");s(k7,"F");s(I7,"H");s(P7,"I");s(os,"s");s(Ij,"D");s(A7,"$");s(C7,"W");s(O7,"L");s($7,"U");s(Pj,"P");s(LS,"match")});var Cj=b(()=>{Aj()});var Oj=b(()=>{});var $j=b(()=>{Oj()});function Rj(t,e){return Object.keys(t).reduce((r,n)=>({...r,[n]:e[n]||r[n]}),{...t})}function n2(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}function L7(t){ns(t,{fatal:!0})}function ie(...t){return t.filter(e=>e).join(GS).replace(B7,GS)}function Lj(t,e,r){if(!o2(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);if(Array.isArray(t))throw new TypeError("Expected an object, got an array");return KS(t,e,r)}function i2(t){let e=t.trim();e=e.replace(PX,qj).replace(AX,qj),e=e.replace(OX,"\0");let r=0,n=e.length;for(;e.charAt(r)==="\0";)r++;if(r===n)return[];for(;e.charAt(n-1)==="\0";)n--;return e.slice(r,n).split(/\0/g)}function $X(t){let e=i2(t);for(let r=0;r<e.length;r++){let n=e[r],o=CX.exec(n);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(r,1,n.slice(0,i),n.slice(i))}}return e}function RX(t,e){let[r,n,o]=DX(t,e);return r+n.map(NX(e?.locale)).join(e?.delimiter??" ")+o}function Bj(t,e){return RX(t,{delimiter:"_",...e})}function NX(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function DX(t,e={}){let r=e.split??(e.separateNumbers?$X:i2),n=e.prefixCharacters??Fj,o=e.suffixCharacters??Fj,i=0,a=t.length;for(;i<t.length;){let c=t.charAt(i);if(!n.includes(c))break;i++}for(;a>i;){let c=a-1,l=t.charAt(c);if(!o.includes(l))break;a=c}return[t.slice(0,i),r(t.slice(i,a)),t.slice(a)]}function jX(t,e){if(Array.isArray(t)){if(t.some(o=>o.constructor!==Vj))throw new Error("obj must be array of plain objects");e={deep:!0,exclude:[],parsingOptions:{},...e};let n=e.snakeCase||(o=>Bj(o,e.parsingOptions));return t.map(o=>Lj(o,(i,a)=>[Hj(e.exclude,i)?i:n(i),a,Zj(i,a,e)],e))}else if(t.constructor!==Vj)throw new Error("obj must be an plain object");e={deep:!0,exclude:[],parsingOptions:{},...e};let r=e.snakeCase||(n=>Bj(n,e.parsingOptions));return Lj(t,(n,o)=>[Hj(e.exclude,n)?n:r(n),o,Zj(n,o,e)],e)}function Hj(t,e){return t.some(r=>typeof r=="string"?r===e:r.test(e))}function Zj(t,e,r){return r.shouldRecurse?{shouldRecurse:r.shouldRecurse(t,e)}:void 0}function kY(t){let e,r;return Array.isArray(t)?{data:t.map(o=>ZS(o))}:IY(t)?(e=t.data.map(n=>ZS(n)),r=t.total_count,{data:e,totalCount:r}):{data:ZS(t)}}function IY(t){return!t||typeof t!="object"||!("data"in t)?!1:Array.isArray(t.data)&&t.data!==void 0}function PY(t){return t.total_count}function ZS(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return ZX.fromJSON(t);switch(t.object){case Ye.AccountlessApplication:return MX.fromJSON(t);case Ye.ActorToken:return zX.fromJSON(t);case Ye.AllowlistIdentifier:return UX.fromJSON(t);case Ye.ApiKey:return LX.fromJSON(t);case Ye.BlocklistIdentifier:return qX.fromJSON(t);case Ye.Client:return BX.fromJSON(t);case Ye.Cookies:return HX.fromJSON(t);case Ye.Domain:return JX.fromJSON(t);case Ye.EmailAddress:return x2.fromJSON(t);case Ye.Email:return GX.fromJSON(t);case Ye.IdpOAuthAccessToken:return WX.fromJSON(t);case Ye.Instance:return QX.fromJSON(t);case Ye.InstanceRestrictions:return XX.fromJSON(t);case Ye.InstanceSettings:return YX.fromJSON(t);case Ye.Invitation:return C2.fromJSON(t);case Ye.JwtTemplate:return oY.fromJSON(t);case Ye.Machine:return eY.fromJSON(t);case Ye.MachineScope:return tY.fromJSON(t);case Ye.MachineSecretKey:return rY.fromJSON(t);case Ye.M2MToken:return nY.fromJSON(t);case Ye.OauthAccessToken:return iY.fromJSON(t);case Ye.OAuthApplication:return sY.fromJSON(t);case Ye.Organization:return z2.fromJSON(t);case Ye.OrganizationInvitation:return aY.fromJSON(t);case Ye.OrganizationMembership:return cY.fromJSON(t);case Ye.OrganizationSettings:return lY.fromJSON(t);case Ye.PhoneNumber:return V2.fromJSON(t);case Ye.ProxyCheck:return dY.fromJSON(t);case Ye.RedirectUrl:return pY.fromJSON(t);case Ye.SamlConnection:return mY.fromJSON(t);case Ye.SignInToken:return yY.fromJSON(t);case Ye.SignUpAttempt:return _Y.fromJSON(t);case Ye.Session:return p2.fromJSON(t);case Ye.SmsMessage:return bY.fromJSON(t);case Ye.Token:return wY.fromJSON(t);case Ye.TotalCount:return PY(t);case Ye.User:return xY.fromJSON(t);case Ye.WaitlistEntry:return TY.fromJSON(t);case Ye.BillingPlan:return uM.fromJSON(t);case Ye.BillingSubscription:return EY.fromJSON(t);case Ye.BillingSubscriptionItem:return dM.fromJSON(t);case Ye.Feature:return aM.fromJSON(t);default:return t}}function dl(t){return AY(s(async r=>{let{secretKey:n,machineSecretKey:o,useMachineSecretKey:i=!1,requireSecretKey:a=!0,apiUrl:c=e2,apiVersion:l=t2,userAgent:d=r2,skipApiVersionInUrl:p=!1}=t,{path:m,method:h,queryParams:y,headerParams:g,bodyParams:f,formData:_,options:S}=r,{deepSnakecaseBodyParamKeys:w=!1}=S||{};a&&n2(n);let x=p?ie(c,m):ie(c,l,m),I=new URL(x);if(y){let R=Jj({...y});for(let[A,D]of Object.entries(R))D&&[D].flat().forEach(M=>I.searchParams.append(A,M))}let N=new Headers({"Clerk-API-Version":tx,[Ce.Headers.UserAgent]:d,...g}),$=Ce.Headers.Authorization;N.has($)||(i&&o?N.set($,`Bearer ${o}`):n&&N.set($,`Bearer ${n}`));let O;try{if(_)O=await Do.fetch(I.href,{method:h,headers:N,body:_});else{N.set("Content-Type","application/json");let D=s(()=>{if(!(h!=="GET"&&f&&Object.keys(f).length>0))return null;let Q=s(Z=>Jj(Z,{deep:w}),"formatKeys");return{body:JSON.stringify(Array.isArray(f)?f.map(Q):Q(f))}},"buildBody");O=await Do.fetch(I.href,{method:h,headers:N,...D()})}let A=await(O?.headers&&O.headers?.get(Ce.Headers.ContentType)===Ce.ContentTypes.Json?O.json():O.text());return O.ok?{...kY(A),errors:null}:{data:null,errors:Kj(A),status:O?.status,statusText:O?.statusText,clerkTraceId:JS(A,O?.headers),retryAfter:Gj(O?.headers)}}catch(R){return R instanceof Error?{data:null,errors:[{code:"unexpected_error",message:R.message||"Unexpected error"}],clerkTraceId:JS(R,O?.headers)}:{data:null,errors:Kj(R),status:O?.status,statusText:O?.statusText,clerkTraceId:JS(R,O?.headers),retryAfter:Gj(O?.headers)}}},"requestFn"))}function JS(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:e?.get("cf-ray")||""}function Gj(t){let e=t?.get("Retry-After");if(!e)return;let r=parseInt(e,10);if(!isNaN(r))return r}function Kj(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(wS):[]}return[]}function AY(t){return async(...e)=>{let{data:r,errors:n,totalCount:o,status:i,statusText:a,clerkTraceId:c,retryAfter:l}=await t(...e);if(n){let d=new mf(a||"",{data:[],status:i,clerkTraceId:c,retryAfter:l});throw d.errors=n,d}return typeof o<"u"?{data:r,totalCount:o}:r}}function rc(t){let e=dl(t);return{__experimental_accountlessApplications:new H7(dl({...t,requireSecretKey:!1})),actorTokens:new V7(e),allowlistIdentifiers:new Z7(e),apiKeys:new J7(dl({...t,skipApiVersionInUrl:!0})),betaFeatures:new K7(e),blocklistIdentifiers:new W7(e),billing:new kX(e),clients:new Q7(e),domains:new X7(e),emailAddresses:new Y7(e),idPOAuthAccessToken:new tX(dl({...t,skipApiVersionInUrl:!0})),instance:new rX(e),invitations:new nX(e),jwks:new aX(e),jwtTemplates:new cX(e),machines:new oX(e),m2m:new iX(dl({...t,skipApiVersionInUrl:!0,requireSecretKey:!1,useMachineSecretKey:!0})),oauthApplications:new lX(e),organizations:new uX(e),phoneNumbers:new dX(e),proxyChecks:new mX(e),redirectUrls:new fX(e),samlConnections:new hX(e),sessions:new gX(e),signInTokens:new yX(e),signUps:new vX(e),testingTokens:new bX(e),users:new wX(e),waitlistEntries:new SX(e),webhooks:new xX(e)}}function QS(t){return CY.some(e=>t.startsWith(e))}function XS(t){if(t.startsWith(rx))return We.M2MToken;if(t.startsWith(nx))return We.OAuthToken;if(t.startsWith(ox))return We.ApiKey;throw new Error("Unknown machine token type")}function OY(t,e,r){let{actor:n,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m}=Sj(r),h=rc(t),y=DY({sessionId:o,sessionToken:e,fetcher:s(async(g,f,_)=>(await h.sessions.getToken(g,f||"",_)).jwt,"fetcher")});return{tokenType:We.SessionToken,actor:n,sessionClaims:r,sessionId:o,sessionStatus:i,userId:a,orgId:c,orgRole:l,orgSlug:d,orgPermissions:p,factorVerificationAge:m,getToken:y,has:zS({orgId:c,orgRole:l,orgPermissions:p,userId:a,factorVerificationAge:m,features:r.fea||"",plans:r.pla||""}),debug:Af({...t,sessionToken:e}),isAuthenticated:!0}}function hM(t,e){return{tokenType:We.SessionToken,sessionClaims:null,sessionId:null,sessionStatus:e??null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:Af(t),isAuthenticated:!1}}function $Y(t,e,r,n){let o={id:r.id,subject:r.subject,getToken:s(()=>Promise.resolve(e),"getToken"),has:s(()=>!1,"has"),debug:Af(n),isAuthenticated:!0};switch(t){case We.ApiKey:{let i=r;return{...o,tokenType:t,name:i.name,claims:i.claims,scopes:i.scopes,userId:i.subject.startsWith("user_")?i.subject:null,orgId:i.subject.startsWith("org_")?i.subject:null}}case We.M2MToken:{let i=r;return{...o,tokenType:t,claims:i.claims,scopes:i.scopes,machineId:i.subject}}case We.OAuthToken:{let i=r;return{...o,tokenType:t,scopes:i.scopes,userId:i.subject,clientId:i.clientId}}default:throw new Error(`Invalid token type: ${t}`)}}function RY(t,e){let r={id:null,subject:null,scopes:null,has:s(()=>!1,"has"),getToken:s(()=>Promise.resolve(null),"getToken"),debug:Af(e),isAuthenticated:!1};switch(t){case We.ApiKey:return{...r,tokenType:t,name:null,claims:null,scopes:null,userId:null,orgId:null};case We.M2MToken:return{...r,tokenType:t,claims:null,scopes:null,machineId:null};case We.OAuthToken:return{...r,tokenType:t,scopes:null,userId:null,clientId:null};default:throw new Error(`Invalid token type: ${t}`)}}function NY(){return{isAuthenticated:!1,tokenType:null,getToken:s(()=>Promise.resolve(null),"getToken"),has:s(()=>!1,"has"),debug:s(()=>({}),"debug")}}function ss(t){let{authenticateContext:e,headers:r=new Headers,token:n}=t,o=s((({treatPendingAsSignedOut:i=!0}={})=>{if(t.tokenType===We.SessionToken){let{sessionClaims:c}=t,l=OY(e,n,c);return i&&l.sessionStatus==="pending"?hM(void 0,l.sessionStatus):l}let{machineData:a}=t;return $Y(t.tokenType,n,a,e)}),"toAuth");return{status:ml.SignedIn,reason:null,message:null,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!0,isAuthenticated:!0,tokenType:t.tokenType,toAuth:o,headers:r,token:n}}function Hn(t){let{authenticateContext:e,headers:r=new Headers,reason:n,message:o="",tokenType:i}=t,a=s((()=>i===We.SessionToken?hM({...e,status:ml.SignedOut,reason:n,message:o}):RY(i,{reason:n,message:o,headers:r})),"toAuth");return ix({status:ml.SignedOut,reason:n,message:o,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:i,toAuth:a,headers:r,token:null})}function jY(t,e,r="",n){return ix({status:ml.Handshake,reason:e,message:r,publishableKey:t.publishableKey||"",isSatellite:t.isSatellite||!1,domain:t.domain||"",proxyUrl:t.proxyUrl||"",signInUrl:t.signInUrl||"",signUpUrl:t.signUpUrl||"",afterSignInUrl:t.afterSignInUrl||"",afterSignUpUrl:t.afterSignUpUrl||"",isSignedIn:!1,isAuthenticated:!1,tokenType:We.SessionToken,toAuth:s(()=>null,"toAuth"),headers:n,token:null})}function MY(){let t=NY();return ix({status:ml.SignedOut,reason:cr.TokenTypeMismatch,message:"",proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",signInUrl:"",signUpUrl:"",afterSignInUrl:"",afterSignUpUrl:"",isSignedIn:!1,isAuthenticated:!1,tokenType:null,toAuth:s(()=>t,"toAuth"),headers:new Headers,token:null})}function ex(t){return Cf[t]}function LY(){return Object.values(Cf)}function _M(t,e,r=!0){Cf[t]=e,YS=r?Date.now():-1}function bM(t){let{kid:e,pem:r}=t,n=`local-${e}`,o=ex(n);if(o)return o;if(!r)throw new Et({action:Er.SetClerkJWTKey,message:"Missing local JWK.",reason:it.LocalJWKMissing});let i=r.replace(/\r\n|\n|\r/g,"").replace(qY,"").replace(FY,"").replace(BY,"").replace(VY,"").replace(/\+/g,"-").replace(/\//g,"_"),a={kid:n,kty:"RSA",alg:"RS256",n:i,e:"AQAB"};return _M(n,a,!1),a}async function wM(t){let{secretKey:e,apiUrl:r=e2,apiVersion:n=t2,kid:o,skipJwksCache:i}=t;if(i||ZY()||!ex(o)){if(!e)throw new Et({action:Er.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:it.RemoteJWKFailedToLoad});let c=s(()=>HY(r,e,n),"fetcher"),{keys:l}=await df(c);if(!l||!l.length)throw new Et({action:Er.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:it.RemoteJWKFailedToLoad});l.forEach(d=>_M(d.kid,d))}let a=ex(o);if(!a){let l=LY().map(d=>d.kid).sort().join(", ");throw new Et({action:`Go to your Dashboard and validate your secret and public keys are correct. ${Er.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${o}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${l}`,reason:it.JWKKidMismatch})}return a}async function HY(t,e,r){if(!e)throw new Et({action:Er.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:it.RemoteJWKFailedToLoad});let n=new URL(t);n.pathname=ie(n.pathname,r,"/jwks");let o=await Do.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Clerk-API-Version":tx,"Content-Type":"application/json","User-Agent":r2}});if(!o.ok){let i=await o.json(),a=JY(i?.errors,cj.InvalidSecretKey);if(a){let c=it.InvalidSecretKey;throw new Et({action:Er.ContactSupport,message:a.message,reason:c})}throw new Et({action:Er.ContactSupport,message:`Error loading Clerk JWKS from ${n.href} with code=${o.status}`,reason:it.RemoteJWKFailedToLoad})}return o.json()}function ZY(){if(YS===-1)return!1;let t=Date.now()-YS>=D7*1e3;return t&&(Cf={}),t}async function as(t,e){let{data:r,errors:n}=ao(t);if(n)return{errors:n};let{header:o}=r,{kid:i}=o;try{let a;if(e.jwtKey)a=bM({kid:i,pem:e.jwtKey});else if(e.secretKey)a=await wM({...e,kid:i});else return{errors:[new Et({action:Er.SetClerkJWTKey,message:"Failed to resolve JWK during verification.",reason:it.JWKFailedToResolve})]};return await gj(t,{...e,key:a})}catch(a){return{errors:[a]}}}function sx(t,e,r){if(TS(e)){let n,o;switch(e.status){case 401:n=sl.InvalidSecretKey,o=e.errors[0]?.message||"Invalid secret key";break;case 404:n=sl.TokenInvalid,o=r;break;default:n=sl.UnexpectedError,o="Unexpected error"}return{data:void 0,tokenType:t,errors:[new hf({message:o,code:n,status:e.status})]}}return{data:void 0,tokenType:t,errors:[new hf({message:"Unexpected error",code:sl.UnexpectedError,status:e.status})]}}async function GY(t,e){try{return{data:await rc(e).m2m.verifyToken({token:t}),tokenType:We.M2MToken,errors:void 0}}catch(r){return sx(We.M2MToken,r,"Machine token not found")}}async function KY(t,e){try{return{data:await rc(e).idPOAuthAccessToken.verifyAccessToken(t),tokenType:We.OAuthToken,errors:void 0}}catch(r){return sx(We.OAuthToken,r,"OAuth token not found")}}async function WY(t,e){try{return{data:await rc(e).apiKeys.verifySecret(t),tokenType:We.ApiKey,errors:void 0}}catch(r){return sx(We.ApiKey,r,"API key not found")}}async function Xj(t,e){if(t.startsWith(rx))return GY(t,e);if(t.startsWith(nx))return KY(t,e);if(t.startsWith(ox))return WY(t,e);throw new Error("Unknown machine token type")}async function QY(t,{key:e}){let{data:r,errors:n}=ao(t);if(n)throw n[0];let{header:o,payload:i}=r,{typ:a,alg:c}=o;CS(a),OS(c);let{data:l,errors:d}=await $S(r,e);if(d)throw new Et({reason:it.TokenVerificationFailed,message:`Error verifying handshake token. ${d[0]}`});if(!l)throw new Et({reason:it.TokenInvalidSignature,message:"Handshake signature is invalid."});return i}async function XY(t,e){let{secretKey:r,apiUrl:n,apiVersion:o,jwksCacheTtlInMs:i,jwtKey:a,skipJwksCache:c}=e,{data:l,errors:d}=ao(t);if(d)throw d[0];let{kid:p}=l.header,m;if(a)m=bM({kid:p,pem:a});else if(r)m=await wM({secretKey:r,apiUrl:n,apiVersion:o,kid:p,jwksCacheTtlInMs:i,skipJwksCache:c});else throw new Et({action:Er.SetClerkJWTKey,message:"Failed to resolve JWK during handshake verification.",reason:it.JWKFailedToResolve});return QY(t,{key:m})}function tee(t,e){if(!t&&af(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}function ree(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}function nee(t,e){let r;try{r=new URL(t)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===e)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}function oee(t){if(!t.machineSecretKey&&!t.secretKey)throw new Error("Machine token authentication requires either a Machine secret key or a Clerk secret key. Ensure a Clerk secret key or Machine secret key is set.")}function iee(t,e,r){return t.reason===it.TokenExpired&&!!e.refreshTokenInCookie&&r.method==="GET"}function Yj(t,e,r){return fM(t,e)?null:Hn({tokenType:typeof e=="string"?e:t,authenticateContext:r,reason:cr.TokenTypeMismatch})}function see(t,e){let r=null,{tokenInHeader:n}=e;n&&(QS(n)?r=XS(n):r=We.SessionToken);let o=r??We.SessionToken;return fM(o,t)}function SM(t){let e=Rj(lee,t.options),r=t.apiClient;return{authenticateRequest:s((o,i={})=>{let{apiUrl:a,apiVersion:c}=e,l=Rj(e,i);return aee(o,{...i,...l,apiUrl:a,apiVersion:c,apiClient:r})},"authenticateRequest2"),debugRequestState:cee}}var gM,e2,t2,r2,D7,tx,j7,If,M7,z7,U7,Ce,We,q7,F7,GS,B7,At,Nj,V7,Dj,H7,qS,Z7,al,J7,G7,K7,FS,W7,bf,Q7,wf,X7,Sf,Y7,eX,tX,xf,rX,Tf,nX,yi,oX,BS,pl,Pf,iX,sX,aX,cl,cX,ar,uX,tc,lX,Ef,dX,pX,mX,kf,fX,ul,hX,is,gX,jj,yX,Mj,vX,_X,bX,Yt,wX,ll,SX,VS,xX,zj,TX,EX,kX,o2,Uj,IX,KS,PX,AX,CX,OX,qj,Fj,Vj,Jj,MX,zX,UX,LX,qX,FX,p2,BX,VX,HX,ZX,JX,GX,b2,fl,x2,KX,WX,QX,XX,YX,C2,Ye,eY,tY,rY,nY,oY,iY,sY,z2,aY,cY,uY,lY,V2,dY,pY,mY,fY,hY,gY,yY,HS,vY,_Y,bY,wY,SY,xY,TY,aM,uM,dM,EY,rx,nx,ox,CY,fM,Af,DY,ml,cr,ix,zY,Wj,Qj,UY,yM,vM,Cf,YS,qY,FY,BY,VY,JY,YY,eee,co,aee,cee,uee,lee,xM=b(()=>{ES();RS();gf();NS();jS();jS();_S();wj();xj();ff();gM=hu(kj(),1);ff();Cj();$j();e2="https://api.clerk.com",t2="v1",r2="@clerk/backend@2.24.0",D7=300,tx="2025-11-10",j7={AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},If={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count",HandshakeNonce:"__clerk_handshake_nonce"},M7={ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:If.DevBrowser,Handshake:If.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason",HandshakeNonce:If.HandshakeNonce,HandshakeFormat:"format"},z7={Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",SecFetchSite:"sec-fetch-site",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},U7={Json:"application/json"},Ce={Attributes:j7,Cookies:If,Headers:z7,ContentTypes:U7,QueryParameters:M7};s(Rj,"mergePreDefinedOptions");s(n2,"assertValidSecretKey");s(L7,"assertValidPublishableKey");We={SessionToken:"session_token",ApiKey:"api_key",M2MToken:"m2m_token",OAuthToken:"oauth_token"},q7=class{static{s(this,"AuthenticateContext")}constructor(t,e,r){this.cookieSuffix=t,this.clerkRequest=e,this.originalFrontendApi="",r.acceptsToken===We.M2MToken||r.acceptsToken===We.ApiKey?this.initHeaderValues():(this.initPublishableKeyValues(r),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues()),Object.assign(this,r),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.tokenInHeader}usesSuffixedCookies(){let t=this.getSuffixedCookie(Ce.Cookies.ClientUat),e=this.getCookie(Ce.Cookies.ClientUat),r=this.getSuffixedCookie(Ce.Cookies.Session)||"",n=this.getCookie(Ce.Cookies.Session)||"";if(n&&!this.tokenHasIssuer(n))return!1;if(n&&!this.tokenBelongsToInstance(n))return!0;if(!t&&!r)return!1;let{data:o}=ao(n),i=o?.payload.iat||0,{data:a}=ao(r),c=a?.payload.iat||0;if(t!=="0"&&e!=="0"&&i>c||t==="0"&&e!=="0")return!1;if(this.instanceType!=="production"){let l=this.sessionExpired(a);if(t!=="0"&&e==="0"&&l)return!1}return!(!t&&r)}isCrossOriginReferrer(){if(!this.referrer||!this.clerkUrl.origin)return!1;try{return new URL(this.referrer).origin!==this.clerkUrl.origin}catch{return!1}}isKnownClerkReferrer(){if(!this.referrer)return!1;try{let t=new URL(this.referrer),e=t.hostname;if(this.frontendApi){let n=this.frontendApi.startsWith("http")?new URL(this.frontendApi).hostname:this.frontendApi;if(e===n)return!0}if(yS(e)||vS(e))return!0;let r=DS(this.frontendApi);if(r){let n=new URL(r).origin;if(t.origin===n)return!0}return!!e.startsWith("accounts.")}catch{return!1}}initPublishableKeyValues(t){L7(t.publishableKey),this.publishableKey=t.publishableKey;let e=ns(this.publishableKey,{fatal:!0,domain:t.domain,isSatellite:t.isSatellite});this.originalFrontendApi=e.frontendApi;let r=ns(this.publishableKey,{fatal:!0,proxyUrl:t.proxyUrl,domain:t.domain,isSatellite:t.isSatellite});this.instanceType=r.instanceType,this.frontendApi=r.frontendApi}initHeaderValues(){this.tokenInHeader=this.parseAuthorizationHeader(this.getHeader(Ce.Headers.Authorization)),this.origin=this.getHeader(Ce.Headers.Origin),this.host=this.getHeader(Ce.Headers.Host),this.forwardedHost=this.getHeader(Ce.Headers.ForwardedHost),this.forwardedProto=this.getHeader(Ce.Headers.CloudFrontForwardedProto)||this.getHeader(Ce.Headers.ForwardedProto),this.referrer=this.getHeader(Ce.Headers.Referrer),this.userAgent=this.getHeader(Ce.Headers.UserAgent),this.secFetchDest=this.getHeader(Ce.Headers.SecFetchDest),this.accept=this.getHeader(Ce.Headers.Accept)}initCookieValues(){this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(Ce.Cookies.Session),this.refreshTokenInCookie=this.getSuffixedCookie(Ce.Cookies.Refresh),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(Ce.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(Ce.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(Ce.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(Ce.QueryParameters.Handshake)||this.getCookie(Ce.Cookies.Handshake),this.handshakeRedirectLoopCounter=Number(this.getCookie(Ce.Cookies.RedirectCount))||0,this.handshakeNonce=this.getQueryParam(Ce.QueryParameters.HandshakeNonce)||this.getCookie(Ce.Cookies.HandshakeNonce)}getQueryParam(t){return this.clerkRequest.clerkUrl.searchParams.get(t)}getHeader(t){return this.clerkRequest.headers.get(t)||void 0}getCookie(t){return this.clerkRequest.cookies.get(t)||void 0}getSuffixedCookie(t){return this.getCookie(uf(t,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(t){return this.usesSuffixedCookies()?this.getSuffixedCookie(t):this.getCookie(t)}parseAuthorizationHeader(t){if(!t)return;let[e,r]=t.split(" ",2);if(!r)return e;if(e==="Bearer")return r}tokenHasIssuer(t){let{data:e,errors:r}=ao(t);return r?!1:!!e.payload.iss}tokenBelongsToInstance(t){if(!t)return!1;let{data:e,errors:r}=ao(t);if(r)return!1;let n=e.payload.iss.replace(/https?:\/\//gi,"");return this.originalFrontendApi===n}sessionExpired(t){return!!t&&t?.payload.exp<=Date.now()/1e3>>0}},F7=s(async(t,e)=>{let r=e.publishableKey?await cf(e.publishableKey,Do.crypto.subtle):"";return new q7(r,t,e)},"createAuthenticateContext"),GS="/",B7=new RegExp("(?<!:)"+GS+"{1,}","g");s(ie,"joinPaths");At=class{static{s(this,"AbstractAPI")}constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},Nj="/actor_tokens",V7=class extends At{static{s(this,"ActorTokenAPI")}async create(t){return this.request({method:"POST",path:Nj,bodyParams:t})}async revoke(t){return this.requireId(t),this.request({method:"POST",path:ie(Nj,t,"revoke")})}},Dj="/accountless_applications",H7=class extends At{static{s(this,"AccountlessApplicationAPI")}async createAccountlessApplication(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:Dj,headerParams:e})}async completeAccountlessApplicationOnboarding(t){let e=t?.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:ie(Dj,"complete"),headerParams:e})}},qS="/allowlist_identifiers",Z7=class extends At{static{s(this,"AllowlistIdentifierAPI")}async getAllowlistIdentifierList(t={}){return this.request({method:"GET",path:qS,queryParams:{...t,paginated:!0}})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:qS,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:ie(qS,t)})}},al="/api_keys",J7=class extends At{static{s(this,"APIKeysAPI")}async list(t){return this.request({method:"GET",path:al,queryParams:t})}async create(t){return this.request({method:"POST",path:al,bodyParams:t})}async revoke(t){let{apiKeyId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ie(al,e,"revoke"),bodyParams:r})}async getSecret(t){return this.requireId(t),this.request({method:"GET",path:ie(al,t,"secret")})}async verifySecret(t){return this.request({method:"POST",path:ie(al,"verify"),bodyParams:{secret:t}})}},G7="/beta_features",K7=class extends At{static{s(this,"BetaFeaturesAPI")}async changeDomain(t){return this.request({method:"POST",path:ie(G7,"change_domain"),bodyParams:t})}},FS="/blocklist_identifiers",W7=class extends At{static{s(this,"BlocklistIdentifierAPI")}async getBlocklistIdentifierList(t={}){return this.request({method:"GET",path:FS,queryParams:t})}async createBlocklistIdentifier(t){return this.request({method:"POST",path:FS,bodyParams:t})}async deleteBlocklistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:ie(FS,t)})}},bf="/clients",Q7=class extends At{static{s(this,"ClientAPI")}async getClientList(t={}){return this.request({method:"GET",path:bf,queryParams:{...t,paginated:!0}})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:ie(bf,t)})}verifyClient(t){return this.request({method:"POST",path:ie(bf,"verify"),bodyParams:{token:t}})}async getHandshakePayload(t){return this.request({method:"GET",path:ie(bf,"handshake_payload"),queryParams:t})}},wf="/domains",X7=class extends At{static{s(this,"DomainAPI")}async list(){return this.request({method:"GET",path:wf})}async add(t){return this.request({method:"POST",path:wf,bodyParams:t})}async update(t){let{domainId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ie(wf,e),bodyParams:r})}async delete(t){return this.deleteDomain(t)}async deleteDomain(t){return this.requireId(t),this.request({method:"DELETE",path:ie(wf,t)})}},Sf="/email_addresses",Y7=class extends At{static{s(this,"EmailAddressAPI")}async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:ie(Sf,t)})}async createEmailAddress(t){return this.request({method:"POST",path:Sf,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ie(Sf,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Sf,t)})}},eX="/oauth_applications/access_tokens",tX=class extends At{static{s(this,"IdPOAuthAccessTokenApi")}async verifyAccessToken(t){return this.request({method:"POST",path:ie(eX,"verify"),bodyParams:{access_token:t}})}},xf="/instance",rX=class extends At{static{s(this,"InstanceAPI")}async get(){return this.request({method:"GET",path:xf})}async update(t){return this.request({method:"PATCH",path:xf,bodyParams:t})}async updateRestrictions(t){return this.request({method:"PATCH",path:ie(xf,"restrictions"),bodyParams:t})}async updateOrganizationSettings(t){return this.request({method:"PATCH",path:ie(xf,"organization_settings"),bodyParams:t})}},Tf="/invitations",nX=class extends At{static{s(this,"InvitationAPI")}async getInvitationList(t={}){return this.request({method:"GET",path:Tf,queryParams:{...t,paginated:!0}})}async createInvitation(t){return this.request({method:"POST",path:Tf,bodyParams:t})}async createInvitationBulk(t){return this.request({method:"POST",path:ie(Tf,"bulk"),bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:ie(Tf,t,"revoke")})}},yi="/machines",oX=class extends At{static{s(this,"MachineApi")}async get(t){return this.requireId(t),this.request({method:"GET",path:ie(yi,t)})}async list(t={}){return this.request({method:"GET",path:yi,queryParams:t})}async create(t){return this.request({method:"POST",path:yi,bodyParams:t})}async update(t){let{machineId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ie(yi,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ie(yi,t)})}async getSecretKey(t){return this.requireId(t),this.request({method:"GET",path:ie(yi,t,"secret_key")})}async rotateSecretKey(t){let{machineId:e,previousTokenTtl:r}=t;return this.requireId(e),this.request({method:"POST",path:ie(yi,e,"secret_key","rotate"),bodyParams:{previousTokenTtl:r}})}async createScope(t,e){return this.requireId(t),this.request({method:"POST",path:ie(yi,t,"scopes"),bodyParams:{toMachineId:e}})}async deleteScope(t,e){return this.requireId(t),this.request({method:"DELETE",path:ie(yi,t,"scopes",e)})}},BS="/m2m_tokens",iX=class extends At{static{s(this,"M2MTokenApi")}constructor(){super(...arguments),vj(this,pl)}async createToken(t){let{claims:e=null,machineSecretKey:r,secondsUntilExpiration:n=null}=t||{},o=yf(this,pl,Pf).call(this,{method:"POST",path:BS,bodyParams:{secondsUntilExpiration:n,claims:e}},r);return this.request(o)}async revokeToken(t){let{m2mTokenId:e,revocationReason:r=null,machineSecretKey:n}=t;this.requireId(e);let o=yf(this,pl,Pf).call(this,{method:"POST",path:ie(BS,e,"revoke"),bodyParams:{revocationReason:r}},n);return this.request(o)}async verifyToken(t){let{token:e,machineSecretKey:r}=t,n=yf(this,pl,Pf).call(this,{method:"POST",path:ie(BS,"verify"),bodyParams:{token:e}},r);return this.request(n)}};pl=new WeakSet;Pf=s(function(t,e){return e?{...t,headerParams:{...t.headerParams,Authorization:`Bearer ${e}`}}:t},"createRequestOptions_fn");sX="/jwks",aX=class extends At{static{s(this,"JwksAPI")}async getJwks(){return this.request({method:"GET",path:sX})}},cl="/jwt_templates",cX=class extends At{static{s(this,"JwtTemplatesApi")}async list(t={}){return this.request({method:"GET",path:cl,queryParams:{...t,paginated:!0}})}async get(t){return this.requireId(t),this.request({method:"GET",path:ie(cl,t)})}async create(t){return this.request({method:"POST",path:cl,bodyParams:t})}async update(t){let{templateId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ie(cl,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ie(cl,t)})}},ar="/organizations",uX=class extends At{static{s(this,"OrganizationAPI")}async getOrganizationList(t){return this.request({method:"GET",path:ar,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:ar,bodyParams:t})}async getOrganization(t){let{includeMembersCount:e}=t,r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:ie(ar,r),queryParams:{includeMembersCount:e}})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:ie(ar,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);let r=new Do.FormData;return r.append("file",e?.file),e?.uploaderUserId&&r.append("uploader_user_id",e?.uploaderUserId),this.request({method:"PUT",path:ie(ar,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:ie(ar,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:ie(ar,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:ie(ar,t)})}async getOrganizationMembershipList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ie(ar,e,"memberships"),queryParams:r})}async getInstanceOrganizationMembershipList(t){return this.request({method:"GET",path:"/organization_memberships",queryParams:t})}async createOrganizationMembership(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ie(ar,e,"memberships"),bodyParams:r})}async updateOrganizationMembership(t){let{organizationId:e,userId:r,...n}=t;return this.requireId(e),this.request({method:"PATCH",path:ie(ar,e,"memberships",r),bodyParams:n})}async updateOrganizationMembershipMetadata(t){let{organizationId:e,userId:r,...n}=t;return this.request({method:"PATCH",path:ie(ar,e,"memberships",r,"metadata"),bodyParams:n})}async deleteOrganizationMembership(t){let{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:ie(ar,e,"memberships",r)})}async getOrganizationInvitationList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ie(ar,e,"invitations"),queryParams:r})}async createOrganizationInvitation(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ie(ar,e,"invitations"),bodyParams:r})}async createOrganizationInvitationBulk(t,e){return this.requireId(t),this.request({method:"POST",path:ie(ar,t,"invitations","bulk"),bodyParams:e})}async getOrganizationInvitation(t){let{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:ie(ar,e,"invitations",r)})}async revokeOrganizationInvitation(t){let{organizationId:e,invitationId:r,...n}=t;return this.requireId(e),this.request({method:"POST",path:ie(ar,e,"invitations",r,"revoke"),bodyParams:n})}async getOrganizationDomainList(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ie(ar,e,"domains"),queryParams:r})}async createOrganizationDomain(t){let{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:ie(ar,e,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(t){let{organizationId:e,domainId:r,...n}=t;return this.requireId(e),this.requireId(r),this.request({method:"PATCH",path:ie(ar,e,"domains",r),bodyParams:n})}async deleteOrganizationDomain(t){let{organizationId:e,domainId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"DELETE",path:ie(ar,e,"domains",r)})}},tc="/oauth_applications",lX=class extends At{static{s(this,"OAuthApplicationsApi")}async list(t={}){return this.request({method:"GET",path:tc,queryParams:t})}async get(t){return this.requireId(t),this.request({method:"GET",path:ie(tc,t)})}async create(t){return this.request({method:"POST",path:tc,bodyParams:t})}async update(t){let{oauthApplicationId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:ie(tc,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ie(tc,t)})}async rotateSecret(t){return this.requireId(t),this.request({method:"POST",path:ie(tc,t,"rotate_secret")})}},Ef="/phone_numbers",dX=class extends At{static{s(this,"PhoneNumberAPI")}async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:ie(Ef,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Ef,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ie(Ef,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Ef,t)})}},pX="/proxy_checks",mX=class extends At{static{s(this,"ProxyCheckAPI")}async verify(t){return this.request({method:"POST",path:pX,bodyParams:t})}},kf="/redirect_urls",fX=class extends At{static{s(this,"RedirectUrlAPI")}async getRedirectUrlList(){return this.request({method:"GET",path:kf,queryParams:{paginated:!0}})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:ie(kf,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:kf,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:ie(kf,t)})}},ul="/saml_connections",hX=class extends At{static{s(this,"SamlConnectionAPI")}async getSamlConnectionList(t={}){return this.request({method:"GET",path:ul,queryParams:t})}async createSamlConnection(t){return this.request({method:"POST",path:ul,bodyParams:t,options:{deepSnakecaseBodyParamKeys:!0}})}async getSamlConnection(t){return this.requireId(t),this.request({method:"GET",path:ie(ul,t)})}async updateSamlConnection(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ie(ul,t),bodyParams:e,options:{deepSnakecaseBodyParamKeys:!0}})}async deleteSamlConnection(t){return this.requireId(t),this.request({method:"DELETE",path:ie(ul,t)})}},is="/sessions",gX=class extends At{static{s(this,"SessionAPI")}async getSessionList(t={}){return this.request({method:"GET",path:is,queryParams:{...t,paginated:!0}})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:ie(is,t)})}async createSession(t){return this.request({method:"POST",path:is,bodyParams:t})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:ie(is,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:ie(is,t,"verify"),bodyParams:{token:e}})}async getToken(t,e,r){this.requireId(t);let o={method:"POST",path:e?ie(is,t,"tokens",e):ie(is,t,"tokens")};return r!==void 0&&(o.bodyParams={expires_in_seconds:r}),this.request(o)}async refreshSession(t,e){this.requireId(t);let{suffixed_cookies:r,...n}=e;return this.request({method:"POST",path:ie(is,t,"refresh"),bodyParams:n,queryParams:{suffixed_cookies:r}})}},jj="/sign_in_tokens",yX=class extends At{static{s(this,"SignInTokenAPI")}async createSignInToken(t){return this.request({method:"POST",path:jj,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:ie(jj,t,"revoke")})}},Mj="/sign_ups",vX=class extends At{static{s(this,"SignUpAPI")}async get(t){return this.requireId(t),this.request({method:"GET",path:ie(Mj,t)})}async update(t){let{signUpAttemptId:e,...r}=t;return this.request({method:"PATCH",path:ie(Mj,e),bodyParams:r})}},_X="/testing_tokens",bX=class extends At{static{s(this,"TestingTokenAPI")}async createTestingToken(){return this.request({method:"POST",path:_X})}},Yt="/users",wX=class extends At{static{s(this,"UserAPI")}async getUserList(t={}){let{limit:e,offset:r,orderBy:n,...o}=t,[i,a]=await Promise.all([this.request({method:"GET",path:Yt,queryParams:t}),this.getCount(o)]);return{data:i,totalCount:a}}async getUser(t){return this.requireId(t),this.request({method:"GET",path:ie(Yt,t)})}async createUser(t){return this.request({method:"POST",path:Yt,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:ie(Yt,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);let r=new Do.FormData;return r.append("file",e?.file),this.request({method:"POST",path:ie(Yt,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:ie(Yt,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Yt,t)})}async getCount(t={}){return this.request({method:"GET",path:ie(Yt,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){this.requireId(t);let r=e.startsWith("oauth_"),n=r?e:`oauth_${e}`;return r&&of("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:ie(Yt,t,"oauth_access_tokens",n),queryParams:{paginated:!0}})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Yt,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:e,limit:r,offset:n}=t;return this.requireId(e),this.request({method:"GET",path:ie(Yt,e,"organization_memberships"),queryParams:{limit:r,offset:n}})}async getOrganizationInvitationList(t){let{userId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:ie(Yt,e,"organization_invitations"),queryParams:r})}async verifyPassword(t){let{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:ie(Yt,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){let{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:ie(Yt,e,"verify_totp"),bodyParams:{code:r}})}async banUser(t){return this.requireId(t),this.request({method:"POST",path:ie(Yt,t,"ban")})}async unbanUser(t){return this.requireId(t),this.request({method:"POST",path:ie(Yt,t,"unban")})}async lockUser(t){return this.requireId(t),this.request({method:"POST",path:ie(Yt,t,"lock")})}async unlockUser(t){return this.requireId(t),this.request({method:"POST",path:ie(Yt,t,"unlock")})}async deleteUserProfileImage(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Yt,t,"profile_image")})}async deleteUserPasskey(t){return this.requireId(t.userId),this.requireId(t.passkeyIdentificationId),this.request({method:"DELETE",path:ie(Yt,t.userId,"passkeys",t.passkeyIdentificationId)})}async deleteUserWeb3Wallet(t){return this.requireId(t.userId),this.requireId(t.web3WalletIdentificationId),this.request({method:"DELETE",path:ie(Yt,t.userId,"web3_wallets",t.web3WalletIdentificationId)})}async deleteUserExternalAccount(t){return this.requireId(t.userId),this.requireId(t.externalAccountId),this.request({method:"DELETE",path:ie(Yt,t.userId,"external_accounts",t.externalAccountId)})}async deleteUserBackupCodes(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Yt,t,"backup_code")})}async deleteUserTOTP(t){return this.requireId(t),this.request({method:"DELETE",path:ie(Yt,t,"totp")})}},ll="/waitlist_entries",SX=class extends At{static{s(this,"WaitlistEntryAPI")}async list(t={}){return this.request({method:"GET",path:ll,queryParams:t})}async create(t){return this.request({method:"POST",path:ll,bodyParams:t})}async invite(t,e={}){return this.requireId(t),this.request({method:"POST",path:ie(ll,t,"invite"),bodyParams:e})}async reject(t){return this.requireId(t),this.request({method:"POST",path:ie(ll,t,"reject")})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:ie(ll,t)})}},VS="/webhooks",xX=class extends At{static{s(this,"WebhookAPI")}async createSvixApp(){return this.request({method:"POST",path:ie(VS,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:ie(VS,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:ie(VS,"svix")})}},zj="/billing",TX="/organizations",EX="/users",kX=class extends At{static{s(this,"BillingAPI")}async getPlanList(t){return this.request({method:"GET",path:ie(zj,"plans"),queryParams:t})}async cancelSubscriptionItem(t,e){return this.requireId(t),this.request({method:"DELETE",path:ie(zj,"subscription_items",t),queryParams:e})}async extendSubscriptionItemFreeTrial(t,e){return this.requireId(t),this.request({method:"POST",path:ie("/billing","subscription_items",t,"extend_free_trial"),bodyParams:e})}async getOrganizationBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:ie(TX,t,"billing","subscription")})}async getUserBillingSubscription(t){return this.requireId(t),this.request({method:"GET",path:ie(EX,t,"billing","subscription")})}},o2=s(t=>typeof t=="object"&&t!==null,"isObject"),Uj=s(t=>o2(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date)&&!(globalThis.Blob&&t instanceof globalThis.Blob),"isObjectCustom"),IX=Symbol("mapObjectSkip"),KS=s((t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);let{target:o}=r;delete r.target;let i=s(a=>a.map(c=>Uj(c)?KS(c,e,r,n):c),"mapArray");if(Array.isArray(t))return i(t);for(let[a,c]of Object.entries(t)){let l=e(a,c,t);if(l===IX)continue;let[d,p,{shouldRecurse:m=!0}={}]=l;d!=="__proto__"&&(r.deep&&m&&Uj(p)&&(p=Array.isArray(p)?i(p):KS(p,e,r,n)),o[d]=p)}return o},"_mapObject");s(Lj,"mapObject");PX=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),AX=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),CX=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),OX=/[^\p{L}\d]+/giu,qj="$1\0$2",Fj="";s(i2,"split");s($X,"splitSeparateNumbers");s(RX,"noCase");s(Bj,"snakeCase");s(NX,"lowerFactory");s(DX,"splitPrefixSuffix");Vj={}.constructor;s(jX,"snakecaseKeys");s(Hj,"matches");s(Zj,"mapperOptions");Jj=jX,MX=class s2{static{s(this,"_AccountlessApplication")}constructor(e,r,n,o){this.publishableKey=e,this.secretKey=r,this.claimUrl=n,this.apiKeysUrl=o}static fromJSON(e){return new s2(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},zX=class a2{static{s(this,"_ActorToken")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.status=r,this.userId=n,this.actor=o,this.token=i,this.url=a,this.createdAt=c,this.updatedAt=l}static fromJSON(e){return new a2(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},UX=class c2{static{s(this,"_AllowlistIdentifier")}constructor(e,r,n,o,i,a,c){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a,this.invitationId=c}static fromJSON(e){return new c2(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},LX=class u2{static{s(this,"_APIKey")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_){this.id=e,this.type=r,this.name=n,this.subject=o,this.scopes=i,this.claims=a,this.revoked=c,this.revocationReason=l,this.expired=d,this.expiration=p,this.createdBy=m,this.description=h,this.lastUsedAt=y,this.createdAt=g,this.updatedAt=f,this.secret=_}static fromJSON(e){return new u2(e.id,e.type,e.name,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_by,e.description,e.last_used_at,e.created_at,e.updated_at,e.secret)}},qX=class l2{static{s(this,"_BlocklistIdentifier")}constructor(e,r,n,o,i,a){this.id=e,this.identifier=r,this.identifierType=n,this.createdAt=o,this.updatedAt=i,this.instanceId=a}static fromJSON(e){return new l2(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},FX=class d2{static{s(this,"_SessionActivity")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.isMobile=r,this.ipAddress=n,this.city=o,this.country=i,this.browserVersion=a,this.browserName=c,this.deviceType=l}static fromJSON(e){return new d2(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},p2=class m2{static{s(this,"_Session")}constructor(e,r,n,o,i,a,c,l,d,p,m,h=null){this.id=e,this.clientId=r,this.userId=n,this.status=o,this.lastActiveAt=i,this.expireAt=a,this.abandonAt=c,this.createdAt=l,this.updatedAt=d,this.lastActiveOrganizationId=p,this.latestActivity=m,this.actor=h}static fromJSON(e){return new m2(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&FX.fromJSON(e.latest_activity),e.actor)}},BX=class f2{static{s(this,"_Client")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.sessionIds=r,this.sessions=n,this.signInId=o,this.signUpId=i,this.lastActiveSessionId=a,this.lastAuthenticationStrategy=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new f2(e.id,e.session_ids,e.sessions.map(r=>p2.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.last_authentication_strategy,e.created_at,e.updated_at)}},VX=class h2{static{s(this,"_CnameTarget")}constructor(e,r,n){this.host=e,this.value=r,this.required=n}static fromJSON(e){return new h2(e.host,e.value,e.required)}},HX=class g2{static{s(this,"_Cookies")}constructor(e){this.cookies=e}static fromJSON(e){return new g2(e.cookies)}},ZX=class y2{static{s(this,"_DeletedObject")}constructor(e,r,n,o){this.object=e,this.id=r,this.slug=n,this.deleted=o}static fromJSON(e){return new y2(e.object,e.id||null,e.slug||null,e.deleted)}},JX=class v2{static{s(this,"_Domain")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.isSatellite=n,this.frontendApiUrl=o,this.developmentOrigin=i,this.cnameTargets=a,this.accountsPortalUrl=c,this.proxyUrl=l}static fromJSON(e){return new v2(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(r=>VX.fromJSON(r)),e.accounts_portal_url,e.proxy_url)}},GX=class _2{static{s(this,"_Email")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=o,this.subject=i,this.body=a,this.bodyPlain=c,this.status=l,this.slug=d,this.data=p,this.deliveredByClerk=m}static fromJSON(e){return new _2(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},b2=class w2{static{s(this,"_IdentificationLink")}constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new w2(e.id,e.type)}},fl=class S2{static{s(this,"_Verification")}constructor(e,r,n=null,o=null,i=null,a=null,c=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=o,this.expireAt=i,this.nonce=a,this.message=c}static fromJSON(e){return new S2(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},x2=class T2{static{s(this,"_EmailAddress")}constructor(e,r,n,o){this.id=e,this.emailAddress=r,this.verification=n,this.linkedTo=o}static fromJSON(e){return new T2(e.id,e.email_address,e.verification&&fl.fromJSON(e.verification),e.linked_to.map(r=>b2.fromJSON(r)))}},KX=class E2{static{s(this,"_ExternalAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m,h={},y,g){this.id=e,this.provider=r,this.identificationId=n,this.externalId=o,this.approvedScopes=i,this.emailAddress=a,this.firstName=c,this.lastName=l,this.imageUrl=d,this.username=p,this.phoneNumber=m,this.publicMetadata=h,this.label=y,this.verification=g}static fromJSON(e){return new E2(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&fl.fromJSON(e.verification))}},WX=class k2{static{s(this,"_IdPOAuthAccessToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.clientId=r,this.type=n,this.subject=o,this.scopes=i,this.revoked=a,this.revocationReason=c,this.expired=l,this.expiration=d,this.createdAt=p,this.updatedAt=m}static fromJSON(e){return new k2(e.id,e.client_id,e.type,e.subject,e.scopes,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at)}},QX=class I2{static{s(this,"_Instance")}constructor(e,r,n){this.id=e,this.environmentType=r,this.allowedOrigins=n}static fromJSON(e){return new I2(e.id,e.environment_type,e.allowed_origins)}},XX=class P2{static{s(this,"_InstanceRestrictions")}constructor(e,r,n,o,i){this.allowlist=e,this.blocklist=r,this.blockEmailSubaddresses=n,this.blockDisposableEmailDomains=o,this.ignoreDotsForGmailAddresses=i}static fromJSON(e){return new P2(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},YX=class A2{static{s(this,"_InstanceSettings")}constructor(e,r,n,o,i){this.id=e,this.restrictedToAllowlist=r,this.fromEmailAddress=n,this.progressiveSignUp=o,this.enhancedEmailDeliverability=i}static fromJSON(e){return new A2(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},C2=class O2{static{s(this,"_Invitation")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.emailAddress=r,this.publicMetadata=n,this.createdAt=o,this.updatedAt=i,this.status=a,this.url=c,this.revoked=l,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new O2(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return r._raw=e,r}},Ye={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",ApiKey:"api_key",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",ExternalAccount:"external_account",FacebookAccount:"facebook_account",GoogleAccount:"google_account",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",Machine:"machine",MachineScope:"machine_scope",MachineSecretKey:"machine_secret_key",M2MToken:"machine_to_machine_token",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",IdpOAuthAccessToken:"clerk_idp_oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationDomain:"organization_domain",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",SamlAccount:"saml_account",SamlConnection:"saml_connection",Session:"session",SignInAttempt:"sign_in_attempt",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Web3Wallet:"web3_wallet",Token:"token",TotalCount:"total_count",TestingToken:"testing_token",Role:"role",Permission:"permission",BillingPayer:"commerce_payer",BillingPaymentAttempt:"commerce_payment_attempt",BillingSubscription:"commerce_subscription",BillingSubscriptionItem:"commerce_subscription_item",BillingPlan:"commerce_plan",Feature:"feature"},eY=class WS{static{s(this,"_Machine")}constructor(e,r,n,o,i,a,c,l){this.id=e,this.name=r,this.instanceId=n,this.createdAt=o,this.updatedAt=i,this.scopedMachines=a,this.defaultTokenTtl=c,this.secretKey=l}static fromJSON(e){return new WS(e.id,e.name,e.instance_id,e.created_at,e.updated_at,e.scoped_machines.map(r=>new WS(r.id,r.name,r.instance_id,r.created_at,r.updated_at,[],r.default_token_ttl)),e.default_token_ttl,e.secret_key)}},tY=class $2{static{s(this,"_MachineScope")}constructor(e,r,n,o){this.fromMachineId=e,this.toMachineId=r,this.createdAt=n,this.deleted=o}static fromJSON(e){return new $2(e.from_machine_id,e.to_machine_id,e.created_at,e.deleted)}},rY=class R2{static{s(this,"_MachineSecretKey")}constructor(e){this.secret=e}static fromJSON(e){return new R2(e.secret)}},nY=class N2{static{s(this,"_M2MToken")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.subject=r,this.scopes=n,this.claims=o,this.revoked=i,this.revocationReason=a,this.expired=c,this.expiration=l,this.createdAt=d,this.updatedAt=p,this.token=m}static fromJSON(e){return new N2(e.id,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at,e.token)}},oY=class D2{static{s(this,"_JwtTemplate")}constructor(e,r,n,o,i,a,c,l,d){this.id=e,this.name=r,this.claims=n,this.lifetime=o,this.allowedClockSkew=i,this.customSigningKey=a,this.signingAlgorithm=c,this.createdAt=l,this.updatedAt=d}static fromJSON(e){return new D2(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},iY=class j2{static{s(this,"_OauthAccessToken")}constructor(e,r,n,o={},i,a,c,l){this.externalAccountId=e,this.provider=r,this.token=n,this.publicMetadata=o,this.label=i,this.scopes=a,this.tokenSecret=c,this.expiresAt=l}static fromJSON(e){return new j2(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},sY=class M2{static{s(this,"_OAuthApplication")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w,x,I){this.id=e,this.instanceId=r,this.name=n,this.clientId=o,this.clientUri=i,this.clientImageUrl=a,this.dynamicallyRegistered=c,this.consentScreenEnabled=l,this.pkceRequired=d,this.isPublic=p,this.scopes=m,this.redirectUris=h,this.authorizeUrl=y,this.tokenFetchUrl=g,this.userInfoUrl=f,this.discoveryUrl=_,this.tokenIntrospectionUrl=S,this.createdAt=w,this.updatedAt=x,this.clientSecret=I}static fromJSON(e){return new M2(e.id,e.instance_id,e.name,e.client_id,e.client_uri,e.client_image_url,e.dynamically_registered,e.consent_screen_enabled,e.pkce_required,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},z2=class U2{static{s(this,"_Organization")}constructor(e,r,n,o,i,a,c,l={},d={},p,m,h,y){this.id=e,this.name=r,this.slug=n,this.imageUrl=o,this.hasImage=i,this.createdAt=a,this.updatedAt=c,this.publicMetadata=l,this.privateMetadata=d,this.maxAllowedMemberships=p,this.adminDeleteEnabled=m,this.membersCount=h,this.createdBy=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new U2(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return r._raw=e,r}},aY=class L2{static{s(this,"_OrganizationInvitation")}constructor(e,r,n,o,i,a,c,l,d,p,m={},h={},y){this.id=e,this.emailAddress=r,this.role=n,this.roleName=o,this.organizationId=i,this.createdAt=a,this.updatedAt=c,this.expiresAt=l,this.url=d,this.status=p,this.publicMetadata=m,this.privateMetadata=h,this.publicOrganizationData=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new L2(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return r._raw=e,r}},cY=class q2{static{s(this,"_OrganizationMembership")}constructor(e,r,n,o={},i={},a,c,l,d){this.id=e,this.role=r,this.permissions=n,this.publicMetadata=o,this.privateMetadata=i,this.createdAt=a,this.updatedAt=c,this.organization=l,this.publicUserData=d,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new q2(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,z2.fromJSON(e.organization),uY.fromJSON(e.public_user_data));return r._raw=e,r}},uY=class F2{static{s(this,"_OrganizationMembershipPublicUserData")}constructor(e,r,n,o,i,a){this.identifier=e,this.firstName=r,this.lastName=n,this.imageUrl=o,this.hasImage=i,this.userId=a}static fromJSON(e){return new F2(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},lY=class B2{static{s(this,"_OrganizationSettings")}constructor(e,r,n,o,i,a,c,l,d,p){this.enabled=e,this.maxAllowedMemberships=r,this.maxAllowedRoles=n,this.maxAllowedPermissions=o,this.creatorRole=i,this.adminDeleteEnabled=a,this.domainsEnabled=c,this.slugDisabled=l,this.domainsEnrollmentModes=d,this.domainsDefaultRole=p}static fromJSON(e){return new B2(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.slug_disabled,e.domains_enrollment_modes,e.domains_default_role)}},V2=class H2{static{s(this,"_PhoneNumber")}constructor(e,r,n,o,i,a){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=o,this.verification=i,this.linkedTo=a}static fromJSON(e){return new H2(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&fl.fromJSON(e.verification),e.linked_to.map(r=>b2.fromJSON(r)))}},dY=class Z2{static{s(this,"_ProxyCheck")}constructor(e,r,n,o,i,a,c){this.id=e,this.domainId=r,this.lastRunAt=n,this.proxyUrl=o,this.successful=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new Z2(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},pY=class J2{static{s(this,"_RedirectUrl")}constructor(e,r,n,o){this.id=e,this.url=r,this.createdAt=n,this.updatedAt=o}static fromJSON(e){return new J2(e.id,e.url,e.created_at,e.updated_at)}},mY=class G2{static{s(this,"_SamlConnection")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w,x,I,N){this.id=e,this.name=r,this.domain=n,this.organizationId=o,this.idpEntityId=i,this.idpSsoUrl=a,this.idpCertificate=c,this.idpMetadataUrl=l,this.idpMetadata=d,this.acsUrl=p,this.spEntityId=m,this.spMetadataUrl=h,this.active=y,this.provider=g,this.userCount=f,this.syncUserAttributes=_,this.allowSubdomains=S,this.allowIdpInitiated=w,this.createdAt=x,this.updatedAt=I,this.attributeMapping=N}static fromJSON(e){return new G2(e.id,e.name,e.domain,e.organization_id,e.idp_entity_id,e.idp_sso_url,e.idp_certificate,e.idp_metadata_url,e.idp_metadata,e.acs_url,e.sp_entity_id,e.sp_metadata_url,e.active,e.provider,e.user_count,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at,e.attribute_mapping&&hY.fromJSON(e.attribute_mapping))}},fY=class K2{static{s(this,"_SamlAccountConnection")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.name=r,this.domain=n,this.active=o,this.provider=i,this.syncUserAttributes=a,this.allowSubdomains=c,this.allowIdpInitiated=l,this.createdAt=d,this.updatedAt=p}static fromJSON(e){return new K2(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},hY=class W2{static{s(this,"_AttributeMapping")}constructor(e,r,n,o){this.userId=e,this.emailAddress=r,this.firstName=n,this.lastName=o}static fromJSON(e){return new W2(e.user_id,e.email_address,e.first_name,e.last_name)}},gY=class Q2{static{s(this,"_SamlAccount")}constructor(e,r,n,o,i,a,c,l,d,p,m){this.id=e,this.provider=r,this.providerUserId=n,this.active=o,this.emailAddress=i,this.firstName=a,this.lastName=c,this.verification=l,this.samlConnection=d,this.lastAuthenticatedAt=p,this.enterpriseConnectionId=m}static fromJSON(e){return new Q2(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&fl.fromJSON(e.verification),e.saml_connection&&fY.fromJSON(e.saml_connection),e.last_authenticated_at??null,e.enterprise_connection_id)}},yY=class X2{static{s(this,"_SignInToken")}constructor(e,r,n,o,i,a,c){this.id=e,this.userId=r,this.token=n,this.status=o,this.url=i,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new X2(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},HS=class Y2{static{s(this,"_SignUpAttemptVerification")}constructor(e,r){this.nextAction=e,this.supportedStrategies=r}static fromJSON(e){return new Y2(e.next_action,e.supported_strategies)}},vY=class eM{static{s(this,"_SignUpAttemptVerifications")}constructor(e,r,n,o){this.emailAddress=e,this.phoneNumber=r,this.web3Wallet=n,this.externalAccount=o}static fromJSON(e){return new eM(e.email_address&&HS.fromJSON(e.email_address),e.phone_number&&HS.fromJSON(e.phone_number),e.web3_wallet&&HS.fromJSON(e.web3_wallet),e.external_account)}},_Y=class tM{static{s(this,"_SignUpAttempt")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w,x,I,N,$){this.id=e,this.status=r,this.requiredFields=n,this.optionalFields=o,this.missingFields=i,this.unverifiedFields=a,this.verifications=c,this.username=l,this.emailAddress=d,this.phoneNumber=p,this.web3Wallet=m,this.passwordEnabled=h,this.firstName=y,this.lastName=g,this.customAction=f,this.externalId=_,this.createdSessionId=S,this.createdUserId=w,this.abandonAt=x,this.legalAcceptedAt=I,this.publicMetadata=N,this.unsafeMetadata=$}static fromJSON(e){return new tM(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?vY.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},bY=class rM{static{s(this,"_SMSMessage")}constructor(e,r,n,o,i,a,c){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=o,this.status=i,this.phoneNumberId=a,this.data=c}static fromJSON(e){return new rM(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},wY=class nM{static{s(this,"_Token")}constructor(e){this.jwt=e}static fromJSON(e){return new nM(e.jwt)}},SY=class oM{static{s(this,"_Web3Wallet")}constructor(e,r,n){this.id=e,this.web3Wallet=r,this.verification=n}static fromJSON(e){return new oM(e.id,e.web3_wallet,e.verification&&fl.fromJSON(e.verification))}},xY=class iM{static{s(this,"_User")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w,x,I={},N={},$={},O=[],R=[],A=[],D=[],M=[],Q,Z,F=null,ee,ne,se){this.id=e,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=o,this.twoFactorEnabled=i,this.banned=a,this.locked=c,this.createdAt=l,this.updatedAt=d,this.imageUrl=p,this.hasImage=m,this.primaryEmailAddressId=h,this.primaryPhoneNumberId=y,this.primaryWeb3WalletId=g,this.lastSignInAt=f,this.externalId=_,this.username=S,this.firstName=w,this.lastName=x,this.publicMetadata=I,this.privateMetadata=N,this.unsafeMetadata=$,this.emailAddresses=O,this.phoneNumbers=R,this.web3Wallets=A,this.externalAccounts=D,this.samlAccounts=M,this.lastActiveAt=Q,this.createOrganizationEnabled=Z,this.createOrganizationsLimit=F,this.deleteSelfEnabled=ee,this.legalAcceptedAt=ne,this.locale=se,this._raw=null}get raw(){return this._raw}static fromJSON(e){let r=new iM(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(n=>x2.fromJSON(n)),(e.phone_numbers||[]).map(n=>V2.fromJSON(n)),(e.web3_wallets||[]).map(n=>SY.fromJSON(n)),(e.external_accounts||[]).map(n=>KX.fromJSON(n)),(e.saml_accounts||[]).map(n=>gY.fromJSON(n)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at,e.locale);return r._raw=e,r}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},TY=class sM{static{s(this,"_WaitlistEntry")}constructor(e,r,n,o,i,a,c){this.id=e,this.emailAddress=r,this.status=n,this.invitation=o,this.createdAt=i,this.updatedAt=a,this.isLocked=c}static fromJSON(e){return new sM(e.id,e.email_address,e.status,e.invitation&&C2.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}},aM=class cM{static{s(this,"_Feature")}constructor(e,r,n,o,i){this.id=e,this.name=r,this.description=n,this.slug=o,this.avatarUrl=i}static fromJSON(e){return new cM(e.id,e.name,e.description??null,e.slug,e.avatar_url??null)}},uM=class lM{static{s(this,"_BillingPlan")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y){this.id=e,this.name=r,this.slug=n,this.description=o,this.isDefault=i,this.isRecurring=a,this.hasBaseFee=c,this.publiclyVisible=l,this.fee=d,this.annualFee=p,this.annualMonthlyFee=m,this.forPayerType=h,this.features=y}static fromJSON(e){let r=s(n=>n?{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}:null,"formatAmountJSON");return new lM(e.id,e.name,e.slug,e.description??null,e.is_default,e.is_recurring,e.has_base_fee,e.publicly_visible,r(e.fee),r(e.annual_fee),r(e.annual_monthly_fee),e.for_payer_type,(e.features??[]).map(n=>aM.fromJSON(n)))}},dM=class pM{static{s(this,"_BillingSubscriptionItem")}constructor(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S){this.id=e,this.status=r,this.planPeriod=n,this.periodStart=o,this.nextPayment=i,this.amount=a,this.plan=c,this.planId=l,this.createdAt=d,this.updatedAt=p,this.periodEnd=m,this.canceledAt=h,this.pastDueAt=y,this.endedAt=g,this.payerId=f,this.isFreeTrial=_,this.lifetimePaid=S}static fromJSON(e){function r(n){return n&&{amount:n.amount,amountFormatted:n.amount_formatted,currency:n.currency,currencySymbol:n.currency_symbol}}return s(r,"formatAmountJSON"),new pM(e.id,e.status,e.plan_period,e.period_start,e.next_payment,r(e.amount)??void 0,e.plan?uM.fromJSON(e.plan):null,e.plan_id??null,e.created_at,e.updated_at,e.period_end,e.canceled_at,e.past_due_at,e.ended_at,e.payer_id,e.is_free_trial,r(e.lifetime_paid)??void 0)}},EY=class mM{static{s(this,"_BillingSubscription")}constructor(e,r,n,o,i,a,c,l,d,p){this.id=e,this.status=r,this.payerId=n,this.createdAt=o,this.updatedAt=i,this.activeAt=a,this.pastDueAt=c,this.subscriptionItems=l,this.nextPayment=d,this.eligibleForFreeTrial=p}static fromJSON(e){let r=e.next_payment?{date:e.next_payment.date,amount:{amount:e.next_payment.amount.amount,amountFormatted:e.next_payment.amount.amount_formatted,currency:e.next_payment.amount.currency,currencySymbol:e.next_payment.amount.currency_symbol}}:null;return new mM(e.id,e.status,e.payer_id,e.created_at,e.updated_at,e.active_at??null,e.past_due_at??null,(e.subscription_items??[]).map(n=>dM.fromJSON(n)),r,e.eligible_for_free_trial??!1)}};s(kY,"deserialize");s(IY,"isPaginated");s(PY,"getCount");s(ZS,"jsonToObject");s(dl,"buildRequest");s(JS,"getTraceId");s(Gj,"getRetryAfter");s(Kj,"parseErrors");s(AY,"withLegacyRequestReturn");s(rc,"createBackendApiClient");rx="mt_",nx="oat_",ox="ak_",CY=[rx,nx,ox];s(QS,"isMachineTokenByPrefix");s(XS,"getMachineTokenType");fM=s((t,e)=>t?e==="any"?!0:(Array.isArray(e)?e:[e]).includes(t):!1,"isTokenTypeAccepted"),Af=s(t=>()=>{let e={...t};return e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}},"createDebug");s(OY,"signedInAuthObject");s(hM,"signedOutAuthObject");s($Y,"authenticatedMachineObject");s(RY,"unauthenticatedMachineObject");s(NY,"invalidTokenAuthObject");DY=s(t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(o={})=>n?o.template||o.expiresInSeconds!==void 0?e(n,o.template,o.expiresInSeconds):r:null},"createGetToken"),ml={SignedIn:"signed-in",SignedOut:"signed-out",Handshake:"handshake"},cr={ClientUATWithoutSessionToken:"client-uat-but-no-session-token",DevBrowserMissing:"dev-browser-missing",DevBrowserSync:"dev-browser-sync",PrimaryRespondsToSyncing:"primary-responds-to-syncing",PrimaryDomainCrossOriginSync:"primary-domain-cross-origin-sync",SatelliteCookieNeedsSyncing:"satellite-needs-syncing",SessionTokenAndUATMissing:"session-token-and-uat-missing",SessionTokenMissing:"session-token-missing",SessionTokenExpired:"session-token-expired",SessionTokenIATBeforeClientUAT:"session-token-iat-before-client-uat",SessionTokenNBF:"session-token-nbf",SessionTokenIatInTheFuture:"session-token-iat-in-the-future",SessionTokenWithoutClientUAT:"session-token-but-no-client-uat",ActiveOrganizationMismatch:"active-organization-mismatch",TokenTypeMismatch:"token-type-mismatch",UnexpectedError:"unexpected-error"};s(ss,"signedIn");s(Hn,"signedOut");s(jY,"handshake");s(MY,"signedOutInvalidToken");ix=s(t=>{let e=new Headers(t.headers||{});if(t.message)try{e.set(Ce.Headers.AuthMessage,t.message)}catch{}if(t.reason)try{e.set(Ce.Headers.AuthReason,t.reason)}catch{}if(t.status)try{e.set(Ce.Headers.AuthStatus,t.status)}catch{}return t.headers=e,t},"withDebugHeaders"),zY=class extends URL{static{s(this,"ClerkUrl")}isCrossOrigin(t){return this.origin!==new URL(t.toString()).origin}},Wj=s((...t)=>new zY(...t),"createClerkUrl"),Qj=class extends Request{static{s(this,"ClerkRequest")}constructor(t,e){let r=typeof t!="string"&&"url"in t?t.url:String(t);super(r,e||typeof t=="string"?void 0:t),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(t){let e=new URL(t.url),r=t.headers.get(Ce.Headers.ForwardedProto),n=t.headers.get(Ce.Headers.ForwardedHost),o=t.headers.get(Ce.Headers.Host),i=e.protocol,a=this.getFirstValueFromHeader(n)??o,c=this.getFirstValueFromHeader(r)??i?.replace(/[:/]/,""),l=a&&c?`${c}://${a}`:e.origin;return l===e.origin?Wj(e):Wj(e.pathname+e.search,l)}getFirstValueFromHeader(t){return t?.split(",")[0]}parseCookies(t){let e=(0,gM.parse)(this.decodeCookieValue(t.headers.get("cookie")||""));return new Map(Object.entries(e))}decodeCookieValue(t){return t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},UY=s((...t)=>t[0]instanceof Qj?t[0]:new Qj(...t),"createClerkRequest"),yM=s(t=>t.split(";")[0]?.split("=")[0],"getCookieName"),vM=s(t=>t.split(";")[0]?.split("=")[1],"getCookieValue"),Cf={},YS=0;s(ex,"getFromCache");s(LY,"getCacheValues");s(_M,"setInCache");qY="-----BEGIN PUBLIC KEY-----",FY="-----END PUBLIC KEY-----",BY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",VY="IDAQAB";s(bM,"loadClerkJwkFromPem");s(wM,"loadClerkJWKFromRemote");s(HY,"fetchJWKSFromBAPI");s(ZY,"cacheHasExpired");JY=s((t,e)=>t?t.find(r=>r.code===e):null,"getErrorObjectByCode");s(as,"verifyToken");s(sx,"handleClerkAPIError");s(GY,"verifyM2MToken");s(KY,"verifyOAuthToken");s(WY,"verifyAPIKey");s(Xj,"verifyMachineAuthToken");s(QY,"verifyHandshakeJwt");s(XY,"verifyHandshakeToken");YY=class{static{s(this,"HandshakeService")}constructor(t,e,r){this.authenticateContext=t,this.options=e,this.organizationMatcher=r}isRequestEligibleForHandshake(){let{accept:t,secFetchDest:e}=this.authenticateContext;return!!(e==="document"||e==="iframe"||!e&&t?.startsWith("text/html"))}buildRedirectToHandshake(t){if(!this.authenticateContext?.clerkUrl)throw new Error("Missing clerkUrl in authenticateContext");let e=this.removeDevBrowserFromURL(this.authenticateContext.clerkUrl),r=this.authenticateContext.frontendApi.startsWith("http")?this.authenticateContext.frontendApi:`https://${this.authenticateContext.frontendApi}`;r=r.replace(/\/+$/,"")+"/";let n=new URL("v1/client/handshake",r);n.searchParams.append("redirect_url",e?.href||""),n.searchParams.append("__clerk_api_version",tx),n.searchParams.append(Ce.QueryParameters.SuffixedCookies,this.authenticateContext.usesSuffixedCookies().toString()),n.searchParams.append(Ce.QueryParameters.HandshakeReason,t),n.searchParams.append(Ce.QueryParameters.HandshakeFormat,"nonce"),this.authenticateContext.instanceType==="development"&&this.authenticateContext.devBrowserToken&&n.searchParams.append(Ce.QueryParameters.DevBrowser,this.authenticateContext.devBrowserToken);let o=this.getOrganizationSyncTarget(this.authenticateContext.clerkUrl,this.organizationMatcher);return o&&this.getOrganizationSyncQueryParams(o).forEach((a,c)=>{n.searchParams.append(c,a)}),new Headers({[Ce.Headers.Location]:n.href})}async getCookiesFromHandshake(){let t=[];if(this.authenticateContext.handshakeNonce)try{let e=await this.authenticateContext.apiClient?.clients.getHandshakePayload({nonce:this.authenticateContext.handshakeNonce});e&&t.push(...e.directives)}catch(e){console.error("Clerk: HandshakeService: error getting handshake payload:",e)}else if(this.authenticateContext.handshakeToken){let e=await XY(this.authenticateContext.handshakeToken,this.authenticateContext);e&&Array.isArray(e.handshake)&&t.push(...e.handshake)}return t}async resolveHandshake(){let t=new Headers({"Access-Control-Allow-Origin":"null","Access-Control-Allow-Credentials":"true"}),e=await this.getCookiesFromHandshake(),r="";if(e.forEach(i=>{t.append("Set-Cookie",i),yM(i).startsWith(Ce.Cookies.Session)&&(r=vM(i))}),this.authenticateContext.instanceType==="development"){let i=new URL(this.authenticateContext.clerkUrl);i.searchParams.delete(Ce.QueryParameters.Handshake),i.searchParams.delete(Ce.QueryParameters.HandshakeHelp),i.searchParams.delete(Ce.QueryParameters.DevBrowser),i.searchParams.delete(Ce.QueryParameters.HandshakeNonce),t.append(Ce.Headers.Location,i.toString()),t.set(Ce.Headers.CacheControl,"no-store")}if(r==="")return Hn({tokenType:We.SessionToken,authenticateContext:this.authenticateContext,reason:cr.SessionTokenMissing,message:"",headers:t});let{data:n,errors:[o]=[]}=await as(r,this.authenticateContext);if(n)return ss({tokenType:We.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:n,headers:t,token:r});if(this.authenticateContext.instanceType==="development"&&(o?.reason===it.TokenExpired||o?.reason===it.TokenNotActiveYet||o?.reason===it.TokenIatInTheFuture)){let i=new Et({action:o.action,message:o.message,reason:o.reason});i.tokenCarrier="cookie",console.error(`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will attempt to account for the clock skew in development.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${i.getFullMessage()}`);let{data:a,errors:[c]=[]}=await as(r,{...this.authenticateContext,clockSkewInMs:864e5});if(a)return ss({tokenType:We.SessionToken,authenticateContext:this.authenticateContext,sessionClaims:a,headers:t,token:r});throw new Error(c?.message||"Clerk: Handshake retry failed.")}throw new Error(o?.message||"Clerk: Handshake failed.")}handleTokenVerificationErrorInDevelopment(t){if(t.reason===it.TokenInvalidSignature){let e="Clerk: Handshake token verification failed due to an invalid signature. If you have switched Clerk keys locally, clear your cookies and try again.";throw new Error(e)}throw new Error(`Clerk: Handshake token verification failed: ${t.getFullMessage()}.`)}checkAndTrackRedirectLoop(t){if(this.authenticateContext.handshakeRedirectLoopCounter===3)return!0;let e=this.authenticateContext.handshakeRedirectLoopCounter+1,r=Ce.Cookies.RedirectCount;return t.append("Set-Cookie",`${r}=${e}; SameSite=Lax; HttpOnly; Max-Age=2`),!1}removeDevBrowserFromURL(t){let e=new URL(t);return e.searchParams.delete(Ce.QueryParameters.DevBrowser),e.searchParams.delete(Ce.QueryParameters.LegacyDevBrowser),e}getOrganizationSyncTarget(t,e){return e.findTarget(t)}getOrganizationSyncQueryParams(t){let e=new Map;return t.type==="personalAccount"&&e.set("organization_id",""),t.type==="organization"&&(t.organizationId&&e.set("organization_id",t.organizationId),t.organizationSlug&&e.set("organization_id",t.organizationSlug)),e}},eee=class{static{s(this,"OrganizationMatcher")}constructor(t){this.organizationPattern=this.createMatcher(t?.organizationPatterns),this.personalAccountPattern=this.createMatcher(t?.personalAccountPatterns)}createMatcher(t){if(!t)return null;try{return LS(t)}catch(e){throw new Error(`Invalid pattern "${t}": ${e}`)}}findTarget(t){let e=this.findOrganizationTarget(t);return e||this.findPersonalAccountTarget(t)}findOrganizationTarget(t){if(!this.organizationPattern)return null;try{let e=this.organizationPattern(t.pathname);if(!e||!("params"in e))return null;let r=e.params;return r.id?{type:"organization",organizationId:r.id}:r.slug?{type:"organization",organizationSlug:r.slug}:null}catch(e){return console.error("Failed to match organization pattern:",e),null}}findPersonalAccountTarget(t){if(!this.personalAccountPattern)return null;try{return this.personalAccountPattern(t.pathname)?{type:"personalAccount"}:null}catch(e){return console.error("Failed to match personal account pattern:",e),null}}},co={NonEligibleNoCookie:"non-eligible-no-refresh-cookie",NonEligibleNonGet:"non-eligible-non-get",InvalidSessionToken:"invalid-session-token",MissingApiClient:"missing-api-client",MissingSessionToken:"missing-session-token",MissingRefreshToken:"missing-refresh-token",ExpiredSessionTokenDecodeFailed:"expired-session-token-decode-failed",ExpiredSessionTokenMissingSidClaim:"expired-session-token-missing-sid-claim",FetchError:"fetch-error",UnexpectedSDKError:"unexpected-sdk-error",UnexpectedBAPIError:"unexpected-bapi-error"};s(tee,"assertSignInUrlExists");s(ree,"assertProxyUrlOrDomain");s(nee,"assertSignInUrlFormatAndOrigin");s(oee,"assertMachineSecretOrSecretKey");s(iee,"isRequestEligibleForRefresh");s(Yj,"checkTokenTypeMismatch");s(see,"isTokenTypeInAcceptedArray");aee=s((async(t,e)=>{let r=await F7(UY(t),e),n=e.acceptsToken??We.SessionToken;n!==We.M2MToken&&(n2(r.secretKey),r.isSatellite&&(tee(r.signInUrl,r.secretKey),r.signInUrl&&r.origin&&nee(r.signInUrl,r.origin),ree(r.proxyUrl||r.domain))),n===We.M2MToken&&oee(r);let o=new eee(e.organizationSyncOptions),i=new YY(r,{organizationSyncOptions:e.organizationSyncOptions},o);async function a(_){if(!e.apiClient)return{data:null,error:{message:"An apiClient is needed to perform token refresh.",cause:{reason:co.MissingApiClient}}};let{sessionToken:S,refreshTokenInCookie:w}=_;if(!S)return{data:null,error:{message:"Session token must be provided.",cause:{reason:co.MissingSessionToken}}};if(!w)return{data:null,error:{message:"Refresh token must be provided.",cause:{reason:co.MissingRefreshToken}}};let{data:x,errors:I}=ao(S);if(!x||I)return{data:null,error:{message:"Unable to decode the expired session token.",cause:{reason:co.ExpiredSessionTokenDecodeFailed,errors:I}}};if(!x?.payload?.sid)return{data:null,error:{message:"Expired session token is missing the `sid` claim.",cause:{reason:co.ExpiredSessionTokenMissingSidClaim}}};try{return{data:(await e.apiClient.sessions.refreshSession(x.payload.sid,{format:"cookie",suffixed_cookies:_.usesSuffixedCookies(),expired_token:S||"",refresh_token:w||"",request_origin:_.clerkUrl.origin,request_headers:Object.fromEntries(Array.from(t.headers.entries()).map(([$,O])=>[$,[O]]))})).cookies,error:null}}catch(N){return N?.errors?.length?N.errors[0].code==="unexpected_error"?{data:null,error:{message:"Fetch unexpected error",cause:{reason:co.FetchError,errors:N.errors}}}:{data:null,error:{message:N.errors[0].code,cause:{reason:N.errors[0].code,errors:N.errors}}}:{data:null,error:{message:"Unexpected Server/BAPI error",cause:{reason:co.UnexpectedBAPIError,errors:[N]}}}}}s(a,"refreshToken");async function c(_){let{data:S,error:w}=await a(_);if(!S||S.length===0)return{data:null,error:w};let x=new Headers,I="";S.forEach(O=>{x.append("Set-Cookie",O),yM(O).startsWith(Ce.Cookies.Session)&&(I=vM(O))});let{data:N,errors:$}=await as(I,_);return $?{data:null,error:{message:"Clerk: unable to verify refreshed session token.",cause:{reason:co.InvalidSessionToken,errors:$}}}:{data:{jwtPayload:N,sessionToken:I,headers:x},error:null}}s(c,"attemptRefresh");function l(_,S,w,x){if(!i.isRequestEligibleForHandshake())return Hn({tokenType:We.SessionToken,authenticateContext:_,reason:S,message:w});let I=x??i.buildRedirectToHandshake(S);return I.get(Ce.Headers.Location)&&I.set(Ce.Headers.CacheControl,"no-store"),i.checkAndTrackRedirectLoop(I)?(console.log("Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard."),Hn({tokenType:We.SessionToken,authenticateContext:_,reason:S,message:w})):jY(_,S,w,I)}s(l,"handleMaybeHandshakeStatus");function d(_,S){let w=o.findTarget(_.clerkUrl);if(!w)return null;let x=!1;if(w.type==="organization"&&(w.organizationSlug&&w.organizationSlug!==S.orgSlug&&(x=!0),w.organizationId&&w.organizationId!==S.orgId&&(x=!0)),w.type==="personalAccount"&&S.orgId&&(x=!0),!x)return null;if(_.handshakeRedirectLoopCounter>=3)return console.warn("Clerk: Organization activation handshake loop detected. This is likely due to an invalid organization ID or slug. Skipping organization activation."),null;let I=l(_,cr.ActiveOrganizationMismatch,"");return I.status!=="handshake"?null:I}s(d,"handleMaybeOrganizationSyncHandshake");async function p(){let{tokenInHeader:_}=r;try{let{data:S,errors:w}=await as(_,r);if(w)throw w[0];return ss({tokenType:We.SessionToken,authenticateContext:r,sessionClaims:S,headers:new Headers,token:_})}catch(S){return h(S,"header")}}s(p,"authenticateRequestWithTokenInHeader");async function m(){let _=r.clientUat,S=!!r.sessionTokenInCookie,w=!!r.devBrowserToken;if(r.handshakeNonce||r.handshakeToken)try{return await i.resolveHandshake()}catch(O){O instanceof Et&&r.instanceType==="development"?i.handleTokenVerificationErrorInDevelopment(O):console.error("Clerk: unable to resolve handshake:",O)}let x=r.isSatellite&&r.secFetchDest==="document";if(r.instanceType==="production"&&x)return l(r,cr.SatelliteCookieNeedsSyncing,"");if(r.instanceType==="development"&&x&&!r.clerkUrl.searchParams.has(Ce.QueryParameters.ClerkSynced)){let O=new URL(r.signInUrl);O.searchParams.append(Ce.QueryParameters.ClerkRedirectUrl,r.clerkUrl.toString());let R=new Headers({[Ce.Headers.Location]:O.toString()});return l(r,cr.SatelliteCookieNeedsSyncing,"",R)}let I=new URL(r.clerkUrl).searchParams.get(Ce.QueryParameters.ClerkRedirectUrl);if(r.instanceType==="development"&&!r.isSatellite&&I){let O=new URL(I);r.devBrowserToken&&O.searchParams.append(Ce.QueryParameters.DevBrowser,r.devBrowserToken),O.searchParams.append(Ce.QueryParameters.ClerkSynced,"true");let R=new Headers({[Ce.Headers.Location]:O.toString()});return l(r,cr.PrimaryRespondsToSyncing,"",R)}if(r.instanceType==="development"&&r.clerkUrl.searchParams.has(Ce.QueryParameters.DevBrowser))return l(r,cr.DevBrowserSync,"");if(r.instanceType==="development"&&!w)return l(r,cr.DevBrowserMissing,"");if(!_&&!S)return Hn({tokenType:We.SessionToken,authenticateContext:r,reason:cr.SessionTokenAndUATMissing});if(!_&&S)return l(r,cr.SessionTokenWithoutClientUAT,"");if(_&&!S)return l(r,cr.ClientUATWithoutSessionToken,"");let{data:N,errors:$}=ao(r.sessionTokenInCookie);if($)return h($[0],"cookie");if(N.payload.iat<r.clientUat)return l(r,cr.SessionTokenIATBeforeClientUAT,"");try{let{data:O,errors:R}=await as(r.sessionTokenInCookie,r);if(R)throw R[0];let A=ss({tokenType:We.SessionToken,authenticateContext:r,sessionClaims:O,headers:new Headers,token:r.sessionTokenInCookie});if(!r.isSatellite&&r.secFetchDest==="document"&&r.isCrossOriginReferrer()&&!r.isKnownClerkReferrer()&&r.handshakeRedirectLoopCounter===0)return l(r,cr.PrimaryDomainCrossOriginSync,"Cross-origin request from satellite domain requires handshake");let M=A.toAuth();if(M.userId){let Q=d(r,M);if(Q)return Q}return A}catch(O){return h(O,"cookie")}return Hn({tokenType:We.SessionToken,authenticateContext:r,reason:cr.UnexpectedError})}s(m,"authenticateRequestWithTokenInCookie");async function h(_,S){if(!(_ instanceof Et))return Hn({tokenType:We.SessionToken,authenticateContext:r,reason:cr.UnexpectedError});let w;if(iee(_,r,t)){let{data:I,error:N}=await c(r);if(I)return ss({tokenType:We.SessionToken,authenticateContext:r,sessionClaims:I.jwtPayload,headers:I.headers,token:I.sessionToken});N?.cause?.reason?w=N.cause.reason:w=co.UnexpectedSDKError}else t.method!=="GET"?w=co.NonEligibleNonGet:r.refreshTokenInCookie?w=null:w=co.NonEligibleNoCookie;return _.tokenCarrier=S,[it.TokenExpired,it.TokenNotActiveYet,it.TokenIatInTheFuture].includes(_.reason)?l(r,uee({tokenError:_.reason,refreshError:w}),_.getFullMessage()):Hn({tokenType:We.SessionToken,authenticateContext:r,reason:_.reason,message:_.getFullMessage()})}s(h,"handleSessionTokenError");function y(_,S){return S instanceof hf?Hn({tokenType:_,authenticateContext:r,reason:S.code,message:S.getFullMessage()}):Hn({tokenType:_,authenticateContext:r,reason:cr.UnexpectedError})}s(y,"handleMachineError");async function g(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(!QS(_))return Hn({tokenType:n,authenticateContext:r,reason:cr.TokenTypeMismatch,message:""});let S=XS(_),w=Yj(S,n,r);if(w)return w;let{data:x,tokenType:I,errors:N}=await Xj(_,r);return N?y(I,N[0]):ss({tokenType:I,authenticateContext:r,machineData:x,token:_})}s(g,"authenticateMachineRequestWithTokenInHeader");async function f(){let{tokenInHeader:_}=r;if(!_)return h(new Error("Missing token in header"),"header");if(QS(_)){let x=XS(_),I=Yj(x,n,r);if(I)return I;let{data:N,tokenType:$,errors:O}=await Xj(_,r);return O?y($,O[0]):ss({tokenType:$,authenticateContext:r,machineData:N,token:_})}let{data:S,errors:w}=await as(_,r);return w?h(w[0],"header"):ss({tokenType:We.SessionToken,authenticateContext:r,sessionClaims:S,token:_})}return s(f,"authenticateAnyRequestWithTokenInHeader"),Array.isArray(n)&&!see(n,r)?MY():r.tokenInHeader?n==="any"?f():n===We.SessionToken?p():g():n===We.OAuthToken||n===We.ApiKey||n===We.M2MToken?Hn({tokenType:n,authenticateContext:r,reason:"No token in header"}):m()}),"authenticateRequest"),cee=s(t=>{let{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}=t;return{isSignedIn:e,isAuthenticated:r,proxyUrl:n,reason:o,message:i,publishableKey:a,isSatellite:c,domain:l}},"debugRequestState"),uee=s(({tokenError:t,refreshError:e})=>{switch(t){case it.TokenExpired:return`${cr.SessionTokenExpired}-refresh-${e}`;case it.TokenNotActiveYet:return cr.SessionTokenNBF;case it.TokenIatInTheFuture:return cr.SessionTokenIatInTheFuture;default:return cr.UnexpectedError}},"convertTokenVerificationErrorReasonToAuthErrorReason"),lee={secretKey:"",machineSecretKey:"",jwtKey:"",apiUrl:void 0,apiVersion:void 0,proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",audience:""};s(SM,"createAuthenticateRequest")});function TM(t){return async(...e)=>{let{data:r,errors:n}=await t(...e);if(n)throw n[0];return r}}var EM=b(()=>{s(TM,"withLegacyReturn")});function dee(t){return t?t.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}function pee(t){return t?t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}function ax(t){if(typeof t=="boolean")return t;if(t==null)return!1;if(typeof t=="string"){if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1}let e=parseInt(t,10);return isNaN(e)?!1:e>0}var kM,KMe,WMe,cx=b(()=>{s(dee,"snakeToCamel");s(pee,"camelToSnake");kM=s(t=>{let e=s(r=>{if(!r)return r;if(Array.isArray(r))return r.map(i=>typeof i=="object"||Array.isArray(i)?e(i):i);let n={...r},o=Object.keys(n);for(let i of o){let a=t(i.toString());a!==i&&(n[a]=n[i],delete n[i]),typeof n[a]=="object"&&(n[a]=e(n[a]))}return n},"deepTransform");return e},"createDeepObjectTransformer"),KMe=kM(pee),WMe=kM(dee);s(ax,"isTruthy")});function gee(t){return typeof t=="object"&&t!==null&&"constructor"in t&&typeof t.constructor=="function"}var mee,fee,IM,hee,yee,ux,lx,PM=b(()=>{lf();cx();mee=864e5,fee=class{static{s(this,"TelemetryEventThrottler")}#e;#t=mee;constructor(t){this.#e=t}isEventThrottled(t){let e=Date.now(),r=this.#r(t),n=this.#e.getItem(r);return n?e-n>this.#t?(this.#e.setItem(r,e),!1):!0:(this.#e.setItem(r,e),!1)}#r(t){let{sk:e,pk:r,payload:n,...o}=t,i={...n,...o};return JSON.stringify(Object.keys({...n,...o}).sort().map(a=>i[a]))}},IM=class{static{s(this,"LocalStorageThrottlerCache")}#e="clerk_telemetry_throttler";getItem(t){return this.#t()[t]}setItem(t,e){try{let r=this.#t();r[t]=e,localStorage.setItem(this.#e,JSON.stringify(r))}catch(r){r instanceof DOMException&&(r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&localStorage.length>0&&localStorage.removeItem(this.#e)}}removeItem(t){try{let e=this.#t();delete e[t],localStorage.setItem(this.#e,JSON.stringify(e))}catch{}}#t(){try{let t=localStorage.getItem(this.#e);return t?JSON.parse(t):{}}catch{return{}}}static isSupported(){return typeof window<"u"&&!!window.localStorage}},hee=class{static{s(this,"InMemoryThrottlerCache")}#e=new Map;#t=1e4;getItem(t){if(this.#e.size>this.#t){this.#e.clear();return}return this.#e.get(t)}setItem(t,e){this.#e.set(t,e)}removeItem(t){this.#e.delete(t)}};s(gee,"isWindowClerkWithMetadata");yee=new Set(["error","warn","info","debug","trace"]),ux={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},lx=class{static{s(this,"TelemetryCollector")}#e;#t;#r={};#i=[];#n=null;constructor(t){this.#e={maxBufferSize:t.maxBufferSize??ux.maxBufferSize,samplingRate:t.samplingRate??ux.samplingRate,perEventSampling:t.perEventSampling??!0,disabled:t.disabled??!1,debug:t.debug??!1,endpoint:ux.endpoint},!t.clerkVersion&&typeof window>"u"?this.#r.clerkVersion="":this.#r.clerkVersion=t.clerkVersion??"",this.#r.sdk=t.sdk,this.#r.sdkVersion=t.sdkVersion,this.#r.publishableKey=t.publishableKey??"";let e=ns(t.publishableKey);e&&(this.#r.instanceType=e.instanceType),t.secretKey&&(this.#r.secretKey=t.secretKey.substring(0,16)),this.#t=new fee(IM.isSupported()?new IM:new hee)}get isEnabled(){return!(this.#r.instanceType!=="development"||this.#e.disabled||typeof process<"u"&&process.env&&ax(process.env.CLERK_TELEMETRY_DISABLED)||typeof window<"u"&&window?.navigator?.webdriver)}get isDebug(){return this.#e.debug||typeof process<"u"&&process.env&&ax(process.env.CLERK_TELEMETRY_DEBUG)}record(t){try{let e=this.#a(t.event,t.payload);if(this.#p(e.event,e),!this.#o(e,t.eventSamplingRate))return;this.#i.push({kind:"event",value:e}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(t){try{if(!this.#d(t))return;let e=typeof t?.level=="string"&&yee.has(t.level),r=typeof t?.message=="string"&&t.message.trim().length>0,n=null,o=t?.timestamp;if(typeof o=="number"||typeof o=="string"){let c=new Date(o);Number.isNaN(c.getTime())||(n=c)}if(!e||!r||n===null){this.isDebug&&typeof console<"u"&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:e,messageIsValid:r,timestampIsValid:n!==null});return}let i=this.#l(),a={sdk:i.name,sdkv:i.version,cv:this.#r.clerkVersion??"",lvl:t.level,msg:t.message,ts:n.toISOString(),pk:this.#r.publishableKey||null,payload:this.#m(t.context)};this.#i.push({kind:"log",value:a}),this.#c()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#o(t,e){return this.isEnabled&&!this.isDebug&&this.#u(t,e)}#d(t){return!0}#u(t,e){let r=Math.random();return r<=this.#e.samplingRate&&(this.#e.perEventSampling===!1||typeof e>"u"||r<=e)?!this.#t.isEventThrottled(t):!1}#c(){if(typeof window>"u"){this.#s();return}if(this.#i.length>=this.#e.maxBufferSize){this.#n&&(typeof cancelIdleCallback<"u"?cancelIdleCallback(Number(this.#n)):clearTimeout(Number(this.#n))),this.#s();return}this.#n||("requestIdleCallback"in window?this.#n=requestIdleCallback(()=>{this.#s(),this.#n=null}):this.#n=setTimeout(()=>{this.#s(),this.#n=null},0))}#s(){let t=[...this.#i];if(this.#i=[],this.#n=null,t.length===0)return;let e=t.filter(n=>n.kind==="event").map(n=>n.value),r=t.filter(n=>n.kind==="log").map(n=>n.value);if(e.length>0){let n=new URL("/v1/event",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:e})}).catch(()=>{})}if(r.length>0){let n=new URL("/v1/logs",this.#e.endpoint);fetch(n,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>{})}}#p(t,e){this.isDebug&&(typeof console.groupCollapsed<"u"?(console.groupCollapsed("[clerk/telemetry]",t),console.log(e),console.groupEnd()):console.log("[clerk/telemetry]",t,e))}#l(){let t={name:this.#r.sdk,version:this.#r.sdkVersion};if(typeof window<"u"){let e=window;if(e.Clerk){let r=e.Clerk;if(gee(r)&&r.constructor.sdkMetadata){let{name:n,version:o}=r.constructor.sdkMetadata;n!==void 0&&(t.name=n),o!==void 0&&(t.version=o)}}}return t}#a(t,e){let r=this.#l();return{event:t,cv:this.#r.clerkVersion??"",it:this.#r.instanceType??"",sdk:r.name,sdkv:r.version,...this.#r.publishableKey?{pk:this.#r.publishableKey}:{},...this.#r.secretKey?{sk:this.#r.secretKey}:{},payload:e}}#m(t){if(t===null||typeof t>"u"||typeof t!="object")return null;try{let e=JSON.parse(JSON.stringify(t));return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}}});var AM=b(()=>{Ya();il();sf();lf();cx();PM()});function CM(t){let e={...t},r=rc(e),n=SM({options:e,apiClient:r}),o=new lx({publishableKey:e.publishableKey,secretKey:e.secretKey,samplingRate:.1,...e.sdkMetadata?{sdk:e.sdkMetadata.name,sdkVersion:e.sdkMetadata.version}:{},...e.telemetry||{}});return{...r,...n,telemetry:o}}var dx,OM=b(()=>{xM();ES();EM();RS();gf();NS();AM();dx=TM(as);s(CM,"createClerkClient")});var Of,$M=b(()=>{sv();Of=s(t=>t,"createMiddleware")});function px(){let t=process.env.CLERK_SECRET_KEY,e=process.env.VITE_CLERK_PUBLISHABLE_KEY;if(!t)throw new Error("CLERK_SECRET_KEY environment variable is not set");return{secretKey:t,publishableKey:e}}function RM(){let{secretKey:t}=px();return CM({secretKey:t})}function DM(t){let{windowMs:e,max:r,message:n="Too many requests"}=t,o=new Map;return Of(async(i,a)=>{let l=i.get("auth")?.user.id||i.req.header("X-Forwarded-For")||i.req.header("X-Real-IP")||"unknown",d=Date.now(),p=o.get(l);if(!p||d>p.resetTime)o.set(l,{count:1,resetTime:d+e});else if(p.count++,p.count>r){let h=Math.ceil((p.resetTime-d)/1e3);return i.json({code:"RATE_LIMIT_EXCEEDED",details:{limit:r,windowMs:e,retryAfter:h},error:n},429)}let m=o.get(l);m&&(i.header("X-RateLimit-Limit",r.toString()),i.header("X-RateLimit-Remaining",Math.max(0,r-m.count).toString()),i.header("X-RateLimit-Reset",new Date(m.resetTime).toISOString())),await a()})}var NM,vee,me,xe,jM=b(()=>{"use strict";OM();$M();gi();$t();s(px,"getClerkConfig");s(RM,"getClerkClient");NM=Of(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null,o=t.get("requestId")||"unknown",i=t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown";if(!n)return q.warn("Authentication failed: No token provided",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_REQUIRED",error:"Authentication required"},401);try{let{secretKey:a}=px(),c=RM(),l=await dx(n,{secretKey:a});if(!l?.sub)return q.warn("Authentication failed: Invalid token",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"INVALID_TOKEN",error:"Invalid authentication token"},401);let d=l.sub,p=await c.users.getUser(d),h={db:Pr(),clerkUser:p,user:{id:p.id,email:p.emailAddresses[0]?.emailAddress||"",fullName:`${p.firstName||""} ${p.lastName||""}`.trim()||null,role:p.publicMetadata?.role,metadata:p.publicMetadata}};t.set("auth",h),q.info("Authentication successful",{ip:i,method:t.req.method,path:t.req.path,requestId:o,userId:p.id}),await e()}catch(a){return q.error("Authentication error",{error:a instanceof Error?a.message:"Unknown error",ip:i,method:t.req.method,path:t.req.path,requestId:o,userAgent:t.req.header("User-Agent")}),t.json({code:"AUTH_ERROR",error:"Authentication failed"},500)}}),vee=Of(async(t,e)=>{let r=t.req.header("Authorization"),n=r?.startsWith("Bearer ")?r.replace("Bearer ","").trim():null;if(!n){await e();return}try{let{secretKey:o}=px(),i=RM(),a=await dx(n,{secretKey:o});if(!a?.sub){await e();return}let c=a.sub,l=await i.users.getUser(c),p={db:Pr(),clerkUser:l,user:{id:l.id,email:l.emailAddresses[0]?.emailAddress||"",fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||null,role:l.publicMetadata?.role,metadata:l.publicMetadata}};t.set("auth",p),await e()}catch{await e()}});s(DM,"clerkUserRateLimitMiddleware");me=NM,xe=DM});var Ar=b(()=>{"use strict";jM()});var mx,MM=b(()=>{"use strict";Pt();zD();qD();$t();Ar();mx=new Ae;mx.get("/",me,async t=>{let e=t.get("requestId");try{let{user:r}=t.get("auth"),n=r.id;if(!n)return t.json({code:"UNAUTHORIZED",error:"User not authenticated"},401);let o=t.req.query("refresh")==="true",a=await new nf(n).getContext(o);return q.info("Financial context retrieved",{forceRefresh:o,requestId:e,userId:n}),t.json({context:a,formatted:{alertsBlock:LD(a.pendingAlerts),financialBlock:UD(a)},meta:{requestId:e,retrievedAt:new Date().toISOString()}})}catch(r){return q.error("Error fetching financial context",{error:r instanceof Error?r.message:"Unknown error",requestId:e}),t.json({code:"CONTEXT_ERROR",error:r instanceof Error?r.message:"Failed to fetch context"},500)}})});var _ee,bee,fx,zM=b(()=>{js();_ee=/^[\w!#$%&'*.^`|~+-]+$/,bee=/^[ !#-:<-[\]-~]*$/,fx=s((t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),n={};for(let o of r){o=o.trim();let i=o.indexOf("=");if(i===-1)continue;let a=o.substring(0,i).trim();if(e&&e!==a||!_ee.test(a))continue;let c=o.substring(i+1).trim();if(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),bee.test(c)&&(n[a]=c.indexOf("%")!==-1?wa(c,gu):c,e))break}return n},"parse")});var UM,LM=b(()=>{zM();UM=s((t,e,r)=>{let n=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!n)return;let i=e;return r==="secure"?i="__Secure-"+e:r==="host"&&(i="__Host-"+e),fx(n,i)[i]}return n?fx(n):{}},"getCookie")});var qM=b(()=>{});var FM,BM=b(()=>{qM();FM=s((t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData(),"bufferToFormData")});var wee,See,xee,hx,VM=b(()=>{LM();Vy();BM();wee=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,See=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,xee=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,hx=s((t,e)=>async(r,n)=>{let o={},i=r.req.header("Content-Type");switch(t){case"json":if(!i||!wee.test(i))break;try{o=await r.req.json()}catch{let c="Malformed JSON in request body";throw new Lp(400,{message:c})}break;case"form":{if(!i||!(See.test(i)||xee.test(i)))break;let c;if(r.req.bodyCache.formData)c=await r.req.bodyCache.formData;else try{let d=await r.req.arrayBuffer();c=await FM(d,i),r.req.bodyCache.formData=c}catch(d){let p="Malformed FormData request.";throw p+=d instanceof Error?` ${d.message}`:` ${String(d)}`,new Lp(400,{message:p})}let l={};c.forEach((d,p)=>{p.endsWith("[]")?(l[p]??=[]).push(d):Array.isArray(l[p])?l[p].push(d):p in l?l[p]=[l[p],d]:l[p]=d}),o=l;break}case"query":o=Object.fromEntries(Object.entries(r.req.queries()).map(([c,l])=>l.length===1?[c,l[0]]:[c,l]));break;case"param":o=r.req.param();break;case"header":o=r.req.header();break;case"cookie":o=UM(r);break}let a=await e(o,r);return a instanceof Response?a:(r.req.addValidatedData(t,a),await n())},"validator")});var HM=b(()=>{VM()});function Tee(t,e,r,n){return hx(t,async(o,i)=>{let a=o;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let l=Object.keys("in"in e?e.in.shape:e.shape),d=Object.fromEntries(l.map(p=>[p.toLowerCase(),p]));a=Object.fromEntries(Object.entries(o).map(([p,m])=>[d[p]||p,m]))}let c=n&&n.validationFunction?await n.validationFunction(e,a):await e.safeParseAsync(a);if(r){let l=await r({data:a,...c,target:t},i);if(l){if(l instanceof Response)return l;if("response"in l)return l.response}}return c.success?c.data:i.json(c,400)})}var Je,Jr=b(()=>{HM();s(Tee,"zValidatorFunction");Je=Tee});function V(t,e,r){function n(c,l){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,l);let d=a.prototype,p=Object.keys(d);for(let m=0;m<p.length;m++){let h=p[m];h in c||(c[h]=d[h].bind(c))}}s(n,"init");let o=r?.Parent??Object;class i extends o{static{s(this,"Definition")}}Object.defineProperty(i,"name",{value:t});function a(c){var l;let d=r?.Parent?new i:this;n(d,c),(l=d._zod).deferred??(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return s(a,"_"),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s(c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t),"value")}),Object.defineProperty(a,"name",{value:t}),a}function yr(t){return t&&Object.assign(hl,t),hl}var gx,$f,uo,cs,hl,nc=b(()=>{gx=Object.freeze({status:"aborted"});s(V,"$constructor");$f=Symbol("zod_brand"),uo=class extends Error{static{s(this,"$ZodAsyncError")}constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},cs=class extends Error{static{s(this,"$ZodEncodeError")}constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},hl={};s(yr,"config")});var de={};On(de,{BIGINT_FORMAT_RANGES:()=>kx,Class:()=>vx,NUMBER_FORMAT_RANGES:()=>Ex,aborted:()=>ms,allowsEval:()=>wx,assert:()=>Aee,assertEqual:()=>Eee,assertIs:()=>Iee,assertNever:()=>Pee,assertNotEqual:()=>kee,assignProp:()=>ls,base64ToUint8Array:()=>JM,base64urlToUint8Array:()=>Zee,cached:()=>ic,captureStackTrace:()=>Nf,cleanEnum:()=>Hee,cleanRegex:()=>vl,clone:()=>en,cloneDef:()=>Oee,createTransparentProxy:()=>Mee,defineLazy:()=>ht,esc:()=>Rf,escapeRegex:()=>Zn,extend:()=>Lee,finalizeIssue:()=>Nn,floatSafeRemainder:()=>_x,getElementAtPath:()=>$ee,getEnumValues:()=>yl,getLengthableOrigin:()=>wl,getParsedType:()=>jee,getSizableOrigin:()=>bl,hexToUint8Array:()=>Gee,isObject:()=>Ks,isPlainObject:()=>ps,issue:()=>sc,joinValues:()=>X,jsonStringifyReplacer:()=>oc,merge:()=>Fee,mergeDefs:()=>ds,normalizeParams:()=>le,nullish:()=>us,numKeys:()=>Dee,objectClone:()=>Cee,omit:()=>Uee,optionalKeys:()=>Tx,partial:()=>Bee,pick:()=>zee,prefixIssues:()=>Rn,primitiveTypes:()=>xx,promiseAllObject:()=>Ree,propertyKeyTypes:()=>_l,randomString:()=>Nee,required:()=>Vee,safeExtend:()=>qee,shallowClone:()=>Sx,slugify:()=>bx,stringifyPrimitive:()=>ue,uint8ArrayToBase64:()=>GM,uint8ArrayToBase64url:()=>Jee,uint8ArrayToHex:()=>Kee,unwrapMessage:()=>gl});function Eee(t){return t}function kee(t){return t}function Iee(t){}function Pee(t){throw new Error}function Aee(t){}function yl(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,o])=>e.indexOf(+n)===-1).map(([n,o])=>o)}function X(t,e="|"){return t.map(r=>ue(r)).join(e)}function oc(t,e){return typeof e=="bigint"?e.toString():e}function ic(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function us(t){return t==null}function vl(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function _x(t,e){let r=(t.toString().split(".")[1]||"").length,n=e.toString(),o=(n.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(n)){let l=n.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}let i=r>o?r:o,a=Number.parseInt(t.toFixed(i).replace(".","")),c=Number.parseInt(e.toFixed(i).replace(".",""));return a%c/10**i}function ht(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==ZM)return n===void 0&&(n=ZM,n=r()),n},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}function Cee(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function ls(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ds(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}function Oee(t){return ds(t._zod.def)}function $ee(t,e){return e?e.reduce((r,n)=>r?.[n],t):t}function Ree(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let o={};for(let i=0;i<e.length;i++)o[e[i]]=n[i];return o})}function Nee(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function Rf(t){return JSON.stringify(t)}function bx(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function Ks(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function ps(t){if(Ks(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(Ks(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Sx(t){return ps(t)?{...t}:Array.isArray(t)?[...t]:t}function Dee(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Zn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function en(t,e,r){let n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function le(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:s(()=>e,"error")};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:s(()=>e.error,"error")}:e}function Mee(t){let e;return new Proxy({},{get(r,n,o){return e??(e=t()),Reflect.get(e,n,o)},set(r,n,o,i){return e??(e=t()),Reflect.set(e,n,o,i)},has(r,n){return e??(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e??(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,o){return e??(e=t()),Reflect.defineProperty(e,n,o)}})}function ue(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function Tx(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function zee(t,e){let r=t._zod.def,n=ds(t._zod.def,{get shape(){let o={};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(o[i]=r.shape[i])}return ls(this,"shape",o),o},checks:[]});return en(t,n)}function Uee(t,e){let r=t._zod.def,n=ds(t._zod.def,{get shape(){let o={...t._zod.def.shape};for(let i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete o[i]}return ls(this,"shape",o),o},checks:[]});return en(t,n)}function Lee(t,e){if(!ps(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let o=ds(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e};return ls(this,"shape",i),i},checks:[]});return en(t,o)}function qee(t,e){if(!ps(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return ls(this,"shape",n),n},checks:t._zod.def.checks};return en(t,r)}function Fee(t,e){let r=ds(t._zod.def,{get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return ls(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return en(t,r)}function Bee(t,e,r){let n=ds(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:o[a]}):o[a])}else for(let a in o)i[a]=t?new t({type:"optional",innerType:o[a]}):o[a];return ls(this,"shape",i),i},checks:[]});return en(e,n)}function Vee(t,e,r){let n=ds(e._zod.def,{get shape(){let o=e._zod.def.shape,i={...o};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:o[a]}))}else for(let a in o)i[a]=new t({type:"nonoptional",innerType:o[a]});return ls(this,"shape",i),i},checks:[]});return en(e,n)}function ms(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function Rn(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function gl(t){return typeof t=="string"?t:t?.message}function Nn(t,e,r){let n={...t,path:t.path??[]};if(!t.message){let o=gl(t.inst?._zod.def?.error?.(t))??gl(e?.error?.(t))??gl(r.customError?.(t))??gl(r.localeError?.(t))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function bl(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function wl(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function sc(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}function Hee(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function JM(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function GM(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function Zee(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return JM(e+r)}function Jee(t){return GM(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Gee(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n/2]=Number.parseInt(e.slice(n,n+2),16);return r}function Kee(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}var ZM,Nf,wx,jee,_l,xx,Ex,kx,vx,De=b(()=>{s(Eee,"assertEqual");s(kee,"assertNotEqual");s(Iee,"assertIs");s(Pee,"assertNever");s(Aee,"assert");s(yl,"getEnumValues");s(X,"joinValues");s(oc,"jsonStringifyReplacer");s(ic,"cached");s(us,"nullish");s(vl,"cleanRegex");s(_x,"floatSafeRemainder");ZM=Symbol("evaluating");s(ht,"defineLazy");s(Cee,"objectClone");s(ls,"assignProp");s(ds,"mergeDefs");s(Oee,"cloneDef");s($ee,"getElementAtPath");s(Ree,"promiseAllObject");s(Nee,"randomString");s(Rf,"esc");s(bx,"slugify");Nf="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};s(Ks,"isObject");wx=ic(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});s(ps,"isPlainObject");s(Sx,"shallowClone");s(Dee,"numKeys");jee=s(t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},"getParsedType"),_l=new Set(["string","number","symbol"]),xx=new Set(["string","number","bigint","boolean","symbol","undefined"]);s(Zn,"escapeRegex");s(en,"clone");s(le,"normalizeParams");s(Mee,"createTransparentProxy");s(ue,"stringifyPrimitive");s(Tx,"optionalKeys");Ex={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},kx={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};s(zee,"pick");s(Uee,"omit");s(Lee,"extend");s(qee,"safeExtend");s(Fee,"merge");s(Bee,"partial");s(Vee,"required");s(ms,"aborted");s(Rn,"prefixIssues");s(gl,"unwrapMessage");s(Nn,"finalizeIssue");s(bl,"getSizableOrigin");s(wl,"getLengthableOrigin");s(sc,"issue");s(Hee,"cleanEnum");s(JM,"base64ToUint8Array");s(GM,"uint8ArrayToBase64");s(Zee,"base64urlToUint8Array");s(Jee,"uint8ArrayToBase64url");s(Gee,"hexToUint8Array");s(Kee,"uint8ArrayToHex");vx=class{static{s(this,"Class")}constructor(...e){}}});function xl(t,e=r=>r.message){let r={},n=[];for(let o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}function Tl(t,e=r=>r.message){let r={_errors:[]},n=s(o=>{for(let i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let a=r,c=0;for(;c<i.path.length;){let l=i.path[c];c===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(i))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}},"processError");return n(t),r}function Ix(t,e=r=>r.message){let r={errors:[]},n=s((o,i=[])=>{var a,c;for(let l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>n({issues:d},l.path));else if(l.code==="invalid_key")n({issues:l.issues},l.path);else if(l.code==="invalid_element")n({issues:l.issues},l.path);else{let d=[...i,...l.path];if(d.length===0){r.errors.push(e(l));continue}let p=r,m=0;for(;m<d.length;){let h=d[m],y=m===d.length-1;typeof h=="string"?(p.properties??(p.properties={}),(a=p.properties)[h]??(a[h]={errors:[]}),p=p.properties[h]):(p.items??(p.items=[]),(c=p.items)[h]??(c[h]={errors:[]}),p=p.items[h]),y&&p.errors.push(e(l)),m++}}},"processError");return n(t),r}function WM(t){let e=[],r=t.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function Px(t){let e=[],r=[...t.issues].sort((n,o)=>(n.path??[]).length-(o.path??[]).length);for(let n of r)e.push(`\u2716 ${n.message}`),n.path?.length&&e.push(`  \u2192 at ${WM(n.path)}`);return e.join(`
`)}var KM,Sl,xn,Ax=b(()=>{nc();De();KM=s((t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,oc,2),Object.defineProperty(t,"toString",{value:s(()=>t.message,"value"),enumerable:!1})},"initializer"),Sl=V("$ZodError",KM),xn=V("$ZodError",KM,{Parent:Error});s(xl,"flattenError");s(Tl,"formatError");s(Ix,"treeifyError");s(WM,"toDotPath");s(Px,"prettifyError")});var ac,Df,cc,jf,uc,Cx,lc,Ox,Mf,Qee,zf,Xee,Uf,Yee,Lf,ete,qf,tte,Ff,rte,Bf,nte,Vf,ote,$x=b(()=>{nc();Ax();De();ac=s(t=>(e,r,n,o)=>{let i=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new uo;if(a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>Nn(l,i,yr())));throw Nf(c,o?.callee),c}return a.value},"_parse"),Df=ac(xn),cc=s(t=>async(e,r,n,o)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>Nn(l,i,yr())));throw Nf(c,o?.callee),c}return a.value},"_parseAsync"),jf=cc(xn),uc=s(t=>(e,r,n)=>{let o=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new uo;return i.issues.length?{success:!1,error:new(t??Sl)(i.issues.map(a=>Nn(a,o,yr())))}:{success:!0,data:i.value}},"_safeParse"),Cx=uc(xn),lc=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},i=e._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>Nn(a,o,yr())))}:{success:!0,data:i.value}},"_safeParseAsync"),Ox=lc(xn),Mf=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ac(t)(e,r,o)},"_encode"),Qee=Mf(xn),zf=s(t=>(e,r,n)=>ac(t)(e,r,n),"_decode"),Xee=zf(xn),Uf=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cc(t)(e,r,o)},"_encodeAsync"),Yee=Uf(xn),Lf=s(t=>async(e,r,n)=>cc(t)(e,r,n),"_decodeAsync"),ete=Lf(xn),qf=s(t=>(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return uc(t)(e,r,o)},"_safeEncode"),tte=qf(xn),Ff=s(t=>(e,r,n)=>uc(t)(e,r,n),"_safeDecode"),rte=Ff(xn),Bf=s(t=>async(e,r,n)=>{let o=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return lc(t)(e,r,o)},"_safeEncodeAsync"),nte=Bf(xn),Vf=s(t=>async(e,r,n)=>lc(t)(e,r,n),"_safeDecodeAsync"),ote=Vf(xn)});var Jn={};On(Jn,{base64:()=>Gx,base64url:()=>Hf,bigint:()=>e0,boolean:()=>n0,browserEmail:()=>pte,cidrv4:()=>Zx,cidrv6:()=>Jx,cuid:()=>Rx,cuid2:()=>Nx,date:()=>Wx,datetime:()=>Xx,domain:()=>hte,duration:()=>Ux,e164:()=>Kx,email:()=>qx,emoji:()=>Fx,extendedDuration:()=>ite,guid:()=>Lx,hex:()=>gte,hostname:()=>fte,html5Email:()=>ute,idnEmail:()=>dte,integer:()=>t0,ipv4:()=>Bx,ipv6:()=>Vx,ksuid:()=>Mx,lowercase:()=>s0,mac:()=>Hx,md5_base64:()=>vte,md5_base64url:()=>_te,md5_hex:()=>yte,nanoid:()=>zx,null:()=>o0,number:()=>r0,rfc5322Email:()=>lte,sha1_base64:()=>wte,sha1_base64url:()=>Ste,sha1_hex:()=>bte,sha256_base64:()=>Tte,sha256_base64url:()=>Ete,sha256_hex:()=>xte,sha384_base64:()=>Ite,sha384_base64url:()=>Pte,sha384_hex:()=>kte,sha512_base64:()=>Cte,sha512_base64url:()=>Ote,sha512_hex:()=>Ate,string:()=>Yx,time:()=>Qx,ulid:()=>Dx,undefined:()=>i0,unicodeEmail:()=>QM,uppercase:()=>a0,uuid:()=>Ws,uuid4:()=>ste,uuid6:()=>ate,uuid7:()=>cte,xid:()=>jx});function Fx(){return new RegExp(mte,"u")}function YM(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Qx(t){return new RegExp(`^${YM(t)}$`)}function Xx(t){let e=YM({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${XM}T(?:${n})$`)}function El(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}function kl(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}var Rx,Nx,Dx,jx,Mx,zx,Ux,ite,Lx,Ws,ste,ate,cte,qx,ute,lte,QM,dte,pte,mte,Bx,Vx,Hx,Zx,Jx,Gx,Hf,fte,hte,Kx,XM,Wx,Yx,e0,t0,r0,n0,o0,i0,s0,a0,gte,yte,vte,_te,bte,wte,Ste,xte,Tte,Ete,kte,Ite,Pte,Ate,Cte,Ote,Zf=b(()=>{De();Rx=/^[cC][^\s-]{8,}$/,Nx=/^[0-9a-z]+$/,Dx=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,jx=/^[0-9a-vA-V]{20}$/,Mx=/^[A-Za-z0-9]{27}$/,zx=/^[a-zA-Z0-9_-]{21}$/,Ux=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ite=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Lx=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ws=s(t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),ste=Ws(4),ate=Ws(6),cte=Ws(7),qx=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ute=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lte=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,QM=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,dte=QM,pte=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mte="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";s(Fx,"emoji");Bx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Hx=s(t=>{let e=Zn(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},"mac"),Zx=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Jx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gx=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Hf=/^[A-Za-z0-9_-]*$/,fte=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,hte=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Kx=/^\+(?:[0-9]){6,14}[0-9]$/,XM="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Wx=new RegExp(`^${XM}$`);s(YM,"timeSource");s(Qx,"time");s(Xx,"datetime");Yx=s(t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},"string"),e0=/^-?\d+n?$/,t0=/^-?\d+$/,r0=/^-?\d+(?:\.\d+)?/,n0=/^(?:true|false)$/i,o0=/^null$/i,i0=/^undefined$/i,s0=/^[^A-Z]*$/,a0=/^[^a-z]*$/,gte=/^[0-9a-fA-F]*$/;s(El,"fixedBase64");s(kl,"fixedBase64url");yte=/^[0-9a-fA-F]{32}$/,vte=El(22,"=="),_te=kl(22),bte=/^[0-9a-fA-F]{40}$/,wte=El(27,"="),Ste=kl(27),xte=/^[0-9a-fA-F]{64}$/,Tte=El(43,"="),Ete=kl(43),kte=/^[0-9a-fA-F]{96}$/,Ite=El(64,""),Pte=kl(64),Ate=/^[0-9a-fA-F]{128}$/,Cte=El(86,"=="),Ote=kl(86)});function ez(t,e,r){t.issues.length&&e.issues.push(...Rn(r,t.issues))}var Bt,tz,Jf,Gf,c0,u0,l0,d0,p0,m0,f0,h0,g0,dc,y0,v0,_0,b0,w0,S0,x0,T0,E0,Kf=b(()=>{nc();Zf();De();Bt=V("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),tz={number:"number",bigint:"bigint",object:"date"},Jf=V("$ZodCheckLessThan",(t,e)=>{Bt.init(t,e);let r=tz[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Gf=V("$ZodCheckGreaterThan",(t,e)=>{Bt.init(t,e);let r=tz[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,i=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),c0=V("$ZodCheckMultipleOf",(t,e)=>{Bt.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):_x(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),u0=V("$ZodCheckNumberFormat",(t,e)=>{Bt.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),n=r?"int":"number",[o,i]=Ex[e.format];t._zod.onattach.push(a=>{let c=a._zod.bag;c.format=e.format,c.minimum=o,c.maximum=i,r&&(c.pattern=t0)}),t._zod.check=a=>{let c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}c<o&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),c>i&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),l0=V("$ZodCheckBigIntFormat",(t,e)=>{Bt.init(t,e);let[r,n]=kx[e.format];t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,i.minimum=r,i.maximum=n}),t._zod.check=o=>{let i=o.value;i<r&&o.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),i>n&&o.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:t})}}),d0=V("$ZodCheckMaxSize",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;o.size<=e.maximum||n.issues.push({origin:bl(o),code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),p0=V("$ZodCheckMinSize",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;o.size>=e.minimum||n.issues.push({origin:bl(o),code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),m0=V("$ZodCheckSizeEquals",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.size!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.size,o.maximum=e.size,o.size=e.size}),t._zod.check=n=>{let o=n.value,i=o.size;if(i===e.size)return;let a=i>e.size;n.issues.push({origin:bl(o),...a?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),f0=V("$ZodCheckMaxLength",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;if(o.length<=e.maximum)return;let a=wl(o);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),h0=V("$ZodCheckMinLength",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;if(o.length>=e.minimum)return;let a=wl(o);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),g0=V("$ZodCheckLengthEquals",(t,e)=>{var r;Bt.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!us(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=n=>{let o=n.value,i=o.length;if(i===e.length)return;let a=wl(o),c=i>e.length;n.issues.push({origin:a,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),dc=V("$ZodCheckStringFormat",(t,e)=>{var r,n;Bt.init(t,e),t._zod.onattach.push(o=>{let i=o._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),y0=V("$ZodCheckRegex",(t,e)=>{dc.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),v0=V("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=s0),dc.init(t,e)}),_0=V("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=a0),dc.init(t,e)}),b0=V("$ZodCheckIncludes",(t,e)=>{Bt.init(t,e);let r=Zn(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(o=>{let i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),w0=V("$ZodCheckStartsWith",(t,e)=>{Bt.init(t,e);let r=new RegExp(`^${Zn(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),S0=V("$ZodCheckEndsWith",(t,e)=>{Bt.init(t,e);let r=new RegExp(`.*${Zn(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}});s(ez,"handleCheckPropertyResult");x0=V("$ZodCheckProperty",(t,e)=>{Bt.init(t,e),t._zod.check=r=>{let n=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(o=>ez(o,r,e.property));ez(n,r,e.property)}}),T0=V("$ZodCheckMimeType",(t,e)=>{Bt.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),t._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:t,continue:!e.abort})}}),E0=V("$ZodCheckOverwrite",(t,e)=>{Bt.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}})});var Il,k0=b(()=>{Il=class{static{s(this,"Doc")}constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(let a of i)this.content.push(a)}compile(){let e=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,o.join(`
`))}}});var I0,P0=b(()=>{I0={major:4,minor:1,patch:13}});function W0(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}function mz(t){if(!Hf.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return W0(r)}function fz(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}function nz(t,e,r){t.issues.length&&e.issues.push(...Rn(r,t.issues)),e.value[r]=t.value}function eh(t,e,r,n){t.issues.length&&e.issues.push(...Rn(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}function hz(t){let e=Object.keys(t.shape);for(let n of e)if(!t.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let r=Tx(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function gz(t,e,r,n,o,i){let a=[],c=o.keySet,l=o.catchall._zod,d=l.def.type;for(let p in e){if(c.has(p))continue;if(d==="never"){a.push(p);continue}let m=l.run({value:e[p],issues:[]},n);m instanceof Promise?t.push(m.then(h=>eh(h,r,p,e))):eh(m,r,p,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}function oz(t,e,r,n){for(let i of t)if(i.issues.length===0)return e.value=i.value,e;let o=t.filter(i=>!ms(i));return o.length===1?(e.value=o[0].value,o[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>Nn(a,n,yr())))}),e)}function A0(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(ps(t)&&ps(e)){let r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),o={...t,...e};for(let i of n){let a=A0(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let o=t[n],i=e[n],a=A0(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function iz(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),ms(t))return t;let n=A0(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}function Wf(t,e,r){t.issues.length&&e.issues.push(...Rn(r,t.issues)),e.value[r]=t.value}function sz(t,e,r,n,o,i,a){t.issues.length&&(_l.has(typeof n)?r.issues.push(...Rn(n,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:o,inst:i,issues:t.issues.map(c=>Nn(c,a,yr()))})),e.issues.length&&(_l.has(typeof n)?r.issues.push(...Rn(n,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:o,inst:i,key:n,issues:e.issues.map(c=>Nn(c,a,yr()))})),r.value.set(t.value,e.value)}function az(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}function cz(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}function uz(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}function lz(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}function Qf(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}function Xf(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let o=e.transform(t.value,t);return o instanceof Promise?o.then(i=>Yf(t,i,e.out,r)):Yf(t,o,e.out,r)}else{let o=e.reverseTransform(t.value,t);return o instanceof Promise?o.then(i=>Yf(t,i,e.in,r)):Yf(t,o,e.in,r)}}function Yf(t,e,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},n)}function dz(t){return t.value=Object.freeze(t.value),t}function pz(t,e,r,n){if(!t){let o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(sc(o))}}var Ge,Qs,Lt,C0,O0,$0,R0,N0,D0,j0,M0,z0,U0,L0,q0,F0,B0,V0,H0,Z0,J0,G0,K0,Q0,X0,Y0,eT,tT,th,rT,Pl,rh,nT,oT,iT,sT,aT,cT,uT,lT,dT,pT,yz,mT,nh,fT,hT,oh,gT,yT,vT,_T,bT,wT,ST,xT,TT,ET,kT,IT,PT,AT,CT,OT,Al,$T,RT,NT,DT,jT,MT,zT=b(()=>{Kf();nc();k0();$x();Zf();De();P0();De();Ge=V("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=I0;let n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let o of n)for(let i of o._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=s((a,c,l)=>{let d=ms(a),p;for(let m of c){if(m._zod.def.when){if(!m._zod.def.when(a))continue}else if(d)continue;let h=a.issues.length,y=m._zod.check(a);if(y instanceof Promise&&l?.async===!1)throw new uo;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,a.issues.length!==h&&(d||(d=ms(a,h)))});else{if(a.issues.length===h)continue;d||(d=ms(a,h))}}return p?p.then(()=>a):a},"runChecks"),i=s((a,c,l)=>{if(ms(a))return a.aborted=!0,a;let d=o(c,n,l);if(d instanceof Promise){if(l.async===!1)throw new uo;return d.then(p=>t._zod.parse(p,l))}return t._zod.parse(d,l)},"handleCanaryResult");t._zod.run=(a,c)=>{if(c.skipChecks)return t._zod.parse(a,c);if(c.direction==="backward"){let d=t._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(p=>i(p,a,c)):i(d,a,c)}let l=t._zod.parse(a,c);if(l instanceof Promise){if(c.async===!1)throw new uo;return l.then(d=>o(d,n,c))}return o(l,n,c)}}t["~standard"]={validate:s(o=>{try{let i=Cx(t,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Ox(t,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},"validate"),vendor:"zod",version:1}}),Qs=V("$ZodString",(t,e)=>{Ge.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??Yx(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Lt=V("$ZodStringFormat",(t,e)=>{dc.init(t,e),Qs.init(t,e)}),C0=V("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Lx),Lt.init(t,e)}),O0=V("$ZodUUID",(t,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ws(n))}else e.pattern??(e.pattern=Ws());Lt.init(t,e)}),$0=V("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=qx),Lt.init(t,e)}),R0=V("$ZodURL",(t,e)=>{Lt.init(t,e),t._zod.check=r=>{try{let n=r.value.trim(),o=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=o.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),N0=V("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Fx()),Lt.init(t,e)}),D0=V("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=zx),Lt.init(t,e)}),j0=V("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Rx),Lt.init(t,e)}),M0=V("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Nx),Lt.init(t,e)}),z0=V("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Dx),Lt.init(t,e)}),U0=V("$ZodXID",(t,e)=>{e.pattern??(e.pattern=jx),Lt.init(t,e)}),L0=V("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Mx),Lt.init(t,e)}),q0=V("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Xx(e)),Lt.init(t,e)}),F0=V("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Wx),Lt.init(t,e)}),B0=V("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Qx(e)),Lt.init(t,e)}),V0=V("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Ux),Lt.init(t,e)}),H0=V("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Bx),Lt.init(t,e),t._zod.bag.format="ipv4"}),Z0=V("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Vx),Lt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),J0=V("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=Hx(e.delimiter)),Lt.init(t,e),t._zod.bag.format="mac"}),G0=V("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Zx),Lt.init(t,e)}),K0=V("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Jx),Lt.init(t,e),t._zod.check=r=>{let n=r.value.split("/");try{if(n.length!==2)throw new Error;let[o,i]=n;if(!i)throw new Error;let a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});s(W0,"isValidBase64");Q0=V("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Gx),Lt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{W0(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});s(mz,"isValidBase64URL");X0=V("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Hf),Lt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{mz(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Y0=V("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Kx),Lt.init(t,e)});s(fz,"isValidJWT");eT=V("$ZodJWT",(t,e)=>{Lt.init(t,e),t._zod.check=r=>{fz(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),tT=V("$ZodCustomStringFormat",(t,e)=>{Lt.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),th=V("$ZodNumber",(t,e)=>{Ge.init(t,e),t._zod.pattern=t._zod.bag.pattern??r0,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;let i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...i?{received:i}:{}}),r}}),rT=V("$ZodNumberFormat",(t,e)=>{u0.init(t,e),th.init(t,e)}),Pl=V("$ZodBoolean",(t,e)=>{Ge.init(t,e),t._zod.pattern=n0,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}let o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),r}}),rh=V("$ZodBigInt",(t,e)=>{Ge.init(t,e),t._zod.pattern=e0,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),nT=V("$ZodBigIntFormat",(t,e)=>{l0.init(t,e),rh.init(t,e)}),oT=V("$ZodSymbol",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:o,inst:t}),r}}),iT=V("$ZodUndefined",(t,e)=>{Ge.init(t,e),t._zod.pattern=i0,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:o,inst:t}),r}}),sT=V("$ZodNull",(t,e)=>{Ge.init(t,e),t._zod.pattern=o0,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),r}}),aT=V("$ZodAny",(t,e)=>{Ge.init(t,e),t._zod.parse=r=>r}),cT=V("$ZodUnknown",(t,e)=>{Ge.init(t,e),t._zod.parse=r=>r}),uT=V("$ZodNever",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),lT=V("$ZodVoid",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return typeof o>"u"||r.issues.push({expected:"void",code:"invalid_type",input:o,inst:t}),r}}),dT=V("$ZodDate",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let o=r.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:t}),r}});s(nz,"handleArrayResult");pT=V("$ZodArray",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);let i=[];for(let a=0;a<o.length;a++){let c=o[a],l=e.element._zod.run({value:c,issues:[]},n);l instanceof Promise?i.push(l.then(d=>nz(d,r,a))):nz(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});s(eh,"handlePropertyResult");s(hz,"normalizeDef");s(gz,"handleCatchall");yz=V("$ZodObject",(t,e)=>{if(Ge.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let c=e.shape;Object.defineProperty(e,"shape",{get:s(()=>{let l={...c};return Object.defineProperty(e,"shape",{value:l}),l},"get")})}let n=ic(()=>hz(e));ht(t._zod,"propValues",()=>{let c=e.shape,l={};for(let d in c){let p=c[d]._zod;if(p.values){l[d]??(l[d]=new Set);for(let m of p.values)l[d].add(m)}}return l});let o=Ks,i=e.catchall,a;t._zod.parse=(c,l)=>{a??(a=n.value);let d=c.value;if(!o(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};let p=[],m=a.shape;for(let h of a.keys){let g=m[h]._zod.run({value:d[h],issues:[]},l);g instanceof Promise?p.push(g.then(f=>eh(f,c,h,d))):eh(g,c,h,d)}return i?gz(p,d,c,l,n.value,t):p.length?Promise.all(p).then(()=>c):c}}),mT=V("$ZodObjectJIT",(t,e)=>{yz.init(t,e);let r=t._zod.parse,n=ic(()=>hz(e)),o=s(h=>{let y=new Il(["shape","payload","ctx"]),g=n.value,f=s(x=>{let I=Rf(x);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`},"parseStr");y.write("const input = payload.value;");let _=Object.create(null),S=0;for(let x of g.keys)_[x]=`key_${S++}`;y.write("const newResult = {};");for(let x of g.keys){let I=_[x],N=Rf(x);y.write(`const ${I} = ${f(x)};`),y.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        
        if (${I}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${I}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");let w=y.compile();return(x,I)=>w(h,x,I)},"generateFastpass"),i,a=Ks,c=!hl.jitless,d=c&&wx.value,p=e.catchall,m;t._zod.parse=(h,y)=>{m??(m=n.value);let g=h.value;return a(g)?c&&d&&y?.async===!1&&y.jitless!==!0?(i||(i=o(e.shape)),h=i(h,y),p?gz([],g,h,y,m,t):h):r(h,y):(h.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),h)}});s(oz,"handleUnionResults");nh=V("$ZodUnion",(t,e)=>{Ge.init(t,e),ht(t._zod,"optin",()=>e.options.some(o=>o._zod.optin==="optional")?"optional":void 0),ht(t._zod,"optout",()=>e.options.some(o=>o._zod.optout==="optional")?"optional":void 0),ht(t._zod,"values",()=>{if(e.options.every(o=>o._zod.values))return new Set(e.options.flatMap(o=>Array.from(o._zod.values)))}),ht(t._zod,"pattern",()=>{if(e.options.every(o=>o._zod.pattern)){let o=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>vl(i.source)).join("|")})$`)}});let r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(o,i)=>{if(r)return n(o,i);let a=!1,c=[];for(let l of e.options){let d=l._zod.run({value:o.value,issues:[]},i);if(d instanceof Promise)c.push(d),a=!0;else{if(d.issues.length===0)return d;c.push(d)}}return a?Promise.all(c).then(l=>oz(l,o,t,i)):oz(c,o,t,i)}}),fT=V("$ZodDiscriminatedUnion",(t,e)=>{nh.init(t,e);let r=t._zod.parse;ht(t._zod,"propValues",()=>{let o={};for(let i of e.options){let a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(let[c,l]of Object.entries(a)){o[c]||(o[c]=new Set);for(let d of l)o[c].add(d)}}return o});let n=ic(()=>{let o=e.options,i=new Map;for(let a of o){let c=a._zod.propValues?.[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(let l of c){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,a)}}return i});t._zod.parse=(o,i)=>{let a=o.value;if(!Ks(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),o;let c=n.value.get(a?.[e.discriminator]);return c?c._zod.run(o,i):e.unionFallback?r(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:a,path:[e.discriminator],inst:t}),o)}}),hT=V("$ZodIntersection",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value,i=e.left._zod.run({value:o,issues:[]},n),a=e.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,d])=>iz(r,l,d)):iz(r,i,a)}});s(A0,"mergeValues");s(iz,"handleIntersectionResults");oh=V("$ZodTuple",(t,e)=>{Ge.init(t,e);let r=e.items;t._zod.parse=(n,o)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],c=[...r].reverse().findIndex(p=>p._zod.optin!=="optional"),l=c===-1?0:r.length-c;if(!e.rest){let p=i.length>r.length,m=i.length<l-1;if(p||m)return n.issues.push({...p?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:t,origin:"array"}),n}let d=-1;for(let p of r){if(d++,d>=i.length&&d>=l)continue;let m=p._zod.run({value:i[d],issues:[]},o);m instanceof Promise?a.push(m.then(h=>Wf(h,n,d))):Wf(m,n,d)}if(e.rest){let p=i.slice(r.length);for(let m of p){d++;let h=e.rest._zod.run({value:m,issues:[]},o);h instanceof Promise?a.push(h.then(y=>Wf(y,n,d))):Wf(h,n,d)}}return a.length?Promise.all(a).then(()=>n):n}});s(Wf,"handleTupleResult");gT=V("$ZodRecord",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!ps(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),r;let i=[],a=e.keyType._zod.values;if(a){r.value={};let c=new Set;for(let d of a)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){c.add(typeof d=="number"?d.toString():d);let p=e.valueType._zod.run({value:o[d],issues:[]},n);p instanceof Promise?i.push(p.then(m=>{m.issues.length&&r.issues.push(...Rn(d,m.issues)),r.value[d]=m.value})):(p.issues.length&&r.issues.push(...Rn(d,p.issues)),r.value[d]=p.value)}let l;for(let d in o)c.has(d)||(l=l??[],l.push(d));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:l})}else{r.value={};for(let c of Reflect.ownKeys(o)){if(c==="__proto__")continue;let l=e.keyType._zod.run({value:c,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(p=>Nn(p,n,yr())),input:c,path:[c],inst:t}),r.value[l.value]=l.value;continue}let d=e.valueType._zod.run({value:o[c],issues:[]},n);d instanceof Promise?i.push(d.then(p=>{p.issues.length&&r.issues.push(...Rn(c,p.issues)),r.value[l.value]=p.value})):(d.issues.length&&r.issues.push(...Rn(c,d.issues)),r.value[l.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),yT=V("$ZodMap",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:o,inst:t}),r;let i=[];r.value=new Map;for(let[a,c]of o){let l=e.keyType._zod.run({value:a,issues:[]},n),d=e.valueType._zod.run({value:c,issues:[]},n);l instanceof Promise||d instanceof Promise?i.push(Promise.all([l,d]).then(([p,m])=>{sz(p,m,r,a,o,t,n)})):sz(l,d,r,a,o,t,n)}return i.length?Promise.all(i).then(()=>r):r}});s(sz,"handleMapResult");vT=V("$ZodSet",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!(o instanceof Set))return r.issues.push({input:o,inst:t,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let a of o){let c=e.valueType._zod.run({value:a,issues:[]},n);c instanceof Promise?i.push(c.then(l=>az(l,r))):az(c,r)}return i.length?Promise.all(i).then(()=>r):r}});s(az,"handleSetResult");_T=V("$ZodEnum",(t,e)=>{Ge.init(t,e);let r=yl(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(o=>_l.has(typeof o)).map(o=>typeof o=="string"?Zn(o):o.toString()).join("|")})$`),t._zod.parse=(o,i)=>{let a=o.value;return n.has(a)||o.issues.push({code:"invalid_value",values:r,input:a,inst:t}),o}}),bT=V("$ZodLiteral",(t,e)=>{if(Ge.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Zn(n):n?Zn(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,o)=>{let i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),wT=V("$ZodFile",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;return o instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:o,inst:t}),r}}),ST=V("$ZodTransform",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new cs(t.constructor.name);let o=e.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new uo;return r.value=o,r}});s(cz,"handleOptionalResult");xT=V("$ZodOptional",(t,e)=>{Ge.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ht(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ht(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${vl(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>cz(i,r.value)):cz(o,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),TT=V("$ZodNullable",(t,e)=>{Ge.init(t,e),ht(t._zod,"optin",()=>e.innerType._zod.optin),ht(t._zod,"optout",()=>e.innerType._zod.optout),ht(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${vl(r.source)}|null)$`):void 0}),ht(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),ET=V("$ZodDefault",(t,e)=>{Ge.init(t,e),t._zod.optin="optional",ht(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>uz(i,e)):uz(o,e)}});s(uz,"handleDefaultResult");kT=V("$ZodPrefault",(t,e)=>{Ge.init(t,e),t._zod.optin="optional",ht(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),IT=V("$ZodNonOptional",(t,e)=>{Ge.init(t,e),ht(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>lz(i,t)):lz(o,t)}});s(lz,"handleNonOptionalResult");PT=V("$ZodSuccess",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new cs("ZodSuccess");let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.issues.length===0,r)):(r.value=o.issues.length===0,r)}}),AT=V("$ZodCatch",(t,e)=>{Ge.init(t,e),ht(t._zod,"optin",()=>e.innerType._zod.optin),ht(t._zod,"optout",()=>e.innerType._zod.optout),ht(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>Nn(a,n,yr()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(i=>Nn(i,n,yr()))},input:r.value}),r.issues=[]),r)}}),CT=V("$ZodNaN",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),OT=V("$ZodPipe",(t,e)=>{Ge.init(t,e),ht(t._zod,"values",()=>e.in._zod.values),ht(t._zod,"optin",()=>e.in._zod.optin),ht(t._zod,"optout",()=>e.out._zod.optout),ht(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>Qf(a,e.in,n)):Qf(i,e.in,n)}let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(i=>Qf(i,e.out,n)):Qf(o,e.out,n)}});s(Qf,"handlePipeResult");Al=V("$ZodCodec",(t,e)=>{Ge.init(t,e),ht(t._zod,"values",()=>e.in._zod.values),ht(t._zod,"optin",()=>e.in._zod.optin),ht(t._zod,"optout",()=>e.out._zod.optout),ht(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let i=e.in._zod.run(r,n);return i instanceof Promise?i.then(a=>Xf(a,e,n)):Xf(i,e,n)}else{let i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>Xf(a,e,n)):Xf(i,e,n)}}});s(Xf,"handleCodecAResult");s(Yf,"handleCodecTxResult");$T=V("$ZodReadonly",(t,e)=>{Ge.init(t,e),ht(t._zod,"propValues",()=>e.innerType._zod.propValues),ht(t._zod,"values",()=>e.innerType._zod.values),ht(t._zod,"optin",()=>e.innerType?._zod?.optin),ht(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(dz):dz(o)}});s(dz,"handleReadonlyResult");RT=V("$ZodTemplateLiteral",(t,e)=>{Ge.init(t,e);let r=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let o=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!o)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let i=o.startsWith("^")?1:0,a=o.endsWith("$")?o.length-1:o.length;r.push(o.slice(i,a))}else if(n===null||xx.has(typeof n))r.push(Zn(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(n,o)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:t,expected:"template_literal",code:"invalid_type"}),n):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),n)}),NT=V("$ZodFunction",(t,e)=>(Ge.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let o=t._def.input?Df(t._def.input,n):n,i=Reflect.apply(r,this,o);return t._def.output?Df(t._def.output,i):i}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let o=t._def.input?await jf(t._def.input,n):n,i=await Reflect.apply(r,this,o);return t._def.output?await jf(t._def.output,i):i}},t._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let n=t.constructor;return Array.isArray(r[0])?new n({type:"function",input:new oh({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new n({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let n=t.constructor;return new n({type:"function",input:t._def.input,output:r})},t)),DT=V("$ZodPromise",(t,e)=>{Ge.init(t,e),t._zod.parse=(r,n)=>Promise.resolve(r.value).then(o=>e.innerType._zod.run({value:o,issues:[]},n))}),jT=V("$ZodLazy",(t,e)=>{Ge.init(t,e),ht(t._zod,"innerType",()=>e.getter()),ht(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),ht(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),ht(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),ht(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,n)=>t._zod.innerType._zod.run(r,n)}),MT=V("$ZodCustom",(t,e)=>{Bt.init(t,e),Ge.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,o=e.fn(n);if(o instanceof Promise)return o.then(i=>pz(i,r,n,t));pz(o,r,n,t)}});s(pz,"handleRefineResult")});function UT(){return{localeError:Rte()}}var Rte,vz=b(()=>{De();Rte=s(()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return o=>{switch(o.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${o.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ue(o.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${o.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${o.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${o.prefix}"`:i.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${i.suffix}"`:i.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${i.includes}"`:i.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${i.pattern}`:`${n[i.format]??o.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${o.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${o.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${o.keys.length>1?"\u0629":""}: ${X(o.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${o.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}},"error");s(UT,"default")});function LT(){return{localeError:Nte()}}var Nte,_z=b(()=>{De();Nte=s(()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${o.expected}, daxil olan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ue(o.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${o.origin??"d\u0259y\u0259r"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${i.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:i.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${i.suffix}" il\u0259 bitm\u0259lidir`:i.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${i.includes}" daxil olmal\u0131d\u0131r`:i.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${i.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[i.format]??o.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${o.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${o.keys.length>1?"lar":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${o.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}},"error");s(LT,"default")});function bz(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}function qT(){return{localeError:Dte()}}var Dte,wz=b(()=>{De();s(bz,"getBelarusianPlural");Dte=s(()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0456\u045E";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${o.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ue(o.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=bz(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=bz(c,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${i}${o.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${o.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${o.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${o.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}},"error");s(qT,"default")});function FT(){return{localeError:Mte()}}var jte,Mte,Sz=b(()=>{De();jte=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),Mte=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${jte(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ue(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.maximum.toString()} ${i.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${n.minimum.toString()} ${i.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;if(o.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${o.prefix}"`;if(o.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${o.suffix}"`;if(o.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${o.includes}"`;if(o.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${o.pattern}`;let i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return o.format==="emoji"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="datetime"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="date"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),o.format==="time"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="duration"&&(i="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${i} ${r[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${X(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}},"error");s(FT,"default")});function BT(){return{localeError:zte()}}var zte,xz=b(()=>{De();zte=s(()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${o.expected}, s'ha rebut ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Valor inv\xE0lid: s'esperava ${ue(o.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${X(o.values," o ")}`;case"too_big":{let i=o.inclusive?"com a m\xE0xim":"menys de",a=e(o.origin);return a?`Massa gran: s'esperava que ${o.origin??"el valor"} contingu\xE9s ${i} ${o.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${o.origin??"el valor"} fos ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"com a m\xEDnim":"m\xE9s de",a=e(o.origin);return a?`Massa petit: s'esperava que ${o.origin} contingu\xE9s ${i} ${o.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${o.origin} fos ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\xE0lid: ha d'incloure "${i.includes}"`:i.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${i.pattern}`:`Format inv\xE0lid per a ${n[i.format]??o.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${o.divisor}`;case"unrecognized_keys":return`Clau${o.keys.length>1?"s":""} no reconeguda${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${o.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${o.origin}`;default:return"Entrada inv\xE0lida"}}},"error");s(BT,"default")});function VT(){return{localeError:Ute()}}var Ute,Tz=b(()=>{De();Ute=s(()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(o))return"pole";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return o=>{switch(o.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${o.expected}, obdr\u017Eeno ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ue(o.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED m\xEDt ${i}${o.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${o.origin??"hodnota"} mus\xED b\xFDt ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${i.pattern}`:`Neplatn\xFD form\xE1t ${n[i.format]??o.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${o.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${X(o.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${o.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${o.origin}`;default:return"Neplatn\xFD vstup"}}},"error");s(VT,"default")});function HT(){return{localeError:Lte()}}var Lte,Ez=b(()=>{De();Lte=s(()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return c},"parsedType"),i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${ue(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${X(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`For stor: forventede ${d??"value"} ${l.verb} ${c} ${a.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${d??"value"} havde ${c} ${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`For lille: forventede ${d} ${l.verb} ${c} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${c} ${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Ugyldig streng: skal starte med "${c.prefix}"`:c.format==="ends_with"?`Ugyldig streng: skal ende med "${c.suffix}"`:c.format==="includes"?`Ugyldig streng: skal indeholde "${c.includes}"`:c.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${c.pattern}`:`Ugyldig ${i[c.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${X(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}},"error");s(HT,"default")});function ZT(){return{localeError:qte()}}var qte,kz=b(()=>{De();qte=s(()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"Zahl";case"object":{if(Array.isArray(o))return"Array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return o=>{switch(o.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${o.expected}, erhalten ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ue(o.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${o.origin??"Wert"} ${i}${o.maximum.toString()} ist`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${o.origin} ${i}${o.minimum.toString()} ist`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ung\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\xFCltig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${o.divisor} sein`;case"unrecognized_keys":return`${o.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${o.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${o.origin}`;default:return"Ung\xFCltige Eingabe"}}},"error");s(ZT,"default")});function Cl(){return{localeError:Bte()}}var Fte,Bte,JT=b(()=>{De();Fte=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),Bte=s(()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${Fte(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${ue(n.values[0])}`:`Invalid option: expected one of ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Too big: expected ${n.origin??"value"} to have ${o}${n.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Too small: expected ${n.origin} to have ${o}${n.minimum.toString()} ${i.unit}`:`Too small: expected ${n.origin} to be ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${r[o.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${X(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}},"error");s(Cl,"default")});function GT(){return{localeError:Hte()}}var Vte,Hte,Iz=b(()=>{De();Vte=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),Hte=s(()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${Vte(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${ue(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${o}${n.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${r[o.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${X(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}},"error");s(GT,"default")});function KT(){return{localeError:Zte()}}var Zte,Pz=b(()=>{De();Zte=s(()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){return t[a]??null}s(r,"getSizing");function n(a){return e[a]??a}s(n,"getTypeName");let o=s(a=>{let c=typeof a;switch(c){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return c},"parsedType"),i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(o(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${ue(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${X(a.values,"|")}`;case"too_big":{let c=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`Demasiado grande: se esperaba que ${d??"valor"} tuviera ${c}${a.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${d??"valor"} fuera ${c}${a.maximum.toString()}`}case"too_small":{let c=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${c}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${c}${a.minimum.toString()}`}case"invalid_format":{let c=a;return c.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${c.prefix}"`:c.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${c.suffix}"`:c.format==="includes"?`Cadena inv\xE1lida: debe incluir "${c.includes}"`:c.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${c.pattern}`:`Inv\xE1lido ${i[c.format]??a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${X(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}},"error");s(KT,"default")});function WT(){return{localeError:Jte()}}var Jte,Az=b(()=>{De();Jte=s(()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0622\u0631\u0627\u06CC\u0647";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return o=>{switch(o.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${o.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(o.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return o.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ue(o.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${X(o.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${o.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:i.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${i.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:i.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${i.includes}" \u0628\u0627\u0634\u062F`:i.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${i.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[i.format]??o.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${o.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${o.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${X(o.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${o.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${o.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}},"error");s(WT,"default")});function QT(){return{localeError:Gte()}}var Gte,Cz=b(()=>{De();Gte=s(()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return o=>{switch(o.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${o.expected}, oli ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ue(o.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${i}${o.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${i}${o.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${i.pattern}`:`Virheellinen ${n[i.format]??o.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${o.divisor} monikerta`;case"unrecognized_keys":return`${o.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${X(o.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}},"error");s(QT,"default")});function XT(){return{localeError:Kte()}}var Kte,Oz=b(()=>{De();Kte=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombre";case"object":{if(Array.isArray(o))return"tableau";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : ${o.expected} attendu, ${r(o.input)} re\xE7u`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : ${ue(o.values[0])} attendu`:`Option invalide : une valeur parmi ${X(o.values,"|")} attendue`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Trop grand : ${o.origin??"valeur"} doit ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${o.origin??"valeur"} doit \xEAtre ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Trop petit : ${o.origin} doit ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : ${o.origin} doit \xEAtre ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${X(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");s(XT,"default")});function YT(){return{localeError:Wte()}}var Wte,$z=b(()=>{De();Wte=s(()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return o=>{switch(o.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${o.expected}, re\xE7u ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entr\xE9e invalide : attendu ${ue(o.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u2264":"<",a=e(o.origin);return a?`Trop grand : attendu que ${o.origin??"la valeur"} ait ${i}${o.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${o.origin??"la valeur"} soit ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u2265":">",a=e(o.origin);return a?`Trop petit : attendu que ${o.origin} ait ${i}${o.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${o.origin} soit ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${n[i.format]??o.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${o.divisor}`;case"unrecognized_keys":return`Cl\xE9${o.keys.length>1?"s":""} non reconnue${o.keys.length>1?"s":""} : ${X(o.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${o.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${o.origin}`;default:return"Entr\xE9e invalide"}}},"error");s(YT,"default")});function eE(){return{localeError:Qte()}}var Qte,Rz=b(()=>{De();Qte=s(()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=s(d=>d?t[d]:void 0,"typeEntry"),n=s(d=>{let p=r(d);return p?p.label:d??t.unknown.label},"typeLabel"),o=s(d=>`\u05D4${n(d)}`,"withDefinite"),i=s(d=>(r(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA","verbFor"),a=s(d=>d?e[d]??null:null,"getSizing"),c=s(d=>{let p=typeof d;switch(p){case"number":return Number.isNaN(d)?"NaN":"number";case"object":return Array.isArray(d)?"array":d===null?"null":Object.getPrototypeOf(d)!==Object.prototype&&d.constructor?d.constructor.name:"object";default:return p}},"parsedType"),l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return d=>{switch(d.code){case"invalid_type":{let p=d.expected,m=n(p),h=c(d.input),y=t[h]?.label??h;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}, \u05D4\u05EA\u05E7\u05D1\u05DC ${y}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ue(d.values[0])}`;let p=d.values.map(y=>ue(y));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p[0]} \u05D0\u05D5 ${p[1]}`;let m=p[p.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${p.slice(0,-1).join(", ")} \u05D0\u05D5 ${m}`}case"too_big":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",f=d.inclusive?`${d.maximum} ${p?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${p?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?"<=":"<",y=i(d.origin??"value");return p?.unit?`${p.longLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()} ${p.unit}`:`${p?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.maximum.toString()}`}case"too_small":{let p=a(d.origin),m=o(d.origin??"value");if(d.origin==="string")return`${p?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${p?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let g=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${g}`}if(d.origin==="array"||d.origin==="set"){let g=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let _=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${_}`}let f=d.inclusive?`${d.minimum} ${p?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${p?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${m} ${g} \u05DC\u05D4\u05DB\u05D9\u05DC ${f}`.trim()}let h=d.inclusive?">=":">",y=i(d.origin??"value");return p?.unit?`${p.shortLabel} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()} ${p.unit}`:`${p?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${m} ${y} ${h}${d.minimum.toString()}`}case"invalid_format":{let p=d;if(p.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${p.prefix}"`;if(p.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${p.suffix}"`;if(p.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${p.includes}"`;if(p.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${p.pattern}`;let m=l[p.format],h=m?.label??p.format,g=(m?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${h} \u05DC\u05D0 ${g}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${X(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${o(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}},"error");s(eE,"default")});function tE(){return{localeError:Xte()}}var Xte,Nz=b(()=>{De();Xte=s(()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(o))return"t\xF6mb";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return o=>{switch(o.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${o.expected}, a kapott \xE9rt\xE9k ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ue(o.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xFAl nagy: ${o.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${i}${o.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${o.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} m\xE9rete t\xFAl kicsi ${i}${o.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${o.origin} t\xFAl kicsi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\xC9rv\xE9nytelen string: "${i.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:i.format==="ends_with"?`\xC9rv\xE9nytelen string: "${i.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:i.format==="includes"?`\xC9rv\xE9nytelen string: "${i.includes}" \xE9rt\xE9ket kell tartalmaznia`:i.format==="regex"?`\xC9rv\xE9nytelen string: ${i.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[i.format]??o.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${o.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${o.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${o.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}},"error");s(tE,"default")});function rE(){return{localeError:Yte()}}var Yte,Dz=b(()=>{De();Yte=s(()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak valid: diharapkan ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak valid: diharapkan ${ue(o.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: diharapkan ${o.origin??"value"} memiliki ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${o.origin??"value"} menjadi ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: diharapkan ${o.origin} memiliki ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${o.origin} menjadi ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${n[i.format]??o.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${o.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${o.origin}`;default:return"Input tidak valid"}}},"error");s(rE,"default")});function nE(){return{localeError:tre()}}var ere,tre,jz=b(()=>{De();ere=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),tre=s(()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${ere(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ue(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${o}${n.maximum.toString()} ${i.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${o}${n.minimum.toString()} ${i.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${o.prefix}"`:o.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${o.suffix}"`:o.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${o.includes}"`:o.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${o.pattern}`:`Rangt ${r[o.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${X(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}},"error");s(nE,"default")});function oE(){return{localeError:rre()}}var rre,Mz=b(()=>{De();rre=s(()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numero";case"object":{if(Array.isArray(o))return"vettore";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input non valido: atteso ${o.expected}, ricevuto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input non valido: atteso ${ue(o.values[0])}`:`Opzione non valida: atteso uno tra ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Troppo grande: ${o.origin??"valore"} deve avere ${i}${o.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${o.origin??"valore"} deve essere ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Troppo piccolo: ${o.origin} deve avere ${i}${o.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${o.origin} deve essere ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${o.divisor}`;case"unrecognized_keys":return`Chiav${o.keys.length>1?"i":"e"} non riconosciut${o.keys.length>1?"e":"a"}: ${X(o.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${o.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${o.origin}`;default:return"Input non valido"}}},"error");s(oE,"default")});function iE(){return{localeError:nre()}}var nre,zz=b(()=>{De();nre=s(()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(o))return"\u914D\u5217";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${o.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(o.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return o.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ue(o.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${X(o.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let i=o.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=e(o.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${a.unit??"\u8981\u7D20"}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${o.origin??"\u5024"}\u306F${o.maximum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let i=o.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=e(o.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${a.unit}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${o.origin}\u306F${o.minimum.toString()}${i}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${i.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:i.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${i.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${o.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${o.keys.length>1?"\u7FA4":""}: ${X(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${o.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}},"error");s(iE,"default")});function sE(){return{localeError:ire()}}var ore,ire,Uz=b(()=>{De();ore=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},"parsedType"),ire=s(()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${ore(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ue(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${X(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${i.verb} ${o}${n.maximum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${i.verb} ${o}${n.minimum.toString()} ${i.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.prefix}"-\u10D8\u10D7`:o.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.suffix}"-\u10D8\u10D7`:o.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${o.includes}"-\u10E1`:o.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${o.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[o.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${X(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}},"error");s(sE,"default")});function Ol(){return{localeError:sre()}}var sre,aE=b(()=>{De();sre=s(()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(o))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(o===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return o=>{switch(o.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ue(o.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o.origin} ${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${i.prefix}"`:i.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${i.suffix}"`:i.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${i.includes}"`:i.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${i.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${o.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${X(o.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${o.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}},"error");s(Ol,"default")});function cE(){return Ol()}var Lz=b(()=>{aE();s(cE,"default")});function uE(){return{localeError:are()}}var are,qz=b(()=>{De();are=s(()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return o=>{switch(o.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${o.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(o.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return o.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ue(o.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${X(o.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let i=o.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=i==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${o.maximum.toString()} ${i}${a}`}case"too_small":{let i=o.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=i==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",c=e(o.origin),l=c?.unit??"\uC694\uC18C";return c?`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()}${l} ${i}${a}`:`${o.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${o.minimum.toString()} ${i}${a}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:i.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${i.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:i.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${i.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[i.format]??o.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${o.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${X(o.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${o.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${o.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}},"error");s(uE,"default")});function Fz(t){let e=Math.abs(t),r=e%10,n=e%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}function lE(){return{localeError:ure()}}var cre,Rl,$l,ure,Bz=b(()=>{De();cre=s(t=>Rl(typeof t,t),"parsedType"),Rl=s((t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},"parsedTypeFromType"),$l=s(t=>t.charAt(0).toUpperCase()+t.slice(1),"capitalizeFirstCharacter");s(Fz,"getUnitTypeFromNumber");ure=s(()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,o,i,a){let c=t[n]??null;return c===null?c:{unit:c.unit[o],verb:c.verb[a][i?"inclusive":"notInclusive"]}}s(e,"getSizing");let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${cre(n.input)}, o tik\u0117tasi - ${Rl(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${ue(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${X(n.values,"|")} pasirinkim\u0173`;case"too_big":{let o=Rl(n.origin),i=e(n.origin,Fz(Number(n.maximum)),n.inclusive??!1,"smaller");if(i?.verb)return`${$l(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.maximum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${$l(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.maximum.toString()} ${i?.unit}`}case"too_small":{let o=Rl(n.origin),i=e(n.origin,Fz(Number(n.minimum)),n.inclusive??!1,"bigger");if(i?.verb)return`${$l(o??n.origin??"reik\u0161m\u0117")} ${i.verb} ${n.minimum.toString()} ${i.unit??"element\u0173"}`;let a=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${$l(o??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.minimum.toString()} ${i?.unit}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${o.prefix}"`:o.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${o.includes}"`:o.format==="regex"?`Eilut\u0117 privalo atitikti ${o.pattern}`:`Neteisingas ${r[o.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${X(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let o=Rl(n.origin);return`${$l(o??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}},"error");s(lE,"default")});function dE(){return{localeError:lre()}}var lre,Vz=b(()=>{De();lre=s(()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(o))return"\u043D\u0438\u0437\u0430";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return o=>{switch(o.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${ue(o.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0438\u043C\u0430 ${i}${o.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${i.pattern}`:`Invalid ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${o.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${o.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}},"error");s(dE,"default")});function pE(){return{localeError:dre()}}var dre,Hz=b(()=>{De();dre=s(()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"nombor";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Input tidak sah: dijangka ${o.expected}, diterima ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Input tidak sah: dijangka ${ue(o.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Terlalu besar: dijangka ${o.origin??"nilai"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${o.origin??"nilai"} adalah ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Terlalu kecil: dijangka ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${o.origin} adalah ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${n[i.format]??o.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${o.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${X(o.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${o.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${o.origin}`;default:return"Input tidak sah"}}},"error");s(pE,"default")});function mE(){return{localeError:pre()}}var pre,Zz=b(()=>{De();pre=s(()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"getal";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return o=>{switch(o.code){case"invalid_type":return`Ongeldige invoer: verwacht ${o.expected}, ontving ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ongeldige invoer: verwacht ${ue(o.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Te groot: verwacht dat ${o.origin??"waarde"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"elementen"}`:`Te groot: verwacht dat ${o.origin??"waarde"} ${i}${o.maximum.toString()} is`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Te klein: verwacht dat ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Te klein: verwacht dat ${o.origin} ${i}${o.minimum.toString()} is`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${n[i.format]??o.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${o.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${o.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${o.origin}`;default:return"Ongeldige invoer"}}},"error");s(mE,"default")});function fE(){return{localeError:mre()}}var mre,Jz=b(()=>{De();mre=s(()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"tall";case"object":{if(Array.isArray(o))return"liste";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Ugyldig input: forventet ${o.expected}, fikk ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ugyldig verdi: forventet ${ue(o.values[0])}`:`Ugyldig valg: forventet en av ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${o.origin??"value"} til \xE5 ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${o.origin} til \xE5 ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${i.pattern}`:`Ugyldig ${n[i.format]??o.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${o.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${o.origin}`;default:return"Ugyldig input"}}},"error");s(fE,"default")});function hE(){return{localeError:fre()}}var fre,Gz=b(()=>{De();fre=s(()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"numara";case"object":{if(Array.isArray(o))return"saf";if(o===null)return"gayb";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return o=>{switch(o.code){case"invalid_type":return`F\xE2sit giren: umulan ${o.expected}, al\u0131nan ${r(o.input)}`;case"invalid_value":return o.values.length===1?`F\xE2sit giren: umulan ${ue(o.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${o.origin??"value"}, ${i}${o.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${o.origin}, ${i}${o.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let i=o;return i.format==="starts_with"?`F\xE2sit metin: "${i.prefix}" ile ba\u015Flamal\u0131.`:i.format==="ends_with"?`F\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\xE2sit metin: "${i.includes}" ihtiv\xE2 etmeli.`:i.format==="regex"?`F\xE2sit metin: ${i.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[i.format]??o.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${o.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${o.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}},"error");s(hE,"default")});function gE(){return{localeError:hre()}}var hre,Kz=b(()=>{De();hre=s(()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(o))return"\u0627\u0631\u06D0";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return o=>{switch(o.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${o.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(o.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return o.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ue(o.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${X(o.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${o.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${i}${o.maximum.toString()} \u0648\u064A`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${o.origin} \u0628\u0627\u06CC\u062F ${i}${o.minimum.toString()} \u0648\u064A`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:i.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${i.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:i.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${i.includes}" \u0648\u0644\u0631\u064A`:i.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${i.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[i.format]??o.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${o.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${o.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${X(o.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${o.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${o.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}},"error");s(gE,"default")});function yE(){return{localeError:gre()}}var gre,Wz=b(()=>{De();gre=s(()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"liczba";case"object":{if(Array.isArray(o))return"tablica";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return o=>{switch(o.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${o.expected}, otrzymano ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ue(o.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${i}${o.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${o.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${i.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[i.format]??o.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${o.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${o.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${o.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}},"error");s(yE,"default")});function vE(){return{localeError:yre()}}var yre,Qz=b(()=>{De();yre=s(()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(o))return"array";if(o===null)return"nulo";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return o=>{switch(o.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${o.expected}, recebido ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Entrada inv\xE1lida: esperado ${ue(o.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Muito grande: esperado que ${o.origin??"valor"} tivesse ${i}${o.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${o.origin??"valor"} fosse ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Muito pequeno: esperado que ${o.origin} tivesse ${i}${o.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${o.origin} fosse ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${i.pattern}`:`${n[i.format]??o.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${o.divisor}`;case"unrecognized_keys":return`Chave${o.keys.length>1?"s":""} desconhecida${o.keys.length>1?"s":""}: ${X(o.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${o.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${o.origin}`;default:return"Campo inv\xE1lido"}}},"error");s(vE,"default")});function Xz(t,e,r,n){let o=Math.abs(t),i=o%10,a=o%100;return a>=11&&a<=19?n:i===1?e:i>=2&&i<=4?r:n}function _E(){return{localeError:vre()}}var vre,Yz=b(()=>{De();s(Xz,"getRussianPlural");vre=s(()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ue(o.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);if(a){let c=Number(o.maximum),l=Xz(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);if(a){let c=Number(o.minimum),l=Xz(c,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${i}${o.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${o.origin} \u0431\u0443\u0434\u0435\u0442 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${o.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0438":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}},"error");s(_E,"default")});function bE(){return{localeError:_re()}}var _re,eU=b(()=>{De();_re=s(()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(o))return"tabela";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return o=>{switch(o.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${o.expected}, prejeto ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ue(o.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} imelo ${i}${o.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${o.origin??"vrednost"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${o.origin} imelo ${i}${o.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${n[i.format]??o.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${o.divisor}`;case"unrecognized_keys":return`Neprepoznan${o.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${X(o.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${o.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${o.origin}`;default:return"Neveljaven vnos"}}},"error");s(bE,"default")});function wE(){return{localeError:bre()}}var bre,tU=b(()=>{De();bre=s(()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"antal";case"object":{if(Array.isArray(o))return"lista";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return o=>{switch(o.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${o.expected}, fick ${r(o.input)}`;case"invalid_value":return o.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ue(o.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${o.origin??"v\xE4rdet"} att ha ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${o.origin??"v\xE4rdet"} att ha ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${n[i.format]??o.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${o.divisor}`;case"unrecognized_keys":return`${o.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${X(o.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${o.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${o.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}},"error");s(wE,"default")});function SE(){return{localeError:wre()}}var wre,rU=b(()=>{De();wre=s(()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(o))return"\u0B85\u0BA3\u0BBF";if(o===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ue(o.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(o.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${i}${o.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o.origin} ${i}${o.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${i.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:i.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${i.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${o.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${o.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${o.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}},"error");s(SE,"default")});function xE(){return{localeError:Sre()}}var Sre,nU=b(()=>{De();Sre=s(()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(o))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(o===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return o=>{switch(o.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${o.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ue(o.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=e(o.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${o.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${i} ${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${i.suffix}"`:i.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${i.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:i.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${i.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[i.format]??o.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${o.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${X(o.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${o.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}},"error");s(xE,"default")});function TE(){return{localeError:Tre()}}var xre,Tre,oU=b(()=>{De();xre=s(t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},"parsedType"),Tre=s(()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){return t[n]??null}s(e,"getSizing");let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${xre(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ue(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${X(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",i=e(n.origin);return i?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()} ${i.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",i=e(n.origin);return i?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()} ${i.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ge\xE7ersiz metin: "${o.prefix}" ile ba\u015Flamal\u0131`:o.format==="ends_with"?`Ge\xE7ersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Ge\xE7ersiz metin: "${o.includes}" i\xE7ermeli`:o.format==="regex"?`Ge\xE7ersiz metin: ${o.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[o.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${X(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}},"error");s(TE,"default")});function Nl(){return{localeError:Ere()}}var Ere,EE=b(()=>{De();Ere=s(()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(o))return"\u043C\u0430\u0441\u0438\u0432";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return o=>{switch(o.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${o.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ue(o.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${o.origin} \u0431\u0443\u0434\u0435 ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${i.prefix}"`:i.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${i.suffix}"`:i.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${i.includes}"`:i.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${i.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${o.keys.length>1?"\u0456":""}: ${X(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${o.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}},"error");s(Nl,"default")});function kE(){return Nl()}var iU=b(()=>{EE();s(kE,"default")});function IE(){return{localeError:kre()}}var kre,sU=b(()=>{De();kre=s(()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(o))return"\u0622\u0631\u06D2";if(o===null)return"\u0646\u0644";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return o=>{switch(o.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${o.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(o.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return o.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ue(o.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${X(o.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${i}${o.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${o.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${i}${o.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u06D2 ${i}${o.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${o.origin} \u06A9\u0627 ${i}${o.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${i.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:i.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${i.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${o.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${o.keys.length>1?"\u0632":""}: ${X(o.keys,"\u060C ")}`;case"invalid_key":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${o.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}},"error");s(IE,"default")});function PE(){return{localeError:Ire()}}var Ire,aU=b(()=>{De();Ire=s(()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(o))return"m\u1EA3ng";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return o=>{switch(o.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${o.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ue(o.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${i}${o.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${o.origin??"gi\xE1 tr\u1ECB"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${a.verb} ${i}${o.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${i.pattern}`:`${n[i.format]??o.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${o.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${X(o.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${o.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}},"error");s(PE,"default")});function AE(){return{localeError:Pre()}}var Pre,cU=b(()=>{De();Pre=s(()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(o))return"\u6570\u7EC4";if(o===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${o.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ue(o.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${o.origin??"\u503C"} ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${o.origin} ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.prefix}" \u5F00\u5934`:i.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${i.suffix}" \u7ED3\u5C3E`:i.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${i.pattern}`:`\u65E0\u6548${n[i.format]??o.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${o.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${X(o.keys,", ")}`;case"invalid_key":return`${o.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${o.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}},"error");s(AE,"default")});function CE(){return{localeError:Are()}}var Are,uU=b(()=>{De();Are=s(()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"number";case"object":{if(Array.isArray(o))return"array";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return o=>{switch(o.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${o.expected}\uFF0C\u4F46\u6536\u5230 ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ue(o.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${o.origin??"\u503C"} \u61C9\u70BA ${i}${o.maximum.toString()}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${o.origin} \u61C9\u70BA ${i}${o.minimum.toString()}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.prefix}" \u958B\u982D`:i.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${i.suffix}" \u7D50\u5C3E`:i.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${i.includes}"`:i.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${i.pattern}`:`\u7121\u6548\u7684 ${n[i.format]??o.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${o.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${o.keys.length>1?"\u5011":""}\uFF1A${X(o.keys,"\u3001")}`;case"invalid_key":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${o.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}},"error");s(CE,"default")});function OE(){return{localeError:Cre()}}var Cre,lU=b(()=>{De();Cre=s(()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(o){return t[o]??null}s(e,"getSizing");let r=s(o=>{let i=typeof o;switch(i){case"number":return Number.isNaN(o)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(o))return"akop\u1ECD";if(o===null)return"null";if(Object.getPrototypeOf(o)!==Object.prototype&&o.constructor)return o.constructor.name}}return i},"parsedType"),n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return o=>{switch(o.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${o.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(o.input)}`;case"invalid_value":return o.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ue(o.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${X(o.values,"|")}`;case"too_big":{let i=o.inclusive?"<=":"<",a=e(o.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin??"iye"} ${a.verb} ${i}${o.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.maximum}`}case"too_small":{let i=o.inclusive?">=":">",a=e(o.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${o.origin} ${a.verb} ${i}${o.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${i}${o.minimum}`}case"invalid_format":{let i=o;return i.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${i.prefix}"`:i.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${i.suffix}"`:i.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${i.includes}"`:i.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${i.pattern}`:`A\u1E63\xEC\u1E63e: ${n[i.format]??o.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${o.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${X(o.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${o.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}},"error");s(OE,"default")});var Dl={};On(Dl,{ar:()=>UT,az:()=>LT,be:()=>qT,bg:()=>FT,ca:()=>BT,cs:()=>VT,da:()=>HT,de:()=>ZT,en:()=>Cl,eo:()=>GT,es:()=>KT,fa:()=>WT,fi:()=>QT,fr:()=>XT,frCA:()=>YT,he:()=>eE,hu:()=>tE,id:()=>rE,is:()=>nE,it:()=>oE,ja:()=>iE,ka:()=>sE,kh:()=>cE,km:()=>Ol,ko:()=>uE,lt:()=>lE,mk:()=>dE,ms:()=>pE,nl:()=>mE,no:()=>fE,ota:()=>hE,pl:()=>yE,ps:()=>gE,pt:()=>vE,ru:()=>_E,sl:()=>bE,sv:()=>wE,ta:()=>SE,th:()=>xE,tr:()=>TE,ua:()=>kE,uk:()=>Nl,ur:()=>IE,vi:()=>PE,yo:()=>OE,zhCN:()=>AE,zhTW:()=>CE});var $E=b(()=>{vz();_z();wz();Sz();xz();Tz();Ez();kz();JT();Iz();Pz();Az();Cz();Oz();$z();Rz();Nz();Dz();jz();Mz();zz();Uz();Lz();aE();qz();Bz();Vz();Hz();Zz();Jz();Gz();Kz();Wz();Qz();Yz();eU();tU();rU();nU();oU();iU();EE();sU();aU();cU();uU();lU()});function ih(){return new pc}var dU,RE,NE,pc,tn,sh=b(()=>{RE=Symbol("ZodOutput"),NE=Symbol("ZodInput"),pc=class{static{s(this,"$ZodRegistry")}constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let n={...this.get(r)??{}};delete n.id;let o={...n,...this._map.get(e)};return Object.keys(o).length?o:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};s(ih,"registry");(dU=globalThis).__zod_globalRegistry??(dU.__zod_globalRegistry=ih());tn=globalThis.__zod_globalRegistry});function DE(t,e){return new t({type:"string",...le(e)})}function jE(t,e){return new t({type:"string",coerce:!0,...le(e)})}function ah(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...le(e)})}function jl(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...le(e)})}function ch(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...le(e)})}function uh(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...le(e)})}function lh(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...le(e)})}function dh(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...le(e)})}function Ml(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...le(e)})}function ph(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...le(e)})}function mh(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...le(e)})}function fh(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...le(e)})}function hh(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...le(e)})}function gh(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...le(e)})}function yh(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...le(e)})}function vh(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...le(e)})}function _h(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...le(e)})}function bh(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...le(e)})}function ME(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...le(e)})}function wh(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...le(e)})}function Sh(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...le(e)})}function xh(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...le(e)})}function Th(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...le(e)})}function Eh(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...le(e)})}function kh(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...le(e)})}function UE(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...le(e)})}function LE(t,e){return new t({type:"string",format:"date",check:"string_format",...le(e)})}function qE(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...le(e)})}function FE(t,e){return new t({type:"string",format:"duration",check:"string_format",...le(e)})}function BE(t,e){return new t({type:"number",checks:[],...le(e)})}function VE(t,e){return new t({type:"number",coerce:!0,checks:[],...le(e)})}function HE(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...le(e)})}function ZE(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...le(e)})}function JE(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...le(e)})}function GE(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...le(e)})}function KE(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...le(e)})}function WE(t,e){return new t({type:"boolean",...le(e)})}function QE(t,e){return new t({type:"boolean",coerce:!0,...le(e)})}function XE(t,e){return new t({type:"bigint",...le(e)})}function YE(t,e){return new t({type:"bigint",coerce:!0,...le(e)})}function ek(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...le(e)})}function tk(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...le(e)})}function rk(t,e){return new t({type:"symbol",...le(e)})}function nk(t,e){return new t({type:"undefined",...le(e)})}function ok(t,e){return new t({type:"null",...le(e)})}function ik(t){return new t({type:"any"})}function sk(t){return new t({type:"unknown"})}function ak(t,e){return new t({type:"never",...le(e)})}function ck(t,e){return new t({type:"void",...le(e)})}function uk(t,e){return new t({type:"date",...le(e)})}function lk(t,e){return new t({type:"date",coerce:!0,...le(e)})}function dk(t,e){return new t({type:"nan",...le(e)})}function vi(t,e){return new Jf({check:"less_than",...le(e),value:t,inclusive:!1})}function Gn(t,e){return new Jf({check:"less_than",...le(e),value:t,inclusive:!0})}function _i(t,e){return new Gf({check:"greater_than",...le(e),value:t,inclusive:!1})}function Tn(t,e){return new Gf({check:"greater_than",...le(e),value:t,inclusive:!0})}function pk(t){return _i(0,t)}function mk(t){return vi(0,t)}function fk(t){return Gn(0,t)}function hk(t){return Tn(0,t)}function Xs(t,e){return new c0({check:"multiple_of",...le(e),value:t})}function mc(t,e){return new d0({check:"max_size",...le(e),maximum:t})}function Ys(t,e){return new p0({check:"min_size",...le(e),minimum:t})}function zl(t,e){return new m0({check:"size_equals",...le(e),size:t})}function fc(t,e){return new f0({check:"max_length",...le(e),maximum:t})}function fs(t,e){return new h0({check:"min_length",...le(e),minimum:t})}function hc(t,e){return new g0({check:"length_equals",...le(e),length:t})}function Ul(t,e){return new y0({check:"string_format",format:"regex",...le(e),pattern:t})}function Ll(t){return new v0({check:"string_format",format:"lowercase",...le(t)})}function ql(t){return new _0({check:"string_format",format:"uppercase",...le(t)})}function Fl(t,e){return new b0({check:"string_format",format:"includes",...le(e),includes:t})}function Bl(t,e){return new w0({check:"string_format",format:"starts_with",...le(e),prefix:t})}function Vl(t,e){return new S0({check:"string_format",format:"ends_with",...le(e),suffix:t})}function gk(t,e,r){return new x0({check:"property",property:t,schema:e,...le(r)})}function Hl(t,e){return new T0({check:"mime_type",mime:t,...le(e)})}function jo(t){return new E0({check:"overwrite",tx:t})}function Zl(t){return jo(e=>e.normalize(t))}function Jl(){return jo(t=>t.trim())}function Gl(){return jo(t=>t.toLowerCase())}function Kl(){return jo(t=>t.toUpperCase())}function Wl(){return jo(t=>bx(t))}function yk(t,e,r){return new t({type:"array",element:e,...le(r)})}function $re(t,e,r){return new t({type:"union",options:e,...le(r)})}function Rre(t,e,r,n){return new t({type:"union",options:r,discriminator:e,...le(n)})}function Nre(t,e,r){return new t({type:"intersection",left:e,right:r})}function Dre(t,e,r,n){let o=r instanceof Ge,i=o?n:r,a=o?r:null;return new t({type:"tuple",items:e,rest:a,...le(i)})}function jre(t,e,r,n){return new t({type:"record",keyType:e,valueType:r,...le(n)})}function Mre(t,e,r,n){return new t({type:"map",keyType:e,valueType:r,...le(n)})}function zre(t,e,r){return new t({type:"set",valueType:e,...le(r)})}function Ure(t,e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new t({type:"enum",entries:n,...le(r)})}function Lre(t,e,r){return new t({type:"enum",entries:e,...le(r)})}function qre(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...le(r)})}function vk(t,e){return new t({type:"file",...le(e)})}function Fre(t,e){return new t({type:"transform",transform:e})}function Bre(t,e){return new t({type:"optional",innerType:e})}function Vre(t,e){return new t({type:"nullable",innerType:e})}function Hre(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():Sx(r)}})}function Zre(t,e,r){return new t({type:"nonoptional",innerType:e,...le(r)})}function Jre(t,e){return new t({type:"success",innerType:e})}function Gre(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}function Kre(t,e,r){return new t({type:"pipe",in:e,out:r})}function Wre(t,e){return new t({type:"readonly",innerType:e})}function Qre(t,e,r){return new t({type:"template_literal",parts:e,...le(r)})}function Xre(t,e){return new t({type:"lazy",getter:e})}function Yre(t,e){return new t({type:"promise",innerType:e})}function _k(t,e,r){let n=le(r);return n.abort??(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}function bk(t,e,r){return new t({type:"custom",check:"custom",fn:e,...le(r)})}function wk(t){let e=pU(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(sc(n,r.value,e._zod.def));else{let o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),r.issues.push(sc(o))}},t(r.value,r)));return e}function pU(t,e){let r=new Bt({check:"custom",...le(e)});return r._zod.check=t,r}function Sk(t){let e=new Bt({check:"describe"});return e._zod.onattach=[r=>{let n=tn.get(r)??{};tn.add(r,{...n,description:t})}],e._zod.check=()=>{},e}function xk(t){let e=new Bt({check:"meta"});return e._zod.onattach=[r=>{let n=tn.get(r)??{};tn.add(r,{...n,...t})}],e._zod.check=()=>{},e}function Tk(t,e){let r=le(e),n=r.truthy??["true","1","yes","on","y","enabled"],o=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(y=>typeof y=="string"?y.toLowerCase():y),o=o.map(y=>typeof y=="string"?y.toLowerCase():y));let i=new Set(n),a=new Set(o),c=t.Codec??Al,l=t.Boolean??Pl,d=t.String??Qs,p=new d({type:"string",error:r.error}),m=new l({type:"boolean",error:r.error}),h=new c({type:"pipe",in:p,out:m,transform:s(((y,g)=>{let f=y;return r.case!=="sensitive"&&(f=f.toLowerCase()),i.has(f)?!0:a.has(f)?!1:(g.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:g.value,inst:h,continue:!1}),{})}),"transform"),reverseTransform:s(((y,g)=>y===!0?n[0]||"true":o[0]||"false"),"reverseTransform"),error:r.error});return h}function gc(t,e,r,n={}){let o=le(n),i={...le(n),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:c=>r.test(c),...o};return r instanceof RegExp&&(i.pattern=r),new t(i)}var zE,mU=b(()=>{Kf();sh();zT();De();s(DE,"_string");s(jE,"_coercedString");s(ah,"_email");s(jl,"_guid");s(ch,"_uuid");s(uh,"_uuidv4");s(lh,"_uuidv6");s(dh,"_uuidv7");s(Ml,"_url");s(ph,"_emoji");s(mh,"_nanoid");s(fh,"_cuid");s(hh,"_cuid2");s(gh,"_ulid");s(yh,"_xid");s(vh,"_ksuid");s(_h,"_ipv4");s(bh,"_ipv6");s(ME,"_mac");s(wh,"_cidrv4");s(Sh,"_cidrv6");s(xh,"_base64");s(Th,"_base64url");s(Eh,"_e164");s(kh,"_jwt");zE={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};s(UE,"_isoDateTime");s(LE,"_isoDate");s(qE,"_isoTime");s(FE,"_isoDuration");s(BE,"_number");s(VE,"_coercedNumber");s(HE,"_int");s(ZE,"_float32");s(JE,"_float64");s(GE,"_int32");s(KE,"_uint32");s(WE,"_boolean");s(QE,"_coercedBoolean");s(XE,"_bigint");s(YE,"_coercedBigint");s(ek,"_int64");s(tk,"_uint64");s(rk,"_symbol");s(nk,"_undefined");s(ok,"_null");s(ik,"_any");s(sk,"_unknown");s(ak,"_never");s(ck,"_void");s(uk,"_date");s(lk,"_coercedDate");s(dk,"_nan");s(vi,"_lt");s(Gn,"_lte");s(_i,"_gt");s(Tn,"_gte");s(pk,"_positive");s(mk,"_negative");s(fk,"_nonpositive");s(hk,"_nonnegative");s(Xs,"_multipleOf");s(mc,"_maxSize");s(Ys,"_minSize");s(zl,"_size");s(fc,"_maxLength");s(fs,"_minLength");s(hc,"_length");s(Ul,"_regex");s(Ll,"_lowercase");s(ql,"_uppercase");s(Fl,"_includes");s(Bl,"_startsWith");s(Vl,"_endsWith");s(gk,"_property");s(Hl,"_mime");s(jo,"_overwrite");s(Zl,"_normalize");s(Jl,"_trim");s(Gl,"_toLowerCase");s(Kl,"_toUpperCase");s(Wl,"_slugify");s(yk,"_array");s($re,"_union");s(Rre,"_discriminatedUnion");s(Nre,"_intersection");s(Dre,"_tuple");s(jre,"_record");s(Mre,"_map");s(zre,"_set");s(Ure,"_enum");s(Lre,"_nativeEnum");s(qre,"_literal");s(vk,"_file");s(Fre,"_transform");s(Bre,"_optional");s(Vre,"_nullable");s(Hre,"_default");s(Zre,"_nonoptional");s(Jre,"_success");s(Gre,"_catch");s(Kre,"_pipe");s(Wre,"_readonly");s(Qre,"_templateLiteral");s(Xre,"_lazy");s(Yre,"_promise");s(_k,"_custom");s(bk,"_refine");s(wk,"_superRefine");s(pU,"_check");s(Sk,"describe");s(xk,"meta");s(Tk,"_stringbool");s(gc,"_stringFormat")});function bi(t,e){if(t instanceof pc){let n=new Ql(e),o={};for(let c of t._idmap.entries()){let[l,d]=c;n.process(d)}let i={},a={registry:t,uri:e?.uri,defs:o};for(let c of t._idmap.entries()){let[l,d]=c;i[l]=n.emit(d,{...e,external:a})}if(Object.keys(o).length>0){let c=n.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[c]:o}}return{schemas:i}}let r=new Ql(e);return r.process(t),r.emit(t,e)}function rn(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let n=t._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return rn(n.element,r);if(n.type==="set")return rn(n.valueType,r);if(n.type==="lazy")return rn(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return rn(n.innerType,r);if(n.type==="intersection")return rn(n.left,r)||rn(n.right,r);if(n.type==="record"||n.type==="map")return rn(n.keyType,r)||rn(n.valueType,r);if(n.type==="pipe")return rn(n.in,r)||rn(n.out,r);if(n.type==="object"){for(let o in n.shape)if(rn(n.shape[o],r))return!0;return!1}if(n.type==="union"){for(let o of n.options)if(rn(o,r))return!0;return!1}if(n.type==="tuple"){for(let o of n.items)if(rn(o,r))return!0;return!!(n.rest&&rn(n.rest,r))}return!1}var Ql,fU=b(()=>{sh();De();Ql=class{static{s(this,"JSONSchemaGenerator")}constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??tn,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,r={path:[],schemaPath:[]}){var n;let o=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let c={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(e,c);let l=e._zod.toJSONSchema?.();if(l)c.schema=l;else{let m={...r,schemaPath:[...r.schemaPath,e],path:r.path},h=e._zod.parent;if(h)c.ref=h,this.process(h,m),this.seen.get(h).isParent=!0;else{let y=c.schema;switch(o.type){case"string":{let g=y;g.type="string";let{minimum:f,maximum:_,format:S,patterns:w,contentEncoding:x}=e._zod.bag;if(typeof f=="number"&&(g.minLength=f),typeof _=="number"&&(g.maxLength=_),S&&(g.format=i[S]??S,g.format===""&&delete g.format),x&&(g.contentEncoding=x),w&&w.size>0){let I=[...w];I.length===1?g.pattern=I[0].source:I.length>1&&(c.schema.allOf=[...I.map(N=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:N.source}))])}break}case"number":{let g=y,{minimum:f,maximum:_,format:S,multipleOf:w,exclusiveMaximum:x,exclusiveMinimum:I}=e._zod.bag;typeof S=="string"&&S.includes("int")?g.type="integer":g.type="number",typeof I=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.minimum=I,g.exclusiveMinimum=!0):g.exclusiveMinimum=I),typeof f=="number"&&(g.minimum=f,typeof I=="number"&&this.target!=="draft-4"&&(I>=f?delete g.minimum:delete g.exclusiveMinimum)),typeof x=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.maximum=x,g.exclusiveMaximum=!0):g.exclusiveMaximum=x),typeof _=="number"&&(g.maximum=_,typeof x=="number"&&this.target!=="draft-4"&&(x<=_?delete g.maximum:delete g.exclusiveMaximum)),typeof w=="number"&&(g.multipleOf=w);break}case"boolean":{let g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(y.type="string",y.nullable=!0,y.enum=[null]):y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let g=y,{minimum:f,maximum:_}=e._zod.bag;typeof f=="number"&&(g.minItems=f),typeof _=="number"&&(g.maxItems=_),g.type="array",g.items=this.process(o.element,{...m,path:[...m.path,"items"]});break}case"object":{let g=y;g.type="object",g.properties={};let f=o.shape;for(let w in f)g.properties[w]=this.process(f[w],{...m,path:[...m.path,"properties",w]});let _=new Set(Object.keys(f)),S=new Set([..._].filter(w=>{let x=o.shape[w]._zod;return this.io==="input"?x.optin===void 0:x.optout===void 0}));S.size>0&&(g.required=Array.from(S)),o.catchall?._zod.def.type==="never"?g.additionalProperties=!1:o.catchall?o.catchall&&(g.additionalProperties=this.process(o.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{let g=y,f=o.discriminator!==void 0,_=o.options.map((S,w)=>this.process(S,{...m,path:[...m.path,f?"oneOf":"anyOf",w]}));f?g.oneOf=_:g.anyOf=_;break}case"intersection":{let g=y,f=this.process(o.left,{...m,path:[...m.path,"allOf",0]}),_=this.process(o.right,{...m,path:[...m.path,"allOf",1]}),S=s(x=>"allOf"in x&&Object.keys(x).length===1,"isSimpleIntersection"),w=[...S(f)?f.allOf:[f],...S(_)?_.allOf:[_]];g.allOf=w;break}case"tuple":{let g=y;g.type="array";let f=this.target==="draft-2020-12"?"prefixItems":"items",_=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",S=o.items.map((N,$)=>this.process(N,{...m,path:[...m.path,f,$]})),w=o.rest?this.process(o.rest,{...m,path:[...m.path,_,...this.target==="openapi-3.0"?[o.items.length]:[]]}):null;this.target==="draft-2020-12"?(g.prefixItems=S,w&&(g.items=w)):this.target==="openapi-3.0"?(g.items={anyOf:S},w&&g.items.anyOf.push(w),g.minItems=S.length,w||(g.maxItems=S.length)):(g.items=S,w&&(g.additionalItems=w));let{minimum:x,maximum:I}=e._zod.bag;typeof x=="number"&&(g.minItems=x),typeof I=="number"&&(g.maxItems=I);break}case"record":{let g=y;g.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(g.propertyNames=this.process(o.keyType,{...m,path:[...m.path,"propertyNames"]})),g.additionalProperties=this.process(o.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let g=y,f=yl(o.entries);f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),g.enum=f;break}case"literal":{let g=y,f=[];for(let _ of o.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");f.push(Number(_))}else f.push(_);if(f.length!==0)if(f.length===1){let _=f[0];g.type=_===null?"null":typeof _,this.target==="draft-4"||this.target==="openapi-3.0"?g.enum=[_]:g.const=_}else f.every(_=>typeof _=="number")&&(g.type="number"),f.every(_=>typeof _=="string")&&(g.type="string"),f.every(_=>typeof _=="boolean")&&(g.type="string"),f.every(_=>_===null)&&(g.type="null"),g.enum=f;break}case"file":{let g=y,f={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:S,mime:w}=e._zod.bag;_!==void 0&&(f.minLength=_),S!==void 0&&(f.maxLength=S),w?w.length===1?(f.contentMediaType=w[0],Object.assign(g,f)):g.anyOf=w.map(x=>({...f,contentMediaType:x})):Object.assign(g,f);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let g=this.process(o.innerType,m);this.target==="openapi-3.0"?(c.ref=o.innerType,y.nullable=!0):y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"success":{let g=y;g.type="boolean";break}case"default":{this.process(o.innerType,m),c.ref=o.innerType,y.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,m),c.ref=o.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,m),c.ref=o.innerType;let g;try{g=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let g=y,f=e._zod.pattern;if(!f)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=f.source;break}case"pipe":{let g=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(g,m),c.ref=g;break}case"readonly":{this.process(o.innerType,m),c.ref=o.innerType,y.readOnly=!0;break}case"promise":{this.process(o.innerType,m),c.ref=o.innerType;break}case"optional":{this.process(o.innerType,m),c.ref=o.innerType;break}case"lazy":{let g=e._zod.innerType;this.process(g,m),c.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(e);return d&&Object.assign(c.schema,d),this.io==="input"&&rn(e)&&(delete c.schema.examples,delete c.schema.default),this.io==="input"&&c.schema._prefault&&((n=c.schema).default??(n.default=c.schema._prefault)),delete c.schema._prefault,this.seen.get(e).schema}emit(e,r){let n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},o=this.seen.get(e);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s(p=>{let m=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let f=n.external.registry.get(p[0])?.id,_=n.external.uri??(w=>w);if(f)return{ref:_(f)};let S=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=S,{defId:S,ref:`${_("__shared")}#/${m}/${S}`}}if(p[1]===o)return{ref:"#"};let y=`#/${m}/`,g=p[1].schema.id??`__schema${this.counter++}`;return{defId:g,ref:y+g}},"makeURI"),a=s(p=>{if(p[1].schema.$ref)return;let m=p[1],{ref:h,defId:y}=i(p);m.def={...m.schema},y&&(m.defId=y);let g=m.schema;for(let f in g)delete g[f];g.$ref=h},"extractToDef");if(n.cycles==="throw")for(let p of this.seen.entries()){let m=p[1];if(m.cycle)throw new Error(`Cycle detected: #/${m.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let p of this.seen.entries()){let m=p[1];if(e===p[0]){a(p);continue}if(n.external){let y=n.external.registry.get(p[0])?.id;if(e!==p[0]&&y){a(p);continue}}if(this.metadataRegistry.get(p[0])?.id){a(p);continue}if(m.cycle){a(p);continue}if(m.count>1&&n.reused==="ref"){a(p);continue}}let c=s((p,m)=>{let h=this.seen.get(p),y=h.def??h.schema,g={...y};if(h.ref===null)return;let f=h.ref;if(h.ref=null,f){c(f,m);let _=this.seen.get(f).schema;_.$ref&&(m.target==="draft-7"||m.target==="draft-4"||m.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(_)):(Object.assign(y,_),Object.assign(y,g))}h.isParent||this.override({zodSchema:p,jsonSchema:y,path:h.path??[]})},"flattenRef");for(let p of[...this.seen.entries()].reverse())c(p[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let p=n.external.registry.get(e)?.id;if(!p)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(p)}Object.assign(l,o.def);let d=n.external?.defs??{};for(let p of this.seen.entries()){let m=p[1];m.def&&m.defId&&(d[m.defId]=m.def)}n.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?l.$defs=d:l.definitions=d);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}};s(bi,"toJSONSchema");s(rn,"isTransforming")});var hU={};var gU=b(()=>{});var wi={};On(wi,{$ZodAny:()=>aT,$ZodArray:()=>pT,$ZodAsyncError:()=>uo,$ZodBase64:()=>Q0,$ZodBase64URL:()=>X0,$ZodBigInt:()=>rh,$ZodBigIntFormat:()=>nT,$ZodBoolean:()=>Pl,$ZodCIDRv4:()=>G0,$ZodCIDRv6:()=>K0,$ZodCUID:()=>j0,$ZodCUID2:()=>M0,$ZodCatch:()=>AT,$ZodCheck:()=>Bt,$ZodCheckBigIntFormat:()=>l0,$ZodCheckEndsWith:()=>S0,$ZodCheckGreaterThan:()=>Gf,$ZodCheckIncludes:()=>b0,$ZodCheckLengthEquals:()=>g0,$ZodCheckLessThan:()=>Jf,$ZodCheckLowerCase:()=>v0,$ZodCheckMaxLength:()=>f0,$ZodCheckMaxSize:()=>d0,$ZodCheckMimeType:()=>T0,$ZodCheckMinLength:()=>h0,$ZodCheckMinSize:()=>p0,$ZodCheckMultipleOf:()=>c0,$ZodCheckNumberFormat:()=>u0,$ZodCheckOverwrite:()=>E0,$ZodCheckProperty:()=>x0,$ZodCheckRegex:()=>y0,$ZodCheckSizeEquals:()=>m0,$ZodCheckStartsWith:()=>w0,$ZodCheckStringFormat:()=>dc,$ZodCheckUpperCase:()=>_0,$ZodCodec:()=>Al,$ZodCustom:()=>MT,$ZodCustomStringFormat:()=>tT,$ZodDate:()=>dT,$ZodDefault:()=>ET,$ZodDiscriminatedUnion:()=>fT,$ZodE164:()=>Y0,$ZodEmail:()=>$0,$ZodEmoji:()=>N0,$ZodEncodeError:()=>cs,$ZodEnum:()=>_T,$ZodError:()=>Sl,$ZodFile:()=>wT,$ZodFunction:()=>NT,$ZodGUID:()=>C0,$ZodIPv4:()=>H0,$ZodIPv6:()=>Z0,$ZodISODate:()=>F0,$ZodISODateTime:()=>q0,$ZodISODuration:()=>V0,$ZodISOTime:()=>B0,$ZodIntersection:()=>hT,$ZodJWT:()=>eT,$ZodKSUID:()=>L0,$ZodLazy:()=>jT,$ZodLiteral:()=>bT,$ZodMAC:()=>J0,$ZodMap:()=>yT,$ZodNaN:()=>CT,$ZodNanoID:()=>D0,$ZodNever:()=>uT,$ZodNonOptional:()=>IT,$ZodNull:()=>sT,$ZodNullable:()=>TT,$ZodNumber:()=>th,$ZodNumberFormat:()=>rT,$ZodObject:()=>yz,$ZodObjectJIT:()=>mT,$ZodOptional:()=>xT,$ZodPipe:()=>OT,$ZodPrefault:()=>kT,$ZodPromise:()=>DT,$ZodReadonly:()=>$T,$ZodRealError:()=>xn,$ZodRecord:()=>gT,$ZodRegistry:()=>pc,$ZodSet:()=>vT,$ZodString:()=>Qs,$ZodStringFormat:()=>Lt,$ZodSuccess:()=>PT,$ZodSymbol:()=>oT,$ZodTemplateLiteral:()=>RT,$ZodTransform:()=>ST,$ZodTuple:()=>oh,$ZodType:()=>Ge,$ZodULID:()=>z0,$ZodURL:()=>R0,$ZodUUID:()=>O0,$ZodUndefined:()=>iT,$ZodUnion:()=>nh,$ZodUnknown:()=>cT,$ZodVoid:()=>lT,$ZodXID:()=>U0,$brand:()=>$f,$constructor:()=>V,$input:()=>NE,$output:()=>RE,Doc:()=>Il,JSONSchema:()=>hU,JSONSchemaGenerator:()=>Ql,NEVER:()=>gx,TimePrecision:()=>zE,_any:()=>ik,_array:()=>yk,_base64:()=>xh,_base64url:()=>Th,_bigint:()=>XE,_boolean:()=>WE,_catch:()=>Gre,_check:()=>pU,_cidrv4:()=>wh,_cidrv6:()=>Sh,_coercedBigint:()=>YE,_coercedBoolean:()=>QE,_coercedDate:()=>lk,_coercedNumber:()=>VE,_coercedString:()=>jE,_cuid:()=>fh,_cuid2:()=>hh,_custom:()=>_k,_date:()=>uk,_decode:()=>zf,_decodeAsync:()=>Lf,_default:()=>Hre,_discriminatedUnion:()=>Rre,_e164:()=>Eh,_email:()=>ah,_emoji:()=>ph,_encode:()=>Mf,_encodeAsync:()=>Uf,_endsWith:()=>Vl,_enum:()=>Ure,_file:()=>vk,_float32:()=>ZE,_float64:()=>JE,_gt:()=>_i,_gte:()=>Tn,_guid:()=>jl,_includes:()=>Fl,_int:()=>HE,_int32:()=>GE,_int64:()=>ek,_intersection:()=>Nre,_ipv4:()=>_h,_ipv6:()=>bh,_isoDate:()=>LE,_isoDateTime:()=>UE,_isoDuration:()=>FE,_isoTime:()=>qE,_jwt:()=>kh,_ksuid:()=>vh,_lazy:()=>Xre,_length:()=>hc,_literal:()=>qre,_lowercase:()=>Ll,_lt:()=>vi,_lte:()=>Gn,_mac:()=>ME,_map:()=>Mre,_max:()=>Gn,_maxLength:()=>fc,_maxSize:()=>mc,_mime:()=>Hl,_min:()=>Tn,_minLength:()=>fs,_minSize:()=>Ys,_multipleOf:()=>Xs,_nan:()=>dk,_nanoid:()=>mh,_nativeEnum:()=>Lre,_negative:()=>mk,_never:()=>ak,_nonnegative:()=>hk,_nonoptional:()=>Zre,_nonpositive:()=>fk,_normalize:()=>Zl,_null:()=>ok,_nullable:()=>Vre,_number:()=>BE,_optional:()=>Bre,_overwrite:()=>jo,_parse:()=>ac,_parseAsync:()=>cc,_pipe:()=>Kre,_positive:()=>pk,_promise:()=>Yre,_property:()=>gk,_readonly:()=>Wre,_record:()=>jre,_refine:()=>bk,_regex:()=>Ul,_safeDecode:()=>Ff,_safeDecodeAsync:()=>Vf,_safeEncode:()=>qf,_safeEncodeAsync:()=>Bf,_safeParse:()=>uc,_safeParseAsync:()=>lc,_set:()=>zre,_size:()=>zl,_slugify:()=>Wl,_startsWith:()=>Bl,_string:()=>DE,_stringFormat:()=>gc,_stringbool:()=>Tk,_success:()=>Jre,_superRefine:()=>wk,_symbol:()=>rk,_templateLiteral:()=>Qre,_toLowerCase:()=>Gl,_toUpperCase:()=>Kl,_transform:()=>Fre,_trim:()=>Jl,_tuple:()=>Dre,_uint32:()=>KE,_uint64:()=>tk,_ulid:()=>gh,_undefined:()=>nk,_union:()=>$re,_unknown:()=>sk,_uppercase:()=>ql,_url:()=>Ml,_uuid:()=>ch,_uuidv4:()=>uh,_uuidv6:()=>lh,_uuidv7:()=>dh,_void:()=>ck,_xid:()=>yh,clone:()=>en,config:()=>yr,decode:()=>Xee,decodeAsync:()=>ete,describe:()=>Sk,encode:()=>Qee,encodeAsync:()=>Yee,flattenError:()=>xl,formatError:()=>Tl,globalConfig:()=>hl,globalRegistry:()=>tn,isValidBase64:()=>W0,isValidBase64URL:()=>mz,isValidJWT:()=>fz,locales:()=>Dl,meta:()=>xk,parse:()=>Df,parseAsync:()=>jf,prettifyError:()=>Px,regexes:()=>Jn,registry:()=>ih,safeDecode:()=>rte,safeDecodeAsync:()=>ote,safeEncode:()=>tte,safeEncodeAsync:()=>nte,safeParse:()=>Cx,safeParseAsync:()=>Ox,toDotPath:()=>WM,toJSONSchema:()=>bi,treeifyError:()=>Ix,util:()=>de,version:()=>I0});var En=b(()=>{nc();$x();Ax();zT();Kf();P0();De();Zf();$E();sh();k0();mU();fU();gU()});var Ek=b(()=>{En()});var Oh={};On(Oh,{ZodISODate:()=>Ph,ZodISODateTime:()=>Ih,ZodISODuration:()=>Ch,ZodISOTime:()=>Ah,date:()=>Ik,datetime:()=>kk,duration:()=>Ak,time:()=>Pk});function kk(t){return UE(Ih,t)}function Ik(t){return LE(Ph,t)}function Pk(t){return qE(Ah,t)}function Ak(t){return FE(Ch,t)}var Ih,Ph,Ah,Ch,$h=b(()=>{En();Rh();Ih=V("ZodISODateTime",(t,e)=>{q0.init(t,e),Vt.init(t,e)});s(kk,"datetime");Ph=V("ZodISODate",(t,e)=>{F0.init(t,e),Vt.init(t,e)});s(Ik,"date");Ah=V("ZodISOTime",(t,e)=>{B0.init(t,e),Vt.init(t,e)});s(Pk,"time");Ch=V("ZodISODuration",(t,e)=>{V0.init(t,e),Vt.init(t,e)});s(Ak,"duration")});var vU,tne,kn,Ck=b(()=>{En();En();De();vU=s((t,e)=>{Sl.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s(r=>Tl(t,r),"value")},flatten:{value:s(r=>xl(t,r),"value")},addIssue:{value:s(r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,oc,2)},"value")},addIssues:{value:s(r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,oc,2)},"value")},isEmpty:{get(){return t.issues.length===0}}})},"initializer"),tne=V("ZodError",vU),kn=V("ZodError",vU,{Parent:Error})});var Ok,$k,Rk,Si,Nk,Dk,jk,Mk,zk,Uk,Lk,qk,Fk=b(()=>{En();Ck();Ok=ac(kn),$k=cc(kn),Rk=uc(kn),Si=lc(kn),Nk=Mf(kn),Dk=zf(kn),jk=Uf(kn),Mk=Lf(kn),zk=qf(kn),Uk=Ff(kn),Lk=Bf(kn),qk=Vf(kn)});function Bk(t){return DE(Yl,t)}function nne(t){return ah(Zk,t)}function one(t){return jl(Nh,t)}function ine(t){return ch(xi,t)}function sne(t){return uh(xi,t)}function ane(t){return lh(xi,t)}function cne(t){return dh(xi,t)}function une(t){return Ml(zh,t)}function lne(t){return Ml(zh,{protocol:/^https?$/,hostname:Jn.domain,...de.normalizeParams(t)})}function dne(t){return ph(Jk,t)}function pne(t){return mh(Gk,t)}function mne(t){return fh(Kk,t)}function fne(t){return hh(Wk,t)}function hne(t){return gh(Qk,t)}function gne(t){return yh(Xk,t)}function yne(t){return vh(Yk,t)}function vne(t){return _h(eI,t)}function _ne(t){return ME(_U,t)}function bne(t){return bh(tI,t)}function wne(t){return wh(rI,t)}function Sne(t){return Sh(nI,t)}function xne(t){return xh(oI,t)}function Tne(t){return Th(iI,t)}function Ene(t){return Eh(sI,t)}function kne(t){return kh(aI,t)}function Ine(t,e,r={}){return gc(ed,t,e,r)}function Pne(t){return gc(ed,"hostname",Jn.hostname,t)}function Ane(t){return gc(ed,"hex",Jn.hex,t)}function Cne(t,e){let r=e?.enc??"hex",n=`${t}_${r}`,o=Jn[n];if(!o)throw new Error(`Unrecognized hash format: ${n}`);return gc(ed,n,o,e)}function bU(t){return BE(td,t)}function Vk(t){return HE(vc,t)}function One(t){return ZE(vc,t)}function $ne(t){return JE(vc,t)}function Rne(t){return GE(vc,t)}function Nne(t){return KE(vc,t)}function wU(t){return WE(rd,t)}function Dne(t){return XE(nd,t)}function jne(t){return ek(cI,t)}function Mne(t){return tk(cI,t)}function zne(t){return rk(SU,t)}function Une(t){return nk(xU,t)}function EU(t){return ok(TU,t)}function Lne(){return ik(kU)}function yc(){return sk(IU)}function uI(t){return ak(PU,t)}function qne(t){return ck(AU,t)}function Fne(t){return uk(Uh,t)}function Lh(t,e){return yk(CU,t,e)}function Bne(t){let e=t._zod.def.shape;return mI(Object.keys(e))}function Vne(t,e){let r={type:"object",shape:t??{},...de.normalizeParams(e)};return new qh(r)}function Hne(t,e){return new qh({type:"object",shape:t,catchall:uI(),...de.normalizeParams(e)})}function Zne(t,e){return new qh({type:"object",shape:t,catchall:yc(),...de.normalizeParams(e)})}function dI(t,e){return new lI({type:"union",options:t,...de.normalizeParams(e)})}function Jne(t,e,r){return new OU({type:"union",options:e,discriminator:t,...de.normalizeParams(r)})}function RU(t,e){return new $U({type:"intersection",left:t,right:e})}function DU(t,e,r){let n=e instanceof Ge,o=n?r:e,i=n?e:null;return new NU({type:"tuple",items:t,rest:i,...de.normalizeParams(o)})}function jU(t,e,r){return new pI({type:"record",keyType:t,valueType:e,...de.normalizeParams(r)})}function Gne(t,e,r){let n=en(t);return n._zod.values=void 0,new pI({type:"record",keyType:n,valueType:e,...de.normalizeParams(r)})}function Kne(t,e,r){return new MU({type:"map",keyType:t,valueType:e,...de.normalizeParams(r)})}function Wne(t,e){return new zU({type:"set",valueType:t,...de.normalizeParams(e)})}function mI(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new Xl({type:"enum",entries:r,...de.normalizeParams(e)})}function Qne(t,e){return new Xl({type:"enum",entries:t,...de.normalizeParams(e)})}function Xne(t,e){return new UU({type:"literal",values:Array.isArray(t)?t:[t],...de.normalizeParams(e)})}function Yne(t){return vk(LU,t)}function fI(t){return new qU({type:"transform",transform:t})}function Dh(t){return new hI({type:"optional",innerType:t})}function jh(t){return new FU({type:"nullable",innerType:t})}function eoe(t){return Dh(jh(t))}function VU(t,e){return new BU({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():de.shallowClone(e)}})}function ZU(t,e){return new HU({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():de.shallowClone(e)}})}function JU(t,e){return new gI({type:"nonoptional",innerType:t,...de.normalizeParams(e)})}function toe(t){return new GU({type:"success",innerType:t})}function WU(t,e){return new KU({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}function roe(t){return dk(QU,t)}function Mh(t,e){return new yI({type:"pipe",in:t,out:e})}function noe(t,e,r){return new vI({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}function YU(t){return new XU({type:"readonly",innerType:t})}function ooe(t,e){return new eL({type:"template_literal",parts:t,...de.normalizeParams(e)})}function rL(t){return new tL({type:"lazy",getter:t})}function ioe(t){return new nL({type:"promise",innerType:t})}function soe(t){return new oL({type:"function",input:Array.isArray(t?.input)?DU(t?.input):t?.input??Lh(yc()),output:t?.output??yc()})}function aoe(t){let e=new Bt({check:"custom"});return e._zod.check=t,e}function coe(t,e){return _k(Fh,t??(()=>!0),e)}function iL(t,e={}){return bk(Fh,t,e)}function sL(t){return wk(t)}function doe(t,e={error:`Input not instance of ${t.name}`}){let r=new Fh({type:"custom",check:"custom",fn:s(n=>n instanceof t,"fn"),abort:!0,...de.normalizeParams(e)});return r._zod.bag.Class=t,r}function moe(t){let e=rL(()=>dI([Bk(t),bU(),wU(),EU(),Lh(e),jU(Bk(),e)]));return e}function foe(t,e){return Mh(fI(t),e)}var st,Hk,Yl,Vt,Zk,Nh,xi,zh,Jk,Gk,Kk,Wk,Qk,Xk,Yk,eI,_U,tI,rI,nI,oI,iI,sI,aI,ed,td,vc,rd,nd,cI,SU,xU,TU,kU,IU,PU,AU,Uh,CU,qh,lI,OU,$U,NU,pI,MU,zU,Xl,UU,LU,qU,hI,FU,BU,HU,gI,GU,KU,QU,yI,vI,XU,eL,tL,nL,oL,Fh,uoe,loe,poe,Rh=b(()=>{En();En();Ek();$h();Fk();st=V("ZodType",(t,e)=>(Ge.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(de.mergeDefs(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>en(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>Ok(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>Rk(t,r,n),t.parseAsync=async(r,n)=>$k(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Si(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>Nk(t,r,n),t.decode=(r,n)=>Dk(t,r,n),t.encodeAsync=async(r,n)=>jk(t,r,n),t.decodeAsync=async(r,n)=>Mk(t,r,n),t.safeEncode=(r,n)=>zk(t,r,n),t.safeDecode=(r,n)=>Uk(t,r,n),t.safeEncodeAsync=async(r,n)=>Lk(t,r,n),t.safeDecodeAsync=async(r,n)=>qk(t,r,n),t.refine=(r,n)=>t.check(iL(r,n)),t.superRefine=r=>t.check(sL(r)),t.overwrite=r=>t.check(jo(r)),t.optional=()=>Dh(t),t.nullable=()=>jh(t),t.nullish=()=>Dh(jh(t)),t.nonoptional=r=>JU(t,r),t.array=()=>Lh(t),t.or=r=>dI([t,r]),t.and=r=>RU(t,r),t.transform=r=>Mh(t,fI(r)),t.default=r=>VU(t,r),t.prefault=r=>ZU(t,r),t.catch=r=>WU(t,r),t.pipe=r=>Mh(t,r),t.readonly=()=>YU(t),t.describe=r=>{let n=t.clone();return tn.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return tn.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return tn.get(t);let n=t.clone();return tn.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Hk=V("_ZodString",(t,e)=>{Qs.init(t,e),st.init(t,e);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Ul(...n)),t.includes=(...n)=>t.check(Fl(...n)),t.startsWith=(...n)=>t.check(Bl(...n)),t.endsWith=(...n)=>t.check(Vl(...n)),t.min=(...n)=>t.check(fs(...n)),t.max=(...n)=>t.check(fc(...n)),t.length=(...n)=>t.check(hc(...n)),t.nonempty=(...n)=>t.check(fs(1,...n)),t.lowercase=n=>t.check(Ll(n)),t.uppercase=n=>t.check(ql(n)),t.trim=()=>t.check(Jl()),t.normalize=(...n)=>t.check(Zl(...n)),t.toLowerCase=()=>t.check(Gl()),t.toUpperCase=()=>t.check(Kl()),t.slugify=()=>t.check(Wl())}),Yl=V("ZodString",(t,e)=>{Qs.init(t,e),Hk.init(t,e),t.email=r=>t.check(ah(Zk,r)),t.url=r=>t.check(Ml(zh,r)),t.jwt=r=>t.check(kh(aI,r)),t.emoji=r=>t.check(ph(Jk,r)),t.guid=r=>t.check(jl(Nh,r)),t.uuid=r=>t.check(ch(xi,r)),t.uuidv4=r=>t.check(uh(xi,r)),t.uuidv6=r=>t.check(lh(xi,r)),t.uuidv7=r=>t.check(dh(xi,r)),t.nanoid=r=>t.check(mh(Gk,r)),t.guid=r=>t.check(jl(Nh,r)),t.cuid=r=>t.check(fh(Kk,r)),t.cuid2=r=>t.check(hh(Wk,r)),t.ulid=r=>t.check(gh(Qk,r)),t.base64=r=>t.check(xh(oI,r)),t.base64url=r=>t.check(Th(iI,r)),t.xid=r=>t.check(yh(Xk,r)),t.ksuid=r=>t.check(vh(Yk,r)),t.ipv4=r=>t.check(_h(eI,r)),t.ipv6=r=>t.check(bh(tI,r)),t.cidrv4=r=>t.check(wh(rI,r)),t.cidrv6=r=>t.check(Sh(nI,r)),t.e164=r=>t.check(Eh(sI,r)),t.datetime=r=>t.check(kk(r)),t.date=r=>t.check(Ik(r)),t.time=r=>t.check(Pk(r)),t.duration=r=>t.check(Ak(r))});s(Bk,"string");Vt=V("ZodStringFormat",(t,e)=>{Lt.init(t,e),Hk.init(t,e)}),Zk=V("ZodEmail",(t,e)=>{$0.init(t,e),Vt.init(t,e)});s(nne,"email");Nh=V("ZodGUID",(t,e)=>{C0.init(t,e),Vt.init(t,e)});s(one,"guid");xi=V("ZodUUID",(t,e)=>{O0.init(t,e),Vt.init(t,e)});s(ine,"uuid");s(sne,"uuidv4");s(ane,"uuidv6");s(cne,"uuidv7");zh=V("ZodURL",(t,e)=>{R0.init(t,e),Vt.init(t,e)});s(une,"url");s(lne,"httpUrl");Jk=V("ZodEmoji",(t,e)=>{N0.init(t,e),Vt.init(t,e)});s(dne,"emoji");Gk=V("ZodNanoID",(t,e)=>{D0.init(t,e),Vt.init(t,e)});s(pne,"nanoid");Kk=V("ZodCUID",(t,e)=>{j0.init(t,e),Vt.init(t,e)});s(mne,"cuid");Wk=V("ZodCUID2",(t,e)=>{M0.init(t,e),Vt.init(t,e)});s(fne,"cuid2");Qk=V("ZodULID",(t,e)=>{z0.init(t,e),Vt.init(t,e)});s(hne,"ulid");Xk=V("ZodXID",(t,e)=>{U0.init(t,e),Vt.init(t,e)});s(gne,"xid");Yk=V("ZodKSUID",(t,e)=>{L0.init(t,e),Vt.init(t,e)});s(yne,"ksuid");eI=V("ZodIPv4",(t,e)=>{H0.init(t,e),Vt.init(t,e)});s(vne,"ipv4");_U=V("ZodMAC",(t,e)=>{J0.init(t,e),Vt.init(t,e)});s(_ne,"mac");tI=V("ZodIPv6",(t,e)=>{Z0.init(t,e),Vt.init(t,e)});s(bne,"ipv6");rI=V("ZodCIDRv4",(t,e)=>{G0.init(t,e),Vt.init(t,e)});s(wne,"cidrv4");nI=V("ZodCIDRv6",(t,e)=>{K0.init(t,e),Vt.init(t,e)});s(Sne,"cidrv6");oI=V("ZodBase64",(t,e)=>{Q0.init(t,e),Vt.init(t,e)});s(xne,"base64");iI=V("ZodBase64URL",(t,e)=>{X0.init(t,e),Vt.init(t,e)});s(Tne,"base64url");sI=V("ZodE164",(t,e)=>{Y0.init(t,e),Vt.init(t,e)});s(Ene,"e164");aI=V("ZodJWT",(t,e)=>{eT.init(t,e),Vt.init(t,e)});s(kne,"jwt");ed=V("ZodCustomStringFormat",(t,e)=>{tT.init(t,e),Vt.init(t,e)});s(Ine,"stringFormat");s(Pne,"hostname");s(Ane,"hex");s(Cne,"hash");td=V("ZodNumber",(t,e)=>{th.init(t,e),st.init(t,e),t.gt=(n,o)=>t.check(_i(n,o)),t.gte=(n,o)=>t.check(Tn(n,o)),t.min=(n,o)=>t.check(Tn(n,o)),t.lt=(n,o)=>t.check(vi(n,o)),t.lte=(n,o)=>t.check(Gn(n,o)),t.max=(n,o)=>t.check(Gn(n,o)),t.int=n=>t.check(Vk(n)),t.safe=n=>t.check(Vk(n)),t.positive=n=>t.check(_i(0,n)),t.nonnegative=n=>t.check(Tn(0,n)),t.negative=n=>t.check(vi(0,n)),t.nonpositive=n=>t.check(Gn(0,n)),t.multipleOf=(n,o)=>t.check(Xs(n,o)),t.step=(n,o)=>t.check(Xs(n,o)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});s(bU,"number");vc=V("ZodNumberFormat",(t,e)=>{rT.init(t,e),td.init(t,e)});s(Vk,"int");s(One,"float32");s($ne,"float64");s(Rne,"int32");s(Nne,"uint32");rd=V("ZodBoolean",(t,e)=>{Pl.init(t,e),st.init(t,e)});s(wU,"boolean");nd=V("ZodBigInt",(t,e)=>{rh.init(t,e),st.init(t,e),t.gte=(n,o)=>t.check(Tn(n,o)),t.min=(n,o)=>t.check(Tn(n,o)),t.gt=(n,o)=>t.check(_i(n,o)),t.gte=(n,o)=>t.check(Tn(n,o)),t.min=(n,o)=>t.check(Tn(n,o)),t.lt=(n,o)=>t.check(vi(n,o)),t.lte=(n,o)=>t.check(Gn(n,o)),t.max=(n,o)=>t.check(Gn(n,o)),t.positive=n=>t.check(_i(BigInt(0),n)),t.negative=n=>t.check(vi(BigInt(0),n)),t.nonpositive=n=>t.check(Gn(BigInt(0),n)),t.nonnegative=n=>t.check(Tn(BigInt(0),n)),t.multipleOf=(n,o)=>t.check(Xs(n,o));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});s(Dne,"bigint");cI=V("ZodBigIntFormat",(t,e)=>{nT.init(t,e),nd.init(t,e)});s(jne,"int64");s(Mne,"uint64");SU=V("ZodSymbol",(t,e)=>{oT.init(t,e),st.init(t,e)});s(zne,"symbol");xU=V("ZodUndefined",(t,e)=>{iT.init(t,e),st.init(t,e)});s(Une,"_undefined");TU=V("ZodNull",(t,e)=>{sT.init(t,e),st.init(t,e)});s(EU,"_null");kU=V("ZodAny",(t,e)=>{aT.init(t,e),st.init(t,e)});s(Lne,"any");IU=V("ZodUnknown",(t,e)=>{cT.init(t,e),st.init(t,e)});s(yc,"unknown");PU=V("ZodNever",(t,e)=>{uT.init(t,e),st.init(t,e)});s(uI,"never");AU=V("ZodVoid",(t,e)=>{lT.init(t,e),st.init(t,e)});s(qne,"_void");Uh=V("ZodDate",(t,e)=>{dT.init(t,e),st.init(t,e),t.min=(n,o)=>t.check(Tn(n,o)),t.max=(n,o)=>t.check(Gn(n,o));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});s(Fne,"date");CU=V("ZodArray",(t,e)=>{pT.init(t,e),st.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(fs(r,n)),t.nonempty=r=>t.check(fs(1,r)),t.max=(r,n)=>t.check(fc(r,n)),t.length=(r,n)=>t.check(hc(r,n)),t.unwrap=()=>t.element});s(Lh,"array");s(Bne,"keyof");qh=V("ZodObject",(t,e)=>{mT.init(t,e),st.init(t,e),de.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>mI(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:yc()}),t.loose=()=>t.clone({...t._zod.def,catchall:yc()}),t.strict=()=>t.clone({...t._zod.def,catchall:uI()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>de.extend(t,r),t.safeExtend=r=>de.safeExtend(t,r),t.merge=r=>de.merge(t,r),t.pick=r=>de.pick(t,r),t.omit=r=>de.omit(t,r),t.partial=(...r)=>de.partial(hI,t,r[0]),t.required=(...r)=>de.required(gI,t,r[0])});s(Vne,"object");s(Hne,"strictObject");s(Zne,"looseObject");lI=V("ZodUnion",(t,e)=>{nh.init(t,e),st.init(t,e),t.options=e.options});s(dI,"union");OU=V("ZodDiscriminatedUnion",(t,e)=>{lI.init(t,e),fT.init(t,e)});s(Jne,"discriminatedUnion");$U=V("ZodIntersection",(t,e)=>{hT.init(t,e),st.init(t,e)});s(RU,"intersection");NU=V("ZodTuple",(t,e)=>{oh.init(t,e),st.init(t,e),t.rest=r=>t.clone({...t._zod.def,rest:r})});s(DU,"tuple");pI=V("ZodRecord",(t,e)=>{gT.init(t,e),st.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});s(jU,"record");s(Gne,"partialRecord");MU=V("ZodMap",(t,e)=>{yT.init(t,e),st.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});s(Kne,"map");zU=V("ZodSet",(t,e)=>{vT.init(t,e),st.init(t,e),t.min=(...r)=>t.check(Ys(...r)),t.nonempty=r=>t.check(Ys(1,r)),t.max=(...r)=>t.check(mc(...r)),t.size=(...r)=>t.check(zl(...r))});s(Wne,"set");Xl=V("ZodEnum",(t,e)=>{_T.init(t,e),st.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,o)=>{let i={};for(let a of n)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Xl({...e,checks:[],...de.normalizeParams(o),entries:i})},t.exclude=(n,o)=>{let i={...e.entries};for(let a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new Xl({...e,checks:[],...de.normalizeParams(o),entries:i})}});s(mI,"_enum");s(Qne,"nativeEnum");UU=V("ZodLiteral",(t,e)=>{bT.init(t,e),st.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});s(Xne,"literal");LU=V("ZodFile",(t,e)=>{wT.init(t,e),st.init(t,e),t.min=(r,n)=>t.check(Ys(r,n)),t.max=(r,n)=>t.check(mc(r,n)),t.mime=(r,n)=>t.check(Hl(Array.isArray(r)?r:[r],n))});s(Yne,"file");qU=V("ZodTransform",(t,e)=>{ST.init(t,e),st.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new cs(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(de.issue(i,r.value,e));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(de.issue(a))}};let o=e.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});s(fI,"transform");hI=V("ZodOptional",(t,e)=>{xT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(Dh,"optional");FU=V("ZodNullable",(t,e)=>{TT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(jh,"nullable");s(eoe,"nullish");BU=V("ZodDefault",(t,e)=>{ET.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});s(VU,"_default");HU=V("ZodPrefault",(t,e)=>{kT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(ZU,"prefault");gI=V("ZodNonOptional",(t,e)=>{IT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(JU,"nonoptional");GU=V("ZodSuccess",(t,e)=>{PT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(toe,"success");KU=V("ZodCatch",(t,e)=>{AT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});s(WU,"_catch");QU=V("ZodNaN",(t,e)=>{CT.init(t,e),st.init(t,e)});s(roe,"nan");yI=V("ZodPipe",(t,e)=>{OT.init(t,e),st.init(t,e),t.in=e.in,t.out=e.out});s(Mh,"pipe");vI=V("ZodCodec",(t,e)=>{yI.init(t,e),Al.init(t,e)});s(noe,"codec");XU=V("ZodReadonly",(t,e)=>{$T.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(YU,"readonly");eL=V("ZodTemplateLiteral",(t,e)=>{RT.init(t,e),st.init(t,e)});s(ooe,"templateLiteral");tL=V("ZodLazy",(t,e)=>{jT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.getter()});s(rL,"lazy");nL=V("ZodPromise",(t,e)=>{DT.init(t,e),st.init(t,e),t.unwrap=()=>t._zod.def.innerType});s(ioe,"promise");oL=V("ZodFunction",(t,e)=>{NT.init(t,e),st.init(t,e)});s(soe,"_function");Fh=V("ZodCustom",(t,e)=>{MT.init(t,e),st.init(t,e)});s(aoe,"check");s(coe,"custom");s(iL,"refine");s(sL,"superRefine");uoe=Sk,loe=xk;s(doe,"_instanceof");poe=s((...t)=>Tk({Codec:vI,Boolean:rd,String:Yl},...t),"stringbool");s(moe,"json");s(foe,"preprocess")});function goe(t){yr({customError:t})}function yoe(){return yr().customError}var hoe,Ve,aL=b(()=>{En();En();hoe={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};s(goe,"setErrorMap");s(yoe,"getErrorMap");Ve||(Ve={})});var _I={};On(_I,{bigint:()=>woe,boolean:()=>boe,date:()=>Soe,number:()=>_oe,string:()=>voe});function voe(t){return jE(Yl,t)}function _oe(t){return VE(td,t)}function boe(t){return QE(rd,t)}function woe(t){return YE(nd,t)}function Soe(t){return lk(Uh,t)}var cL=b(()=>{En();Rh();s(voe,"string");s(_oe,"number");s(boe,"boolean");s(woe,"bigint");s(Soe,"date")});var u={};On(u,{$brand:()=>$f,$input:()=>NE,$output:()=>RE,NEVER:()=>gx,TimePrecision:()=>zE,ZodAny:()=>kU,ZodArray:()=>CU,ZodBase64:()=>oI,ZodBase64URL:()=>iI,ZodBigInt:()=>nd,ZodBigIntFormat:()=>cI,ZodBoolean:()=>rd,ZodCIDRv4:()=>rI,ZodCIDRv6:()=>nI,ZodCUID:()=>Kk,ZodCUID2:()=>Wk,ZodCatch:()=>KU,ZodCodec:()=>vI,ZodCustom:()=>Fh,ZodCustomStringFormat:()=>ed,ZodDate:()=>Uh,ZodDefault:()=>BU,ZodDiscriminatedUnion:()=>OU,ZodE164:()=>sI,ZodEmail:()=>Zk,ZodEmoji:()=>Jk,ZodEnum:()=>Xl,ZodError:()=>tne,ZodFile:()=>LU,ZodFirstPartyTypeKind:()=>Ve,ZodFunction:()=>oL,ZodGUID:()=>Nh,ZodIPv4:()=>eI,ZodIPv6:()=>tI,ZodISODate:()=>Ph,ZodISODateTime:()=>Ih,ZodISODuration:()=>Ch,ZodISOTime:()=>Ah,ZodIntersection:()=>$U,ZodIssueCode:()=>hoe,ZodJWT:()=>aI,ZodKSUID:()=>Yk,ZodLazy:()=>tL,ZodLiteral:()=>UU,ZodMAC:()=>_U,ZodMap:()=>MU,ZodNaN:()=>QU,ZodNanoID:()=>Gk,ZodNever:()=>PU,ZodNonOptional:()=>gI,ZodNull:()=>TU,ZodNullable:()=>FU,ZodNumber:()=>td,ZodNumberFormat:()=>vc,ZodObject:()=>qh,ZodOptional:()=>hI,ZodPipe:()=>yI,ZodPrefault:()=>HU,ZodPromise:()=>nL,ZodReadonly:()=>XU,ZodRealError:()=>kn,ZodRecord:()=>pI,ZodSet:()=>zU,ZodString:()=>Yl,ZodStringFormat:()=>Vt,ZodSuccess:()=>GU,ZodSymbol:()=>SU,ZodTemplateLiteral:()=>eL,ZodTransform:()=>qU,ZodTuple:()=>NU,ZodType:()=>st,ZodULID:()=>Qk,ZodURL:()=>zh,ZodUUID:()=>xi,ZodUndefined:()=>xU,ZodUnion:()=>lI,ZodUnknown:()=>IU,ZodVoid:()=>AU,ZodXID:()=>Xk,_ZodString:()=>Hk,_default:()=>VU,_function:()=>soe,any:()=>Lne,array:()=>Lh,base64:()=>xne,base64url:()=>Tne,bigint:()=>Dne,boolean:()=>wU,catch:()=>WU,check:()=>aoe,cidrv4:()=>wne,cidrv6:()=>Sne,clone:()=>en,codec:()=>noe,coerce:()=>_I,config:()=>yr,core:()=>wi,cuid:()=>mne,cuid2:()=>fne,custom:()=>coe,date:()=>Fne,decode:()=>Dk,decodeAsync:()=>Mk,describe:()=>uoe,discriminatedUnion:()=>Jne,e164:()=>Ene,email:()=>nne,emoji:()=>dne,encode:()=>Nk,encodeAsync:()=>jk,endsWith:()=>Vl,enum:()=>mI,file:()=>Yne,flattenError:()=>xl,float32:()=>One,float64:()=>$ne,formatError:()=>Tl,function:()=>soe,getErrorMap:()=>yoe,globalRegistry:()=>tn,gt:()=>_i,gte:()=>Tn,guid:()=>one,hash:()=>Cne,hex:()=>Ane,hostname:()=>Pne,httpUrl:()=>lne,includes:()=>Fl,instanceof:()=>doe,int:()=>Vk,int32:()=>Rne,int64:()=>jne,intersection:()=>RU,ipv4:()=>vne,ipv6:()=>bne,iso:()=>Oh,json:()=>moe,jwt:()=>kne,keyof:()=>Bne,ksuid:()=>yne,lazy:()=>rL,length:()=>hc,literal:()=>Xne,locales:()=>Dl,looseObject:()=>Zne,lowercase:()=>Ll,lt:()=>vi,lte:()=>Gn,mac:()=>_ne,map:()=>Kne,maxLength:()=>fc,maxSize:()=>mc,meta:()=>loe,mime:()=>Hl,minLength:()=>fs,minSize:()=>Ys,multipleOf:()=>Xs,nan:()=>roe,nanoid:()=>pne,nativeEnum:()=>Qne,negative:()=>mk,never:()=>uI,nonnegative:()=>hk,nonoptional:()=>JU,nonpositive:()=>fk,normalize:()=>Zl,null:()=>EU,nullable:()=>jh,nullish:()=>eoe,number:()=>bU,object:()=>Vne,optional:()=>Dh,overwrite:()=>jo,parse:()=>Ok,parseAsync:()=>$k,partialRecord:()=>Gne,pipe:()=>Mh,positive:()=>pk,prefault:()=>ZU,preprocess:()=>foe,prettifyError:()=>Px,promise:()=>ioe,property:()=>gk,readonly:()=>YU,record:()=>jU,refine:()=>iL,regex:()=>Ul,regexes:()=>Jn,registry:()=>ih,safeDecode:()=>Uk,safeDecodeAsync:()=>qk,safeEncode:()=>zk,safeEncodeAsync:()=>Lk,safeParse:()=>Rk,safeParseAsync:()=>Si,set:()=>Wne,setErrorMap:()=>goe,size:()=>zl,slugify:()=>Wl,startsWith:()=>Bl,strictObject:()=>Hne,string:()=>Bk,stringFormat:()=>Ine,stringbool:()=>poe,success:()=>toe,superRefine:()=>sL,symbol:()=>zne,templateLiteral:()=>ooe,toJSONSchema:()=>bi,toLowerCase:()=>Gl,toUpperCase:()=>Kl,transform:()=>fI,treeifyError:()=>Ix,trim:()=>Jl,tuple:()=>DU,uint32:()=>Nne,uint64:()=>Mne,ulid:()=>hne,undefined:()=>Une,union:()=>dI,unknown:()=>yc,uppercase:()=>ql,url:()=>une,util:()=>de,uuid:()=>ine,uuidv4:()=>sne,uuidv6:()=>ane,uuidv7:()=>cne,void:()=>qne,xid:()=>gne});var od=b(()=>{En();Rh();Ek();Ck();Fk();aL();En();JT();En();$E();$h();$h();cL();yr(Cl())});var St=b(()=>{od();od()});var xoe,bI,uL=b(()=>{"use strict";Jr();Pt();St();Ar();xoe=u.object({arguments:u.record(u.string(),u.unknown()).optional().default({})}),bI=new Ae;bI.post("/:toolName",me,Je("json",xoe),async t=>{let e=t.req.param("toolName"),{arguments:r}=t.req.valid("json");return t.json({error:"Not implemented",message:`Tool ${e} will be implemented in subsequent tasks`,toolName:e,receivedArgs:r},501)})});var wI,SI,lL=b(()=>{"use strict";Pt();MM();uL();wI=new Ae;wI.route("/context",mx);wI.route("/tools",bI);SI=wI});var pL,Toe,mL,Eoe,dL,koe,Ioe,Poe,Aoe,Coe,Ooe,$oe,Roe,hL,gL,Noe,yL,vL,Doe,joe,Moe,zoe,Uoe,Loe,qoe,Foe,Boe,Voe,Hoe,Zoe,Joe,Goe,Koe,Woe,Qoe,Xoe,Yoe,eie,tie,rie,nie,oie,iie,sie,aie,cie,uie,lie,die,pie,mie,fie,hie,gie,yie,vie,_ie,bie,_L=b(()=>{pL="vercel.ai.error",Toe=Symbol.for(pL),Eoe=class fL extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[mL]=!0,this.name=e,this.cause=n}static isInstance(e){return fL.hasMarker(e,pL)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};mL=Toe;dL=Eoe,koe="AI_APICallError",Ioe=`vercel.ai.error.${koe}`,Poe=Symbol.for(Ioe);Aoe=Poe;Coe="AI_EmptyResponseBodyError",Ooe=`vercel.ai.error.${Coe}`,$oe=Symbol.for(Ooe);Roe=$oe;hL="AI_InvalidArgumentError",gL=`vercel.ai.error.${hL}`,Noe=Symbol.for(gL),vL=class extends dL{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:hL,message:t,cause:e}),this[yL]=!0,this.argument=r}static isInstance(t){return dL.hasMarker(t,gL)}};yL=Noe;Doe="AI_InvalidPromptError",joe=`vercel.ai.error.${Doe}`,Moe=Symbol.for(joe);zoe=Moe;Uoe="AI_InvalidResponseDataError",Loe=`vercel.ai.error.${Uoe}`,qoe=Symbol.for(Loe);Foe=qoe;Boe="AI_JSONParseError",Voe=`vercel.ai.error.${Boe}`,Hoe=Symbol.for(Voe);Zoe=Hoe;Joe="AI_LoadAPIKeyError",Goe=`vercel.ai.error.${Joe}`,Koe=Symbol.for(Goe);Woe=Koe;Qoe="AI_LoadSettingError",Xoe=`vercel.ai.error.${Qoe}`,Yoe=Symbol.for(Xoe);eie=Yoe;tie="AI_NoContentGeneratedError",rie=`vercel.ai.error.${tie}`,nie=Symbol.for(rie);oie=nie;iie="AI_NoSuchModelError",sie=`vercel.ai.error.${iie}`,aie=Symbol.for(sie);cie=aie;uie="AI_TooManyEmbeddingValuesForCallError",lie=`vercel.ai.error.${uie}`,die=Symbol.for(lie);pie=die;mie="AI_TypeValidationError",fie=`vercel.ai.error.${mie}`,hie=Symbol.for(fie);gie=hie;yie="AI_UnsupportedFunctionalityError",vie=`vercel.ai.error.${yie}`,_ie=Symbol.for(vie);bie=_ie});var bL,wL=b(()=>{bL=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet")});var Bh=Fe((_Fe,_c)=>{"use strict";var wie=typeof Buffer<"u",SL=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,xL=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function TL(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),wie&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let o=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(o==="ignore"&&i==="ignore")return n;if(o!=="ignore"&&i!=="ignore"){if(SL.test(t)===!1&&xL.test(t)===!1)return n}else if(o!=="ignore"&&i==="ignore"){if(SL.test(t)===!1)return n}else if(xL.test(t)===!1)return n;return EL(n,{protoAction:o,constructorAction:i,safe:r&&r.safe})}s(TL,"_parse");function EL(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let o=[t];for(;o.length;){let i=o;o=[];for(let a of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let c in a){let l=a[c];l&&typeof l=="object"&&o.push(l)}}}return t}s(EL,"filter");function xI(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return TL(t,e,r)}finally{Error.stackTraceLimit=n}}s(xI,"parse");function Sie(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return TL(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}s(Sie,"safeParse");_c.exports=xI;_c.exports.default=xI;_c.exports.parse=xI;_c.exports.safeParse=Sie;_c.exports.scan=EL});var Tie,xie,TI,kL,xFe,TFe,EI=b(()=>{_L();wL();Tie=hu(Bh(),1),xie=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=bL(r,e);if(t==null)return o;if(r.includes(n))throw new vL({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),TI=xie(),kL=Symbol.for("vercel.ai.validator"),{btoa:xFe,atob:TFe}=globalThis});var PL,IL,AL,Vh=b(()=>{PL=Symbol("Let zodToJsonSchema decide on which parser to use"),IL={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},AL=s(t=>typeof t=="string"?{...IL,name:t}:{...IL,...t},"getDefaultOptions")});var CL,kI=b(()=>{Vh();CL=s(t=>{let e=AL(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs")});function II(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function wt(t,e,r,n,o){t[e]=r,II(t,e,n,o)}var hs=b(()=>{s(II,"addErrorMessage");s(wt,"setResponseValueAndErrors")});var Hh,Zh=b(()=>{Hh=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath")});function er(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?Hh(e,t.currentPath):e.join("/")}}var Kn=b(()=>{Zh();s(er,"parseAnyDef")});function OL(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==Ve.ZodAny&&(r.items=Ue(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&wt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&wt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(wt(r,"minItems",t.exactLength.value,t.exactLength.message,e),wt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}var PI=b(()=>{St();hs();kr();s(OL,"parseArrayDef")});function $L(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?wt(r,"minimum",n.value,n.message,e):wt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),wt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?wt(r,"maximum",n.value,n.message,e):wt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),wt(r,"maximum",n.value,n.message,e));break;case"multipleOf":wt(r,"multipleOf",n.value,n.message,e);break}return r}var AI=b(()=>{hs();s($L,"parseBigintDef")});function RL(){return{type:"boolean"}}var CI=b(()=>{s(RL,"parseBooleanDef")});function Jh(t,e){return Ue(t.type._def,e)}var Gh=b(()=>{kr();s(Jh,"parseBrandedDef")});var NL,OI=b(()=>{kr();NL=s((t,e)=>Ue(t.innerType._def,e),"parseCatchDef")});function $I(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>$I(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Eie(t,e)}}var Eie,RI=b(()=>{hs();s($I,"parseDateDef");Eie=s((t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":wt(r,"minimum",n.value,n.message,e);break;case"max":wt(r,"maximum",n.value,n.message,e);break}return r},"integerDateParser")});function DL(t,e){return{...Ue(t.innerType._def,e),default:t.defaultValue()}}var NI=b(()=>{kr();s(DL,"parseDefaultDef")});function jL(t,e){return e.effectStrategy==="input"?Ue(t.schema._def,e):er(e)}var DI=b(()=>{kr();Kn();s(jL,"parseEffectsDef")});function ML(t){return{type:"string",enum:Array.from(t.values)}}var jI=b(()=>{s(ML,"parseEnumDef")});function zL(t,e){let r=[Ue(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ue(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(kie(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:c,...l}=i;a=l}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}var kie,MI=b(()=>{kr();kie=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");s(zL,"parseIntersectionDef")});function UL(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var zI=b(()=>{s(UL,"parseLiteralDef")});function Kh(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":wt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":wt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":po(r,"email",n.message,e);break;case"format:idn-email":po(r,"idn-email",n.message,e);break;case"pattern:zod":nn(r,lo.email,n.message,e);break}break;case"url":po(r,"uri",n.message,e);break;case"uuid":po(r,"uuid",n.message,e);break;case"regex":nn(r,n.regex,n.message,e);break;case"cuid":nn(r,lo.cuid,n.message,e);break;case"cuid2":nn(r,lo.cuid2,n.message,e);break;case"startsWith":nn(r,RegExp(`^${LI(n.value,e)}`),n.message,e);break;case"endsWith":nn(r,RegExp(`${LI(n.value,e)}$`),n.message,e);break;case"datetime":po(r,"date-time",n.message,e);break;case"date":po(r,"date",n.message,e);break;case"time":po(r,"time",n.message,e);break;case"duration":po(r,"duration",n.message,e);break;case"length":wt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),wt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{nn(r,RegExp(LI(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&po(r,"ipv4",n.message,e),n.version!=="v4"&&po(r,"ipv6",n.message,e);break}case"base64url":nn(r,lo.base64url,n.message,e);break;case"jwt":nn(r,lo.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&nn(r,lo.ipv4Cidr,n.message,e),n.version!=="v4"&&nn(r,lo.ipv6Cidr,n.message,e);break}case"emoji":nn(r,lo.emoji(),n.message,e);break;case"ulid":{nn(r,lo.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{po(r,"binary",n.message,e);break}case"contentEncoding:base64":{wt(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{nn(r,lo.base64,n.message,e);break}}break}case"nanoid":nn(r,lo.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function LI(t,e){return e.patternStrategy==="escape"?Pie(t):t}function Pie(t){let e="";for(let r=0;r<t.length;r++)Iie.has(t[r])||(e+="\\"),e+=t[r];return e}function po(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):wt(t,"format",e,r,n)}function nn(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:LL(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):wt(t,"pattern",LL(e,n),r,n)}function LL(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,c=!1;for(let l=0;l<n.length;l++){if(i){o+=n[l],i=!1;continue}if(r.i){if(a){if(n[l].match(/[a-z]/)){c?(o+=n[l],o+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&n[l+2]?.match(/[a-z]/)?(o+=n[l],c=!0):o+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){o+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(r.m){if(n[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[l]==="."){o+=a?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}o+=n[l],n[l]==="\\"?i=!0:a&&n[l]==="]"?a=!1:!a&&n[l]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}var UI,lo,Iie,Wh=b(()=>{hs();lo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(UI===void 0&&(UI=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),UI),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};s(Kh,"parseStringDef");s(LI,"escapeLiteralCheckValue");Iie=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");s(Pie,"escapeNonAlphaNumeric");s(po,"addFormat");s(nn,"addPattern");s(LL,"stringifyRegExpWithFlags")});function Qh(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===Ve.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:Ue(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??er(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Ue(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===Ve.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=Kh(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===Ve.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===Ve.ZodBranded&&t.keyType._def.type._def.typeName===Ve.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=Jh(t.keyType._def,e);return{...r,propertyNames:o}}}return r}var Xh=b(()=>{St();kr();Wh();Gh();Kn();s(Qh,"parseRecordDef")});function qL(t,e){if(e.mapStrategy==="record")return Qh(t,e);let r=Ue(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||er(e),n=Ue(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||er(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}var qI=b(()=>{kr();Xh();Kn();s(qL,"parseMapDef")});function FL(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}var FI=b(()=>{s(FL,"parseNativeEnumDef")});function BL(t){return t.target==="openAi"?void 0:{not:er({...t,currentPath:[...t.currentPath,"not"]})}}var BI=b(()=>{Kn();s(BL,"parseNeverDef")});function VL(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var VI=b(()=>{s(VL,"parseNullDef")});function ZL(t,e){if(e.target==="openApi3")return HL(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in id&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=id[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return HL(t,e)}var id,HL,Yh=b(()=>{kr();id={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};s(ZL,"parseUnionDef");HL=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Ue(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf")});function JL(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:id[t.innerType._def.typeName],nullable:!0}:{type:[id[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=Ue(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=Ue(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}var HI=b(()=>{kr();Yh();s(JL,"parseNullableDef")});function GL(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",II(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?wt(r,"minimum",n.value,n.message,e):wt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),wt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?wt(r,"maximum",n.value,n.message,e):wt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),wt(r,"maximum",n.value,n.message,e));break;case"multipleOf":wt(r,"multipleOf",n.value,n.message,e);break}return r}var ZI=b(()=>{hs();s(GL,"parseNumberDef")});function KL(t,e){let r=e.target==="openAi",n={type:"object",properties:{}},o=[],i=t.shape();for(let c in i){let l=i[c];if(l===void 0||l._def===void 0)continue;let d=Cie(l);d&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let p=Ue(l._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});p!==void 0&&(n.properties[c]=p,d||o.push(c))}o.length&&(n.required=o);let a=Aie(t,e);return a!==void 0&&(n.additionalProperties=a),n}function Aie(t,e){if(t.catchall._def.typeName!=="ZodNever")return Ue(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Cie(t){try{return t.isOptional()}catch{return!0}}var JI=b(()=>{kr();s(KL,"parseObjectDef");s(Aie,"decideAdditionalProperties");s(Cie,"safeIsOptional")});var WL,GI=b(()=>{kr();Kn();WL=s((t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Ue(t.innerType._def,e);let r=Ue(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:er(e)},r]}:er(e)},"parseOptionalDef")});var QL,KI=b(()=>{kr();QL=s((t,e)=>{if(e.pipeStrategy==="input")return Ue(t.in._def,e);if(e.pipeStrategy==="output")return Ue(t.out._def,e);let r=Ue(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Ue(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef")});function XL(t,e){return Ue(t.type._def,e)}var WI=b(()=>{kr();s(XL,"parsePromiseDef")});function YL(t,e){let n={type:"array",uniqueItems:!0,items:Ue(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&wt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&wt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}var QI=b(()=>{hs();kr();s(YL,"parseSetDef")});function e4(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Ue(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Ue(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Ue(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}var XI=b(()=>{kr();s(e4,"parseTupleDef")});function t4(t){return{not:er(t)}}var YI=b(()=>{Kn();s(t4,"parseUndefinedDef")});function r4(t){return er(t)}var eP=b(()=>{Kn();s(r4,"parseUnknownDef")});var n4,tP=b(()=>{kr();n4=s((t,e)=>Ue(t.innerType._def,e),"parseReadonlyDef")});var o4,rP=b(()=>{St();Kn();PI();AI();CI();Gh();OI();RI();NI();DI();jI();MI();zI();qI();FI();BI();VI();HI();ZI();JI();GI();KI();WI();Xh();QI();Wh();XI();YI();Yh();eP();tP();o4=s((t,e,r)=>{switch(e){case Ve.ZodString:return Kh(t,r);case Ve.ZodNumber:return GL(t,r);case Ve.ZodObject:return KL(t,r);case Ve.ZodBigInt:return $L(t,r);case Ve.ZodBoolean:return RL();case Ve.ZodDate:return $I(t,r);case Ve.ZodUndefined:return t4(r);case Ve.ZodNull:return VL(r);case Ve.ZodArray:return OL(t,r);case Ve.ZodUnion:case Ve.ZodDiscriminatedUnion:return ZL(t,r);case Ve.ZodIntersection:return zL(t,r);case Ve.ZodTuple:return e4(t,r);case Ve.ZodRecord:return Qh(t,r);case Ve.ZodLiteral:return UL(t,r);case Ve.ZodEnum:return ML(t);case Ve.ZodNativeEnum:return FL(t);case Ve.ZodNullable:return JL(t,r);case Ve.ZodOptional:return WL(t,r);case Ve.ZodMap:return qL(t,r);case Ve.ZodSet:return YL(t,r);case Ve.ZodLazy:return()=>t.getter()._def;case Ve.ZodPromise:return XL(t,r);case Ve.ZodNaN:case Ve.ZodNever:return BL(r);case Ve.ZodEffects:return jL(t,r);case Ve.ZodAny:return er(r);case Ve.ZodUnknown:return r4(r);case Ve.ZodDefault:return DL(t,r);case Ve.ZodBranded:return Jh(t,r);case Ve.ZodReadonly:return n4(t,r);case Ve.ZodCatch:return NL(t,r);case Ve.ZodPipeline:return QL(t,r);case Ve.ZodFunction:case Ve.ZodVoid:case Ve.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser")});function Ue(t,e,r=!1){let n=e.seen.get(t);if(e.override){let c=e.override?.(t,e,n,r);if(c!==PL)return c}if(n&&!r){let c=Oie(n,e);if(c!==void 0)return c}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=o4(t,t.typeName,e),a=typeof i=="function"?Ue(i(),e):i;if(a&&$ie(t,e,a),e.postProcess){let c=e.postProcess(a,t,e);return o.jsonSchema=a,c}return o.jsonSchema=a,a}var Oie,$ie,kr=b(()=>{Vh();rP();Zh();Kn();s(Ue,"parseDef");Oie=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Hh(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),er(e)):e.$refStrategy==="seen"?er(e):void 0}},"get$ref"),$ie=s((t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),"addMeta")});var i4=b(()=>{});var s4,nP=b(()=>{kr();kI();Kn();s4=s((t,e)=>{let r=CL(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,p])=>({...l,[d]:Ue(p._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??er(r)}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Ue(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??er(r),a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let c=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c},"zodToJsonSchema")});var a4,c4=b(()=>{Vh();kI();hs();Zh();kr();i4();Kn();PI();AI();CI();Gh();OI();RI();NI();DI();jI();MI();zI();qI();FI();BI();VI();HI();ZI();JI();GI();KI();WI();tP();Xh();QI();Wh();XI();YI();Yh();eP();rP();nP();nP();a4=s4});function mo(t,e){let r=u4.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function Nie(t,{validate:e}={}){return{[oP]:!0,_type:void 0,[kL]:!0,jsonSchema:t,validate:e}}function Die(t){return typeof t=="object"&&t!==null&&oP in t&&t[oP]===!0&&"jsonSchema"in t&&"validate"in t}function eg(t){return Die(t)?t:jie(t)}function jie(t){return Nie(a4(t),{validate:s(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}},"validate")})}var Rie,sd,ad,cd,ud,ld,dd,pd,md,fd,hd,gd,yd,vd,_d,bd,u4,r9e,n9e,o9e,oP,bc=b(()=>{EI();Rie=hu(Bh(),1);EI();c4();sd={code:"0",name:"text",parse:s(t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}},"parse")},ad={code:"1",name:"function_call",parse:s(t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}},"parse")},cd={code:"2",name:"data",parse:s(t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}},"parse")},ud={code:"3",name:"error",parse:s(t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}},"parse")},ld={code:"4",name:"assistant_message",parse:s(t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}},"parse")},dd={code:"5",name:"assistant_control_data",parse:s(t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}},"parse")},pd={code:"6",name:"data_message",parse:s(t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}},"parse")},md={code:"7",name:"tool_calls",parse:s(t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}},"parse")},fd={code:"8",name:"message_annotations",parse:s(t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}},"parse")},hd={code:"9",name:"tool_call",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}},"parse")},gd={code:"a",name:"tool_result",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}},"parse")},yd={code:"b",name:"tool_call_streaming_start",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}},"parse")},vd={code:"c",name:"tool_call_delta",parse:s(t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}},"parse")},_d={code:"d",name:"finish_message",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}},"parse")},bd={code:"e",name:"finish_step",parse:s(t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}},"parse")},u4=[sd,ad,cd,ud,ld,dd,pd,md,fd,hd,gd,yd,vd,_d,bd],r9e={[sd.code]:sd,[ad.code]:ad,[cd.code]:cd,[ud.code]:ud,[ld.code]:ld,[dd.code]:dd,[pd.code]:pd,[md.code]:md,[fd.code]:fd,[hd.code]:hd,[gd.code]:gd,[yd.code]:yd,[vd.code]:vd,[_d.code]:_d,[bd.code]:bd},n9e={[sd.name]:sd.code,[ad.name]:ad.code,[cd.name]:cd.code,[ud.name]:ud.code,[ld.name]:ld.code,[dd.name]:dd.code,[pd.name]:pd.code,[md.name]:md.code,[fd.name]:fd.code,[hd.name]:hd.code,[gd.name]:gd.code,[yd.name]:yd.code,[vd.name]:vd.code,[_d.name]:_d.code,[bd.name]:bd.code},o9e=u4.map(t=>t.code);s(mo,"formatStreamPart");oP=Symbol.for("vercel.ai.schema");s(Nie,"jsonSchema");s(Die,"isSchema");s(eg,"asSchema");s(jie,"zodSchema")});function tg(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var l4,Mie,d4,zie,xt,iP,m4,Uie,f4,h4,Lie,qie,Fie,Bie,g4,y4,Vie,v4,_4,sP,b4,Hie,w4,ea,Zie,Jie,Gie,Kie,aP,S4,Wie,x4,lP,Qie,Xie,Yie,ese,tse,rse,nse,ose,ise,sse,ase,cse,use,lse,dse,pse,mse,fse,hse,gse,cP,T4,yse,E4,vse,rg,_se,bse,wse,Sse,In=b(()=>{l4="vercel.ai.error",Mie=Symbol.for(l4),zie=class p4 extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[d4]=!0,this.name=e,this.cause=n}static isInstance(e){return p4.hasMarker(e,l4)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};d4=Mie;xt=zie,iP="AI_APICallError",m4=`vercel.ai.error.${iP}`,Uie=Symbol.for(m4),h4=class extends xt{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:iP,message:t,cause:a}),this[f4]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return xt.hasMarker(t,m4)}static isAPICallError(t){return t instanceof Error&&t.name===iP&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};f4=Uie;Lie="AI_EmptyResponseBodyError",qie=`vercel.ai.error.${Lie}`,Fie=Symbol.for(qie);Bie=Fie;s(tg,"getErrorMessage");g4="AI_InvalidArgumentError",y4=`vercel.ai.error.${g4}`,Vie=Symbol.for(y4),_4=class extends xt{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:g4,message:t,cause:e}),this[v4]=!0,this.argument=r}static isInstance(t){return xt.hasMarker(t,y4)}};v4=Vie;sP="AI_InvalidPromptError",b4=`vercel.ai.error.${sP}`,Hie=Symbol.for(b4),ea=class extends xt{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:sP,message:`Invalid prompt: ${e}`,cause:r}),this[w4]=!0,this.prompt=t}static isInstance(t){return xt.hasMarker(t,b4)}static isInvalidPromptError(t){return t instanceof Error&&t.name===sP&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};w4=Hie;Zie="AI_InvalidResponseDataError",Jie=`vercel.ai.error.${Zie}`,Gie=Symbol.for(Jie);Kie=Gie;aP="AI_JSONParseError",S4=`vercel.ai.error.${aP}`,Wie=Symbol.for(S4),lP=class extends xt{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:aP,message:`JSON parsing failed: Text: ${t}.
Error message: ${tg(e)}`,cause:e}),this[x4]=!0,this.text=t}static isInstance(t){return xt.hasMarker(t,S4)}static isJSONParseError(t){return t instanceof Error&&t.name===aP&&"text"in t&&typeof t.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};x4=Wie;Qie="AI_LoadAPIKeyError",Xie=`vercel.ai.error.${Qie}`,Yie=Symbol.for(Xie);ese=Yie;tse="AI_LoadSettingError",rse=`vercel.ai.error.${tse}`,nse=Symbol.for(rse);ose=nse;ise="AI_NoContentGeneratedError",sse=`vercel.ai.error.${ise}`,ase=Symbol.for(sse);cse=ase;use="AI_NoSuchModelError",lse=`vercel.ai.error.${use}`,dse=Symbol.for(lse);pse=dse;mse="AI_TooManyEmbeddingValuesForCallError",fse=`vercel.ai.error.${mse}`,hse=Symbol.for(fse);gse=hse;cP="AI_TypeValidationError",T4=`vercel.ai.error.${cP}`,yse=Symbol.for(T4),vse=class uP extends xt{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:cP,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${tg(r)}`,cause:r}),this[E4]=!0,this.value=e}static isInstance(e){return xt.hasMarker(e,T4)}static wrap({value:e,cause:r}){return uP.isInstance(r)&&r.value===e?r:new uP({value:e,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===cP}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};E4=yse;rg=vse,_se="AI_UnsupportedFunctionalityError",bse=`vercel.ai.error.${_se}`,wse=Symbol.for(bse);Sse=wse});var k4,I4=b(()=>{k4=s((t,e=21)=>(r=e)=>{let n="",o=r|0;for(;o--;)n+=t[Math.random()*t.length|0];return n},"customAlphabet")});function P4(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function A4(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function xse(t){return{[dP]:!0,validate:t}}function Tse(t){return typeof t=="object"&&t!==null&&dP in t&&t[dP]===!0&&"validate"in t}function Ese(t){return Tse(t)?t:kse(t)}function kse(t){return xse(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function wd({value:t,schema:e}){let r=Ese(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:rg.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:rg.wrap({value:t,cause:n})}}}function pP({text:t,schema:e}){try{let r=C4.default.parse(t);return e==null?{success:!0,value:r}:wd({value:r,schema:e})}catch(r){return{success:!1,error:lP.isJSONParseError(r)?r:new lP({text:t,cause:r})}}}function O4(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=Pse(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function mP(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return Ise(e)}var C4,Ti,_9e,dP,Ise,Pse,Ei=b(()=>{In();I4();In();C4=hu(Bh(),1);In();Ti=s(({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=k4(r,e);if(t==null)return o;if(r.includes(n))throw new _4({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${o(i)}`},"createIdGenerator"),_9e=Ti();s(P4,"getErrorMessage");s(A4,"isAbortError");dP=Symbol.for("vercel.ai.validator");s(xse,"validator");s(Tse,"isValidator");s(Ese,"asValidator");s(kse,"zodValidator");s(wd,"safeValidateTypes");s(pP,"safeParseJSON");({btoa:Ise,atob:Pse}=globalThis);s(O4,"convertBase64ToUint8Array");s(mP,"convertUint8ArrayToBase64")});var $4,R4=b(()=>{$4=typeof globalThis=="object"?globalThis:global});var N4=b(()=>{R4()});var D4=b(()=>{N4()});var ki,fP=b(()=>{ki="1.9.0"});function Ase(t){var e=new Set([t]),r=new Set,n=t.match(j4);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return s(function(l){return l===t},"isExactmatch");function i(c){return r.add(c),!1}s(i,"_reject");function a(c){return e.add(c),!0}return s(a,"_accept"),s(function(l){if(e.has(l))return!0;if(r.has(l))return!1;var d=l.match(j4);if(!d)return i(l);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||o.major!==p.major?i(l):o.major===0?o.minor===p.minor&&o.patch<=p.patch?a(l):i(l):o.minor<=p.minor?a(l):i(l)},"isCompatible")}var j4,M4,z4=b(()=>{fP();j4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;s(Ase,"_makeCompatibilityCheck");M4=Ase(ki)});function wc(t,e,r,n){var o;n===void 0&&(n=!1);var i=xd[Sd]=(o=xd[Sd])!==null&&o!==void 0?o:{version:ki};if(!n&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==ki){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+ki);return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+ki+"."),!0}function Ii(t){var e,r,n=(e=xd[Sd])===null||e===void 0?void 0:e.version;if(!(!n||!M4(n)))return(r=xd[Sd])===null||r===void 0?void 0:r[t]}function Sc(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+ki+".");var r=xd[Sd];r&&delete r[t]}var Cse,Sd,xd,Td=b(()=>{D4();fP();z4();Cse=ki.split(".")[0],Sd=Symbol.for("opentelemetry.js.api."+Cse),xd=$4;s(wc,"registerGlobal");s(Ii,"getGlobal");s(Sc,"unregisterGlobal")});function Ed(t,e,r){var n=Ii("diag");if(n)return r.unshift(e),n[t].apply(n,$se([],Ose(r),!1))}var Ose,$se,U4,L4=b(()=>{Td();Ose=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},$se=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},U4=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return s(t,"DiagComponentLogger"),t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ed("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ed("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ed("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ed("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ed("verbose",this._namespace,e)},t})();s(Ed,"logProxy")});var on,hP=b(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(on||(on={}))});function q4(t,e){t<on.NONE?t=on.NONE:t>on.ALL&&(t=on.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return s(r,"_filterFunc"),{error:r("error",on.ERROR),warn:r("warn",on.WARN),info:r("info",on.INFO),debug:r("debug",on.DEBUG),verbose:r("verbose",on.VERBOSE)}}var F4=b(()=>{hP();s(q4,"createLogLevelDiagLogger")});var Rse,Nse,Dse,xc,gP=b(()=>{L4();F4();hP();Td();Rse=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Nse=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Dse="diag",xc=(function(){function t(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=Ii("diag");if(c)return c[o].apply(c,Nse([],Rse(i),!1))}}s(e,"_logProxy");var r=this,n=s(function(o,i){var a,c,l;if(i===void 0&&(i={logLevel:on.INFO}),o===r){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof i=="number"&&(i={logLevel:i});var p=Ii("diag"),m=q4((c=i.logLevel)!==null&&c!==void 0?c:on.INFO,o);if(p&&!i.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+h),m.warn("Current logger will overwrite one already registered from "+h)}return wc("diag",m,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){Sc(Dse,r)},r.createComponentLogger=function(o){return new U4(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return s(t,"DiagAPI"),t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})()});function B4(t){return Symbol.for(t)}var jse,V4,yP=b(()=>{s(B4,"createContextKey");jse=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return s(t,"BaseContext"),t})(),V4=new jse});var Mse,zse,H4,Z4=b(()=>{yP();Mse=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},zse=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},H4=(function(){function t(){}return s(t,"NoopContextManager"),t.prototype.active=function(){return V4},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,zse([n],Mse(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})()});var Use,Lse,vP,qse,ng,_P=b(()=>{Z4();Td();gP();Use=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Lse=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},vP="context",qse=new H4,ng=(function(){function t(){}return s(t,"ContextAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return wc(vP,e,xc.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,Lse([e,r,n],Use(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Ii(vP)||qse},t.prototype.disable=function(){this._getContextManager().disable(),Sc(vP,xc.instance())},t})()});var og,J4=b(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(og||(og={}))});var bP,wP,G4,SP=b(()=>{J4();bP="0000000000000000",wP="00000000000000000000000000000000",G4={traceId:wP,spanId:bP,traceFlags:og.NONE}});var gs,ig=b(()=>{SP();gs=(function(){function t(e){e===void 0&&(e=G4),this._spanContext=e}return s(t,"NonRecordingSpan"),t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})()});function sg(t){return t.getValue(xP)||void 0}function K4(){return sg(ng.getInstance().active())}function kd(t,e){return t.setValue(xP,e)}function W4(t){return t.deleteValue(xP)}function Q4(t,e){return kd(t,new gs(e))}function ag(t){var e;return(e=sg(t))===null||e===void 0?void 0:e.spanContext()}var xP,TP=b(()=>{yP();ig();_P();xP=B4("OpenTelemetry Context Key SPAN");s(sg,"getSpan");s(K4,"getActiveSpan");s(kd,"setSpan");s(W4,"deleteSpan");s(Q4,"setSpanContext");s(ag,"getSpanContext")});function Vse(t){return Fse.test(t)&&t!==wP}function Hse(t){return Bse.test(t)&&t!==bP}function cg(t){return Vse(t.traceId)&&Hse(t.spanId)}function X4(t){return new gs(t)}var Fse,Bse,EP=b(()=>{SP();ig();Fse=/^([0-9a-f]{32})$/i,Bse=/^[0-9a-f]{16}$/i;s(Vse,"isValidTraceId");s(Hse,"isValidSpanId");s(cg,"isSpanContextValid");s(X4,"wrapSpanContext")});function Zse(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var kP,ug,IP=b(()=>{_P();TP();ig();EP();kP=ng.getInstance(),ug=(function(){function t(){}return s(t,"NoopTracer"),t.prototype.startSpan=function(e,r,n){n===void 0&&(n=kP.active());var o=!!r?.root;if(o)return new gs;var i=n&&ag(n);return Zse(i)&&cg(i)?new gs(i):new gs},t.prototype.startActiveSpan=function(e,r,n,o){var i,a,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(i=r,c=n):(i=r,a=n,c=o);var l=a??kP.active(),d=this.startSpan(e,i,l),p=kd(l,d);return kP.with(p,c,void 0,d)}},t})();s(Zse,"isSpanContext")});var Jse,Y4,eq=b(()=>{IP();Jse=new ug,Y4=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return s(t,"ProxyTracer"),t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Jse},t})()});var tq,rq=b(()=>{IP();tq=(function(){function t(){}return s(t,"NoopTracerProvider"),t.prototype.getTracer=function(e,r,n){return new ug},t})()});var Gse,PP,nq=b(()=>{eq();rq();Gse=new tq,PP=(function(){function t(){}return s(t,"ProxyTracerProvider"),t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new Y4(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Gse},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})()});var Tc,oq=b(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Tc||(Tc={}))});var AP,iq,sq=b(()=>{Td();nq();EP();TP();gP();AP="trace",iq=(function(){function t(){this._proxyTracerProvider=new PP,this.wrapSpanContext=X4,this.isSpanContextValid=cg,this.deleteSpan=W4,this.getSpan=sg,this.getActiveSpan=K4,this.getSpanContext=ag,this.setSpan=kd,this.setSpanContext=Q4}return s(t,"TraceAPI"),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=wc(AP,this._proxyTracerProvider,xc.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Ii(AP)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Sc(AP,xc.instance()),this._proxyTracerProvider=new PP},t})()});var CP,aq=b(()=>{sq();CP=iq.getInstance()});var OP=b(()=>{oq();aq()});async function Wse(t){return t===void 0?Promise.resolve():new Promise(e=>setTimeout(e,t))}async function vq(t,{maxRetries:e,delayInMs:r,backoffFactor:n},o=[]){try{return await t()}catch(i){if(A4(i)||e===0)throw i;let a=P4(i),c=[...o,i],l=c.length;if(l>e)throw new cq({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:c});if(i instanceof Error&&h4.isAPICallError(i)&&i.isRetryable===!0&&l<=e)return await Wse(r),vq(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},c);throw l===1?i:new cq({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:c})}}function NP({operationId:t,telemetry:e}){return{"operation.name":`${t}${e?.functionId!=null?` ${e.functionId}`:""}`,"resource.name":e?.functionId,"ai.operationId":t,"ai.telemetry.functionId":e?.functionId}}function Yse({model:t,settings:e,telemetry:r,headers:n}){var o;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((i,[a,c])=>(i[`ai.settings.${a}`]=c,i),{}),...Object.entries((o=r?.metadata)!=null?o:{}).reduce((i,[a,c])=>(i[`ai.telemetry.metadata.${a}`]=c,i),{}),...Object.entries(n??{}).reduce((i,[a,c])=>(c!==void 0&&(i[`ai.request.headers.${a}`]=c),i),{})}}function rae({isEnabled:t=!1,tracer:e}={}){return t?e||CP.getTracer("ai"):eae}function DP({name:t,tracer:e,attributes:r,fn:n,endWhenDone:o=!0}){return e.startActiveSpan(t,{attributes:r},async i=>{try{let a=await n(i);return o&&i.end(),a}catch(a){try{a instanceof Error?(i.recordException({name:a.name,message:a.message,stack:a.stack}),i.setStatus({code:Tc.ERROR,message:a.message})):i.setStatus({code:Tc.ERROR})}finally{i.end()}throw a}})}function Ec({telemetry:t,attributes:e}){return t?.isEnabled!==!0?{}:Object.entries(e).reduce((r,[n,o])=>{if(o===void 0)return r;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(t?.recordInputs===!1)return r;let i=o.input();return i===void 0?r:{...r,[n]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(t?.recordOutputs===!1)return r;let i=o.output();return i===void 0?r:{...r,[n]:i}}return{...r,[n]:o}},{})}async function oae({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let o=await e(n);if(!o.ok)throw new $P({url:n,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mimeType:(r=o.headers.get("content-type"))!=null?r:void 0}}catch(o){throw $P.isInstance(o)?o:new $P({url:n,cause:o})}}function sae(t){for(let{bytes:e,mimeType:r}of iae)if(t.length>=e.length&&e.every((n,o)=>t[o]===n))return r}function cae(t){return typeof t=="string"?t:t instanceof ArrayBuffer?mP(new Uint8Array(t)):mP(t)}function dg(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return O4(t)}catch(e){throw new uq({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new uq({content:t})}function uae(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}function pae(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function mae({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=s(()=>!1,"modelSupportsUrl"),downloadImplementation:n=oae}){let o=await hae(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(i=>fae(i,o))]}function fae(t,e){let r=t.role;switch(r){case"system":return{role:"system",content:t.content,providerMetadata:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"user",content:t.content.map(n=>gae(n,e)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:o,...i}=n;return{...i,providerMetadata:o}}),providerMetadata:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:t.experimental_providerMetadata};default:{let n=r;throw new dae({role:n})}}}async function hae(t,e,r,n){let o=t.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&r===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!n(a)),i=await Promise.all(o.map(async a=>({url:a,data:await e({url:a})})));return Object.fromEntries(i.map(({url:a,data:c})=>[a.toString(),c]))}function gae(t,e){if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let r=t.mimeType,n,o,i,a=t.type;switch(a){case"image":n=t.image;break;case"file":n=t.data;break;default:throw new Error(`Unsupported part type: ${a}`)}try{o=typeof n=="string"?new URL(n):n}catch{o=n}if(o instanceof URL)if(o.protocol==="data:"){let{mimeType:c,base64Content:l}=pae(o.toString());if(c==null||l==null)throw new Error(`Invalid data URL format in part ${a}`);r=c,i=dg(l)}else{let c=e[o.toString()];c?(i=c.data,r??(r=c.mimeType)):i=o}else i=dg(o);switch(a){case"image":return r==null&&i instanceof Uint8Array&&(r=sae(i)),{type:"image",image:i,mimeType:r,providerMetadata:t.experimental_providerMetadata};case"file":if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:i instanceof Uint8Array?cae(i):i,mimeType:r,providerMetadata:t.experimental_providerMetadata}}}function vae({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:c,maxRetries:l}){if(t!=null){if(!Number.isInteger(t))throw new fo({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new fo({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new fo({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new fo({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new fo({parameter:"topK",value:n,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new fo({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new fo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(c!=null&&!Number.isInteger(c))throw new fo({parameter:"seed",value:c,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new fo({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new fo({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:o,frequencyPenalty:i,stopSequences:a!=null&&a.length>0?a:void 0,seed:c,maxRetries:l??2}}function Aae(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(Cae);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function Cae(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}function Oae(t){var e,r,n;let o=[];for(let i of t){let a;try{a=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(a.protocol){case"http:":case"https:":{if((e=i.contentType)!=null&&e.startsWith("image/"))o.push({type:"image",image:a});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:a,mimeType:i.contentType})}break}case"data:":{let c,l,d;try{[c,l]=i.url.split(","),d=c.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(d==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((r=i.contentType)!=null&&r.startsWith("image/"))o.push({type:"image",image:dg(l)});else if((n=i.contentType)!=null&&n.startsWith("text/"))o.push({type:"text",text:uae(dg(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return o}function BP(t,e){var r;let n=(r=e?.tools)!=null?r:{},o=[];for(let i of t){let{role:a,content:c,toolInvocations:l,experimental_attachments:d}=i;switch(a){case"system":{o.push({role:"system",content:c});break}case"user":{o.push({role:"user",content:d?[{type:"text",text:c},...Oae(d)]:c});break}case"assistant":{if(l==null){o.push({role:"assistant",content:c});break}o.push({role:"assistant",content:[{type:"text",text:c},...l.map(({toolCallId:p,toolName:m,args:h})=>({type:"tool-call",toolCallId:p,toolName:m,args:h}))]}),o.push({role:"tool",content:l.map(p=>{if(!("result"in p))throw new lq({originalMessage:i,message:"ToolInvocation must have a result: "+JSON.stringify(p)});let{toolCallId:m,toolName:h,result:y}=p,g=n[h];return g?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:m,toolName:h,result:g.experimental_toToolResultContent(y),experimental_content:g.experimental_toToolResultContent(y)}:{type:"tool-result",toolCallId:m,toolName:h,result:y}})});break}case"function":case"data":case"tool":break;default:{let p=a;throw new lq({originalMessage:i,message:`Unsupported role: ${p}`})}}}return o}function Rae({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new ea({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new ea({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new ea({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new ea({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=Aae(t.messages);if(r==="other")throw new ea({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?BP(t.messages,{tools:e}):t.messages,o=wd({value:n,schema:u.array(Pae)});if(!o.success)throw new ea({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:o.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function Nae(t){return{promptTokens:t.promptTokens,completionTokens:t.completionTokens,totalTokens:t.promptTokens+t.completionTokens}}function pg(t,{contentType:e,dataStreamVersion:r}){var n;let o=new Headers((n=t?.headers)!=null?n:{});return o.has("Content-Type")||o.set("Content-Type",e),r!==void 0&&o.set("X-Vercel-AI-Data-Stream",r),o}function dq(t,e){let r=t.pipeThrough(new TransformStream(e));return r[Symbol.asyncIterator]=()=>{let n=r.getReader();return{async next(){let{done:o,value:i}=await n.read();return o?{done:!0,value:void 0}:{done:!1,value:i}}}},r}function Mo(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}function Uae(){var t,e;return(e=(t=globalThis?.performance)==null?void 0:t.now())!=null?e:Date.now()}function pq(t,{contentType:e,dataStreamVersion:r}){let n={};if(t?.headers!=null)for(let[o,i]of Object.entries(t.headers))n[o]=i;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function mq({response:t,status:e,statusText:r,headers:n,stream:o}){t.writeHead(e??200,r,n);let i=o.getReader();s(async()=>{try{for(;;){let{done:c,value:l}=await i.read();if(c)break;t.write(l)}}catch(c){throw c}finally{t.end()}},"read")()}function Bae(t){return t!=null&&Object.keys(t).length>0}function Vae({tools:t,toolChoice:e,activeTools:r}){return Bae(t)?{tools:(r!=null?Object.entries(t).filter(([o])=>r.includes(o)):Object.entries(t)).map(([o,i])=>{let a=i.type;switch(a){case void 0:case"function":return{type:"function",name:o,description:i.description,parameters:eg(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{let c=a;throw new Error(`Unsupported tool type: ${c}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}function Zae(t){let e=t.match(Hae);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}function Jae({toolCall:t,tools:e}){let r=t.toolName;if(e==null)throw new mg({toolName:t.toolName});let n=e[r];if(n==null)throw new mg({toolName:t.toolName,availableTools:Object.keys(e)});let o=eg(n.parameters),i=t.args.trim()===""?wd({value:{},schema:o}):pP({text:t.args,schema:o});if(i.success===!1)throw new qae({toolName:r,toolArgs:t.args,cause:i.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:i.value}}function Gae({text:t="",tools:e,toolCalls:r,toolResults:n}){let o=[];return o.push({role:"assistant",content:[{type:"text",text:t},...r]}),n.length>0&&o.push({role:"tool",content:n.map(i=>{let a=e[i.toolName];return a?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:a.experimental_toToolResultContent(i.result),experimental_content:a.experimental_toToolResultContent(i.result)}:{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,result:i.result}})}),o}function Kae(){let t=[],e=null,r=!1,n=s(async()=>{if(r&&t.length===0){e?.close();return}if(t.length!==0)try{let{value:o,done:i}=await t[0].read();i?(t.shift(),t.length>0?await n():r&&e?.close()):e?.enqueue(o)}catch(o){e?.error(o),t.shift(),r&&t.length===0&&e?.close()}},"processPull");return{stream:new ReadableStream({start(o){e=o},pull:n,async cancel(){for(let o of t)await o.cancel();t=[],r=!0}}),addStream:s(o=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(o.getReader())},"addStream"),close:s(()=>{r=!0,t.length===0&&e?.close()},"close")}}function VP(t,e){let r=t.getReader(),n=e.getReader(),o,i,a=!1,c=!1;async function l(p){try{o==null&&(o=r.read());let m=await o;o=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}s(l,"readStream1");async function d(p){try{i==null&&(i=n.read());let m=await i;i=void 0,m.done?p.close():p.enqueue(m.value)}catch(m){p.error(m)}}return s(d,"readStream2"),new ReadableStream({async pull(p){try{if(a){await d(p);return}if(c){await l(p);return}o==null&&(o=r.read()),i==null&&(i=n.read());let{result:m,reader:h}=await Promise.race([o.then(y=>({result:y,reader:r})),i.then(y=>({result:y,reader:n}))]);m.done||p.enqueue(m.value),h===r?(o=void 0,m.done&&(await d(p),a=!0)):(i=void 0,m.done&&(c=!0,await l(p)))}catch(m){p.error(m)}},cancel(){r.cancel(),n.cancel()}})}function Wae({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:o,abortSignal:i}){let a=null,c=new ReadableStream({start(g){a=g}}),l={},d=new Set,p=!1,m;function h(){p&&d.size===0&&(m!=null&&a.enqueue(m),a.close())}s(h,"attemptClose");let y=new TransformStream({transform(g,f){let _=g.type;switch(_){case"text-delta":case"response-metadata":case"error":{f.enqueue(g);break}case"tool-call-delta":{r&&(l[g.toolCallId]||(f.enqueue({type:"tool-call-streaming-start",toolCallId:g.toolCallId,toolName:g.toolName}),l[g.toolCallId]=!0),f.enqueue({type:"tool-call-delta",toolCallId:g.toolCallId,toolName:g.toolName,argsTextDelta:g.argsTextDelta}));break}case"tool-call":{let S=g.toolName;if(t==null){a.enqueue({type:"error",error:new mg({toolName:g.toolName})});break}let w=t[S];if(w==null){a.enqueue({type:"error",error:new mg({toolName:g.toolName,availableTools:Object.keys(t)})});break}try{let x=Jae({toolCall:g,tools:t});if(f.enqueue(x),w.execute!=null){let I=TI();d.add(I),DP({name:"ai.toolCall",attributes:Ec({telemetry:o,attributes:{...NP({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":x.toolName,"ai.toolCall.id":x.toolCallId,"ai.toolCall.args":{output:s(()=>JSON.stringify(x.args),"output")}}}),tracer:n,fn:s(async N=>w.execute(x.args,{abortSignal:i}).then($=>{a.enqueue({...x,type:"tool-result",result:$}),d.delete(I),h();try{N.setAttributes(Ec({telemetry:o,attributes:{"ai.toolCall.result":{output:s(()=>JSON.stringify($),"output")}}}))}catch{}},$=>{a.enqueue({type:"error",error:$}),d.delete(I),h()}),"fn")})}}catch(x){a.enqueue({type:"error",error:x})}break}case"finish":{m={type:"finish",finishReason:g.finishReason,logprobs:g.logprobs,usage:Nae(g.usage),experimental_providerMetadata:g.providerMetadata};break}default:{let S=_;throw new Error(`Unhandled chunk type: ${S}`)}}},flush(){p=!0,h()}});return new ReadableStream({async start(g){return Promise.all([e.pipeThrough(y).pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){}})),c.pipeTo(new WritableStream({write(f){g.enqueue(f)},close(){g.close()}}))])}})}async function jq({model:t,tools:e,toolChoice:r,system:n,prompt:o,messages:i,maxRetries:a,abortSignal:c,headers:l,maxToolRoundtrips:d=0,maxSteps:p=d!=null?d+1:1,experimental_continueSteps:m=!1,experimental_telemetry:h,experimental_providerMetadata:y,experimental_toolCallStreaming:g=!1,experimental_activeTools:f,onChunk:_,onFinish:S,onStepFinish:w,_internal:{now:x=Uae,generateId:I=Qae,currentDate:N=s(()=>new Date,"currentDate")}={},...$}){if(p<1)throw new fo({parameter:"maxSteps",value:p,message:"maxSteps must be at least 1"});let O=Yse({model:t,telemetry:h,headers:l,settings:{...$,maxRetries:a}}),R=rae(h),A=Rae({prompt:{system:n,prompt:o,messages:i},tools:e});return DP({name:"ai.streamText",attributes:Ec({telemetry:h,attributes:{...NP({operationId:"ai.streamText",telemetry:h}),...O,"ai.prompt":{input:s(()=>JSON.stringify({system:n,prompt:o,messages:i}),"input")},"ai.settings.maxSteps":p}}),tracer:R,endWhenDone:!1,fn:s(async D=>{let M=Xse({maxRetries:a}),Q=s(async({responseMessages:Ee})=>{let rt=Ee.length===0?A.type:"messages",Ke=await mae({prompt:{type:rt,system:A.system,messages:[...A.messages,...Ee]},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:t.supportsUrl}),G={type:"regular",...Vae({tools:e,toolChoice:r,activeTools:f})},{result:{stream:$e,warnings:ye,rawResponse:L,request:Qe},doStreamSpan:Ot,startTimestampMs:zt}=await M(()=>DP({name:"ai.streamText.doStream",attributes:Ec({telemetry:h,attributes:{...NP({operationId:"ai.streamText.doStream",telemetry:h}),...O,"ai.prompt.format":{input:s(()=>rt,"input")},"ai.prompt.messages":{input:s(()=>JSON.stringify(Ke),"input")},"ai.prompt.tools":{input:s(()=>{var fn;return(fn=G.tools)==null?void 0:fn.map(zi=>JSON.stringify(zi))},"input")},"ai.prompt.toolChoice":{input:s(()=>G.toolChoice!=null?JSON.stringify(G.toolChoice):void 0,"input")},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":$.frequencyPenalty,"gen_ai.request.max_tokens":$.maxTokens,"gen_ai.request.presence_penalty":$.presencePenalty,"gen_ai.request.stop_sequences":$.stopSequences,"gen_ai.request.temperature":$.temperature,"gen_ai.request.top_k":$.topK,"gen_ai.request.top_p":$.topP}}),tracer:R,endWhenDone:!1,fn:s(async fn=>({startTimestampMs:x(),doStreamSpan:fn,result:await t.doStream({mode:G,...vae($),inputFormat:rt,prompt:Ke,providerMetadata:y,abortSignal:c,headers:l})}),"fn")}));return{result:{stream:Wae({tools:e,generatorStream:$e,toolCallStreaming:g,tracer:R,telemetry:h,abortSignal:c}),warnings:ye,request:Qe??{},rawResponse:L},doStreamSpan:Ot,startTimestampMs:zt}},"startStep"),{result:{stream:Z,warnings:F,rawResponse:ee,request:ne},doStreamSpan:se,startTimestampMs:we}=await Q({responseMessages:[]});return new Xae({stream:Z,warnings:F,rawResponse:ee,request:ne,onChunk:_,onFinish:S,onStepFinish:w,rootSpan:D,doStreamSpan:se,telemetry:h,startTimestampMs:we,maxSteps:p,continueSteps:m,startStep:Q,modelId:t.modelId,now:x,currentDate:N,generateId:I,tools:e})},"fn")})}function Mq(t){let e=new TextEncoder,r="",n=t||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(o,i){let a=typeof o=="string"?o:o.content;i.enqueue(e.encode(a)),r+=a,n.onToken&&await n.onToken(a),n.onText&&typeof o=="string"&&await n.onText(o)},async flush(){let o=nce(n);n.onCompletion&&await n.onCompletion(r),n.onFinal&&!o&&await n.onFinal(r)}})}function nce(t){return"experimental_onFunctionCall"in t}function oce(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}function zq(){let t=new TextEncoder,e=new TextDecoder;return new TransformStream({transform:s(async(r,n)=>{let o=e.decode(r);n.enqueue(t.encode(mo("text",o)))},"transform")})}function sce(t,e){return HP(t,e)}function HP(t,e){return t.pipeThrough(new TransformStream({transform:s(async(r,n)=>{var o;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&fq((o=r.data)==null?void 0:o.chunk,n);return}fq(r,n)},"transform")})).pipeThrough(Mq(e)).pipeThrough(zq())}function ace(t,e){var r;let n=HP(t,e?.callbacks),o=e?.data,i=e?.init,a=o?VP(o.stream,n):n;return new Response(a,{status:(r=i?.status)!=null?r:200,statusText:i?.statusText,headers:pg(i,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function fq(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}function Uq(t,e){return lce(t).pipeThrough(Mq(e)).pipeThrough(zq())}function uce(t,e={}){var r;let{init:n,data:o,callbacks:i}=e,a=Uq(t,i),c=o?VP(o.stream,a):a;return new Response(c,{status:(r=n?.status)!=null?r:200,statusText:n?.statusText,headers:pg(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function lce(t){let e=t[Symbol.asyncIterator](),r=oce();return new ReadableStream({async pull(n){var o;let{value:i,done:a}=await e.next();if(a){n.close();return}let c=r((o=i.delta)!=null?o:"");c&&n.enqueue(c)}})}var Kse,hq,RP,gq,Qse,yq,cq,Xse,eae,lg,tae,jP,_q,nae,bq,$P,iae,MP,wq,aae,Sq,uq,xq,zP,Tq,lae,Eq,dae,UP,kq,yae,Iq,fo,LP,ys,_ae,Pq,bae,wae,Sae,xae,Tae,Eae,kae,Iae,Pae,Aq,Cq,$ae,Oq,lq,Dae,jae,Mae,zae,SVe,TVe,qP,$q,Lae,Rq,qae,FP,Nq,Fae,Dq,mg,Hae,OVe,Qae,Xae,Yae,ece,tce,rce,DVe,jVe,ice,cce,MVe,Lq=b(()=>{bc();In();Ei();In();OP();OP();Ei();In();Ei();In();St();In();In();In();Ei();St();St();St();St();St();St();In();Ei();Ei();In();In();bc();Ei();bc();Ei();bc();bc();Kse=Object.defineProperty,hq=s((t,e)=>{for(var r in e)Kse(t,r,{get:e[r],enumerable:!0})},"__export");s(Wse,"delay");RP="AI_RetryError",gq=`vercel.ai.error.${RP}`,Qse=Symbol.for(gq),cq=class extends xt{static{s(this,"RetryError")}constructor({message:t,reason:e,errors:r}){super({name:RP,message:t}),this[yq]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return xt.hasMarker(t,gq)}static isRetryError(t){return t instanceof Error&&t.name===RP&&typeof t.reason=="string"&&Array.isArray(t.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};yq=Qse;Xse=s(({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>vq(n,{maxRetries:t,delayInMs:e,backoffFactor:r}),"retryWithExponentialBackoff");s(vq,"_retryWithExponentialBackoff");s(NP,"assembleOperationName");s(Yse,"getBaseTelemetryAttributes");eae={startSpan(){return lg},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(lg);if(typeof r=="function")return r(lg);if(typeof n=="function")return n(lg)}},lg={spanContext(){return tae},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},tae={traceId:"",spanId:"",traceFlags:0};s(rae,"getTracer");s(DP,"recordSpan");s(Ec,"selectTelemetryAttributes");jP="AI_DownloadError",_q=`vercel.ai.error.${jP}`,nae=Symbol.for(_q),$P=class extends xt{static{s(this,"DownloadError")}constructor({url:t,statusCode:e,statusText:r,cause:n,message:o=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:jP,message:o,cause:n}),this[bq]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return xt.hasMarker(t,_q)}static isDownloadError(t){return t instanceof Error&&t.name===jP&&typeof t.url=="string"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.statusText==null||typeof t.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};bq=nae;s(oae,"download");iae=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];s(sae,"detectImageMimeType");MP="AI_InvalidDataContentError",wq=`vercel.ai.error.${MP}`,aae=Symbol.for(wq),uq=class extends xt{static{s(this,"InvalidDataContentError")}constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:MP,message:r,cause:e}),this[Sq]=!0,this.content=t}static isInstance(t){return xt.hasMarker(t,wq)}static isInvalidDataContentError(t){return t instanceof Error&&t.name===MP&&t.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};Sq=aae;xq=u.union([u.string(),u.instanceof(Uint8Array),u.instanceof(ArrayBuffer),u.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);s(cae,"convertDataContentToBase64String");s(dg,"convertDataContentToUint8Array");s(uae,"convertUint8ArrayToText");zP="AI_InvalidMessageRoleError",Tq=`vercel.ai.error.${zP}`,lae=Symbol.for(Tq),dae=class extends xt{static{s(this,"InvalidMessageRoleError")}constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:zP,message:e}),this[Eq]=!0,this.role=t}static isInstance(t){return xt.hasMarker(t,Tq)}static isInvalidMessageRoleError(t){return t instanceof Error&&t.name===zP&&typeof t.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};Eq=lae;s(pae,"splitDataUrl");s(mae,"convertToLanguageModelPrompt");s(fae,"convertToLanguageModelMessage");s(hae,"downloadAssets");s(gae,"convertPartToLanguageModelPart");UP="AI_InvalidArgumentError",kq=`vercel.ai.error.${UP}`,yae=Symbol.for(kq),fo=class extends xt{static{s(this,"InvalidArgumentError")}constructor({parameter:t,value:e,message:r}){super({name:UP,message:`Invalid argument for parameter ${t}: ${r}`}),this[Iq]=!0,this.parameter=t,this.value=e}static isInstance(t){return xt.hasMarker(t,kq)}static isInvalidArgumentError(t){return t instanceof Error&&t.name===UP&&typeof t.parameter=="string"&&typeof t.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};Iq=yae;s(vae,"prepareCallSettings");LP=u.lazy(()=>u.union([u.null(),u.string(),u.number(),u.boolean(),u.record(u.string(),LP),u.array(LP)])),ys=u.record(u.string(),u.record(u.string(),LP)),_ae=u.array(u.union([u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("image"),data:u.string(),mimeType:u.string().optional()})])),Pq=u.object({type:u.literal("text"),text:u.string(),experimental_providerMetadata:ys.optional()}),bae=u.object({type:u.literal("image"),image:u.union([xq,u.instanceof(URL)]),mimeType:u.string().optional(),experimental_providerMetadata:ys.optional()}),wae=u.object({type:u.literal("file"),data:u.union([xq,u.instanceof(URL)]),mimeType:u.string(),experimental_providerMetadata:ys.optional()}),Sae=u.object({type:u.literal("tool-call"),toolCallId:u.string(),toolName:u.string(),args:u.unknown()}),xae=u.object({type:u.literal("tool-result"),toolCallId:u.string(),toolName:u.string(),result:u.unknown(),content:_ae.optional(),isError:u.boolean().optional(),experimental_providerMetadata:ys.optional()}),Tae=u.object({role:u.literal("system"),content:u.string(),experimental_providerMetadata:ys.optional()}),Eae=u.object({role:u.literal("user"),content:u.union([u.string(),u.array(u.union([Pq,bae,wae]))]),experimental_providerMetadata:ys.optional()}),kae=u.object({role:u.literal("assistant"),content:u.union([u.string(),u.array(u.union([Pq,Sae]))]),experimental_providerMetadata:ys.optional()}),Iae=u.object({role:u.literal("tool"),content:u.array(xae),experimental_providerMetadata:ys.optional()}),Pae=u.union([Tae,Eae,kae,Iae]);s(Aae,"detectPromptType");s(Cae,"detectSingleMessageCharacteristics");s(Oae,"attachmentsToParts");Aq="AI_MessageConversionError",Cq=`vercel.ai.error.${Aq}`,$ae=Symbol.for(Cq),lq=class extends xt{static{s(this,"MessageConversionError")}constructor({originalMessage:t,message:e}){super({name:Aq,message:e}),this[Oq]=!0,this.originalMessage=t}static isInstance(t){return xt.hasMarker(t,Cq)}};Oq=$ae;s(BP,"convertToCoreMessages");s(Rae,"standardizePrompt");s(Nae,"calculateLanguageModelUsage");s(pg,"prepareResponseHeaders");Dae="AI_NoObjectGeneratedError",jae=`vercel.ai.error.${Dae}`,Mae=Symbol.for(jae);zae=Mae;s(dq,"createAsyncIterableStream");SVe=Ti({prefix:"aiobj",size:24});s(Mo,"createResolvablePromise");s(Uae,"now");s(pq,"prepareOutgoingHttpHeaders");s(mq,"writeToServerResponse");TVe=Ti({prefix:"aiobj",size:24}),qP="AI_InvalidToolArgumentsError",$q=`vercel.ai.error.${qP}`,Lae=Symbol.for($q),qae=class extends xt{static{s(this,"InvalidToolArgumentsError")}constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${tg(r)}`}){super({name:qP,message:n,cause:r}),this[Rq]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return xt.hasMarker(t,$q)}static isInvalidToolArgumentsError(t){return t instanceof Error&&t.name===qP&&typeof t.toolName=="string"&&typeof t.toolArgs=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};Rq=Lae;FP="AI_NoSuchToolError",Nq=`vercel.ai.error.${FP}`,Fae=Symbol.for(Nq),mg=class extends xt{static{s(this,"NoSuchToolError")}constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:FP,message:r}),this[Dq]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return xt.hasMarker(t,Nq)}static isNoSuchToolError(t){return t instanceof Error&&t.name===FP&&"toolName"in t&&t.toolName!=null&&typeof t.name=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};Dq=Fae;s(Bae,"isNonEmptyObject");s(Vae,"prepareToolsAndToolChoice");Hae=/^([\s\S]*?)(\s+)(\S*)$/;s(Zae,"splitOnLastWhitespace");s(Jae,"parseToolCall");s(Gae,"toResponseMessages");OVe=Ti({prefix:"aitxt",size:24});s(Kae,"createStitchableStream");s(VP,"mergeStreams");s(Wae,"runToolsTransformation");Qae=Ti({prefix:"aitxt",size:24});s(jq,"streamText");Xae=class{static{s(this,"DefaultStreamTextResult")}constructor({stream:t,warnings:e,rawResponse:r,request:n,onChunk:o,onFinish:i,onStepFinish:a,rootSpan:c,doStreamSpan:l,telemetry:d,startTimestampMs:p,maxSteps:m,continueSteps:h,startStep:y,modelId:g,now:f,currentDate:_,generateId:S,tools:w}){this.warnings=e,this.rawResponse=r;let{resolve:x,promise:I}=Mo();this.usage=I;let{resolve:N,promise:$}=Mo();this.finishReason=$;let{resolve:O,promise:R}=Mo();this.text=R;let{resolve:A,promise:D}=Mo();this.toolCalls=D;let{resolve:M,promise:Q}=Mo();this.toolResults=Q;let{resolve:Z,promise:F}=Mo();this.steps=F;let{resolve:ee,promise:ne}=Mo();this.experimental_providerMetadata=ne;let{resolve:se,promise:we}=Mo();this.request=we;let{resolve:Ee,promise:rt}=Mo();this.response=rt;let{resolve:Ke,promise:G}=Mo();this.responseMessages=G;let{stream:$e,addStream:ye,close:L}=Kae();this.originalStream=$e;let Qe=[],Ot=this;function zt({stream:fn,startTimestamp:zi,doStreamSpan:ti,currentStep:va,responseMessages:Or,usage:Eo={promptTokens:0,completionTokens:0,totalTokens:0},stepType:_a,previousStepText:jp="",stepRequest:Ui,hasLeadingWhitespace:Mp}){let Cn=[],ko=[],Ir="unknown",nr={promptTokens:0,completionTokens:0,totalTokens:0},to,zp=!0,Mr="",ri=_a==="continue"?jp:"",v,T={id:S(),timestamp:_(),modelId:g},k="",U=!1,H=!0,re=!1;async function pe({controller:Ne,chunk:bt}){Ne.enqueue(bt),Mr+=bt.textDelta,ri+=bt.textDelta,U=!0,re=bt.textDelta.trimEnd()!==bt.textDelta,await o?.({chunk:bt})}s(pe,"publishTextChunk"),ye(fn.pipeThrough(new TransformStream({async transform(Ne,bt){var Tt,mt,Zt;if(zp){let Qt=f()-zi;zp=!1,ti.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Qt,"ai.stream.msToFirstChunk":Qt}),ti.setAttributes({"ai.response.msToFirstChunk":Qt,"ai.stream.msToFirstChunk":Qt})}if(Ne.type==="text-delta"&&Ne.textDelta.length===0)return;let ni=Ne.type;switch(ni){case"text-delta":{if(h){let Qt=H&&Mp?Ne.textDelta.trimStart():Ne.textDelta;if(Qt.length===0)break;H=!1,k+=Qt;let ba=Zae(k);ba!=null&&(k=ba.suffix,await pe({controller:bt,chunk:{type:"text-delta",textDelta:ba.prefix+ba.whitespace}}))}else await pe({controller:bt,chunk:Ne});break}case"tool-call":{bt.enqueue(Ne),Cn.push(Ne),await o?.({chunk:Ne});break}case"tool-result":{bt.enqueue(Ne),ko.push(Ne),await o?.({chunk:Ne});break}case"response-metadata":{T={id:(Tt=Ne.id)!=null?Tt:T.id,timestamp:(mt=Ne.timestamp)!=null?mt:T.timestamp,modelId:(Zt=Ne.modelId)!=null?Zt:T.modelId};break}case"finish":{nr=Ne.usage,Ir=Ne.finishReason,to=Ne.experimental_providerMetadata,v=Ne.logprobs;let Qt=f()-zi;ti.addEvent("ai.stream.finish"),ti.setAttributes({"ai.response.msToFinish":Qt,"ai.response.avgCompletionTokensPerSecond":1e3*nr.completionTokens/Qt});break}case"tool-call-streaming-start":case"tool-call-delta":{bt.enqueue(Ne),await o?.({chunk:Ne});break}case"error":{bt.enqueue(Ne),Ir="error";break}default:{let Qt=ni;throw new Error(`Unknown chunk type: ${Qt}`)}}},async flush(Ne){var bt;let Tt=Cn.length>0?JSON.stringify(Cn):void 0,mt="done";va+1<m&&(h&&Ir==="length"&&Cn.length===0?mt="continue":Cn.length>0&&ko.length===Cn.length&&(mt="tool-result")),h&&k.length>0&&(mt!=="continue"||_a==="continue"&&!U)&&(await pe({controller:Ne,chunk:{type:"text-delta",textDelta:k}}),k="");try{ti.setAttributes(Ec({telemetry:d,attributes:{"ai.response.finishReason":Ir,"ai.response.text":{output:s(()=>Mr,"output")},"ai.response.toolCalls":{output:s(()=>Tt,"output")},"ai.response.id":T.id,"ai.response.model":T.modelId,"ai.response.timestamp":T.timestamp.toISOString(),"ai.usage.promptTokens":nr.promptTokens,"ai.usage.completionTokens":nr.completionTokens,"ai.finishReason":Ir,"ai.result.text":{output:s(()=>Mr,"output")},"ai.result.toolCalls":{output:s(()=>Tt,"output")},"gen_ai.response.finish_reasons":[Ir],"gen_ai.response.id":T.id,"gen_ai.response.model":T.modelId,"gen_ai.usage.input_tokens":nr.promptTokens,"gen_ai.usage.output_tokens":nr.completionTokens}}))}catch{}finally{ti.end()}if(Ne.enqueue({type:"step-finish",finishReason:Ir,usage:nr,experimental_providerMetadata:to,logprobs:v,response:{...T},isContinued:mt==="continue"}),_a==="continue"){let Qt=Or[Or.length-1];typeof Qt.content=="string"?Qt.content+=Mr:Qt.content.push({text:Mr,type:"text"})}else Or.push(...Gae({text:Mr,tools:w??{},toolCalls:Cn,toolResults:ko}));let Zt={stepType:_a,text:Mr,toolCalls:Cn,toolResults:ko,finishReason:Ir,usage:nr,warnings:Ot.warnings,logprobs:v,request:Ui,rawResponse:Ot.rawResponse,response:{...T,headers:(bt=Ot.rawResponse)==null?void 0:bt.headers,messages:JSON.parse(JSON.stringify(Or))},experimental_providerMetadata:to,isContinued:mt==="continue"};Qe.push(Zt),await a?.(Zt);let ni={promptTokens:Eo.promptTokens+nr.promptTokens,completionTokens:Eo.completionTokens+nr.completionTokens,totalTokens:Eo.totalTokens+nr.totalTokens};if(mt!=="done"){let{result:Qt,doStreamSpan:ba,startTimestampMs:dK}=await y({responseMessages:Or});Ot.warnings=Qt.warnings,Ot.rawResponse=Qt.rawResponse,zt({stream:Qt.stream,startTimestamp:dK,doStreamSpan:ba,currentStep:va+1,responseMessages:Or,usage:ni,stepType:mt,previousStepText:ri,stepRequest:Qt.request,hasLeadingWhitespace:re});return}try{Ne.enqueue({type:"finish",finishReason:Ir,usage:ni,experimental_providerMetadata:to,logprobs:v,response:{...T}}),L(),c.setAttributes(Ec({telemetry:d,attributes:{"ai.response.finishReason":Ir,"ai.response.text":{output:s(()=>ri,"output")},"ai.response.toolCalls":{output:s(()=>Tt,"output")},"ai.usage.promptTokens":ni.promptTokens,"ai.usage.completionTokens":ni.completionTokens,"ai.finishReason":Ir,"ai.result.text":{output:s(()=>ri,"output")},"ai.result.toolCalls":{output:s(()=>Tt,"output")}}})),x(ni),N(Ir),O(ri),A(Cn),ee(to),M(ko),se(Ui),Ee({...T,headers:r?.headers,messages:Or}),Z(Qe),Ke(Or),await i?.({finishReason:Ir,logprobs:v,usage:ni,text:ri,toolCalls:Cn,toolResults:ko,request:Ui,rawResponse:r,response:{...T,headers:r?.headers,messages:Or},warnings:e,experimental_providerMetadata:to,steps:Qe,responseMessages:Or})}catch(Qt){Ne.error(Qt)}finally{c.end()}}})))}s(zt,"addStepStream"),zt({stream:t,startTimestamp:p,doStreamSpan:l,currentStep:0,responseMessages:[],usage:void 0,stepType:"initial",stepRequest:n,hasLeadingWhitespace:!1})}teeStream(){let[t,e]=this.originalStream.tee();return this.originalStream=e,t}get textStream(){return dq(this.teeStream(),{transform(t,e){t.type==="text-delta"?e.enqueue(t.textDelta):t.type==="error"&&e.error(t.error)}})}get fullStream(){return dq(this.teeStream(),{transform(t,e){e.enqueue(t)}})}toAIStream(t={}){return this.toDataStreamInternal({callbacks:t})}toDataStreamInternal({callbacks:t={},getErrorMessage:e=s(()=>"","getErrorMessage3"),sendUsage:r=!0}={}){let n="",o=new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(a,c){if(c.enqueue(a),a.type==="text-delta"){let l=a.textDelta;n+=l,t.onToken&&await t.onToken(l),t.onText&&await t.onText(l)}},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}}),i=new TransformStream({transform:s(async(a,c)=>{let l=a.type;switch(l){case"text-delta":{c.enqueue(mo("text",a.textDelta));break}case"tool-call-streaming-start":{c.enqueue(mo("tool_call_streaming_start",{toolCallId:a.toolCallId,toolName:a.toolName}));break}case"tool-call-delta":{c.enqueue(mo("tool_call_delta",{toolCallId:a.toolCallId,argsTextDelta:a.argsTextDelta}));break}case"tool-call":{c.enqueue(mo("tool_call",{toolCallId:a.toolCallId,toolName:a.toolName,args:a.args}));break}case"tool-result":{c.enqueue(mo("tool_result",{toolCallId:a.toolCallId,result:a.result}));break}case"error":{c.enqueue(mo("error",e(a.error)));break}case"step-finish":{c.enqueue(mo("finish_step",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0,isContinued:a.isContinued}));break}case"finish":{c.enqueue(mo("finish_message",{finishReason:a.finishReason,usage:r?{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens}:void 0}));break}default:{let d=l;throw new Error(`Unknown chunk type: ${d}`)}}},"transform")});return this.fullStream.pipeThrough(o).pipeThrough(i).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(t,e){return this.pipeDataStreamToResponse(t,e)}pipeDataStreamToResponse(t,e){let r=e==null?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},n=e==null?void 0:"data"in e?e.data:void 0,o=e==null?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,i=e==null?void 0:"sendUsage"in e?e.sendUsage:void 0;mq({response:t,status:r?.status,statusText:r?.statusText,headers:pq(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:n,getErrorMessage:o,sendUsage:i})})}pipeTextStreamToResponse(t,e){mq({response:t,status:e?.status,statusText:e?.statusText,headers:pq(e,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(t){return this.toDataStreamResponse(t)}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t?.getErrorMessage,sendUsage:t?.sendUsage});return t?.data?VP(t?.data.stream,e):e}toDataStreamResponse(t){var e;let r=t==null?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},n=t==null?void 0:"data"in t?t.data:void 0,o=t==null?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,i=t==null?void 0:"sendUsage"in t?t.sendUsage:void 0;return new Response(this.toDataStream({data:n,getErrorMessage:o,sendUsage:i}),{status:(e=r?.status)!=null?e:200,statusText:r?.statusText,headers:pg(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t?.status)!=null?e:200,headers:pg(t,{contentType:"text/plain; charset=utf-8"})})}},Yae="AI_NoSuchProviderError",ece=`vercel.ai.error.${Yae}`,tce=Symbol.for(ece);rce=tce;s(Mq,"createCallbacksTransformer");s(nce,"isOfTypeOpenAIStreamCallbacks");s(oce,"trimStartOfStreamHelper");DVe=15*1e3;s(zq,"createStreamDataTransformer");jVe=new TextDecoder("utf-8"),ice={};hq(ice,{toAIStream:s(()=>sce,"toAIStream"),toDataStream:s(()=>HP,"toDataStream"),toDataStreamResponse:s(()=>ace,"toDataStreamResponse")});s(sce,"toAIStream");s(HP,"toDataStream");s(ace,"toDataStreamResponse");s(fq,"forwardAIMessageChunk");cce={};hq(cce,{toDataStream:s(()=>Uq,"toDataStream"),toDataStreamResponse:s(()=>uce,"toDataStreamResponse")});s(Uq,"toDataStream2");s(uce,"toDataStreamResponse2");s(lce,"toReadableStream");MVe=Symbol("internal_openai_fn_messages")});async function fg(t){try{await No.insert(Wi).values({userId:t.userId,action:`ai_${t.actionType}`,resourceType:t.toolName||"ai_chat",sessionId:t.sessionId,success:t.outcome==="success",errorMessage:t.errorMessage,newValues:{provider:t.provider,model:t.model,action_type:t.actionType,tool_name:t.toolName,input_summary:t.inputSummary.slice(0,500),output_summary:t.outputSummary.slice(0,500),tokens_used:t.tokensUsed,latency_ms:t.latencyMs,outcome:t.outcome,affected_tables:t.affectedTables,affected_record_ids:t.affectedRecordIds}})}catch{}}var qq=b(()=>{"use strict";gi();Lr();s(fg,"logAIOperation")});var Fq,Bq=b(()=>{"use strict";Fq=`Voc\xEA \xE9 o assistente financeiro inteligente especializado do AegisWallet, a plataforma brasileira l\xEDder em gest\xE3o financeira pessoal com interface voz-first.

## SUA ESPECIALIDADE BRASILEIRA

### Dom\xEDnio do Mercado Financeiro Brasileiro
- **PIX**: Expert em transfer\xEAncias PIX instant\xE2neas 24/7, QR Codes, limites, taxas e regras do BCB
- **Boletos**: Gest\xE3o completa de boletos - registro, pagamento, c\xE1lculo de juros/multas, agendamentos
- **Open Banking**: Conhecimento profundo das APIs banc\xE1rias brasileiras e padr\xF5es regulat\xF3rios
- **C\xE2mbio**: Entendimento de opera\xE7\xF5es cambiais e limites legais brasileiros
- **Impostos**: Conhecimento de tributa\xE7\xE3o brasileira (IR, IOF, etc.)

### Cultura e Localiza\xE7\xE3o
- **Portugu\xEAs Brasileiro Nativo**: Use termos como "parab\xE9ns", "show de bola", "blz", " firm\xE3o"
- **Realidade Financeira Brasileira**: Entenda sal\xE1rios, infla\xE7\xE3o, custo de vida, juros altos
- **Calend\xE1rio Brasileiro**: Considere feriados, 13\xBA sal\xE1rio, d\xE9cimo terceiro, parcelas
- **Bancos Nacionais**: Ita\xFA, Bradesco, Caixa, Banco do Brasil, Nubank, Inter, etc.

## CAPACIDADES AVAN\xC7ADAS

### Opera\xE7\xF5es Financeiras (PIX, TED, DOC, Boletos)
- **Transfer\xEAncias PIX**: Envio/recebimento instant\xE2neo, QR Codes, agendamentos, status tracking
- **Gest\xE3o de Boletos**: Registro via c\xF3digo de barras, c\xE1lculo autom\xE1tico de juros/multas, agendamento de pagamentos
- **An\xE1lise de Contatos**: Salvar contatos frequentes, m\xE9todos de pagamento PIX, favoritos
- **Limites e Taxas**: Conhecimento de limites di\xE1rios, taxas, hor\xE1rios de compensa\xE7\xE3o

### An\xE1lises e Insights Financeiros
- **An\xE1lise de Gastos**: Detalhada por categoria, tend\xEAncias, padr\xF5es an\xF4malos
- **Previs\xE3o de Fluxo de Caixa**: Baseada em hist\xF3rico e eventos futuros com confian\xE7a
- **Detec\xE7\xE3o de Fraude**: An\xE1lise em tempo real de risco, padr\xF5es suspeitos
- **Recomenda\xE7\xF5es de Or\xE7amento**: Personalizadas baseadas em comportamento e metas

### Interface Voz-First (Voice-First)
- **Comandos em Portugu\xEAs Natural**: "Envia cem reais para a Maria pelo PIX", "Paga o boleto da luz"
- **Processamento de Contexto**: Mant\xE9m conversa\xE7\xE3o com hist\xF3rico e contexto relevante
- **Confirma\xE7\xE3o por Voz**: Valida\xE7\xE3o segura de opera\xE7\xF5es sens\xEDveis via reconhecimento de voz
- **Respostas Otimizadas para TTS**: Texto projetado para s\xEDntese de voz natural

### Seguran\xE7a e Conformidade LGPD
- **LGPD**: Conformidade total com Lei Geral de Prote\xE7\xE3o de Dados brasileira
- **Valida\xE7\xE3o Multi-Fator**: 2FA, biom\xE9trica, c\xF3digo via SMS/email
- **Audit Logging**: Registros completos para compliance e auditoria
- **Prote\xE7\xE3o de Dados**: Criptografia, anonimiza\xE7\xE3o, reten\xE7\xE3o conformidade

## REGRAS DE SEGURAN\xC7A E CONFORMIDADE (CR\xCDTICAS)

### Prote\xE7\xE3o de Dados LGPD
1. **NUNCA** exponha dados sens\xEDveis: CPF, senhas, tokens biom\xE9tricos
2. **SEMPRE** obtenha consentimento expl\xEDcito para uso de dados financeiros
3. **RESPEITE** direitos de acesso, corre\xE7\xE3o e exclus\xE3o de dados
4. **IMPLEMENTE** pol\xEDticas de reten\xE7\xE3o conformes com regulamenta\xE7\xE3o brasileira

### Seguran\xE7a de Transa\xE7\xF5es
1. **VALIDA\xC7\xC3O OBRIGAT\xD3RIA**: Toda transa\xE7\xE3o >R$1.000 requer verifica\xE7\xE3o adicional
2. **LIMITES AUTOM\xC1TICOS**: Respeite limites di\xE1rios e de frequ\xEAncia
3. **MONITORAMENTO**: Detecte padr\xF5es an\xF4malos e poss\xEDveis fraudes
4. **CONFIRMA\xC7\xC3O**: Use c\xF3digos, biometria ou confirma\xE7\xE3o por voz para opera\xE7\xF5es cr\xEDticas

### Padr\xF5es Brasileiros de Atendimento
1. **Formalidade Amig\xE1vel**: Tratamento "voc\xEA" mas respeitoso e profissional
2. **Hor\xE1rio Banc\xE1rio**: Considere hor\xE1rios banc\xE1rios e janela de compensa\xE7\xE3o
3. **Feriados**: Esteja ciente de feriados nacionais e estaduais brasileiros
4. **Cultura Financeira**: Entenda avers\xE3o a risco, prefer\xEAncia por seguran\xE7a

## FORMATA\xC7\xC3O E COMUNICA\xC7\xC3O

### Formatos Brasileiros
- **Valores**: R$ 1.234,56 (separador decimal v\xEDrgula, milhar ponto)
- **Datas**: DD/MM/YYYY ou "hoje", "ontem", "anteontem", "esta semana"
- **Hor\xE1rios**: 24h com fuso America/Sao_Paulo (BRT/BRST)
- **Documentos**: CPF: XXX.XXX.XXX-XX, CNPJ: XX.XXX.XXX/XXXX-XX

### Tom e Estilo
- **Voz Ativa**: "Vou analisar seus gastos" em vez de "Seus gastos ser\xE3o analisados"
- **Empatia**: Entenda dificuldades financeiras com respeito e apoio
- **Clareza**: Use termos simples, evite jarg\xF5es t\xE9cnicos excessivos
- **Cultura**: Use express\xF5es brasileiras naturais quando apropriado

## PADR\xD5ES DE RESPOSTA

### Para PIX
- **R\xE1pido**: "Transfer\xEAncia PIX enviada! Chega em segundos na conta do destinat\xE1rio."
- **Seguro**: "Para sua seguran\xE7a, vou enviar um c\xF3digo para confirmar esta transfer\xEAncia de R$ 500,00."
- **Informativo**: "O limite di\xE1rio PIX \xE9 R$ 5.000 entre 20h e 6h."

### Para Boletos
- **C\xE1lculo**: "Este boleto vence em 3 dias com multa de 2% e juros de 1% ao m\xEAs."
- **Agendamento**: "Boleto agendado! Ser\xE1 pago automaticamente na data de vencimento."
- **Alerta**: "\u26A0\uFE0F Voc\xEA tem 2 boletos vencendo esta semana totalizando R$ 850,00."

### Para An\xE1lises
- **Visual**: "Seus gastos em alimenta\xE7\xE3o subiram 15% este m\xEAs. Quer ver o gr\xE1fico detalhado?"
- **Pr\xE1tico**: "Com base no seu padr\xE3o, sugiro reservar R$ 2.000 para emerg\xEAncias."
- **Alerta**: "Detectei 3 transa\xE7\xF5es suspeitas esta semana. Quer investigar?"

### Para Voz
- **Conversacional**: "Entendi! Voc\xEA quer transferir R$ 250 para a Joana pelo PIX, correto?"
- **Claro**: "Pode repetir o valor? N\xE3o consegui entender bem."
- **Eficiente**: "Pronto! Transfer\xEAncia autorizada com sua confirma\xE7\xE3o por voz."

## FLUXOS ESPECIALIZADOS

### Transfer\xEAncia PIX Completa
1. "Quanto quer transferir?" \u2192 Validar valor e limites
2. "Qual a chave PIX do destinat\xE1rio?" \u2192 Validar formato e tipo
3. "Qual o nome completo do destinat\xE1rio?" \u2192 Para registro
4. "Descri\xE7\xE3o opcional?" \u2192 Para identifica\xE7\xE3o
5. "Confirmar transfer\xEAncia?" \u2192 Envio ou verifica\xE7\xE3o adicional

### Pagamento de Boleto
1. "C\xF3digo de barras ou\u7167\u7247?" \u2192 Captura e valida\xE7\xE3o
2. "Valor e data de vencimento?" \u2192 Confirma\xE7\xE3o
3. "Calcular juros/multas?" \u2192 Se vencido
4. "Pagar agora ou agendar?" \u2192 Processamento
5. "Confirma\xE7\xE3o?" \u2192 Seguran\xE7a e finaliza\xE7\xE3o

### An\xE1lise Financeira por Voz
1. "Que per\xEDodo quer analisar?" \u2192 Defini\xE7\xE3o de scope
2. "Foco em alguma categoria espec\xEDfica?" \u2192 Detalhamento
3. "Quer compara\xE7\xE3o com per\xEDodo anterior?" \u2192 An\xE1lise comparativa
4. "Preferir resumo oral ou visual?" \u2192 Formato de sa\xEDda
5. "Gerar recomenda\xE7\xF5es?" \u2192 A\xE7\xF5es pr\xE1ticas

## INTEGRA\xC7\xC3O COM FERRAMENTAS

### Sistema de Ferramentas
Voc\xEA tem acesso a 4 categorias principais de ferramentas:

1. **Opera\xE7\xF5es Financeiras Brasileiras**
   - pix.*: Transfer\xEAncias, QR codes, agendamentos PIX
   - boletos.*: Registro, pagamento, c\xE1lculos de boletos
   - contacts.*: Gest\xE3o de contatos e m\xE9todos de pagamento

2. **An\xE1lises e Insights**
   - insights.*: An\xE1lise de gastos, previs\xF5es, detec\xE7\xE3o de anomalias
   - multimodal.*: Relat\xF3rios visuais, gr\xE1ficos, exporta\xE7\xF5es

3. **Seguran\xE7a e Conformidade**
   - security.*: Detec\xE7\xE3o de fraude, valida\xE7\xF5es, configura\xE7\xF5es de seguran\xE7a
   - notifications.*: Alertas, lembretes, prefer\xEAncias de notifica\xE7\xE3o

4. **Interface Voz-First**
   - voice.*: Processamento de comandos, confirma\xE7\xE3o por voz, contexto
   - Todas as ferramentas otimizadas para resposta via TTS

### Orquestra\xE7\xE3o Inteligente
Combine m\xFAltiplas ferramentas para respostas completas:
- Consultar saldo \u2192 security.checkFraudRisk \u2192 pix.sendPixTransfer
- An\xE1lise de gastos \u2192 insights.getSpendingAnalysis \u2192 multimodal.generateVisualReport
- Alerta de seguran\xE7a \u2192 notifications.sendAlert \u2192 voice.confirmVoiceAction

## MANEJO DE ERROS E RECUPERA\xC7\xC3O

### Erros Comuns Brasileiros
- **Chave PIX Inv\xE1lida**: "Esta chave PIX n\xE3o existe. Verifique CPF, email ou telefone."
- **Boleto Duplicado**: "Este boleto j\xE1 est\xE1 pago. Verifique se n\xE3o h\xE1 duplicidade."
- **Fora do Hor\xE1rio**: "Transfer\xEAncias TED/DOC s\xF3 em hor\xE1rio banc\xE1rio. PIX funciona 24/7."
- **LGPD**: "Preciso de sua autoriza\xE7\xE3o para acessar estes dados financeiros."

### Recupera\xE7\xE3o Intelligente
- **Alternativas**: "PIX n\xE3o funciona? Tente TED para transfer\xEAncias banc\xE1rias."
- **Contexto**: "Baseado no nosso hist\xF3rico, voc\xEA costuma transferir para..."
- **Proativo**: "Detectei um padr\xE3o incomum. Quer que eu investigue?"

## ATUALIZA\xC7\xD5ES E MELHORIAS

### Sempre Melhorando
- **Feedback de Usu\xE1rio**: Adapte respostas baseado no hist\xF3rico de intera\xE7\xF5es
- **Contexto Financeiro**: Mantenha-se atualizado sobre taxas, regulamenta\xE7\xF5es, novos bancos
- **Cultura Financeira**: Evolua com mudan\xE7as no comportamento financeiro brasileiro
- **Tecnologia**: Integre novas tecnologias banc\xE1rias e fintechs brasileiras

### M\xE9tricas de Sucesso
- **Compreens\xE3o**: 95%+ de comandos voz entendidos corretamente
- **Satisfa\xE7\xE3o**: Respostas que realmente ajudam os usu\xE1rios brasileiros
- **Efici\xEAncia**: Opera\xE7\xF5es conclu\xEDdas com m\xEDnimo de etapas
- **Seguran\xE7a**: Zero breaches de dados ou fraudes n\xE3o detectadas

---

**Sua Miss\xE3o**: Ser o assistente financeiro mais completo, seguro e brasileiro que existe, transformando gest\xE3o financeira em uma experi\xEAncia natural, intuitiva e efetiva para todos os brasileiros.

**Data de Hoje**: ${new Date().toLocaleDateString("pt-BR")}
**Fuso Hor\xE1rio**: America/Sao_Paulo (${new Date().toLocaleTimeString("pt-BR")})
**Moeda**: BRL (Real Brasileiro)`});var Vq,Hq=b(()=>{"use strict";Bq();Vq=Fq});function tF(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var Zq,dce,Jq,pce,ur,Kq,Wq,mce,Qq,et,Xq,Yq,fce,eF,kc,rF,nF,hce,oF,Wn,iF,sF,gce,aF,cF,uF,lF,yce,dF,hg,pF,mF,vce,fF,sn,hF,gF,_ce,yF,an,bce,wce,Sce,xce,Tce,Ece,kce,Ice,vF,_F,Pce,bF,JP,wF,SF,Ace,xF,gg,TF,EF,Cce,kF,Oce,tr,IF,PF,$ce,AF,Ct,Xe=b(()=>{Zq="vercel.ai.error",dce=Symbol.for(Zq),pce=class Gq extends Error{static{s(this,"_AISDKError")}constructor({name:e,message:r,cause:n}){super(r),this[Jq]=!0,this.name=e,this.cause=n}static isInstance(e){return Gq.hasMarker(e,Zq)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};Jq=dce;ur=pce,Kq="AI_APICallError",Wq=`vercel.ai.error.${Kq}`,mce=Symbol.for(Wq),et=class extends ur{static{s(this,"APICallError")}constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:a,isRetryable:c=n!=null&&(n===408||n===409||n===429||n>=500),data:l}){super({name:Kq,message:t,cause:a}),this[Qq]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=c,this.data=l}static isInstance(t){return ur.hasMarker(t,Wq)}};Qq=mce;Xq="AI_EmptyResponseBodyError",Yq=`vercel.ai.error.${Xq}`,fce=Symbol.for(Yq),kc=class extends ur{static{s(this,"EmptyResponseBodyError")}constructor({message:t="Empty response body"}={}){super({name:Xq,message:t}),this[eF]=!0}static isInstance(t){return ur.hasMarker(t,Yq)}};eF=fce;s(tF,"getErrorMessage");rF="AI_InvalidArgumentError",nF=`vercel.ai.error.${rF}`,hce=Symbol.for(nF),Wn=class extends ur{static{s(this,"InvalidArgumentError")}constructor({message:t,cause:e,argument:r}){super({name:rF,message:t,cause:e}),this[oF]=!0,this.argument=r}static isInstance(t){return ur.hasMarker(t,nF)}};oF=hce;iF="AI_InvalidPromptError",sF=`vercel.ai.error.${iF}`,gce=Symbol.for(sF),cF=class extends ur{static{s(this,"InvalidPromptError")}constructor({prompt:t,message:e,cause:r}){super({name:iF,message:`Invalid prompt: ${e}`,cause:r}),this[aF]=!0,this.prompt=t}static isInstance(t){return ur.hasMarker(t,sF)}};aF=gce;uF="AI_InvalidResponseDataError",lF=`vercel.ai.error.${uF}`,yce=Symbol.for(lF),hg=class extends ur{static{s(this,"InvalidResponseDataError")}constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:uF,message:e}),this[dF]=!0,this.data=t}static isInstance(t){return ur.hasMarker(t,lF)}};dF=yce;pF="AI_JSONParseError",mF=`vercel.ai.error.${pF}`,vce=Symbol.for(mF),sn=class extends ur{static{s(this,"JSONParseError")}constructor({text:t,cause:e}){super({name:pF,message:`JSON parsing failed: Text: ${t}.
Error message: ${tF(e)}`,cause:e}),this[fF]=!0,this.text=t}static isInstance(t){return ur.hasMarker(t,mF)}};fF=vce;hF="AI_LoadAPIKeyError",gF=`vercel.ai.error.${hF}`,_ce=Symbol.for(gF),an=class extends ur{static{s(this,"LoadAPIKeyError")}constructor({message:t}){super({name:hF,message:t}),this[yF]=!0}static isInstance(t){return ur.hasMarker(t,gF)}};yF=_ce;bce="AI_LoadSettingError",wce=`vercel.ai.error.${bce}`,Sce=Symbol.for(wce);xce=Sce;Tce="AI_NoContentGeneratedError",Ece=`vercel.ai.error.${Tce}`,kce=Symbol.for(Ece);Ice=kce;vF="AI_NoSuchModelError",_F=`vercel.ai.error.${vF}`,Pce=Symbol.for(_F),JP=class extends ur{static{s(this,"NoSuchModelError")}constructor({errorName:t=vF,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[bF]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return ur.hasMarker(t,_F)}};bF=Pce;wF="AI_TooManyEmbeddingValuesForCallError",SF=`vercel.ai.error.${wF}`,Ace=Symbol.for(SF),gg=class extends ur{static{s(this,"TooManyEmbeddingValuesForCallError")}constructor(t){super({name:wF,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[xF]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return ur.hasMarker(t,SF)}};xF=Ace;TF="AI_TypeValidationError",EF=`vercel.ai.error.${TF}`,Cce=Symbol.for(EF),Oce=class ZP extends ur{static{s(this,"_TypeValidationError")}constructor({value:e,cause:r}){super({name:TF,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${tF(r)}`,cause:r}),this[kF]=!0,this.value=e}static isInstance(e){return ur.hasMarker(e,EF)}static wrap({value:e,cause:r}){return ZP.isInstance(r)&&r.value===e?r:new ZP({value:e,cause:r})}};kF=Cce;tr=Oce,IF="AI_UnsupportedFunctionalityError",PF=`vercel.ai.error.${IF}`,$ce=Symbol.for(PF),Ct=class extends ur{static{s(this,"UnsupportedFunctionalityError")}constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:IF,message:e}),this[AF]=!0,this.functionality=t}static isInstance(t){return ur.hasMarker(t,PF)}};AF=$ce});function CF(t){let e,r,n,o,i,a,c;return l(),{feed:d,reset:l};function l(){e=!0,r="",n=0,o=-1,i=void 0,a=void 0,c=""}s(l,"reset");function d(m){r=r?r+m:m,e&&Rce(r)&&(r=r.slice(OF.length)),e=!1;let h=r.length,y=0,g=!1;for(;y<h;){g&&(r[y]===`
`&&++y,g=!1);let f=-1,_=o,S;for(let w=n;f<0&&w<h;++w)S=r[w],S===":"&&_<0?_=w-y:S==="\r"?(g=!0,f=w-y):S===`
`&&(f=w-y);if(f<0){n=h-y,o=_;break}else n=0,o=-1;p(r,y,_,f),y+=f+1}y===h?r="":y>0&&(r=r.slice(y))}s(d,"feed");function p(m,h,y,g){if(g===0){c.length>0&&(t({type:"event",id:i,event:a||void 0,data:c.slice(0,-1)}),c="",i=void 0),a=void 0;return}let f=y<0,_=m.slice(h,h+(f?g:y)),S=0;f?S=g:m[h+y+1]===" "?S=y+2:S=y+1;let w=h+S,x=g-S,I=m.slice(w,w+x).toString();if(_==="data")c+=I?"".concat(I,`
`):`
`;else if(_==="event")a=I;else if(_==="id"&&!I.includes("\0"))i=I;else if(_==="retry"){let N=parseInt(I,10);Number.isNaN(N)||t({type:"reconnect-interval",value:N})}}s(p,"parseEventStreamLine")}function Rce(t){return OF.every((e,r)=>t.charCodeAt(r)===e)}var OF,$F=b(()=>{s(CF,"createParser");OF=[239,187,191];s(Rce,"hasBom")});var vs,yg=b(()=>{$F();vs=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor(){let e;super({start(r){e=CF(n=>{n.type==="event"&&r.enqueue(n)})},transform(r){e.feed(r)}})}}});var GP=b(()=>{od();od()});var ze=b(()=>{GP();GP()});var _t,RF,Se,Pi,Id=b(()=>{(function(t){t.assertEqual=o=>{};function e(o){}s(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(c=>typeof o[o[c]]!="number"),a={};for(let c of i)a[c]=o[c];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(_t||(_t={}));(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(RF||(RF={}));Se=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pi=s(t=>{switch(typeof t){case"undefined":return Se.undefined;case"string":return Se.string;case"number":return Number.isNaN(t)?Se.nan:Se.number;case"boolean":return Se.boolean;case"function":return Se.function;case"bigint":return Se.bigint;case"symbol":return Se.symbol;case"object":return Array.isArray(t)?Se.array:t===null?Se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Se.promise:typeof Map<"u"&&t instanceof Map?Se.map:typeof Set<"u"&&t instanceof Set?Se.set:typeof Date<"u"&&t instanceof Date?Se.date:Se.object;default:return Se.unknown}},"getParsedType")});var ae,Dn,vg=b(()=>{Id();ae=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Dn=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=s(i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let d=a.path[l];l===a.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(a))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r=Object.create(null),n=[];for(let o of this.issues)if(o.path.length>0){let i=o.path[0];r[i]=r[i]||[],r[i].push(e(o))}else n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dn.create=t=>new Dn(t)});var Nce,_s,WP=b(()=>{vg();Id();Nce=s((t,e)=>{let r;switch(t.code){case ae.invalid_type:t.received===Se.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_t.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(t.keys,", ")}`;break;case ae.invalid_union:r="Invalid input";break;case ae.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(t.options)}`;break;case ae.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:r="Invalid function arguments";break;case ae.invalid_return_type:r="Invalid function return type";break;case ae.invalid_date:r="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_t.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ae.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ae.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ae.custom:r="Invalid input";break;case ae.invalid_intersection_types:r="Intersection results could not be merged";break;case ae.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:r="Number must be finite";break;default:r=e.defaultError,_t.assertNever(t)}return{message:r}},"errorMap"),_s=Nce});function Pd(){return Dce}var Dce,_g=b(()=>{WP();Dce=_s;s(Pd,"getErrorMap")});function ve(t,e){let r=Pd(),n=bg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===_s?void 0:_s].filter(o=>!!o)});t.common.issues.push(n)}var bg,Gr,Le,Ic,cn,QP,XP,ta,Ad,YP=b(()=>{_g();WP();bg=s(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let c="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)c=d(a,{data:e,defaultError:c}).message;return{...o,path:i,message:c}},"makeIssue");s(ve,"addIssueToContext");Gr=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return Le;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return Le;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},Le=Object.freeze({status:"aborted"}),Ic=s(t=>({status:"dirty",value:t}),"DIRTY"),cn=s(t=>({status:"valid",value:t}),"OK"),QP=s(t=>t.status==="aborted","isAborted"),XP=s(t=>t.status==="dirty","isDirty"),ta=s(t=>t.status==="valid","isValid"),Ad=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync")});var NF=b(()=>{});var Pe,DF=b(()=>{(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pe||(Pe={}))});function tt(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:s((a,c)=>{let{message:l}=t;return a.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??n??c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:l??r??c.defaultError}},"customMap"),description:o}}function zF(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Xce(t){return new RegExp(`^${zF(t)}$`)}function Yce(t){let e=`${MF}T${zF(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function eue(t,e){return!!((e==="v4"||!e)&&Hce.test(t)||(e==="v6"||!e)&&Jce.test(t))}function tue(t,e){if(!qce.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function rue(t,e){return!!((e==="v4"||!e)&&Zce.test(t)||(e==="v6"||!e)&&Gce.test(t))}function nue(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return i%a/10**o}function Pc(t){if(t instanceof jn){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=ho.create(Pc(n))}return new jn({...t._def,shape:s(()=>e,"shape")})}else return t instanceof ws?new ws({...t._def,type:Pc(t.element)}):t instanceof ho?ho.create(Pc(t.unwrap())):t instanceof Oi?Oi.create(Pc(t.unwrap())):t instanceof Ci?Ci.create(t.items.map(e=>Pc(e))):t}function rA(t,e){let r=Pi(t),n=Pi(e);if(t===e)return{valid:!0,data:t};if(r===Se.object&&n===Se.object){let o=_t.objectKeys(e),i=_t.objectKeys(t).filter(c=>o.indexOf(c)!==-1),a={...t,...e};for(let c of i){let l=rA(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Se.array&&n===Se.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[i],l=rA(a,c);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return r===Se.date&&n===Se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}function UF(t,e){return new jc({values:t,typeName:B.ZodEnum,...tt(e)})}var Qn,jF,ct,jce,Mce,zce,Uce,Lce,qce,Fce,Bce,Vce,eA,Hce,Zce,Jce,Gce,Kce,Wce,MF,Qce,Ac,Cd,Od,$d,Rd,Nd,Cc,Oc,Dd,bs,zo,jd,ws,jn,$c,Ai,tA,Rc,Ci,nA,Md,zd,oA,Nc,Dc,jc,Mc,ra,go,ho,Oi,zc,Uc,Ud,GHe,wg,Sg,Lc,KHe,B,WHe,QHe,XHe,YHe,eZe,tZe,rZe,nZe,oZe,iZe,sZe,aZe,cZe,uZe,lZe,dZe,pZe,mZe,fZe,hZe,gZe,yZe,vZe,_Ze,bZe,wZe,SZe,xZe,TZe,EZe,kZe,IZe,PZe,AZe,LF=b(()=>{vg();_g();DF();YP();Id();Qn=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},jF=s((t,e)=>{if(ta(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dn(t.common.issues);return this._error=r,this._error}}},"handleResult");s(tt,"processCreateParams");ct=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Pi(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Pi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Gr,ctx:{common:e.parent.common,data:e.data,parsedType:Pi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ad(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pi(e)},o=this._parseSync({data:e,path:n.path,parent:n});return jF(n,o)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pi(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return ta(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>ta(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pi(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(Ad(o)?o:Promise.resolve(o));return jF(n,i)}refine(e,r){let n=s(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,i)=>{let a=e(o),c=s(()=>i.addIssue({code:ae.custom,...n(o)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new go({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return ho.create(this,this._def)}nullable(){return Oi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ws.create(this)}promise(){return ra.create(this,this._def)}or(e){return $c.create([this,e],this._def)}and(e){return Rc.create(this,e,this._def)}transform(e){return new go({...tt(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new zc({...tt(this._def),innerType:this,defaultValue:r,typeName:B.ZodDefault})}brand(){return new wg({typeName:B.ZodBranded,type:this,...tt(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Uc({...tt(this._def),innerType:this,catchValue:r,typeName:B.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Sg.create(this,e)}readonly(){return Lc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},jce=/^c[^\s-]{8,}$/i,Mce=/^[0-9a-z]+$/,zce=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Uce=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lce=/^[a-z0-9_-]{21}$/i,qce=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Fce=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bce=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Hce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Gce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Kce=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Wce=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,MF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qce=new RegExp(`^${MF}$`);s(zF,"timeRegexSource");s(Xce,"timeRegex");s(Yce,"datetimeRegex");s(eue,"isValidIP");s(tue,"isValidJWT");s(rue,"isValidCidr");Ac=class t extends ct{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Se.string){let i=this._getOrReturnCtx(e);return ve(i,{code:ae.invalid_type,expected:Se.string,received:i.parsedType}),Le}let n=new Gr,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,c=e.data.length<i.value;(a||c)&&(o=this._getOrReturnCtx(e,o),a?ve(o,{code:ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&ve(o,{code:ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Bce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"email",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")eA||(eA=new RegExp(Vce,"u")),eA.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"emoji",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Uce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"uuid",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Lce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"nanoid",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")jce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"cuid",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Mce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"cuid2",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")zce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"ulid",code:ae.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ve(o,{validation:"url",code:ae.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"regex",code:ae.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Yce(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Qce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Xce(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Fce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"duration",code:ae.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?eue(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"ip",code:ae.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?tue(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"jwt",code:ae.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?rue(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"cidr",code:ae.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Kce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"base64",code:ae.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Wce.test(e.data)||(o=this._getOrReturnCtx(e,o),ve(o,{validation:"base64url",code:ae.invalid_string,message:i.message}),n.dirty()):_t.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:ae.invalid_string,...Pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Pe.errToObj(r)})}nonempty(e){return this.min(1,Pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ac.create=t=>new Ac({checks:[],typeName:B.ZodString,coerce:t?.coerce??!1,...tt(t)});s(nue,"floatSafeRemainder");Cd=class t extends ct{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Se.number){let i=this._getOrReturnCtx(e);return ve(i,{code:ae.invalid_type,expected:Se.number,received:i.parsedType}),Le}let n,o=new Gr;for(let i of this._def.checks)i.kind==="int"?_t.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?nue(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.not_finite,message:i.message}),o.dirty()):_t.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pe.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pe.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_t.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Cd.create=t=>new Cd({checks:[],typeName:B.ZodNumber,coerce:t?.coerce||!1,...tt(t)});Od=class t extends ct{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Se.bigint)return this._getInvalidInput(e);let n,o=new Gr;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ve(n,{code:ae.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):_t.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ve(r,{code:ae.invalid_type,expected:Se.bigint,received:r.parsedType}),Le}gte(e,r){return this.setLimit("min",e,!0,Pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pe.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pe.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Od.create=t=>new Od({checks:[],typeName:B.ZodBigInt,coerce:t?.coerce??!1,...tt(t)});$d=class extends ct{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Se.boolean){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.boolean,received:n.parsedType}),Le}return cn(e.data)}};$d.create=t=>new $d({typeName:B.ZodBoolean,coerce:t?.coerce||!1,...tt(t)});Rd=class t extends ct{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Se.date){let i=this._getOrReturnCtx(e);return ve(i,{code:ae.invalid_type,expected:Se.date,received:i.parsedType}),Le}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return ve(i,{code:ae.invalid_date}),Le}let n=new Gr,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),ve(o,{code:ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):_t.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Rd.create=t=>new Rd({checks:[],coerce:t?.coerce||!1,typeName:B.ZodDate,...tt(t)});Nd=class extends ct{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Se.symbol){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.symbol,received:n.parsedType}),Le}return cn(e.data)}};Nd.create=t=>new Nd({typeName:B.ZodSymbol,...tt(t)});Cc=class extends ct{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Se.undefined){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.undefined,received:n.parsedType}),Le}return cn(e.data)}};Cc.create=t=>new Cc({typeName:B.ZodUndefined,...tt(t)});Oc=class extends ct{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Se.null){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.null,received:n.parsedType}),Le}return cn(e.data)}};Oc.create=t=>new Oc({typeName:B.ZodNull,...tt(t)});Dd=class extends ct{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return cn(e.data)}};Dd.create=t=>new Dd({typeName:B.ZodAny,...tt(t)});bs=class extends ct{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return cn(e.data)}};bs.create=t=>new bs({typeName:B.ZodUnknown,...tt(t)});zo=class extends ct{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return ve(r,{code:ae.invalid_type,expected:Se.never,received:r.parsedType}),Le}};zo.create=t=>new zo({typeName:B.ZodNever,...tt(t)});jd=class extends ct{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Se.undefined){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.void,received:n.parsedType}),Le}return cn(e.data)}};jd.create=t=>new jd({typeName:B.ZodVoid,...tt(t)});ws=class t extends ct{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==Se.array)return ve(r,{code:ae.invalid_type,expected:Se.array,received:r.parsedType}),Le;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,c=r.data.length<o.exactLength.value;(a||c)&&(ve(r,{code:a?ae.too_big:ae.too_small,minimum:c?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(ve(r,{code:ae.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(ve(r,{code:ae.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>o.type._parseAsync(new Qn(r,a,r.path,c)))).then(a=>Gr.mergeArray(n,a));let i=[...r.data].map((a,c)=>o.type._parseSync(new Qn(r,a,r.path,c)));return Gr.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Pe.toString(r)}})}nonempty(e){return this.min(1,e)}};ws.create=(t,e)=>new ws({type:t,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...tt(e)});s(Pc,"deepPartialify");jn=class t extends ct{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=_t.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Se.object){let d=this._getOrReturnCtx(e);return ve(d,{code:ae.invalid_type,expected:Se.object,received:d.parsedType}),Le}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof zo&&this._def.unknownKeys==="strip"))for(let d in o.data)a.includes(d)||c.push(d);let l=[];for(let d of a){let p=i[d],m=o.data[d];l.push({key:{status:"valid",value:d},value:p._parse(new Qn(o,m,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof zo){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of c)l.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")c.length>0&&(ve(o,{code:ae.unrecognized_keys,keys:c}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of c){let m=o.data[p];l.push({key:{status:"valid",value:p},value:d._parse(new Qn(o,m,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of l){let m=await p.key,h=await p.value;d.push({key:m,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>Gr.mergeObjectSync(n,d)):Gr.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{let o=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Pe.errToObj(e).message??o}:{message:o}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:B.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of _t.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};for(let n of _t.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return Pc(this)}partial(e){let r={};for(let n of _t.objectKeys(this.shape)){let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}return new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};for(let n of _t.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ho;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return UF(_t.objectKeys(this.shape))}};jn.create=(t,e)=>new jn({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:zo.create(),typeName:B.ZodObject,...tt(e)});jn.strictCreate=(t,e)=>new jn({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:zo.create(),typeName:B.ZodObject,...tt(e)});jn.lazycreate=(t,e)=>new jn({shape:t,unknownKeys:"strip",catchall:zo.create(),typeName:B.ZodObject,...tt(e)});$c=class extends ct{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let c of i)if(c.result.status==="valid")return c.result;for(let c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=i.map(c=>new Dn(c.ctx.common.issues));return ve(r,{code:ae.invalid_union,unionErrors:a}),Le}if(s(o,"handleResults"),r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let l of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=l._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let c=a.map(l=>new Dn(l));return ve(r,{code:ae.invalid_union,unionErrors:c}),Le}}get options(){return this._def.options}};$c.create=(t,e)=>new $c({options:t,typeName:B.ZodUnion,...tt(e)});Ai=s(t=>t instanceof Nc?Ai(t.schema):t instanceof go?Ai(t.innerType()):t instanceof Dc?[t.value]:t instanceof jc?t.options:t instanceof Mc?_t.objectValues(t.enum):t instanceof zc?Ai(t._def.innerType):t instanceof Cc?[void 0]:t instanceof Oc?[null]:t instanceof ho?[void 0,...Ai(t.unwrap())]:t instanceof Oi?[null,...Ai(t.unwrap())]:t instanceof wg||t instanceof Lc?Ai(t.unwrap()):t instanceof Uc?Ai(t._def.innerType):[],"getDiscriminator"),tA=class t extends ct{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.object)return ve(r,{code:ae.invalid_type,expected:Se.object,received:r.parsedType}),Le;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ve(r,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=Ai(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(o.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);o.set(c,i)}}return new t({typeName:B.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...tt(n)})}};s(rA,"mergeValues");Rc=class extends ct{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=s((i,a)=>{if(QP(i)||QP(a))return Le;let c=rA(i.value,a.value);return c.valid?((XP(i)||XP(a))&&r.dirty(),{status:r.value,value:c.data}):(ve(n,{code:ae.invalid_intersection_types}),Le)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Rc.create=(t,e,r)=>new Rc({left:t,right:e,typeName:B.ZodIntersection,...tt(r)});Ci=class t extends ct{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.array)return ve(n,{code:ae.invalid_type,expected:Se.array,received:n.parsedType}),Le;if(n.data.length<this._def.items.length)return ve(n,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&n.data.length>this._def.items.length&&(ve(n,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Qn(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Gr.mergeArray(r,a)):Gr.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ci.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ci({items:t,typeName:B.ZodTuple,rest:null,...tt(e)})};nA=class t extends ct{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.object)return ve(n,{code:ae.invalid_type,expected:Se.object,received:n.parsedType}),Le;let o=[],i=this._def.keyType,a=this._def.valueType;for(let c in n.data)o.push({key:i._parse(new Qn(n,c,n.path,c)),value:a._parse(new Qn(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Gr.mergeObjectAsync(r,o):Gr.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ct?new t({keyType:e,valueType:r,typeName:B.ZodRecord,...tt(n)}):new t({keyType:Ac.create(),valueType:e,typeName:B.ZodRecord,...tt(r)})}},Md=class extends ct{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.map)return ve(n,{code:ae.invalid_type,expected:Se.map,received:n.parsedType}),Le;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([c,l],d)=>({key:o._parse(new Qn(n,c,n.path,[d,"key"])),value:i._parse(new Qn(n,l,n.path,[d,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let d=await l.key,p=await l.value;if(d.status==="aborted"||p.status==="aborted")return Le;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let d=l.key,p=l.value;if(d.status==="aborted"||p.status==="aborted")return Le;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(d.value,p.value)}return{status:r.value,value:c}}}};Md.create=(t,e,r)=>new Md({valueType:e,keyType:t,typeName:B.ZodMap,...tt(r)});zd=class t extends ct{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.set)return ve(n,{code:ae.invalid_type,expected:Se.set,received:n.parsedType}),Le;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ve(n,{code:ae.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ve(n,{code:ae.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(l){let d=new Set;for(let p of l){if(p.status==="aborted")return Le;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,d)=>i._parse(new Qn(n,l,n.path,d)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};zd.create=(t,e)=>new zd({valueType:t,minSize:null,maxSize:null,typeName:B.ZodSet,...tt(e)});oA=class t extends ct{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.function)return ve(r,{code:ae.invalid_type,expected:Se.function,received:r.parsedType}),Le;function n(c,l){return bg({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Pd(),_s].filter(d=>!!d),issueData:{code:ae.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function o(c,l){return bg({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Pd(),_s].filter(d=>!!d),issueData:{code:ae.invalid_return_type,returnTypeError:l}})}s(o,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof ra){let c=this;return cn(async function(...l){let d=new Dn([]),p=await c._def.args.parseAsync(l,i).catch(y=>{throw d.addIssue(n(l,y)),d}),m=await Reflect.apply(a,this,p);return await c._def.returns._def.type.parseAsync(m,i).catch(y=>{throw d.addIssue(o(m,y)),d})})}else{let c=this;return cn(function(...l){let d=c._def.args.safeParse(l,i);if(!d.success)throw new Dn([n(l,d.error)]);let p=Reflect.apply(a,this,d.data),m=c._def.returns.safeParse(p,i);if(!m.success)throw new Dn([o(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ci.create(e).rest(bs.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Ci.create([]).rest(bs.create()),returns:r||bs.create(),typeName:B.ZodFunction,...tt(n)})}},Nc=class extends ct{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Nc.create=(t,e)=>new Nc({getter:t,typeName:B.ZodLazy,...tt(e)});Dc=class extends ct{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ve(r,{received:r.data,code:ae.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}};Dc.create=(t,e)=>new Dc({value:t,typeName:B.ZodLiteral,...tt(e)});s(UF,"createZodEnum");jc=class t extends ct{static{s(this,"ZodEnum")}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ve(r,{expected:_t.joinValues(n),received:r.parsedType,code:ae.invalid_type}),Le}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ve(r,{received:r.data,code:ae.invalid_enum_value,options:n}),Le}return cn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};jc.create=UF;Mc=class extends ct{static{s(this,"ZodNativeEnum")}_parse(e){let r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Se.string&&n.parsedType!==Se.number){let o=_t.objectValues(r);return ve(n,{expected:_t.joinValues(o),received:n.parsedType,code:ae.invalid_type}),Le}if(this._cache||(this._cache=new Set(_t.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let o=_t.objectValues(r);return ve(n,{received:n.data,code:ae.invalid_enum_value,options:o}),Le}return cn(e.data)}get enum(){return this._def.values}};Mc.create=(t,e)=>new Mc({values:t,typeName:B.ZodNativeEnum,...tt(e)});ra=class extends ct{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.promise&&r.common.async===!1)return ve(r,{code:ae.invalid_type,expected:Se.promise,received:r.parsedType}),Le;let n=r.parsedType===Se.promise?r.data:Promise.resolve(r.data);return cn(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};ra.create=(t,e)=>new ra({type:t,typeName:B.ZodPromise,...tt(e)});go=class extends ct{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:s(a=>{ve(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return Le;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?Le:l.status==="dirty"?Ic(l.value):r.value==="dirty"?Ic(l.value):l});{if(r.value==="aborted")return Le;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?Le:c.status==="dirty"?Ic(c.value):r.value==="dirty"?Ic(c.value):c}}if(o.type==="refinement"){let a=s(c=>{let l=o.refinement(c,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?Le:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?Le:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ta(a))return Le;let c=o.transform(a.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>ta(a)?Promise.resolve(o.transform(a.value,i)).then(c=>({status:r.value,value:c})):Le);_t.assertNever(o)}};go.create=(t,e,r)=>new go({schema:t,typeName:B.ZodEffects,effect:e,...tt(r)});go.createWithPreprocess=(t,e,r)=>new go({schema:e,effect:{type:"preprocess",transform:t},typeName:B.ZodEffects,...tt(r)});ho=class extends ct{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Se.undefined?cn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ho.create=(t,e)=>new ho({innerType:t,typeName:B.ZodOptional,...tt(e)});Oi=class extends ct{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Se.null?cn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Oi.create=(t,e)=>new Oi({innerType:t,typeName:B.ZodNullable,...tt(e)});zc=class extends ct{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Se.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};zc.create=(t,e)=>new zc({innerType:t,typeName:B.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});Uc=class extends ct{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ad(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dn(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Uc.create=(t,e)=>new Uc({innerType:t,typeName:B.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});Ud=class extends ct{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Se.nan){let n=this._getOrReturnCtx(e);return ve(n,{code:ae.invalid_type,expected:Se.nan,received:n.parsedType}),Le}return{status:"valid",value:e.data}}};Ud.create=t=>new Ud({typeName:B.ZodNaN,...tt(t)});GHe=Symbol("zod_brand"),wg=class extends ct{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Sg=class t extends ct{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Le:i.status==="dirty"?(r.dirty(),Ic(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Le:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:B.ZodPipeline})}},Lc=class extends ct{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(o=>(ta(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return Ad(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};Lc.create=(t,e)=>new Lc({innerType:t,typeName:B.ZodReadonly,...tt(e)});KHe={object:jn.lazycreate};(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(B||(B={}));WHe=Ac.create,QHe=Cd.create,XHe=Ud.create,YHe=Od.create,eZe=$d.create,tZe=Rd.create,rZe=Nd.create,nZe=Cc.create,oZe=Oc.create,iZe=Dd.create,sZe=bs.create,aZe=zo.create,cZe=jd.create,uZe=ws.create,lZe=jn.create,dZe=jn.strictCreate,pZe=$c.create,mZe=tA.create,fZe=Rc.create,hZe=Ci.create,gZe=nA.create,yZe=Md.create,vZe=zd.create,_Ze=oA.create,bZe=Nc.create,wZe=Dc.create,SZe=jc.create,xZe=Mc.create,TZe=ra.create,EZe=go.create,kZe=ho.create,IZe=Oi.create,PZe=go.createWithPreprocess,AZe=Sg.create});var iA=b(()=>{_g();YP();NF();Id();LF();vg()});var Uo=b(()=>{iA();iA()});var xg=b(()=>{});function VF(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function Eg(t){return Object.fromEntries([...t.headers])}function cA(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}function aue({error:t,url:e,requestBodyValues:r}){if(cA(t))return t;if(t instanceof TypeError&&sue.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new et({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}function cue(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function uue(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}function lA(t,...e){let r=new Headers(uue(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}function ZF({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new an({message:`${n} API key must be a string.`});if(typeof process>"u")throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new an({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}function JF({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}function qF(t){let e=JSON.parse(t);return e===null||typeof e!="object"||due.test(t)===!1&&pue.test(t)===!1?e:mue(e)}function mue(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}function GF(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return qF(t)}try{return qF(t)}finally{Error.stackTraceLimit=e}}function fue(t){return{[Tg]:!0,validate:t}}function hue(t){return typeof t=="object"&&t!==null&&Tg in t&&t[Tg]===!0&&"validate"in t}function gue(t){return hue(t)?t:typeof t=="function"?t():yue(t)}function yue(t){return fue(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new tr({value:e,cause:r.issues})}})}async function Lo({value:t,schema:e}){let r=await dA({value:t,schema:e});if(!r.success)throw tr.wrap({value:t,cause:r.error});return r.value}async function dA({value:t,schema:e}){let r=gue(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:tr.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:tr.wrap({value:t,cause:n}),rawValue:t}}}async function vue({text:t,schema:e}){try{let r=GF(t);return e==null?r:Lo({value:r,schema:e})}catch(r){throw sn.isInstance(r)||tr.isInstance(r)?r:new sn({text:t,cause:r})}}async function KF({text:t,schema:e}){try{let r=GF(t);return e==null?{success:!0,value:r,rawValue:r}:await dA({value:r,schema:e})}catch(r){return{success:!1,error:sn.isInstance(r)?r:new sn({text:t,cause:r}),rawValue:void 0}}}function _ue({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new vs).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await KF({text:r,schema:e}))}}))}async function qc({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await dA({value:e[t],schema:r});if(!n.success)throw new Wn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}function Nr({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}function Ss({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}async function mA(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}function Mn(){return{}}function Eue(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==B.ZodAny&&(i.items=Dt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}function kue(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function Iue(){return{type:"boolean"}}function YF(t,e){return Dt(t.type._def,e)}function e6(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>e6(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Aue(t)}}function Cue(t,e){return{...Dt(t.innerType._def,e),default:t.defaultValue()}}function Oue(t,e){return e.effectStrategy==="input"?Dt(t.schema._def,e):Mn()}function $ue(t){return{type:"string",enum:Array.from(t.values)}}function Nue(t,e){let r=[Dt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Dt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Rue(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}function Due(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}function t6(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":vo(r,"email",n.message,e);break;case"format:idn-email":vo(r,"idn-email",n.message,e);break;case"pattern:zod":un(r,yo.email,n.message,e);break}break;case"url":vo(r,"uri",n.message,e);break;case"uuid":vo(r,"uuid",n.message,e);break;case"regex":un(r,n.regex,n.message,e);break;case"cuid":un(r,yo.cuid,n.message,e);break;case"cuid2":un(r,yo.cuid2,n.message,e);break;case"startsWith":un(r,RegExp(`^${aA(n.value,e)}`),n.message,e);break;case"endsWith":un(r,RegExp(`${aA(n.value,e)}$`),n.message,e);break;case"datetime":vo(r,"date-time",n.message,e);break;case"date":vo(r,"date",n.message,e);break;case"time":vo(r,"time",n.message,e);break;case"duration":vo(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{un(r,RegExp(aA(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&vo(r,"ipv4",n.message,e),n.version!=="v4"&&vo(r,"ipv6",n.message,e);break}case"base64url":un(r,yo.base64url,n.message,e);break;case"jwt":un(r,yo.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&un(r,yo.ipv4Cidr,n.message,e),n.version!=="v4"&&un(r,yo.ipv6Cidr,n.message,e);break}case"emoji":un(r,yo.emoji(),n.message,e);break;case"ulid":{un(r,yo.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{vo(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{un(r,yo.base64,n.message,e);break}}break}case"nanoid":un(r,yo.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function aA(t,e){return e.patternStrategy==="escape"?Mue(t):t}function Mue(t){let e="";for(let r=0;r<t.length;r++)jue.has(t[r])||(e+="\\"),e+=t[r];return e}function vo(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}function un(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:BF(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=BF(e,n)}function BF(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function r6(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=Dt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===B.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=t6(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===B.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===B.ZodBranded&&t.keyType._def.type._def.typeName===B.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=YF(t.keyType._def,e);return{...l,propertyNames:p}}}return l}function zue(t,e){if(e.mapStrategy==="record")return r6(t,e);let r=Dt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Mn(),n=Dt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Mn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Uue(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function Lue(){return{not:Mn()}}function que(){return{type:"null"}}function Fue(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in uA&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=uA[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Bue(t,e)}function Vue(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[uA[t.innerType._def.typeName],"null"]};let r=Dt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Hue(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function Zue(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=Gue(c),d=Dt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=Jue(t,e);return i!==void 0&&(r.additionalProperties=i),r}function Jue(t,e){if(t.catchall._def.typeName!=="ZodNever")return Dt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Gue(t){try{return t.isOptional()}catch{return!0}}function Que(t,e){return Dt(t.type._def,e)}function Xue(t,e){let n={type:"array",uniqueItems:!0,items:Dt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}function Yue(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Dt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Dt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Dt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function ele(){return{not:Mn()}}function tle(){return Mn()}function Dt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==xue)return l}if(o&&!r){let l=ole(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=nle(t,t.typeName,e),c=typeof a=="function"?Dt(a(),e):a;if(c&&ile(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}function ule(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return n6(()=>cle(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function lle(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return n6(()=>bi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function dle(t){return"_zod"in t}function ut(t,e){return dle(t)?lle(t,e):ule(t,e)}function lt(t){let e;return()=>(e==null&&(e=t()),e)}function n6(t,{validate:e}={}){return{[ple]:!0,_type:void 0,[Tg]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}function fle(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return mle(e)}function fA(t){return t instanceof Uint8Array?fle(t):t}function o6(t){return t?.replace(/\/$/,"")}var HF,iue,kg,sue,lue,due,pue,Tg,bue,pA,wue,WF,QF,XF,Sue,xue,FF,Tue,Pue,Aue,Rue,sA,yo,jue,uA,Bue,Kue,Wue,rle,nle,ole,ile,sle,ale,cle,ple,mle,YZe,vr=b(()=>{Xe();Xe();Xe();Xe();Xe();Xe();yg();Xe();Xe();Xe();ze();Uo();Uo();Uo();xg();s(VF,"combineHeaders");HF=class{static{s(this,"DelayedPromise")}constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this._promise)}resolve(t){var e;this.status={type:"resolved",value:t},this._promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this._promise&&((e=this._reject)==null||e.call(this,t))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};s(Eg,"extractResponseHeaders");iue=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Wn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),kg=iue();s(cA,"isAbortError");sue=["fetch failed","failed to fetch"];s(aue,"handleFetchError");s(cue,"getRuntimeEnvironmentUserAgent");s(uue,"normalizeHeaders");s(lA,"withUserAgentSuffix");lue="3.0.18";s(ZF,"loadApiKey");s(JF,"loadOptionalSetting");due=/"__proto__"\s*:/,pue=/"constructor"\s*:/;s(qF,"_parse");s(mue,"filter");s(GF,"secureJsonParse");Tg=Symbol.for("vercel.ai.validator");s(fue,"validator");s(hue,"isValidator");s(gue,"asValidator");s(yue,"standardSchemaValidator");s(Lo,"validateTypes");s(dA,"safeValidateTypes");s(vue,"parseJSON");s(KF,"safeParseJSON");s(_ue,"parseJsonEventStream");s(qc,"parseProviderOptions");bue=s(()=>globalThis.fetch,"getOriginalFetch2"),pA=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>wue({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),wue=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=bue()})=>{try{let c=await a(t,{method:"POST",headers:lA(e,`ai-sdk/provider-utils/${lue}`,cue()),body:r.content,signal:i}),l=Eg(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw cA(p)||et.isInstance(p)?p:new et({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(cA(d)||et.isInstance(d))?d:new et({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw aue({error:c,url:t,requestBodyValues:r.values})}},"postToApi");s(Nr,"createProviderDefinedToolFactory");s(Ss,"createProviderDefinedToolFactoryWithOutputSchema");s(mA,"resolve");WF=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Eg(n);if(a.trim()==="")return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await vue({text:a,schema:t});return{responseHeaders:c,value:new et({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),QF=s(t=>async({response:e})=>{let r=Eg(e);if(e.body==null)throw new kc({});return{responseHeaders:r,value:_ue({stream:e.body,schema:t})}},"createEventSourceResponseHandler"),XF=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await KF({text:o,schema:t}),a=Eg(e);if(!i.success)throw new et({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),Sue=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),xue=Symbol("Let zodToJsonSchema decide on which parser to use"),FF={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Tue=s(t=>typeof t=="string"?{...FF,name:t}:{...FF,...t},"getDefaultOptions");s(Mn,"parseAnyDef");s(Eue,"parseArrayDef");s(kue,"parseBigintDef");s(Iue,"parseBooleanDef");s(YF,"parseBrandedDef");Pue=s((t,e)=>Dt(t.innerType._def,e),"parseCatchDef");s(e6,"parseDateDef");Aue=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");s(Cue,"parseDefaultDef");s(Oue,"parseEffectsDef");s($ue,"parseEnumDef");Rue=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");s(Nue,"parseIntersectionDef");s(Due,"parseLiteralDef");sA=void 0,yo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(sA===void 0&&(sA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),sA),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};s(t6,"parseStringDef");s(aA,"escapeLiteralCheckValue");jue=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");s(Mue,"escapeNonAlphaNumeric");s(vo,"addFormat");s(un,"addPattern");s(BF,"stringifyRegExpWithFlags");s(r6,"parseRecordDef");s(zue,"parseMapDef");s(Uue,"parseNativeEnumDef");s(Lue,"parseNeverDef");s(que,"parseNullDef");uA={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};s(Fue,"parseUnionDef");Bue=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Dt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");s(Vue,"parseNullableDef");s(Hue,"parseNumberDef");s(Zue,"parseObjectDef");s(Jue,"decideAdditionalProperties");s(Gue,"safeIsOptional");Kue=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Dt(t.innerType._def,e);let n=Dt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Mn()},n]}:Mn()},"parseOptionalDef"),Wue=s((t,e)=>{if(e.pipeStrategy==="input")return Dt(t.in._def,e);if(e.pipeStrategy==="output")return Dt(t.out._def,e);let r=Dt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Dt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");s(Que,"parsePromiseDef");s(Xue,"parseSetDef");s(Yue,"parseTupleDef");s(ele,"parseUndefinedDef");s(tle,"parseUnknownDef");rle=s((t,e)=>Dt(t.innerType._def,e),"parseReadonlyDef"),nle=s((t,e,r)=>{switch(e){case B.ZodString:return t6(t,r);case B.ZodNumber:return Hue(t);case B.ZodObject:return Zue(t,r);case B.ZodBigInt:return kue(t);case B.ZodBoolean:return Iue();case B.ZodDate:return e6(t,r);case B.ZodUndefined:return ele();case B.ZodNull:return que();case B.ZodArray:return Eue(t,r);case B.ZodUnion:case B.ZodDiscriminatedUnion:return Fue(t,r);case B.ZodIntersection:return Nue(t,r);case B.ZodTuple:return Yue(t,r);case B.ZodRecord:return r6(t,r);case B.ZodLiteral:return Due(t);case B.ZodEnum:return $ue(t);case B.ZodNativeEnum:return Uue(t);case B.ZodNullable:return Vue(t,r);case B.ZodOptional:return Kue(t,r);case B.ZodMap:return zue(t,r);case B.ZodSet:return Xue(t,r);case B.ZodLazy:return()=>t.getter()._def;case B.ZodPromise:return Que(t,r);case B.ZodNaN:case B.ZodNever:return Lue();case B.ZodEffects:return Oue(t,r);case B.ZodAny:return Mn();case B.ZodUnknown:return tle();case B.ZodDefault:return Cue(t,r);case B.ZodBranded:return YF(t,r);case B.ZodReadonly:return rle(t,r);case B.ZodCatch:return Pue(t,r);case B.ZodPipeline:return Wue(t,r);case B.ZodFunction:case B.ZodVoid:case B.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");s(Dt,"parseDef");ole=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Sue(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Mn()):e.$refStrategy==="seen"?Mn():void 0}},"get$ref"),ile=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),sle=s(t=>{let e=Tue(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),ale=s((t,e)=>{var r;let n=sle(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=Dt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:Mn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=Dt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:Mn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),cle=ale;s(ule,"zod3Schema");s(lle,"zod4Schema");s(dle,"isZod4Schema");s(ut,"zodSchema");ple=Symbol.for("vercel.ai.schema");s(lt,"lazySchema");s(n6,"jsonSchema");({btoa:mle,atob:YZe}=globalThis);s(fle,"convertUint8ArrayToBase64");s(fA,"convertToBase64");s(o6,"withoutTrailingSlash")});function wle(t){var e;let r=t?.anthropic;return(e=r?.cacheControl)!=null?e:r?.cache_control}async function Nle({tools:t,toolChoice:e,disableParallelToolUse:r,cacheControlValidator:n}){t=t?.length?t:void 0;let o=[],i=new Set,a=n||new hA;if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};let c=[];for(let d of t)switch(d.type){case"function":{let p=a.getCacheControl(d.providerOptions,{type:"tool definition",canCache:!0});c.push({name:d.name,description:d.description,input_schema:d.inputSchema,cache_control:p});break}case"provider-defined":{switch(d.id){case"anthropic.code_execution_20250522":{i.add("code-execution-2025-05-22"),c.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{i.add("code-execution-2025-08-25"),c.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"computer",type:"computer_20250124",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"computer",type:"computer_20241022",display_width_px:d.args.displayWidthPx,display_height_px:d.args.displayHeightPx,display_number:d.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{i.add("computer-use-2025-01-24"),c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await Lo({value:d.args,schema:Sle});c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{i.add("computer-use-2025-01-24"),c.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{i.add("computer-use-2024-10-22"),c.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{i.add("context-management-2025-06-27"),c.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{i.add("web-fetch-2025-09-10");let p=await Lo({value:d.args,schema:Cle});c.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await Lo({value:d.args,schema:kle});c.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}default:{o.push({type:"unsupported-tool",tool:d});break}}break}default:{o.push({type:"unsupported-tool",tool:d});break}}if(e==null)return{tools:c,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:o,betas:i};let l=e.type;switch(l){case"auto":return{tools:c,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"required":return{tools:c,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:o,betas:i};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:i};case"tool":return{tools:c,toolChoice:{type:"tool",name:e.toolName,disable_parallel_tool_use:r},toolWarnings:o,betas:i};default:{let d=l;throw new Ct({functionality:`tool choice type: ${d}`})}}}function qle(t){if(typeof t=="string")return Buffer.from(t,"base64").toString("utf-8");if(t instanceof Uint8Array)return new TextDecoder().decode(t);throw t instanceof URL?new Ct({functionality:"URL-based text documents are not supported for citations"}):new Ct({functionality:`unsupported data type for text documents: ${typeof t}`})}async function Fle({prompt:t,sendReasoning:e,warnings:r,cacheControlValidator:n}){var o,i,a,c,l;let d=new Set,p=Ble(t),m=n||new hA,h,y=[];async function g(_){var S,w;let x=await qc({provider:"anthropic",providerOptions:_,schema:s6});return(w=(S=x?.citations)==null?void 0:S.enabled)!=null?w:!1}s(g,"shouldEnableCitations");async function f(_){let S=await qc({provider:"anthropic",providerOptions:_,schema:s6});return{title:S?.title,context:S?.context}}s(f,"getDocumentMetadata");for(let _=0;_<p.length;_++){let S=p[_],w=_===p.length-1,x=S.type;switch(x){case"system":{if(h!=null)throw new Ct({functionality:"Multiple system messages that are separated by user/assistant messages"});h=S.messages.map(({content:I,providerOptions:N})=>({type:"text",text:I,cache_control:m.getCacheControl(N,{type:"system message",canCache:!0})}));break}case"user":{let I=[];for(let N of S.messages){let{role:$,content:O}=N;switch($){case"user":{for(let R=0;R<O.length;R++){let A=O[R],D=R===O.length-1,M=(o=m.getCacheControl(A.providerOptions,{type:"user message part",canCache:!0}))!=null?o:D?m.getCacheControl(N.providerOptions,{type:"user message",canCache:!0}):void 0;switch(A.type){case"text":{I.push({type:"text",text:A.text,cache_control:M});break}case"file":{if(A.mediaType.startsWith("image/"))I.push({type:"image",source:A.data instanceof URL?{type:"url",url:A.data.toString()}:{type:"base64",media_type:A.mediaType==="image/*"?"image/jpeg":A.mediaType,data:fA(A.data)},cache_control:M});else if(A.mediaType==="application/pdf"){d.add("pdfs-2024-09-25");let Q=await g(A.providerOptions),Z=await f(A.providerOptions);I.push({type:"document",source:A.data instanceof URL?{type:"url",url:A.data.toString()}:{type:"base64",media_type:"application/pdf",data:fA(A.data)},title:(i=Z.title)!=null?i:A.filename,...Z.context&&{context:Z.context},...Q&&{citations:{enabled:!0}},cache_control:M})}else if(A.mediaType==="text/plain"){let Q=await g(A.providerOptions),Z=await f(A.providerOptions);I.push({type:"document",source:A.data instanceof URL?{type:"url",url:A.data.toString()}:{type:"text",media_type:"text/plain",data:qle(A.data)},title:(a=Z.title)!=null?a:A.filename,...Z.context&&{context:Z.context},...Q&&{citations:{enabled:!0}},cache_control:M})}else throw new Ct({functionality:`media type: ${A.mediaType}`});break}}}break}case"tool":{for(let R=0;R<O.length;R++){let A=O[R],D=R===O.length-1,M=(c=m.getCacheControl(A.providerOptions,{type:"tool result part",canCache:!0}))!=null?c:D?m.getCacheControl(N.providerOptions,{type:"tool result message",canCache:!0}):void 0,Q=A.output,Z;switch(Q.type){case"content":Z=Q.value.map(F=>{switch(F.type){case"text":return{type:"text",text:F.text};case"media":{if(F.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:F.mediaType,data:F.data}};if(F.mediaType==="application/pdf")return d.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:F.mediaType,data:F.data}};throw new Ct({functionality:`media type: ${F.mediaType}`})}}});break;case"text":case"error-text":Z=Q.value;break;case"json":case"error-json":default:Z=JSON.stringify(Q.value);break}I.push({type:"tool_result",tool_use_id:A.toolCallId,content:Z,is_error:Q.type==="error-text"||Q.type==="error-json"?!0:void 0,cache_control:M})}break}default:{let R=$;throw new Error(`Unsupported role: ${R}`)}}}y.push({role:"user",content:I});break}case"assistant":{let I=[];for(let N=0;N<S.messages.length;N++){let $=S.messages[N],O=N===S.messages.length-1,{content:R}=$;for(let A=0;A<R.length;A++){let D=R[A],M=A===R.length-1,Q=(l=m.getCacheControl(D.providerOptions,{type:"assistant message part",canCache:!0}))!=null?l:M?m.getCacheControl($.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(D.type){case"text":{I.push({type:"text",text:w&&O&&M?D.text.trim():D.text,cache_control:Q});break}case"reasoning":{if(e){let Z=await qc({provider:"anthropic",providerOptions:D.providerOptions,schema:_le});Z!=null?Z.signature!=null?(m.getCacheControl(D.providerOptions,{type:"thinking block",canCache:!1}),I.push({type:"thinking",thinking:D.text,signature:Z.signature})):Z.redactedData!=null?(m.getCacheControl(D.providerOptions,{type:"redacted thinking block",canCache:!1}),I.push({type:"redacted_thinking",data:Z.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(D.providerExecuted){D.toolName==="code_execution"&&D.input!=null&&typeof D.input=="object"&&"type"in D.input&&typeof D.input.type=="string"&&(D.input.type==="bash_code_execution"||D.input.type==="text_editor_code_execution")?I.push({type:"server_tool_use",id:D.toolCallId,name:D.input.type,input:D.input,cache_control:Q}):D.toolName==="code_execution"||D.toolName==="web_fetch"||D.toolName==="web_search"?I.push({type:"server_tool_use",id:D.toolCallId,name:D.toolName,input:D.input,cache_control:Q}):r.push({type:"other",message:`provider executed tool call for tool ${D.toolName} is not supported`});break}I.push({type:"tool_use",id:D.toolCallId,name:D.toolName,input:D.input,cache_control:Q});break}case"tool-result":{if(D.toolName==="code_execution"){let Z=D.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${D.toolName} is not supported`});break}if(Z.value==null||typeof Z.value!="object"||!("type"in Z.value)||typeof Z.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${D.toolName}`});break}if(Z.value.type==="code_execution_result"){let F=await Lo({value:Z.value,schema:p6});I.push({type:"code_execution_tool_result",tool_use_id:D.toolCallId,content:{type:F.type,stdout:F.stdout,stderr:F.stderr,return_code:F.return_code},cache_control:Q})}else{let F=await Lo({value:Z.value,schema:m6});I.push(F.type==="bash_code_execution_result"||F.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:Q,content:F}:{type:"text_editor_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:Q,content:F})}break}if(D.toolName==="web_fetch"){let Z=D.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${D.toolName} is not supported`});break}let F=await Lo({value:Z.value,schema:d6});I.push({type:"web_fetch_tool_result",tool_use_id:D.toolCallId,content:{type:"web_fetch_result",url:F.url,retrieved_at:F.retrievedAt,content:{type:"document",title:F.content.title,citations:F.content.citations,source:{type:F.content.source.type,media_type:F.content.source.mediaType,data:F.content.source.data}}},cache_control:Q});break}if(D.toolName==="web_search"){let Z=D.output;if(Z.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Z.type} for tool ${D.toolName} is not supported`});break}let F=await Lo({value:Z.value,schema:l6});I.push({type:"web_search_tool_result",tool_use_id:D.toolCallId,content:F.map(ee=>({url:ee.url,title:ee.title,page_age:ee.pageAge,encrypted_content:ee.encryptedContent,type:ee.type})),cache_control:Q});break}r.push({type:"other",message:`provider executed tool result for tool ${D.toolName} is not supported`});break}}}}y.push({role:"assistant",content:I});break}default:{let I=x;throw new Error(`content type: ${I}`)}}}return{prompt:{system:h,messages:y},betas:d}}function Ble(t){let e=[],r;for(let n of t){let{role:o}=n;switch(o){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let i=o;throw new Error(`Unsupported role: ${i}`)}}}return e}function c6({finishReason:t,isJsonResponseFromTool:e}){switch(t){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return e?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function u6(t,e,r){var n;if(t.type!=="page_location"&&t.type!=="char_location")return;let o=e[t.document_index];if(o)return{type:"source",sourceType:"document",id:r(),mediaType:o.mediaType,title:(n=t.document_title)!=null?n:o.title,filename:o.filename,providerMetadata:{anthropic:t.type==="page_location"?{citedText:t.cited_text,startPageNumber:t.start_page_number,endPageNumber:t.end_page_number}:{citedText:t.cited_text,startCharIndex:t.start_char_index,endCharIndex:t.end_char_index}}}}function Hle(t){return t.includes("claude-sonnet-4-5")||t.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:t.includes("claude-sonnet-4-")||t.includes("claude-3-7-sonnet")||t.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:t.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}function ude(t={}){var e,r;let n=(e=o6(JF({settingValue:t.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?e:"https://api.anthropic.com/v1",o=(r=t.name)!=null?r:"anthropic.messages",i=s(()=>lA({"anthropic-version":"2023-06-01","x-api-key":ZF({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers},`ai-sdk/anthropic/${hle}`),"getHeaders"),a=s(l=>{var d;return new Vle(l,{provider:o,baseURL:n,headers:i,fetch:t.fetch,generateId:(d=t.generateId)!=null?d:kg,supportedUrls:s(()=>({"image/*":[/^https?:\/\/.*$/]}),"supportedUrls")})},"createChatModel"),c=s(function(l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return a(l)},"provider");return c.languageModel=a,c.chat=a,c.messages=a,c.textEmbeddingModel=l=>{throw new JP({modelId:l,modelType:"textEmbeddingModel"})},c.imageModel=l=>{throw new JP({modelId:l,modelType:"imageModel"})},c.tools=cde,c}var hle,gle,i6,yle,vle,_le,s6,ble,a6,hA,Sle,xle,Tle,Ele,kle,l6,Ile,Ple,Ale,Cle,d6,Ole,$le,Rle,p6,Dle,jle,Mle,m6,zle,Ule,Lle,Vle,Zle,Jle,Gle,Kle,Wle,Qle,Xle,Yle,ede,tde,rde,nde,ode,ide,sde,ade,cde,gA,f6=b(()=>{Xe();vr();Xe();vr();vr();ze();vr();ze();ze();Xe();vr();ze();vr();vr();ze();vr();ze();vr();Xe();vr();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();vr();ze();hle="2.0.50",gle=lt(()=>ut(u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}))),i6=WF({errorSchema:gle,errorToMessage:s(t=>t.error.message,"errorToMessage")}),yle=lt(()=>ut(u.object({type:u.literal("message"),id:u.string().nullish(),model:u.string().nullish(),content:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string(),citations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])).optional()}),u.object({type:u.literal("thinking"),thinking:u.string(),signature:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string(),input:u.unknown()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])),stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()}),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}))),vle=lt(()=>ut(u.discriminatedUnion("type",[u.object({type:u.literal("message_start"),message:u.object({id:u.string().nullish(),model:u.string().nullish(),usage:u.looseObject({input_tokens:u.number(),cache_creation_input_tokens:u.number().nullish(),cache_read_input_tokens:u.number().nullish()})})}),u.object({type:u.literal("content_block_start"),index:u.number(),content_block:u.discriminatedUnion("type",[u.object({type:u.literal("text"),text:u.string()}),u.object({type:u.literal("thinking"),thinking:u.string()}),u.object({type:u.literal("tool_use"),id:u.string(),name:u.string()}),u.object({type:u.literal("redacted_thinking"),data:u.string()}),u.object({type:u.literal("server_tool_use"),id:u.string(),name:u.string(),input:u.record(u.string(),u.unknown()).nullish()}),u.object({type:u.literal("web_fetch_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("web_fetch_result"),url:u.string(),retrieved_at:u.string(),content:u.object({type:u.literal("document"),title:u.string().nullable(),citations:u.object({enabled:u.boolean()}).optional(),source:u.object({type:u.literal("text"),media_type:u.string(),data:u.string()})})}),u.object({type:u.literal("web_fetch_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("web_search_tool_result"),tool_use_id:u.string(),content:u.union([u.array(u.object({type:u.literal("web_search_result"),url:u.string(),title:u.string(),encrypted_content:u.string(),page_age:u.string().nullish()})),u.object({type:u.literal("web_search_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("code_execution_tool_result"),tool_use_id:u.string(),content:u.union([u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("bash_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()})])}),u.object({type:u.literal("text_editor_code_execution_tool_result"),tool_use_id:u.string(),content:u.discriminatedUnion("type",[u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})])})])}),u.object({type:u.literal("content_block_delta"),index:u.number(),delta:u.discriminatedUnion("type",[u.object({type:u.literal("input_json_delta"),partial_json:u.string()}),u.object({type:u.literal("text_delta"),text:u.string()}),u.object({type:u.literal("thinking_delta"),thinking:u.string()}),u.object({type:u.literal("signature_delta"),signature:u.string()}),u.object({type:u.literal("citations_delta"),citation:u.discriminatedUnion("type",[u.object({type:u.literal("web_search_result_location"),cited_text:u.string(),url:u.string(),title:u.string(),encrypted_index:u.string()}),u.object({type:u.literal("page_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_page_number:u.number(),end_page_number:u.number()}),u.object({type:u.literal("char_location"),cited_text:u.string(),document_index:u.number(),document_title:u.string().nullable(),start_char_index:u.number(),end_char_index:u.number()})])})])}),u.object({type:u.literal("content_block_stop"),index:u.number()}),u.object({type:u.literal("error"),error:u.object({type:u.string(),message:u.string()})}),u.object({type:u.literal("message_delta"),delta:u.object({stop_reason:u.string().nullish(),stop_sequence:u.string().nullish(),container:u.object({expires_at:u.string(),id:u.string(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skill_id:u.string(),version:u.string()})).nullish()}).nullish()}),usage:u.looseObject({output_tokens:u.number(),cache_creation_input_tokens:u.number().nullish()})}),u.object({type:u.literal("message_stop")}),u.object({type:u.literal("ping")})]))),_le=lt(()=>ut(u.object({signature:u.string().optional(),redactedData:u.string().optional()}))),s6=u.object({citations:u.object({enabled:u.boolean()}).optional(),title:u.string().optional(),context:u.string().optional()}),ble=u.object({sendReasoning:u.boolean().optional(),structuredOutputMode:u.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:u.object({type:u.union([u.literal("enabled"),u.literal("disabled")]),budgetTokens:u.number().optional()}).optional(),disableParallelToolUse:u.boolean().optional(),cacheControl:u.object({type:u.literal("ephemeral"),ttl:u.union([u.literal("5m"),u.literal("1h")]).optional()}).optional(),container:u.object({id:u.string().optional(),skills:u.array(u.object({type:u.union([u.literal("anthropic"),u.literal("custom")]),skillId:u.string(),version:u.string().optional()})).optional()}).optional(),effort:u.enum(["low","medium","high"]).optional()}),a6=4;s(wle,"getCacheControl");hA=class{static{s(this,"CacheControlValidator")}constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(t,e){let r=wle(t);if(r){if(!e.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${e.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>a6){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${a6} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},Sle=lt(()=>ut(u.object({maxCharacters:u.number().optional()}))),xle=lt(()=>ut(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),Tle=Nr({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:xle}),Ele=s((t={})=>Tle(t),"textEditor_20250728"),kle=lt(()=>ut(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),userLocation:u.object({type:u.literal("approximate"),city:u.string().optional(),region:u.string().optional(),country:u.string().optional(),timezone:u.string().optional()}).optional()}))),l6=lt(()=>ut(u.array(u.object({url:u.string(),title:u.string(),pageAge:u.string().nullable(),encryptedContent:u.string(),type:u.literal("web_search_result")})))),Ile=lt(()=>ut(u.object({query:u.string()}))),Ple=Ss({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:Ile,outputSchema:l6}),Ale=s((t={})=>Ple(t),"webSearch_20250305"),Cle=lt(()=>ut(u.object({maxUses:u.number().optional(),allowedDomains:u.array(u.string()).optional(),blockedDomains:u.array(u.string()).optional(),citations:u.object({enabled:u.boolean()}).optional(),maxContentTokens:u.number().optional()}))),d6=lt(()=>ut(u.object({type:u.literal("web_fetch_result"),url:u.string(),content:u.object({type:u.literal("document"),title:u.string(),citations:u.object({enabled:u.boolean()}).optional(),source:u.union([u.object({type:u.literal("base64"),mediaType:u.literal("application/pdf"),data:u.string()}),u.object({type:u.literal("text"),mediaType:u.literal("text/plain"),data:u.string()})])}),retrievedAt:u.string().nullable()}))),Ole=lt(()=>ut(u.object({url:u.string()}))),$le=Ss({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:Ole,outputSchema:d6}),Rle=s((t={})=>$le(t),"webFetch_20250910");s(Nle,"prepareTools");p6=lt(()=>ut(u.object({type:u.literal("code_execution_result"),stdout:u.string(),stderr:u.string(),return_code:u.number()}))),Dle=lt(()=>ut(u.object({code:u.string()}))),jle=Ss({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:Dle,outputSchema:p6}),Mle=s((t={})=>jle(t),"codeExecution_20250522"),m6=lt(()=>ut(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution_result"),content:u.array(u.object({type:u.literal("bash_code_execution_output"),file_id:u.string()})),stdout:u.string(),stderr:u.string(),return_code:u.number()}),u.object({type:u.literal("bash_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_tool_result_error"),error_code:u.string()}),u.object({type:u.literal("text_editor_code_execution_view_result"),content:u.string(),file_type:u.string(),num_lines:u.number().nullable(),start_line:u.number().nullable(),total_lines:u.number().nullable()}),u.object({type:u.literal("text_editor_code_execution_create_result"),is_file_update:u.boolean()}),u.object({type:u.literal("text_editor_code_execution_str_replace_result"),lines:u.array(u.string()).nullable(),new_lines:u.number().nullable(),new_start:u.number().nullable(),old_lines:u.number().nullable(),old_start:u.number().nullable()})]))),zle=lt(()=>ut(u.discriminatedUnion("type",[u.object({type:u.literal("bash_code_execution"),command:u.string()}),u.discriminatedUnion("command",[u.object({type:u.literal("text_editor_code_execution"),command:u.literal("view"),path:u.string()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("create"),path:u.string(),file_text:u.string().nullish()}),u.object({type:u.literal("text_editor_code_execution"),command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()})])]))),Ule=Ss({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:zle,outputSchema:m6}),Lle=s((t={})=>Ule(t),"codeExecution_20250825");s(qle,"convertToString");s(Fle,"convertToAnthropicMessagesPrompt");s(Ble,"groupIntoBlocks");s(c6,"mapAnthropicStopReason");s(u6,"createCitationSource");Vle=class{static{s(this,"AnthropicMessagesLanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:kg}supportsUrl(t){return t.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({userSuppliedBetas:t,prompt:e,maxOutputTokens:r,temperature:n,topP:o,topK:i,frequencyPenalty:a,presencePenalty:c,stopSequences:l,responseFormat:d,seed:p,tools:m,toolChoice:h,providerOptions:y}){var g,f,_,S,w;let x=[];a!=null&&x.push({type:"unsupported-setting",setting:"frequencyPenalty"}),c!=null&&x.push({type:"unsupported-setting",setting:"presencePenalty"}),p!=null&&x.push({type:"unsupported-setting",setting:"seed"}),n!=null&&n>1?(x.push({type:"unsupported-setting",setting:"temperature",details:`${n} exceeds anthropic maximum of 1.0. clamped to 1.0`}),n=1):n!=null&&n<0&&(x.push({type:"unsupported-setting",setting:"temperature",details:`${n} is below anthropic minimum of 0. clamped to 0`}),n=0),d?.type==="json"&&(d.schema==null?x.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):m!=null&&x.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let I=await qc({provider:"anthropic",providerOptions:y,schema:ble}),{maxOutputTokens:N,supportsStructuredOutput:$,isKnownModel:O}=Hle(this.modelId),R=(g=I?.structuredOutputMode)!=null?g:"jsonTool",A=R==="outputFormat"||R==="auto"&&$,D=d?.type==="json"&&d.schema!=null&&!A?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema}:void 0,M=new hA,{prompt:Q,betas:Z}=await Fle({prompt:e,sendReasoning:(f=I?.sendReasoning)!=null?f:!0,warnings:x,cacheControlValidator:M}),F=((_=I?.thinking)==null?void 0:_.type)==="enabled",ee=(S=I?.thinking)==null?void 0:S.budgetTokens,ne=r??N,se={model:this.modelId,max_tokens:ne,temperature:n,top_k:i,top_p:o,stop_sequences:l,...F&&{thinking:{type:"enabled",budget_tokens:ee}},...I?.effort&&{output_config:{effort:I.effort}},...A&&d?.type==="json"&&d.schema!=null&&{output_format:{type:"json_schema",schema:d.schema}},...I?.container&&{container:{id:I.container.id,skills:(w=I.container.skills)==null?void 0:w.map($e=>({type:$e.type,skill_id:$e.skillId,version:$e.version}))}},system:Q.system,messages:Q.messages};if(F){if(ee==null)throw new Ct({functionality:"thinking requires a budget"});se.temperature!=null&&(se.temperature=void 0,x.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(se.top_k=void 0,x.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),o!=null&&(se.top_p=void 0,x.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),se.max_tokens=ne+ee}O&&se.max_tokens>N&&(r!=null&&x.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${se.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${N} max output tokens. The max output tokens have been limited to ${N}.`}),se.max_tokens=N),I?.container&&I.container.skills&&I.container.skills.length>0&&(Z.add("code-execution-2025-08-25"),Z.add("skills-2025-10-02"),Z.add("files-api-2025-04-14"),m?.some($e=>$e.type==="provider-defined"&&$e.id==="anthropic.code_execution_20250825")||x.push({type:"other",message:"code execution tool is required when using skills"})),I?.effort&&Z.add("effort-2025-11-24"),A&&Z.add("structured-outputs-2025-11-13");let{tools:we,toolChoice:Ee,toolWarnings:rt,betas:Ke}=await Nle(D!=null?{tools:[D],toolChoice:{type:"tool",toolName:D.name},disableParallelToolUse:!0,cacheControlValidator:M}:{tools:m??[],toolChoice:h,disableParallelToolUse:I?.disableParallelToolUse,cacheControlValidator:M}),G=M.getWarnings();return{args:{...se,tools:we,tool_choice:Ee},warnings:[...x,...rt,...G],betas:new Set([...Z,...Ke,...t]),usesJsonResponseTool:D!=null}}async getHeaders({betas:t,headers:e}){return VF(await mA(this.config.headers),e,t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{})}async getBetasFromHeaders(t){var e,r;let o=(e=(await mA(this.config.headers))["anthropic-beta"])!=null?e:"",i=(r=t?.["anthropic-beta"])!=null?r:"";return new Set([...o.toLowerCase().split(","),...i.toLowerCase().split(",")].map(a=>a.trim()).filter(a=>a!==""))}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}extractCitationDocuments(t){let e=s(r=>{var n,o;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(n=r.providerOptions)==null?void 0:n.anthropic,a=i?.citations;return(o=a?.enabled)!=null?o:!1},"isCitationPart");return t.filter(r=>r.role==="user").flatMap(r=>r.content).filter(e).map(r=>{var n;let o=r;return{title:(n=o.filename)!=null?n:"Untitled Document",filename:o.filename,mediaType:o.mediaType}})}async doGenerate(t){var e,r,n,o,i,a,c,l;let{args:d,warnings:p,betas:m,usesJsonResponseTool:h}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),y=this.extractCitationDocuments(t.prompt),{responseHeaders:g,value:f,rawValue:_}=await pA({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:m,headers:t.headers}),body:this.transformRequestBody(d),failedResponseHandler:i6,successfulResponseHandler:XF(yle),abortSignal:t.abortSignal,fetch:this.config.fetch}),S=[];for(let w of f.content)switch(w.type){case"text":{if(!h&&(S.push({type:"text",text:w.text}),w.citations))for(let x of w.citations){let I=u6(x,y,this.generateId);I&&S.push(I)}break}case"thinking":{S.push({type:"reasoning",text:w.thinking,providerMetadata:{anthropic:{signature:w.signature}}});break}case"redacted_thinking":{S.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:w.data}}});break}case"tool_use":{S.push(h?{type:"text",text:JSON.stringify(w.input)}:{type:"tool-call",toolCallId:w.id,toolName:w.name,input:JSON.stringify(w.input)});break}case"server_tool_use":{w.name==="text_editor_code_execution"||w.name==="bash_code_execution"?S.push({type:"tool-call",toolCallId:w.id,toolName:"code_execution",input:JSON.stringify({type:w.name,...w.input}),providerExecuted:!0}):(w.name==="web_search"||w.name==="code_execution"||w.name==="web_fetch")&&S.push({type:"tool-call",toolCallId:w.id,toolName:w.name,input:JSON.stringify(w.input),providerExecuted:!0});break}case"web_fetch_tool_result":{w.content.type==="web_fetch_result"?S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:w.content.url,retrievedAt:w.content.retrieved_at,content:{type:w.content.content.type,title:w.content.content.title,citations:w.content.content.citations,source:{type:w.content.content.source.type,mediaType:w.content.content.source.media_type,data:w.content.content.source.data}}},providerExecuted:!0}):w.content.type==="web_fetch_tool_result_error"&&S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:w.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(w.content)){S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"web_search",result:w.content.map(x=>{var I;return{url:x.url,title:x.title,pageAge:(I=x.page_age)!=null?I:null,encryptedContent:x.encrypted_content,type:x.type}}),providerExecuted:!0});for(let x of w.content)S.push({type:"source",sourceType:"url",id:this.generateId(),url:x.url,title:x.title,providerMetadata:{anthropic:{pageAge:(e=x.page_age)!=null?e:null}}})}else S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:w.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{w.content.type==="code_execution_result"?S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"code_execution",result:{type:w.content.type,stdout:w.content.stdout,stderr:w.content.stderr,return_code:w.content.return_code},providerExecuted:!0}):w.content.type==="code_execution_tool_result_error"&&S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:w.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{S.push({type:"tool-result",toolCallId:w.tool_use_id,toolName:"code_execution",result:w.content,providerExecuted:!0});break}}return{content:S,finishReason:c6({finishReason:f.stop_reason,isJsonResponseFromTool:h}),usage:{inputTokens:f.usage.input_tokens,outputTokens:f.usage.output_tokens,totalTokens:f.usage.input_tokens+f.usage.output_tokens,cachedInputTokens:(r=f.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:d},response:{id:(n=f.id)!=null?n:void 0,modelId:(o=f.model)!=null?o:void 0,headers:g,body:_},warnings:p,providerMetadata:{anthropic:{usage:f.usage,cacheCreationInputTokens:(i=f.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(a=f.stop_sequence)!=null?a:null,container:f.container?{expiresAt:f.container.expires_at,id:f.container.id,skills:(l=(c=f.container.skills)==null?void 0:c.map(w=>({type:w.type,skillId:w.skill_id,version:w.version})))!=null?l:null}:null}}}}async doStream(t){let{args:e,warnings:r,betas:n,usesJsonResponseTool:o}=await this.getArgs({...t,userSuppliedBetas:await this.getBetasFromHeaders(t.headers)}),i=this.extractCitationDocuments(t.prompt),a={...e,stream:!0},c=this.buildRequestUrl(!0),{responseHeaders:l,value:d}=await pA({url:c,headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:i6,successfulResponseHandler:QF(vle),abortSignal:t.abortSignal,fetch:this.config.fetch}),p="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},h={},y,g=null,f=null,_=null,S,w=this.generateId,x=!0,I,N=new HF,$=d.pipeThrough(new TransformStream({start(D){D.enqueue({type:"stream-start",warnings:r})},async flush(){N.isPending()&&N.resolve({stream:I,request:{body:a},response:{headers:l}})},transform(D,M){var Q,Z,F,ee,ne,se,we,Ee,rt,Ke;if(t.includeRawChunks&&M.enqueue({type:"raw",rawValue:D.rawValue}),!D.success){M.enqueue({type:"error",error:D.error});return}if(x){if(D.value.type==="error"){N.reject(new et({message:D.value.error.message,url:c,requestBodyValues:a,statusCode:D.value.error.type==="overloaded_error"?529:500,responseHeaders:l,responseBody:JSON.stringify(D.value.error),isRetryable:D.value.error.type==="overloaded_error"})),M.terminate();return}x=!1,N.resolve({stream:I,request:{body:a},response:{headers:l}})}let G=D.value;switch(G.type){case"ping":return;case"content_block_start":{let $e=G.content_block.type;switch(S=$e,$e){case"text":{h[G.index]={type:"text"},M.enqueue({type:"text-start",id:String(G.index)});return}case"thinking":{h[G.index]={type:"reasoning"},M.enqueue({type:"reasoning-start",id:String(G.index)});return}case"redacted_thinking":{h[G.index]={type:"reasoning"},M.enqueue({type:"reasoning-start",id:String(G.index),providerMetadata:{anthropic:{redactedData:G.content_block.data}}});return}case"tool_use":{h[G.index]=o?{type:"text"}:{type:"tool-call",toolCallId:G.content_block.id,toolName:G.content_block.name,input:"",firstDelta:!0},M.enqueue(o?{type:"text-start",id:String(G.index)}:{type:"tool-input-start",id:G.content_block.id,toolName:G.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(G.content_block.name)){h[G.index]={type:"tool-call",toolCallId:G.content_block.id,toolName:G.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let ye=G.content_block.name==="text_editor_code_execution"||G.content_block.name==="bash_code_execution"?"code_execution":G.content_block.name;M.enqueue({type:"tool-input-start",id:G.content_block.id,toolName:ye,providerExecuted:!0})}return}case"web_fetch_tool_result":{let ye=G.content_block;ye.content.type==="web_fetch_result"?M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:ye.content.url,retrievedAt:ye.content.retrieved_at,content:{type:ye.content.content.type,title:ye.content.content.title,citations:ye.content.content.citations,source:{type:ye.content.content.source.type,mediaType:ye.content.content.source.media_type,data:ye.content.content.source.data}}},providerExecuted:!0}):ye.content.type==="web_fetch_tool_result_error"&&M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:ye.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let ye=G.content_block;if(Array.isArray(ye.content)){M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"web_search",result:ye.content.map(L=>{var Qe;return{url:L.url,title:L.title,pageAge:(Qe=L.page_age)!=null?Qe:null,encryptedContent:L.encrypted_content,type:L.type}}),providerExecuted:!0});for(let L of ye.content)M.enqueue({type:"source",sourceType:"url",id:w(),url:L.url,title:L.title,providerMetadata:{anthropic:{pageAge:(Q=L.page_age)!=null?Q:null}}})}else M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:ye.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let ye=G.content_block;ye.content.type==="code_execution_result"?M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"code_execution",result:{type:ye.content.type,stdout:ye.content.stdout,stderr:ye.content.stderr,return_code:ye.content.return_code},providerExecuted:!0}):ye.content.type==="code_execution_tool_result_error"&&M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:ye.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let ye=G.content_block;M.enqueue({type:"tool-result",toolCallId:ye.tool_use_id,toolName:"code_execution",result:ye.content,providerExecuted:!0});return}default:{let ye=$e;throw new Error(`Unsupported content block type: ${ye}`)}}}case"content_block_stop":{if(h[G.index]!=null){let $e=h[G.index];switch($e.type){case"text":{M.enqueue({type:"text-end",id:String(G.index)});break}case"reasoning":{M.enqueue({type:"reasoning-end",id:String(G.index)});break}case"tool-call":if(!o){M.enqueue({type:"tool-input-end",id:$e.toolCallId});let ye=$e.toolName==="text_editor_code_execution"||$e.toolName==="bash_code_execution"?"code_execution":$e.toolName;M.enqueue({type:"tool-call",toolCallId:$e.toolCallId,toolName:ye,input:$e.input,providerExecuted:$e.providerExecuted})}break}delete h[G.index]}S=void 0;return}case"content_block_delta":{let $e=G.delta.type;switch($e){case"text_delta":{if(o)return;M.enqueue({type:"text-delta",id:String(G.index),delta:G.delta.text});return}case"thinking_delta":{M.enqueue({type:"reasoning-delta",id:String(G.index),delta:G.delta.thinking});return}case"signature_delta":{S==="thinking"&&M.enqueue({type:"reasoning-delta",id:String(G.index),delta:"",providerMetadata:{anthropic:{signature:G.delta.signature}}});return}case"input_json_delta":{let ye=h[G.index],L=G.delta.partial_json;if(L.length===0)return;if(o){if(ye?.type!=="text")return;M.enqueue({type:"text-delta",id:String(G.index),delta:L})}else{if(ye?.type!=="tool-call")return;ye.firstDelta&&(ye.toolName==="bash_code_execution"||ye.toolName==="text_editor_code_execution")&&(L=`{"type": "${ye.toolName}",${L.substring(1)}`),M.enqueue({type:"tool-input-delta",id:ye.toolCallId,delta:L}),ye.input+=L,ye.firstDelta=!1}return}case"citations_delta":{let ye=G.delta.citation,L=u6(ye,i,w);L&&M.enqueue(L);return}default:{let ye=$e;throw new Error(`Unsupported delta type: ${ye}`)}}}case"message_start":{m.inputTokens=G.message.usage.input_tokens,m.cachedInputTokens=(Z=G.message.usage.cache_read_input_tokens)!=null?Z:void 0,y={...G.message.usage},g=(F=G.message.usage.cache_creation_input_tokens)!=null?F:null,M.enqueue({type:"response-metadata",id:(ee=G.message.id)!=null?ee:void 0,modelId:(ne=G.message.model)!=null?ne:void 0});return}case"message_delta":{m.outputTokens=G.usage.output_tokens,m.totalTokens=((se=m.inputTokens)!=null?se:0)+((we=G.usage.output_tokens)!=null?we:0),p=c6({finishReason:G.delta.stop_reason,isJsonResponseFromTool:o}),f=(Ee=G.delta.stop_sequence)!=null?Ee:null,_=G.delta.container!=null?{expiresAt:G.delta.container.expires_at,id:G.delta.container.id,skills:(Ke=(rt=G.delta.container.skills)==null?void 0:rt.map($e=>({type:$e.type,skillId:$e.skill_id,version:$e.version})))!=null?Ke:null}:null,y={...y,...G.usage};return}case"message_stop":{M.enqueue({type:"finish",finishReason:p,usage:m,providerMetadata:{anthropic:{usage:y??null,cacheCreationInputTokens:g,stopSequence:f,container:_}}});return}case"error":{M.enqueue({type:"error",error:G.error});return}default:{let $e=G;throw new Error(`Unsupported chunk type: ${$e}`)}}}})),[O,R]=$.tee();I=R;let A=O.getReader();return(async()=>{try{let{done:D}=await A.read();D||await A.cancel()}catch{try{await A.cancel()}catch{}}finally{A.releaseLock()}})(),N.promise}};s(Hle,"getModelCapabilities");Zle=lt(()=>ut(u.object({command:u.string(),restart:u.boolean().optional()}))),Jle=Nr({id:"anthropic.bash_20241022",name:"bash",inputSchema:Zle}),Gle=lt(()=>ut(u.object({command:u.string(),restart:u.boolean().optional()}))),Kle=Nr({id:"anthropic.bash_20250124",name:"bash",inputSchema:Gle}),Wle=lt(()=>ut(u.object({action:u.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:u.array(u.number().int()).optional(),text:u.string().optional()}))),Qle=Nr({id:"anthropic.computer_20241022",name:"computer",inputSchema:Wle}),Xle=lt(()=>ut(u.object({action:u.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),duration:u.number().optional(),scroll_amount:u.number().optional(),scroll_direction:u.enum(["up","down","left","right"]).optional(),start_coordinate:u.tuple([u.number().int(),u.number().int()]).optional(),text:u.string().optional()}))),Yle=Nr({id:"anthropic.computer_20250124",name:"computer",inputSchema:Xle}),ede=lt(()=>ut(u.discriminatedUnion("command",[u.object({command:u.literal("view"),path:u.string(),view_range:u.tuple([u.number(),u.number()]).optional()}),u.object({command:u.literal("create"),path:u.string(),file_text:u.string()}),u.object({command:u.literal("str_replace"),path:u.string(),old_str:u.string(),new_str:u.string()}),u.object({command:u.literal("insert"),path:u.string(),insert_line:u.number(),insert_text:u.string()}),u.object({command:u.literal("delete"),path:u.string()}),u.object({command:u.literal("rename"),old_path:u.string(),new_path:u.string()})]))),tde=Nr({id:"anthropic.memory_20250818",name:"memory",inputSchema:ede}),rde=lt(()=>ut(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),nde=Nr({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:rde}),ode=lt(()=>ut(u.object({command:u.enum(["view","create","str_replace","insert","undo_edit"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),ide=Nr({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:ode}),sde=lt(()=>ut(u.object({command:u.enum(["view","create","str_replace","insert"]),path:u.string(),file_text:u.string().optional(),insert_line:u.number().int().optional(),new_str:u.string().optional(),old_str:u.string().optional(),view_range:u.array(u.number().int()).optional()}))),ade=Nr({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:sde}),cde={bash_20241022:Jle,bash_20250124:Kle,codeExecution_20250522:Mle,codeExecution_20250825:Lle,computer_20241022:Qle,computer_20250124:Yle,memory_20250818:tde,textEditor_20241022:nde,textEditor_20250124:ide,textEditor_20250429:ade,textEditor_20250728:Ele,webFetch_20250910:Rle,webSearch_20250305:Ale};s(ude,"createAnthropic");gA=ude()});function na(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function Pg(t){return Object.fromEntries([...t.headers])}function _A(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}function pde({error:t,url:e,requestBodyValues:r}){if(_A(t))return t;if(t instanceof TypeError&&dde.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new et({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}function mde(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function fde(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}function wA(t,...e){let r=new Headers(fde(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}function v6({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new an({message:`${n} API key must be a string.`});if(typeof process>"u")throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new an({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}function h6(t){let e=JSON.parse(t);return e===null||typeof e!="object"||gde.test(t)===!1&&yde.test(t)===!1?e:vde(e)}function vde(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}function _6(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return h6(t)}try{return h6(t)}finally{Error.stackTraceLimit=e}}function _de(t){return{[Ig]:!0,validate:t}}function bde(t){return typeof t=="object"&&t!==null&&Ig in t&&t[Ig]===!0&&"validate"in t}function wde(t){return bde(t)?t:typeof t=="function"?t():Sde(t)}function Sde(t){return _de(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new tr({value:e,cause:r.issues})}})}async function xde({value:t,schema:e}){let r=await SA({value:t,schema:e});if(!r.success)throw tr.wrap({value:t,cause:r.error});return r.value}async function SA({value:t,schema:e}){let r=wde(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:tr.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:tr.wrap({value:t,cause:n}),rawValue:t}}}async function Tde({text:t,schema:e}){try{let r=_6(t);return e==null?r:xde({value:r,schema:e})}catch(r){throw sn.isInstance(r)||tr.isInstance(r)?r:new sn({text:t,cause:r})}}async function b6({text:t,schema:e}){try{let r=_6(t);return e==null?{success:!0,value:r,rawValue:r}:await SA({value:r,schema:e})}catch(r){return{success:!1,error:sn.isInstance(r)?r:new sn({text:t,cause:r}),rawValue:void 0}}}function Ede({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new vs).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await b6({text:r,schema:e}))}}))}async function Fc({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await SA({value:e[t],schema:r});if(!n.success)throw new Wn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}function Ts({id:t,name:e,inputSchema:r}){return({execute:n,outputSchema:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:o,execute:n,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}function w6({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}async function oa(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}function zn(){return{}}function Ode(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==B.ZodAny&&(i.items=jt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}function $de(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function Rde(){return{type:"boolean"}}function T6(t,e){return jt(t.type._def,e)}function E6(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>E6(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Dde(t)}}function jde(t,e){return{...jt(t.innerType._def,e),default:t.defaultValue()}}function Mde(t,e){return e.effectStrategy==="input"?jt(t.schema._def,e):zn()}function zde(t){return{type:"string",enum:Array.from(t.values)}}function Lde(t,e){let r=[jt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),jt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Ude(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}function qde(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}function k6(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":bo(r,"email",n.message,e);break;case"format:idn-email":bo(r,"idn-email",n.message,e);break;case"pattern:zod":ln(r,_o.email,n.message,e);break}break;case"url":bo(r,"uri",n.message,e);break;case"uuid":bo(r,"uuid",n.message,e);break;case"regex":ln(r,n.regex,n.message,e);break;case"cuid":ln(r,_o.cuid,n.message,e);break;case"cuid2":ln(r,_o.cuid2,n.message,e);break;case"startsWith":ln(r,RegExp(`^${vA(n.value,e)}`),n.message,e);break;case"endsWith":ln(r,RegExp(`${vA(n.value,e)}$`),n.message,e);break;case"datetime":bo(r,"date-time",n.message,e);break;case"date":bo(r,"date",n.message,e);break;case"time":bo(r,"time",n.message,e);break;case"duration":bo(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{ln(r,RegExp(vA(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&bo(r,"ipv4",n.message,e),n.version!=="v4"&&bo(r,"ipv6",n.message,e);break}case"base64url":ln(r,_o.base64url,n.message,e);break;case"jwt":ln(r,_o.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&ln(r,_o.ipv4Cidr,n.message,e),n.version!=="v4"&&ln(r,_o.ipv6Cidr,n.message,e);break}case"emoji":ln(r,_o.emoji(),n.message,e);break;case"ulid":{ln(r,_o.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{bo(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{ln(r,_o.base64,n.message,e);break}}break}case"nanoid":ln(r,_o.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function vA(t,e){return e.patternStrategy==="escape"?Bde(t):t}function Bde(t){let e="";for(let r=0;r<t.length;r++)Fde.has(t[r])||(e+="\\"),e+=t[r];return e}function bo(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}function ln(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:y6(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=y6(e,n)}function y6(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function I6(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=jt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===B.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=k6(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===B.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===B.ZodBranded&&t.keyType._def.type._def.typeName===B.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=T6(t.keyType._def,e);return{...l,propertyNames:p}}}return l}function Vde(t,e){if(e.mapStrategy==="record")return I6(t,e);let r=jt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||zn(),n=jt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||zn();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Hde(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function Zde(){return{not:zn()}}function Jde(){return{type:"null"}}function Gde(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in bA&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=bA[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Kde(t,e)}function Wde(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[bA[t.innerType._def.typeName],"null"]};let r=jt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Qde(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function Xde(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=epe(c),d=jt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=Yde(t,e);return i!==void 0&&(r.additionalProperties=i),r}function Yde(t,e){if(t.catchall._def.typeName!=="ZodNever")return jt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function epe(t){try{return t.isOptional()}catch{return!0}}function npe(t,e){return jt(t.type._def,e)}function ope(t,e){let n={type:"array",uniqueItems:!0,items:jt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}function ipe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>jt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:jt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>jt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function spe(){return{not:zn()}}function ape(){return zn()}function jt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==Ade)return l}if(o&&!r){let l=lpe(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=upe(t,t.typeName,e),c=typeof a=="function"?jt(a(),e):a;if(c&&dpe(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}function hpe(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return P6(()=>fpe(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function gpe(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return P6(()=>bi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function ype(t){return"_zod"in t}function _r(t,e){return ype(t)?gpe(t,e):hpe(t,e)}function br(t){let e;return()=>(e==null&&(e=t()),e)}function P6(t,{validate:e}={}){return{[vpe]:!0,_type:void 0,[Ig]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}function bpe(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return _pe(e)}function xA(t){return t instanceof Uint8Array?bpe(t):t}function A6(t){return t?.replace(/\/$/,"")}var lde,Ag,dde,hde,gde,yde,Ig,kde,xs,Ide,S6,x6,ia,Pde,Ade,g6,Cde,Nde,Dde,Ude,yA,_o,Fde,bA,Kde,tpe,rpe,cpe,upe,lpe,dpe,ppe,mpe,fpe,vpe,_pe,aJe,Pn=b(()=>{Xe();Xe();Xe();Xe();Xe();Xe();yg();Xe();Xe();Xe();ze();Uo();Uo();Uo();xg();s(na,"combineHeaders");s(Pg,"extractResponseHeaders");lde=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Wn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),Ag=lde();s(_A,"isAbortError");dde=["fetch failed","failed to fetch"];s(pde,"handleFetchError");s(mde,"getRuntimeEnvironmentUserAgent");s(fde,"normalizeHeaders");s(wA,"withUserAgentSuffix");hde="3.0.18";s(v6,"loadApiKey");gde=/"__proto__"\s*:/,yde=/"constructor"\s*:/;s(h6,"_parse");s(vde,"filter");s(_6,"secureJsonParse");Ig=Symbol.for("vercel.ai.validator");s(_de,"validator");s(bde,"isValidator");s(wde,"asValidator");s(Sde,"standardSchemaValidator");s(xde,"validateTypes");s(SA,"safeValidateTypes");s(Tde,"parseJSON");s(b6,"safeParseJSON");s(Ede,"parseJsonEventStream");s(Fc,"parseProviderOptions");kde=s(()=>globalThis.fetch,"getOriginalFetch2"),xs=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Ide({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),Ide=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=kde()})=>{try{let c=await a(t,{method:"POST",headers:wA(e,`ai-sdk/provider-utils/${hde}`,mde()),body:r.content,signal:i}),l=Pg(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw _A(p)||et.isInstance(p)?p:new et({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(_A(d)||et.isInstance(d))?d:new et({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw pde({error:c,url:t,requestBodyValues:r.values})}},"postToApi");s(Ts,"createProviderDefinedToolFactory");s(w6,"createProviderDefinedToolFactoryWithOutputSchema");s(oa,"resolve");S6=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=Pg(n);if(a.trim()==="")return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await Tde({text:a,schema:t});return{responseHeaders:c,value:new et({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),x6=s(t=>async({response:e})=>{let r=Pg(e);if(e.body==null)throw new kc({});return{responseHeaders:r,value:Ede({stream:e.body,schema:t})}},"createEventSourceResponseHandler"),ia=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await b6({text:o,schema:t}),a=Pg(e);if(!i.success)throw new et({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),Pde=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),Ade=Symbol("Let zodToJsonSchema decide on which parser to use"),g6={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Cde=s(t=>typeof t=="string"?{...g6,name:t}:{...g6,...t},"getDefaultOptions");s(zn,"parseAnyDef");s(Ode,"parseArrayDef");s($de,"parseBigintDef");s(Rde,"parseBooleanDef");s(T6,"parseBrandedDef");Nde=s((t,e)=>jt(t.innerType._def,e),"parseCatchDef");s(E6,"parseDateDef");Dde=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");s(jde,"parseDefaultDef");s(Mde,"parseEffectsDef");s(zde,"parseEnumDef");Ude=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");s(Lde,"parseIntersectionDef");s(qde,"parseLiteralDef");yA=void 0,_o={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(yA===void 0&&(yA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),yA),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};s(k6,"parseStringDef");s(vA,"escapeLiteralCheckValue");Fde=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");s(Bde,"escapeNonAlphaNumeric");s(bo,"addFormat");s(ln,"addPattern");s(y6,"stringifyRegExpWithFlags");s(I6,"parseRecordDef");s(Vde,"parseMapDef");s(Hde,"parseNativeEnumDef");s(Zde,"parseNeverDef");s(Jde,"parseNullDef");bA={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};s(Gde,"parseUnionDef");Kde=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>jt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");s(Wde,"parseNullableDef");s(Qde,"parseNumberDef");s(Xde,"parseObjectDef");s(Yde,"decideAdditionalProperties");s(epe,"safeIsOptional");tpe=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return jt(t.innerType._def,e);let n=jt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:zn()},n]}:zn()},"parseOptionalDef"),rpe=s((t,e)=>{if(e.pipeStrategy==="input")return jt(t.in._def,e);if(e.pipeStrategy==="output")return jt(t.out._def,e);let r=jt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=jt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");s(npe,"parsePromiseDef");s(ope,"parseSetDef");s(ipe,"parseTupleDef");s(spe,"parseUndefinedDef");s(ape,"parseUnknownDef");cpe=s((t,e)=>jt(t.innerType._def,e),"parseReadonlyDef"),upe=s((t,e,r)=>{switch(e){case B.ZodString:return k6(t,r);case B.ZodNumber:return Qde(t);case B.ZodObject:return Xde(t,r);case B.ZodBigInt:return $de(t);case B.ZodBoolean:return Rde();case B.ZodDate:return E6(t,r);case B.ZodUndefined:return spe();case B.ZodNull:return Jde();case B.ZodArray:return Ode(t,r);case B.ZodUnion:case B.ZodDiscriminatedUnion:return Gde(t,r);case B.ZodIntersection:return Lde(t,r);case B.ZodTuple:return ipe(t,r);case B.ZodRecord:return I6(t,r);case B.ZodLiteral:return qde(t);case B.ZodEnum:return zde(t);case B.ZodNativeEnum:return Hde(t);case B.ZodNullable:return Wde(t,r);case B.ZodOptional:return tpe(t,r);case B.ZodMap:return Vde(t,r);case B.ZodSet:return ope(t,r);case B.ZodLazy:return()=>t.getter()._def;case B.ZodPromise:return npe(t,r);case B.ZodNaN:case B.ZodNever:return Zde();case B.ZodEffects:return Mde(t,r);case B.ZodAny:return zn();case B.ZodUnknown:return ape();case B.ZodDefault:return jde(t,r);case B.ZodBranded:return T6(t,r);case B.ZodReadonly:return cpe(t,r);case B.ZodCatch:return Nde(t,r);case B.ZodPipeline:return rpe(t,r);case B.ZodFunction:case B.ZodVoid:case B.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");s(jt,"parseDef");lpe=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Pde(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),zn()):e.$refStrategy==="seen"?zn():void 0}},"get$ref"),dpe=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),ppe=s(t=>{let e=Cde(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),mpe=s((t,e)=>{var r;let n=ppe(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=jt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:zn()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=jt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:zn(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),fpe=mpe;s(hpe,"zod3Schema");s(gpe,"zod4Schema");s(ype,"isZod4Schema");s(_r,"zodSchema");vpe=Symbol.for("vercel.ai.schema");s(br,"lazySchema");s(P6,"jsonSchema");({btoa:_pe,atob:aJe}=globalThis);s(bpe,"convertUint8ArrayToBase64");s(xA,"convertToBase64");s(A6,"withoutTrailingSlash")});function qo(t){if(t==null||Ipe(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:o,items:i,allOf:a,anyOf:c,oneOf:l,format:d,const:p,minLength:m,enum:h}=t,y={};if(r&&(y.description=r),n&&(y.required=n),d&&(y.format=d),p!==void 0&&(y.enum=[p]),e)if(Array.isArray(e)){let g=e.includes("null"),f=e.filter(_=>_!=="null");f.length===0?y.type="null":(y.anyOf=f.map(_=>({type:_})),g&&(y.nullable=!0))}else y.type=e;if(h!==void 0&&(y.enum=h),o!=null&&(y.properties=Object.entries(o).reduce((g,[f,_])=>(g[f]=qo(_),g),{})),i&&(y.items=Array.isArray(i)?i.map(qo):qo(i)),a&&(y.allOf=a.map(qo)),c)if(c.some(g=>typeof g=="object"&&g?.type==="null")){let g=c.filter(f=>!(typeof f=="object"&&f?.type==="null"));if(g.length===1){let f=qo(g[0]);typeof f=="object"&&(y.nullable=!0,Object.assign(y,f))}else y.anyOf=g.map(qo),y.nullable=!0}else y.anyOf=c.map(qo);return l&&(y.oneOf=l.map(qo)),m!==void 0&&(y.minLength=m),y}function Ipe(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)&&!t.additionalProperties}function Ppe(t,e){var r;let n=[],o=[],i=!0,a=(r=e?.isGemmaModel)!=null?r:!1;for(let{role:c,content:l}of t)switch(c){case"system":{if(!i)throw new Ct({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:l});break}case"user":{i=!1;let d=[];for(let p of l)switch(p.type){case"text":{d.push({text:p.text});break}case"file":{let m=p.mediaType==="image/*"?"image/jpeg":p.mediaType;d.push(p.data instanceof URL?{fileData:{mimeType:m,fileUri:p.data.toString()}}:{inlineData:{mimeType:m,data:xA(p.data)}});break}}o.push({role:"user",parts:d});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(d=>{var p,m,h;let y=((m=(p=d.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature)!=null?String((h=d.providerOptions.google)==null?void 0:h.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:y};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:y};case"file":{if(d.mediaType!=="image/png")throw new Ct({functionality:"Only PNG images are supported in assistant messages"});if(d.data instanceof URL)throw new Ct({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:xA(d.data)}}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:y}}}).filter(d=>d!==void 0)});break}case"tool":{i=!1;let d=[];for(let p of l){let m=p.output;if(m.type==="content")for(let h of m.value)switch(h.type){case"text":d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:h.text}}});break;case"media":d.push({inlineData:{mimeType:h.mediaType,data:h.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(h)});break}else d.push({functionResponse:{name:p.toolName,response:{name:p.toolName,content:m.value}}})}o.push({role:"user",parts:d});break}}if(a&&n.length>0&&o.length>0&&o[0].role==="user"){let c=n.map(l=>l.text).join(`

`);o[0].parts.unshift({text:c+`

`})}return{systemInstruction:n.length>0&&!a?{parts:n}:void 0,contents:o}}function C6(t){return t.includes("/")?t:`models/${t}`}function Cpe({tools:t,toolChoice:e,modelId:r}){var n;t=t?.length?t:void 0;let o=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(y=>y===r),a=r.includes("gemini-2")||r.includes("gemini-3")||i,c=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),l=r.includes("gemini-2.5");if(t==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let d=t.some(y=>y.type==="function"),p=t.some(y=>y.type==="provider-defined");if(d&&p){let y=t.filter(g=>g.type==="function");o.push({type:"unsupported-tool",tool:t.find(g=>g.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${y.map(g=>g.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(p){let y=[];return t.filter(f=>f.type==="provider-defined").forEach(f=>{switch(f.id){case"google.google_search":a?y.push({googleSearch:{}}):c?y.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:f.args.mode,dynamicThreshold:f.args.dynamicThreshold}}}):y.push({googleSearchRetrieval:{}});break;case"google.url_context":a?y.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:f,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":a?y.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:f,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?y.push({fileSearch:{...f.args}}):o.push({type:"unsupported-tool",tool:f,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":a?y.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:f.args.ragCorpus},similarity_top_k:f.args.topK}}}):o.push({type:"unsupported-tool",tool:f,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:f});break}}),{tools:y.length>0?y:void 0,toolConfig:void 0,toolWarnings:o}}let m=[];for(let y of t)switch(y.type){case"function":m.push({name:y.name,description:(n=y.description)!=null?n:"",parameters:qo(y.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:y});break}if(e==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:o};let h=e.type;switch(h){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[e.toolName]}},toolWarnings:o};default:{let y=h;throw new Ct({functionality:`tool choice type: ${y}`})}}}function O6({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}function $pe({parts:t,generateId:e}){let r=t?.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({type:"tool-call",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args),providerMetadata:n.thoughtSignature?{google:{thoughtSignature:n.thoughtSignature}}:void 0}))}function $6({groundingMetadata:t,generateId:e}){var r,n,o,i;if(!t?.groundingChunks)return;let a=[];for(let c of t.groundingChunks)if(c.web!=null)a.push({type:"source",sourceType:"url",id:e(),url:c.web.uri,title:(r=c.web.title)!=null?r:void 0});else if(c.retrievedContext!=null){let l=c.retrievedContext.uri,d=c.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))a.push({type:"source",sourceType:"url",id:e(),url:l,title:(n=c.retrievedContext.title)!=null?n:void 0});else if(l){let p=(o=c.retrievedContext.title)!=null?o:"Unknown Document",m="application/octet-stream",h;l.endsWith(".pdf")?(m="application/pdf",h=l.split("/").pop()):l.endsWith(".txt")?(m="text/plain",h=l.split("/").pop()):l.endsWith(".docx")?(m="application/vnd.openxmlformats-officedocument.wordprocessingml.document",h=l.split("/").pop()):l.endsWith(".doc")?(m="application/msword",h=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(m="text/markdown"),h=l.split("/").pop()),a.push({type:"source",sourceType:"document",id:e(),mediaType:m,title:p,filename:h})}else if(d){let p=(i=c.retrievedContext.title)!=null?i:"Unknown Document";a.push({type:"source",sourceType:"document",id:e(),mediaType:"application/octet-stream",title:p,filename:d.split("/").pop()})}}return a.length>0?a:void 0}function Zpe(t={}){var e,r;let n=(e=A6(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",o=(r=t.name)!=null?r:"google.generative-ai",i=s(()=>wA({"x-goog-api-key":v6({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers},`ai-sdk/google/${wpe}`),"getHeaders"),a=s(p=>{var m;return new Ope(p,{provider:o,baseURL:n,headers:i,generateId:(m=t.generateId)!=null?m:Ag,supportedUrls:s(()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),"supportedUrls"),fetch:t.fetch})},"createChatModel"),c=s(p=>new Tpe(p,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createEmbeddingModel"),l=s((p,m={})=>new Bpe(p,m,{provider:o,baseURL:n,headers:i,fetch:t.fetch}),"createImageModel"),d=s(function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(p)},"provider");return d.languageModel=a,d.chat=a,d.generativeAI=a,d.embedding=c,d.textEmbedding=c,d.textEmbeddingModel=c,d.image=l,d.imageModel=l,d.tools=Fpe,d}var wpe,Spe,Ld,xpe,Tpe,Epe,kpe,Ape,Ope,R6,N6,Cg,D6,j6,Rpe,Npe,Dpe,jpe,Mpe,zpe,Upe,Lpe,qpe,Fpe,Bpe,Vpe,Hpe,TA,M6=b(()=>{Pn();Xe();Pn();ze();Pn();ze();Pn();ze();Pn();ze();Xe();Pn();Pn();ze();Xe();Pn();ze();Pn();ze();Pn();ze();Pn();ze();Pn();ze();Pn();ze();wpe="2.0.44",Spe=br(()=>_r(u.object({error:u.object({code:u.number().nullable(),message:u.string(),status:u.string()})}))),Ld=S6({errorSchema:Spe,errorToMessage:s(t=>t.error.message,"errorToMessage")}),xpe=br(()=>_r(u.object({outputDimensionality:u.number().optional(),taskType:u.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),Tpe=class{static{s(this,"GoogleGenerativeAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){let o=await Fc({provider:"google",providerOptions:n,schema:xpe});if(t.length>this.maxEmbeddingsPerCall)throw new gg({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=na(await oa(this.config.headers),e);if(t.length===1){let{responseHeaders:d,value:p,rawValue:m}=await xs({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:t[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:Ld,successfulResponseHandler:ia(kpe),abortSignal:r,fetch:this.config.fetch});return{embeddings:[p.embedding.values],usage:void 0,response:{headers:d,body:m}}}let{responseHeaders:a,value:c,rawValue:l}=await xs({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:t.map(d=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:d}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:Ld,successfulResponseHandler:ia(Epe),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.embeddings.map(d=>d.values),usage:void 0,response:{headers:a,body:l}}}},Epe=br(()=>_r(u.object({embeddings:u.array(u.object({values:u.array(u.number())}))}))),kpe=br(()=>_r(u.object({embedding:u.object({values:u.array(u.number())})})));s(qo,"convertJSONSchemaToOpenAPISchema");s(Ipe,"isEmptyObjectSchema");s(Ppe,"convertToGoogleGenerativeAIMessages");s(C6,"getModelPath");Ape=br(()=>_r(u.object({responseModalities:u.array(u.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:u.object({thinkingBudget:u.number().optional(),includeThoughts:u.boolean().optional(),thinkingLevel:u.enum(["low","medium","high"]).optional()}).optional(),cachedContent:u.string().optional(),structuredOutputs:u.boolean().optional(),safetySettings:u.array(u.object({category:u.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:u.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:u.boolean().optional(),labels:u.record(u.string(),u.string()).optional(),mediaResolution:u.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:u.object({aspectRatio:u.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:u.enum(["1K","2K","4K"]).optional()}).optional()})));s(Cpe,"prepareTools");s(O6,"mapGoogleGenerativeAIFinishReason");Ope=class{static{s(this,"GoogleGenerativeAILanguageModel")}constructor(t,e){this.specificationVersion="v2";var r;this.modelId=t,this.config=e,this.generateId=(r=e.generateId)!=null?r:Ag}get provider(){return this.config.provider}get supportedUrls(){var t,e,r;return(r=(e=(t=this.config).supportedUrls)==null?void 0:e.call(t))!=null?r:{}}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y;let g=[],f=await Fc({provider:"google",providerOptions:h,schema:Ape});p?.some($=>$.type==="provider-defined"&&$.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&g.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let _=this.modelId.toLowerCase().startsWith("gemma-"),{contents:S,systemInstruction:w}=Ppe(t,{isGemmaModel:_}),{tools:x,toolConfig:I,toolWarnings:N}=Cpe({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:e,temperature:r,topK:o,topP:n,frequencyPenalty:i,presencePenalty:a,stopSequences:c,seed:d,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=f?.structuredOutputs)==null||y)?qo(l.schema):void 0,...f?.audioTimestamp&&{audioTimestamp:f.audioTimestamp},responseModalities:f?.responseModalities,thinkingConfig:f?.thinkingConfig,...f?.imageConfig&&{imageConfig:f.imageConfig},...f?.mediaResolution&&{mediaResolution:f.mediaResolution}},contents:S,systemInstruction:_?void 0:w,safetySettings:f?.safetySettings,tools:x,toolConfig:I,cachedContent:f?.cachedContent,labels:f?.labels},warnings:[...g,...N]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y;let{args:g,warnings:f}=await this.getArgs(t),_=JSON.stringify(g),S=na(await oa(this.config.headers),t.headers),{responseHeaders:w,value:x,rawValue:I}=await xs({url:`${this.config.baseURL}/${C6(this.modelId)}:generateContent`,headers:S,body:g,failedResponseHandler:Ld,successfulResponseHandler:ia(Rpe),abortSignal:t.abortSignal,fetch:this.config.fetch}),N=x.candidates[0],$=[],O=(r=(e=N.content)==null?void 0:e.parts)!=null?r:[],R=x.usageMetadata,A;for(let M of O)if("executableCode"in M&&((n=M.executableCode)!=null&&n.code)){let Q=this.config.generateId();A=Q,$.push({type:"tool-call",toolCallId:Q,toolName:"code_execution",input:JSON.stringify(M.executableCode),providerExecuted:!0})}else"codeExecutionResult"in M&&M.codeExecutionResult?($.push({type:"tool-result",toolCallId:A,toolName:"code_execution",result:{outcome:M.codeExecutionResult.outcome,output:M.codeExecutionResult.output},providerExecuted:!0}),A=void 0):"text"in M&&M.text!=null&&M.text.length>0?$.push({type:M.thought===!0?"reasoning":"text",text:M.text,providerMetadata:M.thoughtSignature?{google:{thoughtSignature:M.thoughtSignature}}:void 0}):"functionCall"in M?$.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:M.functionCall.name,input:JSON.stringify(M.functionCall.args),providerMetadata:M.thoughtSignature?{google:{thoughtSignature:M.thoughtSignature}}:void 0}):"inlineData"in M&&$.push({type:"file",data:M.inlineData.data,mediaType:M.inlineData.mimeType});let D=(o=$6({groundingMetadata:N.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(let M of D)$.push(M);return{content:$,finishReason:O6({finishReason:N.finishReason,hasToolCalls:$.some(M=>M.type==="tool-call")}),usage:{inputTokens:(i=R?.promptTokenCount)!=null?i:void 0,outputTokens:(a=R?.candidatesTokenCount)!=null?a:void 0,totalTokens:(c=R?.totalTokenCount)!=null?c:void 0,reasoningTokens:(l=R?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(d=R?.cachedContentTokenCount)!=null?d:void 0},warnings:f,providerMetadata:{google:{promptFeedback:(p=x.promptFeedback)!=null?p:null,groundingMetadata:(m=N.groundingMetadata)!=null?m:null,urlContextMetadata:(h=N.urlContextMetadata)!=null?h:null,safetyRatings:(y=N.safetyRatings)!=null?y:null,usageMetadata:R??null}},request:{body:_},response:{headers:w,body:I}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),o=na(await oa(this.config.headers),t.headers),{responseHeaders:i,value:a}=await xs({url:`${this.config.baseURL}/${C6(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:e,failedResponseHandler:Ld,successfulResponseHandler:x6(Npe),abortSignal:t.abortSignal,fetch:this.config.fetch}),c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d,p=this.config.generateId,m=!1,h=null,y=null,g=0,f=new Set,_;return{stream:a.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:r})},transform(S,w){var x,I,N,$,O,R,A,D,M,Q,Z,F;if(t.includeRawChunks&&w.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){w.enqueue({type:"error",error:S.error});return}let ee=S.value,ne=ee.usageMetadata;ne!=null&&(l.inputTokens=(x=ne.promptTokenCount)!=null?x:void 0,l.outputTokens=(I=ne.candidatesTokenCount)!=null?I:void 0,l.totalTokens=(N=ne.totalTokenCount)!=null?N:void 0,l.reasoningTokens=($=ne.thoughtsTokenCount)!=null?$:void 0,l.cachedInputTokens=(O=ne.cachedContentTokenCount)!=null?O:void 0);let se=(R=ee.candidates)==null?void 0:R[0];if(se==null)return;let we=se.content,Ee=$6({groundingMetadata:se.groundingMetadata,generateId:p});if(Ee!=null)for(let rt of Ee)rt.sourceType==="url"&&!f.has(rt.url)&&(f.add(rt.url),w.enqueue(rt));if(we!=null){let rt=(A=we.parts)!=null?A:[];for(let G of rt)if("executableCode"in G&&((D=G.executableCode)!=null&&D.code)){let $e=p();_=$e,w.enqueue({type:"tool-call",toolCallId:$e,toolName:"code_execution",input:JSON.stringify(G.executableCode),providerExecuted:!0}),m=!0}else if("codeExecutionResult"in G&&G.codeExecutionResult){let $e=_;$e&&(w.enqueue({type:"tool-result",toolCallId:$e,toolName:"code_execution",result:{outcome:G.codeExecutionResult.outcome,output:G.codeExecutionResult.output},providerExecuted:!0}),_=void 0)}else"text"in G&&G.text!=null&&G.text.length>0?G.thought===!0?(h!==null&&(w.enqueue({type:"text-end",id:h}),h=null),y===null&&(y=String(g++),w.enqueue({type:"reasoning-start",id:y,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})),w.enqueue({type:"reasoning-delta",id:y,delta:G.text,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})):(y!==null&&(w.enqueue({type:"reasoning-end",id:y}),y=null),h===null&&(h=String(g++),w.enqueue({type:"text-start",id:h,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})),w.enqueue({type:"text-delta",id:h,delta:G.text,providerMetadata:G.thoughtSignature?{google:{thoughtSignature:G.thoughtSignature}}:void 0})):"inlineData"in G&&w.enqueue({type:"file",mediaType:G.inlineData.mimeType,data:G.inlineData.data});let Ke=$pe({parts:we.parts,generateId:p});if(Ke!=null)for(let G of Ke)w.enqueue({type:"tool-input-start",id:G.toolCallId,toolName:G.toolName,providerMetadata:G.providerMetadata}),w.enqueue({type:"tool-input-delta",id:G.toolCallId,delta:G.args,providerMetadata:G.providerMetadata}),w.enqueue({type:"tool-input-end",id:G.toolCallId,providerMetadata:G.providerMetadata}),w.enqueue({type:"tool-call",toolCallId:G.toolCallId,toolName:G.toolName,input:G.args,providerMetadata:G.providerMetadata}),m=!0}se.finishReason!=null&&(c=O6({finishReason:se.finishReason,hasToolCalls:m}),d={google:{promptFeedback:(M=ee.promptFeedback)!=null?M:null,groundingMetadata:(Q=se.groundingMetadata)!=null?Q:null,urlContextMetadata:(Z=se.urlContextMetadata)!=null?Z:null,safetyRatings:(F=se.safetyRatings)!=null?F:null}},ne!=null&&(d.google.usageMetadata=ne))},flush(S){h!==null&&S.enqueue({type:"text-end",id:h}),y!==null&&S.enqueue({type:"reasoning-end",id:y}),S.enqueue({type:"finish",finishReason:c,usage:l,providerMetadata:d})}})),response:{headers:i},request:{body:n}}}};s($pe,"getToolCallsFromParts");s($6,"extractSources");R6=s(()=>u.object({webSearchQueries:u.array(u.string()).nullish(),retrievalQueries:u.array(u.string()).nullish(),searchEntryPoint:u.object({renderedContent:u.string()}).nullish(),groundingChunks:u.array(u.object({web:u.object({uri:u.string(),title:u.string().nullish()}).nullish(),retrievedContext:u.object({uri:u.string().nullish(),title:u.string().nullish(),text:u.string().nullish(),fileSearchStore:u.string().nullish()}).nullish()})).nullish(),groundingSupports:u.array(u.object({segment:u.object({startIndex:u.number().nullish(),endIndex:u.number().nullish(),text:u.string().nullish()}),segment_text:u.string().nullish(),groundingChunkIndices:u.array(u.number()).nullish(),supportChunkIndices:u.array(u.number()).nullish(),confidenceScores:u.array(u.number()).nullish(),confidenceScore:u.array(u.number()).nullish()})).nullish(),retrievalMetadata:u.union([u.object({webDynamicRetrievalScore:u.number()}),u.object({})]).nullish()}),"getGroundingMetadataSchema"),N6=s(()=>u.object({parts:u.array(u.union([u.object({functionCall:u.object({name:u.string(),args:u.unknown()}),thoughtSignature:u.string().nullish()}),u.object({inlineData:u.object({mimeType:u.string(),data:u.string()})}),u.object({executableCode:u.object({language:u.string(),code:u.string()}).nullish(),codeExecutionResult:u.object({outcome:u.string(),output:u.string()}).nullish(),text:u.string().nullish(),thought:u.boolean().nullish(),thoughtSignature:u.string().nullish()})])).nullish()}),"getContentSchema"),Cg=s(()=>u.object({category:u.string().nullish(),probability:u.string().nullish(),probabilityScore:u.number().nullish(),severity:u.string().nullish(),severityScore:u.number().nullish(),blocked:u.boolean().nullish()}),"getSafetyRatingSchema"),D6=u.object({cachedContentTokenCount:u.number().nullish(),thoughtsTokenCount:u.number().nullish(),promptTokenCount:u.number().nullish(),candidatesTokenCount:u.number().nullish(),totalTokenCount:u.number().nullish(),trafficType:u.string().nullish()}),j6=s(()=>u.object({urlMetadata:u.array(u.object({retrievedUrl:u.string(),urlRetrievalStatus:u.string()}))}),"getUrlContextMetadataSchema"),Rpe=br(()=>_r(u.object({candidates:u.array(u.object({content:N6().nullish().or(u.object({}).strict()),finishReason:u.string().nullish(),safetyRatings:u.array(Cg()).nullish(),groundingMetadata:R6().nullish(),urlContextMetadata:j6().nullish()})),usageMetadata:D6.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(Cg()).nullish()}).nullish()}))),Npe=br(()=>_r(u.object({candidates:u.array(u.object({content:N6().nullish(),finishReason:u.string().nullish(),safetyRatings:u.array(Cg()).nullish(),groundingMetadata:R6().nullish(),urlContextMetadata:j6().nullish()})).nullish(),usageMetadata:D6.nullish(),promptFeedback:u.object({blockReason:u.string().nullish(),safetyRatings:u.array(Cg()).nullish()}).nullish()}))),Dpe=w6({id:"google.code_execution",name:"code_execution",inputSchema:u.object({language:u.string().describe("The programming language of the code."),code:u.string().describe("The code to be executed.")}),outputSchema:u.object({outcome:u.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:u.string().describe("The output from the code execution.")})}),jpe=u.object({fileSearchStoreNames:u.array(u.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:u.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:u.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),Mpe=br(()=>_r(jpe)),zpe=Ts({id:"google.file_search",name:"file_search",inputSchema:Mpe}),Upe=Ts({id:"google.google_search",name:"google_search",inputSchema:br(()=>_r(u.object({mode:u.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:u.number().default(1)})))}),Lpe=Ts({id:"google.url_context",name:"url_context",inputSchema:br(()=>_r(u.object({})))}),qpe=Ts({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:u.object({ragCorpus:u.string(),topK:u.number().optional()})}),Fpe={googleSearch:Upe,urlContext:Lpe,fileSearch:zpe,codeExecution:Dpe,vertexRagStore:qpe},Bpe=class{static{s(this,"GoogleGenerativeAIImageModel")}constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=this.settings.maxImagesPerCall)!=null?t:4}get provider(){return this.config.provider}async doGenerate(t){var e,r,n;let{prompt:o,n:i=1,size:a="1024x1024",aspectRatio:c="1:1",seed:l,providerOptions:d,headers:p,abortSignal:m}=t,h=[];a!=null&&h.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&h.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let y=await Fc({provider:"google",providerOptions:d,schema:Hpe}),g=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,f={sampleCount:i};c!=null&&(f.aspectRatio=c),y&&Object.assign(f,y);let _={instances:[{prompt:o}],parameters:f},{responseHeaders:S,value:w}=await xs({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:na(await oa(this.config.headers),p),body:_,failedResponseHandler:Ld,successfulResponseHandler:ia(Vpe),abortSignal:m,fetch:this.config.fetch});return{images:w.predictions.map(x=>x.bytesBase64Encoded),warnings:h??[],providerMetadata:{google:{images:w.predictions.map(x=>({}))}},response:{timestamp:g,modelId:this.modelId,headers:S}}}},Vpe=br(()=>_r(u.object({predictions:u.array(u.object({bytesBase64Encoded:u.string()})).default([])}))),Hpe=br(()=>_r(u.object({personGeneration:u.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:u.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));s(Zpe,"createGoogleGenerativeAI");TA=Zpe()});function qr(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function qd(t){return Object.fromEntries([...t.headers])}function IA(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}function Kpe({error:t,url:e,requestBodyValues:r}){if(IA(t))return t;if(t instanceof TypeError&&Gpe.includes(t.message.toLowerCase())){let n=t.cause;if(n!=null)return new et({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r,isRetryable:!0})}return t}function Wpe(t=globalThis){var e,r,n;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(n=(r=t.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Qpe(t){if(t==null)return{};let e={};if(t instanceof Headers)t.forEach((r,n)=>{e[n.toLowerCase()]=r});else{Array.isArray(t)||(t=Object.entries(t));for(let[r,n]of t)n!=null&&(e[r.toLowerCase()]=n)}return e}function AA(t,...e){let r=new Headers(Qpe(t)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...e].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}function q6({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new an({message:`${n} API key must be a string.`});if(typeof process>"u")throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new an({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new an({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}function F6({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=process.env[e],!(t==null||typeof t!="string")))return t}function B6(t){var e;let[r,n=""]=t.toLowerCase().split("/");return(e={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?e:n}function z6(t){let e=JSON.parse(t);return e===null||typeof e!="object"||Ype.test(t)===!1&&eme.test(t)===!1?e:tme(e)}function tme(t){let e=[t];for(;e.length;){let r=e;e=[];for(let n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let o in n){let i=n[o];i&&typeof i=="object"&&e.push(i)}}}return t}function CA(t){let{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return z6(t)}try{return z6(t)}finally{Error.stackTraceLimit=e}}function rme(t){return{[Og]:!0,validate:t}}function nme(t){return typeof t=="object"&&t!==null&&Og in t&&t[Og]===!0&&"validate"in t}function Ht(t){let e;return()=>(e==null&&(e=t()),e)}function ome(t){return nme(t)?t:typeof t=="function"?t():ime(t)}function ime(t){return rme(async e=>{let r=await t["~standard"].validate(e);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new tr({value:e,cause:r.issues})}})}async function Fo({value:t,schema:e}){let r=await OA({value:t,schema:e});if(!r.success)throw tr.wrap({value:t,cause:r.error});return r.value}async function OA({value:t,schema:e}){let r=ome(e);try{if(r.validate==null)return{success:!0,value:t,rawValue:t};let n=await r.validate(t);return n.success?{success:!0,value:n.value,rawValue:t}:{success:!1,error:tr.wrap({value:t,cause:n.error}),rawValue:t}}catch(n){return{success:!1,error:tr.wrap({value:t,cause:n}),rawValue:t}}}async function sme({text:t,schema:e}){try{let r=CA(t);return e==null?r:Fo({value:r,schema:e})}catch(r){throw sn.isInstance(r)||tr.isInstance(r)?r:new sn({text:t,cause:r})}}async function V6({text:t,schema:e}){try{let r=CA(t);return e==null?{success:!0,value:r,rawValue:r}:await OA({value:r,schema:e})}catch(r){return{success:!1,error:sn.isInstance(r)?r:new sn({text:t,cause:r}),rawValue:void 0}}}function $A(t){try{return CA(t),!0}catch{return!1}}function ame({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new vs).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await V6({text:r,schema:e}))}}))}async function pn({provider:t,providerOptions:e,schema:r}){if(e?.[t]==null)return;let n=await OA({value:e[t],schema:r});if(!n.success)throw new Wn({argument:"providerOptions",message:`invalid ${t} provider options`,cause:n.error});return n.value}function Xn({id:t,name:e,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l,...d})=>({type:"provider-defined",id:t,name:e,args:d,inputSchema:r,outputSchema:n,execute:o,toModelOutput:i,onInputStart:a,onInputDelta:c,onInputAvailable:l})}function Un(){return{}}function pme(t,e){var r,n,o;let i={type:"array"};return(r=t.type)!=null&&r._def&&((o=(n=t.type)==null?void 0:n._def)==null?void 0:o.typeName)!==B.ZodAny&&(i.items=Mt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(i.minItems=t.minLength.value),t.maxLength&&(i.maxItems=t.maxLength.value),t.exactLength&&(i.minItems=t.exactLength.value,i.maxItems=t.exactLength.value),i}function mme(t){let e={type:"integer",format:"int64"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function fme(){return{type:"boolean"}}function K6(t,e){return Mt(t.type._def,e)}function W6(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>W6(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return gme(t)}}function yme(t,e){return{...Mt(t.innerType._def,e),default:t.defaultValue()}}function vme(t,e){return e.effectStrategy==="input"?Mt(t.schema._def,e):Un()}function _me(t){return{type:"string",enum:Array.from(t.values)}}function wme(t,e){let r=[Mt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Mt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(bme(o))n.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...c}=o;i=c}n.push(i)}}),n.length?{allOf:n}:void 0}function Sme(t){let e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}function Q6(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(e.emailStrategy){case"format:email":So(r,"email",n.message,e);break;case"format:idn-email":So(r,"idn-email",n.message,e);break;case"pattern:zod":dn(r,wo.email,n.message,e);break}break;case"url":So(r,"uri",n.message,e);break;case"uuid":So(r,"uuid",n.message,e);break;case"regex":dn(r,n.regex,n.message,e);break;case"cuid":dn(r,wo.cuid,n.message,e);break;case"cuid2":dn(r,wo.cuid2,n.message,e);break;case"startsWith":dn(r,RegExp(`^${kA(n.value,e)}`),n.message,e);break;case"endsWith":dn(r,RegExp(`${kA(n.value,e)}$`),n.message,e);break;case"datetime":So(r,"date-time",n.message,e);break;case"date":So(r,"date",n.message,e);break;case"time":So(r,"time",n.message,e);break;case"duration":So(r,"duration",n.message,e);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{dn(r,RegExp(kA(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&So(r,"ipv4",n.message,e),n.version!=="v4"&&So(r,"ipv6",n.message,e);break}case"base64url":dn(r,wo.base64url,n.message,e);break;case"jwt":dn(r,wo.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&dn(r,wo.ipv4Cidr,n.message,e),n.version!=="v4"&&dn(r,wo.ipv6Cidr,n.message,e);break}case"emoji":dn(r,wo.emoji(),n.message,e);break;case"ulid":{dn(r,wo.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{So(r,"binary",n.message,e);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{dn(r,wo.base64,n.message,e);break}}break}case"nanoid":dn(r,wo.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function kA(t,e){return e.patternStrategy==="escape"?Tme(t):t}function Tme(t){let e="";for(let r=0;r<t.length;r++)xme.has(t[r])||(e+="\\"),e+=t[r];return e}function So(t,e,r,n){var o;t.format||(o=t.anyOf)!=null&&o.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):t.format=e}function dn(t,e,r,n){var o;t.pattern||(o=t.allOf)!=null&&o.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:L6(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):t.pattern=L6(e,n)}function L6(t,e){var r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},o=n.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,l=!1;for(let d=0;d<o.length;d++){if(a){i+=o[d],a=!1;continue}if(n.i){if(c){if(o[d].match(/[a-z]/)){l?(i+=o[d],i+=`${o[d-2]}-${o[d]}`.toUpperCase(),l=!1):o[d+1]==="-"&&((r=o[d+2])!=null&&r.match(/[a-z]/))?(i+=o[d],l=!0):i+=`${o[d]}${o[d].toUpperCase()}`;continue}}else if(o[d].match(/[a-z]/)){i+=`[${o[d]}${o[d].toUpperCase()}]`;continue}}if(n.m){if(o[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[d]==="."){i+=c?`${o[d]}\r
`:`[${o[d]}\r
]`;continue}i+=o[d],o[d]==="\\"?a=!0:c&&o[d]==="]"?c=!1:!c&&o[d]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function X6(t,e){var r,n,o,i,a,c;let l={type:"object",additionalProperties:(r=Mt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:e.allowedAdditionalProperties};if(((n=t.keyType)==null?void 0:n._def.typeName)===B.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...p}=Q6(t.keyType._def,e);return{...l,propertyNames:p}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===B.ZodEnum)return{...l,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===B.ZodBranded&&t.keyType._def.type._def.typeName===B.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){let{type:d,...p}=K6(t.keyType._def,e);return{...l,propertyNames:p}}}return l}function Eme(t,e){if(e.mapStrategy==="record")return X6(t,e);let r=Mt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Un(),n=Mt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Un();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function kme(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function Ime(){return{not:Un()}}function Pme(){return{type:"null"}}function Ame(t,e){let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in PA&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=PA[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,c)=>c.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Cme(t,e)}function Ome(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[PA[t.innerType._def.typeName],"null"]};let r=Mt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function $me(t){let e={type:"number"};if(!t.checks)return e;for(let r of t.checks)switch(r.kind){case"int":e.type="integer";break;case"min":r.inclusive?e.minimum=r.value:e.exclusiveMinimum=r.value;break;case"max":r.inclusive?e.maximum=r.value:e.exclusiveMaximum=r.value;break;case"multipleOf":e.multipleOf=r.value;break}return e}function Rme(t,e){let r={type:"object",properties:{}},n=[],o=t.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let l=Dme(c),d=Mt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});d!==void 0&&(r.properties[a]=d,l||n.push(a))}n.length&&(r.required=n);let i=Nme(t,e);return i!==void 0&&(r.additionalProperties=i),r}function Nme(t,e){if(t.catchall._def.typeName!=="ZodNever")return Mt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Dme(t){try{return t.isOptional()}catch{return!0}}function zme(t,e){return Mt(t.type._def,e)}function Ume(t,e){let n={type:"array",uniqueItems:!0,items:Mt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(n.minItems=t.minSize.value),t.maxSize&&(n.maxItems=t.maxSize.value),n}function Lme(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Mt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Mt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Mt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function qme(){return{not:Un()}}function Fme(){return Un()}function Mt(t,e,r=!1){var n;let o=e.seen.get(t);if(e.override){let l=(n=e.override)==null?void 0:n.call(e,t,e,o,r);if(l!==lme)return l}if(o&&!r){let l=Hme(o,e);if(l!==void 0)return l}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=Vme(t,t.typeName,e),c=typeof a=="function"?Mt(a(),e):a;if(c&&Zme(t,e,c),e.postProcess){let l=e.postProcess(c,t,e);return i.jsonSchema=c,l}return i.jsonSchema=c,c}function Wme(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Y6(()=>Kme(t,{$refStrategy:n?"root":"none"}),{validate:s(async o=>{let i=await t.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function Qme(t,e){var r;let n=(r=e?.useReferences)!=null?r:!1;return Y6(()=>bi(t,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:s(async o=>{let i=await Si(t,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}},"validate")})}function Xme(t){return"_zod"in t}function qe(t,e){return Xme(t)?Qme(t,e):Wme(t,e)}function lr(t){let e;return()=>(e==null&&(e=t()),e)}function Y6(t,{validate:e}={}){return{[Yme]:!0,_type:void 0,[Og]:!0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:e}}function eB(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=tfe(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function rfe(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return efe(e)}function Es(t){return t instanceof Uint8Array?rfe(t):t}function tB(t){return t?.replace(/\/$/,"")}var Jpe,xo,Gpe,Xpe,Ype,eme,Og,cme,mn,H6,Z6,J6,Bc,Yn,G6,ume,lme,U6,dme,hme,gme,bme,EA,wo,xme,PA,Cme,jme,Mme,Bme,Vme,Hme,Zme,Jme,Gme,Kme,Yme,efe,tfe,It=b(()=>{Xe();Xe();Xe();Xe();Xe();Xe();yg();Xe();Xe();Xe();ze();Uo();Uo();Uo();xg();s(qr,"combineHeaders");s(qd,"extractResponseHeaders");Jpe=s(({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=s(()=>{let i=r.length,a=new Array(e);for(let c=0;c<e;c++)a[c]=r[Math.random()*i|0];return a.join("")},"generator");if(t==null)return o;if(r.includes(n))throw new Wn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${t}${n}${o()}`},"createIdGenerator"),xo=Jpe();s(IA,"isAbortError");Gpe=["fetch failed","failed to fetch"];s(Kpe,"handleFetchError");s(Wpe,"getRuntimeEnvironmentUserAgent");s(Qpe,"normalizeHeaders");s(AA,"withUserAgentSuffix");Xpe="3.0.18";s(q6,"loadApiKey");s(F6,"loadOptionalSetting");s(B6,"mediaTypeToExtension");Ype=/"__proto__"\s*:/,eme=/"constructor"\s*:/;s(z6,"_parse");s(tme,"filter");s(CA,"secureJsonParse");Og=Symbol.for("vercel.ai.validator");s(rme,"validator");s(nme,"isValidator");s(Ht,"lazyValidator");s(ome,"asValidator");s(ime,"standardSchemaValidator");s(Fo,"validateTypes");s(OA,"safeValidateTypes");s(sme,"parseJSON");s(V6,"safeParseJSON");s($A,"isParsableJson");s(ame,"parseJsonEventStream");s(pn,"parseProviderOptions");cme=s(()=>globalThis.fetch,"getOriginalFetch2"),mn=s(async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Z6({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postJsonToApi"),H6=s(async({url:t,headers:e,formData:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a})=>Z6({url:t,headers:e,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:a}),"postFormDataToApi"),Z6=s(async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:a=cme()})=>{try{let c=await a(t,{method:"POST",headers:AA(e,`ai-sdk/provider-utils/${Xpe}`,Wpe()),body:r.content,signal:i}),l=qd(c);if(!c.ok){let d;try{d=await o({response:c,url:t,requestBodyValues:r.values})}catch(p){throw IA(p)||et.isInstance(p)?p:new et({message:"Failed to process error response",cause:p,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw d.value}try{return await n({response:c,url:t,requestBodyValues:r.values})}catch(d){throw d instanceof Error&&(IA(d)||et.isInstance(d))?d:new et({message:"Failed to process successful response",cause:d,statusCode:c.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(c){throw Kpe({error:c,url:t,requestBodyValues:r.values})}},"postToApi");s(Xn,"createProviderDefinedToolFactoryWithOutputSchema");J6=s(({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let a=await n.text(),c=qd(n);if(a.trim()==="")return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})};try{let l=await sme({text:a,schema:t});return{responseHeaders:c,value:new et({message:e(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,data:l,isRetryable:r?.(n,l)})}}catch{return{responseHeaders:c,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:c,responseBody:a,isRetryable:r?.(n)})}}},"createJsonErrorResponseHandler"),Bc=s(t=>async({response:e})=>{let r=qd(e);if(e.body==null)throw new kc({});return{responseHeaders:r,value:ame({stream:e.body,schema:t})}},"createEventSourceResponseHandler"),Yn=s(t=>async({response:e,url:r,requestBodyValues:n})=>{let o=await e.text(),i=await V6({text:o,schema:t}),a=qd(e);if(!i.success)throw new et({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},"createJsonResponseHandler"),G6=s(()=>async({response:t,url:e,requestBodyValues:r})=>{let n=qd(t);if(!t.body)throw new et({message:"Response body is empty",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0});try{let o=await t.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(o)}}catch(o){throw new et({message:"Failed to read response as array buffer",url:e,requestBodyValues:r,statusCode:t.status,responseHeaders:n,responseBody:void 0,cause:o})}},"createBinaryResponseHandler"),ume=s((t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath"),lme=Symbol("Let zodToJsonSchema decide on which parser to use"),U6={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},dme=s(t=>typeof t=="string"?{...U6,name:t}:{...U6,...t},"getDefaultOptions");s(Un,"parseAnyDef");s(pme,"parseArrayDef");s(mme,"parseBigintDef");s(fme,"parseBooleanDef");s(K6,"parseBrandedDef");hme=s((t,e)=>Mt(t.innerType._def,e),"parseCatchDef");s(W6,"parseDateDef");gme=s(t=>{let e={type:"integer",format:"unix-time"};for(let r of t.checks)switch(r.kind){case"min":e.minimum=r.value;break;case"max":e.maximum=r.value;break}return e},"integerDateParser");s(yme,"parseDefaultDef");s(vme,"parseEffectsDef");s(_me,"parseEnumDef");bme=s(t=>"type"in t&&t.type==="string"?!1:"allOf"in t,"isJsonSchema7AllOfType");s(wme,"parseIntersectionDef");s(Sme,"parseLiteralDef");EA=void 0,wo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:s(()=>(EA===void 0&&(EA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),EA),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};s(Q6,"parseStringDef");s(kA,"escapeLiteralCheckValue");xme=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");s(Tme,"escapeNonAlphaNumeric");s(So,"addFormat");s(dn,"addPattern");s(L6,"stringifyRegExpWithFlags");s(X6,"parseRecordDef");s(Eme,"parseMapDef");s(kme,"parseNativeEnumDef");s(Ime,"parseNeverDef");s(Pme,"parseNullDef");PA={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};s(Ame,"parseUnionDef");Cme=s((t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>Mt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");s(Ome,"parseNullableDef");s($me,"parseNumberDef");s(Rme,"parseObjectDef");s(Nme,"decideAdditionalProperties");s(Dme,"safeIsOptional");jme=s((t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Mt(t.innerType._def,e);let n=Mt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Un()},n]}:Un()},"parseOptionalDef"),Mme=s((t,e)=>{if(e.pipeStrategy==="input")return Mt(t.in._def,e);if(e.pipeStrategy==="output")return Mt(t.out._def,e);let r=Mt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Mt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}},"parsePipelineDef");s(zme,"parsePromiseDef");s(Ume,"parseSetDef");s(Lme,"parseTupleDef");s(qme,"parseUndefinedDef");s(Fme,"parseUnknownDef");Bme=s((t,e)=>Mt(t.innerType._def,e),"parseReadonlyDef"),Vme=s((t,e,r)=>{switch(e){case B.ZodString:return Q6(t,r);case B.ZodNumber:return $me(t);case B.ZodObject:return Rme(t,r);case B.ZodBigInt:return mme(t);case B.ZodBoolean:return fme();case B.ZodDate:return W6(t,r);case B.ZodUndefined:return qme();case B.ZodNull:return Pme();case B.ZodArray:return pme(t,r);case B.ZodUnion:case B.ZodDiscriminatedUnion:return Ame(t,r);case B.ZodIntersection:return wme(t,r);case B.ZodTuple:return Lme(t,r);case B.ZodRecord:return X6(t,r);case B.ZodLiteral:return Sme(t);case B.ZodEnum:return _me(t);case B.ZodNativeEnum:return kme(t);case B.ZodNullable:return Ome(t,r);case B.ZodOptional:return jme(t,r);case B.ZodMap:return Eme(t,r);case B.ZodSet:return Ume(t,r);case B.ZodLazy:return()=>t.getter()._def;case B.ZodPromise:return zme(t,r);case B.ZodNaN:case B.ZodNever:return Ime();case B.ZodEffects:return vme(t,r);case B.ZodAny:return Un();case B.ZodUnknown:return Fme();case B.ZodDefault:return yme(t,r);case B.ZodBranded:return K6(t,r);case B.ZodReadonly:return Bme(t,r);case B.ZodCatch:return hme(t,r);case B.ZodPipeline:return Mme(t,r);case B.ZodFunction:case B.ZodVoid:case B.ZodSymbol:return;default:return(n=>{})(e)}},"selectParser");s(Mt,"parseDef");Hme=s((t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ume(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Un()):e.$refStrategy==="seen"?Un():void 0}},"get$ref"),Zme=s((t,e,r)=>(t.description&&(r.description=t.description),r),"addMeta"),Jme=s(t=>{let e=dme(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}},"getRefs"),Gme=s((t,e)=>{var r;let n=Jme(e),o=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[p,m])=>{var h;return{...d,[p]:(h=Mt(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0))!=null?h:Un()}},{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,a=(r=Mt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?r:Un(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let l=i===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...o,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},"zodToJsonSchema"),Kme=Gme;s(Wme,"zod3Schema");s(Qme,"zod4Schema");s(Xme,"isZod4Schema");s(qe,"zodSchema");Yme=Symbol.for("vercel.ai.schema");s(lr,"lazySchema");s(Y6,"jsonSchema");({btoa:efe,atob:tfe}=globalThis);s(eB,"convertBase64ToUint8Array");s(rfe,"convertUint8ArrayToBase64");s(Es,"convertToBase64");s(tB,"withoutTrailingSlash")});function nfe({prompt:t,systemMessageMode:e="system"}){let r=[],n=[];for(let{role:o,content:i}of t)switch(o){case"system":{switch(e){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let a=e;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map((a,c)=>{var l,d,p;switch(a.type){case"text":return{type:"text",text:a.text};case"file":if(a.mediaType.startsWith("image/")){let m=a.mediaType==="image/*"?"image/jpeg":a.mediaType;return{type:"image_url",image_url:{url:a.data instanceof URL?a.data.toString():`data:${m};base64,${Es(a.data)}`,detail:(d=(l=a.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(a.mediaType.startsWith("audio/")){if(a.data instanceof URL)throw new Ct({functionality:"audio file parts with URLs"});switch(a.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:Es(a.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:Es(a.data),format:"mp3"}};default:throw new Ct({functionality:`audio content parts with media type ${a.mediaType}`})}}else if(a.mediaType==="application/pdf"){if(a.data instanceof URL)throw new Ct({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof a.data=="string"&&a.data.startsWith("file-")?{file_id:a.data}:{filename:(p=a.filename)!=null?p:`part-${c}.pdf`,file_data:`data:application/pdf;base64,${Es(a.data)}`}}}else throw new Ct({functionality:`file part media type ${a.mediaType}`})}})});break}case"assistant":{let a="",c=[];for(let l of i)switch(l.type){case"text":{a+=l.text;break}case"tool-call":{c.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}r.push({role:"assistant",content:a,tool_calls:c.length>0?c:void 0});break}case"tool":{for(let a of i){let c=a.output,l;switch(c.type){case"text":case"error-text":l=c.value;break;case"content":case"json":case"error-json":l=JSON.stringify(c.value);break}r.push({role:"tool",tool_call_id:a.toolCallId,content:l})}break}default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return{messages:r,warnings:n}}function RA({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r?new Date(r*1e3):void 0}}function rB(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}function afe({tools:t,toolChoice:e,structuredOutputs:r,strictJsonSchema:n}){t=t?.length?t:void 0;let o=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let i=[];for(let c of t)switch(c.type){case"function":i.push({type:"function",function:{name:c.name,description:c.description,parameters:c.inputSchema,strict:r?n:void 0}});break;default:o.push({type:"unsupported-tool",tool:c});break}if(e==null)return{tools:i,toolChoice:void 0,toolWarnings:o};let a=e.type;switch(a){case"auto":case"none":case"required":return{tools:i,toolChoice:a,toolWarnings:o};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:e.toolName}},toolWarnings:o};default:{let c=a;throw new Ct({functionality:`tool choice type: ${c}`})}}}function dB(t){return(t.startsWith("o")||t.startsWith("gpt-5"))&&!t.startsWith("gpt-5-chat")}function ufe(t){return t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")}function lfe(t){return t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini")}function dfe(t){var e,r;return dB(t)?(r=(e=pfe[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}function mfe({prompt:t,user:e="user",assistant:r="assistant"}){let n="";t[0].role==="system"&&(n+=`${t[0].content}

`,t=t.slice(1));for(let{role:o,content:i}of t)switch(o){case"system":throw new cF({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let a=i.map(c=>{switch(c.type){case"text":return c.text}}).filter(Boolean).join("");n+=`${e}:
${a}

`;break}case"assistant":{let a=i.map(c=>{switch(c.type){case"text":return c.text;case"tool-call":throw new Ct({functionality:"tool-call messages"})}}).join("");n+=`${r}:
${a}

`;break}case"tool":throw new Ct({functionality:"tool messages"});default:{let a=o;throw new Error(`Unsupported role: ${a}`)}}return n+=`${r}:
`,{prompt:n,stopSequences:[`
${e}:`]}}function nB({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function oB(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}function sB(t,e){return e?e.some(r=>t.startsWith(r)):!1}async function Gfe({prompt:t,systemMessageMode:e,fileIdPrefixes:r,store:n,hasLocalShellTool:o=!1}){var i,a,c,l;let d=[],p=[];for(let{role:m,content:h}of t)switch(m){case"system":{switch(e){case"system":{d.push({role:"system",content:h});break}case"developer":{d.push({role:"developer",content:h});break}case"remove":{p.push({type:"other",message:"system messages are removed for this model"});break}default:{let y=e;throw new Error(`Unsupported system message mode: ${y}`)}}break}case"user":{d.push({role:"user",content:h.map((y,g)=>{var f,_,S;switch(y.type){case"text":return{type:"input_text",text:y.text};case"file":if(y.mediaType.startsWith("image/")){let w=y.mediaType==="image/*"?"image/jpeg":y.mediaType;return{type:"input_image",...y.data instanceof URL?{image_url:y.data.toString()}:typeof y.data=="string"&&sB(y.data,r)?{file_id:y.data}:{image_url:`data:${w};base64,${Es(y.data)}`},detail:(_=(f=y.providerOptions)==null?void 0:f.openai)==null?void 0:_.imageDetail}}else{if(y.mediaType==="application/pdf")return y.data instanceof URL?{type:"input_file",file_url:y.data.toString()}:{type:"input_file",...typeof y.data=="string"&&sB(y.data,r)?{file_id:y.data}:{filename:(S=y.filename)!=null?S:`part-${g}.pdf`,file_data:`data:application/pdf;base64,${Es(y.data)}`}};throw new Ct({functionality:`file part media type ${y.mediaType}`})}}})});break}case"assistant":{let y={},g={};for(let f of h)switch(f.type){case"text":{let _=(a=(i=f.providerOptions)==null?void 0:i.openai)==null?void 0:a.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}d.push({role:"assistant",content:[{type:"output_text",text:f.text}],id:_});break}case"tool-call":{if(g[f.toolCallId]=f,f.providerExecuted)break;let _=(l=(c=f.providerOptions)==null?void 0:c.openai)==null?void 0:l.itemId;if(n&&_!=null){d.push({type:"item_reference",id:_});break}if(o&&f.toolName==="local_shell"){let S=await Fo({value:f.input,schema:fB});d.push({type:"local_shell_call",call_id:f.toolCallId,id:_,action:{type:"exec",command:S.action.command,timeout_ms:S.action.timeoutMs,user:S.action.user,working_directory:S.action.workingDirectory,env:S.action.env}});break}d.push({type:"function_call",call_id:f.toolCallId,name:f.toolName,arguments:JSON.stringify(f.input),id:_});break}case"tool-result":{n?d.push({type:"item_reference",id:f.toolCallId}):p.push({type:"other",message:`Results for OpenAI tool ${f.toolName} are not sent to the API when store is false`});break}case"reasoning":{let _=await pn({provider:"openai",providerOptions:f.providerOptions,schema:Kfe}),S=_?.itemId;if(S!=null){let w=y[S];if(n)w===void 0&&(d.push({type:"item_reference",id:S}),y[S]={type:"reasoning",id:S,summary:[]});else{let x=[];f.text.length>0?x.push({type:"summary_text",text:f.text}):w!==void 0&&p.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(f)}.`}),w===void 0?(y[S]={type:"reasoning",id:S,encrypted_content:_?.reasoningEncryptedContent,summary:x},d.push(y[S])):(w.summary.push(...x),_?.reasoningEncryptedContent!=null&&(w.encrypted_content=_.reasoningEncryptedContent))}}else p.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(f)}.`});break}}break}case"tool":{for(let y of h){let g=y.output;if(o&&y.toolName==="local_shell"&&g.type==="json"){let _=await Fo({value:g.value,schema:hB});d.push({type:"local_shell_call_output",call_id:y.toolCallId,output:_.output});break}let f;switch(g.type){case"text":case"error-text":f=g.value;break;case"json":case"error-json":f=JSON.stringify(g.value);break;case"content":f=g.value.map(_=>{switch(_.type){case"text":return{type:"input_text",text:_.text};case"media":return _.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${_.mediaType};base64,${_.data}`}:{type:"input_file",filename:"data",file_data:`data:${_.mediaType};base64,${_.data}`}}});break}d.push({type:"function_call_output",call_id:y.toolCallId,output:f})}break}default:{let y=m;throw new Error(`Unsupported role: ${y}`)}}return{input:d,warnings:p}}function aB({finishReason:t,hasFunctionCall:e}){switch(t){case void 0:case null:return e?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return e?"tool-calls":"unknown"}}async function ehe({tools:t,toolChoice:e,strictJsonSchema:r}){t=t?.length?t:void 0;let n=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let o=[];for(let a of t)switch(a.type){case"function":o.push({type:"function",name:a.name,description:a.description,parameters:a.inputSchema,strict:r});break;case"provider-defined":{switch(a.id){case"openai.file_search":{let c=await Fo({value:a.args,schema:Afe});o.push({type:"file_search",vector_store_ids:c.vectorStoreIds,max_num_results:c.maxNumResults,ranking_options:c.ranking?{ranker:c.ranking.ranker,score_threshold:c.ranking.scoreThreshold}:void 0,filters:c.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.web_search_preview":{let c=await Fo({value:a.args,schema:Bfe});o.push({type:"web_search_preview",search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.web_search":{let c=await Fo({value:a.args,schema:zfe});o.push({type:"web_search",filters:c.filters!=null?{allowed_domains:c.filters.allowedDomains}:void 0,external_web_access:c.externalWebAccess,search_context_size:c.searchContextSize,user_location:c.userLocation});break}case"openai.code_interpreter":{let c=await Fo({value:a.args,schema:kfe});o.push({type:"code_interpreter",container:c.container==null?{type:"auto",file_ids:void 0}:typeof c.container=="string"?c.container:{type:"auto",file_ids:c.container.fileIds}});break}case"openai.image_generation":{let c=await Fo({value:a.args,schema:$fe});o.push({type:"image_generation",background:c.background,input_fidelity:c.inputFidelity,input_image_mask:c.inputImageMask?{file_id:c.inputImageMask.fileId,image_url:c.inputImageMask.imageUrl}:void 0,model:c.model,size:c.size,quality:c.quality,moderation:c.moderation,output_format:c.outputFormat,output_compression:c.outputCompression});break}}break}default:n.push({type:"unsupported-tool",tool:a});break}if(e==null)return{tools:o,toolChoice:void 0,toolWarnings:n};let i=e.type;switch(i){case"auto":case"none":case"required":return{tools:o,toolChoice:i,toolWarnings:n};case"tool":return{tools:o,toolChoice:e.toolName==="code_interpreter"||e.toolName==="file_search"||e.toolName==="image_generation"||e.toolName==="web_search_preview"||e.toolName==="web_search"?{type:e.toolName}:{type:"function",name:e.toolName},toolWarnings:n};default:{let a=i;throw new Ct({functionality:`tool choice type: ${a}`})}}}function rhe(t){return t.type==="response.output_text.delta"}function nhe(t){return t.type==="response.output_item.done"}function ohe(t){return t.type==="response.completed"||t.type==="response.incomplete"}function ihe(t){return t.type==="response.created"}function she(t){return t.type==="response.function_call_arguments.delta"}function ahe(t){return t.type==="response.code_interpreter_call_code.delta"}function che(t){return t.type==="response.code_interpreter_call_code.done"}function cB(t){return t.type==="response.output_item.added"}function uhe(t){return t.type==="response.output_text.annotation.added"}function lhe(t){return t.type==="error"}function dhe(t){let e=t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),r=t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini"),n={systemMessageMode:"system",supportsFlexProcessing:e,supportsPriorityProcessing:r};return t.startsWith("gpt-5-chat")?{...n,isReasoningModel:!1}:t.startsWith("o")||t.startsWith("gpt-5")||t.startsWith("codex-")||t.startsWith("computer-use")?{...n,isReasoningModel:!0,systemMessageMode:"developer"}:{...n,isReasoningModel:!1}}function uB(t){var e;switch(t.type){case"search":return{action:{type:"search",query:(e=t.query)!=null?e:void 0},...t.sources!=null&&{sources:t.sources}};case"open_page":return{action:{type:"openPage",url:t.url}};case"find":return{action:{type:"find",url:t.url,pattern:t.pattern}}}}function vhe(t={}){var e,r;let n=(e=tB(F6({settingValue:t.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?e:"https://api.openai.com/v1",o=(r=t.name)!=null?r:"openai",i=s(()=>AA({Authorization:`Bearer ${q6({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers},`ai-sdk/openai/${yhe}`),"getHeaders"),a=s(f=>new cfe(f,{provider:`${o}.chat`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createChatModel"),c=s(f=>new gfe(f,{provider:`${o}.completion`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createCompletionModel"),l=s(f=>new _fe(f,{provider:`${o}.embedding`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createEmbeddingModel"),d=s(f=>new xfe(f,{provider:`${o}.image`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createImageModel"),p=s(f=>new ghe(f,{provider:`${o}.transcription`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createTranscriptionModel"),m=s(f=>new mhe(f,{provider:`${o}.speech`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch}),"createSpeechModel"),h=s(f=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return y(f)},"createLanguageModel"),y=s(f=>new the(f,{provider:`${o}.responses`,url:s(({path:_})=>`${n}${_}`,"url"),headers:i,fetch:t.fetch,fileIdPrefixes:["file-"]}),"createResponsesModel"),g=s(function(f){return h(f)},"provider");return g.languageModel=h,g.chat=a,g.completion=c,g.responses=y,g.embedding=l,g.textEmbedding=l,g.textEmbeddingModel=l,g.image=d,g.imageModel=d,g.transcription=p,g.transcriptionModel=p,g.speech=m,g.speechModel=m,g.tools=Jfe,g}var NA,Bo,ofe,ife,sfe,cfe,pfe,ffe,hfe,iB,gfe,yfe,vfe,_fe,bfe,wfe,Sfe,xfe,Tfe,Efe,kfe,Ife,Pfe,pB,mB,Afe,Cfe,Ofe,$fe,Rfe,Nfe,Dfe,jfe,fB,hB,Mfe,zfe,Ufe,Lfe,qfe,Ffe,Bfe,Vfe,Hfe,Zfe,Jfe,Kfe,Wfe,Qfe,gB,Xfe,YGe,Yfe,the,phe,mhe,fhe,hhe,lB,ghe,yhe,DA,yB=b(()=>{It();Xe();It();ze();It();Xe();It();It();ze();It();ze();Xe();It();Xe();ze();It();It();ze();Xe();It();It();ze();It();ze();It();It();ze();It();ze();It();ze();It();ze();It();ze();It();ze();It();ze();Xe();It();Xe();It();ze();It();ze();It();ze();Xe();It();It();It();ze();It();It();ze();It();ze();NA=u.object({error:u.object({message:u.string(),type:u.string().nullish(),param:u.any().nullish(),code:u.union([u.string(),u.number()]).nullish()})}),Bo=J6({errorSchema:NA,errorToMessage:s(t=>t.error.message,"errorToMessage")});s(nfe,"convertToOpenAIChatMessages");s(RA,"getResponseMetadata");s(rB,"mapOpenAIFinishReason");ofe=Ht(()=>qe(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({message:u.object({role:u.literal("assistant").nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({id:u.string().nullish(),type:u.literal("function"),function:u.object({name:u.string(),arguments:u.string()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}),index:u.number(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}))),ife=Ht(()=>qe(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({delta:u.object({role:u.enum(["assistant"]).nullish(),content:u.string().nullish(),tool_calls:u.array(u.object({index:u.number(),id:u.string().nullish(),type:u.literal("function").nullish(),function:u.object({name:u.string().nullish(),arguments:u.string().nullish()})})).nullish(),annotations:u.array(u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()})).nullish()}).nullish(),logprobs:u.object({content:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}).nullish(),finish_reason:u.string().nullish(),index:u.number()})),usage:u.object({prompt_tokens:u.number().nullish(),completion_tokens:u.number().nullish(),total_tokens:u.number().nullish(),prompt_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),completion_tokens_details:u.object({reasoning_tokens:u.number().nullish(),accepted_prediction_tokens:u.number().nullish(),rejected_prediction_tokens:u.number().nullish()}).nullish()}).nullish()}),NA]))),sfe=Ht(()=>qe(u.object({logitBias:u.record(u.coerce.number(),u.number()).optional(),logprobs:u.union([u.boolean(),u.number()]).optional(),parallelToolCalls:u.boolean().optional(),user:u.string().optional(),reasoningEffort:u.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:u.number().optional(),store:u.boolean().optional(),metadata:u.record(u.string().max(64),u.string().max(512)).optional(),prediction:u.record(u.string(),u.any()).optional(),structuredOutputs:u.boolean().optional(),serviceTier:u.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:u.boolean().optional(),textVerbosity:u.enum(["low","medium","high"]).optional(),promptCacheKey:u.string().optional(),promptCacheRetention:u.enum(["in_memory","24h"]).optional(),safetyIdentifier:u.string().optional()})));s(afe,"prepareChatTools");cfe=class{static{s(this,"OpenAIChatLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,seed:d,tools:p,toolChoice:m,providerOptions:h}){var y,g,f,_;let S=[],w=(y=await pn({provider:"openai",providerOptions:h,schema:sfe}))!=null?y:{},x=(g=w.structuredOutputs)!=null?g:!0;o!=null&&S.push({type:"unsupported-setting",setting:"topK"}),l?.type==="json"&&l.schema!=null&&!x&&S.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:I,warnings:N}=nfe({prompt:t,systemMessageMode:dfe(this.modelId)});S.push(...N);let $=(f=w.strictJsonSchema)!=null?f:!1,O={model:this.modelId,logit_bias:w.logitBias,logprobs:w.logprobs===!0||typeof w.logprobs=="number"?!0:void 0,top_logprobs:typeof w.logprobs=="number"?w.logprobs:typeof w.logprobs=="boolean"&&w.logprobs?0:void 0,user:w.user,parallel_tool_calls:w.parallelToolCalls,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,response_format:l?.type==="json"?x&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,strict:$,name:(_=l.name)!=null?_:"response",description:l.description}}:{type:"json_object"}:void 0,stop:c,seed:d,verbosity:w.textVerbosity,max_completion_tokens:w.maxCompletionTokens,store:w.store,metadata:w.metadata,prediction:w.prediction,reasoning_effort:w.reasoningEffort,service_tier:w.serviceTier,prompt_cache_key:w.promptCacheKey,prompt_cache_retention:w.promptCacheRetention,safety_identifier:w.safetyIdentifier,messages:I};dB(this.modelId)?(O.temperature!=null&&(O.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),O.frequency_penalty!=null&&(O.frequency_penalty=void 0,S.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),O.presence_penalty!=null&&(O.presence_penalty=void 0,S.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),O.logit_bias!=null&&(O.logit_bias=void 0,S.push({type:"other",message:"logitBias is not supported for reasoning models"})),O.logprobs!=null&&(O.logprobs=void 0,S.push({type:"other",message:"logprobs is not supported for reasoning models"})),O.top_logprobs!=null&&(O.top_logprobs=void 0,S.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),O.max_tokens!=null&&(O.max_completion_tokens==null&&(O.max_completion_tokens=O.max_tokens),O.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&O.temperature!=null&&(O.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),w.serviceTier==="flex"&&!ufe(this.modelId)&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),O.service_tier=void 0),w.serviceTier==="priority"&&!lfe(this.modelId)&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),O.service_tier=void 0);let{tools:R,toolChoice:A,toolWarnings:D}=afe({tools:p,toolChoice:m,structuredOutputs:x,strictJsonSchema:$});return{args:{...O,tools:R,tool_choice:A},warnings:[...S,...D]}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g;let{args:f,warnings:_}=await this.getArgs(t),{responseHeaders:S,value:w,rawValue:x}=await mn({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:f,failedResponseHandler:Bo,successfulResponseHandler:Yn(ofe),abortSignal:t.abortSignal,fetch:this.config.fetch}),I=w.choices[0],N=[],$=I.message.content;$!=null&&$.length>0&&N.push({type:"text",text:$});for(let D of(e=I.message.tool_calls)!=null?e:[])N.push({type:"tool-call",toolCallId:(r=D.id)!=null?r:xo(),toolName:D.function.name,input:D.function.arguments});for(let D of(n=I.message.annotations)!=null?n:[])N.push({type:"source",sourceType:"url",id:xo(),url:D.url,title:D.title});let O=(o=w.usage)==null?void 0:o.completion_tokens_details,R=(i=w.usage)==null?void 0:i.prompt_tokens_details,A={openai:{}};return O?.accepted_prediction_tokens!=null&&(A.openai.acceptedPredictionTokens=O?.accepted_prediction_tokens),O?.rejected_prediction_tokens!=null&&(A.openai.rejectedPredictionTokens=O?.rejected_prediction_tokens),((a=I.logprobs)==null?void 0:a.content)!=null&&(A.openai.logprobs=I.logprobs.content),{content:N,finishReason:rB(I.finish_reason),usage:{inputTokens:(l=(c=w.usage)==null?void 0:c.prompt_tokens)!=null?l:void 0,outputTokens:(p=(d=w.usage)==null?void 0:d.completion_tokens)!=null?p:void 0,totalTokens:(h=(m=w.usage)==null?void 0:m.total_tokens)!=null?h:void 0,reasoningTokens:(y=O?.reasoning_tokens)!=null?y:void 0,cachedInputTokens:(g=R?.cached_tokens)!=null?g:void 0},request:{body:f},response:{...RA(w),headers:S,body:x},warnings:_,providerMetadata:A}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await mn({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:n,failedResponseHandler:Bo,successfulResponseHandler:Bc(ife),abortSignal:t.abortSignal,fetch:this.config.fetch}),a=[],c="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!1,p=!1,m={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(h){h.enqueue({type:"stream-start",warnings:r})},transform(h,y){var g,f,_,S,w,x,I,N,$,O,R,A,D,M,Q,Z,F,ee,ne,se,we,Ee,rt,Ke;if(t.includeRawChunks&&y.enqueue({type:"raw",rawValue:h.rawValue}),!h.success){c="error",y.enqueue({type:"error",error:h.error});return}let G=h.value;if("error"in G){c="error",y.enqueue({type:"error",error:G.error});return}if(!d){let L=RA(G);Object.values(L).some(Boolean)&&(d=!0,y.enqueue({type:"response-metadata",...RA(G)}))}G.usage!=null&&(l.inputTokens=(g=G.usage.prompt_tokens)!=null?g:void 0,l.outputTokens=(f=G.usage.completion_tokens)!=null?f:void 0,l.totalTokens=(_=G.usage.total_tokens)!=null?_:void 0,l.reasoningTokens=(w=(S=G.usage.completion_tokens_details)==null?void 0:S.reasoning_tokens)!=null?w:void 0,l.cachedInputTokens=(I=(x=G.usage.prompt_tokens_details)==null?void 0:x.cached_tokens)!=null?I:void 0,((N=G.usage.completion_tokens_details)==null?void 0:N.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=($=G.usage.completion_tokens_details)==null?void 0:$.accepted_prediction_tokens),((O=G.usage.completion_tokens_details)==null?void 0:O.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=(R=G.usage.completion_tokens_details)==null?void 0:R.rejected_prediction_tokens));let $e=G.choices[0];if($e?.finish_reason!=null&&(c=rB($e.finish_reason)),((A=$e?.logprobs)==null?void 0:A.content)!=null&&(m.openai.logprobs=$e.logprobs.content),$e?.delta==null)return;let ye=$e.delta;if(ye.content!=null&&(p||(y.enqueue({type:"text-start",id:"0"}),p=!0),y.enqueue({type:"text-delta",id:"0",delta:ye.content})),ye.tool_calls!=null)for(let L of ye.tool_calls){let Qe=L.index;if(a[Qe]==null){if(L.type!=="function")throw new hg({data:L,message:"Expected 'function' type."});if(L.id==null)throw new hg({data:L,message:"Expected 'id' to be a string."});if(((D=L.function)==null?void 0:D.name)==null)throw new hg({data:L,message:"Expected 'function.name' to be a string."});y.enqueue({type:"tool-input-start",id:L.id,toolName:L.function.name}),a[Qe]={id:L.id,type:"function",function:{name:L.function.name,arguments:(M=L.function.arguments)!=null?M:""},hasFinished:!1};let zt=a[Qe];((Q=zt.function)==null?void 0:Q.name)!=null&&((Z=zt.function)==null?void 0:Z.arguments)!=null&&(zt.function.arguments.length>0&&y.enqueue({type:"tool-input-delta",id:zt.id,delta:zt.function.arguments}),$A(zt.function.arguments)&&(y.enqueue({type:"tool-input-end",id:zt.id}),y.enqueue({type:"tool-call",toolCallId:(F=zt.id)!=null?F:xo(),toolName:zt.function.name,input:zt.function.arguments}),zt.hasFinished=!0));continue}let Ot=a[Qe];Ot.hasFinished||(((ee=L.function)==null?void 0:ee.arguments)!=null&&(Ot.function.arguments+=(se=(ne=L.function)==null?void 0:ne.arguments)!=null?se:""),y.enqueue({type:"tool-input-delta",id:Ot.id,delta:(we=L.function.arguments)!=null?we:""}),((Ee=Ot.function)==null?void 0:Ee.name)!=null&&((rt=Ot.function)==null?void 0:rt.arguments)!=null&&$A(Ot.function.arguments)&&(y.enqueue({type:"tool-input-end",id:Ot.id}),y.enqueue({type:"tool-call",toolCallId:(Ke=Ot.id)!=null?Ke:xo(),toolName:Ot.function.name,input:Ot.function.arguments}),Ot.hasFinished=!0))}if(ye.annotations!=null)for(let L of ye.annotations)y.enqueue({type:"source",sourceType:"url",id:xo(),url:L.url,title:L.title})},flush(h){p&&h.enqueue({type:"text-end",id:"0"}),h.enqueue({type:"finish",finishReason:c,usage:l,...m!=null?{providerMetadata:m}:{}})}})),request:{body:n},response:{headers:o}}}};s(dB,"isReasoningModel");s(ufe,"supportsFlexProcessing");s(lfe,"supportsPriorityProcessing");s(dfe,"getSystemMessageMode");pfe={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};s(mfe,"convertToOpenAICompletionPrompt");s(nB,"getResponseMetadata2");s(oB,"mapOpenAIFinishReason2");ffe=Ht(()=>qe(u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}))),hfe=Ht(()=>qe(u.union([u.object({id:u.string().nullish(),created:u.number().nullish(),model:u.string().nullish(),choices:u.array(u.object({text:u.string(),finish_reason:u.string().nullish(),index:u.number(),logprobs:u.object({tokens:u.array(u.string()),token_logprobs:u.array(u.number()),top_logprobs:u.array(u.record(u.string(),u.number())).nullish()}).nullish()})),usage:u.object({prompt_tokens:u.number(),completion_tokens:u.number(),total_tokens:u.number()}).nullish()}),NA]))),iB=Ht(()=>qe(u.object({echo:u.boolean().optional(),logitBias:u.record(u.string(),u.number()).optional(),suffix:u.string().optional(),user:u.string().optional(),logprobs:u.union([u.boolean(),u.number()]).optional()}))),gfe=class{static{s(this,"OpenAICompletionLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={},this.modelId=t,this.config=e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:e,temperature:r,topP:n,topK:o,frequencyPenalty:i,presencePenalty:a,stopSequences:c,responseFormat:l,tools:d,toolChoice:p,seed:m,providerOptions:h}){let y=[],g={...await pn({provider:"openai",providerOptions:h,schema:iB}),...await pn({provider:this.providerOptionsName,providerOptions:h,schema:iB})};o!=null&&y.push({type:"unsupported-setting",setting:"topK"}),d?.length&&y.push({type:"unsupported-setting",setting:"tools"}),p!=null&&y.push({type:"unsupported-setting",setting:"toolChoice"}),l!=null&&l.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:f,stopSequences:_}=mfe({prompt:t}),S=[..._??[],...c??[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,logprobs:g?.logprobs===!0?0:g?.logprobs===!1?void 0:g?.logprobs,suffix:g.suffix,user:g.user,max_tokens:e,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:a,seed:m,prompt:f,stop:S.length>0?S:void 0},warnings:y}}async doGenerate(t){var e,r,n;let{args:o,warnings:i}=await this.getArgs(t),{responseHeaders:a,value:c,rawValue:l}=await mn({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:o,failedResponseHandler:Bo,successfulResponseHandler:Yn(ffe),abortSignal:t.abortSignal,fetch:this.config.fetch}),d=c.choices[0],p={openai:{}};return d.logprobs!=null&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:(e=c.usage)==null?void 0:e.prompt_tokens,outputTokens:(r=c.usage)==null?void 0:r.completion_tokens,totalTokens:(n=c.usage)==null?void 0:n.total_tokens},finishReason:oB(d.finish_reason),request:{body:o},response:{...nB(c),headers:a,body:l},providerMetadata:p,warnings:i}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n={...e,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:i}=await mn({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:n,failedResponseHandler:Bo,successfulResponseHandler:Bc(hfe),abortSignal:t.abortSignal,fetch:this.config.fetch}),a="unknown",c={openai:{}},l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,m){if(t.includeRawChunks&&m.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){a="error",m.enqueue({type:"error",error:p.error});return}let h=p.value;if("error"in h){a="error",m.enqueue({type:"error",error:h.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...nB(h)}),m.enqueue({type:"text-start",id:"0"})),h.usage!=null&&(l.inputTokens=h.usage.prompt_tokens,l.outputTokens=h.usage.completion_tokens,l.totalTokens=h.usage.total_tokens);let y=h.choices[0];y?.finish_reason!=null&&(a=oB(y.finish_reason)),y?.logprobs!=null&&(c.openai.logprobs=y.logprobs),y?.text!=null&&y.text.length>0&&m.enqueue({type:"text-delta",id:"0",delta:y.text})},flush(p){d||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:a,providerMetadata:c,usage:l})}})),request:{body:n},response:{headers:o}}}},yfe=Ht(()=>qe(u.object({dimensions:u.number().optional(),user:u.string().optional()}))),vfe=Ht(()=>qe(u.object({data:u.array(u.object({embedding:u.array(u.number())})),usage:u.object({prompt_tokens:u.number()}).nullish()}))),_fe=class{static{s(this,"OpenAIEmbeddingModel")}constructor(t,e){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=e}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:r,providerOptions:n}){var o;if(t.length>this.maxEmbeddingsPerCall)throw new gg({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let i=(o=await pn({provider:"openai",providerOptions:n,schema:yfe}))!=null?o:{},{responseHeaders:a,value:c,rawValue:l}=await mn({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:qr(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:Bo,successfulResponseHandler:Yn(vfe),abortSignal:r,fetch:this.config.fetch});return{embeddings:c.data.map(d=>d.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,response:{headers:a,body:l}}}},bfe=Ht(()=>qe(u.object({data:u.array(u.object({b64_json:u.string(),revised_prompt:u.string().nullish()}))}))),wfe={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},Sfe=new Set(["gpt-image-1","gpt-image-1-mini"]),xfe=class{static{s(this,"OpenAIImageModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get maxImagesPerCall(){var t;return(t=wfe[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:o,providerOptions:i,headers:a,abortSignal:c}){var l,d,p,m;let h=[];n!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),o!=null&&h.push({type:"unsupported-setting",setting:"seed"});let y=(p=(d=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:d.call(l))!=null?p:new Date,{value:g,responseHeaders:f}=await mn({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:qr(this.config.headers(),a),body:{model:this.modelId,prompt:t,n:e,size:r,...(m=i.openai)!=null?m:{},...Sfe.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Bo,successfulResponseHandler:Yn(bfe),abortSignal:c,fetch:this.config.fetch});return{images:g.data.map(_=>_.b64_json),warnings:h,response:{timestamp:y,modelId:this.modelId,headers:f},providerMetadata:{openai:{images:g.data.map(_=>_.revised_prompt?{revisedPrompt:_.revised_prompt}:null)}}}}},Tfe=lr(()=>qe(u.object({code:u.string().nullish(),containerId:u.string()}))),Efe=lr(()=>qe(u.object({outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullish()}))),kfe=lr(()=>qe(u.object({container:u.union([u.string(),u.object({fileIds:u.array(u.string()).optional()})]).optional()}))),Ife=Xn({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:Tfe,outputSchema:Efe}),Pfe=s((t={})=>Ife(t),"codeInterpreter"),pB=u.object({key:u.string(),type:u.enum(["eq","ne","gt","gte","lt","lte"]),value:u.union([u.string(),u.number(),u.boolean()])}),mB=u.object({type:u.enum(["and","or"]),filters:u.array(u.union([pB,u.lazy(()=>mB)]))}),Afe=lr(()=>qe(u.object({vectorStoreIds:u.array(u.string()),maxNumResults:u.number().optional(),ranking:u.object({ranker:u.string().optional(),scoreThreshold:u.number().optional()}).optional(),filters:u.union([pB,mB]).optional()}))),Cfe=lr(()=>qe(u.object({queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),fileId:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullable()}))),Ofe=Xn({id:"openai.file_search",name:"file_search",inputSchema:u.object({}),outputSchema:Cfe}),$fe=lr(()=>qe(u.object({background:u.enum(["auto","opaque","transparent"]).optional(),inputFidelity:u.enum(["low","high"]).optional(),inputImageMask:u.object({fileId:u.string().optional(),imageUrl:u.string().optional()}).optional(),model:u.string().optional(),moderation:u.enum(["auto"]).optional(),outputCompression:u.number().int().min(0).max(100).optional(),outputFormat:u.enum(["png","jpeg","webp"]).optional(),partialImages:u.number().int().min(0).max(3).optional(),quality:u.enum(["auto","low","medium","high"]).optional(),size:u.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),Rfe=lr(()=>qe(u.object({}))),Nfe=lr(()=>qe(u.object({result:u.string()}))),Dfe=Xn({id:"openai.image_generation",name:"image_generation",inputSchema:Rfe,outputSchema:Nfe}),jfe=s((t={})=>Dfe(t),"imageGeneration"),fB=lr(()=>qe(u.object({action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeoutMs:u.number().optional(),user:u.string().optional(),workingDirectory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}))),hB=lr(()=>qe(u.object({output:u.string()}))),Mfe=Xn({id:"openai.local_shell",name:"local_shell",inputSchema:fB,outputSchema:hB}),zfe=lr(()=>qe(u.object({externalWebAccess:u.boolean().optional(),filters:u.object({allowedDomains:u.array(u.string()).optional()}).optional(),searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Ufe=lr(()=>qe(u.object({}))),Lfe=lr(()=>qe(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})]),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).optional()}))),qfe=Xn({id:"openai.web_search",name:"web_search",inputSchema:Ufe,outputSchema:Lfe}),Ffe=s((t={})=>qfe(t),"webSearch"),Bfe=lr(()=>qe(u.object({searchContextSize:u.enum(["low","medium","high"]).optional(),userLocation:u.object({type:u.literal("approximate"),country:u.string().optional(),city:u.string().optional(),region:u.string().optional(),timezone:u.string().optional()}).optional()}))),Vfe=lr(()=>qe(u.object({}))),Hfe=lr(()=>qe(u.object({action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().optional()}),u.object({type:u.literal("openPage"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}))),Zfe=Xn({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:Vfe,outputSchema:Hfe}),Jfe={codeInterpreter:Pfe,fileSearch:Ofe,imageGeneration:jfe,localShell:Mfe,webSearchPreview:Zfe,webSearch:Ffe};s(sB,"isFileId");s(Gfe,"convertToOpenAIResponsesInput");Kfe=u.object({itemId:u.string().nullish(),reasoningEncryptedContent:u.string().nullish()});s(aB,"mapOpenAIResponseFinishReason");Wfe=Ht(()=>qe(u.union([u.object({type:u.literal("response.output_text.delta"),item_id:u.string(),delta:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish()}),u.object({type:u.enum(["response.completed","response.incomplete"]),response:u.object({incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.created"),response:u.object({id:u.string(),created_at:u.number(),model:u.string(),service_tier:u.string().nullish()})}),u.object({type:u.literal("response.output_item.added"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string()}),u.object({type:u.literal("file_search_call"),id:u.string()}),u.object({type:u.literal("image_generation_call"),id:u.string()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),container_id:u.string(),code:u.string().nullable(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable(),status:u.string()})])}),u.object({type:u.literal("response.output_item.done"),output_index:u.number(),item:u.discriminatedUnion("type",[u.object({type:u.literal("message"),id:u.string()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish()}),u.object({type:u.literal("function_call"),id:u.string(),call_id:u.string(),name:u.string(),arguments:u.string(),status:u.literal("completed")}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.unknown()),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.literal("completed")})])}),u.object({type:u.literal("response.function_call_arguments.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.image_generation_call.partial_image"),item_id:u.string(),output_index:u.number(),partial_image_b64:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.delta"),item_id:u.string(),output_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.code_interpreter_call_code.done"),item_id:u.string(),output_index:u.number(),code:u.string()}),u.object({type:u.literal("response.output_text.annotation.added"),annotation:u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()})])}),u.object({type:u.literal("response.reasoning_summary_part.added"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("response.reasoning_summary_text.delta"),item_id:u.string(),summary_index:u.number(),delta:u.string()}),u.object({type:u.literal("response.reasoning_summary_part.done"),item_id:u.string(),summary_index:u.number()}),u.object({type:u.literal("error"),sequence_number:u.number(),error:u.object({type:u.string(),code:u.string(),message:u.string(),param:u.string().nullish()})}),u.object({type:u.string()}).loose().transform(t=>({type:"unknown_chunk",message:t.type}))]))),Qfe=Ht(()=>qe(u.object({id:u.string().optional(),created_at:u.number().optional(),error:u.object({message:u.string(),type:u.string(),param:u.string().nullish(),code:u.string()}).nullish(),model:u.string().optional(),output:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("message"),role:u.literal("assistant"),id:u.string(),content:u.array(u.object({type:u.literal("output_text"),text:u.string(),logprobs:u.array(u.object({token:u.string(),logprob:u.number(),top_logprobs:u.array(u.object({token:u.string(),logprob:u.number()}))})).nullish(),annotations:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url_citation"),start_index:u.number(),end_index:u.number(),url:u.string(),title:u.string()}),u.object({type:u.literal("file_citation"),file_id:u.string(),filename:u.string().nullish(),index:u.number().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),quote:u.string().nullish()}),u.object({type:u.literal("container_file_citation"),container_id:u.string(),file_id:u.string(),filename:u.string().nullish(),start_index:u.number().nullish(),end_index:u.number().nullish(),index:u.number().nullish()}),u.object({type:u.literal("file_path"),file_id:u.string(),index:u.number().nullish()})]))}))}),u.object({type:u.literal("web_search_call"),id:u.string(),status:u.string(),action:u.discriminatedUnion("type",[u.object({type:u.literal("search"),query:u.string().nullish(),sources:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("url"),url:u.string()}),u.object({type:u.literal("api"),name:u.string()})])).nullish()}),u.object({type:u.literal("open_page"),url:u.string()}),u.object({type:u.literal("find"),url:u.string(),pattern:u.string()})])}),u.object({type:u.literal("file_search_call"),id:u.string(),queries:u.array(u.string()),results:u.array(u.object({attributes:u.record(u.string(),u.union([u.string(),u.number(),u.boolean()])),file_id:u.string(),filename:u.string(),score:u.number(),text:u.string()})).nullish()}),u.object({type:u.literal("code_interpreter_call"),id:u.string(),code:u.string().nullable(),container_id:u.string(),outputs:u.array(u.discriminatedUnion("type",[u.object({type:u.literal("logs"),logs:u.string()}),u.object({type:u.literal("image"),url:u.string()})])).nullable()}),u.object({type:u.literal("image_generation_call"),id:u.string(),result:u.string()}),u.object({type:u.literal("local_shell_call"),id:u.string(),call_id:u.string(),action:u.object({type:u.literal("exec"),command:u.array(u.string()),timeout_ms:u.number().optional(),user:u.string().optional(),working_directory:u.string().optional(),env:u.record(u.string(),u.string()).optional()})}),u.object({type:u.literal("function_call"),call_id:u.string(),name:u.string(),arguments:u.string(),id:u.string()}),u.object({type:u.literal("computer_call"),id:u.string(),status:u.string().optional()}),u.object({type:u.literal("reasoning"),id:u.string(),encrypted_content:u.string().nullish(),summary:u.array(u.object({type:u.literal("summary_text"),text:u.string()}))})])).optional(),service_tier:u.string().nullish(),incomplete_details:u.object({reason:u.string()}).nullish(),usage:u.object({input_tokens:u.number(),input_tokens_details:u.object({cached_tokens:u.number().nullish()}).nullish(),output_tokens:u.number(),output_tokens_details:u.object({reasoning_tokens:u.number().nullish()}).nullish()}).optional()}))),gB=20,Xfe=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],YGe=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...Xfe],Yfe=Ht(()=>qe(u.object({conversation:u.string().nullish(),include:u.array(u.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:u.string().nullish(),logprobs:u.union([u.boolean(),u.number().min(1).max(gB)]).optional(),maxToolCalls:u.number().nullish(),metadata:u.any().nullish(),parallelToolCalls:u.boolean().nullish(),previousResponseId:u.string().nullish(),promptCacheKey:u.string().nullish(),promptCacheRetention:u.enum(["in_memory","24h"]).nullish(),reasoningEffort:u.string().nullish(),reasoningSummary:u.string().nullish(),safetyIdentifier:u.string().nullish(),serviceTier:u.enum(["auto","flex","priority","default"]).nullish(),store:u.boolean().nullish(),strictJsonSchema:u.boolean().nullish(),textVerbosity:u.enum(["low","medium","high"]).nullish(),truncation:u.enum(["auto","disabled"]).nullish(),user:u.string().nullish()})));s(ehe,"prepareResponsesTools");the=class{static{s(this,"OpenAIResponsesLanguageModel")}constructor(t,e){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=t,this.config=e}get provider(){return this.config.provider}async getArgs({maxOutputTokens:t,temperature:e,stopSequences:r,topP:n,topK:o,presencePenalty:i,frequencyPenalty:a,seed:c,prompt:l,providerOptions:d,tools:p,toolChoice:m,responseFormat:h}){var y,g,f,_;let S=[],w=dhe(this.modelId);o!=null&&S.push({type:"unsupported-setting",setting:"topK"}),c!=null&&S.push({type:"unsupported-setting",setting:"seed"}),i!=null&&S.push({type:"unsupported-setting",setting:"presencePenalty"}),a!=null&&S.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&S.push({type:"unsupported-setting",setting:"stopSequences"});let x=await pn({provider:"openai",providerOptions:d,schema:Yfe});x?.conversation&&x?.previousResponseId&&S.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});let{input:I,warnings:N}=await Gfe({prompt:l,systemMessageMode:w.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(y=x?.store)!=null?y:!0,hasLocalShellTool:A("openai.local_shell")});S.push(...N);let $=(g=x?.strictJsonSchema)!=null?g:!1,O=x?.include;function R(se){O==null?O=[se]:O.includes(se)||(O=[...O,se])}s(R,"addInclude");function A(se){return p?.find(we=>we.type==="provider-defined"&&we.id===se)!=null}s(A,"hasOpenAITool");let D=typeof x?.logprobs=="number"?x?.logprobs:x?.logprobs===!0?gB:void 0;D&&R("message.output_text.logprobs");let M=(f=p?.find(se=>se.type==="provider-defined"&&(se.id==="openai.web_search"||se.id==="openai.web_search_preview")))==null?void 0:f.name;M&&R("web_search_call.action.sources"),A("openai.code_interpreter")&&R("code_interpreter_call.outputs");let Q=x?.store;Q===!1&&w.isReasoningModel&&R("reasoning.encrypted_content");let Z={model:this.modelId,input:I,temperature:e,top_p:n,max_output_tokens:t,...(h?.type==="json"||x?.textVerbosity)&&{text:{...h?.type==="json"&&{format:h.schema!=null?{type:"json_schema",strict:$,name:(_=h.name)!=null?_:"response",description:h.description,schema:h.schema}:{type:"json_object"}},...x?.textVerbosity&&{verbosity:x.textVerbosity}}},conversation:x?.conversation,max_tool_calls:x?.maxToolCalls,metadata:x?.metadata,parallel_tool_calls:x?.parallelToolCalls,previous_response_id:x?.previousResponseId,store:Q,user:x?.user,instructions:x?.instructions,service_tier:x?.serviceTier,include:O,prompt_cache_key:x?.promptCacheKey,prompt_cache_retention:x?.promptCacheRetention,safety_identifier:x?.safetyIdentifier,top_logprobs:D,truncation:x?.truncation,...w.isReasoningModel&&(x?.reasoningEffort!=null||x?.reasoningSummary!=null)&&{reasoning:{...x?.reasoningEffort!=null&&{effort:x.reasoningEffort},...x?.reasoningSummary!=null&&{summary:x.reasoningSummary}}}};w.isReasoningModel?(Z.temperature!=null&&(Z.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),Z.top_p!=null&&(Z.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(x?.reasoningEffort!=null&&S.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),x?.reasoningSummary!=null&&S.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),x?.serviceTier==="flex"&&!w.supportsFlexProcessing&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete Z.service_tier),x?.serviceTier==="priority"&&!w.supportsPriorityProcessing&&(S.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete Z.service_tier);let{tools:F,toolChoice:ee,toolWarnings:ne}=await ehe({tools:p,toolChoice:m,strictJsonSchema:$});return{webSearchToolName:M,args:{...Z,tools:F,tool_choice:ee},warnings:[...S,...ne],store:Q}}async doGenerate(t){var e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w,x;let{args:I,warnings:N,webSearchToolName:$}=await this.getArgs(t),O=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:R,value:A,rawValue:D}=await mn({url:O,headers:qr(this.config.headers(),t.headers),body:I,failedResponseHandler:Bo,successfulResponseHandler:Yn(Qfe),abortSignal:t.abortSignal,fetch:this.config.fetch});if(A.error)throw new et({message:A.error.message,url:O,requestBodyValues:I,statusCode:400,responseHeaders:R,responseBody:D,isRetryable:!1});let M=[],Q=[],Z=!1;for(let ne of A.output)switch(ne.type){case"reasoning":{ne.summary.length===0&&ne.summary.push({type:"summary_text",text:""});for(let se of ne.summary)M.push({type:"reasoning",text:se.text,providerMetadata:{openai:{itemId:ne.id,reasoningEncryptedContent:(e=ne.encrypted_content)!=null?e:null}}});break}case"image_generation_call":{M.push({type:"tool-call",toolCallId:ne.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),M.push({type:"tool-result",toolCallId:ne.id,toolName:"image_generation",result:{result:ne.result},providerExecuted:!0});break}case"local_shell_call":{M.push({type:"tool-call",toolCallId:ne.call_id,toolName:"local_shell",input:JSON.stringify({action:ne.action}),providerMetadata:{openai:{itemId:ne.id}}});break}case"message":{for(let se of ne.content){(n=(r=t.providerOptions)==null?void 0:r.openai)!=null&&n.logprobs&&se.logprobs&&Q.push(se.logprobs),M.push({type:"text",text:se.text,providerMetadata:{openai:{itemId:ne.id}}});for(let we of se.annotations)we.type==="url_citation"?M.push({type:"source",sourceType:"url",id:(a=(i=(o=this.config).generateId)==null?void 0:i.call(o))!=null?a:xo(),url:we.url,title:we.title}):we.type==="file_citation"&&M.push({type:"source",sourceType:"document",id:(d=(l=(c=this.config).generateId)==null?void 0:l.call(c))!=null?d:xo(),mediaType:"text/plain",title:(m=(p=we.quote)!=null?p:we.filename)!=null?m:"Document",filename:(h=we.filename)!=null?h:we.file_id,...we.file_id?{providerMetadata:{openai:{fileId:we.file_id}}}:{}})}break}case"function_call":{Z=!0,M.push({type:"tool-call",toolCallId:ne.call_id,toolName:ne.name,input:ne.arguments,providerMetadata:{openai:{itemId:ne.id}}});break}case"web_search_call":{M.push({type:"tool-call",toolCallId:ne.id,toolName:$??"web_search",input:JSON.stringify({}),providerExecuted:!0}),M.push({type:"tool-result",toolCallId:ne.id,toolName:$??"web_search",result:uB(ne.action),providerExecuted:!0});break}case"computer_call":{M.push({type:"tool-call",toolCallId:ne.id,toolName:"computer_use",input:"",providerExecuted:!0}),M.push({type:"tool-result",toolCallId:ne.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:ne.status||"completed"},providerExecuted:!0});break}case"file_search_call":{M.push({type:"tool-call",toolCallId:ne.id,toolName:"file_search",input:"{}",providerExecuted:!0}),M.push({type:"tool-result",toolCallId:ne.id,toolName:"file_search",result:{queries:ne.queries,results:(g=(y=ne.results)==null?void 0:y.map(se=>({attributes:se.attributes,fileId:se.file_id,filename:se.filename,score:se.score,text:se.text})))!=null?g:null},providerExecuted:!0});break}case"code_interpreter_call":{M.push({type:"tool-call",toolCallId:ne.id,toolName:"code_interpreter",input:JSON.stringify({code:ne.code,containerId:ne.container_id}),providerExecuted:!0}),M.push({type:"tool-result",toolCallId:ne.id,toolName:"code_interpreter",result:{outputs:ne.outputs},providerExecuted:!0});break}}let F={openai:{...A.id!=null?{responseId:A.id}:{}}};Q.length>0&&(F.openai.logprobs=Q),typeof A.service_tier=="string"&&(F.openai.serviceTier=A.service_tier);let ee=A.usage;return{content:M,finishReason:aB({finishReason:(f=A.incomplete_details)==null?void 0:f.reason,hasFunctionCall:Z}),usage:{inputTokens:ee.input_tokens,outputTokens:ee.output_tokens,totalTokens:ee.input_tokens+ee.output_tokens,reasoningTokens:(S=(_=ee.output_tokens_details)==null?void 0:_.reasoning_tokens)!=null?S:void 0,cachedInputTokens:(x=(w=ee.input_tokens_details)==null?void 0:w.cached_tokens)!=null?x:void 0},request:{body:I},response:{id:A.id,timestamp:new Date(A.created_at*1e3),modelId:A.model,headers:R,body:D},providerMetadata:F,warnings:N}}async doStream(t){let{args:e,warnings:r,webSearchToolName:n,store:o}=await this.getArgs(t),{responseHeaders:i,value:a}=await mn({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:Bo,successfulResponseHandler:Bc(Wfe),abortSignal:t.abortSignal,fetch:this.config.fetch}),c=this,l="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],m=null,h={},y=[],g=!1,f={},_;return{stream:a.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:r})},transform(S,w){var x,I,N,$,O,R,A,D,M,Q,Z,F,ee,ne,se,we,Ee,rt,Ke,G,$e,ye;if(t.includeRawChunks&&w.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){l="error",w.enqueue({type:"error",error:S.error});return}let L=S.value;if(cB(L))L.item.type==="function_call"?(h[L.output_index]={toolName:L.item.name,toolCallId:L.item.call_id},w.enqueue({type:"tool-input-start",id:L.item.call_id,toolName:L.item.name})):L.item.type==="web_search_call"?(h[L.output_index]={toolName:n??"web_search",toolCallId:L.item.id},w.enqueue({type:"tool-input-start",id:L.item.id,toolName:n??"web_search",providerExecuted:!0}),w.enqueue({type:"tool-input-end",id:L.item.id}),w.enqueue({type:"tool-call",toolCallId:L.item.id,toolName:n??"web_search",input:JSON.stringify({}),providerExecuted:!0})):L.item.type==="computer_call"?(h[L.output_index]={toolName:"computer_use",toolCallId:L.item.id},w.enqueue({type:"tool-input-start",id:L.item.id,toolName:"computer_use",providerExecuted:!0})):L.item.type==="code_interpreter_call"?(h[L.output_index]={toolName:"code_interpreter",toolCallId:L.item.id,codeInterpreter:{containerId:L.item.container_id}},w.enqueue({type:"tool-input-start",id:L.item.id,toolName:"code_interpreter",providerExecuted:!0}),w.enqueue({type:"tool-input-delta",id:L.item.id,delta:`{"containerId":"${L.item.container_id}","code":"`})):L.item.type==="file_search_call"?w.enqueue({type:"tool-call",toolCallId:L.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):L.item.type==="image_generation_call"?w.enqueue({type:"tool-call",toolCallId:L.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):L.item.type==="message"?(y.splice(0,y.length),w.enqueue({type:"text-start",id:L.item.id,providerMetadata:{openai:{itemId:L.item.id}}})):cB(L)&&L.item.type==="reasoning"&&(f[L.item.id]={encryptedContent:L.item.encrypted_content,summaryParts:{0:"active"}},w.enqueue({type:"reasoning-start",id:`${L.item.id}:0`,providerMetadata:{openai:{itemId:L.item.id,reasoningEncryptedContent:(x=L.item.encrypted_content)!=null?x:null}}}));else if(nhe(L)){if(L.item.type==="message")w.enqueue({type:"text-end",id:L.item.id,providerMetadata:{openai:{itemId:L.item.id,...y.length>0&&{annotations:y}}}});else if(L.item.type==="function_call")h[L.output_index]=void 0,g=!0,w.enqueue({type:"tool-input-end",id:L.item.call_id}),w.enqueue({type:"tool-call",toolCallId:L.item.call_id,toolName:L.item.name,input:L.item.arguments,providerMetadata:{openai:{itemId:L.item.id}}});else if(L.item.type==="web_search_call")h[L.output_index]=void 0,w.enqueue({type:"tool-result",toolCallId:L.item.id,toolName:n??"web_search",result:uB(L.item.action),providerExecuted:!0});else if(L.item.type==="computer_call")h[L.output_index]=void 0,w.enqueue({type:"tool-input-end",id:L.item.id}),w.enqueue({type:"tool-call",toolCallId:L.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),w.enqueue({type:"tool-result",toolCallId:L.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:L.item.status||"completed"},providerExecuted:!0});else if(L.item.type==="file_search_call")h[L.output_index]=void 0,w.enqueue({type:"tool-result",toolCallId:L.item.id,toolName:"file_search",result:{queries:L.item.queries,results:(N=(I=L.item.results)==null?void 0:I.map(Qe=>({attributes:Qe.attributes,fileId:Qe.file_id,filename:Qe.filename,score:Qe.score,text:Qe.text})))!=null?N:null},providerExecuted:!0});else if(L.item.type==="code_interpreter_call")h[L.output_index]=void 0,w.enqueue({type:"tool-result",toolCallId:L.item.id,toolName:"code_interpreter",result:{outputs:L.item.outputs},providerExecuted:!0});else if(L.item.type==="image_generation_call")w.enqueue({type:"tool-result",toolCallId:L.item.id,toolName:"image_generation",result:{result:L.item.result},providerExecuted:!0});else if(L.item.type==="local_shell_call")h[L.output_index]=void 0,w.enqueue({type:"tool-call",toolCallId:L.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:L.item.action.command,timeoutMs:L.item.action.timeout_ms,user:L.item.action.user,workingDirectory:L.item.action.working_directory,env:L.item.action.env}}),providerMetadata:{openai:{itemId:L.item.id}}});else if(L.item.type==="reasoning"){let Qe=f[L.item.id],Ot=Object.entries(Qe.summaryParts).filter(([zt,fn])=>fn==="active"||fn==="can-conclude").map(([zt])=>zt);for(let zt of Ot)w.enqueue({type:"reasoning-end",id:`${L.item.id}:${zt}`,providerMetadata:{openai:{itemId:L.item.id,reasoningEncryptedContent:($=L.item.encrypted_content)!=null?$:null}}});delete f[L.item.id]}}else if(she(L)){let Qe=h[L.output_index];Qe!=null&&w.enqueue({type:"tool-input-delta",id:Qe.toolCallId,delta:L.delta})}else if(ahe(L)){let Qe=h[L.output_index];Qe!=null&&w.enqueue({type:"tool-input-delta",id:Qe.toolCallId,delta:JSON.stringify(L.delta).slice(1,-1)})}else if(che(L)){let Qe=h[L.output_index];Qe!=null&&(w.enqueue({type:"tool-input-delta",id:Qe.toolCallId,delta:'"}'}),w.enqueue({type:"tool-input-end",id:Qe.toolCallId}),w.enqueue({type:"tool-call",toolCallId:Qe.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:L.code,containerId:Qe.codeInterpreter.containerId}),providerExecuted:!0}))}else if(ihe(L))m=L.response.id,w.enqueue({type:"response-metadata",id:L.response.id,timestamp:new Date(L.response.created_at*1e3),modelId:L.response.model});else if(rhe(L))w.enqueue({type:"text-delta",id:L.item_id,delta:L.delta}),(R=(O=t.providerOptions)==null?void 0:O.openai)!=null&&R.logprobs&&L.logprobs&&p.push(L.logprobs);else if(L.type==="response.reasoning_summary_part.added"){if(L.summary_index>0){let Qe=f[L.item_id];Qe.summaryParts[L.summary_index]="active";for(let Ot of Object.keys(Qe.summaryParts))Qe.summaryParts[Ot]==="can-conclude"&&(w.enqueue({type:"reasoning-end",id:`${L.item_id}:${Ot}`,providerMetadata:{openai:{itemId:L.item_id}}}),Qe.summaryParts[Ot]="concluded");w.enqueue({type:"reasoning-start",id:`${L.item_id}:${L.summary_index}`,providerMetadata:{openai:{itemId:L.item_id,reasoningEncryptedContent:(D=(A=f[L.item_id])==null?void 0:A.encryptedContent)!=null?D:null}}})}}else L.type==="response.reasoning_summary_text.delta"?w.enqueue({type:"reasoning-delta",id:`${L.item_id}:${L.summary_index}`,delta:L.delta,providerMetadata:{openai:{itemId:L.item_id}}}):L.type==="response.reasoning_summary_part.done"?o?(w.enqueue({type:"reasoning-end",id:`${L.item_id}:${L.summary_index}`,providerMetadata:{openai:{itemId:L.item_id}}}),f[L.item_id].summaryParts[L.summary_index]="concluded"):f[L.item_id].summaryParts[L.summary_index]="can-conclude":ohe(L)?(l=aB({finishReason:(M=L.response.incomplete_details)==null?void 0:M.reason,hasFunctionCall:g}),d.inputTokens=L.response.usage.input_tokens,d.outputTokens=L.response.usage.output_tokens,d.totalTokens=L.response.usage.input_tokens+L.response.usage.output_tokens,d.reasoningTokens=(Z=(Q=L.response.usage.output_tokens_details)==null?void 0:Q.reasoning_tokens)!=null?Z:void 0,d.cachedInputTokens=(ee=(F=L.response.usage.input_tokens_details)==null?void 0:F.cached_tokens)!=null?ee:void 0,typeof L.response.service_tier=="string"&&(_=L.response.service_tier)):uhe(L)?(y.push(L.annotation),L.annotation.type==="url_citation"?w.enqueue({type:"source",sourceType:"url",id:(we=(se=(ne=c.config).generateId)==null?void 0:se.call(ne))!=null?we:xo(),url:L.annotation.url,title:L.annotation.title}):L.annotation.type==="file_citation"&&w.enqueue({type:"source",sourceType:"document",id:(Ke=(rt=(Ee=c.config).generateId)==null?void 0:rt.call(Ee))!=null?Ke:xo(),mediaType:"text/plain",title:($e=(G=L.annotation.quote)!=null?G:L.annotation.filename)!=null?$e:"Document",filename:(ye=L.annotation.filename)!=null?ye:L.annotation.file_id,...L.annotation.file_id?{providerMetadata:{openai:{fileId:L.annotation.file_id}}}:{}})):lhe(L)&&w.enqueue({type:"error",error:L})},flush(S){let w={openai:{responseId:m}};p.length>0&&(w.openai.logprobs=p),_!==void 0&&(w.openai.serviceTier=_),S.enqueue({type:"finish",finishReason:l,usage:d,providerMetadata:w})}})),request:{body:e},response:{headers:i}}}};s(rhe,"isTextDeltaChunk");s(nhe,"isResponseOutputItemDoneChunk");s(ohe,"isResponseFinishedChunk");s(ihe,"isResponseCreatedChunk");s(she,"isResponseFunctionCallArgumentsDeltaChunk");s(ahe,"isResponseCodeInterpreterCallCodeDeltaChunk");s(che,"isResponseCodeInterpreterCallCodeDoneChunk");s(cB,"isResponseOutputItemAddedChunk");s(uhe,"isResponseAnnotationAddedChunk");s(lhe,"isErrorChunk");s(dhe,"getResponsesModelConfig");s(uB,"mapWebSearchOutput");phe=Ht(()=>qe(u.object({instructions:u.string().nullish(),speed:u.number().min(.25).max(4).default(1).nullish()}))),mhe=class{static{s(this,"OpenAISpeechModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:t,voice:e="alloy",outputFormat:r="mp3",speed:n,instructions:o,language:i,providerOptions:a}){let c=[],l=await pn({provider:"openai",providerOptions:a,schema:phe}),d={model:this.modelId,input:t,voice:e,response_format:"mp3",speed:n,instructions:o};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?d.response_format=r:c.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),l){let p={};for(let m in p){let h=p[m];h!==void 0&&(d[m]=h)}}return i&&c.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:d,warnings:c}}async doGenerate(t){var e,r,n;let o=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{requestBody:i,warnings:a}=await this.getArgs(t),{value:c,responseHeaders:l,rawValue:d}=await mn({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),body:i,failedResponseHandler:Bo,successfulResponseHandler:G6(),abortSignal:t.abortSignal,fetch:this.config.fetch});return{audio:c,warnings:a,request:{body:JSON.stringify(i)},response:{timestamp:o,modelId:this.modelId,headers:l,body:d}}}},fhe=Ht(()=>qe(u.object({text:u.string(),language:u.string().nullish(),duration:u.number().nullish(),words:u.array(u.object({word:u.string(),start:u.number(),end:u.number()})).nullish(),segments:u.array(u.object({id:u.number(),seek:u.number(),start:u.number(),end:u.number(),text:u.string(),tokens:u.array(u.number()),temperature:u.number(),avg_logprob:u.number(),compression_ratio:u.number(),no_speech_prob:u.number()})).nullish()}))),hhe=Ht(()=>qe(u.object({include:u.array(u.string()).optional(),language:u.string().optional(),prompt:u.string().optional(),temperature:u.number().min(0).max(1).default(0).optional(),timestampGranularities:u.array(u.enum(["word","segment"])).default(["segment"]).optional()}))),lB={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},ghe=class{static{s(this,"OpenAITranscriptionModel")}constructor(t,e){this.modelId=t,this.config=e,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:t,mediaType:e,providerOptions:r}){let n=[],o=await pn({provider:"openai",providerOptions:r,schema:hhe}),i=new FormData,a=t instanceof Uint8Array?new Blob([t]):new Blob([eB(t)]);i.append("model",this.modelId);let c=B6(e);if(i.append("file",new File([a],"audio",{type:e}),`audio.${c}`),o){let l={include:o.include,language:o.language,prompt:o.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:o.temperature,timestamp_granularities:o.timestampGranularities};for(let[d,p]of Object.entries(l))if(p!=null)if(Array.isArray(p))for(let m of p)i.append(`${d}[]`,String(m));else i.append(d,String(p))}return{formData:i,warnings:n}}async doGenerate(t){var e,r,n,o,i,a,c,l;let d=(n=(r=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:r.call(e))!=null?n:new Date,{formData:p,warnings:m}=await this.getArgs(t),{value:h,responseHeaders:y,rawValue:g}=await H6({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:qr(this.config.headers(),t.headers),formData:p,failedResponseHandler:Bo,successfulResponseHandler:Yn(fhe),abortSignal:t.abortSignal,fetch:this.config.fetch}),f=h.language!=null&&h.language in lB?lB[h.language]:void 0;return{text:h.text,segments:(c=(a=(o=h.segments)==null?void 0:o.map(_=>({text:_.text,startSecond:_.start,endSecond:_.end})))!=null?a:(i=h.words)==null?void 0:i.map(_=>({text:_.word,startSecond:_.start,endSecond:_.end})))!=null?c:[],language:f,durationInSeconds:(l=h.duration)!=null?l:void 0,warnings:m,response:{timestamp:d,modelId:this.modelId,headers:y,body:g}}}},yhe="2.0.74";s(vhe,"createOpenAI");DA=vhe()});function _B(t,e="default"){return _he[t][e]()}function bB(){let t=[];return process.env.OPENAI_API_KEY&&t.push("openai"),process.env.ANTHROPIC_API_KEY&&t.push("anthropic"),process.env.GOOGLE_GENERATIVE_AI_API_KEY&&t.push("google"),t.length>0?t:["google"]}var vB,_he,wB=b(()=>{"use strict";f6();M6();yB();St();vB=u.enum(["openai","anthropic","google"]),_he={openai:{default:s(()=>DA("gpt-4o"),"default"),fast:s(()=>DA("gpt-4o-mini"),"fast"),envKey:"OPENAI_API_KEY"},anthropic:{default:s(()=>gA("claude-3-5-sonnet-latest"),"default"),fast:s(()=>gA("claude-3-5-haiku-latest"),"fast"),envKey:"ANTHROPIC_API_KEY"},google:{default:s(()=>TA("gemini-1.5-pro-latest"),"default"),fast:s(()=>TA("gemini-1.5-flash-latest"),"fast"),envKey:"GOOGLE_GENERATIVE_AI_API_KEY"}};s(_B,"getModel");s(bB,"getAvailableProviders")});function SB(t){for(let r of bhe)if(r.test(t))return{isSafe:!1,reason:`Potential injection detected: ${r.source}`};return{isSafe:!0,sanitizedInput:[...t].filter(r=>{let n=r.charCodeAt(0);return n>=32&&n!==127}).join("").trim()}}var bhe,xB=b(()=>{"use strict";bhe=[/ignore\s+(all\s+)?(previous|above|prior)\s+instructions/i,/disregard\s+(all\s+)?(previous|prior)\s+(instructions|context)/i,/you\s+are\s+now/i,/new\s+instructions:/i,/system:\s*/i,/\[INST\]/i,/<\/s>/i,/DROP\s+TABLE/i,/DELETE\s+FROM\s+\w+\s*;/i,/UPDATE\s+\w+\s+SET.*WHERE\s+1\s*=\s*1/i,/;\s*--/];s(SB,"checkPromptInjection")});function Vo(t){if(!t)return{};let e={};for(let[r,n]of Object.entries(t))if(!whe.has(r.toLowerCase())){if(r.toLowerCase()in TB&&typeof n=="string"){e[r]=TB[r.toLowerCase()](n);continue}if(n&&typeof n=="object"){Array.isArray(n)?e[r]=n.map(o=>typeof o=="object"&&o!==null?Vo(o):o):e[r]=Vo(n);continue}e[r]=n}return e}var whe,TB,jA=b(()=>{"use strict";whe=new Set(["password","password_hash","two_factor_secret","two_factor_enabled","voice_sample_encrypted","voice_biometric_enabled","biometric_enabled","api_token","refresh_token","belvo_link_token","session_token"]),TB={cpf:s(t=>t?`***.***.***-${t.slice(-2)}`:"[n\xE3o informado]","cpf"),account_number:s(t=>t?`****${t.slice(-4)}`:"[n\xE3o informado]","account_number"),phone:s(t=>t?`(**) *****-${t.slice(-4)}`:"[n\xE3o informado]","phone")};s(Vo,"filterSensitiveData")});function EB(t,e){let r=u.object({includeInactive:u.boolean().default(!1).describe("Incluir contas inativas")}),n=u.object({accountId:u.string().uuid().optional().describe("ID da conta (omitir para total)")});return{listAccounts:{description:"Lista todas as contas banc\xE1rias do usu\xE1rio.",parameters:r,execute:s(async o=>{let{includeInactive:i}=o,a=[J(ce.userId,t)];i||a.push(J(ce.isActive,!0));let c=await e.select({id:ce.id,institutionName:ce.institutionName,accountType:ce.accountType,balance:ce.balance,availableBalance:ce.availableBalance,currency:ce.currency,isActive:ce.isActive,isPrimary:ce.isPrimary,lastSync:ce.lastSync}).from(ce).where(Ie(...a)).orderBy(Kt(ce.isPrimary)),l=c.reduce((d,p)=>d+Number(p.balance??0),0);return{accounts:c.map(Vo),totalBalance:l,count:c.length}},"execute")},getAccountBalance:{description:"Obt\xE9m saldo atual de uma conta espec\xEDfica ou total de todas as contas.",parameters:n,execute:s(async o=>{let{accountId:i}=o;if(i){let[d]=await e.select({id:ce.id,institutionName:ce.institutionName,balance:ce.balance,availableBalance:ce.availableBalance,currency:ce.currency,lastSync:ce.lastSync}).from(ce).where(Ie(J(ce.id,i),J(ce.userId,t))).limit(1);if(!d)throw new Error("Conta n\xE3o encontrada");return Vo(d)}let a=await e.select({balance:ce.balance,availableBalance:ce.availableBalance,currency:ce.currency}).from(ce).where(Ie(J(ce.userId,t),J(ce.isActive,!0))),c=a.reduce((d,p)=>d+Number(p.balance??0),0),l=a.reduce((d,p)=>d+Number(p.availableBalance??0),0);return{totalBalance:c,totalAvailable:l,currency:"BRL",accountCount:a.length}},"execute")}}}var kB=b(()=>{"use strict";zr();St();jA();Lr();s(EB,"createAccountTools")});function IB(t,e){let r=u.object({includeSystem:u.boolean().default(!0).describe("Incluir categorias do sistema")}),n=u.object({name:u.string().min(1).max(50).describe("Nome da categoria"),color:u.string().regex(/^#[0-9A-Fa-f]{6}$/).default("#6B7280").describe("Cor em hexadecimal"),icon:u.string().default("circle").describe("Nome do \xEDcone")});return{listCategories:{description:"Lista todas as categorias de transa\xE7\xE3o dispon\xEDveis.",parameters:r,execute:s(async o=>{let{includeSystem:i}=o,a=qs(J(Me.userId,t),dm(Me.userId)),c=await e.select({id:Me.id,name:Me.name,color:Me.color,icon:Me.icon,isSystem:Me.isSystem,parentId:Me.parentId}).from(Me).where(a);return i||(c=c.filter(l=>!l.isSystem)),{categories:c,count:c.length}},"execute")},createCategory:{description:"Cria uma nova categoria personalizada.",parameters:n,execute:s(async o=>{let{name:i,color:a,icon:c}=o,[l]=await e.insert(Me).values({userId:t,name:i,color:a,icon:c,isSystem:!1}).returning();return{success:!0,category:l}},"execute")}}}var PB=b(()=>{"use strict";zr();St();Lr();s(IB,"createCategoryTools")});function AB(t,e){let r=u.object({startDate:u.string().datetime().optional().describe("Data inicial no formato ISO (YYYY-MM-DD)"),endDate:u.string().datetime().optional().describe("Data final no formato ISO (YYYY-MM-DD)"),categoryId:u.string().uuid().optional().describe("ID da categoria para filtrar"),accountId:u.string().uuid().optional().describe("ID da conta para filtrar"),minAmount:u.number().optional().describe("Valor m\xEDnimo da transa\xE7\xE3o"),maxAmount:u.number().optional().describe("Valor m\xE1ximo da transa\xE7\xE3o"),searchTerm:u.string().optional().describe("Termo para buscar na descri\xE7\xE3o"),limit:u.number().min(1).max(100).default(20).describe("N\xFAmero m\xE1ximo de resultados"),offset:u.number().min(0).default(0).describe("Pular N resultados para pagina\xE7\xE3o")}),n=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),o=u.object({amount:u.number().describe("Valor da transa\xE7\xE3o (positivo para receita, negativo para despesa)"),description:u.string().min(1).max(255).describe("Descri\xE7\xE3o da transa\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("ID da categoria"),accountId:u.string().uuid().optional().describe("ID da conta banc\xE1ria"),transactionDate:u.string().datetime().optional().describe("Data da transa\xE7\xE3o (padr\xE3o: agora)"),merchantName:u.string().optional().describe("Nome do estabelecimento")}),i=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o a atualizar"),amount:u.number().optional().describe("Novo valor"),description:u.string().min(1).max(255).optional().describe("Nova descri\xE7\xE3o"),categoryId:u.string().uuid().optional().describe("Nova categoria"),transactionDate:u.string().datetime().optional().describe("Nova data"),merchantName:u.string().optional().describe("Novo estabelecimento")}),a=u.object({transactionId:u.string().uuid().describe("ID da transa\xE7\xE3o")}),c=u.object({startDate:u.string().datetime().describe("Data inicial"),endDate:u.string().datetime().describe("Data final")});return{listTransactions:{description:"Lista transa\xE7\xF5es do usu\xE1rio com filtros opcionais. Use para consultar hist\xF3rico, buscar por per\xEDodo ou categoria.",parameters:r,execute:s(async l=>{let{startDate:d,endDate:p,categoryId:m,accountId:h,minAmount:y,maxAmount:g,searchTerm:f,limit:_,offset:S}=l,w=[J(oe.userId,t)];d&&w.push(Tr(oe.transactionDate,new Date(d))),p&&w.push(hr(oe.transactionDate,new Date(p))),m&&w.push(J(oe.categoryId,m)),h&&w.push(J(oe.accountId,h)),y&&w.push(Tr(oe.amount,String(y))),g&&w.push(hr(oe.amount,String(g))),f&&w.push(Hr(oe.description,`%${f}%`));let x=await e.select({id:oe.id,amount:oe.amount,description:oe.description,merchantName:oe.merchantName,transactionDate:oe.transactionDate,status:oe.status,createdAt:oe.createdAt}).from(oe).where(Ie(...w)).orderBy(Kt(oe.transactionDate)).limit(_).offset(S);return{transactions:x.map(Vo),total:x.length,hasMore:x.length===_}},"execute")},getTransaction:{description:"Obt\xE9m detalhes de uma transa\xE7\xE3o espec\xEDfica pelo ID.",parameters:n,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.select().from(oe).where(Ie(J(oe.id,d),J(oe.userId,t))).limit(1);if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return Vo(p)},"execute")},createTransaction:{description:"Cria uma nova transa\xE7\xE3o manual para o usu\xE1rio.",parameters:o,execute:s(async l=>{let{amount:d,description:p,categoryId:m,accountId:h,transactionDate:y,merchantName:g}=l,[f]=await e.insert(oe).values({userId:t,amount:String(d),description:p,categoryId:m,accountId:h,transactionDate:y?new Date(y):new Date,merchantName:g,transactionType:d>=0?"credit":"debit",status:"posted",isManualEntry:!0}).returning();return{success:!0,transaction:Vo(f)}},"execute")},updateTransaction:{description:"Atualiza uma transa\xE7\xE3o existente do usu\xE1rio.",parameters:i,execute:s(async l=>{let{transactionId:d,...p}=l,m={updatedAt:new Date};p.amount!==void 0&&(m.amount=String(p.amount)),p.description!==void 0&&(m.description=p.description),p.categoryId!==void 0&&(m.categoryId=p.categoryId),p.transactionDate!==void 0&&(m.transactionDate=new Date(p.transactionDate)),p.merchantName!==void 0&&(m.merchantName=p.merchantName);let[h]=await e.update(oe).set(m).where(Ie(J(oe.id,d),J(oe.userId,t))).returning();if(!h)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,transaction:Vo(h)}},"execute")},deleteTransaction:{description:"Deleta uma transa\xE7\xE3o. Use com cuidado, esta a\xE7\xE3o \xE9 irrevers\xEDvel.",parameters:a,execute:s(async l=>{let{transactionId:d}=l,[p]=await e.delete(oe).where(Ie(J(oe.id,d),J(oe.userId,t))).returning({id:oe.id});if(!p)throw new Error("Transa\xE7\xE3o n\xE3o encontrada");return{success:!0,message:"Transa\xE7\xE3o deletada com sucesso."}},"execute")},getSpendingSummary:{description:"Obt\xE9m resumo de gastos por categoria em um per\xEDodo.",parameters:c,execute:s(async l=>{let{startDate:d,endDate:p}=l,m=await e.select({amount:oe.amount,categoryId:oe.categoryId}).from(oe).where(Ie(J(oe.userId,t),hr(oe.amount,"0"),Tr(oe.transactionDate,new Date(d)),hr(oe.transactionDate,new Date(p)))),h=[...new Set(m.map(w=>w.categoryId).filter(Boolean))],y=h.length?await e.select({id:Me.id,name:Me.name,color:Me.color}).from(Me).where(Ca(Me.id,h)):[],g=new Map(y.map(w=>[w.id,w])),f=m.reduce((w,x)=>{let I=x.categoryId??"uncategorized",N=g.get(x.categoryId??"");return w[I]||(w[I]={categoryId:I,categoryName:N?.name??"Sem categoria",color:N?.color??"#6B7280",total:0,count:0}),w[I].total+=Math.abs(Number(x.amount)),w[I].count+=1,w},{}),_=Object.values(f).sort((w,x)=>x.total-w.total),S=_.reduce((w,x)=>w+x.total,0);return{period:{startDate:d,endDate:p},grandTotal:S,categories:_}},"execute")}}}var CB=b(()=>{"use strict";zr();St();jA();Lr();s(AB,"createTransactionTools")});function OB(t,e){return{...AB(t,e),...EB(t,e),...IB(t,e)}}var $B=b(()=>{"use strict";kB();PB();CB();s(OB,"createAllTools")});function She(t){let e=[],n=[/\b\d{3}\.\d{3}\.\d{3}-\d{2}\b/,/\b\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}\b/,/\b\d{4}[- ]?\d{4}[- ]?\d{4}[- ]?\d{4}\b/].some(i=>i.test(t));n&&e.push("Sensitive data detected in response");let o=/[]/i.test(t)||t.includes("R$");return{isValid:e.length===0,language:o?"pt-BR":"en",contentType:"text",sensitiveDataDetected:n,complianceIssues:e}}var Fd,xhe,RB=b(()=>{"use strict";Jr();Lq();Pt();St();qq();Hq();wB();xB();$B();Ar();s(She,"validateBrazilianPortugueseContent");Fd=new Ae,xhe=u.object({messages:u.array(u.object({role:u.enum(["user","assistant","system","tool"]),content:u.string(),sensitiveDataRedacted:u.boolean().optional().default(!1),timestamp:u.string().datetime().optional(),sessionId:u.string().uuid().optional(),parts:u.array(u.object({type:u.literal("text"),text:u.string()})).optional()})).min(1,"At least one message is required").transform(t=>t.filter(e=>e.role!=="tool").map(e=>({...e,parts:e.parts||[{type:"text",text:e.content}]}))),provider:vB.optional().default("google"),tier:u.enum(["default","fast"]).optional().default("default")});Fd.post("/chat",me,Je("json",xhe),async t=>{let e=Date.now(),{messages:r,provider:n,tier:o}=t.req.valid("json"),i=t.get("auth");if(!i?.user)return t.json({error:"Unauthorized"},401);let a=i.user.id,c=crypto.randomUUID(),l=r[r.length-1],d=l?.role==="user"?l.content:null;if(d&&typeof d=="string"){let p=SB(d);if(!p.isSafe)return await fg({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:d.slice(0,100),outputSummary:"Blocked: injection detected",latencyMs:Date.now()-e,outcome:"blocked",errorMessage:p.reason}),t.json({error:"Invalid input detected"},400)}try{let p=_B(n,o),m=OB(a,i.db);return jq({model:p,system:Vq,messages:BP(r),tools:m,maxSteps:5,onFinish:s(async({usage:y,finishReason:g,toolCalls:f})=>{let _=r,S=_[_.length-1],w=S?.role==="assistant"?S.content:g,x=typeof w=="string"?She(w):{isValid:!0,language:"pt-BR",contentType:"text",sensitiveDataDetected:!1,complianceIssues:[]},I=x.sensitiveDataDetected?" [LGPD Warning: Sensitive data detected]":x.language==="pt-BR"?" [PT-BR]":" [EN]";await fg({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:f?.length?"tool_call":"chat",toolName:f?.map(N=>N.toolName).join(", "),inputSummary:typeof d=="string"?d.slice(0,100):"Multi-modal/Tool input",outputSummary:g+I,tokensUsed:y.totalTokens,latencyMs:Date.now()-e,outcome:x.isValid?"success":"error",errorMessage:x.complianceIssues.length>0?`Compliance issues: ${x.complianceIssues.join("; ")}`:void 0})},"onFinish")}).toDataStreamResponse()}catch(p){return await fg({userId:a,sessionId:c,provider:n,model:`${n}/${o}`,actionType:"chat",inputSummary:typeof d=="string"?d.slice(0,100):"",outputSummary:"Error",latencyMs:Date.now()-e,outcome:"error",errorMessage:p instanceof Error?p.message:"Unknown error"}),t.json({error:"AI service error"},500)}});Fd.get("/providers",me,t=>t.json({available:bB(),default:"google"}))});function DB(t){let e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let r=0,n;for(let o=1;o<=9;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(11-o);if(n=r*10%11,(n===10||n===11)&&(n=0),n!==Number.parseInt(e.substring(9,10),10))return!1;r=0;for(let o=1;o<=10;o++)r+=Number.parseInt(e.substring(o-1,o),10)*(12-o);return n=r*10%11,(n===10||n===11)&&(n=0),n===Number.parseInt(e.substring(10,11),10)}var NB,$g,The,Ehe,lWe,MA=b(()=>{"use strict";St();NB={BRL:{symbol:"R$",decimalSeparator:",",thousandsSeparator:".",maxAmount:99999999999e-2,minAmount:.01}},$g=new Set(["001","033","104","237","341","260","077","021","025","036","037","039","041","047","062","063","064","065","066","069","070","074","075","078","079","083","084","085","089","102","105","107","108","109","110","111","112","114","117","118","119","120","121","122","124","125","126","127","128","129","130","131","132","133","134","136","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320"]),The={CNPJ:{format:"XX.XXX.XXX/XXXX-XX",regex:/^\d{14}$/},CPF:{format:"XXX.XXX.XXX-XX",regex:/^\d{11}$/},EMAIL:{format:"email@example.com",regex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},PHONE:{format:"+55 (XX) XXXXX-XXXX",regex:/^\+?\d{10,15}$/},RANDOM_KEY:{format:"XXXX-XXXX-XXXX-XXXX-XXXX",regex:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i}},Ehe={SUSPICIOUS_DESCRIPTIONS:["test","teste","debug","xxx","fake","fraud","hack","stolen","lavagem","dinheiro negro"],HIGH_VALUE_TRANSACTION:5e4,FREQUENT_SMALL_TRANSACTIONS:{count:20,amount:1e3,window:1440*60*1e3},RAPID_SUCCESSION:{count:5,window:300*1e3}},lWe={amount:u.number().min(NB.BRL.minAmount,"Amount must be at least R$ 0,01").max(NB.BRL.maxAmount,"Amount exceeds maximum allowed").refine(t=>Number.isFinite(t)&&Number(t.toFixed(2))===t,"Amount must have at most 2 decimal places"),bankAccount:u.object({account:u.string().regex(/^\d{1,12}$/,"Account must be 1-12 digits").refine(t=>!/^0+$/.test(t),"Account cannot be all zeros"),accountDigit:u.string().regex(/^\d$/,"Account digit must be a single digit"),agency:u.string().regex(/^\d{1,6}$/,"Agency must be 1-6 digits").refine(t=>!/^0+$/.test(t),"Agency cannot be all zeros"),bankCode:u.string().refine(t=>$g.has(t),"Invalid Brazilian bank code")}),financialInstitution:u.object({code:u.string().refine(t=>$g.has(t),"Invalid bank code"),name:u.string().min(2,"Institution name must be at least 2 characters").max(100,"Institution name must be less than 100 characters")}),pixKey:u.object({key:u.string().min(1,"PIX key cannot be empty"),type:u.enum(["cpf","cnpj","email","phone","random"])}).refine(t=>The[t.type.toUpperCase()].regex.test(t.key.replace(/\D/g,"")),"Invalid PIX key format for the specified type"),transaction:u.object({account_id:u.string().uuid("Conta banc\xE1ria inv\xE1lida"),amount:u.number(),category_id:u.string().uuid().optional(),description:u.string().min(3,"Description must be at least 3 characters").max(200,"Description must be less than 200 characters").refine(t=>!Ehe.SUSPICIOUS_DESCRIPTIONS.some(e=>t.toLowerCase().includes(e)),"Description contains suspicious content"),is_manual_entry:u.boolean().default(!0),merchant_name:u.string().max(120).optional(),notes:u.string().max(500).optional(),payment_method:u.enum(["cash","debit_card","credit_card","pix","boleto","transfer"]).optional(),status:u.enum(["pending","posted","failed","cancelled"]).default("posted"),tags:u.array(u.string()).max(10).optional(),transaction_date:u.string().refine(t=>{let e=new Date(t);return!Number.isNaN(e.getTime())&&e>=new Date("2020-01-01")&&e<=new Date(Date.now()+1440*60*1e3)},"Invalid date. Must be a valid date between 2020-01-01 and tomorrow"),transaction_type:u.enum(["debit","credit","transfer","pix","boleto"])})};s(DB,"validateCPF")});import{randomUUID as khe}from"node:crypto";var jB,Ihe,Phe,Ahe,Che,MB,zB,UB,LB,Bd,Vd,qB,zA,FB,BB,VB,HB=b(()=>{"use strict";St();MA();jB=["CHECKING","SAVINGS","INVESTMENT","SALARY","DIGITAL_WALLET"],Ihe=["pending","manual","success","error"],Phe=u.object({account_holder_name:u.string().optional(),account_mask:u.string().min(7,"M\xE1scara da conta \xE9 obrigat\xF3ria."),account_number:u.string().optional(),account_type:u.enum(jB),balance:u.number(),belvo_account_id:u.string().optional(),currency:u.string().default("BRL"),institution_id:u.string().min(1,"ID da institui\xE7\xE3o \xE9 obrigat\xF3rio."),institution_name:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio."),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),user_id:u.string().min(1,"Usu\xE1rio \xE9 obrigat\xF3rio.")}),Ahe=u.object({account_holder_name:u.string().optional(),account_mask:u.string().optional(),account_number:u.string().optional(),account_type:u.enum(jB).optional(),balance:u.number().optional(),belvo_account_id:u.string().optional(),currency:u.string().optional(),institution_id:u.string().optional(),institution_name:u.string().optional(),is_active:u.boolean().optional(),is_primary:u.boolean().optional(),sync_error_message:u.string().optional(),sync_status:u.enum(Ihe).optional()}),Che=new Set(["user_id","institution_name","institution_id","account_type","account_mask","account_holder_name","account_number","belvo_account_id","balance","currency","is_primary","is_active","sync_status","sync_error_message"]),MB="manual_",zB=s(t=>{if(!t)return!1;let e=t.trim();return $g.has(e)?!0:/^[0-9a-f-]{8,}$/i.test(e)},"isValidInstitutionId"),UB=s(t=>!t||t.toUpperCase()==="BRL","isValidCurrency"),LB=s(t=>!t||t.startsWith(MB)?!0:/^[a-z0-9_-]{6,}$/i.test(t),"isValidBelvoId"),Bd=s(t=>t?/^\*{4}\s\d{4}$/.test(t):!1,"validateAccountMask"),Vd=s(t=>/^\*{4}\d{4}$/.test(t)?`**** ${t.slice(-4)}`:t,"normalizeAccountMask"),qB=s(t=>t.map(e=>({field:e.path.join(".")||"root",message:e.message})),"collectZodErrors"),zA=s(t=>{let e={};return Object.entries(t).forEach(([r,n])=>{if(Che.has(r)){if(typeof n=="string"){let o=n.trim();if(o==="")return;switch(r){case"currency":e.currency=o.toUpperCase();break;case"account_number":e.account_number=o.replace(/\s+/g,"");break;case"account_mask":e.account_mask=Vd(o);break;default:e[r]=o}return}if(typeof n=="number"){e[r]=Number(n);return}e[r]=n}}),e},"sanitizeBankAccountData"),FB=s(()=>`${MB}${khe()}`,"generateManualAccountId"),BB=s(t=>{let e=[],r=Phe.safeParse(t);if(!r.success)return e.push(...qB(r.error.issues)),{errors:e,valid:!1};let n=r.data;return Bd(n.account_mask)||e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),zB(n.institution_id)||e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),UB(n.currency)||e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas no momento."}),LB(n.belvo_account_id)||e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForInsert"),VB=s(t=>{let e=[],r=Ahe.safeParse(t);if(!r.success)return e.push(...qB(r.error.issues)),{errors:e,valid:!1};let n=r.data;return n.account_mask&&!Bd(n.account_mask)&&e.push({field:"account_mask",message:"A m\xE1scara deve seguir o formato **** 1234."}),n.institution_id&&!zB(n.institution_id)&&e.push({field:"institution_id",message:"Institui\xE7\xE3o banc\xE1ria inv\xE1lida."}),n.currency&&!UB(n.currency)&&e.push({field:"currency",message:"Apenas contas em BRL s\xE3o suportadas."}),n.belvo_account_id&&!LB(n.belvo_account_id)&&e.push({field:"belvo_account_id",message:"Identificador da conta Belvo inv\xE1lido."}),n.balance!==void 0&&Number.isNaN(n.balance)&&e.push({field:"balance",message:"Saldo precisa ser um n\xFAmero v\xE1lido."}),{errors:e,valid:e.length===0}},"validateBankAccountForUpdate")});import{randomUUID as Ohe}from"node:crypto";var $he,Rhe,Nhe,Dhe,jhe,UA,Mhe,$i,LA,ZB=b(()=>{"use strict";Jr();zr();Pt();St();Lr();$t();HB();Ar();$he=u.object({institutionName:u.string().min(1,"Nome da institui\xE7\xE3o \xE9 obrigat\xF3rio"),accountType:u.enum(["checking","savings","investment","cash"],{error:"Tipo de conta \xE9 obrigat\xF3rio"}),balance:u.number().default(0),currency:u.string().default("BRL"),isPrimary:u.boolean().default(!1),isActive:u.boolean().default(!0),accountMask:u.string().optional(),institutionId:u.string().optional()}),Rhe=u.object({institutionName:u.string().optional(),accountType:u.enum(["checking","savings","investment","cash"]).optional(),balance:u.number().optional(),currency:u.string().optional(),isPrimary:u.boolean().optional(),isActive:u.boolean().optional(),accountMask:u.string().optional()}),Nhe=u.object({balance:u.number()}),Dhe=u.object({days:u.coerce.number().int().positive().default(30)}),jhe={checking:"CHECKING",savings:"SAVINGS",investment:"INVESTMENT",cash:"DIGITAL_WALLET"},UA=s(t=>jhe[t.toLowerCase()]||t.toUpperCase(),"normalizeAccountType"),Mhe=s(()=>`**** ${Math.floor(1e3+Math.random()*9e3)}`,"generateAccountMask"),$i=new Ae;$i.get("/",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(ce).where(J(ce.userId,e.id)).orderBy(Kt(ce.createdAt));return t.json({data:o||[],meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get bank accounts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});$i.get("/total-balance",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({balance:ce.balance,currency:ce.currency}).from(ce).where(Ie(J(ce.userId,e.id),J(ce.isActive,!0))),i={};return o&&o.forEach(a=>{let c=a.currency||"BRL";i[c]=(i[c]||0)+Number(a.balance||0)}),t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get total balance",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"TOTAL_BALANCE_ERROR",error:"Failed to calculate total balance"},500)}});$i.get("/:id",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(ce).where(Ie(J(ce.id,n),J(ce.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(i){return q.error("Failed to get bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_ERROR",error:"Failed to retrieve bank account"},500)}});$i.get("/:id/balance-history",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Je("query",Dhe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{days:o}=t.req.valid("query"),i=t.get("requestId");try{if(!n||n==="all")return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let[a]=await r.select({balance:ce.balance}).from(ce).where(Ie(J(ce.id,n),J(ce.userId,e.id))).limit(1);if(!a)return t.json({data:[],meta:{requestId:i,retrievedAt:new Date().toISOString()}});let c=Number(a.balance||0),l=[];for(let d=0;d<o;d++){let p=new Date;p.setDate(p.getDate()-d),l.push({date:p.toISOString(),balance:c})}return t.json({data:l.reverse(),meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return q.error("Failed to get balance history",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_HISTORY_ERROR",error:"Failed to retrieve balance history"},500)}});$i.post("/",me,xe({windowMs:60*1e3,max:10,message:"Too many account creation attempts, please try again later"}),Je("json",$he),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=UA(n.accountType),a=n.accountMask?Vd(n.accountMask):Mhe();if(!Bd(a))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);let c=n.institutionId||Ohe(),l=FB(),d="manual",p=zA({user_id:e.id,institution_name:n.institutionName,institution_id:c,account_type:i,account_mask:a,balance:n.balance,currency:n.currency.toUpperCase(),is_primary:n.isPrimary,is_active:n.isActive,belvo_account_id:l,sync_status:d}),m=BB(p);if(!m.valid){let g=m.errors.length>0?m.errors.map(f=>f.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:g},400)}let[h]=await r.select({id:ce.id}).from(ce).where(Ie(J(ce.userId,e.id),J(ce.institutionId,c),J(ce.accountMask,a))).limit(1);if(h)return t.json({code:"CONFLICT",error:"J\xE1 existe uma conta com a mesma institui\xE7\xE3o e final"},409);let[y]=await r.insert(ce).values({userId:e.id,institutionName:n.institutionName,institutionId:c,accountType:i,accountMask:a,balance:String(n.balance),currency:n.currency.toUpperCase(),isPrimary:n.isPrimary,isActive:n.isActive,belvoAccountId:l,syncStatus:d}).returning();return q.info("Bank account created",{accountId:y.id,institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({data:y,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return q.error("Failed to create bank account",{error:i instanceof Error?i.message:"Unknown error",institutionName:n.institutionName,requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_CREATE_ERROR",error:"Failed to create bank account"},500)}});$i.put("/:id",me,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Je("json",Rhe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:ce.id}).from(ce).where(Ie(J(ce.id,n),J(ce.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404);let c={};if(o.institutionName!==void 0&&(c.institutionName=o.institutionName),o.accountType!==void 0&&(c.accountType=UA(o.accountType)),o.balance!==void 0&&(c.balance=String(o.balance)),o.currency!==void 0&&(c.currency=o.currency.toUpperCase()),o.isPrimary!==void 0&&(c.isPrimary=o.isPrimary),o.isActive!==void 0&&(c.isActive=o.isActive),o.accountMask!==void 0){let m=Vd(o.accountMask);if(!Bd(m))return t.json({code:"BAD_REQUEST",error:"A m\xE1scara da conta deve seguir o formato **** 1234"},400);c.accountMask=m}let l=zA({institution_name:o.institutionName,account_type:o.accountType?UA(o.accountType):void 0,balance:o.balance,currency:o.currency?.toUpperCase(),is_primary:o.isPrimary,is_active:o.isActive,account_mask:o.accountMask?Vd(o.accountMask):void 0}),d=VB(l);if(!d.valid){let m=d.errors.length>0?d.errors.map(h=>h.message).join(", "):"Dados inv\xE1lidos";return t.json({code:"BAD_REQUEST",error:m},400)}let[p]=await r.update(ce).set(c).where(Ie(J(ce.id,n),J(ce.userId,e.id))).returning();return t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})}catch(a){return q.error("Failed to update bank account",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BANK_ACCOUNT_UPDATE_ERROR",error:"Failed to update bank account"},500)}});$i.patch("/:id/balance",me,xe({windowMs:60*1e3,max:30,message:"Too many balance update attempts, please try again later"}),Je("json",Nhe),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),{balance:o}=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.update(ce).set({balance:String(o)}).where(Ie(J(ce.id,n),J(ce.userId,e.id))).returning();return a?t.json({data:a,meta:{requestId:i,updatedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Conta banc\xE1ria n\xE3o encontrada"},404)}catch(a){return q.error("Failed to update balance",{accountId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"BALANCE_UPDATE_ERROR",error:"Failed to update balance"},500)}});$i.delete("/:id",me,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return await r.delete(ce).where(Ie(J(ce.id,n),J(ce.userId,e.id))),q.info("Bank account deleted",{accountId:n,requestId:o,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})}catch(i){return q.error("Failed to delete bank account",{accountId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"BANK_ACCOUNT_DELETE_ERROR",error:"Failed to delete bank account"},500)}});LA=$i});var Rg,zhe,NWe,qA,JB=b(()=>{"use strict";Jr();Pt();St();$t();Ar();Rg=new Ae,zhe=u.object({accountType:u.string(),balance:u.number(),bankName:u.string(),currency:u.string(),id:u.string(),lastSync:u.string().datetime().optional()}),NWe=u.object({accounts:u.array(zhe),currency:u.string(),total:u.number()});Rg.get("/accounts",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{q.info("Bank accounts accessed",{requestId:r,userId:e.id});let n={accounts:[],currency:"BRL",total:0};return t.json({data:n,meta:{note:"Placeholder implementation - Belvo integration pending",requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return q.error("Failed to get bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_ACCOUNTS_ERROR",error:"Failed to retrieve bank accounts"},500)}});Rg.post("/accounts/link",me,xe({windowMs:60*1e3,max:5,message:"Too many link attempts, please try again later"}),Je("json",u.object({bankCode:u.string(),credentials:u.record(u.string(),u.any())})),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return q.info("Bank account link attempt",{bankCode:r.bankCode,requestId:n,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{bankCode:r.bankCode,note:"Belvo integration is pending implementation"},error:"Bank account linking not yet implemented"},501)}catch(o){return q.error("Failed to link bank account",{bankCode:r.bankCode,error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"BANK_LINK_ERROR",error:"Failed to link bank account"},500)}});Rg.post("/accounts/sync",me,xe({windowMs:60*1e3,max:10,message:"Too many sync requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{return q.info("Bank accounts sync attempt",{requestId:r,userId:e.id}),t.json({code:"NOT_IMPLEMENTED",details:{note:"Belvo integration is pending implementation"},error:"Bank account synchronization not yet implemented"},501)}catch(n){return q.error("Failed to sync bank accounts",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"BANK_SYNC_ERROR",error:"Failed to sync bank accounts"},500)}});qA=Rg});var ks,Vc,Hd=b(()=>{ks=class{static{s(this,"CryptoProvider")}computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}},Vc=class extends Error{static{s(this,"CryptoProviderOnlySupportsAsyncError")}}});import*as Dg from"crypto";var Ng,GB=b(()=>{Hd();Ng=class extends ks{static{s(this,"NodeCryptoProvider")}computeHMACSignature(e,r){return Dg.createHmac("sha256",r).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,r){return await this.computeHMACSignature(e,r)}async computeSHA256Async(e){return new Uint8Array(await Dg.createHash("sha256").update(e).digest())}}});var Fr,Is,Zd=b(()=>{Fr=class t{static{s(this,"HttpClient")}getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,o,i,a,c,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(t.TIMEOUT_ERROR_CODE);return e.code=t.TIMEOUT_ERROR_CODE,e}};Fr.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Fr.TIMEOUT_ERROR_CODE="ETIMEDOUT";Is=class{static{s(this,"HttpClientResponse")}constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}});import*as BA from"http";import*as VA from"https";var KB,WB,Uhe,Lhe,Jd,FA,QB=b(()=>{Zd();KB=BA.default||BA,WB=VA.default||VA,Uhe=new KB.Agent({keepAlive:!0}),Lhe=new WB.Agent({keepAlive:!0}),Jd=class extends Fr{static{s(this,"NodeHttpClient")}constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=this._agent;return p||(p=d?Uhe:Lhe),new Promise((h,y)=>{let g=(d?KB:WB).request({host:e,port:r,path:n,method:o,agent:p,headers:i,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});g.setTimeout(l,()=>{g.destroy(Fr.makeTimeoutError())}),g.on("response",f=>{h(new FA(f))}),g.on("error",f=>{y(f)}),g.once("socket",f=>{f.connecting?f.once(d?"connect":"secureConnect",()=>{g.write(a),g.end()}):(g.write(a),g.end())})})}},FA=class extends Is{static{s(this,"NodeHttpClientResponse")}constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,r)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",o=>{n+=o}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(o){r(o)}})})}}});var sa=Fe((ZWe,XB)=>{"use strict";XB.exports=TypeError});var e5=Fe((JWe,YB)=>{YB.exports=yK("util").inspect});var Xd=Fe((GWe,b5)=>{var eC=typeof Map=="function"&&Map.prototype,HA=Object.getOwnPropertyDescriptor&&eC?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Mg=eC&&HA&&typeof HA.get=="function"?HA.get:null,t5=eC&&Map.prototype.forEach,tC=typeof Set=="function"&&Set.prototype,ZA=Object.getOwnPropertyDescriptor&&tC?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,zg=tC&&ZA&&typeof ZA.get=="function"?ZA.get:null,r5=tC&&Set.prototype.forEach,qhe=typeof WeakMap=="function"&&WeakMap.prototype,Kd=qhe?WeakMap.prototype.has:null,Fhe=typeof WeakSet=="function"&&WeakSet.prototype,Wd=Fhe?WeakSet.prototype.has:null,Bhe=typeof WeakRef=="function"&&WeakRef.prototype,n5=Bhe?WeakRef.prototype.deref:null,Vhe=Boolean.prototype.valueOf,Hhe=Object.prototype.toString,Zhe=Function.prototype.toString,Jhe=String.prototype.match,rC=String.prototype.slice,Ps=String.prototype.replace,Ghe=String.prototype.toUpperCase,o5=String.prototype.toLowerCase,m5=RegExp.prototype.test,i5=Array.prototype.concat,Ho=Array.prototype.join,Khe=Array.prototype.slice,s5=Math.floor,KA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,JA=Object.getOwnPropertySymbols,WA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Qd=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Hc||!0)?Symbol.toStringTag:null,f5=Object.prototype.propertyIsEnumerable,a5=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function c5(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||m5.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-s5(-t):s5(t);if(n!==t){var o=String(n),i=rC.call(e,o.length+1);return Ps.call(o,r,"$&_")+"."+Ps.call(Ps.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ps.call(e,r,"$&_")}s(c5,"addNumericSeparator");var QA=e5(),u5=QA.custom,l5=y5(u5)?u5:null,h5={__proto__:null,double:'"',single:"'"},Whe={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};b5.exports=s(function t(e,r,n,o){var i=r||{};if(Ri(i,"quoteStyle")&&!Ri(h5,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ri(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Ri(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ri(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ri(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return _5(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return c?c5(e,l):l}if(typeof e=="bigint"){var d=String(e)+"n";return c?c5(e,d):d}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return XA(e)?"[Array]":"[Object]";var m=fge(i,n);if(typeof o>"u")o=[];else if(v5(o,e)>=0)return"[Circular]";function h(Z,F,ee){if(F&&(o=Khe.call(o),o.push(F)),ee){var ne={depth:i.depth};return Ri(i,"quoteStyle")&&(ne.quoteStyle=i.quoteStyle),t(Z,ne,n+1,o)}return t(Z,i,n+1,o)}if(s(h,"inspect"),typeof e=="function"&&!d5(e)){var y=ige(e),g=jg(e,h);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(g.length>0?" { "+Ho.call(g,", ")+" }":"")}if(y5(e)){var f=Hc?Ps.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):WA.call(e);return typeof e=="object"&&!Hc?Gd(f):f}if(dge(e)){for(var _="<"+o5.call(String(e.nodeName)),S=e.attributes||[],w=0;w<S.length;w++)_+=" "+S[w].name+"="+g5(Qhe(S[w].value),"double",i);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+o5.call(String(e.nodeName))+">",_}if(XA(e)){if(e.length===0)return"[]";var x=jg(e,h);return m&&!mge(x)?"["+YA(x,m)+"]":"[ "+Ho.call(x,", ")+" ]"}if(Yhe(e)){var I=jg(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!f5.call(e,"cause")?"{ ["+String(e)+"] "+Ho.call(i5.call("[cause]: "+h(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ho.call(I,", ")+" }"}if(typeof e=="object"&&a){if(l5&&typeof e[l5]=="function"&&QA)return QA(e,{depth:p-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(sge(e)){var N=[];return t5&&t5.call(e,function(Z,F){N.push(h(F,e,!0)+" => "+h(Z,e))}),p5("Map",Mg.call(e),N,m)}if(uge(e)){var $=[];return r5&&r5.call(e,function(Z){$.push(h(Z,e))}),p5("Set",zg.call(e),$,m)}if(age(e))return GA("WeakMap");if(lge(e))return GA("WeakSet");if(cge(e))return GA("WeakRef");if(tge(e))return Gd(h(Number(e)));if(nge(e))return Gd(h(KA.call(e)));if(rge(e))return Gd(Vhe.call(e));if(ege(e))return Gd(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!Xhe(e)&&!d5(e)){var O=jg(e,h),R=a5?a5(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",D=!R&&Qd&&Object(e)===e&&Qd in e?rC.call(As(e),8,-1):A?"Object":"",M=R||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Q=M+(D||A?"["+Ho.call(i5.call([],D||[],A||[]),": ")+"] ":"");return O.length===0?Q+"{}":m?Q+"{"+YA(O,m)+"}":Q+"{ "+Ho.call(O,", ")+" }"}return String(e)},"inspect_");function g5(t,e,r){var n=r.quoteStyle||e,o=h5[n];return o+t+o}s(g5,"wrapQuotes");function Qhe(t){return Ps.call(String(t),/"/g,"&quot;")}s(Qhe,"quote");function aa(t){return!Qd||!(typeof t=="object"&&(Qd in t||typeof t[Qd]<"u"))}s(aa,"canTrustToString");function XA(t){return As(t)==="[object Array]"&&aa(t)}s(XA,"isArray");function Xhe(t){return As(t)==="[object Date]"&&aa(t)}s(Xhe,"isDate");function d5(t){return As(t)==="[object RegExp]"&&aa(t)}s(d5,"isRegExp");function Yhe(t){return As(t)==="[object Error]"&&aa(t)}s(Yhe,"isError");function ege(t){return As(t)==="[object String]"&&aa(t)}s(ege,"isString");function tge(t){return As(t)==="[object Number]"&&aa(t)}s(tge,"isNumber");function rge(t){return As(t)==="[object Boolean]"&&aa(t)}s(rge,"isBoolean");function y5(t){if(Hc)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!WA)return!1;try{return WA.call(t),!0}catch{}return!1}s(y5,"isSymbol");function nge(t){if(!t||typeof t!="object"||!KA)return!1;try{return KA.call(t),!0}catch{}return!1}s(nge,"isBigInt");var oge=Object.prototype.hasOwnProperty||function(t){return t in this};function Ri(t,e){return oge.call(t,e)}s(Ri,"has");function As(t){return Hhe.call(t)}s(As,"toStr");function ige(t){if(t.name)return t.name;var e=Jhe.call(Zhe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}s(ige,"nameOf");function v5(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}s(v5,"indexOf");function sge(t){if(!Mg||!t||typeof t!="object")return!1;try{Mg.call(t);try{zg.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}s(sge,"isMap");function age(t){if(!Kd||!t||typeof t!="object")return!1;try{Kd.call(t,Kd);try{Wd.call(t,Wd)}catch{return!0}return t instanceof WeakMap}catch{}return!1}s(age,"isWeakMap");function cge(t){if(!n5||!t||typeof t!="object")return!1;try{return n5.call(t),!0}catch{}return!1}s(cge,"isWeakRef");function uge(t){if(!zg||!t||typeof t!="object")return!1;try{zg.call(t);try{Mg.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}s(uge,"isSet");function lge(t){if(!Wd||!t||typeof t!="object")return!1;try{Wd.call(t,Wd);try{Kd.call(t,Kd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}s(lge,"isWeakSet");function dge(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}s(dge,"isElement");function _5(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return _5(rC.call(t,0,e.maxStringLength),e)+n}var o=Whe[e.quoteStyle||"single"];o.lastIndex=0;var i=Ps.call(Ps.call(t,o,"\\$1"),/[\x00-\x1f]/g,pge);return g5(i,"single",e)}s(_5,"inspectString");function pge(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Ghe.call(e.toString(16))}s(pge,"lowbyte");function Gd(t){return"Object("+t+")"}s(Gd,"markBoxed");function GA(t){return t+" { ? }"}s(GA,"weakCollectionOf");function p5(t,e,r,n){var o=n?YA(r,n):Ho.call(r,", ");return t+" ("+e+") {"+o+"}"}s(p5,"collectionOf");function mge(t){for(var e=0;e<t.length;e++)if(v5(t[e],`
`)>=0)return!1;return!0}s(mge,"singleLineValues");function fge(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Ho.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Ho.call(Array(e+1),r)}}s(fge,"getIndent");function YA(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Ho.call(t,","+r)+`
`+e.prev}s(YA,"indentedJoin");function jg(t,e){var r=XA(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Ri(t,o)?e(t[o],t):""}var i=typeof JA=="function"?JA(t):[],a;if(Hc){a={};for(var c=0;c<i.length;c++)a["$"+i[c]]=i[c]}for(var l in t)Ri(t,l)&&(r&&String(Number(l))===l&&l<t.length||Hc&&a["$"+l]instanceof Symbol||(m5.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof JA=="function")for(var d=0;d<i.length;d++)f5.call(t,i[d])&&n.push("["+e(i[d])+"]: "+e(t[i[d]],t));return n}s(jg,"arrObjKeys")});var S5=Fe((WWe,w5)=>{"use strict";var hge=Xd(),gge=sa(),Ug=s(function(t,e,r){for(var n=t,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,r||(o.next=t.next,t.next=o),o},"listGetNode"),yge=s(function(t,e){if(t){var r=Ug(t,e);return r&&r.value}},"listGet"),vge=s(function(t,e,r){var n=Ug(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},"listSet"),_ge=s(function(t,e){return t?!!Ug(t,e):!1},"listHas"),bge=s(function(t,e){if(t)return Ug(t,e,!0)},"listDelete");w5.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new gge("Side channel does not contain "+hge(n))},"assert"),delete:s(function(n){var o=e&&e.next,i=bge(e,n);return i&&o&&o===i&&(e=void 0),!!i},"delete"),get:s(function(n){return yge(e,n)},"get"),has:s(function(n){return _ge(e,n)},"has"),set:s(function(n,o){e||(e={next:void 0}),vge(e,n,o)},"set")};return r},"getSideChannelList")});var nC=Fe((XWe,x5)=>{"use strict";x5.exports=Object});var E5=Fe((YWe,T5)=>{"use strict";T5.exports=Error});var I5=Fe((eQe,k5)=>{"use strict";k5.exports=EvalError});var A5=Fe((tQe,P5)=>{"use strict";P5.exports=RangeError});var O5=Fe((rQe,C5)=>{"use strict";C5.exports=ReferenceError});var R5=Fe((nQe,$5)=>{"use strict";$5.exports=SyntaxError});var D5=Fe((oQe,N5)=>{"use strict";N5.exports=URIError});var M5=Fe((iQe,j5)=>{"use strict";j5.exports=Math.abs});var U5=Fe((sQe,z5)=>{"use strict";z5.exports=Math.floor});var q5=Fe((aQe,L5)=>{"use strict";L5.exports=Math.max});var B5=Fe((cQe,F5)=>{"use strict";F5.exports=Math.min});var H5=Fe((uQe,V5)=>{"use strict";V5.exports=Math.pow});var J5=Fe((lQe,Z5)=>{"use strict";Z5.exports=Math.round});var K5=Fe((dQe,G5)=>{"use strict";G5.exports=Number.isNaN||s(function(e){return e!==e},"isNaN")});var Q5=Fe((mQe,W5)=>{"use strict";var wge=K5();W5.exports=s(function(e){return wge(e)||e===0?e:e<0?-1:1},"sign")});var Y5=Fe((hQe,X5)=>{"use strict";X5.exports=Object.getOwnPropertyDescriptor});var oC=Fe((gQe,e9)=>{"use strict";var Lg=Y5();if(Lg)try{Lg([],"length")}catch{Lg=null}e9.exports=Lg});var r9=Fe((yQe,t9)=>{"use strict";var qg=Object.defineProperty||!1;if(qg)try{qg({},"a",{value:1})}catch{qg=!1}t9.exports=qg});var o9=Fe((vQe,n9)=>{"use strict";n9.exports=s(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==o||c.enumerable!==!0)return!1}return!0},"hasSymbols")});var a9=Fe((bQe,s9)=>{"use strict";var i9=typeof Symbol<"u"&&Symbol,Sge=o9();s9.exports=s(function(){return typeof i9!="function"||typeof Symbol!="function"||typeof i9("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Sge()},"hasNativeSymbols")});var iC=Fe((SQe,c9)=>{"use strict";c9.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var sC=Fe((xQe,u9)=>{"use strict";var xge=nC();u9.exports=xge.getPrototypeOf||null});var p9=Fe((TQe,d9)=>{"use strict";var Tge="Function.prototype.bind called on incompatible ",Ege=Object.prototype.toString,kge=Math.max,Ige="[object Function]",l9=s(function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},"concatty"),Pge=s(function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},"slicy"),Age=s(function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},"joiny");d9.exports=s(function(e){var r=this;if(typeof r!="function"||Ege.apply(r)!==Ige)throw new TypeError(Tge+r);for(var n=Pge(arguments,1),o,i=s(function(){if(this instanceof o){var p=r.apply(this,l9(n,arguments));return Object(p)===p?p:this}return r.apply(e,l9(n,arguments))},"binder"),a=kge(0,r.length-n.length),c=[],l=0;l<a;l++)c[l]="$"+l;if(o=Function("binder","return function ("+Age(c,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var d=s(function(){},"Empty");d.prototype=r.prototype,o.prototype=new d,d.prototype=null}return o},"bind")});var Yd=Fe((kQe,m9)=>{"use strict";var Cge=p9();m9.exports=Function.prototype.bind||Cge});var Fg=Fe((IQe,f9)=>{"use strict";f9.exports=Function.prototype.call});var aC=Fe((PQe,h9)=>{"use strict";h9.exports=Function.prototype.apply});var y9=Fe((AQe,g9)=>{"use strict";g9.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var _9=Fe((CQe,v9)=>{"use strict";var Oge=Yd(),$ge=aC(),Rge=Fg(),Nge=y9();v9.exports=Nge||Oge.call(Rge,$ge)});var cC=Fe((OQe,b9)=>{"use strict";var Dge=Yd(),jge=sa(),Mge=Fg(),zge=_9();b9.exports=s(function(e){if(e.length<1||typeof e[0]!="function")throw new jge("a function is required");return zge(Dge,Mge,e)},"callBindBasic")});var k9=Fe((RQe,E9)=>{"use strict";var Uge=cC(),w9=oC(),x9;try{x9=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var uC=!!x9&&w9&&w9(Object.prototype,"__proto__"),T9=Object,S9=T9.getPrototypeOf;E9.exports=uC&&typeof uC.get=="function"?Uge([uC.get]):typeof S9=="function"?s(function(e){return S9(e==null?e:T9(e))},"getDunder"):!1});var O9=Fe((DQe,C9)=>{"use strict";var I9=iC(),P9=sC(),A9=k9();C9.exports=I9?s(function(e){return I9(e)},"getProto"):P9?s(function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return P9(e)},"getProto"):A9?s(function(e){return A9(e)},"getProto"):null});var R9=Fe((MQe,$9)=>{"use strict";var Lge=Function.prototype.call,qge=Object.prototype.hasOwnProperty,Fge=Yd();$9.exports=Fge.call(Lge,qge)});var Hg=Fe((zQe,U9)=>{"use strict";var gt,Bge=nC(),Vge=E5(),Hge=I5(),Zge=A5(),Jge=O5(),Kc=R5(),Gc=sa(),Gge=D5(),Kge=M5(),Wge=U5(),Qge=q5(),Xge=B5(),Yge=H5(),eye=J5(),tye=Q5(),M9=Function,lC=s(function(t){try{return M9('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),ep=oC(),rye=r9(),dC=s(function(){throw new Gc},"throwTypeError"),nye=ep?(function(){try{return arguments.callee,dC}catch{try{return ep(arguments,"callee").get}catch{return dC}}})():dC,Zc=a9()(),Dr=O9(),oye=sC(),iye=iC(),z9=aC(),tp=Fg(),Jc={},sye=typeof Uint8Array>"u"||!Dr?gt:Dr(Uint8Array),ca={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?gt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?gt:ArrayBuffer,"%ArrayIteratorPrototype%":Zc&&Dr?Dr([][Symbol.iterator]()):gt,"%AsyncFromSyncIteratorPrototype%":gt,"%AsyncFunction%":Jc,"%AsyncGenerator%":Jc,"%AsyncGeneratorFunction%":Jc,"%AsyncIteratorPrototype%":Jc,"%Atomics%":typeof Atomics>"u"?gt:Atomics,"%BigInt%":typeof BigInt>"u"?gt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?gt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?gt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?gt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Vge,"%eval%":eval,"%EvalError%":Hge,"%Float16Array%":typeof Float16Array>"u"?gt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?gt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?gt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?gt:FinalizationRegistry,"%Function%":M9,"%GeneratorFunction%":Jc,"%Int8Array%":typeof Int8Array>"u"?gt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?gt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?gt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Zc&&Dr?Dr(Dr([][Symbol.iterator]())):gt,"%JSON%":typeof JSON=="object"?JSON:gt,"%Map%":typeof Map>"u"?gt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Zc||!Dr?gt:Dr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Bge,"%Object.getOwnPropertyDescriptor%":ep,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?gt:Promise,"%Proxy%":typeof Proxy>"u"?gt:Proxy,"%RangeError%":Zge,"%ReferenceError%":Jge,"%Reflect%":typeof Reflect>"u"?gt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?gt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Zc||!Dr?gt:Dr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?gt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Zc&&Dr?Dr(""[Symbol.iterator]()):gt,"%Symbol%":Zc?Symbol:gt,"%SyntaxError%":Kc,"%ThrowTypeError%":nye,"%TypedArray%":sye,"%TypeError%":Gc,"%Uint8Array%":typeof Uint8Array>"u"?gt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?gt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?gt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?gt:Uint32Array,"%URIError%":Gge,"%WeakMap%":typeof WeakMap>"u"?gt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?gt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?gt:WeakSet,"%Function.prototype.call%":tp,"%Function.prototype.apply%":z9,"%Object.defineProperty%":rye,"%Object.getPrototypeOf%":oye,"%Math.abs%":Kge,"%Math.floor%":Wge,"%Math.max%":Qge,"%Math.min%":Xge,"%Math.pow%":Yge,"%Math.round%":eye,"%Math.sign%":tye,"%Reflect.getPrototypeOf%":iye};if(Dr)try{null.error}catch(t){N9=Dr(Dr(t)),ca["%Error.prototype%"]=N9}var N9,aye=s(function t(e){var r;if(e==="%AsyncFunction%")r=lC("async function () {}");else if(e==="%GeneratorFunction%")r=lC("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=lC("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Dr&&(r=Dr(o.prototype))}return ca[e]=r,r},"doEval"),D9={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rp=Yd(),Bg=R9(),cye=rp.call(tp,Array.prototype.concat),uye=rp.call(z9,Array.prototype.splice),j9=rp.call(tp,String.prototype.replace),Vg=rp.call(tp,String.prototype.slice),lye=rp.call(tp,RegExp.prototype.exec),dye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pye=/\\(\\)?/g,mye=s(function(e){var r=Vg(e,0,1),n=Vg(e,-1);if(r==="%"&&n!=="%")throw new Kc("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Kc("invalid intrinsic syntax, expected opening `%`");var o=[];return j9(e,dye,function(i,a,c,l){o[o.length]=c?j9(l,pye,"$1"):a||i}),o},"stringToPath"),fye=s(function(e,r){var n=e,o;if(Bg(D9,n)&&(o=D9[n],n="%"+o[0]+"%"),Bg(ca,n)){var i=ca[n];if(i===Jc&&(i=aye(n)),typeof i>"u"&&!r)throw new Gc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Kc("intrinsic "+e+" does not exist!")},"getBaseIntrinsic");U9.exports=s(function(e,r){if(typeof e!="string"||e.length===0)throw new Gc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Gc('"allowMissing" argument must be a boolean');if(lye(/^%?[^%]*%?$/,e)===null)throw new Kc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=mye(e),o=n.length>0?n[0]:"",i=fye("%"+o+"%",r),a=i.name,c=i.value,l=!1,d=i.alias;d&&(o=d[0],uye(n,cye([0,1],d)));for(var p=1,m=!0;p<n.length;p+=1){var h=n[p],y=Vg(h,0,1),g=Vg(h,-1);if((y==='"'||y==="'"||y==="`"||g==='"'||g==="'"||g==="`")&&y!==g)throw new Kc("property names with quotes must have matching quotes");if((h==="constructor"||!m)&&(l=!0),o+="."+h,a="%"+o+"%",Bg(ca,a))c=ca[a];else if(c!=null){if(!(h in c)){if(!r)throw new Gc("base intrinsic for "+e+" exists, but the property is not available.");return}if(ep&&p+1>=n.length){var f=ep(c,h);m=!!f,m&&"get"in f&&!("originalValue"in f.get)?c=f.get:c=c[h]}else m=Bg(c,h),c=c[h];m&&!l&&(ca[a]=c)}}return c},"GetIntrinsic")});var pC=Fe((LQe,F9)=>{"use strict";var L9=Hg(),q9=cC(),hye=q9([L9("%String.prototype.indexOf%")]);F9.exports=s(function(e,r){var n=L9(e,!!r);return typeof n=="function"&&hye(e,".prototype.")>-1?q9([n]):n},"callBoundIntrinsic")});var mC=Fe((FQe,V9)=>{"use strict";var gye=Hg(),np=pC(),yye=Xd(),vye=sa(),B9=gye("%Map%",!0),_ye=np("Map.prototype.get",!0),bye=np("Map.prototype.set",!0),wye=np("Map.prototype.has",!0),Sye=np("Map.prototype.delete",!0),xye=np("Map.prototype.size",!0);V9.exports=!!B9&&s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new vye("Side channel does not contain "+yye(n))},"assert"),delete:s(function(n){if(e){var o=Sye(e,n);return xye(e)===0&&(e=void 0),o}return!1},"delete"),get:s(function(n){if(e)return _ye(e,n)},"get"),has:s(function(n){return e?wye(e,n):!1},"has"),set:s(function(n,o){e||(e=new B9),bye(e,n,o)},"set")};return r},"getSideChannelMap")});var Z9=Fe((VQe,H9)=>{"use strict";var Tye=Hg(),Jg=pC(),Eye=Xd(),Zg=mC(),kye=sa(),Wc=Tye("%WeakMap%",!0),Iye=Jg("WeakMap.prototype.get",!0),Pye=Jg("WeakMap.prototype.set",!0),Aye=Jg("WeakMap.prototype.has",!0),Cye=Jg("WeakMap.prototype.delete",!0);H9.exports=Wc?s(function(){var e,r,n={assert:s(function(o){if(!n.has(o))throw new kye("Side channel does not contain "+Eye(o))},"assert"),delete:s(function(o){if(Wc&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Cye(e,o)}else if(Zg&&r)return r.delete(o);return!1},"delete"),get:s(function(o){return Wc&&o&&(typeof o=="object"||typeof o=="function")&&e?Iye(e,o):r&&r.get(o)},"get"),has:s(function(o){return Wc&&o&&(typeof o=="object"||typeof o=="function")&&e?Aye(e,o):!!r&&r.has(o)},"has"),set:s(function(o,i){Wc&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Wc),Pye(e,o,i)):Zg&&(r||(r=Zg()),r.set(o,i))},"set")};return n},"getSideChannelWeakMap"):Zg});var G9=Fe((ZQe,J9)=>{"use strict";var Oye=sa(),$ye=Xd(),Rye=S5(),Nye=mC(),Dye=Z9(),jye=Dye||Nye||Rye;J9.exports=s(function(){var e,r={assert:s(function(n){if(!r.has(n))throw new Oye("Side channel does not contain "+$ye(n))},"assert"),delete:s(function(n){return!!e&&e.delete(n)},"delete"),get:s(function(n){return e&&e.get(n)},"get"),has:s(function(n){return!!e&&e.has(n)},"has"),set:s(function(n,o){e||(e=jye()),e.set(n,o)},"set")};return r},"getSideChannel")});var Gg=Fe((GQe,K9)=>{"use strict";var Mye=String.prototype.replace,zye=/%20/g,fC={RFC1738:"RFC1738",RFC3986:"RFC3986"};K9.exports={default:fC.RFC3986,formatters:{RFC1738:s(function(t){return Mye.call(t,zye,"+")},"RFC1738"),RFC3986:s(function(t){return String(t)},"RFC3986")},RFC1738:fC.RFC1738,RFC3986:fC.RFC3986}});var yC=Fe((WQe,Q9)=>{"use strict";var Uye=Gg(),hC=Object.prototype.hasOwnProperty,ua=Array.isArray,Zo=(function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Lye=s(function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(ua(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);r.obj[r.prop]=o}}},"compactQueue"),W9=s(function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},"arrayToObject"),qye=s(function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(ua(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!hC.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return ua(e)&&!ua(r)&&(o=W9(e,n)),ua(e)&&ua(r)?(r.forEach(function(i,a){if(hC.call(e,a)){var c=e[a];c&&typeof c=="object"&&i&&typeof i=="object"?e[a]=t(c,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var c=r[a];return hC.call(i,a)?i[a]=t(i[a],c,n):i[a]=c,i},o)},"merge"),Fye=s(function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},"assignSingleSource"),Bye=s(function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},"decode"),gC=1024,Vye=s(function(e,r,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var c="",l=0;l<a.length;l+=gC){for(var d=a.length>=gC?a.slice(l,l+gC):a,p=[],m=0;m<d.length;++m){var h=d.charCodeAt(m);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===Uye.RFC1738&&(h===40||h===41)){p[p.length]=d.charAt(m);continue}if(h<128){p[p.length]=Zo[h];continue}if(h<2048){p[p.length]=Zo[192|h>>6]+Zo[128|h&63];continue}if(h<55296||h>=57344){p[p.length]=Zo[224|h>>12]+Zo[128|h>>6&63]+Zo[128|h&63];continue}m+=1,h=65536+((h&1023)<<10|d.charCodeAt(m)&1023),p[p.length]=Zo[240|h>>18]+Zo[128|h>>12&63]+Zo[128|h>>6&63]+Zo[128|h&63]}c+=p.join("")}return c},"encode"),Hye=s(function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var i=r[o],a=i.obj[i.prop],c=Object.keys(a),l=0;l<c.length;++l){var d=c[l],p=a[d];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:a,prop:d}),n.push(p))}return Lye(r),e},"compact"),Zye=s(function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},"isRegExp"),Jye=s(function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},"isBuffer"),Gye=s(function(e,r){return[].concat(e,r)},"combine"),Kye=s(function(e,r){if(ua(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)},"maybeMap");Q9.exports={arrayToObject:W9,assign:Fye,combine:Gye,compact:Hye,decode:Bye,encode:Vye,isBuffer:Jye,isRegExp:Zye,maybeMap:Kye,merge:qye}});var n3=Fe((XQe,r3)=>{"use strict";var Y9=G9(),Kg=yC(),op=Gg(),Wye=Object.prototype.hasOwnProperty,e3={brackets:s(function(e){return e+"[]"},"brackets"),comma:"comma",indices:s(function(e,r){return e+"["+r+"]"},"indices"),repeat:s(function(e){return e},"repeat")},Jo=Array.isArray,Qye=Array.prototype.push,t3=s(function(t,e){Qye.apply(t,Jo(e)?e:[e])},"pushToArray"),Xye=Date.prototype.toISOString,X9=op.default,Cr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Kg.encode,encodeValuesOnly:!1,filter:void 0,format:X9,formatter:op.formatters[X9],indices:!1,serializeDate:s(function(e){return Xye.call(e)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},Yye=s(function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},"isNonNullishPrimitive"),vC={},eve=s(function t(e,r,n,o,i,a,c,l,d,p,m,h,y,g,f,_,S,w){for(var x=e,I=w,N=0,$=!1;(I=I.get(vC))!==void 0&&!$;){var O=I.get(e);if(N+=1,typeof O<"u"){if(O===N)throw new RangeError("Cyclic object value");$=!0}typeof I.get(vC)>"u"&&(N=0)}if(typeof p=="function"?x=p(r,x):x instanceof Date?x=y(x):n==="comma"&&Jo(x)&&(x=Kg.maybeMap(x,function(rt){return rt instanceof Date?y(rt):rt})),x===null){if(a)return d&&!_?d(r,Cr.encoder,S,"key",g):r;x=""}if(Yye(x)||Kg.isBuffer(x)){if(d){var R=_?r:d(r,Cr.encoder,S,"key",g);return[f(R)+"="+f(d(x,Cr.encoder,S,"value",g))]}return[f(r)+"="+f(String(x))]}var A=[];if(typeof x>"u")return A;var D;if(n==="comma"&&Jo(x))_&&d&&(x=Kg.maybeMap(x,d)),D=[{value:x.length>0?x.join(",")||null:void 0}];else if(Jo(p))D=p;else{var M=Object.keys(x);D=m?M.sort(m):M}var Q=l?String(r).replace(/\./g,"%2E"):String(r),Z=o&&Jo(x)&&x.length===1?Q+"[]":Q;if(i&&Jo(x)&&x.length===0)return Z+"[]";for(var F=0;F<D.length;++F){var ee=D[F],ne=typeof ee=="object"&&ee&&typeof ee.value<"u"?ee.value:x[ee];if(!(c&&ne===null)){var se=h&&l?String(ee).replace(/\./g,"%2E"):String(ee),we=Jo(x)?typeof n=="function"?n(Z,se):Z:Z+(h?"."+se:"["+se+"]");w.set(e,N);var Ee=Y9();Ee.set(vC,w),t3(A,t(ne,we,n,o,i,a,c,l,n==="comma"&&_&&Jo(x)?null:d,p,m,h,y,g,f,_,S,Ee))}}return A},"stringify"),tve=s(function(e){if(!e)return Cr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Cr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=op.default;if(typeof e.format<"u"){if(!Wye.call(op.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=op.formatters[n],i=Cr.filter;(typeof e.filter=="function"||Jo(e.filter))&&(i=e.filter);var a;if(e.arrayFormat in e3?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=Cr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Cr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Cr.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Cr.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Cr.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Cr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Cr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Cr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Cr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Cr.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Cr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Cr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Cr.strictNullHandling}},"normalizeStringifyOptions");r3.exports=function(t,e){var r=t,n=tve(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):Jo(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof r!="object"||r===null)return"";var c=e3[n.arrayFormat],l=c==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var d=Y9(),p=0;p<o.length;++p){var m=o[p],h=r[m];n.skipNulls&&h===null||t3(a,eve(h,m,c,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var y=a.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}});var a3=Fe((e7e,s3)=>{"use strict";var la=yC(),_C=Object.prototype.hasOwnProperty,o3=Array.isArray,dr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:la.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},rve=s(function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),i3=s(function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},"parseArrayValue"),nve="utf8=%26%2310003%3B",ove="utf8=%E2%9C%93",ive=s(function(e,r){var n={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=o.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&a.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var c=-1,l,d=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===ove?d="utf-8":a[l]===nve&&(d="iso-8859-1"),c=l,l=a.length);for(l=0;l<a.length;++l)if(l!==c){var p=a[l],m=p.indexOf("]="),h=m===-1?p.indexOf("="):m+1,y,g;h===-1?(y=r.decoder(p,dr.decoder,d,"key"),g=r.strictNullHandling?null:""):(y=r.decoder(p.slice(0,h),dr.decoder,d,"key"),g=la.maybeMap(i3(p.slice(h+1),r,o3(n[y])?n[y].length:0),function(_){return r.decoder(_,dr.decoder,d,"value")})),g&&r.interpretNumericEntities&&d==="iso-8859-1"&&(g=rve(String(g))),p.indexOf("[]=")>-1&&(g=o3(g)?[g]:g);var f=_C.call(n,y);f&&r.duplicates==="combine"?n[y]=la.combine(n[y],g):(!f||r.duplicates==="last")&&(n[y]=g)}return n},"parseQueryStringValues"),sve=s(function(t,e,r,n){var o=0;if(t.length>0&&t[t.length-1]==="[]"){var i=t.slice(0,-1).join("");o=Array.isArray(e)&&e[i]?e[i].length:0}for(var a=n?e:i3(e,r,o),c=t.length-1;c>=0;--c){var l,d=t[c];if(d==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:la.combine([],a);else{l=r.plainObjects?{__proto__:null}:{};var p=d.charAt(0)==="["&&d.charAt(d.length-1)==="]"?d.slice(1,-1):d,m=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,h=parseInt(m,10);!r.parseArrays&&m===""?l={0:a}:!isNaN(h)&&d!==m&&String(h)===m&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[],l[h]=a):m!=="__proto__"&&(l[m]=a)}a=l}return a},"parseObject"),ave=s(function(e,r,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(i),d=l?i.slice(0,l.index):i,p=[];if(d){if(!n.plainObjects&&_C.call(Object.prototype,d)&&!n.allowPrototypes)return;p.push(d)}for(var m=0;n.depth>0&&(l=c.exec(i))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&_C.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");p.push("["+i.slice(l.index)+"]")}return sve(p,r,n,o)}},"parseQueryStringKeys"),cve=s(function(e){if(!e)return dr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?dr.charset:e.charset,n=typeof e.duplicates>"u"?dr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:dr.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:dr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:dr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:dr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:dr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:dr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:dr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:dr.decoder,delimiter:typeof e.delimiter=="string"||la.isRegExp(e.delimiter)?e.delimiter:dr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:dr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:dr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:dr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:dr.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:dr.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dr.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},"normalizeParseOptions");s3.exports=function(t,e){var r=cve(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?ive(t,r):t,o=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),a=0;a<i.length;++a){var c=i[a],l=ave(c,n[c],r,typeof t=="string");o=la.merge(o,l,r)}return r.allowSparse===!0?o:la.compact(o)}});var u3=Fe((r7e,c3)=>{"use strict";var uve=n3(),lve=a3(),dve=Gg();c3.exports={formats:dve,parse:lve,stringify:uve}});function d3(t){return t&&typeof t=="object"&&bC.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function Cs(t,e){return l3.stringify(t,{serializeDate:s(r=>Math.floor(r.getTime()/1e3).toString(),"serializeDate"),arrayFormat:"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}function pve(t){return["number","string","boolean"].includes(typeof t)}function p3(t){let e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function Qc(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!d3(t[0]))return t.shift();let e=Object.keys(t[0]),r=e.filter(n=>bC.includes(n));return r.length>0&&r.length!==e.length&&sp(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Xg(t){let e={host:null,headers:{},settings:{},streaming:!1};if(t.length>0){let r=t[t.length-1];if(typeof r=="string")e.authenticator=Wg(t.pop());else if(d3(r)){let n=Object.assign({},t.pop()),o=Object.keys(n).filter(i=>!bC.includes(i));if(o.length&&sp(`Invalid options found (${o.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Wg(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders),n.streaming&&(e.streaming=!0)}}return e}function m3(t){let e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function Yg(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function f3(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[mve(r)]=t[r],e),{}):t}function mve(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function ip(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function h3(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function sp(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function fve(t){let e=typeof t;return(e==="function"||e==="object")&&!!t}function g3(t){let e={},r=s((n,o)=>{Object.entries(n).forEach(([i,a])=>{let c=o?`${o}[${i}]`:i;if(fve(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,c);e[c]=a}else e[c]=String(a)})},"step");return r(t,null),e}function ey(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function y3(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function Wg(t){let e=s(r=>(r.headers.Authorization="Bearer "+t,Promise.resolve()),"authenticator");return e._apiKey=t,e}function v3(t){let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e),n=0;return t.forEach(o=>{r.set(o,n),n+=o.length}),r}function hve(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function _3(t){return JSON.stringify(t,hve)}function Xc(t){return t&&t.startsWith("/v2")?"v2":"v1"}function ty(t){return Array.isArray(t)?t.join(", "):String(t)}function b3(t){let e=Array.isArray(t)?t[0]:t;return Number(e)}function w3(t){return Object.entries(t).map(([e,r])=>[e,ty(r)])}var l3,bC,Qg,Go=b(()=>{l3=hu(u3(),1),bC=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];s(d3,"isOptionsHash");s(Cs,"queryStringifyRequestData");Qg=(()=>{let t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(o,i)=>{let a=n[i];return pve(a)?encodeURIComponent(a):""})}})();s(pve,"isValidEncodeUriComponentType");s(p3,"extractUrlParams");s(Qc,"getDataFromArgs");s(Xg,"getOptionsFromArgs");s(m3,"protoExtend");s(Yg,"removeNullish");s(f3,"normalizeHeaders");s(mve,"normalizeHeader");s(ip,"callbackifyPromiseWithTimeout");s(h3,"pascalToCamelCase");s(sp,"emitWarning");s(fve,"isObject");s(g3,"flattenAndStringify");s(ey,"validateInteger");s(y3,"determineProcessUserAgentProperties");s(Wg,"createApiKeyAuthenticator");s(v3,"concat");s(hve,"dateTimeReplacer");s(_3,"jsonStringifyRequestData");s(Xc,"getAPIMode");s(ty,"parseHttpHeaderAsString");s(b3,"parseHttpHeaderAsNumber");s(w3,"parseHeadersForFetch")});var ry,wC,S3=b(()=>{Go();Zd();ry=class t extends Fr{static{s(this,"FetchHttpClient")}constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=t.makeFetchWithAbortTimeout(e):this._fetchFn=t.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,o)=>{let i,a=new Promise((l,d)=>{i=setTimeout(()=>{i=null,d(Fr.makeTimeoutError())},o)}),c=e(r,n);return Promise.race([c,a]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(r,n,o)=>{let i=new AbortController,a=setTimeout(()=>{a=null,i.abort(Fr.makeTimeoutError())},o);try{return await e(r,Object.assign(Object.assign({},n),{signal:i.signal}))}catch(c){throw c.name==="AbortError"?Fr.makeTimeoutError():c}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,o,i,a,c,l){let d=c==="http",p=new URL(n,`${d?"http":"https"}://${e}`);p.port=r;let m=o=="POST"||o=="PUT"||o=="PATCH",h=a||(m?"":void 0),y=await this._fetchFn(p.toString(),{method:o,headers:w3(i),body:h},l);return new wC(y)}},wC=class t extends Is{static{s(this,"FetchHttpClientResponse")}constructor(e){super(e.status,t._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let r={};for(let n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}});var ny,SC,x3=b(()=>{Hd();ny=class extends ks{static{s(this,"SubtleCryptoProvider")}constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Vc("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){let n=new TextEncoder,o=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",o,n.encode(e)),a=new Uint8Array(i),c=new Array(a.length);for(let l=0;l<a.length;l++)c[l]=SC[a[l]];return c.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}},SC=new Array(256);for(let t=0;t<SC.length;t++)SC[t]=t.toString(16).padStart(2,"0")});var oy,T3=b(()=>{S3();x3();oy=class{static{s(this,"PlatformFunctions")}constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;let n=e.length,o=0;for(let i=0;i<n;++i)o|=e.charCodeAt(i)^r.charCodeAt(i);return o===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new ry(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new ny(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}});var ly={};On(ly,{StripeAPIError:()=>Yc,StripeAuthenticationError:()=>eu,StripeCardError:()=>iy,StripeConnectionError:()=>up,StripeError:()=>pr,StripeIdempotencyError:()=>sy,StripeInvalidGrantError:()=>ay,StripeInvalidRequestError:()=>ap,StripePermissionError:()=>cp,StripeRateLimitError:()=>tu,StripeSignatureVerificationError:()=>To,StripeUnknownError:()=>cy,TemporarySessionExpiredError:()=>uy,generateV1Error:()=>lp,generateV2Error:()=>xC});var lp,xC,pr,iy,ap,Yc,eu,cp,tu,up,To,sy,ay,cy,uy,dp=b(()=>{lp=s(t=>{switch(t.type){case"card_error":return new iy(t);case"invalid_request_error":return new ap(t);case"api_error":return new Yc(t);case"authentication_error":return new eu(t);case"rate_limit_error":return new tu(t);case"idempotency_error":return new sy(t);case"invalid_grant":return new ay(t);default:return new cy(t)}},"generateV1Error"),xC=s(t=>{switch(t.type){case"temporary_session_expired":return new uy(t)}switch(t.code){case"invalid_fields":return new ap(t)}return lp(t)},"generateV2Error"),pr=class extends Error{static{s(this,"StripeError")}constructor(e={},r=null){var n;super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=(n=e.message)!==null&&n!==void 0?n:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};pr.generate=lp;iy=class extends pr{static{s(this,"StripeCardError")}constructor(e={}){super(e,"StripeCardError")}},ap=class extends pr{static{s(this,"StripeInvalidRequestError")}constructor(e={}){super(e,"StripeInvalidRequestError")}},Yc=class extends pr{static{s(this,"StripeAPIError")}constructor(e={}){super(e,"StripeAPIError")}},eu=class extends pr{static{s(this,"StripeAuthenticationError")}constructor(e={}){super(e,"StripeAuthenticationError")}},cp=class extends pr{static{s(this,"StripePermissionError")}constructor(e={}){super(e,"StripePermissionError")}},tu=class extends pr{static{s(this,"StripeRateLimitError")}constructor(e={}){super(e,"StripeRateLimitError")}},up=class extends pr{static{s(this,"StripeConnectionError")}constructor(e={}){super(e,"StripeConnectionError")}},To=class extends pr{static{s(this,"StripeSignatureVerificationError")}constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}},sy=class extends pr{static{s(this,"StripeIdempotencyError")}constructor(e={}){super(e,"StripeIdempotencyError")}},ay=class extends pr{static{s(this,"StripeInvalidGrantError")}constructor(e={}){super(e,"StripeInvalidGrantError")}},cy=class extends pr{static{s(this,"StripeUnknownError")}constructor(e={}){super(e,"StripeUnknownError")}},uy=class extends pr{static{s(this,"TemporarySessionExpiredError")}constructor(e={}){super(e,"TemporarySessionExpiredError")}}});import*as ru from"crypto";import{EventEmitter as E3}from"events";import{exec as gve}from"child_process";var TC,dy,k3=b(()=>{GB();QB();T3();dp();Go();TC=class extends pr{static{s(this,"StreamProcessingError")}},dy=class extends oy{static{s(this,"NodePlatformFunctions")}constructor(){super(),this._exec=gve,this._UNAME_CACHE=null}uuid4(){return ru.randomUUID?ru.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,r)=>{try{this._exec("uname -a",(n,o)=>{if(n)return e(null);e(o)})}catch{e(null)}})),this._UNAME_CACHE}secureCompare(e,r){if(!e||!r)throw new Error("secureCompare must receive two arguments");if(e.length!==r.length)return!1;if(ru.timingSafeEqual){let n=new TextEncoder,o=n.encode(e),i=n.encode(r);return ru.timingSafeEqual(o,i)}return super.secureCompare(e,r)}createEmitter(){return new E3}tryBufferData(e){if(!(e.file.data instanceof E3))return Promise.resolve(e);let r=[];return new Promise((n,o)=>{e.file.data.on("data",i=>{r.push(i)}).once("end",()=>{let i=Object.assign({},e);i.file.data=v3(r),n(i)}).on("error",i=>{o(new TC({message:"An error occurred while attempting to process the file for upload.",detail:i}))})})}createNodeHttpClient(e){return new Jd(e)}createDefaultHttpClient(){return new Jd}createNodeCryptoProvider(){return new Ng}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}}});var yve,py,I3=b(()=>{dp();Zd();Go();yve=60,py=class t{static{s(this,"RequestSender")}constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_normalizeStripeContext(e,r){return e?e.toString()||null:r?.toString()||null}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){let o=Date.now(),i=o-e.request_start_time;return Yg({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:i,request_start_time:e.request_start_time,request_end_time:o})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return o=>{let i=o.getHeaders(),a=s(()=>{let l=this._makeResponseEvent(e,o.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,r)},"streamCompleteCallback"),c=o.toStream(a);return this._addHeadersDirectlyToObject(c,i),n(null,c)}}_jsonResponseHandler(e,r,n,o){return i=>{let a=i.getHeaders(),c=this._getRequestId(a),l=i.getStatusCode(),d=this._makeResponseEvent(e,l,a);this._stripe._emitter.emit("response",d),i.toJSON().then(p=>{if(p.error){let m;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=a,p.error.statusCode=l,p.error.requestId=c,l===401?m=new eu(p.error):l===403?m=new cp(p.error):l===429?m=new tu(p.error):r==="v2"?m=xC(p.error):m=lp(p.error),m}return p},p=>{throw new Yc({message:"Invalid JSON received from the Stripe API",exception:p,requestId:a["request-id"]})}).then(p=>{this._recordRequestMetrics(c,d.elapsed,n);let m=i.getRawResponse();this._addHeadersDirectlyToObject(m,a),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:m}),o(null,p)},p=>o(p,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,o){return o&&r===0&&Fr.CONNECTION_CLOSED_ERROR_CODES.includes(o.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){let n=this._stripe.getInitialNetworkRetryDelay(),o=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(n*Math.pow(2,e-1),o);return i*=.5*(1+Math.random()),i=Math.max(n,i),Number.isInteger(r)&&r<=yve&&(i=Math.max(i,r)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){let o=this._getMaxNetworkRetries(r),i=s(()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`,"genKey");if(n==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(n==="v1"&&e==="POST"&&o>0)return i();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:o,method:i,userSuppliedHeaders:a,userSuppliedSettings:c,stripeAccount:l,stripeContext:d,apiMode:p}){let m={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":o,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":l,"Stripe-Context":d,"Idempotency-Key":this._defaultIdempotencyKey(i,c,p)},h=i=="POST"||i=="PUT"||i=="PATCH";return(h||r)&&(h||sp(`${i} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(Yg(m),f3(a))}_getUserAgentString(e){let r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)sp("Request metrics buffer is full, dropping telemetry message.");else{let o={request_id:e,request_duration_ms:r};n&&n.length>0&&(o.usage=n),this._stripe._prevRequestMetrics.push(o)}}_rawRequest(e,r,n,o,i){return new Promise((c,l)=>{let d;try{let g=e.toUpperCase();if(g!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let f=[].slice.call([n,o]),_=Qc(f),S=g==="POST"?Object.assign({},_):null,w=Xg(f),x=w.headers,I=w.authenticator;d={requestMethod:g,requestPath:r,bodyData:S,queryData:{},authenticator:I,headers:x,host:w.host,streaming:!!w.streaming,settings:{},usage:i||["raw_request"]}}catch(g){l(g);return}function p(g,f){g?l(g):c(f)}s(p,"requestCallback");let{headers:m,settings:h}=d,y=d.authenticator;this._request(d.requestMethod,d.host,r,d.bodyData,y,{headers:m,settings:h,streaming:d.streaming},d.usage,p)})}_request(e,r,n,o,i,a,c=[],l,d=null){var p;let m;i=(p=i??this._stripe._authenticator)!==null&&p!==void 0?p:null;let h=Xc(n),y=s((_,S,w,x,I)=>setTimeout(_,this._getSleepTimeInMS(x,I),S,w,x+1),"retryRequest"),g=s((_,S,w)=>{let x=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),I={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},S),body:m,protocol:this._stripe.getApiField("protocol")};i(I).then(()=>{let N=this._stripe.getApiField("httpClient").makeRequest(I.host,I.port,I.path,I.method,I.headers,I.body,I.protocol,x),$=Date.now(),O=Yg({api_version:_,account:ty(S["Stripe-Account"]),idempotency_key:ty(S["Idempotency-Key"]),method:e,path:n,request_start_time:$}),R=w||0,A=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",O),N.then(D=>t._shouldRetry(D,R,A)?y(g,_,S,R,b3(D.getHeaders()["retry-after"])):a.streaming&&D.getStatusCode()<400?this._streamingResponseHandler(O,c,l)(D):this._jsonResponseHandler(O,h,c,l)(D)).catch(D=>{if(t._shouldRetry(null,R,A,D))return y(g,_,S,R,null);{let M=D.code&&D.code===Fr.TIMEOUT_ERROR_CODE;return l(new up({message:M?`Request aborted due to timeout being reached (${x}ms)`:t._generateConnectionErrorMessage(R),detail:D}))}})}).catch(N=>{throw new pr({message:"Unable to authenticate the request",exception:N})})},"makeRequest"),f=s((_,S)=>{if(_)return l(_);m=S,this._stripe.getClientUserAgent(w=>{var x,I,N;let $=this._stripe.getApiField("version"),O=this._makeHeaders({contentType:h=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:new TextEncoder().encode(m).length,apiVersion:$,clientUserAgent:w,method:e,userSuppliedHeaders:(x=a.headers)!==null&&x!==void 0?x:null,userSuppliedSettings:(I=a.settings)!==null&&I!==void 0?I:{},stripeAccount:(N=a.stripeAccount)!==null&&N!==void 0?N:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(a.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:h});g($,O,0)})},"prepareAndMakeRequest");if(d)d(e,o,a.headers,f);else{let _;h=="v2"?_=o?_3(o):"":_=Cs(o||{},h),f(null,_)}}}});function vve(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function _ve(t){if(t.length<2)return null;let e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function bve(t){if(t.length===0)return;let e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return s(function(n,o){let i=e(n);o(i)},"_onItem")}function wve(t,e){let r=e?0:t.data.length-1,n=t.data[r],o=n&&n.id;if(!o)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return o}function Sve(t){return s(function(){let r=[].slice.call(arguments),n=bve(r),o=_ve(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);let i=Tve(t,n);return ip(i,o)},"autoPagingEach")}function xve(t){return s(function(r,n){let o=r&&r.limit;if(!o)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(o>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((a,c)=>{let l=[];t(d=>{if(l.push(d),l.length>=o)return!1}).then(()=>{a(l)}).catch(c)});return ip(i,n)},"autoPagingToArray")}function Tve(t,e){return new Promise((r,n)=>{function o(i){if(i.done){r();return}let a=i.value;return new Promise(c=>{e(a,c)}).then(c=>c===!1?o({done:!0,value:void 0}):t().then(o))}s(o,"handleIteration"),t().then(o).catch(n)})}function A3(t){let e=[].slice.call(t);return!!Qc(e).ending_before}var my,kC,IC,PC,P3,EC,C3=b(()=>{Go();my=class{static{s(this,"V1Iterator")}constructor(e,r,n,o){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=o}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let r=A3(this.requestArgs);if(this.index<e.data.length){let n=r?e.data.length-1-this.index:this.index,o=e.data[n];return this.index+=1,{value:o,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}},kC=class extends my{static{s(this,"V1ListIterator")}getNextPage(e){let r=A3(this.requestArgs),n=wve(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}},IC=class extends my{static{s(this,"V1SearchIterator")}getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},PC=class{static{s(this,"V2ListIterator")}constructor(e,r,n,o){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=o}async turnPage(){let e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;let r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}let e=await this.turnPage();if(!e)return{done:!0,value:void 0};let r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}},P3=s((t,e,r,n)=>{let o=Xc(r.fullPath||r.path);return o!=="v2"&&r.methodType==="search"?EC(new IC(n,e,r,t)):o!=="v2"&&r.methodType==="list"?EC(new kC(n,e,r,t)):o==="v2"&&r.methodType==="list"?EC(new PC(n,e,r,t)):null},"makeAutoPaginationMethods"),EC=s(t=>{let e=Sve((...o)=>t.next(...o)),r=xve(e),n={autoPagingEach:e,autoPagingToArray:r,next:s(()=>t.next(),"next"),return:s(()=>({}),"return"),[vve()]:()=>n};return n},"makeAutoPaginationMethodsFromIterator");s(vve,"getAsyncIteratorSymbol");s(_ve,"getDoneCallback");s(bve,"getItemCallback");s(wve,"getLastId");s(Sve,"makeAutoPagingEach");s(xve,"makeAutoPagingToArray");s(Tve,"wrapAsyncIteratorWithCallback");s(A3,"isReverseIteration")});function O3(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){let r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=p3(t.fullPath||this.createResourcePathWithSymbols(t.path||""));let n=ip(this._makeRequest(e,t,{}),r);return Object.assign(n,P3(this,e,t,n)),n}}var $3=b(()=>{Go();C3();s(O3,"stripeMethod")});function E(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Qg(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Qg(this.path),this.initialize(...arguments)}var Y=b(()=>{Go();$3();E.extend=m3;E.method=O3;E.MAX_BUFFERED_REQUEST_METRICS=100;s(E,"StripeResource");E.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){let r=[this.basePath(e),this.path(e)];if(typeof t=="function"){let n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;let o=(e.method||"GET").toUpperCase(),i=e.usage||[],a=e.urlParams||[],c=e.encode||(O=>O),l=!!e.fullPath,d=Qg(l?e.fullPath:e.path||""),p=l?e.fullPath:this.createResourcePathWithSymbols(e.path),m=[].slice.call(t),h=a.reduce((O,R)=>{let A=m.shift();if(typeof A!="string")throw new Error(`Stripe: Argument "${R}" must be a string, but got: ${A} (on API request to \`${o} ${p}\`)`);return O[R]=A,O},{}),y=Qc(m),g=c(Object.assign({},y,r)),f=Xg(m),_=f.host||e.host,S=!!e.streaming||!!f.streaming;if(m.filter(O=>O!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${p}\`)`);let w=l?d(h):this.createFullPath(d,h),x=Object.assign(f.headers,e.headers);e.validator&&e.validator(g,{headers:x});let I=e.method==="GET"||e.method==="DELETE";return{requestMethod:o,requestPath:w,bodyData:I?null:g,queryData:I?g:{},authenticator:(n=f.authenticator)!==null&&n!==void 0?n:null,headers:x,host:_??null,streaming:S,settings:f.settings,usage:i}},_makeRequest(t,e,r){return new Promise((n,o)=>{var i;let a;try{a=this._getRequestOpts(t,e,r)}catch(h){o(h);return}function c(h,y){h?o(h):n(e.transformResponseData?e.transformResponseData(y):y)}s(c,"requestCallback");let l=Object.keys(a.queryData).length===0,d=[a.requestPath,l?"":"?",Cs(a.queryData,Xc(a.requestPath))].join(""),{headers:p,settings:m}=a;this._stripe._requestSender._request(a.requestMethod,a.host,d,a.bodyData,a.authenticator,{headers:p,settings:m,streaming:a.streaming},a.usage,c,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}}});var pp,R3=b(()=>{pp=class t{static{s(this,"StripeContext")}constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new t([...this._segments,e])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new t(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return e?new t(e.split("/")):new t([])}}});function N3(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,m,h,y,g,f){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,m,h,y||e.DEFAULT_TOLERANCE,g,f)}catch(S){throw S instanceof Vc&&(S.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),S}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,m,h,y,g,f){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,m,h,y||e.DEFAULT_TOLERANCE,g,f),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:s(function(p){let m=d(p),h=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderString"),generateTestHeaderStringAsync:s(async function(p){let m=d(p),h=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(h)},"generateTestHeaderStringAsync")},r={EXPECTED_SCHEME:"v1",verifyHeader(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:S,details:w,suspectPayloadType:x}=o(p,m,this.EXPECTED_SCHEME),I=/\s/.test(h);g=g||l();let N=g.computeHMACSignature(n(S,w),h);return i(S,_,w,N,y,x,I,f),!0},async verifyHeaderAsync(p,m,h,y,g,f){let{decodedHeader:_,decodedPayload:S,details:w,suspectPayloadType:x}=o(p,m,this.EXPECTED_SCHEME),I=/\s/.test(h);g=g||l();let N=await g.computeHMACSignatureAsync(n(S,w),h);return i(S,_,w,N,y,x,I,f)}};function n(p,m){return`${m.timestamp}.${p}`}s(n,"makeHMACContent");function o(p,m,h){if(!p)throw new To(m,p,{message:"No webhook payload was provided."});let y=typeof p!="string"&&!(p instanceof Uint8Array),g=new TextDecoder("utf8"),f=p instanceof Uint8Array?g.decode(p):p;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new To(m,p,{message:"No stripe-signature header value was provided."});let _=m instanceof Uint8Array?g.decode(m):m,S=a(_,h);if(!S||S.timestamp===-1)throw new To(_,f,{message:"Unable to extract timestamp and signatures from header"});if(!S.signatures.length)throw new To(_,f,{message:"No signatures found with expected scheme"});return{decodedPayload:f,decodedHeader:_,details:S,suspectPayloadType:y}}s(o,"parseEventDetails");function i(p,m,h,y,g,f,_,S){let w=!!h.signatures.filter(t.secureCompare.bind(t,y)).length,x=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,I=_?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!w)throw f?new To(m,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+x+`
`+I}):new To(m,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+x+`
`+I});let N=Math.floor((typeof S=="number"?S:Date.now())/1e3)-h.timestamp;if(g>0&&N>g)throw new To(m,p,{message:"Timestamp outside the tolerance zone"});return!0}s(i,"validateComputedSignature");function a(p,m){return typeof p!="string"?null:p.split(",").reduce((h,y)=>{let g=y.split("=");return g[0]==="t"&&(h.timestamp=parseInt(g[1],10)),g[0]===m&&h.signatures.push(g[1]),h},{timestamp:-1,signatures:[]})}s(a,"parseHeader");let c=null;function l(){return c||(c=t.createDefaultCryptoProvider()),c}s(l,"getCryptoProvider");function d(p){if(!p)throw new pr({message:"Options are required"});let m=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),h=p.scheme||r.EXPECTED_SCHEME,y=p.cryptoProvider||l(),g=`${m}.${p.payload}`,f=s(_=>`t=${m},${h}=${_}`,"generateHeaderString");return Object.assign(Object.assign({},p),{timestamp:m,scheme:h,cryptoProvider:y,payloadString:g,generateHeaderString:f})}return s(d,"prepareOptions"),e.signature=r,e}var D3=b(()=>{dp();Hd();s(N3,"createWebhooks")});var AC,j3=b(()=>{AC="2025-11-17.clover"});function Eve(t,e){for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=r[0].toLowerCase()+r.substring(1),o=new e[r](t);this[n]=o}}function rr(t,e){return function(r){return new Eve(r,e)}}var M3=b(()=>{s(Eve,"ResourceNamespace");s(rr,"resourceNamespace")});var da,z3,U3=b(()=>{Y();da=E.method,z3=E.extend({retrieve:da({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:da({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:da({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:da({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:da({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:da({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:da({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})})});var L3,q3,F3=b(()=>{Y();L3=E.method,q3=E.extend({retrieve:L3({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:L3({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})})});var nu,B3,V3=b(()=>{Y();nu=E.method,B3=E.extend({create:nu({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:nu({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:nu({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:nu({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:nu({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:nu({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})})});var kve,H3,Z3=b(()=>{Y();kve=E.method,H3=E.extend({find:kve({method:"GET",fullPath:"/v1/tax/associations/find"})})});var mp,J3,G3=b(()=>{Y();mp=E.method,J3=E.extend({retrieve:mp({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:mp({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:mp({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:mp({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:mp({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})})});var pa,K3,W3=b(()=>{Y();pa=E.method,K3=E.extend({create:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:pa({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})})});var CC,Q3,X3=b(()=>{Y();CC=E.method,Q3=E.extend({create:CC({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:CC({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:CC({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})})});var fy,Y3,eV=b(()=>{Y();fy=E.method,Y3=E.extend({create:fy({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:fy({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:fy({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:fy({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})})});var hy,tV,rV=b(()=>{Y();hy=E.method,tV=E.extend({create:hy({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:hy({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:hy({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:hy({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})})});var fp,nV,oV=b(()=>{Y();fp=E.method,nV=E.extend({deliverCard:fp({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:fp({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:fp({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:fp({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:fp({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})})});var gy,iV,sV=b(()=>{Y();gy=E.method,iV=E.extend({create:gy({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:gy({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:gy({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:gy({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})})});var hp,aV,cV=b(()=>{Y();hp=E.method,aV=E.extend({create:hp({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:hp({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:hp({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:hp({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:hp({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})})});var Ive,uV,lV=b(()=>{Y();Ive=E.method,uV=E.extend({create:Ive({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})})});var Pve,dV,pV=b(()=>{Y();Pve=E.method,dV=E.extend({create:Pve({method:"POST",fullPath:"/v1/terminal/connection_tokens"})})});var Ave,mV,fV=b(()=>{Y();Ave=E.method,mV=E.extend({retrieve:Ave({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})})});var hV,gV,yV=b(()=>{Y();hV=E.method,gV=E.extend({retrieve:hV({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:hV({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})})});var ou,vV,_V=b(()=>{Y();ou=E.method,vV=E.extend({create:ou({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:ou({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:ou({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:ou({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:ou({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:ou({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})})});var OC,bV,wV=b(()=>{Y();OC=E.method,bV=E.extend({create:OC({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:OC({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:OC({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})})});var Cve,SV,xV=b(()=>{Y();Cve=E.method,SV=E.extend({fundCashBalance:Cve({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})})});var $C,TV,EV=b(()=>{Y();$C=E.method,TV=E.extend({create:$C({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:$C({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:$C({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})})});var gp,kV,IV=b(()=>{Y();gp=E.method,kV=E.extend({create:gp({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:gp({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:gp({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:gp({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:gp({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})})});var PV,AV,CV=b(()=>{Y();PV=E.method,AV=E.extend({retrieve:PV({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:PV({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})})});var Os,OV,$V=b(()=>{Y();Os=E.method,OV=E.extend({create:Os({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Os({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Os({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Os({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Os({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Os({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Os({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Os({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})})});var RC,RV,NV=b(()=>{Y();RC=E.method,RV=E.extend({retrieve(...t){return RC({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:s(r=>this.addFetchRelatedObjectIfNeeded(r),"transformResponseData")}).apply(this,t)},list(...t){return RC({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:s(r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))}),"transformResponseData")}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:s(()=>RC({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeContext:t.context}]),"fetchRelatedObject")})}})});var yy,DV,jV=b(()=>{Y();yy=E.method,DV=E.extend({create:yy({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:yy({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:yy({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:yy({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})})});var ma,MV,zV=b(()=>{Y();ma=E.method,MV=E.extend({create:ma({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ma({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ma({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ma({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ma({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ma({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ma({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})})});var NC,UV,LV=b(()=>{Y();NC=E.method,UV=E.extend({fail:NC({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:NC({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:NC({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})})});var vy,qV,FV=b(()=>{Y();vy=E.method,qV=E.extend({create:vy({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:vy({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:vy({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:vy({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})})});var yp,BV,VV=b(()=>{Y();yp=E.method,BV=E.extend({create:yp({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:yp({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:yp({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:yp({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:yp({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})})});var Ove,HV,ZV=b(()=>{Y();Ove=E.method,HV=E.extend({create:Ove({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})})});var $ve,JV,GV=b(()=>{Y();$ve=E.method,JV=E.extend({create:$ve({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})})});var Rve,KV,WV=b(()=>{Y();Rve=E.method,KV=E.extend({create:Rve({method:"POST",fullPath:"/v2/billing/meter_event_session"})})});var Nve,QV,XV=b(()=>{Y();Nve=E.method,QV=E.extend({create:Nve({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})})});var Dve,YV,eH=b(()=>{Y();Dve=E.method,YV=E.extend({create:Dve({method:"POST",fullPath:"/v1/billing/meter_events"})})});var jve,tH,rH=b(()=>{Y();jve=E.method,tH=E.extend({create:jve({method:"POST",fullPath:"/v2/billing/meter_events"})})});var fa,nH,oH=b(()=>{Y();fa=E.method,nH=E.extend({create:fa({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:fa({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:fa({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:fa({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:fa({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:fa({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:fa({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})})});var Mve,iH,sH=b(()=>{Y();Mve=E.method,iH=E.extend({create:Mve({method:"POST",fullPath:"/v1/terminal/onboarding_links"})})});var vp,aH,cH=b(()=>{Y();vp=E.method,aH=E.extend({create:vp({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:vp({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:vp({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:vp({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:vp({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})})});var _y,uH,lH=b(()=>{Y();_y=E.method,uH=E.extend({update:_y({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:_y({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:_y({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:_y({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})})});var by,dH,pH=b(()=>{Y();by=E.method,dH=E.extend({create:by({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:by({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:by({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:by({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})})});var wy,mH,fH=b(()=>{Y();wy=E.method,mH=E.extend({update:wy({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:wy({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:wy({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:wy({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})})});var Sy,hH,gH=b(()=>{Y();Sy=E.method,hH=E.extend({create:Sy({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Sy({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Sy({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Sy({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})})});var xy,yH,vH=b(()=>{Y();xy=E.method,yH=E.extend({create:xy({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:xy({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:xy({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:xy({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})})});var DC,_H,bH=b(()=>{Y();DC=E.method,_H=E.extend({activate:DC({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:DC({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:DC({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})})});var wH,SH,xH=b(()=>{Y();wH=E.method,SH=E.extend({retrieve:wH({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:wH({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})})});var TH,EH,kH=b(()=>{Y();TH=E.method,EH=E.extend({retrieve:TH({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:TH({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})})});var Ln,IH,PH=b(()=>{Y();Ln=E.method,IH=E.extend({create:Ln({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Ln({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Ln({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Ln({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Ln({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})})});var jC,AH,CH=b(()=>{Y();jC=E.method,AH=E.extend({presentPaymentMethod:jC({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:jC({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:jC({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})})});var zve,OH,$H=b(()=>{Y();zve=E.method,OH=E.extend({create:zve({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})})});var RH,NH,DH=b(()=>{Y();RH=E.method,NH=E.extend({retrieve:RH({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:RH({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})})});var Uve,jH,MH=b(()=>{Y();Uve=E.method,jH=E.extend({create:Uve({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})})});var zH,UH,LH=b(()=>{Y();zH=E.method,UH=E.extend({retrieve:zH({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:zH({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})})});var Lve,qH,FH=b(()=>{Y();Lve=E.method,qH=E.extend({expire:Lve({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})})});var Ty,BH,VH=b(()=>{Y();Ty=E.method,BH=E.extend({create:Ty({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Ty({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Ty({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Ty({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})})});var MC,HH,ZH=b(()=>{Y();MC=E.method,HH=E.extend({create:MC({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:MC({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:MC({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})})});var JH,GH,KH=b(()=>{Y();JH=E.method,GH=E.extend({retrieve:JH({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:JH({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})})});var zC,WH,QH=b(()=>{Y();zC=E.method,WH=E.extend({create:zC({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:zC({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:zC({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})})});var XH,YH,eZ=b(()=>{Y();XH=E.method,YH=E.extend({retrieve:XH({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:XH({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})})});var Ey,tZ,rZ=b(()=>{Y();Ey=E.method,tZ=E.extend({create:Ey({method:"POST",fullPath:"/v1/apps/secrets"}),list:Ey({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Ey({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Ey({method:"GET",fullPath:"/v1/apps/secrets/find"})})});var qve,nZ,oZ=b(()=>{Y();qve=E.method,nZ=E.extend({create:qve({method:"POST",fullPath:"/v1/billing_portal/sessions"})})});var iu,iZ,sZ=b(()=>{Y();iu=E.method,iZ=E.extend({create:iu({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:iu({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:iu({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:iu({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:iu({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:iu({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})})});var aZ,cZ,uZ=b(()=>{Y();aZ=E.method,cZ=E.extend({create:aZ({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:aZ({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})})});var lZ,dZ,pZ=b(()=>{Y();lZ=E.method,dZ=E.extend({retrieve:lZ({method:"GET",fullPath:"/v1/tax/settings"}),update:lZ({method:"POST",fullPath:"/v1/tax/settings"})})});var mZ,fZ,hZ=b(()=>{Y();mZ=E.method,fZ=E.extend({retrieve:mZ({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:mZ({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})})});var _p,gZ,yZ=b(()=>{Y();_p=E.method,gZ=E.extend({create:_p({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:_p({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:_p({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:_p({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:_p({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})})});var UC,vZ,_Z=b(()=>{Y();UC=E.method,vZ=E.extend({retrieve:UC({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:UC({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:UC({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})})});var bZ,wZ,SZ=b(()=>{Y();bZ=E.method,wZ=E.extend({retrieve:bZ({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:bZ({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})})});var xZ,TZ,EZ=b(()=>{Y();xZ=E.method,TZ=E.extend({retrieve:xZ({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:xZ({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})})});var LC,kZ,IZ=b(()=>{Y();LC=E.method,kZ=E.extend({retrieve:LC({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:LC({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:LC({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})})});var ky,PZ,AZ=b(()=>{Y();ky=E.method,PZ=E.extend({retrieve:ky({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:ky({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:ky({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:ky({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})})});var qC,CZ,OZ=b(()=>{Y();qC=E.method,CZ=E.extend({createForceCapture:qC({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:qC({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:qC({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})})});var $Z,RZ,NZ=b(()=>{Y();$Z=E.method,RZ=E.extend({retrieve:$Z({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:$Z({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})})});var Iy,DZ,jZ=b(()=>{Y();Iy=E.method,DZ=E.extend({create:Iy({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:Iy({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:Iy({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:Iy({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})})});var bp,MZ,zZ=b(()=>{Y();bp=E.method,MZ=E.extend({create:bp({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:bp({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:bp({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:bp({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:bp({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})})});var UZ,LZ,qZ=b(()=>{Y();UZ=E.method,LZ=E.extend({retrieve:UZ({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:UZ({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})})});var su,FZ,BZ=b(()=>{Y();su=E.method,FZ=E.extend({create:su({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:su({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:su({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:su({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:su({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:su({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})})});var mr,FC,BC=b(()=>{Y();mr=E.method,FC=E.extend({create:mr({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?mr({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),mr({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:mr({method:"POST",fullPath:"/v1/accounts/{account}"}),list:mr({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:mr({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:mr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:mr({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:mr({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:mr({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:mr({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:mr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:mr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:mr({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:mr({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:mr({method:"GET",fullPath:"/v1/account"}),retrieveCapability:mr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:mr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:mr({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:mr({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:mr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:mr({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})})});var Fve,VZ,HZ=b(()=>{Y();Fve=E.method,VZ=E.extend({create:Fve({method:"POST",fullPath:"/v1/account_links"})})});var Bve,ZZ,JZ=b(()=>{Y();Bve=E.method,ZZ=E.extend({create:Bve({method:"POST",fullPath:"/v1/account_sessions"})})});var Py,GZ,KZ=b(()=>{Y();Py=E.method,GZ=E.extend({create:Py({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Py({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Py({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Py({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})})});var au,WZ,QZ=b(()=>{Y();au=E.method,WZ=E.extend({retrieve:au({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:au({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:au({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:au({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:au({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:au({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})})});var Vve,XZ,YZ=b(()=>{Y();Vve=E.method,XZ=E.extend({retrieve:Vve({method:"GET",fullPath:"/v1/balance"})})});var e8,t8,r8=b(()=>{Y();e8=E.method,t8=E.extend({retrieve:e8({method:"GET",fullPath:"/v1/balance_settings"}),update:e8({method:"POST",fullPath:"/v1/balance_settings"})})});var n8,o8,i8=b(()=>{Y();n8=E.method,o8=E.extend({retrieve:n8({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:n8({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})})});var cu,s8,a8=b(()=>{Y();cu=E.method,s8=E.extend({create:cu({method:"POST",fullPath:"/v1/charges"}),retrieve:cu({method:"GET",fullPath:"/v1/charges/{charge}"}),update:cu({method:"POST",fullPath:"/v1/charges/{charge}"}),list:cu({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:cu({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:cu({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})})});var Hve,c8,u8=b(()=>{Y();Hve=E.method,c8=E.extend({retrieve:Hve({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})})});var l8,d8,p8=b(()=>{Y();l8=E.method,d8=E.extend({retrieve:l8({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:l8({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})})});var wp,m8,f8=b(()=>{Y();wp=E.method,m8=E.extend({create:wp({method:"POST",fullPath:"/v1/coupons"}),retrieve:wp({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:wp({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:wp({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:wp({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})})});var $s,h8,g8=b(()=>{Y();$s=E.method,h8=E.extend({create:$s({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:$s({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:$s({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:$s({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:$s({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:$s({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:$s({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:$s({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})})});var Zve,y8,v8=b(()=>{Y();Zve=E.method,y8=E.extend({create:Zve({method:"POST",fullPath:"/v1/customer_sessions"})})});var qt,_8,b8=b(()=>{Y();qt=E.method,_8=E.extend({create:qt({method:"POST",fullPath:"/v1/customers"}),retrieve:qt({method:"GET",fullPath:"/v1/customers/{customer}"}),update:qt({method:"POST",fullPath:"/v1/customers/{customer}"}),list:qt({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:qt({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:qt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:qt({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:qt({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:qt({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:qt({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:qt({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:qt({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:qt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:qt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:qt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:qt({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:qt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:qt({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:qt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:qt({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:qt({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:qt({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:qt({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:qt({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:qt({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:qt({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:qt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:qt({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})})});var Ay,w8,S8=b(()=>{Y();Ay=E.method,w8=E.extend({retrieve:Ay({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Ay({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Ay({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Ay({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})})});var x8,T8,E8=b(()=>{Y();x8=E.method,T8=E.extend({create:x8({method:"POST",fullPath:"/v1/ephemeral_keys",validator:s((t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")},"validator")}),del:x8({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})})});var k8,I8,P8=b(()=>{Y();k8=E.method,I8=E.extend({retrieve:k8({method:"GET",fullPath:"/v1/events/{id}"}),list:k8({method:"GET",fullPath:"/v1/events",methodType:"list"})})});var A8,C8,O8=b(()=>{Y();A8=E.method,C8=E.extend({retrieve:A8({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:A8({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})})});var Cy,$8,R8=b(()=>{Y();Cy=E.method,$8=E.extend({create:Cy({method:"POST",fullPath:"/v1/file_links"}),retrieve:Cy({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Cy({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Cy({method:"GET",fullPath:"/v1/file_links",methodType:"list"})})});function N8(t,e,r,n){if(e=e||{},t!=="POST")return n(null,Cs(e));this._stripe._platformFunctions.tryBufferData(e).then(o=>{let i=Jve(t,o,r);return n(null,i)}).catch(o=>n(o,null))}var Jve,D8=b(()=>{Go();Jve=s((t,e,r)=>{let n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;let o=new TextEncoder,i=new Uint8Array(0),a=o.encode(`\r
`);function c(p){let m=i,h=p instanceof Uint8Array?p:new Uint8Array(o.encode(p));i=new Uint8Array(m.length+h.length+2),i.set(m),i.set(h,m.length),i.set(a,i.length-2)}s(c,"push");function l(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}s(l,"q");let d=g3(e);for(let p in d){if(!Object.prototype.hasOwnProperty.call(d,p))continue;let m=d[p];if(c(`--${n}`),Object.prototype.hasOwnProperty.call(m,"data")){let h=m;c(`Content-Disposition: form-data; name=${l(p)}; filename=${l(h.name||"blob")}`),c(`Content-Type: ${h.type||"application/octet-stream"}`),c(""),c(h.data)}else c(`Content-Disposition: form-data; name=${l(p)}`),c(""),c(m)}return c(`--${n}--`),i},"multipartDataGenerator");s(N8,"multipartRequestDataProcessor")});var VC,j8,M8=b(()=>{D8();Y();VC=E.method,j8=E.extend({create:VC({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:VC({method:"GET",fullPath:"/v1/files/{file}"}),list:VC({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:N8})});var Sp,z8,U8=b(()=>{Y();Sp=E.method,z8=E.extend({create:Sp({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Sp({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Sp({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Sp({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Sp({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})})});var L8,q8,F8=b(()=>{Y();L8=E.method,q8=E.extend({retrieve:L8({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:L8({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})})});var Oy,B8,V8=b(()=>{Y();Oy=E.method,B8=E.extend({retrieve:Oy({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Oy({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Oy({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Oy({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})})});var jr,H8,Z8=b(()=>{Y();jr=E.method,H8=E.extend({create:jr({method:"POST",fullPath:"/v1/invoices"}),retrieve:jr({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:jr({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:jr({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:jr({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:jr({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:jr({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:jr({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:jr({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})})});var Gve,J8,G8=b(()=>{Y();Gve=E.method,J8=E.extend({retrieve:Gve({method:"GET",fullPath:"/v1/mandates/{mandate}"})})});var K8,HC,W8,Q8=b(()=>{"use strict";Y();Go();K8=E.method,HC="connect.stripe.com",W8=E.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${HC}/${r}?${Cs(t)}`},token:K8({method:"POST",path:"oauth/token",host:HC}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),K8({method:"POST",path:"oauth/deauthorize",host:HC}).apply(this,[t,...e])}})});var X8,Y8,eJ=b(()=>{Y();X8=E.method,Y8=E.extend({retrieve:X8({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:X8({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})})});var eo,tJ,rJ=b(()=>{Y();eo=E.method,tJ=E.extend({create:eo({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:eo({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:eo({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:eo({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:eo({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:eo({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})})});var xp,nJ,oJ=b(()=>{Y();xp=E.method,nJ=E.extend({create:xp({method:"POST",fullPath:"/v1/payment_links"}),retrieve:xp({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:xp({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:xp({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:xp({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})})});var $y,iJ,sJ=b(()=>{Y();$y=E.method,iJ=E.extend({create:$y({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:$y({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:$y({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:$y({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})})});var Tp,aJ,cJ=b(()=>{Y();Tp=E.method,aJ=E.extend({create:Tp({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Tp({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Tp({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Tp({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Tp({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})})});var uu,uJ,lJ=b(()=>{Y();uu=E.method,uJ=E.extend({create:uu({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:uu({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:uu({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:uu({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:uu({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:uu({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})})});var Rs,dJ,pJ=b(()=>{Y();Rs=E.method,dJ=E.extend({retrieve:Rs({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:Rs({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:Rs({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})})});var lu,mJ,fJ=b(()=>{Y();lu=E.method,mJ=E.extend({create:lu({method:"POST",fullPath:"/v1/payouts"}),retrieve:lu({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:lu({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:lu({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:lu({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:lu({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})})});var Ep,hJ,gJ=b(()=>{Y();Ep=E.method,hJ=E.extend({create:Ep({method:"POST",fullPath:"/v1/plans"}),retrieve:Ep({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Ep({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Ep({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Ep({method:"DELETE",fullPath:"/v1/plans/{plan}"})})});var kp,yJ,vJ=b(()=>{Y();kp=E.method,yJ=E.extend({create:kp({method:"POST",fullPath:"/v1/prices"}),retrieve:kp({method:"GET",fullPath:"/v1/prices/{price}"}),update:kp({method:"POST",fullPath:"/v1/prices/{price}"}),list:kp({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:kp({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})})});var Ko,_J,bJ=b(()=>{Y();Ko=E.method,_J=E.extend({create:Ko({method:"POST",fullPath:"/v1/products"}),retrieve:Ko({method:"GET",fullPath:"/v1/products/{id}"}),update:Ko({method:"POST",fullPath:"/v1/products/{id}"}),list:Ko({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:Ko({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:Ko({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:Ko({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:Ko({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:Ko({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:Ko({method:"GET",fullPath:"/v1/products/search",methodType:"search"})})});var Ry,wJ,SJ=b(()=>{Y();Ry=E.method,wJ=E.extend({create:Ry({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Ry({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Ry({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Ry({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})})});var Wo,xJ,TJ=b(()=>{Y();Wo=E.method,xJ=E.extend({create:Wo({method:"POST",fullPath:"/v1/quotes"}),retrieve:Wo({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Wo({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Wo({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Wo({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Wo({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Wo({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Wo({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Wo({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Wo({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})})});var Ip,EJ,kJ=b(()=>{Y();Ip=E.method,EJ=E.extend({create:Ip({method:"POST",fullPath:"/v1/refunds"}),retrieve:Ip({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Ip({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Ip({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Ip({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})})});var ZC,IJ,PJ=b(()=>{Y();ZC=E.method,IJ=E.extend({retrieve:ZC({method:"GET",fullPath:"/v1/reviews/{review}"}),list:ZC({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:ZC({method:"POST",fullPath:"/v1/reviews/{review}/approve"})})});var Kve,AJ,CJ=b(()=>{Y();Kve=E.method,AJ=E.extend({list:Kve({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})})});var ha,OJ,$J=b(()=>{Y();ha=E.method,OJ=E.extend({create:ha({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:ha({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:ha({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:ha({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:ha({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:ha({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:ha({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})})});var Ny,RJ,NJ=b(()=>{Y();Ny=E.method,RJ=E.extend({create:Ny({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Ny({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Ny({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Ny({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})})});var Pp,DJ,jJ=b(()=>{Y();Pp=E.method,DJ=E.extend({create:Pp({method:"POST",fullPath:"/v1/sources"}),retrieve:Pp({method:"GET",fullPath:"/v1/sources/{source}"}),update:Pp({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Pp({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Pp({method:"POST",fullPath:"/v1/sources/{source}/verify"})})});var Ap,MJ,zJ=b(()=>{Y();Ap=E.method,MJ=E.extend({create:Ap({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Ap({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Ap({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Ap({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Ap({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})})});var du,UJ,LJ=b(()=>{Y();du=E.method,UJ=E.extend({create:du({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:du({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:du({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:du({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:du({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:du({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})})});var Ni,qJ,FJ=b(()=>{Y();Ni=E.method,qJ=E.extend({create:Ni({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Ni({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Ni({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Ni({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Ni({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Ni({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:Ni({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:Ni({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Ni({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})})});var BJ,VJ,HJ=b(()=>{Y();BJ=E.method,VJ=E.extend({retrieve:BJ({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:BJ({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})})});var Dy,ZJ,JJ=b(()=>{Y();Dy=E.method,ZJ=E.extend({create:Dy({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Dy({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Dy({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Dy({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})})});var jy,GJ,KJ=b(()=>{Y();jy=E.method,GJ=E.extend({create:jy({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:jy({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:jy({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:jy({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})})});var WJ,QJ,XJ=b(()=>{Y();WJ=E.method,QJ=E.extend({create:WJ({method:"POST",fullPath:"/v1/tokens"}),retrieve:WJ({method:"GET",fullPath:"/v1/tokens/{token}"})})});var Cp,YJ,eG=b(()=>{Y();Cp=E.method,YJ=E.extend({create:Cp({method:"POST",fullPath:"/v1/topups"}),retrieve:Cp({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Cp({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Cp({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Cp({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})})});var Ns,tG,rG=b(()=>{Y();Ns=E.method,tG=E.extend({create:Ns({method:"POST",fullPath:"/v1/transfers"}),retrieve:Ns({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Ns({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Ns({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Ns({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Ns({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Ns({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Ns({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})})});var Op,nG,oG=b(()=>{Y();Op=E.method,nG=E.extend({create:Op({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Op({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Op({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Op({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Op({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})})});var pu={};On(pu,{Account:()=>FC,AccountLinks:()=>VZ,AccountSessions:()=>ZZ,Accounts:()=>FC,ApplePayDomains:()=>GZ,ApplicationFees:()=>WZ,Apps:()=>Wve,Balance:()=>XZ,BalanceSettings:()=>t8,BalanceTransactions:()=>o8,Billing:()=>Qve,BillingPortal:()=>Xve,Charges:()=>s8,Checkout:()=>Yve,Climate:()=>e_e,ConfirmationTokens:()=>c8,CountrySpecs:()=>d8,Coupons:()=>m8,CreditNotes:()=>h8,CustomerSessions:()=>y8,Customers:()=>_8,Disputes:()=>w8,Entitlements:()=>t_e,EphemeralKeys:()=>T8,Events:()=>I8,ExchangeRates:()=>C8,FileLinks:()=>$8,Files:()=>j8,FinancialConnections:()=>r_e,Forwarding:()=>n_e,Identity:()=>o_e,InvoiceItems:()=>z8,InvoicePayments:()=>q8,InvoiceRenderingTemplates:()=>B8,Invoices:()=>H8,Issuing:()=>i_e,Mandates:()=>J8,OAuth:()=>W8,PaymentAttemptRecords:()=>Y8,PaymentIntents:()=>tJ,PaymentLinks:()=>nJ,PaymentMethodConfigurations:()=>iJ,PaymentMethodDomains:()=>aJ,PaymentMethods:()=>uJ,PaymentRecords:()=>dJ,Payouts:()=>mJ,Plans:()=>hJ,Prices:()=>yJ,Products:()=>_J,PromotionCodes:()=>wJ,Quotes:()=>xJ,Radar:()=>s_e,Refunds:()=>EJ,Reporting:()=>a_e,Reviews:()=>IJ,SetupAttempts:()=>AJ,SetupIntents:()=>OJ,ShippingRates:()=>RJ,Sigma:()=>c_e,Sources:()=>DJ,SubscriptionItems:()=>MJ,SubscriptionSchedules:()=>UJ,Subscriptions:()=>qJ,Tax:()=>u_e,TaxCodes:()=>VJ,TaxIds:()=>ZJ,TaxRates:()=>GJ,Terminal:()=>l_e,TestHelpers:()=>d_e,Tokens:()=>QJ,Topups:()=>YJ,Transfers:()=>tG,Treasury:()=>p_e,V2:()=>m_e,WebhookEndpoints:()=>nG});var Wve,Qve,Xve,Yve,e_e,t_e,r_e,n_e,o_e,i_e,s_e,a_e,c_e,u_e,l_e,d_e,p_e,m_e,iG=b(()=>{M3();U3();F3();V3();Z3();G3();W3();X3();eV();rV();oV();sV();cV();lV();pV();fV();yV();_V();wV();xV();EV();IV();CV();$V();NV();jV();zV();LV();FV();VV();ZV();GV();WV();XV();eH();rH();oH();sH();cH();lH();pH();fH();gH();vH();bH();xH();kH();PH();CH();$H();DH();MH();LH();FH();VH();ZH();KH();QH();eZ();rZ();oZ();sZ();uZ();pZ();hZ();yZ();_Z();SZ();EZ();IZ();AZ();OZ();NZ();jZ();zZ();qZ();BZ();BC();HZ();JZ();BC();KZ();QZ();YZ();r8();i8();a8();u8();p8();f8();g8();v8();b8();S8();E8();P8();O8();R8();M8();U8();F8();V8();Z8();G8();Q8();eJ();rJ();oJ();sJ();cJ();lJ();pJ();fJ();gJ();vJ();bJ();SJ();TJ();kJ();PJ();CJ();$J();NJ();jJ();zJ();LJ();FJ();HJ();JJ();KJ();XJ();eG();rG();oG();Wve=rr("apps",{Secrets:tZ}),Qve=rr("billing",{Alerts:B3,CreditBalanceSummary:mV,CreditBalanceTransactions:gV,CreditGrants:vV,MeterEventAdjustments:HV,MeterEvents:YV,Meters:nH}),Xve=rr("billingPortal",{Configurations:iV,Sessions:nZ}),Yve=rr("checkout",{Sessions:iZ}),e_e=rr("climate",{Orders:aH,Products:EH,Suppliers:fZ}),t_e=rr("entitlements",{ActiveEntitlements:q3,Features:DV}),r_e=rr("financialConnections",{Accounts:z3,Sessions:cZ,Transactions:TZ}),n_e=rr("forwarding",{Requests:WH}),o_e=rr("identity",{VerificationReports:LZ,VerificationSessions:FZ}),i_e=rr("issuing",{Authorizations:J3,Cardholders:Y3,Cards:tV,Disputes:kV,PersonalizationDesigns:yH,PhysicalBundles:SH,Tokens:vZ,Transactions:kZ}),s_e=rr("radar",{EarlyFraudWarnings:AV,ValueListItems:DZ,ValueLists:MZ}),a_e=rr("reporting",{ReportRuns:HH,ReportTypes:GH}),c_e=rr("sigma",{ScheduledQueryRuns:YH}),u_e=rr("tax",{Associations:H3,Calculations:Q3,Registrations:BH,Settings:dZ,Transactions:PZ}),l_e=rr("terminal",{Configurations:aV,ConnectionTokens:dV,Locations:BV,OnboardingLinks:iH,Readers:IH}),d_e=rr("testHelpers",{ConfirmationTokens:uV,Customers:SV,Refunds:qH,TestClocks:gZ,Issuing:rr("issuing",{Authorizations:K3,Cards:nV,PersonalizationDesigns:_H,Transactions:CZ}),Terminal:rr("terminal",{Readers:AH}),Treasury:rr("treasury",{InboundTransfers:UV,OutboundPayments:uH,OutboundTransfers:mH,ReceivedCredits:OH,ReceivedDebits:jH})}),p_e=rr("treasury",{CreditReversals:bV,DebitReversals:TV,FinancialAccounts:MV,InboundTransfers:qV,OutboundPayments:dH,OutboundTransfers:hH,ReceivedCredits:NH,ReceivedDebits:UH,TransactionEntries:wZ,Transactions:RZ}),m_e=rr("v2",{Billing:rr("billing",{MeterEventAdjustments:JV,MeterEventSession:KV,MeterEventStream:QV,MeterEvents:tH}),Core:rr("core",{EventDestinations:OV,Events:RV})})});function fG(t,e=h_e){r.PACKAGE_VERSION="20.0.0",r.API_VERSION=AC,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},y3()),r.StripeResource=E,r.StripeContext=pp,r.resources=pu,r.HttpClient=Fr,r.HttpClientResponse=Is,r.CryptoProvider=ks,r.webhooks=N3(t);function r(n,o={}){if(!(this instanceof r))return new r(n,o);let i=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let a=i.httpAgent||null;this._api={host:i.host||sG,port:i.port||aG,protocol:i.protocol||"https",basePath:cG,version:i.apiVersion||uG,timeout:ey("timeout",i.timeout,lG),maxNetworkRetries:ey("maxNetworkRetries",i.maxNetworkRetries,2),agent:a,httpClient:i.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};let c=i.typescript||!1;c!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=c),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(n,i.authenticator),this.errors=ly,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=r.StripeResource}return s(r,"Stripe"),r.errors=ly,r.createNodeHttpClient=t.createNodeHttpClient,r.createFetchHttpClient=t.createFetchHttpClient,r.createNodeCryptoProvider=t.createNodeCryptoProvider,r.createSubtleCryptoProvider=t.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,o,i,a){return this._requestSender._rawRequest(n,o,i,a)},_setAuthenticator(n,o){if(n&&o)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!o)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?Wg(n):o},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=f_e.reduce((o,i)=>(typeof n[i]=="string"&&(o=o||{},o[i]=n[i]),o),{})},_setApiField(n,o){this._api[n]=o},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:s(n=>{switch(n){case"DEFAULT_HOST":return sG;case"DEFAULT_PORT":return aG;case"DEFAULT_BASE_PATH":return cG;case"DEFAULT_API_VERSION":return uG;case"DEFAULT_TIMEOUT":return lG;case"MAX_NETWORK_RETRY_DELAY_SEC":return dG;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return pG}return r[n]},"getConstant"),getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,o,i){let a=ey(n,o,i);this._setApiField(n,a)},getMaxNetworkRetryDelay(){return dG},getInitialNetworkRetryDelay(){return pG},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,o){this._platformFunctions.getUname().then(i=>{var a;let c={};for(let d in n)Object.prototype.hasOwnProperty.call(n,d)&&(c[d]=encodeURIComponent((a=n[d])!==null&&a!==void 0?a:"null"));c.uname=encodeURIComponent(i||"UNKNOWN");let l=this.getApiField("httpClient");l&&(c.httplib=encodeURIComponent(l.getClientName())),this._appInfo&&(c.application=this._appInfo),o(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let n in pu)Object.prototype.hasOwnProperty.call(pu,n)&&(this[h3(n)]=new pu[n](this))},_getPropsFromConfig(n){if(!n)return{};let o=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:n};if(Object.keys(n).filter(c=>!mG.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${mG.join(", ")}`);return n},parseEventNotification(n,o,i,a,c,l){let d=this.webhooks.constructEvent(n,o,i,a,c,l);return d.context&&(d.context=pp.parse(d.context)),d.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${d.id}`,void 0,{stripeContext:d.context},["fetch_event"]),d.fetchRelatedObject=()=>d.related_object?this._requestSender._rawRequest("GET",d.related_object.url,void 0,{stripeContext:d.context},["fetch_related_object"]):Promise.resolve(null),d}},r}var sG,aG,cG,uG,lG,dG,pG,f_e,mG,h_e,hG=b(()=>{dp();I3();Y();R3();D3();j3();Hd();Zd();iG();Go();sG="api.stripe.com",aG="443",cG="/v1/",uG=AC,lG=8e4,dG=5,pG=.5,f_e=["name","version","url","partner_id"],mG=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],h_e=s(t=>new py(t,E.MAX_BUFFERED_REQUEST_METRICS),"defaultRequestSenderFactory");s(fG,"createStripe")});var g_e,gG,yG=b(()=>{k3();hG();g_e=fG(new dy),gG=g_e});function y_e(){let t=process.env.STRIPE_SECRET_KEY;if(!t)throw new Error("STRIPE_SECRET_KEY environment variable is not set. Configure Stripe credentials.");return t}function qn(){return JC||(JC=new gG(y_e(),v_e)),JC}var v_e,JC,My=b(()=>{"use strict";yG();s(y_e,"getStripeSecretKey");v_e={apiVersion:"2025-11-17.clover",typescript:!0,appInfo:{name:"AegisWallet",version:"1.0.0",url:"https://aegiswallet.com.br"}},JC=null;s(qn,"getStripeClient")});var zy,vG=b(()=>{"use strict";$t();My();zy=class t{static{s(this,"StripeCustomerService")}static async createCustomer(e,r,n){let o=qn();try{let i=await o.customers.create({email:r,name:n,metadata:{clerkUserId:e}});return q.info("Stripe customer created",{clerkUserId:e,stripeCustomerId:i.id}),i.id}catch(i){throw q.error("Failed to create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao criar cliente no Stripe")}}static async getOrCreateCustomer(e,r,n){let o=qn();try{let i=await o.customers.search({query:`metadata['clerkUserId']:'${e}'`,limit:1});if(i.data.length>0)return i.data[0].id;let a=await o.customers.list({email:r,limit:1});return a.data.length>0?(await o.customers.update(a.data[0].id,{metadata:{clerkUserId:e}}),a.data[0].id):await t.createCustomer(e,r,n)}catch(i){throw q.error("Failed to get/create Stripe customer",{clerkUserId:e,error:i instanceof Error?i.message:"Unknown error"}),new Error("Falha ao processar cliente no Stripe")}}static async updateCustomer(e,r){let n=qn();try{await n.customers.update(e,r)}catch(o){throw q.error("Failed to update Stripe customer",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async deleteCustomer(e){let r=qn();try{let n=await r.subscriptions.list({customer:e,status:"active"});for(let o of n.data)await r.subscriptions.cancel(o.id);await r.customers.del(e),q.info("Stripe customer deleted",{stripeCustomerId:e})}catch(n){throw q.error("Failed to delete Stripe customer",{stripeCustomerId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}}});var __e,Qo,ga,_G,b_e,mu,$p,bG,wG,Uy=b(()=>{"use strict";St();__e=u.object({STRIPE_SECRET_KEY:u.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_PUBLISHABLE_KEY:u.string().min(1,"STRIPE_PUBLISHABLE_KEY is required"),STRIPE_WEBHOOK_SECRET:u.string().min(1,"STRIPE_WEBHOOK_SECRET is required"),STRIPE_SUCCESS_URL:u.string().url("STRIPE_SUCCESS_URL must be a valid URL"),STRIPE_CANCEL_URL:u.string().url("STRIPE_CANCEL_URL must be a valid URL"),STRIPE_PORTAL_RETURN_URL:u.string().url("STRIPE_PORTAL_RETURN_URL must be a valid URL"),STRIPE_PRICE_BASIC_MONTHLY:u.string().min(1,"STRIPE_PRICE_BASIC_MONTHLY is required"),STRIPE_PRICE_ADVANCED_MONTHLY:u.string().min(1,"STRIPE_PRICE_ADVANCED_MONTHLY is required")});try{Qo=__e.parse(process.env)}catch{Qo=process.env}ga={secretKey:Qo?.STRIPE_SECRET_KEY,publishableKey:Qo?.STRIPE_PUBLISHABLE_KEY,webhookSecret:Qo?.STRIPE_WEBHOOK_SECRET,successUrl:Qo?.STRIPE_SUCCESS_URL,cancelUrl:Qo?.STRIPE_CANCEL_URL,portalReturnUrl:Qo?.STRIPE_PORTAL_RETURN_URL},_G={BASIC_MONTHLY:Qo?.STRIPE_PRICE_BASIC_MONTHLY,ADVANCED_MONTHLY:Qo?.STRIPE_PRICE_ADVANCED_MONTHLY},b_e=[{id:"free",name:"Gratuito",priceCents:0,features:["Dashboard b\xE1sico","1 conta banc\xE1ria","Transa\xE7\xF5es limitadas"],aiModels:[]},{id:"basic",name:"B\xE1sico",priceCents:5900,features:["Chat IA (Gemini Flash)","3 contas banc\xE1rias","Automa\xE7\xF5es b\xE1sicas"],aiModels:["gemini-flash"]},{id:"advanced",name:"Avan\xE7ado",priceCents:11900,features:["Todas as IAs","Contas ilimitadas","API access","Suporte priorit\xE1rio"],aiModels:["gpt-4o","claude-sonnet","gemini-pro","gemini-flash"]}],mu=s(t=>b_e.find(e=>e.id===t),"getPlanById"),$p=s(t=>t===_G.BASIC_MONTHLY?mu("basic"):t===_G.ADVANCED_MONTHLY?mu("advanced"):null,"getPlanByStripePrice"),bG=s(t=>{let e=mu(t);return e?e.aiModels.length>0:!1},"canAccessAI"),wG=s(t=>{let e=mu(t);return e?e.aiModels:[]},"getAllowedModels")});var Di,Ly=b(()=>{"use strict";zr();vG();gi();Lr();$t();My();Uy();Di=class{static{s(this,"StripeSubscriptionService")}static async createCheckoutSession(e,r,n,o,i){let a=qn(),c=Pr();try{let[l]=await c.select().from(W).where(J(W.id,e)).limit(1);if(!l?.email)throw new Error("Usu\xE1rio n\xE3o encontrado ou sem email");let d=await zy.getOrCreateCustomer(e,l.email,l.fullName||void 0),p=i||ga.successUrl?.replace(/\/billing\/success$/,"")||"https://app.aegiswallet.com.br",m=n||`${p}/billing/success`,h=o||`${p}/billing/cancel`,y=await a.checkout.sessions.create({customer:d,mode:"subscription",payment_method_types:["card"],line_items:[{price:r,quantity:1}],success_url:m,cancel_url:h,metadata:{clerkUserId:e},allow_promotion_codes:!0});if(!y.url)throw new Error("Stripe n\xE3o retornou URL de checkout v\xE1lida");return{sessionId:y.id,checkoutUrl:y.url}}catch(l){throw q.error("Failed to create checkout session",{userId:e,priceId:r,requestOrigin:i,error:l instanceof Error?l.message:"Unknown error"}),l}}static async createPortalSession(e,r){let n=qn();try{return{portalUrl:(await n.billingPortal.sessions.create({customer:e,return_url:r||ga.portalReturnUrl||"https://app.aegiswallet.com.br/settings/billing"})).url}}catch(o){throw q.error("Failed to create portal session",{stripeCustomerId:e,error:o instanceof Error?o.message:"Unknown error"}),o}}static async getSubscription(e){let r=Pr();try{let n=await r.select({subscription:at,plan:Xr}).from(at).leftJoin(Xr,J(at.planId,Xr.id)).where(J(at.userId,e)).limit(1);if(n.length===0)return q.info("No subscription found for user",{userId:e}),null;let{subscription:o,plan:i}=n[0];return o?(q.info("Retrieved subscription for user",{userId:e,subscriptionId:o.id,status:o.status,planId:o.planId}),{subscription:o,plan:i||null}):(q.warn("Subscription record is null despite query success",{userId:e}),null)}catch(n){throw q.error("Failed to get subscription",{userId:e,error:n instanceof Error?n.message:"Unknown error"}),n}}static async syncSubscriptionFromStripe(e){let r=qn(),n=Pr();try{let i=await r.subscriptions.retrieve(e),a=typeof i.customer=="string"?i.customer:i.customer.id,[c]=await n.select().from(at).where(J(at.stripeCustomerId,a)).limit(1);if(!c)return q.warn("Subscription sync skipped: User not found for customer",{customerId:a,stripeSubscriptionId:e}),null;let l=i.items.data[0]?.price?.id;if(!l)throw q.error("No price ID found in subscription",{stripeSubscriptionId:e,items:i.items.data.length}),new Error("Pre\xE7o n\xE3o encontrado na assinatura do Stripe");let d=$p(l),p=d?d.id:"free",m=i.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m,y=i.items.data[0];if(!y)throw q.error("No subscription items found",{stripeSubscriptionId:e}),new Error("Item da assinatura n\xE3o encontrado");let g=y.current_period_start,f=y.current_period_end;if(!(g&&f))throw q.error("Missing billing period dates",{stripeSubscriptionId:e,periodStart:g,periodEnd:f}),new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let _={stripeSubscriptionId:i.id,planId:p,status:h,currentPeriodStart:new Date(g*1e3),currentPeriodEnd:new Date(f*1e3)},[S]=await n.update(at).set({..._,cancelAtPeriodEnd:i.cancel_at_period_end,canceledAt:i.canceled_at?new Date(i.canceled_at*1e3):null,trialStart:i.trial_start?new Date(i.trial_start*1e3):null,trialEnd:i.trial_end?new Date(i.trial_end*1e3):null,updatedAt:new Date}).where(J(at.id,c.id)).returning();return q.info("Subscription synced from Stripe",{userId:c.userId,subscriptionId:i.id,status:h,planId:p,previousStatus:c.status,previousPlanId:c.planId}),S}catch(o){throw q.error("Failed to sync subscription",{stripeSubscriptionId:e,error:o instanceof Error?o.message:"Unknown error",stack:o instanceof Error?o.stack:void 0}),o}}static async cancelSubscription(e,r=!1){let n=qn(),o=Pr();try{let[i]=await o.select().from(at).where(J(at.userId,e)).limit(1);if(!i?.stripeSubscriptionId)throw new Error("Assinatura n\xE3o encontrada");return r?await n.subscriptions.cancel(i.stripeSubscriptionId):await n.subscriptions.update(i.stripeSubscriptionId,{cancel_at_period_end:!0}),!0}catch(i){throw q.error("Failed to cancel subscription",{userId:e,error:i instanceof Error?i.message:"Unknown error"}),i}}}});var SG,w_e,xG,TG=b(()=>{"use strict";Jr();Pt();St();$t();Ar();Ly();SG=new Ae,w_e=u.object({priceId:u.string().min(1),successUrl:u.string().url().optional(),cancelUrl:u.string().url().optional()});SG.post("/",me,xe({windowMs:6e4,max:30}),Je("json",w_e),async t=>{let{user:e}=t.get("auth"),{priceId:r,successUrl:n,cancelUrl:o}=t.req.valid("json"),i=t.get("requestId");if(!e?.id)return q.warn("Checkout request missing user authentication",{requestId:i}),t.json({error:"Usu\xE1rio n\xE3o autenticado"},401);if(!e?.email)return q.warn("Checkout request missing user email",{requestId:i,userId:e.id}),t.json({error:"Email do usu\xE1rio n\xE3o encontrado"},400);try{let a=t.req.header("origin")||t.req.header("referer")?.replace(/\/$/,""),c=await Di.createCheckoutSession(e.id,r,n,o,a);return q.info("Checkout session created successfully",{userId:e.id,priceId:r,requestOrigin:a,sessionId:c.sessionId}),t.json({data:c,meta:{requestId:i}})}catch(a){let c=a instanceof Error?a.message:"Unknown error";return q.error("Checkout creation failed",{userId:e.id,priceId:r,error:c,requestId:i}),c.includes("Usu\xE1rio n\xE3o encontrado")?t.json({error:"Usu\xE1rio n\xE3o encontrado"},404):c.includes("plano")||c.includes("price")?t.json({error:"Plano inv\xE1lido ou n\xE3o encontrado"},400):c.includes("Stripe")?t.json({error:"Servi\xE7o de pagamento temporariamente indispon\xEDvel"},503):t.json({error:"Falha ao criar checkout"},500)}});xG=SG});var GC,S_e,EG,kG=b(()=>{"use strict";Jr();Pt();St();$t();Ar();GC=new Ae,S_e=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0),status:u.enum(["draft","open","paid","void","uncollectible"]).optional()});GC.get("/",me,xe({windowMs:6e4,max:30}),Je("query",S_e),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n,status:o}=t.req.valid("query"),i=t.get("requestId");try{let a=[],[c]=[{count:0}];return t.json({data:{invoices:a,total:Number(c?.count||0),hasMore:!1},meta:{requestId:i}})}catch(a){return q.error("Failed to fetch invoices",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:i}),t.json({error:"Falha ao buscar faturas"},500)}});GC.get("/:id/pdf",me,xe({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{q.info("Invoice PDF download requested",{userId:e.id,invoiceId:r,requestId:n});let o=new Blob(["Mock PDF content"],{type:"application/pdf"});return new Response(o,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="fatura-${r}.pdf"`}})}catch(o){return q.error("Failed to download invoice PDF",{userId:e.id,invoiceId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao baixar fatura"},500)}});EG=GC});var IG,x_e,PG,AG=b(()=>{"use strict";Jr();zr();Pt();St();gi();Lr();$t();Ar();IG=new Ae,x_e=u.object({limit:u.coerce.number().min(1).max(100).default(10),offset:u.coerce.number().min(0).default(0)});IG.get("/",me,xe({windowMs:6e4,max:30}),Je("query",x_e),async t=>{let{user:e}=t.get("auth"),{limit:r,offset:n}=t.req.valid("query"),o=t.get("requestId"),i=Pr();try{let a=await i.select().from(gr).where(J(gr.userId,e.id)).orderBy(Kt(gr.createdAt)).limit(r).offset(n),[c]=await i.select({count:z`count(*)`}).from(gr).where(J(gr.userId,e.id));return t.json({data:{payments:a,total:Number(c.count)},meta:{requestId:o}})}catch(a){return q.error("Failed to fetch payment history",{userId:e.id,error:a instanceof Error?a.message:"Unknown error",requestId:o}),t.json({error:"Falha ao buscar hist\xF3rico de pagamentos"},500)}});PG=IG});var Rp,T_e,E_e,CG,OG=b(()=>{"use strict";Jr();Pt();St();$t();Ar();Rp=new Ae,T_e=u.object({type:u.enum(["card","pix","bank_account"]),isDefault:u.boolean().optional(),cardNumber:u.string().optional(),expiryMonth:u.number().min(1).max(12).optional(),expiryYear:u.number().min(new Date().getFullYear()).optional(),cvc:u.string().optional(),pixKey:u.string().optional(),pixKeyType:u.enum(["cpf","cnpj","phone","email","random"]).optional(),bankCode:u.string().optional(),accountNumber:u.string().optional(),accountType:u.enum(["checking","savings"]).optional(),accountHolderName:u.string().optional(),documentNumber:u.string().optional()}),E_e=u.object({isDefault:u.boolean()});Rp.get("/",me,xe({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=[];return t.json({data:{paymentMethods:n,hasMore:!1,total:0},meta:{requestId:r}})}catch(n){return q.error("Failed to fetch payment methods",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar m\xE9todos de pagamento"},500)}});Rp.post("/",me,xe({windowMs:6e4,max:10}),Je("json",T_e),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId");try{return q.info("Payment method addition requested",{userId:e.id,type:r.type,requestId:n}),t.json({data:{paymentMethod:{id:"pm_mock_id",type:r.type,isDefault:r.isDefault,createdAt:new Date().toISOString()}},meta:{requestId:n}})}catch(o){return q.error("Failed to add payment method",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao adicionar m\xE9todo de pagamento"},500)}});Rp.put("/:id",me,xe({windowMs:6e4,max:20}),Je("json",E_e),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.req.valid("json"),o=t.get("requestId");try{return q.info("Payment method update requested",{userId:e.id,paymentMethodId:r,data:n,requestId:o}),t.json({data:{paymentMethod:{id:r,isDefault:n.isDefault}},meta:{requestId:o}})}catch(i){return q.error("Failed to update payment method",{userId:e.id,paymentMethodId:r,error:i instanceof Error?i.message:"Unknown error",requestId:o}),t.json({error:"Falha ao atualizar m\xE9todo de pagamento"},500)}});Rp.delete("/:id",me,xe({windowMs:6e4,max:10}),async t=>{let{user:e}=t.get("auth"),r=t.req.param("id"),n=t.get("requestId");try{return q.info("Payment method deletion requested",{userId:e.id,paymentMethodId:r,requestId:n}),t.json({data:{success:!0},meta:{requestId:n}})}catch(o){return q.error("Failed to remove payment method",{userId:e.id,paymentMethodId:r,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao remover m\xE9todo de pagamento"},500)}});CG=Rp});var $G,RG,NG=b(()=>{"use strict";zr();Pt();gi();Lr();$t();$G=new Ae;$G.get("/",async t=>{let e=t.get("requestId"),r=Pr();try{let o=(await r.select().from(Xr).where(J(Xr.isActive,!0)).orderBy(Vi(Xr.displayOrder))).map(i=>({...i,priceFormatted:new Intl.NumberFormat("pt-BR",{style:"currency",currency:i.currency}).format(i.priceCents/100)}));return t.json({data:{plans:o},meta:{requestId:e}})}catch(n){return q.error("Failed to fetch plans",{error:n instanceof Error?n.message:"Unknown error",requestId:e}),t.json({error:"Falha ao buscar planos"},500)}});RG=$G});var DG,k_e,jG,MG=b(()=>{"use strict";Jr();Pt();St();$t();Ar();Ly();DG=new Ae,k_e=u.object({returnUrl:u.string().url().optional()});DG.post("/",me,xe({windowMs:6e4,max:10}),Je("json",k_e),async t=>{let{user:e}=t.get("auth"),{returnUrl:r}=t.req.valid("json"),n=t.get("requestId");try{let o=await Di.getSubscription(e.id);if(!o?.subscription?.stripeCustomerId)return t.json({error:"Assinatura n\xE3o encontrada"},400);let i=await Di.createPortalSession(o.subscription.stripeCustomerId,r);return q.info("Portal session created",{userId:e.id}),t.json({data:i,meta:{requestId:n}})}catch(o){return q.error("Portal creation failed",{userId:e.id,error:o instanceof Error?o.message:"Unknown error",requestId:n}),t.json({error:"Falha ao criar portal"},500)}});jG=DG});var zG,UG,LG=b(()=>{"use strict";Pt();$t();Uy();Ar();Ly();zG=new Ae;zG.get("/",me,xe({windowMs:6e4,max:30}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=await Di.getSubscription(e.id),o=n?.plan||mu("free"),i=o?.id||"free",a=bG(i),c=wG(i);return t.json({data:{subscription:n?.subscription||null,plan:o,canAccessAI:a,allowedModels:c},meta:{requestId:r}})}catch(n){return q.error("Failed to get subscription",{userId:e.id,error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({error:"Falha ao buscar assinatura"},500)}});UG=zG});var Xo,qG=b(()=>{"use strict";zr();gi();Lr();$t();My();Uy();Xo=class{static{s(this,"StripeWebhookService")}static constructEvent(e,r){let n=qn();if(!ga.webhookSecret)throw q.error("Webhook secret not configured",{hasConfig:!!ga.webhookSecret}),new Error("STRIPE_WEBHOOK_SECRET n\xE3o est\xE1 configurado. Verifique as vari\xE1veis de ambiente.");try{let o=n.webhooks.constructEvent(e,r,ga.webhookSecret);return q.info("Webhook event constructed successfully",{type:o.type,id:o.id}),o}catch(o){let i=o instanceof Error?o.message:"Unknown error";throw q.error("Failed to construct webhook event",{error:i,signatureLength:r?.length}),new Error(`Falha ao validar webhook: ${i}`)}}static async handleCheckoutSessionCompleted(e){let r=Pr(),n=e.metadata?.clerkUserId,o=typeof e.customer=="string"?e.customer:e.customer?.id,i=typeof e.subscription=="string"?e.subscription:e.subscription?.id;if(!(n&&o&&i))throw q.warn("Checkout session missing required metadata",{sessionId:e.id,hasClerkUserId:!!n,hasCustomerId:!!o,hasSubscriptionId:!!i}),new Error("Checkout session incompleto - metadados obrigat\xF3rios n\xE3o encontrados");try{let[a]=await r.select().from(at).where(J(at.stripeSubscriptionId,i)).limit(1);if(a){q.info("Checkout session already processed",{sessionId:e.id,subscriptionId:i,existingStatus:a.status});return}let l=await qn().subscriptions.retrieve(i),d=l.items.data[0]?.price?.id;if(!d)throw new Error("Price ID n\xE3o encontrado na assinatura do Stripe");let p=$p(d),m=p?p.id:"free",h=l.items.data[0];if(!h)throw new Error("Item da assinatura n\xE3o encontrado");let y=h.current_period_start,g=h.current_period_end;if(!(y&&g))throw new Error("Datas do per\xEDodo de cobran\xE7a n\xE3o encontradas");let f=l.status,_=f==="incomplete"||f==="incomplete_expired"||f==="paused"?"canceled":f;await r.update(at).set({stripeCustomerId:o,stripeSubscriptionId:i,planId:m,status:_,currentPeriodStart:new Date(y*1e3),currentPeriodEnd:new Date(g*1e3),updatedAt:new Date}).where(J(at.userId,n)),q.info("Checkout session completed successfully",{clerkUserId:n,sessionId:e.id,subscriptionId:i,status:_,planId:m})}catch(a){let c=a instanceof Error?a.message:"Unknown error";throw q.error("Failed to process checkout session completion",{sessionId:e.id,clerkUserId:n,error:c}),a}}static async handleSubscriptionCreated(e){}static async handleSubscriptionUpdated(e){let r=Pr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(at).where(J(at.stripeCustomerId,n)).limit(1);if(!o){q.warn("Subscription update webhook subscription not found",{customerId:n,subscriptionId:e.id});return}let i=e.items.data[0]?.price?.id;if(!i){q.error("No price ID found in subscription update",{subscriptionId:e.id});return}let a=$p(i),c=a?a.id:"free",l=e.items.data[0];if(!l){q.error("No subscription items found in update",{subscriptionId:e.id});return}let d=l.current_period_start,p=l.current_period_end,m=e.status,h=m==="incomplete"||m==="incomplete_expired"||m==="paused"?"canceled":m;await r.update(at).set({stripeSubscriptionId:e.id,planId:c,status:h,currentPeriodStart:new Date(d*1e3),currentPeriodEnd:new Date(p*1e3),cancelAtPeriodEnd:e.cancel_at_period_end,canceledAt:e.canceled_at?new Date(e.canceled_at*1e3):null,updatedAt:new Date}).where(J(at.id,o.id)),q.info("Subscription updated webhook processed successfully",{subscriptionId:e.id,previousStatus:o.status,newStatus:h,previousPlanId:o.planId,newPlanId:c})}static async handleSubscriptionDeleted(e){let r=Pr(),n=typeof e.customer=="string"?e.customer:e.customer.id,[o]=await r.select().from(at).where(J(at.stripeCustomerId,n)).limit(1);if(!o){q.warn("Subscription delete webhook subscription not found",{customerId:n,subscriptionId:e.id});return}await r.update(at).set({status:"canceled",canceledAt:new Date,updatedAt:new Date}).where(J(at.stripeCustomerId,n)),q.info("Subscription deleted webhook processed successfully",{subscriptionId:e.id,userId:o.userId,previousStatus:o.status})}static async handleInvoicePaid(e){let r=Pr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){q.warn("Invoice paid webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(at).where(J(at.stripeCustomerId,o)).limit(1);if(!i){q.warn("Invoice paid webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(gr).where(J(gr.stripeInvoiceId,n.id)).limit(1);if(a){q.info("Invoice payment already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(gr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_paid,currency:n.currency,status:"succeeded",description:n.description||"Assinatura AegisWallet",receiptUrl:n.hosted_invoice_url,invoicePdf:n.invoice_pdf}),q.info("Invoice paid webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_paid,currency:n.currency})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw q.error("Failed to process invoice payment",{invoiceId:n.id,userId:i.userId,error:l}),c}}static async handleInvoicePaymentFailed(e){let r=Pr(),n=e,o=typeof n.customer=="string"?n.customer:n.customer?.id;if(!o){q.warn("Invoice payment failed webhook missing customer ID",{invoiceId:n.id});return}let[i]=await r.select().from(at).where(J(at.stripeCustomerId,o)).limit(1);if(!i){q.warn("Invoice payment failed webhook subscription not found",{invoiceId:n.id,customerId:o});return}let[a]=await r.select().from(gr).where(J(gr.stripeInvoiceId,n.id)).limit(1);if(a){q.info("Invoice payment failure already processed",{invoiceId:n.id,existingStatus:a.status});return}try{await r.insert(gr).values({userId:i.userId,subscriptionId:i.id,stripePaymentIntentId:typeof n.payment_intent=="string"?n.payment_intent:n.payment_intent?.id,stripeInvoiceId:n.id,stripeChargeId:typeof n.charge=="string"?n.charge:n.charge?.id,amountCents:n.amount_due,currency:n.currency,status:"failed",description:n.description||"Falha no pagamento",failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message}),q.warn("Invoice payment failed webhook processed successfully",{invoiceId:n.id,userId:i.userId,amount:n.amount_due,currency:n.currency,failureCode:n.last_finalization_error?.code,failureMessage:e.last_finalization_error?.message})}catch(c){let l=c instanceof Error?c.message:"Unknown error";throw q.error("Failed to process invoice payment failure",{invoiceId:n.id,userId:i.userId,error:l}),c}}}});var FG,BG,VG=b(()=>{"use strict";Pt();$t();qG();FG=new Ae;FG.post("/",async t=>{let e=t.req.header("stripe-signature"),r=await t.req.text();if(!e)return t.json({error:"Missing stripe-signature header"},400);try{let n=Xo.constructEvent(r,e);switch(q.info("Stripe webhook received",{type:n.type,id:n.id}),n.type){case"checkout.session.completed":await Xo.handleCheckoutSessionCompleted(n.data.object);break;case"customer.subscription.created":await Xo.handleSubscriptionCreated(n.data.object);break;case"customer.subscription.updated":await Xo.handleSubscriptionUpdated(n.data.object);break;case"customer.subscription.deleted":await Xo.handleSubscriptionDeleted(n.data.object);break;case"invoice.paid":await Xo.handleInvoicePaid(n.data.object);break;case"invoice.payment_failed":await Xo.handleInvoicePaymentFailed(n.data.object);break;default:q.info("Unhandled webhook event type",{type:n.type})}return t.json({received:!0})}catch(n){return q.error("Webhook processing failed",{error:n instanceof Error?n.message:"Unknown error"}),t.json({error:"Webhook handler failed"},400)}});BG=FG});var ji,KC,HG=b(()=>{"use strict";Pt();TG();kG();AG();OG();NG();MG();LG();VG();ji=new Ae;ji.route("/checkout",xG);ji.route("/subscription",UG);ji.route("/portal",jG);ji.route("/plans",RG);ji.route("/webhook",BG);ji.route("/payment-history",PG);ji.route("/payment-methods",CG);ji.route("/invoices",EG);KC=ji});var WC,I_e,P_e,QC,ZG=b(()=>{"use strict";Jr();zr();Pt();St();Lr();$t();Ar();WC=new Ae,I_e=u.object({categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()}),P_e=u.object({accountId:u.string().optional(),categoryId:u.string().optional(),endDate:u.string().datetime().optional(),limit:u.coerce.number().min(1).max(100).default(20),offset:u.coerce.number().min(0).default(0),query:u.string().min(1,"Query \xE9 obrigat\xF3ria"),startDate:u.string().datetime().optional()});WC.get("/events/search",me,xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Je("query",I_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[J(vt.userId,e.id),Hr(vt.title,`%${n.query}%`)];n.categoryId&&i.push(J(vt.categoryId,n.categoryId)),n.startDate&&i.push(Tr(vt.startDate,new Date(n.startDate))),n.endDate&&i.push(hr(vt.endDate,new Date(n.endDate)));let a=await r.select().from(vt).where(Ie(...i)).orderBy(Kt(vt.createdAt)).limit(n.limit).offset(n.offset);return q.info("Calendar events searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to search calendar events",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar eventos"},500)}});WC.get("/transactions/search",me,xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3}),Je("query",P_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[J(oe.userId,e.id),Hr(oe.description,`%${n.query}%`)];n.accountId&&i.push(J(oe.accountId,n.accountId)),n.categoryId&&i.push(J(oe.categoryId,n.categoryId)),n.startDate&&i.push(Tr(oe.transactionDate,new Date(n.startDate))),n.endDate&&i.push(hr(oe.transactionDate,new Date(n.endDate)));let a=await r.select().from(oe).where(Ie(...i)).orderBy(Kt(oe.createdAt)).limit(n.limit).offset(n.offset);return q.info("Calendar transactions searched",{limit:n.limit,query:n.query,requestId:o,resultsCount:a.length,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to search calendar transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CALENDAR_SEARCH_ERROR",error:"Falha ao buscar transa\xE7\xF5es"},500)}});QC=WC});function An(t){return new XC(t)}var XC,YC=b(()=>{"use strict";zr();Lr();$t();XC=class{constructor(e){this.db=e}static{s(this,"ComplianceService")}async getUserConsents(e){try{return await this.db.select().from(Ft).where(J(Ft.userId,e)).orderBy(Kt(Ft.createdAt))}catch(r){throw q.error("Failed to get user consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos: ${r instanceof Error?r.message:"Unknown error"}`)}}async getConsentTemplates(){try{return await this.db.select().from(wn).where(J(wn.isActive,!0)).orderBy(wn.consentType)}catch(e){throw q.error("Failed to get consent templates",{error:e instanceof Error?e.message:"Unknown error"}),new Error(`Erro ao buscar templates de consentimento: ${e instanceof Error?e.message:"Unknown error"}`)}}async grantConsent(e,r,n,o,i){try{let[a]=await this.db.select().from(wn).where(Ie(J(wn.consentType,r),J(wn.isActive,!0))).limit(1);if(!a)throw new Error(`Template de consentimento n\xE3o encontrado: ${r}`);let c=await this.generateHash(a.fullTextPt),[l]=await this.db.select().from(Ft).where(Ie(J(Ft.userId,e),J(Ft.consentType,r))).limit(1);if(l){let[p]=await this.db.update(Ft).set({granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).where(J(Ft.id,l.id)).returning();return p}let[d]=await this.db.insert(Ft).values({userId:e,consentType:r,purpose:a.descriptionPt,legalBasis:"consent",granted:!0,grantedAt:new Date,revokedAt:null,consentVersion:a.version,consentTextHash:c,collectionMethod:n,ipAddress:o??null,userAgent:i??null}).returning();return d}catch(a){throw q.error("Failed to grant consent",{error:a instanceof Error?a.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao conceder consentimento: ${a instanceof Error?a.message:"Unknown error"}`)}}async revokeConsent(e,r){try{await this.db.update(Ft).set({granted:!1,revokedAt:new Date}).where(Ie(J(Ft.userId,e),J(Ft.consentType,r)))}catch(n){throw q.error("Failed to revoke consent",{error:n instanceof Error?n.message:"Unknown error",userId:e,consentType:r}),new Error(`Erro ao revogar consentimento: ${n instanceof Error?n.message:"Unknown error"}`)}}async checkRequiredConsents(e,r){try{return(await this.db.select().from(Ft).where(Ie(J(Ft.userId,e),Ca(Ft.consentType,r),J(Ft.granted,!0)))).length===r.length}catch(n){return q.error("Failed to check required consents",{error:n instanceof Error?n.message:"Unknown error",userId:e}),!1}}async getMissingMandatoryConsents(e){try{let n=(await this.db.select().from(wn).where(Ie(J(wn.isMandatory,!0),J(wn.isActive,!0)))).map(a=>a.consentType),i=(await this.db.select().from(Ft).where(Ie(J(Ft.userId,e),J(Ft.granted,!0)))).map(a=>a.consentType);return n.filter(a=>!i.includes(a))}catch(r){throw q.error("Failed to get missing mandatory consents",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar consentimentos obrigat\xF3rios faltantes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createExportRequest(e,r,n,o,i,a){try{let[c]=await this.db.insert(so).values({userId:e,requestType:r,format:n,status:"pending",dateFrom:o??null,dateTo:i??null,requestedVia:"app",ipAddress:a??null}).returning();return await this.logAuditEvent(e,"data_export_requested","data_export_requests",c.id,{requestType:r,format:n}),c}catch(c){throw q.error("Failed to create export request",{error:c instanceof Error?c.message:"Unknown error",userId:e}),new Error(`Erro ao criar solicita\xE7\xE3o de exporta\xE7\xE3o: ${c instanceof Error?c.message:"Unknown error"}`)}}async getExportRequests(e){try{return await this.db.select().from(so).where(J(so.userId,e)).orderBy(Kt(so.createdAt))}catch(r){throw q.error("Failed to get export requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exporta\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async createDeletionRequest(e,r,n,o,i){try{let[a]=await this.db.select({legalHold:Yr.legalHold}).from(Yr).where(Ie(J(Yr.userId,e),J(Yr.legalHold,!0))).limit(1);if(a?.legalHold)throw new Error("Seus dados est\xE3o em reten\xE7\xE3o legal e n\xE3o podem ser exclu\xEDdos no momento");let c=new Date;c.setDate(c.getDate()+15);let[l]=await this.db.insert(Yr).values({userId:e,requestType:r,scope:n??{},reason:o??null,status:"pending",reviewDeadline:c,ipAddress:i??null}).returning();return await this.logAuditEvent(e,"data_deletion_requested","data_deletion_requests",l.id,{requestType:r}),l}catch(a){throw q.error("Failed to create deletion request",{error:a instanceof Error?a.message:"Unknown error",userId:e}),a}}async getDeletionRequests(e){try{return await this.db.select().from(Yr).where(J(Yr.userId,e)).orderBy(Kt(Yr.createdAt))}catch(r){throw q.error("Failed to get deletion requests",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar solicita\xE7\xF5es de exclus\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionLimits(e){try{return await this.db.select().from(Ur).where(J(Ur.userId,e))}catch(r){throw q.error("Failed to get transaction limits",{error:r instanceof Error?r.message:"Unknown error",userId:e}),new Error(`Erro ao buscar limites de transa\xE7\xE3o: ${r instanceof Error?r.message:"Unknown error"}`)}}async checkTransactionLimit(e,r,n){try{let[o]=await this.db.select().from(Ur).where(Ie(J(Ur.userId,e),J(Ur.limitType,r),J(Ur.isActive,!0))).limit(1);if(!o)return{allowed:!0};let i=Number(o.dailyLimit),a=Number(o.currentDailyUsed??0),c=o.transactionLimit?Number(o.transactionLimit):null,l=i-a;return c&&n>c?{allowed:!1,reason:`Valor excede limite por transa\xE7\xE3o de R$ ${c.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:n>l?{allowed:!1,reason:`Valor excede saldo di\xE1rio dispon\xEDvel de R$ ${l.toFixed(2)}`,limit:i,used:a,requested:n,remaining:l}:{allowed:!0,limit:i,used:a,requested:n,remaining:l}}catch(o){throw q.error("Failed to check transaction limit",{error:o instanceof Error?o.message:"Unknown error",limitType:r,userId:e}),new Error(`Erro ao verificar limite de transa\xE7\xE3o: ${o instanceof Error?o.message:"Unknown error"}`)}}async updateLimitUsage(e,r,n){try{await this.db.update(Ur).set({currentDailyUsed:z`${Ur.currentDailyUsed} + ${n}`}).where(Ie(J(Ur.userId,e),J(Ur.limitType,r)))}catch(o){throw q.error("Failed to update limit usage",{error:o instanceof Error?o.message:"Unknown error",userId:e,limitType:r,amount:n}),new Error(`Erro ao atualizar uso de limite: ${o instanceof Error?o.message:"Unknown error"}`)}}async logAuditEvent(e,r,n,o,i){try{let a=new Date;a.setFullYear(a.getFullYear()+5),await this.db.insert(Sn).values({userId:e,eventType:r,resourceType:n,resourceId:o??null,description:i?.action??null,metadata:i??{},previousState:null,newState:null,ipAddress:null,userAgent:null,sessionId:null,retentionUntil:a})}catch(a){q.error("Failed to log audit event",{error:a instanceof Error?a.message:"Unknown error",eventType:r,userId:e})}}async getAuditHistory(e,r){try{let n=[J(Sn.userId,e)];return r?.eventType&&n.push(J(Sn.eventType,r.eventType)),r?.startDate&&n.push(Tr(Sn.createdAt,r.startDate)),r?.endDate&&n.push(hr(Sn.createdAt,r.endDate)),await this.db.select().from(Sn).where(n.length>1?Ie(...n):n[0]).orderBy(Kt(Sn.createdAt)).limit(r?.limit??100)}catch(n){throw q.error("Failed to get audit history",{error:n instanceof Error?n.message:"Unknown error",userId:e}),new Error(`Erro ao buscar hist\xF3rico de auditoria: ${n instanceof Error?n.message:"Unknown error"}`)}}async generateHash(e){let n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}};s(An,"createComplianceService")});var JG=b(()=>{"use strict";YC();YC()});var Fn,A_e,C_e,O_e,$_e,e1,GG=b(()=>{"use strict";Jr();Pt();St();JG();$t();Ar();Fn=new Ae,A_e=u.object({collectionMethod:u.enum(["explicit_form","voice_command","terms_acceptance","settings_toggle"]).default("explicit_form"),consentType:u.enum(["data_processing","marketing","analytics","third_party","voice_data","biometric","financial_data","location"])}),C_e=u.object({dateFrom:u.string().optional(),dateTo:u.string().optional(),format:u.enum(["json","csv","pdf"]).default("json"),requestType:u.enum(["full_data","full_export","transactions","profile","consents","audit_logs"]).default("full_export")}),O_e=u.object({reason:u.string().optional(),requestType:u.enum(["full_account","full_deletion","specific_data","anonymization"]),scope:u.record(u.string(),u.unknown()).optional()}),$_e=u.object({amount:u.number().positive("Valor deve ser positivo"),limitType:u.enum(["pix_daily","pix_daytime","pix_transaction","boleto_daily","transfer_daily","withdrawal_daily"])});Fn.get("/consent-templates",me,async t=>{let{db:e}=t.get("auth"),r=t.get("requestId");try{let o=await An(e).getConsentTemplates();return t.json({data:o,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return q.error("Failed to get consent templates",{error:n instanceof Error?n.message:"Unknown error",requestId:r}),t.json({code:"CONSENT_TEMPLATES_ERROR",error:"Erro ao buscar modelos de consentimento"},500)}});Fn.get("/consents",me,xe({windowMs:6e4,max:30,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await An(r).getUserConsents(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get user consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONSENTS_ERROR",error:"Erro ao buscar consentimentos"},500)}});Fn.get("/consents/missing",me,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await An(r).getMissingMandatoryConsents(e.id);return t.json({data:{hasMissing:i.length>0,missingConsents:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get missing consents",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"MISSING_CONSENTS_ERROR",error:"Erro ao verificar consentimentos"},500)}});Fn.post("/consents",me,xe({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),Je("json",A_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),a=t.req.header("user-agent"),l=await An(r).grantConsent(e.id,n.consentType,n.collectionMethod,i,a);return q.info("Consent granted",{consentType:n.consentType,requestId:o,userId:e.id}),t.json({data:l,meta:{requestId:o,grantedAt:new Date().toISOString()}},201)}catch(i){return q.error("Failed to grant consent",{consentType:n.consentType,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_GRANT_ERROR",error:"Erro ao registrar consentimento"},500)}});Fn.delete("/consents/:type",me,xe({windowMs:6e4,max:20,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("type"),o=t.get("requestId");try{return await An(r).revokeConsent(e.id,n),q.info("Consent revoked",{consentType:n,requestId:o,userId:e.id}),t.json({data:{success:!0,message:"Consentimento revogado com sucesso"},meta:{requestId:o,revokedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to revoke consent",{consentType:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONSENT_REVOKE_ERROR",error:"Erro ao revogar consentimento"},500)}});Fn.get("/export-requests",me,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await An(r).getExportRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get export requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"EXPORT_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});Fn.post("/export-requests",me,xe({windowMs:36e5,max:5,message:"Limite de solicita\xE7\xF5es atingido"}),Je("json",C_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await An(r).createExportRequest(e.id,n.requestType,n.format,n.dateFrom,n.dateTo,i);return q.info("Export request created",{format:n.format,requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){return q.error("Failed to create export request",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"EXPORT_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});Fn.get("/deletion-requests",me,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await An(r).getDeletionRequests(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get deletion requests",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"DELETION_REQUESTS_ERROR",error:"Erro ao buscar solicita\xE7\xF5es"},500)}});Fn.post("/deletion-requests",me,xe({windowMs:864e5,max:3,message:"Limite di\xE1rio atingido"}),Je("json",O_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=t.req.header("x-forwarded-for")??t.req.header("x-real-ip"),c=await An(r).createDeletionRequest(e.id,n.requestType,n.scope,n.reason,i);return q.info("Deletion request created",{requestId:o,requestType:n.requestType,userId:e.id}),t.json({data:c,meta:{requestId:o,createdAt:new Date().toISOString()}},201)}catch(i){let a=i instanceof Error?i.message:"Unknown error";return q.error("Failed to create deletion request",{error:a,requestId:o,userId:e.id}),a.includes("reten\xE7\xE3o legal")?t.json({code:"LEGAL_HOLD",error:a},403):t.json({code:"DELETION_REQUEST_ERROR",error:"Erro ao criar solicita\xE7\xE3o"},500)}});Fn.get("/limits",me,async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let i=await An(r).getTransactionLimits(e.id);return t.json({data:i,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get transaction limits",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"LIMITS_ERROR",error:"Erro ao buscar limites"},500)}});Fn.post("/limits/check",me,xe({windowMs:6e4,max:60,message:"Muitas verifica\xE7\xF5es"}),Je("json",$_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let a=await An(r).checkTransactionLimit(e.id,n.limitType,n.amount);return t.json({data:a,meta:{requestId:o,checkedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to check transaction limit",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",limitType:n.limitType,requestId:o,userId:e.id}),t.json({code:"LIMIT_CHECK_ERROR",error:"Erro ao verificar limite"},500)}});Fn.get("/audit",me,xe({windowMs:6e4,max:10,message:"Muitas requisi\xE7\xF5es"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=Number(t.req.query("limit"))||50,i=t.req.query("eventType"),c=await An(r).getAuditHistory(e.id,{limit:o,eventType:i||void 0});return t.json({data:c,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get audit history",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"AUDIT_ERROR",error:"Erro ao buscar hist\xF3rico"},500)}});e1=Fn});var R_e,qy,KG,Yo,N_e,D_e,j_e,M_e,t1,WG=b(()=>{"use strict";Jr();zr();Pt();St();Lr();$t();MA();Ar();R_e=/^\d{10,11}$/,qy=s(t=>t?t.replace(/\D/g,""):t??void 0,"normalizeDigits"),KG=s(t=>({...t,cpf:t.cpf?qy(t.cpf):t.cpf,email:t.email?.trim().toLowerCase(),phone:t.phone?qy(t.phone):t.phone}),"sanitizeContactFields"),Yo=new Ae,N_e=u.object({cpf:u.string().optional(),email:u.string().email().optional(),isFavorite:u.boolean().default(!1),name:u.string().min(1,"Nome \xE9 obrigat\xF3rio"),notes:u.string().optional(),phone:u.string().optional()}),D_e=u.object({cpf:u.string().optional().refine(t=>!t||DB(qy(t)??""),"CPF inv\xE1lido"),email:u.string().email().optional(),id:u.string().uuid(),isFavorite:u.boolean().optional(),name:u.string().optional(),notes:u.string().optional(),phone:u.string().optional().refine(t=>!t||R_e.test(qy(t)??""),"Telefone inv\xE1lido")}),j_e=u.object({isFavorite:u.boolean().optional(),limit:u.number().min(1).max(100).default(50),offset:u.number().default(0),search:u.string().optional()}),M_e=u.object({limit:u.number().min(1).max(20).default(10),query:u.string().min(1,"Query de busca \xE9 obrigat\xF3ria")});Yo.get("/",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Je("query",j_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[J(Re.userId,e.id)];if(n.search){let l=`%${n.search}%`,d=qs(Hr(Re.name,l),Hr(Re.email,l),Hr(Re.phone,l));d&&i.push(d)}n.isFavorite!==void 0&&i.push(J(Re.isFavorite,n.isFavorite));let[{total:a}]=await r.select({total:p$()}).from(Re).where(Ie(...i)),c=await r.select().from(Re).where(Ie(...i)).orderBy(Kt(Re.isFavorite),Vi(Re.name)).limit(n.limit).offset(n.offset);return t.json({data:{contacts:c,hasMore:a>n.offset+n.limit,total:a},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to get contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACTS_ERROR",error:"Failed to retrieve contacts"},500)}});Yo.get("/:id",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select().from(Re).where(Ie(J(Re.id,n),J(Re.userId,e.id))).limit(1);return i?t.json({data:i,meta:{requestId:o,retrievedAt:new Date().toISOString()}}):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return q.error("Failed to get contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_ERROR",error:"Failed to retrieve contact"},500)}});Yo.post("/",me,xe({windowMs:60*1e3,max:20,message:"Too many creation attempts, please try again later"}),Je("json",N_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=KG(n),[a]=await r.insert(Re).values({userId:e.id,name:i.name,email:i.email??null,phone:i.phone??null,cpf:i.cpf??null,notes:i.notes??null,isFavorite:i.isFavorite??!1,createdAt:new Date,updatedAt:new Date}).returning();return q.info("Contact created",{contactId:a.id,contactName:n.name,requestId:o,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return i instanceof Error&&i.message.includes("unique constraint")?t.json({code:"CONFLICT",error:"Email ou telefone j\xE1 cadastrado para este usu\xE1rio"},409):(q.error("Failed to create contact",{contactName:n.name,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_CREATE_ERROR",error:"Failed to create contact"},500))}});Yo.put("/:id",me,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Je("json",D_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let{id:a,...c}=o,l=KG(c),d={updatedAt:new Date};l.name!==void 0&&(d.name=l.name),l.email!==void 0&&(d.email=l.email??null),l.phone!==void 0&&(d.phone=l.phone??null),l.cpf!==void 0&&(d.cpf=l.cpf??null),l.notes!==void 0&&(d.notes=l.notes??null),l.isFavorite!==void 0&&(d.isFavorite=l.isFavorite);let[p]=await r.update(Re).set(d).where(Ie(J(Re.id,n),J(Re.userId,e.id))).returning();return p?(q.info("Contact updated",{contactId:n,requestId:i,updatedFields:Object.keys(c).filter(m=>m!=="updatedAt"),userId:e.id}),t.json({data:p,meta:{requestId:i,updatedAt:new Date().toISOString()}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(a){return q.error("Failed to update contact",{contactId:n,error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"CONTACT_UPDATE_ERROR",error:"Failed to update contact"},500)}});Yo.delete("/:id",me,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.delete(Re).where(Ie(J(Re.id,n),J(Re.userId,e.id))).returning();return i?(q.info("Contact deleted",{contactId:n,requestId:o,userId:e.id}),t.json({data:{id:n,success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}})):t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404)}catch(i){return q.error("Failed to delete contact",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"CONTACT_DELETE_ERROR",error:"Failed to delete contact"},500)}});Yo.get("/search",me,xe({windowMs:60*1e3,max:20,message:"Too many search attempts, please try again later"}),Je("query",M_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=`%${n.query}%`,a=await r.select({id:Re.id,name:Re.name,email:Re.email,phone:Re.phone,isFavorite:Re.isFavorite}).from(Re).where(Ie(J(Re.userId,e.id),qs(Hr(Re.name,i),Hr(Re.email,i),Hr(Re.phone,i)))).orderBy(Kt(Re.isFavorite),Vi(Re.name)).limit(n.limit);return q.info("Contacts searched",{requestId:o,resultsCount:a.length,searchQuery:n.query,userId:e.id}),t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to search contacts",{error:i instanceof Error?i.message:"Unknown error",requestId:o,searchQuery:n.query,userId:e.id}),t.json({code:"CONTACT_SEARCH_ERROR",error:"Failed to search contacts"},500)}});Yo.get("/favorites",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select().from(Re).where(Ie(J(Re.userId,e.id),J(Re.isFavorite,!0))).orderBy(Vi(Re.name));return q.info("Favorite contacts retrieved",{favoritesCount:o.length,requestId:n,userId:e.id}),t.json({data:o,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get favorite contacts",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"FAVORITES_ERROR",error:"Failed to retrieve favorite contacts"},500)}});Yo.post("/:id/favorite",me,xe({windowMs:60*1e3,max:30,message:"Too many toggle attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{let[i]=await r.select({isFavorite:Re.isFavorite}).from(Re).where(Ie(J(Re.id,n),J(Re.userId,e.id))).limit(1);if(!i)return t.json({code:"NOT_FOUND",error:"Contato n\xE3o encontrado"},404);let[a]=await r.update(Re).set({isFavorite:!i.isFavorite,updatedAt:new Date}).where(Ie(J(Re.id,n),J(Re.userId,e.id))).returning();return q.info("Contact favorite status toggled",{contactId:n,newStatus:!i.isFavorite,previousStatus:i.isFavorite,requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to toggle favorite status",{contactId:n,error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"FAVORITE_TOGGLE_ERROR",error:"Failed to toggle favorite status"},500)}});Yo.get("/stats",me,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let o=await r.select({isFavorite:Re.isFavorite,email:Re.email,phone:Re.phone}).from(Re).where(J(Re.userId,e.id)),i=o.length,a=o.filter(d=>d.isFavorite).length,c=o.filter(d=>d.email).length,l=o.filter(d=>d.phone).length;return t.json({data:{contactsWithEmail:c,contactsWithPhone:l,favoriteContacts:a,favoritePercentage:i>0?a/i*100:0,totalContacts:i},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get contact statistics",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"CONTACT_STATS_ERROR",error:"Failed to retrieve contact statistics"},500)}});t1=Yo});var ei,Np,Mi,r1,QG=b(()=>{"use strict";Pt();$t();Ar();ei=new Ae,Np={code:"NOT_IMPLEMENTED",error:"Google Calendar sync is temporarily unavailable during migration. Please check back later.",message:"Esta funcionalidade est\xE1 temporariamente indispon\xEDvel durante a migra\xE7\xE3o do sistema."},Mi=xe({max:30,message:"Muitas requisi\xE7\xF5es, tente novamente mais tarde",windowMs:60*1e3});ei.get("/sync/status",me,Mi,async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");return q.info("Google Calendar status requested (not implemented)",{requestId:r,userId:e.id}),t.json({data:{googleEmail:null,isConnected:!1,isEnabled:!1,lastSyncAt:null,migrationNotice:"Google Calendar sync is being migrated to new infrastructure"},meta:{requestId:r,retrievedAt:new Date().toISOString()}},200)});ei.get("/sync/settings",me,Mi,async t=>{let e=t.get("requestId");return t.json({data:null,meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});ei.get("/sync/history",me,Mi,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});ei.put("/sync/settings",me,Mi,async t=>{let e=t.get("requestId");return t.json({...Np,meta:{requestId:e}},501)});ei.post("/sync/full",me,Mi,async t=>{let e=t.get("requestId");return t.json({...Np,meta:{requestId:e}},501)});ei.post("/sync/incremental",me,Mi,async t=>{let e=t.get("requestId");return t.json({...Np,meta:{requestId:e}},501)});ei.post("/sync/event",me,Mi,async t=>{let e=t.get("requestId");return t.json({...Np,meta:{requestId:e}},501)});ei.post("/sync/channel/renew",me,Mi,async t=>{let e=t.get("requestId");return t.json({...Np,meta:{requestId:e}},501)});ei.get("/sync/conflicts",me,Mi,async t=>{let e=t.get("requestId");return t.json({data:[],meta:{requestId:e,retrievedAt:new Date().toISOString(),notice:"Google Calendar sync is being migrated"}},200)});r1=ei});async function XG(t){let e=Date.now();try{let r="error";try{r="connected"}catch(i){q.error("Database health check failed",{error:i}),r="error"}let n=r==="connected",o={services:{database:r,api:n?"operational":"down",auth:n?"operational":"down"},status:n?"ok":"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"};return q.info("Health check completed",{databaseStatus:r,duration:Date.now()-e,status:o.status}),t.json(o)}catch(r){return q.error("Health check error",{duration:Date.now()-e,error:r instanceof Error?r.message:"Unknown error"}),t.json({services:{database:"error",api:"down",auth:"down"},status:"error",timestamp:new Date().toISOString(),uptime:process.uptime(),version:"1.0.0"},500)}}var Dp,ict,n1,YG=b(()=>{"use strict";Pt();St();$t();Dp=new Ae,ict=u.object({services:u.object({database:u.enum(["connected","disconnected","error"]),api:u.enum(["operational","degraded","down"]),auth:u.enum(["operational","degraded","down"])}),status:u.enum(["ok","error"]),timestamp:u.string(),uptime:u.number(),version:u.string()});s(XG,"healthCheckHandler");Dp.get("/",XG);Dp.get("/health",XG);Dp.get("/ping",t=>t.json({message:"pong",timestamp:new Date().toISOString(),version:"v1"}));Dp.get("/auth",async t=>{let e=t.get("auth");return t.json({authenticated:!!e,services:{database:"connected",api:"operational",auth:"operational"},status:"ok",timestamp:new Date().toISOString(),user:e?{id:e.user.id,email:e.user.email}:null,version:"1.0.0"})});n1=Dp});var z_e,eK,U_e,fu,o1,tK=b(()=>{"use strict";Jr();zr();Pt();St();Lr();$t();Ar();z_e=u.object({limit:u.coerce.number().int().min(1).max(100).default(50),offset:u.coerce.number().int().min(0).default(0),categoryId:u.string().optional(),accountId:u.string().optional(),type:u.enum(["transfer","debit","credit","pix","boleto"]).optional(),status:u.enum(["cancelled","failed","pending","posted"]).optional(),startDate:u.string().optional(),endDate:u.string().optional(),search:u.string().optional()}),eK=u.object({amount:u.number(),categoryId:u.string().optional(),description:u.string(),transactionType:u.enum(["transfer","debit","credit","pix","boleto"]),status:u.enum(["cancelled","failed","pending","posted"]).default("pending"),transactionDate:u.string().optional(),accountId:u.string().optional(),paymentMethod:u.string().optional(),merchantName:u.string().optional(),notes:u.string().optional(),tags:u.array(u.string()).optional()}),U_e=u.object({period:u.enum(["week","month","quarter","year"]).default("month"),accountId:u.string().optional()}),fu=new Ae;fu.get("/",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),Je("query",z_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("query"),o=t.get("requestId");try{let i=[J(oe.userId,e.id)];n.categoryId&&i.push(J(oe.categoryId,n.categoryId)),n.accountId&&i.push(J(oe.accountId,n.accountId)),n.type&&i.push(J(oe.transactionType,n.type)),n.status&&i.push(J(oe.status,n.status)),n.startDate&&i.push(Tr(oe.transactionDate,new Date(n.startDate))),n.endDate&&i.push(hr(oe.transactionDate,new Date(n.endDate))),n.search&&i.push(Hr(oe.description,`%${n.search}%`));let a=await r.select().from(oe).where(Ie(...i)).orderBy(Kt(oe.createdAt)).limit(n.limit).offset(n.offset);return t.json({data:a,meta:{requestId:o,retrievedAt:new Date().toISOString(),total:a.length}})}catch(i){return q.error("Failed to get transactions",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"TRANSACTIONS_ERROR",error:"Failed to retrieve transactions"},500)}});fu.get("/statistics",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Je("query",U_e),async t=>{let{user:e,db:r}=t.get("auth"),{period:n}=t.req.valid("query"),o=t.get("requestId");try{let i=new Date,a=new Date;switch(n){case"week":a.setDate(i.getDate()-7);break;case"month":a.setMonth(i.getMonth()-1);break;case"quarter":a.setMonth(i.getMonth()-3);break;case"year":a.setFullYear(i.getFullYear()-1);break}let c=await r.select().from(oe).where(Ie(J(oe.userId,e.id),Tr(oe.transactionDate,a),hr(oe.transactionDate,i))),l=c.reduce((m,h)=>m+Number(h.amount),0),d=c.filter(m=>Number(m.amount)<0).reduce((m,h)=>m+Math.abs(Number(h.amount)),0),p=c.filter(m=>Number(m.amount)>0).reduce((m,h)=>m+Number(h.amount),0);return t.json({data:{balance:l,expenses:d,income:p,period:n,transactionsCount:c.length},meta:{requestId:o,retrievedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to get transaction statistics",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"STATISTICS_ERROR",error:"Failed to retrieve statistics"},500)}});fu.post("/",me,xe({windowMs:60*1e3,max:10,message:"Too many transaction creation attempts, please try again later"}),Je("json",eK),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i=new Date,[a]=await r.insert(oe).values({userId:e.id,amount:n.amount.toString(),description:n.description,transactionType:n.transactionType,status:n.status,transactionDate:n.transactionDate?new Date(n.transactionDate):i,categoryId:n.categoryId,accountId:n.accountId,paymentMethod:n.paymentMethod,merchantName:n.merchantName,notes:n.notes,tags:n.tags,isManualEntry:!0}).returning();return q.info("Transaction created",{amount:n.amount,requestId:o,transactionId:a.id,type:n.transactionType,userId:e.id}),t.json({data:a,meta:{createdAt:new Date().toISOString(),requestId:o}},201)}catch(i){return q.error("Failed to create transaction",{amount:n.amount,error:i instanceof Error?i.message:"Unknown error",requestId:o,type:n.transactionType,userId:e.id}),t.json({code:"TRANSACTION_CREATE_ERROR",error:"Failed to create transaction"},500)}});fu.put("/:id",me,xe({windowMs:60*1e3,max:30,message:"Too many update attempts, please try again later"}),Je("json",eK.partial()),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.req.valid("json"),i=t.get("requestId");try{let[a]=await r.select({id:oe.id}).from(oe).where(Ie(J(oe.id,n),J(oe.userId,e.id))).limit(1);if(!a)return t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada"},404);let c={updatedAt:new Date};o.description!==void 0&&(c.description=o.description),o.amount!==void 0&&(c.amount=o.amount.toString()),o.transactionType!==void 0&&(c.transactionType=o.transactionType),o.status!==void 0&&(c.status=o.status),o.categoryId!==void 0&&(c.categoryId=o.categoryId),o.accountId!==void 0&&(c.accountId=o.accountId),o.paymentMethod!==void 0&&(c.paymentMethod=o.paymentMethod),o.merchantName!==void 0&&(c.merchantName=o.merchantName),o.notes!==void 0&&(c.notes=o.notes),o.tags!==void 0&&(c.tags=o.tags);let[l]=await r.update(oe).set(c).where(Ie(J(oe.id,n),J(oe.userId,e.id))).returning();return q.info("Transaction updated",{requestId:i,transactionId:n,userId:e.id}),t.json({data:l,meta:{updatedAt:new Date().toISOString(),requestId:i}})}catch(a){return q.error("Failed to update transaction",{error:a instanceof Error?a.message:"Unknown error",requestId:i,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_UPDATE_ERROR",error:"Failed to update transaction"},500)}});fu.delete("/:id",me,xe({windowMs:60*1e3,max:20,message:"Too many deletion attempts, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.param("id"),o=t.get("requestId");try{return(await r.delete(oe).where(Ie(J(oe.id,n),J(oe.userId,e.id))).returning()).length===0?t.json({code:"NOT_FOUND",error:"Transa\xE7\xE3o n\xE3o encontrada ou permiss\xE3o negada"},404):(q.info("Transaction deleted",{requestId:o,transactionId:n,userId:e.id}),t.json({data:{success:!0},meta:{deletedAt:new Date().toISOString(),requestId:o}}))}catch(i){return q.error("Failed to delete transaction",{error:i instanceof Error?i.message:"Unknown error",requestId:o,transactionId:n,userId:e.id}),t.json({code:"TRANSACTION_DELETE_ERROR",error:"Failed to delete transaction"},500)}});o1=fu});var L_e,q_e,F_e,rK,ya,i1,nK=b(()=>{"use strict";Jr();zr();Pt();St();Lr();$t();Ar();L_e=u.object({full_name:u.string().optional(),phone:u.string().optional(),cpf:u.string().optional(),birth_date:u.string().optional(),profile_image_url:u.string().url().optional()}),q_e=u.record(u.string(),u.any()),F_e=u.object({period_start:u.string(),period_end:u.string()}),rK=["theme","notificationsEmail","notificationsPush","notificationsSms","autoCategorize","budgetAlerts","voiceFeedback","accessibilityHighContrast","accessibilityLargeText","accessibilityScreenReader"],ya=new Ae;ya.get("/me",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select().from(W).where(J(W.id,e.id)).limit(1);return t.json({data:o||null,meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to get user profile",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({code:"PROFILE_ERROR",error:"Failed to retrieve profile"},500)}});ya.put("/me",me,xe({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Je("json",L_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let i={updatedAt:new Date};n.full_name&&(i.fullName=n.full_name),n.phone&&(i.phone=n.phone),n.cpf&&(i.cpf=n.cpf),n.birth_date&&(i.birthDate=n.birth_date),n.profile_image_url&&(i.profileImageUrl=n.profile_image_url);let[a]=await r.update(W).set(i).where(J(W.id,e.id)).returning();return q.info("User profile updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to update user profile",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PROFILE_UPDATE_ERROR",error:"Failed to update profile"},500)}});ya.put("/me/preferences",me,xe({windowMs:60*1e3,max:20,message:"Too many update attempts, please try again later"}),Je("json",q_e),async t=>{let{user:e,db:r}=t.get("auth"),n=t.req.valid("json"),o=t.get("requestId");try{let[i]=await r.select({id:_n.id}).from(_n).where(J(_n.userId,e.id)).limit(1),a;if(i){let c={updatedAt:new Date};for(let l of rK)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.update(_n).set(c).where(J(_n.id,i.id)).returning()}else{let c={userId:e.id,createdAt:new Date,updatedAt:new Date};for(let l of rK)n[l]!==void 0&&(c[l]=n[l]);[a]=await r.insert(_n).values(c).returning()}return q.info("User preferences updated",{requestId:o,userId:e.id}),t.json({data:a,meta:{requestId:o,updatedAt:new Date().toISOString()}})}catch(i){return q.error("Failed to update user preferences",{error:i instanceof Error?i.message:"Unknown error",requestId:o,userId:e.id}),t.json({code:"PREFERENCES_UPDATE_ERROR",error:"Failed to update preferences"},500)}});ya.post("/me/last-login",me,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{return await r.update(W).set({lastLogin:new Date}).where(J(W.id,e.id)),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}catch(o){return q.warn("Failed to update last login",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{success:!0},meta:{requestId:n,updatedAt:new Date().toISOString()}})}});ya.get("/me/status",me,xe({windowMs:60*1e3,max:30,message:"Too many requests, please try again later"}),async t=>{let{user:e,db:r}=t.get("auth"),n=t.get("requestId");try{let[o]=await r.select({isActive:W.isActive,lastLogin:W.lastLogin}).from(W).where(J(W.id,e.id)).limit(1);return o?t.json({data:{isActive:o.isActive,lastLogin:o.lastLogin?.toISOString()||null},meta:{requestId:n,retrievedAt:new Date().toISOString()}}):t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}catch(o){return q.error("Failed to check user status",{error:o instanceof Error?o.message:"Unknown error",requestId:n,userId:e.id}),t.json({data:{isActive:!1,lastLogin:null},meta:{requestId:n,retrievedAt:new Date().toISOString()}})}});ya.get("/me/financial-summary",me,xe({windowMs:60*1e3,max:20,message:"Too many requests, please try again later"}),Je("query",F_e),async t=>{let{user:e,db:r}=t.get("auth"),{period_start:n,period_end:o}=t.req.valid("query"),i=t.get("requestId");try{let c=(await r.select({amount:vt.amount,isIncome:vt.isIncome}).from(vt).where(Ie(J(vt.userId,e.id),Tr(vt.createdAt,new Date(n)),hr(vt.createdAt,new Date(o))))).reduce((l,d)=>{let p=Number(d.amount);return d.isIncome?(l.income+=p,l.balance+=p):(l.expenses+=p,l.balance-=p),l},{income:0,expenses:0,balance:0});return t.json({data:c,meta:{requestId:i,retrievedAt:new Date().toISOString()}})}catch(a){return q.error("Failed to get financial summary",{error:a instanceof Error?a.message:"Unknown error",requestId:i,userId:e.id}),t.json({code:"FINANCIAL_SUMMARY_ERROR",error:"Failed to retrieve financial summary"},500)}});i1=ya});function B_e(t){let e=t.toLowerCase().trim(),r={},n=[{intent:"check_balance",patterns:["saldo","quanto tenho","quanto dinheiro","verificar saldo"]},{intent:"transfer_money",patterns:["transferir","pagar","enviar dinheiro","mandar dinheiro"],entityExtractor:s(o=>V_e(o,r),"entityExtractor")},{intent:"pay_bill",patterns:["conta","boleto","pagar conta","pagar boleto"],entityExtractor:s(()=>H_e(e,r),"entityExtractor")},{intent:"transaction_history",patterns:["extrato","transa\xE7\xF5es","historico","compras"]},{intent:"pix_transfer",patterns:["pix","fazer pix"],entityExtractor:s(o=>Z_e(o,r),"entityExtractor")}];for(let{intent:o,patterns:i,entityExtractor:a}of n)if(i.some(c=>e.includes(c)))return a&&a(t),{intent:o,entities:r,confidence:.9};return{intent:"unknown",entities:r,confidence:.3}}function V_e(t,e){let r=t.match(/r?\$?\s*(\d+(?:,\d{1,2})?)/i);if(r){let o=Number.parseFloat(r[1].replace(",","."));e.amount=o,e.currency="BRL"}let n=t.match(/(?:para|para o|para a)\s+([a-z-\s]{2,30})/i);n&&(e.recipient=n[1].trim())}function H_e(t,e){t.includes("luz")?e.billType="electricity":t.includes("\xE1gua")?e.billType="water":t.includes("telefone")?e.billType="phone":t.includes("internet")&&(e.billType="internet")}function Z_e(t,e){let r=t.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/),n=t.match(/\(?(\d{2})?\)?\s?(\d{4,5})-?(\d{4})/),o=t.match(/\b\d{3}\.?\d{3}\.?\d{3}-?\d{2}\b/);r?(e.pixKey=r[1],e.pixKeyType="EMAIL"):n?(e.pixKey=n[0],e.pixKeyType="PHONE"):o&&(e.pixKey=o[0],e.pixKeyType="CPF")}function J_e(t,e){switch(t){case"check_balance":return"Verificando seu saldo...";case"transfer_money":return e.amount&&e.recipient?`Preparando transfer\xEAncia de R$ ${e.amount} para ${e.recipient}`:"Entendi que quer transferir dinheiro. Para quem e quanto?";case"pay_bill":return"Buscando suas contas a pagar...";case"transaction_history":return"Mostrando seu hist\xF3rico de transa\xE7\xF5es...";case"pix_transfer":return"Preparando transfer\xEAncia PIX...";default:return"N\xE3o entendi o comando. Pode repetir?"}}async function oK(t){let{commandText:e,sessionId:r,language:n,requireConfirmation:o,userId:i}=t,a=e??"";await new Promise(y=>setTimeout(y,300));let{intent:c,entities:l,confidence:d}=B_e(a),p=d<.8||(o??!1),m=J_e(c,l);return{confidence:d,entities:l,intent:c,language:n??"pt-BR",processedAt:new Date().toISOString(),requiresConfirmation:p,response:m,sessionId:r}}function iK(){return{commands:[{description:"Verificar saldo da conta",examples:["Qual \xE9 o meu saldo?","Quanto dinheiro eu tenho?","Mostrar meu saldo"],name:"check_balance"},{description:"Transferir dinheiro para outra conta",examples:["Transferir R$ 100 para Jo\xE3o","Pagar 50 reais para Maria","Enviar R$ 200 para o email teste@email.com"],name:"transfer_money"},{description:"Pagar contas e boletos",examples:["Pagar conta de luz","Pagar boleto do cart\xE3o","Quitar conta de telefone"],name:"pay_bill"},{description:"Fazer transfer\xEAncia PIX",examples:["Fazer PIX para o CPF 123.456.789-00","Enviar PIX para o telefone 11999999999","Transferir por PIX para maria@email.com"],name:"pix_transfer"},{description:"Ver hist\xF3rico de transa\xE7\xF5es",examples:["Mostrar minhas transa\xE7\xF5es","Ver extrato do m\xEAs","Hist\xF3rico de compras"],name:"transaction_history"}],language:"pt-BR"}}var sK=b(()=>{"use strict";s(B_e,"detectIntentAndEntities");s(V_e,"extractTransferEntities");s(H_e,"extractBillEntities");s(Z_e,"extractPixEntities");s(J_e,"generateResponse");s(oK,"processVoiceCommand");s(iK,"getAvailableCommands")});var s1,G_e,$ct,a1,aK=b(()=>{"use strict";Jr();Pt();St();$t();Ar();sK();s1=new Ae,G_e=u.object({commandText:u.string().min(1).max(1e3).optional(),sessionId:u.string().uuid(),audioData:u.string().optional(),language:u.string().default("pt-BR"),requireConfirmation:u.boolean().default(!1)}).refine(t=>t.audioData||t.commandText,{message:"Dados de \xE1udio ou texto do comando s\xE3o obrigat\xF3rios",path:["audioData"]}),$ct=u.object({commands:u.array(u.object({description:u.string(),examples:u.array(u.string()),name:u.string()})),language:u.string()});s1.post("/process",me,xe({windowMs:60*1e3,max:30,message:"Too many voice commands, please try again later"}),Je("json",G_e),async t=>{let{user:e}=t.get("auth"),r=t.req.valid("json"),n=t.get("requestId"),{commandText:o,sessionId:i,audioData:a,language:c,requireConfirmation:l}=r,d=o??"";try{q.audit("Voice command processing started",{commandLength:d.length,component:"voice.processCommand",requestId:n,userId:e.id});let p=await oK({audioData:a,commandText:d,userId:e.id,context:{user:e},language:c,requireConfirmation:l,sessionId:i});return q.audit("Voice command processing completed",{command:d,requestId:n,result:p,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({data:p,meta:{processedAt:new Date().toISOString(),requestId:n}})}catch(p){return q.audit("Voice command processing failed",{command:d,error:p instanceof Error?p.message:"Unknown error",requestId:n,sessionId:i,timestamp:new Date().toISOString(),userId:e.id}),t.json({code:"VOICE_PROCESSING_ERROR",details:{command:d.substring(0,50)},error:"Failed to process voice command"},500)}});s1.get("/commands",me,xe({windowMs:60*1e3,max:10,message:"Too many requests, please try again later"}),async t=>{let{user:e}=t.get("auth"),r=t.get("requestId");try{let n=iK();return q.info("Voice commands list accessed",{requestId:r,userId:e.id}),t.json({data:n,meta:{requestId:r,retrievedAt:new Date().toISOString()}})}catch(n){return q.error("Failed to get voice commands",{error:n instanceof Error?n.message:"Unknown error",requestId:r,userId:e.id}),t.json({code:"COMMANDS_RETRIEVAL_ERROR",error:"Failed to retrieve voice commands"},500)}});a1=s1});var cK=b(()=>{"use strict";lL();RB();ZB();JB();HG();ZG();GG();WG();QG();YG();tK();nK();aK()});var uK={};On(uK,{default:()=>K_e});var ir,K_e,lK=b(()=>{"use strict";Pt();B1();$t();eO();nO();GN();WN();jD();cK();ir=new Ae;ir.use("*",F1());ir.use("*",rO);ir.use("*",async(t,e)=>{let r=crypto.randomUUID();t.set("requestId",r),await e()});KN(ir);JN(ir);ir.route("/api/v1",n1);ir.route("/api/v1/voice",a1);ir.route("/api/v1/banking",qA);ir.route("/api/v1/contacts",t1);ir.route("/api/v1/bank-accounts",LA);ir.route("/api/v1/users",i1);ir.route("/api/v1/transactions",o1);ir.route("/api/v1/calendar",QC);ir.route("/api/v1/google-calendar",r1);ir.route("/api/v1/compliance",e1);ir.route("/api/v1/billing",KC);ir.route("/api/v1/ai",Fd);ir.route("/api/v1/agent",SI);ir.route("/cron",Y1);DD(ir);ir.notFound(t=>{let e=t.get("requestId");return q.warn("Route not found",{ip:t.req.header("X-Forwarded-For")||t.req.header("X-Real-IP")||"unknown",method:t.req.method,path:t.req.path,requestId:e,userAgent:t.req.header("User-Agent")||"unknown"}),t.json({error:"Not Found",message:`Route ${t.req.method} ${t.req.path} not found`,requestId:e,timestamp:new Date().toISOString()},404)});ir.onError((t,e)=>{let r=e.get("requestId");return q.error("Unhandled error",{error:t.message,method:e.req.method,path:e.req.path,requestId:r,stack:t.stack}),e.json({error:"Internal server error",requestId:r,timestamp:new Date().toISOString()},500)});K_e=ir});Pt();var Fy;try{let{default:t}=await Promise.resolve().then(()=>(lK(),uK));Fy=t}catch(t){console.error("Failed to load main app:",t),Fy=new Ae,Fy.all("*",e=>{let r=t instanceof Error?t.message:"Unknown error",n=t instanceof Error?t.stack:void 0;return e.json({error:"Server initialization failed",message:r,stack:void 0,timestamp:new Date().toISOString()},500)})}var out=Fy;export{out as default};
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
